[00:04:06] *** Quits: brw (~bas@haring.bas.sh) (Quit: The Lounge - https://thelounge.chat)
[00:04:39] *** Joins: brw (~bas@haring.bas.sh)
[00:13:06] *** riotz- is now known as riotz
[00:14:40] *** Quits: sebastianos (~sebastian@user/sebastianos) (Ping timeout: 256 seconds)
[00:14:40] *** Quits: xMopx (~xMopx-lib@192.95.23.134) (Ping timeout: 256 seconds)
[00:14:46] *** Joins: Ivii (~Ivyy@2001:a62:4c3:8e01:dac0:2a17:49d5:efcf)
[00:14:47] *** Joins: Keridos_ (~Keridos@ironhide.de)
[00:14:53] *** Quits: jah (~jah@pool-71-171-110-4.clppva.fios.verizon.net) (Ping timeout: 256 seconds)
[00:14:53] *** Quits: chemsmith (~chemsmith@user/chemsmith) (Ping timeout: 256 seconds)
[00:15:27] *** Quits: l4yer (~l4yer@217-64-151-10.pool.ovpn.com) (Ping timeout: 256 seconds)
[00:15:27] *** Quits: Keridos (~Keridos@ironhide.de) (Ping timeout: 256 seconds)
[00:15:35] *** Joins: chemsmith (~chemsmith@user/chemsmith)
[00:16:00] *** Joins: sebastianos (~sebastian@user/sebastianos)
[00:16:21] *** Joins: xMopx (~xMopx-lib@192.95.23.134)
[00:16:50] *** Joins: tsal (~tsal@user/tsal)
[00:17:42] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:22:50] *** Joins: l4yer (~l4yer@217-64-151-10.pool.ovpn.com)
[00:27:28] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[00:28:10] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[00:29:49] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:655c:269a:c0b2:3abd)
[00:33:27] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[00:48:22] *** Quits: jmd (~user@de.cellform.com) (Remote host closed the connection)
[01:00:08] *** Quits: Brainium_ (~brainium@user/brainium) (Quit: Konversation terminated!)
[01:06:29] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:06:36] *** Quits: remolej (~kenoba@user/kenoba) (Quit: Ping timeout (120 seconds))
[01:08:52] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[01:12:25] *** Quits: node1 (~node1@user/node1) (Quit: Client closed)
[01:16:03] <tsal> I'm unsure if it is the right place to ask this, but I have been having some trouble getting my docker-compose setup in portainer to work as I want.
[01:16:20] <tsal> I have a docker-compose file that looks like this: https://pastebin.com/raw/Lf8SDVZQ
[01:17:01] <tsal> I expect /vol/postgres to be mounted under /var/lib/postgresql in the container
[01:17:47] <tsal> which it does, but it also mounts some volume made of hexadecimal charaters under /var/lib/postgresql/data
[01:18:04] <tsal> And I have not been able to figure out why and how to stop it
[01:18:47] <tsal> It looks like this in the portainer interface: https://i.imgur.com/fkM3H2V.png
[01:20:02] <ghostboarder> guys, since im kind of learning as i go with docker, i have been following a guide to set up bitwarden on a raspberrypi. One thing i noticed was that the author forgot to mention you had to download and install docker-compose as well. So i have done that, but now it is complaining that there is already a container called bitwarden. Should i just delete that container and let compose pull a fresh one?
[01:24:51] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Quit: Leaving)
[01:36:19] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:50:06] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[01:52:31] *** Joins: jazzy2 (~jaziz@user/jaziz)
[01:57:33] <tabakhase> tsal data is where your volume/mount should go as well - "where thats from" -> a VOLUME line in the dockerfile, so compose sticks an anonymous volume in there (no way to "unset" such a VOLUME line either - in some rare cases, changing the datadir is kinda the way to go (but for baking-in-data there is usually an "import on boot" mechanism that shall be used))
[01:58:22] <tabakhase> ("no way to unset" other than overwriting it with a) an actual volume or b) your bind-mount to be clear)
[02:01:13] <tsal> tabakhase: I see. So if I were to mount it like this "- "/vol/postgres:/var/lib/postgresql/data" " it should be fine as far as I undertand?
[02:03:04] <tsal> Huh, now it is just an an anonymous volume mounted at "/var/lib/postgresql/data", not my bind to the local directory
[02:03:28] *** Joins: AsenMx (~AsenMx@user/asenmx)
[02:05:54] <tabakhase> tsal yea a named volume or a bind will overwrite the annon path
[02:06:40] <tabakhase> if you see junk, make sure to actualy remove /--force-recreate that first container - seen it do funky things with changes on volumes...
[02:09:12] <tsal> tabakhase: removing and recreating did the trick. Thanks a lot!
[02:25:47] <rawtaz> ghostboarder: tahts not true - you dont need docker-compose to run bitwarden (are you really talking about bitwarden and not vaultwarden, btw?). but it makes it easier so definitely recommended. what error messages does the complaint consist of, please pastebin it?
[02:26:08] <rawtaz> also might be good to pastebin your compose file
[02:26:45] <ikke> rawtaz: They referred to some instructions that told them to use docker-compose
[02:27:25] <rawtaz> yeah. and probably followed them without having a single clue what the steps actually do :)
[02:30:02] *** Quits: Sven_vB_ (~sven@user/sven-vb/x-2094958) (Remote host closed the connection)
[02:30:31] *** Joins: Sven_vB (~sven@user/sven-vb/x-2094958)
[02:32:19] <ghostboarder> hey hey be nice :)
[02:32:31] <ghostboarder> im just learning docker but im not dumb =)
[02:33:04] <ghostboarder> and i know that you need to change the vars for your own setup, jeesh
[02:33:20] <ghostboarder> and yes rawtaz i am talking about vaultwarden
[02:33:39] <ghostboarder> same as the other day when i asked you
[02:35:34] <ghostboarder> fyi i DID delete the container and now docker-compose says: https://pastebin.com/8kmVjakf
[02:36:00] <ghostboarder> which is great, but when i check running containers it shows nginx restarting over and over
[02:36:41] <ghostboarder> so thats where im at now. Pretty close. I have a cert and DNS challenge all set up afaik
[02:37:08] <ikke> docker-compose logs --tail=20 nginx
[02:37:20] <ikke> (or whatever the nginx service is called)
[02:38:13] <rawtaz> ghostboarder: then for gods sake dont write the name of another product than the one you are talking about..
[02:38:52] <rawtaz> ghostboarder: looks like you have named the services in your dockerfile using the setting 'container_name'. i'd recommend you dont do that, let compose handle that for you
[02:39:25] <rawtaz> (or keep it if you want, i just dont see the point of it since you will handle all these service containers using compose anyway, so you dont *need* to have the fancy names for them :)
[02:40:47] <ghostboarder> i didnt pastebin my compose file yet, hang on
[02:40:54] <rawtaz> sure thing
[02:41:03] <rawtaz> (btw i dont think youre dumb :)
[02:43:01] <ghostboarder> https://pastebin.com/E2HHQ938
[02:43:30] <ghostboarder> k there is my compose file. This was the simplest (and i guess thats what compose is supposed to be, right?) way of getting vaultwarden and nginx working 
[02:43:58] <ghostboarder> all i had to do was updates and install docker and docker-compose
[02:44:44] <rawtaz> are you saying it works now, no problem?
[02:44:57] <ghostboarder> no, nginx keeps restarting
[02:45:36] <ghostboarder> so no https connection
[02:45:46] <ikke> ghostboarder: did you run the command I gave?
[02:46:34] <ghostboarder> just saw it
[02:46:38] <ghostboarder> result is
[02:46:40] <ghostboarder> pi@raspberrypi:/ $ docker-compose logs --tail=20 nginx
[02:46:40] <ghostboarder> Attaching to nginx
[02:46:50] <ghostboarder> thats a pretty short tail lol
[02:46:52] <ghostboarder> get it?
[02:46:55] <ghostboarder> anyway
[02:48:15] <rawtaz> how are you starting this compose application (what command)?
[02:48:53] <ghostboarder> docker-compose up -d
[02:50:26] <rawtaz> ditch the -d and see if you then get something
[02:50:42] <rawtaz> you can cancel it again with ctrl+c and then docker-compose down
[02:50:58] <ghostboarder> gotcha
[02:51:23] <rawtaz> if that doesnt give you any useful output youll have to get your latex gloves and prepare to go deeper
[02:52:50] <rawtaz> dont worry ikke, its not about you this time ;)
[02:52:52] <ghostboarder> ooooh i got something, ill paste
[02:53:09] <ghostboarder> ah, and i keep getting exit codes for nginx
[02:53:13] <ghostboarder> hang on
[02:53:17] <rawtaz> great
[02:54:04] <ghostboarder> i didnt get the ascii for VW before
[02:54:05] <ghostboarder> https://pastebin.com/fTEtYACp
[02:54:14] <ghostboarder> so thats interesting
[02:54:32] <ghostboarder> but as you can see, exit code 0, then 139 then 0 etc
[02:55:03] <ikke> https://stackoverflow.com/a/64995831/20261
[02:56:10] <ghostboarder> interesting
[03:00:14] <ikke> ghostboarder: try docker-compose run --rm nginx sh
[03:01:29] <ghostboarder> i ran docker inspect nginx and i couldnt find architechture anywhere. Docker pulls the correct version for your platform automatically, no?
[03:01:36] <ghostboarder> k ikke
[03:01:41] <ikke> ghostboarder: yes, it should
[03:03:06] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:03:46] <ghostboarder> k done, i did a ls -a and the container is still there, but i imagine the image is not? Do i have that right?
[03:04:05] <ikke> You are in the container now, but you run a shell instead of nginx
[03:04:07] <rawtaz> 00:31 < ghostboarder> i ran docker inspect nginx and i couldnt find architechture anywhere. Docker pulls the correct version for your platform automatically, no?
[03:04:13] <rawtaz> err
[03:04:15] <rawtaz> oops
[03:04:34] <ikke> ghostboarder: try nginx -v
[03:04:38] <ghostboarder> one thing i noticed when doing ls -a when the containers were running, there were no network ports set for nginx, which makes me wonder?
[03:05:16] <ghostboarder> command not found hmm
[03:05:27] <ghostboarder> oh wait, full name maybe
[03:05:41] <ghostboarder> fyi this compose pulls the alpine version of nginx
[03:06:25] <ikke> Yes, should not be an issue
[03:06:57] <ikke> when you run the container, you should get something like '/ #' as prompt
[03:07:20] <ghostboarder> ah, i do not
[03:07:47] <ghostboarder> just a delay and back to user prompt
[03:11:35] <rawtaz> what you want to do is simply start a shell in the nginx container, and then try to manually start nginx the same way its started by default but with the -v to it. the purpose is to see more info/output from it.
[03:11:42] <rawtaz> so figure out how to get the shell in that image
[03:12:00] <ghostboarder> ah ok gotcha
[03:12:19] <ghostboarder> then what is with the --rm?
[03:12:30] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[03:12:42] <ikke> it removes the container after you exit it
[03:12:51] <ikke> So it does not linger
[03:12:58] <ghostboarder> ah ok 
[03:13:33] <ghostboarder> now i have 2 containers since i thought i would be smart and ditch the --rm
[03:13:35] <ghostboarder> :P
[03:14:18] <ikke> Let's start even more simple
[03:14:39] <ghostboarder> got them both stopped, i can remove the other one
[03:15:17] <ikke> doesn't matter for now
[03:15:22] <rawtaz> ghostboarder: why dont you just `docker help run` to see what --rm does instead of ask?
[03:15:32] <ikke> the paste with your compose file is gone
[03:16:18] *** Quits: queue- (~nerd@user/queue/x-7267619) (Remote host closed the connection)
[03:16:34] <ghostboarder> well the rm command is somewhat obvious, i thought it couldnt hurt to not use it. I fixed what it did anyway
[03:16:37] <ghostboarder> hang on ikke
[03:16:46] <ikke> try docker run --it --rm --entrypoint "" nginx:stable-alpine sh
[03:16:57] <ikke> sorry, -it, not --it
[03:18:12] <ghostboarder> https://pastebin.com/rr0RFzZ0
[03:20:13] <ghostboarder> k done. just back to $ prompt
[03:22:08] <ikke> what does uname -m return?
[03:23:03] <ghostboarder> Arm v61
[03:23:11] <ghostboarder> Its a pi zero w
[03:23:12] <rawtaz> ghostboarder: please pastebin the complete commands and output (that is, just copy your shell text) for when you try the command you got from ikke and up to when you got the prompt back
[03:23:46] <ghostboarder> Thats why I'm wondering about nginx version
[03:23:51] <ghostboarder> Hang on rawtaz
[03:25:51] <ikke> I think that's armhf / arm32v6
[03:26:06] <ikke> yes
[03:26:36] <ikke> I think that nginx image is not built for that arch
[03:26:55] <ikke> "no matching manifest for linux/arm32v6 in the manifest list entries"
[03:27:50] <ghostboarder> well there we go
[03:28:20] <ghostboarder> ugh, all i have is a few of these little guys, the others have been deployed for other stuff like iot
[03:29:01] <ikke> hmm, maybe I'm doing something wrong
[03:29:18] <ikke> I cannot pull a base alpine image where I know it's available for arm32v6
[03:29:36] <ghostboarder> nginx:stable-alpine is the pkg name
[03:29:47] <rawtaz> isnt https://hub.docker.com/layers/alpine/library/alpine/latest/images/sha256-e047bc2af17934d38c5a7fa9f46d443f1de3a7675546402592ef805cfa929f9d?context=explore the same as for arm32v6?
[03:31:21] <rawtaz> never mind, that doesnt mean that https://hub.docker.com/_/nginx?tab=tags exists for that same arch
[03:31:32] <ghostboarder> i was in the process of setting up a VM with RpiOS to give this another try. the arch obviously is going to be different, but i can put what im learning here to use
[03:31:45] <ghostboarder> but its not looking like this will work
[03:31:49] <rawtaz> you could always just make your own nginx image
[03:31:57] <ikke> oh, it's just arm, not arm32v6
[03:31:57] <ghostboarder> compile?
[03:32:34] <rawtaz> this one seems to have arm/v6: https://hub.docker.com/_/caddy?tab=tags
[03:32:39] <ghostboarder> im def not at that point. I dont want to overwhelm myself with this. Compiling is a whole other thing
[03:32:50] <rawtaz> ghostboarder: its not that hard dude
[03:33:03] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[03:33:04] <rawtaz> all you have to do is look at the current nginx image's Dockerfile
[03:33:05] <ghostboarder> ah! ok could use caddy? Its supposed to be "easy"
[03:33:19] <rawtaz> caddy is easy. its you that are having a hard time
[03:34:20] <ghostboarder> lol yep
[03:34:25] *** Quits: gooble_gobble (~gooble_go@ool-457a99e2.dyn.optonline.net) (Ping timeout: 256 seconds)
[03:35:02] <ghostboarder> well is there a docker-compose out there for caddy with vaultwarden? ;)
[03:35:06] * ghostboarder searches
[03:35:11] <rawtaz> jesus christ
[03:35:16] <rawtaz> look
[03:35:20] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Read error: Connection reset by peer)
[03:35:26] <ghostboarder> one thing at a time, man!
[03:35:30] <ikke> ok found it
[03:35:36] <ikke> --platform linux/arm/v6
[03:36:00] <rawtaz> if you spend less time trying to find something served out of the box working, and instead take the same amount of time understanding what the dockerfile and compose files actually do, then youll end up with the same amount of time spend but with a successful result
[03:36:14] <rawtaz> you are spending way too much time on guides and examples instead of just learning this shit
[03:36:14] <ghostboarder> true enough....
[03:36:24] <ghostboarder> ok yes your right
[03:36:33] <rawtaz> you just have to get over a little hurdle :)
[03:36:41] *** Quits: very_sneaky (~very_snea@user/very-sneaky/x-7432109) (Ping timeout: 256 seconds)
[03:36:44] <ghostboarder> ok, lets do it then
[03:37:13] <ghostboarder> <ikke> --platform linux/arm/v6
[03:37:19] <ghostboarder> where did you find that?
[03:37:19] <rawtaz> i dont remember what the exact problem you had with caddy was, what was it? caddy has built-in lets encrypt support, as does traefik, so either of those would be nice to use with wvaultwarden
[03:37:35] <ikke> ghostboarder: does this work? 'docker run -it --rm --entrypoint sh --platform linux/arm/v6 nginx:stable-alpine'
[03:37:37] <ghostboarder> yeah at this point i dont remember either
[03:37:38] *** Joins: maroloccio (~marolocci@151.53.155.184)
[03:37:43] <ghostboarder> im def open to try again
[03:37:46] <rawtaz> ok
[03:38:03] <ikke> ghostboarder: https://docs.docker.com/desktop/multi-arch/
[03:38:09] <ikke> I saw linux/arm/v7 there
[03:38:24] *** Joins: very_sneaky (~very_snea@user/very-sneaky/x-7432109)
[03:38:38] <ghostboarder> ok it is pulling ikke
[03:38:53] <ghostboarder> same package name, hopefully right arch
[03:39:18] <ghostboarder> and it does say "newer image" now
[03:39:29] <ghostboarder> and i have a shell prompt :)
[03:39:47] <rawtaz> nice
[03:39:49] <ikke> ok, so the image that was pulled earlier was the incorrect arch for some reason
[03:40:06] <ghostboarder> yep, as we eventually figured out
[03:40:21] <ghostboarder> i feel like i should have known that, so.....sorry guys
[03:40:51] <rawtaz> honestly i never think about hte arch. but thats because im on an intel system. ill get bitten by that when i get an M1 some day..
[03:40:52] *** Joins: pycurious (~Adium@user/pycurious)
[03:40:52] *** Quits: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:e806:2000:4277:d3f3) (Quit: So as you can see from this flowchSQUIRREL!!)
[03:40:53] *** Joins: jazzy3 (~jaziz@user/jaziz)
[03:41:17] <ikke> I just saw that post when I looked for error code 139
[03:41:24] <ghostboarder> rawtaz: like i said man, i dabble in everything. Windows, linux, Pi, Android
[03:41:27] *** Quits: jazzy2 (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[03:41:54] <ikke> ghostboarder: can you try the docker-compose run command I gave earlier?
[03:41:58] <ghostboarder> so thats why im not an expert at most of them, yet lol
[03:43:11] <ghostboarder> ikke: confirming, this one? docker-compose run --rm nginx sh
[03:43:30] <ikke> with the :stable-nginx tag, as that's the one you just pulled
[03:43:32] *** Quits: Zelec9564504 (~Zelec@user/zelec) (Quit: The Lounge - https://thelounge.chat)
[03:43:38] <ghostboarder> k yep
[03:43:57] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:44:49] <ghostboarder> ok, since im inside the nginx shell, docker-compose isnt available
[03:45:55] <ikke> ctrl+d to exit again
[03:45:58] <rawtaz> naturally you are not supposed to run that docker-compose command inside that shell..
[03:46:25] <ikke> anoying, this is still open: https://github.com/docker/cli/issues/1050
[03:47:52] <rawtaz> i recently downgraded by compose files to version 2.4 because they removed support for cpu, memory etc in 3.x :(
[03:48:06] <rawtaz> (unless you run swarm)
[03:48:15] <ikke> right
[03:48:33] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[03:48:39] <ikke> that issue said that v3 is basically driven by swarm
[03:48:44] <rawtaz> yeah
[03:48:56] <ikke> sad
[03:49:04] <rawtaz> FWIW they've stated (not sure how officially but meh) that 2.x is expected to be supported for the foreseeable future
[03:49:08] <rawtaz> yeah i agree
[03:49:23] <rawtaz> its silly. shouldnt be a problem to support those options for non-swarm as well
[03:49:30] <rawtaz> but thats where they want people to go
[03:49:46] <ikke> Yeah, add more complexity
[03:49:59] <ikke> upsel more consulting I guess
[03:51:26] *** Joins: Zelec9564504 (~Zelec@user/zelec)
[03:52:14] <rawtaz> mm
[03:52:22] <ghostboarder> hey sorry phone
[03:52:56] <rawtaz> i did hear some podcast with someone who was working on docker and to be fair it sounded like they are really working on making swarm much better and safer to use. but i dunno :)
[03:54:23] <ikke> I don't need orchestration 
[03:54:36] <rawtaz> yeah
[03:54:45] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 256 seconds)
[03:54:57] <ghostboarder> ok, i have ran that command again ikke, i am at a shell prompt for nginx again
[03:55:09] <ikke> OK, good 
[03:55:27] <rawtaz> ghostboarder: what do you think you want to do next?
[03:55:35] <rawtaz> to debug why nginx isnt starting properly
[03:55:47] <ghostboarder> hmmm
[03:56:06] <ghostboarder> wait, we might be past that issue as i have pulled the new image
[03:56:31] <ghostboarder> new/proper
[03:56:39] <rawtaz> thats true, could be
[03:57:11] <ghostboarder> ok so im inside the nginx shell, ill scroll back up to remember the command ikke told me to use after that
[03:57:50] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[03:58:18] <ikke> nginx -v
[03:58:36] <ghostboarder> ah ok
[03:58:41] <ikke> If that works, which I expect it would 
[03:58:45] <ghostboarder> 1.20.2
[03:59:03] <ikke> You could try to start everything again 
[03:59:22] <ghostboarder> rawtaz: i want to hop back out and try running the docker compose again
[03:59:28] <ghostboarder> ikke ^^^^ yea lol
[03:59:36] <ghostboarder> k hold on
[04:02:22] *** Joins: TheSilentLink_ (~TheSilent@user/thesilentlink)
[04:02:32] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 252 seconds)
[04:02:33] <ghostboarder> k, getting somewhere, ill paste
[04:03:17] <ghostboarder> https://pastebin.com/EyEYkRJt
[04:03:35] <ghostboarder> im gonna look at nginx.conf to see if the references are still correct
[04:03:35] *** TheSilentLink_ is now known as TheSilentLink
[04:03:51] <rawtaz> very good
[04:05:54] *** Joins: mickey87 (~user@user/mickey)
[04:05:55] *** Quits: mickey8 (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[04:05:55] *** mickey87 is now known as mickey8
[04:07:00] <rawtaz> for hostnames you should use the service names from the compose file
[04:07:02] <ghostboarder> ok lol dammit i have to go inside the container to try and view nginx.conf but there is no nano in the container lol
[04:07:22] <ghostboarder> ok lets get back to that rawtaz
[04:07:24] <rawtaz> your nginx.conf should be outside of the container and bind mounted into it
[04:07:34] <ikke> vi is there :p
[04:07:39] <ghostboarder> hmm i didnt see it hang on
[04:07:44] * ghostboarder shudders
[04:07:59] <ikke> Look at the volumes in the compose file
[04:08:30] <ghostboarder> gotcha
[04:08:32] <ghostboarder> cd /
[04:08:34] <ghostboarder> oops lol
[04:09:49] <ikke> Heh, that's familiar 
[04:10:06] <ghostboarder> so rawtaz, something like this is where i should change?
[04:10:06] <ghostboarder> location / {
[04:10:06] <ghostboarder>           proxy_pass http://bitwarden:80;
[04:10:28] <ghostboarder> i imagine that should be 'vaultwarden' as its the container name?
[04:10:37] <ghostboarder> and all instances of that should be that as well?
[04:11:06] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:11:31] <ghostboarder> i would imagine i am going to have to run the DNS challenge again as this is a brand new container for nginx
[04:12:53] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 256 seconds)
[04:12:54] <rawtaz> ghostboarder: try it and see
[04:13:07] <ghostboarder> lol your a good teacher rawtaz
[04:13:29] <rawtaz> hah
[04:15:00] *** Quits: Zelec9564504 (~Zelec@user/zelec) (Quit: The Lounge - https://thelounge.chat)
[04:15:32] <ghostboarder> i taught a computer basics class years ago, on windows xp and office etc lol
[04:16:24] <rawtaz> give a man a fish and you feed him for a day, teach a man to fish and you feed him for a lifetime
[04:16:29] <rawtaz> one of the best quotes i know
[04:16:33] <rawtaz> nice
[04:16:45] <ghostboarder> indeed
[04:17:03] <rawtaz> ghostboarder: the cmopose file isnt ocmplex at all, just read about the settings you have there in the docker compose file reference and youll understand it all
[04:17:16] <rawtaz> the ports sections you should probably reconsider a bit
[04:17:29] <ghostboarder> yeah man, i really like it. Simple
[04:17:34] <ghostboarder> yes, ill remap :)
[04:17:54] <ghostboarder> aha! and there we go.....need a new cert.......just like i predicted....
[04:18:25] <rawtaz> my internet is acting up i have to reconnect like every ten seconds. fucking hate this shit. bedtime!
[04:18:28] <rawtaz> night
[04:18:28] * rawtaz &
[04:19:39] <ghostboarder> peace man, thanks so much
[04:20:12] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[04:22:41] *** Joins: Zelec9564504 (~Zelec@user/zelec)
[04:24:26] *** Quits: stack[m] (~queue-@user/queue/x-7267619) (K-Lined)
[04:32:54] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[04:39:57] *** Quits: archpc (~archpc@user/archpc) (Quit: vibe check)
[04:41:43] *** Joins: archpc (~archpc@user/archpc)
[04:42:24] *** Quits: Kilroy (~thelounge@user/mif) (Excess Flood)
[04:42:56] *** Joins: Kilroy (~thelounge@user/mif)
[04:46:54] *** Quits: maroloccio (~marolocci@151.53.155.184) (Quit: WeeChat 3.0)
[04:48:55] *** Quits: rardiol (~quassel@user/rardiol) (Ping timeout: 252 seconds)
[04:49:36] *** Joins: maroloccio (~marolocci@151.53.155.184)
[04:49:47] *** Quits: maroloccio (~marolocci@151.53.155.184) (Client Quit)
[04:50:15] *** Joins: maroloccio (~marolocci@151.53.155.184)
[05:06:33] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[05:11:23] *** Quits: pycurious (~Adium@user/pycurious) (Quit: Leaving.)
[05:11:47] *** Joins: pycurious (~Adium@user/pycurious)
[05:16:25] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 256 seconds)
[05:50:06] *** Quits: programmerq (~programme@user/programmerq) (Quit: WeeChat 2.6)
[06:04:08] *** Joins: junktext (~junktext@gateway/vpn/pia/junktext)
[06:08:10] *** Joins: junktext_ (~junktext@gateway/vpn/pia/junktext)
[06:10:15] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 256 seconds)
[06:12:33] *** Quits: calm-steam (~calm-stea@2a02:810a:980:1400::6ffc) (Remote host closed the connection)
[06:12:52] *** Joins: calm-steam (~calm-stea@2a02:810a:980:1400:5f98:3a66:b46d:598d)
[06:29:23] *** Quits: tsal (~tsal@user/tsal) (Ping timeout: 252 seconds)
[06:31:02] *** Quits: emerent (~quassel@p200300cd571578eaba27ebfffed28a59.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[06:31:31] *** Joins: emerent (~quassel@p200300cd571645bfba27ebfffed28a59.dip0.t-ipconnect.de)
[06:35:13] *** Joins: tsal (~tsal@user/tsal)
[06:38:18] *** Quits: bencc1 (~bencc1@2a00:a040:197:3af:e8f4:e98f:2cc8:f786) (Quit: Leaving)
[06:39:17] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:655c:269a:c0b2:3abd) (Quit: smeeagle)
[06:45:18] *** Quits: maroloccio (~marolocci@151.53.155.184) (Quit: WeeChat 3.0)
[06:46:22] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:57:19] *** Quits: daddy (ryan@hashbang/bdfl) (Quit: WeeChat 3.2 <:3)~)
[06:57:36] *** Joins: daddy (~ryan@hashbang/bdfl)
[07:13:16] *** Joins: AtomicElephants (~AtomicEle@user/atomicelephants)
[07:45:10] *** Quits: thegodsquirrel (~thegodsqu@user/thegodsquirrel) (Ping timeout: 250 seconds)
[08:03:00] *** Joins: thegodsquirrel (~thegodsqu@user/thegodsquirrel)
[08:19:57] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 256 seconds)
[08:29:49] *** Joins: _sean (~xsean@203.86.202.187)
[08:36:58] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[09:48:54] *** Joins: kevr` (~kevr@user/kevr)
[09:49:12] *** Quits: kevr (~kevr@user/kevr) (Ping timeout: 276 seconds)
[09:56:59] <Sayona> Hi!
[10:06:28] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[10:07:03] *** Quits: adhawkins (~adhawkins@user/adhawkins) (Ping timeout: 256 seconds)
[10:10:38] *** Joins: adhawkins (~adhawkins@user/adhawkins)
[10:25:12] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[10:26:09] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[10:33:05] *** Joins: node1 (~node1@user/node1)
[10:37:22] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[10:37:30] *** Quits: node1 (~node1@user/node1) (Client Quit)
[10:37:45] *** Joins: node1 (~node1@user/node1)
[10:37:48] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[10:57:48] *** Quits: AtomicElephants (~AtomicEle@user/atomicelephants) (Quit: Leaving)
[10:58:29] *** Quits: ZMarkC (~ZMarkC@185.132.43.61) (Quit: Leaving)
[11:03:40] *** kevr` is now known as kevr
[11:17:20] *** Quits: node1 (~node1@user/node1) (Ping timeout: 256 seconds)
[11:22:21] *** Quits: aminvakil (~aminvakil@2a01:4f8:120:336b:4::1) (Quit: The Lounge - https://thelounge.chat)
[11:22:55] *** Joins: aminvakil (~aminvakil@2a01:4f8:120:336b:4::1)
[11:23:38] <wez> .o/
[11:32:41] *** Joins: node1 (~node1@user/node1)
[11:37:13] *** Quits: L0j1k (~L0j1k@user/l0j1k) (Ping timeout: 256 seconds)
[11:38:55] *** Quits: rdz (~rdz@netpd.org) (Ping timeout: 256 seconds)
[11:39:34] *** Joins: rdz (~rdz@2001:620:120:1::12)
[11:55:33] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[11:55:40] *** Joins: jazzy2 (~jaziz@user/jaziz)
[11:55:43] *** Quits: junktext_ (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 252 seconds)
[11:57:11] *** Quits: jazzy3 (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[11:59:47] *** Quits: jazzy2 (~jaziz@user/jaziz) (Read error: Connection reset by peer)
[12:00:22] *** Joins: jazzy (~jaziz@user/jaziz)
[12:05:38] *** Joins: rsx (~dummy@ppp-188-174-141-77.dynamic.mnet-online.de)
[12:38:18] *** Joins: lehinsun (~ttytwiste@188.113.176.117)
[12:44:01] *** Joins: bn_work (uid268505@id-268505.uxbridge.irccloud.com)
[12:45:35] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[12:46:44] *** Joins: jazzy (~jaziz@user/jaziz)
[12:46:46] <mavhq> running rootless docker, my docker user can access /dev/dri/card0, but a root user inside a container cannot, gets permission denied, any ideas?
[12:50:22] *** Joins: jazzy2 (~jaziz@user/jaziz)
[12:54:23] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[12:55:07] *** Quits: jazzy2 (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[13:02:11] *** Joins: jazzy (~jaziz@user/jaziz)
[13:09:07] *** Joins: L0j1k (~L0j1k@user/l0j1k)
[13:09:07] *** ChanServ sets mode: +o L0j1k
[13:15:23] *** Joins: vidbina (~vid@ppp-49-237-13-180.revip6.asianet.co.th)
[13:15:26] *** Quits: denningsrogue (~denningsr@98.97.131.238) (Quit: Ping timeout (120 seconds))
[13:15:53] *** Joins: denningsrogue (~denningsr@98.97.131.238)
[13:26:00] *** Quits: jazzy (~jaziz@user/jaziz) (Read error: Connection reset by peer)
[13:26:23] *** Joins: jazzy (~jaziz@user/jaziz)
[13:29:27] *** Quits: jazzy (~jaziz@user/jaziz) (Read error: Connection reset by peer)
[13:29:51] *** Joins: jazzy (~jaziz@user/jaziz)
[13:31:53] *** Joins: jazzy2 (~jaziz@user/jaziz)
[13:35:27] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[13:37:36] *** Joins: Afroboy (~afroboy@105.235.135.55)
[13:40:41] *** Quits: L0j1k (~L0j1k@user/l0j1k) (Ping timeout: 256 seconds)
[13:46:21] *** Joins: L0j1k (~L0j1k@user/l0j1k)
[13:46:21] *** ChanServ sets mode: +o L0j1k
[13:48:23] *** Quits: L0j1k (~L0j1k@user/l0j1k) (Client Quit)
[13:53:09] *** Joins: L0j1k (~L0j1k@user/l0j1k)
[13:53:09] *** ChanServ sets mode: +o L0j1k
[13:55:29] *** Joins: rardiol (~quassel@user/rardiol)
[13:57:11] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 256 seconds)
[13:57:49] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[14:06:56] *** Quits: L0j1k (~L0j1k@user/l0j1k) (Quit: heaven is a place on earth)
[14:09:01] *** Quits: vidbina (~vid@ppp-49-237-13-180.revip6.asianet.co.th) (Ping timeout: 256 seconds)
[14:11:29] *** Joins: L0j1k (~L0j1k@user/l0j1k)
[14:11:29] *** ChanServ sets mode: +o L0j1k
[14:14:21] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:655c:269a:c0b2:3abd)
[14:16:53] *** Quits: Afroboy (~afroboy@105.235.135.55) (Ping timeout: 252 seconds)
[14:23:00] *** Joins: sudomann (~sudomann@98.219.211.182)
[14:28:59] *** Joins: Afroboy (~afroboy@105.235.135.154)
[14:29:59] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 256 seconds)
[14:32:04] *** Quits: jazzy2 (~jaziz@user/jaziz) (Quit: Beddie bye-bye)
[14:43:36] *** Quits: L0j1k (~L0j1k@user/l0j1k) (Quit: heaven is a place on earth)
[14:48:03] *** Joins: L0j1k (~L0j1k@user/l0j1k)
[14:48:03] *** ChanServ sets mode: +o L0j1k
[14:57:33] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbfb-173.dhcp.inet.fi)
[15:02:03] *** Quits: eyJhb (~eyJhb@user/eyjhb) (Quit: Clever message)
[15:02:55] *** Joins: eyJhb (~eyJhb@user/eyjhb)
[15:21:51] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[15:46:43] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 252 seconds)
[15:49:50] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[16:00:38] *** Joins: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[16:03:35] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 252 seconds)
[16:07:11] *** Joins: minimal (~minimal@user/minimal)
[16:14:07] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Quit: Good Bye! My bouncer has probably crashed or lost connection to the internet...)
[16:17:02] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[16:25:48] *** Joins: imakestuff (~imakestuf@197.156.77.3)
[16:28:00] *** Joins: Deknos (~someone@user/menace)
[16:39:26] <Kilroy> if you are running rootless then the docker even sudo inside the docker will have as many privileges that is with stuff linked to the outside <-> as what ever user you are running it as 
[16:39:37] <Kilroy> so (take this as a joke)
[16:39:46] <Kilroy> NVM
[16:42:44] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[16:43:23] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[16:43:26] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[16:52:15] *** Joins: vidbina (~vid@ppp-124-120-193-151.revip2.asianet.co.th)
[16:52:39] *** Joins: nabidev (~nabidev@94.198.43.59)
[16:52:58] *** Joins: mickey84 (~user@user/mickey)
[16:54:15] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[16:54:15] *** mickey84 is now known as mickey8
[16:55:14] *** Quits: nabidev (~nabidev@94.198.43.59) (Client Quit)
[17:05:26] *** Quits: kevr (~kevr@user/kevr) (Remote host closed the connection)
[17:05:33] *** Joins: kevr` (~kevr@user/kevr)
[17:08:58] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[17:15:57] *** Joins: keypusher (keypusher@user/keypusher)
[17:19:55] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:655c:269a:c0b2:3abd) (Quit: smeeagle)
[17:28:27] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:655c:269a:c0b2:3abd)
[17:34:11] *** Joins: nabidev (~nabidev@94.198.43.59)
[17:37:35] *** Quits: nabidev (~nabidev@94.198.43.59) (Client Quit)
[17:38:18] *** Quits: imakestuff (~imakestuf@197.156.77.3) (Remote host closed the connection)
[17:43:06] *** Quits: Ivii (~Ivyy@2001:a62:4c3:8e01:dac0:2a17:49d5:efcf) (Remote host closed the connection)
[17:44:16] *** Joins: Ivii (~Ivyy@2001:a62:4c3:8e01:7af8:48a4:d785:9ce7)
[17:49:11] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Quit: WeeChat 3.3)
[17:57:12] <BinarySavior> will this work in a Dockerfile: COPY certs/* /etc/nginx/certs
[17:57:31] <BinarySavior> assuming there is a directory in the same level with Dockerfile named `certs`
[17:59:07] <ikke> should work, yes, did you try it?
[17:59:15] <ikke> I don't think the * is necessary even
[17:59:48] <BinarySavior> haven't tried it yet, got some more work to do before running
[18:01:25] *** Quits: node1 (~node1@user/node1) (Quit: Client closed)
[18:09:42] <BinarySavior> for docker jwilder/nginx-proxy:alpine image it says that you can mount a dhparam.pem in /etc/nginx/dhparam/dhparam.pem
[18:10:06] <BinarySavior> if I just use COPY in my Dockerfile instead of mounting a volume in my docker-compose.yml will that be sufficient?
[18:10:58] <BinarySavior> my docker-compose.yml is using the `build` directive for this particular image
[18:14:25] <ikke> Yes, that would work as well
[18:18:17] *** Joins: SigHunter (~SigHunter@2a02:810d:8b80:8fc:f4f2:a8d1:3779:516d)
[18:18:35] <rawtaz> BinarySavior: understand that COPY copies the files into your image. a bind mount on the other hand just mounts the files from the host into the contianer - the failes are not stored inside the container or image.
[18:19:08] <BinarySavior> okay so from OPSEC frame it might be better to use bind mount?
[18:19:11] <ikke> If you keep the image local, that should not matter too much, though
[18:19:26] <ikke> From what I read, dhparams does not really need to be kept private
[18:19:36] <BinarySavior> right, that's true
[18:19:44] <BinarySavior> but i'm also copying my .key and .crt
[18:19:56] <rawtaz> BinarySavior: it *TOTALLY* depends on what you want to do. you should probably establish your use case before looking for solutions
[18:20:43] <BinarySavior> my use case for now is only on LAN but i might decide to open up to remote access in the future
[18:21:32] * rawtaz facepalms
[18:22:19] <BinarySavior> ^.^
[18:23:56] <BinarySavior> i'm trying to configure a lot of moving pieces here, learning as I go, the error / warning messages (if any) are not very explicit
[18:24:19] <ikke> In general, it's better to bindmount these files
[18:24:25] <BinarySavior> https://github.com/nextcloud/docker/tree/master/.examples/docker-compose/with-nginx-proxy/postgres/fpm
[18:24:42] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[18:24:44] <BinarySavior> this is what i'm trying to set up now on a small host on my LAN
[18:25:17] <ikke> That way, the image itself becomes more generic and can be reused 
[18:29:43] <BinarySavior> ok
[18:31:48] <BinarySavior> what is happening here lines 45-53? https://github.com/nextcloud/docker/blob/master/.examples/docker-compose/with-nginx-proxy/postgres/fpm/docker-compose.yml
[18:32:52] <ikke> It defines a cron service that uses the nextcloud:fpm-alpine image and sets /cron.sh as an entrypoint
[18:33:26] <ikke> So when the service is started, cron.sh is executed, which presumably will execute a cron daemon
[18:33:31] <BinarySavior> is cron.sh part of the nextcloud-fpm-alpine image?
[18:33:55] <ikke> It must be
[18:34:17] <BinarySavior> so that's probably for renewing letsencrypt 
[18:34:37] <BinarySavior> i think i'm going to just remove the cron because i'm using self-signed certs
[18:34:42] <ikke> Anything that requires a cronjob
[18:34:59] <ikke> I believe it uses the cronjobs for other things as well
[18:35:21] <ikke> https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/background_jobs_configuration.html
[18:35:46] <ikke> (Doesn't really explain what gets run though)
[18:36:33] *** Quits: c10l (~c10l@user/c10l) (Quit: The Lounge - https://thelounge.chat)
[18:36:48] *** Joins: c10l (~c10l@user/c10l)
[18:38:24] <BinarySavior> according to this link it looks like it runs /var/www/html/cron.php every 5 minutes: https://github.com/nextcloud/docker/blob/5a189c719de104a886994f95489e8524d71e36b2/21/fpm-alpine/Dockerfile
[18:39:41] <ikke> yes, and cron.php then checks what needs to be executed
[18:43:03] <BinarySavior> yea what I dont understand is why it's building app: and cron: using the same image, it seems a little redundant
[18:43:13] *** Quits: SigHunter (~SigHunter@2a02:810d:8b80:8fc:f4f2:a8d1:3779:516d) (Quit: Client closed)
[18:43:40] <ikke> It builds the image only once, but uses it twice
[18:44:03] <ikke> Each image service just runs a single process, which is common in docker
[18:44:07] <BinarySavior> but still resulting in 2 containers running the same image, right?
[18:44:20] <ikke> yes, but this is quite 'cheap'
[18:44:25] <BinarySavior> ok
[18:44:33] <ikke> Not much more overhead than running two processes
[18:44:39] <BinarySavior> gotcha
[18:45:28] <ikke> Otherwise you would need to have some kind of service managed inside the container managing multiple processes
[18:45:30] <ikke> adding complexity
[18:45:36] <ikke> service manager*
[18:47:34] <tabakhase> BinarySavior (to your inital Q) - no, certs dont "Need to be in bindmounts for sec." - BUT: yes, you should never bake certs into a image - volumes are just fine tho, key is that "your cert isnt my cert", or even "you running it twice" likely shouldnt be the same cert, heck you dont even know what my cert needs as CN, so how could you ever make it? ;-) - onlyone who could know is the entrypoint
[18:48:15] <tabakhase> so for "image" its a nono - but for "containers" well whatever i needed ;-)
[18:48:56] <tabakhase> *is
[18:49:00] <ikke> bindmounts are more practical if the certs are provided outside of docker, volumes if you obtain them in docker
[18:50:02] <ikke> dhparams could be generated on the fly by the entrypoint and stored in a volume
[18:50:29] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[18:50:44] *** Joins: mickey8 (~user@user/mickey)
[18:51:09] <BinarySavior> are labels in a docker-compose.yml for anything more than annotation?  are they functional at all? 
[18:51:33] <ikke> traefik uses labels for automatic configuration of services for containers
[18:51:41] <BinarySavior> oh ok
[18:53:46] <tabakhase> also compose uses labels itself to know "those are his containers"
[18:58:16] *** Quits: peac (sid344662@id-344662.hampstead.irccloud.com) (Ping timeout: 245 seconds)
[18:58:16] *** Quits: braxas (sid508886@id-508886.lymington.irccloud.com) (Ping timeout: 245 seconds)
[18:59:56] *** Joins: peac (sid344662@id-344662.hampstead.irccloud.com)
[19:00:32] *** Joins: braxas (sid508886@id-508886.lymington.irccloud.com)
[19:03:19] <BinarySavior> ok i ran docker-compose up and i dont see any errors, but SSL is failing
[19:03:34] <BinarySavior> how can I check nginx logs for more detailed ssl errors
[19:03:50] <rawtaz> by what symptoms? thats very important
[19:04:07] <BinarySavior> nextcloud.rw:444. PR_END_OF_FILE_ERROR
[19:04:19] <BinarySavior> Secure Connection Failed
[19:04:19] <BinarySavior> An error occurred during a connection to nextcloud.rw:444. PR_END_OF_FILE_ERROR
[19:04:44] <BinarySavior> but don't worry nextcloud.rw is not my TLD, i have an entry in /etc/hosts to point nextcloud.rw to my host on my LAN
[19:06:52] <BinarySavior> docker-compose daemon is not logging any nginx output when i send https request though
[19:07:29] <BinarySavior> if I try non-ssl http then I see nginx log to console get http 400 error because it's trying to redirect to SSL but failing
[19:08:17] *** Joins: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi)
[19:08:56] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:12:16] *** Quits: greatgatsby (~greatgats@bras-base-toroon0411w-grc-52-142-114-106-7.dsl.bell.ca) (Ping timeout: 260 seconds)
[19:14:39] <rawtaz> dont you have a traefik in front?
[19:14:44] *** Quits: rsx (~dummy@ppp-188-174-141-77.dynamic.mnet-online.de) (Quit: rsx)
[19:16:50] <BinarySavior> no
[19:17:06] <rawtaz> oh right
[19:17:51] <rawtaz> what does your compose file look like now?
[19:18:55] <BinarySavior> https://bpa.st/RM5Q
[19:21:19] <BinarySavior> https://bpa.st/GNNA here's with the contents of ./proxy
[19:21:26] *** Joins: Czernobog (~Czernobog@user/czernobog)
[19:21:36] <rawtaz> bpa thats a new one for me :)
[19:22:56] <rawtaz> oh youre trying to set up nextcloud. thats always an adventure :)
[19:24:36] <BinarySavior> yea
[19:24:41] <rawtaz> so is it the proxy you want to connect to on your host's IP and port 81 or 444 ?
[19:24:49] <BinarySavior> yes
[19:26:19] <rawtaz> and what URL are you trying to connect to?
[19:26:29] <vogelfrei> how can i configure a volume so that it is read-write but the changes are *not* actually written to disk/persisted?
[19:26:30] <BinarySavior> https://nextcloud.rw:444/
[19:27:20] <ikke> vogelfrei: sounds like you want something like tmpfs
[19:27:29] <rawtaz> vogelfrei: you dont. why would you? what ikke said, use that instead
[19:28:04] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:655c:269a:c0b2:3abd) (Quit: smeeagle)
[19:29:36] <rawtaz> BinarySavior: ok so nginx is reached on port 81 and responds, you verified that i take it?
[19:29:44] <BinarySavior> yes
[19:30:24] <BinarySavior> responds 400 error because it forwards non encrypted traffic by default
[19:30:57] <rawtaz> BinarySavior: the only way to verify that is to check that the first request is successful and gets a redirect header (should be response code 3xx i think)
[19:31:23] <rawtaz> might want to get a shell in the container and check what ports nginx are listening on. but im guessing you have nginx misconfigured :o
[19:31:26] <BinarySavior> i saw the http request logged to console on my docker-compose proc
[19:31:38] <rawtaz> very good!
[19:31:55] <BinarySavior> but the https request was _not_ logged to console
[19:32:26] *** Quits: Afroboy (~afroboy@105.235.135.154) (Remote host closed the connection)
[19:32:26] <rawtaz> yeah
[19:32:37] <BinarySavior> rawtaz, which nginx, the proxy or the web?
[19:32:43] <BinarySavior> probs the proxy
[19:32:53] <rawtaz> i dont know exactly how nginx works or rather hwen it logs, but if it doesnt succeed with the LTS negotiation it might be that it doesnt log
[19:33:03] <rawtaz> the one you are trying to reach, should be the proxy i presume yeah
[19:34:40] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[19:35:57] <rawtaz> basically at this point it's all a matter of isolating the matter to a smaller piece of suspect. so far you isolated it to being most likely the nginx, so presumably its just not configured right :)
[19:36:01] <rawtaz> so now you have to debug nginx basically
[19:36:24] <BinarySavior> i am getting a stack trace from cron on the console every 5 minutes or so
[19:36:25] <BinarySavior> https://bpa.st/3ZWA
[19:36:33] <BinarySavior> i dont know if this is relevant to nginx config
[19:36:58] <rawtaz> might want to turn that off. no it shouldnt have any effect on being able to reach the web thing with the proxy
[19:37:16] <rawtaz> what about you temporarily disable the tls stuff and the redirect and make it all work just with http?
[19:37:28] <rawtaz> that should perhaps be a better baseline to work off. you can add https later
[19:39:28] <BinarySavior> ok
[19:39:35] <BinarySavior> will try
[19:41:49] <Sayona> Hi, can anyone help me with this: msg="error authorizing context: basic authentication challenge for realm "Registry": . I create my own registry ... but user/pass is not working, but are correctly.
[19:46:48] *** i64_2 is now known as i64
[19:51:00] <BinarySavior> confirmed http://nextcloud.rw:81 working
[19:51:29] <BinarySavior> (after disabling redirect)
[19:53:00] <rawtaz> BinarySavior: ok so now you can access your nextcloud there?
[19:53:07] <BinarySavior> yes
[19:53:31] <rawtaz> tahts great. might be a good idea to make a simple copy of your config files now so you can revert test changes later if you dont want to manualy do it
[19:53:47] <BinarySavior> https://imgur.com/uVi8lck
[19:54:20] <rawtaz> anyway so i guess next step is to not add back the redirect but to try adding the config for https back and debug the nginx config
[19:54:42] <rawtaz> keeping the http port without redirect is so that you can verify that nginx is still working in general, and thereby focus only on the https
[19:54:46] <BinarySavior> i think i will keep redirect off for now, i can test ssl without redirect
[19:54:50] <rawtaz> exactly :)
[19:54:58] <rawtaz> small steps etc
[19:58:36] <BinarySavior> how can I verify my self signed cert validity for nextcloud.rw
[19:58:42] <BinarySavior> maybe i copied the wrong cert over
[19:58:51] <BinarySavior> hang on i'm gonna ask that in #openssl
[19:59:20] <rawtaz> yeah use openssl, tehres endless hits on how to check a cert using it
[20:01:42] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:03:01] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[20:03:03] <ikke> openssl x509 -in <filename> -noout -text
[20:06:30] <BinarySavior> yea it looks good
[20:07:10] <BinarySavior> then i used openssl md5 to make sure hash are the same for .key and .crt (i think this is the right thing to do)
[20:07:20] <BinarySavior> following steps outlined here: https://www.ibm.com/support/pages/openssl-commands-check-and-verify-your-ssl-certificate-key-and-csr
[20:07:27] <BinarySavior> everything looks good for the .crt and the .key
[20:11:31] <rawtaz> well might want to enable full debug logging in nginx then - what you wnat next is SOME reaction from it when you fire a request at it
[20:17:44] <BinarySavior> ok i think i found a problem
[20:17:46] <rawtaz> :D
[20:17:48] <rawtaz> do tell us
[20:17:53] <rawtaz> everyone here is eagerly waiting for the news
[20:18:01] <rawtaz> even my dog brought his own bowl of popcorn
[20:18:06] <BinarySavior> https://bpa.st/BPUA
[20:18:17] <rawtaz> this is where you rickroll us all :(
[20:18:36] <BinarySavior> hahaha
[20:18:42] <rawtaz> right, if nginx looks in that dir for certs it sure wont find any, so good looking there
[20:19:11] <rawtaz> tip: you can use `docker-compose exec <servicename> <command>` instead, much easier
[20:19:54] <rawtaz> so are you aware that line 64 in https://bpa.st/GNNA means a *volume* rather than a bind mount?
[20:20:27] <BinarySavior> yes, plus that line is commented out
[20:21:21] <rawtaz> yes
[20:21:37] <BinarySavior> by default the jwilder/nginx-proxy:alpine image will look for certs in /etc/nginx/certs folder with naming convention of "hostname.com.crt"
[20:22:06] *** Joins: The_Czernobog (~Czernobog@user/czernobog)
[20:22:15] <BinarySavior> so in my ./proxy Dockerfile i have this: https://bpa.st/C2IQ
[20:22:39] *** Joins: hackers (~self@user/hackers)
[20:22:49] <rawtaz> but are you going to inject cert files yourself, into that container, or is it supposed to manage and create certs itself?
[20:22:50] <BinarySavior> maybe i need to explicitly copy each file from certs/ instead of copying the directory
[20:23:05] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 256 seconds)
[20:23:05] <BinarySavior> i have already created the certs, i'm injecting
[20:23:21] *** The_Czernobog is now known as Czernobog
[20:23:31] <rawtaz> then just use a bind mount to mount e.g. a local ./certs folder into /etc/nginx/certs in that container
[20:23:41] <BinarySavior> ok i will try that
[20:23:52] <rawtaz> then you have them on the host filesystem
[20:24:21] <BinarySavior> i think it would be ./proxy/certs though
[20:27:35] <rawtaz> ok
[20:28:41] *** Quits: hackers (~self@user/hackers) (Ping timeout: 256 seconds)
[20:30:50] *** Quits: Sven_vB (~sven@user/sven-vb/x-2094958) (Killed (NickServ (GHOST command used by Sven_vB_)))
[20:30:52] *** Joins: Sven_vB_ (~sven@user/sven-vb/x-2094958)
[20:32:22] *** Joins: hackers (~self@user/hackers)
[20:33:57] <BinarySavior> omg
[20:33:59] <BinarySavior> it's working
[20:34:10] <BinarySavior> i've been working on this for a week
[20:34:21] <BinarySavior> (allbeit only an hour each day)
[20:35:21] *** Quits: c10l (~c10l@user/c10l) (Quit: The Lounge - https://thelounge.chat)
[20:35:29] *** Quits: rardiol (~quassel@user/rardiol) (Ping timeout: 256 seconds)
[20:37:02] <rawtaz> what was the solution at the end?
[20:38:02] *** Joins: gooble_gobble (~gooble_go@ool-457a99e2.dyn.optonline.net)
[20:38:53] *** Quits: vidbina (~vid@ppp-124-120-193-151.revip2.asianet.co.th) (Ping timeout: 256 seconds)
[20:39:44] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:41:26] <BinarySavior> for this last issue it was creating the bind mount
[20:41:37] <BinarySavior> but i've had several issues over the last week that i worked through
[20:41:58] <BinarySavior> this is my first docker-compose project and only my second time using docker
[20:42:16] *** Quits: Tach (~Tach@user/tach) (Quit: Tach)
[20:43:41] *** Joins: c10l (~c10l@user/c10l)
[20:43:49] <rawtaz> ok
[20:44:29] <rawtaz> BinarySavior: if its any comfort, starting out with nextcloud as your first compose project isnt exactly set up to be the best experience. so, next time you set up something less convoluted try to think of it as a new start :>
[20:45:00] *** Joins: node1 (~node1@user/node1)
[20:45:06] <ikke> I don't think any of these issues were specific to nextcloud though
[20:45:41] <rawtaz> i agree, im just referring to it being a relatively complex stack, at least for the first time. its quite confusing with all the different services and how theyre supposed to work together
[20:45:43] *** Joins: luva (~luva@45.141.152.36)
[20:46:08] <BinarySavior> yea, also using non-default settings
[20:46:50] <BinarySavior> and learning about different tags/releases for the different images and reading the docs to find what they're looking for by default
[20:47:17] <BinarySavior> there wasn't _one_ central location for me to find all the information i needed
[20:50:11] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[20:50:46] <rawtaz> sigh im waiting for an Outlook to understand that theres a shared mailbox this user has a delegation for, and show the darn thing
[20:50:51] <rawtaz> been waiting for an hour now
[21:00:43] *** IceMicha- is now known as IceMichael
[21:09:15] *** Joins: RV (~RV@lfbn-nic-1-430-119.w90-116.abo.wanadoo.fr)
[21:09:31] *** Joins: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:e806:2000:4277:d3f3)
[21:11:39] *** Quits: dabbill (~dabbill@174.31.65.254) (Quit: ZNC - https://znc.in)
[21:14:38] *** Joins: Brainium (~brainium@user/brainium)
[21:14:42] *** Joins: dabbill (~dabbill@174.31.65.254)
[21:15:52] *** Joins: Tach (~Tach@user/tach)
[21:22:43] <node1> Can portainer be used to migrate all the containers?
[21:24:20] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:24:47] *** Quits: RV (~RV@lfbn-nic-1-430-119.w90-116.abo.wanadoo.fr) (Ping timeout: 252 seconds)
[21:25:19] <Sayona> Hi, anyone know how I remove an image from my local register hub docker?
[21:26:29] <DoofusCanadensis> local? that would depend on what registry you're using
[21:27:08] <DoofusCanadensis> unless you're talking about downloaded images, in which case `docker rmi`
[21:27:35] <Sayona> I created my own register https://localhost:5000 ..:)
[21:28:34] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[21:29:47] *** Joins: AtomicElephants (~AtomicEle@user/atomicelephants)
[21:30:46] <rawtaz> Sayona: what software are you using for the registry server?
[21:36:39] <Sayona> image: registry:2
[21:38:32] <node1> Can portainer be used to migrate all the containers?
[21:43:40] <hackers> hey rawtaz!
[21:44:05] *** Quits: node1 (~node1@user/node1) (Quit: Client closed)
[21:47:01] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:48:42] *** Quits: c10l (~c10l@user/c10l) (Quit: The Lounge - https://thelounge.chat)
[21:49:40] *** Joins: c10l (~c10l@user/c10l)
[21:50:34] <rawtaz> man how is it even possible to create such a useless software as outlook
[21:50:36] <rawtaz> >_<
[21:53:06] *** Quits: bn_work (uid268505@id-268505.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[21:53:25] <DoofusCanadensis> dontreplydontreplydont
[21:53:45] *** Quits: luva (~luva@45.141.152.36) (Ping timeout: 252 seconds)
[21:56:48] *** Joins: node1 (~node1@user/node1)
[21:58:21] * rawtaz pouts in DoofusCanadensis' general direction
[21:58:37] <node1> Where i can ask question related to microservices?
[21:59:12] <BinarySavior> rawtaz, that env variable i added to my docker to stop redirecting :81 to :444, now I want to remove it to redirect
[21:59:39] <BinarySavior> should i do docker-compose down, edit docker-compose.yml then docker-compose up
[21:59:59] <rawtaz> node1: hmm kind of depends, if its docker related in here otherwise try e.g. #devops or #sre depending on what its about
[22:00:12] <ikke> BinarySavior: you can remove it, and do up again
[22:00:19] <BinarySavior> ok
[22:00:19] <rawtaz> node1: your question is like where can i ask a question about vehicles :-)
[22:00:22] <DoofusCanadensis> BinarySavior: edit docker-compose.yml, docker-compose up
[22:00:23] <ikke> compose will recreate any container with changes
[22:00:33] <DoofusCanadensis> ^
[22:01:10] <node1> rawtaz thanks.
[22:01:22] <rawtaz> yw
[22:02:01] <node1> rawtaz pm ?
[22:02:56] <rawtaz> why? :)
[22:03:12] <rawtaz> i dont mind PMs, but if you have a technical question then it's better suited in a channel 
[22:03:14] <node1> just wanted to know if you know some books to learn microservices
[22:03:19] <rawtaz> so others can help and also learn if thats the case
[22:03:22] <rawtaz> oh right
[22:03:39] <rawtaz> not really, i never take the time to read books
[22:03:47] <rawtaz> there are probably a lot of good videos on youtube
[22:03:54] <node1> Making microservices for python application
[22:07:41] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[22:08:54] *** Joins: maret (~maret@196.245.151.78)
[22:12:57] *** Quits: cornduck (~cornduck@gateway/tor-sasl/cornduck) (Remote host closed the connection)
[22:13:35] *** Quits: node1 (~node1@user/node1) (Quit: Client closed)
[22:16:10] <DoofusCanadensis> that's an excellent question for the channel
[22:18:09] *** Joins: cornduck (~cornduck@gateway/tor-sasl/cornduck)
[22:18:20] *** Joins: bn_work (uid268505@id-268505.uxbridge.irccloud.com)
[22:18:35] <rawtaz> eggcellent
[22:34:57] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[22:40:31] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[22:42:25] *** Quits: maret (~maret@196.245.151.78) (Ping timeout: 256 seconds)
[22:43:12] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:b593:bab6:272d:615b)
[22:43:33] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Ping timeout: 256 seconds)
[22:43:33] *** Quits: simplicity (~yti@user/simplicity) (Ping timeout: 256 seconds)
[22:43:45] *** Joins: simplicity (~yti@user/simplicity)
[22:44:43] *** Quits: sebastianos (~sebastian@user/sebastianos) (Ping timeout: 252 seconds)
[22:45:04] *** Quits: Haxxa (~Haxxa@202-130-210-132.ip4.superloop.com) (Quit: Haxxa flies away.)
[22:45:42] *** Joins: maret (~maret@196.245.151.78)
[22:46:07] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[22:47:31] *** Joins: Haxxa (~Haxxa@202-130-210-132.ip4.superloop.com)
[22:49:05] *** Quits: m1n10n (~r41d1n@cpe-76-184-204-251.tx.res.rr.com) (Quit: GoodBye)
[23:01:09] <BinarySavior> i can't figure this out, my nextcloud is running but some links i click on it keeps trying to send http request on https port and i'm getting 400 error... then i just add `https` to the url and the page loads
[23:01:55] <BinarySavior> i have nginx reverse proxy on ports 444:443, in firefox, clicking on links keeps trying to send http on 444
[23:37:53] *** Quits: Brainium (~brainium@user/brainium) (Remote host closed the connection)
[23:38:21] *** Joins: Brainium (~brainium@user/brainium)
[23:39:02] *** Joins: RV (~RV@lfbn-nic-1-430-119.w90-116.abo.wanadoo.fr)
[23:39:06] *** Quits: Brainium (~brainium@user/brainium) (Read error: Connection reset by peer)
[23:39:19] *** Joins: Brainium (~brainium@user/brainium)
[23:41:28] *** Quits: AtomicElephants (~AtomicEle@user/atomicelephants) (Ping timeout: 268 seconds)
[23:52:33] <rawtaz> BinarySavior: that means nextcloud is generating wrong URLs i guess. find a config setting that controls the base URL for it
[23:52:47] <rawtaz> to verify, investigate the href of the actual links
[23:55:10] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:55:22] *** Quits: maret (~maret@196.245.151.78) (Quit: maret)
[23:56:32] *** Joins: maret (~maret@196.245.151.78)
[23:57:22] <njka> rawtaz!
[23:57:28] * njka hug the rawtaz homie
[23:57:49] <rawtaz> heeeey :D
[23:57:58] <rawtaz> havent seen you around for ages
[23:58:27] <njka> hahaha
[23:58:29] <njka> sorry bruh
[23:58:49] <njka> i am hiding out in here because that other channel you used to hang w/us in has become like th ekiddie pool
[23:58:52] <njka> erm
[23:58:53] <BinarySavior> rawtaz, i manually edited the href in developer mode to https://nextcloud.rw:444/ and i clicked it, same result: 400 Bad Request (plain http sent to https port)
[23:58:59] <njka> *the kiddie pool
[23:59:01] <rawtaz> njka: kiddie in what way?
[23:59:06] <rawtaz> just youngsters? :)
[23:59:21] <rawtaz> BinarySavior: impossible :))
[23:59:23] <njka> it has become a damn helpdesk for morons who either cannot figure out google... or are simply too lazy to google :)
[23:59:27] <njka> and it's annoying af
[23:59:44] <rawtaz> BinarySavior: but my point is, figure out how to configure nginx to use https instead of http when generating links
[23:59:52] <njka> at least here, most of the questions seem to be from ppl who have at least tried to help themselves before asking
