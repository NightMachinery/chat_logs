[00:03:40] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:13:57] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Quit: taupiqueur)
[00:14:35] *** Quits: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469) (Quit: Leaving)
[00:15:10] *** Joins: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469)
[00:15:30] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[00:22:49] <kakolainen[m]> you can suppress the stderr with  io.popen("zenity some_windowshit 2> /dev/null")
[00:26:17] <kakolainen[m]> popen is a good and only way to do multihtreading with native Lua
[00:29:50] <technomancy> interesting definition of multithreading =)
[00:42:19] <kakolainen[m]> the only good way to do multithreading is a pipeline architecture and then you'll realise only thing needed is simple pipes and IPC if you disagree have fun with your shared memory and semaphore spaghetti
[00:50:52] <technomancy> I mean I agree that's the best option for concurrency I just don't agree that "multithreading" is a good word to describe the technique
[00:51:42] <technomancy> I mean, the best option in native lua; the best option overall is the actor model but that's not feasible in this context
[01:01:17] *** Quits: GNUHacker (~gnu@fsf/member/GNUHacker) (Quit: Leaving)
[01:08:47] *** Quits: Elw3 (~Elw3@x59cc9973.dyn.telefonica.de) (Ping timeout: 264 seconds)
[01:11:43] *** Quits: Yorlik (~Yorlik___@ip6-2a03-7500-05ac-b500-5d67-25c6-0975-7af8.dyn.netcomnetz.de) (Ping timeout: 268 seconds)
[01:11:48] *** Joins: Elw3 (~Elw3@dynamic-002-247-241-150.2.247.pool.telefonica.de)
[01:22:23] *** Quits: magla (~gelignite@55d4ce3b.access.ecotel.net) (Quit: Stay safe!)
[01:52:59] *** Quits: netlynx (~jan@94-226-69-15.access.telenet.be) (Quit: Leaving)
[02:14:18] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 268 seconds)
[02:16:26] *** Joins: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net)
[02:20:11] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[02:27:48] *** Joins: penguino (~mrpenguin@user/mrpenguin)
[02:28:13] *** Quits: uzi_ (~uzi@161.9.200.42) (Read error: Connection reset by peer)
[02:28:29] *** Joins: uzi_ (~uzi@161.9.200.42)
[02:31:34] *** Quits: asdflkj_sh (asdflkj@bsdforall.org) (Ping timeout: 260 seconds)
[02:33:30] *** Quits: pizdets (~pizdets@183.182.115.195) (Ping timeout: 260 seconds)
[02:48:53] *** Quits: Elw3 (~Elw3@dynamic-002-247-241-150.2.247.pool.telefonica.de) (Quit: Leaving)
[02:55:20] *** Joins: asdflkj_sh (asdflkj@bsdforall.org)
[03:16:20] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:25:12] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[03:28:16] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Client Quit)
[03:54:16] *** Joins: miney (~mineteste@user/minetester)
[04:09:41] *** Parts: miney (~mineteste@user/minetester) (Leaving)
[04:14:57] *** Quits: fcr (~fran@r167-60-56-79.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[04:23:38] *** Joins: fcr (~fran@r186-48-98-21.dialup.adsl.anteldata.net.uy)
[04:37:05] <jaawerth> it sounds treat, but yeah: threads are threads and processes are processes and it's better to be precise.
[04:37:08] <jaawerth> a toll is a toll, and a roll is a roll, and if we dont get no tolls, then we don't eat no rolls
[04:37:31] <jaawerth> oh hey that convo was almost 4 hours ago huh
[04:37:33] <jaawerth> IGNORE ME
[04:48:05] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[04:48:07] <hendursaga>  /ignore jaawerth :P
[04:50:46] *** Quits: Tricycle (~CGI273@lfbn-idf1-1-1830-41.w90-91.abo.wanadoo.fr) (Quit: bye)
[04:53:04] <jaawerth> should have seen that one coming
[05:02:23] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Quit: leaving)
[05:02:50] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[05:10:29] *** Quits: ratchetfreak (~ratchetfr@d8d8779d9.access.telenet.be) (Read error: Connection reset by peer)
[05:10:32] *** Joins: ratchet_freak (~ratchetfr@d8D8779D9.access.telenet.be)
[05:23:16] <vancz> https://luau-lang.org/2021/11/03/luau-goes-open-source.html
[05:28:11] <tumn> one of my friends was just talking about how luau is a ripoff of typescript
[05:28:54] <jaawerth> lol, its come up multiple times today in every lua-adjacent channel I idle in but that's the first time I think anyone'sl inked it in actual #lua
[05:29:07] <technomancy> tumn: is that a bad thing?
[05:29:17] <technomancy> (I don't know anything about typescript other than it's microsoft)
[05:29:38] <tumn> I think javascript needs typescript to be good
[05:29:41] <tumn> but
[05:29:47] <tumn> I have many qualms about what roblox has done to lua
[05:29:49] <furq> you have to give them credit for using actual em dashes
[05:30:06] <jaawerth> technomancy: it's javascript with static types and a little syntactic sugar glued on so just take how you feel about js and how you feel about static types and allow them to join forces
[05:30:10] <furq> shame they fucked it up in the last sentence
[05:31:03] <vancz> tumn: what has roblox done to lua
[05:31:25] <furq> well for starters they made a bunch of 14 year olds join this channel
[05:32:02] <vancz> heh
[05:32:11] <furq> which technically breaches the bail terms of a bunch of people in here
[05:32:32] <vancz> at least theyre on IRC not elsewhere
[05:32:46] <vancz> there is hope for them yet
[05:32:52] <tumn> vancz: they gave it strict typing (and, if you look through the new source, classes, even though that hasn't been documented before)
[05:33:00] <vancz> the children i mean, not the people with bail terms :P
[05:33:24] <jaawerth> I mean, some people would see it as a good thing when the youths take an interest in their programminglanguage of choice :P
[05:33:31] <tumn> it's a great thing
[05:33:46] <tumn> roblox is the reason I got into programming and chose lua as my first language
[05:33:46] <vancz> oh no, they gave it types ok, but oop is going too far :P
[05:34:03] <tumn> for reference I am 23 and found it when I was maybe 16
[05:34:11] <tumn> roblox has been around for a while now
[05:34:12] <jaawerth> killing the TCO is the bit I can't look past
[05:34:23] <vancz> I wish I could stop being older than people
[05:34:38] <vancz> wait they killed TCO?
[05:34:48] <vancz> that can't be good
[05:34:52] <vancz> muh recursion
[05:34:58] <vancz> how can you give something a type system but kill TCO
[05:35:39] <jaawerth> https://luau-lang.org/compatibility#differences-from-lua
[05:36:56] <tumn> > Equality comparisons call __eq metamethod even when objects are rawequal (which matches other metamethods like <= and facilitates NaN checking)
[05:37:00] <tumn> if I'm understanding this correctly
[05:37:03] <tumn> that's actually a good change
[05:37:14] <tumn> usually __eq is useless
[05:43:49] <jaawerth> the __pairs/__ipars -> __iter stuff also stands out to me. I like that they don't like how ipairs moved to using __index and __len (bleh) but trying to merge __ipairs and __pairs into __iter seems a little suspect when tables can be both. also the order of iteration stuff seems like they'd have to remove the nonce to do it
[06:03:54] *** Quits: ratchet_freak (~ratchetfr@d8D8779D9.access.telenet.be) (Read error: Connection reset by peer)
[06:51:14] <technomancy> jaawerth: I actually like static types??
[06:51:24] <technomancy> at least in dialyzer and ocaml, which are the only static systems I've used
[06:52:26] <technomancy> I'm guessing typescript types aren't as good as ocaml types tho
[07:00:08] *** Quits: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net) (Ping timeout: 268 seconds)
[07:00:57] <jwoe324> this is the real crazy thing https://typescripttolua.github.io/
[07:30:42] *** Joins: edrx (~Eduardo@2804:56c:d2f8:6c00:37df:f015:f96:f56f)
[07:32:06] <edrx> hi all! how do I get _a_ binary of lua for Windows? I mean, something like a lua51.exe (or 52, 53, 54)...
[07:32:15] <edrx> let me explain the whole story
[07:33:26] <edrx> I don't have access to a machine with Windows and I finally become friends with someone who has windows and who - apparently - can test this for me...
[07:33:40] <edrx> http://angg.twu.net/LATEX/2021emacsconf.pdf
[07:34:19] <edrx> but I need something like a barebones lua51.exe that can run on a terminal and run a repl
[07:36:13] <edrx> I am looking at my old notes about luabinaries, luaforwindows, and luadist, and following the links... but I am bit lost, because I don't need an IDE, or batteries, or static/dynamic libraries...
[07:48:41] *** Quits: skapata (~Skapata@user/skapata) (Read error: Connection reset by peer)
[07:49:23] <technomancy> I do cross-compiling of windows binaries for Fennel from debian; it's pretty easy
[07:49:38] <edrx> do you have one available?
[07:50:00] <technomancy> never done lua but you could try adapting https://git.sr.ht/~technomancy/fennel/tree/main/Makefile#L92
[07:50:08] <edrx> ouch =(
[07:50:09] <technomancy> I have windows binaries for Fennel; sure
[07:51:03] <edrx> I would love to learn how to do that but now I need something that my friend can test in just a few minutes...
[07:51:22] <technomancy> all I got is https://fennel-lang.org/downloads/
[07:51:23] <edrx> (even though he usually takes at least a week to answer)
[07:51:37] <technomancy> technically the binaries do have lua inside them but that's probably not what you mean =)
[07:56:13] <edrx> I tried make fennel.exe and it failed because I don't have a i686-w64-mingw32-gcc. apparently there are two debian packages that provide that file: gcc-mingw-w64-i686-posix and gcc-mingw-w64-i686-win32. I guess that ___-posix is better... right?
[07:57:18] <edrx> "win32" doesn't sound very much 64bit-ish
[08:00:53] <edrx> nevermind, I installed the one that looked better and "make fennel.exe" worked! thank looks like a good starting point. thanks! =)
[08:03:56] <jaawerth> technomancy: well, for starters the types are all unsound (though there's some third party tooling I've heard has gotten relatively mature that tries to address that), and there's some weird compat stuff with some js protocols/interfaces.. it's improved though, I think. it'd be nicer with macros
[08:04:15] <jaawerth> but it's obvious I would think that :)
[08:10:17] <jwoe324> edrx for next time there is http://luabinaries.sourceforge.net/download.html
[08:11:14] <jwoe324> I noticed you mentioned it but not why it didn't work for you
[08:13:12] <edrx> jwoe324: wow, thanks! I got lost in the sourceforge-isms and kind of panicked...
[08:13:33] <edrx> jwoe324: that seems to be exactly I need
[08:31:25] *** Joins: zostj (~rue@1-162-47-227.dynamic-ip.hinet.net)
[08:33:45] *** Quits: penguino (~mrpenguin@user/mrpenguin) (Remote host closed the connection)
[08:41:10] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:09:06] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[09:16:07] *** Joins: password (~password@user/password2)
[09:28:21] *** Quits: ArRay (~ArRay_@user/array/x-1947090) (Ping timeout: 276 seconds)
[09:32:59] *** Joins: ArRay (~ArRay_@user/array/x-1947090)
[09:54:02] *** Joins: dvx (~dvx@185.63.97.64)
[10:37:54] *** Quits: zostj (~rue@1-162-47-227.dynamic-ip.hinet.net) (Quit: WeeChat 3.3)
[11:07:09] *** Joins: andreyorst (~andreyors@37-144-211-167.broadband.corbina.ru)
[11:26:35] *** jbg is now known as jbg_
[11:27:53] *** Quits: jbg_ (sid494673@user/jbg) ()
[11:35:24] *** Joins: hendursa1 (~weechat@user/hendursaga)
[11:37:42] *** Quits: hendursaga (~weechat@user/hendursaga) (Ping timeout: 276 seconds)
[11:40:06] *** Quits: edrx (~Eduardo@2804:56c:d2f8:6c00:37df:f015:f96:f56f) (Ping timeout: 268 seconds)
[11:53:07] *** Joins: Yorlik (~Yorlik___@ip6-2a03-7500-05f9-4900-4993-e334-40b6-b50f.dyn.netcomnetz.de)
[12:00:37] *** Joins: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be)
[12:01:06] *** Joins: arinov (~arinov@213.194.126.155)
[12:05:07] <sqz1> I think I've found it..
[12:06:46] <sqz1> first attempt: `f = io.popen('cat bigfile','r') ; os.execute("sleep 1s") ; print( f:read("*a") ) ; f:close()`
[12:06:48] <sqz1> final attempt: `f = io.popen(myshellscript,'r') ; f:flush() ; print( f:read("*a") ) ; f:close()`
[12:18:20] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 268 seconds)
[12:27:18] *** Quits: reset (~reset@user/reset) (Quit: reset)
[12:29:40] <RhodiumToad> found what exactly?
[12:29:57] <RhodiumToad> calling flush on a file open for _input_ is probably not sensible
[12:36:36] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Quit: WeeChat 3.3)
[12:46:16] *** Quits: Hanii (~textual@2a00:23c5:c587:6d00:a0af:7780:c2f2:5686) (Quit: Textual IRC Client: www.textualapp.com)
[12:50:25] *** Joins: rando25892 (~user@user/rando25892)
[13:02:24] *** Joins: Elw3 (~Elw3@dynamic-002-247-243-120.2.247.pool.telefonica.de)
[13:32:44] *** Joins: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net)
[14:08:41] <kakolainen[m]> sqz1: you are wrong, like I said you are just confusing messages from stderr with stdout
[14:19:34] *** Quits: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net) (Ping timeout: 260 seconds)
[14:27:50] *** Quits: Yorlik (~Yorlik___@ip6-2a03-7500-05f9-4900-4993-e334-40b6-b50f.dyn.netcomnetz.de) (Ping timeout: 268 seconds)
[14:34:14] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[14:55:42] *** Joins: ard (~ard@gw-fsck-sorbs.kwaak.net)
[14:55:54] <ard> I just discovered that:
[14:56:01] <ard> lua -e 'x="abc" y=string.format("%-410.410s",x)'
[14:56:12] <ard> is too precise :-(
[14:57:41] <ard> 100 is the limit... 
[14:58:28] <ard> I mean: 99 is the limit
[14:59:47] *** Joins: Yorlik (~Yorlik___@ip6-2a03-7500-05f9-4900-292f-ee3d-6574-617d.dyn.netcomnetz.de)
[15:01:37] *** Quits: tuvok (tuvok@Photography.tuvok.eu) (Ping timeout: 265 seconds)
[15:02:24] *** Joins: tuvok (tuvok@Photography.tuvok.eu)
[15:12:14] *** Quits: password (~password@user/password2) (Ping timeout: 268 seconds)
[15:13:41] *** Joins: netlynx (~jan@94-226-69-15.access.telenet.be)
[15:15:51] *** Quits: Vornicus (~Vornicus@2603-8000-5d07-7ef0-6042-7156-16f0-8c3d.res6.spectrum.com) (Read error: Connection reset by peer)
[15:16:15] *** Joins: Vornicus (~Vornicus@2603-8000-5d07-7ef0-0108-0549-578c-15db.res6.spectrum.com)
[15:17:08] *** Joins: password (~password@user/password2)
[15:17:35] <ard> So, the code allows only 2 characters of width and length modifiers.
[15:18:05] <ard> While there should be no "limits" as it refers to sprintf
[15:27:57] <kakolainen[m]> sprintf has always been full of buffer overflow and underflow exploits, that limitation is probably just fixing one of the bugs
[15:32:57] <ard> Still, it's an undocumented/bug ;-). I didn't expect a string of that size in my code.
[15:34:28] <ard> I mean, it is clearly documented in strlib.c though.
[15:34:59] <ard> But for strings, especially for LUa, I think 99 is a pretty small limit.
[15:38:10] <ard> to be clear: for anything but string it is totally bogus.
[15:38:11] <sqz1> kakolainen[m]: no, i know the difference
[15:39:32] <sqz1> the flush seems necessary to deal with popen and binaries which enforce buffering their output
[15:41:10] <sqz1> at least that's what i think, ofcourse i could be wrong, but it solves the partially-captured-stdout issue
[15:41:21] <kakolainen[m]> are you saying there is bug in Lua io.popen?
[15:42:28] <sqz1> rhodiumtoad: fyi: ts a executable file, so popen executes it
[15:42:53] <kakolainen[m]> did you already try disabling stderr?
[15:42:55] <RhodiumToad> sqz1: I guarantee you that using flush like that is wrong
[15:43:07] <jaawerth> well you're reading the output so you don't have to worry about it being written, I'm pretty sure flush would be a noop in that context. did you try just appending 2>&1 to the command you ran with popen to see if that gies you the missing output you expected?
[15:44:12] <rjek> what the hell is that flush meant to be doing?
[15:44:22] <rjek> flush *what* when reading?
[15:44:39] <sqz1> flush waits until the se
[15:44:42] <RhodiumToad> sqz1: given that you're using read("*a"), any output buffering by the command is in any case irrelevant since the read will continue reading data until the child process exits or closes it stdout
[15:44:49] <RhodiumToad> flush DOES NOT WAIT
[15:45:13] <kakolainen[m]> to join stderr to stdout use  2>&1 and to disable stderr use  2>/dev/null
[15:45:27] <sqz1> brb covidtest
[15:45:28] <rjek> sqz1: No it doesn't
[15:46:32] *** Quits: Xeha (~Xeha@dynamic-82-220-88-142.ftth.solnet.ch) (Ping timeout: 260 seconds)
[15:54:10] *** Quits: andreyorst (~andreyors@37-144-211-167.broadband.corbina.ru) (Ping timeout: 268 seconds)
[16:01:12] <sqz1> how can you be so sure
[16:03:01] <RhodiumToad> because we know what it does
[16:03:25] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 268 seconds)
[16:03:54] <rjek> http://www.dii.uchile.cl/~daespino/files/Iso_C_1999_definition.pdf
[16:03:59] <RhodiumToad> flushing an input stream (as this one is) just discards any buffered and unread input
[16:04:13] <RhodiumToad> which is exactly not what you want
[16:04:14] <rjek> fflush() writes unwritten data, has nothing to do with read buffering
[16:04:39] *** Quits: DixieFlatline (~soryuu@pool-173-61-70-58.cmdnnj.fios.verizon.net) (Ping timeout: 268 seconds)
[16:04:44] <rjek> If stream points  to  an  output  stream  or  an  update  stream  in  which  the  most  recent
[16:04:44] <rjek> operation was not input, the fflush function causes any unwritten data for that stream
[16:04:44] <rjek> to be delivered to the host environment to be written to the file; otherwise, the behavior is
[16:04:44] <rjek> undefined.
[16:04:44] <rjek> If stream is  a  null  pointer, the fflush function  performs  this  flushing  action  on  all
[16:04:46] <rjek> streams for which the behavior is defined above
[16:06:07] <RhodiumToad> what actually happens when you do  f = io.popen(myshellscript,'r') ; d = f:read("*a")  is this:
[16:06:56] <RhodiumToad> popen makes a pipe, spawns the script as a subprocess with stdout going to the pipe, and makes f a readable stream attached to the other end (the read end) of the pipe
[16:07:25] <RhodiumToad> then the f:read("*a") call reads from f until it gets an EOF, which happens when the pipe is closed
[16:08:13] <RhodiumToad> notice that only stdout is directed to the pipe, not stderr, so the script can still write directly to stderr
[16:09:22] <rjek> You need something a bit more sophicated than popen() if you want to read and distinguish both stdout and stderr at the same time (as wells as being able to write to stdout)
[16:09:50] <RhodiumToad> because the read call keeps reading until EOF, it's not affected by any buffering being done by the command being run
[16:12:52] <RhodiumToad> sqz1: what do you actually see when you do it without the flush?
[16:16:39] *** Quits: fcr (~fran@r186-48-98-21.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[16:20:13] <sqz1> rjek: thx again, but stderr is out of scipe
[16:20:18] <sqz1> scope
[16:20:32] <sqz1> i will try to put a gist together
[16:23:22] <jaawerth> sqz1: how positive are you that it's out of scope? sometimes other commands output things via stderr without you realizing it, we're suggesting 2>&1 in the command you pass to io.popen as a way to quickly rule out that possibility
[16:28:03] *** Joins: fcr (~fran@r167-60-69-164.dialup.adsl.anteldata.net.uy)
[16:28:54] *** Joins: zostj (~rue@1-162-47-227.dynamic-ip.hinet.net)
[16:33:12] <sqz1> 100% stdout, i appreciate it though. 
[16:35:21] <sqz1> the resulting string length of the read("*a") call was varying
[16:42:27] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[16:44:15] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[16:47:38] <RhodiumToad> but the output of the command wasn't supposed to vary?
[16:47:44] <RhodiumToad> what OS is this?
[17:10:50] *** Joins: andreyorst (~andreyors@2.92.125.180)
[17:13:49] *** Quits: Elw3 (~Elw3@dynamic-002-247-243-120.2.247.pool.telefonica.de) (Remote host closed the connection)
[17:23:56] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Read error: Connection reset by peer)
[17:24:48] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[17:32:38] *** Joins: DixieFlatline (~soryuu@pool-173-61-70-58.cmdnnj.fios.verizon.net)
[17:33:12] *** Joins: strast1 (~steve@rrcs-74-62-106-132.west.biz.rr.com)
[17:35:17] *** Quits: strast (~steve@rrcs-162-155-169-18.central.biz.rr.com) (Ping timeout: 268 seconds)
[17:43:53] *** Quits: Albright (~Albright@2001:19f0:8001:ca4:4d0e:ce74:c79b:d28a) (Quit: ZNC 1.8.2 - https://znc.in)
[17:44:06] *** Joins: Albright (~Albright@2001:19f0:8001:ca4:8a08:f3ba:6c3c:916a)
[17:47:44] *** Joins: strast2 (~steve@rrcs-74-62-106-132.west.biz.rr.com)
[17:49:42] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:50:30] *** Quits: strast1 (~steve@rrcs-74-62-106-132.west.biz.rr.com) (Ping timeout: 260 seconds)
[17:51:39] *** Joins: strast1 (~steve@rrcs-162-155-169-18.central.biz.rr.com)
[17:55:02] *** Quits: strast2 (~steve@rrcs-74-62-106-132.west.biz.rr.com) (Ping timeout: 268 seconds)
[17:57:21] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Quit: WeeChat 3.3)
[18:16:19] *** Joins: rgrinberg (~textual@200.5.63.76)
[18:30:01] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[18:45:35] *** Quits: arinov (~arinov@213.194.126.155) (Ping timeout: 268 seconds)
[18:47:04] <sqz1> btw first of all thanks for the thinking-along efforts so far
[18:47:13] <sqz1> I've put a gist together which also pointed out something: 
[18:47:15] <sqz1> https://gist.github.com/coderofsalvation/c60d4aa466d1cb137027e743f18bd924
[18:48:48] <sqz1> The succes `flush()` turned out to accidental (and indeed) unrelated, as I later got the same bug, which doesn't seem to happen in native lua (only in the embedded environment). I'll create an issue for it in the redbean-repo, as there's something fishy going on there.
[18:51:26] <RhodiumToad> uh
[18:51:40] <RhodiumToad> you're trying to execute 3M of random data as a shell script?
[18:52:31] <rjek> Sounds like whatever redbean is is broken
[18:52:54] <rjek> But yes, you're reading an error message
[18:53:06] <rjek> You're trying to execute 3MB of random data as if it were a program
[18:56:08] <sqz1> hm the output pasted was when I changed `/tmp/bigfile` to `ts -i 3` (task-spooler is a linux utility which prints out jobs)..but they share the same issue
[18:56:47] *** Quits: rgrinberg (~textual@200.5.63.76) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:58:02] <sqz1> so hereby the chapter popen,read,flush can be closed  
[18:58:15] <RhodiumToad> can you do a system call trace on the redbean version?
[18:58:41] <sqz1> RhodiumToad: maybe, can you elaborate on what that is or how to enable it?
[18:58:56] <RhodiumToad> aha, I found the bug I think
[18:59:00] <sqz1> I can compile the c-code, so probably I can add a compiler-flag or inject a function
[18:59:16] <sqz1> wow that's fast
[18:59:32] <RhodiumToad> the fread() function in the libc used by redbean is broken
[18:59:33] <sqz1> wait..are you looking into the c-code?
[18:59:56] <RhodiumToad> it does only one readv() call, it makes no attempt to loop if insufficient data was read from the pipe
[19:00:12] <RhodiumToad> lua interprets a short read result from fread() as meaning end-of-file
[19:00:41] <RhodiumToad> fread() is not permitted by spec to return a short result in the absence of error or EOF
[19:00:54] <RhodiumToad> https://github.com/jart/cosmopolitan/blob/master/libc/stdio/fread.c   <-- code there
[19:02:38] <sqz1> impressive, if I would be a big boss with a big company I would hire you immediately, you literally went from snippet, to the C-repo, and found the solution in ~6 mins.
[19:03:20] <sqz1> unless YOU are the maintainer lol :D
[19:03:45] <RhodiumToad> nope :-)  first time I've seen redbean or cosmopolitan code (I think)
[19:04:40] <rjek> cosmopolitan is a toy gimmick, I didn't realise anyone was trying to actually use it
[19:04:51] <rjek> it has a new libc, so it's going to be *riddled*
[19:05:30] *** Joins: arinov (~arinov@178.240.154.245)
[19:07:37] <sqz1> rjek: I like toys :) Btw. any tips for luatools which can distribute a lua-codebase as an (linux) single ELF-binary?
[19:07:47] *** Joins: rgrinberg (~textual@200.5.63.76)
[19:08:24] <rjek> I've always just rolled my own because it's only a few lines of C, or you can use srlua from https://web.tecgraf.puc-rio.br/~lhf/ftp/lua/
[19:09:02] *** Quits: Yorlik (~Yorlik___@ip6-2a03-7500-05f9-4900-292f-ee3d-6574-617d.dyn.netcomnetz.de) (Ping timeout: 268 seconds)
[19:09:15] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:9dd0:d32d:1cd6:8dc6)
[19:09:15] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:9dd0:d32d:1cd6:8dc6) (Changing host)
[19:09:15] *** Joins: skapata (~Skapata@user/skapata)
[19:21:58] <sqz1> ah nice thx
[19:23:42] *** Joins: Yorlik (~Yorlik___@ip6-2a03-7500-05f9-4900-7d3b-a6f4-6bac-4e3d.dyn.netcomnetz.de)
[19:28:04] *** Joins: Elw3 (~Elw3@x59cc9a6d.dyn.telefonica.de)
[19:32:55] *** Quits: hendursa1 (~weechat@user/hendursaga) (Quit: hendursa1)
[19:33:28] *** Joins: hendursaga (~weechat@user/hendursaga)
[19:36:10] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 268 seconds)
[19:39:07] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:46:50] *** Quits: dvx (~dvx@185.63.97.64) (Read error: Connection reset by peer)
[19:52:34] *** Joins: magla (~gelignite@55d4c66c.access.ecotel.net)
[19:57:49] *** Joins: mbalmer_ (~mbalmer@2001:67c:1090:5073:a016:4cfd:1fe3:4de1)
[20:01:17] *** Quits: mbalmer (~mbalmer@2001:67c:1090:5073:8040:eef:652e:9e) (Ping timeout: 264 seconds)
[20:31:40] *** Quits: arinov (~arinov@178.240.154.245) (Ping timeout: 268 seconds)
[20:37:48] *** Quits: rgrinberg (~textual@200.5.63.76) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:45:16] *** Quits: uzi_ (~uzi@161.9.200.42) (Remote host closed the connection)
[20:45:27] *** Joins: uzi_ (~uzi@161.9.200.42)
[20:51:31] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:4957:1fad:d24a:4121)
[20:51:31] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:4957:1fad:d24a:4121) (Changing host)
[20:51:31] *** Joins: skapata (~Skapata@user/skapata)
[20:55:12] *** Joins: arinov (~arinov@178.240.154.245)
[20:57:30] *** Joins: reset (~reset@user/reset)
[21:15:50] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[21:21:17] *** Joins: kipras (~kipras@78-57-120-254.static.zebra.lt)
[21:21:17] *** Quits: kipras (~kipras@78-57-120-254.static.zebra.lt) (Client Quit)
[21:57:23] *** Quits: Sauvin (~sauvin@about/linux/staff/sauvin) (Ping timeout: 268 seconds)
[22:01:21] *** Joins: AndroidToad83 (~AndroidTo@82-68-208-20.dsl.in-addr.zen.co.uk)
[22:02:55] *** Quits: arinov (~arinov@178.240.154.245) (Ping timeout: 268 seconds)
[22:03:03] *** Joins: jprjr (~jprjr@2605:6400:10:158:150f:47b6:ec11:edfa)
[22:05:01] *** Joins: bnason (~bnason@ip24-254-38-246.br.br.cox.net)
[22:14:36] *** Quits: zostj (~rue@1-162-47-227.dynamic-ip.hinet.net) (Quit: WeeChat 3.3)
[22:21:40] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Read error: Connection reset by peer)
[22:22:14] *** Joins: strast (~steve@rrcs-74-62-106-132.west.biz.rr.com)
[22:22:33] *** Joins: rgrinberg (~textual@ip73-183-64-186.ct.co.cr)
[22:22:44] *** Joins: strast2 (~steve@rrcs-162-155-169-18.central.biz.rr.com)
[22:25:07] *** Quits: strast1 (~steve@rrcs-162-155-169-18.central.biz.rr.com) (Ping timeout: 268 seconds)
[22:26:58] *** Quits: strast (~steve@rrcs-74-62-106-132.west.biz.rr.com) (Ping timeout: 268 seconds)
[22:40:49] *** Quits: rgrinberg (~textual@ip73-183-64-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:47:28] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[23:01:13] *** Quits: Elw3 (~Elw3@x59cc9a6d.dyn.telefonica.de) (Quit: Leaving)
[23:05:55] *** Quits: oni^ (oni@kapsi.fi) (Ping timeout: 268 seconds)
[23:06:20] *** Joins: oni^ (oni@kapsi.fi)
[23:21:23] *** Quits: nmz (~nmz@24.137.228.140) (Ping timeout: 265 seconds)
[23:23:23] *** Joins: nmz (~nmz@24.137.228.140)
[23:34:52] *** Joins: Tricycle (~CGI273@lfbn-idf1-1-1830-41.w90-91.abo.wanadoo.fr)
