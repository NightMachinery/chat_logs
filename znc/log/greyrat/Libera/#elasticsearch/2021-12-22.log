[00:30:20] *** Quits: esro (~esro@nat1.krakowskiinternet.pl) (Quit: Leaving)
[01:30:09] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:58:15] <wwalker> I want to ensure that no 2 shards of any index end up on the same node.  I have (shards * 2 (for 1 replica) + 4) nodes, I'm willing to add more nodes, but about every 3rd time a new index is created, ES doubles up shards on multiple nodes (not just 1) and ingest performance drops from 350K/sec to 200k/sec.  I have traced it to anytime there are 2 shards on the same node, we lose almost 50% of our 
[02:58:21] <wwalker> ingest performance.
[02:58:24] <wwalker> any ideas?
[03:33:01] *** Joins: hqdruxn08_ (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com)
[03:34:55] *** Joins: hqdruxn08__ (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com)
[03:36:57] *** Quits: hqdruxn08 (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com) (Ping timeout: 240 seconds)
[03:38:57] *** Quits: hqdruxn08_ (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com) (Ping timeout: 240 seconds)
[04:08:32] <keyvan> good afternoon. im looking for help reproducing the log4shell hack on my ES 5 instance. i have enabled slowlogger and can see my jdni-infected query in the logs, but it does not seem to call out to the external server. i have verified the external setup (im using log4shell.huntress.com) with a small example project containing only various log4j versions and it does work; but it seems elasticsearch isn't affected? but it should be? thanks
[04:27:13] <wwalker> keyvan: does ES 5 run a new enough log4j to be affected?  ES5 seems like it probably ran log4j rather than log4j-2
[04:48:31] <keyvan> wwalker: i think it uses log4j 2.9, i know 5.6.10 there's a PR that bumps it to 2.11. there is a table here that shows 5 is supposed to be vulnerable https://discuss.elastic.co/t/apache-log4j2-remote-code-execution-rce-vulnerability-cve-2021-44228-esa-2021-31/291476 but what is interesting is that it appears if on Java 9 (on ES6) you're not vulnerable? so i am wondering if i am not able to repro because im on Java9 on ES5... 
[04:48:45] <keyvan> i will be downgrading to Java 8 to verify this (the "more vulnerable java") according to that table...
[05:27:03] <keyvan> haHA!!!!!!!! yep, my ES5 with java 8 was vulnerable... but with Java 9 was NOT.. 
[05:29:50] *** Joins: lilgopher (~textual@2601:241:8000:38f0:cd3a:7cf:4af5:8257)
[06:22:21] <wwalker> why does ES, with 36 nodes and only 1 open index, decide that it has to put 2 shards on 9 nodes, 1 shard on 10 nodes , and NO shards on the other 17!!!?????? 
[07:16:27] <keyvan> wwalker: that’s a strange default behavior but there are several settings pertaining to how clustering works. Read them each very carefully. You might benefit from limiting cluster.routing.allocation.total_shards_per_node
[07:55:36] *** Quits: lilgopher (~textual@2601:241:8000:38f0:cd3a:7cf:4af5:8257) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:17:36] *** Joins: lilgopher (~textual@2601:241:8000:38f0:cd3a:7cf:4af5:8257)
[09:00:20] *** Joins: BartJ_ (~dodi@d515225BA.access.telenet.be)
[09:00:42] *** Quits: BartJ (~dodi@d515225BA.access.telenet.be) (Ping timeout: 268 seconds)
[10:08:14] *** Joins: mbuf (~Shakthi@171.61.232.157)
[12:19:25] *** Joins: hetiii (~dev@user-5-173-249-54.play-internet.pl)
[17:19:40] *** Quits: nj0rd (~nj0rd@mx01.private-mail-for.me) (Quit: WeeChat 3.4)
[17:19:58] *** Joins: nj0rd (~nj0rd@mx01.private-mail-for.me)
[17:52:54] *** Joins: dirtmaster88 (~dirtmaste@lubspub.com)
[18:31:22] *** Quits: hetiii (~dev@user-5-173-249-54.play-internet.pl) (Quit: Leaving)
[18:39:26] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[18:46:41] *** Joins: rsx (~dummy@ppp-188-174-150-178.dynamic.mnet-online.de)
[19:18:45] *** Quits: rsx (~dummy@ppp-188-174-150-178.dynamic.mnet-online.de) (Quit: rsx)
[19:57:50] *** Quits: mbuf (~Shakthi@171.61.232.157) (Quit: Leaving)
[22:37:27] *** Quits: davel (~davel@82-71-4-30.dsl.in-addr.zen.co.uk) (Ping timeout: 256 seconds)
[22:44:02] *** Joins: davel (~davel@82-71-4-30.dsl.in-addr.zen.co.uk)
[22:50:02] *** Quits: davel (~davel@82-71-4-30.dsl.in-addr.zen.co.uk) (Remote host closed the connection)
[23:20:59] *** Joins: gschanuel21 (~gschanuel@user/gschanuel)
[23:30:32] *** Quits: gschanuel21 (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[23:32:45] *** Joins: gschanuel21 (~gschanuel@user/gschanuel)
[23:37:28] *** Quits: gschanuel21 (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
