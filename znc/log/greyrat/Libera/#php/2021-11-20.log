[00:00:47] *** Joins: junktext (~junktext@gateway/vpn/pia/junktext)
[00:02:01] <azazul> relipse: these days the "poor man's deploy tool" is: git pull
[00:02:38] <relipse> yeah i've used git pull i still do for some of my stuff but i always hear the git docs say "don't use git pull" for deployment
[00:03:40] <azazul> thats be cause most of the morons out there just set doc_root in the same place as project_root
[00:03:54] <relipse> well that's prety silly
[00:04:04] <azazul> and pretty common
[00:04:04] <relipse> considering by default they will have access to .git folder
[00:04:16] <azazul> yeees
[00:04:30] <azazul> I have worked on a comany, who was doing that
[00:04:35] <azazul> *in a
[00:04:48] <relipse> what's the url of that company's website?
[00:04:49] <relipse> ;)
[00:04:49] <azazul> s/who/shich
[00:04:54] <azazul> *which
[00:05:11] <azazul> it went under about 6 months after I left that place
[00:05:20] <relipse> i mean if you use apache to block access to .git folder then its still protected, right?
[00:05:41] <azazul> they were one of those "web agencies", that produce like 2 new sites per month
[00:06:11] <relipse> did you set them straight and rebuild their git repo?
[00:06:32] <relipse> with public_html as a subdir
[00:07:04] <azazul> yes, I also removed the video files rom theor repository histories
[00:07:12] <relipse> ah smart man
[00:07:16] <relipse> how did you handle the videos then?
[00:07:23] <relipse> did you do Git LFS?
[00:08:13] <azazul> and on my first day I went to boss's office and showed how I can hack their main money-making client's CMS with firefox inspect tool
[00:08:23] <azazul> ^ trues story actually
[00:08:36] <relipse> haha how did that work?
[00:08:55] <azazul> there was a lot of shouting that day in the office
[00:09:17] <azazul> also, the video file where not actually used anymore
[00:09:30] <azazul> someone had committed them, and then removed the file
[00:09:47] <azazul> but they were still sitting in the history ... about 3 gigs
[00:13:56] <relipse> how did the firefox inspect hack work?
[00:14:56] <azazul> they were using base64 to "secure" the remember me cookie
[00:15:47] <azazul> which container the user's role
[00:15:53] <azazul> *contained
[00:16:15] <judah> I once worked in a PHP shop that handled subscriptions. I noticed that on the payment page, the amount to deduct from the clients card was a part of the POST request. I demonstrated that you could change this to a negative number and it would actually just give you money, and was promptly fired for "hacking"
[00:17:05] <judah> Pro tip guys, if you are running your own payment processor then dont trust the client to say what they are going to pay without any form of validation
[00:17:11] <relipse> no way, you can put a - numbrer
[00:17:31] <__adrian> relipse: why couldn't you?
[00:17:51] <__adrian> tip: if you can't think of this kind of problem, don't write code that does payments.
[00:17:59] <__adrian> just - don't -
[00:18:14] <relipse> yeah but what payment gateway is going to send money to your credit card?
[00:18:27] <__adrian> um... any of them?
[00:18:32] <relipse> i gotta try that
[00:18:34] <__adrian> it's called a refund
[00:18:36] <azazul> there are some court cases in USA currently, where people are up on "hacking" charges for using view-source
[00:18:48] <judah> Oh yeah, that Georgia case
[00:18:53] <relipse> link?
[00:18:56] <judah> sec
[00:19:10] <__adrian> they found SSNs in the html source
[00:19:17] <azazul> yes that
[00:19:26] <judah> https://arstechnica.com/tech-policy/2021/10/missouri-gov-calls-journalist-who-found-security-flaw-a-hacker-threatens-to-sue/
[00:19:34] <relipse> <!-- ignore these ssns: 000-11--11-,
[00:19:37] <judah> right click -> view source -> straight to jail
[00:19:56] <judah> Missouri not Georgia, my bad
[00:20:36] <azazul> you press F12, while fiddling with someone computer and you are seen as "l33t haX0r"
[00:20:36] <__adrian> it's like giving someone a physical book that they asked to read, but then if they read the wrong chapter it's theft
[00:21:29] <judah> If you really want to blow someones mind, install the "hollywood" package. Heck, even "cmatrix" would have most folks convinced you were a computer god
[00:22:14] <__adrian> https://hackertyper.net/
[00:22:34] <judah> I had forgotten about that one, thats a fun one
[00:28:05] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 265 seconds)
[00:30:05] *** Joins: jetchisel (jetchisel@user/jetchisel)
[00:31:29] *** Joins: pulse (~pulse@user/pulse)
[00:32:54] *** Hash is now known as EnchanterTim
[00:41:18] *** Quits: Miles8of9 (~obrien@93-34-146-223.ip50.fastwebnet.it) (Read error: Connection reset by peer)
[00:51:06] *** EnchanterTim is now known as Hash
[01:01:30] *** Quits: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net) (Quit: The Lounge - https://thelounge.chat)
[01:14:11] *** Quits: pmercado (~pmercado@186.107.37.219) (Ping timeout: 264 seconds)
[01:24:25] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 256 seconds)
[01:30:11] *** Joins: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net)
[01:41:23] *** Quits: scara (~user@user/scara) (Remote host closed the connection)
[01:41:44] *** Joins: scara (~user@user/scara)
[01:49:39] *** Quits: genom (~g@37.214.42.244) (Remote host closed the connection)
[02:17:56] *** Quits: wovixo (~wovixo@128.104.205.49) (Quit: Leaving)
[02:27:05] *** Joins: onichomp (~onichomp@2806:264:4404:8016:85bb:d6c8:6a2e:8f43)
[02:31:23] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:50:01] *** Joins: Azrael_- (~aweoi@51.154.62.124)
[02:52:18] *** Joins: GreyXor (~GreyXor@2a01:e0a:13e:a720:d468:9dbd:a19:c258)
[03:05:05] *** Quits: GreyXor (~GreyXor@2a01:e0a:13e:a720:d468:9dbd:a19:c258) (Quit: Client closed)
[03:11:12] *** Joins: \mSg (mSg@user/msg/x-0285936)
[03:11:47] *** Quits: magla (~gelignite@55d403ec.access.ecotel.net) (Quit: Stay safe!)
[03:17:47] *** Quits: wolfgangspace (~wolfgangs@2604:a880:800:10::81:b001) (Remote host closed the connection)
[03:18:26] *** Joins: wolfgangspace (~wolfgangs@2604:a880:800:10::81:b001)
[03:29:29] *** Joins: stan_man_can (~stanley@d66-183-88-69.bchsia.telus.net)
[03:29:35] *** Quits: Stanley (~stanley@d66-183-88-69.bchsia.telus.net) (Quit: ZNC - https://znc.in)
[03:29:49] *** Quits: RonWhoCares (~ronpi@104.158.0.91) (Ping timeout: 265 seconds)
[03:42:17] *** Joins: DoubleJ (~DoubleJ@atlas.orga.fail)
[03:43:18] *** Quits: DoubleJ (~DoubleJ@atlas.orga.fail) (Changing host)
[03:43:18] *** Joins: DoubleJ (~DoubleJ@user/doublej)
[03:48:32] *** Quits: pulse (~pulse@user/pulse) (Quit: Join a community of creative supermutants at https://indiedevs.net/)
[04:06:55] *** Joins: pulse (~pulse@user/pulse)
[04:32:35] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[04:47:23] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[05:01:31] *** Quits: pulse (~pulse@user/pulse) (Quit: Join a community of creative supermutants at https://indiedevs.net/)
[05:03:31] *** Joins: noord (~noord@user/noord)
[05:19:31] *** Quits: de-facto (~de-facto@user/de-facto) (Remote host closed the connection)
[05:19:50] *** Joins: de-facto (~de-facto@user/de-facto)
[05:26:03] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[05:26:17] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[05:27:14] *** Quits: onichomp (~onichomp@2806:264:4404:8016:85bb:d6c8:6a2e:8f43) (Read error: Connection reset by peer)
[05:27:52] *** Joins: onichomp (~onichomp@2806:264:4404:8016:85bb:d6c8:6a2e:8f43)
[05:28:10] *** Quits: onichomp (~onichomp@2806:264:4404:8016:85bb:d6c8:6a2e:8f43) (Read error: Connection reset by peer)
[05:30:20] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[06:07:41] *** Quits: noord (~noord@user/noord) (Quit: WeeChat 3.3)
[06:33:49] *** Parts: velix (~velix@user/velix) (Leaving)
[07:03:45] *** Joins: Sanden (~Sanden@47-222-22-66.plptcmtk03.res.dyn.suddenlink.net)
[07:06:09] *** Joins: ferdna (~ferdna@user/ferdna)
[07:16:32] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[07:16:46] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[07:40:04] *** Joins: tw2113 (~tw2113@2001-48F8-6-1318-D2AB-D5FF-FE77-2BD5-dynamic.midco.net)
[07:55:09] <tw2113> FRIDAY!
[07:58:48] <dag> hey!
[08:05:56] <Sanden> Is there anyone here who can help me get the PHPMailer working for a cat rescue so we can start getting applications again? GoDaddy broke the PERL mailer I had when they moved hosts after buying out the ISP, and after three days of trying? I'm tired, people are frustrated wanting to adopt kitties, and I'm exemplifying no good deed goes unpunished
[08:05:57] <Sanden> because I offered to redo their awful site for free...
[08:10:59] <Sanden> https://pastebin.com/u03BNFbQ
[08:12:17] <__adrian> if you have questions about code you're writing, you're in the right place - but this is not the channel to advertise jobs, unfortunately, or to get people to do work for you. if someone's interested they can PM you.
[08:12:48] <Sanden> I'm not advertising a job, I'm asking for help to get this configured.
[08:13:07] <__adrian> what's your specific question, then?
[08:13:32] <Sanden> Why won't it work?
[08:13:38] <__adrian> (btw the advice i have for that webpage is that it needs to be organized)
[08:13:41] <__adrian> !+php first
[08:13:41] <php-bot> your PHP code can be sorted into two categories: code which _performs work_ (processing input, controller logic, database access, error handling, etc.), and code which  _produces output_ (header(), echo, <?= $var ?>, plain ol' <html>, etc.). work goes FIRST. output goes LAST. https://gist.github.com/adrian-enspired/9ed2542a695e2ebe30aa
[08:14:11] <__adrian> "Sanden> Why won't it work?"  this is not a specific question. you're asking for someone to do all the torubleshooting for you. it's potentially a lot.
[08:14:41] <__adrian> you need to narrow it down. what's happening that's wrong? what did you try? what errors are you seeing?
[08:15:52] <Blondie101010> not easy to find PHP in there
[08:15:58] <Sanden> I've tried doing several of the tuts, they all come back with a 500 error
[08:16:07] <Blondie101010> look at the error log
[08:16:12] <Blondie101010> !+error reporting
[08:16:12] <php-bot> Set `error_reporting = -1` in your php.ini (to see errors on your webpage, also set `display_errors = 1`) and be sure to restart your webserver/fastcgi-listeners. Using `ini_set()` and `error_reporting()` is less reliable - for example, in the case of parse errors. See https://php.net/errorfunc.configuration or "/msg php-bot error logging" for more.
[08:16:18] <Blondie101010> !+error logging
[08:16:18] <php-bot> In addition to configuring error reporting (/msg php-bot error reporting), set log_errors=1 and error_log=/path/to/your/error.log in your php.ini file. This allows you to simply tail the log to see errors, and to disable display_errors (e.g., during production).
[08:16:35] <__adrian> ^ that way you can see the actual problem
[08:16:48] <Sanden> OK, give me a moment
[08:17:56] <tw2113> how do I echo hello world?
[08:18:09] <__adrian> tw2113: https://php.net/echo
[08:18:11] * tw2113 gets out before anyone can tell hi to
[08:18:18] <tw2113> him*
[08:18:53] <tw2113> what about printing it?
[08:19:02] <__adrian> get out
[08:19:03] * tw2113 gets out before anyone can tell him to again
[08:19:07] <tw2113> damn
[08:19:09] <__adrian> :p
[08:19:17] <Sanden> there are two php.ini files in the dir, one is php5.ini and one is php.ini - I took this over and have been trying to fix. can one be discarded?
[08:19:19] <tw2113> printf'ing?
[08:19:34] <__adrian> Sanden: there's probably no reason to delete either one.
[08:19:41] <Sanden> ok
[08:19:50] <__adrian> to find out which one you're using,  <?php phpinfo(); // visting this page in your browser
[08:19:59] <__adrian> look for "loaded configuration file"
[08:20:00] *** Joins: pulse (~pulse@user/pulse)
[08:28:16] <Sanden> well, it did give me an error now. the live page is https://www.dfwpurebredrescue.org/adoptx.php
[08:28:58] <tw2113> well you know what line an error is on
[08:28:59] <__adrian> cool. so check out that line
[08:29:41] <__adrian> you've got a string where you shouldn't. if the particular line looks correct, then start backing up (an error on a previous line can show up as a later line)
[08:30:31] <Sanden> What editor do you use?
[08:30:42] <tw2113> why does that matter?
[08:31:06] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[08:31:19] <Sanden> I had used Dreamweaver, but when I got RIF'd it went away
[08:31:20] <__adrian> if you're looking for an editor, just find and try one. the important part is that it's *plain text *does syntax highlighting *does linting *you like it
[08:31:33] <__adrian> no, dreamweaver is not it  :p
[08:31:45] <__adrian> neither is anything that looks remotely like it
[08:31:51] <tw2113> hello college years for me
[08:32:23] <__adrian> i spent a total of ...like a week and a half before i decided it wasn't "just me"
[08:32:32] <__adrian> switched to frontpage  :D
[08:32:43] <tw2113> hello freshman year for me
[08:32:49] <tw2113> and internship
[08:33:23] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 264 seconds)
[08:33:32] <Sanden> I searched for an answer to this problem, and I guess the solution on sitepoint was wrong.
[08:33:45] <tw2113> no the solution is something on line 95
[08:34:00] <Sanden> Yes, I see it
[08:34:14] <Sanden> $mail->setFrom($_POST["email"], $_POST["first"], " " $_POST["last"]);
[08:34:22] <__adrian> so fix it
[08:34:37] <tw2113> sanitization failure
[08:34:41] <Sanden> I split "name" into first and last in the sendmail
[08:34:47] <tw2113> concatenation failure
[08:34:55] <Sanden> wanted a space between them
[08:35:27] <__adrian> Sanden: https://php.net/string  see "concatenation"
[08:35:58] <__adrian> you also have similar errors on other lines btw
[08:36:26] *** Joins: jetchisel (jetchisel@user/jetchisel)
[08:36:37] <__adrian> also check out the link in the "php first" factoid earlier.
[08:39:32] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[08:44:55] <Sanden> I'll look at the php first factoid, now I have three errors, but the page is now rendering at least
[08:45:17] <__adrian> :) progress
[08:51:24] <tw2113> progress!
[09:00:19] *** Quits: deksar (~deksar@user/deksar) (Quit: "Mundus scena, vita transitus; venisti, vidisti, abiisti.")
[09:07:03] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[09:07:17] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[09:17:27] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[09:20:38] *** Quits: guenhael (~Thunderbi@2a01cb008c3d58001987dd991f8b1ba3.ipv6.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[09:29:33] *** Joins: deksar (~deksar@user/deksar)
[09:33:31] *** Quits: tw2113 (~tw2113@2001-48F8-6-1318-D2AB-D5FF-FE77-2BD5-dynamic.midco.net) (Quit: Leaving)
[10:14:05] *** Joins: onichomp (~onichomp@2806:264:4404:8016:f45b:a0b3:7fa:36e7)
[10:16:41] *** Quits: Pixi (~Pixi@user/pixi) (Ping timeout: 250 seconds)
[10:22:40] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[10:26:49] *** Joins: Pixi (~Pixi@user/pixi)
[10:49:17] *** Quits: Sanden (~Sanden@47-222-22-66.plptcmtk03.res.dyn.suddenlink.net) (Quit: Client closed)
[10:57:26] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[10:57:40] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[11:00:46] *** Joins: noord (~noord@user/noord)
[11:06:34] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 265 seconds)
[11:21:37] *** Quits: Colt (~Colt@user/colt) (Quit: Leaving)
[11:38:00] *** Quits: travisghansen (~travisgha@192.74.130.86) (Read error: Connection reset by peer)
[11:38:26] *** Joins: travisghansen4 (~travisgha@192.74.130.86)
[11:44:27] *** Joins: Colt (~Colt@user/colt)
[11:51:46] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[12:03:23] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 264 seconds)
[12:19:35] *** Quits: lehinsun (~ttytwiste@188.113.176.117) (Read error: Connection reset by peer)
[12:49:53] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[12:50:08] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[12:53:42] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[12:59:32] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 268 seconds)
[13:00:11] *** Joins: LucaTM (~LucaTM@user/lucatm)
[13:07:25] *** Quits: sagax (~sagax_nb@user/sagax) (Ping timeout: 250 seconds)
[13:17:18] <put_in> is there any concern-able difference between: finfo_file(finfo_open(FILEINFO_MIME), $file) and finfo_file(finfo_open(), $file, FILEINFO_MIME) ?
[13:17:55] <put_in> the output in both cases are the same
[13:22:48] *** Joins: forgotmynick (uid24625@hampstead.irccloud.com)
[13:25:50] *** Joins: genom (~g@37.214.42.244)
[14:23:47] *** Quits: noord (~noord@user/noord) (Quit: WeeChat 3.3)
[14:24:56] *** Joins: jetchisel (jetchisel@user/jetchisel)
[14:25:15] *** Quits: jetchisel (jetchisel@user/jetchisel) (Read error: Connection reset by peer)
[14:26:02] *** Joins: jetchisel (jetchisel@user/jetchisel)
[14:27:26] *** Quits: jamesmartinez (uid6451@helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[14:38:22] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Remote host closed the connection)
[14:38:35] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[14:45:47] *** Quits: Warped (~Warped@user/warped) (Quit: We Gone! Bye Bye)
[14:47:36] *** Joins: Warped (~Warped@user/warped)
[14:49:21] *** Quits: scara (~user@user/scara) (Ping timeout: 276 seconds)
[14:50:53] *** Joins: scara (~user@user/scara)
[15:31:24] *** Joins: guenhael (~Thunderbi@aaubervilliers-652-1-290-168.w82-121.abo.wanadoo.fr)
[15:42:30] *** Quits: forgotmynick (uid24625@hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[15:50:12] *** Quits: onichomp (~onichomp@2806:264:4404:8016:f45b:a0b3:7fa:36e7) (Read error: Connection reset by peer)
[15:50:50] *** Joins: onichomp (~onichomp@2806:264:4404:8016:f45b:a0b3:7fa:36e7)
[16:11:48] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[16:21:20] *** Joins: zerocal (~zerocal@user/zerocal)
[16:21:29] *** Parts: zerocal (~zerocal@user/zerocal) ()
[16:22:19] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[16:23:12] <Alex123> hello all, I am having issue with time which is UTC converting to local timezone with day light saving
[16:23:43] <Alex123> it converts the time without daylight saving
[16:27:14] <Alex123> before daylight change   $date = new DateTime($event_date_time, new DateTimeZone('UTC')); $date->setTimestamp(new DateTimeZone('America/Los_Angeles')); this will convert to 4pm PST, but now it shows 3pm
[16:29:05] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Remote host closed the connection)
[16:29:19] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[16:29:50] <AllenJB> What is the value of $event_date_time? Have you confirmed the value of the DateTime object before you convert timezones is correct? I also assume you're actually using setTimezone(), not setTimestamp.
[16:31:36] <biberu> Alex123: https://3v4l.org
[16:33:59] *** Quits: de-facto (~de-facto@user/de-facto) (Remote host closed the connection)
[16:34:19] *** Joins: de-facto (~de-facto@user/de-facto)
[16:42:19] *** Joins: sagax (~sagax_nb@user/sagax)
[16:48:39] *** Quits: deksar (~deksar@user/deksar) (Ping timeout: 256 seconds)
[17:20:38] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[17:27:05] *** Joins: Smeef (~deathonat@user/smeef)
[18:14:07] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[18:19:26] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[18:19:39] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[18:40:08] *** Joins: osxtra (~root@136.49.108.80)
[19:09:14] *** Joins: miklcct (~quassel@vps2.miklcct.com)
[19:09:41] *** Quits: miklcct (~quassel@vps2.miklcct.com) (Client Quit)
[19:13:05] *** Quits: miklcct_ (quasselcor@miklcct.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[19:14:55] *** Joins: miklcct (~quassel@vps2.miklcct.com)
[19:15:42] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[19:26:42] *** Quits: joo-_ (~joo-_@fsf/member/joo--) (Quit: leaving)
[19:38:53] *** Joins: guido (~guido@host-79-36-250-156.retail.telecomitalia.it)
[19:41:55] *** Joins: luigibu (~luigibu@80.30.201.209)
[19:49:11] *** Joins: ms49434 (~ms49434@user/ms49434)
[20:08:10] *** Quits: onichomp (~onichomp@2806:264:4404:8016:f45b:a0b3:7fa:36e7) (Read error: Connection reset by peer)
[20:08:48] *** Joins: onichomp (~onichomp@2806:264:4404:8016:f45b:a0b3:7fa:36e7)
[20:10:09] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Remote host closed the connection)
[20:10:23] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[20:42:58] *** Joins: Miles8of9 (~obrien@93-34-146-223.ip50.fastwebnet.it)
[21:07:22] *** Joins: Xavier7 (~O_o@179.6.152.229)
[21:10:56] *** Quits: __adrian (~adrian@user/adrian/x-7832151) (Ping timeout: 245 seconds)
[21:14:59] *** Quits: samy1028b (~samy1028@068-184-115-031.res.spectrum.com) (Ping timeout: 256 seconds)
[21:18:44] *** Joins: __adrian (~adrian@user/adrian/x-7832151)
[21:40:52] *** Quits: luigibu (~luigibu@80.30.201.209) (Ping timeout: 265 seconds)
[21:47:46] *** Joins: Rockwood (~Rocky@user/rocky)
[21:49:19] *** Quits: Rockwood (~Rocky@user/rocky) (Read error: Connection reset by peer)
[22:00:42] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[22:00:55] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[22:14:37] *** Joins: ShArkZ (sharkz@user/sharkz)
[22:14:59] *** Parts: ShArkZ (sharkz@user/sharkz) ()
[22:15:55] *** Joins: Learath2 (~learath2@user/learath2)
[22:20:35] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[22:32:51] *** Quits: scara (~user@user/scara) (Remote host closed the connection)
[22:33:16] *** Joins: scara (~user@user/scara)
[22:33:47] *** Joins: GreyXor (~GreyXor@2a01:e0a:13e:a720:d468:9dbd:a19:c258)
[22:40:35] *** Quits: put_in (~put_somew@123.20.213.95) (Quit: Leaving)
[22:48:06] <CoJaBo> Is it normal that PDO-Sqlite sometimes throws a locking error when 2 scripts are writing to the same DB? What causes this?    PDOException: SQLSTATE[HY000]: General error: 5 database is locked
[22:52:41] <AllenJB> As far as I recall, sqlite isn't designed for concurrent write access. Either redesign your application to avoid concurrent writes (using job queues) or use a server-based DB such as MySQL or Postgres
[22:57:02] <__adrian> https://www.sqlite.org/lockingv3.html https://www.sqlite.org/wal.html
[23:03:01] <CoJaBo> I can't seem to find any in that that says it should lock in that situation tho; it seems to imply it should just block, or at worst return BUSY, but never LOCKED
[23:04:29] <Blondie101010> are you using version 2 or 3?
[23:05:03] <__adrian> and is the db file local? and how many processes are trying to write when this happens?
[23:05:47] <CoJaBo> Sqlite3
[23:06:03] *** Quits: guido (~guido@host-79-36-250-156.retail.telecomitalia.it) (Read error: Connection reset by peer)
[23:06:54] <CoJaBo> The file is local; there are only 2 processes in all the cases it has happened. There's a daemon that keeps the DB open all the time, and a web API that sometimes also accesses it. It is not expected that the latter will ever have more than one concurrent access at a time.
[23:07:21] <Blondie101010> what does the daemon do?
[23:07:30] <CoJaBo> The problem is that the daemon keeps crashing due to the DB being locked, even tho the accesses from the API are relatively infrequent
[23:07:57] <Blondie101010> can you show the queries run on both?
[23:09:18] <CoJaBo> During the last crash, both scripts actually ended up running the same REPLACE INTO statement at the same time on the same row
[23:09:41] <CoJaBo> I don't know if this is always the case; this is the first crash that happened since I fixed the error logging
[23:10:19] <CoJaBo> It seems to always be the daemon that crashes too, tho a crash of the API client might not even get logged/noticed so that's not a given.
[23:12:12] <Blondie101010> I'd suggest making your code more resilient with proper exception handling, but why would the two touch the same record at the same time?
[23:12:32] <Blondie101010> that sounds like a design issue
[23:14:37] <CoJaBo> Blondie101010: Basically what happened this time is the API notified the server of a change at the exact moment that the daemon was already in the process of acting on. This shouldn't have caused any issues, as the same data was being written by both..
[23:15:18] <CoJaBo> Not ideal, but I can't find anything saying that this should cause an exception
[23:15:22] <Blondie101010> you said the daemon always keeps the DB open
[23:15:27] <CoJaBo> Yes
[23:15:41] <Blondie101010> does the problem go away when you commit?
[23:16:12] <CoJaBo> I can't trigger this on-demand, even with simulating heavy concurrent writes
[23:16:27] <Blondie101010> ah so it's not that bad
[23:16:53] <Blondie101010> but a simple exception handler to keep going when this error happens would probably be suitable
[23:16:55] <CoJaBo> It happens somewhat regularly, so there's clearly some condition I'm missing, but I don't know what it is
[23:17:58] <CoJaBo> I can look specifically for the locking exception and re-run the query when that happens, but without knowing what causes this, I can't test that solution either :/
[23:18:08] <Blondie101010> for example, you could catch the exception, and get the process to continue after a tiny delay
[23:18:55] <CoJaBo> Yeh, but I don't know how big a delay, and can't experiment to find out either lol..
[23:19:36] <CoJaBo> Oh, this might be a PHP bug
[23:19:38] *** Joins: freeworld (~cracker@chello085216193138.chello.sk)
[23:19:39] *** Quits: __adrian (~adrian@user/adrian/x-7832151) (Ping timeout: 256 seconds)
[23:19:48] <CoJaBo> "General error: 5 database is locked"
[23:19:54] <CoJaBo> 5 is BUSY, not LOCKED
[23:20:01] <CoJaBo> LOCKED is 6
[23:20:06] *** Joins: vit (~vit@chello085216193138.chello.sk)
[23:20:06] <CoJaBo> https://www.sqlite.org/rescode.html#busy
[23:21:02] <AllenJB> Does the API need to know if writes succeeded? Could you defer writes to a job queue (that could be executed by the daemon)? This reduces the chance of issues happening in the first place and makes retrying writes later easy (requeue the job)
[23:22:04] *** Joins: luigibu (~luigibu@80.30.201.209)
[23:23:04] <CoJaBo> No writes should ever fail, but the API failing is less critical. In the event that both write to the same row, it doesn't matter which one gets inserted, as they should be identical
[23:23:29] <CoJaBo> I think my problem, really, is that the PHP error message is simply wrong; the issue has nothing to do with the database being locked
[23:24:36] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[23:25:47] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[23:25:58] <CoJaBo> AFAICT, busy_timeout is the PRAGMA I need to tweak, tho it's still rather odd I can't seem to repro this. The app doesn't use transactions at all (as each row is effectively atomic), but I'm gonna try to force it to happen by creating a long-running transaction or something, so at least I can test what happens..
[23:27:13] <relipse> does anyone have any experience doing their own form of sessions?
[23:27:20] <relipse> like a db version
[23:27:32] *** Quits: luigibu (~luigibu@80.30.201.209) (Ping timeout: 240 seconds)
[23:27:37] <Blondie101010> plenty
[23:27:53] <relipse> do you have any code for it?
[23:28:02] <Blondie101010> no
[23:28:03] <relipse> i mean open source or whatnot tha tyou could share
[23:28:52] <CoJaBo> I also have done this plenty of times, got any specific questions llol
[23:29:50] <CoJaBo> Huh. The UPS for my test server apparently doesn't work. As if this day needed more fun. :/
[23:30:18] <Blondie101010> relipse:  either you write it yourself, asking assistance with the problems you encounter here, or you look for an existing package, finally learning how to search online
[23:31:03] <relipse> yeah i already searched online
[23:31:06] <relipse> i always do before i ask
[23:31:15] <relipse> just found some silly stack overflow answers
[23:34:12] <Blondie101010> not a suggestion, but a result I found in 2 seconds: https://github.com/dominicklee/PHP-MySQL-Sessions
[23:43:06] <azazul> relipse: you mean, making custom session handler?
[23:43:20] <relipse> yeah i mean NOT using session_start() and $_SESSION
[23:43:31] <azazul> emm ... no
[23:43:40] <azazul> those would still use the same "interface"
[23:44:13] <azazul> https://www.php.net/manual/en/session.customhandler.php
[23:44:43] <azazul> also, you would not want to put the session in an SQL database, if you can help it
[23:45:24] <azazul> if you really want to not use $_SESSION, then you should be looking at something like JWT, which make client-side "sessions"
[23:45:38] *** Quits: GreyXor (~GreyXor@2a01:e0a:13e:a720:d468:9dbd:a19:c258) (Quit: Client closed)
[23:46:02] *** Quits: freeworld (~cracker@chello085216193138.chello.sk) (Ping timeout: 240 seconds)
[23:47:50] <AllenJB> What problem are you trying to solve by using a different session mechanism?
[23:50:08] <Blondie101010> good question
[23:50:23] <Blondie101010> the main reason to move the session to a DB is for load balancing
[23:50:57] <azazul> Blondie101010: with "db" you means something like memcache and redis
[23:51:02] <azazul> right?
[23:51:02] *** Quits: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net) (Read error: Connection reset by peer)
[23:51:06] <Blondie101010> could be
[23:51:10] <Blondie101010> but he said DB
[23:51:15] *** Joins: puff (~user@S0106d4ca6d80a83c.vs.shawcable.net)
[23:51:39] <Blondie101010> memcached and redis are valid options
[23:51:48] <azazul> if you are putting session in a mysql database, you are doing multiple things wrong
[23:52:20] <Blondie101010> he probably doesn't have any load to balance
[23:53:06] <azazul> my gues is that he is randomly loosing session and this is his first solution: I'll make my own, with blackjack and hookers
[23:53:35] <entropy_> https://mypastebin.com/TaqNVt2 - can anyone help?
[23:53:56] <azazul> dont use tabs for indentation :D
[23:55:01] <azazul> also that's not how options are passed, entropy_
[23:55:22] <AllenJB> Define "not working". How are you testing the cookies are correctly set?
[23:55:25] <azazul> wh, wait, nevermind, they added a thing in 7.3
[23:55:54] <azazul> entropy_: check PHP version
[23:56:13] <entropy_> Warning: setcookie() expects parameter 3 to be integer, array given in F:\xampp2\htdocs\beta\pastes.php on line 109
[23:56:21] <entropy_> is the exact error
[23:56:25] <azazul> check ... php ... version
[23:57:23] <entropy_> PHP logo
[23:57:23] <entropy_> PHP Version 7.2.27
[23:57:36] <azazul> you need at least 7.3 forthat syntax
[23:57:44] <entropy_> oh ok
[23:57:54] <entropy_> how do i combat the SameSite error then?
[23:58:09] <entropy_> when using a time()+2323 var?
[23:59:29] <azazul> entropy_: I have a better question - why are you not keeping that information in the session ?
[23:59:39] <azazul> it would be a lot easier to work with
