[00:05:42] <maerwald> jneira[m]: yes/no?
[00:37:03] <jneira[m]> the build has processed and was succesful for the new ghc+integer-gmp, thanks!
[00:38:11] <jneira[m]> 9.2.1 failed with a weird error though: https://github.com/haskell/haskell-language-server/pull/2615#issuecomment-1017919238
[00:54:36] <maerwald> you're using a library from 2017
[00:56:07] <maerwald> maybe try https://hackage.haskell.org/package/githash-0.1.6.2/docs/GitHash.html instead
[00:56:10] <maerwald> seems to be maintained
[01:00:30] <sm> +1 for githash
[01:01:12] <sm> if you can handle the possible added TH hassles
[01:01:48] <maerwald> they already have TH hassles
[01:02:10] <jneira[m]> hmm it worked until now, and it works for the rest of ghc versions 🤔
[01:02:35] <jneira[m]> yeah you have to use th with gitrev too
[01:04:04] <sm> I'm so confused about ghc 9.0 and 9.2 on m1 at this point. I think both of them still have problematic issues, and/or I can't use them for real because I don't have a matching hls executable. I guess I should try building one of those myself.
[01:05:16] <maerwald> yeah, everything is busted on M1
[01:06:38] <sm> about TH, I just meant there may be times when trying to bake git info into your software at all creates too much maintenance headache. It's so nice when it works though.
[01:08:29] * sm has progressed to "can't do haskell without HLS" 
[01:16:31] <maerwald>   gitFound <- runIO $ isJust <$> findExecutable "git"
[01:16:36] <maerwald> jneira[m]: pretty sure that is failing
[01:16:44] <maerwald> the environment doesn't have PATH for some reason
[01:16:50] <shapr> yeah, everything is busted on the M1
[01:46:54] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[01:47:20] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[02:11:43] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[02:11:59] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[02:21:42] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[02:22:21] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[02:36:10] *** Joins: jiribenes_ (~jiribenes@rosa.jiribenes.com)
[02:36:58] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[02:37:49] *** Quits: liskin (~liskin@xmonad/liskin) (Ping timeout: 240 seconds)
[02:37:49] *** Quits: jiribenes (~jiribenes@rosa.jiribenes.com) (Ping timeout: 240 seconds)
[02:38:08] *** Joins: liskin (~liskin@xmonad/liskin)
[02:38:30] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[02:38:57] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[02:41:20] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[02:41:33] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[03:51:32] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[03:52:01] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[04:17:28] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[04:17:42] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[04:21:41] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[04:21:54] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[05:13:17] *** Quits: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net) (Ping timeout: 240 seconds)
[07:12:55] *** Quits: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1) (Quit: The Lounge - https://thelounge.chat)
[07:14:22] *** Joins: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1)
[09:37:37] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Ping timeout: 240 seconds)
[10:45:37] *** Joins: arrowd (~arr@2.94.236.140)
[11:29:51] *** Joins: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net)
[11:37:18] *** Joins: fendor (~fendor@178.165.192.6.wireless.dyn.drei.com)
[12:07:17] *** Quits: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net) (Ping timeout: 240 seconds)
[12:16:38] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[13:40:14] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[13:43:47] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[14:01:14] <fendor[m]> When HLS gets stuck displaying Progress reports, is there a way to get more information? Can I run in some debug mode?
[14:05:34] <michaelpj[m]> fendor: look at the server log with --debug? https://haskell-language-server.readthedocs.io/en/latest/troubleshooting.html#examining-the-server-log
[14:06:06] <fendor[m]> michealpj, doesn't print anything of interest, unfortunately
[14:07:58] * jneira[m] uploaded an image: (50KiB) < https://libera.ems.host/_matrix/media/r0/download/matrix.org/LQfpXcqUJbLRnrptfoeYojVD/imagen.png >
[14:08:23] <jneira[m]> love linux :-P 
[14:10:59] <fendor[m]> idk, can I attach a finalizer whenever any thread dies?
[14:11:43] <fendor[m]> is the feature to capture a lsp session and replay it at will still available?
[14:12:06] <michaelpj[m]> nope
[14:12:25] <michaelpj[m]> the entire thing got commented out of lsp-test in the distant past and nobody knows why or how to fix it 🤷
[14:14:11] <fendor[m]> it had a couple of issues, I remember I never got it to work to do anything sensible...
[14:14:48] <fendor[m]> but in this case, it is just thoroughly annoying, I am unsure what causes the crash, so I just hammer the keyboard until stuff crashes
[14:15:09] <fendor[m]> which brings me to the idea, we should probably employ a fuzz tester for hls
[14:15:58] <fendor[m]> maybe that would improve stability in the long run
[14:19:37] <fendor[m]> eh, would probably be just as flaky as the existing tests
[14:44:41] <michaelpj[m]> this is how we get improvements to test infrastructure, people get frustrated enough to do the work :p
[15:11:52] *** Quits: juhp (~juhp@128.106.188.82) (Quit: juhp)
[15:14:17] <michaelpj[m]> jneira: wdyt about moving the `haskell-language-server` package to a subdir rather than the root. It's a bit confusing at the moment, and it would make it easier to e.g. add a CODEOWNERS entry for it
[15:23:13] <jneira[m]> it would make ci scripts more uniform but `cabal build` will start to fail in exchange
[15:23:47] <jneira[m]> now `cabal build` builds the top level package so it is equivalent to `cabal build pkg:haskell-language-server`
[15:24:33] <jneira[m]> (`cabal build haskell-language-server` will also fail btw)
[15:25:53] <michaelpj[m]> how annoying
[15:26:10] <michaelpj[m]> I had noticed the issue with `cabal build haskell-language-server` being ambiguous
[15:27:00] <jneira[m]> yeah, the pkg trick is not well known :-/ 
[15:28:00] <michaelpj[m]> tbh it's quite non-obvious to me that `cabal build` was just building `haskell-language-server`, I thought it was building everything!
[15:28:05] <jneira[m]> you can use `cabal build all` but it is not the equivalent (although it could be what you want)
[15:28:08] <michaelpj[m]> so there would be some improved clarity
[15:28:08] <michaelpj[m]> idk
[15:28:21] <michaelpj[m]> like I said, I thought of it because of CODEOWNERS
[15:28:27] <jneira[m]> ya
[15:29:39] <jneira[m]> (and you have to do `cabal install pkg:hls` not sure if move hls to a subdir would break `ghcup compile hls`)
[15:32:52] <michaelpj[m]> hmm
[15:33:02] <michaelpj[m]> a bit magic for my taste, but maybe better not to disturb it
[15:33:09] <michaelpj[m]> perhaps I'll make a discussion
[15:48:18] <jneira[m]> lets see if githash works 🤞
[15:48:45] <jneira[m]> but i am moving from cautious to paranoic with the alpine thing
[15:50:35] *** Joins: libertyprime (~libertypr@203.211.106.46)
[16:18:27] *** Quits: libertyprime (~libertypr@203.211.106.46) (Quit: leaving)
[16:25:36] <fendor> michaelpj[m], what does code-owner mean? you get pinged when code-paths are touched?
[16:25:51] <michaelpj[m]> did the PR description not explain?
[16:26:05] <michaelpj[m]> anyway, yes
[16:26:14] <fendor> gbh, I skipped it, sorry, will read before asking
[16:26:44] <fendor> ok, it makes it clear, thanks!
[16:26:50] <michaelpj[m]> :)
[16:29:55] <fendor> awesome, love the codeowner file! thanks!
[16:32:08] <jneira[m]> michaelpj: you will not be free neither :-P 
[16:32:09] <jneira[m]> https://github.com/haskell/haskell-language-server/pull/2619/files#r789639436
[16:32:42] <michaelpj[m]> 👼
[16:40:58] *** Joins: fendor_ (~fendor@178.115.77.166.wireless.dyn.drei.com)
[16:43:33] *** Quits: fendor (~fendor@178.165.192.6.wireless.dyn.drei.com) (Ping timeout: 256 seconds)
[16:46:01] <jneira[m]> i would be much calmer if someone could confirm has battle tested the hls alpine binaries
[16:48:16] <jneira[m]> you can download them from the build artifacts: https://github.com/jneira/haskell-language-server/suites/5014931778/artifacts/147473084
[17:14:29] *** Quits: arrowd (~arr@2.94.236.140) ()
[17:31:56] <maerwald> jneira[m]: yes... 9.2.1 is indeed a static release
[17:32:02] <maerwald> those are not ready for prod use
[17:32:41] <maerwald> not surprised that there are issues
[17:33:06] <maerwald> I will build a dynamic one
[18:02:24] <jneira[m]> but we switched to alpine to provide a statically linked his executable, I hope being ghc itself static or dynamic will not affect that
[18:02:53] <maerwald> static ghc has other issues
[18:03:42] <jneira[m]> <maerwald> "I will build a dynamic one" <- thanks for working on it, I guess the dynamic one would not suffer from the getenv bug so we can check it
[18:21:24] <maerwald> oh god... I managed to update docker on my host while the GHC  build was almost finished
[18:21:30] <maerwald> gg
[18:40:14] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[19:12:48] *** Joins: shapr (~user@2601:7c0:c37c:46d0:25fd:6854:a2a7:2f62)
[19:27:50] <maerwald> jneira[m]: with my dynamically compiled one, getEnv works
[19:31:42] <maerwald> jneira[m]: https://github.com/haskell/ghcup-metadata/commit/349f72488c1327527ac9851573d93362e5820bed
[19:49:30] *** Joins: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net)
[19:57:50] <jneira[m]> 👍️
[21:13:58] <jneira[m]> maerwald: what do you think about adding 9.2.1 to hls gitlab ci?
[21:15:09] <maerwald> it could be done
[21:15:12] <maerwald> but who will do it? :D
[21:21:34] <jneira[m]> he, will try
[21:33:07] <Hecate> Is it thinkable to change the colour output of compilation errors/warnings to "not-red"?
[21:33:19] <Hecate> this makes it hard to debug real HLS failures :/
[21:33:28] <Hecate> when starting HLS in a TTY
[21:33:36] <Hecate> not from an editor
[21:45:14] *** w1gz_ is now known as w1gz
[21:49:24] <jneira[m]> wdym with tty? executing hls in a shell?
[21:57:35] <Hecate> jneira[m]: yes
[22:02:46] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[23:27:05] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Remote host closed the connection)
[23:27:36] *** Joins: coot (~coot@2a02:a310:e03f:8500:5cc8:47c:8ec0:b827)
[23:40:51] *** Joins: coot_ (~coot@2a02:a310:e03f:8500:5cc8:47c:8ec0:b827)
[23:44:21] *** Quits: coot (~coot@2a02:a310:e03f:8500:5cc8:47c:8ec0:b827) (Ping timeout: 268 seconds)
[23:53:05] *** Quits: coot_ (~coot@2a02:a310:e03f:8500:5cc8:47c:8ec0:b827) (Quit: coot_)
