[00:01:31] *** Quits: gour_ (~gour@109.227.37.23) (Remote host closed the connection)
[01:03:37] *** Quits: lagash (lagash@lagash.shelltalk.net) (Ping timeout: 240 seconds)
[01:42:42] *** Joins: rgrinberg (~textual@187.223.209.255)
[01:48:54] *** Joins: lagash (lagash@lagash.shelltalk.net)
[02:08:42] *** Quits: lagash (lagash@lagash.shelltalk.net) (Ping timeout: 250 seconds)
[02:10:33] *** Quits: nlhowell2 (~nlhowell@172.58.84.161) (Ping timeout: 256 seconds)
[02:29:09] *** Quits: rgrinberg (~textual@187.223.209.255) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:42:11] *** Joins: rgrinberg (~textual@187.223.209.255)
[02:45:15] *** Quits: seschwar (~seschwar@user/seschwar) (Quit: :wq)
[02:47:47] *** Quits: rgrinberg (~textual@187.223.209.255) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:00:55] *** Joins: lagash (lagash@lagash.shelltalk.net)
[03:16:51] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 256 seconds)
[03:29:01] *** Quits: jao- (~jao@61.red-176-80-130.dynamicip.rima-tde.net) (Ping timeout: 240 seconds)
[03:31:37] *** Joins: jao (~jao@84.red-176-83-203.dynamicip.rima-tde.net)
[03:47:04] *** Quits: jao (~jao@84.red-176-83-203.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[03:49:19] *** Joins: jao (~jao@84.red-176-83-203.dynamicip.rima-tde.net)
[04:24:47] *** Joins: nlhowell2 (~nlhowell@172.58.84.161)
[04:40:55] *** Joins: gast0n (~g4570n@user/gast0n)
[04:53:09] *** Quits: bdale` (~bdale@209-248-100-20.falconbroadband.net) (Quit: Coyote finally caught me)
[04:58:03] *** Joins: bdale (~bdale@209-248-100-20.falconbroadband.net)
[05:44:32] *** Quits: nyah (~nyah@94.6.71.219) (Ping timeout: 240 seconds)
[05:48:29] *** Joins: rgrinberg (~textual@187.223.209.255)
[05:56:00] *** Quits: lagash (lagash@lagash.shelltalk.net) (Remote host closed the connection)
[06:00:23] *** Joins: lagash (lagash@lagash.shelltalk.net)
[06:06:51] *** Quits: gast0n (~g4570n@user/gast0n) (Ping timeout: 256 seconds)
[06:47:35] *** Quits: rgrinberg (~textual@187.223.209.255) (Read error: Connection reset by peer)
[06:48:38] *** Joins: rgrinberg (~textual@187.223.209.255)
[06:58:20] *** Joins: gast0n (~g4570n@user/gast0n)
[07:30:01] *** Quits: haasn (~nand@haasn.dev) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[07:31:26] *** Joins: haasn (~nand@haasn.dev)
[09:10:09] *** Quits: gast0n (~g4570n@user/gast0n) (Quit: Bye, see you soon! ðŸ‘‹)
[09:21:10] *** Quits: jao (~jao@84.red-176-83-203.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[09:28:32] *** Joins: malaclyps (~mala@user/malaclyps)
[09:28:35] *** Quits: mala (~mala@user/malaclyps) (Read error: Connection reset by peer)
[09:34:18] *** Joins: gour (~gour@109.227.37.23)
[09:38:18] *** Quits: rgrinberg (~textual@187.223.209.255) (Read error: Connection reset by peer)
[09:39:24] *** Joins: rgrinberg (~textual@187.223.209.255)
[10:44:23] *** Quits: rgrinberg (~textual@187.223.209.255) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[10:54:21] <inwit> bremner: Thanks, I solved it manually. Some glitch in my folder/tag replication config has me deleting files manually often, so I'll come back to this until I properly solve it.
[10:58:29] *** Joins: rgrinberg (~textual@187.223.209.255)
[11:14:01] *** Quits: sam_ (~sam@gentoo/developer/sam) (Read error: Connection reset by peer)
[11:21:41] *** Joins: sam_ (~sam@gentoo/developer/sam)
[11:34:08] *** Quits: rgrinberg (~textual@187.223.209.255) (Remote host closed the connection)
[11:35:51] *** Joins: rgrinberg (~textual@187.223.209.255)
[11:56:29] *** Joins: kzak (~kzak@nat-37.starnet.cz)
[12:35:07] *** Quits: rgrinberg (~textual@187.223.209.255) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[12:39:12] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 250 seconds)
[13:13:34] *** Joins: gour_ (~gour@109.227.37.23)
[13:14:51] *** Quits: gour (~gour@109.227.37.23) (Ping timeout: 256 seconds)
[13:56:53] *** gour_ is now known as gour
[14:03:01] *** Quits: pabs3 (~pabs3@user/pabs3) (Ping timeout: 240 seconds)
[14:06:07] *** Joins: pabs3 (~pabs3@user/pabs3)
[16:29:18] *** Quits: nlhowell2 (~nlhowell@172.58.84.161) (Ping timeout: 250 seconds)
[16:38:17] *** Joins: geyaeb2 (~geyaeb@gateway/tor-sasl/geyaeb)
[16:40:39] *** Quits: geyaeb (~geyaeb@gateway/tor-sasl/geyaeb) (Ping timeout: 276 seconds)
[16:51:29] *** Joins: gour_ (~gour@109.227.37.23)
[16:52:11] *** Joins: nlhowell2 (~nlhowell@172.58.84.161)
[16:54:09] *** Quits: gour (~gour@109.227.37.23) (Ping timeout: 256 seconds)
[16:56:36] *** Quits: nlhowell2 (~nlhowell@172.58.84.161) (Ping timeout: 250 seconds)
[16:59:17] *** Joins: nlhowell2 (~nlhowell@149.160.143.98)
[17:10:08] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[17:19:05] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 256 seconds)
[17:51:42] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[17:57:42] *** Joins: gast0n (~g4570n@user/gast0n)
[17:59:17] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[18:27:31] *** Quits: nlhowell2 (~nlhowell@149.160.143.98) (Quit: WeeChat 3.1)
[18:27:46] *** Joins: nlhowell (~nlhowell@149.160.143.98)
[18:33:00] *** Joins: geyaeb3 (~geyaeb@gateway/tor-sasl/geyaeb)
[18:33:45] *** Quits: geyaeb2 (~geyaeb@gateway/tor-sasl/geyaeb) (Ping timeout: 276 seconds)
[18:58:19] *** Joins: rgrinberg (~textual@187.223.209.255)
[19:01:37] *** Quits: rgrinberg (~textual@187.223.209.255) (Remote host closed the connection)
[19:02:36] *** Joins: rgrinberg (~textual@187.223.209.255)
[19:09:45] *** Quits: rgrinberg (~textual@187.223.209.255) (Read error: Connection reset by peer)
[19:10:35] <dob1> what happen if notmuch index a file that it gets deleted ?
[19:11:05] *** Joins: rgrinberg (~textual@2806:101e:7:4889:3c8d:4176:aa67:59be)
[19:12:35] <cworth> dob1: Not much, really.
[19:13:40] <cworth> dob1: If notmuch has previously indexed a file that was since deleted, search results would still match against it, but notmuch will notice the deletion the next time indexing happens.
[19:13:59] <dob1> cworth, it doesn't seem
[19:14:16] <dob1> indexing with notmuch new ?
[19:14:36] <cworth> Yes, "notmuch new" will notice files that have been deleted since the last indexing.
[19:15:43] <dob1> it's still finding it
[19:15:57] <dob1> does it matters if the file name start with . ?
[19:15:59] <cworth> (Though, checking the documentation, it looks like our summary in notmuch-new(1) doesn't mention deletions. We should fix that.)
[19:17:02] <dob1> can I purge it manually in some way?
[19:18:13] <bremner> did you tell notmuch new to ignore the file?
[19:18:35] <dob1> I don't know how to do this
[19:18:59] <bremner> then you probably didn't
[19:19:37] <bremner> you can try "notmuch new --debug" and see if it mentions that file
[19:20:00] <dob1> no, it's not mentioned
[19:20:39] <cworth> dob1: The notmuch test suite has had this text case in it for a very long time:
[19:20:44] <cworth> test_begin_subtest "Deleted message"
[19:20:44] <cworth> rm "${gen_msg_filename}"-renamed
[19:20:44] <cworth> output=$(NOTMUCH_NEW --debug)
[19:20:44] <cworth> test_expect_equal "$output" "(D) add_files, pass 3: queuing leftover file ${gen
[19:20:44] <cworth> _msg_filename}-renamed for deletion from database
[19:20:44] <cworth> No new mail. Removed 1 message."
[19:21:14] <dob1> I saw this message sometimes (not now time ago) but this time is not working
[19:21:25] <cworth> That is, deleting a file from the mail store and running "notmuch new --debug" should report the file as having been deleted.
[19:21:47] <bremner> dob1: another guess is that there are multiple files for a given message, and you only deleted one of them
[19:22:02] <bremner> you can check with "notmuch search --output=files"
[19:23:02] <dob1> bremner, with what search term?
[19:23:20] <dob1> but anyway I am pretty sure that this mail message is duplicated with another name
[19:23:26] <bremner> dob1: well, how do you know notmuch still finds it?
[19:23:56] <dob1> I do notmuch --output=files date:today    the file is there
[19:24:07] <dob1> but it doesn't exist in the dir
[19:25:27] <bremner> what is the file called?
[19:26:57] <dob1> can I just put part of the file for privacy reason?
[19:27:15] <bremner> it's hard to know what is needed to debug the problem.
[19:28:33] <dob1> it's called .1642078895.othernumers.provider.com.other_mail_dir_codes.Sad.A2BdmX (note the . at start)    and I the the same file without the . at start  and just Sa at end
[19:29:08] <dob1> and the same file without . at start but "Sad" at the end
[19:29:35] <bremner> is the whole thing really long, more than 200 characters?
[19:30:05] <dob1> the path or just the filename?
[19:30:11] <bremner> just the filename
[19:32:33] <dob1> 78
[19:33:13] <bremner> I'm out of ideas. It is possible you have found a bug in notmuch new, but it is hard to be sure without a test case.
[19:33:50] <dob1> the . at the start doesn't mean nothing that can hurt nutmuch new ?  it's the only strange thing in this file
[19:33:50] <bremner> if you want to try a brute force remedy, you could backup (with notmuch dump), remove the database, and run notmuch new from scratch
[19:34:28] <bremner> hmm. I don't think so, but I suppose it's possible the . is a problem
[19:35:26] <bremner> just to be sure, what is the output of "notmuch config get new.ignore" ?
[19:35:40] <dob1> nothing
[19:35:45] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[19:35:56] <bremner> that's the default I think. So not the problem.
[19:37:06] <cworth> dob1: And you've run "'notmuch new" again?
[19:37:22] <dob1> I run it several times
[19:38:43] <cworth> Yeah. Something's weird. If you could replicate that behavior with a sequence of instructions and a new database, then we could help debug. In the meantime, it's hard for us to guess from the outside what the problem might be.
[19:39:11] <dob1> I understand it
[19:39:53] <dob1> I rsync files from a maildir, for sure this was, imho, an incomplete file, that was replaced on the next sync with rsync
[19:40:00] <dob1> but notmuch run on the first rsync too
[19:43:35] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 256 seconds)
[19:48:16] *** Joins: seschwar (~seschwar@user/seschwar)
[19:49:24] *** Joins: nyah (~nyah@94.6.71.219)
[19:54:40] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[20:01:06] *** Quits: rgrinberg (~textual@2806:101e:7:4889:3c8d:4176:aa67:59be) (Remote host closed the connection)
[20:01:17] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[20:02:27] *** Joins: rgrinberg (~textual@2806:101e:7:4889:3c8d:4176:aa67:59be)
[20:10:00] *** Quits: yeled_ (~yeled@host-79-77-55-168.static.as9105.com) (Quit: WeeChat 3.4)
[20:10:19] *** Joins: yeled (~yeled@host-79-77-55-168.static.as9105.com)
[20:10:37] <dob1> bremner, to reset the db for a restart with notmuch new I can just empty the xapian dir, right?
[20:20:14] <bremner> dob1: unless your notmuch is very new, you will need to remove the .notmuch directory
[20:20:52] <dob1> notmuch 0.29.2
[20:22:06] <bremner> yeah, so you need to remove .notmuch as well; save your hooks if you have any
[20:22:12] <dob1> yes I have one
[20:22:55] <bremner> you'll have to put it back after the first notmuch new
[20:23:25] <dob1> ah so I run a notmuch new without the hook?
[20:23:32] <bremner> yes
[20:24:25] <dob1> it's indexing, 2 hours :)
[20:24:36] <dob1> I will run the next one with the hook then
[20:52:30] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[20:57:58] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 250 seconds)
[20:58:48] *** Quits: rgrinberg (~textual@2806:101e:7:4889:3c8d:4176:aa67:59be) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:00:39] *** Quits: gast0n (~g4570n@user/gast0n) (Ping timeout: 256 seconds)
[21:18:32] <Domo_> touch(1)ing the directory the file used to exist may make a difference.
[21:18:52] <Domo_> most probably not, but there could be some timing that happened
[21:19:12] <Domo_> touching dir, then notmuch new
[21:19:12] *** Quits: nlhowell (~nlhowell@149.160.143.98) (Ping timeout: 250 seconds)
[21:19:35] *** Domo_ is now known as Domo
[22:11:25] *** Joins: jao (~jao@79.red-79-159-137.dynamicip.rima-tde.net)
[22:39:56] <inwit> The json printer produces a list of authors involved in a thread whose elements are separated by "| ". I'm sure there's a reason, but, wouldn't it be better to use " | ", "|" or ", "?
[22:41:35] <bremner> deval/schemata says     authors:        string,   # comma-separated names with | between matched and unmatched
[22:42:00] <bremner> in retrospect that should have been some kind of list of lists, but here we are
[22:51:39] *** Joins: nlhowell (~nlhowell@149.160.143.98)
[22:52:00] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[22:56:39] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Ping timeout: 256 seconds)
[22:59:39] *** Joins: gour__ (~gour@109.227.37.23)
[23:00:13] *** Quits: gour_ (~gour@109.227.37.23) (Ping timeout: 256 seconds)
[23:02:17] <inwit> bremner: I see. That is done in sprinter-json.c, right?
[23:02:57] <bremner> probably
[23:03:49] <bremner> well. Actually it is probably generic, so at a higher level than that
[23:04:01] <bremner> notmuch-search.c, at a guess
[23:06:34] <inwit> I see... it doesn't look so easy to change. :(
[23:07:17] <bremner> well, any change would need matching changes in the emacs front end.
[23:07:33] <bremner> other than that, I guess it's not so hard to generate nested lists
[23:08:37] <inwit> Yeah, I was just hoping to change a string... :-S It's been ages since I don't grok C.
[23:08:59] <bremner> ah, yeah it would be more than changing a format string
[23:09:14] <inwit> Indeed.
[23:16:43] *** Joins: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net)
[23:16:59] *** Quits: radu242407821 (~radu242@pool-96-250-79-242.nycmny.fios.verizon.net) (Client Quit)
[23:58:57] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 240 seconds)
