[06:56:00] *** Joins: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz)
[06:56:29] *** Quits: shapr (~user@pool-100-36-247-68.washdc.fios.verizon.net) (Ping timeout: 264 seconds)
[07:58:21] *** Quits: hololeap (~hololeap@user/hololeap) (Remote host closed the connection)
[07:59:47] *** Joins: hololeap (~hololeap@user/hololeap)
[08:06:21] *** Joins: Philonous_ (~Philonous@user/philonous)
[08:09:27] *** Joins: kosmikus_ (~kosmikus@nullzig.kosmikus.org)
[08:09:47] *** Quits: hololeap (~hololeap@user/hololeap) (Remote host closed the connection)
[08:11:06] *** Joins: hololeap (~hololeap@user/hololeap)
[08:13:51] *** Quits: Philonous (~Philonous@user/philonous) (*.net *.split)
[08:13:51] *** Quits: kosmikus (~kosmikus@nullzig.kosmikus.org) (*.net *.split)
[09:55:32] *** Quits: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz) (Ping timeout: 240 seconds)
[11:12:31] *** Joins: libertyprime (~libertypr@151.210.168.191)
[11:25:15] *** Joins: lortabac (~lortabac@2a01:e0a:541:b8f0:906e:b8e3:dc89:8d11)
[11:37:29] *** Quits: fendor (~fendor@77.119.192.182.wireless.dyn.drei.com) (Read error: Connection reset by peer)
[11:50:16] *** Joins: hololeap_ (~hololeap@user/hololeap)
[11:50:42] *** Quits: hololeap (~hololeap@user/hololeap) (Remote host closed the connection)
[12:09:07] *** Quits: hololeap_ (~hololeap@user/hololeap) (Remote host closed the connection)
[12:10:31] *** Joins: hololeap_ (~hololeap@user/hololeap)
[12:25:40] *** Quits: libertyprime (~libertypr@151.210.168.191) (Ping timeout: 268 seconds)
[13:27:19] *** Joins: July541 (~July@218.70.255.85)
[13:39:17] <jneira[m]> i wonder if we should investigate i we can reduce our dependency set
[13:39:45] <jneira[m]> in each step we want to take we hit a blocker :-/
[13:40:32] <jneira[m]> jneira[m]: with the goal of remove all semiabandoned libraries as much as possible
[13:41:51] <jneira[m]> (not the case of ghc-lib, the last one, it has been fixed with great diligency)
[13:41:54] <expipiplus1> jneira: You could always move them wholesale into the hls tree and add them as private libraries with cabal
[13:42:24] <jneira[m]> but we want to have hackage releases :-(
[13:42:56] <expipiplus1> jneira[m]: Having HLS require this feature is a pretty good forcing function for the rest of the ecosystem
[13:43:10] <expipiplus1> could also add some backpack functionality while you're at it ;)
[13:47:34] <jneira[m]> he
[13:47:40] <jneira[m]> reduce dependencies is good in its own but i am afraid we are living in the leafs of the dependency graph
[13:47:40] <expipiplus1> expipiplus1: (I was serious about this bit)
[13:47:51] <jneira[m]> expipiplus1: yeah, it is a somewhat comforting pov, but it is tired to chase maintainers
[13:47:55] <jneira[m]> ghc is moving so much faster than the community...
[13:48:17] *** Joins: Heffalump (~ganesh@urchin.earth.li)
[13:48:48] <jneira[m]> at least hackage trustees does a great work changing bounds
[13:48:49] <jneira[m]> but they cant do much about breaking changes
[13:52:00] <expipiplus1> you should move over to nixos, we're not shy about patching things more aggressively 
[13:53:04] <jneira[m]> hmm i am on windows so i would push me out myself of hls development :-D   
[13:53:50] <jneira[m]> hmm i thought being in hackage was needed somehow for nix... ðŸ¤”
[13:54:05] <jneira[m]> but dont know much about nix so i may be wrong
[13:54:08] <expipiplus1> jneira[m]: my condolences :P
[13:54:29] <expipiplus1> jneira[m]: although nixpkgs does have all the packages from hackage, nothing really precludes adding non-hackage packages
[13:54:42] <jneira[m]> aha
[13:54:51] <jneira[m]> there is hackage server overlays too
[13:54:59] <jneira[m]> like head.hackage
[13:55:02] <expipiplus1> indeed, our hls package was like that before hls was on hackage
[15:03:50] <michaelpj[m]> reducing dependency closure sounds sensible to me. Anyone know of a way to get the package dependency graph?
[15:04:30] <jneira[m]> cabal-plan
[15:04:30] <expipiplus1> `ghc-pkg dot`?
[15:04:31] <michaelpj[m]> my guess would be that the worst culprits are the formatters that we depend on. I think in that case it would be quite reasonable for us to consider them "optional" for support; we just document that e.g. brittany doesn't build on GHC9, if you care about that, go bug the brittany maintainers
[15:04:46] <michaelpj[m]> Ellie: omg
[15:04:49] <michaelpj[m]> nice
[15:05:13] <jneira[m]> expipiplus1: oh yeah forgot about that one
[15:05:43] <jneira[m]> does it take in account all ghc pkgs used by cabal v2?
[15:14:17] <jneira[m]> well you can feed them with them manually
[15:14:26] <jneira[m]> michaelpj[m]: we already have dropped some formatters for ghc-9.0.1
[15:14:28] <jneira[m]> (includiing brittany)
[15:14:35] <jneira[m]> but our core ghcide is the one needed a hackage release and we cant ship hls without
[15:14:50] <jneira[m]> but i guess it will be difficult to make smaller the dependency closure, we are depending on half of useful hackage and with more than one edge for many of them
[15:14:56] <jneira[m]> for example ghc-lib, we are depending on though hlint and formatters
[15:14:56] <jneira[m]> and building ghc twice lol
[15:15:00] <jneira[m]> s/though/through/
[15:15:39] <michaelpj[m]> ghc-lib and friends seem unavoidable
[15:15:40] <michaelpj[m]> but maybe we can prune the rest a bit
[15:16:03] <jneira[m]> yeah it worths to take a look for sure
[15:16:19] <michaelpj[m]> hmm, what's the magic invocation to run `ghc-pkg` in the right build environment for a cabal package? `cabal exec` isn't it...
[15:17:02] <jneira[m]> cabal-plan :-P 
[15:17:38] <jneira[m]> although i would say cabal exec should do the trick...
[15:18:08] <jneira[m]> ghc-pkg does not support environment files?
[15:19:56] <michaelpj[m]> dunno
[15:20:04] <michaelpj[m]> environment files are evil anyway :p
[15:20:13] <michaelpj[m]> but maybe this is their time
[15:20:23] <michaelpj[m]> cabal exec doesn't take a component, as far as I can tell
[15:20:32] <jneira[m]> but cabal exec is using them to tell ghc where are the three package db it uses
[15:21:08] <jneira[m]> `cabal exec echo -- $GHC_ENVIRONMENT`
[15:22:46] <michaelpj[m]> empty
[15:23:01] <jneira[m]> well not sure if that works i have to do `cabal exec cmd` and then `echo $GHC_ENVIRONMENT`
[15:23:19] <jneira[m]> (so `cabal exec bash`for you i guess ;-) )
[15:23:29] <jneira[m]> s/$/%/, s/`/%`/
[15:23:46] <jneira[m]> so maybe run ghc-pkg dot in that subshell?
[15:25:16] <jneira[m]> jneira[m]: no way
[15:26:02] <jneira[m]> for me at least, i guess ghc itself understanf ghc env file but ghc-pkg does not (and ghc is passing ghc-pkg the dbs as raw params)
[15:26:48] <jneira[m]> from an outsider pov it is very weird than a compiler uses a package manager underneath, instead the other way, btw
[15:28:27] <michaelpj[m]> `ghc-pkg` isn't really a package manager, so much as a package-database tool, and package-databases do make sense for GHC
[15:29:43] <jneira[m]> hmm ya, but still are there more compilers out there with a dedicated tool for doing that?
[15:30:06] <jneira[m]> javac only accepts a raw list of .jars f.e. afaik
[15:30:49] <jneira[m]> and package managers feed it directly with them
[15:31:33] <jneira[m]> the package database is in the package manager only, not in two locations
[15:32:08] <jneira[m]> but well, iguess that was designed when cabal ever exist
[15:33:03] <jneira[m]> (and that is the origin of the ghc-environment file thing which caused so many traumas)
[15:33:42] <jneira[m]> --rant end--
[15:34:42] <michaelpj[m]> no, that's not true. ghc-environment files are a new addition, that's why I was so annoyed by them, since I really don't find they have any justification in today's age
[15:34:48] <michaelpj[m]> ghc-pkg is old, though
[15:34:54] <michaelpj[m]> and yeah, probably pre-cabal
[15:36:44] <jneira[m]> hmm yeah but it was added to make easier to cabal new build pass multiple ghc-pkg locations and package ids to ghc, no?
[15:36:50] <jneira[m]> so without ghc-pkg it would not have existed
[15:37:26] <jneira[m]> the env file seems to be a list of ghc-pkg arguments tied together
[15:39:16] <jneira[m]> one of these day i would make a ghc proposal to remove ghc-pkg :-P 
[15:39:17] <jneira[m]> only to see reactions
[15:40:34] *** Quits: sm (~sm@plaintextaccounting/sm) (Quit: Bridge terminating on SIGTERM)
[15:40:34] *** Quits: hpd_ (~hpdhpdeif@2001:470:69fc:105::230) (Quit: Bridge terminating on SIGTERM)
[15:40:35] *** Quits: jophish (~jophish@2001:470:69fc:105::670) (Quit: Bridge terminating on SIGTERM)
[15:40:35] *** Quits: maralorn (~maralorn@2001:470:69fc:105::251) (Quit: Bridge terminating on SIGTERM)
[15:40:35] *** Quits: teto[m] (~keiichima@2001:470:69fc:105::3a35) (Quit: Bridge terminating on SIGTERM)
[15:40:37] *** Quits: elonsroadster[m] (~elonsroad@2001:470:69fc:105::d121) (Quit: Bridge terminating on SIGTERM)
[15:40:38] *** Quits: michaelpj[m] (~michaelpj@2001:470:69fc:105::86e) (Quit: Bridge terminating on SIGTERM)
[15:40:38] *** Quits: Morrow[m] (~morrowmma@2001:470:69fc:105::1d0) (Quit: Bridge terminating on SIGTERM)
[15:40:39] *** Quits: thomasjm[m] (~thomasjmm@2001:470:69fc:105::c6d9) (Quit: Bridge terminating on SIGTERM)
[15:40:40] *** Quits: dxld[m] (~dxldit-sy@2001:470:69fc:105::978) (Quit: Bridge terminating on SIGTERM)
[15:40:41] *** Quits: cdsmith (~cdsmithma@2001:470:69fc:105::284) (Quit: Bridge terminating on SIGTERM)
[15:40:41] *** Quits: PotatoHatsue (~berberman@2001:470:69fc:105::b488) (Quit: Bridge terminating on SIGTERM)
[15:40:41] *** Quits: expipiplus1 (~expipiplu@2001:470:69fc:105::d713) (Quit: Bridge terminating on SIGTERM)
[15:40:43] *** Quits: jneira[m] (~jneiramat@2001:470:69fc:105::d729) (Quit: Bridge terminating on SIGTERM)
[15:40:43] *** Quits: ManofLetters[m] (~manoflett@2001:470:69fc:105::3be) (Quit: Bridge terminating on SIGTERM)
[15:40:44] *** Quits: Heffalump[m] (~hsenagmat@2001:470:69fc:105::e11) (Quit: Bridge terminating on SIGTERM)
[15:40:45] *** Quits: fendor[m] (~fendormat@2001:470:69fc:105::fcbd) (Quit: Bridge terminating on SIGTERM)
[15:40:46] *** Quits: ServerStatsDisco (~serversta@2001:470:69fc:105::1a) (Quit: Bridge terminating on SIGTERM)
[15:40:46] *** Quits: eddiemundo (~eddiemund@2001:470:69fc:105::a80) (Quit: Bridge terminating on SIGTERM)
[15:43:21] *** Joins: michaelpj[m] (~michaelpj@2001:470:69fc:105::86e)
[15:43:21] <michaelpj[m]> I thought the primary argument was to make interactive usage easier for noobs, so you can `cabal build` and then use `ghc` and have it do "the right thing" (i.e. the horrifyingly stateful thing)
[15:43:21] <michaelpj[m]> but I only came to the debate after it had been done
[15:51:49] *** Joins: jneira[m] (~jneiramat@2001:470:69fc:105::d729)
[15:51:50] <jneira[m]> does cabal-plan work for you then? or you prefer to not use it for some reason? 
[15:52:39] <jneira[m]> `cabal-plan dot` would give you the graph
[15:56:50] *** Joins: hpd_ (~hpdhpdeif@2001:470:69fc:105::230)
[16:00:03] <michaelpj[m]> jneira: seems to work, nice!
[16:00:11] *** Joins: expipiplus1 (~expipiplu@2001:470:69fc:105::d713)
[16:00:11] *** Joins: cdsmith (~cdsmithma@2001:470:69fc:105::284)
[16:00:11] *** Joins: dxld[m] (~dxldit-sy@2001:470:69fc:105::978)
[16:00:12] *** Joins: jophish (~jophish@2001:470:69fc:105::670)
[16:00:12] *** Joins: thomasjm[m] (~thomasjmm@2001:470:69fc:105::c6d9)
[16:00:12] *** Joins: PotatoHatsue (~berberman@2001:470:69fc:105::b488)
[16:00:12] *** Joins: maralorn (~maralorn@2001:470:69fc:105::251)
[16:00:12] *** Joins: sm (~sm@plaintextaccounting/sm)
[16:00:12] *** Joins: elonsroadster[m] (~elonsroad@2001:470:69fc:105::d121)
[16:00:12] *** Joins: ManofLetters[m] (~manoflett@2001:470:69fc:105::3be)
[16:00:12] *** Joins: Morrow[m] (~morrowmma@2001:470:69fc:105::1d0)
[16:00:12] *** Joins: fendor[m] (~fendormat@2001:470:69fc:105::fcbd)
[16:00:12] *** Joins: ServerStatsDisco (~serversta@2001:470:69fc:105::1a)
[16:00:16] *** Joins: Heffalump[m] (~hsenagmat@2001:470:69fc:105::e11)
[16:00:23] *** Joins: teto[m] (~keiichima@2001:470:69fc:105::3a35)
[16:00:24] *** Joins: eddiemundo (~eddiemund@2001:470:69fc:105::a80)
[16:00:57] <jneira[m]> <michaelpj[m]> "I thought the primary argument..." <- yeah, if cabal-env is ported some day to cabal and `cabal --lib` removed i will vote to make it generate named envs by default (or at least local one in cwd)
[16:01:43] <jneira[m]> you have to do `ghc -package-env=myenv` but you will avoid the return of cabal hell
[16:16:20] <michaelpj[m]> well now I have a dot file, back to the classic problem of how to visualize this mess
[16:20:11] *** Quits: ServerStatsDisco (~serversta@2001:470:69fc:105::1a) (Quit: Client limit exceeded: 20000)
[16:20:49] *** Quits: sm (~sm@plaintextaccounting/sm) (Quit: Client limit exceeded: 20000)
[16:20:51] *** Quits: hpd_ (~hpdhpdeif@2001:470:69fc:105::230) (Quit: Client limit exceeded: 20000)
[16:20:59] <expipiplus1> Inb4 you make it into an image and it's such tangled mess, and the lines are so dense and steep as to become impossible to follow 
[16:21:01] *** Quits: cdsmith (~cdsmithma@2001:470:69fc:105::284) (Quit: Client limit exceeded: 20000)
[16:21:23] *** Quits: jophish (~jophish@2001:470:69fc:105::670) (Quit: Client limit exceeded: 20000)
[16:21:24] *** Quits: PotatoHatsue (~berberman@2001:470:69fc:105::b488) (Quit: Client limit exceeded: 20000)
[16:21:50] *** Quits: maralorn (~maralorn@2001:470:69fc:105::251) (Quit: Client limit exceeded: 20000)
[16:41:08] *** Joins: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz)
[16:59:18] *** Quits: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz) (Ping timeout: 260 seconds)
[17:14:23] <wz1000> michaelpj[m]: bgamari recommended Gephi but I could not get it to work. Maybe you will have better luck
[17:14:37] *** Joins: hpd_ (~hpdhpdeif@2001:470:69fc:105::230)
[17:14:37] *** Joins: cdsmith (~cdsmithma@2001:470:69fc:105::284)
[17:14:37] *** Joins: jophish (~jophish@2001:470:69fc:105::670)
[17:14:38] *** Joins: PotatoHatsue (~berberman@2001:470:69fc:105::b488)
[17:14:38] *** Joins: maralorn (~maralorn@2001:470:69fc:105::251)
[17:14:38] *** Joins: sm (~sm@plaintextaccounting/sm)
[17:14:38] *** Joins: ServerStatsDisco (~serversta@2001:470:69fc:105::1a)
[17:34:57] *** hololeap_ is now known as hololeap
[19:51:19] *** Quits: lortabac (~lortabac@2a01:e0a:541:b8f0:906e:b8e3:dc89:8d11) (Quit: WeeChat 2.8)
[20:05:50] *** Joins: shapr (~user@pool-100-36-247-68.washdc.fios.verizon.net)
[20:13:15] *** Joins: arrowd (~arr@2.93.55.66)
[22:07:41] *** Joins: July541_ (~July@218.70.255.117)
[22:10:56] *** Quits: arrowd (~arr@2.93.55.66) ()
[22:11:02] *** Quits: July541 (~July@218.70.255.85) (Ping timeout: 260 seconds)
[22:31:06] *** Joins: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net)
[22:58:03] *** Joins: Jose_ (~Jose@2600:6c5e:157f:df79:d495:89fe:c524:8f)
[23:03:40] *** Parts: Jose_ (~Jose@2600:6c5e:157f:df79:d495:89fe:c524:8f) (Leaving)
[23:08:11] *** Joins: brandonh (brandonh@gateway/vpn/protonvpn/brandonh)
[23:17:03] *** Quits: hololeap (~hololeap@user/hololeap) (Excess Flood)
[23:18:33] *** Joins: hololeap (~hololeap@user/hololeap)
[23:20:41] *** Quits: brandonh (brandonh@gateway/vpn/protonvpn/brandonh) (Quit: brandonh)
[23:35:41] *** Quits: juhp (~juhp@128.106.188.220) (Ping timeout: 256 seconds)
[23:38:47] *** Joins: juhp (~juhp@128.106.188.220)
