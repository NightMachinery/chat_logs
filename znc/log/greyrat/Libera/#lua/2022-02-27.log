[00:06:17] *** Quits: rgrinberg (~textual@2806:101e:7:79ba:dc50:f4f5:8b68:5890) (Ping timeout: 240 seconds)
[00:12:46] *** Joins: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp)
[00:16:53] *** Quits: Tricycle (~CGI273@lfbn-idf1-1-1376-196.w90-79.abo.wanadoo.fr) (Quit: bye)
[00:23:53] *** Joins: rgrinberg (~textual@200.68.171.127)
[00:41:29] *** Quits: Vornicus (~Vornicus@2603-8000-5d07-7ef0-0874-78d3-f683-7de6.res6.spectrum.com) (Read error: Connection reset by peer)
[00:52:40] *** Joins: hrcerq (~hrcerq@user/hrcerq)
[01:25:26] *** Quits: netlynx (~jan@94-226-69-15.access.telenet.be) (Quit: Leaving)
[01:50:25] *** Quits: magla (~gelignite@55d47826.access.ecotel.net) (Quit: Stay safe!)
[02:29:55] *** Quits: rgrinberg (~textual@200.68.171.127) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:33:24] *** Quits: pizdets_ (~pizdets@183.182.115.3) (Ping timeout: 240 seconds)
[02:33:59] *** Joins: pizdets (~pizdets@183.182.114.101)
[02:48:36] *** Quits: fcr (~fran@r167-56-94-226.dialup.adsl.anteldata.net.uy) (Ping timeout: 240 seconds)
[02:53:49] *** Joins: fcr (~fran@r186-48-158-228.dialup.adsl.anteldata.net.uy)
[03:09:17] *** Quits: orthoplex64 (~crm@70.120.0.94) (Ping timeout: 240 seconds)
[03:09:18] *** Joins: crm (~crm@70.120.0.94)
[03:09:58] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:9d42:51ae:9407:db15)
[03:18:13] *** Joins: orthoplex64 (~crm@70.120.0.94)
[03:19:54] *** Quits: crm (~crm@70.120.0.94) (Ping timeout: 272 seconds)
[03:26:44] *** Quits: r3m (~launch@user/r3m) (Quit: WeeChat 3.5-dev)
[03:27:29] *** Joins: r3m (~launch@user/r3m)
[03:44:02] *** Joins: Elw3 (~Elw3@dynamic-002-247-240-059.2.247.pool.telefonica.de)
[03:44:55] *** Quits: daddy (3645@hashbang/bdfl) (Quit: WeeChat 3.4 <:3)~)
[03:45:38] *** Joins: daddy (3645@hashbang/bdfl)
[03:55:28] *** Quits: velgin (~velgin@pool-96-237-105-119.bstnma.fios.verizon.net) (Read error: Connection reset by peer)
[03:57:11] *** Joins: Techcable (~Techcable@168.235.93.147)
[03:58:30] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 268 seconds)
[04:20:30] *** Joins: ratchetfreak_ (~ratchetfr@d8d8779d9.access.telenet.be)
[04:23:31] *** Quits: ratchet_freak (~ratchetfr@ptr-82rtos1uhakfz4xnvao.18120a2.ip6.access.telenet.be) (Ping timeout: 256 seconds)
[04:46:16] *** Quits: R2robot (~R2robot@user/r2robot) (Quit: Pull the lever, Kronk.  Wrong leverrrrrrr!)
[04:55:13] *** Joins: R2robot (~R2robot@user/r2robot)
[05:11:54] *** Joins: angryguy (~Elw3@dynamic-002-247-242-022.2.247.pool.telefonica.de)
[05:12:12] *** angryguy is now known as Elw2
[05:13:21] *** Quits: Elw3 (~Elw3@dynamic-002-247-240-059.2.247.pool.telefonica.de) (Ping timeout: 256 seconds)
[05:29:54] *** Quits: Elw2 (~Elw3@dynamic-002-247-242-022.2.247.pool.telefonica.de) (Read error: Connection reset by peer)
[06:20:51] *** Quits: hrcerq (~hrcerq@user/hrcerq) (Quit: fui)
[06:21:12] *** Joins: ratchet_freak (~ratchetfr@d8D8779D9.access.telenet.be)
[06:21:39] *** Quits: ratchet_freak (~ratchetfr@d8D8779D9.access.telenet.be) (Read error: Connection reset by peer)
[06:24:27] *** Quits: ratchetfreak_ (~ratchetfr@d8d8779d9.access.telenet.be) (Ping timeout: 256 seconds)
[06:56:41] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[07:14:20] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 252 seconds)
[07:41:56] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:9d42:51ae:9407:db15) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:42:16] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[07:46:40] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:9d42:51ae:9407:db15)
[08:04:16] *** Quits: Erutuon (~Erutuon@user/erutuon) (Ping timeout: 272 seconds)
[08:08:12] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:9d42:51ae:9407:db15) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:13:49] *** Joins: Erutuon (~Erutuon@user/erutuon)
[09:17:40] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:9d42:51ae:9407:db15)
[09:26:10] *** Quits: tuvok (tuvok@Photography.tuvok.eu) (Ping timeout: 250 seconds)
[09:41:27] *** Joins: sertsa (~sertsa@209.140.9.178)
[10:07:09] *** Quits: Erutuon (~Erutuon@user/erutuon) (Ping timeout: 256 seconds)
[10:38:49] *** Joins: Erutuon (~Erutuon@user/erutuon)
[10:49:29] *** Quits: sertsa (~sertsa@209.140.9.178) (Quit: Leaving)
[10:53:23] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 256 seconds)
[10:55:19] *** Quits: ubq323 (~ubq323@user/ubq323) (Ping timeout: 256 seconds)
[10:56:37] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[11:34:01] *** Joins: _xor (~xor@dsl-50-5-233-169.fuse.net)
[11:37:47] *** Joins: netlynx (~jan@94-226-69-15.access.telenet.be)
[11:58:30] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 260 seconds)
[12:00:26] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[12:33:56] *** cp--- is now known as cp-
[12:58:12] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:9d42:51ae:9407:db15) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:06:39] *** Joins: Elw3 (~Elw3@dynamic-002-247-241-068.2.247.pool.telefonica.de)
[13:32:12] *** Joins: magla (~gelignite@d5364c1c.access.ecotel.net)
[13:49:30] *** Joins: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be)
[14:39:28] *** Quits: Erutuon (~Erutuon@user/erutuon) (Ping timeout: 272 seconds)
[14:48:28] *** Quits: fcr (~fran@r186-48-158-228.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[14:59:36] *** Joins: fcr (~fran@r167-60-7-70.dialup.adsl.anteldata.net.uy)
[15:30:12] *** Joins: tuvok (tuvok@Photography.tuvok.eu)
[15:48:17] *** Quits: Techcable (~Techcable@168.235.93.147) (Ping timeout: 256 seconds)
[16:20:04] *** Joins: ratchet_freak (~ratchetfr@ptr-82rtos1uhakfz4xnvao.18120a2.ip6.access.telenet.be)
[16:54:42] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:dd10:779a:8f5a:8f40)
[16:54:42] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:dd10:779a:8f5a:8f40) (Changing host)
[16:54:42] *** Joins: skapata (~Skapata@user/skapata)
[17:15:21] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 245 seconds)
[17:28:24] *** Joins: skapata (~Skapata@user/skapata)
[17:35:06] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[18:25:11] *** Joins: Vornicus (~Vornicus@2603-8000-5d07-7ef0-7856-da4b-8042-847f.res6.spectrum.com)
[18:43:21] *** Joins: inky_ (~inky@5.77.147.151)
[18:44:27] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[18:47:46] *** Quits: inky_ (~inky@5.77.147.151) (Ping timeout: 250 seconds)
[19:00:44] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[19:24:57] *** Quits: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp) (Ping timeout: 240 seconds)
[19:33:16] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Quit: taupiqueur)
[19:39:57] *** Quits: Elw3 (~Elw3@dynamic-002-247-241-068.2.247.pool.telefonica.de) (Remote host closed the connection)
[19:45:32] <caoliver> Just got bit by some classic stupidity: CDATAs held only in foreign structs getting GCed out from under me.
[19:45:41] * caoliver hangs his head in shame.
[20:42:49] *** Quits: magla (~gelignite@d5364c1c.access.ecotel.net) (Quit: Stay safe!)
[20:44:57] *** Quits: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be) (Ping timeout: 240 seconds)
[20:46:16] *** Joins: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be)
[20:53:24] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 240 seconds)
[20:54:47] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[21:18:47] *** Joins: ubq323 (~ubq323@130.88.226.27)
[21:18:47] *** Quits: ubq323 (~ubq323@130.88.226.27) (Changing host)
[21:18:47] *** Joins: ubq323 (~ubq323@user/ubq323)
[21:22:17] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 240 seconds)
[21:28:41] *** Quits: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be) (Ping timeout: 245 seconds)
[21:46:54] *** Kane is now known as Kane_
[21:47:28] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:dd10:779a:8f5a:8f40)
[21:47:28] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:dd10:779a:8f5a:8f40) (Changing host)
[21:47:28] *** Joins: skapata (~Skapata@user/skapata)
[21:52:20] *** Kane_ is now known as Kane
[22:03:04] *** Joins: magla (~gelignite@d5364c1c.access.ecotel.net)
[22:08:13] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 240 seconds)
[22:10:25] <caoliver> Dear lazy web, what (if any) is the public API for finding the file matching a name in packages.{path,cpath}.
[22:10:28] <caoliver> ?
[22:21:14] *** Joins: skapata (~Skapata@user/skapata)
[22:36:35] *** Quits: fcr (~fran@r167-60-7-70.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[22:42:15] *** Joins: fcr (~fran@r167-60-31-84.dialup.adsl.anteldata.net.uy)
[22:44:17] <sham1> At least I can't think of any. You could do it manually by substituting the question-marks though
[22:47:05] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:cdbf:b436:9743:fee8)
[22:51:50] <hsv> Hi, is there a better way to do this?
[22:51:54] <hsv> local n = string.find(str, "?", 1, true) if n then str = string.sub(str, 1, n - 1) end
[22:53:04] <hsv> The purpose being to truncate str at the first occurance of '?', if it exists.
[22:58:55] <furq> hsv: string.match(str, "^[^?]+")
[22:59:31] <furq> % local foo, bar = "asdfg", "asdf?g" return foo:match("^[^?]+"), bar:match("^[^?]+")
[22:59:31] <yalb> furq: sandbox:1: count; stack traceback:; [C]: in function 'error'; sandbox:1: in main chunk
[22:59:40] <furq> great
[22:59:46] <furq> well you can just trust me that it works
[23:02:01] *** Joins: Erutuon (~Erutuon@user/erutuon)
[23:07:05] <nmz> caoliver: public API? wha? package.searchpath("lpeg",package.cpath) would return the location of lpeg
[23:07:08] <nmz> but no clue what you mean
[23:08:59] <nmz> you can recreate package.searchpath for 5.1, its 3 lines, i'll paste if needed
[23:09:11] <nmz> function package.searchpath(name,path)for file in path:gsub("%?",name):gmatch"[^;]+"do local f=io.open(file)if f then io.close(f)return file end end end 
[23:10:42] <nmz> function package.searchpath(name,path)for file in path:gsub("%?",name):gmatch"[^;]+"do local f=io.open(file)if f then io.close(f)return file end end return nil end 
[23:10:47] <nmz> forgot to return nil
[23:11:15] <caoliver> nmz: I was reading the 5.1 docs, and I'm using OpenResty's LuaJIT2 which does provide that call.
[23:11:23] <caoliver> Hence my question.
[23:11:36] <nmz> what is your question?
[23:11:52] <nmz> actually, I probably cant answer it, i'm not a webdev
[23:12:29] <caoliver> Use case: I have a few libraries that provide both a Lua API interface and a direct C interface via the FFI.
[23:13:38] <caoliver> I had a quick and dirty wrapper, but you had to provide both the path for ffi.load and the require name as separate arguments.  I thought that was clumsy, and I wanted to find the path using the require name.
[23:14:17] <nmz> require does return the path as its second value
[23:14:20] <caoliver> I.e. ffi.require_and_load(name) rather than ffi.require_and_load(name, ffipath)
[23:14:27] <nmz> but that depends on the lua
[23:14:39] <caoliver> Right.  LuaJIT2 doesn't do that.
[23:17:06] <caoliver> http://ix.io/3QWi/lua
[23:21:06] <caoliver> I would prefer that second function to have just one argument.
[23:22:11] <caoliver> Gorgeous.  That's just what the doctor ordered.
[23:27:23] *** Quits: ubq323 (~ubq323@user/ubq323) (Quit: apioforms incurse)
[23:31:07] <caoliver> So instead, that function becomes: http://ix.io/3QWo/lua
[23:32:22] <caoliver> I should put in a check to blow chunks if the library lacks the cdef string.
[23:35:08] <caoliver> nmz: thanks for the help.
[23:36:02] <nmz> if _VERSION="Lua 5.1" then setthatpackage.searchpathfunction end
[23:36:23] <nmz> though, nobody should use lua5.1
[23:36:30] <nmz> but jic
[23:37:14] <caoliver> This is to specifically support dual interface libraries in LuaJIT, so 5.1 is not my concern.
[23:38:04] <caoliver> 5.1 doesn't have require 'ffi'.load(path)
[23:39:00] <caoliver> Happily, the reference to shared_object.cdef_string already blows chunks if the library doesn't define it.
[23:39:18] <caoliver> I.e. you'll die unless you're pcall wrapped.
[23:40:50] <hsv> furq: it seems to work, just not with the bot.  thanks.
[23:42:03] <caoliver> LuaJIT 2.0.5 provides package.searchpath even without the extra 5.2isms turned on.  All relevant bases are covered.
[23:43:16] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:cdbf:b436:9743:fee8) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:57:22] *** Joins: Techcable (~Techcable@168.235.93.147)
