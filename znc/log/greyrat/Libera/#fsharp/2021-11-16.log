[04:39:10] *** Quits: xeno (~xeno@user/xeno) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:41:11] *** Joins: xeno (~xeno@user/xeno)
[06:18:23] *** Quits: jinsun (~quassel@user/jinsun) (Ping timeout: 264 seconds)
[07:35:26] *** Joins: jinsun (~quassel@user/jinsun)
[12:00:02] *** Joins: kuribas (~user@ptr-25vy0i87u19ttsdwrve.18120a2.ip6.access.telenet.be)
[12:56:16] <MatthiasVance> Soooo my .NET 5 project builds fine with 'dotnet build' but not so much in VS :o
[12:56:35] <MatthiasVance> Error	FS0039	The type 'String' does not define the field, constructor or member 'String'. Maybe you want one of the following:   ToString	
[12:56:35] <biberu> vim program.fs
[12:57:30] <biberu> that's odd, i guess you tried the usual suspects like clearing obj, .vs?
[12:58:13] <MatthiasVance> I haven't yet, since it was freshly cloned
[12:58:22] <MatthiasVance> Will do that right now
[12:59:05] <biberu> String with capital s?
[12:59:36] <MatthiasVance> yes the property it's on comes from an XmlProvider thing
[12:59:53] <biberu> you don't have another class named String in there?
[13:00:05] <biberu> "string" and "String" are subtly different
[13:00:11] <MatthiasVance> If that were the case wouldn't it also fail with 'dotnet build'?
[13:01:40] <MatthiasVance> Weird thing is, VS shows all projects that build as : "Project: Common, Configuration: Debug Any CPU -" (so with the name)
[13:01:53] <MatthiasVance> But this one with: Project: Aggregation (src\aggregation\Aggregation), Configuration: Debug 
[13:09:17] <MatthiasVance> biberu: Hm, weird thing is, another property in that thing *does* have the String one
[13:18:05] <biberu> hm, yeah, i wonder why dotnet build wouldn't error on the same thing
[13:18:50] <MatthiasVance> it's also not a VS problem, but MSBuild fails where dotnet build doesn't
[13:19:46] <biberu> i guess this is an internal project? not something you cloned from a public repo?
[13:20:43] <MatthiasVance> Yeah it's a client project
[13:21:09] <MatthiasVance> I have time so I'll try to generate a sample
[13:21:16] <biberu> version of msbuild?
[13:21:46] <MatthiasVance> Microsoft (R) Build Engine version 17.0.0+c9eb9dd64 for .NET Framework
[13:21:46] <MatthiasVance> 17.0.0.52104
[13:22:17] <biberu> should be new enough at least
[13:22:36] <MatthiasVance> Indeed, on VS 2022. I don't feel like installing VS 2019 just to test :D
[13:24:23] <biberu> you can containerize msbuild to try different versions, perhaps ms already has one available, but it's probably faster to just try make an sscce as usual
[13:24:43] <biberu> it can take a while to create images for it :>
[13:35:14] <MatthiasVance> Hm I just wonder why that XmlProvider thinks it's already a string in one case, but not in the other
[13:35:22] <MatthiasVance> We're using Paket so versions should be the same
[13:35:32] <MatthiasVance> SDK used is the same
[13:35:46] <biberu> yeah, interesting issue
[13:36:37] <MatthiasVance> Maybe this is related: https://github.com/xamarin/Xamarin.Android.FSharp.ResourceProvider/issues/9
[13:36:46] <MatthiasVance> I am not doing android but it's about the type provider "not running" or something
[13:37:15] <MatthiasVance> nah not related at all sorry
[13:37:21] <MatthiasVance> Just grasping at straws right now :D
[13:38:32] <biberu> what did you mean by a property having String with capital s? <visibility> String Foo?
[13:40:28] <MatthiasVance> This is a type generated by a type provider from an XML
[13:41:32] <MatthiasVance> IntelliSense tells me that another property (I can't take screenshots with the popups for some reason..), does have .String
[13:41:40] <MatthiasVance> But not this one since it already *is* a string
[13:42:50] <biberu> can you cut down the xml to a single record while keeping the error? and if so compare that property against one that works?
[13:47:03] <MatthiasVance> A-ha!
[13:47:07] <MatthiasVance> The difference is the F# compiler used
[13:47:20] <MatthiasVance> dotnet build: Microsoft (R) F# Compiler version 11.4.2.0 for F# 5.0
[13:47:42] <MatthiasVance> msbuild: Microsoft (R) F# Compiler version 12.0.0.0 for F# 6.0
[13:47:48] <biberu> oh
[13:48:06] <biberu> does it work if you configure it to use 5 in the project file then?
[13:48:22] <MatthiasVance> Well my question is also .. why does dotnet build use F# 5
[13:48:24] <MatthiasVance> and msbuild F# 6
[13:48:32] <biberu> indeed
[13:48:55] <biberu> you're targeting .net 5? i'd expect it to use f#5 unless you've overridden it
[13:49:02] <biberu> do you have a directory.build.props?
[13:49:19] <biberu> if so, perhaps msbuild takes its langversion from it?
[13:49:50] <MatthiasVance> .props is msbuild specific right? Then no, I am the first one on the team with VS :D
[13:50:20] <biberu> i think so
[13:50:34] <biberu> ls -r directory.build.props ;)
[13:50:46] <MatthiasVance> https://github.com/dotnet/fsharp/issues/5496
[13:51:12] <MatthiasVance> No such file! :D
[13:51:26] <biberu> hm
[13:51:33] <biberu> now i need to try it here
[13:55:34] <MatthiasVance> I *really* don't want to do this: https://stackoverflow.com/questions/43838923/how-do-i-use-a-specific-version-of-the-f-compiler-in-msbuild-projects
[13:58:55] <biberu> MatthiasVance: what happens if you just set <FSharpVersion>5.0</FSharpVersion> in the project file?
[13:59:19] <MatthiasVance> The GH issue states that's not implemented yet? But I can try :D
[13:59:23] <biberu> or 6 for that matter, to see if that provokes the same error from dotnet build
[13:59:28] <biberu> it works when i try it here
[13:59:48] <biberu> dotnet build --verbosity=diagnostic | sls FSharpVersion
[14:00:17] <MatthiasVance> hm when I add that to the project it doesn't build in MSBuild
[14:01:02] <MatthiasVance> As in, same error as before
[14:01:51] <MatthiasVance> biberu: When you say it works on your end, are you looking at dotnet build or MSBuild?
[14:04:40] <biberu> i was looking at the output of dotnet build, but with further testing that might be showing something else
[14:05:11] <biberu> i tried to use an f# 6 feature (list[idx] instead of list.[idx]) while setting it to 5, and it still builds
[14:09:43] <biberu> i'm confused :D
[14:10:42] <MatthiasVance> :D
[14:10:55] <MatthiasVance> So I'm thinking about workarounds, I could use F# 5 *globally*
[14:11:04] <MatthiasVance> Or change *all* the projects
[14:11:06] <MatthiasVance> Neither is good
[14:13:17] <biberu> are your colleagues taunting you about their ide yet? :D
[14:14:25] <MatthiasVance> They did that *before* I even got started :P
[14:16:59] <MatthiasVance> biberu: Hm, is it possible to pass arguments to fsc in MSBuild? Because: https://github.com/fsharp/fslang-design/pull/360
[14:17:34] <biberu> don't know, try /p:langversion=5?
[14:19:25] <MatthiasVance> nope :(
[14:19:29] <MatthiasVance> or at least, same error
[14:23:26] <MatthiasVance> Maybe I can install or use a different toolset
[14:24:46] <biberu> is it possible to make a shareable example?
[14:25:26] <MatthiasVance> Probably, let me do that!
[14:42:45] <biberu> g
[14:43:02] <biberu> wrong key :)
[14:44:37] <MatthiasVance> Hm, I can reproduce the error, but it happens in both 
[14:44:47] <MatthiasVance> So let me see what is different still
[14:49:30] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 265 seconds)
[14:50:34] <MatthiasVance> biberu: What is the easiest way to share this? :D
[14:50:52] <biberu> github?
[14:50:55] <MatthiasVance> I can push a - yes!
[14:52:14] *** Joins: lind{at}yahoo (uid486956@tinside.irccloud.com)
[14:52:46] <MatthiasVance> biberu: Is your username also biberu on GH?
[14:52:54] <biberu> yes
[14:53:28] <MatthiasVance> Invite sent, didn't make it a public one just to be sure :D
[14:55:11] <biberu> got it
[15:02:15] *** Joins: stenno (~stenno@user/stenno)
[15:03:42] <biberu> ok, doesn't build in 2022 (still latest preview)
[15:04:16] <biberu> doesn't build in 2019 either, same error
[15:04:36] <MatthiasVance> biberu: Adding /p:langversion=5.0 works :o
[15:04:50] <biberu> does build with dotnet build
[15:04:54] <MatthiasVance> wait, hold on
[15:04:56] <biberu> oh, it wanted the .0?
[15:05:03] <MatthiasVance> it didn't rebuild I think
[15:05:22] <MatthiasVance> still fails :) sorry
[15:05:30] <biberu> ah
[15:05:37] <MatthiasVance> biberu: Does it use the F# 6 compiler with VS 2019 as well then? :o
[15:06:06] <biberu> i suppose it might, i'll try with msbuild directly now
[15:08:18] <biberu> Microsoft (R) Build Engine version 16.11.1+3e40a09f8 for .NET Framework
[15:08:24] <biberu> Microsoft (R) Build Engine version 17.1.0-preview-21526-01+a80e2274f for .NET Framework
[15:08:30] <biberu> both give the same error
[15:09:26] <biberu> hm
[15:10:04] <biberu> interesting
[15:10:23] <biberu> the number plate could be interpreted as scientific notation
[15:11:03] <biberu> if i just replace the E with X it works
[15:11:50] <biberu> no, sorry, it doesn't, some lag
[15:15:22] <biberu> MatthiasVance: here's something that does work though: licensePlate = Some(x.NumberPlate)
[15:16:33] <biberu> that builds with dotnet 6, msbuild 16 and 17
[15:17:00] <MatthiasVance> biberu: Yeah sorry forgot to mention that, I tested that, figured "let's just fix the code", but there might be way more of those in the codebase
[15:17:05] <MatthiasVance> not sure though maybe I should just try :D
[15:17:08] <MatthiasVance> if it builds, it builds
[15:18:00] <MatthiasVance> biberu: I suppose we went full circle now and the only "good" fix is the code, thank you so much for the help :D I am going to have some lunch now and will let you know how this goes... 
[15:18:27] <biberu> i don't know why .String seems to work in one tool... but when it's been inferred to be a plain old string in msbuild the .String property is missing, and if you simply remove the string you aren't allowed to assing a string to an option<string>
[15:19:17] <biberu> the provider seems to have created a TimeChoice for the other one, and that appears to have that property in all versions
[15:44:51] <MatthiasVance> biberu: Indeed :o
[15:45:03] <MatthiasVance> It would be very interesting to know where this goes wrong
[15:45:20] <MatthiasVance> Also I wonder what .String actually *does*, let me figure that out first
[15:45:31] <MatthiasVance> I'm assuming taking the Some of an Option
[15:45:34] <MatthiasVance> Or something? :D
[15:46:03] <MatthiasVance> WOW
[15:46:11] <MatthiasVance> biberu: I get it now
[15:46:22] <biberu> enlighten me
[15:46:34] <MatthiasVance> Nothing in the XML states license plate can be null
[15:46:37] <MatthiasVance> So the code is *wrong*
[15:47:19] <biberu> hm
[15:47:39] <MatthiasVance> So the question is not "why doesn't this compile", it's more about "why does this compile" :D
[15:48:05] <biberu> if you remove the attribute from one of the rows it seems to infer it as option<string> instead, but that still doesn't have a .String property
[15:48:16] <MatthiasVance> imo
[15:49:07] <biberu> that's a bit scary with providers though, the input might not be a good example, a schema should be
[15:51:43] <MatthiasVance> Can we tell dotnet build to use the F# provider?
[15:52:56] <biberu> i assume it is, but i'm not very familiar with type providers
[16:10:46] <lind{at}yahoo> sweet CEO of Privateer, Jen and I are meeting Monday on Microsoft Teams!
[16:22:06] <MatthiasVance> I have no idea what that means :o
[16:22:22] <MatthiasVance> What does that mean lind{at}yahoo ?
[16:23:23] <lind{at}yahoo> Privateer is Steve Wozniak's new Space Company, we're having general discussion about the team I'm assembling for http://junkwerx.space fits into their plans and identify partnership/teaming oppurtunities
[16:33:56] <MatthiasVance> lind{at}yahoo: Well good luck then! :D
[16:34:07] <lind{at}yahoo> gratzi
[16:34:28] <MatthiasVance> Also, how is Jen involved in this?
[16:36:06] <lind{at}yahoo> Jen is helping me lead the project brainstorming on JunkWERX as part of her Product Architecture training
[16:46:26] <MatthiasVance> Cool so it's a good match
[19:11:14] <indomitable> MatthiasVance, I'm still betting on this all being a delusion
[19:11:46] <indomitable> biberu, are you ready to feel the full force of xeno's questions about f# once his mac starts working
[19:24:06] <MatthiasVance> indomitable: Do you want to try it for yourself perhaps?
[19:39:09] <indomitable> MatthiasVance, his mac?
[19:39:09] <indomitable> no
[19:48:17] <indomitable> MatthiasVance, how goes your iso certification thing
[20:21:45] *** Quits: lind{at}yahoo (uid486956@tinside.irccloud.com) (Quit: Connection closed for inactivity)
[20:28:48] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 268 seconds)
[20:45:06] *** Joins: lind{at}yahoo (uid486956@tinside.irccloud.com)
[21:38:28] *** Joins: stenno (~stenno@user/stenno)
[21:42:14] <xeno> oh poor guy
[23:51:24] *** Quits: kuribas (~user@ptr-25vy0i87u19ttsdwrve.18120a2.ip6.access.telenet.be) (Remote host closed the connection)
[23:58:10] *** Quits: indomitable (~indomitab@gateway/tor-sasl/indomitable) (Remote host closed the connection)
[23:58:41] *** Joins: indomitable (~indomitab@gateway/tor-sasl/indomitable)
