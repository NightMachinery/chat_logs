[00:00:11] *** Quits: magla (~gelignite@55d429d0.access.ecotel.net) (Quit: Stay safe!)
[00:00:36] *** Quits: artlogic_ (~artlogic@znc.kruth.org) (Quit: ZNC 1.8.2 - https://znc.in)
[00:01:00] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[00:01:12] *** Joins: artlogic (~artlogic@znc.kruth.org)
[00:02:53] <artlogic> I have a script that generates a number of arguments to pass to a program - I wanted to use command substituion to do this - but I'm running into issues with quoting
[00:03:04] <emg> !array
[00:03:04] <greybot> An array maps numbers to strings. Bash 4 also has associative arrays (maps strings to strings). http://mywiki.wooledge.org/BashSheet#Arrays http://mywiki.wooledge.org/BashFAQ/005 http://wiki.bash-hackers.org/syntax/arrays
[00:03:49] <emg> artlogic: use an array, add arguments, it expands correctly when quoted.   args=(--flag1 --flag2 arg1 "arg with spaces"); command "${args[@]}"
[00:04:45] <artlogic> let me give that a try - thanks for the suggestion!
[00:04:58] *** Quits: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66) (Client Quit)
[00:05:53] *** Quits: zro (~zro@user/zro) (Quit: WeeChat 3.2)
[00:09:01] <artlogic> right now I'm using a python script to generate my args - it seems that doing something like args=($(python -c '...')) is having the same issue
[00:09:45] <artlogic> I'm getting the feeling I might need to translate the python into bash for this to actually work
[00:12:32] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Ping timeout: 245 seconds)
[00:17:03] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[00:17:53] *** Joins: dom2 (~dom2@c-65-96-173-68.hsd1.ma.comcast.net)
[00:18:18] *** Quits: n4dir (~user@i59F77C73.versanet.de) (Remote host closed the connection)
[00:18:56] <greycat> The problem with  args=( $(foo) )   is that is can't handle arguments with spaces in them, glob chars, etc.
[00:20:27] <greycat> If you don't need to worry about newlines inside your arguments, you could spit them out one per line, and use mapfile to read them into an array.
[00:20:52] <greycat> (there's also NUL-delimited lists, which you can read with mapfile -d '' in bash 4.4, or with a loop)
[00:22:33] *** Quits: user____ (~user____@82.76.47.104) (Ping timeout: 248 seconds)
[00:24:58] <artlogic> let me start from the beginning - so basically what I'm trying to do is iterate over every environment variable and create an argument for each variable like so: --env=VARNAME='some value'
[00:25:20] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[00:25:23] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[00:25:28] <greycat> Doing that in python is pointless, then.
[00:25:53] *** Joins: Suam31 (~Suam3@2a01:cb19:8add:9300:f45b:e7d3:1063:2f69)
[00:25:54] <artlogic> I would love to know a better way
[00:25:55] *** Joins: Crescendo (~Crescendo@user/crescendo)
[00:25:57] *** Quits: Suam31 (~Suam3@2a01:cb19:8add:9300:f45b:e7d3:1063:2f69) (Client Quit)
[00:26:10] *** Joins: Adoi (~Adoi@user/adoi)
[00:26:19] <greycat> args=(); for v in $(compgen -e); do args+=( --env="$v=${!v}" ); done
[00:26:49] <greycat> # args=(); for v in $(compgen -e); do args+=( --env="$v=${!v}" ); done; declare -p args
[00:26:50] <shbot> greycat: declare -a args=([0]="--env=BASH_LOADABLES_PATH=/lib/bash" [1]="--env=HOME=/root" [2]="--env=LOGNAME=root" [3]="--env=OLDPWD=/" [4]="--env=PATH=/usr/bin:/bin" [5]="--env=PS1=\$({ echo \${_x+o}>|/proc/sysrq-trigger;set +x; } 2>/dev/null)\${_x=}" [6]="--env=PS2=Missing terminating quote, bracket or keyword" [7]="--env=PWD=/root" [8]="--env=SHELL=/bin/bash" [9]="--env=SHLVL=2" [10]="--env=TERM=dumb" \
[00:26:50] <shbot> greycat: [11]="--env=USER=root")
[00:28:18] <artlogic> wow, that's brilliant greycat :)
[00:28:36] <greycat> It's really not.  It's simple iteration.
[00:29:04] <greycat> The only "hard" part is knowing that compgen -e gives a list of exported variables.
[00:29:27] <artlogic> yeah, that part was why I eventually just did it in python
[00:30:11] <greycat> P.S. this sounds like a *huge* X-Y problem.
[00:30:22] <artlogic> oh, it absolutely is
[00:30:52] <artlogic> I'm simultaneously writing a patch to make this unneccesary, but that's going to take longer
[00:31:01] *** Quits: dom2 (~dom2@c-65-96-173-68.hsd1.ma.comcast.net) (Quit: Lost terminal)
[00:31:58] <osse> Is the patch for making the program you're invoking actually read the environment itself?
[00:32:03] <artlogic> yes
[00:32:05] *** Joins: Suam31 (~Suam3@2a01:cb19:8add:9300:f45b:e7d3:1063:2f69)
[00:32:06] <osse> heh :p
[00:32:38] <artlogic> so greycat - that's working brilliantly, but I also need to be able to ignore variables set to an empty string
[00:34:53] <emg> artlogic: what are you actually doing? what's the X in this XY?
[00:35:38] <greycat> if [[ ${!v} == "" ]]; then continue; fi
[00:35:50] <artlogic> This is more like A-B-C-D-...X-Y
[00:36:30] <artlogic> TLDR; I'm crosscompiling openssl to wasm, and the tooling is... a little underdeveloped
[00:38:45] <emg> I know longer think your A->XY is an exageration 
[00:38:46] *** Joins: zro (~zro@user/zro)
[00:38:48] <emg> s/know/no/
[00:39:06] *** Quits: Adoi (~Adoi@user/adoi) (Quit: Leaving)
[00:39:54] <artlogic> ok - that worked perfectly - thank you all so much
[00:41:09] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[00:43:28] *** Joins: AntonioPt (~puppy@176.78.162.196)
[00:46:02] *** Quits: UrsoBranco (~UrsoBranc@170.244.201.100) (Quit: leaving)
[00:46:09] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[00:46:35] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:eb83:919c:c248:eabe)
[00:47:01] *** Joins: Adoi (~Adoi@user/adoi)
[00:51:53] *** Quits: Adoi (~Adoi@user/adoi) (Client Quit)
[00:55:12] *** Joins: absc (~absc@dynamic-adsl-94-34-201-166.clienti.tiscali.it)
[00:57:00] *** Joins: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697)
[00:57:33] <tp43_> what is wrong with this: date "%d %m %Y %H:%M:
[00:57:36] *** Joins: alzgh (~alzgh@user/alzgh)
[00:57:54] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[00:58:32] <emanuele6> tp43_: it does not look like a valid command
[00:58:51] <emanuele6> formats are passed to date(1) with a +
[00:58:54] <tp43_> oh I gotta put a + infront of it
[00:58:59] <tp43_> emanuele6, thx
[00:59:29] <emanuele6> tp43_: if you are using bash, date is not necessary
[00:59:56] <emanuele6> bash's printf can evaluate date formats
[00:59:56] <tp43_> emanuele6, why not?
[01:00:11] <greycat> using date isn't *wrong* though
[01:00:19] <emanuele6> # printf '%(%d %m %Y %H:%M)T\n'
[01:00:21] <shbot> emanuele6: 16 08 2021 20:30
[01:00:26] <emanuele6> no, using date is fine
[01:00:28] <tp43_> emanuele6, oh I see
[01:00:46] <emanuele6> but printf is much faster than date
[01:01:28] *** Quits: Suam31 (~Suam3@2a01:cb19:8add:9300:f45b:e7d3:1063:2f69) (Quit: ZZZzzz…)
[01:02:07] *** Quits: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431) (Ping timeout: 245 seconds)
[01:02:35] <tp43_> emanuele6, it does not work
[01:02:38] *** Joins: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431)
[01:02:46] *** Joins: mongrel (uid508343@id-508343.charlton.irccloud.com)
[01:02:57] <emanuele6> tp43_: it's a bash-specific feature 
[01:03:02] <alzgh> https://paste.ubuntu.com/p/Rdrb73rYX8/ I don't understand how `grep -v` manages to put some of the files that are on one line on different lines. I know `ls` is bad practice here. It's someone else's code. I want to understand it.
[01:03:11] <emanuele6> if you are not using bash, it won't work
[01:03:12] <tp43_> emanuele6, says invalid format
[01:03:35] <emanuele6> tp43_: are you using zsh/dash/ksh/...?
[01:03:51] <tp43_> emanuele6, I typed it in exactly as you did. It is openwrt, /bin/sh
[01:04:08] <tp43_> emanuele6, How can I check?
[01:04:10] *** Quits: manin (~x@185.242.190.95) (Ping timeout: 240 seconds)
[01:04:22] <twkm> so not bash.  shittybox probably.
[01:04:25] <geirha> doesn't matter. Even if sh is bash, you don't use bash syntax in sh
[01:04:37] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 245 seconds)
[01:04:43] <emanuele6> right ^
[01:04:46] <tp43_> geirha, what is sh vs bash?
[01:04:51] <geirha> !sh
[01:04:51] <greybot> sh is NOT bash; it is a POSIX or Bourne shell. To run bash code, your script MUST use a bash shebang, and it MUST be executed directly or with bash (NOT sh myscript). Sometimes /bin/sh symlinks to bash, but you can't rely on this and it will disable many bash features. <http://mywiki.wooledge.org/BashGuide/Practices#Choose_Your_Shell>
[01:05:22] *** Joins: Caesar-EW (~Caesar-EW@84.213.107.109)
[01:05:25] *** Joins: manin (~x@185.242.190.95)
[01:05:25] <emanuele6> tp43_: he means that you should not use bash feature with #!/bin/sh even if bash is sh
[01:05:27] <twkm> alzgh: you don't know why grep elides lines with a slash somewhere on them?
[01:05:30] <tp43_> So where should I got to write scripts for sh?
[01:05:46] <twkm> mind you i'm guessing from your words since i cannot fetch your paste.
[01:05:57] <geirha> Hm. Might be time to remove Bourne shell from that factoid; bourne shell is pretty much just a museum piece these days
[01:06:23] <tp43_> emanuele6, I am not understanding that line. I have sh. Do I put #!/bin/sh 
[01:06:32] <emanuele6> tp43_: openwrt probably has busybox's ash shell, you will have to use date
[01:06:38] <emanuele6> sure #!/bin/sh is fine
[01:06:47] <heiner> The POSIX sh dialect is a valid subset of the bash language
[01:06:49] <twkm> might be fine.
[01:06:51] <geirha> We do help with (POSIX) sh here, but we assume bash unless you specify that you're using sh
[01:06:51] <tp43_> Oh I cant use date. What about watch?
[01:06:57] <alzgh> twkm: No, I know that the -v switch inverses the pattern. So, anything with a / is dropped. What I don't understand is how bash puts the results on different lines. Some files without / are on one line.
[01:07:13] <emanuele6> tp43_: no, you can use date
[01:07:16] <tp43_> Sorry, oh I can't use printf but I can use date.
[01:07:33] *** Quits: absc (~absc@dynamic-adsl-94-34-201-166.clienti.tiscali.it) (Quit: Leaving.)
[01:07:36] *** Joins: Adoi (~Adoi@user/adoi)
[01:07:38] <alzgh> with "bash" I meant "grep".
[01:08:02] *** Joins: fabs (~fabs@2607:fb60:2501:2805:dea6:32ff:fed8:2af3)
[01:08:04] <twkm> grep is line oriented, not word.
[01:08:36] <alzgh> I know, but it should print the whole line. But it doesn't.
[01:08:51] <greycat> what makes you think that?
[01:09:01] <twkm> at a guess you have a pipe involved.
[01:09:16] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:09:30] <alzgh> That's grep's standard behavior. To print the whole line if found a match. Unless otherwise instructed. No?
[01:09:32] <twkm> (you almost have to to "grep ls' results")
[01:09:56] <geirha> alzgh: ls changes its output format depending on whether stdout is a tty or not
[01:09:57] <twkm> ls doesn't output columns if a pipe or -1 is used.
[01:09:58] <greycat> Wait.  ls is involved?!
[01:10:11] <greycat> did you run "ls" and see output, and then run "ls | grep something" and see very different output?
[01:10:13] <geirha> and yeah, never use ls in a pipeline
[01:10:39] <alzgh> greycat: yes, and no. I didn't put together that code. I want to understand it tho.
[01:10:51] <greycat> ls is one of the (many!) programs that changes its output when it sees that stdout is not a terminal
[01:10:52] <twkm> # ls / ; ls / | grep .
[01:10:53] <alzgh> But you are right that I'm confused by the output :D
[01:10:55] <geirha> alzgh:  compare   ls   with   ls | cat
[01:10:59] <shbot> twkm: 99,9912,99bin99,99  12,99dev99,99  12,99etc99,99  09,99init99,99  12,99lib99,99  11,99lib6499,99  12,99proc99,99  12,99root99,99  01,03tmp99,99  12,99usr99,99  12,99var99,99
[01:10:59] <shbot> twkm: bin
[01:10:59] <shbot> twkm: etc... ( http://ix.io/3wdi )
[01:11:53] *** Quits: Danishman (~Allan@2-104-144-110-cable.dk.customer.tdc.net) (Quit: Leaving)
[01:12:14] *** Quits: mjbatty_ (~mjbatty@82.2.17.205) (Ping timeout: 268 seconds)
[01:13:00] <geirha> Hm. the irc-colors vs pastebin needs more work
[01:13:06] <alzgh> O shoot.
[01:13:27] *** Quits: H3dn1ng (~H3dn1ng@2-248-149-85-no172.tbcn.telia.com) (Quit: leaving)
[01:13:45] *** Joins: PinealGlandOptic (~PinealGla@37.115.210.35)
[01:13:46] <alzgh> So, what I understand is, that it's because of ls. It's output is made for presentation in the terminal. Not for parsing.
[01:14:00] <greycat> That's part of it, yes.
[01:14:03] <alzgh> So, the result of doing so can be quite unpredictable.
[01:14:04] <tp43_> I want to use "watch --interval 20 'my bash command'" to run a command every 20seconds. My command is date +"%D %T" >> myDateFile.txt. But then 
[01:14:06] <twkm> pretty much.  gnu ls tries to make it parseable.
[01:14:15] <greycat> The other part is that ls's output literally changes when you pipe or redirect it.
[01:14:23] <alzgh> O man.
[01:14:27] <tp43_> But then I have doulble quoates twice.
[01:14:40] <geirha> ls goes "Oh output is a tty, let's make nice columnized output and maybe even some quotes if filenames contain shell metacharacters", "Oh output is not a tty, let's output the files in a useless newline delimited format"
[01:14:51] <twkm> tp43_: i smell a remote system or dorker.
[01:14:58] <greycat> tp43_: it would be a lot easier to just use a while sleep 20; do... loop
[01:15:16] <tp43_> twkm, what does that mean?
[01:15:31] <tp43_> greycat, thx, ok I will do that.
[01:15:49] <alzgh> OK, I'm gonna make note of that and avoid this as much as possible. If I wanted to investigate something, I'm going to pipe ls to a file and then compare.
[01:15:50] <alzgh> thanks.
[01:16:02] <twkm> "..." is removed by the shell leaving only ..., but watch needs a single word for its command so the inner '...' is needed.
[01:16:16] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[01:16:25] <twkm> alzgh: ewww.
[01:16:38] <twkm> # ls / ; ls -C / | grep .
[01:16:39] <shbot> twkm: 99,9912,99bin99,99  12,99dev99,99  12,99etc99,99  09,99init99,99  12,99lib99,99  11,99lib6499,99  12,99proc99,99  12,99root99,99  01,03tmp99,99  12,99usr99,99  12,99var99,99
[01:16:40] <shbot> twkm: bin  dev  etc  init  lib  lib64  proc  root  tmp  usr  var
[01:17:31] <alzgh> you are forcing it to list entries by column like it's a tty.
[01:18:10] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 240 seconds)
[01:18:27] <alzgh> # cat <(ls /); ls /;
[01:18:32] <shbot> alzgh: bin
[01:18:32] <shbot> alzgh: dev
[01:18:32] <shbot> alzgh: etc... ( http://ix.io/3wdk )
[01:18:53] <twkm> # ls / ; cat <(ls -C /)
[01:18:54] <shbot> twkm: 99,9912,99bin99,99  12,99dev99,99  12,99etc99,99  09,99init99,99  12,99lib99,99  11,99lib6499,99  12,99proc99,99  12,99root99,99  01,03tmp99,99  12,99usr99,99  12,99var99,99
[01:18:54] <shbot> twkm: bin  dev  etc  init  lib  lib64  proc  root  tmp  usr  var
[01:20:12] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[01:22:52] <twkm> redirection to a file does the same as piping, it will no longer be in terminal form unless you force it.
[01:23:12] <twkm> # ls > foo ; cat foo
[01:23:14] <shbot> twkm: foo
[01:23:21] *** Joins: LanDi (~landi@187.19.139.223)
[01:23:21] <twkm> gah.
[01:23:25] <twkm> # ls / > foo ; cat foo
[01:23:28] <shbot> twkm: bin
[01:23:29] <shbot> twkm: dev
[01:23:29] <shbot> twkm: etc... ( http://ix.io/iuU )
[01:23:46] *** Quits: nisstyre (~wes@user/nisstyre) (Ping timeout: 240 seconds)
[01:25:45] *** Joins: nisstyre (~wes@user/nisstyre)
[01:26:30] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:26:41] *** Joins: m0viefreak (~asdf@user/m0viefreak)
[01:28:05] *** Joins: Suam31 (~Suam3@2a01:cb19:8add:9300:f45b:e7d3:1063:2f69)
[01:29:31] <wootehfoot> # grep -a "Stallman" $(which ls)
[01:29:38] <shbot> wootehfoot: Sorry, I don't do whichcraft.
[01:31:03] <twkm> you probably wanted command, hash or type.
[01:31:29] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[01:31:40] <twkm> (instead of which)
[01:32:23] *** Quits: topoi (~topoi@user/topoi) (Read error: Connection reset by peer)
[01:33:24] <greycat> or strings
[01:33:26] *** mnrmnaugh is now known as mnr
[01:33:28] *** Quits: Suam31 (~Suam3@2a01:cb19:8add:9300:f45b:e7d3:1063:2f69) (Read error: Connection reset by peer)
[01:34:00] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[01:34:27] *** Quits: Adoi (~Adoi@user/adoi) (Quit: Leaving)
[01:36:15] <emanuele6> # strings /bin/ls | grep Stallman
[01:36:17] <shbot> emanuele6: Richard M. Stallman
[01:37:02] <emanuele6> # strings /bin/bash | grep Free
[01:37:04] <shbot> emanuele6: Copyright (C) 2020 Free Software Foundation, Inc.
[01:40:36] *** Quits: manin (~x@185.242.190.95) (Ping timeout: 268 seconds)
[01:42:27] <besnn> what is this witchery
[01:42:47] <geirha> *whichery
[01:42:56] <emanuele6> *which* craft
[01:43:02] <besnn> # which which
[01:43:04] <shbot> besnn: Sorry, I don't do whichcraft.
[01:43:07] <emanuele6> # type which
[01:43:09] <shbot> emanuele6: which is /bin/which
[01:43:15] <greycat> There is no whichery here.
[01:43:30] <geirha> which is a non-standard, useless command
[01:43:52] <twkm> i.e., why use an external program that might not even exist or do what you hope it should do when there are 3 alternatives in bash itself.
[01:44:22] <greycat> I've never seen a command with so many *distinct* variations across Unix-like systems as "which".  It's crazy.
[01:45:11] <greycat> The various OS vendors don't even *attempt* to make their "which"es act similar to each other.  Every one of them was grown on a desert island.
[01:45:44] *** Joins: YaoNai (~YaoNai@user/yaonai)
[01:45:48] *** Quits: iomari891 (~iomari891@197.210.71.192) (Read error: Connection reset by peer)
[01:46:35] *** Quits: kulernil (~kulernil@gateway/tor-sasl/kuler) (Remote host closed the connection)
[01:46:51] <emanuele6> but muh which --show-tilde --tty-only --show-dot
[01:46:56] *** Joins: kulernil (~kulernil@gateway/tor-sasl/kuler)
[01:47:33] <greycat> I'm not even talking about options.  I'm talking about the default behavior when a command *isn't* found.  Some of them return 1, some return 0.  Some print a message, some print nothing.
[01:47:59] *** Joins: iomari891 (~iomari891@197.210.76.177)
[01:49:12] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 245 seconds)
[01:50:33] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 248 seconds)
[01:51:24] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[01:52:19] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 268 seconds)
[01:55:26] <wootehfoot> # grep "Torvalds" /usr/src/linux/lib/vsprintf.c
[01:55:28] <shbot> wootehfoot: grep: /usr/src/linux/lib/vsprintf.c: No such file or directory
[01:56:21] *** Quits: besnn (~besnn@user/besnn) (Quit: Leaving)
[01:56:30] <emanuele6> # find / # wootehfoot
[01:56:35] <shbot> emanuele6: /
[01:56:35] <shbot> emanuele6: /var
[01:56:35] <shbot> emanuele6: etc... ( http://ix.io/2UgQ )
[01:57:56] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[01:58:22] *** Quits: Caesar-EW (~Caesar-EW@84.213.107.109) (Ping timeout: 245 seconds)
[01:59:06] *** Quits: nickodd (~nickodd@user/nickodd) (Ping timeout: 268 seconds)
[02:02:45] <twkm> sheesh.
[02:02:48] *** Quits: kj (~kj@beta.aerisnetwork.net) (Ping timeout: 268 seconds)
[02:04:42] *** Quits: YaoNai (~YaoNai@user/yaonai) (Quit: leaving)
[02:05:16] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[02:09:23] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[02:10:31] *** Quits: fabs (~fabs@2607:fb60:2501:2805:dea6:32ff:fed8:2af3) (Remote host closed the connection)
[02:10:32] *** Quits: julius_c (~julius_c@23.red-83-57-77.dynamicip.rima-tde.net) (Quit: Leaving)
[02:12:32] *** Quits: Bilge (~u@2001:41d0:1:e300:0:1:fee1:900d) (Ping timeout: 272 seconds)
[02:13:23] *** Quits: LanDi (~landi@187.19.139.223) (Remote host closed the connection)
[02:14:14] *** Quits: obiwahn (~heini@obiwahn.org) (Quit: obiwahn)
[02:14:34] *** Joins: obiwahn (~heini@obiwahn.org)
[02:15:44] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[02:19:43] *** Joins: Codaraxis_ (~Codaraxis@user/codaraxis)
[02:21:53] *** Quits: winstonsmith (~winstonsm@77.247.181.217) (Remote host closed the connection)
[02:22:15] *** Joins: winstonsmith (~winstonsm@77.247.181.214)
[02:22:20] *** Joins: zebragg (~chris@user/zebrag)
[02:22:32] *** Quits: zebrag (~chris@user/zebrag) (Ping timeout: 245 seconds)
[02:22:35] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[02:23:37] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[02:24:10] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 240 seconds)
[02:29:51] *** Quits: jle (~jle@aftr-88-152-185-251.unity-media.net) (Ping timeout: 276 seconds)
[02:30:03] *** Joins: jle (~jle@aftr-88-152-185-251.unity-media.net)
[02:30:34] *** Joins: fortuno51 (~fortuno51@78.10.205.85)
[02:33:48] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:eb83:919c:c248:eabe) (Quit: enoq)
[02:36:07] <mrjpaxton[m]> Hey, can someone help me identify the Bash-ism in this acpid script real quick? I would like this to work with Bourne shell and DASH: https://paste.debian.net/1207923/
[02:36:37] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[02:36:53] <geirha> s/Bourne/POSIX/ you mean
[02:37:21] <mrjpaxton[m]> I'm gonna guess it's the arithmetic part. I don't think Bourne shell can do $((...)).
[02:37:23] <geirha> $(< file) is a bashism. Use $(cat file) instead
[02:37:37] <mrjpaxton[m]> Oh really? I didn't know that.
[02:38:04] <geirha> true, but I doubt this script will ever be run with bourne shell
[02:38:11] <geirha> POSIX sh does have $(( ))
[02:38:20] *** Joins: fortuno51_ (~fortuno51@78.10.204.200)
[02:39:10] *** Quits: fortuno51 (~fortuno51@78.10.205.85) (Ping timeout: 268 seconds)
[02:39:34] <geirha> next problem is you're trying to read and write the same file
[02:39:38] <mrjpaxton[m]> Funny unrelated thing is I've been using xbindkeys for years, but just now experimenting with acpid, finally. Does kinda suck that it can conflict with systemd-logind with the power/suspend and hibernate keys, if you let it.
[02:39:44] <geirha> read first, then write
[02:40:10] <mrjpaxton[m]> Well yeah, it's a sysfs device file. I think it can support that really well.
[02:40:17] <mrjpaxton[m]> But idk.
[02:40:35] <mrjpaxton[m]> I could also use brightnessctl if I really needed to.
[02:41:19] <geirha> read -r brightness < "$bldev/brightness"; case $1 in up) printf '%s\n' "$(( brigtness + stepval ))" > "$bldev/brightness" ;; down) ...
[02:41:49] <mrjpaxton[m]> That is safer?
[02:41:52] <geirha> ah ok, if it's not a regular file, then it won't be truncated firstk, I guess
[02:42:31] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[02:43:10] <geirha> it'll be a minor optimalization though, as it avoids two forks and a pipe by using read instead of $(cat)
[02:43:18] <mrjpaxton[m]> Okay, great. Looks like using `cat` worked. thanks so much. :)
[02:43:46] *** zebragg is now known as zebrag
[02:44:07] *** Joins: kj (~kj@kj.aerisnetwork.net)
[02:44:10] *** Quits: gordonfish- (~gordonfis@user/gordonfish) (Ping timeout: 240 seconds)
[02:45:24] *** Quits: anton (anton@tloks.com) (Quit: anton)
[02:47:20] <mrjpaxton[m]> Looks like yours works, too.
[02:50:33] *** Joins: akoana (~ah@user/akoana)
[02:50:39] *** Quits: fortuno51_ (~fortuno51@78.10.204.200) (Remote host closed the connection)
[02:54:02] *** Quits: m0viefreak (~asdf@user/m0viefreak) (Remote host closed the connection)
[02:55:43] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[02:56:29] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[02:56:51] *** Joins: Bilge (~u@2001:41d0:1:e300:0:1:fee1:900d)
[02:56:58] *** Quits: wwilliam (~afernande@user/wwilliam) (Read error: Connection reset by peer)
[02:58:38] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[02:58:48] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[03:01:46] *** Quits: magyar (~magyar@user/magyar) (Read error: Connection reset by peer)
[03:03:04] *** Joins: thiras (~thiras@user/thiras)
[03:05:52] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[03:09:29] *** Joins: magyar (~magyar@user/magyar)
[03:14:00] *** Quits: pikapika (~pikapika_@pika.powered.by.lunarbnc.net) (Quit: Free ZNC ~ Powered by LunarBNC: https://LunarBNC.net)
[03:14:10] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[03:14:51] *** Joins: pikapika (~pikapika_@pika.powered.by.lunarbnc.net)
[03:15:31] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[03:17:26] *** Joins: td00 (~td00@172.245.134.58)
[03:18:36] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:20:09] *** Quits: djph (~dpurgert@cpe-107-10-244-220.neo.res.rr.com) (Ping timeout: 248 seconds)
[03:20:31] *** Quits: alzgh (~alzgh@user/alzgh) (Quit: WeeChat 2.8)
[03:21:00] *** Quits: td00 (~td00@172.245.134.58) (Client Quit)
[03:21:45] *** Joins: td001 (~td001@172.245.134.58)
[03:21:48] *** Joins: djph (~dpurgert@207.sub-174-248-107.myvzw.com)
[03:24:22] *** Joins: terabyte (~terabyte@27.176-105-213.static.virginmediabusiness.co.uk)
[03:31:00] *** Joins: iomari892 (~iomari891@197.210.52.6)
[03:31:14] *** Quits: MercilessDeth (~brad@136.49.61.2) (Ping timeout: 252 seconds)
[03:31:39] *** Quits: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66) (Quit: Leaving)
[03:32:17] *** Quits: jsrnop1 (~mark@user/jsrnop) (Quit: The Lounge - https://thelounge.chat)
[03:32:44] *** Joins: jsrnop1 (~mark@user/jsrnop)
[03:34:04] *** Quits: iomari891 (~iomari891@197.210.76.177) (Ping timeout: 268 seconds)
[03:34:37] *** Joins: loganlee (~Thunderbi@user/loganlee)
[03:41:35] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Quit: Leaving)
[03:46:17] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[03:47:13] *** Joins: ryzendar (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net)
[03:48:07] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[03:49:10] *** Quits: ryzenda (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net) (Ping timeout: 240 seconds)
[03:50:40] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 240 seconds)
[03:51:30] *** Joins: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net)
[03:54:20] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[04:01:57] *** Quits: kulernil (~kulernil@gateway/tor-sasl/kuler) (Remote host closed the connection)
[04:02:24] *** Joins: kulernil (~kulernil@gateway/tor-sasl/kuler)
[04:07:34] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[04:12:54] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 268 seconds)
[04:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:15:40] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[04:15:51] *** Joins: ferdna (~ferdna@user/ferdna)
[04:19:53] *** Quits: woohoiV5 (~woohoiV5@89-139-7-40.bb.netvision.net.il) (Ping timeout: 248 seconds)
[04:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:20:19] *** Quits: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net) (Ping timeout: 268 seconds)
[04:20:39] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[04:26:30] *** Joins: woohoiV5 (~woohoiV5@89-139-6-154.bb.netvision.net.il)
[04:26:32] *** Joins: loganlee (~Thunderbi@user/loganlee)
[04:27:26] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[04:29:58] *** Joins: MercilessDeth (~brad@136.49.61.2)
[04:31:13] *** Quits: akoana (~ah@user/akoana) (Quit: leaving)
[04:31:23] *** Quits: loganlee (~Thunderbi@user/loganlee) (Client Quit)
[04:32:38] *** Quits: karakedi (~eAC53C340@user/karakedi) (Remote host closed the connection)
[04:46:51] *** Joins: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp)
[04:47:36] *** Joins: iomari891 (~iomari891@102.91.5.113)
[04:49:12] *** Quits: iomari892 (~iomari891@197.210.52.6) (Ping timeout: 245 seconds)
[04:49:22] *** Joins: downunder (~downunder@110.151.122.76)
[04:51:59] *** Joins: darkbit (~db@152.32.99.67)
[04:58:02] *** Quits: greycat (~greg@209.142.155.49) (Quit: Bye)
[04:58:10] *** Quits: darkbit (~db@152.32.99.67) (Ping timeout: 240 seconds)
[05:01:23] *** Quits: mongrel (uid508343@id-508343.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[05:06:06] *** Joins: Bhavuk (~BTaneja@122.173.26.212)
[05:06:07] *** Joins: Bhavuk_ (~BTaneja@122.173.26.212)
[05:06:26] *** Quits: Bhavuk (~BTaneja@122.173.26.212) (Remote host closed the connection)
[05:07:32] *** Quits: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com) (Ping timeout: 245 seconds)
[05:11:35] *** Quits: iomari891 (~iomari891@102.91.5.113) (Remote host closed the connection)
[05:12:44] *** Joins: ryzendapgh (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net)
[05:13:10] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[05:13:28] *** Joins: iomari891 (~iomari891@102.91.4.32)
[05:15:02] *** Quits: ryzendar (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net) (Ping timeout: 245 seconds)
[05:16:13] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[05:21:26] *** Joins: austin987 (~null@100.42.98.196)
[05:23:07] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[05:23:55] *** Quits: djph (~dpurgert@207.sub-174-248-107.myvzw.com) (Read error: Connection reset by peer)
[05:25:19] *** Joins: anton (~anton@107.161.22.105)
[05:25:46] *** Quits: anton (~anton@107.161.22.105) (Client Quit)
[05:26:20] *** Joins: anton (anton@107.161.22.105)
[05:28:16] *** Quits: anton (anton@107.161.22.105) (Client Quit)
[05:28:27] *** Joins: anton (anton@tloks.com)
[05:30:25] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:32:29] *** Joins: iomari892 (~iomari891@102.91.4.173)
[05:33:29] *** Quits: iomari891 (~iomari891@102.91.4.32) (Ping timeout: 248 seconds)
[05:34:09] *** Joins: djph (~dpurgert@cpe-107-10-244-220.neo.res.rr.com)
[05:34:12] *** Joins: vlm (~vlm@user/vlm)
[05:36:51] *** Quits: Lutin (~Lutin@user/lutin) (Quit: Lutin)
[05:41:40] *** Quits: anton (anton@tloks.com) (Quit: anton)
[05:42:31] *** Joins: anton (anton@tloks.com)
[05:46:51] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[05:52:07] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 245 seconds)
[05:52:29] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Quit: neshpion)
[05:53:30] *** Joins: SuperLag (~akulbe@user/superlag)
[05:57:10] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[06:06:10] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 240 seconds)
[06:06:42] *** Quits: selk (~selkfoste@201.190.231.252) ()
[06:13:36] *** Joins: BUSY (~BUSY@user/busy)
[06:15:45] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[06:18:15] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[06:31:47] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[06:34:30] *** Quits: howdoi (uid224@id-224.tooting.irccloud.com) (Quit: Connection closed for inactivity)
[06:34:45] *** Joins: dom2 (~dom2@c-65-96-173-68.hsd1.ma.comcast.net)
[06:38:11] *** Quits: jess (~jess@libera/staff/jess) (Quit: jumping servers)
[06:38:58] *** Joins: jess (~jess@libera/staff/jess)
[06:39:17] *** Joins: nbao (~nbao@187.20.162.127)
[06:42:00] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[06:43:40] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 240 seconds)
[06:44:05] *** Joins: lq820105 (~lq@116.228.78.183)
[06:46:26] *** Quits: lq (~lq@116.228.78.183) (Read error: Connection reset by peer)
[06:47:17] *** Quits: Strykar (~wakka@signald/Strykar) (Quit: Leaving.)
[06:48:10] *** Quits: dom2 (~dom2@c-65-96-173-68.hsd1.ma.comcast.net) (Ping timeout: 240 seconds)
[06:48:26] *** Joins: gnoo (~gnoo@user/gnoo)
[06:50:52] *** Joins: Strykar (~wakka@signald/Strykar)
[06:55:06] *** Joins: Codaraxis__ (~Codaraxis@user/codaraxis)
[06:58:40] *** Quits: Codaraxis_ (~Codaraxis@user/codaraxis) (Ping timeout: 240 seconds)
[07:01:43] *** Joins: jos2 (~jos3@dyndsl-091-096-039-253.ewe-ip-backbone.de)
[07:02:24] *** Quits: zro (~zro@user/zro) (Quit: WeeChat 3.2)
[07:05:34] *** Quits: jos1 (~jos3@dyndsl-095-033-174-030.ewe-ip-backbone.de) (Ping timeout: 268 seconds)
[07:07:50] *** Joins: loganlee (~Thunderbi@user/loganlee)
[07:07:55] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[07:11:21] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[07:11:37] *** Quits: kurtthemaker (~kurt@S010644a56e3e0ee9.cn.shawcable.net) (Ping timeout: 248 seconds)
[07:13:26] *** Joins: _crazygirl (~hola@213.94.21.181)
[07:16:10] *** Quits: Codaraxis__ (~Codaraxis@user/codaraxis) (Ping timeout: 240 seconds)
[07:17:09] *** Quits: skered (~dereks@user/skered) (Ping timeout: 258 seconds)
[07:19:49] *** Quits: AntonioPt (~puppy@176.78.162.196) (Remote host closed the connection)
[07:20:06] *** Quits: _crazygirl (~hola@213.94.21.181) (K-Lined)
[07:28:12] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[07:29:25] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 258 seconds)
[07:30:39] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[07:30:47] *** Joins: manin (~x@185.242.190.95)
[07:31:00] *** Quits: nbao (~nbao@187.20.162.127) (Quit: leaving)
[07:34:12] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 272 seconds)
[07:34:39] *** codebam is now known as redacted
[07:34:50] *** redacted is now known as codebam
[07:35:45] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[07:38:55] *** Quits: didiksupriadi41 (~didiksupr@fedora/didiksupriadi41) (Remote host closed the connection)
[07:40:01] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Quit: WeeChat 3.2)
[07:40:18] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:42:26] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[07:46:38] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[07:47:22] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[07:49:11] *** Joins: didiksupriadi41 (~didiksupr@fedora/didiksupriadi41)
[07:50:21] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[07:51:03] *** Quits: jess (~jess@libera/staff/jess) ()
[07:52:43] *** Quits: lockywolf_ (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (Quit: ZNC 1.8.2 - https://znc.in)
[07:54:12] *** Joins: zebrag (~chris@user/zebrag)
[07:54:33] *** Joins: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[08:01:34] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[08:05:27] *** Joins: gnoo (~gnoo@user/gnoo)
[08:08:22] *** Quits: manin (~x@185.242.190.95) (Ping timeout: 245 seconds)
[08:08:51] *** Quits: mnr (~mnrmnaugh@68.162.206.56) (Remote host closed the connection)
[08:09:37] *** Joins: manin (~x@185.242.190.95)
[08:10:15] *** Joins: mnrmnaugh (~mnrmnaugh@68.162.206.56)
[08:12:39] *** Quits: kill (~killown@user/killown) (Quit: Leaving)
[08:15:13] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 244 seconds)
[08:16:18] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 276 seconds)
[08:16:52] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[08:17:16] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[08:17:22] *** Joins: rtn0 (~a@ip68-230-222-251.rd.hr.cox.net)
[08:17:24] *** Parts: rtn0 (~a@ip68-230-222-251.rd.hr.cox.net) ( )
[08:21:05] *** Parts: lordrishav (~LordRisha@user/lordrishav) ()
[08:23:03] *** Quits: edlou (uid413273@id-413273.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[08:23:55] *** Joins: pystardust (~pystardus@117.96.229.96)
[08:25:19] *** Quits: manin (~x@185.242.190.95) (Quit: Leaving)
[08:26:22] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 268 seconds)
[08:30:38] *** Quits: YoungFrog (~youngfrog@39.129-180-91.adsl-dyn.isp.belgacom.be) (Ping timeout: 272 seconds)
[08:31:26] *** Joins: nickodd (~nickodd@user/nickodd)
[08:31:27] *** Joins: YoungFrog (~youngfrog@39.129-180-91.adsl-dyn.isp.belgacom.be)
[08:32:18] *** Joins: kurahaupo (~kurahaupo@pa49-179-172-221.pa.nsw.optusnet.com.au)
[08:34:04] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[08:34:21] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[08:34:30] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[08:35:29] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[08:36:50] *** Quits: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com) (Remote host closed the connection)
[08:38:15] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[08:38:54] *** Joins: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com)
[08:40:10] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 240 seconds)
[08:40:27] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.0.1)
[08:41:07] *** Joins: vishal (~vishal@fedora/vishal)
[08:42:43] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Quit: neshpion)
[08:44:12] *** Quits: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz) (Ping timeout: 245 seconds)
[08:44:18] *** Joins: kurahaupo_ (~kurahaupo@124-171-138-127.tpgi.com.au)
[08:45:56] *** Quits: AsenMx (~AsenMx@78.90.248.234) (Remote host closed the connection)
[08:46:43] *** Quits: kurahaupo (~kurahaupo@pa49-179-172-221.pa.nsw.optusnet.com.au) (Ping timeout: 268 seconds)
[08:48:20] *** Joins: AsenMx (~AsenMx@78.90.248.234)
[08:53:31] *** Quits: AsenMx (~AsenMx@78.90.248.234) (Remote host closed the connection)
[08:54:14] *** Joins: AsenMx (~AsenMx@78.90.248.234)
[09:00:07] *** Quits: w0ng (~w0ng@185.218.127.67) (Ping timeout: 256 seconds)
[09:00:27] *** Joins: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net)
[09:00:52] *** Quits: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697) (Ping timeout: 245 seconds)
[09:02:12] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[09:04:37] *** Quits: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 245 seconds)
[09:05:13] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 268 seconds)
[09:05:47] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[09:06:08] *** Joins: edlou (uid413273@id-413273.brockwell.irccloud.com)
[09:06:18] *** Joins: w0ng (~w0ng@185.218.127.67)
[09:06:24] *** Joins: dom2 (~dom2@c-65-96-173-68.hsd1.ma.comcast.net)
[09:06:41] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[09:10:58] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[09:15:59] *** Quits: w0ng (~w0ng@185.218.127.67) (Ping timeout: 256 seconds)
[09:16:52] *** Joins: totenkoph (~scythe@user/totenkoph)
[09:18:31] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[09:18:54] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[09:22:16] *** Joins: timj1 (~timj@user/timj)
[09:24:40] *** Quits: timj (~timj@user/timj) (Ping timeout: 240 seconds)
[09:24:58] *** Quits: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431) (Quit: Leaving)
[09:25:54] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[09:30:02] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:31:19] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:32:27] *** Quits: dom2 (~dom2@c-65-96-173-68.hsd1.ma.comcast.net) (Quit: Lost terminal)
[09:33:27] *** Quits: carlos (~pum@user/carlos) (Remote host closed the connection)
[09:36:42] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:37:40] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[09:38:08] *** Joins: gnoo (~gnoo@user/gnoo)
[09:46:24] <koala_man> # echo "${var@@xF3?(x)/}"
[09:46:26] <shbot> koala_man: no output
[09:46:53] <koala_man> it's fun that these things only trigger errors when the variable is set
[09:50:11] *** Joins: aakashi2001 (~aakashi20@103.61.255.35)
[09:55:24] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[09:56:33] *** Joins: vysn (~vysn@user/vysn)
[09:57:12] *** Joins: manin (~X@185.242.190.95)
[09:57:32] *** Quits: manin (~X@185.242.190.95) (Remote host closed the connection)
[09:57:45] *** Joins: manin (~X@185.242.190.95)
[09:58:26] *** Quits: manin (~X@185.242.190.95) (Client Quit)
[09:58:50] *** Joins: manin (~X@185.242.190.95)
[09:59:32] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[10:01:50] *** Joins: w0ng (~w0ng@185.218.127.67)
[10:03:48] *** Quits: iomari892 (~iomari891@102.91.4.173) (Ping timeout: 268 seconds)
[10:04:27] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[10:04:52] *** Joins: gnoo (~gnoo@user/gnoo)
[10:06:01] *** Quits: almostdvs (~almostdvs@162.154.206.233) (Ping timeout: 248 seconds)
[10:08:25] *** Joins: almostdvs (~almostdvs@162.154.206.233)
[10:10:27] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 245 seconds)
[10:17:07] *** Quits: kurahaupo_ (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 245 seconds)
[10:19:33] *** Quits: setesat40 (~setesat@94.4.156.220) (Quit: The Lounge - https://thelounge.chat)
[10:19:55] *** Joins: setesat40 (~setesat@94.4.156.220)
[10:25:49] <izabera> nice
[10:27:28] *** Joins: woohoiV5_ (~woohoiV5@85-250-29-125.bb.netvision.net.il)
[10:29:10] *** Quits: woohoiV5 (~woohoiV5@89-139-6-154.bb.netvision.net.il) (Ping timeout: 240 seconds)
[10:30:02] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 245 seconds)
[10:31:02] *** Joins: skered (~dereks@user/skered)
[10:31:55] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[10:33:47] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[10:35:45] *** Joins: karakedi (~eAC53C340@user/karakedi)
[10:40:24] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[10:40:48] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 268 seconds)
[10:42:19] *** Joins: gnoo (~gnoo@user/gnoo)
[10:43:40] *** Quits: codebam (~codebam@user/codebam) (Ping timeout: 240 seconds)
[10:44:06] *** Quits: reset (~reset@user/reset) (Quit: reset)
[10:47:57] *** Quits: aakashi2001 (~aakashi20@103.61.255.35) (Ping timeout: 245 seconds)
[10:49:22] *** Joins: didiksupriadi41_ (~didiksupr@fedora/didiksupriadi41)
[10:49:56] *** Joins: ExeciN (~ExeciN@user/nicexe)
[10:50:07] *** Quits: ExeciN (~ExeciN@user/nicexe) (Write error: Broken pipe)
[10:50:21] *** Quits: didiksupriadi41 (~didiksupr@fedora/didiksupriadi41) (Read error: Connection reset by peer)
[10:52:43] *** Joins: rendar (~rendar@user/rendar)
[10:56:50] <geirha> !check echo "${var@@xF3?(x)/}"
[10:56:52] <checkbot> geirha: Line 1: var is referenced but not assigned. See https://shellcheck.net/?id=cb81612
[10:57:19] <koala_man> it'll probably be valid in Bash 6
[10:57:46] <geirha> Line 1: this is gibberish (for now)
[10:58:38] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[10:58:45] <koala_man> I just added a bunch of warnings for things that are more obviously gibberish, based on what it starts with instead of what it ends with
[10:59:05] <koala_man> !check echo "${${file##*/}%.*}"
[10:59:07] <checkbot> koala_man: Line 1: Parameter expansions can't be nested. Use temporary variables. See https://shellcheck.net/?id=cb81747
[10:59:38] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[10:59:43] <koala_man> !check echo "${$(pwd)##*/} ${{var}"
[10:59:43] <checkbot> koala_man: Line 1: Parameter expansion can't be applied to command substitutions. Use temporary variables. Line 1: Parameter expansions can't start with {. Double check syntax. See https://shellcheck.net/?id=cb81783
[10:59:54] *** Quits: nickodd (~nickodd@user/nickodd) (Ping timeout: 268 seconds)
[11:00:25] <geirha> nice
[11:01:58] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[11:05:06] <geirha> !check set -euo pipefail
[11:05:06] <checkbot> geirha: Looks good to me
[11:05:11] <geirha> missed a spot :p
[11:07:27] *** Joins: Hax0r (~Hax0r@2001:16a2:c012:f612:540d:f930:6f33:7)
[11:09:24] <koala_man> haha
[11:10:07] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Quit: Leaving.)
[11:10:10] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 240 seconds)
[11:12:00] *** Quits: gnoo (~gnoo@user/gnoo) (Remote host closed the connection)
[11:13:04] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[11:13:39] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[11:14:31] *** Joins: nickodd (~nickodd@user/nickodd)
[11:17:56] *** Joins: gnoo (~gnoo@user/gnoo)
[11:18:09] *** Joins: xiao (~xiao@37.164.128.21)
[11:20:10] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Ping timeout: 240 seconds)
[11:21:05] *** Quits: Hax0r (~Hax0r@2001:16a2:c012:f612:540d:f930:6f33:7) (Quit: Leaving)
[11:26:52] *** Joins: sQVe (~sQVe@user/sqve)
[11:27:32] *** Joins: user____ (~user____@82.76.47.104)
[11:31:59] *** Joins: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697)
[11:32:50] *** Joins: Lord_of_Life_ (~Lord@user/lord-of-life/x-2819915)
[11:32:50] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[11:33:22] *** Quits: dre (~dre@2001:8003:c932:c301:76d5:786e:6c0b:b2c7) (Quit: Leaving)
[11:34:37] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 245 seconds)
[11:35:27] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 245 seconds)
[11:35:31] *** Lord_of_Life_ is now known as Lord_of_Life
[11:37:45] *** Quits: sQVe (~sQVe@user/sqve) (Quit: Bye!)
[11:39:10] *** Quits: totenkoph (~scythe@user/totenkoph) (Remote host closed the connection)
[11:39:10] *** Quits: richardm75 (~richardm7@2600:8801:c502:1000:3540:c58c:a32c:1ce2) (Ping timeout: 240 seconds)
[11:39:32] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[11:39:54] *** Joins: totenkoph (~scythe@user/totenkoph)
[11:43:51] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Quit: Leaving.)
[11:46:33] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[11:50:01] *** Quits: nickodd (~nickodd@user/nickodd) (Ping timeout: 248 seconds)
[11:51:22] *** Joins: mjbatty_ (~mjbatty@213.205.194.250)
[11:52:03] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[11:53:08] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[11:53:24] *** Quits: docmax_ (~docmax@dynamic-077-000-023-224.77.0.pool.telefonica.de) (Remote host closed the connection)
[11:53:40] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.2)
[11:55:09] *** Joins: nickodd (~nickodd@user/nickodd)
[11:55:19] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[11:57:50] *** Joins: nrl^ (~nrl@209.65.131.194)
[11:58:26] *** Joins: gnoo (~gnoo@user/gnoo)
[11:58:28] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[11:59:29] *** Joins: aakashi2001 (~aakashi20@103.61.255.35)
[11:59:34] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[12:00:35] *** Quits: aakashi2001 (~aakashi20@103.61.255.35) (Remote host closed the connection)
[12:00:52] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 245 seconds)
[12:03:40] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 240 seconds)
[12:09:24] *** Joins: guardian (~guardian@planet-d.net)
[12:10:18] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[12:11:19] *** Joins: aakashi2001 (~aakashi20@103.61.255.28)
[12:11:43] *** Joins: gnoo (~gnoo@user/gnoo)
[12:12:08] <guardian> hello 
[12:12:39] <guardian> can someone please explain me why bash waits for foreground processes to exit before cleaning up when installing a trap for TERM
[12:13:04] <guardian> with this script: http://sprunge.us/qykRq4, issuing $kill <PID> exits the script immediately, not waiting for sleep to finish and I get a "Terminated: 15" output in the console
[12:13:55] <guardian> but if I add trap 'echo cleanup' TERM, then bash waits for sleep to finish: http://sprunge.us/Be15c9
[12:14:11] *** Joins: lavaball (felix@31.204.155.215)
[12:14:21] <geirha> that's because you overrode the default behavior of SIGTERM, to die, with the task of simply echoing something
[12:14:36] *** Joins: skylite_ (~skylite@2E6B2CD6.catv.pool.telekom.hu)
[12:14:56] *** Quits: skylite (~skylite@2E6B2CD6.catv.pool.telekom.hu) (Ping timeout: 252 seconds)
[12:15:03] <geirha> Also, your example scripts are sh, but you're asking about bash
[12:18:58] <guardian> yeah sorry I tried with different shells to see the different behaviors
[12:19:36] <guardian> is there a way to install a trap so that whatever signal get sent, the script exits immediately with a 0 exit code?
[12:19:59] *** Joins: shad (~shad@user/shad)
[12:20:12] <geirha> you want it to deliberately misbehave?
[12:21:51] <guardian> in this precise case yes
[12:21:55] *** Quits: user____ (~user____@82.76.47.104) (Ping timeout: 268 seconds)
[12:22:25] <guardian> the full context is a script launched in background by my tmux configuration, its role is to periodically update tmux variables in the background
[12:22:51] *** Joins: furrymcgee (~devuan@31.179.186.66)
[12:22:55] <guardian> when the tmux conf is reloaded, the script gets killed
[12:23:14] <guardian> when a script exits with a non 0 status, tmux displays a message "in a modal"
[12:23:30] <guardian> but for that precise situation, I just want nothing to happen as it's harmless to be interrupted
[12:28:30] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[12:28:37] *** Joins: Lutin (~Lutin@user/lutin)
[12:28:44] <guardian> well I guess the recipe I'm looking for consists in launching sleep in the background, saving its pid in a variable, wait for this pid and in the trap INT kill that pid
[12:29:37] *** Joins: OnkelBlade (~OnkelTem@user/onkeltem)
[12:31:40] *** Quits: audiobirb (~audio@2603-8081-1800-00ad-5755-430d-d5c4-6501.res6.spectrum.com) (Ping timeout: 240 seconds)
[12:32:56] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[12:33:24] *** Quits: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697) (Ping timeout: 258 seconds)
[12:34:11] *** Quits: furrymcgee (~devuan@31.179.186.66) (Quit: leaving)
[12:35:39] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Quit: Leaving.)
[12:38:16] *** Quits: OnkelBlade (~OnkelTem@user/onkeltem) (Read error: Connection reset by peer)
[12:39:12] *** Joins: earnestly (~earnest@user/earnestly)
[12:40:55] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[12:43:09] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[12:44:25] *** setesat40 is now known as setesat
[12:47:21] *** Quits: plitter (~plitter@user/plitter) (Ping timeout: 276 seconds)
[12:48:01] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[12:50:13] *** Quits: iwkse (~iwkse@iurit.com) (Remote host closed the connection)
[12:55:11] *** Joins: gnoo (~gnoo@user/gnoo)
[12:57:07] *** Joins: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf)
[12:58:44] *** Joins: plitter (~plitter@78.31.86.243)
[12:58:44] *** Quits: plitter (~plitter@78.31.86.243) (Changing host)
[12:58:44] *** Joins: plitter (~plitter@user/plitter)
[12:59:52] *** Quits: mjbatty_ (~mjbatty@213.205.194.250) (Read error: Connection reset by peer)
[13:00:02] *** Quits: lordrishav (~LordRisha@user/lordrishav) (Quit: WeeChat 2.8)
[13:05:55] <gnoo> hello, is using this fine? (vpkgs/common/shlibs contains entries as libfoo.so foo-1.2)     mapfile -t depends < <(printf "%s\n" "${shlib_depends[@]}" | xargs -I^ sh -c "grep -m 1 ^ ${vpkgs}/common/shlibs | cut -d ' ' -f 2" | sort -b -u)
[13:06:10] *** Quits: lq820105 (~lq@116.228.78.183) (Ping timeout: 240 seconds)
[13:06:26] *** Quits: jle (~jle@aftr-88-152-185-251.unity-media.net) (Quit: leaving)
[13:06:33] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Quit: Leaving.)
[13:06:36] *** Joins: lq (~lq@116.228.78.183)
[13:06:42] *** Quits: pystardust (~pystardus@117.96.229.96) (Ping timeout: 245 seconds)
[13:06:49] <emanuele6> gnoo: doesn't look right
[13:07:03] <emanuele6> what are you trying to do?
[13:07:24] <emanuele6> oh , nevermind, ignore that
[13:07:27] <emanuele6> sorry
[13:07:45] *** Joins: jle (~jle@user/jle)
[13:07:47] <gnoo> the file contains entries as "libfoo.so.6 foo-1.2" one perline. i'm trying to get the foo-1.2 as dependencies
[13:08:51] <gnoo> it works
[13:09:10] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[13:09:19] <gnoo> was just wondering if it there's some thing i overlooked :)
[13:09:35] <emanuele6> it looks ok, but you need to quote ${vpkgs}/common/shlibs
[13:09:45] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Client Quit)
[13:10:40] *** Quits: aakashi2001 (~aakashi20@103.61.255.28) (Ping timeout: 240 seconds)
[13:10:40] <emanuele6> gnoo: xargs -I^ bash -c "grep -m 1 ^ ${vpkgs@Q}/common/shlibs | cut -d ' ' -f 2"
[13:10:45] <emanuele6> something like this
[13:11:06] <gnoo> ohh, thanks! 
[13:11:14] <emanuele6> also, i think you actually want `grep -F`
[13:11:23] <emanuele6> otherwise `.`s are wildcards
[13:11:38] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[13:11:47] <gnoo> ahh, yes, no wildcards should be there
[13:12:02] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[13:13:05] <geirha> why use shell injection?
[13:13:47] <gnoo> it could be done in a loop but this one was one-liner :)
[13:14:03] <geirha> sh -c 'grep -m1 "$1" "$2/common/shlibs"' _ ^ "$vpkgs"
[13:14:18] <emanuele6> right, that is even better
[13:14:29] <geirha> safely passing data as arguments instead of injecting the data
[13:14:47] <emanuele6> ${vpkgs@Q} is totally safe though
[13:15:06] <emanuele6> oh, but ^ is not
[13:16:10] <gnoo> right, thanks! stupid shellcheck, didn't warn about it :P
[13:16:55] <emanuele6> geirha, this would be better: bash -c 'grep -Fm1 "$1" "${vpkgs@Q}/common/shlibs"' _ ^
[13:17:07] <emanuele6> err
[13:17:20] <gnoo> why is the '_' necessary?
[13:17:20] <emanuele6> bash -c 'grep -Fm1 "$1" '"${vpkgs@Q}/common/shlibs" _ ^
[13:17:31] <emanuele6> gnoo: that is $0
[13:18:28] <gnoo> ohh, thanks!
[13:18:43] *** Joins: NeoCron (~NeoCron@p200300c4cf4a8400dde9c021b1b0ad3f.dip0.t-ipconnect.de)
[13:22:01] <geirha> I don't why that would be better ...
[13:22:36] *** Joins: wwallace (~afernande@63.240.73.102)
[13:22:38] *** Joins: michigan (uid507982@id-507982.charlton.irccloud.com)
[13:22:55] *** Quits: wwallace (~afernande@63.240.73.102) (Changing host)
[13:22:55] *** Joins: wwallace (~afernande@user/wwilliam)
[13:22:55] *** wwallace is now known as wwilliam
[13:23:28] <wwilliam> Hello how do i save the output of every "$x" on the local server?
[13:23:44] <wwilliam> while read -r x;do ssh -n "$x" 'echo;uname -n;df -hT';done < /home/afernandez/access_servers_ips
[13:24:13] <wwilliam> in the way of "$x"_date.csv ?
[13:24:36] *** didiksupriadi41_ is now known as didiksupriadi41
[13:24:55] <geirha> declare -A output=();  output[$x]=$(ssh -n ...)
[13:25:14] <wwilliam> Ayy
[13:25:28] <geirha> oh, to file, then simply > "${x}_$(date +%...)"
[13:25:37] <geirha> > "${x}_$(date +%...).csv"
[13:25:51] <wwilliam> but on the local server not on the remote servers.
[13:25:52] *** Joins: hyskaru (~hyskaru@user/hyskaru)
[13:26:28] <geirha> ssh -n "$x" '... > file'  would store on the remote server,   ssh -n "$x" '...' > file  would store on local server
[13:26:36] *** Quits: xiao (~xiao@37.164.128.21) (Quit: Leaving)
[13:26:38] *** Quits: hyskaru (~hyskaru@user/hyskaru) (Client Quit)
[13:27:36] *** Joins: mr-red (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[13:28:13] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 258 seconds)
[13:29:00] *** Joins: n4dir (~user@88.130.152.150)
[13:30:24] <wwilliam> while read -r x;do ssh -n "$x" 'echo;uname -n;df -hT';done < /home/afernandez/access_servers_ips > ${x}_$(date +%Y%m%d).csv
[13:30:29] <wwilliam> did not worked
[13:30:49] <wwilliam> It created one file  on local server as so:
[13:30:59] <wwilliam> _20210817.csv
[13:31:04] <geirha> inside the loop, obviously
[13:31:15] <wwilliam> Oh OK...
[13:32:58] <wwilliam> Thank you, geirha this one worked:
[13:32:59] <wwilliam> while read -r x;do ssh -n "$x" 'echo;uname -n;df -hT' > ${x}_$(date +%Y%m%d).csv;done < /home/afernandez/access_servers_ips
[13:33:22] *** Joins: Adoi (~Adoi@user/adoi)
[13:34:53] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[13:35:21] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[13:36:21] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[13:39:38] *** Joins: UnnamedBeer (~UnnamedBe@225.red-79-152-222.dynamicip.rima-tde.net)
[13:40:47] *** Joins: mjbatty_ (~mjbatty@82.2.17.205)
[13:42:58] *** Joins: pystardust (~pystardus@2409:4071:211e:7ece:de17:f938:d48c:e43)
[13:46:21] <gnoo> here is the final script: https://termbin.com/n0gh 
[13:47:09] *** Quits: rustyshackleford (uid236774@id-236774.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[13:47:54] <gnoo> oops, please ignore that nosource|nosrc) in case ... esac, it should be fixed :)
[13:48:30] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Ping timeout: 272 seconds)
[13:49:42] *** Joins: emanuele6 (~emanuele6@2001:b07:645e:ea8c:221:ccff:fe6c:949d)
[14:04:06] *** Quits: terabyte (~terabyte@27.176-105-213.static.virginmediabusiness.co.uk) (Quit: Client closed)
[14:05:53] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[14:08:18] *** Quits: emanuele6 (~emanuele6@2001:b07:645e:ea8c:221:ccff:fe6c:949d) (Changing host)
[14:08:18] *** Joins: emanuele6 (~emanuele6@user/emanuele6)
[14:11:33] *** Quits: Bhavuk_ (~BTaneja@122.173.26.212) (Quit: Leaving)
[14:20:21] *** Joins: chomwitt (~chomwitt@2a02:587:dc0c:e200:12c3:7bff:fe6d:d374)
[14:24:30] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[14:27:07] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 245 seconds)
[14:27:07] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[14:29:07] *** Joins: jetchisel (jetchisel@user/jetchisel)
[14:29:41] *** Joins: user____ (~user____@82.76.47.104)
[14:38:07] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[14:39:16] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[14:46:12] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:b47e:8fb:ee3a:a3c4)
[14:46:12] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:b47e:8fb:ee3a:a3c4) (Changing host)
[14:46:12] *** Joins: skapata (~Skapata@user/skapata)
[14:46:51] *** Quits: shad (~shad@user/shad) (Ping timeout: 268 seconds)
[14:47:54] *** Quits: nrl^ (~nrl@209.65.131.194) (Remote host closed the connection)
[14:48:19] *** Joins: shad (~shad@user/shad)
[14:53:30] *** Quits: roadie (~user@2a02:8108:ec0:1427:8085:9314:966e:5dcf) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[14:54:17] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[14:55:29] *** Quits: maledictium (~crux@bl4-73-156.dsl.telepac.pt) (Ping timeout: 268 seconds)
[14:55:40] *** Quits: pystardust (~pystardus@2409:4071:211e:7ece:de17:f938:d48c:e43) (Ping timeout: 240 seconds)
[14:55:40] *** Quits: AsenMx (~AsenMx@78.90.248.234) (Ping timeout: 240 seconds)
[14:55:45] *** Joins: maledictium (~crux@81.193.73.156)
[14:58:02] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[15:02:32] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 245 seconds)
[15:02:44] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[15:05:27] *** Quits: chomwitt (~chomwitt@2a02:587:dc0c:e200:12c3:7bff:fe6d:d374) (Ping timeout: 245 seconds)
[15:10:24] *** Joins: pystardust (~pystardus@2409:4071:211e:7ece:de17:f938:d48c:e43)
[15:11:39] <wyre> are all cli arguments passed as strings?
[15:12:07] <Soliton> what else would they be?
[15:12:32] <wyre> Soliton, as integers, for example? 
[15:13:43] <Soliton> what exactly would that mean?
[15:14:54] <gl> wyre and you make a wild guess, to know if an argument is a string or an integer?  or a float?
[15:15:12] <gl> or... you parse the string and convert it to the appropriate type if necessary
[15:16:08] <Soliton> gnoo: why do you use ${fxs_dir@Q}?
[15:16:47] <wyre> gl, Soliton the problem is that I'm using Popen form subprocess python module to pass arguments to my sh script, and it's apparently passing them as string
[15:17:05] <wyre> but I need it as integers because I need to do a comparison in a test 
[15:17:27] <gl> well, convert the strings to integers
[15:17:36] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[15:17:53] <Soliton> that's what test does anyway.
[15:18:04] <Soliton> what is the actual issue?
[15:18:29] <gl> oh we're in #bash, i thought it was #posix
[15:18:41] <wyre> gl, that's what I've done but apparently Popen pass all arguments as strings always 🤔
[15:18:55] <Soliton> because that is how that works.
[15:19:11] <wyre> Soliton, you mean Popen? 
[15:19:22] <gnoo> Soliton: to quote it, if sometimes later path contains whitespace or something else
[15:19:23] <Soliton> doesn't matter what you use.
[15:19:55] <Soliton> gnoo: and where do you use it as shell code?
[15:20:06] <geirha> int execve(const char *filename, char *const argv[], char *const envp[]);
[15:20:15] <geirha> all char*
[15:20:18] <gnoo> Soliton: nowhere, just as a path, is that not necessary?
[15:20:35] <Soliton> gnoo: rather it is not going to work.
[15:20:37] <wyre> Soliton, I have a `While [ $i -lt $1 ]` where i=0
[15:20:54] <wyre> but apparently when Popen pass the argument to the script $1 is a string 
[15:21:07] <Soliton> gnoo: @Q will expand to shell syntax. that's not going to work unless you eval it.
[15:21:30] <Soliton> wyre: a command and its argument are all strings.
[15:21:37] <gnoo> ohh, i hadn't tested it today so didn't know if it would work (made the change today :) ) 
[15:23:18] <Soliton> gnoo: you would use it where you do shell injection but really you should just not do shell injection.
[15:23:23] <emanuele6> also note that @Q expands to bash quoting syntax specifically (won't work when injected in posix shells)
[15:23:51] <Soliton> that xargs sh -c ""  stuff is just terrible.
[15:24:18] <gnoo> the second one?
[15:24:26] <Soliton> all of them.
[15:25:17] *** Joins: lq820105 (~lq@180.167.42.3)
[15:25:30] <gnoo> it is package names so none of them will have spaces or anything else,,,
[15:25:39] <Limbo> wyre: for (( i=0; i<$1; i++ )); do ...; done
[15:25:40] *** Quits: lq (~lq@116.228.78.183) (Ping timeout: 240 seconds)
[15:25:57] <Soliton> so it's just terrible and hard to read for no reason. it might actually work.
[15:26:00] <gnoo> should i use a for loop instead?
[15:27:22] *** Joins: dsrt^ (~dsrt@209.65.131.194)
[15:29:55] *** Joins: frostwork (~frostwork@user/frostwork)
[15:32:57] *** Quits: gnoo (~gnoo@user/gnoo) (Remote host closed the connection)
[15:33:11] <emanuele6> # bash -c 'for (( i=0; i<$1; i++ )); do :; done' x 'q[$(echo hax0r >&2)]' # Limbo 
[15:33:13] <shbot> emanuele6: hax0r
[15:33:20] *** Joins: gnoo (~gnoo@user/gnoo)
[15:36:20] <Soliton> no clue what those xargs are doing anyway but it looks like it can be done much simpler.
[15:37:57] <gnoo> the first one is: for all shared libs, find the package name using that file (stored as "shared-lib package-name")
[15:38:41] <gnoo> the second one is: for all packages, change package-1.0_2 to package>=1.0_2 (because the package is minimum required version)
[15:42:02] <Soliton> sounds like: for lib in "${shlib_depends[@]}"; do p=<first thing>; pkg_ver=$p; pkg=${pkg_ver%-*}; ver=${pkg_ver#$pkg-}; depends+=("${pkg}>=$ver"); done
[15:42:51] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[15:43:24] <gnoo> yeah, this one is better :)
[15:43:32] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 258 seconds)
[15:43:45] <emanuele6> Soliton: the $pkg in ${pkg_ver#$pkg-} should be quoted
[15:43:57] <Soliton> yes.
[15:45:00] <Soliton> for lib in "${shlib_depends[@]}"; do pkg_ver=$(grep -F -m 1 "$lib" "$vpkgs/common/shlibs" | cut -d ' ' -f 2); pkg=${pkg_ver%-*}; ver=${pkg_ver#"$pkg"-}; depends+=("${pkg}>=$ver"); done
[15:45:15] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Client Quit)
[15:45:32] <michigan> Hello! Trying to prettify my Rails+OpenBSD startup script -- how'd I go about passing arguments between files like ie. `$port` instead of `$3`? https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759 -- this is pretty much a non-problem, it just looks nicer.
[15:45:43] <Soliton> !check
[15:45:43] <checkbot> michigan: Line 54: This flag is used as a command name. Bad line break or missing [ .. ]?. Line 101: user was modified in a subshell. That change might be lost. Line 21: rcexec is referenced but not assigned. See https://shellcheck.net/?id=cb98943 for all 24 issues.
[15:46:01] <emanuele6> it's markdown
[15:46:06] <michigan> :D
[15:46:22] <michigan> wait, it's not a bash question either. my bad guys
[15:46:24] <Soliton> and apparently ksh.
[15:46:32] *** Quits: n4dir (~user@88.130.152.150) (Remote host closed the connection)
[15:46:53] <emanuele6> !quote > michigan: important even if it's not bash
[15:46:53] <greybot> michigan: important even if it's not bash: https://mywiki.wooledge.org/Quotes
[15:47:02] <Soliton> generally if you want $3 be called port you do port=$3.
[15:47:35] <michigan> Soliton: sounds like a bargain :)
[15:47:55] <michigan> emanuele6: cheers for that!
[15:48:04] <Soliton> and _rails_helper contains shell injection.
[15:48:31] <Soliton> use  sh -c '...' _ arg1 arg2  instead.
[15:48:42] <emanuele6> michigan: mainly the "$1" rc_cmd
[15:48:49] <emanuele6> and the thing Soliton pointed out too
[15:48:59] <emanuele6> you are doing unnecessary code injection
[15:49:43] <michigan> i had to do some weird stuff to rearrange the order of arguments so Puma would understand
[15:49:44] *** Quits: shad (~shad@user/shad) (Ping timeout: 268 seconds)
[15:49:57] <emanuele6> make the `sh -c "blabla $1; blabla $2"` a `sh -c 'blabla "$1"; blabla "$2"' - _ "$1" "$2"
[15:50:04] <michigan> not sure if that's what you mean by code injection, i suck at this
[15:50:11] <Soliton> there is no reason to do shell injection since the shell takes arguments just fine.
[15:50:34] <Soliton> you need injection when there is no way to hand over data.
[15:50:53] <Soliton> and then you need to prepare the data before injecting...
[15:51:43] *** Joins: rovert (uid389732@id-389732.tooting.irccloud.com)
[15:53:17] <emanuele6> also that sh-c is unnecessary i just noticed
[15:54:10] <Soliton> yeah, looks like it's just cd and export which you can probably do normal ways with doas.
[15:54:12] <emanuele6> (cd "/home/apps/$2"; RAILS_ENV=production PORT=$3 GEM_HOME=/home/apps/.gem doas -u apps bundle exec pumactl "$1")
[15:54:22] <emanuele6> even without the subshell
[15:54:29] <geirha> s/;/&&/
[15:54:38] <Soliton> does doas forward env like that though?
[15:55:25] <emanuele6> if it didn't export wouldn't have worked either
[15:55:37] <emanuele6> geirha: right :)
[15:55:39] <Soliton> export is done after doas now.
[15:55:45] <emanuele6> ah
[15:56:25] <michigan> this is just fantastic, one sec
[15:56:47] <Soliton> "By default, a new environment is created."
[15:56:49] <emanuele6> https://man.openbsd.org/doas
[15:56:51] <emanuele6> right
[15:57:02] <emanuele6> that's why it was done with the sh-c then
[15:57:38] <Soliton> perhaps it supports  doas VAR=foo cmd  doesn't say there though.
[15:58:36] <geirha> doas env VAR=foo cmd   should work regardless though
[15:58:55] <Soliton> good point.
[15:59:15] <emanuele6> cd "/home/apps/$2" && doas -u apps env PORT=$3 bundle exec pumactl "$1"
[15:59:30] <Soliton> "$3"
[15:59:30] <emanuele6> cd "/home/apps/$2" && doas -u apps env PORT="$3" bundle exec pumactl "$1"
[16:00:19] <Soliton> shell injection gone by removing useless shell process.
[16:00:20] <emanuele6> cd "/home/apps/$2" && doas -u apps env PORT="$3" GEM_HOME=/home/apps/.gem RAILS_ENV=production bundle exec pumactl "$1"
[16:01:20] *** Joins: AsenMx (~AsenMx@78.90.248.234)
[16:04:55] <michigan> https://clbin.com/ZLyfs perchance?
[16:05:41] <Soliton> no.
[16:05:44] <michigan> `bundle exec pumactl "$command"` at the last line there
[16:05:46] <michigan> oh :(
[16:06:14] <Soliton> cd is nonsense and you cannot write the doas command like that.
[16:06:48] <Soliton> also you assigned $1 to command but used "$1" anyway.
[16:07:03] <michigan> yeah the latter was a typo
[16:07:10] <michigan> using "$command" now
[16:07:25] *** Parts: user____ (~user____@82.76.47.104) ()
[16:07:31] <michigan> cd is nonsense, not sure what you mean
[16:07:40] <Soliton> cd /home/"$user"/"$app" && doas -u "$user" env PORT="$port" RAILS_ENV=production GEM_HOME=/home/"$user"/.gem bundle exec pumactl "$command"
[16:08:01] <michigan> ooh la la
[16:08:03] <Soliton> you can put the doas command in a array to add the comments on assignment.
[16:08:54] <Soliton> cmd=(env PORT="$port" RAILS_ENV=production GEM_HOME=/home/"$user"/.gem bundle exec pumactl "$command"); cd /home/"$user"/"$app" && doas -u "$user" "${cmd[@]}"
[16:09:11] <Soliton> array assignment you can write like you did.
[16:10:01] <michigan> i dont *have* to do it like that though right? your previous suggestion looked much simpler
[16:10:05] *** Quits: dermoth (~dermoth@user/dermoth) (Remote host closed the connection)
[16:10:40] <Soliton> sure. you just can't add your comments in the middle then.
[16:10:56] <michigan> aah i see
[16:12:33] <michigan> https://clbin.com/aJJS8 is beyond pretty though, daaaaaamn!
[16:13:22] <Soliton> add lots of \ then.
[16:13:49] <Soliton> the shell does not randomly assume the command continues on the next line.
[16:13:59] <michigan> gotcha!
[16:14:15] <michigan> man this code is so beautiful i wanna make her my wife
[16:14:18] <michigan> :D
[16:16:26] <michigan> https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759 -- prepares wedding vows
[16:16:26] *** Quits: downunder (~downunder@110.151.122.76) (Quit: WeeChat 3.2)
[16:17:47] <Soliton> missing \ on the empty lines.
[16:17:48] *** Joins: thiras (~thiras@user/thiras)
[16:18:27] <michigan> oh damn
[16:18:49] <michigan> i guess i can remove those empty lines. she'll still be beautiful
[16:19:40] *** Quits: UnnamedBeer (~UnnamedBe@225.red-79-152-222.dynamicip.rima-tde.net) (Ping timeout: 240 seconds)
[16:20:37] <michigan> here she is: in all her glory: wearing her wedding dress that her grandmother gave her: https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759
[16:21:36] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[16:24:40] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 240 seconds)
[16:25:30] *** Joins: jmacdonald (~jmacdonal@142.177.169.250)
[16:25:32] <emanuele6> michigan: `rc_cmd $1` -> `rc_cmd "$1"`
[16:25:33] <jmacdonald> morning
[16:26:48] <michigan> emanuele6: ah yes, it was having some trouble with that, let me try now
[16:26:51] <michigan> jmacdonald: morning!
[16:26:58] <jmacdonald> What do you call this form : {1..10} , so that i can google it and read about it please ;)
[16:27:04] <geirha> !be
[16:27:05] <greybot> Brace and sequence expansion: {a,b,c}1 and {a..c}1 expand to a1 b1 c1, {a..c}{1..3} expands to a1 a2 a3 b1 b2 b3 c1 c2 c3. http://wiki.bash-hackers.org/syntax/expansion/brace http://mywiki.wooledge.org/BraceExpansion
[16:27:12] <jmacdonald> Thanks!
[16:27:17] <geirha> !google
[16:27:17] <greybot> Google is NOT a preferred source for learning bash, because almost all the "tutorials" and scripts out there are JUNK. Instead, ask a good question here or refer to the Guide and FAQ (see topic)
[16:27:46] <jmacdonald> The 2 links in the answer are fine.
[16:28:55] <michigan> it's a little bit confused about the arguments though - https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759
[16:28:57] *** Joins: dermoth (~dermoth@user/dermoth)
[16:29:01] <michigan> it seems to go to `/etc/rc.d/_rails_helper[15]: cd: /home/myapp/XXX - No such file or directory` instead of `/home/restricted_user/myapp`
[16:30:30] <geirha> then the second argument isn't what you expected
[16:31:34] <jmacdonald> Honestly, I was just having a brain fart on why a={1..10} didn't set a to equal "1 2 3 4 5 6 7 8 9 10"
[16:31:37] <jmacdonald>  but it makes sense now
[16:31:59] <Soliton> !faq 5
[16:31:59] <greybot> https://mywiki.wooledge.org/BashFAQ/005 -- How can I use array variables?
[16:32:10] <Soliton> a=({1..10})
[16:32:18] <jmacdonald> oh ho. Thanks!
[16:32:59] <Soliton> if you really want a single string you can use "${a[*]}".
[16:33:50] <jmacdonald> What does that do ?
[16:34:00] <Soliton> !$*
[16:34:00] <greybot> The difference between $@ and $*: "$@" (quoted) expands to each positional parameter as its own argument: "$1" "$2" ... while "$*" expands to the single argument "$1c$2c..." where c is the first character of IFS. You almost always want "$@". The same goes for arrays: "${array[@]}" or "${array[*]}". Unquoted $* and $@ are undefined; DO NOT use.
[16:34:30] <jmacdonald> Heh, I might be stupid but that doesn't help :)
[16:34:40] *** Quits: mr-red (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 240 seconds)
[16:35:00] <Soliton> "${a[*]}" expands to a single string instead of multiple arguments.
[16:35:42] <jmacdonald> i ran it and it tried to execute the first string inside $a
[16:35:49] <jmacdonald> so it tried to run "1"
[16:36:03] <Soliton> ok, but why?
[16:36:08] *** Joins: zeden (~zeden@user/zeden)
[16:36:32] <Soliton> and no that is not how it works unless you left out the quotes.
[16:36:45] <jmacdonald> ah, I did  :)
[16:37:07] <jmacdonald> oh neat. with quotes it runs the entire variable as one command, that's neat.
[16:37:09] <Soliton> # a=({1..10}); printf '<%s>' "${a[*]}" "${a[@]}"
[16:37:11] <shbot> Soliton: <1 2 3 4 5 6 7 8 9 10><1><2><3><4><5><6><7><8><9><10>
[16:37:18] <emanuele6> michigan: what is rc_exec?
[16:37:22] <jmacdonald> neato.
[16:37:28] <emanuele6> without the _
[16:37:36] <jmacdonald> more than I'll need fo rnow ;) thanks for the help
[16:37:46] <michigan> geirha: yeah it seems to think $1 and $2 are myapp, and $3 and $4 are the XXX port -- i reckon im missing some quotes or something?
[16:38:12] <Soliton> michigan: nobody here knows how _rails_helper is called.
[16:38:33] <Soliton> there is no call in what you've shown.
[16:38:38] <michigan> emanuele6: it's openbsd's version of systemd i guess.. https://man.openbsd.org/rc.d.8 -- http://cvsweb.openbsd.org/cgi-bin/cvsweb/ports/infrastructure/templates/rc.template
[16:38:54] <emanuele6> Soliton: no, we do
[16:38:55] *** Quits: jmacdonald (~jmacdonal@142.177.169.250) (Quit: leaving)
[16:39:06] <emanuele6> with ${rcexec} from the other script
[16:39:18] <michigan> indeed
[16:39:21] <Soliton> probably sure.
[16:39:26] <Soliton> who knows.
[16:39:35] <Soliton> we can make guesses.
[16:39:44] <michigan> jesus christ knows
[16:39:47] <Soliton> i'll start: something goes wron gin rcexec.
[16:39:50] <michigan> you guys should try letting him into your hearts
[16:39:58] <michigan> j/k
[16:41:11] <Soliton> so looks like rcexec is shell injection as well...
[16:41:13] <michigan> `command=$1` in the helper should probably be `command="$1"` right?
[16:41:13] <geirha> so it's always passing ${app} as second arg, and ${port} as third arg, but your _rails_helper script expect those two as third and fourth arg
[16:41:23] <michigan> hmm
[16:41:33] <geirha> and yeah, certainly looks like yet another shell injection
[16:41:54] <Soliton> terrible design all the way down.
[16:42:08] <michigan> :/
[16:43:13] *** Joins: shad (~shad@user/shad)
[16:43:34] <emanuele6> michigan: but why is it a variable?
[16:43:38] <emanuele6> ${rcexec}
[16:44:07] *** Joins: darkbit (~db@152.32.99.67)
[16:44:18] <emanuele6> oh, i found it
[16:44:24] <Soliton> it's the same in the template.
[16:44:25] <emanuele6> rc_exec='su -l -c ${daemon_class} -s /bin/sh ${daemon_user} -c'
[16:44:34] <emanuele6> without the quotes
[16:44:36] <michigan> i dunno man. here's the original from openbsd: http://cvsweb.openbsd.org/cgi-bin/cvsweb/ports/infrastructure/templates/rc.template?rev=1.13&content-type=text/x-cvsweb-markup
[16:44:39] <geirha> oh my
[16:44:50] <michigan> ah you guys found the template
[16:45:06] <emanuele6> i found it here: https://man.openbsd.org/rc.subr
[16:45:16] <emanuele6> it is kind of disgusting
[16:45:24] <Soliton> just make sure all the data you use is alnum only and it's all good!
[16:45:27] <michigan> hehe
[16:45:44] <emanuele6> and make sure IFS is not set
[16:48:04] <michigan> dunno what to do :/ guess i should revert back to the original https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759/f82b56c71a5fa629df736696aa117813cabaef24
[16:48:35] <michigan> would be awesome if you guys could send a mail to  Robert Nagy <robert@openbsd.org>, Antoine Jacoutot <ajacoutot@openbsd.org>, and Ingo Schwarze <schwarze@openbsd.org> and gives them suggestions on how to improve
[16:48:37] <geirha> alnum and maybe a few others like -, _ and .
[16:49:07] <emanuele6> michigan: so the solution is to use this i think: ${rcexec} '"$1" stop "$2" "$3 ' - "$daemon" "$app ${port}"
[16:49:11] <emanuele6> oops
[16:49:21] <emanuele6>  ${rcexec} '"$1" stop "$2" "$3 ' - "$daemon" "$app" "$port"
[16:49:23] <Soliton> maybe / but why wouldn't you put stuff in the current dir??
[16:49:42] <emanuele6> even though it is very weird 
[16:49:51] <geirha> emanuele6: can't do that
[16:50:01] <geirha> su -c is not like sh -c
[16:50:13] <emanuele6> geirha: why? rc_exec is  su -l -c ${daemon_class} -s /bin/sh ${daemon_user} -c
[16:50:17] <geirha> only way to pass data is via env or shell injection
[16:50:29] <emanuele6> ah, it's not sh -c
[16:50:42] <emanuele6> it's su -s sh user -c
[16:50:44] <emanuele6> my bad
[16:50:48] <michigan> hmm
[16:51:44] <geirha> Hm. Actually, looks like su on ubuntu, at least, support that
[16:52:43] <geirha> I guess this only have to work on a single system, so as long as the su supports passing arguments, it's usable after all
[16:52:44] <Soliton> they should just make rc_exec a function instead. no reason for that nonsense.
[16:53:08] <geirha> true. The framework is needlessly complex
[16:53:25] <Soliton> and why do they use doas and su?
[16:53:31] <emanuele6> right
[16:53:40] <emanuele6> it's weird
[16:53:59] <michigan> ill copy these logs and pass it onto those fellas if you dont mind. this must be like gold to them. not that i understand any of that you're saying
[16:54:06] <geirha> obviously because it's twice as secure to use both
[16:54:07] <michigan> like you're all speaking some divine language or something
[16:54:15] <michigan> geirha: hehe
[16:55:00] <Soliton> well, i imagine there is little chance to change this now since there are hundreds of packages written this way...
[16:55:23] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[16:55:54] <Soliton> though they could add a rcexec function in parallel and transition to that. maybe. one would need to look in depth at the whole system and how the packages use it.
[16:56:44] <michigan> wish you guys would hang out in #openbsd and spit some truth
[16:57:03] <michigan> anyway any chance i could be spoonfed on what to do with this startup script? :|
[16:57:47] <Soliton> print what arguments your helper script gets. just getting the right argument shouldn't be hard.
[16:57:56] *** Joins: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz)
[16:58:12] <Soliton> printf '<%s>\n' "$@"
[16:59:32] <michigan> with emanuele6's suggested change to the main script right?
[17:00:20] <emanuele6> no, that would not work
[17:00:48] <emanuele6> Soliton: is telling you to put printf '<%s>\n' "$@" in the helper and see what it outputs
[17:00:52] <emanuele6> for debugging purposes
[17:01:14] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:01:55] <michigan> ok, here's what i get: https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759
[17:02:58] <emanuele6> you have: ${rcexec} "${daemon} start ${app} ${port}"
[17:03:18] <emanuele6> you should have ${rcexec} "${daemon} start ${restricted_user} ${app} ${port}"
[17:03:38] <emanuele6> save for the other functions
[17:04:50] *** Joins: iomari891 (~iomari891@105.112.138.38)
[17:04:57] *** Joins: besnn (~besnn@user/besnn)
[17:05:18] <michigan> !!!
[17:05:46] <michigan> our wedding is on after all, thank you guys so much!
[17:06:24] * michigan passes out invitations, hotel reservations and plane tickets to https://www.fourseasons.com/borabora/ to everyone in this channel
[17:08:03] *** Joins: palimaar (~oasd@KD113148020047.ppp-bb.dion.ne.jp)
[17:08:10] *** Quits: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz) (Ping timeout: 240 seconds)
[17:08:11] <michigan> <3 https://gist.github.com/basicfeatures/5eabd0bc0d24597c9b8232a268504759
[17:08:41] *** Quits: austin987 (~null@100.42.98.196) (Ping timeout: 268 seconds)
[17:12:16] *** Quits: dza (~dza@user/dza) (Read error: Connection reset by peer)
[17:14:15] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[17:14:49] *** Joins: p3rL (~uid0@user/p3rl)
[17:14:54] <p3rL> hi
[17:15:20] <p3rL> is there anyway to know from which url requested in bash .. like in php $_SERVER['HTTP_HOST']
[17:15:45] <Soliton> are you asking about a cgi script?
[17:16:05] <emanuele6> michigan: i wish you and your app a long and happy uptime
[17:16:47] <p3rL> Soliton i have a script.sh ... curl abcd.com/script.sh | sh << i want to know in script.sh which domain was used for calling
[17:17:04] <Soliton> are you trolling?
[17:17:20] <p3rL> no man i have to send response from selective domain
[17:17:28] <p3rL> from where requested
[17:17:31] <Soliton> i want to know what urls you have open in your browser. how do i do that?
[17:17:50] <michigan> emanuele6: thank you!
[17:18:14] <p3rL> Soliton like you have visited on my site... it has multiple domain so how do i know from which url u came from
[17:18:19] <p3rL> got it ?
[17:18:35] <Soliton> i get that you are insane, yes.
[17:18:41] <p3rL> F
[17:19:25] *** hugotty` is now known as hugotty
[17:20:32] <michigan> weird, my app is kinda the same
[17:20:42] *** Parts: p3rL (~uid0@user/p3rl) ()
[17:21:00] <michigan> multiple domains all going to the same app, it is aware of which domain you came from, and will serve you a different name/database based on that
[17:21:18] *** Joins: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com)
[17:22:22] <Soliton> but your app runs in a webserver. why would someone assume bash or really sh here has anything to do with some webserver.
[17:22:39] <michigan> (https://github.com/ErwinM/acts_as_tenant)
[17:22:41] <michigan> true indeed
[17:22:57] <michigan> is p3rL xmb?
[17:23:38] <geirha> they left
[17:23:50] <geirha> nah, he was too coherent
[17:23:59] <michigan> hehe
[17:24:13] *** Joins: Suam31 (~Suam3@2a01:cb19:8add:9300:f9ef:66fb:9ad9:5002)
[17:24:27] *** Joins: reset (~reset@user/reset)
[17:25:05] <geirha> I'm guessing they were serving the same file from multiple domains. E.g. abcd.com/script.sh  and defg.com/script.sh  and wanting to know inside the script if it was from abcd.com and defg.com
[17:25:13] <phy1729> They have a very colorful gecos though
[17:25:18] <geirha> and the answer to that is simple. Just have the web server inject it into the script
[17:26:18] *** Quits: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp) (Quit: leaving)
[17:26:26] *** Quits: Suam31 (~Suam3@2a01:cb19:8add:9300:f9ef:66fb:9ad9:5002) (Client Quit)
[17:27:20] *** Joins: TomyWork (~TomyLobo@p200300e80f06af00903611829bee5879.dip0.t-ipconnect.de)
[17:28:25] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 268 seconds)
[17:32:33] *** Quits: earendel (uid498179@user/earendel) (Quit: Connection closed for inactivity)
[17:33:05] <Soliton> pff, just parse the process table for the right curl process and see what url it was called with.
[17:38:44] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[17:44:53] *** Joins: kill (~killown@user/killown)
[17:45:04] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 268 seconds)
[17:45:46] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[17:50:00] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 268 seconds)
[17:52:40] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 240 seconds)
[17:54:44] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[17:55:35] *** Joins: fabs (~fabs@2607:fb60:2501:2805:dea6:32ff:fed8:2af3)
[18:01:11] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[18:03:47] *** Quits: TomyWork (~TomyLobo@p200300e80f06af00903611829bee5879.dip0.t-ipconnect.de) (Quit: Leaving)
[18:03:56] *** Joins: me-sudoer-dentne (~me-sudoer@45.112.144.230)
[18:04:15] *** Joins: TomyWork (~TomyLobo@p200300e80f06af00903611829bee5879.dip0.t-ipconnect.de)
[18:04:50] *** Joins: clime (~clime@ip-94-199-195-39.acvyskov.cz)
[18:05:52] *** Joins: dr1be (~dr1be@mail.primus.com.al)
[18:06:04] <dr1be> # sudo apt install asciiquarium
[18:06:06] <shbot> dr1be: bash: sudo: command not found
[18:06:25] <besnn> # ls
[18:06:27] <shbot> besnn: no output
[18:06:40] <kurahaupo> dr1be: Shbot already runs as root
[18:06:55] <besnn> # mkdir .
[18:06:57] <shbot> besnn: bash: mkdir: cannot create directory `.': File exists
[18:07:01] <besnn> # ls -la
[18:07:01] <kurahaupo> # printf "%s" $UID
[18:07:05] <shbot> kurahaupo: 0
[18:07:06] <shbot> besnn: total 8
[18:07:06] <shbot> besnn: drwxrwxr-x  2 root root   0 Mar 21 20:34 .
[18:07:06] <shbot> besnn: etc... ( http://ix.io/3qlb )
[18:07:08] <dr1be> # whoami
[18:07:09] <shbot> dr1be: root
[18:07:12] *** Quits: pystardust (~pystardus@2409:4071:211e:7ece:de17:f938:d48c:e43) (Quit: pystardust)
[18:07:14] <lopid> one can also experiment privately 
[18:07:19] <besnn> how
[18:07:21] <dr1be> how
[18:07:25] <lopid> /msg shbot, i think
[18:07:52] <lopid> also by running your own shell
[18:07:59] <dr1be> how do you run it
[18:08:09] <lopid> "bash", or just log in
[18:08:51] <kurahaupo> dr1be: Even if you could install stuff inside shbot, each command runs in a separate VM so it wouldn't last long enough to be useful
[18:09:24] <dr1be> ah cool
[18:09:37] <dr1be> how do you register here
[18:09:42] <dr1be> newbie here
[18:09:44] <emanuele6> register?
[18:09:48] <kurahaupo> # touch foo
[18:09:50] <kurahaupo> # ls -ld foo
[18:09:50] <shbot> kurahaupo: no output
[18:09:50] <dr1be> log in or smth
[18:09:51] <shbot> kurahaupo: /bin/ls: cannot access 'foo': No such file or directory
[18:10:09] <kurahaupo> dr1be: /msg nickserv help register
[18:10:17] <lopid> https://libera.chat/guides/registration
[18:11:06] <kurahaupo> If you need human help, ask in #libera 
[18:11:26] <kurahaupo> (with registration I mean)
[18:11:34] *** Joins: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431)
[18:11:42] *** Joins: jess (~jess@libera/staff/jess)
[18:12:23] *** Quits: dr1be (~dr1be@mail.primus.com.al) (Quit: dr1be)
[18:12:59] *** Joins: chomwitt (~chomwitt@2a02:587:dc0c:e200:12c3:7bff:fe6d:d374)
[18:15:55] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[18:16:46] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[18:18:37] *** Quits: clime (~clime@ip-94-199-195-39.acvyskov.cz) (Quit: WeeChat 3.2)
[18:19:18] *** Joins: speckz (~speckz@2600:1700:ce0:bf00:cd61:fd69:d1fb:a685)
[18:19:21] *** Quits: rando25892 (~sthk@user/rando25892) (Ping timeout: 248 seconds)
[18:21:01] *** Joins: rando25892 (~sthk@c-98-240-233-64.hsd1.mn.comcast.net)
[18:22:33] *** Parts: didiksupriadi41 (~didiksupr@fedora/didiksupriadi41) (Leaving)
[18:26:46] *** Joins: Adoi (~Adoi@user/adoi)
[18:27:35] *** Joins: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net)
[18:29:44] *** Quits: me-sudoer-dentne (~me-sudoer@45.112.144.230) (Quit: Leaving)
[18:31:17] *** Quits: TomyWork (~TomyLobo@p200300e80f06af00903611829bee5879.dip0.t-ipconnect.de) (Remote host closed the connection)
[18:32:19] *** Joins: rustyshackleford (uid236774@id-236774.brockwell.irccloud.com)
[18:34:06] *** Joins: TomyWork (~TomyLobo@p200300e80f06af00506edd52bbc0d5da.dip0.t-ipconnect.de)
[18:34:11] *** Joins: dza (~dza@user/dza)
[18:34:41] *** Quits: jess (~jess@libera/staff/jess) ()
[18:35:25] *** Joins: roadie (~user@2a02:8108:ec0:1427:c5af:e4b5:208e:fb24)
[18:35:30] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[18:35:36] *** Quits: kj (~kj@kj.aerisnetwork.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:35:41] *** Joins: kurtthemaker (~kurt@S010644a56e3e0ee9.cn.shawcable.net)
[18:35:48] *** Joins: shad (~shad@user/shad)
[18:38:01] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 248 seconds)
[18:38:40] *** Quits: chomwitt (~chomwitt@2a02:587:dc0c:e200:12c3:7bff:fe6d:d374) (Ping timeout: 240 seconds)
[18:40:42] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[18:41:19] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[18:41:49] *** Quits: jetchisel (jetchisel@user/jetchisel) (Quit: Unfortunately time is always against us -- [Morpheus])
[18:43:04] *** Joins: nobody_ (~nobody@host-79-50-185-199.retail.telecomitalia.it)
[18:43:41] *** Quits: CrypticSquared (~CrypticS_@user/crypticsquared) (Ping timeout: 252 seconds)
[18:45:37] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[18:46:54] *** Joins: seninha (~seninha@user/seninha)
[18:46:58] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[18:48:20] *** Joins: CrypticSquared (~CrypticS_@user/crypticsquared)
[18:48:40] *** Quits: lordrishav (~LordRisha@user/lordrishav) (Ping timeout: 240 seconds)
[18:51:17] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 245 seconds)
[18:56:44] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 258 seconds)
[18:57:42] *** Joins: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net)
[18:58:10] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[18:59:50] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[19:02:33] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 248 seconds)
[19:03:27] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[19:04:36] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 268 seconds)
[19:07:04] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[19:10:12] *** Joins: Adoi (~Adoi@user/adoi)
[19:11:40] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 240 seconds)
[19:12:59] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[19:14:12] *** Quits: Lunatrius (~Lunatrius@77.38.22.128) (Ping timeout: 245 seconds)
[19:14:14] *** Joins: Lunatrius` (~Lunatrius@77.38.22.128)
[19:14:15] *** Quits: travisghansen (~travisgha@192.74.130.86) (Quit: The Lounge - https://thelounge.github.io)
[19:14:38] *** Lunatrius` is now known as Lunatrius
[19:14:55] *** Joins: travisghansen (~travisgha@192.74.130.86)
[19:20:06] *** Joins: Mo (~Mo@dynamic-077-003-038-010.77.3.pool.telefonica.de)
[19:20:25] *** Parts: Razva (sid17541@user/razva) ()
[19:21:52] *** Quits: betelgeuse (~john2gb@user/john2gb) (Quit: The Lounge - https://thelounge.chat)
[19:22:47] *** Quits: td001 (~td001@172.245.134.58) (Quit: I'm outta here!)
[19:22:56] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[19:23:39] *** Quits: azidhaka (~azidhaka@user/azidhaka) (Quit: azidhaka)
[19:23:55] *** Joins: td001 (~td001@172.245.134.58)
[19:24:34] *** Joins: alzgh (~alzgh@user/alzgh)
[19:26:47] *** Joins: richardm75 (~richardm7@2600:8801:c502:1000:a1b2:7529:4da3:7f98)
[19:27:07] *** Joins: ChmEarl (~chmearl@user/chmearl)
[19:28:37] <alzgh> hello guys. someone asked this and I answered. a little bit proud of what I've learned. https://paste.debian.net/1207998/
[19:29:41] *** Joins: superboot (~agentgasm@user/superboot)
[19:31:57] <lopid> horrible font for prose
[19:35:37] *** Joins: n4dir (~user@88.130.152.150)
[19:35:37] *** Quits: alzgh (~alzgh@user/alzgh) (Read error: Connection reset by peer)
[19:35:42] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[19:36:06] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[19:37:05] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[19:38:12] *** Joins: chomwitt (~chomwitt@ppp-94-67-193-240.home.otenet.gr)
[19:38:32] *** Quits: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 268 seconds)
[19:40:10] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 240 seconds)
[19:41:12] *** Joins: alzgh (~alzgh@user/alzgh)
[19:42:19] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[19:45:23] *** Joins: zebrag (~chris@user/zebrag)
[19:45:38] *** Joins: aakashi2001 (~aakashi20@103.61.255.35)
[19:45:39] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[19:47:01] *** Joins: Crescendo (~Crescendo@user/crescendo)
[19:50:10] *** Quits: palimaar (~oasd@KD113148020047.ppp-bb.dion.ne.jp) (Ping timeout: 240 seconds)
[19:51:53] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:52:39] *** Joins: rtjure (~rtjure@vlan-153-aitos-30.comnet.bg)
[19:58:24] *** Joins: carlos (~pum@user/carlos)
[20:03:40] *** Joins: guest856 (~guest@181.91.157.188)
[20:06:43] *** derpadmin is now known as CAPSLOCK
[20:06:48] *** CAPSLOCK is now known as CAPSLOCK2
[20:07:11] *** CAPSLOCK2 is now known as derpadmin
[20:07:57] *** Quits: speckz (~speckz@2600:1700:ce0:bf00:cd61:fd69:d1fb:a685) (Quit: Textual IRC Client: www.textualapp.com)
[20:09:03] *** Quits: alzgh (~alzgh@user/alzgh) (Read error: Connection reset by peer)
[20:09:33] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Quit: ɯlɐɔ uı ʞɹoʍ oʇ ƃuıoƃ)
[20:10:40] *** Joins: earendel (uid498179@user/earendel)
[20:12:36] <Maxattax> can someone point me to a guide on figuring out how bash parses this variable? `../conf.d/${RC_SVCNAME%%.*}`
[20:12:52] <emg> !pe > Maxattax
[20:12:52] <greybot> Maxattax: Parameter Expansion expands parameters: "$foo", "$1". You can use it to perform string or array operations: "${file%.mp3}", "${0##*/}", "${files[@]: -4}". They should *always* be quoted. See: http://mywiki.wooledge.org/BashFAQ/073 and "Parameter Expansion" in man bash. Also see http://wiki.bash-hackers.org/syntax/pe.
[20:13:30] <Maxattax> emg: you're the bomb.com
[20:14:38] *** Quits: zopsi (~zopsi@irc.dir.ac) (Quit: Oops)
[20:15:03] *** Joins: zopsi (~zopsi@irc.dir.ac)
[20:15:04] *** Joins: callq (~callq@157.41.79.159)
[20:17:03] *** Joins: frostwork (~frostwork@user/frostwork)
[20:19:04] *** Joins: omegatron (~some@p54849842.dip0.t-ipconnect.de)
[20:19:53] *** Quits: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net) (Ping timeout: 248 seconds)
[20:19:53] *** Joins: aeadio (~aead@ec2-52-2-178-231.compute-1.amazonaws.com)
[20:27:07] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 245 seconds)
[20:27:37] *** Quits: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz) (Quit: A random quit message)
[20:30:25] *** Quits: michigan (uid507982@id-507982.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[20:32:11] *** Quits: dsrt^ (~dsrt@209.65.131.194) (Ping timeout: 268 seconds)
[20:33:40] *** Quits: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com) (Ping timeout: 240 seconds)
[20:35:55] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[20:38:23] *** Joins: lavaball (felix@31.204.155.215)
[20:39:30] *** Joins: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz)
[20:40:33] *** Quits: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz) (Client Quit)
[20:41:08] *** Joins: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz)
[20:42:45] *** Quits: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz) (Client Quit)
[20:44:35] *** Joins: magla (~gelignite@55d4d9a3.access.ecotel.net)
[20:46:06] *** Quits: humky (~humky@user/humky) (Remote host closed the connection)
[20:46:20] *** Joins: humky (~humky@user/humky)
[20:46:29] *** Joins: austin987 (~null@100.42.98.196)
[20:46:50] *** Joins: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz)
[20:48:44] *** Quits: GNUHacker (~gnu@fsf/member/GNUHacker) (Remote host closed the connection)
[20:49:31] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[20:49:33] *** Quits: kulernil (~kulernil@gateway/tor-sasl/kuler) (Ping timeout: 244 seconds)
[20:50:27] *** Joins: GNUHacker (~gnu@fsf/member/GNUHacker)
[20:51:04] *** Quits: GNUHacker (~gnu@fsf/member/GNUHacker) (Remote host closed the connection)
[20:51:26] *** Joins: GNUHacker (~gnu@fsf/member/GNUHacker)
[20:52:18] *** Joins: kj (~kj@beta.aerisnetwork.net)
[20:53:54] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Quit: WeeChat 3.2)
[20:54:16] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[20:56:00] *** Joins: alzgh (~alzgh@user/alzgh)
[20:57:23] *** Joins: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net)
[20:57:36] *** Joins: killown (~killown@user/killown)
[20:58:10] *** Quits: kill (~killown@user/killown) (Ping timeout: 240 seconds)
[20:59:24] *** Quits: carlos (~pum@user/carlos) (Remote host closed the connection)
[20:59:41] *** Joins: H3dn1ng (~H3dn1ng@2-248-149-85-no172.tbcn.telia.com)
[20:59:50] *** Joins: sandb0y (pirate@user/sandb0y)
[21:00:43] *** Quits: callq (~callq@157.41.79.159) (Quit: callq)
[21:00:52] *** Joins: dsrt^ (~dsrt@209.65.131.194)
[21:02:07] *** Quits: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 245 seconds)
[21:02:25] *** Joins: carlos (~pum@user/carlos)
[21:03:17] *** Joins: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697)
[21:04:51] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 268 seconds)
[21:09:35] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[21:10:11] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[21:10:42] *** guest856 is now known as guest734
[21:11:28] *** guest734 is now known as guest856
[21:11:49] *** Joins: kewl_fft (~kewl_fft@82-65-252-209.subs.proxad.net)
[21:16:26] *** Quits: totenkoph (~scythe@user/totenkoph) (Quit: totenkoph)
[21:17:32] *** Joins: michigan (uid507982@id-507982.charlton.irccloud.com)
[21:18:08] <alzgh> I have a loop that goes through some folders and then the files in those folders and echos the names. It uses globbing. When the folder is empty it prints "path/to/folder/*". Otherwise it doesn't print the star. I don't understand why.
[21:18:22] *** Quits: woky (~woky@li1651-31.members.linode.com) (Ping timeout: 272 seconds)
[21:18:41] *** Joins: woky (~woky@li1651-31.members.linode.com)
[21:18:43] <emg> alzgh: you seem to understand the behavior well, if there is no file that matches the glob then it doesn't expand
[21:18:53] <emanuele6> !nullglob > alzgh
[21:18:53] <greybot> alzgh: Causes unmatched globs to expand to nothing rather than themselves. shopt -s nullglob; files=(*); echo "There are ${#files[@]} files." - see: http://mywiki.wooledge.org/glob#nullglob
[21:18:58] <emg> alzgh: if you want it to instead be empty when that happens use   shopt -s nullglob
[21:19:37] <alzgh> nice, thanks emg 
[21:19:58] <michigan> emanuele6, Soliton, geirha, thanks again for earlier
[21:20:16] <michigan> this stuff is years ahead of anything else the ruby on rails community uses
[21:20:29] *** Joins: pystardust (~pystardus@117.96.229.96)
[21:22:08] *** Joins: justsomeguy (~justsomeg@user/justsomeguy)
[21:23:03] *** Joins: fuzzybear3965 (~fuzzybear@2a03:7380:2102:6c35:c9d2:f42a:d474:7162)
[21:23:22] <fuzzybear3965> I want to use this to change the behavior of ./foo and source foo : https://stackoverflow.com/a/2687092 
[21:23:41] <fuzzybear3965> Is that a violation of any best practices? Would I be shooting myself in the foot in some special/normal cases?
[21:23:59] <fuzzybear3965> I have a bunch of utility functions in a script that I want to bring into a shell environment sometimes.
[21:24:10] <fuzzybear3965> But, most of the times I want to execute the function main defined in that script.
[21:24:24] <fuzzybear3965> So, ./foo.sh should execute main with a guard checking if it's being sourced.
[21:24:32] <fuzzybear3965> source foo.sh should bring the utility functions into scope.
[21:25:46] *** Quits: kewl_fft (~kewl_fft@82-65-252-209.subs.proxad.net) (Quit: bye - http://znc.in)
[21:26:06] *** Joins: kewl_fft (~kewl_fft@82-65-252-209.subs.proxad.net)
[21:27:28] *** Joins: codebam (~codebam@user/codebam)
[21:30:11] *** Quits: wolfgang (~wolfgang@101.174.6.197) (Remote host closed the connection)
[21:30:41] <emg> fuzzybear3965: better to just not try to source and execute the same file, in general that's a code smell and you should redesign
[21:30:52] *** Quits: TomyWork (~TomyLobo@p200300e80f06af00506edd52bbc0d5da.dip0.t-ipconnect.de) (Quit: Leaving)
[21:33:39] *** Quits: roadie (~user@2a02:8108:ec0:1427:c5af:e4b5:208e:fb24) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[21:33:42] *** Joins: wolfgang (~wolfgang@101.174.6.197)
[21:34:00] *** Quits: guest856 (~guest@181.91.157.188) (Remote host closed the connection)
[21:34:10] <michigan> emanuele6, Soliton, geirha, if you guys are still around, any chance you could provide a nice and quick summary of how the rc.subr template or what have you, could be improved?
[21:34:53] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[21:35:23] <michigan> emanuele6, Soliton, geirha, got a rather snippy reply from Antoine Jacoutot: "I don't understand anything in that exchange. Also they're talking about doas which rc.subr does not use."
[21:36:20] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[21:40:54] *** Quits: alzgh (~alzgh@user/alzgh) (Read error: Connection reset by peer)
[21:42:07] *** Quits: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697) (Ping timeout: 245 seconds)
[21:43:35] *** Joins: greycat (~greg@209.142.155.49)
[21:44:36] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:44:48] *** Quits: Milos (~Milos@user/milos) (Quit: ZNC 1.8.2 - https://znc.in)
[21:45:03] *** Joins: Milos (~Milos@user/milos)
[21:46:25] *** Joins: alzgh (~alzgh@user/alzgh)
[21:46:40] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 240 seconds)
[21:46:55] <fuzzybear3965> emg How would you refactor? Move the execution to a 3-line shell script (hashbang, source, and execute)?
[21:50:31] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[21:51:34] *** Joins: Lutine_ (~Lutin@lfbn-lyo-1-1349-50.w86-207.abo.wanadoo.fr)
[21:52:10] *** Quits: Lutin (~Lutin@user/lutin) (Ping timeout: 240 seconds)
[21:52:20] *** Lutine_ is now known as Lutin
[21:57:37] *** Quits: justsomeguy (~justsomeg@user/justsomeguy) (Quit: WeeChat 3.2)
[21:58:38] *** Quits: Lutin (~Lutin@lfbn-lyo-1-1349-50.w86-207.abo.wanadoo.fr) (Quit: Lutin)
[21:58:58] *** Joins: Lutin (~Lutin@user/lutin)
[21:59:48] *** Joins: tp43_ (~ndeem@2001:1970:501a:e201:7dd8:7bb5:b166:9697)
[21:59:52] <alzgh> is this channel logged somewhere?
[22:00:03] <twkm> no.
[22:00:08] <greycat> there are no public logs, only private ones
[22:00:10] *** Quits: manin (~X@185.242.190.95) (Ping timeout: 240 seconds)
[22:00:25] <alzgh> OK
[22:00:56] <pystardust> 5
[22:04:05] *** Joins: Betal (~Betal@user/betal)
[22:04:27] <emanuele6> michigan: it's your helper that uses doas
[22:05:13] <michigan> emanuele6: True that. I guess it should be using regular su instead?
[22:05:17] *** Joins: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz)
[22:05:46] <greycat> !su
[22:05:46] <greybot> su (switch user) opens a new interactive session with new privileges. Usually to run some commands as root. Don't use this to drop privileges in scripts; try setpriv instead, if you have it. See <http://jdebp.info/FGA/dont-abuse-su-for-dropping-privileges.html>
[22:05:57] *** Joins: Adoi (~Adoi@user/adoi)
[22:09:29] <emanuele6> greybot: setpriv is linux only
[22:09:34] <emanuele6> no?
[22:10:00] <michigan> greybot: silly goose i'm not that stupid :D
[22:10:02] <michigan> err
[22:10:10] <michigan> greycat
[22:10:14] <michigan> ah you wern't part of the previous convo
[22:12:59] *** erin_ is now known as erri
[22:12:59] <greycat> if your system doesn't have setpriv, then find something it *does* have which can take its place
[22:13:10] <michigan> these guys helped me set up the coolest OpenBSD startup scripts for Ruby On Rails ever constructed: https://github.com/basicfeatures/openbsd-rails/tree/main/etc/rc.d
[22:13:12] <greycat> if it has nothing, go build daemontools or runit or something
[22:14:19] <greycat> there's a list of alternatives on jdebp's page
[22:18:01] <michigan> greycat: I believe that's what openbsd's doas is for
[22:18:22] <greycat> let me pull up the man page...
[22:18:53] <greycat> Hmm, no, this looks more like a sudo replacement.
[22:19:04] <michigan> ah yes, that's what it is. my bad.
[22:19:47] *** Joins: speckz (~speckz@2600:1700:ce0:bf00:cd61:fd69:d1fb:a685)
[22:20:32] *** Quits: Maxattax (~max@50-195-160-193-static.hfc.comcastbusiness.net) (Quit: WeeChat 3.2)
[22:22:40] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 240 seconds)
[22:23:12] *** Joins: Crescendo (~Crescendo@user/crescendo)
[22:24:06] *** Quits: PinealGlandOptic (~PinealGla@37.115.210.35) (Quit: leaving)
[22:30:34] *** Joins: manin (~x@185.242.190.95)
[22:30:38] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[22:30:43] *** Joins: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net)
[22:32:40] <rendar> i have this function: `play() {\n omxplayer -r ... $1 }`  which of course returns the same exit code of omxplayer.. now i want that when omxplayer returns exit code 3, the function play will return 0, what is the best approach? checking `$?` ?
[22:33:00] *** Joins: Caesar-EW (~Caesar-EW@84.213.107.109)
[22:33:08] <greycat> what if it returns 0, 1, 2, 4, or something else?
[22:33:34] <rendar> then it must return those error codes
[22:33:38] <rendar> only 3->0
[22:33:54] <kurahaupo> case $? in 3) return 1;; *) return $? ; esac
[22:34:03] <greycat> play() { local rc; omxplayer ... "$1"; rc=$?; if ((rc == 3)); then return 0; else return "$rc"; fi; }
[22:34:17] <rendar> i see, thanks
[22:35:18] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Quit: Leaving...)
[22:35:21] *** Quits: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 248 seconds)
[22:35:46] <kurahaupo> also_ok(){ local i r$?; for i do ((i==r)) && return 0; done ; return $r; } ; … omxplayer etc || also_ok 3
[22:36:13] <kurahaupo> also_ok(){ local i r=$?; for i do ((i==r)) && return 0; done ; return $r; } ; … omxplayer etc || also_ok 3
[22:36:52] <rendar> well for now the greycat solution is the cleanest, but i also like case
[22:37:26] <kurahaupo> case doesn't require an extra variable because it doesn't (initially) affect $?
[22:38:58] *** Joins: Adois (~Adoi@user/adoi)
[22:41:45] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 248 seconds)
[22:45:02] *** Quits: aakashi2001 (~aakashi20@103.61.255.35) (Ping timeout: 245 seconds)
[22:47:15] *** Joins: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net)
[22:49:23] *** Quits: fuzzybear3965 (~fuzzybear@2a03:7380:2102:6c35:c9d2:f42a:d474:7162) (Quit: Client closed)
[22:50:50] *** Quits: rendar (~rendar@user/rendar) ()
[22:50:57] *** Joins: Maxattax (~max@50-195-160-193-static.hfc.comcastbusiness.net)
[22:53:10] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 240 seconds)
[22:53:22] *** Quits: nate1 (~nate@108-233-125-227.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 245 seconds)
[23:00:43] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Quit: Leaving)
[23:01:03] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[23:01:22] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[23:03:37] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[23:04:46] *** Joins: luvalon18 (~luva@178.239.167.169)
[23:05:40] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 240 seconds)
[23:06:17] *** Quits: luvalon1 (~luva@178.239.167.170) (Ping timeout: 248 seconds)
[23:06:17] *** luvalon18 is now known as luvalon1
[23:11:37] *** Quits: darkbit (~db@152.32.99.67) (Ping timeout: 248 seconds)
[23:11:46] *** Joins: luvalon12 (~luva@178.239.167.170)
[23:15:36] *** Quits: luvalon1 (~luva@178.239.167.169) (Ping timeout: 268 seconds)
[23:15:36] *** luvalon12 is now known as luvalon1
[23:20:20] *** Quits: Naib (~j@user/naib) (*.net *.split)
[23:20:20] *** Quits: koolazer (~koo@user/koolazer) (*.net *.split)
[23:20:20] *** Quits: synthmeat (~synthmeat@user/synthmeat) (*.net *.split)
[23:20:20] *** Quits: Dev0n (~Dev0n@user/dev0n) (*.net *.split)
[23:20:20] *** Quits: con3 (~con3@2604:a880:4:1d0::be:d000) (*.net *.split)
[23:20:20] *** Quits: trane (~trane@login.redpill-linpro.com) (*.net *.split)
[23:20:30] *** Joins: Naib (~j@user/naib)
[23:20:30] *** Joins: synthmeat (~synthmeat@user/synthmeat)
[23:20:30] *** Joins: Dev0n (~Dev0n@user/dev0n)
[23:20:30] *** Joins: con3 (~con3@2604:a880:4:1d0::be:d000)
[23:20:30] *** Joins: trane (~trane@login.redpill-linpro.com)
[23:20:33] *** Quits: con3 (~con3@2604:a880:4:1d0::be:d000) (Max SendQ exceeded)
[23:20:41] *** Joins: koolazer (~koo@user/koolazer)
[23:20:49] *** Joins: con3 (~con3@2604:a880:4:1d0::be:d000)
[23:20:58] *** Quits: AsenMx (~AsenMx@78.90.248.234) (Remote host closed the connection)
[23:21:48] *** Joins: audiobirb (~audio@2603-8081-1801-3bb5-8b06-6d83-bd34-d027.res6.spectrum.com)
[23:24:46] *** Quits: jsrnop1 (~mark@user/jsrnop) (Quit: The Lounge - https://thelounge.chat)
[23:24:53] *** Joins: AsenMx (~AsenMx@78.90.248.234)
[23:26:18] *** Quits: speckz (~speckz@2600:1700:ce0:bf00:cd61:fd69:d1fb:a685) (Quit: Textual IRC Client: www.textualapp.com)
[23:28:46] *** Joins: jsrnop1 (~mark@user/jsrnop)
[23:33:56] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[23:36:49] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[23:38:45] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[23:39:39] *** Joins: manin_ (~X@185.242.190.95)
[23:42:45] *** Joins: roadie (~user@2a02:8108:ec0:1427:c5af:e4b5:208e:fb24)
[23:47:35] *** Joins: kill (~killown@user/killown)
[23:47:40] *** Quits: killown (~killown@user/killown) (Ping timeout: 240 seconds)
[23:48:12] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.0.1)
[23:49:04] *** Joins: craigo (~craigo@180-150-39-229.b49627.bne.nbn.aussiebb.net)
[23:51:06] *** Quits: besnn (~besnn@user/besnn) (Remote host closed the connection)
[23:52:29] *** Quits: Adois (~Adoi@user/adoi) (Quit: Leaving)
[23:53:23] *** Joins: ferdna (~ferdna@user/ferdna)
[23:54:38] *** Joins: zro (~zro@user/zro)
[23:55:40] *** Quits: audiobirb (~audio@2603-8081-1801-3bb5-8b06-6d83-bd34-d027.res6.spectrum.com) (Ping timeout: 240 seconds)
[23:55:45] *** Quits: zro (~zro@user/zro) (Client Quit)
[23:56:05] *** Joins: zro (~zro@user/zro)
[23:58:34] *** Joins: audiobirb (~audio@2603-8081-1801-3bb5-b85b-ab08-b222-f64f.res6.spectrum.com)
