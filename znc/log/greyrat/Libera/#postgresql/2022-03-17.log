[00:00:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[00:01:32] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:350b:c577:12c5:d54b)
[00:01:54] <sobel> maret: work in batches that don't exceed your memory
[00:02:14] <concrete-houses> https://www.postgresql.org/docs/10/sql-alterdefaultprivileges.html  I am reading and am not sure..
[00:02:27] *** Quits: fcr (~fran@r167-60-44-194.dialup.adsl.anteldata.net.uy) (Ping timeout: 252 seconds)
[00:02:47] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[00:03:02] <sobel> concrete-houses: it seems like you did not read the description of the feature in the documentation you linked
[00:03:16] <maret> sobel yeah but in that cases I would still need to store data partialy in db or somewhere else
[00:03:39] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[00:03:50] <sobel> maret: it is common to grab a batch from a database, work on it, commit updates/inserts, then repeat
[00:04:15] <sobel> but it's better in my world to do everything in the database without yanking it into app memory if i can help it
[00:04:22] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzzâ€¦)
[00:05:49] <maret> yeah I think I am not use that enough just because I have more experience on application level than on database, so its easier for me
[00:06:18] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:350b:c577:12c5:d54b) (Ping timeout: 252 seconds)
[00:06:22] <concrete-houses> If the apps run as mainuser  is it a mistake to make admin inherit from mainuser? mainuser should own all db objcets in perfect world as is close to doing that
[00:06:47] <sobel> concrete-houses: to answer that depends on assumptions i don't have access to
[00:06:58] <sobel> concrete-houses: it's just code. it does what it's told.
[00:07:12] <sobel> concrete-houses: it, and we, have no idea what's "correct" for your design or your organization
[00:07:15] <concrete-houses> ok
[00:07:36] <sobel> so if you ask about how postgresql works, answers can be had
[00:07:48] <sobel> what should you do? heck if i know
[00:08:01] <concrete-houses> it would seem natural to create admin to inherit from mainuser...i wonder if that si landlmine is some way I cant predict
[00:08:25] *** Joins: fcr (~fran@r186-48-109-140.dialup.adsl.anteldata.net.uy)
[00:08:30] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[00:08:37] <sobel> what's natural about it?
[00:09:00] <sobel> nevermind, it's not applicable to me
[00:09:22] <concrete-houses> mainuser can access all the tables seq schema since they are created mainly by it
[00:09:26] <sobel> the landmines are documented. role inheritance is simple and you already linked to the docs.
[00:09:33] *** Quits: treefrob (~treefrob@pd9e2dc5a.dip0.t-ipconnect.de) (Remote host closed the connection)
[00:10:17] <sobel> concrete-houses: i further advise to work on real use cases, don't waste time on hypotheticals. you have a database (or can make on easily) and you should try all these things.
[00:11:22] <sobel> concrete-houses: the help you can get when you try something but fail is way better than what you can get when you have not tried anything and are just making up situations to ask about
[00:11:26] <mst> concrete-houses: object ownership should be restricted to the user making DDL changes, the user the app runs at only needs SELECT/UPDATE/INSERT/DELETE privileges
[00:12:14] <mst> concrete-houses: to start with, have one user that owns everything that you use to run CREATE/ALTER/DROP etc., one app user that only has DML privileges, don't bother with inheritance, you're just overcomplicating things to zero gain
[00:12:19] <sobel> mst has very practicale advice
[00:12:22] <sobel> -e
[00:13:01] <mst> concrete-houses: when you add a new thing, make sure your DDL includes re-running a GRANT using TO ALL IN SCHEMA to make sure it has privs to access them
[00:13:07] *** Joins: treefrob (~treefrob@pd9e2dc5a.dip0.t-ipconnect.de)
[00:13:27] <mst> concrete-houses: trying to get more clever than that at an early stage is masturbation, and generally people prefer if you don't do that in public
[00:13:31] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 256 seconds)
[00:14:32] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[00:15:13] <concrete-houses> hm
[00:16:10] <mst> also since the DDL users gets its privs via 'owner', and the DML user gets the DML privs set explicitly, inheritance is in fact completely unhelpful for that setup anyway
[00:16:11] <concrete-houses> when you say GRANT using TO ALL IN SCHEMA
[00:16:24] <mst> so continuing to bang your head against it is pointless at this stage
[00:16:46] <concrete-houses> ok
[00:17:02] <concrete-houses> the business has a support team that they let run scripts
[00:17:33] <concrete-houses> they dont want to let have admin but want random roles (usernames) to make objects and magically have everyone else be able to use them
[00:18:18] <concrete-houses> so I should just make two admin users and grant directly to them..... the pain there is then backups/restore to diff environment craps out
[00:18:32] <concrete-houses> saying hey these roles arent here
[00:18:48] <mst> for that, I would suggest creating a -third- user that uses a -separate- schema and letting them create stuff in there
[00:19:06] <mst> that way your support team can't accidentally DROP a core table at 4.55pm on a friday
[00:19:06] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[00:19:13] *** Joins: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr)
[00:19:38] <concrete-houses> oh but they run data cleanup scripts on prod main schema
[00:19:41] <concrete-houses> heh
[00:19:50] <mst> yes. that would mean them having DELETE privileges.
[00:19:54] <mst> not DROP.
[00:20:01] <concrete-houses> ah
[00:20:12] <Myon> that's harder to undo than DROP
[00:20:29] <mst> you're going to need backups either way
[00:20:48] <mst> but a table suddenly losing half its data because of a mistake is less likely to take down the entire application than a table disappearing entirely because of a mistake
[00:20:58] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[00:22:29] *** Quits: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[00:22:34] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[00:23:53] <concrete-houses> so alter default privileges     I should leave alone
[00:24:31] <concrete-houses> just create two role and grant them select update insert delete
[00:24:33] <mst> "this is systems. you are trying to be clever. stop." applies
[00:24:59] <mst> the stupider you can make your configuration the fewer chances you have to make subtle mistakes or confuse yourself while troubleshooting
[00:25:36] <concrete-houses> thank you for the help
[00:25:50] <concrete-houses> I feel a lot beter now
[00:26:03] <mst> learning to notice when I'm about to be clever and shout at myself until I stop has saved me a lot of pain over the years
[00:26:11] <concrete-houses> lol
[00:26:19] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[00:27:11] <mst> Brian Kernighan summed it up nicely: https://www.goodreads.com/quotes/273375-everyone-knows-that-debugging-is-twice-as-hard-as-writing
[00:28:32] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[00:29:55] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[00:30:32] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[00:33:12] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[00:35:27] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[00:39:23] *** Quits: trillp (~trillp@137.220.51.190) (Quit: WeeChat 3.3)
[00:39:37] <Myon> excellent quote
[00:41:32] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[00:41:39] *** Joins: hoppity (~hoppity@mobile-107-92-61-226.mycingular.net)
[00:41:39] *** Quits: hoppity (~hoppity@mobile-107-92-61-226.mycingular.net) (Changing host)
[00:41:39] *** Joins: hoppity (~hoppity@user/hoppity)
[00:43:35] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[00:44:41] <sobel> it sorta makes me want to learn one of the "hard" languages designed to prevent whole (all?) categories of implementation error
[00:45:23] <concrete-houses> the alter default privileges    does it leave the object creator having all prvs? and add ? or replace?
[00:45:51] <concrete-houses> I am creating two new roles and am so tempted to inherit from tshi existing one due to the backup to another environemtniasco
[00:46:52] <concrete-houses> whoever created the admin role did a alter default priv to itself after gfranting all tables n seq n schema
[00:47:40] <mst> I've already told you to stop overcomplicating things and I'm not going to help you throw my advice out the window and make your configuration worse.
[00:48:01] <concrete-houses> ok I wil ignore backup hazard and just create the 2 new role
[00:48:07] <concrete-houses> SIMPLE
[00:48:42] <mst> you may also want to start with a completely clean database rather than whatever stuff got previously created
[00:48:57] <mst> the idea is to have a configuration that is (a) as simple as possible (b) you understand completely
[00:48:58] <concrete-houses> I cant this is staging
[00:49:30] <concrete-houses> this project jamed in a db from another db type and the project guy wants his two outide consultant to come in and fix
[00:49:38] <concrete-houses> lol
[00:50:33] <mst> yay
[00:50:57] <concrete-houses> I do want to simplify
[00:52:54] *** Quits: rufito (~phil@186-79-3-19.baf.movistar.cl) (Remote host closed the connection)
[00:54:29] *** Quits: fab23 (fabian@2001:8a8:1005:1::3) (Quit: macOS is user friendly. It is just picky about who his friends are.)
[00:55:02] *** Joins: fab23 (fabian@2001:8a8:1005:1::3)
[00:55:07] *** Quits: JanC (~janc@user/janc) (Remote host closed the connection)
[00:55:47] *** Joins: Hex999 (~Hex999@86.126.67.157)
[00:58:12] <Hex999> hi
[00:59:32] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[01:00:14] *** Parts: Hex999 (~Hex999@86.126.67.157) ()
[01:01:04] *** Joins: cation21 (cation@user/cation)
[01:01:48] *** Quits: cation (cation@user/cation) (Ping timeout: 240 seconds)
[01:02:16] *** Quits: _xor (~xor@dsl-50-5-233-169.fuse.net) (Read error: Connection reset by peer)
[01:02:29] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 256 seconds)
[01:04:26] *** cation21 is now known as cation
[01:07:57] *** Joins: _xor (~xor@dsl-50-5-233-169.fuse.net)
[01:11:10] *** Joins: cation21 (cation@user/cation)
[01:11:32] *** Quits: cation (cation@user/cation) (Ping timeout: 240 seconds)
[01:14:13] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 240 seconds)
[01:14:29] *** cation21 is now known as cation
[01:14:32] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Read error: Connection reset by peer)
[01:16:35] <concrete-houses>  when you add a new thing, make sure your DDL includes re-running a GRANT using TO ALL IN SCHEMA to make sure it has privs to access them
[01:17:03] <concrete-houses> when I look at grant there is db tables schema seq functions
[01:17:16] <concrete-houses> that grant must include all of those?
[01:18:30] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[01:20:09] <concrete-houses> so like 5 grants
[01:22:02] *** Joins: JanC (~janc@user/janc)
[01:22:34] <concrete-houses> or when I grant all on schema   does that imply tables seq funct?
[01:22:45] <concrete-houses> everything in the schema
[01:22:54] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[01:24:49] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:2015:9361:6306:3ac4) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:28:37] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[01:30:02] *** Joins: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net)
[01:30:11] <johto> > There is also an option to grant privileges on all objects of the same type within one or more schemas. This functionality is currently supported only for tables, sequences, functions, and procedures.
[01:30:27] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Ping timeout: 252 seconds)
[01:30:58] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[01:32:42] <johto> you can't just do  ALL IN SCHEMA, you need to specify which type of object
[01:35:17] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Client Quit)
[01:35:45] *** Joins: mowcat (~mowcat@host86-134-139-152.range86-134.btcentralplus.com)
[01:36:23] *** Joins: mauz (~mauz@2a01:e0a:994:7ed0:d01b:e0dd:63d8:cab6)
[01:36:37] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[01:37:02] *** Joins: PeGaSuS_ (BlackHole@user/pegasus)
[01:38:24] *** Quits: PeGaSuS_ (BlackHole@user/pegasus) (Remote host closed the connection)
[01:40:58] *** Quits: magla (~gelignite@d5362120.access.ecotel.net) (Quit: Stay safe!)
[01:41:54] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 250 seconds)
[01:47:27] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[01:48:43] *** Quits: michalz (~michalz@185.246.204.55) (Remote host closed the connection)
[01:51:26] *** Quits: mowcat (~mowcat@host86-134-139-152.range86-134.btcentralplus.com) (Remote host closed the connection)
[01:51:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[01:52:25] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.4)
[01:55:02] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[01:59:07] <Myon> concrete-houses: do you ever actually try things before asking here?
[02:01:23] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4.1)
[02:06:33] <concrete-houses> I do but I fear messing up work db...
[02:07:41] <dive> concrete-houses: that's what test dbs are for
[02:08:45] <Myon> if you have fear, you did not understand enough, and should have even more reason to tinker with things
[02:09:02] *** Joins: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net)
[02:09:12] <Myon> so, play with and break things before asking here
[02:09:37] *** Joins: tozhu (~tozhu@218.89.253.208)
[02:11:21] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[02:11:49] *** Quits: Merixer (~Merixer@2001:470:deb8:a1::2) (Ping timeout: 240 seconds)
[02:13:12] <concrete-houses> I am starting I think to understand alter default privileges  so you are telling postgres that when the target role creates an object to grant perms to another role
[02:13:25] <concrete-houses> Is that right? and the creator keeps all privs as well
[02:13:59] <concrete-houses> creator meaning target role
[02:14:12] <concrete-houses> Maybe I do make this harder than it is
[02:15:26] *** Joins: Merixer (~Merixer@2001:470:deb8:a1::2)
[02:16:02] <concrete-houses> so I should not fear revoking privs from target role in the act of alteering default privs
[02:17:44] <concrete-houses> or does it stop the owener from having privs and gives instead to the other role...
[02:22:29] <concrete-houses> https://www.postgresql.org/docs/10/sql-alterdefaultprivileges.html can someone give me an example
[02:25:03] <dfg> im trying to build a postgres extension (https://github.com/Apsalar/ap_pgutils) in a docker image, but when running make it throws ap_pgutils.c:10:10: fatal error: postgres.h: No such file or directory even though I have installed postgresql-server-dev-14
[02:27:11] *** El_segundo is now known as hombre
[02:28:35] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[02:31:10] *** Quits: Auron (Auron956@user/auron) (Remote host closed the connection)
[02:32:56] <johto> dfg; looks like a broken makefile? it's assuming pg_config is in /usr/local/postgres64/bin/pg_config
[02:33:30] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[02:33:54] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 260 seconds)
[02:35:24] *** Quits: EvanCarroll (~ecarroll@198-0-91-126-static.hfc.comcastbusiness.net) (Ping timeout: 240 seconds)
[02:36:04] <dfg> ðŸ¤” any ideas what would fix that? this is my first venture into custom extensions and ive no idea whats wrong with that
[02:36:12] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[02:38:44] <johto> replace  PG_CONFIG = $(PG_HOME)/bin/pg_config  with  PG_CONFIG ?= pg_config  I think
[02:39:21] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[02:39:26] <johto> any particular reason you're nt using the password hashing stuff in pgcrypto?
[02:40:50] *** Quits: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net) (Ping timeout: 250 seconds)
[02:41:25] *** Quits: leighbb (~leighbb@user/leighbb) (Quit: Leaving)
[02:41:42] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[02:43:33] <dfg> pgcrypto is great but doesnt support argon, which is (as i understand) the current recommended password hashing algo
[02:43:36] *** Joins: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net)
[02:44:31] <dfg> i'm using argon in my app layer but id like to move it into postgres
[02:48:32] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[02:48:57] <ash_worksi> dfg: not that I'm refuting you, but why?
[02:49:17] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[02:49:34] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[02:51:56] *** Joins: EvanCarroll (~ecarroll@50.222.187.218)
[02:54:03] *** Quits: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net) (Ping timeout: 252 seconds)
[02:54:03] <dfg> ash_worksi: why do password hashing in postgres instead of the app layer? why does pgcrypto exist at all?
[02:54:57] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 240 seconds)
[02:55:04] <ash_worksi> dfg: let me clarify; what made _you_ decide to switch layers?
[02:57:05] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42)
[02:57:13] <dfg> ash_worksi: id like to have a plpg login function that will store password attempts when hashing fails without making several roundtrips to the db
[02:57:17] *** Joins: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net)
[02:58:26] <dfg> i have a working version of this https://github.com/DanielFGray/razzle-graphile/blob/develop/migrations/current/1100-login.sql but id like to use argon rather than crypt() from pgcrypto
[02:59:42] <ash_worksi> dfg: is your definition of a roundtrip sending commands from an application to your database, and then processing the result? Your intention is to move the latter part into a sql function for analytics?
[03:00:33] *** Joins: bmomjian (~bruce@momjian.us)
[03:00:45] *** Quits: bmomjian1 (~bruce@momjian.us) (Read error: Connection reset by peer)
[03:00:58] *** Quits: veegee (~veegee@ipagstaticip-469c2903-2b07-6dc3-3bc2-98748da5ca77.sdsl.bell.ca) (Quit: Textual IRC Client: www.textualapp.com)
[03:01:17] <dfg> yes, tho not for analytics
[03:01:32] *** Quits: maciek_ (~maciek@2600:1700:a412:1c00:b660:5ba1:679:3e44) (Ping timeout: 240 seconds)
[03:01:36] <ash_worksi> oh I see, based on the script you pasted
[03:02:03] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[03:02:35] <ash_worksi> looks like a good scenario for domain events to me; just my personal opinion though
[03:03:11] <ash_worksi> (which would be 2 trips, yeah -- one to read data and one to write new data)
[03:03:21] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[03:06:12] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[03:06:37] *** Quits: ur5us (~ur5us@2406:e002:6845:dc01:b921:6822:fa0e:e017) (Ping timeout: 240 seconds)
[03:10:15] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[03:11:09] *** Quits: Guest7375 (~vit@chello085216193138.chello.sk) (Quit: Konversation terminated!)
[03:11:27] *** Joins: vit (~vit@chello085216193138.chello.sk)
[03:11:40] <dfg> [for context i'm just a hobbyist and i build pet projects] i like moving as much business logic into the db as I can and having my backend app layer mostly just handle http routing/parsing and calling sql functions
[03:11:51] *** vit is now known as freeworld
[03:12:15] *** Quits: reprazent (~reprazent@178-118-195-230.access.telenet.be) (Ping timeout: 256 seconds)
[03:12:51] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[03:13:27] *** Joins: reprazent (~reprazent@178-118-195-230.access.telenet.be)
[03:13:34] *** Quits: sakasama (~sakasama@user/sakasama) (Remote host closed the connection)
[03:14:12] *** Parts: tozhu (~tozhu@218.89.253.208) ()
[03:15:16] *** Joins: maciek_ (~maciek@2600:1700:a412:1c00:f7da:3568:4d1a:706)
[03:16:43] <mst> dfg: 'bf' looks like a bcrypt variant which is more than good enough still
[03:17:26] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[03:17:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[03:18:03] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Quit: Konversation terminated!)
[03:18:21] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[03:18:36] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[03:20:05] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Client Quit)
[03:20:26] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[03:21:00] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 240 seconds)
[03:21:31] <dfg> yes bcrypt is "good" by many definitions, though im no security expert, argon is still objectively better by all metrics from my understanding
[03:21:47] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Client Quit)
[03:22:06] *** Joins: freeworld (~freeworld@chello085216193138.chello.sk)
[03:22:08] <dfg> https://security.stackexchange.com/questions/193351/in-2018-what-is-the-recommended-hash-to-store-passwords-bcrypt-scrypt-argon2
[03:22:25] <leont> It also depends much on the parameters. argon2 is much better at high parameters, but a lot of websites don't use those.
[03:22:35] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[03:22:47] <dfg> honestly it would be great if pg would include argon in pgcrypto
[03:23:44] <dfg> mst: bf is a blowfish variant iinm
[03:24:05] <mst> dfg: so is bcrypt
[03:24:10] <dfg> oh, TIL
[03:24:15] <mst> that's what the 'b' is for :D
[03:24:57] <mst> I don't disagree that argon2 is better. but blowfish is almost always still good enough.
[03:25:22] <Disconsented> To be fair crypto is tempered in some measure of paranoia
[03:26:32] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[03:32:00] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[03:32:23] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[03:34:57] *** Quits: n0fun (~jack@mue-88-130-48-133.dsl.tropolys.de) (Ping timeout: 240 seconds)
[03:37:16] *** Joins: sakasama (~sakasama@user/sakasama)
[03:37:30] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[03:37:38] *** Quits: Affliction (affliction@idlerpg/player/affliction) (Quit: Read error: Connection reset by beer)
[03:39:34] *** Joins: Affliction (affliction@idlerpg/player/affliction)
[03:40:27] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[03:48:17] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[03:48:29] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:49:49] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[03:56:27] *** Quits: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net) (Ping timeout: 256 seconds)
[03:57:05] *** Quits: mauz (~mauz@2a01:e0a:994:7ed0:d01b:e0dd:63d8:cab6) (Remote host closed the connection)
[03:57:51] *** Quits: mike-kfed (~htd@095129203062.t4.akis.net) (Ping timeout: 252 seconds)
[03:58:43] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[03:58:46] *** Joins: zeden (~zeden@user/zeden)
[03:58:52] *** Joins: mike-kfed (~htd@095129203062.t4.akis.net)
[03:59:16] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[04:00:03] *** Joins: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net)
[04:03:32] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[04:04:23] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[04:08:30] *** Joins: trillp (~trillp@137.220.51.190)
[04:09:09] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[04:09:33] *** Joins: Junxter (~Junxter@222.94.37.130)
[04:10:37] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[04:10:45] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[04:15:14] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[04:15:49] *** Quits: freeworld (~freeworld@chello085216193138.chello.sk) (Ping timeout: 240 seconds)
[04:16:37] *** Quits: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net) (Ping timeout: 256 seconds)
[04:20:15] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[04:21:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[04:22:03] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 252 seconds)
[04:22:24] *** Joins: ur5us (~ur5us@2406:e002:6845:dc01:b921:6822:fa0e:e017)
[04:22:39] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[04:27:00] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 250 seconds)
[04:27:33] *** Joins: onosendi (~onosendi@user/onosendi)
[04:28:45] *** Joins: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[04:32:21] *** Quits: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net) (Quit: WeeChat 2.8)
[04:32:53] *** Joins: CodeMouse92 (~CodeMouse@user/codemouse92)
[04:36:38] *** Joins: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net)
[04:37:39] <onosendi> How can I do something like: https://dpaste.org/FNAG - groups by `created_at` and adds all of the rows with the same `created_at`?
[04:38:20] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[04:40:03] <dfg> onosendi: with created_at_list as (select unnest(created_ats) as created_at from your_table) select created_at, count(1) from created_at_list group by created_at order by count desc
[04:40:25] *** Joins: austb (~austb@94.140.8.201)
[04:40:36] <dfg> maybe theres a simpler solution but thats the only thing i could come up with
[04:40:52] *** Quits: austb_ (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 250 seconds)
[04:41:41] <dfg> oh wait that was my solution for an array column.. it would be much simpler with a scalar value.. gimme a min
[04:43:01] <dfg> wait a minute... this is mysql >.>
[04:44:09] <onosendi> mysql is fine
[04:45:50] <dfg> this is #postgresql
[04:46:29] <onosendi> I know :)
[04:48:18] <dfg> onosendi: https://www.db-fiddle.com/f/gx72zpqK1tmn74N9WTJWBK/0
[04:48:35] *** Quits: RedShift (~RedShift@office.e-crane.com) (Ping timeout: 256 seconds)
[04:48:43] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Remote host closed the connection)
[04:48:50] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[04:49:15] <onosendi> Thanks
[04:49:18] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[04:50:06] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 252 seconds)
[04:50:35] <dfg> mysql doesnt have an array type so array_agg wont work but you can either use group_concat() or json_arrayagg()
[04:53:26] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 250 seconds)
[04:55:11] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[04:58:11] <onosendi> dfg: thanks man, much appreciated.
[04:59:20] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[05:02:14] *** Joins: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net)
[05:06:32] *** Quits: austb (~austb@94.140.8.201) (Ping timeout: 240 seconds)
[05:07:37] *** Quits: sakasama (~sakasama@user/sakasama) (Remote host closed the connection)
[05:08:59] *** Quits: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net) (Ping timeout: 256 seconds)
[05:13:12] *** Quits: EvanCarroll (~ecarroll@50.222.187.218) (Ping timeout: 252 seconds)
[05:13:13] *** Joins: austb (~austb@94.140.8.198)
[05:13:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[05:14:52] *** Joins: EvanCarroll (~ecarroll@50.222.187.218)
[05:18:36] *** Quits: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Ping timeout: 240 seconds)
[05:18:39] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[05:20:16] *** Joins: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec)
[05:27:41] *** Quits: MrZeus_ (~MrZeus@81.92.206.10) (Ping timeout: 256 seconds)
[05:30:18] *** Joins: maciek__ (~maciek@99-145-198-91.lightspeed.sntcca.sbcglobal.net)
[05:31:37] *** Quits: antlarr (~quassel@180.red-2-137-49.dynamicip.rima-tde.net) (Remote host closed the connection)
[05:32:36] *** Quits: maciek_ (~maciek@2600:1700:a412:1c00:f7da:3568:4d1a:706) (Ping timeout: 240 seconds)
[05:32:49] *** Joins: antlarr (~quassel@180.red-2-137-49.dynamicip.rima-tde.net)
[05:35:02] *** Joins: bindu_ (~bindu@user/bindu)
[05:35:15] *** Quits: bindu (~bindu@user/bindu) (Ping timeout: 240 seconds)
[05:35:32] *** Quits: f3f3lix (~weechat@55d4238c.access.ecotel.net) (Ping timeout: 240 seconds)
[05:35:37] *** Quits: EvanCarroll (~ecarroll@50.222.187.218) (Ping timeout: 240 seconds)
[05:36:48] *** bindu_ is now known as bindu
[05:36:56] *** Joins: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net)
[05:37:35] *** Joins: f3f3lix (~weechat@55d425d4.access.ecotel.net)
[05:39:40] *** Quits: k_sze (~k_sze@mail2.kalunite.net) (Quit: ZNC 1.8.2 - https://znc.in)
[05:40:38] *** Joins: k_sze (~k_sze@mail2.kalunite.net)
[05:41:17] *** Quits: Su-Shee (~Susanne@76-125-142-46.pool.kielnet.net) (Ping timeout: 256 seconds)
[05:43:09] *** Joins: Su-Shee (~Susanne@152-111-142-46.pool.kielnet.net)
[05:44:55] *** Quits: k_sze (~k_sze@mail2.kalunite.net) (Client Quit)
[05:48:13] *** Joins: k_sze (~k_sze@mail2.kalunite.net)
[05:49:43] *** xocolatl_ is now known as xocolatl
[05:56:09] *** Joins: tozhu (~tozhu@171.92.141.77)
[05:56:26] *** Joins: dsrt^ (~dsrt@65.240.140.18)
[05:57:09] *** Quits: onosendi (~onosendi@user/onosendi) (Quit: WeeChat 3.4)
[05:59:12] *** Quits: tozhu (~tozhu@171.92.141.77) (Client Quit)
[05:59:39] *** Joins: tozhu (~tozhu@171.92.141.77)
[06:03:38] *** Quits: austb (~austb@94.140.8.198) (Ping timeout: 250 seconds)
[06:04:02] *** Quits: ephemer0l (~ephemer0l@organizedmagnetism.com) (Ping timeout: 240 seconds)
[06:05:38] *** Quits: tozhu (~tozhu@171.92.141.77) (Quit: tozhu)
[06:05:44] *** Joins: EvanCarroll (~ecarroll@172.58.103.229)
[06:06:05] *** Quits: CodeMouse92 (~CodeMouse@user/codemouse92) (Quit: Oh freddled gruntbuggly | Thy micturations are to me | As plurdled gabbleblotchits | On a lurgid bee)
[06:12:25] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[06:14:33] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:b53a:677:7acb:b88b) (Quit: Textual IRC Client: www.textualapp.com)
[06:17:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[06:17:36] *** Quits: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br) (Read error: Connection reset by peer)
[06:27:58] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:71a7:b07d:2c34:3ac0)
[06:29:58] *** Quits: v3ga (~v3ga@2603-6080-5204-3b35-0000-0000-0000-18ad.res6.spectrum.com) (Remote host closed the connection)
[06:33:48] *** Quits: maciek__ (~maciek@99-145-198-91.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 240 seconds)
[06:38:04] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[06:38:26] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[06:41:21] *** Quits: op2 (~op2@user/op2) (Ping timeout: 256 seconds)
[06:44:29] *** Joins: Guest3302 (~arc@2601:586:8100:bc30:f0b5:6a0f:f4ae:e63b)
[06:49:58] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[06:50:00] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 250 seconds)
[06:54:18] *** Quits: intray (~intray@user/intray) (Remote host closed the connection)
[06:54:43] *** Joins: intray (~intray@user/intray)
[06:56:26] *** Joins: fstd_ (~fstd@xdsl-78-35-89-30.nc.de)
[06:59:54] *** Quits: fstd (~fstd@xdsl-78-35-88-2.nc.de) (Ping timeout: 260 seconds)
[07:03:07] *** Quits: trillp (~trillp@137.220.51.190) (Quit: WeeChat 3.3)
[07:09:44] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:18:30] *** Joins: austb (~austb@94.140.8.199)
[07:21:14] *** Joins: adonis (~adonis@pool-100-8-169-167.nwrknj.fios.verizon.net)
[07:21:50] *** Quits: adonis (~adonis@pool-100-8-169-167.nwrknj.fios.verizon.net) (Client Quit)
[07:22:53] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[07:27:12] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4.1)
[07:30:28] *** Joins: tozhu (~tozhu@218.89.253.208)
[07:40:32] *** Quits: austb (~austb@94.140.8.199) (Ping timeout: 240 seconds)
[07:41:35] *** Joins: v3ga (~v3ga@2603-6080-5204-3b35-0000-0000-0000-18ad.res6.spectrum.com)
[07:46:55] *** Joins: austb (~austb@94.140.8.197)
[07:50:09] *** Quits: tozhu (~tozhu@218.89.253.208) (Quit: tozhu)
[07:51:58] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 250 seconds)
[07:59:48] *** Joins: k8yun (~k8yun@user/k8yun)
[08:04:06] *** Quits: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net) (Ping timeout: 250 seconds)
[08:04:30] *** Joins: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net)
[08:07:08] *** Quits: ur5us (~ur5us@2406:e002:6845:dc01:b921:6822:fa0e:e017) (Ping timeout: 250 seconds)
[08:11:02] *** Quits: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec) (Ping timeout: 250 seconds)
[08:14:11] *** Joins: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec)
[08:15:56] *** Joins: ephemer0l (~ephemer0l@organizedmagnetism.com)
[08:17:24] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 240 seconds)
[08:21:33] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[08:22:19] *** Joins: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29)
[08:25:46] *** Quits: k8yun (~k8yun@user/k8yun) (Ping timeout: 250 seconds)
[08:25:47] *** Quits: EvanCarroll (~ecarroll@172.58.103.229) (Read error: Connection reset by peer)
[08:27:16] *** Quits: ihaveamac (~ihaveamac@ihaveahax.net) (Quit: fail)
[08:27:21] *** Quits: austb (~austb@94.140.8.197) (Ping timeout: 252 seconds)
[08:27:31] <maret> is it possible to partition large postgres table using varchar column which represents a hash? I have a large table in which I do joins and select with string column in where clause  and select are too slow. Like in this case  index only scan took 7s https://explain.depesz.com/s/taa
[08:27:54] <maret> ofc the query it self can be rewritten but the sheere amount of data (hundreds of millions of rows) is an issue
[08:29:31] *** Joins: ihaveamac (~ihaveamac@ihaveahax.net)
[08:30:24] *** Joins: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[08:31:03] *** Quits: sreve_ (~quassel@p549d70f6.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[08:31:15] *** Joins: sreve (~quassel@p4ff44633.dip0.t-ipconnect.de)
[08:31:50] *** Quits: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net) (Ping timeout: 250 seconds)
[08:35:18] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[08:37:39] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[08:38:05] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[08:38:15] *** Joins: freeworld (~freeworld@chello085216193138.chello.sk)
[08:39:57] *** Quits: Guest3302 (~arc@2601:586:8100:bc30:f0b5:6a0f:f4ae:e63b) (Quit: Leaving)
[08:42:25] *** Joins: mattil (~mattil@helsinki.portalify.com)
[08:52:20] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[08:52:45] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[08:52:48] *** Quits: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net) (Quit: Leaving)
[08:53:25] *** Joins: veegee (~veegee@ipagstaticip-469c2903-2b07-6dc3-3bc2-98748da5ca77.sdsl.bell.ca)
[08:53:57] *** Quits: pglife_bot (~pglife@momjian.us) (Ping timeout: 256 seconds)
[08:55:23] *** Quits: bmomjian (~bruce@momjian.us) (Ping timeout: 252 seconds)
[09:06:15] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzzâ€¦)
[09:09:47] *** Joins: bmomjian (~bruce@momjian.us)
[09:10:15] *** Quits: pjs (~pjs@user/pjs) (Ping timeout: 252 seconds)
[09:10:33] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[09:12:28] *** Joins: pglife_bot (~pglife@momjian.us)
[09:15:00] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[09:19:13] *** Joins: shiranaihito (~textual@219.85.3.209)
[09:19:26] *** Quits: shiranaihito (~textual@219.85.3.209) (Read error: Connection reset by peer)
[09:19:51] *** Joins: shiranaihito (~textual@219.85.3.209)
[09:21:46] *** Joins: tozhu (~tozhu@218.89.253.208)
[09:22:38] *** Quits: janos (~janos@fedora/janos) (Ping timeout: 256 seconds)
[09:26:23] *** Joins: mattil_ (~mattil@87-92-87-151.bb.dnainternet.fi)
[09:26:40] *** Quits: mattil_ (~mattil@87-92-87-151.bb.dnainternet.fi) (Read error: Connection reset by peer)
[09:27:04] *** Joins: mattil_ (~mattil@87-92-87-151.bb.dnainternet.fi)
[09:28:32] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[09:29:03] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[09:29:25] *** Quits: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz) (Quit: Good bye...)
[09:29:37] *** Joins: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz)
[09:31:42] *** Quits: mattil_ (~mattil@87-92-87-151.bb.dnainternet.fi) (Ping timeout: 252 seconds)
[09:38:13] *** Joins: janos (~janos@fedora/janos)
[09:42:47] *** Joins: darutoko (~darutoko@90.188.76.54)
[09:48:34] *** Quits: bird8 (~bird@136-25-143-83.cab.webpass.net) (Quit: bird8)
[09:49:57] *** Joins: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi)
[09:49:59] *** Joins: bird8 (~bird@136-25-143-83.cab.webpass.net)
[09:54:44] *** Joins: ba|ch (~user@p200300f3a7089c1768b8c6155ee0df49.dip0.t-ipconnect.de)
[09:54:54] *** Quits: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi) (Remote host closed the connection)
[09:56:48] *** Quits: tozhu (~tozhu@218.89.253.208) (Quit: tozhu)
[09:59:33] *** Joins: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi)
[10:01:02] *** Quits: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz) (Ping timeout: 240 seconds)
[10:02:33] *** Joins: tozhu (~tozhu@218.89.253.208)
[10:03:10] *** Quits: shiranaihito (~textual@219.85.3.209) (Quit: My MacBook Air has gone to sleep. ZZZzzzâ€¦)
[10:03:28] *** Joins: shiranaihito (~textual@219.85.3.209)
[10:04:54] *** Quits: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi) (Remote host closed the connection)
[10:05:03] *** Joins: mjf (~mjf@217.11.224.233)
[10:05:47] *** Joins: k8yun (~k8yun@user/k8yun)
[10:07:36] *** Quits: shiranaihito (~textual@219.85.3.209) (Ping timeout: 250 seconds)
[10:08:36] *** Joins: manti7 (~manti7@176.10.104.94)
[10:13:45] *** Joins: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi)
[10:16:09] *** Quits: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi) (Remote host closed the connection)
[10:19:35] *** Joins: shiranaihito (~textual@2001-b011-4011-33f5-045d-63ed-e25e-710a.dynamic-ip6.hinet.net)
[10:19:59] *** Joins: work (uid44037@id-44037.tinside.irccloud.com)
[10:21:18] *** Joins: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi)
[10:22:14] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[10:24:02] *** Quits: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi) (Remote host closed the connection)
[10:25:00] <work> Hello. In Postgres, Is it possible or are there option, to use it like a "git time machine"? Example lets suppose I created some tables and added some record at 01:00 AM, the at 01:30AM, I added two tables with some records... then at 01:45AM, I decided to go back at how it was at 01:25AM, (Which is how it was at 01:00AM). Is this possible?
[10:27:40] *** Quits: epony (epony@user/epony) (Quit: QUIT)
[10:30:07] *** Joins: gleu (~guillaume@pop.92-184-102-10.mobile.abo.orange.fr)
[10:31:35] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[10:31:47] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[10:36:46] *** Joins: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi)
[10:37:41] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[10:37:56] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[10:38:11] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[10:38:18] *** Joins: the_lanetly_052 (~the_lanet@194.135.167.153)
[10:39:29] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Remote host closed the connection)
[10:41:23] *** Quits: mattil (~mattil@d47m3wssnl3s4mx4d-k-4.rev.dnainternet.fi) (Ping timeout: 256 seconds)
[10:45:29] *** Joins: Atque (~Atque@user/atque)
[10:51:15] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[10:51:49] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Quit: meow)
[10:51:57] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[10:54:32] *** Quits: the_lanetly_052 (~the_lanet@194.135.167.153) (Ping timeout: 240 seconds)
[11:07:47] *** Joins: the_lanetly_052 (~the_lanet@194.135.169.153)
[11:08:23] *** Joins: ferr_ (~ferr@185.65.50.234)
[11:09:02] *** Quits: fercell (~ferr@185.65.50.39) (Ping timeout: 240 seconds)
[11:13:08] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[11:14:37] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 240 seconds)
[11:15:33] *** Joins: palasso (~palasso@user/palasso)
[11:15:57] *** Quits: foul_owl (~kerry@23.82.193.89) (Ping timeout: 240 seconds)
[11:23:00] *** Joins: ur5us (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d)
[11:23:03] *** Joins: michalz (~michalz@185.246.204.33)
[11:25:14] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[11:29:56] *** Joins: cerill (~cerill@h-155-4-198-153.A785.priv.bahnhof.se)
[11:31:20] *** Joins: foul_owl (~kerry@23.82.193.89)
[11:32:53] *** Quits: johnau (~johnau@202.172.127.116) (Read error: Connection reset by peer)
[11:33:38] *** Quits: ur5us (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d) (Quit: Leaving)
[11:35:06] *** Joins: ur5us (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d)
[11:35:25] *** Joins: shka (~herr@109.231.3.55)
[11:36:55] *** Joins: aLeSD (~aLeSD@91.126.33.194)
[11:37:28] *** Joins: AlexeyX (~AlexeyX@176.53.207.26)
[11:37:33] <AlexeyX> Hi there
[11:37:51] <AlexeyX> 022-03-16 14:33:04 GMT  1714 @ from  [vxid: txid:0] []LOG:  received fast shutdown request
[11:37:51] <AlexeyX> 2022-03-16 14:33:04 GMT  1714 @ from  [vxid: txid:0] []LOG:  aborting any active transactions
[11:37:51] <AlexeyX> 2022-03-16 14:33:04 GMT pgAdmin III - ?????????????? 18797 postgres@set from 10.124.0.249 [vxid:90/0 txid:0] [idle]FATAL:  terminating connection due to administrator command
[11:38:06] <AlexeyX> What does it mean?
[11:38:46] <AlexeyX> Is it postgressql send command shutdown? Or 10.124.0.249 send than command?
[11:44:43] *** Joins: epony (epony@user/epony)
[11:45:04] *** Joins: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de)
[11:45:59] <buu> Are you asking who sent the shutdown command?
[11:47:09] <nd__> Aloha. I seem to get `LOG:  could not stat file "base/pgsql_tmp/pgsql_tmp79.0.sharedfileset/i3of16.p3.0": Permission denied` when I enable the (experimental) VirtioFS File Sharing on Docker for Mac â€“ has anyone seen this? Do I need to mount another volume to the tmp path?
[11:47:40] *** Joins: autra (~augustin@2a01:e0a:1f:e0d0:d250:99ff:fea7:b00f)
[11:48:48] *** Joins: op2 (~op2@user/op2)
[11:53:41] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:350b:c577:12c5:d54b)
[11:54:59] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[11:58:55] <AlexeyX> buu, yes
[12:02:12] *** Quits: fcr (~fran@r186-48-109-140.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[12:02:15] <buu> AlexeyX: I don't think what you pasted includes that information
[12:07:11] *** Quits: mjf (~mjf@217.11.224.233) (Ping timeout: 256 seconds)
[12:07:12] *** Quits: aLeSD (~aLeSD@91.126.33.194) (Ping timeout: 250 seconds)
[12:07:40] *** Joins: mjf (~mjf@2001:1528:1:fffd:2136:3bf0:2a7b:678d)
[12:09:48] *** Joins: aLeSD (~aLeSD@91.126.33.194)
[12:11:40] *** Joins: fcr (~fran@r186-48-143-119.dialup.adsl.anteldata.net.uy)
[12:21:02] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[12:23:15] *** Joins: Ergo^ (~ergo@91.238.59.144)
[12:26:30] *** Joins: otisolsen70 (~otisolsen@80.80.4.2)
[12:27:06] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[12:27:35] *** Quits: freeworld (~freeworld@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[12:28:31] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[12:31:41] <depesz> ??time
[12:31:41] <pg_docbot> http://cran.r-project.org/web/packages/TSPostgreSQL/ :: http://www.hagander.net/talks/tardis_orm.pdf
[12:31:41] <pg_docbot> https://www.youtube.com/watch?v=-5wpm-gesOY :: https://grisha.org/blog/2015/09/23/storing-time-series-in-postgresql-efficiently/
[12:31:41] <pg_docbot> https://www.postgresql.org/docs/current/static/functions-datetime.html :: https://www.postgresql.org/docs/current/static/datetime-keywords.html
[12:31:41] <pg_docbot> https://www.postgresql.org/docs/current/static/functions-info.html :: https://www.postgresql.org/docs/current/static/contrib-spi.html#AEN153750
[12:32:00] <depesz> work: it's technically possible but requires extensions, and setup.
[12:32:46] *** Quits: Reiner_Unsinn (~quassel@p5dd47daa.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[12:33:01] <depesz> AlexeyX: someone/something issued command to stop pg.
[12:33:16] <depesz> who/where/how - cant' tell.
[12:33:55] <AlexeyX> but it's not 10.124.0.249 ?
[12:39:53] *** Joins: mav`rik (~unknown@ec2-54-171-126-99.eu-west-1.compute.amazonaws.com)
[12:41:00] *** Quits: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de) (Ping timeout: 250 seconds)
[12:46:02] *** Quits: ur5us (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d) (Ping timeout: 240 seconds)
[12:46:03] *** Quits: mjf (~mjf@2001:1528:1:fffd:2136:3bf0:2a7b:678d) (Ping timeout: 256 seconds)
[12:46:11] *** Joins: mjf (~mjf@2001:1528:1:fffd:2136:3bf0:2a7b:678d)
[12:47:18] <ne2k> depesz, could you conceivably use an actual filesystem snapshot-type approach, if you could lock the filesystem into a consistent state to take the snapshot? and then spin the snapshot up offsite if you need to access it? I'm thinking maybe ZFS or LVM snapshots or something like that
[12:50:33] <ne2k> sounds like it would probably be a nightmare and that something purpose-built would be moar bettere
[12:51:34] *** Quits: led_belly (~led_belly@159.48.53.215) (Read error: Connection reset by peer)
[12:57:19] *** Joins: mauz (~mauz@2a01:e0a:994:7ed0:a81f:2b83:4e1e:1d38)
[13:01:37] *** Joins: led_belly (~led_belly@159.48.53.216)
[13:02:39] <depesz> ne2k: sure you can.
[13:02:56] <depesz> AlexeyX: is the server on this ip?
[13:03:01] <depesz> AlexeyX: request to stop pg can't be remove.
[13:03:03] <depesz> remote
[13:03:03] *** Joins: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de)
[13:03:12] <depesz> it has to be from the server the server is on.
[13:03:40] <depesz> if you are regerring to the message about "FATAL:  terminating connection due to administrator command" - this was just some random db connection that got killed because of the shutdown
[13:04:30] *** Joins: freeworld (~freeworld@chello085216193138.chello.sk)
[13:04:54] <ksynwa> Can someone help me with this update query? I am trying to update the table issue to populate the column subupdatedat wherever this value is null in the table. I want to get the value from another table called issuetimelineevent if needed. This is the query I am using but I am a bit confused about how FROM works in UPDATE: https://dpaste.org/YaWO/raw
[13:05:25] <ksynwa> When I run this, 0 rows are updated though there are rows where subupdatedat is null.
[13:05:32] <ksynwa> I guess my WHERE clause in not good.
[13:05:55] *** Quits: mauz (~mauz@2a01:e0a:994:7ed0:a81f:2b83:4e1e:1d38) (Quit: Leaving...)
[13:09:02] *** Quits: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de) (Ping timeout: 240 seconds)
[13:09:31] <depesz> ksynwa: looks ok-ish to me.
[13:10:04] *** Joins: vladoski (~vladoski@2001:b07:add:d406:df6c:d4e5:d817:538e)
[13:10:15] <depesz> ksynwa: rewrite it to be select, and not update, one that shows what's in t.latest, i.subupdatedat, i.updatedat, and see what could be wrong.
[13:10:24] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[13:10:27] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42)
[13:12:55] <ksynwa> depesz: Do I have to do a JOIN when writing the query as SELECT?
[13:13:26] *** Quits: held (~heldchen@user/held) ()
[13:13:38] *** Joins: dionysus69 (~Thunderbi@94-43-205-210.dsl.utg.ge)
[13:15:11] *** Joins: held (~heldchen@user/held)
[13:15:32] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 240 seconds)
[13:16:10] <ksynwa> When I do INNERT JOIN I get 0 rows. I have to do a LEFT JOIN here to get the rows. It's most likely because of that.
[13:17:58] *** Joins: andreypopp_ (uid22726@id-22726.ilkley.irccloud.com)
[13:18:14] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[13:18:22] *** Quits: spicylobster (~spicylobs@014198214166.ctinets.com) (Quit: Leaving)
[13:19:06] <andreypopp_> hi, is it possible for fdw implementation to validate the table's DDL somehow? I see validator function only has access to the options and OID which represents the type of the entity options are for.
[13:21:08] <depesz> ksynwa: looks like you don't have rows that match join condition.
[13:21:19] <ksynwa> yeah. no need to use FROM i suppose.
[13:21:25] <ksynwa> thank you depesz
[13:21:54] <mjf> Hello. Is it possible to signal running vacuumdb(1) so that is correctly finish what is it's current task and then exits? There is no information on what signals it handles and how in the manual pages at all. Thank you.
[13:22:02] <Myon> .oO(inert join, is that a chemical thing?)
[13:22:44] *** Joins: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be)
[13:22:46] <Myon> mjf: vacuum is safe to interrupt at any time
[13:23:26] <Myon> there is no "exit after next table" signal
[13:23:45] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[13:25:39] *** Joins: n0fun (~jack@i577BC0E0.versanet.de)
[13:27:28] <mjf> Myon: last time I did it (via ^C, SIGINT) I ended with huge system catalogue corruptions and had to do PiTR to recover from completely broken cluster (lost almost 1 day worth of data, the corruption ended in WAL archives so the only way was PiTR a little before the ^C-press...) Have you heard of something similar before? ;) The vacuumdb(1) was running full (freeze) if I remember correctly...
[13:29:47] *** Quits: work (uid44037@id-44037.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[13:29:57] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[13:30:01] <AlexeyX> depesz, no, it is a client with pgadmin
[13:30:07] <mjf> Myon: Well, thanks. I think I rather let it go but it seems it will run for weeks or so... :)
[13:31:42] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[13:33:48] <mjf> Myon: And, to be honest, there definitely should be a way to tell vacuumdb(1) to finish cleanly (at least for SIGINT, SIGHUP and SIGTERM).
[13:35:05] *** Quits: cerill (~cerill@h-155-4-198-153.A785.priv.bahnhof.se) (Quit: Client closed)
[13:35:28] <Myon> that sounds like an independent problem
[13:35:55] <Myon> did you even touch the "fsync" setting?
[13:37:56] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[13:38:18] <depesz> mjf: i seriously doubt vacuum behaves that way normally.
[13:38:35] <depesz> mjf: i cancel/terminate stuff all the time, and never had "huge system catalogue corruptions".
[13:41:10] *** Joins: ekathva (~ekathva@93-90-58-246.welcomnet.fi)
[13:45:57] <mjf> depesz: I also had it done several times before this occassion. But in this case there was such a strong correlation between the SIGINT and the corruption that I started to think about how are the signals handled.
[13:46:43] <ufk> i drop a partition with regular drop table ?
[13:47:12] <depesz> ufk: tias, but i think so.
[13:47:40] <ufk> thanks
[13:47:43] *** Joins: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de)
[13:48:22] <mjf> Myon: Sadly, yes. I reverted it back to default just after the PiTR. I realized there was fsync settings changed when I was searching for the root cause. Reverted it immediately as soon as I found it. It must had been some residuum from some initial performance testing some 2 years ago.
[13:49:02] <Myon> mjf: ok that's the problem. Never touch that, and dump-restore any cluster that was using it
[13:49:42] <mjf> Myon: Could you please elaborate more on the idea with fsync? Can you explain it more further?
[13:49:59] <mjf> Myon: Thank you.
[13:50:25] <depesz> you had fsync disabled?
[13:50:53] <depesz> and you suspect that vacuum could be a problem?
[13:51:01] <Myon> you enabled the "I don't care about my data" mode
[13:51:04] <Myon> don't do that
[13:51:28] <depesz> ++
[13:52:24] <mjf> :)
[13:52:57] *** Quits: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de) (Ping timeout: 252 seconds)
[13:53:16] <mjf> Myon: no, but the setting was change. I can look it up from backups of configuration and will post later...
[13:54:48] *** Quits: intray (~intray@user/intray) (Remote host closed the connection)
[13:54:54] *** Joins: dege (~dege@user/dege)
[13:55:12] *** Joins: intray (~intray@user/intray)
[14:11:40] <mjf> Myon: wal_sync_method was set to open_datasync value (should had been set to fdatasync on Linux which is also the default).
[14:14:04] <mjf> Myon: Provided this information, does it explain the disaster? I also remember the vacuumdb(1) working on pg_* tables at the time of the SIGINT...
[14:14:29] <Myon> mjf: you said you touched "fsync", that explains things
[14:15:38] <mjf> Myon: Do you have some suggestion what to read to gain deeper understanding of the whole fsync topic?
[14:16:10] <Myon> the PostgreSQL docs?
[14:16:22] <Berge> mjf: https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-FSYNC
[14:19:01] <Myon> xocolatl: I'm out of ideas in https://github.com/xocolatl/periods/issues/26
[14:19:20] <mjf> Myon, Berge: But I didn't touched the fsync option at all. I touched the wal_sync_method... (probably on guidance of some performance measuring tool such as pg_test_fsync(1)).
[14:22:52] *** Joins: ekathva_ (~ekathva@mobile-access-5d6abb-218.dhcp.inet.fi)
[14:24:37] *** Quits: brethil (~brethil@user/brethil) (Ping timeout: 240 seconds)
[14:25:00] *** Quits: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be) (Ping timeout: 240 seconds)
[14:25:17] *** Quits: ekathva (~ekathva@93-90-58-246.welcomnet.fi) (Ping timeout: 240 seconds)
[14:25:39] *** Joins: breinbaas (~aardvark@45.83.234.25)
[14:26:39] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[14:30:00] *** Joins: aLeSD_ (~aLeSD@91.126.33.194)
[14:30:12] *** Quits: aLeSD (~aLeSD@91.126.33.194) (Ping timeout: 240 seconds)
[14:30:40] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[14:32:07] *** Joins: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de)
[14:33:00] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Ping timeout: 240 seconds)
[14:33:43] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[14:36:42] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 250 seconds)
[14:40:19] <depesz> mjf: https://archive.fosdem.org/2019/schedule/event/postgresql_fsync/
[14:40:37] <depesz> title "PostgreSQL vs. fsync : How is it possible that PostgreSQL used fsync incorrectly for 20 years, and what we'll do about it."
[14:42:45] *** Joins: fef (~thedawn@user/thedawn)
[14:43:01] *** Quits: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de) (Ping timeout: 256 seconds)
[14:45:17] *** Quits: ekathva_ (~ekathva@mobile-access-5d6abb-218.dhcp.inet.fi) (Ping timeout: 256 seconds)
[14:49:03] *** Quits: freeworld (~freeworld@chello085216193138.chello.sk) (Ping timeout: 252 seconds)
[14:50:50] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[14:51:26] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 250 seconds)
[14:52:06] *** Joins: cliluw (~cliluw@47.147.77.43)
[14:54:57] *** Joins: randir (~randir@93.159.239.42)
[14:57:35] *** Joins: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de)
[14:57:56] *** Joins: ekathva (~ekathva@93-90-58-246.welcomnet.fi)
[15:00:27] *** Quits: ekathva (~ekathva@93-90-58-246.welcomnet.fi) (Client Quit)
[15:07:41] *** Joins: chrit (~cloehr@p200300cad7184500287a856c1680568b.dip0.t-ipconnect.de)
[15:10:55] <mjf> depesz: Thanks. :)
[15:12:59] *** Joins: c2main (~quassel@82.66.25.238)
[15:12:59] *** Quits: c2main (~quassel@82.66.25.238) (Changing host)
[15:12:59] *** Joins: c2main (~quassel@user/c2main)
[15:15:54] *** Joins: Klinda (~superleag@user/klinda)
[15:16:02] *** Quits: chrit (~cloehr@p200300cad7184500287a856c1680568b.dip0.t-ipconnect.de) (Changing host)
[15:16:02] *** Joins: chrit (~cloehr@user/chrit)
[15:16:30] *** Joins: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be)
[15:17:41] *** Quits: chrit (~cloehr@user/chrit) (Quit: Konversation terminated!)
[15:17:53] *** Joins: Reiner_Unsinn (~quassel@p5dd47daa.dip0.t-ipconnect.de)
[15:17:54] *** Joins: chrit (~cloehr@user/chrit)
[15:18:18] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 250 seconds)
[15:20:14] *** Joins: nyov (~nyov@user/nyov)
[15:26:48] *** Quits: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be) (Remote host closed the connection)
[15:27:21] *** Joins: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be)
[15:28:40] *** Joins: freeworld (~freeworld@chello085216193138.chello.sk)
[15:30:08] <richard_h> depesz: I just watched that video ... I take it the patches did get into PostgreSQL 12? Or at least by now?
[15:31:48] <depesz> https://why-upgrade.depesz.com/show?from=9.5&to=14.2&keywords=fsync
[15:34:01] *** Quits: freeworld (~freeworld@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[15:34:17] *** Joins: furrymcgee (~devuan@cgn-213-196-210-225.nc.de)
[15:34:26] *** Joins: freeworld (~freeworld@chello085216193138.chello.sk)
[15:34:30] <richard_h> I'm not sure I can interpret that usefully :-(
[15:35:12] *** Joins: zeden (~zeden@user/zeden)
[15:37:22] <richard_h> but I guess I can at least confirm that 9.6 is much too old ...
[15:38:18] <depesz> the fsync change seems to have been released in  Upgrade to 11.2 released on 2019-02-14
[15:38:27] <depesz> so any version above that should have that fixed.
[15:38:31] <richard_h> ok, thanks
[15:41:20] *** Quits: agrosant (~agrosant@46.12.50.59.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[15:46:46] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 260 seconds)
[15:47:19] *** Joins: cliluw (~cliluw@47.147.77.43)
[15:57:34] *** Joins: agrosant (~agrosant@79.103.7.27.dsl.dyn.forthnet.gr)
[15:59:15] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[16:00:49] *** Joins: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de)
[16:03:30] *** Quits: agrosant (~agrosant@79.103.7.27.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[16:08:46] *** Joins: mowcat (~mowcat@host86-134-139-152.range86-134.btcentralplus.com)
[16:16:32] *** Quits: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be) (Quit: Leaving...)
[16:18:54] *** Joins: agrosant (~agrosant@79.103.143.96.dsl.dyn.forthnet.gr)
[16:22:02] *** Quits: mjf (~mjf@2001:1528:1:fffd:2136:3bf0:2a7b:678d) (Ping timeout: 240 seconds)
[16:22:28] *** Joins: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz)
[16:23:23] *** Quits: agrosant (~agrosant@79.103.143.96.dsl.dyn.forthnet.gr) (Max SendQ exceeded)
[16:30:57] *** Quits: mowcat (~mowcat@host86-134-139-152.range86-134.btcentralplus.com) (Remote host closed the connection)
[16:31:21] *** Quits: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz) (Ping timeout: 252 seconds)
[16:31:32] *** Joins: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net)
[16:32:42] *** Joins: mjf (~mjf@2001:1528:1:fffd:2136:3bf0:2a7b:678d)
[16:37:54] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[16:39:16] *** Quits: nd__ (~nd@ip-176-199-211-174.um44.pools.vodafone-ip.de) (Quit: leaving)
[16:47:11] *** Quits: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net) (Read error: Connection reset by peer)
[16:48:55] *** Joins: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net)
[16:49:12] *** Joins: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be)
[16:51:58] *** Joins: darkbit (~db@136.158.8.67)
[16:55:54] *** Quits: dvl (~dvl@user/dvl) (Quit: Ride fast. Take chances.)
[17:00:12] *** Joins: dvl (~dvl@znc.unixathome.org)
[17:00:12] *** Quits: dvl (~dvl@znc.unixathome.org) (Changing host)
[17:00:12] *** Joins: dvl (~dvl@user/dvl)
[17:06:05] *** Joins: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br)
[17:15:35] *** Joins: MrZeus_ (~MrZeus@81.92.205.23)
[17:18:23] *** Quits: RangerRick (~quassel@99-69-21-21.lightspeed.rlghnc.sbcglobal.net) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[17:18:43] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[17:18:47] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[17:20:52] *** Quits: otisolsen70 (~otisolsen@80.80.4.2) (Quit: Leaving)
[17:21:15] *** Joins: RangerRick (~quassel@99-69-21-21.lightspeed.rlghnc.sbcglobal.net)
[17:21:50] *** Quits: schinckel (uid38120@user/schinckel) (Quit: Connection closed for inactivity)
[17:23:24] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[17:25:02] *** Quits: mjf (~mjf@2001:1528:1:fffd:2136:3bf0:2a7b:678d) (Ping timeout: 240 seconds)
[17:26:10] *** Joins: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz)
[17:28:20] <depesz> do you know of any reason why initial sync of logical replication would stop removing temp slots named pg_*_sync_* ?
[17:29:06] <depesz> it all works well, for couple of hours, and then suddenly stops removing old slots, filling out max_replication_slots
[17:29:21] <depesz> replication from pg 12 to 14
[17:29:43] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[17:30:45] <dim> (sounds like a bug to me)
[17:31:21] <dim> depesz: if you're interested into that, I intend to implement logical decoding support in pgcopydb later (this month?) ; I have started the implementation and you could ocntribute and join the fun
[17:32:02] <depesz> while it does sound interesting, i need to figure it out for this project, kinda now-ish.
[17:32:12] <depesz> we want to upgrade to 14, and can't do it with pg_upgrade.
[17:32:24] <Berge> (Why?)
[17:32:27] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[17:32:28] <Berge> Or, why not, I suppose
[17:32:43] <depesz> because while in process we want to upgrade OS too (bionic -> focal). and this involves "fun" with locale changes
[17:33:01] *** Quits: shkurata (~shkurata@ptr-8riebugsz1piq13k2pd.18120a2.ip6.access.telenet.be) (Quit: Leaving...)
[17:33:28] <Berge> got it
[17:33:51] *** Quits: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz) (Read error: Connection reset by peer)
[17:34:03] *** Joins: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz)
[17:34:59] <dim> depesz: https://github.com/dimitri/pgcopydb/pull/12
[17:35:09] <dim> (in case)
[17:42:20] *** Joins: onosendi (~onosendi@user/onosendi)
[17:47:02] *** Joins: inak (~akD1@209-112-220-139-radius.dynamic.acsalaska.net)
[17:50:35] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[17:51:33] *** Quits: AlexeyX (~AlexeyX@176.53.207.26) (Quit: Going offline, see ya! (www.adiirc.com))
[17:52:25] *** Joins: Diggsey (uid120933@id-120933.uxbridge.irccloud.com)
[17:52:53] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[17:53:06] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[17:56:44] <depesz> sent more info to pgsql-bugs - if anyone would be willing to look at it and tell me where i screwed up, i'd be VERY happy: https://www.postgresql.org/message-id/20220317142426.GA727%40depesz.com
[17:57:56] *** Quits: dege (~dege@user/dege) (Quit: Textual IRC Client: www.textualapp.com)
[17:58:06] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:58:59] *** Joins: hoppity (~hoppity@mobile-107-92-61-226.mycingular.net)
[17:58:59] *** Quits: hoppity (~hoppity@mobile-107-92-61-226.mycingular.net) (Changing host)
[17:58:59] *** Joins: hoppity (~hoppity@user/hoppity)
[17:59:37] *** Joins: Haudegen (~quassel@91.114.49.10)
[17:59:49] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42)
[18:01:56] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[18:06:18] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 260 seconds)
[18:07:35] *** Quits: andreypopp_ (uid22726@id-22726.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[18:08:38] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 260 seconds)
[18:08:48] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[18:12:25] *** Joins: hoppity (~hoppity@66.222.130.38)
[18:12:25] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[18:12:25] *** Joins: hoppity (~hoppity@user/hoppity)
[18:13:47] *** Joins: hoppity_ (~hoppity@mobile-107-92-61-38.mycingular.net)
[18:15:31] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[18:15:45] *** Joins: rvalue (~rvalue@user/rvalue)
[18:16:02] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[18:16:37] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 240 seconds)
[18:16:55] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[18:24:01] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[18:24:06] *** Quits: dionysus69 (~Thunderbi@94-43-205-210.dsl.utg.ge) (Ping timeout: 252 seconds)
[18:26:48] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Remote host closed the connection)
[18:27:23] *** Joins: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5)
[18:28:58] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[18:30:49] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[18:34:52] *** Quits: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5) (Remote host closed the connection)
[18:35:02] *** hoppity_ is now known as hoppity
[18:35:03] *** Quits: hoppity (~hoppity@mobile-107-92-61-38.mycingular.net) (Changing host)
[18:35:03] *** Joins: hoppity (~hoppity@user/hoppity)
[18:35:29] *** Joins: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5)
[18:35:32] *** Quits: concrete-houses (~g@209.6.150.53) (Ping timeout: 240 seconds)
[18:36:38] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[18:37:48] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[18:46:40] *** Quits: quintasan_ (~quassel@quintasan.pl) (Quit: No Ping reply in 180 seconds.)
[18:48:00] *** Joins: quintasan (~quassel@quintasan.pl)
[18:53:16] *** Quits: [sep] (~sep@2a05:6d40:0:340:ec:24ff:fe65:d91c) (Remote host closed the connection)
[18:53:34] *** Joins: axisys (~axisys@ec2-52-207-123-244.compute-1.amazonaws.com)
[18:54:00] *** Joins: [sep] (~sep@2a05:6d40:0:340:ec:24ff:fe65:d91c)
[19:01:50] *** Quits: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5) (Remote host closed the connection)
[19:02:35] *** Joins: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5)
[19:03:36] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[19:03:39] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[19:04:20] *** Joins: mattil (~mattil@helsinki.portalify.com)
[19:09:11] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 252 seconds)
[19:13:37] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:14:20] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[19:16:37] *** Joins: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[19:17:04] *** Joins: TomyWork (~TomyLobo@p200300e80f15820044581b6bd1987dd4.dip0.t-ipconnect.de)
[19:18:32] *** Quits: shiranaihito (~textual@2001-b011-4011-33f5-045d-63ed-e25e-710a.dynamic-ip6.hinet.net) (Ping timeout: 240 seconds)
[19:19:45] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[19:19:53] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:21:09] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:22:35] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[19:22:55] *** Joins: bindu (~bindu@user/bindu)
[19:28:01] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:29:50] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:29:52] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Read error: Connection reset by peer)
[19:29:59] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:30:14] *** Quits: tozhu (~tozhu@218.89.253.208) (Quit: tozhu)
[19:33:37] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[19:35:25] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:36:22] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:36:24] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Read error: Connection reset by peer)
[19:36:39] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:37:43] *** Quits: marco44 (~marco44@82-64-126-208.subs.proxad.net) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[19:38:15] *** Quits: inak (~akD1@209-112-220-139-radius.dynamic.acsalaska.net) (Ping timeout: 256 seconds)
[19:38:49] *** Joins: marco44 (~marco44@82-64-126-208.subs.proxad.net)
[19:39:19] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[19:40:24] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:40:24] *** Quits: CanuteTheGreat (~CanuteThe@user/canutethegreat) (Read error: Connection reset by peer)
[19:40:56] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42)
[19:43:17] *** Joins: CanuteTheGreat (~CanuteThe@user/canutethegreat)
[19:44:14] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Read error: Connection reset by peer)
[19:46:44] *** Quits: CanuteTheGreat (~CanuteThe@user/canutethegreat) (Client Quit)
[19:47:19] *** Quits: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net) (Ping timeout: 256 seconds)
[19:47:33] *** Quits: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5) (Remote host closed the connection)
[19:47:43] *** Quits: vladoski (~vladoski@2001:b07:add:d406:df6c:d4e5:d817:538e) (Remote host closed the connection)
[19:48:03] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:48:30] *** Joins: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi)
[19:52:25] *** Quits: mjf (~mjf@cst-prg-65-7.cust.vodafone.cz) (Ping timeout: 256 seconds)
[19:52:33] *** Joins: mjf (~mjf@cst-prg-27-217.cust.vodafone.cz)
[19:52:51] *** Quits: mattil (~mattil@d47m3w4qpxyvbtj8wc8-4.rev.dnainternet.fi) (Ping timeout: 245 seconds)
[19:53:24] *** Quits: grandrew (~grandrew@104-50-140-129.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 240 seconds)
[19:53:49] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:54:00] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[19:55:15] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[19:56:53] *** Joins: CanuteTheGreat (~CanuteThe@user/canutethegreat)
[19:58:12] *** Quits: k_sze (~k_sze@mail2.kalunite.net) (Quit: ZNC 1.8.2 - https://znc.in)
[19:58:43] *** Joins: k_sze (~k_sze@mail2.kalunite.net)
[19:59:43] *** Joins: maciek__ (~maciek@2600:1700:a412:1c00:e620:139c:397c:b2d8)
[19:59:55] *** Joins: inak (~akD1@209-112-220-139-radius.dynamic.acsalaska.net)
[19:59:57] *** Quits: dsrt^ (~dsrt@65.240.140.18) (Remote host closed the connection)
[20:02:42] *** Quits: veegee (~veegee@ipagstaticip-469c2903-2b07-6dc3-3bc2-98748da5ca77.sdsl.bell.ca) (Quit: Textual IRC Client: www.textualapp.com)
[20:06:57] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[20:07:51] *** Joins: orion (~orion@user/orion)
[20:08:46] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[20:09:06] <orion> Hi. I am running postgres 12, and I am trying to delete a single row from a table which contains approximately 7013000 rows. It takes about 60 seconds to complete. Is this normal? I've already run a VACUUM FULL and VACUUM (INDEX_CLEANUP).
[20:10:04] *** Joins: grandrew (~grandrew@104-50-140-129.lightspeed.sntcca.sbcglobal.net)
[20:10:05] <xiaomiao> depends. if you delete rows with a condition that doesn't match primary key or any index it'll need to do a table scan, which is slow
[20:10:22] <xiaomiao> but 7M rows is small enough that I'd expect it to take <10sec
[20:12:21] <selckin> foreigh keys to that table without indexes will also slow that kind of thing down
[20:12:50] <orion> There is an index on the primary key, which is the column referenced in my WHERE clause.
[20:13:01] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Ping timeout: 240 seconds)
[20:13:03] <Berge> orion: The question is if any columns have foreign keys
[20:13:22] <selckin> (including other tables having refernces to that table)
[20:14:10] <Berge> right
[20:14:18] <Berge> orion: If you can pastebin \d of the table, we can have a look
[20:14:44] <orion> https://gist.github.com/centromere/ad1c2e3934c54520d761ec0b431e7792
[20:16:07] <Berge> ON DELETE CASCADE, eh? (-:
[20:16:23] *** Joins: mizi (~mizi@user/mizi)
[20:17:30] *** Quits: Su-Shee (~Susanne@152-111-142-46.pool.kielnet.net) (Ping timeout: 268 seconds)
[20:17:37] <Berge> orion: EXPLAIN DELETE FROM block WHERE id = <some ID>;
[20:17:46] <Berge> That won't actually delete any rows, but will give you a plan
[20:18:04] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[20:18:08] <Berge> If you do EXPLAIN ANALYZE instead, it'll actually delete the row and give you the plan, including what takes time. Use explain.depesz.com to paste plans
[20:18:15] <orion> Berge: https://gist.github.com/centromere/70b9dc69a02bf7fca39ad299fa903f9a
[20:18:24] *** Joins: mattil (~mattil@helsinki.portalify.com)
[20:18:55] <orion> https://explain.depesz.com/s/oZMy
[20:19:32] <selckin> so like all the fields in referenced by if they don't have an index
[20:19:32] <Berge> orion: That plan looks perfectly reasonable, but I'm not sure it'd follow CASCADE without ANALYZE (which will make it actually delete the row too)
[20:19:38] <depesz> this is explain, not explain analyze.
[20:19:48] <depesz> orion: please do: begin; explain analyze delete ...; rollback;
[20:19:55] <orion> Ah, apologies.
[20:20:05] <depesz> begin/rollback will make sure you don't lose data.
[20:21:35] *** Quits: Haudegen (~quassel@91.114.49.10) (Quit: Bin weg.)
[20:22:20] <orion> https://explain.depesz.com/s/wKbl
[20:22:21] <orion> Wow!
[20:22:39] <depesz> orion: so i guess you now know where the time went
[20:22:42] <Berge> well, would you look at that
[20:22:51] <Berge> depesz: The trigger times list is great stuff!
[20:23:01] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[20:23:01] <Berge> Is that in 14?
[20:23:09] <depesz> no. much older
[20:23:13] <Berge> hm
[20:23:22] <Berge> ah, yes, it is
[20:23:39] <depesz> orion: can you show us \d redeemer ?
[20:23:50] <depesz> and \d tx
[20:24:07] *** Joins: Su-Shee (~Susanne@213-109-142-46.pool.kielnet.net)
[20:25:41] <orion> depesz: https://gist.github.com/centromere/46824ffe809c367b364b10993faf36ba
[20:26:58] <depesz> weird.
[20:27:11] *** Joins: iliv (~iliv@93-77-147-152.lvv.volia.net)
[20:27:26] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[20:27:26] *** Joins: iliv (~iliv@user/iliv)
[20:27:30] <Berge> Is it?
[20:27:37] <Berge> Isn't it cascading through tx?
[20:27:40] <depesz> you seem to have delete on table block, but it doesn't seem to be referenced by redeemer
[20:27:55] <Berge> But tx is, and it has a CASCADE FK to redeemer
[20:28:07] <Berge> From. But yeah.
[20:28:58] <depesz> orion: \d tx_in ?
[20:29:20] *** Joins: mattil (~mattil@87-92-87-151.bb.dnainternet.fi)
[20:29:34] <depesz> and \d collateral_tx_in
[20:29:48] *** Quits: mattil (~mattil@87-92-87-151.bb.dnainternet.fi) (Read error: Connection reset by peer)
[20:30:17] <orion> https://gist.github.com/centromere/f4c3ecdbfaedb202197d20ce111786ec
[20:31:40] *** Quits: gleu (~guillaume@pop.92-184-102-10.mobile.abo.orange.fr) (Quit: Leaving.)
[20:31:41] *** Quits: the_lanetly_052 (~the_lanet@194.135.169.153) (Ping timeout: 252 seconds)
[20:31:42] <depesz> looks like you have all poroperly indexed, but (i'd say) it will delete MANY records due to fkeys.
[20:33:16] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42)
[20:37:19] <orion> I see. So there's no good way around it then?
[20:38:24] *** Joins: magla (~gelignite@d5364d83.access.ecotel.net)
[20:38:55] *** Quits: ketas (~ketas@0011-0000-0000-0000-d7dc-830e-07d0-2001.dyn.estpak.ee) (Remote host closed the connection)
[20:39:27] <Myon> you need to index the referencing side of the FK
[20:40:34] <orion> Myon: Something like REINDEX TABLE CONCURRENTLY ...?
[20:40:58] <Myon> "reindex" won't make indexes appear that are not there
[20:41:17] <orion> Is the recommendation to DROP the index and recreate it?
[20:41:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[20:41:39] <Myon> isn't the problem that a cascading delete is slow?
[20:41:50] *** Joins: ketas (~ketas@0011-0000-0000-0000-d7dc-830e-07d0-2001.dyn.estpak.ee)
[20:41:51] <orion> That appears to be true.
[20:41:54] *** Quits: n0fun (~jack@i577BC0E0.versanet.de) (Quit: null)
[20:42:08] <Myon> then you need to create an index so it can find the row to cascade to
[20:42:11] *** Joins: n0fun (~jack@i577BC0E0.versanet.de)
[20:42:17] <orion> Oh, I misread. You intended for me to create a *new* index.
[20:43:26] <depesz> Myon: i think he has the index.
[20:43:28] *** Quits: n0fun (~jack@i577BC0E0.versanet.de) (Client Quit)
[20:43:44] *** Joins: n0fun (~jack@i577BC0E0.versanet.de)
[20:43:57] <Myon> ok I shouldn't jump in without the full context
[20:45:17] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[20:45:27] *** Quits: Junxter (~Junxter@222.94.37.130) (Ping timeout: 252 seconds)
[20:45:28] *** Quits: bmomjian (~bruce@momjian.us) (Ping timeout: 250 seconds)
[20:45:42] <orion> My colleague informed me that this machine ran out of disk space recently. Could this be related?
[20:45:53] <Myon> that doesn't make performance bad
[20:47:09] *** Quits: Michelle (~michelle@2407:8800:bc20:200a:3c57:fb8b:2003:7337) (Read error: Connection reset by peer)
[20:47:30] <orion> Is it possible that a pg file was truncated?
[20:47:34] *** Joins: Michelle (~michelle@203.206.128.220)
[20:47:47] *** Joins: pjs (~pjs@user/pjs)
[20:47:54] *** Joins: bmomjian (~bruce@momjian.us)
[20:48:07] <Myon> no, recovery will fix that if the database crashed
[20:48:28] <Myon> (and if it didn't crash, nothing was damaged)
[20:48:48] <orion> Good to know, thanks.
[20:52:22] *** Quits: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net) (Read error: Connection reset by peer)
[20:52:25] *** Quits: TomyWork (~TomyLobo@p200300e80f15820044581b6bd1987dd4.dip0.t-ipconnect.de) (Remote host closed the connection)
[20:54:31] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 245 seconds)
[20:56:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[20:57:54] *** Quits: aLeSD_ (~aLeSD@91.126.33.194) (Remote host closed the connection)
[20:59:26] *** Quits: mav`rik (~unknown@ec2-54-171-126-99.eu-west-1.compute.amazonaws.com) (Quit: leaving)
[21:01:44] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[21:01:59] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[21:04:08] *** Joins: econo (uid147250@user/econo)
[21:05:04] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Quit: Textual IRC Client: www.textualapp.com)
[21:06:29] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[21:07:21] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[21:10:19] <maret> is it possible to partition large postgres table using varchar column which represents a hash? I have a large table in which I do joins and select with string column in where clause  and select are too slow. Like in this case  index only scan took 7s https://explain.depesz.com/s/taa
[21:10:22] <maret> ofc the query it self can be rewritten but the sheere amount of data (hundreds of millions of rows) is an issue
[21:11:32] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[21:12:32] *** Quits: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de) (Ping timeout: 240 seconds)
[21:16:58] <ilmari> each index scan only took 0.2ms, but it did it 112k times
[21:17:26] <orion> depesz: I think I figured it out.
[21:17:52] <orion> I needed "CREATE INDEX idx_tx_in_redeemer_id ON tx_in(redeemer_id);" Here's the new plan: https://explain.depesz.com/s/SFia
[21:18:28] <depesz> You had such index already...
[21:18:32] <orion> I did not.
[21:18:54] <Myon> maret: partitioning will not make it less data
[21:18:59] <orion> Oh, hmm.
[21:19:20] <depesz> https://gist.github.com/centromere/f4c3ecdbfaedb202197d20ce111786ec this is your paste...
[21:19:25] <depesz> Index idx_tx_in_redeemer_id
[21:19:29] <orion> Crap. Now I am confused.
[21:19:51] <depesz> Maybe old index was bloated
[21:20:25] *** Joins: ba|ch` (~user@p200300f3a7089c4cca61212c5e50ec1f.dip0.t-ipconnect.de)
[21:21:20] *** Joins: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net)
[21:21:32] *** Quits: ba|ch (~user@p200300f3a7089c1768b8c6155ee0df49.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[21:21:59] <orion> Ah, I had multiple psql sessions open. I think I was pasting from a different server.
[21:22:38] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:5cb2:5682:6969:c42) (Quit: Textual IRC Client: www.textualapp.com)
[21:24:35] *** Quits: xenoterracide (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net) (Remote host closed the connection)
[21:25:45] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4.1)
[21:25:58] *** Joins: harrycs- (~hcs@173.205.215.194)
[21:27:32] *** Quits: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec) (Ping timeout: 240 seconds)
[21:28:12] *** Joins: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec)
[21:28:13] <ilmari> maret: for more information on where it's spending time, `set track_io_timing = on;` and `explain (analyze, buffers) â€¦`
[21:29:25] <ilmari> maret: you may also want to increase max_parallel_workers_per_gather, if you have CPU and RAM to spare
[21:30:01] *** Quits: ns12 (~ns12@user/ns12) (Quit: bye)
[21:30:35] *** Quits: Enissay (~Enissay@user/enissay) (Quit: WeeChat 3.0)
[21:31:03] *** Joins: ns12 (~ns12@user/ns12)
[21:31:30] *** Joins: Enissay (~Enissay@user/enissay)
[21:32:13] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[21:36:43] *** Quits: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr) (Quit: WeeChat 3.4)
[21:45:17] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[21:48:32] *** Quits: ba|ch` (~user@p200300f3a7089c4cca61212c5e50ec1f.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[21:48:42] *** Quits: held (~heldchen@user/held) (Ping timeout: 252 seconds)
[21:50:53] <harrycs-> hello everyone! i'm trying to figure out a way to efficiently fetch "missing" timestamps in a timeseries-ish table. basically, there is one-record-per-minute, and i'd like to find which minutes /don't/ have associated records. my first pass uses a left join of the data on ~generate_series~ output, but the performance is quite bad when the generated series approaches several million due to the query planner using a nested loop to execute
[21:50:53] <harrycs-> the join. does anyone have an idea? i might be able to force the query planner to use a hash join, but i might be approaching the problem incorrectly. all ears for suggestions, and thank you
[21:51:01] *** Quits: darkbit (~db@136.158.8.67) (Ping timeout: 240 seconds)
[21:51:11] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[21:51:48] <harrycs-> for what it's worth, i mean in the ~10s of seconds range for "quite bad" performance, with about ~7 million records in the table
[21:54:20] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Remote host closed the connection)
[21:54:46] *** Joins: trillp (~trillp@137.220.51.190)
[21:55:59] *** Quits: Bebef (sbreit@phobos.bebef.de) (Quit: bye)
[21:56:11] <johto> you could use the lead() window function
[21:58:06] *** Joins: Rashad (~textual@2a01:9700:129a:7b00:cceb:eaea:762a:253d)
[21:59:34] *** Joins: Bebef (~Bebef@phobos.bebef.de)
[22:00:05] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[22:00:52] <harrycs-> @johto interesting, i'll explore something using lead(), thanks for the tip
[22:02:34] *** Joins: stark__ (~stark@192.222.248.88)
[22:05:11] *** Joins: jazzy (~jaziz@user/jaziz)
[22:10:26] *** Joins: held (~heldchen@user/held)
[22:17:18] *** Quits: justAstache (~justache@user/justache) (Read error: Connection reset by peer)
[22:18:29] *** Joins: justAstache (~justache@user/justache)
[22:18:42] *** Quits: firewyre- (~firewyre@pool-71-184-153-62.bstnma.fios.verizon.net) (Quit: ZNC - https://znc.in)
[22:18:53] *** Quits: xMopx (~xMopx-lib@192.95.23.134) (Quit: ZNC - http://znc.in)
[22:19:14] *** Joins: firewyre (~firewyre@pool-71-184-153-62.bstnma.fios.verizon.net)
[22:20:04] <harrycs-> @johto :) i think i got something nice working. instead of "one row per minute" being returned, i can get the begin/end times of "missing" windows of data. thank you so much!
[22:23:07] *** Joins: ArchNoob (~archnoob@41.59.4.178)
[22:24:43] *** Quits: darutoko (~darutoko@90.188.76.54) (Quit: Leaving)
[22:25:27] *** Quits: ArchNoob (~archnoob@41.59.4.178) (Changing host)
[22:25:27] *** Joins: ArchNoob (~archnoob@user/archnoob)
[22:26:51] *** Quits: inak (~akD1@209-112-220-139-radius.dynamic.acsalaska.net) (Quit: IceChat - It's what Cool People use)
[22:31:06] <jeff> harrycs-: sounds like a nice approach. can you share more details?
[22:34:25] <harrycs-> i'm still working on it, but basically: have a subquery that surfaces the original timestamp + the lead(timestamp) over the sorted timestamps, then select results from the subquery where the diff between those two is more than one minute
[22:35:43] <orion> Thank you all for your help!
[22:35:47] *** Quits: orion (~orion@user/orion) (Quit: Leaving...)
[22:35:51] <harrycs-> e.g. ~select (created_at + '1 minute') as start_of_missing, lead as end_of_missing from (select created_at,  lead(created_at) over (order by created_at) from data_table) leads where lead > (created_at + '1 minute')~
[22:37:54] *** Quits: Bebef (~Bebef@phobos.bebef.de) (Quit: bye)
[22:38:39] *** Joins: Bebef (sbreit@phobos.bebef.de)
[22:41:33] *** Quits: onosendi (~onosendi@user/onosendi) (Quit: WeeChat 3.4)
[22:45:11] *** Joins: jordi_ (~jordi@229.red-79-157-152.dynamicip.rima-tde.net)
[22:45:14] *** Quits: jordi_ (~jordi@229.red-79-157-152.dynamicip.rima-tde.net) (Client Quit)
[22:45:49] *** Joins: darkbit (~db@152.32.100.99)
[22:46:54] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[22:49:09] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[22:49:21] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[22:49:41] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:350b:c577:12c5:d54b) (Remote host closed the connection)
[22:49:41] *** Joins: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net)
[22:50:51] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[22:57:12] *** Quits: mjf (~mjf@cst-prg-27-217.cust.vodafone.cz) (Ping timeout: 250 seconds)
[23:02:01] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:852a:22ee:4ef6:2f59)
[23:03:52] *** Joins: mjf (~mjf@cst-prg-12-16.cust.vodafone.cz)
[23:06:48] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:852a:22ee:4ef6:2f59) (Ping timeout: 252 seconds)
[23:08:29] *** Joins: Intelo (~Intelo@user/Intelo)
[23:14:09] *** Quits: harrycs- (~hcs@173.205.215.194) (Ping timeout: 256 seconds)
[23:15:54] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[23:16:33] *** Joins: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com)
[23:17:08] *** Joins: immibis (~hexchat@62.156.144.218)
[23:23:03] *** Joins: hoppity_ (~hoppity@207.228.78.48)
[23:23:03] *** Quits: hoppity (~hoppity@user/hoppity) (Read error: Connection reset by peer)
[23:23:17] *** Quits: darkbit (~db@152.32.100.99) (Ping timeout: 240 seconds)
[23:25:08] *** Joins: MrZeus__ (~MrZeus@194.37.96.119)
[23:25:20] *** Quits: ArchNoob (~archnoob@user/archnoob) (Remote host closed the connection)
[23:27:23] *** Joins: ur5us (~ur5us@203.86.198.200)
[23:28:16] *** Quits: MrZeus_ (~MrZeus@81.92.205.23) (Ping timeout: 245 seconds)
[23:29:35] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[23:31:22] *** Joins: ArchNoob (~archnoob@41.59.4.178)
[23:31:45] *** Quits: Intelo (~Intelo@user/Intelo) (Quit: Client closed)
[23:33:04] *** Joins: Auron (Auron956@user/auron)
[23:33:25] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzzâ€¦)
[23:34:04] *** Quits: ArchNoob (~archnoob@41.59.4.178) (Remote host closed the connection)
[23:36:08] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[23:40:40] *** Joins: ArchNoob (~archnoob@41.59.4.178)
[23:43:00] *** Quits: ArchNoob (~archnoob@41.59.4.178) (Remote host closed the connection)
[23:46:48] *** Joins: Klinda (~superleag@user/klinda)
[23:46:53] *** Joins: hoppity (~hoppity@mobile-107-92-61-38.mycingular.net)
[23:46:53] *** Quits: hoppity (~hoppity@mobile-107-92-61-38.mycingular.net) (Changing host)
[23:46:53] *** Joins: hoppity (~hoppity@user/hoppity)
[23:47:20] *** Joins: ArchNoob (~archnoob@41.59.4.178)
[23:47:39] <StuckMojo> ??autovacuum_vacuum_threshold
[23:47:39] <pg_docbot> Nothing found
[23:47:48] <StuckMojo> ??autovacuum
[23:47:48] <pg_docbot> https://www.postgresql.org/docs/current/static/runtime-config-autovacuum.html :: https://www.postgresql.org/docs/current/static/routine-vacuuming.html#AUTOVACUUM
[23:49:15] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 240 seconds)
[23:49:16] *** Quits: ArchNoob (~archnoob@41.59.4.178) (Read error: Connection reset by peer)
[23:49:40] *** Joins: ArchNoob (~archnoob@41.59.4.178)
[23:50:25] *** Quits: hoppity_ (~hoppity@207.228.78.48) (Ping timeout: 256 seconds)
[23:50:37] *** Quits: ArchNoob (~archnoob@41.59.4.178) (Remote host closed the connection)
[23:50:45] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[23:50:54] *** Joins: ArchNoob (~archnoob@41.59.4.178)
[23:52:41] *** Joins: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[23:55:00] *** Joins: Guest95 (~Guest95@154.72.163.179)
[23:56:02] *** Quits: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com) (Ping timeout: 240 seconds)
[23:59:47] *** Quits: chrit (~cloehr@user/chrit) (Quit: Konversation terminated!)
