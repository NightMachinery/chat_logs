[00:00:47] *** Quits: nb-ben (~ben@user/nb-ben) (Remote host closed the connection)
[00:02:03] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[00:02:11] *** Joins: test1` (~user@p200300f3a70c0d66716e674eb594b861.dip0.t-ipconnect.de)
[00:02:26] *** Quits: the_lanetly_052 (~the_lanet@194.135.168.16) (Ping timeout: 256 seconds)
[00:03:48] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[00:04:44] *** Joins: jazzy (~jaziz@user/jaziz)
[00:05:56] *** Joins: ben_ (~ben@135.125.147.53)
[00:09:14] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[00:10:29] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[00:11:32] *** Joins: mexen (uid495612@user/mexen)
[00:11:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[00:13:01] *** Quits: hruske (~hruske@89-212-52-175.static.t-2.net) (Ping timeout: 240 seconds)
[00:14:03] *** Joins: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de)
[00:14:54] *** Joins: hruske (~hruske@89-212-52-175.static.t-2.net)
[00:17:19] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[00:20:44] <andres> The sentence is from 2003.
[00:20:46] <andres> Yikes.
[00:20:47] *** Quits: fstd (~fstd@xdsl-78-34-125-135.nc.de) (Read error: Connection reset by peer)
[00:21:54] *** Joins: fstd (~fstd@xdsl-78-34-125-135.nc.de)
[00:28:29] *** Joins: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net)
[00:30:41] *** Joins: funhouse (~funhouse@user/funhouse)
[00:30:55] <funhouse> Does anyone know what Im doing wrong here?
[00:30:56] <funhouse> https://pastebin.com/8SqqiA16
[00:31:09] <FunkyBob> using pastebin.com? :P
[00:31:12] <funhouse> HINT:  There is a column named "full_addr" in table "addresses", but it cannot be referenced from this part of the query
[00:31:20] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 256 seconds)
[00:31:20] <funhouse> ??paste
[00:31:21] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[00:31:21] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[00:31:40] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[00:32:10] <FunkyBob> (full_addr = :full_addr,   ... this syntax looks wrong to me
[00:32:33] <funhouse> Sorry will use other ones from now on
[00:32:36] <FunkyBob> I've only seen VALUES accept tuples... so  (:full_)addr, :city_pcs, :csduid, ....
[00:32:46] <FunkyBob> instead of key=value terms
[00:32:49] <FunkyBob> just the values
[00:33:16] <funhouse> oh dam thank you so much FunkyBob
[00:33:23] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[00:36:15] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[00:37:18] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[00:38:39] <andres> Even weirder, as far as I can tell even back in 2001 postmaster immediately killed other backends when one exited "irregularly"
[00:38:50] <andres> *2003
[00:39:24] <Snow-Man> I can't recall a time when it didn't, heh.
[00:39:48] *** Quits: hojasuelta (~hojasuelt@c-76-104-207-0.hsd1.wa.comcast.net) (Remote host closed the connection)
[00:39:49] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[00:40:06] <andres> Yep, just traced it back to the start of the CVS history.
[00:40:13] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[00:40:17] <andres> IOW that sentence was always blatantly wrong.
[00:40:23] *** Quits: _xxoxx (~Junxter@222.95.164.193) (Quit: Leaving)
[00:43:53] <Snow-Man> :/
[00:44:37] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[00:48:41] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 245 seconds)
[00:48:49] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[00:49:01] *** Quits: pg_docbot (~docbot_li@donatu.postgresql.org) (Quit: Signal received: INT - shutting down)
[00:49:16] *** Joins: pg_docbot (~docbot_li@donatu.postgresql.org)
[00:54:28] *** Quits: zer0bitz_ (~zer0bitz@2001:2003:f74d:b800:b579:336d:9a22:79d7) (Ping timeout: 250 seconds)
[00:55:59] *** Joins: AJTJ (~AJTJ@d205-234-49-159.yt.northwestel.net)
[00:57:52] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[00:58:37] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:06:31] <hoppity> Is it possible to duplicate a database entry with all its associations?
[01:07:15] <hoppity> so if I have a PERSON of id 1, I and up with the exact same PERSON and all its associations but all of them (including the person) with new IDs
[01:08:52] <peerce> you would need to fetch that person and everything that references it, then insert the person returning the new id, then insert all the references using the new id.  this ideally should be done as a single transaction
[01:10:15] <hoppity> peerce: gotcha, thank you
[01:10:19] <peerce> some referencing tables coudl and probably will have multiple entries referencing the same person(id)
[01:11:05] <peerce> so when you fetch from those tables where referencing_field=$oldid, you need to expect to be getting multiple rows that will needt ob e inserted with referencingfield=$newid
[01:13:13] <peerce> that can be done in one query for each referencing table, like INSERT INTO referencingtable1(list-of-fields-except-id) SELECT field2,$NEWID,field4 FROM referencingtabl1 WHERE field3=$OLDID
[01:13:13] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[01:13:27] <peerce> thats assuming field3 is the FK reference to persons(id)
[01:13:51] <peerce> note I skipped field1 which is presumalby that referencingtables' autogenerated ID
[01:14:12] <peerce> this gets considerably hairier if there's references to the referencing table.
[01:15:38] *** Joins: volga629 (~volga629@72.139.93.26)
[01:16:36] <StuckMojo> andres: think we can do a doc patch and have it backported?
[01:20:32] *** Quits: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net) (Read error: Connection reset by peer)
[01:21:03] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[01:21:33] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[01:21:53] *** Joins: merzo (~Thunderbi@95.133.10.76)
[01:26:27] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[01:27:36] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[01:27:52] *** Joins: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net)
[01:28:02] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Ping timeout: 272 seconds)
[01:29:11] *** Joins: joilerv (~joilerv@145.224.65.2)
[01:30:31] <andres> StuckMojo: yes
[01:31:36] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[01:31:39] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.3)
[01:32:28] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[01:34:36] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 240 seconds)
[01:38:41] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[01:39:32] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 250 seconds)
[01:40:29] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[01:41:45] *** Quits: Simplar (~Simplar@188.163.93.241) (Quit: Going offline, see ya! (www.adiirc.com))
[01:44:34] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[01:46:12] *** Quits: auri (~quassel@fsf/member/auri) (Quit: auri)
[01:46:37] *** Quits: joilerv (~joilerv@145.224.65.2) (Quit: Textual IRC Client: www.textualapp.com)
[01:48:18] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 272 seconds)
[01:48:31] *** Joins: cliluw (~cliluw@47.147.77.43)
[01:49:07] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[01:54:51] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[01:55:24] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Remote host closed the connection)
[01:56:05] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[01:57:10] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[01:58:20] *** Joins: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au)
[01:58:50] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[01:59:43] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[02:03:14] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[02:03:33] *** Quits: test1` (~user@p200300f3a70c0d66716e674eb594b861.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[02:07:26] *** Joins: concrete1houses (~g@209.6.150.53)
[02:08:00] <concrete1houses> What do you do if you want to backup a table.  Then restore it and you get like key errors
[02:08:34] <concrete1houses> the restore was try ing to drop and restore the databas
[02:08:36] <concrete1houses> eholy shit
[02:08:37] <concrete1houses> lol
[02:08:44] <concrete1houses> im fucked
[02:08:53] <concrete1houses> it failed happily
[02:09:07] <concrete1houses> dbeaver might not be trustworthy
[02:09:24] <concrete1houses> right clck tool backup on the table seemed so convenient
[02:09:43] <concrete1houses> so its a big problem to dump restore a db that has constraints the db will say nope?
[02:09:49] <concrete1houses> Imean a db table
[02:10:09] <concrete1houses> \q
[02:10:12] <concrete1houses> \quit
[02:10:17] <concrete1houses> \exit
[02:10:19] <concrete1houses> \part
[02:10:25] <concrete1houses> q
[02:10:34] <peerce> tables that are referenced and/or have refenences to other tables are non-trivial to backup on their own.
[02:10:39] <pnorman> looks like you're trying to type in a psql window, not irc
[02:10:45] <peerce> to restore a table backup, you first have to truncate the table
[02:11:14] <StuckMojo> pg_dump --table foo  won't dump FKs to tables that aren't in the dump, no?
[02:11:41] <StuckMojo> or you could dump just the data from that table
[02:11:47] <peerce> it will dump FK references that are in the table you're dumping.
[02:12:11] <peerce> but if other tables reference this one, you get into a whole chickens and eggs thing
[02:12:18] <concrete1houses> so its smarter to export a select to file
[02:12:22] <concrete1houses> then read it back
[02:12:48] <concrete1houses> whats awesome is one column is a HTML template for the web app
[02:13:01] <StuckMojo> when i have these issues, i usually load the data into a scratch table, then move it from there to the real table using sql so i can skip invalid rows
[02:13:13] <peerce> mixing your view layer with your data layer is bad practice
[02:13:14] <concrete1houses> and when I dump to csv and open in excel the tempalte html is in wrong column all over teh palce
[02:14:06] <concrete1houses> is it bad practice to have production support team running all kinda sql data cleanup scripts on the db with no ticket or visibility? seems like disaster
[02:14:20] <concrete1houses> even though they promise to not change table strucutre
[02:14:42] <concrete1houses> client wants all kinda data cleanu from a crappy migration 2 year ago
[02:15:45] <concrete1houses> scratch table hmm ok
[02:16:04] *** Joins: carragom (~textual@201.204.94.76)
[02:16:48] *** Quits: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[02:19:04] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[02:20:36] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[02:20:43] *** Quits: enhwohrom^ (~enhwohrom@50-202-219-146-static.hfc.comcastbusiness.net) (Remote host closed the connection)
[02:20:47] *** Joins: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr)
[02:24:01] <concrete1houses> chicken and egg
[02:24:26] <concrete1houses> I tried to say in the meeting that all db changes should go through dev.
[02:24:41] <concrete1houses> See I think production support needs to feel useful
[02:24:57] <concrete1houses> and the client find all kind of old sata mistakes
[02:25:19] <concrete1houses> feels wrong to have another team modify data
[02:25:27] <concrete1houses> even if they promise not to change db objects
[02:26:00] <concrete1houses> How do real shops do things?
[02:26:19] <concrete1houses> potentailly I can give ideas to run things better here
[02:26:38] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[02:26:44] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[02:28:33] *** Quits: fraxamo (~fraxamo@bexl-11-b2-v4wan-163006-cust259.vm4.cable.virginm.net) (Remote host closed the connection)
[02:28:55] *** Joins: fraxamo (~fraxamo@bexl-11-b2-v4wan-163006-cust259.vm4.cable.virginm.net)
[02:32:59] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[02:35:27] *** Quits: fcr (~fran@r167-56-77-246.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[02:39:58] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 256 seconds)
[02:41:07] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[02:42:31] *** Quits: michalz (~michalz@185.246.204.61) (Remote host closed the connection)
[02:43:05] <peerce> all our schema changes went through a data governence committee, then were tested on a test/dev platform, packaged for deployment, then that packaging was tested on 'staging' before deploying on production
[02:43:43] <peerce> the data governence committee had representives from all stakeholders, development, engineering, operations
[02:44:24] *** Joins: fcr (~fran@r186-48-40-172.dialup.adsl.anteldata.net.uy)
[02:44:58] <peerce> all changes were made with .sql files, often loaded via perl scripts, and all of that was stored in source code control along with the core application source codes
[02:53:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[02:56:20] *** Quits: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net) (Quit: merzo)
[02:56:43] *** Joins: merzo (~Thunderbi@95.133.10.76)
[02:59:07] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:01:48] *** Quits: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net) (Ping timeout: 240 seconds)
[03:06:38] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 250 seconds)
[03:19:32] *** Quits: spacenautx (~spacenaut@user/spacenautx) (Quit: WeeChat 3.4)
[03:20:10] *** Joins: hojasuelta (~hojasuelt@50.210.61.206)
[03:21:24] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[03:21:56] *** Quits: hojasuelta (~hojasuelt@50.210.61.206) (Remote host closed the connection)
[03:23:55] *** Quits: impermanence (~impermane@c-75-73-193-204.hsd1.mn.comcast.net) (Quit: Connection closed)
[03:25:18] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[03:25:50] *** Quits: evdubs (~evdubs@user/evdubs) (Quit: Leaving)
[03:26:05] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[03:26:22] *** Joins: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net)
[03:30:30] *** Joins: auri (~quassel@fsf/member/auri)
[03:31:30] *** Joins: JanC_ (~janc@user/janc)
[03:31:40] *** JanC is now known as Guest6602
[03:31:40] *** JanC_ is now known as JanC
[03:33:04] *** Quits: Guest6602 (~janc@user/janc) (Ping timeout: 250 seconds)
[03:33:18] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 260 seconds)
[03:37:57] *** Quits: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net) (Read error: Connection reset by peer)
[03:44:26] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[03:44:50] <stairmast0r> is it possible to set multiple columns in one query, but set some of them only conditionally?
[03:45:21] <StuckMojo> ??case
[03:45:21] <pg_docbot> https://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-CASE :: https://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#PLPGSQL-CONDITIONALS
[03:45:29] <stairmast0r> ahh thank you!
[03:45:32] <StuckMojo> stairmast0r: first link
[03:46:00] <StuckMojo> maybe anyway, depending on what you're trying to do
[03:46:16] <StuckMojo> you can certainly do it using plpgsql
[03:47:54] <peerce> the whole tuple will be replaced anyways with a new tuple, so doing something like UPDATE tablename SET field1=something, field2=case when condition then something else field2 end, ...  where ....
[03:48:09] *** Joins: tozhu (~tozhu@218.89.253.61)
[03:48:12] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 240 seconds)
[03:48:29] <StuckMojo> stairmast0r: you should probably explain a little more clearly what you're wanting to do
[03:48:34] <stairmast0r> peerce: that's kinda what i was going for
[03:48:34] <StuckMojo> and why
[03:49:00] <StuckMojo> oh, right, peerce is correct. that's the easy way
[03:49:04] <stairmast0r> toggling a bool, and setting a timestamp to the current time whenever the bool is toggle from false to true
[03:49:08] <StuckMojo> i forgot you can do update set id=id ...
[03:49:37] *** Joins: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8)
[03:49:38] <StuckMojo> that little trick causes the tuple to be updated (and thus triggers to fire), without changing the data
[03:49:41] <stairmast0r> ahhh i just caught that
[03:49:46] <stairmast0r> after rereading
[03:50:05] <stairmast0r> that should do it then
[03:50:47] <stairmast0r> is the case evaluated before or after setting field1=something ?
[03:52:31] <stairmast0r> i guess it's after because that seemed to work perfectly lol
[03:52:32] <stairmast0r> thank you guys
[03:55:41] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[03:56:27] *** Quits: Rashad (~textual@149.200.188.246) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[03:58:46] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[03:59:52] *** Quits: Su-Shee (~Susanne@p4ff49ea8.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[04:00:32] <StuckMojo> anyone know of a metric in postgres that would show your amount overhead from enabling sync replication?
[04:01:30] *** Joins: Su-Shee (~Susanne@p508948e0.dip0.t-ipconnect.de)
[04:03:08] *** Quits: trycatch (~tc@user/trycatch) (Quit: Leaving)
[04:06:13] <johto> pretty difficult to measure in general
[04:06:29] <johto> I wonder if the dtrace hooks are useful
[04:07:18] *** Quits: sprite-- (~sprite__@ip68-1-116-32.pn.at.cox.net) (Ping timeout: 250 seconds)
[04:07:21] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[04:08:44] *** Joins: trycatch (~tc@user/trycatch)
[04:11:06] <StuckMojo> there's no metric for "this much time spent for a commit"
[04:11:10] <StuckMojo> correct/
[04:11:15] *** Quits: Auron (Auron956@user/auron) (Remote host closed the connection)
[04:11:22] * StuckMojo sighs
[04:11:27] <StuckMojo> correct?
[04:11:39] <StuckMojo> apparently oracle has that
[04:11:49] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 256 seconds)
[04:12:13] *** Joins: cliluw (~cliluw@47.147.77.43)
[04:15:10] *** Quits: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[04:18:41] *** Quits: maciek_ (~maciek@2600:1700:a412:1c00:1e5f:f00f:8744:9b41) (Ping timeout: 245 seconds)
[04:20:57] *** Joins: zachary (~zachary@124.133.18.218)
[04:30:04] *** Quits: realies (~realies@user/realies) (Quit: Ping timeout (120 seconds))
[04:30:39] *** Joins: realies (~realies@user/realies)
[04:30:57] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[04:32:27] *** Joins: cation21 (cation@user/cation)
[04:32:44] *** Quits: zachary (~zachary@124.133.18.218) (Ping timeout: 256 seconds)
[04:33:35] *** Quits: cation (cation@user/cation) (Ping timeout: 256 seconds)
[04:35:46] *** cation21 is now known as cation
[04:38:04] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 250 seconds)
[04:39:02] *** Joins: hojasuelta (~hojasuelt@50.34.135.134)
[04:39:38] *** Quits: rvalue (~rvalue@user/rvalue) (Quit: ZNC - https://znc.in)
[04:39:50] *** Joins: rvalue (~rvalue@user/rvalue)
[04:40:32] *** Joins: zachary (~zachary@124.133.18.218)
[04:40:59] *** Quits: jhammerman (~joe.hamme@98.246.188.6) (Quit: jhammerman)
[04:41:17] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[04:42:56] *** Quits: xinming (~xinming@115.221.15.154) (Ping timeout: 256 seconds)
[04:43:00] *** Quits: hojasuelta (~hojasuelt@50.34.135.134) (Ping timeout: 240 seconds)
[04:44:42] *** Joins: xinming (~xinming@115.221.10.238)
[04:44:47] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[04:47:25] *** Quits: csd (~csd@c-73-22-175-211.hsd1.il.comcast.net) (Quit: Client closed)
[04:47:52] *** Joins: maciek_ (~maciek@2600:1700:a412:1c00:4f89:b487:9c3e:bcd3)
[04:51:14] *** Quits: TomyWork (~TomyLobo@p200300e80f0067008d39a43f86b23c6c.dip0.t-ipconnect.de) (Remote host closed the connection)
[04:53:34] *** Quits: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr) (Ping timeout: 260 seconds)
[04:57:41] <andres> StuckMojo: It'd not be hard to measure dynamically, using bpf based tooling. If you have the sufficient permissions, of course.
[04:57:58] <andres> You can approximate it otherwise sampling wait events.
[04:57:59] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[04:58:48] *** Quits: peteyboy1 (~peteyboy1@95.169.226.66) (Ping timeout: 256 seconds)
[04:59:25] *** Quits: cation (cation@user/cation) (Ping timeout: 240 seconds)
[05:00:03] <StuckMojo> andres: so you'd have to look at pg_stat_activity where wait_event_type = the waiting for syncronous commit event type...but does state_change column change with the wait_event_type changes?
[05:02:03] *** Joins: cation (cation@user/cation)
[05:02:50] <andres> No.
[05:03:09] <andres> At least not generally.
[05:06:49] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[05:07:15] *** Joins: zumba_addict77 (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6)
[05:07:39] *** Joins: hojasuelta (~hojasuelt@50.34.135.134)
[05:12:14] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[05:19:09] <StuckMojo> mmm...so you'd still have trouble measuring the time...especially if it's only milliseconds
[05:25:38] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[05:29:14] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[05:29:31] *** Quits: k_sze (~k_sze@mail2.kalunite.net) (Quit: ZNC 1.8.2 - https://znc.in)
[05:29:31] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[05:32:54] *** Joins: k_sze (~k_sze@mail2.kalunite.net)
[05:33:37] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[05:35:42] *** Quits: f3f3lix (~weechat@55d4a96a.access.ecotel.net) (Ping timeout: 250 seconds)
[05:37:37] *** Joins: f3f3lix (~weechat@55d4b1da.access.ecotel.net)
[05:38:10] <glik22_> i'd like to create a read-replica using logical replication. my primary has been around for years but the wal_level was not set to "logical" until recently. if i create a publication and spin up a new db with a subscription, will the new db get all data from years ago as well?
[05:39:35] <glik22_> if not, what's a better way to do it? i can create a snapshot of the db and restore, but how would the subscription know where to start from (e.g. which wal file to look at first)
[05:40:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[05:44:02] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[05:45:08] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Quit: Quitting)
[05:45:45] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[05:45:50] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[05:47:04] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[05:47:47] *** Joins: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29)
[05:48:20] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 272 seconds)
[05:52:46] *** Quits: Su-Shee (~Susanne@p508948e0.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[05:53:02] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Ping timeout: 250 seconds)
[05:54:21] *** Joins: Su-Shee (~Susanne@p4ffc7977.dip0.t-ipconnect.de)
[05:55:21] *** Joins: Blasphemian (~Blasphemi@user/blasphemian)
[05:55:40] <StuckMojo> glik22_: of course it will
[05:55:51] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[05:56:31] <StuckMojo> the first step of subscription is to COPY the data in each table, *then* play back wal replication that happened while the copy was ongoing
[05:57:12] <StuckMojo> replication itself just replicates changes to data (that's what's in the WAL)
[05:58:19] *** Parts: Blasphemian (~Blasphemi@user/blasphemian) (The Lounge - https://thelounge.chat)
[06:02:44] *** Quits: tozhu (~tozhu@218.89.253.61) (Quit: tozhu)
[06:02:49] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: ncwbqcfe)
[06:02:54] *** Quits: bmomjian (~bruce@momjian.us) (Ping timeout: 272 seconds)
[06:04:25] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[06:04:25] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[06:04:25] *** Joins: hoppity (~hoppity@user/hoppity)
[06:05:25] *** Quits: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net) (Quit: merzo)
[06:05:41] *** Joins: merzo (~Thunderbi@95.133.10.76)
[06:06:14] *** Quits: KaitoDaumoto (Frat@user/kaitodaumoto) (Remote host closed the connection)
[06:07:22] *** Joins: tozhu (~tozhu@218.89.253.61)
[06:08:04] *** Quits: justAstache (~justache@user/justache) (Read error: Connection reset by peer)
[06:08:56] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[06:09:12] *** Joins: justAstache (~justache@user/justache)
[06:10:52] *** Quits: tozhu (~tozhu@218.89.253.61) (Client Quit)
[06:15:33] *** Quits: zumba_addict77 (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6) (Quit: Client closed)
[06:26:46] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[06:27:39] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[06:29:48] *** Quits: Guest6792 (~vit@chello085216193138.chello.sk) (Ping timeout: 240 seconds)
[06:29:55] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[06:31:15] *** Joins: bmomjian (~bruce@momjian.us)
[06:32:52] *** Quits: f3f3lix (~weechat@55d4b1da.access.ecotel.net) (Ping timeout: 256 seconds)
[06:33:38] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[06:33:53] *** Joins: merzo (~Thunderbi@95.133.10.76)
[06:34:48] *** Joins: f3f3lix (~weechat@55d4a38c.access.ecotel.net)
[06:35:40] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[06:39:26] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[06:40:03] *** Quits: Echoz (~chris@user/echoz) (Quit: WeeChat 3.4)
[06:40:45] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[06:40:50] *** Joins: zlinux (~zlinux@142.247.5.33)
[06:40:51] *** Joins: Echoz (~chris@user/echoz)
[06:44:04] *** Quits: n0fun_ (~jack@i577BC054.versanet.de) (Ping timeout: 272 seconds)
[06:44:17] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 240 seconds)
[06:49:01] *** Quits: hojasuelta (~hojasuelt@50.34.135.134) ()
[06:50:46] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[06:51:11] *** Joins: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net)
[06:51:42] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[06:55:32] *** Quits: martti (~martti@46-126-48-136.dynamic.hispeed.ch) (Ping timeout: 240 seconds)
[06:55:57] *** Quits: Vacuity (~Vacuity@user/vovo) (Ping timeout: 240 seconds)
[06:58:01] *** Joins: Vacuity (~Vacuity@user/vovo)
[07:01:20] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[07:04:57] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[07:07:39] *** Joins: Azem (~haise01@user/haise01)
[07:11:19] *** Quits: Emet-Selch (~haise01@user/haise01) (Ping timeout: 272 seconds)
[07:21:48] <andres> StuckMojo: There's a reason I only named it as a second choice...
[07:23:05] <andres> You'd not *need* precise times though. Measuring the increase of samples of waiting for flushes gives you a pretty good idea.
[07:30:36] *** Quits: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net) (Quit: merzo)
[07:30:56] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:31:08] *** Quits: merzo (~Thunderbi@95.133.10.76) (Read error: Connection reset by peer)
[07:31:32] *** Joins: merzo1 (~Thunderbi@76-10-133-95.pool.ukrtel.net)
[07:31:37] *** Quits: merzo1 (~Thunderbi@76-10-133-95.pool.ukrtel.net) (Client Quit)
[07:32:28] *** Joins: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net)
[07:32:38] *** Quits: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net) (Client Quit)
[07:33:04] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:33:08] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:34:06] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:34:09] *** Quits: merzo (~Thunderbi@95.133.10.76) (Read error: Connection reset by peer)
[07:34:37] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:34:38] *** Quits: merzo (~Thunderbi@95.133.10.76) (Read error: Connection reset by peer)
[07:37:04] *** Joins: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net)
[07:37:10] *** Quits: merzo (~Thunderbi@76-10-133-95.pool.ukrtel.net) (Client Quit)
[07:37:54] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[07:38:32] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[07:39:11] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:39:50] *** Quits: sreve (~quassel@p4ff44f33.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[07:40:05] *** Joins: sreve (~quassel@p4ff44ddc.dip0.t-ipconnect.de)
[07:40:11] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:40:28] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:40:41] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:41:07] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:41:12] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:41:28] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:41:42] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:42:01] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:42:12] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:43:01] *** Joins: merzo1 (~Thunderbi@95.133.10.76)
[07:43:15] *** Quits: merzo1 (~Thunderbi@95.133.10.76) (Client Quit)
[07:43:37] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:43:43] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:44:02] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:44:14] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:44:38] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:44:43] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:45:08] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:45:14] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:45:39] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:45:45] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:46:33] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:47:15] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:47:24] *** Quits: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br) (Ping timeout: 272 seconds)
[07:47:40] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:47:45] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:48:10] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:48:15] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:49:04] *** Joins: merzo1 (~Thunderbi@95.133.10.76)
[07:49:16] *** Quits: merzo1 (~Thunderbi@95.133.10.76) (Client Quit)
[07:49:41] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:49:48] *** Quits: merzo (~Thunderbi@95.133.10.76) (Read error: Connection reset by peer)
[07:50:06] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[07:50:43] *** Joins: mattil (~mattil@helsinki.portalify.com)
[07:51:03] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:51:18] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:52:13] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:52:17] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:53:12] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:53:20] *** Quits: merzo (~Thunderbi@95.133.10.76) (Read error: Connection reset by peer)
[07:53:35] *** Joins: merzo1 (~Thunderbi@95.133.10.76)
[07:53:50] *** Quits: merzo1 (~Thunderbi@95.133.10.76) (Client Quit)
[07:54:12] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:54:18] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:54:44] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:54:49] *** Quits: merzo (~Thunderbi@95.133.10.76) (Client Quit)
[07:55:17] *** Joins: merzo (~Thunderbi@95.133.10.76)
[07:59:17] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[08:01:14] *** Joins: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr)
[08:07:07] *** Joins: k8yun (~k8yun@user/k8yun)
[08:12:02] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[08:22:27] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[08:29:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[08:31:11] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[08:33:55] *** Joins: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[08:37:31] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[08:42:21] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[08:43:32] *** Quits: lechner (~lechner@debian/lechner) (Ping timeout: 240 seconds)
[08:44:12] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[08:44:47] *** Joins: jhammerman (~joe.hamme@98.246.188.6)
[08:44:50] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[08:57:05] *** Quits: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr) (Ping timeout: 256 seconds)
[09:01:31] <gambl0re> is it possible to backup a remote db via psql?
[09:02:13] <peerce> well, you back up with pg_dump normally, but yes, if that database lets you connect with psql, then you can also connect with pg_dump using the same -h -p -d -u parameters
[09:02:37] *** Quits: maciek_ (~maciek@2600:1700:a412:1c00:4f89:b487:9c3e:bcd3) (Ping timeout: 240 seconds)
[09:02:54] *** Quits: jhammerman (~joe.hamme@98.246.188.6) (Quit: jhammerman)
[09:03:09] *** Quits: AJTJ (~AJTJ@d205-234-49-159.yt.northwestel.net) (Quit: Leaving...)
[09:04:57] <peerce> pg_dump, pg_restore is commonly packaged with the postgresql-client stuff.
[09:05:05] <peerce> with psql too.
[09:07:43] *** Quits: zachary (~zachary@124.133.18.218) (Remote host closed the connection)
[09:08:00] *** Joins: zachary (~zachary@124.133.18.218)
[09:13:57] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 240 seconds)
[09:15:02] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[09:20:01] *** Joins: test1` (~user@p200300f3a70c0d9290c4a1e8530a7ef5.dip0.t-ipconnect.de)
[09:21:00] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:23:47] *** Joins: k8yun_ (~k8yun@user/k8yun)
[09:27:00] *** Quits: k8yun (~k8yun@user/k8yun) (Ping timeout: 240 seconds)
[09:29:57] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Quit: Quitting)
[09:31:05] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 256 seconds)
[09:34:31] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[09:39:42] *** Joins: eroux (~eroux@102-65-85-242.ftth.web.africa)
[09:41:12] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[09:41:21] *** Joins: ponsfrilus1 (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[09:41:28] *** Joins: merzo (~Thunderbi@95.133.10.76)
[09:42:36] *** Quits: ponsfrilus (~Thunderbi@vpn-254-038.epfl.ch) (Ping timeout: 240 seconds)
[09:42:36] *** ponsfrilus1 is now known as ponsfrilus
[09:46:53] *** Joins: epony (epony@user/epony)
[09:47:27] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Quit: Quitting)
[09:53:48] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[09:54:13] *** Joins: merzo (~Thunderbi@95.133.10.76)
[10:02:06] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[10:02:54] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[10:03:16] *** Joins: merzo1 (~Thunderbi@95.133.10.76)
[10:03:17] *** Joins: mattil (~mattil@helsinki.portalify.com)
[10:04:12] *** Quits: zachary (~zachary@124.133.18.218) (Ping timeout: 272 seconds)
[10:05:25] *** merzo1 is now known as merzo
[10:06:30] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[10:23:31] *** Joins: darutoko (~darutoko@37.21.145.248)
[10:33:35] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[10:33:55] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[10:34:00] *** Quits: randir (~randir@85.249.36.97) (Remote host closed the connection)
[10:34:44] *** Quits: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca) (Ping timeout: 252 seconds)
[10:35:08] *** Joins: tozhu (~tozhu@218.89.253.61)
[10:38:20] *** Joins: the_lanetly_052 (~the_lanet@194.135.168.16)
[10:42:44] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[10:45:57] *** Quits: defjam (~eb0t@90.196.141.185) (Ping timeout: 250 seconds)
[10:47:24] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[10:47:29] *** Joins: randir (~randir@93.159.239.42)
[10:47:35] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[10:47:51] *** Joins: defjam (~eb0t@90.210.89.170)
[10:47:56] *** Joins: mattil (~mattil@helsinki.portalify.com)
[10:48:49] *** Joins: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca)
[10:49:17] *** Quits: merzo (~Thunderbi@95.133.10.76) (Quit: merzo)
[10:49:34] *** Joins: merzo (~Thunderbi@95.133.10.76)
[10:52:07] *** Joins: Simplar (~quassel@188.163.93.241)
[10:52:33] *** Joins: Atque (~Atque@user/atque)
[10:52:36] *** Quits: Atque (~Atque@user/atque) (Client Quit)
[10:53:00] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[10:59:04] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[11:01:05] *** Joins: gleu (~guillaume@37.165.134.70)
[11:02:41] *** Joins: mattil (~mattil@d51n63ths1p8wk5pk1z-4.rev.dnainternet.fi)
[11:03:42] <Simplar> Suppose I have a query: `SELECT "id", "name", (SELECT json_agg(e) FROM client_contacts JOIN client_contacts e on client_contacts.client_id=e.id WHERE client_contacts.client_id = clients.id) AS "contacts" FROM "clients" ORDER BY "clients"."name" ASC, "clients"."id" ASC;`. How do I WHERE the fields of a `contacts` field of a client, basically, how do I query json_agg objects? For example, I want to query for contacts.phone where phone is a column inside
[11:03:42] <Simplar>  json_agg
[11:06:44] *** Quits: mattil (~mattil@d51n63ths1p8wk5pk1z-4.rev.dnainternet.fi) (Remote host closed the connection)
[11:07:11] *** Joins: mattil (~mattil@d51n63ths1p8wk5pk1z-4.rev.dnainternet.fi)
[11:08:54] *** Joins: Guest6792 (~vit@chello085216193138.chello.sk)
[11:09:13] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[11:10:16] <peerce> why are you using json_agg if you want sql values ?
[11:10:28] *** Quits: mattil (~mattil@d51n63ths1p8wk5pk1z-4.rev.dnainternet.fi) (Remote host closed the connection)
[11:10:38] *** Joins: mattil (~mattil@d51n63ths1p8wk5pk1z-4.rev.dnainternet.fi)
[11:11:00] *** Joins: mrwick (~mrwick@user/mrwick)
[11:11:16] *** Joins: shiranaihito (~textual@61-64-208-160-adsl-tpe.dynamic.so-net.net.tw)
[11:11:58] *** Joins: shiranaihito_ (~textual@61-64-208-160-adsl-tpe.dynamic.so-net.net.tw)
[11:11:58] *** Quits: shiranaihito (~textual@61-64-208-160-adsl-tpe.dynamic.so-net.net.tw) (Read error: Connection reset by peer)
[11:14:39] <Simplar> peerce: how to get them then?
[11:15:07] <Simplar> for example, if i want to get only clients that have contacts which have "name" LIKE %something%
[11:15:29] *** Joins: manti7 (~manti7@176.10.104.94)
[11:17:00] <hifi> so postgresql forks per connection and I'm struggling to understand the effective resident memory use calculation that docker is trying to do, docker reports postgres is using 20GB of RAM but "free" on the system shows only less than 7.5GB is actually in use and 20GB is in buff/cache
[11:17:43] <hifi> is this because how RSS memory is reported from forks that makes docker 100% confused?
[11:18:00] <Zr40> shared_buffers is counted per process while it's actually only allocated once
[11:19:42] <peerce> can you take this fiddle, and flesh out your fields and data values, so we can see whats going on here?    https://dbfiddle.uk/?rdbms=postgres_14&fiddle=817996f88b50f92fb5e5a5e2196a04fd
[11:20:23] <peerce> sounds like docker doesn't understand shared memory mappings
[11:20:47] <hifi> yeah, these stats are completely off
[11:21:07] *** Quits: mattil (~mattil@d51n63ths1p8wk5pk1z-4.rev.dnainternet.fi) (Remote host closed the connection)
[11:21:07] <peerce> IIRC, postges uses a memory mapped temporay file for shared_buffers now, instead of using SysV SHM stuff.
[11:21:36] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[11:22:35] <hifi> wonder how hard it is to workaround this, of course not a pg issue, thanks for pointing out the shared_buffers bit as well
[11:23:12] <hifi> I'm trying to gather fairly realistic statistics of memory per connection including all the overhead
[11:24:23] <hifi> I talked about it sometime ago here that I have this weird workload that's mostly a lot of connections so I'm predicting capacity based on that for horizontal scaling
[11:24:29] <peerce> tbe emmory consumers can be dynamic, things like work_mem, thats allocated per active query, per 'query node' in the plan.   kida hard to explain that last
[11:25:03] <hifi> indeed, but these are fairly idle connections that work with databases in megabytes range :)
[11:25:09] <peerce> like, if you have a work_mem of 128MB, and 200 connections, and all 200 connections hiit you with a simple query at once, that will allocate 200 work_mems.  but if those are complex queries
[11:26:04] <peerce> hifi use a connection pool to reduce idle connections.    apps grab a pool entry, do a transaction, commit and release the connection back to the pool.
[11:26:07] <hifi> we already dropped work_mem to 1MB with no issues
[11:26:48] <hifi> pooler doesn't help when we have one connection per database and we have as many databases as connections
[11:27:10] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 272 seconds)
[11:27:41] *** Quits: zlinux (~zlinux@142.247.5.33) (Read error: Connection reset by peer)
[11:27:54] <hifi> our strategy right now is trying to analyze and minimize per-connection memory use and predict how much we can do with a set amount of RAM
[11:28:19] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[11:28:51] *** Joins: zlinux (~zlinux@149.109.9.128)
[11:29:59] <peerce> reduce the number of actual postgres server connections via a connection pooler.
[11:30:14] <peerce> can have 1000s of connectiosn to the pool, which share 64 database connections, or whatever.
[11:30:33] <peerce> if all 64 database connections are in use, the next request has to wait for one to be done.
[11:30:44] <peerce> as long as its mostly short transactions, this works *great*
[11:31:02] <hifi> maybe this helps explain it a bit: one instance has around 1.9k databases right now
[11:31:15] <peerce> a 32 core database server probably hits  its highest total transactions per second
[11:31:18] <peerce> wait, WAHAT?
[11:31:20] *** Joins: palasso (~palasso@user/palasso)
[11:31:25] <peerce> 1900 different databases on one server?
[11:31:32] <hifi> yes, now you're with me!
[11:32:12] <peerce> huh, our servers were dedicated for high performance of a single database.    each major database in our process system had its own dedicated servers.
[11:32:20] <peerce> we didn't even virtualize them
[11:32:28] *** Joins: Klinda (~superleag@user/klinda)
[11:32:30] <hifi> indeed, this is a complete opposite of a normal database load
[11:32:55] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[11:33:05] <peerce> well, excpet on IBM Power with AIX, where the virtualization ("LPAR") was almost entirely hardware and scaled linearly in both CPU and IO
[11:33:23] <hifi> the only metric that really matters here is ram per connection and trying to keep the simultaneous connections low but you can do only so much if each database needs to be queried around once per minute at least
[11:34:13] <peerce> work_mem is allocated per query node, not per connection
[11:34:42] <peerce> the stuff thats allocated per connection is pretty much fixed by postgres' architecture
[11:35:18] <peerce> sockets, a system process, each process has to read the conf and configure itself accordingly, etc.
[11:36:28] <peerce> Simplar; did I lose you?   did you get anywhere with that fiddle?   hit 'run', then copy the URL back here so we can see where you're at when you're ready to show n tell.
[11:36:59] <hifi> anyway, thanks, I'll look into getting better RAM stats as that's the real issue here
[11:38:17] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 240 seconds)
[11:38:43] <Simplar> peerce: sorry, something urgent came up in my place, I'm back now
[11:39:34] <peerce> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=b7946dc248b0b9df477e84afbbd8b004  thats a better starting place, I tried to suss out what you're doing, but not sure I understand the selfjoin of client_contacts
[11:40:00] <peerce> so you'll need enough data in those inserts to show what it is you are trying to do.
[11:42:10] *** Joins: shka (~herr@109.231.3.55)
[11:42:53] <Simplar> peerce: https://dbfiddle.uk/?rdbms=postgres_14&fiddle=a2acb543319c47619f354e115556cdee
[11:43:15] <peerce> oh, i rewrote your query, still does same thing, but does it cleaner  https://dbfiddle.uk/?rdbms=postgres_14&fiddle=7299137c3daea56e1cfe93b98976f96c
[11:43:17] <Simplar> For example, it should have all 3 inserts I did
[11:43:54] <Simplar> Still 'jill' in all 3 cases
[11:44:26] *** Quits: shiranaihito_ (~textual@61-64-208-160-adsl-tpe.dynamic.so-net.net.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[11:44:32] <peerce> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=2dc5b00ca98e4e326927652b1f03137d  <=  same tables and data as your last, and same results, but with cleaned up simplied query (subqueries just confuse things)
[11:45:04] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[11:45:55] <peerce> i still don't understand the self join of client_contacts
[11:46:33] <peerce> here ya go, tho, https://dbfiddle.uk/?rdbms=postgres_14&fiddle=4696d1a27c630398f6238a4f4a14940f
[11:46:42] <peerce> i changed the json_agg(e) to json_agg(c)
[11:47:40] <peerce> so now, what is it you want instead of that JSON array  you agged ?
[11:47:58] *** Joins: mattil (~mattil@helsinki.portalify.com)
[11:48:36] <peerce> like this?  https://dbfiddle.uk/?rdbms=postgres_14&fiddle=a2a053a49d8ef530d7af1a2ed634d45e
[11:49:02] <peerce> or this? https://dbfiddle.uk/?rdbms=postgres_14&fiddle=1d6e5ead3fe2d4842b4a51e2de98b88a
[11:49:19] <peerce> [no json or arrays at all...]
[11:49:38] *** Joins: rendar (~rendar@user/rendar)
[11:50:54] <Simplar> peerce: what i I don't  need duplicate client entries?
[11:51:02] <Simplar> oh, the first case
[11:51:05] <Simplar> wow, smart one
[11:51:25] <Simplar> > like this?  https://dbfiddle.uk/?rdbms=postgres_14&fiddle=a2a053a49d8ef530d7af1a2ed634d45e yes I like that
[11:51:48] <Simplar> But still, there is something
[11:52:31] <peerce> well, provide a few more records that cause it to generate a result you do NOT want, and epxlain what you want and we'll mvoe from there
[11:52:57] <peerce> note that last one you linked, that a POSTGRES SQL array, *not* a JSON array.     not all language bindings are real good about arrays.
[11:53:16] <peerce> thats equiv to a C   *char[]
[11:53:58] <peerce> except C arrays like that, you have to externally keep track of how many rows are in the array.
[11:54:42] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[11:55:22] <peerce> if your language binding isn't array-savvy, you'll be getting the result as a string, and it might be quoted, like https://dbfiddle.uk/?rdbms=postgres_14&fiddle=203f4077b673a746874c797e184be67a   (note I put a , in one of the names)
[11:55:38] <peerce> {"lily,tom",sam,jill}
[11:56:58] <Simplar> peerce: give me a sec
[11:57:01] *** Joins: shiranaihito (~textual@219.85.180.123)
[11:59:29] <Simplar> peerce: https://dbfiddle.uk/?rdbms=postgres_14&fiddle=f8abed96352d5ea9b8b464505b72acad
[11:59:59] <Simplar> For example, I want to select only clients whose contacts has certain name, title or phone
[12:00:07] <Simplar> have*
[12:00:31] <dreinull30> Can I do something along the line of `select AGE(s.geburtsdatum)|| 0 AS alter from schueler s` where 0 is returned instead of nothing?
[12:00:45] <peerce> Simplar; add those conditions to the WHERE clause with AND's
[12:01:58] <peerce> geez, the fiddle is timing out :(
[12:05:44] <peerce> so yeah, add AND c.name = 'someval' AND c.title='someval';   or whatever.      if you have varying combinations of those conditions, you will need to build that query dynamically in your app
[12:06:14] <peerce> be very careful of how you escape user supplied search inputs.
[12:06:31] <peerce> https://xkcd.com/327/
[12:12:00] *** Joins: psoo (~psoo@dslb-002-204-079-161.002.204.pools.vodafone-ip.de)
[12:13:01] *** Joins: Ergo^ (~ergo@91.238.59.144)
[12:13:41] <Simplar> peerce: https://dbfiddle.uk/?rdbms=postgres_14&fiddle=5c0e5aa604a8cabe130e042f0819f5ca ...eh?
[12:14:17] *** Quits: carragom (~textual@201.204.94.76) (Ping timeout: 256 seconds)
[12:16:26] *** Joins: ejjfunky (~ejjfunky@125.164.23.251)
[12:17:41] *** Quits: ejjfunky (~ejjfunky@125.164.23.251) (Remote host closed the connection)
[12:18:04] *** Quits: shiranaihito (~textual@219.85.180.123) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[12:18:23] *** Joins: Vitto (~Vitto@se-14.nat.univ-paris4.fr)
[12:20:47] *** Joins: aLeSD (~aLeSD@91.126.33.194)
[12:21:25] *** Joins: zmt00 (~zmt00@user/zmt00)
[12:24:08] *** Quits: aLeSD (~aLeSD@91.126.33.194) (Client Quit)
[12:28:07] *** Joins: shiranaihito (~textual@219.85.180.123)
[12:29:12] *** Joins: TomyWork (~TomyLobo@p200300e80f0067009c2b9a79280007db.dip0.t-ipconnect.de)
[12:30:07] *** Quits: Jalada (~jalada@2001:470:69fc:105::1:1b69) (Quit: You have been kicked for being idle)
[12:31:09] *** Joins: lkw (~lkw@user/lkw)
[12:31:22] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[12:34:24] <peerce> Simplar; the clients table has no field 'contacts'.
[12:34:28] *** Quits: k8yun_ (~k8yun@user/k8yun) (Quit: Leaving)
[12:34:55] <peerce> "clients"."contacts"."name"    I don't even know what that is.
[12:35:35] <Simplar> but you select something AS contacts
[12:36:06] *** Joins: martti (~martti@46-126-48-136.dynamic.hispeed.ch)
[12:36:13] <peerce> you can't use the output expressions in the WHERE
[12:36:21] <peerce> WHERE runs *before* the data is selected.
[12:36:23] <peerce> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=ccb31fcd7e78461565776bf4382f2ca9   here
[12:36:58] <Simplar> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=915b2adff9b59864896896cc9bada493
[12:37:09] <Simplar> Is it a good idea?
[12:37:32] <peerce> not really.     i'd get rid of the arrays and do it like this.... (give me a minute)
[12:38:15] <peerce> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=80562690234ce0ddab43b3181e739c48
[12:38:20] <peerce> thats the sql way.
[12:38:42] <peerce> arrays wren't even a thing in sql for a long time.   you use tables
[12:39:12] *** Quits: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se) (Read error: Connection reset by peer)
[12:39:35] *** Joins: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se)
[12:39:59] <Simplar> and then I can select distinct client ids which match certain criteria?
[12:41:00] *** Joins: zachary (~zachary@124.133.18.218)
[12:41:01] <peerce> client or contact?     but yeah, to choose which rows you get, use a WHERE clause    https://dbfiddle.uk/?rdbms=postgres_14&fiddle=db9a2301aa14cf746aea9a0ccd82f603
[12:44:07] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[12:45:51] <ne2k> dreinull30, wenn ich richtig verstehe, brauchst du COALESCE
[12:46:00] *** Joins: michalz (~michalz@185.246.204.55)
[12:46:50] <dreinull30> ne2k, top, das wars! Danke
[12:47:06] <ne2k> kp
[12:47:49] <peerce> gads, I remember when the NE2000 was the 10baseT NIC of choice on cheap PCs
[12:47:49] *** Joins: Auron (~Auron956@user/auron)
[12:48:00] <peerce> the 3Com stuff was too expensive.
[12:48:25] <Berge> ne2000 was such a champ
[12:49:13] *** Joins: peteyboy1 (~peteyboy1@95.169.226.66)
[12:50:44] * kjetilho ponders changing nick to 3c509 to trigger even more PTSD in peerce 
[12:50:50] <peerce> it was the Realtek of the 1990s :-p
[12:51:01] <peerce> I liked the 3C905, wooot!
[12:51:02] <Berge> kjetilho: 3c509 <3
[12:51:04] <Simplar> peerce: I need to get clients which have matching names / phones / titles among their contacts
[12:51:25] <Simplar> and I need to get clients without those contacts if possible
[12:51:28] <peerce> for sure, the not-broken variants on the 3C stuff had way lower CPU overhead than stuff like the NE2000
[12:51:40] <Berge> Especially the 3c509's with BNC as well as RJ45
[12:51:48] <ne2k> peerce, indeed, and it's been my IRC nick since my home network consisted of two PCs with 10BASE2 between them; one Linux box in my room with a 56k modem and pppd, and one Win95 box in my dad's office
[12:52:03] <peerce> Simplar; still don't understand why you are joining client's twice.
[12:52:07] <peerce> er, contacts
[12:52:26] *** Quits: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au) (Ping timeout: 245 seconds)
[12:52:37] <ne2k> Simplar, I missed the start, what are you actually trying to do?
[12:53:14] <Simplar> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=3c58d25889a156e758f6d4a97411aa93
[12:53:18] <Simplar> Here is cleaner query
[12:53:52] <Simplar> ne2k: I'm trying to build a query for the table in the fiddle above that will be able to filter clients with distinct ids based on client_contacts table
[12:53:55] <peerce> left join, https://dbfiddle.uk/?rdbms=postgres_14&fiddle=63ec0626f98fbe7a902cc2a9918cfe61
[12:54:08] <peerce> and I took out the extra join of concacts, because I think it was just noise
[12:54:40] <Simplar> In my recent fiddle I did the same
[12:54:49] <peerce> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=84d8824bc4aa4606a4701fc4fa627003
[12:55:00] <ne2k> Simplar, "clients with distinct ids based on contacts?" I don't get waht this means
[12:55:19] <peerce> ne2k i don't think they do either  :D
[12:55:25] *** Quits: _xor (~xor@dsl-50-5-233-169.fuse.net) (Quit: brb)
[12:55:58] *** Joins: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[12:56:10] <ne2k> you've only got contacts for one client
[12:56:59] <Simplar> I want to select clients whose contacts have name, phone, or title containing certain string
[12:58:05] <ne2k> Simplar, so just do select name from clients cl join contacts ct on cl.id = ct.client_id where ct.x = y
[12:58:16] *** Quits: held (~heldchen@user/held) (Ping timeout: 245 seconds)
[12:58:53] <ne2k> or, select distinct name in this case, as it might match more than once
[12:59:14] *** Joins: megamaced (~megamaced@static-90-255-226-34.vodafonexdsl.co.uk)
[12:59:31] <peerce> avoid distinct like the plague, thats a crutch that breaks more things than it solves.
[12:59:40] <peerce> there's times you need it, but I hope this isn't one of them
[13:02:14] <ne2k> peerce, I generally now avoid DISTINCT ON like the plague, but I'm not sure what's wrong with DISTINCT here, it appears to be exactly what is required. do englighten me!
[13:05:30] <peerce> the trouble with DISTINCT is it throws rows out
[13:05:35] <peerce> randomly
[13:05:46] <peerce> or in some arbitrary order that isn't obviouus
[13:06:06] <peerce> wherever possible use GROUP instead
[13:06:24] *** Joins: kakashiAL (~kakashi@41.143.6.180)
[13:06:32] <peerce> and I still don't understand what results he wants, I've just been trying to interpret his moving fuzzy goal posts
[13:08:41] *** Quits: zachary (~zachary@124.133.18.218) (Ping timeout: 256 seconds)
[13:09:01] <peerce> I think he siad he wants clients even if they don't have any contacts, even while he's filtering on contacts.    which is hookay, if thats what you want, here!   https://dbfiddle.uk/?rdbms=postgres_14&fiddle=51912bc58694a5a86d0f2ec282595f2c
[13:10:28] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[13:14:26] <sobel> ne2k: how do you do a groupwise min (or max) without DISTINCT ON?
[13:14:46] <sobel> the mysql way?
[13:15:06] <ne2k> sobel, the old-fashioned way
[13:15:17] <sobel> so the mysql way
[13:15:23] <ne2k> sobel, I don't know what the MySQL way is
[13:15:24] *** Quits: kakashiAL (~kakashi@41.143.6.180) (Ping timeout: 240 seconds)
[13:15:42] <sobel> a lovely subselect is involved
[13:15:59] <ne2k> I discussed this in depth with someone not that long ago
[13:16:02] <ne2k> let me search the history
[13:16:14] <sobel> it's ok, just curious if you knew what you were missing out on
[13:16:36] <ne2k> sobel, I know I'm missing out on utterly terrible performance that creeps up on you as the tables grow
[13:16:51] <sobel> it is interesting practice to studiously avoid one of the better-known extensions of postgresql
[13:17:13] <peerce> select a.id, min(b.val), max(b.val) from a join b on ....
[13:17:16] <peerce> group by a.id
[13:17:24] <peerce> thats how you do it without distinct
[13:19:51] <ne2k> Nov 05 10:26:42 <ne2k>  I had a slow running view query that was pulling the most recent data for each entity. inner query to get the most recent timestamp was using distinct on (a, b) order by a, b, ts desc. switched it to left join lateral (
[13:19:51] <ne2k> select max(ts)) and it's... a bit faster
[13:20:21] <ne2k> Nov 05 10:28:26 <ne2k>  guess how much
[13:20:32] <peerce> yeah, I don't see how Simplars data involves a lateral.
[13:20:34] <ne2k> Nov 05 10:30:25 <ehuelsmann[m]> ne2k: no idea?
[13:21:11] <ne2k> Nov 05 11:15:08 <ne2k>  ehuelsmann[m], THREE-THOUSAND TIMES FASTER
[13:21:14] <peerce> they started with an additional superfluous join, AND a json_agg and were asking how to get fields out of the json.
[13:21:23] *** Joins: held (~heldchen@user/held)
[13:21:32] <peerce> and i was, um, why make a json in the first place if thats not what you want?  a nd somehow we ended up here.
[13:21:43] <peerce> https://dbfiddle.uk/?rdbms=postgres_14&fiddle=51912bc58694a5a86d0f2ec282595f2c
[13:22:01] <ne2k> peerce, Simplar's doesn't. I'm talking with about my aversion to DISTINCT ON
[13:22:18] <peerce> ah.  i thought *I* was the one with an allergy to DISTINCT  :-p
[13:23:09] <sobel> oh i don't use DISTINCT except for analytic questions and then usually on dirty data. i use DISTINCT ON for regular stuff.
[13:23:43] <ne2k> peerce, you were. and I said I didn't have a specific aversion to distinct for something like what I wrote, and then sobel started saying that I was missing a trick my not using DISTINCT ON, which is what I thought when I started writing those queries and then they just got slower and slower and slower over time
[13:24:06] *** Quits: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[13:28:58] <ne2k> sobel, https://dbfiddle.uk/?rdbms=postgres_14&fiddle=22eaaba15546cd781b9b2bbe9a704532 here's the fiddle from the last time I discussed this with gpk2 on 3 Feb
[13:29:22] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 256 seconds)
[13:30:30] <ne2k> sobel, the stuff after line 14 is just proving that the results from the three queries were actually all the same. the three queries are in lines 7-9
[13:30:34] *** Quits: marcel (~marcel@user/marcel) (Quit: The Lounge - https://thelounge.chat)
[13:30:51] *** Joins: marcel (~marcel@user/marcel)
[13:31:50] *** Joins: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[13:33:47] *** Joins: r0 (~r0@rnbc.ist.utl.pt)
[13:50:32] *** Quits: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[13:54:18] *** Quits: brethil (~brethil@user/brethil) (Ping timeout: 256 seconds)
[13:54:35] *** Joins: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[13:54:53] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[14:01:39] *** Joins: r00 (~r0@rnbc.ist.utl.pt)
[14:03:39] *** Quits: r0 (~r0@rnbc.ist.utl.pt) (Ping timeout: 256 seconds)
[14:04:15] *** Joins: brethil (~brethil@93-39-188-207.ip77.fastwebnet.it)
[14:04:15] *** Quits: brethil (~brethil@93-39-188-207.ip77.fastwebnet.it) (Changing host)
[14:04:15] *** Joins: brethil (~brethil@user/brethil)
[14:05:22] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[14:08:27] *** Quits: shiranaihito (~textual@219.85.180.123) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[14:11:17] *** Quits: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[14:13:59] *** Joins: _xor (~xor@dsl-50-5-233-169.fuse.net)
[14:20:19] *** Joins: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[14:26:15] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Ping timeout: 240 seconds)
[14:39:39] *** Quits: fcr (~fran@r186-48-40-172.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[14:41:00] *** Quits: Simplar (~quassel@188.163.93.241) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[14:41:01] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[14:41:37] *** Quits: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se) (Read error: Connection reset by peer)
[14:41:57] *** Joins: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se)
[14:42:45] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[14:46:02] *** Quits: gleu (~guillaume@37.165.134.70) (Ping timeout: 272 seconds)
[14:46:06] *** Joins: walterwhip (~www@user/walterwhip)
[14:46:34] *** Joins: fcr (~fran@r167-60-21-33.dialup.adsl.anteldata.net.uy)
[14:50:25] *** Quits: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[14:50:58] *** Joins: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[14:53:29] *** Joins: mncheck (~mncheck@193.224.205.254)
[14:55:55] *** Joins: n0fun (~jack@mue-88-130-48-060.dsl.tropolys.de)
[14:56:43] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[15:00:55] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[15:06:05] *** Joins: Komzpa (~kom@188.129.241.67)
[15:06:56] *** Quits: zlinux (~zlinux@149.109.9.128) (Read error: Connection reset by peer)
[15:07:28] *** Joins: zlinux (~zlinux@149.109.9.128)
[15:09:18] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[15:09:24] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[15:11:54] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 260 seconds)
[15:13:34] *** Joins: nyov (~nyov@user/nyov)
[15:15:39] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[15:17:18] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[15:19:38] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:fc98:bb5f:7d17:fcbd)
[15:20:52] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[15:21:51] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[15:23:24] *** Quits: merzo (~Thunderbi@95.133.10.76) (Ping timeout: 240 seconds)
[15:23:35] *** Joins: merzo1 (~Thunderbi@95.132.5.229)
[15:24:14] *** Quits: walterwhip (~www@user/walterwhip) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[15:24:48] *** Joins: Rashad (~textual@2a01:9700:1356:c700:b9b4:2ebb:1c61:10be)
[15:25:54] *** merzo1 is now known as merzo
[15:32:06] *** Joins: xocolatl_ (~xocolatl@194.110.113.39)
[15:32:26] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[15:32:54] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[15:33:25] *** Joins: furrymcgee (~devuan@cgn-89-1-209-226.nc.de)
[15:35:27] *** Quits: xocolatl (~xocolatl@194.110.113.55) (Ping timeout: 256 seconds)
[15:36:00] *** Joins: zeden (~zeden@user/zeden)
[15:36:43] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[15:37:51] *** xocolatl_ is now known as xocolatl
[15:39:17] *** Quits: n0fun (~jack@mue-88-130-48-060.dsl.tropolys.de) (Ping timeout: 240 seconds)
[15:41:35] *** Joins: xocolatl_ (~xocolatl@193.32.126.237)
[15:43:28] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[15:43:54] *** Joins: gleu (~guillaume@37.165.134.70)
[15:43:57] *** Quits: xocolatl (~xocolatl@194.110.113.39) (Ping timeout: 256 seconds)
[15:44:56] *** Joins: n0fun (~jack@mue-88-130-48-060.dsl.tropolys.de)
[15:45:47] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[15:46:07] *** Quits: Rashad (~textual@2a01:9700:1356:c700:b9b4:2ebb:1c61:10be) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[15:55:41] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[15:58:27] *** Quits: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[16:00:01] *** Quits: tozhu (~tozhu@218.89.253.61) (Quit: tozhu)
[16:01:33] *** Joins: tozhu (~tozhu@218.89.253.61)
[16:04:10] *** Quits: tozhu (~tozhu@218.89.253.61) (Client Quit)
[16:09:08] *** Joins: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr)
[16:09:17] *** Joins: tozhu (~tozhu@218.89.253.61)
[16:13:59] *** Quits: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se) (Remote host closed the connection)
[16:14:33] *** Joins: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se)
[16:16:53] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Quit: going to lala land)
[16:19:08] *** Quits: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se) (Ping timeout: 272 seconds)
[16:23:26] *** Joins: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se)
[16:26:14] *** Joins: Elodin (~elodin@user/elodin)
[16:27:24] *** Joins: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[16:28:13] *** Joins: lechner (~lechner@debian/lechner)
[16:30:43] *** Quits: tozhu (~tozhu@218.89.253.61) (Quit: tozhu)
[16:30:52] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[16:34:36] *** Joins: tozhu (~tozhu@218.89.253.61)
[16:36:34] *** Joins: Elodin (~elodin@user/elodin)
[16:40:57] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[16:41:43] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:42:35] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[16:43:44] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[16:44:41] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Remote host closed the connection)
[16:46:47] *** Joins: Elodin (~elodin@user/elodin)
[16:51:34] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[16:51:34] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:52:00] *** Joins: Elodin (~elodin@user/elodin)
[16:55:59] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[16:56:21] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[16:57:48] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[17:00:45] <ns12> Hello, when using replication and fallover, can the different computers be running different versions of PostgreSQL?
[17:01:02] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[17:01:53] <colo> it depends, because logical replication is quite flexible, while physical replication is not. don't try it though, ugrading is not a big deal for most deployments.
[17:02:14] *** Joins: Elodin (~elodin@user/elodin)
[17:02:29] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[17:03:47] <ns12> colo: "don't try it though" - Why? What's dangerous?
[17:05:05] <colo> it's going to be more complicated and brittle than just having your primary and replica(s) on the same version at all times (except for brief windows of time while you are performing upgrades)
[17:05:15] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[17:06:24] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:07:05] <ns12> So, how does one upgrade PostgreSQL without making data unavailable?
[17:09:22] <azlev> ns12: logical replication is an option
[17:09:23] <martti> I've used the postgres upgrade scripts many times before, but a simple dump->replay cycle usually does the trick too
[17:11:23] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[17:11:28] <ns12> azlev: Suppose I have two servers running PostgreSQL version 14.1 with replication. I upgrade one server to 14.2, followed by an upgrade at the other server? Is that how it's done?
[17:11:52] <Myon> yes
[17:12:26] *** Joins: Elodin (~elodin@user/elodin)
[17:13:00] <azlev> ah, minor upgrade, you can use even streaming replication
[17:13:32] <ns12> Myon: So, the minimum number of servers is 2 if I want to avoid service interruption during upgrades?
[17:14:13] <Myon> you need to restart the servers anyway, might as well upgrade the software inbetween
[17:14:50] <azlev> ns12: that's depends on you. Your system must cope with the downtime of at least one machine.
[17:14:51] <Myon> upgrade software+restart is pretty fast
[17:14:59] <ns12> Myon: "upgrade the software" - What software are you referring to?
[17:15:36] <Myon> PostgreSQL
[17:15:50] <ns12> azlev: And how do I ensure that PostgreSQL cope with the downtime of at least one machine? By using fallover?
[17:16:39] <ns12> Myon: "you need to restart the servers anyway, might as well upgrade the software inbetween" - What restart are you referring to? I rarely restart machines.
[17:16:46] <peerce> for minor upgrades, the downtime is simply the time it taks to restart the postgres server process and for hte clients to reconnect
[17:17:02] <Myon> ns12: you need to restart PostgreSQL to upgrade from 14.1 to 14.2
[17:17:04] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[17:17:07] *** Joins: memoryleak (~quassel@195-202-248-193.dynamic.hispeed.ch)
[17:17:07] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:17:07] <peerce> that shoudln't take mch time at all, unelssssomething is seriously fubar.
[17:18:09] <ns12> peerce: Wouldn't there be an error in the clients (e.g. web app) if PostgreSQL is unavailable, even if the downtime is brief?
[17:18:34] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[17:20:06] <peerce> the web rectries errors.
[17:20:28] <peerce> and it really shoudln'ty take long o restart after a minor version upgrade
[17:21:04] <peerce> a major upgrade, like 10.x to 14.x, that requires some planning
[17:21:41] <peerce> heh, at last $job those upgrades were usually old database on old server got updated on new server that was 10X faster.
[17:22:39] *** Joins: Elodin (~elodin@user/elodin)
[17:23:14] <ns12> Is each major version supported for 5 years?
[17:24:01] <dob1> I am reading a bit about schemas, the search path $user, public is something related to postgres or commond to relation database?
[17:24:13] <dob1> *relational
[17:24:27] <Myon> search_path is PostgreSQL specifiic
[17:24:40] <ilmari> ns12: yes, see https://www.postgresql.org/support/versioning/
[17:24:59] *** Joins: shiranaihito (~textual@2001-b011-4011-35b3-7988-70e5-4c3e-235b.dynamic-ip6.hinet.net)
[17:25:05] <Myon> no idea what the SQL spec says about identifiers without a schema name
[17:25:59] *** Joins: viaSanctus (~viaSanctu@user/viasanctus)
[17:26:54] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:26:57] <viaSanctus> we have an erp running on postgresql, but we need a product database of +20M items...which completely kills the erp. plain searches on postgress in this table results in several seconds of queryng
[17:27:06] *** Joins: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz)
[17:27:12] <viaSanctus> is there any scenario postgresql can ma,nage this?
[17:27:19] *** Joins: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[17:27:42] <viaSanctus> i tried partitioning but have no idea why its suggested as a solution bc performance is the same
[17:27:56] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[17:27:57] *** Joins: petaflot (~root@lutolf.vserver.nimag.net)
[17:29:06] *** Quits: shiranaihito (~textual@2001-b011-4011-35b3-7988-70e5-4c3e-235b.dynamic-ip6.hinet.net) (Ping timeout: 245 seconds)
[17:29:10] <petaflot> hello! I am trying to create a role (created user and password, granted insert and select on the table) but \du shows "Cannot login" in that user's attributes. how can I fix this?
[17:29:34] <Myon> alter user foo login;
[17:29:41] <peerce> that depends on a lot of things.
[17:30:09] <Myon> (the difference between "create role" and "create user" is that the latter includes "login" by default)
[17:30:11] <peerce> that error message doesn't sound like a typical psql error, at least not wthout a lot more info
[17:30:41] <Myon> peerce: it's part of the \du output for "nologin" roles
[17:31:13] <peerce> aH, YWh,.
[17:31:20] <petaflot> Myon: thank you so fat it works
[17:31:30] <peerce> so, what is it, ALTER ROLE username SET LOGIN;  ? or somethign like that
[17:31:32] <petaflot> ^fat^far
[17:32:06] <Myon> s/SET/WITH/, or just omit it
[17:32:53] *** Joins: Elodin (~elodin@user/elodin)
[17:33:06] <FreeBDSM> hi. Trying to run an app (liquibase) that is supposed to apply migrations to a clean DB. It fails with `No function matches the given name and argument types. You might need to add explicit type casts. [Failed SQL: (0) ALTER TABLE messages AND uuid VARCHAR(36) DEFAULT uuid_generate_v1()::text]`. But I connect to that DB and I see that `uuid-ossp` extension is installed.
[17:34:56] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[17:35:24] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[17:35:32] <Myon> FreeBDSM: try public.uuid_generate_v1()
[17:35:40] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Read error: Connection reset by peer)
[17:36:16] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[17:36:22] <FreeBDSM> Myon, but shouldn't this schema be assumed?
[17:36:26] <Zr40> also you probably want uuid instead of VARCHAR(36)
[17:36:42] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:37:05] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[17:37:20] *** Quits: tozhu (~tozhu@218.89.253.61) (Quit: tozhu)
[17:37:39] *** Joins: ponsfrilus1 (~Thunderbi@vpn-254-220.epfl.ch)
[17:38:04] <Myon> FreeBDSM: since some security update ~2 years ago, lots of tools start with an empty search_path
[17:38:56] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 272 seconds)
[17:38:57] *** ponsfrilus1 is now known as ponsfrilus
[17:39:44] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[17:39:58] *** Joins: rvalue (~rvalue@user/rvalue)
[17:41:13] *** Joins: mattil_ (~mattil@87-92-192-119.rev.dnainternet.fi)
[17:41:13] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:41:14] *** Quits: mattil_ (~mattil@87-92-192-119.rev.dnainternet.fi) (Read error: Connection reset by peer)
[17:41:29] *** Joins: mattil_ (~mattil@87-92-192-119.rev.dnainternet.fi)
[17:42:28] *** Joins: Dyrcona (~jason@static-96-233-66-162.bstnma.fios.verizon.net)
[17:43:16] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[17:44:10] *** Quits: mattil_ (~mattil@87-92-192-119.rev.dnainternet.fi) (Remote host closed the connection)
[17:44:17] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 252 seconds)
[17:44:23] *** Joins: mizi (~mizi@user/mizi)
[17:45:33] *** Joins: mattil (~mattil@87-92-192-119.rev.dnainternet.fi)
[17:46:43] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[17:47:14] *** Joins: Elodin (~elodin@user/elodin)
[17:49:44] *** Joins: tozhu (~tozhu@218.89.253.61)
[17:50:19] *** Quits: mattil (~mattil@87-92-192-119.rev.dnainternet.fi) (Ping timeout: 256 seconds)
[17:51:27] *** Quits: tozhu (~tozhu@218.89.253.61) (Client Quit)
[17:52:01] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:52:28] *** Joins: Elodin (~elodin@user/elodin)
[17:52:50] *** Joins: Junxter (~Junxter@222.95.164.193)
[17:54:12] *** Quits: Junxter (~Junxter@222.95.164.193) (Max SendQ exceeded)
[17:54:30] <petaflot> hmmm. I had a error message, the query was displayed and I fixed it (missing a NOT NULL field) ; now I only get the connection confirmation but the query seems to be unsuccessful. verbosity set to debug1. any tip on how to solve that issue?
[17:54:39] *** Joins: Junxter (~Junxter@222.95.164.193)
[17:55:36] *** Joins: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[17:56:39] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:57:56] <Myon> that needs more context, how are you sending the query, how are you determining it didn't work?
[17:59:23] *** Quits: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr) (Ping timeout: 256 seconds)
[18:01:56] *** Joins: tozhu (~tozhu@218.89.253.61)
[18:02:25] <petaflot> Myon: I'm sending the query from an ESP32 with 14:59 < Myon> alter user foo login;
[18:02:28] <petaflot> 14:59 < peerce> that depends on a lot of things.
[18:02:31] <petaflot> 15:00 < Myon> (the difference between "create role" and "create user" is that the latter includes "login" by default)
[18:02:40] *** Joins: Elodin (~elodin@user/elodin)
[18:02:48] <petaflot> (oops) with https://github.com/ethanak/SimplePgSQL/
[18:03:22] *** Quits: bmomjian (~bruce@momjian.us) (Quit: Leaving.)
[18:03:27] *** Joins: bmomjian1 (~bruce@momjian.us)
[18:03:32] <ilmari> petaflot: please show actual code and output thereof
[18:03:59] <petaflot> determination that it didn't work is that when I do a SELECT (on my desktpo PC) I get no results
[18:04:31] <petaflot> ilmari: here is the code http://dpaste.com/3DYCSZ3L5
[18:04:44] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[18:05:58] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[18:06:41] <ilmari> how do you do the select on your desktop pc?. what is the query? what is the content of the tables?
[18:06:56] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[18:07:14] <ne2k> ilmari, what have you got yourself into
[18:07:46] <petaflot> ilmari: select is done with python and asyncpg
[18:07:58] *** Joins: Haudegen (~quassel@91.114.49.10)
[18:09:00] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[18:09:14] <petaflot> table contains an integer and "uuid bytea not null"
[18:09:20] <ilmari> please show a minimal reproducing example, with output
[18:09:44] <ilmari> ne2k: I just can't help myself
[18:11:45] *** Joins: ejjfunky (~ejjfunky@125.164.21.7)
[18:11:55] *** Joins: volga629 (~volga629@72.139.93.26)
[18:12:53] *** Joins: Elodin (~elodin@user/elodin)
[18:13:18] *** Quits: ben__ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Quit: Leaving...)
[18:14:22] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[18:18:33] *** Quits: nepeat (~nepeat@79.110.170.60) (Read error: Connection reset by peer)
[18:21:24] *** Joins: jringstad__ (~Amadiro@31.11.55.179)
[18:23:16] * petaflot working....
[18:23:41] *** Quits: Amadiro (~Amadiro@31.11.55.179) (Ping timeout: 245 seconds)
[18:23:56] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[18:24:12] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Ping timeout: 240 seconds)
[18:24:45] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[18:25:11] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[18:25:48] *** Joins: nepeat (~nepeat@79.110.170.59)
[18:27:04] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[18:27:29] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[18:28:51] *** Joins: the_lanetly_052_ (~the_lanet@194.135.167.86)
[18:29:46] *** Joins: r0 (~r0@rnbc.ist.utl.pt)
[18:30:04] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[18:30:35] *** Joins: mattil (~mattil@87-92-192-119.rev.dnainternet.fi)
[18:31:25] *** Quits: the_lanetly_052 (~the_lanet@194.135.168.16) (Ping timeout: 256 seconds)
[18:33:07] *** Joins: Elodin (~elodin@user/elodin)
[18:33:24] *** Quits: r00 (~r0@rnbc.ist.utl.pt) (Ping timeout: 272 seconds)
[18:34:17] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[18:35:09] *** Quits: ejjfunky (~ejjfunky@125.164.21.7) (Quit: Leaving)
[18:35:22] *** Quits: mattil (~mattil@87-92-192-119.rev.dnainternet.fi) (Ping timeout: 260 seconds)
[18:37:34] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[18:43:20] *** Joins: Elodin (~elodin@user/elodin)
[18:46:55] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[18:47:53] *** Quits: Vitto (~Vitto@se-14.nat.univ-paris4.fr) (Ping timeout: 256 seconds)
[18:48:14] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[18:49:12] <petaflot> ilmari: http://dpaste.com/EJRTAD5UZ (python code to poll the db) http://dpaste.com/9CKYMQL4W (arduino code for ESP32)
[18:50:23] <petaflot> gotta go run a errand...
[18:52:10] <ilmari> there is no code polling the database there, only an import and some variable assignments
[18:53:28] *** Joins: maxzor__ (~maxzor@2a01cb04054faa00eea365bbfca65076.ipv6.abo.wanadoo.fr)
[18:53:47] *** Joins: Elodin (~elodin@user/elodin)
[18:54:49] <ne2k> Rue de la Prairie?
[18:56:02] *** Joins: Simplar (~Simplar@188.163.93.241)
[18:58:05] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:04:00] *** Joins: Elodin (~elodin@user/elodin)
[19:04:02] <ne2k> Linksys?
[19:07:27] *** Quits: hruske (~hruske@89-212-52-175.static.t-2.net) (Quit: Lost terminal)
[19:08:20] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:08:52] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:09:00] *** Joins: pingr (~hruske@89-212-52-175.static.t-2.net)
[19:11:43] *** Quits: pingr (~hruske@89-212-52-175.static.t-2.net) (Client Quit)
[19:11:59] *** Joins: pingr (~hruske@89-212-52-175.static.t-2.net)
[19:13:08] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Remote host closed the connection)
[19:13:42] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[19:13:55] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[19:13:58] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[19:14:13] *** Joins: Elodin (~elodin@user/elodin)
[19:16:25] *** Joins: edrocks (~Ed@user/edrocks)
[19:18:03] *** Joins: hoppity (~hoppity@66.222.130.38)
[19:18:03] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[19:18:03] *** Joins: hoppity (~hoppity@user/hoppity)
[19:21:33] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[19:23:50] *** Joins: carragom (~textual@201.204.94.76)
[19:24:02] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:24:27] *** Joins: Elodin (~elodin@user/elodin)
[19:26:36] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[19:28:59] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:31:02] *** Quits: gleu (~guillaume@37.165.134.70) (Quit: Leaving.)
[19:34:15] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Ping timeout: 240 seconds)
[19:34:36] *** Quits: merzo (~Thunderbi@95.132.5.229) (Ping timeout: 240 seconds)
[19:34:41] *** Joins: Elodin (~elodin@user/elodin)
[19:35:09] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[19:35:11] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Killed (NickServ (GHOST command used by BadAdviceCat)))
[19:35:18] *** BadAdviceCat is now known as Nekomander
[19:35:36] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[19:37:57] *** Quits: michalz (~michalz@185.246.204.55) (Read error: Connection reset by peer)
[19:38:30] *** Joins: michalz (~michalz@185.246.204.75)
[19:38:43] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:43:32] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:43:54] *** Joins: r00 (~r0@rnbc.ist.utl.pt)
[19:44:23] *** Joins: shiranaihito (~textual@2001-b011-4011-3abc-4028-4710-d41a-7a51.dynamic-ip6.hinet.net)
[19:44:57] *** Joins: Elodin (~elodin@user/elodin)
[19:46:47] *** Quits: r0 (~r0@rnbc.ist.utl.pt) (Ping timeout: 256 seconds)
[19:47:49] *** Quits: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Ping timeout: 240 seconds)
[19:49:03] *** Quits: PyHedgehog (uid146498@id-146498.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[19:49:45] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:50:11] *** Joins: Elodin (~elodin@user/elodin)
[19:51:24] *** Joins: kakashiAL (~kakashi@105.157.34.82)
[19:52:06] <petaflot> ne2k: ?
[19:52:36] <petaflot> ilmari: yes it's the fuction readLine() in the python script
[19:52:47] *** Quits: tozhu (~tozhu@218.89.253.61) (Quit: tozhu)
[19:53:52] <petaflot> it is called every second
[19:55:00] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[19:55:25] *** Joins: Elodin (~elodin@user/elodin)
[19:55:48] <ilmari> petaflot: the python code you pasted is 14 lines: http://dpaste.com/EJRTAD5UZ
[19:55:55] <ilmari> there is no readLine there
[19:56:25] *** Joins: davidfetter_work (~davidfett@c-73-252-148-184.hsd1.ca.comcast.net)
[19:59:51] *** Joins: jhammerman (~joe.hamme@98.246.188.6)
[19:59:51] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[20:00:32] <petaflot> ilmari: oops it looks like \c caused a little problem. https://bpa.st/YFZA
[20:01:06] *** Joins: Kohe (~Kohe@79.103.22.84.dsl.dyn.forthnet.gr)
[20:01:35] <ilmari> readLine just returns the first row, but nothing prints it
[20:04:10] <petaflot> oh yeah. "return r" on line 50 should be "print(r)"
[20:04:54] *** Quits: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net) (Read error: Connection reset by peer)
[20:05:17] *** Quits: edrocks (~Ed@user/edrocks) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:05:22] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[20:05:39] *** Joins: Elodin (~elodin@user/elodin)
[20:06:25] <ilmari> also, you probably meant SELECT FROM {db_table}, not {db_name}
[20:07:48] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 240 seconds)
[20:07:52] <petaflot> yup.
[20:08:24] <petaflot> that prototype is working :-) now I need to update my real code. thanks!
[20:09:49] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[20:10:10] *** Joins: Elodin (~elodin@user/elodin)
[20:10:57] <davidfetter_work> a colleague tells me that they recall a case where \c by itself can lose information. are they recalling correctly, and if so, in what case(s) does this happen?
[20:13:41] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[20:14:36] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[20:19:53] *** Quits: martti (~martti@46-126-48-136.dynamic.hispeed.ch) (Ping timeout: 250 seconds)
[20:20:22] *** Quits: Haudegen (~quassel@91.114.49.10) (Quit: Bin weg.)
[20:20:22] *** Joins: Elodin (~elodin@user/elodin)
[20:20:32] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[20:20:47] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[20:20:49] *** Joins: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net)
[20:23:13] *** Joins: magla (~gelignite@d5362c15.access.ecotel.net)
[20:23:26] <petaflot> is there something such as CURRENT_DATETIME for default values?
[20:24:30] <ilmari> now() and current_timestamp both work in DEFAULT
[20:27:15] *** Quits: mncheck (~mncheck@193.224.205.254) (Remote host closed the connection)
[20:29:30] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[20:30:26] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[20:33:18] *** Quits: shored (~shored@user/shored) (Quit: ZNC 1.8.2+deb2 - https://znc.in)
[20:33:33] *** Joins: shored (~shored@user/shored)
[20:36:34] *** Joins: Elodin (~elodin@user/elodin)
[20:38:03] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[20:38:13] *** Joins: mncheck (~mncheck@193.224.205.254)
[20:39:20] <dfee> i'm trying to reach into a jsonb list-of-objects to pluck something out by an internal id: https://www.db-fiddle.com/f/jcvJCaxN7BqDGGLio2ZZQM/0
[20:39:41] <dfee> that works fine, but performance will be terrible due to the CTEs...
[20:39:56] <dfee> anyway to eliminate the CTEs?
[20:40:58] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[20:43:30] *** Quits: rednul_ (~rednul@098-127-178-044.biz.spectrum.com) (Read error: Connection reset by peer)
[20:43:34] <ilmari> dfee: select id, created_at from foo where data @> '{"sections": [{"id": "b1", "kind":"kind-x"}]}';
[20:44:07] *** Joins: fneves (~fneves@2804:14d:5c54:95b5::1e6)
[20:44:25] <ilmari> bng a gin index on data, and it'll be fast
[20:44:31] <ilmari> *bung
[20:44:39] <ilmari> https://www.postgresql.org/docs/current/datatype-json.html#JSON-INDEXING
[20:45:27] <ilmari> also, I really hope you're not actually using 9.6, which is what you'd selected in the fiddle
[20:45:51] <dfee> i *am* using 9.6 :(
[20:46:06] <dfee> stepped into a legacy product
[20:46:11] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 245 seconds)
[20:46:46] *** Joins: Elodin (~elodin@user/elodin)
[20:47:15] <ilmari> 9.6 supports indexing of containment on jsonb, so that should work there too
[20:47:17] <ilmari> https://www.postgresql.org/docs/9.6/datatype-json.html#JSON-CONTAINMENT
[20:47:25] *** Quits: peteyboy1 (~peteyboy1@95.169.226.66) (Ping timeout: 240 seconds)
[20:47:40] <dfee> ilmari problem is, i don't know how to reach in and grab "through" the list now...: data -> 'sections' -> ?? -> 'id'
[20:47:59] <dfee> https://www.db-fiddle.com/f/jcvJCaxN7BqDGGLio2ZZQM/1
[20:48:11] <dfee> line 25 there
[20:48:12] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[20:49:29] <dfee> the equivalent of this jq: '.sections[].id'
[20:50:21] *** Joins: fdan (~fdan@103.215.168.1)
[20:50:45] <fdan> i want to build a UI that has a search feature which would search from the database
[20:50:57] <fdan> can postgresql work like elasticsearch?
[20:51:23] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[20:52:56] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[20:54:43] *** Quits: r00 (~r0@rnbc.ist.utl.pt) (Quit: Leaving)
[20:55:29] *** Quits: cpaelzer (~paelzer@canonical/cpaelzer) (Quit: bye)
[20:56:41] <Henryx> fdan: what that you mean? postgresql can store json (with jsonb datatype), executes full text search (with tsearch2 extension) but it doesn't have an api rest interface
[20:56:46] <ilmari> dfee: a bit repetitive, but works: https://www.db-fiddle.com/f/5Mi859ME3HmMP4reJnFrww/0
[20:56:47] <davidfetter_work> not the way you're thinking. PostgreSQL can use ES for storage via ZomboDB
[20:56:59] *** Joins: Elodin (~elodin@user/elodin)
[20:58:08] <ilmari> dfee: ideally you'd normalise the sections field in the data column into a foo_sections table
[20:58:11] <dfee> ilmari i kinda think your first query as a CTE should be fine. i'm no longer putting the entire database into memory
[20:58:15] <fdan> Henryx i am have not worked in postgres or elasticsearch much. my question is can i create a search functionality in my website by using postgres tsquery
[20:58:25] *** Quits: Junxter (~Junxter@222.95.164.193) (Read error: Connection reset by peer)
[20:58:30] *** Joins: nehsou^ (~nehsou@50-202-219-146-static.hfc.comcastbusiness.net)
[20:58:35] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[20:58:48] *** Joins: Junxter (~Junxter@222.95.164.193)
[20:59:09] <dfee> but yeah, i probably need a gin index anyway.
[20:59:13] *** Quits: fneves (~fneves@2804:14d:5c54:95b5::1e6) (Quit: fneves)
[20:59:41] <ilmari> dfee: yes you need a gin index to make @> fast
[21:00:03] <dfee> thanks for the help ilmari
[21:01:21] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:01:48] *** Joins: Elodin (~elodin@user/elodin)
[21:04:32] *** Joins: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:c5d1:47b:ca77:3512)
[21:04:37] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[21:05:25] *** Quits: held (~heldchen@user/held) (Ping timeout: 268 seconds)
[21:05:59] <fdan> can someone help me on this
[21:06:28] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:06:40] <ilmari> fdan: have you read the text search chapter in the documentation?
[21:06:49] <ilmari> https://www.postgresql.org/docs/current/textsearch.html
[21:07:22] <fdan> https://www.postgresql.org/docs/current/datatype-textsearch.html
[21:07:27] <fdan> i have gone through this
[21:07:51] <ilmari> that's just the reference for those two data types
[21:08:07] <ilmari> there's a whole chapter in the manual. read it. all of it.
[21:08:08] *** Quits: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:c5d1:47b:ca77:3512) (Client Quit)
[21:08:29] <dob1> the associations between user and schema is implicit? I mean if I create schema foo and the user foo, user foo has privileges to schema foo without doing nothing?   and if I create a system user foo ?
[21:08:38] <fdan> ilmari sure
[21:08:56] <fdan> but before that could you tell me if i can use the search functionality to build a UI that has a search?
[21:09:25] <ilmari> dob1: no, they are independent. the only relation is that the default search path includes the schema named the same as the user
[21:09:58] <dob1> ilmari, so it needs the grant command
[21:10:09] <ilmari> or make the schema owned by the user
[21:10:42] <dob1> ok, got it
[21:10:57] *** Joins: maciek_ (~maciek@2600:1700:a412:1c00:f0b7:6734:b7a5:492b)
[21:11:59] <ilmari> and by default (in most installations) a system user foo can connect locally (i.e. unix socket) as the db user foo
[21:12:02] *** Joins: Elodin (~elodin@user/elodin)
[21:13:25] *** Quits: kakashiAL (~kakashi@105.157.34.82) (Ping timeout: 240 seconds)
[21:14:14] *** Joins: peteyboy1 (~peteyboy1@95.169.226.66)
[21:14:27] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[21:15:19] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[21:15:25] *** Joins: held (~heldchen@user/held)
[21:16:43] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:20:26] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[21:21:58] *** Joins: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de)
[21:22:01] <dvl> We have 3 x PostgreSQL 12.2 servers using 'host    replication     repl' replication... We want to update them to PostgreSQL 13 - What terms should I be searching for? I don't see update/upgrade mentioned in the docs at https://www.postgresql.org/docs/13/index.html - What is the usual path for this update please?
[21:22:13] *** Joins: Elodin (~elodin@user/elodin)
[21:22:20] <dvl> If it was a single server, I know what to do, but not when it comes to replication (not my servers).
[21:23:18] *** Quits: TomTom (uid45892@id-45892.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[21:25:49] *** Quits: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz) (Ping timeout: 240 seconds)
[21:26:54] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:29:11] *** Joins: `2jt (~jtomas@210.red-88-24-179.staticip.rima-tde.net)
[21:29:16] <azlev> dvl: pg_upgrade is the most straightforward. You'll need to reconfigure the replication. Other options is to create a logical replication. Do you have spare machines? How realiable do you want a rollback?
[21:29:31] *** Quits: psoo (~psoo@dslb-002-204-079-161.002.204.pools.vodafone-ip.de) (Ping timeout: 245 seconds)
[21:29:38] <azlev> you can upgrade a replica, promote it and them use it as the new master
[21:32:27] *** Joins: Elodin (~elodin@user/elodin)
[21:32:48] <dvl> azlev: by reconfigure the replication, that's the "promote it and them use it as the new master" part?
[21:34:45] *** Quits: megamaced (~megamaced@static-90-255-226-34.vodafonexdsl.co.uk) (Quit: megamaced)
[21:35:11] *** Joins: k8yun (~k8yun@user/k8yun)
[21:36:55] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:37:19] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[21:38:02] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[21:38:27] *** Quits: eroux (~eroux@102-65-85-242.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:40:21] *** Joins: funhouse (~funhouse@user/funhouse)
[21:41:32] <funhouse> Trying to do this query:
[21:41:34] <funhouse> select DISTINCT(postalcode) from pccf WHERE id BETWEEN 1 and 10 ORDER BY id ASC;
[21:41:45] <funhouse> ERROR:  syntax error at or near "DISTINCT"
[21:41:45] <funhouse> LINE 1: select id, DISTINCT(postalcode) from pccf WHERE id BETWEEN 1...
[21:41:56] <davidfetter_work> lose the parens
[21:42:39] <funhouse> davidfetter_work like this?
[21:42:40] *** Joins: Elodin (~elodin@user/elodin)
[21:42:41] <funhouse>  select id, DISTINCT postalcode from pccf WHERE id BETWEEN 1 and 10 ORDER BY id ASC;
[21:44:02] <davidfetter_work> oh, my mistake. I'd do SELECT id, postalcode FROM pcf WHERE id BETWEEN 1 AND 10 GROUP BY postalcode ORDER BY id;
[21:44:12] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[21:44:24] <davidfetter_work> well, I wouldn't use BETWEEEN because I can never remember what shape of interval it implies :P
[21:47:25] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:47:52] *** Joins: Elodin (~elodin@user/elodin)
[21:48:12] *** Quits: fdan (~fdan@103.215.168.1) (Quit: Client closed)
[21:48:46] <funhouse> davidfetter_work thank you
[21:51:44] <davidfetter_work> funhouse, happy to help. Seriously, though, BETWEEN is a bad code smell and a maintenance nightmare. I'd suggest you replace it with something that makes your intent clear to the reader.
[21:52:03] *** Quits: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 256 seconds)
[21:52:17] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Ping timeout: 268 seconds)
[21:52:36] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[21:58:06] *** Joins: Elodin (~elodin@user/elodin)
[21:58:10] *** Joins: Atque (~Atque@user/atque)
[21:58:22] *** Quits: ponsfrilus (~Thunderbi@vpn-254-220.epfl.ch) (Quit: ponsfrilus)
[21:59:57] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[22:03:17] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:04:05] *** Quits: Auron (~Auron956@user/auron) (Remote host closed the connection)
[22:05:36] *** Joins: econo (uid147250@user/econo)
[22:08:44] <koollman> I would love some alternative operator almost like between, but inclusive for start and exclusive for end. because I'm lazy :)
[22:09:21] *** Joins: Elodin (~elodin@user/elodin)
[22:09:50] <ilmari> koollman: value <@ int4range(start, end, '[)')
[22:10:27] <ilmari> or the right foorange() for your value type
[22:11:25] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 240 seconds)
[22:14:21] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[22:18:34] *** Joins: carragom (~textual@201.204.94.76)
[22:18:40] *** Joins: Xof (~Xof@198-0-193-113-static.hfc.comcastbusiness.net)
[22:18:51] *** Quits: ghenry (~ghenry@ghenry.plus.com) (Ping timeout: 250 seconds)
[22:18:57] *** Quits: darutoko (~darutoko@37.21.145.248) (Quit: Leaving)
[22:19:06] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:19:34] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[22:19:34] *** Joins: Elodin (~elodin@user/elodin)
[22:20:54] <davidfetter_work> yeah, the range stuff pretty much has this handled. the only hassle is remembering to use it in the first place. at least when it's there, it's clear what it's doing.
[22:21:28] *** Quits: fstd (~fstd@xdsl-78-34-125-135.nc.de) (Read error: Connection reset by peer)
[22:21:37] *** Joins: fstd (~fstd@xdsl-78-34-125-135.nc.de)
[22:22:22] <koollman> ilmari: good idea, thanks
[22:24:04] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:24:16] <ilmari> I'm a bit surprised there isn't a polymorphic function range(anyelement, anyelement, text) returns anyrange
[22:29:44] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[22:29:54] *** Joins: Elodin (~elodin@user/elodin)
[22:31:32] *** Joins: ghenry (~ghenry@ghenry.plus.com)
[22:34:32] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:35:02] <davidfetter_work> hrm. that seems like it'd be nice to have.
[22:39:26] *** Joins: randir (~randir@85.249.36.97)
[22:40:06] *** Joins: Elodin (~elodin@user/elodin)
[22:41:43] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[22:44:58] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:45:20] *** Joins: Elodin (~elodin@user/elodin)
[22:47:57] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[22:51:15] *** Parts: Dyrcona (~jason@static-96-233-66-162.bstnma.fios.verizon.net) ()
[22:53:14] *** Joins: pvn1 (~Adium@85-195-230-63.fiber7.init7.net)
[22:55:02] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:55:11] <ilmari> I don't remember the details of the discussion when range types were added, but I assume there's some sound technical reason
[22:58:53] *** Quits: zlinux (~zlinux@149.109.9.128) (Ping timeout: 256 seconds)
[23:00:01] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[23:00:34] *** Joins: Elodin (~elodin@user/elodin)
[23:00:38] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[23:01:48] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[23:03:07] *** Quits: randir (~randir@85.249.36.97) (Ping timeout: 256 seconds)
[23:04:02] *** Quits: peteyboy1 (~peteyboy1@95.169.226.66) (Ping timeout: 240 seconds)
[23:05:29] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[23:05:48] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[23:05:50] *** Joins: Elodin (~elodin@user/elodin)
[23:08:55] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[23:10:21] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[23:10:21] <ilmari> it could be because unlike arrays the range type doesn't get automatically created, because the type has to be orderable and the semantics depend on whether the values are continuous or discrete
[23:10:55] *** Joins: peteyboy1 (~peteyboy1@95.169.226.66)
[23:11:35] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[23:12:58] *** Quits: sjoos__ (~grommel@dhcp-089-099-220-075.chello.nl) (Remote host closed the connection)
[23:13:01] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Remote host closed the connection)
[23:16:02] *** Joins: Elodin (~elodin@user/elodin)
[23:20:44] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[23:26:17] *** Joins: Elodin (~elodin@user/elodin)
[23:29:22] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[23:30:00] *** Quits: test1` (~user@p200300f3a70c0d9290c4a1e8530a7ef5.dip0.t-ipconnect.de) (Remote host closed the connection)
[23:30:12] *** Quits: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net) (Ping timeout: 240 seconds)
[23:30:36] *** Quits: peteyboy1 (~peteyboy1@95.169.226.66) (Ping timeout: 240 seconds)
[23:30:48] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[23:32:52] *** Joins: jazzy (~jaziz@user/jaziz)
[23:33:13] <davidfetter_work> Not sure about all the corner cases, but it could wrap all the existing range constructors.
[23:36:37] *** Joins: Elodin (~elodin@user/elodin)
[23:41:04] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[23:42:45] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[23:45:12] <dvl> https://avamonitor.vrt.sourcefire.com/nagios/ is redirecting me to nagios.org....
[23:45:23] <dvl> Well poop :)
[23:46:53] *** Joins: Elodin (~elodin@user/elodin)
[23:49:09] *** Joins: pvn2 (~Adium@147.87.128.35)
[23:51:03] *** Quits: pvn1 (~Adium@85-195-230-63.fiber7.init7.net) (Ping timeout: 256 seconds)
[23:51:35] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[23:52:37] *** Joins: mauz (~mauz@2a01:e0a:994:7ed0:6940:6bd7:6496:6991)
[23:55:28] *** Joins: segfaultfizzbuzz (~segfaultf@135-180-0-138.static.sonic.net)
[23:57:06] *** Joins: alphanode (~alphanode@43.224.3.232)
[23:57:10] *** Joins: Elodin (~elodin@user/elodin)
[23:59:00] *** Quits: xinming (~xinming@115.221.10.238) (Ping timeout: 240 seconds)
[23:59:23] *** Joins: xinming (~xinming@115.221.10.238)
