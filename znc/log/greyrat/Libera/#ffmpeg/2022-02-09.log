[00:18:40] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[00:20:12] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[00:33:10] *** hentai is now known as Stallman
[00:34:21] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 256 seconds)
[00:34:36] *** Stallman is now known as hentai
[00:38:20] *** Quits: foul_owl (~kerry@94.140.8.51) (Read error: Connection reset by peer)
[00:41:37] *** Joins: cheetahw26 (~cheetahw2@14.150-pool-xdsl-mi.sccoast.net)
[00:42:03] *** Quits: fkaa (~fkaa@user/fkaa) (Remote host closed the connection)
[00:49:13] *** Joins: Volgaar (~volgaar@147.94.11.104)
[00:54:01] *** Joins: foul_owl (~kerry@23.82.194.73)
[00:54:42] *** Quits: Volgaar (~volgaar@147.94.11.104) (Quit: WeeChat 3.4)
[00:54:59] *** Joins: Volgaar (~volgaar@147.94.11.104)
[00:55:20] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[01:11:18] *** Quits: cheetahw26 (~cheetahw2@14.150-pool-xdsl-mi.sccoast.net) (Quit: Client closed)
[01:31:39] *** Quits: Volgaar (~volgaar@147.94.11.104) (Quit: WeeChat 3.4)
[01:40:15] *** Quits: cosimone (~user@93-47-228-151.ip115.fastwebnet.it) (Quit: ERC (IRC client for Emacs 27.1))
[01:41:33] *** Quits: Buster (~Buster@46.160.36.66) (Ping timeout: 256 seconds)
[01:43:05] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[01:44:30] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Read error: Connection reset by peer)
[01:57:26] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[02:08:29] *** Quits: ttys000 (~ttys000@user/ttys000) (Quit: Textual IRC Client: www.textualapp.com)
[02:08:57] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[02:10:50] *** Quits: aphysically (~aphysical@user/aphysically) (Ping timeout: 250 seconds)
[02:11:51] *** Joins: aphysically (~aphysical@user/aphysically)
[02:13:31] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[02:14:19] *** Quits: foul_owl (~kerry@23.82.194.73) (Ping timeout: 256 seconds)
[02:18:13] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[02:28:49] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 256 seconds)
[02:31:49] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[02:32:26] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[02:34:56] *** Joins: foul_owl (~kerry@23.82.194.73)
[02:43:55] *** Joins: ttys000 (~ttys000@user/ttys000)
[02:47:52] *** Quits: oriba (~oriba@dynamic-077-191-002-071.77.191.pool.telefonica.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[02:56:11] *** Joins: lanodan (~lanodan@2a01:e0a:d6:9930::35)
[02:56:42] *** Quits: GoD-Tony_ (uid107595@id-107595.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[03:17:13] *** Quits: foul_owl (~kerry@23.82.194.73) (Ping timeout: 256 seconds)
[03:22:42] *** Quits: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net) (Quit: djk)
[03:25:29] *** Quits: arinov (~arinov@213.194.126.155) (Ping timeout: 256 seconds)
[03:31:11] *** Joins: foul_owl (~kerry@217.114.38.61)
[03:31:29] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 256 seconds)
[03:32:26] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[03:34:33] *** Quits: dreamon (~dreamon@p54b14d36.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[03:41:24] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[03:44:57] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[03:47:21] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Read error: Connection reset by peer)
[03:48:22] *** Joins: porn (~hentai@user/hentai)
[03:48:22] *** hentai is now known as Guest3440
[03:50:34] *** Quits: rv1sr (~rv1sr@user/rv1sr) ()
[03:52:27] *** Quits: Guest3440 (~hentai@user/hentai) (Ping timeout: 256 seconds)
[03:56:07] *** Joins: crashrep (~crashrep@user/crashrep)
[04:05:24] *** beaver_ is now known as beaver
[04:09:30] *** Joins: gurki (~gurki@user/gurki)
[04:10:25] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[04:10:37] <gurki> is there an easy way to provide a more complicated time schedule when to extract images from a video? lets say that i want to extract an image at every 0.5x²+log(0.5x) seconds
[04:10:52] <gurki> (i just pulled that formula out of my a... dont pin me on specifics)
[04:11:36] <gurki> what i actually want to do is to extract more images at the beginning of a video and gradually decrease the extraction frequency
[04:17:20] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[04:25:19] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Remote host closed the connection)
[04:28:16] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[04:28:28] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[04:35:04] *** porn is now known as hentai
[04:35:22] *** Joins: Fohsap_ (~Muimi@140.82.21.73)
[04:38:01] *** Quits: Fohsap (~Muimi@113.235.5.99) (Ping timeout: 256 seconds)
[04:38:03] *** Fohsap_ is now known as Fohsap
[04:44:53] *** Joins: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net)
[04:46:16] *** Quits: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net) (Client Quit)
[04:46:45] *** Joins: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net)
[04:50:16] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[04:55:26] *** Quits: q66 (~q66@q66.moe) (Quit: q66)
[05:02:09] *** Quits: MrZeus_ (~MrZeus@185.248.85.10) (Ping timeout: 256 seconds)
[05:03:40] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[05:06:16] *** Joins: q66 (~q66@q66.moe)
[05:08:55] *** Quits: x_kuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[05:16:57] *** Quits: q66 (~q66@q66.moe) (Ping timeout: 240 seconds)
[05:19:17] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[05:19:22] *** Joins: q66 (~q66@q66.moe)
[05:26:33] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[05:27:11] *** Quits: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net) (Quit: djk)
[05:30:00] *** Quits: pal (~pal@76-14-89-2.sf-cable.astound.net) (Quit: Leaving)
[05:30:20] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:33:21] *** Joins: vlm (~vlm@user/vlm)
[05:38:17] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[05:38:37] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[05:40:57] <klaxa> gurki: maybe something like this? https://video.stackexchange.com/questions/32756/using-select-in-ffmpeg-to-choose-frames see also: https://ffmpeg.org/ffmpeg-filters.html#select_002c-aselect for more stuff about the select filter
[05:44:13] *** Joins: frikiluser (~frikiluse@170.253.37.24)
[05:47:27] <frikiluser> Hi. I pretend to encode libx264 videos with a GOP of exactly 2seconds (50fps, so GOPs must contain 100 frames). Using "-keyint_min 100 -g 100" still produce shorter GOPs for certain input files... If I add "-sc_threshold 0" seems to fix the problem. Is it the correct way to do it?
[06:21:13] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[06:30:03] *** Joins: Vonter (~Vonter@user/vonter)
[06:30:57] <yuu[m]> is there a way to specify `-to end` (to cut until end)?
[06:47:33] *** Quits: jos1 (~jos3@dyndsl-091-096-032-171.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
[07:00:31] *** Joins: jos1 (~jos3@host-091-097-185-100.ewe-ip-backbone.de)
[07:14:16] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[07:15:38] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[07:15:48] *** Quits: XdaddyZX_ (uid456733@id-456733.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[07:17:28] <kepstin> i'm not sure what you mean; when ffmpeg reaches the end it already stops.
[07:18:11] <kepstin> (note that there is no way to set an endpoint relative to the end, to e.g. cut off the last x seconds of video - you have to probe the video first to find out how long it is, and calculate the to value yourself)
[07:30:01] *** Quits: haasn (~nand@haasn.dev) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[07:30:11] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[07:30:26] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[07:31:56] *** Joins: haasn (~nand@haasn.dev)
[07:33:25] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[07:35:27] *** Joins: pal (~pal@76-14-89-2.sf-cable.astound.net)
[07:53:06] *** Quits: Fusl (fusl@1.0.0.127.in-addr.arpa.li) (Excess Flood)
[07:56:00] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Remote host closed the connection)
[07:56:28] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[08:10:53] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:22:42] *** Joins: Fusl (fusl@1.0.0.127.in-addr.arpa.li)
[08:41:38] *** Joins: lucaswang (~lucaswang@58.246.19.98)
[08:42:47] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[08:46:38] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[08:50:34] *** Joins: Buster (~Buster@buster-net.ru)
[08:53:00] *** Joins: Lebela (~Lebela@85.187.219.215)
[08:53:03] <Lebela> hello
[08:54:03] <Lebela> I have a problem with something that is video and ffmpeg related
[08:54:12] <Lebela> so, there is this one program on Linux called "amimationmaker"
[08:54:35] <Lebela> it is a frame animation software that allowed me to create some nice text animations (e.g. intro / outro for videos)
[08:54:50] <Lebela> I exported it at 30 fps, and also in the very same size as my video
[08:55:12] <Lebela> then I used _ffmpeg_ to concatenate the videos  (my video + outro)
[08:55:17] <Lebela> and that's where things went south
[08:55:41] <Lebela> 1) When I play the concatenated video in vlc,  there is a tiny "gap" between them, which looks like "vlc" were ending the video and opening a new one
[08:55:54] <Lebela> I can see the VLC logo in between the 2 concatenated parts for a short moment
[08:56:08] <Lebela> as though the video had ended and a new video were to start
[08:56:29] <Lebela> 2) the exported video (from animationmaker) is perfect when watching it.
[08:56:48] <Lebela> But, after concatenating it in ffmpeg, the fonts gets distorted and "faulty" in the animationmaker video
[08:57:04] <Lebela> like a slug went over the place and smeared around some slime
[08:57:21] <Lebela> also the text color is _partially_ off for some letters (but ONLY after concatenating)
[08:57:26] <Lebela> I don't say that it is ffmpeg's fault
[08:57:38] <Lebela> I only say, it happens only after concatenating with ffmpeg
[09:05:14] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[09:05:41] <yuu[m]> <kepstin> "i'm not sure what you mean; when..." <- oh i had no idea, thank you!
[09:07:07] <yuu[m]> btw, why is it that ffmpeg has issues in trimming in the actual specified time? it always off the start/end time...
[09:09:09] <yuu[m]> `ffmpeg -i input.flac -ss 00:01:00 -to 00:02:00 output.flac` actually starts at like `00:45:00`
[09:10:05] <yuu[m]>  * `ffmpeg -i input.flac -ss 00:01:00 -to 00:02:00 output.flac` actually starts at like `00:00:45`
[09:11:24] <znf> Lebela, sounds like you're encoding to poorer quality
[09:13:08] <Lebela> znf, both are 4K,  16:9 format
[09:13:18] <Lebela> znf, not sure about the codec which animationmaker uses
[09:13:49] <znf> you should also state the full command line you're using
[09:14:36] <Lebela> znf, ffmpeg -f concat -safe 0 -i videos.txt -c copy merged.mp4
[09:15:00] <Lebela> videos.txt  contains the filelist,  one file per line,  surrounded by  file '  in front and  '  in the end
[09:15:24] <Lebela> let me check the codec of the animationmaker mp4
[09:15:39] <znf> then your video is getting copied and not transcoded
[09:15:52] <znf> I fail to see how it would distort your video in any way
[09:17:51] <Lebela> I think I found something, znf
[09:17:58] <Lebela> I used "mediainfo" to find the codecs
[09:18:14] <Lebela> Codec of the actual "real life video"   >  https://dpaste.org/ki2y
[09:18:41] <Lebela> Codec of the animationmaker file:  >  https://dpaste.org/TetU/raw
[09:19:09] <Lebela> the difference is this line:
[09:19:10] <Lebela> Codec ID                                 : isom (isom/iso2/avc1/mp41)
[09:19:15] <Lebela> Codec ID                                 : mp42 (isom/mp42)
[09:20:29] <znf> can you show the output of the ffmpeg command you run?
[09:21:05] <Lebela> znf, I must re-run the command as it was part of a bigger script that ran over night
[09:21:12] <Lebela> znf, can I get 5 minutes to reproduce a test case
[09:21:15] <Lebela> ?
[09:22:16] <znf> I'm actually going to bed :)
[09:22:37] <znf> but still get the output of the command for when someone else will be available
[09:22:37] *** Quits: Buster (~Buster@buster-net.ru) (Ping timeout: 240 seconds)
[09:23:32] <Lebela> half a minute
[09:23:35] <Lebela> I am almost done
[09:25:51] <Lebela> znf, https://dpaste.org/LdvL/raw
[09:28:32] <znf> it's a stream copy, so there should be no difference
[09:30:24] <Lebela> I wonder about the different codecs
[09:30:33] <Lebela> I am going to re-encode the animationmaker's file
[09:30:35] <Lebela> ffmpeg -i animationmaker.mp4 -c:v libx264 -an -preset veryslow -crf 0 repaired.mp4
[09:31:35] <znf> if the codecs would differ a lot (which they don't), you couldn't concat
[09:32:15] <Lebela> I have no other idea
[09:32:20] <znf> mp42 vs isom is, for what I remember, just a difference in the /containers/
[09:32:37] <Lebela> the video looks good when I open the mp4 exported by animationmaker
[09:32:44] <Lebela> things only get ugly after concatenating with ffmpeg
[09:32:59] <Lebela> the letters look totally distorted and decolorized and there is this 2 seconds reloading gap
[09:33:19] <Lebela> Do you by any change know,  how I can add "-movflags +faststart"  to concatenate?
[09:33:30] <Lebela> because all my files use  "-movflags +faststart"  but not the final output after concat
[09:34:08] <znf> I don't think that matters in any way, have you tried concatenating to a different container? (ie: MKV)
[09:34:24] <znf> sorry, I kinda need to go, it's getting late (well, early) :)
[09:34:30] <Lebela> no, I haven't tried mkv yet
[09:34:35] <Lebela> sorry for having kept you from bed
[09:34:39] <Lebela> znf, I appreciate the chat
[09:34:40] <Lebela> thank you!
[09:34:42] <Lebela> good night
[09:35:11] <Lebela> I anyone else reads this - the "good night" above was directed to "znf" - I am still here looking for help ;)
[09:37:19] *** Joins: jaue (~jaue@ti0006q161-2699.bb.online.no)
[09:39:15] <jaue> hi, I'm trying to strip away metadata from a video file, but when I do this it also strips away all (but one) audio files and all subtitles as well, which I want to keep:   ffmpeg -i in.mp4 -map_metadata -1 -c:v copy -c:a copy out.mp4
[09:39:34] *** Joins: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6)
[09:39:41] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Remote host closed the connection)
[09:43:04] *** Joins: Kei_N_ (~Kei_N@user/kei-n/x-2886111)
[09:45:09] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[09:45:43] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Ping timeout: 256 seconds)
[09:49:07] <jaue> if I do this then I get all the audio and subtitles, but they are all named "unknown":   ffmpeg -i in.mp4 -map_metadata -1 -map 0 -c:v copy -c:a copy -c:s copy out.mp4
[09:50:26] *** Joins: Atsuko (~x@94.242.254.66)
[09:52:31] *** Quits: Kei_N_ (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:52:48] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:02:02] *** Quits: lucaswang (~lucaswang@58.246.19.98) (Quit: Ping timeout (120 seconds))
[10:11:17] *** Quits: Lebela (~Lebela@85.187.219.215) (Quit: Leaving)
[10:17:00] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[10:17:17] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:18:31] *** Joins: lucaswang (~lucaswang@58.246.19.98)
[10:21:05] *** Quits: __Myst__ (~Myst@net-47-53-171-76.cust.vodafonedsl.it) (Ping timeout: 256 seconds)
[10:24:36] *** Joins: __Myst__ (~Myst@net-47-53-171-76.cust.vodafonedsl.it)
[10:33:15] *** Quits: jaue (~jaue@ti0006q161-2699.bb.online.no) (Quit: Connection closed)
[10:36:58] *** Joins: a0z (~a0z@90.244.190.0)
[10:37:57] *** Quits: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6) (Quit: Client closed)
[10:39:51] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[10:40:06] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:40:12] *** Quits: therobin (~UserNick@69-165-143-205.dsl.teksavvy.com) (Remote host closed the connection)
[10:41:57] *** Joins: therobin (~UserNick@2607:f2c0:9305:f00:e98f:c0a4:b5d2:4b94)
[10:43:32] *** Quits: rpthms (~rpthms@user/rpthms) (Remote host closed the connection)
[10:46:04] *** Joins: rpthms (~rpthms@user/rpthms)
[10:48:33] *** Joins: abel (~abel@103.7.29.32)
[10:56:52] *** Joins: cosimone (~user@93-34-133-254.ip49.fastwebnet.it)
[10:59:52] *** Joins: jaue (~jaue@ti0006q161-2699.bb.online.no)
[11:03:59] *** Joins: Volgaar (~volgaar@147.94.11.148)
[11:04:16] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[11:04:32] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[11:05:12] *** Quits: hendry (~hendry@210.23.22.2) (Quit: brb)
[11:06:05] *** Joins: hendry (~hendry@210.23.22.2)
[11:09:49] *** Joins: MajorBiscuit (~MajorBisc@86-88-79-148.fixed.kpn.net)
[11:14:39] *** Quits: MajorBiscuit (~MajorBisc@86-88-79-148.fixed.kpn.net) (Ping timeout: 250 seconds)
[11:16:04] *** Joins: MajorBiscuit (~MajorBisc@c-001-013-035.client.tudelft.eduvpn.nl)
[11:25:50] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[11:28:03] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[11:28:19] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[11:28:37] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 256 seconds)
[11:29:43] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[11:29:49] *** Quits: Volgaar (~volgaar@147.94.11.148) (Ping timeout: 250 seconds)
[11:31:39] *** Joins: Volgaar (~volgaar@147.94.11.148)
[11:33:47] *** Joins: realies6 (~realies@user/realies)
[11:34:35] <aphysically> is the set of characters that need escaped in x265-params the same as the set of characters that need escaped in -vf?
[11:34:36] *** Quits: realies (~realies@user/realies) (Ping timeout: 250 seconds)
[11:34:37] *** realies6 is now known as realies
[11:34:46] <aphysically> :\'"
[11:37:53] *** Joins: palasso (~palasso@user/palasso)
[11:42:06] *** Quits: Volgaar (~volgaar@147.94.11.148) (Ping timeout: 260 seconds)
[11:47:32] *** Joins: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de)
[11:49:47] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:51:01] *** Joins: lavaball (felix@31.204.155.215)
[11:51:51] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[11:52:09] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[11:55:40] *** Joins: arinov (~arinov@213.194.126.155)
[12:03:25] *** Quits: foul_owl (~kerry@217.114.38.61) (Ping timeout: 256 seconds)
[12:12:30] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[12:15:14] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[12:25:34] *** Quits: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no) (Read error: Connection reset by peer)
[12:27:25] *** Joins: Volgaar (~volgaar@147.94.11.148)
[12:35:37] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Ping timeout: 240 seconds)
[12:57:49] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 256 seconds)
[13:04:35] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[13:04:50] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[13:11:59] *** Quits: mateo` (~mateo@ffmpeg/developer/mateo) (Ping timeout: 256 seconds)
[13:12:39] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[13:17:57] *** Quits: Fohsap (~Muimi@140.82.21.73) (Ping timeout: 240 seconds)
[13:18:03] *** Joins: rsx (~dummy@ppp-188-174-159-192.dynamic.mnet-online.de)
[13:20:18] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[13:21:19] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[13:24:49] *** Joins: mateo` (~mateo@ffmpeg/developer/mateo)
[13:34:25] *** Joins: c7s (~c7s@user/c7s)
[13:42:58] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[13:48:49] *** Quits: lucaswang (~lucaswang@58.246.19.98) (Quit: Connection closed)
[13:49:33] *** Joins: Lebela (~Lebela@85.187.219.215)
[13:49:35] <Lebela> hi
[13:49:52] <Lebela> I am running 2 very simple ffmpeg commands, but there is a problem
[13:49:57] <Lebela> ffmpeg -i in.mp4 -r 30 %03d.bmp
[13:49:57] <Lebela> ffmpeg -framerate 30 -pattern_type glob -i "*.bmp" -c:v libx264 -pix_fmt yuv420p out.mp4
[13:50:12] <Lebela> I compared the frames frame-by-frame in both videos.
[13:50:25] <Lebela> the frames in "in.mp4"  differ massively from the frames in "out.mp4"
[13:50:47] <Lebela> many animations get "eaten" because many frames get repeated while others don't get shown in "out.mp4"
[13:50:56] <Lebela> how can I make "out.mp4" look exactly like "in.mp4" ?
[13:51:49] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[13:52:05] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[13:57:28] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[14:04:37] *** Joins: Fohsap (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b)
[14:05:36] *** Quits: Lebela (~Lebela@85.187.219.215) (Quit: Leaving)
[14:06:05] *** Joins: xkuru (~xkuru@user/xkuru)
[14:12:18] *** Quits: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[14:16:41] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[14:16:57] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[14:27:26] *** Quits: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:55a1:91a6:bc24:285b) (Ping timeout: 245 seconds)
[14:32:57] *** Joins: XdaddyZX_ (uid456733@id-456733.tinside.irccloud.com)
[14:36:26] <another|> what's the original framerate?
[14:40:31] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[14:40:46] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[14:42:11] *** Joins: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de)
[14:47:15] *** tinystoat is now known as typoholic
[14:48:34] *** Quits: vanjavk (sid478698@id-478698.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[14:51:09] *** Joins: foul_owl (~kerry@23.82.193.78)
[15:03:57] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[15:04:12] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[15:06:27] *** Quits: foul_owl (~kerry@23.82.193.78) (Ping timeout: 256 seconds)
[15:11:29] *** Quits: Volgaar (~volgaar@147.94.11.148) (Quit: WeeChat 3.4)
[15:13:19] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[15:39:13] *** Joins: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net)
[15:52:13] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[15:52:28] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[15:53:09] *** Quits: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net) (Quit: djk)
[16:03:07] *** Quits: rv1sr (~rv1sr@user/rv1sr) (Ping timeout: 256 seconds)
[16:03:22] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[16:16:02] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[16:16:17] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[16:23:11] *** Joins: wnetzel (~wnetzel@eduroam-193-157-185-23.wlan.uio.no)
[16:23:31] *** Quits: wnetzel (~wnetzel@eduroam-193-157-185-23.wlan.uio.no) (Client Quit)
[16:29:55] *** Quits: rsx (~dummy@ppp-188-174-159-192.dynamic.mnet-online.de) (Quit: rsx)
[16:32:10] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[16:34:31] *** hentai is now known as Guest705
[16:34:31] *** Joins: porn (~hentai@user/hentai)
[16:36:12] *** Quits: Guest705 (~hentai@user/hentai) (Ping timeout: 250 seconds)
[16:39:17] *** Joins: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net)
[16:40:53] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[16:41:08] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[16:52:16] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[16:59:18] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Remote host closed the connection)
[17:20:29] *** Joins: lavaball (felix@31.204.155.215)
[17:22:56] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[17:26:06] *** Quits: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[17:26:16] *** Joins: Lebela (~Lebela@85.187.219.215)
[17:26:36] <Lebela> re
[17:26:41] <Lebela> furq, are you around by any chance?
[17:27:05] <Lebela> I have tried to solve something for the past ~20 hours but I am exhausted beyond believe
[17:27:36] <Lebela> the problem (concatenating) sounds so easy to solve, yet it is so messed up
[17:27:49] <Lebela> I tried a lot of different routes but none worked.
[17:28:01] <Lebela> And I have done so much research on the internet, mostly on stackoverflow
[17:28:08] <Lebela> I have really put in the work, but I need help
[17:29:27] *** porn is now known as hentai
[17:29:47] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[17:29:49] <kepstin> Lebela: indeed, if the in.mp4 is not exactly 30fps, then the "-r 30" option in the first command will result in some frames getting dropped or duplicated.
[17:30:12] <Lebela> kepstin, been there, done that
[17:30:19] <Lebela> even with -framerate to avoid any dropping of frames
[17:30:29] <Lebela> also tried to extract all frames and putting them back together as mp4
[17:30:37] <Lebela> tried to use the intermediate *.ts
[17:30:55] <Lebela> tried different formats (mkv, mp4, avi)
[17:31:14] <Lebela> I tried to remove milliseconds to we have straight seconds
[17:31:17] <Lebela> tried to re-encode
[17:31:27] <Lebela> roughly 20 hours,  I am so done with life right now
[17:31:39] <Lebela> the problem is:  There is a "jump" between the files
[17:31:58] <Lebela> in "vlc" (the media player) it looks like it's closing the video but then it starts the next video
[17:32:07] <Lebela> in "mpv", there is an akward pause
[17:32:19] <Lebela> also, the video quality suffers a lot of the second video after concatenating
[17:34:02] <znf> can we see that miraculous video?
[17:34:04] <Lebela> I also changed the bitrates
[17:34:06] <znf> because you seem to still be stuck here
[17:34:16] <Lebela> znf, I am devastated beyond believe
[17:34:42] <znf> And we can not have any idea on what the video looks like and what you're experiencing :)
[17:34:56] <Lebela> znf, I can send you a sample of the _second_ video  (the bad one)
[17:35:07] <Lebela> the first video, I am not allowed to forward (yet)
[17:35:23] <Lebela> but I am sure you will get the same problem when concatenating the 2nd video with any of your 4K videos
[17:35:24] <znf> what help would that be? :)
[17:35:42] <kepstin> hmm, all i can say is that the particular concatenate method i'd recommend for this situation is https://trac.ffmpeg.org/wiki/Concatenate#filter (concat filter) since that'll handle mismatches in codecs/settings.
[17:35:57] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Ping timeout: 240 seconds)
[17:36:02] <Lebela> znf, let me try if I can reproduce the error with a still image turned into an mp4 at 30 fps
[17:36:04] <Lebela> brb
[17:36:25] <Lebela> kepstin, been there, done that
[17:36:31] <kepstin> do both files have audio?
[17:36:35] <Lebela> no
[17:36:40] <Lebela> both are without audio
[17:36:59] <kepstin> so, what problem do you see with the concat filter method?
[17:37:00] <znf> we don't have a crystal ball, can not see the output, can not figure out what exactly you mean by "jump" or whatever :)
[17:37:12] <Lebela> znf, can I get a few moments?
[17:37:16] <Lebela> let's say 10 minutes?
[17:37:41] <Lebela> kepstin, the biggest problem is probably:
[17:37:44] <Lebela> >> Non-monotonous DTS in output stream 0:0; previous: 897005, current: 155136; changing to 897006. This may result in incorrect timestamps in the output file.
[17:38:00] <Lebela> For VLC, the problem is:
[17:38:01] <Lebela> >>  Too high level of recursion (3)
[17:38:10] <Lebela> >> Failed to create video converter
[17:38:11] <kepstin> that doesn't make sense, the concat filter shouldn't produce that method
[17:38:23] <znf> When you're giving us bits of info, it doesn't really help :)
[17:38:27] <Lebela> give me a moment I will create a sample case
[17:38:31] <kepstin> please share the exact command line and output (using a pastebin site, don't paste large text in the channel)
[17:38:37] <Lebela> I am closing the chat for 5-10 minutes
[17:38:44] <Lebela> I will come back with a working test case
[17:38:54] <Lebela> but I cannot do it while people are watching me (the chat)
[17:38:54] <Lebela> brb
[17:38:58] *** Quits: Lebela (~Lebela@85.187.219.215) (Quit: Leaving)
[17:39:15] *** Joins: neverfindme (~hayden@158.123.160.43)
[17:39:20] *** Quits: neverfindme (~hayden@158.123.160.43) (Remote host closed the connection)
[17:48:09] *** Joins: Lebela (~Lebela@85.187.219.215)
[17:48:10] <Lebela> re
[17:48:21] <Lebela> znf, kepstin: I am done
[17:48:32] <znf> Cool
[17:48:44] <Lebela> https://dpaste.org/rCXG
[17:48:50] <Lebela> ^ Step 1 - please create this video
[17:49:03] <Lebela> I am going to refer to it as "good.mp4"
[17:49:46] <Lebela> znf, do you - by any chance - have "Animationmaker" installed?  Or would you install it?  (please) ?
[17:49:53] <znf> neither
[17:50:00] <znf> and I'm also not going to go the length of creating a video
[17:50:02] <Lebela> should I send you the exported mp4 ?
[17:50:24] <Lebela> I upload the concatenated video
[17:51:15] <kepstin> we don't really want to re-create your problem unless it's really necessary - just seeing the ffmpeg command you're running to do the concat and its full output, along with a description of the playback problems would be a good start.
[17:52:38] <Lebela> https://filebin.net/kbz1ydp7h0132abq
[17:52:43] <Lebela> all files are there ^
[17:53:05] <Lebela> the video "concatenated.mp4" is the faulty video
[17:53:23] <Lebela> bad.mp4   is the video that works "standalone" but not when concatenated
[17:53:29] <kepstin> right, and please provide the command line used to make it and the terminal output from that command.
[17:53:32] <Lebela> good.mp4  is the video that works in both cases
[17:53:41] <hentai> Can I use ISC licensed code to contribute to FFmpeg?
[17:54:01] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Remote host closed the connection)
[17:54:01] <hentai> #gnu says I can, so long the original copyright notice is retained
[17:54:13] <Lebela> https://dpaste.org/Vinn/raw
[17:54:21] <hentai> But how does FFmpeg feel about having to retain a yet another copyright notice?
[17:54:23] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[17:54:34] <znf> Those videos have a different size
[17:54:38] <znf> good and bad
[17:54:55] <Lebela> znf, they should both be 3840 x 2160
[17:55:01] <kepstin> hentai: shouldn't be an issue. the copyright notice just has to be in the code, ffmpeg already has tons of those (they're also required by lgpl/gpl)...
[17:55:27] <hentai> kepstin, Thank you
[17:55:31] <znf> one is 4k the other is 1200x700
[17:55:50] <Lebela> let me check again
[17:56:01] <Lebela> oh dang my bad
[17:56:04] <Lebela> wait I re-export it
[17:56:25] <znf> https://pastie.dev/vpeOkM.yaml
[17:56:54] <znf> they also have a different framerate and a different color profile
[17:57:36] <Lebela> https://filebin.net/lt5979dlcjn2ersa
[17:57:42] <Lebela> this is the corrected file
[17:57:49] <Lebela> sorry, I used the wrong file before
[17:57:53] <znf> this is just a white video
[17:58:01] <kepstin> technically those issues can all be worked around with additional filters when concatenating with ffmpeg.
[17:58:15] <Lebela> znf, no there is a blue box flying around
[17:58:24] <znf> no wait, ffplay shows the right video
[17:58:37] <znf> the browser was just showing a white canvas
[17:58:44] <znf> also, different color profile, yuv444p
[17:58:55] <Lebela> https://filebin.net/dcl5gv6lo8xh2i0m
[17:59:08] <Lebela> this is the concatenated output of 2 same-sized videos
[17:59:17] <Lebela> both 4K, both 16:9,  both 30 fps
[17:59:35] <kepstin> Lebela: as i said, please share the *command line used to make the concatated file and the terminal output from running it*
[18:00:01] <kepstin> that will provide us useful information as to what might be going wrong
[18:00:04] <Lebela> https://dpaste.org/2t05/raw
[18:00:15] <Lebela> kepstin, was just about do do that
[18:00:26] <znf> to be fair, I'm not seeing an actual issue with the video you last linked, ffplay seems to play it properly
[18:00:38] <Lebela> znf, vlc jumps badly
[18:01:11] <Lebela> znf, mpv does _not_ show the second video at all when playing the concatenated video
[18:01:15] <kepstin> Lebela: hmm. so there's no guaratee that file will be playable correctly if the two inputs were made with different encoders or settings. a jump as decoder is reinitialized could be expected indeed
[18:01:28] <kepstin> Lebela: i'd recommend using the concat filter method to avoid problems.
[18:01:56] <Lebela> kepstin, which command would work for sure in regards to the filter method you mentioned?
[18:02:26] <kepstin> i sent you a documentation link eariler, but here it is again: https://trac.ffmpeg.org/wiki/Concatenate#filter
[18:03:00] <kepstin> note that concat filter requires re-encoding the video, so you need to set appropriate encoder options to maintain expected quality.
[18:03:16] <Lebela> I am sure I tried that already
[18:03:22] <Lebela> I re-wrote the command without the audio
[18:03:28] <Lebela> but that was roughly ~10 hours ago
[18:03:36] <Lebela> so I need to try it again to see what went wrong with it
[18:03:53] <Lebela> kepstin, can I just re-encode the "bad" video?
[18:04:03] <Lebela> kepstin, there are 40+ videos that I will concatenate
[18:04:10] <Lebela> the total size will be 200+ GB
[18:04:20] <Lebela> re-encoding would be a horror
[18:04:32] <znf> your issue is that you're trying to concatenating files with different color spaces
[18:04:35] <Lebela> can't I just make the 10 seconds outro  (the blue box) match the rest?
[18:04:49] <Lebela> znf, can I force the outro into the right color space?
[18:05:00] <znf> re-encode that one, then, to match
[18:05:06] <Lebela> I rather force the 10 seconds outro to behave rather than 200  GB of footage
[18:05:54] <Lebela> znf, could you please hook me up with a working command for my specific needs?
[18:05:59] <kepstin> note that you *can* re-encode while using the concat demuxer (like the command you posted in https://dpaste.org/2t05/raw ) by setting an encoder instead of using -c copy, which is likely to improve compatibility if you have some "not quite matching" video inputs.
[18:06:05] <Lebela> znf, you saw the videos - what exactly would I need to do?
[18:06:26] <Lebela> kepstin, yep but it's gonna take a loooooong time
[18:06:36] <Lebela> kepstin, the whole post-processing already takes 12+ hours
[18:06:46] <Lebela> kepstin, if I have to re-encode, then god be my saviour
[18:06:48] <znf> I only saw 2 videos, and I'm not sure which one is the "reference" one
[18:07:01] <Lebela> znf, "good.mp4" is the reference (for all videos)
[18:07:07] <Lebela> znf, "bad.mp4" is the outro
[18:07:20] <znf> so you need to append the "outro" for everyone?
[18:07:31] <Lebela> only once
[18:07:36] <Lebela> at the very, very end
[18:08:09] <Lebela> thank you for being there for me
[18:08:27] <Lebela> I had a really terrible night+day and I am exhausted and powerless and the fact that you are here helps me big time
[18:08:35] <znf> so let me get this straight: you have multiple videos that you want to concatenate TOGETHER, and then you want to append "bad.mp4" (which is the outro) after all of them, yes?
[18:08:44] <Lebela> I tried soooooooo many things, and this video keeps jumping and jumping
[18:08:55] <Lebela> znf, yes
[18:09:21] <znf> also, are you sure all those videos (except the outro one) are identical?
[18:09:51] <Lebela> yes, they are all from the same camera type and model
[18:10:09] <Lebela> znf, they were taken from different angles (different cameras) but all the same type / model / make
[18:10:28] <znf> that doesn't really say much :)
[18:10:38] <Lebela> don't scare me ;)
[18:10:46] <kepstin> and same settings? same camera can record at different resolutions/frame rates/etc :)
[18:10:48] <Lebela> how could the same camera model lead to different outcomes?
[18:10:54] <Lebela> same settings
[18:11:00] <Lebela> definitely same settings
[18:11:23] <znf> we don't know, the camera might decide that bt470bg is not a good fit for whatever it's filming
[18:11:26] <Lebela> I can't describe you how much this outro has depressed me tonight
[18:11:45] <kepstin> right. so concatenating video made with a software encoder to video made with a hardware encoder like in a camera is always problematic
[18:12:02] <kepstin> the hardware encoder is a black box, so you can't really match the settings properly to make a concatable video using software
[18:12:33] <kepstin> sometimes you can guess, or play around with profile settings when encoding the video to put at the end
[18:12:44] <kepstin> but sometimes you just have to re-encode the whole thing to get a clean concat :/
[18:13:10] <Lebela> What if I used a different software but animationmaker?
[18:13:16] <znf> that's not your issue
[18:13:41] <Lebela> I tried a workaround which I was _sure_ would work, but it failed, too
[18:13:49] <Lebela> I exported _every_ frame and then put it back together
[18:13:54] <kepstin> the particular thing you have to do is encode (or re-encode) your outro video with settings that match (or are a subset of) the settings that the camera's builtin video encoder used.
[18:14:02] <Lebela> but, for some reason, some frames were repeated, others dropped
[18:14:08] <kepstin> but what those settings are... who knows?
[18:14:38] *** Joins: guest (~guest@124.126.139.136)
[18:14:42] <znf> basically you need to match these at best: https://pastie.dev/wEykOC.py
[18:14:43] <kepstin> if you could share a clip direct from the camera encoder someone here with spare time (not me) might be able to play around with x264 to find settings that will result in a clean concat.
[18:14:44] <Lebela> kepstin, if you tell me what commands would tell us the settings, I can tell you
[18:14:50] <Lebela> I have the original camera's videos here
[18:14:51] <znf> but as kepstin said - it's a black box, your mileage may vary
[18:15:01] <Lebela> so I can find out all about their codec or whatever specs
[18:15:21] <znf> see the command I used there
[18:15:28] <znf> the ffprobe one
[18:15:34] <znf> that's basically your best starting point
[18:15:48] <Lebela> thank you znf
[18:15:53] <znf> it's a long shot tough
[18:15:54] <Lebela> I am running this on the "real" video
[18:16:13] <znf> better be running it on more than one segment
[18:16:22] <znf> to see if the output differs between them
[18:17:33] <Lebela> just doing so
[18:17:55] <kepstin> particular things you'll need to do when (re)encoding the outro video to do are to limit x264 using the -profile option to match the profile of the camera video, and ensure gop size and reference frame counts don't exceed the camera video encoder.
[18:20:46] <Lebela> znf, kepstin:  https://dpaste.org/BVRq/raw
[18:20:53] <Lebela> I only removed the "Creation Date"
[18:21:02] <Lebela> this is what the original files _all_ look like
[18:21:35] <kepstin> baseline profile (so using constrained baseline in libx264 is ok), no b frames, 1 reference frame.
[18:21:48] <Lebela> is that good or bad?
[18:21:51] <kepstin> iirc constrained baseline prevents b frames already
[18:22:03] <kepstin> neither, it's just settings
[18:22:18] <kepstin> cameras don't encode video very efficiently, they're designed to use little power.
[18:22:38] <kepstin> (you could make this video a lot smaller without visible quality loss using a good software encoder)
[18:22:43] <Lebela> Which settings do I need to pass into ffmpeg to resemble this?
[18:23:13] <Lebela> I see many settings but no idea what is important and what not
[18:24:44] <Lebela> I pasted the Outro's ffprobe output, too
[18:24:59] <Lebela> OUTRO >> https://dpaste.org/NxL4/raw
[18:25:18] <Lebela> Camera's videos  >>  https://dpaste.org/BVRq/raw
[18:25:30] <Lebela> maybe that helps to see it side-by-side
[18:25:31] <kepstin> hmm. that output doesn't include the gop size, i think, but that might not be important.
[18:26:14] <Lebela> there is no color_space in the outro!
[18:26:35] <kepstin> try re-encoding the outro video with "-c:v libx264 -profile baseline -level 41 -refs 1 -pix_fmt yuv420p"
[18:26:52] <Lebela> thank you
[18:27:23] <kepstin> note that the conversion from 444 to 420 will result in some colour smudging if there's sharp digital graphics with fine colour details.
[18:27:38] <kepstin> this is unavoidable, if it's a problem you need to redesign your outro graphics.
[18:29:11] <kepstin> you'll want to also add a -crf or bitrate option to that command when re-encoding the outro to set the quality ^^^
[18:29:24] <kepstin> default is, i think, crf 22 or 23? which is ok, but not great, quality.
[18:29:27] <Lebela> re-encoding worked perfectly
[18:29:31] <Lebela> but the problem is concatenating
[18:29:32] <Lebela> https://dpaste.org/rCXK/raw
[18:30:04] <Lebela> kepstin, can I go with crf 0 ?
[18:30:22] <Lebela> just to give it the best quality?  The outro is only a few seconds,  size doesn't matter here
[18:30:24] <kepstin> no, crf 0 is a special lossless mode that's incompatible with baseline profile
[18:30:39] <Lebela> what is the best I can do?   1  ?
[18:30:41] <kepstin> (around 14-16 or so is probably fine)
[18:31:01] <kepstin> the outro video is short, right? just try a few and check.
[18:31:05] <Lebela> the outro contains small text,  so legibility is of utmost imporance
[18:31:21] *** Quits: guest (~guest@124.126.139.136) (Ping timeout: 256 seconds)
[18:31:24] <Lebela> kepstin, but concatenating failed... did you see my paste?
[18:31:38] <Lebela> I re-encoded as per your request
[18:31:50] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[18:31:50] <Lebela> then I tried to concatenate but ffmpeg complains about the moov atom
[18:31:52] <Lebela> https://dpaste.org/rCXK/raw
[18:33:39] <kepstin> that means that the file is incomplete, which means the re-encode was either incomplete or failed
[18:34:27] <Lebela> https://dpaste.org/i4F5/raw
[18:34:35] <Lebela> ^ the re-encoding process looked good
[18:35:43] <kepstin> as i said that means that the file is incomplete, which means the re-encode was either incomplete or failed
[18:38:10] <Lebela> kepstin, I don't know what to do.
[18:38:16] <Lebela> I can open and play the re-encoded video
[18:38:17] *** Quits: jafa (~jafa@ip70-162-39-218.ph.ph.cox.net) (Ping timeout: 240 seconds)
[18:38:22] <Lebela> no idea what could have gone wrong
[18:38:46] <kepstin> are your sure your concat list has the correct filename?
[18:38:52] <Lebela> yes
[18:39:11] <kepstin> since if the file is playable, then it has a correct moov atom
[18:39:16] <Lebela> how about my approach from earlier tonight, where I wanted to export every frame of the video and then put it back together as mp4?
[18:39:18] <another|> -movflags faststart
[18:39:24] <Lebela> another|, already done that
[18:39:26] <kepstin> Lebela: that's a waste of time.
[18:39:28] <Lebela> I still get the same error
[18:40:00] <Lebela> another|, my hope was that  -movflags +faststart  would move the moov atom to the front
[18:40:10] <Lebela> kepstin, why is that a waste of time?
[18:40:19] <another|> color_*
[18:40:29] <kepstin> since it's the same as doing a re-encode except with extra steps
[18:40:33] <Lebela> the outro only has 3 colors
[18:40:44] <Lebela> I am next to nothing concerned about the colors
[18:41:20] <kepstin> moov atom at the start isn't necessary for concat demuxer, but wouldn't cause any issues.
[18:41:27] <another|> set color_space, etc. on the outro re-encode
[18:41:45] <Lebela> okay.
[18:41:46] <Lebela> thank oyu
[18:41:48] <Lebela> *you
[18:45:12] <Lebela> -color_range tv -color_space" bt470bg -color_transfer bt709 -color_primaries bt470bg -chroma_location left
[18:46:22] *** Quits: frikiluser (~frikiluse@170.253.37.24) (Quit: Client closed)
[18:46:56] <Lebela> -color_space without _  (-colorspace)
[18:47:00] <Lebela> but what about  -color_transfer bt709  ?
[18:47:07] <Lebela> no such option seems to exist in ffmpeg?
[18:47:57] <Lebela> I ran the following command sucessfully:
[18:47:58] <Lebela> ffmpeg -i bad.mp4 -c:v libx264 -profile:v baseline -level 41 -refs 1 -pix_fmt yuv420p -color_range tv -colorspace bt470bg -color_primaries bt470bg -movflags +faststart re-encoded.mp4
[18:48:35] <Lebela> [mov,mp4,m4a,3gp,3g2,mj2 @ 0x555ae43aa140] moov atom not founditrate=N/A speed=N/A
[18:48:35] <Lebela> [concat @ 0x555ae43a0380] Impossible to open 're-encoded.mp4'
[18:48:35] <Lebela> videos.txt: Invalid data found when processing input
[18:48:41] <Lebela> I cannot concatenate it
[18:49:12] <Lebela> https://filebin.net/zb4eso17op9sga1a
[18:49:19] <Lebela> this is the  re-encoded.mp4  file
[18:50:31] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[18:52:24] <znf> why are you re-encoding the outro from an already existing video, when you have the original bitmaps?
[18:52:56] <Lebela> znf, that's a new video I am cutting
[18:53:11] <Lebela> and the bitmaps (bmps) would come to be if I exported them from the outro
[18:53:48] <znf> I don't know of any "animation" software that doesn't have an export-to-bitmaps option
[18:55:04] <Lebela> animationmaker seems to only export to avi, mp4, gif, mpeg, html
[18:56:12] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Ping timeout: 256 seconds)
[18:56:20] <another|> -color_trc
[18:56:27] <znf> weird
[18:57:20] <Lebela> another|, which value would I need for this?
[18:57:29] <Lebela> znf, should I start over with a different software?
[18:57:34] <znf> no
[18:57:40] <znf> it's irrelevant
[18:57:47] <Lebela> What I did tonight was promising... it only had ONE tiny problem:
[18:57:49] <Lebela> at first, I did:
[18:58:07] <Lebela> ffmpeg -i bad.mp4 -framerate 30 %04d.jpg
[18:58:24] <Lebela> this gave me every frame as jpg
[18:58:27] <Lebela> then I did:
[18:58:34] <Lebela> ffmpeg -framerate 30 -pattern_type glob -i "*.jpg" -c:v libx264 -pix_fmt yuv420p -framerate 30 NEW.mp4
[18:58:49] <znf> why would you...
[18:58:51] <Lebela> all problems were gone, but, new problems arrived
[18:59:00] <Lebela> the animations started to jump weirdly
[18:59:03] <znf> never export to jpg...
[18:59:13] <Lebela> znf, I did bmp, sorry, jpg was a typo
[18:59:19] <znf> use PNG
[18:59:31] <Lebela> the problem is the same:
[18:59:35] <Lebela> the frames are not identical
[18:59:38] *** Quits: Fohsap (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b) (Ping timeout: 250 seconds)
[18:59:51] <znf> that being said, why are you setting up a framerate for the output?
[18:59:52] *** Joins: Fohsap (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b)
[18:59:52] <Lebela> in the newly put-together video, some frames got duplicated, others skipped
[19:00:06] <Lebela> znf, because I was so desperate because of the dropped frames
[19:00:16] <znf> you should never
[19:00:28] <Lebela> stackoverflow.... and 20 hours of time for trial and failure
[19:01:22] <Lebela> long story short:
[19:01:24] <znf> exporting animations will always look weird
[19:01:28] <Lebela> I then did this:
[19:01:35] <Lebela> ffmpeg -i NEW.mp4 -framerate 30 %04d.bmp
[19:01:41] <Lebela> and then I compared the frames.
[19:02:05] <znf> what's the original framerate of that video?
[19:02:12] <Lebela> the amount of frames was equal,  but the content differently
[19:02:15] <Lebela> 30 frames
[19:02:27] <znf> then you don't need to set an explicit -framerate
[19:02:40] <Lebela> znf:  let us say, in the animationmaker's outro, the animation was:
[19:02:44] <Lebela> 1 2 3 4 5 6 7 8 9
[19:02:56] <Lebela> then, in the newly put together video, the animation might be:
[19:03:05] <Lebela> 1 2 3 3 3 4 4 9
[19:03:18] <Lebela> no idea why that happened
[19:03:55] <Lebela> that is of course not the animation, just a way to describe it
[19:04:03] <Lebela> so many frames got duplicated, others skipped
[19:04:12] <Lebela> besides that,  it solved all problems with the video
[19:05:39] <znf> can't say I ever had that :)
[19:05:47] <znf> and I've done plenty of programmed/scripted videos
[19:07:14] <Lebela> should I give up and delete the outro?
[19:07:19] <Lebela> or what should I do?
[19:07:37] <znf> I honestly do not know :)
[19:07:40] <Lebela> https://filebin.net/zb4eso17op9sga1a
[19:07:43] <Lebela> did you see this file?
[19:07:51] <Lebela> that is the outro that I re-encoded
[19:08:15] <znf> all I see is green in Chrome
[19:08:27] <Lebela> can you try to merge this with good.mp4 ?
[19:08:30] <Lebela> or any other video?
[19:08:37] <Lebela> I wonder if it works on your system
[19:09:06] <Lebela> wait
[19:09:10] <Lebela> that is the wrong file
[19:10:20] <Lebela> https://filebin.net/v03dd5nduxosaagj
[19:11:01] <znf> I don't see what the issue with that fileis
[19:11:10] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[19:11:15] <znf> you're just not gonna get a smooth animation in 30 fps
[19:11:23] <Lebela> it works
[19:11:33] <Lebela> I might have worked on the wrong file for the past 10 minutes
[19:11:40] <Lebela> not before... but after re-encoding
[19:11:44] <Lebela> god I am so exhausted
[19:11:45] <Lebela> and happy
[19:11:46] <Lebela> thank you
[19:11:47] <Lebela> it works
[19:12:14] <Lebela> znf, yeah, I would love to set the framerate higher, but wouldn't that be a problem?
[19:12:22] <Lebela> the entire "real videos" are 30 fps
[19:12:29] <Lebela> can I set the outro to 120 fps without trouble?
[19:13:46] <znf> no you can not
[19:14:08] <Lebela> should I upsample the rest of the footage?
[19:14:23] <znf> you need to optimize the animation, how you do that, I've no idea, I'm no animation expert
[19:14:38] <Lebela> can I please ask you one more question?
[19:14:44] <kepstin> you said you didn't want to re-encode the rest of the footage...
[19:14:49] <Lebela> it is (hopefully) a tiny question
[19:14:59] *** Joins: minimal (~minimal@user/minimal)
[19:16:06] <znf> to be clear: you can not mix and match framerates, color spaces, codecs, resolutions etc. and be able to stream-copy the videos to a new output (ie: concatenating) without re-encoding, that's just not how video works
[19:16:49] <Lebela> does that mean, that the solution we just found is NO solution?
[19:17:20] <Lebela> ffmpeg -i bad.mp4 -c:v libx264 -profile:v baseline -level 41 -refs 1 -pix_fmt yuv420p -color_range tv -colorspace bt470bg -color_primaries bt470bg -movflags +faststart re-encoded_3.mp4
[19:17:27] <kepstin> if you re-encode the outro with no extra framerate options, all the frames should passthrough fine...
[19:17:28] <Lebela> ^ this would be my "solution" for the outro
[19:17:51] *** Quits: blb (~blb@user/blb) (Ping timeout: 245 seconds)
[19:18:11] <Lebela> Could it become a problem in the future?  e.g. on Youtube?
[19:18:17] <Lebela> maybe it works now, but not in 2 years time?
[19:18:27] <Lebela> I feel like I should really re-encode the entire video
[19:18:32] <kepstin> if it's not already 30fps, it would be desirable to convert it. i'd recommend using the fps filter for that, it'll provide more consistent results than other methods.
[19:18:52] <Lebela> the videos are already 30 fps
[19:19:04] <Lebela> but the animation would run smoother with 60 or 120 fps
[19:19:04] *** Joins: blb (~blb@user/blb)
[19:19:05] <kepstin> if your cpu is faster than your upload bandwidth, re-encoding could make it faster to upload to youtube :)
[19:19:28] <kepstin> eh, for an outro it doesn't really matter? 30fps is usually fine
[19:19:40] <Lebela> Upload speed is 100 Mbit
[19:19:45] <Lebela> CPU is an i5
[19:20:02] <Lebela> but, thanks to ffmpeg, my i5 can really handle 4K well
[19:20:10] <Lebela> ffmpeg is a blessing
[19:20:43] <Lebela> so, is there any risk that the outro (or the into) will fail in the future if it works now?
[19:21:10] <znf> not unless your main video changes
[19:21:12] <Lebela> because, re-encoding the entire video would annoy me a little bit, _but_ if the videos stopped working in the future after many views, that would be a real issue
[19:21:30] <kepstin> note that youtube for example re-encodes after upload
[19:21:38] <znf> the video won't just fail suddenly once it's already encoded
[19:21:41] <kepstin> so the format you upload is unrelated to what people actually see
[19:22:16] <Lebela> kepstin, are you sure?  I read, that if videos are uploaded according to youtube's specifications, they would NOT re-encode
[19:22:36] <kepstin> no, they always re-encode
[19:22:44] <znf> they stopped doing that ages ago (not re-encoding)
[19:22:55] <kepstin> uploaded according to specs allows them to start re-encoding as you upload, so the video is ready sooner
[19:23:14] <Lebela> how about tiktok and odysee ?
[19:23:35] <kepstin> i don't know specifics about those, but most platforms re-encode uploads
[19:23:39] <znf> tiktok most likely re-encodes
[19:23:55] <znf> keep in mind they have to convert dozens of formats when you upload something (youtube)
[19:23:57] <Lebela> odysee... I suppose not because they use the blockchain
[19:24:14] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Read error: Connection reset by peer)
[19:24:17] <znf> they don't "use blockchain" to store video
[19:24:43] <kepstin> you can't put videos on blockchain anyways, doesn't make sense.
[19:24:44] <kepstin> so presumably they're linking to video stored on normal servers somewhere, and could do whatever with it
[19:24:47] <Lebela> znf, what makes you think so?
[19:25:04] <Lebela> afaik, odysee is decentralized
[19:25:17] <kepstin> basic knowledge about how blockchains works informs that view.
[19:25:22] <znf> that doesn't mean they use "blockchain" to store videos...
[19:25:27] <znf> blockchains are slow as hell
[19:25:34] <Lebela> https://www.zdnet.com/article/blockchain-based-odysee-keeps-your-social-media-content-online/
[19:25:41] <kepstin> it's probably ipfs or something if they say it's decentralized
[19:25:49] <Lebela> Quote from the page: "and the content remains on the blockchain permanently."
[19:26:05] <another|> kepstin: you can put arbitrary data in a blockchain. whether it's practical is a whole different can
[19:26:11] <Lebela> They use the LBRY network,  odysee is just the platform accessing it
[19:26:16] <kepstin> yeah, that's just marketing text.
[19:26:23] <kepstin> doesn't mean anything :)
[19:26:49] <another|> * of worms
[19:26:50] *** Joins: lavaball (felix@31.204.155.215)
[19:26:51] <Lebela> now I feel a bit embarrassed that I said that without doing research first
[19:26:56] <Lebela> please don't think less of me now
[19:27:16] *** Joins: JonnyBurger (~JonnyBurg@dhcp-82-220-85-25.bbcs.solnet.ch)
[19:27:24] <Lebela> I will do my research when I wake up and find out where odysee really stores the videos
[19:27:41] <kepstin> but a decentralized platform in general wouldn't have any central servers to do media encoding, so content would be "as-is" hosted by the participants
[19:27:42] <kepstin> use or not use of blockchain doesn't matter at all for that
[19:28:47] <Lebela> kepstin, I gave it a second thought.
[19:28:55] <Lebela> the original videos are huge... 200 GB easy
[19:29:01] <Lebela> but the cut videos are only 10-15 GB
[19:29:04] <kepstin> but yeah, if ffmpeg (ffplay) can play a video now, it's almost certainly going to keep being playable for the foreseeable future.
[19:29:09] *** Joins: GoD-Tony_ (uid107595@id-107595.uxbridge.irccloud.com)
[19:29:13] <Lebela> do you think I should re-encode it all?  (into, video, outro) ?
[19:29:19] *** GoD-Tony_ is now known as GoD-Tony
[19:29:23] *** Quits: GoD-Tony (uid107595@id-107595.uxbridge.irccloud.com) (Client Quit)
[19:29:30] *** Quits: JonnyBurger (~JonnyBurg@dhcp-82-220-85-25.bbcs.solnet.ch) (Client Quit)
[19:29:34] *** Joins: GoD-Tony (uid107595@id-107595.uxbridge.irccloud.com)
[19:29:35] <kepstin> i probably would, but I have very powerful local computer and not great upload speeds on my internet.
[19:29:40] *** Joins: JonnyBurger (~JonnyBurg@dhcp-82-220-85-25.bbcs.solnet.ch)
[19:30:26] <Lebela> I am trying it now
[19:30:31] <znf> Storing Video in "blockchain" would be massive; LBRY just uses peer2peer to transfer the video from your PC/Server to other viewers, it works a bit like torrents (or, well ipfs); your will be "uploaded" in some sort of way to different servers that would cache your file for a while
[19:31:02] <znf> but that doesn't mean it's gonna be permanently online, those servers will flush their caches at a point or another
[19:31:45] <znf> if you store something on IPFS right now, a small file might have a chance of surviving between multiple gateways/clients, but if it's an unpopular file and you (as the source who "uploaded" it) go offline for long periods of time, that resource is most likely gone
[19:33:07] <znf> https://lbry.com/faq/how-to-publish - "I shared my URL, but others can't download it. What's going on?
[19:33:08] <znf> "
[19:34:11] <Lebela> ffmpeg -i intro.mp4 -i video.mp4 -i outro.mp4 -filter_complex "[0:v:0][1:v:0][2:v:0]concat=n=3:v=1:a=1[outv]" -map "[outv]" result.mp4
[19:34:31] <Lebela> nah, one audio too much
[19:34:39] <Lebela> ffmpeg -i intro.mp4 -i video.mp4 -i outro.mp4 -filter_complex "[0:v:0][1:v:0][2:v:0]concat=n=3:v=1[outv]" -map "[outv]" result.mp4
[19:35:07] <Lebela> but how will ffmpeg know which codec it should use?  And which color space?
[19:35:21] <Lebela> Does this command contain any info like "use it from video 0 or video 1 ?
[19:43:51] <kepstin> if you don't specify a codec, ffmpeg picks a default based on what output format/filename you provided
[19:43:56] <Lebela> I have read both, the wiki like documentation and the man page
[19:44:03] <kepstin> you should always specify an encoder
[19:44:25] <Lebela> both sites, man page + wiki don't show _how_ the syntax really looks like with a codec
[19:44:39] <Lebela> ffmpeg is such a powerful software, but the documentation should be better
[19:44:46] <Lebela> I would even be willing to chime in and help
[19:44:48] <kepstin> hmm? you've already done some encoding.
[19:45:02] <Lebela> kepstin, yeah but outside the "weird" filter_complex
[19:45:16] <kepstin> filter complex is just a single option on its own
[19:45:23] <kepstin> it doesn't affect the other encoding settings
[19:45:29] <znf> the documentation is really strong though
[19:45:54] <znf> ffmpeg is just not a tool that someone without some bits of knowledge about video should attempt to use for complex tasks
[19:45:57] <Lebela> I try it... brb
[19:46:24] <kepstin> the main thing to note about encoding settings is that position matters - they must be before the output filename, but after all the input options.
[19:47:02] <Lebela> ffmpeg -i intro.mp4 -i video.mp4 -i outro.mp4 -filter_complex "[0:v:0][1:v:0][2:v:0]concat=n=3:v=1,-c:v libx264 -profile:v baseline -level 41 -refs 1 -pix_fmt yuv420p -color_range tv -colorspace bt470bg -color_primaries bt470bg -movflags +faststart[outv]" -map "[outv]" result.mp4
[19:47:16] <kepstin> er, i don't know what you're doing there
[19:47:22] <kepstin> don't touch the filter_complex option
[19:47:25] <kepstin> that sets the filters
[19:47:38] <kepstin> encoding options are separate options, same as if you weren't using filter_complex
[19:47:52] <Lebela> will it then be valid for all 3 inputs?
[19:48:09] <kepstin> encoding affects the output, not the inputs
[19:48:12] <Lebela> ffmpeg -i intro.mp4 -i video.mp4 -i outro.mp4 -filter_complex "[0:v:0][1:v:0][2:v:0]concat=n=3:v=1[outv]" -map "[outv]" -c:v libx264 -profile:v baseline -level 41 -refs 1 -pix_fmt yuv420p -color_range tv -colorspace bt470bg -color_primaries bt470bg -movflags +faststart result.mp4
[19:48:39] <another|> znf: eh! documentation is... varied
[19:48:46] <kepstin> Lebela: you can remove that "-profile:v baseline -level 41 -refs 1" stuff and the colour space options
[19:48:53] <kepstin> those were only needed to try to match the camera video
[19:49:02] <znf> writing docs is hard :)
[19:49:13] <Lebela> kepstin, but how will ffmpeg then know that it should give all videos the same color profiles?
[19:49:20] <kepstin> libx264 can encode with much better efficiency without the profile/level options, and colour space is copied from input
[19:49:49] <kepstin> in this case, it'll just use the colour space from the first video because of how the concat filter works
[19:49:56] <Lebela> ffmpeg -i intro.mp4 -i video.mp4 -i outro.mp4 -filter_complex "[0:v:0][1:v:0][2:v:0]concat=n=3:v=1[outv]" -map "[outv]" -c:v libx264 -pix_fmt yuv420p -movflags +faststart result.mp4
[19:49:57] <kepstin> which should be fine here
[19:50:10] *** Quits: rv1sr (~rv1sr@user/rv1sr) ()
[19:50:36] <Lebela> kepstin, the first video is a still image for 5 seconds
[19:50:43] <Lebela> so using this would be bad
[19:50:57] <kepstin> hmm? contents of the video doesn't matter...
[19:51:26] <Lebela> you are right. sorry.
[19:51:33] <Lebela> one last question before I go to bed:
[19:52:05] <Lebela> If I were to be using the "simple" method of concatenating _without_ filter_complex:
[19:52:25] <Lebela> youtube wants me to set stuff like moveflags and keyframes
[19:52:36] <Lebela> will I need to do this again _after_ concatenating?
[19:53:00] <Lebela> currently, I set the moveflags option and the keyframes option for every cut out video chunk
[19:53:06] <Lebela> and then I concatenate them all
[19:53:08] <kepstin> you're encoding a new video, so you need to set all appropriate encoding options, which can include things like gop size (keyframe interval)
[19:53:16] <Lebela> but after concatenating, I don't do anything to the moov flag
[19:53:36] <kepstin> if you're re-encoding when concatenating, the only place those options are needed is the final concat encode
[19:53:59] <Lebela> what if I did not re-encode?
[19:54:09] <Lebela> what if I just used  file ''  in a text file and concatenated that?
[19:54:24] <Lebela> is it enough, that every single file of them has "moveflags" and keyframes?
[19:54:34] <kepstin> if you use "-c copy" then the video is copied as-is, so setting keyframe interval is ignored
[19:54:37] <Lebela> or will the moovflags be at the wrong spots then?
[19:54:46] <kepstin> the +movflags only needs to be on the final output file
[19:54:47] <Lebela> oh
[19:55:16] <Lebela> kepstin, can I do +movflags with a streamline copy concatenation without re-encoding?
[19:55:23] <kepstin> yes.
[19:55:55] <another|> that only affect container data
[19:56:01] <kepstin> the movflags stuff is concerned with muxing - i.e. how the video is stored into the output file. it doesn't matter what the video itself actually is.
[19:56:25] <Lebela> ffmpeg -f concat -safe 0 -i videos.txt -c copy -movflags +faststart yyy.mp4 -y
[19:56:28] <Lebela> is that okay?
[19:56:36] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[19:56:44] <kepstin> setting -movflags +faststart is like putting a label that says what's in a box on the front of the box instead of the back, so you don't need to pull out the whole box to read the label :)
[19:57:50] <Lebela> ffmpeg -f concat -safe 0 -i videos.txt -c copy -vf format=yuv420p -force_key_frames "expr:gte(t,n_forced*1)" -use_editlist 0  -movflags +faststart yyy.mp4 -y
[19:57:59] <Lebela> that fails
[19:58:14] <Lebela> Filtergraph 'format=yuv420p' was defined for video output stream 0:0 but codec copy was selected.
[19:58:20] <Lebela> I remove that
[19:58:44] *** Joins: Volgaar (~volgaar@147.94.11.148)
[19:58:48] <Lebela> Unable to find a suitable output format for 'expr:gte(t,n_forced*1)'
[19:58:52] <Lebela> ^ keyframes also fail
[19:58:55] <another|> filters cannot be used with stream copy
[19:59:25] <kepstin> Lebela: that just means you have a syntax error in the command - like you removed a value for an option but forgot to also remove the option
[19:59:27] <Lebela> so, long story short, I must re-encode
[19:59:53] <kepstin> did you remove the "format=yuv420p' but forget to remove the '-vf' maybe?
[20:00:00] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[20:00:27] <kepstin> anyways, setting keyframes can't be used without re-encoding.
[20:00:45] <Lebela> ffmpeg -f concat -safe 0 -i videos.txt -c copy -use_editlist 0 -movflags +faststart yyy.mp4 -y
[20:00:48] <Lebela> ^ working
[20:01:27] <kepstin> no real reason to re-encode if you get a playable file without re-encoding, unless the result is too large.
[20:01:32] <Lebela> If nothing else, this day has taught me,  that I am getting too old for pulling all-nighters
[20:02:16] *** Joins: Hackerpcs (~user@user/hackerpcs)
[20:02:32] <Lebela> how important are the keyframes for youtube?
[20:02:34] *** Quits: Hackerpcs (~user@user/hackerpcs) (Max SendQ exceeded)
[20:02:40] <kepstin> heh. indeed. a few shorter days with proper rest will usually be more productive and less frustrating.
[20:02:45] <Lebela> they supposedly are important, but without re-encoding, I cannot set them
[20:02:52] <kepstin> for youtube uploads (non-live?) almost meaningless
[20:02:57] <kepstin> it re-encodes anyways
[20:03:27] <kepstin> worst case is that it takes a little longer on their end to get the video ready after uploading
[20:03:40] <Lebela> yeah that is okay.
[20:03:40] *** Joins: Hackerpcs (~user@user/hackerpcs)
[20:03:46] <Lebela> even if it takes a day for them to do it
[20:03:47] *** Joins: pagios (~pagios@life.is-a.beauty)
[20:03:52] <Lebela> no rush here
[20:04:01] <Lebela> I think I should go to bed.  I am seriously concerned about my health right now.
[20:04:08] <kepstin> they're notoriously slow to get 4k content ready even if it is perfectly encoded according to guidelines
[20:05:04] <Lebela> well, they have hundreds of hours watch time coming in every second
[20:05:13] <Lebela> it's fascinating, that they can handle it at all
[20:05:15] <kepstin> youtube only serves 4k video as vp9, and even at google scale vp9 video is slow to encode :)
[20:05:28] <Lebela> what us vp9?
[20:06:08] <kepstin> a video codec that google developed which doesn't require royalty payments for patents, and it well supported in (non-apple) web browsers.
[20:06:36] <Lebela> one never stops learning. Thank you
[20:06:59] <Lebela> kepstin, znf and another|:   I am sooooo happy and grateful to you!
[20:07:06] <Lebela> Please bear with me, I must go to bed
[20:07:22] <Lebela> I have been awake longer than I should have, I can barely keep my eyes open, and I am shaking
[20:07:28] <Lebela> really, I must hit the sack now
[20:07:30] <another|> ay. gotta go getting food
[20:07:35] <kepstin> good night... or whatever time it is there ;)
[20:07:45] <Lebela> thank you kepstin
[20:07:50] <Lebela> enjoy your meal, another|
[20:08:00] <Lebela> I will likely drop by tomorrow and let you know if all went well
[20:08:10] <Lebela> probably it will be smooth sailing going forward
[20:08:14] <Lebela> thank you again!
[20:08:18] <Lebela> your guys are amazing
[20:08:36] <Lebela> and ffmpeg is great!
[20:08:39] <Lebela> good night
[20:08:43] *** Quits: Lebela (~Lebela@85.187.219.215) (Quit: Leaving)
[20:10:29] *** Joins: Buster (~Buster@46.160.36.66)
[20:15:30] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Read error: Connection reset by peer)
[20:19:56] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 245 seconds)
[20:24:34] *** Quits: Volgaar (~volgaar@147.94.11.148) (Quit: WeeChat 3.4)
[20:25:52] *** Joins: wyatt8750 (~wyatt8740@38.67.247.76)
[20:26:52] *** Quits: wyatt8740 (~wyatt8740@149.164.111.65) (Ping timeout: 256 seconds)
[20:27:36] *** Joins: fkaa (~fkaa@user/fkaa)
[20:32:05] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[20:44:15] *** Quits: MajorBiscuit (~MajorBisc@c-001-013-035.client.tudelft.eduvpn.nl) (Ping timeout: 250 seconds)
[21:02:45] <aphysically> is there a specific option type the x265-params thing uses (I'm trying to find a specific answer on the exact type of escaping it needs)
[21:02:46] *** Joins: blaze (~blaze@user/blaze)
[21:02:49] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[21:02:57] <aphysically> not counting shell escaping, just internally what it needs
[21:03:57] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[21:04:01] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 256 seconds)
[21:05:10] <aphysically> is "-f null -" for outputting to NULL not crossplatform? some of the wiki stuff suggests I need to use NUL or some such instead on Windows
[21:05:23] <aphysically> (I don't have a windows machine)
[21:07:18] <JEEB> it is cross-platform since it literally just internally throws stuff out of the window
[21:07:24] <JEEB> so no NUL or /dev/null
[21:07:25] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Ping timeout: 256 seconds)
[21:07:34] <JEEB> - is stdin or for output, stdout
[21:08:04] <JEEB> so if you f.ex. did `-f srt -` you'd see the SRT subtitles in your terminal
[21:08:23] <JEEB> so -f null is just a "muxer" that then proceeds to kick your data down a cliff
[21:08:28] <JEEB> which is why nothing shows up in the terminal
[21:08:52] <JEEB> but yes, if you were actually outputting to something like /dev/null, then on windows that file name's name would be NUL instead
[21:09:18] <JEEB> `-f matroska /dev/null` being `-f matroska NUL` on windows, for example
[21:24:32] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[21:31:03] *** Quits: hentai (~hentai@user/hentai) (Ping timeout: 250 seconds)
[21:36:23] <kepstin> "-f null" means "output nothing" and "-" means "to stdout", so the combination of those two works pretty well.
[21:36:52] *** Joins: crashrep (~crashrep@user/crashrep)
[21:37:36] *** Joins: Flabb (~Flabb@109.252.119.13)
[21:39:51] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[21:48:58] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[21:49:58] *** Joins: hentai (~hentai@2a01:e0a:a5c:a070:e4d1:8c1a:d2ed:8d50)
[21:49:58] *** Quits: hentai (~hentai@2a01:e0a:a5c:a070:e4d1:8c1a:d2ed:8d50) (Changing host)
[21:49:58] *** Joins: hentai (~hentai@user/hentai)
[21:49:58] *** Joins: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:35f4:c0a:127c:c6a0)
[21:53:23] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Ping timeout: 250 seconds)
[21:57:21] *** Quits: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:35f4:c0a:127c:c6a0) (Quit: dingdreher)
[22:08:51] <aphysically> makes sense, thanks
[22:09:04] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[22:11:27] *** Quits: a0z (~a0z@90.244.190.0) (Ping timeout: 256 seconds)
[22:12:00] *** Quits: rossome (~rossome@server.likeaross.com) (Quit: WeeChat 3.2)
[22:16:57] *** Joins: MrZeus_ (~MrZeus@185.248.85.53)
[22:23:00] *** Joins: MrZeus__ (~MrZeus@185.248.85.10)
[22:23:37] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[22:25:10] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[22:25:41] *** Quits: cosimone (~user@93-34-133-254.ip49.fastwebnet.it) (Remote host closed the connection)
[22:26:20] *** Quits: MrZeus_ (~MrZeus@185.248.85.53) (Ping timeout: 250 seconds)
[22:26:50] *** Quits: blaze (~blaze@user/blaze) (Quit: WeeChat 3.3)
[22:28:51] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[22:35:00] *** Quits: LuKaRo (~LuKaRo@p4fc3264a.dip0.t-ipconnect.de) (Quit: ZNC 1.8.2 - https://znc.in)
[22:43:48] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[22:48:33] *** Joins: LuKaRo (~LuKaRo@p200300dfa72f4b3100000000000001f9.dip0.t-ipconnect.de)
[22:50:08] *** Joins: bm (~bm@user/bm)
[22:53:51] <bm> Hello. I'm trying to add an overlay to a video and even using 'veryslow' preset, the resulting file is 50% larger than the original and has noticeably lower quality. What options are there?
[22:54:01] *** Joins: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:35f4:c0a:127c:c6a0)
[22:55:05] <kepstin> for context, what is the original file format and type of content?
[22:57:47] <bm> kepstin: 480p camera recording .mp4 file
[22:59:26] <kepstin> hmm, camera files usually tend to be excessively large to start with because camera hardware encoders are very simple.
[23:00:59] <bm> kepstin: it's not an original, the has been already downscaled using "Lavf"
[23:01:39] <bm> the only commandline options I supply to ffmpeg are "-filter_complex overlay" and "preset"
[23:01:50] <kepstin> right, if it's been re-encoded already then you should be able to get similar size by re-encoding with the same settings
[23:02:58] <bm> kepstin: right? But the file ballooned from 100 MB to 150 MB just by adding an overlay
[23:03:30] <kepstin> well, depending on the content of the overlay that could have made it "harder" to encode, so require more bits for the same quality
[23:04:53] <bm> kepstin: overlay is a small static image
[23:06:28] <galad> your source file is already compressed enough that each additional compression will either be bigger or lose a lot of quality
[23:07:32] <bm> galad: I am aware of that, yes. But it is both bigger (massively bigger) and has lower quality.
[23:07:41] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[23:08:11] *** Joins: porn (~hentai@user/hentai)
[23:08:11] *** hentai is now known as Guest8863
[23:08:51] <kepstin> note that when using ffmpeg you should always be specifying the encoder to use
[23:09:17] <kepstin> with mp4 output you're probably getting the libx264 encoder, which is pretty good, but it's possible depending on where you got ffmpeg from it might do something different.
[23:10:45] <bm> kepstin: I'm on Ubuntu and got it from apt. Yes, seems like it's using the libx264 encoder.
[23:12:00] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Read error: Connection reset by peer)
[23:12:13] *** Joins: hentai (~hentai@user/hentai)
[23:12:15] *** Quits: Guest8863 (~hentai@user/hentai) (Ping timeout: 250 seconds)
[23:13:53] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Quit: ERC (IRC client for Emacs 27.1))
[23:14:09] *** Quits: hentai (~hentai@user/hentai) (Remote host closed the connection)
[23:16:31] *** Joins: cosimone (~user@93-34-133-254.ip49.fastwebnet.it)
[23:16:52] *** Quits: porn (~hentai@user/hentai) (Ping timeout: 268 seconds)
[23:21:46] <bm> Did a dry run without any filters and the resulting file is still massively larger
[23:24:36] *** Quits: crashrep (~crashrep@user/crashrep) (Remote host closed the connection)
[23:25:04] *** Joins: crashrep (~crashrep@user/crashrep)
[23:32:51] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[23:33:50] *** Joins: beaver (~beaver@user/pong)
[23:36:16] *** Joins: voltron (~junaid@ip4d158509.dynamic.kabel-deutschland.de)
[23:38:58] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[23:39:54] *** Joins: beaver (~beaver@user/pong)
[23:40:29] *** Joins: KombuchaKip (~kip@192.252.230.5)
[23:53:52] *** Quits: System_Error (~SystemErr@user/systemerror) (Remote host closed the connection)
[23:55:45] *** Joins: System_Error (~SystemErr@user/systemerror)
[23:58:45] *** Parts: voltron (~junaid@ip4d158509.dynamic.kabel-deutschland.de) ()
[23:58:55] *** Joins: Fohsap_ (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b)
