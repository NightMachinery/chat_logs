[01:44:09] <NilsDmitriAlainA> J‚Äôai ajout√© une id√©e de roos sur le framadate. Si vous voulez en ajouter d‚Äôautres, n‚Äôh√©sitez pas √† m‚Äô√©crire
[01:59:58] <afontain[m]> Perso je mettrais l'affiche au dessus de quelque chose d'autee
[02:00:02] <afontain[m]> *autre
[02:11:30] <afontain[m]> J'aime beaucoup l'id√©e du mur-parcour-galactique-des-distros
[02:12:46] <afontain[m]> En fait je me disais qu'en faisant un A0 √† la repro, on peut tout simplement dessiner dessus au marqueur
[02:13:57] <afontain[m]> √ßa marche mieux avec un fond clair que fonc√©, m'enfin
[02:14:11] <afontain[m]> (ou il faut de tr√®s bons marqueurs)
[02:18:03] <afontain[m]> D'ailleurs, j'y pense, il faut qu'on fasse un blog. Nils y mettrait son nouveau design de porte ou un article pour expliquer son d√©but de parcours, j'y mettrais des histoires de sysadmins, etc
[02:22:54] <artectrex[m]> owii
[02:23:29] <artectrex[m]> Moi je peux y mettre des histoires de meetings de l'agep
[02:23:43] <artectrex[m]> yay
[02:24:29] <artectrex[m]> Est-ce qu'on commencerait par enlever les disquettes de la porte donc?
[02:25:30] <artectrex[m]> Je verrai bien un truc qui remplit toute la porte, genre pas juste un poster qu'on colle dessus ü§î
[02:26:08] <afontain[m]> artectrex[m]: C'est une blague ou pas ? :O
[02:26:36] <artectrex[m]> afontain[m]: it's a cry for help
[02:27:02] <Orbstheorem> artectrex[m]: Moi je peux mette des histoires sur la codal qui a vendu des trucs ilegal :D
[02:27:03] <artectrex[m]> (en soit je dois pas trop me plaindre la plupart de ces machins j'arrive √† les refiler vers un de vous pauvres)
[02:27:17] <afontain[m]> *pat* *pat*
[02:28:38] <Orbstheorem> Ils vous demandent de faire quoi en soit ?
[02:30:06] <afontain[m]> Le but du blog n'est pas forc√©ment de faire un incident diplomatique en 3 articles hein :D
[02:30:08] <artectrex[m]> Orbstheorem: cdd cda, cdr, tout √ßa
[02:30:10] <LucasCrijns[m]> Is it possible that something is wrong with rainbowdash? It seems I can no longer access /nas/homes/gaspar and the storage symlink is dead. Did I miss an announcement on this part?
[02:30:20] <afontain[m]> on attend le cinqui√®me :P
[02:30:20] <Orbstheorem> afontain[m]: ROFL
[02:30:59] <afontain[m]> Lucas Crijns: lemme check, it's likely that I've repaired muttler afterwards, but didn't remount the disks
[02:31:08] <LucasCrijns[m]> Ah I see
[02:31:18] <LucasCrijns[m]> I noticed borgmatic started giving errors in the journal
[02:32:55] <afontain[m]> hmmmm `rainbowdash mount[25564]: mount.nfs: access denied by server while mounting 192.168.123.2:/srv/home`
[02:38:23] <afontain[m]> Lucas Crijns: oooh, it's a fun one. See how the server was unreachable previously?
[02:38:36] <afontain[m]> well, that server hosts the ldap
[02:39:02] <afontain[m]> and actually, the wireguard link between the two machines was broken for a bit longer
[02:39:20] <afontain[m]> s/ldap/DNS/
[02:39:47] <afontain[m]> so when I rebooted muttler, the machine that exports the NFS, the DNS server was unavailable
[02:41:02] <afontain[m]> (excerpt of) /etc/exports... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/4386dfb921429481988828fb795284a56159ca8f)
[02:41:28] <afontain[m]> so the public part was "working", except mounted read-only instead of read-write
[02:41:35] <afontain[m]> while the other (home dirs) wasn't
[02:41:57] <afontain[m]> that's likely because when the NFS server started, the name resolution failed
[02:42:02] <LucasCrijns[m]> Ah I see
[02:42:19] <LucasCrijns[m]> Why is it actually bridged via wireguard?
[02:42:49] <afontain[m]> because one machine is in the datacenter, the other is in the clubroom
[02:42:54] <LucasCrijns[m]> Ah I see
[02:43:13] <LucasCrijns[m]> Nice to see that the connection between the two is encrypted
[02:43:53] <LucasCrijns[m]> I suppose given the age of NFS, that it does not encrypt out of the box?
[02:43:59] <afontain[m]> Wireguard has this really nice property of allowing auth by IP
[02:44:05] <afontain[m]> that's really practical
[02:44:27] <LucasCrijns[m]> That's indeed very practical
[02:44:44] <afontain[m]> LucasCrijns[m]: I must say I have no idea
[02:45:33] <afontain[m]> By the way, any of you know a way to do append-only database backups ?
[02:45:49] <afontain[m]> We have append-only file backups, but that's another thing
[02:47:05] <LucasCrijns[m]> I think Borg does this by default
[02:47:28] <LucasCrijns[m]> But not database
[02:47:56] <LucasCrijns[m]> Borg does use compression on the block level of files, so it might work with databases, especially if you use a compression scheme like zstd
[02:48:38] <afontain[m]> you mean especially if I don't use a compression scheme?
[02:49:27] <LucasCrijns[m]> I meant more like it might help, since zstd does better matching
[02:49:46] <LucasCrijns[m]> But Borg does deduplication of blocks by default, even without compression
[02:51:32] <afontain[m]> LucasCrijns[m]: that's a fair point
[02:55:21] <afontain[m]> maybe adding `ExecStartPre=/bin/sh -c "pg_dumpall > database"` to `borgbackup.service` would be the best way to go about this ü§î
[02:55:36] *** Joins: M113[m] (~M113gnuge@2001:470:69fc:105::1:e1bd)
[02:56:05] <afontain[m]> like, it's simpler
[02:56:14] <afontain[m]> one backup system
[02:57:11] <afontain[m]> and ensuring one backup system works is hard enough apparently üòÖ
[02:57:25] <LucasCrijns[m]> Borg apparently has an append only mode, barring you from deleting older archives. But I don't think that is what you meant
[02:57:38] <afontain[m]> that's what I meant
[02:57:47] <LucasCrijns[m]> Deduplication it does by default, of that's what you meant
[02:57:49] <afontain[m]> ransomware protection 100
[02:58:08] <artectrex[m]> LucasCrijns[m]: I use that
[02:58:35] <LucasCrijns[m]> https://borgbackup.readthedocs.io/en/stable/usage/notes.html#append-only-mode-forbid-compaction
[03:00:06] <artectrex[m]> Il reste quoi comme place sur le NAS?
[03:01:35] <afontain[m]> 192.168.123.2:/srv/home    4.0T  2.6T  1.3T  67% /nas/home
[03:01:35] <afontain[m]> 192.168.123.2:/srv/public  4.0T  3.0T  867G  78% /nas/public
[03:03:53] * afontain[m] sent a code block: https://libera.ems.host/_matrix/media/r0/download/libera.chat/673c9d37df141d7bf08910a999370714dcd4e74e
[03:03:55] <afontain[m]> ^ la liste complette
[03:03:58] <afontain[m]>  * ^ la liste compl√®te
[03:04:53] <afontain[m]> hmm, one entry is slightly incorrect in the DNS records
[03:08:29] *** Joins: M114[m] (~M114gnuge@2001:470:69fc:105::1:e1c0)
[03:09:03] <afontain[m]> ah no, it's that thing
[03:09:08] <afontain[m]> I remember now
[03:09:19] <afontain[m]> so libvirt has the great idea of integrating a DNS server
[03:09:40] <Orbstheorem> üçø
[03:10:04] <afontain[m]> I think that's dnsmasq
[03:10:40] <afontain[m]> thing is, we already have a DNS server. And it contains more things and it is used by the outside world and we need it
[03:10:55] <afontain[m]> so suddenly we have two DNS servers
[03:11:16] <Orbstheorem> Are you using systemd-resolvd by any chance?
[03:11:31] <afontain[m]> well, yes, and it's often making things worse
[03:11:35] <Orbstheorem> Then you have three.
[03:12:01] <Orbstheorem> I personally have my containers resolve through systemd-networkd on the host, which resolves itself from bind.
[03:12:28] <afontain[m]> and systemd-resolvd works differently from a machine to another, from a container to another and from a time of day to another
[03:12:30] <Orbstheorem> xD
[03:12:40] <afontain[m]> systemd-resolvd is a thing on its own D:
[03:12:54] <Orbstheorem> I don't think I've had any issues with systemd-resolvd.
[03:13:03] <Orbstheorem> s/resolvd/resolved/
[03:13:31] <afontain[m]> so back to libvirt
[03:13:53] <afontain[m]> I kinda need dnsmasq running, because that's our DHCP server
[03:14:39] <afontain[m]> and basically without that, nothing works anymore because ip addresses are all wrong and the DNS points to the wrong ip addresses and that kinda of stuff
[03:15:38] <afontain[m]> s/kinda/kind/
[03:16:42] <Orbstheorem> Why not bridge the wireguard iface and use a single network segment.
[03:16:50] <Orbstheorem> s/./?/
[03:17:04] <afontain[m]> maybe it would be possible to set static ips everywhere, but that would mean sprawling the configuration everywhere. We already have 3 config files for IP addr, so let's not add more places where they are handled
[03:17:11] <afontain[m]> Roos: what do you mean?
[03:17:18] <Orbstheorem> Scratch that: It'd be dumb if the VMs didn't work if the clubroom was unreacheable.
[03:17:43] <Orbstheorem> afontain[m]: Nah, that doesn't sound like a good idea.
[03:17:48] <afontain[m]> yeah
[03:18:01] <Orbstheorem> But, what's the issue with dnsmasq?
[03:18:13] <afontain[m]> so the thing is that the DHCP server is really proud and advertises the DNS server it made to everyone
[03:18:28] <afontain[m]> and this will actually override /etc/resolv.conf
[03:18:40] <afontain[m]> sometime
[03:18:53] <Orbstheorem> You can simply configure dnsmasq not to send nameserver information.
[03:19:17] <Orbstheorem> (I'm assuming dnsmasq acts as dhcp server.)
[03:19:28] <Orbstheorem> That said, why not let dnsmasq resolve for the VMs ?
[03:19:30] <Orbstheorem> s///
[03:19:44] <afontain[m]> because then you get fun stuff like:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/a91da66f96cf9802003699df87a42643e6d75c54)
[03:19:45] <Orbstheorem> dnsmasq should use the dns configuration of the host to recurse.
[03:20:27] <Orbstheorem> > <@afontain:gnugen.ch> because then you get fun stuff like:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/9fd726d654e6e1ff1aadc77e90df63541ae5025b)
[03:20:35] <Orbstheorem> They're not the same host?
[03:20:46] <afontain[m]> that's the same host
[03:21:02] <Orbstheorem> Yes, but who manages *.lan.gnugen.ch?
[03:21:17] <afontain[m]> ok, ok, but let me show this:
[03:21:21] * afontain[m] sent a code block: https://libera.ems.host/_matrix/media/r0/download/libera.chat/cc9e0abaefca478308415f382d90efe3d1467f7c
[03:21:27] <afontain[m]> the result depends on the machine
[03:21:55] <Orbstheorem> I understand that, but who is authoritative on *.lan.gnugen.ch?
[03:24:42] <Orbstheorem> Orbstheorem: If it's dnsmasq, then your 'host network' needs a way to connect to libvirt's dnsmasq to resolve these domains.
[03:24:53] <afontain[m]> Orbstheorem: should be rapperswil
[03:25:03] <afontain[m]> I mean, rapperswil should always be authoritative
[03:25:28] <Orbstheorem> So, what's the issue? dnsmasq does not recurse into rapperswill?
[03:25:45] <afontain[m]> I'd say that
[03:25:55] <afontain[m]> ideally the DHCP server would advertize the other DNS
[03:26:34] <Orbstheorem> Not necessarily:
[03:26:47] <afontain[m]> but both would be fine really
[03:27:03] <afontain[m]> those days I have this in the libvirt config:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/6fe7dc7f14d6b3c38287f7631c3edcbb3436f00b)
[03:27:08] <afontain[m]>  * those days I have this in the libvirt config:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/a69f5881e48542cffc46bfb520cecc231016f6d9)
[03:27:45] <Orbstheorem> Imagine vm1 and vm2 are connected to lan1: If lan1's DHCP server advertised the parent, then vm1 could not resolve vm2.
[03:28:38] <Orbstheorem> > <@afontain:gnugen.ch> those days I have this in the libvirt config:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/75b3f2fb3616b347edee4de61a96dacc21008cc8)
[03:28:40] <afontain[m]> I'd want lan1's DHCP server to advertise VM2
[03:28:58] <afontain[m]> or VM1
[03:29:05] <afontain[m]> (same difference)
[03:29:23] <afontain[m]> I have really funky stuff sometimes:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/962c040f178d06808dd903b8dd86e5c094ee441a)
[03:32:30] <afontain[m]> hmm, maybe I should set... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/6cd7410a5ec5ddbc260f0a83b4dfc66d167f898b)
[03:32:39] <afontain[m]> s/lan.//
[03:32:46] <afontain[m]> ^ so without the lan
[03:33:12] <afontain[m]> Orbstheorem: documentation: https://libvirt.org/formatnetwork.html
[03:33:34] <afontain[m]> (I'm putting it here because I've found it really hard to locate)
[03:33:49] <afontain[m]> rebooting stuff the hard way, hang on
[11:27:09] * Orbstheorem likes xml as data store, but not for policies or settings...
[15:40:35] <afontain[m]> So, back up again. That one was bad
[16:09:39] <afontain[m]> On va √† Vivapoly du coup ?
[16:51:16] <Orbstheorem> C'est quand ?
[17:27:40] <artectrex[m]> <Orbstheorem> "C'est quand ?" <- juin?
[17:33:03] * Orbstheorem a cru que c'√©tait aujourd'hui.
[17:34:34] <typedef[m]> Quelqu'un a envie d'afficher des affiches aujourd'hui ou demain?
[17:41:57] *** Joins: M115[m] (~M115gnuge@2001:470:69fc:105::1:e242)
[17:46:00] <artectrex[m]> Moi je peux cet aprem
[17:46:15] <artectrex[m]> √† 16h30 peut etre?
[17:54:23] <typedef[m]> Je sais pas si je peux, mais je vais voir
[17:55:48] <artectrex[m]> Il faut juste que quelqu'un d'autre aille chercher les affiches √† la repro avant que √ßa ferme ^^'
[17:55:53] *** Joins: M116[m] (~M116gnuge@2001:470:69fc:105::1:e246)
[17:55:58] <artectrex[m]> leurs horaires m'arrangent pas trop
[17:57:38] <artectrex[m]> members est mort? je voudrais faire une comparaison entre ce qu'il y a sur truffe et la liste des membres
[17:57:51] * artectrex[m] uploaded an image: (11KiB) < https://libera.ems.host/_matrix/media/r0/download/gnugen.ch/NYSnCrnmrlfybhOvLohuovyN/image.png >
[18:16:02] <afontain[m]> att, je restore
[18:30:50] <afontain[m]> <artectrex[m]> "members est mort? je voudrais..." <- fait
[19:36:24] *** Joins: M117[m] (~M117gnuge@2001:470:69fc:105::1:e254)
[19:40:10] *** Joins: M118[m] (~M118gnuge@2001:470:69fc:105::1:e255)
[20:47:08] <Orbstheorem> Oh my... My friend and I just tried to create a Facebook account and right after creating an account using an email address it says the account was blocked and demand you enter a phone number...
[20:47:29] <Orbstheorem> Beurk...
[20:48:02] <Orbstheorem> We're looking for an AI-related event in Lausanne tomorrow.
[20:48:42] <Orbstheorem> Somebody told me about it last week but I forgot where it was, I just remember the event was organised on Facebook...
[20:52:43] <jonas[m]> pretty much the same for Google
[20:52:43] <jonas[m]> I'm trying for some weeks to get access to my old google account I've not used for a while without giving them a phone number, no luck so far...
