[00:06:29] *** Joins: goldfish (~goldfish@user/goldfish)
[00:09:07] *** Joins: hendry (~hendry@210.23.22.2)
[00:12:22] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[00:18:37] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 240 seconds)
[00:21:53] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:22:55] *** Joins: Ryu945 (Ryu945@gateway/vpn/protonvpn/ryu945)
[00:24:20] <njka> ada_: thanks for clarifying :)
[00:24:45] <njka> ada_: i want to know the rules so i can straddle them properly :)
[00:32:14] <Tach> doea anyone here care about local subnets that docker choses ?
[00:32:26] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[00:34:32] <rawtaz> straddle..
[00:34:45] <rawtaz> TIL new word
[00:34:59] <rawtaz> Tach: you mean *which* it choses? not i, i dont care the least
[00:35:10] <rawtaz> i would if i had a specific use case for caring, but i havent had one
[00:38:11] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Read error: Connection reset by peer)
[00:38:43] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[00:39:05] <gebbione> rawtaz, ada_ when working on LEMP apps usually nginx serves assets and php-fpm processes the php files. On a local env a local volume solves the problem. When tagging images and doing COPY . /var/www/html then both fpm and nginx could use a volume even in production. This would avoid the bundling of images all the time and instead if would just require php and nginx containers to change only if these application 
[00:39:05] <gebbione> configurations changes instead of the html,js. php files
[00:41:14] <rawtaz> gebbione: thats wht you use bind mounts for - having all your assets and data outside of the images
[00:41:43] <gebbione> and that is ok on dev
[00:41:45] <gebbione> but on prod
[00:41:56] <gebbione> can these mounts point to a versioned volume?
[00:42:04] <gebbione> ie tagged
[00:42:16] <ikke> A volume is not immutable
[00:42:31] <rawtaz> gebbione: why wouldnt it be ok in prod too?
[00:42:56] <rawtaz> it totally depends on what type of prod you want or have though
[00:43:24] * ikke still remembers when volumes were containers
[00:43:42] <gebbione> ikke, were they?
[00:44:07] <ikke> You'd use --volumes-from to mount volumes from another container
[00:45:07] <gebbione> so in theory if the code changes i need to handle the syncing of the code to the remote volume?
[00:45:43] <gebbione> basically i am thinking at how images size can be reduced
[00:46:04] <gebbione> as baking php and nginx images with all the files yields duplication
[00:47:42] <rawtaz> gebbione: if the code changes, that is a reason to build a new image presumably
[00:47:51] *** Quits: mva (znc@gentoo/developer/mva) (Quit: ZNC - https://znc.in)
[00:47:54] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[00:48:00] <rawtaz> if youre talking about production 
[00:48:05] <gebbione> i am
[00:48:10] *** Joins: mva (~mva@gentoo/developer/mva)
[00:48:16] <gebbione> but that again produces a lot of duplications
[00:48:32] <gebbione> ie the same files on both the nginx and the php images
[00:48:33] <rawtaz> in waht way? images are reused arent they?
[00:48:44] *** Joins: gooble_gobble (~gooble_go@ool-457a99e2.dyn.optonline.net)
[00:48:44] <rawtaz> well
[00:48:57] <rawtaz> it really boils down to what you are actually producing :)
[00:49:06] <ikke> rawtaz: when you have a webapplication with php, you'd use an fpm image to serve the application, but nginx needs to be able to access the static files
[00:49:17] *** Quits: Santzes (~Santzes@2400:8901::f03c:92ff:fe49:47a6) (Ping timeout: 252 seconds)
[00:49:22] <rawtaz> yeah
[00:49:35] <gebbione> ikke, also in some cases php handles the routing to some files
[00:49:41] <gebbione> ie assets
[00:49:47] <gebbione> or does some processing on the fly with them
[00:49:53] <gebbione> so it also might need them
[00:50:28] <gebbione> optimising this bit is a bit tricky
[00:51:29] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 252 seconds)
[00:51:58] *** Joins: Trieste (T@user/pilgrim)
[00:53:17] <ikke> One solution is to use a volume and use rsync on container start to populate the volume
[00:53:27] <rawtaz> it really boils down to your needs and requirements in terms of how you publish this stuff
[00:53:39] <ikke> (and make sure it's kept up-to-date)
[00:54:13] <gebbione> indeed but i think most people do just go on with some duplication instead of using volumes for application files
[00:57:33] <LordKalma> I share a volume mount between my frontend running npm build and my nginx instance serving it
[00:57:35] <LordKalma> practical
[00:58:01] <ikke> LordKalma: how do you make sure the files are up-to-date?
[00:58:12] <LordKalma> it's the *same* mount :p
[00:58:17] <LordKalma> https://github.com/ruilvo/radioamadorismo-website/blob/master/docker-compose.yaml
[00:58:34] <ikke> Oh, you build directly into the volume
[00:58:42] <LordKalma> lines 9 and 24 in that example
[00:58:49] <LordKalma> yap
[00:59:31] *** Quits: donofrio (~donofrio@c-68-40-123-74.hsd1.mi.comcast.net) (Quit: Leaving)
[01:00:38] <LordKalma> feel free to explore the dockerfiles as well
[01:01:19] *** Joins: chris-p (~chris-p@cassini.christopherpritchard.co.uk)
[01:01:25] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 240 seconds)
[01:03:27] <chris-p> hello, I asked about this a couple of days ago and I'm still no closer to finding a solution. When I start some docker containers, I get the following error: dockerd[pid]: time="<removed>" level=error msg="collecting stats for <container name>: proto: wrong wireType = 0 for field Hugetlb"
[01:03:55] <chris-p> I was wondering if there's a way to see the protobuf messages that are sent as it might shed some light on the issue?
[01:06:00] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[01:10:00] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[01:16:03] <njka> chris-p: what os is your host and how have you installed the docker bits on it?
[01:16:54] <njka> ( final jeopardy music )
[01:17:10] <rawtaz> njka: can you solve that problem? if so im impressed
[01:18:58] <njka> rawtaz: well, i've not ever had this problem... but it sounds kinda interesting... so i am asking some basic kindergarten-leve questions :)
[01:19:09] <njka> s/leve/level :)
[01:19:26] <rawtaz> yeah its peculiar
[01:19:36] <rawtaz> so if you solve it youll be a hero :)
[01:19:43] <njka> hahaha
[01:19:54] <njka> i don't claim that i'll beable to figure this one out...
[01:20:08] <rawtaz> no but you can try
[01:20:09] <njka> i'd have to start by trying to reproduce it :)
[01:20:14] <rawtaz> and succeed
[01:20:33] <njka> if i can figure a way to break my docker env and reproduce this... 
[01:21:10] *** Joins: Brainium (~brainium@user/brainium)
[01:21:16] <rawtaz> you can also just ask them for the relevant debugging info, thats what the rest of us do in like 99% of the support cases :D
[01:22:15] <njka> it's funny when ppl ask questions and then vanish tho
[01:22:23] <njka> that is kinda annoying...
[01:22:35] <njka> and then over time i lose my curiousity
[01:23:47] <njka> hmmm
[01:24:09] <njka> rawtaz: and i am debating running to trader joes here to pickup some groceries too :)
[01:29:52] *** Quits: Ryu945 (Ryu945@gateway/vpn/protonvpn/ryu945) (Quit: Leaving)
[01:34:24] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[01:41:54] *** Quits: brandonkal (~brandonka@user/brandonkal) (Quit: IRC client)
[01:45:14] <chris-p> njka: sorry, it's gentoo I'm really sorry, my cat spilled tea all over me
[01:46:54] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:b593:bab6:272d:615b)
[01:48:16] <tabakhase> LordKalma thats broken
[01:48:23] <tabakhase> or rather, will break at some point
[01:48:30] <LordKalma> Care to develop? 
[01:49:09] <tabakhase> the "idea" is technically correct - but in practice this will explode horifically --- cause now you have no way to ever update whats in that volume ((where that is precisely what you want todo when flipping in a new image)
[01:50:16] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[01:50:21] *** Joins: Atque (~Atque@user/atque)
[01:50:46] <tabakhase> you can either a) have that copy be part of the docker-build ("COPY --from=otherimage:v123 /bla /blub") -- or have your entrypoint take care of updating the volume ((so your build may put the files in /usr/src/frontend , and the entrypoint rsync --delete from /usr/src/frontend to /frontend (what then is a volume again)
[01:52:19] <tabakhase> for option 1, note that "order of builds" becomes important then and not all tooling makes this accessible  ((i think compose kinda tries to guess, but not granted, youll often end up with 2-liner shellscripts or such...)
[01:54:38] <tabakhase> ((granted i only very quickly skimmed over that repo, so if you do any of that already all fine))
[01:55:50] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:b593:bab6:272d:615b) (Quit: smeeagle)
[01:59:01] *** Quits: codebam (~codebam@user/codebam) (Ping timeout: 240 seconds)
[02:03:29] *** Quits: gr1m (~gr1m@45.83.220.194) (Ping timeout: 256 seconds)
[02:04:08] *** Joins: gr1m (~gr1m@193.138.218.215)
[02:10:34] *** Joins: jlamoree (~jlamoree@cpe-172-117-188-2.socal.res.rr.com)
[02:30:02] *** Quits: Sven_vB (~sven@user/sven-vb/x-2094958) (Remote host closed the connection)
[02:30:09] <njka> chris-p: all good, i ran off to trader joe's after ~30 mins of no reply :)
[02:30:31] *** Joins: Sven_vB (~sven@user/sven-vb/x-2094958)
[02:30:45] <njka> chris-p: ok, you've answered half of my question... how about shedding some light on the 2nd half pls :)
[02:31:54] <chris-p> oh yeah sorry, installed through portage
[02:32:44] <chris-p> I've also just ensured all are up to date with upstream (albeit built wwith go 1.17
[02:33:18] <chris-p> output of docker --info https://dpaste.com/4PMW9BWKQ
[02:34:27] <chris-p> and I've just rebuilt containerd to 1.5.8 and runc 1.0.3 (as runc has this PR in the 1.0.3 changelog: https://github.com/opencontainers/runc/pull/3295)
[02:34:33] <tabakhase> "Storage Driver: btrfs" oh oh oh...
[02:34:54] <chris-p> still shouldn't cause the errors I'm seeing? 
[02:35:10] <tabakhase> but it kinda forbids any further debugging....
[02:35:22] <chris-p> does it though?
[02:36:28] <chris-p> I appreciate that it wouldn't be supported officially, but debugging a specific error shouldn't be prevented
[02:37:34] <tabakhase> pretty much... the "best fix" to suggest is move /var/lib/docker to something else, ring again when you still see that issue"
[02:37:52] *** Quits: cliluw (~cliluw@47.147.80.149) (Quit: Leaving)
[02:39:32] <tabakhase> and throwing "Hugetlb btrfs" into google kinda agrees on that...
[02:40:36] <njka> chris-p: ok
[02:41:39] <njka> chris-p: so like, i've not used gentoo... but i have seen/read that sometimes installing docker from distribution-specific repo's can be problematic
[02:42:15] <njka> since some distributions pile on their own silly dependencies to the docker packages they provide
[02:42:19] <njka> so like
[02:42:57] <njka> chris-p: if i was you... i would make sure i installed docker bits from docker and not from my specific distributions pkg repos :)
[02:43:03] <tabakhase> thats mostly down to versions (debian beeing a popular example thats way way way behind) - if those packages are up2date on one of the moving distros thats generally fine
[02:43:05] <njka> i would start there :)
[02:43:31] <njka> sure, but i'd prefer to be 100% on my docker bits :)
[02:44:41] <chris-p> fair one, I'm going to see if I can fix with a reboot (just updated kernel, runc, containerd etc)
[02:44:59] <chris-p> and if not, I'll try creating an ext4 FS and mounting it on the container store
[02:46:38] <njka> eh
[02:46:48] <njka> i'll be surprised if that makes any difference
[02:46:52] <chris-p> tabakhase was talking about btrfs
[02:47:00] <chris-p> me too, but I think the reboot might after the update
[02:47:12] <njka> ahh yes... everything looks good on her... butter face :)
[02:47:16] * njka giggles :)
[02:47:20] <chris-p> so BRB!
[02:47:24] <njka> ( say it slowly )
[02:47:26] *** Quits: chris-p (~chris-p@cassini.christopherpritchard.co.uk) (Remote host closed the connection)
[02:47:31] <njka> butter face :)
[02:48:56] <njka> hmm, i didn't see mention of btrfs in the initial error
[02:49:07] <njka> OH
[02:49:14] <njka> i just noticed your pastebin
[02:49:19] <njka> well, dpaste
[02:49:50] <njka> ( that came ~90 mins after you initial post )
[02:49:53] <njka> :)
[02:50:51] *** Joins: chris-p (~chris-p@cassini.christopherpritchard.co.uk)
[02:51:19] <chris-p> and, looks like an update of runc to 1.0.3 and rebuilding everything's worked :D
[02:52:13] <chris-p> so happy days, I might reply to the bug report on docker-cli
[02:54:19] <njka> oh shit
[02:54:20] <njka> nice
[02:54:33] <njka> chris-p: s/might/should
[02:54:47] <njka> chris-p: share w/the ppl bruh :)
[02:55:02] <njka> the universe will thank you some how, trust me :)
[02:57:06] <chris-p> oh might means will
[02:57:17] <chris-p> (in fact just have :))
[02:57:53] <chris-p> Thanks for the suggestions everyone, appreciate it!
[02:59:03] <njka> chris-p: make sure you reply to that bug report bro :)
[03:06:03] *** Joins: DoofusCanadensis (~DoofusCan@207.229.38.10)
[03:10:55] *** Quits: Nightah (~Nightah@user/nightah) (Quit: ZNC - https://znc.in)
[03:12:58] <chris-p> oh I have!
[03:13:20] <chris-p> https://github.com/docker/for-linux/issues/1273
[03:14:26] *** Joins: Nightah (~Nightah@user/nightah)
[03:17:59] *** Joins: codebam (~codebam@user/codebam)
[03:22:04] *** Quits: Brainium (~brainium@user/brainium) (Ping timeout: 265 seconds)
[03:25:49] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:25:53] *** Quits: gebbione (~gebbione@cpc152037-finc21-2-0-cust213.4-2.cable.virginm.net) (Quit: Leaving)
[03:26:35] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[03:32:27] <slaughter> Is there some way to make `docker-compose up --build` show me more log lines while it's running? 
[03:38:59] *** Joins: keypusher (keypusher@user/keypusher)
[03:48:06] *** Quits: DoofusCanadensis (~DoofusCan@207.229.38.10) (Quit: So as you can see from this flowchSQUIRREL!!)
[03:49:10] <njka> chris-p: nice one bro! :)
[04:12:06] *** Joins: merit (~merit@2001:470:69fc:105::5ae)
[04:16:53] <merit> rill weird behavior I found
[04:17:23] <merit> if you have a symlink in your `Dockerfile` (so, in the container layers) like `ln -s /run/shm /dev/shm`, it will override any mounts done at run-time 
[04:17:49] *** Quits: tex (~super@user/dix) (Ping timeout: 240 seconds)
[04:18:17] *** Quits: Tach (~Tach@user/tach) (Ping timeout: 252 seconds)
[04:18:25] <merit> for some reason, package docker-ce was doing that symlink to us, and it was overriding a memory-backed temp volume that was being added there at runtime
[04:22:37] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[04:24:19] *** Joins: sudomann (~sudomann@98.219.211.182)
[04:25:31] *** Joins: slice (~slice@user/slice)
[04:26:23] *** Joins: minimal (~minimal@user/minimal)
[04:28:03] <njka> sup meerit :)
[04:28:58] *** Joins: mickey85 (~user@user/mickey)
[04:29:06] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[04:29:07] *** mickey85 is now known as mickey8
[04:29:11] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 256 seconds)
[04:30:05] *** Joins: sudomann (~sudomann@98.219.211.182)
[04:31:01] *** Quits: Ivii (~Ivyy@2001:a62:4c3:8e01:d1fb:d15b:4215:e584) (Remote host closed the connection)
[04:31:58] *** Joins: nvmd (~nvmd@user/nvmd)
[04:34:34] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[04:35:52] *** Joins: sudomann (~sudomann@98.219.211.182)
[04:37:00] <gajus> In the context of:
[04:37:04] <gajus> RUN --mount=type=cache,target=/opt/.yarn
[04:37:15] <gajus> Is there a way to refer to the current $HOME directory?
[04:38:10] <gajus> is it just:
[04:38:13] <gajus> RUN --mount=type=cache,target=/$HOME/.yarn
[04:38:14] <gajus> ?
[04:40:13] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[04:41:37] *** Joins: sudomann (~sudomann@98.219.211.182)
[04:54:52] *** Quits: rardiol (~quassel@user/rardiol) (Ping timeout: 265 seconds)
[04:59:13] *** Quits: nvmd (~nvmd@user/nvmd) (Ping timeout: 265 seconds)
[04:59:55] *** Joins: nvmd (~nvmd@user/nvmd)
[05:07:26] *** Quits: Bardon (~Bardon@user/Bardon) (Ping timeout: 245 seconds)
[05:08:55] *** Joins: Bardon (~Bardon@user/Bardon)
[05:13:39] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[05:18:51] *** Joins: DoofusCanadensis (~DoofusCan@S01061056117e7f56.cg.shawcable.net)
[05:21:51] *** Joins: tang^ (~DoofusCan@2604:3d09:47c:f970:a082:c6c7:cd4c:1920)
[05:24:52] *** Quits: DoofusCanadensis (~DoofusCan@S01061056117e7f56.cg.shawcable.net) (Ping timeout: 268 seconds)
[05:25:34] <merit> haody
[05:25:45] *** Quits: nvmd (~nvmd@user/nvmd) (Ping timeout: 252 seconds)
[05:25:51] <merit> had a super fun thing where we had docker pods' not having their "shm" volumes show up
[05:25:56] <gajus> I misunderstood how cache mount works turns out
[05:26:06] <merit> unless we added `unlink /run/shm` in the actual layers, lol
[05:33:24] *** Joins: nvmd (~nvmd@user/nvmd)
[05:35:17] *** Quits: Bossi (~quassel@p4fc22aa4.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[05:37:24] *** Quits: gooble_gobble (~gooble_go@ool-457a99e2.dyn.optonline.net) (Ping timeout: 265 seconds)
[05:38:34] *** Quits: nvmd (~nvmd@user/nvmd) (Quit: Later, nerds.)
[05:42:16] *** Joins: Bossi (~quassel@p4fc22a7d.dip0.t-ipconnect.de)
[05:51:03] *** Joins: forgotmynick (uid24625@id-24625.hampstead.irccloud.com)
[05:56:01] *** Joins: daMaestro (~damaestro@fedora/daMaestro)
[06:15:16] <wez> :D
[06:18:51] <gajus> I have to docker images that I expect to be the same, but they have different hashes
[06:18:56] <gajus> how do I check what's different between them?
[06:21:17] *** Quits: Animal99 (~me@92.223.103.137) (Read error: Connection reset by peer)
[06:27:43] *** Quits: tsal (~tsal@user/tsal) (Ping timeout: 252 seconds)
[06:32:43] *** Joins: tsal (~tsal@user/tsal)
[06:35:51] *** Joins: vidbina (~vid@ppp-124-122-192-171.revip2.asianet.co.th)
[06:37:03] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[06:39:33] *** Joins: emerent_ (~quassel@p200300cd571d489bba27ebfffed28a59.dip0.t-ipconnect.de)
[06:39:33] *** emerent is now known as Guest2577
[06:39:33] *** Quits: Guest2577 (~quassel@p200300cd5715b0a8ba27ebfffed28a59.dip0.t-ipconnect.de) (Killed (zinc.libera.chat (Nickname regained by services)))
[06:39:33] *** emerent_ is now known as emerent
[06:50:18] *** Quits: lilgopher (~textual@2601:241:8000:38f0:3882:e31d:70c9:88b3) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:56:13] *** Quits: codebam (~codebam@user/codebam) (Ping timeout: 240 seconds)
[07:14:52] *** Joins: jazzy (~jaziz@user/jaziz)
[07:15:31] *** Quits: vidbina (~vid@ppp-124-122-192-171.revip2.asianet.co.th) (Ping timeout: 265 seconds)
[07:23:35] *** Quits: slice (~slice@user/slice) (Quit: zzz)
[07:25:43] *** Joins: XV8 (~XV8@2601:5cb:c001:50:2429:6786:e85:8187)
[07:28:40] *** Joins: codebam (~codebam@user/codebam)
[07:34:22] *** Quits: codebam (~codebam@user/codebam) (Ping timeout: 265 seconds)
[07:42:35] *** Quits: jarthur_ (~jarthur@2603-8080-1540-002d-58b0-3c44-7c29-0f48.res6.spectrum.com) (Ping timeout: 265 seconds)
[07:46:55] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 252 seconds)
[07:47:48] *** Joins: sudomann (~sudomann@98.219.211.182)
[07:49:57] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[07:50:43] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[07:51:57] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[07:53:24] *** Quits: XV8 (~XV8@2601:5cb:c001:50:2429:6786:e85:8187) (Quit: Textual IRC Client: www.textualapp.com)
[07:58:35] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-4173-3ede-b634-13c0.res6.spectrum.com)
[08:04:00] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[08:05:04] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[08:05:42] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Quit: 404)
[08:20:47] *** Quits: forgotmynick (uid24625@id-24625.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[08:24:03] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Quit: And I'm out.)
[08:31:51] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[08:40:03] <tianon> gajus: you could try something like https://github.com/GoogleContainerTools/container-diff
[08:40:37] <tianon> (just comparing the output of "docker history" on each one can get you pretty far if they're both constructed from Dockerfiles though)
[08:44:15] <tabakhase> history should tell pretty quick where yea - if thats then a file-layer, you can diff them from deep inside /var/lib/docker ("work on the unziped, but not mounted onion layers directly")
[08:46:23] <tabakhase> gajus and on a super-random guess... if you want to rebild "the same image" on a different docker-daemon (say on a CI-runner) you need to first pull & then explicitly allow it with "--cache-from IMGNAME" on the `docker build`
[08:46:52] <tabakhase> this may be entirely nonsense to you - or exactly what youre actually trying to fix :D
[08:55:28] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-4173-3ede-b634-13c0.res6.spectrum.com) (Quit: jarthur)
[09:02:37] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[09:10:42] *** Joins: sudomann (~sudomann@98.219.211.182)
[09:11:03] *** Quits: pizza (~pizzaiolo@user/pizzaiolo) (Remote host closed the connection)
[09:12:37] *** Quits: AtomicElephants (~AtomicEle@user/atomicelephants) (Ping timeout: 240 seconds)
[09:20:20] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[09:22:02] *** Joins: pizzaiolo (~pizzaiolo@user/pizzaiolo)
[09:25:20] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[09:36:25] *** Quits: daMaestro (~damaestro@fedora/daMaestro) (Quit: Leaving)
[09:39:15] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:52:55] *** Joins: vidbina (~vid@ppp-49-237-5-114.revip6.asianet.co.th)
[09:55:25] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[09:55:29] *** Quits: tang^ (~DoofusCan@2604:3d09:47c:f970:a082:c6c7:cd4c:1920) (Quit: So long, suckers)
[10:00:41] *** Quits: vidbina (~vid@ppp-49-237-5-114.revip6.asianet.co.th) (Ping timeout: 256 seconds)
[10:07:37] *** Joins: sudomann (~sudomann@98.219.211.182)
[10:08:41] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[10:13:23] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Ping timeout: 265 seconds)
[10:30:05] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 252 seconds)
[10:30:50] *** Quits: andycooper (uid246432@id-246432.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[10:34:08] *** Joins: gebbione (~gebbione@cpc152037-finc21-2-0-cust213.4-2.cable.virginm.net)
[10:37:43] *** Joins: AnapodoPsalidi (~AnapodoPs@154.57.4.229)
[10:38:24] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[10:39:49] *** Quits: AnapodoPsalidaki (~AnapodoPs@2a02:587:2917:5181:d0cb:1588:1dd2:a0e0) (Ping timeout: 240 seconds)
[10:51:10] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[10:52:30] *** Joins: sudomann (~sudomann@98.219.211.182)
[10:58:21] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:02:28] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[11:06:58] *** Quits: cX1n (~cX1n@107.159.97.244) (Ping timeout: 260 seconds)
[11:06:59] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 256 seconds)
[11:16:33] *** Quits: i64 (~i64@185.65.135.183) (Ping timeout: 256 seconds)
[11:17:38] *** Quits: devslash (~devslash@46.232.211.210) (Quit: ZNC 1.8.2 - https://znc.in)
[11:18:55] *** Joins: devslash (~devslash@46.232.211.210)
[11:19:55] *** Joins: tex (~super@user/dix)
[11:20:19] *** Quits: jmcgnh (~jmcgnh@wikipedia/jmcgnh) (Ping timeout: 252 seconds)
[11:21:02] *** Joins: sudomann (~sudomann@98.219.211.182)
[11:24:40] *** Joins: sultand (~sultand@office.rackhosting.com)
[11:25:53] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[11:26:51] *** Joins: jmcgnh (~jmcgnh@wikipedia/jmcgnh)
[11:31:22] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:31:39] *** Joins: vidbina (~vid@ppp-49-237-5-114.revip6.asianet.co.th)
[11:36:52] *** Joins: i64 (~i64@185.65.135.183)
[11:37:36] <gebbione> are include and exclude patterns in docker already? it might be obvious from git but I am not sure that this was actually deployed as i dont know how moby is managed https://github.com/moby/buildkit/pull/2082
[11:37:58] <gebbione> i m going to look for some release notes and try to understand if buildkit is part of docker/docker-compose
[11:39:42] *** Joins: sudomann (~sudomann@98.219.211.182)
[11:43:49] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[11:57:45] *** Joins: sudomann (~sudomann@98.219.211.182)
[12:01:50] *** Quits: kevgao (~kevgao@2601:281:8780:4510:adf9:6718:c66a:aa00) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:02:11] *** Joins: NGen15 (ngen15@ns397065.ip-178-32-220.eu)
[12:04:33] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[12:05:45] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[12:07:15] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Client Quit)
[12:09:24] *** Quits: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi) (Ping timeout: 268 seconds)
[12:10:26] *** Joins: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi)
[12:15:33] *** Quits: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi) (Ping timeout: 256 seconds)
[12:15:59] *** Joins: sudomann (~sudomann@98.219.211.182)
[12:20:27] *** Joins: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi)
[12:22:17] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 252 seconds)
[12:22:52] *** Joins: kostkon_ (~androirc@2.142.66.94.static.otenet.gr)
[12:35:12] *** Joins: sudomann (~sudomann@98.219.211.182)
[12:36:29] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[12:36:59] *** Quits: kostkon_ (~androirc@2.142.66.94.static.otenet.gr) (Remote host closed the connection)
[12:37:17] *** Joins: kostkon_ (~androirc@2.142.66.94.static.otenet.gr)
[12:41:25] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[12:42:07] *** Quits: NGen15 (ngen15@ns397065.ip-178-32-220.eu) (Quit: Ping timeout (120 seconds))
[12:43:22] *** Quits: pabed2 (~Thunderbi@89.37.15.34) (Quit: pabed2)
[12:44:20] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[12:44:36] *** Joins: mickey8 (~user@user/mickey)
[12:45:57] *** Joins: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it)
[12:51:12] *** Quits: kevinnn (~kevinnn@2600:8802:3713:3b00::f6d5) (Ping timeout: 256 seconds)
[12:53:42] *** Joins: sudomann (~sudomann@98.219.211.182)
[12:54:13] *** Joins: cX1n (~cX1n@107.159.97.244)
[12:54:28] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[12:56:09] *** Quits: junktext_ (~junktext@gateway/vpn/pia/junktext) (Remote host closed the connection)
[12:56:36] *** Quits: naicam|ne (~naicam|ne@wireguard/tunneler/naicamne) (Ping timeout: 245 seconds)
[12:57:20] *** Joins: junktext_ (~junktext@gateway/vpn/pia/junktext)
[12:59:49] *** Quits: Haxxa (~Haxxa@202-130-210-132.ip4.superloop.com) (Ping timeout: 240 seconds)
[13:00:08] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[13:00:19] *** Quits: rvalue (~rvalue@user/rvalue) (Ping timeout: 256 seconds)
[13:01:24] *** Joins: Haxxa (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com)
[13:08:29] *** Quits: cX1n (~cX1n@107.159.97.244) (Ping timeout: 252 seconds)
[13:09:06] *** Joins: denningsrogue8 (~denningsr@98.97.131.238)
[13:11:15] *** Quits: denningsrogue (~denningsr@98.97.131.238) (Ping timeout: 265 seconds)
[13:11:15] *** denningsrogue8 is now known as denningsrogue
[13:11:52] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:12:49] *** Joins: sudomann (~sudomann@98.219.211.182)
[13:15:37] *** Quits: vidbina (~vid@ppp-49-237-5-114.revip6.asianet.co.th) (Ping timeout: 256 seconds)
[13:17:32] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[13:17:48] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Quit: Leaving)
[13:18:35] *** Joins: dinowilliam (~dinowilli@138.204.26.89)
[13:25:15] *** Joins: cX1n (~cX1n@107.159.97.244)
[13:30:25] *** Joins: sudomann (~sudomann@98.219.211.182)
[13:31:07] *** Joins: vidbina (~vid@ppp-49-237-5-114.revip6.asianet.co.th)
[13:38:15] *** Joins: BSaboia (~bsaboia@187.18.140.125)
[13:38:19] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[13:38:45] *** Joins: sudomann (~sudomann@98.219.211.182)
[13:43:13] *** Quits: vidbina (~vid@ppp-49-237-5-114.revip6.asianet.co.th) (Read error: Connection reset by peer)
[13:43:38] *** Joins: vidbina (~vid@ppp-124-120-192-157.revip2.asianet.co.th)
[13:44:31] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 256 seconds)
[13:45:48] *** Joins: sudomann (~sudomann@98.219.211.182)
[13:49:39] *** Joins: mickey80 (~user@user/mickey)
[13:50:13] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[13:52:16] *** Quits: Proxysna (~Proxysna@62.119.254.142) (Remote host closed the connection)
[13:52:27] *** Quits: mickey8 (~user@user/mickey) (Ping timeout: 276 seconds)
[13:52:28] *** mickey80 is now known as mickey8
[13:59:11] *** Quits: lehinsun (~ttytwiste@188.113.176.117) (Remote host closed the connection)
[13:59:25] *** Quits: dinowilliam (~dinowilli@138.204.26.89) (Ping timeout: 240 seconds)
[13:59:31] *** Joins: lehinsun (~ttytwiste@188.113.176.117)
[14:01:26] *** Joins: walkr (~walkr@177-7-165-171.user3p.brasiltelecom.net.br)
[14:03:03] *** Joins: sudomann (~sudomann@98.219.211.182)
[14:17:48] *** Joins: dinowilliam (~dinowilli@138.204.26.89)
[14:19:20] *** Quits: BSaboia (~bsaboia@187.18.140.125) (Quit: This computer has gone to sleep)
[14:19:39] *** Quits: vidbina (~vid@ppp-124-120-192-157.revip2.asianet.co.th) (Ping timeout: 256 seconds)
[14:33:10] *** Quits: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it) (Quit: Leaving)
[14:33:35] *** Joins: vidbina (~vid@ppp-124-120-192-157.revip2.asianet.co.th)
[14:42:19] *** Quits: TheFatherMind (~TheFather@user/thefathermind) (Ping timeout: 256 seconds)
[14:46:41] *** Joins: TheFatherMind (~TheFather@user/thefathermind)
[14:47:04] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Read error: Connection reset by peer)
[14:47:59] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[14:48:41] *** Quits: LtHummus (~lthummus@97-126-100-88.tukw.qwest.net) (Ping timeout: 245 seconds)
[14:50:37] *** Quits: AsenMx (~AsenMx@user/asenmx) (Ping timeout: 240 seconds)
[14:51:25] *** Joins: AsenMx (~AsenMx@user/asenmx)
[15:00:35] *** Joins: LtHummus (~lthummus@97-126-121-3.tukw.qwest.net)
[15:01:01] <gebbione> any reason why docker-compose images does not show any even if the images exist?
[15:06:35] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[15:07:25] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[15:07:34] <tabakhase> gebbione do they have an actual "image:" tag or just a dockerfile? - and is the thing up? (no clue if thats needed, just a random idea ;D)
[15:08:29] <gebbione> yes, they are tagged
[15:08:48] <gebbione> images should not be running in containers to be listed by the images command afaik
[15:09:18] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[15:09:19] <gebbione> basically if the service has an image with some tagging then after docker-compose build i should be able to list them
[15:09:26] <gebbione> but it is not happening
[15:09:35] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[15:09:42] <gebbione> i can docker images | grep name of the docker-compose parent folder
[15:09:43] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[15:09:45] <gebbione> and get them
[15:09:49] <gebbione> or something similar
[15:10:10] <gebbione> but that is counter intuitive as it is in the global docker context and i need to grep to see them
[15:10:43] <maret> How should I pass content of a file from container A as part of command parameter in docker-compose.yml for container B? 
[15:11:22] <gebbione> maret, a volume where you write the file to and then make B depends_on A ?
[15:11:44] <rawtaz> maret: why do you feel you need to pass that file in the compose file?
[15:12:37] <maret> I need to pass contents of a file as part of command. To be more concrete I have a service which stores authorization cookie in a file and I need to pass it's contents to different service running in its own  docker container
[15:12:44] <maret> I am running both from docker-compose
[15:13:37] <maret> it's pretty much this question https://stackoverflow.com/questions/56670314/docker-compose-yml-passing-arg-to-build-from-file-contents which at least 2 years ago didn't have straightforward answer
[15:16:01] <rawtaz> maret: if they need to share that file during runtime you should probably pass it using a shared storage, e.g. a volume or a bind mount or a database or something else. if it's more of a static thing you can probbly copy it from *image* A to *image* B during the build stage
[15:18:23] <tabakhase> gebbione greping images for the parent-name from compose should kinda yield nothing - dont they remain "untagged" / unly exists as hash when you do not delacre a image: NAME for it to tag as...? - so yea i would expect those to not show up...
[15:19:14] <tabakhase> or maybe expand on the "why" for alternatives...
[15:19:35] <gebbione> tabakhase, I am not following your statement. The images are built. They exist as named in their image: declaration in docker-compose file  so they should come up in docker-compose images afaik
[15:20:33] <tabakhase> maret COPY --from=theother /my-file /its-file - then the CMD-cat hack from that link would work
[15:21:11] *** Joins: sudomann (~sudomann@98.219.211.182)
[15:21:34] *** Quits: Czernobog (~Czernobog@user/czernobog) (Quit: ZNC 1.8.2 - https://znc.in)
[15:22:13] <tabakhase> gebbione well then that "grep can" would still be a happy accident or "image: nginx:latest" breaks it
[15:22:52] *** Quits: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi) (Quit: food with kids time)
[15:24:23] <gebbione> I am not sure how it would be an happy accident but if I build with image: myapp-image:{TAG} i dont get the output from that command and the image exists ... no accidents as it was built
[15:25:57] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 256 seconds)
[15:31:35] <tabakhase> gebbione does `docker compose convert --images` spit something?
[15:32:12] <gebbione> i m on v1
[15:32:17] <gebbione> i think convert does not exist
[15:32:36] <gebbione> No such command: convert
[15:32:44] <rawtaz> docker-compose ftw <3
[15:33:28] <tabakhase> so you are using outdated software while wondering about a bug fixed D:
[15:33:40] <tabakhase> ;-)
[15:34:26] <tabakhase> (that this whole "docker compose" thing is a utterly shitshow is a different story...)
[15:35:51] <gebbione> not outdated afaik, outdated means very little . If i look at https://docs.docker.com/compose/release-notes/ 1.29.2 is still supported and should work very well
[15:37:03] *** Joins: ph88 (~ph88@ip5f5af068.dynamic.kabel-deutschland.de)
[15:37:13] *** Quits: vidbina (~vid@ppp-124-120-192-157.revip2.asianet.co.th) (Ping timeout: 268 seconds)
[15:37:51] <ph88> hey guys i started this container https://bpa.st/JHHA the container is running .. but i can't connect to port 7999 .. what could be wrong here ? 
[15:38:35] *** Joins: sudomann (~sudomann@98.219.211.182)
[15:38:41] <maret> tabakhase thanks will take a look at it
[15:38:42] <ph88> when i look into the logs of this container i see  Listening at: http://[::]:80 (1)
[15:38:47] <gebbione> connect to port 80 if you are connecting from the host
[15:39:02] <gebbione> 7999 is accessible from within the container
[15:39:37] *** Joins: node1 (~hex@user/node1)
[15:40:07] <node1> a container is Exited (0) or (1)  What does it meant?
[15:40:41] <ph88> gebbione, so i switched the ports around by accident ? so it should be 7999:80  ?
[15:40:42] <gebbione> 0 exited happy, 1 errored when run the command
[15:41:06] <gebbione> ph88, not sure what it should be. Depends on what you are running
[15:41:29] <ph88> gebbione, the process inside the container is listening on port 80 and i want docker to make it into 7999
[15:41:44] <gebbione> then invert the ports
[15:43:21] <ph88> thank you gebbione !
[15:43:31] <gebbione> np
[15:45:55] <ph88> ye it works now with curl  https://bpa.st/QRZA   just the browser doesn't load the page for some reason .. i guess that's no longer a docker problem now
[15:46:33] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Quit: This computer has gone to sleep)
[15:46:57] <gebbione> yes, you can check logs from the container if they are piped out
[15:46:58] <ph88> ah i figured that out as well ... just got the protocol wrong . All good now :)
[15:47:32] *** Joins: Santzes (~Santzes@li2111-66.members.linode.com)
[15:51:20] <node1> 0 exited happy ?? what do you meant?
[15:52:55] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[15:53:51] <rawtaz> maret: well?
[15:53:55] *** Joins: Czernobog (~Czernobog@user/czernobog)
[15:57:19] <gebbione> node1, the command finished without errors
[16:00:05] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[16:04:55] <geirha> node1: docker run exits with the exit status of the ENTRYPOINT or CMD that was run, and commands use exit status 0 to indicate success, and any number between 1-255 to indicate falseness or error.
[16:05:10] <node1> yeah it works now.
[16:05:17] <node1> Thank you geirha gebbione 
[16:06:07] *** node1 is now known as reckless
[16:08:40] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 268 seconds)
[16:12:02] *** Joins: Czernobog (~Czernobog@user/czernobog)
[16:15:47] <maret> rawtaz sorry dealing with another issue
[16:16:39] <rawtaz> maret: oh sure, no problem!
[16:16:45] <rawtaz> one thing at a time :)
[16:22:11] <ph88> is there any way to make a container (like i would do with docker run) pass all the parameters but then not actually run it ?
[16:23:20] <rawtaz> ph88: please rephrase ;)
[16:23:46] <ph88> like docker run makes a container from an image and starts the container right ?
[16:23:51] *** Joins: mven3 (~mven@ip68-104-39-54.lv.lv.cox.net)
[16:24:14] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[16:24:32] <maret> I am using this docker-compose.yml file  https://www.pastiebin.com/61af5957d68cd, running it using docker-compose up bitcoin-node and everytime I run new volume seems to be created , why?
[16:24:46] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Client Quit)
[16:25:49] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Ping timeout: 240 seconds)
[16:25:49] *** mven3 is now known as mven
[16:26:23] <maret> also when I run docker volume ls i see data_bitcoin-node-volume  instead of  bitcoin-node-volume as a name, not sure where data_ prefix came from
[16:28:15] <tabakhase> parent folder of the compose file, also -P and env.COMPOSE_PROJECT_NAME
[16:28:54] <tabakhase> nice to spin "the same files up multiple times" if needed for example - and for lesscollision chances otherwise
[16:34:44] <simplicity> ph88: container create
[16:34:55] <ph88> thank you simplicity  :)
[16:36:29] <akik> maret: you can create volumes manually and then define them as external so the name won't change
[16:37:06] <rawtaz> nice simplicity :)
[16:37:52] <maret> akik true but this should work too
[16:38:11] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Quit: This computer has gone to sleep)
[16:40:46] <tabakhase> maret youre also not using the volume anywhere what seems odd - an no need for any of that networks: stuff
[16:41:30] <tabakhase> (you only need to start explicitly delaring those if you want 2 or more networks and not all containers (of this one composefile) in the same net
[16:41:59] <tabakhase> (compose comes "with a network for free" so to say)
[16:42:28] *** Quits: AsenMx (~AsenMx@user/asenmx) (Ping timeout: 265 seconds)
[16:42:54] *** Joins: AsenMx (~AsenMx@user/asenmx)
[16:46:24] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[16:51:00] <maret> tabakhase i see, yeah the empty volumes was just for testing
[16:51:27] <maret> is it possible to move contents of one volume to another one? I've want to move data from the one which was created accidentally to proper one
[16:53:22] <rawtaz> it would probably be good if you explained what actual problem you are trying to solve by wanting to do this
[16:53:55] *** Joins: null23 (~null23@h-37-123-160-123.A251.priv.bahnhof.se)
[16:54:29] <maret> just what am I saying, I have created one volume by accident, docker container filled it with data, but I have different nicely named volume, where I want data to be
[16:55:00] <maret> ideally I would rename the volume but afaik thats not possible
[16:57:55] *** Quits: Icedream (~icedream@144.76.223.175) (Quit: A lol made me boom.)
[16:58:18] <null23> hi.. new here.. Im thinking of binding three or four host drives to same container folder using composer but... is that a bad idea? 
[16:58:58] *** Quits: AsenMx (~AsenMx@user/asenmx) (Read error: Connection reset by peer)
[16:58:59] <tabakhase> maret docker run -v v1:/v1 -v2:/v2 alpine cp -pr /v1/ /v2/  (or something like that, no extra "tooling")
[16:59:32] <tabakhase> null23 not sure what you mean by "same" there... a path can only be one thing
[16:59:45] <tabakhase> can you nest those? sure
[17:00:29] <null23> tabakhase: i mean.. like.. /diskA/movies: /downloads ... and /diskB/movies: /downloads
[17:00:57] <maret> tabakhase so I create a dummy container and copy data inside of it
[17:02:06] <maret> btw any clue where does data_ prefix came from for my named volume?
[17:02:53] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Quit: This computer has gone to sleep)
[17:02:55] <tabakhase> null23 thats sheer impossible - on any operating or filesystem that im aware of ;-) - sure your app doesnt support scanning /downloads/A/ and /downloads/B/ already? ;-) -- for "worse alternatives", idk... mount to /A/ and /B/ and then symlink everything over into /downloads/ or so :D spooky but may do it in a pinch...
[17:03:48] <tabakhase> maret [13:58:16] <tabakhase> parent folder of the compose file, also -P and env.COMPOSE_PROJECT_NAME
[17:04:40] *** Joins: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it)
[17:05:56] <rawtaz> tabakhase: you're on fire today, lots of help given :D
[17:08:04] <null23> tabakhase: I was thinking of do symlinks first but felt so much doing... but yeah.. i could just let the app do the work for me... sometimes my brain doesnt work like it should. Thanks anyway :)
[17:15:21] *** Joins: Icedream (~icedream@144.76.223.175)
[17:29:07] *** Joins: kevgao (~kevgao@c-174-63-68-26.hsd1.ct.comcast.net)
[17:31:21] *** Joins: tuxzen (~reber@user/remat)
[17:32:02] <tuxzen> hey, I have no internet inside a container (dns resolve doesn't work), what could be the problem please ?
[17:33:18] <rawtaz> tuxzen: check the network settings inside the container? obviously you also need to explain what you are actually trying and what the symptoms are in detail
[17:36:39] <rawtaz> you can also use `docker inspect` to investigate the configuration of the container, but in general i'd recommend investigating from the inside first :)
[17:37:27] <tuxzen> rawtaz, yes of course : https://paste.debian.net/1222427/
[17:38:11] *** Joins: menace (~someone@user/menace)
[17:38:17] <tuxzen> indeed it's on image creation stage
[17:38:44] <rawtaz> oh
[17:38:48] <rawtaz> thought you were running a container
[17:38:53] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[17:39:07] <tuxzen> my bad, it's on image creation stage
[17:39:59] <tuxzen> $ ping deb.debian.org PING debian.map.fastlydns.net (199.232.178.132) 56(84) bytes of data.64 bytes from 199.232.178.132 (199.232.178.132): icmp_seq=1 ttl=53 time=18.3 ms
[17:40:45] <menace> hey, can i install quay or harbor or portus without docker image, but with like, for example, debian package?
[17:40:46] <rawtaz> brb phone call!
[17:49:17] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Quit: This computer has gone to sleep)
[17:52:48] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[17:53:40] *** Quits: lehinsun (~ttytwiste@188.113.176.117) (Remote host closed the connection)
[17:56:26] *** Quits: tuxzen (~reber@user/remat) (Remote host closed the connection)
[17:58:09] *** Joins: rvalue (~rvalue@user/rvalue)
[17:59:17] <rawtaz> ok bacj
[17:59:19] <rawtaz> k
[18:00:24] <rawtaz> ah crap
[18:00:26] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Quit: This computer has gone to sleep)
[18:00:28] <rawtaz> they left :<
[18:00:55] <rawtaz> maret: not sure what you mean - if it exists as a debian package and you run debian, presumably you can? xD
[18:06:25] *** Joins: obihann (~jhann@156.57.164.129)
[18:08:31] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[18:10:57] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[18:12:57] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Client Quit)
[18:14:02] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[18:14:55] *** Joins: artok (~azo@mobile-access-5672c9-83.dhcp.inet.fi)
[18:20:45] <null23> hm.. I suceeded to bind my diffrent harddrive to diffrent subfolders in docker.... but i forgot to connect the third harddrive... when adding one volume more to a working container, do i need to redo everyting? :S
[18:21:39] <rawtaz> i guess you need to restart the container?
[18:22:23] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbfb-173.dhcp.inet.fi)
[18:23:49] *** Quits: obihann (~jhann@156.57.164.129) (Ping timeout: 240 seconds)
[18:27:34] *** Joins: andycooper (uid246432@id-246432.helmsley.irccloud.com)
[18:27:40] *** Joins: obihann (~jhann@156.57.164.129)
[18:28:19] *** Joins: AtomicElephants (~AtomicEle@user/atomicelephants)
[18:29:44] <null23> do you refer to using the terminal to add one more and then restart? i was thinking using GUI in portainer, stop and add.. but little bit worried to lose some data
[18:30:54] *** Joins: denningsrogue8 (~denningsr@98.97.131.238)
[18:30:58] *** Quits: denningsrogue (~denningsr@98.97.131.238) (Read error: Connection reset by peer)
[18:30:58] *** denningsrogue8 is now known as denningsrogue
[18:32:48] <rawtaz> i use docker-compose, so i would edit the compose file and then restart the container
[18:33:11] <rawtaz> if you are worried about restarting your containers, you should address that :)
[18:33:22] *** Joins: vidbina (~vid@ppp-124-120-192-157.revip2.asianet.co.th)
[18:33:37] *** Joins: nabidev (~nabidev@94.198.43.75)
[18:36:39] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 252 seconds)
[18:41:09] <obihann> by default docker configures firewalld to allow any source to access containers correct?
[18:41:23] <obihann> I'm struggling to restrict docker being publically accessed on my server with firewalld
[18:42:03] <obihann> in firealld my public zone has nothing open, so it has to be the docker zone I think
[18:42:30] <rawtaz> what is it that you can access externally that you shouldnt?
[18:42:34] <rawtaz> to be more precise
[18:42:51] <obihann> sorry, I have a nginx container that I can publically access
[18:43:07] <obihann> the nginx container listens on 80/443, this should only be accessible via a vpn tunnel or localhost
[18:43:26] <obihann> nginx is on the bridge network
[18:43:36] *** Joins: sudomann (~sudomann@98.219.211.182)
[18:43:40] <obihann> I have other containers, they are on seperate networks and not publically exposed
[18:44:59] *** Quits: nabidev (~nabidev@94.198.43.75) (Quit: Leaving)
[18:45:11] *** Joins: Reepicheep (~Reepichee@207-68-211-140.nctc.net)
[18:45:27] *** Joins: TomyWork (~TomyLobo@p200300e80f0f270081b191487ee27657.dip0.t-ipconnect.de)
[18:45:57] *** Joins: nabidev (~nabidev@94.198.43.75)
[18:46:25] <rawtaz> obihann: are you not using docker-compose?
[18:52:58] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:53:19] <obihann> yes but seperatly, this nginx container is just traditional docker
[18:54:42] *** Quits: nabidev (~nabidev@94.198.43.75) (Quit: Leaving)
[18:56:33] *** Joins: nabidev (~nabidev@94.198.43.75)
[18:56:46] <menace> does any one of you have the problem that docker generates iptables-legacy entry? this really sucks (debian, docker-ce and docker.io)
[18:58:17] *** Quits: tex (~super@user/dix) (Read error: Connection reset by peer)
[18:59:51] *** Joins: tex (~super@user/dix)
[19:05:30] *** Quits: nabidev (~nabidev@94.198.43.75) (Changing host)
[19:05:30] *** Joins: nabidev (~nabidev@user/nabidev)
[19:05:56] <obihann> I also tried disabling zone drive in firewalld
[19:06:56] *** Quits: nabidev (~nabidev@user/nabidev) (Quit: Leaving)
[19:08:57] *** Quits: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it) (Quit: Leaving)
[19:09:49] <artok> obihann: when you do port forwardings to the container, specify your local/vpn ip, so it won't be 0.0.0.0 
[19:11:29] <obihann> I'll give that a try ty
[19:11:48] *** Joins: AsenMx (~AsenMx@user/asenmx)
[19:18:54] *** Joins: lilgopher (~textual@2601:241:8000:38f0:e3:94bb:c780:d144)
[19:21:17] <obihann> I think we have it working now :) 
[19:21:41] *** Quits: vidbina (~vid@ppp-124-120-192-157.revip2.asianet.co.th) (Ping timeout: 268 seconds)
[19:22:26] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[19:24:13] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[19:24:30] *** Joins: codebam (~codebam@user/codebam)
[19:25:31] *** Joins: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:a082:c6c7:cd4c:1920)
[19:25:50] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Remote host closed the connection)
[19:26:05] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[19:27:02] *** Joins: sudomann (~sudomann@98.219.211.182)
[19:30:55] *** Quits: codebam (~codebam@user/codebam) (Ping timeout: 252 seconds)
[19:30:56] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[19:37:13] *** Quits: kostkon_ (~androirc@2.142.66.94.static.otenet.gr) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[19:37:40] *** Joins: BSaboia (~bsaboia@177.190.211.124)
[19:37:43] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[19:38:04] *** Quits: BSaboia (~bsaboia@177.190.211.124) (Remote host closed the connection)
[19:38:13] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Client Quit)
[19:40:06] *** Joins: jkent3 (~john@66.44.44.108)
[19:41:22] <statusbot> Status update: The team is investigating issues with Docker Hub services involving new pushes to the Docker Hub Registry.  New repository tags, updated metadata about existing images,  Autobuilds, and vulnerability scans may be delayed. -- https://status.docker.com/pages/incident/533c6539221ae15e3f000031/61af87a951fec9053d613338
[19:42:41] *** Joins: irrgit (~irrgit@192.241.175.183)
[19:52:13] *** Quits: kevgao (~kevgao@c-174-63-68-26.hsd1.ct.comcast.net) (Changing host)
[19:52:13] *** Joins: kevgao (~kevgao@user/kevgao)
[19:53:11] *** Joins: Ivii (~Ivyy@2001:a62:4c3:8e01:dcc8:ad1a:f19b:91b0)
[20:03:36] *** Joins: calm-steam (~calm-stea@2a02:810a:980:1400::6ffc)
[20:11:49] *** Quits: obihann (~jhann@156.57.164.129) (Ping timeout: 240 seconds)
[20:13:41] *** Quits: sebastianos (~sebastian@user/sebastianos) (Ping timeout: 265 seconds)
[20:14:13] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[20:15:11] *** Joins: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com)
[20:17:06] *** Joins: sebastianos (~sebastian@user/sebastianos)
[20:20:08] *** Joins: rardiol (~quassel@user/rardiol)
[20:31:29] <rawtaz> &45
[20:32:38] <rawtaz> menace: you can turn off docker's involvement with the firewall
[20:32:49] <rawtaz> i *think* it only supports iptables still? i dont remember
[20:33:02] <ada_> it does, but turning off iptables in teh daemon options is not really that effective
[20:33:49] <rawtaz> in what way is it not effective? does it not actually make docker not modify any firewall rules?
[20:33:52] <ada_> you will still get iptables rules added by docker here and there, docker just uses iptables extensively for container networking and there's not really a "good" way around that
[20:33:59] <ada_> no, it doesn't make docker stop touching iptables 100% 
[20:34:05] <rawtaz> wow. thats lol
[20:34:17] <rawtaz> so how do you deal with the case where you are using e.g. nftables?
[20:34:25] <ada_> install a compatibility layer
[20:35:53] <rawtaz> do you know if docker uses the `iptables` command directly or something else?
[20:36:39] <ada_> it does
[20:36:43] <rawtaz> ok
[20:36:49] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[20:37:10] <ada_> on ubuntu, I think docker uses iptables-nft by default, for example
[20:37:30] <ada_> there's a workaround on arch forums to use docker in a separate network namespace so you don't have to mix nftables and iptables rules
[20:37:41] <ada_> https://wiki.archlinux.org/title/nftables#Working_with_Docker
[20:38:23] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[20:42:07] <rawtaz> the documentation says "--iptables=false prevents the Docker daemon from adding iptables rules". if that is not the case, then that's a bug.
[20:42:12] *** Quits: reckless (~hex@user/node1) (Ping timeout: 265 seconds)
[20:43:04] <rawtaz> (i mean either in the docs or in the engine, not necessarily the latter)
[20:43:17] <ada_> it isn't 100% true under all circumstances
[20:43:36] <rawtaz> yeah but theres no way of knowing that reading the documentation
[20:43:41] <ada_> I agree
[20:43:48] <ada_> which is why I discourage people from setting in
[20:43:52] <ada_> it*
[20:44:30] <rawtaz> so does docker use iptables to control access and non-access between the various networks? or is that done using namespaces or something else rather than iptables?
[20:44:36] <ada_> both
[20:45:08] <rawtaz> hm ok
[20:45:12] <rawtaz> what a clustermess
[20:45:13] <ada_> each container has its own network namespace, so it has a complete tcp/ip stack, and then network routes and "dns" are used to control what can communicate with what
[20:45:33] <ada_> the networking is all plumbed with iptables for routing between containers and the host
[20:46:06] <ada_> ipam/dns/service-discovery is handled in the daemon by libnetwork/gossip
[20:46:11] <rawtaz> ok so the routing you refer to is the one done by firewall rules, rather than the regular routes in the system
[20:46:13] <ada_> and then iptables is the "layer 2"
[20:46:29] <ada_> layer 3?
[20:46:37] <rawtaz> hehe layer X :-)
[20:46:46] <ada_> right
[20:47:22] <rawtaz> oh boy :)
[20:47:50] <rawtaz> well lets hope that e.g. debian's iptables-nft compat thingie works well then (for those needing this on the docker host)
[20:49:24] <ada_> if you're *only* using the simple bridge driver, and not using any user defined networks, then i think setting iptables false will not have side effects.  but I don't remember the exact edges of the use case, and you'd still have to manage port forwarding yourself
[20:49:45] <rawtaz> yeah that makes sense
[20:49:49] <menace> rawtaz, how can i do stop the involvement?
[20:50:13] <menace> ah
[20:50:39] <menace> yeah, the same as i know, docker does not support nftables and creates sometimes stuff which will be put into legacy
[20:51:04] <menace> the point is: afaik the problem is in the moby network library, so podman has the SAME problem
[20:51:05] <rawtaz> can you elaborate on what you mean by put into legacy? i dont understand what that means
[20:51:19] *** Quits: dinowilliam (~dinowilli@138.204.26.89) (Remote host closed the connection)
[20:51:39] <menace> well, we have one docker host, when stuff runs and developer deploy stuff at one point suddenly docker chains pop up in iptables-legacy 
[20:51:52] <menace> this is shown by iptables legacy, but we do not know when and why
[20:52:11] <menace> when restart everything and start the container again, there are no legacy rules
[20:53:12] <rawtaz> so iptables-legacy is like a table or something?
[20:53:19] <rawtaz> or you mean the command?
[20:53:29] <ada_> menace: docker requires iptables.
[20:53:53] <ada_> menace: until the daemon gets nftables support, you'll need a compatibility layer or to use some kind of workaround like the one I posted from arch wiki above ^
[20:54:22] <rawtaz> so on debian i suppose what "should" work is installing iptables-nft and then using `alternatives` to make that the current version of iptables
[20:57:51] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[20:58:19] *** Quits: TomyWork (~TomyLobo@p200300e80f0f270081b191487ee27657.dip0.t-ipconnect.de) (Remote host closed the connection)
[20:59:39] *** Quits: graudre (~graudre@2607:fea8:560:7f20:8037:24d8:8d0:66af) (Ping timeout: 252 seconds)
[21:02:45] <menace> ada_, thanks i will look into that
[21:04:07] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[21:04:25] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:04:38] *** Joins: masber (~masber@vpn-83.cscs.ch)
[21:06:00] <jkent3> i’m curious about a situation I’m hitting… i have a server only running two containers, both instantiated using docker-compose with a restart unless stopped… something is causing the dockerd to crash… one container restarts as expected, the other, however, wont restart until the machine is rebooted (I can do a docker-compose down and recreate the container just fine, however)
[21:07:51] <rawtaz> jkent3: can you reproduce it at will? what are the actual symptoms?
[21:08:13] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 256 seconds)
[21:08:22] <jkent3> this is happening about once a day
[21:09:01] <jkent3> I’m searching the logs to find out what might be happening… but so far nothing … 
[21:09:42] <jkent3> some event in one of the containers (and I’m going to guess its something to do with the container that isn’t restartable) causes dockerd to crash
[21:10:11] <rawtaz> you wrote three lines since my question and neither of them answers any of the two questions i asked :D
[21:11:19] *** Quits: cornduck (~cornduck@gateway/tor-sasl/cornduck) (Remote host closed the connection)
[21:11:34] <jkent3> actual symptom: container crashes, docker can’t restart it without rebooting the machine or destroying and restarting the container
[21:11:37] *** Joins: cornduck (~cornduck@gateway/tor-sasl/cornduck)
[21:11:53] <jkent3> can I reproduce at will:  No, only when something in the container causes the dockerd to crash
[21:12:27] <jkent3> I’m trying to figure out WHAT is causing it, and why the restart  isn’t happening when dockerd restarts
[21:13:32] <rawtaz> crashes how? what are the *symptoms* of it crashing?
[21:13:46] <rawtaz> does it happen like in relation to something, time or some other load?
[21:14:02] *** Joins: leitz (~LeamHall@cpe-173-172-58-72.tx.res.rr.com)
[21:14:55] <jkent3> crashes how: nothing in the logs show a crash, but it does show dockerd being respawned
[21:15:56] <jkent3> docker logs -f <container-name> prints “Unexpected EOF” (or similiar, i’ll find the write words in a second)
[21:16:58] <jkent3> unfortunately the logs from the app aren’t showing up in that feed so I’m not able to, at the moment, see what activity was requested (if any) that causes the problem
[21:18:31] <rawtaz> are you using docker-compose? i'd probably start the compose app without the -d in a screen/tmux and let it crash and see if i can spot anything from the service(s) in there right before it crashed
[21:21:46] <jkent3> i’ll give that a try, and yes, docker-compose
[21:22:42] <rawtaz> of course also might want to increase verbosity in their logging etc
[21:23:37] *** Joins: Trieste (T@user/pilgrim)
[21:26:47] *** Quits: Reepicheep (~Reepichee@207-68-211-140.nctc.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:30:19] *** Quits: moldorcoder7_ (~moldorcod@37.120.143.30) (Ping timeout: 256 seconds)
[21:32:19] *** Quits: masber (~masber@vpn-83.cscs.ch) (Quit: Client closed)
[21:36:27] *** Joins: tuxzen (~reber@user/remat)
[21:36:51] *** Joins: Trieste_ (T@user/pilgrim)
[21:36:57] <tuxzen> https://paste.debian.net/1222427/ Any ideas?
[21:37:47] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 252 seconds)
[21:37:53] *** Joins: nabidev (~nabidev@user/nabidev)
[21:38:59] <rawtaz> tuxzen: i was back earlier but you had left :o i'd suggest trying to ping 8.8.8.8 and resolve other FQDNs in the build step, just to see if there's any difference
[21:39:19] *** Joins: nabidev_ (~nabidev@user/nabidev)
[21:40:14] *** Trieste_ is now known as Trieste
[21:41:10] <nabidev_> .
[21:44:40] *** Quits: menace (~someone@user/menace) (Read error: Connection reset by peer)
[21:44:48] <tuxzen> rawtaz, :+1
[21:44:56] *** Quits: nabidev (~nabidev@user/nabidev) (Remote host closed the connection)
[21:45:04] *** Joins: nabidev (~nabidev@user/nabidev)
[21:45:09] <ikke> I had it once, and it was resolved by restarting docker
[21:46:23] *** Quits: nabidev_ (~nabidev@user/nabidev) (Quit: Leaving)
[21:51:08] *** Quits: nabidev (~nabidev@user/nabidev) (Remote host closed the connection)
[21:51:10] <ada_> jkent3: journalctl -u docker --no-pager --since "yesterday" | nc termbin.com 9999
[21:51:40] <ada_> its hard for me to believe that a container process causes dockerd to crash
[21:51:46] <ada_> but dockerd logs would be required to debug that
[21:52:29] *** Joins: nabidev (~nabidev@user/nabidev)
[21:59:26] *** Joins: moldorcoder7 (~moldorcod@77.47.48.24)
[22:00:28] *** Joins: cornfeedhobo (~cornfeedh@user/cornfeedhobo)
[22:00:57] <cornfeedhobo> anyone know if there is a way to control image cache when using stages?
[22:02:37] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[22:02:40] *** Joins: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263)
[22:03:28] *** Quits: tuxzen (~reber@user/remat) (Remote host closed the connection)
[22:07:17] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[22:08:14] *** Quits: imp (~imp@192-141-191-227.alternativaip.net.br) (Ping timeout: 265 seconds)
[22:12:54] *** Quits: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263) (Quit: WeeChat 3.3)
[22:13:22] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[22:18:47] *** Joins: goldfish (~goldfish@user/goldfish)
[22:20:37] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 240 seconds)
[22:22:10] <ada_> define what you mean by "control"
[22:22:11] *** Quits: goldfish (~goldfish@user/goldfish) (Read error: Connection reset by peer)
[22:22:33] <ada_> like, you don't want to use it, you do want to use it, ...
[22:22:39] *** Joins: goldfish (~goldfish@user/goldfish)
[22:22:46] <ada_> and how does "stages" factor into your objective
[22:24:11] *** Joins: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se)
[22:24:39] *** Quits: Mattiaslndstrm (~Mattiasln@c213-103-137-235.bredband.tele2.se) (Client Quit)
[22:28:50] *** Joins: moldorcoder7_ (~moldorcod@37.120.143.28)
[22:29:30] *** Quits: moldorcoder7 (~moldorcod@77.47.48.24) (Ping timeout: 265 seconds)
[22:31:54] <jkent3> ada_: thanks … i’ll give it a try
[22:32:08] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[22:32:29] *** Joins: mickey8 (~user@user/mickey)
[22:33:08] *** Joins: luva4 (~luva@37.120.197.46)
[22:33:30] <jkent3> hrm, that log is empty
[22:33:31] <jkent3> https://termbin.com/gkvt
[22:33:54] *** Joins: sudomann (~sudomann@98.219.211.182)
[22:35:47] *** Quits: hendry (~hendry@210.23.22.2) (Ping timeout: 265 seconds)
[22:36:49] *** Quits: luva (~luva@37.120.197.52) (Ping timeout: 252 seconds)
[22:36:49] *** luva4 is now known as luva
[22:37:33] *** Joins: hendry (~hendry@210.23.22.8)
[22:42:33] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 265 seconds)
[22:42:37] *** Quits: rardiol (~quassel@user/rardiol) (Ping timeout: 240 seconds)
[22:43:36] <jkent3> so… maybe a different way of asking the question… what might cause dockerd to crash that would make one specifc container not able to restart unless the system is rebooted
[22:44:39] <jkent3> i was thinking maybe something is causing the filesystem to be corrupted or unwritable and the reboot fixes it?
[22:45:04] *** Quits: Haxxa (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com) (Quit: Haxxa flies away.)
[22:46:14] *** Joins: Trieste (~T@user/pilgrim)
[22:46:48] <cornfeedhobo> ada_: disregard
[22:47:13] *** Joins: Haxxa (~Haxxa@202-144-160-174.ip4.superloop.com)
[22:47:16] <cornfeedhobo> better question. how the heck does one get UID:GID properly mapped into docker-compose without having to wrap in a shell script?
[22:50:42] *** Joins: rardiol (~quassel@user/rardiol)
[22:50:44] <ikke> 1) export it in your shell. 2) add it to .env
[22:51:28] <cornfeedhobo> that reply has a hint of "we get asked this way too much", to which i'd then ask "then why hasn't this been addressed, it's obviously a common need"
[22:52:12] <rawtaz> why hasnt what been addressed? :o
[22:52:17] <cornfeedhobo> lol
[22:53:07] <cornfeedhobo> mapping a current user to a container user is onerous. either uid:gid is consistent across many platforms, or the user is required to workaround it some way, often wrapped
[22:54:28] <cornfeedhobo> ...i bet there could be an additional colon. easy syntax to parse and check for. user: "123:123:<lookup operator>"
[22:55:05] *** Joins: sudomann (~sudomann@98.219.211.182)
[22:55:20] <rawtaz> oh
[22:55:31] *** Quits: lilgopher (~textual@2601:241:8000:38f0:e3:94bb:c780:d144) (Ping timeout: 252 seconds)
[22:55:36] <rawtaz> i havent used userns, i dont suppose thats something useful for this need?
[22:56:25] <cornfeedhobo> maybe? i'm looking up what it is
[22:56:47] <rawtaz> POLL: do you guys name your services after the image name or with what the service represents (e.g. caddy vs web, postgres vs db, nextcloud vs app, etc)?
[22:57:03] <ikke> combination :P
[22:57:09] <cim> rawtaz: depends on the situation
[22:57:24] <rawtaz> i'd love to hear your elaborations on that :D
[22:57:25] <cornfeedhobo> neither. everything gets a unique name. either a combination or some funny internal project name given by the team
[22:57:25] <cim> sometimes i prefix it with string_
[22:57:32] <rawtaz> cim: haha
[22:57:40] <rawtaz> cornfeedhobo: *
[22:57:51] <rawtaz> cornfeedhobo: hm can you give an example? like string_db or string_traefik?
[22:58:02] <rawtaz> argh
[22:58:06] <rawtaz> that was for cim ^
[22:58:34] <cim> rawtaz: i run an open source project so the core containers are prefixed
[22:58:49] <rawtaz> i usually do it the "what it's about" way, e.g. web, db, cache etc. but ive found that it's probably better in many ways to just base it on the image name instead.
[22:58:52] <cornfeedhobo> businessService-toolPoweringIt e.g. foobar-flask
[22:59:03] <cim> demyx_traefik, demyx_code, demyx_nginx, etc
[22:59:11] <cornfeedhobo> ^
[22:59:12] <rawtaz> cim: oh ok
[22:59:22] <rawtaz> so you guys ARE the same person after all
[22:59:28] *** Quits: Trieste (~T@user/pilgrim) (Ping timeout: 265 seconds)
[22:59:28] <cornfeedhobo> that way you can have foobar-postgres foobar-mongo, etc
[22:59:31] <cornfeedhobo> lol
[22:59:33] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 252 seconds)
[22:59:34] <ikke> cornfeedhobo: https://github.com/boxboat/fixuid
[22:59:53] <rawtaz> cornfeedhobo: hm do you mean within the same compose app? because you can have multiple services with the same name as long as theyre in different compose projects
[23:00:15] * rawtaz goes to check out ikke's botox solution
[23:00:16] <cornfeedhobo> oh i was speaking generally. i don't think i've deployed anything to production with compose
[23:00:23] <cornfeedhobo> and now i'm way too focused on kube
[23:02:15] <cornfeedhobo> ikke: reading. thank you
[23:02:17] <rawtaz> cornfeedhobo: ah ok. yeah compose uses the following format for container names: <project>_<service>_<somenumberidontrememberwhatitis>
[23:02:26] <rawtaz> so theres no collision
[23:02:29] *** Joins: codebam (~codebam@user/codebam)
[23:02:30] <rawtaz> ok well, thanks for your inputs
[23:05:57] <cim> i usually append a unique id at the end if i'm using similar names
[23:06:11] <cornfeedhobo> yeah, everything is limited https://github.com/boxboat/fixuid#set-default-values-inside-of-docker-compose
[23:07:08] <cornfeedhobo> unless compose adds support for native interpolation of names to ids, the user is always forced to do _something_, whether it be exporting or setting up a .env file
[23:07:18] *** Joins: sudomann (~sudomann@98.219.211.182)
[23:10:29] *** Joins: Leonarbro_ (~Leonet@user/leonarbro)
[23:14:01] *** Quits: Leonarbro (~Leonet@user/leonarbro) (Ping timeout: 256 seconds)
[23:14:37] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 240 seconds)
[23:14:46] *** Quits: zer0bitz (~zer0bitz@dsl-hkibng32-54fbfb-173.dhcp.inet.fi) (Read error: Connection reset by peer)
[23:15:41] *** Quits: Leonarbro_ (~Leonet@user/leonarbro) (Ping timeout: 252 seconds)
[23:16:21] <ada_> jkent3: tabbed out
[23:16:25] <ada_> jkent3: show me 'docker info' output
[23:16:41] <ada_> jkent3: can you also show me 'systemctl cat docker.service'
[23:18:28] <jkent3> ada_:  docker info output:  https://termbin.com/1of0
[23:18:46] <jkent3> ada_: systemctl output: https://termbin.com/s8g1
[23:21:19] *** pizzaiolo is now known as pizza
[23:23:08] *** Joins: Leonarbro (~Leonet@user/leonarbro)
[23:24:36] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 265 seconds)
[23:26:17] <tabakhase> "Storage Driver: aufs" ayyaya"
[23:26:43] *** Joins: sudomann (~sudomann@98.219.211.182)
[23:27:03] <tabakhase> paird with a engine thats almost a year old...
[23:27:49] <tabakhase> oh and /var/snap = deathsentence
[23:28:20] <tabakhase> jkovac1
[23:28:46] <tabakhase> jkent3 it is fak - sr. jkov*
[23:32:25] <cornfeedhobo> can volume targets make use of container environment variables?
[23:32:52] *** Joins: remolej (~kenoba@user/kenoba)
[23:33:21] <programmerq> cornfeedhobo: no, the target location is decided by the explicit path sent to dockerd in the POST that happens when you do a 'docker run' or 'docker create'. The container env var isn't in play until after the containerized process starts.
[23:33:25] <cornfeedhobo> e.g. -v "/foo:$BAR", where ENV BAR=/bar
[23:33:32] <cornfeedhobo> i thought so. thanks
[23:33:42] <programmerq> you'd have to set the env var in whatever shell you are calling the 'docker run'
[23:33:59] <programmerq> additionally, it's worth mentioning that the 'docker service' interface has templating for the --mount interface
[23:34:08] <programmerq> but it can't use an env var in that templating
[23:34:26] <programmerq> I use it for giving a different volume for each task slot in a swarm mode service.
[23:35:06] <cornfeedhobo> meh it's no biggie. i just didn't want to rely on so much copy/paste. ooooh well
[23:36:38] <programmerq> if you put stuff into a compose file, you can reduce some of the manual pain of building the various commands.
[23:37:33] <programmerq> You can do some yaml references and the like as well. If the ENV needs to be different than what is in the image, you can set it in the compose file directly, which will set it at the runtime ("docker run -e BAR=/foo" is runtime and Dockerfile "ENV BAR=/bar" is build time)
[23:38:59] <jkent3> tabakhase: docker —version reports 20.10.7 so I need to figure out why their is an outdated engine
[23:39:34] <tabakhase> jkent3 client (docker-cli) vs server (docker-daemon)
[23:39:41] <jkent3> i was surprised to learn this morning that docker is a snap on Ubunut
[23:40:11] <tabakhase> "docker version" should print both (NOT --version)
[23:40:33] <jkent3> docker-ce/now 5:20.10.7~3-0~ubuntu-bionic amd64 [installed,local]
[23:40:39] *** Quits: sudomann (~sudomann@98.219.211.182) (Ping timeout: 256 seconds)
[23:42:43] <tabakhase> "it is" is a bit overreaching ;-) - just cause it exists doesnt say thats the best/right/official thing todo ;D - and "snaps" have there own issues on soooooooooooo many levels... ya kinda dont wanne get into this ;D
[23:43:35] <rawtaz> comparing snap and docker seems completely wrong :>
[23:43:53] <rawtaz> oh you mean that it can be installed via snap
[23:44:14] <tabakhase> and there are "official" packages for 18 still https://docs.docker.com/engine/install/ubuntu/ - so switching over to that and see if issue remains is kinda best this channel can do for ya :/
[23:44:21] <rawtaz> i dont see why people install stuff using snap
[23:44:53] <jkent3> but it does leave me scratching my head why apt-get shows that I’m running docker-ce 20.10.7 but docker version says 19.03.13
[23:45:23] <tabakhase> rawtaz most dont to it "on purpose" ;D - and well, for a lot of things they are okay if not even "neat"
[23:45:29] <jkent3> i installed via apt-get … which in the background now will install using snap
[23:45:36] <jkent3> that I now learned
[23:45:42] <rawtaz> tabakhase: yeah most follow some guide the have no understanding of, hoping it will just work :>
[23:45:48] <tabakhase> but for somethign as reaching as docker, snaps are kinda meh ;D
[23:46:11] <rawtaz> jkent3: are you saying that `apt-get install docker-ce` on ubunty installs using snap? :o
[23:46:25] <jkent3> rawtaz: yes
[23:47:51] <tabakhase> its a mixed bag rly - on one hand sure, betetr a snap than no package for your distro... - but if thats then semi broken and unsuppoted its bit of a moo ;-)
[23:47:54] <rawtaz> hahaha
[23:48:00] <rawtaz> ubuntu, never ceases to amaze
[23:48:04] <jkent3> soo… for me to figure out… why does this machine have such an old engine running when the apt-get says its updated
[23:48:38] <tabakhase> jkent3 maybe got multiple engines on it? - you could have one in snap and another on the host... 
[23:48:56] <rawtaz> investigate which one is running when you execute that command, and look for others
[23:49:06] <tabakhase> see if there is anything at /var/lib/docker and what `which docker` spits :D
[23:49:49] <jkent3> which docker “/usr/bin/docker’
[23:50:31] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 252 seconds)
[23:52:22] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Quit: And I'm out.)
[23:52:29] <rawtaz> and that one reports v20 when you run `docker version`? you should probably pastebin the command and output
[23:52:37] *** Quits: AtomicElephants (~AtomicEle@user/atomicelephants) (Ping timeout: 240 seconds)
[23:52:38] <tabakhase> hm i´m not entirely sure where snap injects itself there... afaik /snap/bin used to be a thing, but no clue if thats the only/expected way
[23:53:01] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[23:53:19] <tabakhase> could may even be which is lying - if "snaps docker" is a function which wont see it...
[23:54:34] <tabakhase> so, check `/usr/bin/docker version` vs `docker version`  - may be exact same, or could be the spit - bets are 50:50 ;D
[23:55:59] <jkent3> tabakhase: they give the same output… 
[23:56:13] <jkent3> so somehow there is a v19 engine that is getting called instaed of the v20 engine that was installed by snap
[23:58:58] <cornfeedhobo> is there a way to preserve environment variables from intermediate stages?
