[09:52:46] *** Quits: larryv (~larryv@zsh/patchmanager/larryv) (Quit: larryv)
[19:04:22] *** Joins: Lycurgus (~juan@98.4.112.204)
[19:05:08] <Lycurgus> i have weird thing where grep seems to be stuck on a prior search
[19:06:09] <Lycurgus> it's in the environment (ubuntu 18) but I can't find what's causing it
[19:06:33] <Lycurgus> i can work around by using agrep or whatever
[19:08:03] <OnlineCop> Does `type -a grep` show anything besides paths to grep binaries, such as functions, aliases, etc.?
[19:08:10] <Lycurgus> it interprets the pattern as file spec resulting in the 'no such ...' message but then it goes ahead and gives the search results which its stuck on
[19:09:14] <Lycurgus> just did that and it showed two greps, the original from distro and the current in local bin i compiled
[19:09:33] <Lycurgus> so it only shows two binaries
[19:09:44] <Lycurgus> there was an alias but unaliased
[19:10:09] <OnlineCop> Are you using a recursive grep? `grep -r ...` or `rgrep ...` ?
[19:10:15] <Lycurgus> yeah
[19:10:20] <OnlineCop> Or `find ... -exec grep ...` ?
[19:10:50] <Lycurgus> having done a find exec is one of the things i suspect but it was find exec rm
[19:11:22] <Lycurgus> 18.04 uses 3.1 but 3.7 is now first found with type -a
[19:11:50] <OnlineCop> That should mean that `grep --version` returns 3.7 for you, so that sounds right.
[19:11:52] <Lycurgus> behavior is unchanged with the fresh compile, confirming it's the environment
[19:12:10] <Lycurgus> yeah it does but i'll run it now to make sure
[19:12:29] <Lycurgus> confirmed
[19:13:09] <Lycurgus> the fact that it seems stuck on the search where the problem started is fascinating
[19:13:13] <OnlineCop> My other thought would be that globbing or ! history expansion may be coming into play, but I'm not as knowledgeable as people in #bash (or #ksh, etc.) might know about those.
[19:16:53] <Lycurgus> yes history sound promising looking into that
[19:18:09] <Lycurgus> deleting history had no effect
[19:19:24] <Lycurgus> "grep -rl LispWorks4.4 *" was the original command
[19:20:25] <OnlineCop> The `*` would expand the '..' in the current path to reach into a parent directory.
[19:20:27] <Lycurgus> and anything now even if i'm not in right directory returns results apropos that and the none such msg
[19:21:03] <OnlineCop> Are you searching "any files" or within specific ones (by filename or file extension)?
[19:21:54] <OnlineCop> When I use `grep -r`, I like to `--include=\*.{ext1,ext2,ext3}` and/or `--include={file1,file2,file3}` if it makes sense (such as searching through source code).
[19:21:56] <Lycurgus> replacing the glob by . seemed to eliminate the repeat
[19:22:26] <Lycurgus> that was in the alias 
[19:22:27] <OnlineCop> "grep -rl LispWorks4.4 ." (current directory, instead of using '*' to match all files and folders (including the '..' folder).
[19:23:25] <Lycurgus> yeah it works without the glob
[19:23:51] <Lycurgus> i.e. just as just quoted
[19:25:09] *** Joins: wyre (~wyre@user/wyre)
[19:25:18] <OnlineCop> When you use `set -x`, it echos the complete command before it executes it. Of course, it leaves your terminal in that mode until you disable it again. But...
[19:25:37] <wyre> hi guys, why do you think "sometext " doesn't matches? https://asciinema.org/a/sWiQxBgaTC952bStGE9uAuPVz
[19:25:51] <OnlineCop> If you wrap everything in (parens), then that `set -x` only affects that without affecting your terminal session: `(set -x; grep -rl ...)`
[19:26:23] <wyre> when I don't use the recursive flag ... it matches ðŸ¤”
[19:26:48] <OnlineCop> wyre: `-w` matches the whole word, but your throw a space after it.
[19:27:09] <wyre> OnlineCop, oh, then it wasn't the recursive flag but that one ðŸ˜†
[19:27:11] <wyre> thank you ðŸ˜œ
[19:27:37] <wyre> so I guess to make the difference between words ... grep uses the IFS, right? 
[19:27:53] <OnlineCop> If you're using a version of grep (GNU) that supports -P, you can use `\b` for word boundaries: `grep -Rn '\bsometext\b '` (note the single quotes so I don't have to write `\\b`).
[19:27:56] <Lycurgus> so i'm running under zsh (under bash) and using parenthesized set gave a line msg from zsh
[19:28:14] <OnlineCop> `grep -PRn ...` that is
[19:28:17] <Lycurgus> but otherwise continued the problem
[19:28:36] <Lycurgus> +zsh:78> grep -rl LispWorks4.4 acl acl-read-me.text client clim cmucl contrib examples ftp html-parser lambda-ir lcl lcl-read-me.text -license-.text lispm log lw lw-read-me.text mcl mcl-read-me.text proxy README.org -release-notes-.text scl server smtp standards version.txt w3p w4 www
[19:29:10] <OnlineCop> Lycurgus: One of your files starts with a `-` character? "-release-notes-.text"
[19:29:20] <Lycurgus> followed by the same old result but it's definetely the globbing
[19:29:22] <OnlineCop> You'll want to add `--` before the files.
[19:29:48] <OnlineCop> `grep ... -- files_or_glob`
[19:30:28] <Lycurgus> yes! that works too (with the glob)
[19:30:41] <OnlineCop> The `--` stops grep (and most other bash/zsh tools) from reading any of the remaining characters as commands/switches, like `-rel` in this case.
[19:30:56] <Lycurgus> but how could it get stuck so it was showing the old search?
[19:31:12] <Lycurgus> even if changed the pattern or location
[19:31:24] <OnlineCop> That, I don't know.
[19:31:53] <OnlineCop> I haven't used zsh, so that's outside of what I could answer.
[19:32:17] <Lycurgus> are you a grep developer?
[19:32:27] <OnlineCop> Nope. I just use it daily.
[19:32:57] <Lycurgus> thank you very much; i do too or close to it 
[19:33:17] <Lycurgus> it just seemed more like envirnment corruption than anything else
[19:33:53] <OnlineCop> I've got a large arsenal of grep aliases and scripts now. My favorite is using PCRE (the `grep -P` flag) to exclude edge cases, like when words are after # or // comments, or "within quotes". Things like that.
[19:34:50] <Lycurgus> so the final learning on this was it's good to track to an resolution
[19:35:10] <Lycurgus> *end resolution; rather than working around
[19:35:21] <OnlineCop> Right.
[19:35:39] <OnlineCop> "Why did this break, so I don't keep breaking the same things down the road?"
[19:36:14] <Lycurgus> a lesser learning was don't let environments accrue changes over too long, and be able to reset to distro level which is something I'm working on at a product level
[19:36:43] <Lycurgus> as this ubuntu partition is about 3 o
[19:36:47] <Lycurgus> *3 yo
[19:39:39] <Lycurgus> you can't combine - with other parms
[19:41:13] <OnlineCop> I think what worries me more is that you have so many files there that have leading hyphens.
[19:41:34] <OnlineCop> `rm` has the potential to explode.
[19:41:51] <Lycurgus> well that's from the original pkg (cl-http) which is 20 yo
[19:43:11] <Lycurgus> find rm to remove fasls has never been a prob and it wasn't in this case, you exactly nailed the real problem ('--')
[19:43:40] <OnlineCop> I had a grep alias that would expand a `GREP_OPT` variable to use, so I could easily set/unset '-n' and other flags. But when I tried to `echo "$GREP_OPT"`, it showed nothing, so I thought that the variable was blank. Turns out, "echo" was seeing that flag and thinking it was intended for it, instead of actually printing it verbatim.
[19:44:39] <Lycurgus> it's always a judgement call to let it go with a workaound or track down the actual thing
[19:45:09] <OnlineCop> As of only about 1-2 days ago, I now have a nice "print what this variable is, and escape all the special characters" function to handle that little issue (thanks to the #bash channel). Not sure if the same function works the same on zsh, though.
[19:45:11] <Lycurgus> had i been under time constraints i definitely woulda accepted it
[19:45:26] <OnlineCop> Heh. Yeah, time constraints are definitely a working factor.
[19:45:37] <Lycurgus> zsh can be problematic
[19:45:49] <OnlineCop> What I really need to learn to do is start uploading my useful scripts to a gist so if I switch jobs, I can take them with me. :P
[19:46:05] <Lycurgus> i mostly manually invoke it at least in my home LAN
[19:46:45] <Lycurgus> and by problematic i mean mostly with globs
[21:15:17] *** Quits: Lycurgus (~juan@98.4.112.204) (Quit: Exeunt)
[22:57:20] *** Joins: larryv (~larryv@zsh/patchmanager/larryv)
