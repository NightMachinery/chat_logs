[14:27:00] *** Quits: drbobbeaty (~drbob@c-24-14-127-107.hsd1.il.comcast.net) (Ping timeout: 258 seconds)
[15:52:08] *** Joins: drbobbeaty (~drbob@c-24-14-127-107.hsd1.il.comcast.net)
[16:57:19] <demon36[m]> regarding jnr-ffi#30 PR, https://github.com/jnr/jnr-ffi/blob/badc99ee9b242d4e9f559c971526af9afe839e2a/src/main/java/jnr/ffi/provider/jffi/DirectMemoryIO.java#L204
[16:58:11] <demon36[m]> my implementation for the getString() is is doing too frequent native calls per non-single-byte-null string value retrieval
[16:59:10] <demon36[m]> I was thinking of adding a getZeroTerminatedByteArray() variant in jffi that takes null terminator width as an argument, for better performance, because its a bottleneck in my use case
[16:59:19] <demon36[m]> what do you guys think of that ?
[17:54:21] *** Quits: joast (~rick@cpe-98-146-112-4.natnow.res.rr.com) (*.net *.split)
[17:58:39] *** Joins: joast (~rick@cpe-98-146-112-4.natnow.res.rr.com)
[19:38:30] <headius> demon36 hello! Yes that seems reasonable. Would this go into the native library?
[19:40:12] <demon36[m]> headius assuming you mean jffi project, yes
[19:41:13] <demon36[m]> also do you think its better change the function getZeroTerminatedByteArray directly or create another override ?
[19:42:05] <headius> Probably another override
[19:43:09] <headius> This big issue though is getting new native builds. We have not modified the native code for many years because we do not have a way to rebuild it on several exotic platforms
[19:45:36] <demon36[m]> build process is very straightforward though, u might just leave that to the library user
[19:46:28] <demon36[m]> its good enough that you already provided prebuilt binaries for major platforms
[19:46:32] <demon36[m]> its good enough that you already provide prebuilt binaries for major platforms
[20:09:47] <headius> That is what we have done, perhaps we will be able to rely on this who have built in the past
[20:10:04] <headius> We have had many improvements on hold because of this
[20:11:38] <demon36[m]> good luck with that
[20:12:10] <demon36[m]> it appears now that I will have to override putZeroTerminatedByteArray too, in addition to checked variants
[20:13:48] <headius> Just so I fully understand...this needs native changes because it is too costly to look for the terminator before also reading the bytes
[20:14:34] <demon36[m]> yes exactly
[20:14:52] <headius> Ok
