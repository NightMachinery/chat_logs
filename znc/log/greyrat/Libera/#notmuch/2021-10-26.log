[00:00:06] *** Quits: jao (~jao@37.120.199.42) (Remote host closed the connection)
[00:08:02] <bremner> and there I was so proud for getting the search working again :P
[00:13:02] *** Quits: hendursaga (~weechat@user/hendursaga) (Remote host closed the connection)
[00:13:26] *** Joins: hendursaga (~weechat@user/hendursaga)
[00:21:40] <bremner> hrm. at least locally I see something unrelated to that. https://paste.debian.net/1216866/
[00:25:15] *** Quits: opal (~wowaname@gateway/tor-sasl/wowaname) (Ping timeout: 276 seconds)
[00:29:18] *** Joins: jao (~jao@37.120.199.42)
[00:37:14] *** Joins: opal (~wowaname@gateway/tor-sasl/wowaname)
[01:00:24] <adray> does nmweb take patches on notmuch's mailing list (if you haven't fixed the escape issue)
[01:21:31] *** Quits: seschwar (~seschwar@user/seschwar) (Quit: :wq)
[01:46:36] *** Quits: rgrinberg (~textual@ip152-195-159-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:31:40] <bremner> sure, if you have a fix.
[02:32:10] <bremner> there's a branch nmweb, currently against notmuch 31.4
[02:33:23] <bremner> adray: ^
[02:36:09] <adray> awesome, I'll send a patch once I get back to my computer
[02:38:25] <bremner> so the change is just to use html.unescape instead?
[03:27:06] *** Joins: rgrinberg (~textual@ip152-195-159-186.ct.co.cr)
[03:54:41] <adray> ah whoops, should have checked the chat before just sending the patch. it's to use html.escape. i linked the wrong bug earlier
[03:56:14] <bremner> were you able to test your patch?
[04:01:16] <adray> admittedly, my enthusiasm got a head of me and I just followed the migration path from the docs. let me rectify my mistake (and also figure out what dependencies are needed)
[04:03:00] <bremner> I'm still seeing a NullPointerError from inside the template
[04:03:08] <bremner> (with your patch applied)
[04:05:13] <adray> ah, i don't think my patch would resolve that
[04:07:38] <adray> the frontend is emitting the error "module 'cgi' has no attribute 'escape'" when I try to view any mail
[04:21:48] <adray> so following your stack trace, it's emitting an NPE when there's no subject. since rfc 5322 says a subject isn't required, should there be fall back?
[04:23:04] <bremner> well, it's weirder than that. The subject is fine, it's actually getting a null pointer when trying to retrieve 'to'
[04:23:34] <bremner> https://paste.debian.net/1216884/
[04:24:01] <adray> is the header look-up case sensitive?
[04:24:01] <bremner> there's a simple test program. It's in the new python bindings because I thought the issue might be with the old ones, but I get the same problem there
[04:24:39] <bremner> no, 'To' and 'to' both segfault in python.
[04:25:07] <bremner> maybe it's just my system. Can you try my test program?
[04:25:20] <bremner> here's a C version, which works fine: https://paste.debian.net/1216885/
[04:26:00] <adray> any advice to getting a test DB setup?
[04:26:27] <adray> wait, what am i saying. it's my email haha
[04:26:28] <bremner> well, it's read_only, so I just run it my live data. But of course you have to trust the code.
[04:26:44] <bremner> Oh, I see. Yes, you have that message :)
[04:28:50] <adray> C works fine. Python is broken
[04:29:01] <adray> and I'm not just talking about the language itself :P
[04:29:20] <bremner> heh. Well, let my try my test program in the old python bindings.
[04:32:16] <bremner> yeah, that is pretty weird. I'm getting the same error either way.
[04:36:02] <adray> i can't get the cc header either
[04:37:06] <bremner> yeah, anything but from, subject, message-id and date(?) will have to go parse the file, which is apparently what is triggering the error
[04:37:33] <bremner> but I feel like the alot people would have complained if this never worked.
[04:37:43] <bremner> Maybe they just parse the file themselves
[04:40:48] <bremner> sure enough, the error on the server is the one you mentioned. So, let me pull back from the rabbit hole for a sec and try your patch
[04:43:10] <bremner> and it works!
[04:43:42] <bremner> must be related to notmuch version or python version
[04:54:10] <adray> i just tested notmuch and notmuch2 bindings on Python 3.7, 3.8, and 3.9 without success
[04:54:28] <bremner> yeah, I think it's a regression in notmuch.
[04:55:15] <bremner> both work for me in 0.31.4
[04:57:36] <adray> time to break out the git bisect
[04:58:34] <bremner> yep.
[05:09:25] *** Quits: jao (~jao@37.120.199.42) (Ping timeout: 260 seconds)
[05:11:27] *** Joins: jao (~jao@45.152.183.53)
[05:18:37] <bremner> I wonder if it is an issue with split database and mail setup.
[05:19:05] <bremner> adray: are you using a split setup, or the traditional $MAIL/.notmuch?
[05:19:34] <bremner> hmm. I can test this.
[05:20:50] <adray> split mail. just swapped back and it worked
[05:21:20] <bremner> well, that is it least not spooky, just a bug that needs to be fixed.
[05:23:41] <adray> it's still pretty spooky if you have entomophobia
[05:24:15] <bremner> TIL what fear of bugs is called in fancy talk
[05:24:56] <adray> don't worry, i just googled it haha
[05:32:26] *** Quits: nyah (~nyah@bcdcb6e3.skybroadband.com) (Quit: leaving)
[05:40:13] *** Quits: pabs3 (~pabs3@user/pabs3) (Remote host closed the connection)
[05:44:32] *** Joins: pabs3 (~pabs3@user/pabs3)
[06:11:50] *** Quits: andi- (~andi-@user/andi-) (Ping timeout: 260 seconds)
[06:19:55] *** Joins: andi- (~andi-@user/andi-)
[06:49:35] *** Quits: opal (~wowaname@gateway/tor-sasl/wowaname) (Quit: i'm never coming back)
[06:55:08] *** Joins: opal (~wowaname@gateway/tor-sasl/wowaname)
[07:09:52] *** Quits: opal (~wowaname@gateway/tor-sasl/wowaname) (Quit: i'm never coming back)
[07:10:57] *** Quits: jao (~jao@45.152.183.53) (Remote host closed the connection)
[07:12:00] *** Joins: jao (~jao@45.152.183.53)
[07:13:51] *** Quits: jao (~jao@45.152.183.53) (Remote host closed the connection)
[07:17:37] *** Joins: jao (~jao@45.152.183.53)
[07:29:47] *** Quits: jao (~jao@45.152.183.53) (Ping timeout: 264 seconds)
[07:31:46] *** Joins: jao (~jao@45.152.183.62)
[07:55:50] *** Joins: opal (~wowaname@gateway/tor-sasl/wowaname)
[08:33:21] *** Quits: gast0n (~g4570n@user/gast0n) (Quit: Bye, see you soon! ðŸ‘‹)
[09:00:26] *** Joins: kzak (~kzak@nat-37.starnet.cz)
[09:42:46] *** Quits: rgrinberg (~textual@ip152-195-159-186.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[09:56:53] *** Joins: kenran (~kenran@b2b-37-24-119-190.unitymedia.biz)
[09:58:07] *** Quits: jao (~jao@45.152.183.62) (Ping timeout: 260 seconds)
[10:04:20] *** Parts: kenran (~kenran@b2b-37-24-119-190.unitymedia.biz) (WeeChat info:version)
[10:06:24] *** Quits: mala (~mala@user/malaclyps) (Read error: Connection reset by peer)
[10:08:39] *** Joins: mala (~mala@user/malaclyps)
[10:38:14] *** Quits: ixqqwx_ (~ixqqwx@dyn-198-189-dsl.vsp.fi) (Quit: ZNC 1.8.2 - https://znc.in)
[10:38:47] *** Joins: ixqqwx (~ixqqwx@dyn-198-189-dsl.vsp.fi)
[11:35:49] *** Joins: hendursa1 (~weechat@user/hendursaga)
[11:38:39] *** Quits: hendursaga (~weechat@user/hendursaga) (Ping timeout: 276 seconds)
[12:48:31] *** Quits: hendursa1 (~weechat@user/hendursaga) (Remote host closed the connection)
[12:52:56] *** Joins: hendursa1 (~weechat@user/hendursaga)
[14:02:19] *** Quits: thing (~thing@user/thing) (Remote host closed the connection)
[14:02:44] *** Joins: thing (~thing@user/thing)
[16:00:55] *** Joins: gast0n (~g4570n@user/gast0n)
[16:43:52] *** Quits: opal (~wowaname@gateway/tor-sasl/wowaname) (Remote host closed the connection)
[16:44:30] *** Joins: opal (~wowaname@gateway/tor-sasl/wowaname)
[17:13:40] *** Quits: thing (~thing@user/thing) (Remote host closed the connection)
[17:14:11] *** Joins: thing (~thing@user/thing)
[17:23:08] *** Joins: jao (~jao@89.45.90.66)
[18:23:56] *** Joins: nyah (~nyah@bcdcb6e3.skybroadband.com)
[18:24:57] *** Quits: hendursa1 (~weechat@user/hendursaga) (Quit: hendursa1)
[18:25:28] *** Joins: hendursaga (~weechat@user/hendursaga)
[18:44:08] *** Quits: yeled (~yeled@host-79-77-55-168.static.as9105.com) (Quit: WeeChat 3.3)
[19:07:14] *** Quits: jao (~jao@89.45.90.66) (Ping timeout: 260 seconds)
[19:09:08] *** Joins: jao (~jao@cpc103048-sgyl39-2-0-cust502.18-2.cable.virginm.net)
[19:17:33] *** Joins: seschwar (~seschwar@user/seschwar)
[19:21:59] *** Joins: yeled (~yeled@host-79-77-55-168.static.as9105.com)
[20:01:03] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 260 seconds)
[20:19:29] *** Joins: nlhowell1 (~nlhowell@149.160.189.211)
[20:35:36] *** Joins: rgrinberg (~textual@ip11-246-50-179.ct.co.cr)
[22:18:36] *** Quits: rgrinberg (~textual@ip11-246-50-179.ct.co.cr) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
