[00:03:49] *** Joins: thiras (~thiras@user/thiras)
[00:04:40] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[00:05:44] <s17> https://docs.docker.com/config/containers/resource_constraints/#gpu
[00:10:48] *** Joins: Enitin (~Enitin@82.102.22.84)
[00:12:56] *** feygit is now known as cheets
[00:21:29] *** Quits: aead (~aead@ec2-52-2-178-231.compute-1.amazonaws.com) (Ping timeout: 248 seconds)
[00:21:59] *** Joins: alzgh (~alzgh@user/alzgh)
[00:23:26] *** Joins: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net)
[00:23:46] <alzgh> hello, I'm on an Ubuntu focal. I have docker installed. Normally I don't have any problems connecting to the internet from inside my containers. When I run my vpn though, containers can't connect to the internet anymore. I setup and run the container after the vpn setup.
[00:25:15] <alzgh> Any hints what it could be?
[00:29:23] <tabakhase> alzgh define "your vpn"
[00:29:49] <tabakhase> (and note that "making container use that vpn to reach the internet" is a whole seperate deal...)
[00:32:16] <alzgh> Do you want me to name the vpn, or tell what it exactly does?
[00:32:42] <alzgh> Because I don't know exactly the configurations it makes.
[00:33:33] <alzgh> tabakhase
[00:34:44] <tabakhase> how about both? :D - but ye no care whats on the other end, but whats on your end technically running
[00:34:58] *** Joins: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[00:35:10] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 240 seconds)
[00:38:34] <alzgh> can I dm you tabakhase ?
[00:39:24] <tabakhase> rather not, 380 people in here who are more likely to actually know your answer than i do ;-) - so not having to repeat yourself 15times then is pretty prime
[00:39:38] <alzgh> yeah, sure
[00:40:09] <alzgh> It's the RiseUp vpn. I don't know exactly what it does on my end though.
[00:40:37] <alzgh> My understanding is that docker creates a bridge network with the adapter on the host that's connected to the internet.
[00:40:58] <alzgh> Then it sets up NAT for the containers that I run and gives them dynamic IPs.
[00:41:20] <alzgh> Now that I spelled it out, I think maybe after starting the VPN, I need to restard the docker deamon.
[00:41:39] <alzgh> Because it has its network bridge with the none-vpn adapter on the host.
[00:41:57] <alzgh> tabakhase: what do you think?
[00:42:45] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[00:43:26] <tabakhase> apears as if they only offer there "own vpn application?" - so that seems a little like a lost cause :|
[00:44:08] <alzgh> restarting didn't help.
[00:44:13] <tabakhase> restarting dockerD is certainly worth a try... but if that takes it rly depends what "they" do to your routing... - docker sets up sNAT on your host using iptables normally...
[00:44:40] <tabakhase> could try mangeling with those..
[00:45:06] *** Quits: Haxxa (~Haxxa@122.199.46.17) (Quit: Haxxa flies away.)
[00:46:40] *** Quits: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[00:47:58] *** Joins: Haxxa (~Haxxa@122.199.46.17)
[00:48:46] *** Joins: aead (~aead@ec2-52-2-178-231.compute-1.amazonaws.com)
[01:09:47] <Lutin> tabakhase drunk yet ?
[01:09:47] *** Quits: luc4 (~manjaro-u@host-95-233-7-147.retail.telecomitalia.it) (Quit: Konversation terminated!)
[01:11:14] <tabakhase> pls stop @ing people for nonsense, this is not facebook...
[01:12:58] *** Quits: aead (~aead@ec2-52-2-178-231.compute-1.amazonaws.com) (Ping timeout: 258 seconds)
[01:15:05] *** Joins: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net)
[01:22:25] *** ChanServ sets mode: +b *!*@user/lutin
[01:22:25] *** Lutin was kicked by ChanServ (Banned: Please stay on topic. Do not mention people with off topic noise.)
[01:24:25] *** Quits: coc0nut (~coc0nut@user/coc0nut) (Ping timeout: 248 seconds)
[01:32:58] *** Joins: luvalon12 (~luva@178.239.173.200)
[01:34:16] *** Quits: luvalon1 (~luva@178.239.167.170) (Ping timeout: 268 seconds)
[01:34:16] *** luvalon12 is now known as luvalon1
[01:41:56] *** Quits: cheets (sid201914@user/daftmonk) (Quit: Updating details, brb)
[01:42:04] *** Joins: cheets (sid201914@user/daftmonk)
[01:50:37] *** Quits: luvalon1 (~luva@178.239.173.200) (Quit: Byebye)
[01:50:53] *** Joins: luvalon1 (~luva@178.239.173.200)
[01:53:14] *** Joins: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net)
[01:55:26] *** Joins: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch)
[02:04:26] *** Joins: mr4braham (~mr_4braha@154.3.251.133)
[02:11:28] *** Quits: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch) ()
[02:12:42] *** Joins: coc0nut (~coc0nut@user/coc0nut)
[02:18:16] *** Joins: Brainium (~brainium@user/brainium)
[02:20:31] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[02:20:55] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Quit: rewrit3)
[02:21:10] *** Joins: Enitin (~Enitin@82.102.22.84)
[02:26:53] *** Quits: AlwaysLivid (~panos@tenacity/contributor/AlwaysLivid) (Ping timeout: 244 seconds)
[02:33:43] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[02:34:16] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[02:39:05] *** Quits: Ballerburg9005 (~ICH@dslb-002-204-002-034.002.204.pools.vodafone-ip.de) (Ping timeout: 248 seconds)
[02:41:40] *** Quits: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net) (Ping timeout: 240 seconds)
[02:49:54] *** Quits: Zelec267 (~Zelec@135-23-82-85.cpe.pppoe.ca) (Quit: Ping timeout (120 seconds))
[03:07:10] *** Quits: lowcrash (~admin@84-255-205-230.static.t-2.net) (Ping timeout: 240 seconds)
[03:09:09] *** Quits: NeoCron (~NeoCron@p200300c4cf4a8400dde9c021b1b0ad3f.dip0.t-ipconnect.de) (Remote host closed the connection)
[03:10:03] *** Joins: Zelec267 (~Zelec@135-23-82-85.cpe.pppoe.ca)
[03:10:20] *** Quits: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net) (Read error: Connection reset by peer)
[03:10:36] *** Joins: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net)
[03:17:43] *** Quits: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net) (Ping timeout: 252 seconds)
[03:26:11] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[03:26:30] *** Joins: mickey (~user@user/mickey)
[03:31:24] *** Joins: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net)
[03:38:48] *** Joins: mickey5 (~user@user/mickey)
[03:39:26] *** Quits: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net) (Ping timeout: 268 seconds)
[03:40:46] *** Quits: mickey (~user@user/mickey) (Ping timeout: 244 seconds)
[03:40:47] *** mickey5 is now known as mickey
[03:40:50] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[03:44:26] *** Quits: alzgh (~alzgh@user/alzgh) (Quit: WeeChat 2.8)
[03:57:54] *** Quits: aminvakil (~aminvakil@2a01:4f8:120:336b:4::1) (Quit: The Lounge - https://thelounge.chat)
[04:01:57] *** Joins: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net)
[04:04:02] *** Joins: aminvakil (~aminvakil@2a01:4f8:120:336b:4::1)
[04:04:02] *** Quits: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net) (Read error: Connection reset by peer)
[04:11:04] *** Quits: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 252 seconds)
[04:35:17] *** Quits: BSaboia (~bsaboia@188-178-217-166-cable.dk.customer.tdc.net) (Quit: Leaving)
[04:48:48] *** Joins: mickey7 (~user@user/mickey)
[04:49:24] *** Quits: brachamh (~brachamh@user/brachamh) (Quit: Oops, I'll be back.)
[04:49:24] *** brachamh_ is now known as brachamh
[04:50:31] *** Quits: mickey (~user@user/mickey) (Ping timeout: 244 seconds)
[04:50:32] *** mickey7 is now known as mickey
[05:08:13] *** Quits: gschanuel7 (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[05:08:35] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[05:17:15] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[05:18:02] <pycurious> I want to run "who" inside the docker container so that I get who is logged on to the host - how do i do that?
[05:24:56] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Quit: The Lounge - https://thelounge.chat)
[05:25:31] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 268 seconds)
[05:27:32] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[05:28:15] <tabakhase> pycurious not? usecase?
[05:30:26] <pycurious> tabakhase: I need to make sure that the docker image is not killed if someone is sshed into the host machine
[05:30:32] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:32:04] <tabakhase> hm that still doesnt make much sense ;D (and not like you could do anything against it anyhow...)
[05:33:36] <tabakhase> or do you mean like "not stop itself while someone is on"? (cause say, hiss ession would drop or such)?
[05:34:16] <tabakhase> then the clostest may be "via docker" (opposed to in) - if your container has a way to talk to dockerd you can use smth like `docker run -it --rm --privileged --pid=host debian nsenter -t 1 -m -u -n -i who` i guess...
[05:34:38] *** Joins: vlm (~vlm@user/vlm)
[05:34:51] <pycurious> "not stop itself while someone is on" - exactly
[05:35:13] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[05:35:20] <pycurious> tabakhase: so docker command runs inside the container? 
[05:35:43] <pycurious> I'm inside the docker container - and want to know if someone is logged in into the host - if yes, I do not want to kill myself. 
[05:36:18] *** Joins: securethemews (~securethe@2001:470:69fc:105::9b6d)
[05:36:24] <tabakhase> the "docker" command in the container - but it needs to talk to the hosts daemon (via mounted .sock or tcp/ip) - that new container then uses nsenter to "break back out from the container" you could say
[05:37:16] <tabakhase> may also be worth hitting up #linux about what "who" reads / where that info comes from... maybe there is some magic file in /proc/ that you could bindmount into your service...
[05:38:03] <pycurious> tabakhase: Thanks
[05:40:14] <tabakhase> pycurious "last" (opposed to who) for example uses just /var/log/wtmp i think - afaik that also mentions if a session is still active
[05:42:17] <tabakhase> some distros also have a "users" command - that can take the path to /var/run/utmp or /var/log/wtmp as argument
[05:43:10] <pycurious> tabakhase: Ubuntu ises /var/run/utmp - I can try to mount it inside the container?
[05:43:27] <pycurious> tabakhase: bad idea? 
[05:45:22] <tabakhase> docker run --rm -v /var/run/utmp:/host/var/run/utmp ubuntu users /host/var/run/utmp
[05:45:24] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Quit: The Lounge - https://thelounge.chat)
[05:45:29] <tabakhase> does that give reasonable data?
[05:45:36] <tabakhase> then seems like the cleanest
[05:47:33] <pycurious> thanks! 
[05:48:23] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[05:49:41] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Quit: Atum_)
[05:50:44] *** Quits: BobbyJr (~BobbyJr@38.142.116.242) (Ping timeout: 272 seconds)
[05:53:52] <pycurious> I've a docker image that i just build which has a user that logs in by default. Now I want to use that image as base image and when i run apt update, I get a - E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied) - how do i resolve this? 
[05:55:05] <pycurious> USER root :)
[05:55:07] <pycurious> Thanks
[05:56:35] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[05:57:23] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[06:01:45] <programmerq> pycurious the main purpose of the container is to isolate it from the host. It seems like you want to undo some of that isolation. It seems like a contrived solution-- what's the actual problem that is coming up?
[06:09:52] *** Quits: molt (~molt@79.140.150.21) (Ping timeout: 252 seconds)
[06:12:53] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[06:14:56] *** Quits: alicef_ (~none@gentoo/developer/alicef) (Quit: install gentoo)
[06:29:09] <pycurious> programmerq: We shutdown our containers when not in use. The containers detect that there is no activity and shut down. But - sometimes users are ssed into the host - in that case we dont want to shut down the container.
[06:31:43] <programmerq> Normally, a process on the host will control containers by talking to dockerd. It seems a bit backwards to implement this logic inside the container. Have all the scheduling decisions be made on the host and actually use the docker api to stop the container.
[06:33:48] <pycurious> tabakhase: docker run --rm -v /var/run/utmp:/host/var/run/utmp ubuntu users /host/var/run/utmp —— this does not seem to work - perhaps some syntax issue?
[06:34:10] <tabakhase> i guess "what this containert actually does" would answer some of those Q´s :P
[06:34:18] <tabakhase> pycurious what error does it spit?
[06:34:36] <eletrotupi> hm, is my assumption correct that k8s would be a tool to manage multiple separated projects (which are on docker-compose itself) and make them talk to each other? 
[06:35:47] *** Joins: alicef (~none@gentoo/developer/alicef)
[06:36:19] <pycurious> eletrotupi: have you looked at nomad? k8s looks too complicated at this point
[06:36:38] <eletrotupi> yeah
[06:36:50] <pycurious> tabakhase: docker run -v /var/run/utmp:/host/var/run/utmp -it --rm myimage —> who does not work in here?
[06:37:05] <eletrotupi> but I'm still understanding where does nomad/k8s/swarm fit into the ecosystem
[06:37:56] <pycurious> tabakhase: docker run -v /var/run/utmp:/host/var/run/utmp -it --rm myimage ——> That does not work either
[06:38:13] <tabakhase> pycurious well no clue what data "who" reads from - hence my demo using the "users" command (wich can take the filepath as arg so the whole "throwing it into /host dir" works)
[06:38:19] <pycurious> eletrotupi: they can do a lot of things. But for starters they can do autoscaling for you?
[06:38:33] <tabakhase> and "doesnt work" without info what it actually spits at you is a no-fix :P
[06:39:04] <pycurious> tabakhase: I'm trying to run "who" inside the container - with no output
[06:39:39] <pycurious> tried users as well
[06:40:36] <tabakhase> inc the path..? - best be to throw that all in a nopaste...
[06:40:38] <pycurious> tabakhase: I'm trying to run my image, mount /var/run/utmp - and then trying to see if "who" will give the correct output - or users - neither give any output.
[06:40:49] <pycurious> tabakhase: creating paste
[06:41:05] <tabakhase> cause it certainly seemed to work here https://i.imgur.com/FLUVNWH.png
[06:41:35] <programmerq> eletrotupi▸ kubernetes is a pluggable container orchestration and state reconciliation platform. docker's build in swarm mode shares a lot in common with the k8s design, but k8s has the market share and many more features. The compose project started out as a way to specify what containers you want declaritively. You can take a compose file and deploy it as regular docker containers, swarm
[06:41:37] <programmerq> services, or k8s resources (there are a few compatibility type interfaces here)
[06:42:06] <pycurious> tabakhase: https://paste.ubuntu.com/p/VvG9MMn5xS/
[06:43:02] <tabakhase> pycurious youre missing the path behind "users" - without it it reads the containers /var/run/utmp, not the custom-bindmounted /host/var/run/utmp
[06:43:19] <tabakhase> mangling that on the same path is asking for other trouble...
[06:43:21] <eletrotupi> right
[06:44:26] <tabakhase> in a way that should prob work too.... but i can also see that this could screw smth up ;D - so pls try with the extra /host step in there
[06:45:17] <eletrotupi> we're in a situation where we have the main app running on linode, newer apps being deployed unto ec2 as containers, essencially we're getting into a stage where manually connecting and managing everything for *development* is getting out of hand
[06:45:31] <eletrotupi> that's why I started to lookup for k8s
[06:45:37] *** Quits: endigma (~endigma@134.41.133.214) (Quit: The Lounge - https://thelounge.chat)
[06:45:56] <eletrotupi> nomad seemed to directed towards deploying that bunch of stuff
[06:46:32] <eletrotupi> but I'm still getting the bigger picture
[06:46:51] <tabakhase> pycurious https://i.imgur.com/YIHewWg.png
[06:47:21] <tabakhase> guess "without arguments" users still uses smth else... see 2 vs 3
[06:47:57] <tabakhase> but forcing it to use that file works regardles of path used, you just have to force the path ... strange but if it works *shrug*
[06:48:05] <eletrotupi> btw, shout out to digital ocean's community articles
[06:48:15] <eletrotupi> they have some very good stuff there
[06:49:55] <pycurious> tabakhase: users worked, thanks!
[06:50:39] *** Joins: endigma (~endigma@134.41.133.214)
[06:53:23] *** Quits: endigma (~endigma@134.41.133.214) (Client Quit)
[06:54:15] *** Joins: endigma (~endigma@134.41.133.214)
[06:54:19] *** Quits: mr4braham (~mr_4braha@154.3.251.133) (Ping timeout: 268 seconds)
[07:06:58] *** Quits: endigma (~endigma@134.41.133.214) (Quit: The Lounge - https://thelounge.chat)
[07:07:52] *** Joins: endigma (~endigma@134.41.133.214)
[07:08:14] *** Quits: foka (~foka@162.208.172.172) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[07:10:34] *** Joins: foka (~foka@162.208.172.172)
[07:27:52] *** Quits: FunnyLookinHat (~FunnyLook@64.184.172.137) (Remote host closed the connection)
[07:30:00] *** Quits: pfeilmann (~pfeilmann@c3po.mahr.pw) (Quit: The Lounge - https://thelounge.chat)
[07:30:27] *** Joins: pfeilmann (~pfeilmann@c3po.mahr.pw)
[07:40:14] *** Joins: djapo (~archangel@user/djapo)
[08:03:37] *** Joins: BobbyJr (~BobbyJr@38.142.116.242)
[08:05:51] *** Quits: c10l (~c10l@89.34.167.207) (Read error: Connection reset by peer)
[08:06:35] *** Joins: c10l (~c10l@89.34.167.207)
[08:12:49] *** Joins: oxum (~oxum@122.172.205.112)
[08:14:47] *** Quits: oxum (~oxum@122.172.205.112) (Remote host closed the connection)
[08:16:24] *** Joins: daMaestro (~damaestro@fedora/daMaestro)
[08:27:34] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[08:27:47] *** Joins: gschanuel1 (~gschanuel@user/gschanuel)
[08:28:25] *** Quits: Brainium (~brainium@user/brainium) (Quit: Konversation terminated!)
[08:36:40] *** Joins: kikijiki (~Thunderbi@user/kikijiki)
[08:37:20] *** Quits: catbehemoth (~vasyl@174.89.2.49) (Quit: WeeChat 3.2)
[08:40:00] *** Quits: daMaestro (~damaestro@fedora/daMaestro) (Quit: Leaving)
[08:48:49] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 252 seconds)
[08:49:13] *** Quits: phalanx (~thelounge@user/phalanx) (Ping timeout: 248 seconds)
[08:49:26] *** Joins: phalanx (~thelounge@user/phalanx)
[09:01:40] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 240 seconds)
[09:03:39] *** Joins: bouncy (~ben@user/benoit)
[09:06:34] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[09:06:57] *** Joins: flynn (~mcbloch@user/flynn)
[09:08:29] *** Joins: foresto (~foresto@user/foresto)
[09:15:10] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Quit: The Lounge - https://thelounge.chat)
[09:17:56] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[09:18:16] *** Joins: mickey (~user@user/mickey)
[09:18:26] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[09:21:37] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Client Quit)
[09:23:44] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[09:37:41] *** Quits: pycurious (~Adium@user/pycurious) (Quit: Leaving.)
[09:38:00] *** Joins: pycurious (~Adium@user/pycurious)
[09:38:00] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Remote host closed the connection)
[09:38:10] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[09:44:55] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 252 seconds)
[09:51:49] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Quit: ciao bella)
[09:57:23] *** Quits: foresto (~foresto@user/foresto) (Quit: Leaving)
[09:57:52] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[09:58:08] *** Joins: tkob (tkob@user/thekingofbandit)
[09:58:23] *** Joins: pycurious (~Adium@user/pycurious)
[09:58:35] *** Joins: manin (~X@185.242.190.95)
[09:59:03] *** Quits: ablutor (~quassel@wasscher.com) (Quit: going for vitamine d)
[10:00:01] *** Joins: ablutor (~quassel@wasscher.com)
[10:03:00] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[10:03:47] *** Quits: ablutor (~quassel@wasscher.com) (Client Quit)
[10:04:44] *** Joins: ablutor (~quassel@wasscher.com)
[10:05:54] *** Joins: lowcrash (~admin@84-255-205-230.static.t-2.net)
[10:08:34] *** Quits: manin (~X@185.242.190.95) (Ping timeout: 268 seconds)
[10:09:36] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[10:14:14] *** Joins: manin (~X@185.242.190.95)
[10:25:52] *** Quits: RV (~RV@lfbn-nic-1-430-119.w90-116.abo.wanadoo.fr) (Ping timeout: 245 seconds)
[10:33:51] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[10:35:11] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[11:27:13] *** Joins: thc202 (~thc202@user/thc202)
[11:37:11] *** Joins: RV (~RV@92.173.180.89)
[11:42:56] *** Joins: onizu (uid373383@id-373383.highgate.irccloud.com)
[11:54:01] *** Quits: GeorgeK (~GeorgeK@cpe-70-92-5-228.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[12:25:55] *** Joins: no_gravity (~no_gravit@user/no-gravity/x-5639427)
[12:26:10] <no_gravity> When mysql in a docker container fails to start, how do you find out why?
[12:26:46] <geirha> check the logs
[12:26:57] <no_gravity> geirha: How?
[12:28:29] <geirha> docker logs container_id_or_name
[12:28:40] <no_gravity> That just outputs the same I see in the terminal.
[12:29:02] <no_gravity> Which is: "Starting MariaDB database server: mysqld . . . . . . . . . . . . . . . . [FAIL . . . . . . . . . . . failed!"
[12:31:47] <geirha> ok, then override the command to start an interactive shell instead. Then you can try to run it manually, then look for logs in /var/logs or wherever
[12:32:07] <geirha> docker run --rm -it mariadb-img-thing bash
[12:32:26] <no_gravity> I *am* in an interactive shell.
[12:32:40] <no_gravity> I get that output when I do "service mysql start"
[12:33:24] <geirha> Try running it directly. mysqld
[12:33:48] <no_gravity> That gives me this: 2021-08-19 10:03:33 0 [Note] mysqld (mysqld 10.3.29-MariaDB-0+deb10u1) starting as process 518 ...
[12:34:19] <geirha> so it works..?
[12:34:28] <no_gravity> No, there is no mysql server running afterwards.
[12:34:49] <geirha> look through /var/log for hints then
[12:35:43] <no_gravity> Ha, there is something in /var/log/mysql/error.log now. It was not when I tried it via "service mysql start":
[12:35:54] <no_gravity> "[ERROR] Fatal error: Can't open and lock privilege tables: 'mysql.user' is not of type 'TABLE'"
[12:36:43] <no_gravity> Did "service mysql start" somehow prevent that line from going into the error log?
[12:45:40] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 240 seconds)
[12:47:01] *** Quits: phalanx (~thelounge@user/phalanx) (Quit: The Lounge - https://thelounge.chat)
[12:50:06] *** Quits: Proxysna (~Proxysna@62.119.254.142) (Remote host closed the connection)
[12:54:58] *** Joins: TomTom (uid45892@id-45892.charlton.irccloud.com)
[12:57:21] *** Joins: pycurious (~Adium@user/pycurious)
[13:01:32] *** Joins: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it)
[13:01:49] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 252 seconds)
[13:02:39] *** Quits: securethemews (~securethe@2001:470:69fc:105::9b6d) (Quit: Bridge terminating on SIGTERM)
[13:03:58] *** Joins: phalanx (~thelounge@user/phalanx)
[13:05:55] *** Joins: securethemews (~securethe@2001:470:69fc:105::9b6d)
[13:06:02] *** Joins: wibe (~wibe@213.159.81.4)
[13:06:54] <wibe> hi all, i try to run vscode in a docker container forwarding xdisplay to it
[13:06:59] <wibe> heres the dockerfile
[13:07:01] <wibe> https://termbin.com/eunb
[13:07:52] <wibe> the problem is i cant get vscode to run after setting it up. running "code --verbose --no-sandbox --user-data-dir /home/user ." does nothing
[13:08:15] <wibe> if i add USER user before the entrypoint or not does not make a difference
[13:08:34] <wibe> or adding "terminal.integrated.inheritEnv": false to settings.json
[13:09:28] <wibe> vscode does not even display an error message or provide a log... it just closes 
[13:10:02] <geirha> no_gravity: no idea. Wouldn't expect service to do anything useful in a container
[13:10:16] <no_gravity> wibe: How do you "forward xdisplay"?
[13:10:57] <no_gravity> geirha: Interesting. (I got it running again by the way)
[13:10:59] <wibe> i run the container with "-v /tmp/.X11-linux:/tmp/.X11-linux -e DISPLAY=${DISPLAY}"
[13:11:08] <wibe> no_gravity
[13:11:55] <wibe> if i change the display variable it prompts an error, which indicates it cant find the correct display
[13:12:07] <no_gravity> wibe: Can you start other graphical programs?
[13:12:24] <wibe> yes
[13:12:28] <wibe> on other containers it works
[13:12:34] <wibe> firefox for example
[13:12:47] <no_gravity> wibe: I see. I also run Firefox in a container sometimes. Then I also forward .Xauthority.
[13:12:53] <geirha> containers inside containers just seem like an unecessary complication to me. The container should only run one thing, not multiple services
[13:13:09] <no_gravity> geirha: containers in containers?
[13:13:52] <geirha> service mysql start will try to start it with systemd right? systemd will containerize it
[13:14:22] <wibe> no_gravity: it tried it with the privileged flag
[13:14:25] <no_gravity> geirha: Interesting. I might replace "service mysqld start" with "mysqld &" then.
[13:14:35] <wibe> it should need to xauth
[13:14:37] <geirha> you mean mysqld without &
[13:14:42] <geirha> you want to run it in the foreground
[13:14:47] <no_gravity> geirha: Then it blocks.
[13:14:54] <geirha> yes, which it should
[13:15:04] <no_gravity> geirha: My start script needs to do more stuff.
[13:15:04] <wibe> s/it should need to xauth/it should need no xauth/
[13:15:14] <geirha> no_gravity: that's what the entrypoint is for
[13:15:36] <no_gravity> geirha: The start script is the entry point.
[13:16:20] <no_gravity> geirha: I am using docker as a fast VM. I do not containerize services.
[13:22:55] *** Quits: no_gravity (~no_gravit@user/no-gravity/x-5639427) (Quit: leaving)
[13:28:42] *** Joins: RougeR (~rougex250@user/rouger)
[13:28:44] *** Quits: RougeR (~rougex250@user/rouger) (Remote host closed the connection)
[13:31:19] *** Joins: pycurious (~Adium@user/pycurious)
[13:35:40] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 240 seconds)
[13:45:02] *** Parts: securethemews_ (~securethe@2a00:23c4:1e9b:7b00::1) (Leaving)
[13:45:13] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 248 seconds)
[13:45:36] *** Joins: lemonzest (~lemonzest@user/lemonzest)
[13:47:25] *** Joins: bouncy (~ben@user/benoit)
[13:48:46] <zitter> Good morning, what's best practice to manage development and production docker-compose.yml files? I can't find any tutorial on the web. I image that I have to omit all builds and volume bindinds, right? Apart from https://docs.docker.com/compose/production/ is there anything on the net on this topic?
[13:48:57] *** Joins: pycurious (~Adium@user/pycurious)
[13:53:13] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 248 seconds)
[13:53:45] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Ping timeout: 248 seconds)
[14:05:09] *** Joins: pycurious (~Adium@user/pycurious)
[14:05:54] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[14:09:10] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 240 seconds)
[14:13:11] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[14:17:43] *** Quits: c10l (~c10l@89.34.167.207) (Ping timeout: 252 seconds)
[14:18:23] *** Joins: vidbina (~vid@dynamic-046-114-039-136.46.114.pool.telefonica.de)
[14:19:59] *** Joins: Proxysna (~Proxysna@62.119.254.142)
[14:20:25] <wez> Why do people want to use docker compose in production for?
[14:22:15] *** Joins: pycurious (~Adium@user/pycurious)
[14:26:31] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 252 seconds)
[14:29:13] <njka> docker compose... heh
[14:30:20] <gordonjcp> wez: what else would you use?
[14:30:51] <njka> uhhh.... k8s?
[14:30:54] <wez> Docker swarm, kubernetes, AWS ECS Fargate
[14:30:55] <njka> ( or k3s )
[14:31:04] <njka> AWS ECS
[14:31:19] <wez> njka: Bascailly hosted swarm
[14:31:43] <njka> wez: i know what it is
[14:31:44] <gordonjcp> wez: not sure what people would use swarm in production for
[14:31:44] <njka> :)
[14:31:47] <njka> but thanks
[14:31:51] <wez> njka: oh, so why did you repeat it back to me/
[14:31:56] <gordonjcp> wez: not sure what people would use kubernetes in production for
[14:31:57] <njka> wez: why does your nick look familiar?
[14:32:08] <wez> gordonjcp: Because it is better suited than docker compose?
[14:32:17] <wez> njka: Probably
[14:32:19] <njka> wez: i think we must have been replying to gordonjcp at the same time bro :)
[14:32:25] <gordonjcp> wez: not sure why people would cycle to work when they can just drive a 7.5 tonne truck
[14:32:30] <wez> njka: in an offtopic channel probably :)
[14:32:41] <njka> wez: ahhhh, yes :)
[14:32:48] <njka> wez: no i remember :)
[14:32:59] <wez> ❤️
[14:39:16] <akik> wez: you use docker stack deploy to use compose files in swarm
[14:39:51] <wez> akik: You do?
[14:40:04] <akik> wez: yes
[14:41:00] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[14:41:22] *** Joins: flynn (~mcbloch@user/flynn)
[14:43:50] <zitter> so... any tutorial?
[14:43:51] <zitter> :)
[14:44:19] <akik> zitter: you can use node labels to define where your workloads go to
[14:44:57] <zitter> node labels?
[14:45:22] <zitter> node labels == service names ?
[14:45:37] <akik> zitter: no it's a configuration for the docker node
[14:45:51] <akik> https://docs.docker.com/engine/reference/commandline/node_update/
[14:46:48] <akik> then you can use placement: constraints: in your compose file
[14:47:00] <njka> oh wez... s/no/now # my last comment :)
[14:47:18] <akik> deploy: placement: constraints: thatis
[14:49:50] *** Joins: mjbatty_ (~mjbatty@82.2.17.205)
[14:52:01] *** Joins: pycurious (~Adium@user/pycurious)
[14:56:10] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 240 seconds)
[15:06:56] *** Joins: Ballerburg9005 (~ICH@dslb-002-204-002-034.002.204.pools.vodafone-ip.de)
[15:09:55] *** Joins: pycurious (~Adium@user/pycurious)
[15:10:34] *** Joins: jazzy (~jaziz@2600:380:4548:2564:9586:3cbe:697a:6fd1)
[15:14:22] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 252 seconds)
[15:16:53] *** Quits: codebam (~codebam@user/codebam) (Ping timeout: 268 seconds)
[15:19:40] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[15:25:25] *** Joins: mickey (~user@user/mickey)
[15:32:42] *** Joins: palindrome (~vargasj@51.37.139.160)
[15:42:58] <faceface> akik: nvm, I got it working, thanks again for help
[15:44:27] <faceface> I understand docker-compose up creates a default network. For testing I removed that network and did docker-compose up again, however, I now get an error about 'network <id> not found'.
[15:45:10] <faceface> I guess this makes sense, but docker-compose build doesn't seem to notice that the network is missing, so I'm wondering how to re-create it
[15:46:49] <faceface> I'm doing this test because on my laptop my cwd is called 'lean-demo', and the default network was called 'leandemo_default'. However on the remote server the default network got called 'lean-demo_default'. I'm just wondering if this difference is a docker version thing...
[15:47:55] <faceface> Every time I take a step forward, I realise how much of a noob I am ;-)
[15:48:19] <akik> faceface: i only do it so that i create the network manually and then reference them in compose with external: true
[15:48:35] <akik> faceface: it's much saner to my mind that way
[15:49:35] <faceface> akik: I see, however, I want / need docker-compose to do as much 'work' as I can (so I can hand off easily). I'm going to try adding an explicit netowrk: ... what's-it to the compose.yml
[15:50:35] <faceface> on a side note, how do I get into the slack? It seems to want me to have a specific @docker email
[15:51:24] <faceface> I'm going to "try adding an explicit top-level networks key" ;-)
[15:53:11] *** Joins: c10l (~c10l@89.34.167.207)
[16:00:50] <faceface> Still throwing the error
[16:03:09] *** Quits: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it) (Ping timeout: 268 seconds)
[16:05:28] <faceface> strange... I purged images and containers, and docker-compose up --build worked this time, but it seemingly ignored my networks: key
[16:06:12] <faceface> e.g. I added a labels, but network inspect don't show it
[16:06:51] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 268 seconds)
[16:07:08] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[16:10:26] *** Joins: dasbootmir (~dasbootmi@user/dasbootmir)
[16:12:00] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Ping timeout: 244 seconds)
[16:12:54] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[16:13:04] *** Joins: pycurious (~Adium@user/pycurious)
[16:16:31] *** Quits: dasbootmir (~dasbootmi@user/dasbootmir) (Quit: dasbootmir)
[16:22:16] *** Joins: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it)
[16:28:25] *** Quits: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it) (Ping timeout: 248 seconds)
[16:31:29] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (Ping timeout: 252 seconds)
[16:31:40] *** Quits: vidbina (~vid@dynamic-046-114-039-136.46.114.pool.telefonica.de) (Ping timeout: 240 seconds)
[16:35:21] *** Joins: Crassus (~Crassus@user/crassus)
[16:39:03] *** Joins: vidbina (~vid@x4db72484.dyn.telefonica.de)
[16:42:53] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[16:43:10] *** Quits: derpadmin (~derpadmin@cloudbase2.200013.net) (Ping timeout: 240 seconds)
[16:43:16] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:58:41] *** Quits: Crassus (~Crassus@user/crassus) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:59:26] *** Joins: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it)
[17:04:17] *** Joins: dasbootmir (~dasbootmi@user/dasbootmir)
[17:21:10] *** Quits: vidbina (~vid@x4db72484.dyn.telefonica.de) (Ping timeout: 240 seconds)
[17:36:56] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Remote host closed the connection)
[17:38:16] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[17:40:02] *** Quits: RV (~RV@92.173.180.89) (Ping timeout: 245 seconds)
[17:42:39] *** Joins: vidbina (~vid@x4db72484.dyn.telefonica.de)
[17:45:10] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 240 seconds)
[17:46:27] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[17:47:37] *** Joins: RV (~RV@92.173.180.89)
[17:48:18] *** Joins: thiras (~thiras@user/thiras)
[17:51:10] *** Quits: useful_idiot (~useful_id@154.3.40.202) (Quit: byeeeee)
[17:57:32] *** Joins: dieguezz (~DieguezZ@81.0.5.196)
[18:01:56] *** Quits: jazzy (~jaziz@2600:380:4548:2564:9586:3cbe:697a:6fd1) (Read error: Connection reset by peer)
[18:05:17] <dieguezz> hi, i am trying setup docker compose but i am having trouble. If i use this config http://ix.io/3wph web is built before any other container is up and it fails because it requires the api. I am using the wait-for-it thing. If i remove the web, it works, and running directly the web app build works. But if i run  build from the dockerfile it doesnt. This is the dockerfile http://ix.io/3wpi Any ideas?
[18:06:23] <dieguezz> about my errors, the error i receive is a message saying there has been a timeout, but if i change the endpoint url, i get an econnrefused, so i guess the ip is ok
[18:06:40] *** Quits: Ballerburg9005 (~ICH@dslb-002-204-002-034.002.204.pools.vodafone-ip.de) (Ping timeout: 240 seconds)
[18:08:08] <tabakhase> dieguezz what error from who? 
[18:08:27] <tabakhase> that smells about fine... - mabe youre not callign wait-for-it correctly or so?
[18:08:29] <dieguezz> its a nextjs app, the error is.. just.. warn  - Restarted collecting page data for //[id] because it took more than 60 seconds
[18:08:42] <dieguezz> well / [id] not //[id]
[18:09:20] <dieguezz> so looks like it cannot connect to an ip in another container (that its exposed and works with postman from my local) 
[18:11:10] <dieguezz> its not about wait for it because now, i commented the web in docker-compose, started it up, and ran the web dockerfile separately. all other containers were up before trying to launch the web dockerfile
[18:12:02] <tabakhase> missing a LOT of context there...
[18:12:11] <dieguezz> yeah, ask me and ill try to provide
[18:14:05] *** Joins: aesthetikx (~aesthetik@c-107-5-24-40.hsd1.mi.comcast.net)
[18:14:19] <aesthetikx> Is there an easy way to see if a SHA for an image already exists on a remote registry?
[18:14:51] <dieguezz> i tried changing the endpoint i call from my frontend.. like instead of.. http://localhost:8000 using.. api:8000 (when it was inside the docker-compose) if i tried any other URI, then i had an econnrefused error. Now, as i run things separately, i just grabbed the api container ip, and pointed front to it... as frontend its not being built with docker compose anymore. 
[18:15:23] <tabakhase> aesthetikx as in try pulling it? there is a tool called "reg", maybe that leads somwhere https://github.com/genuinetools/reg
[18:16:27] <tabakhase> dieguezz who "builds the image" shouldnt matter - all those things are runtime config -- and localhsot certainly smellls wrong anywhere in docker
[18:17:49] <dieguezz> well, i am not pointing to localhost, but to the container ip, which is a local ip yeah. 
[18:17:52] <tabakhase> and IPs are terrybad to :P
[18:18:12] <aesthetikx> tabakhase that works, but I don't want to spend the 60s downloading the image in my CI
[18:18:17] *** Joins: carl- (~carl-@c-138ee555.02-180-73746f39.bbcust.telenor.se)
[18:18:21] <aesthetikx> if I don't need to rebuild it
[18:18:55] <tabakhase> aesthetikx so kinda a "pull dry run"? - then yea, the reg tool should have a call for that
[18:20:10] *** Joins: jazzy (~jaziz@2600:380:4548:2564:9586:3cbe:697a:6fd1)
[18:29:57] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[18:32:26] *** glider_ is now known as glider
[18:35:34] *** Quits: mjbatty_ (~mjbatty@82.2.17.205) (Quit: Leaving)
[18:36:10] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 240 seconds)
[18:36:58] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[18:38:21] *** Quits: momomo (~momomo@user/momomo) (Read error: Connection reset by peer)
[18:39:37] *** Joins: mickey (~user@user/mickey)
[18:47:04] *** Joins: jgrim230 (~jgrim@172.58.120.44)
[18:48:48] <faceface> dieguezz: I don't understand the 'command:' in your docker-compose
[18:49:34] <faceface> dieguezz: why does docker-compose provide a 'command:' for web: yet the Dockerfile has an entrypoint?
[18:50:35] *** Quits: jgrim23 (~jgrim@d60-65-211-197.col.wideopenwest.com) (Ping timeout: 258 seconds)
[18:50:36] *** jgrim230 is now known as jgrim23
[18:51:08] <dieguezz> faceface,  was an experiment xD 
[18:51:21] <faceface> looks wrong...
[18:51:42] <faceface> Where is the code for wait.sh
[18:52:30] <dieguezz> here https://github.com/vishnubob/wait-for-it
[18:52:36] <faceface> dieguezz: I should point out I'm a noob, just trying to debug your problem for practice ;-)
[18:53:02] <dieguezz> hah, i am noob too so dont worry, any help is appreciated
[18:53:22] <faceface> dieguezz: why is it called wait-for-it.sh there but wait.sh in your compose?
[18:53:32] <dieguezz> i just renamed the file
[18:53:37] <dieguezz> the file is there yeah
[18:53:52] <faceface> kk
[18:54:08] <faceface> The way you're using it looks kinda weird too... why no port?
[18:54:33] <dieguezz> in api? or where?
[18:54:44] <faceface> ENTRYPOINT ["./wait.sh", "api", "npm", "run"]
[18:54:47] <dieguezz> oh
[18:54:56] <faceface> shouldn't it be something like:
[18:55:05] <dieguezz> yeah api:8000
[18:55:05] <faceface> ENTRYPOINT ["./wait.sh", "api:9090", "npm", "run"]
[18:55:08] <dieguezz> i tried as well yeah
[18:55:19] <dieguezz> but the problem is not there 
[18:55:31] <dieguezz> because i removed web from docker-compose, and everything runs fine
[18:55:43] <dieguezz> and if i wake web container separately, it still does not work
[18:55:47] <faceface> that sentence doesn't make sense to me
[18:55:50] <dieguezz> but with postman i got access to the API
[18:56:10] <dieguezz> mm, i removed the web service from docker-compose, so ileft the api mongo..
[18:56:20] <faceface> http://ix.io/3wpi <- is this the Dockerfile for web?
[18:56:35] <dieguezz> yep
[18:56:45] <dieguezz> but when i run it alone
[18:56:48] <dieguezz> i remove the wait thing
[18:56:49] <faceface> so what does taking web out of docker-compose prove?
[18:56:54] <faceface> prove / test?
[18:57:12] <dieguezz> it proves that other dockerfiles use the wait for it thing
[18:57:13] <dieguezz> and work
[18:57:25] <faceface> oic
[18:57:35] <dieguezz> the one giving problems is this one, and its not related to wait for it
[18:57:38] <faceface> I didn't know the other dockerfiles also called ./wait.sh
[18:57:54] <dieguezz> yeah, but dont worry, also i removed it when i run it without compose
[18:58:03] <dieguezz> because its not needed as i know that they are up
[18:58:23] <dieguezz> sorry for the confusion
[18:58:23] <faceface> I've had issues where docker-compose didn't rebuild my image after I changed the dockerfile... not sure if I was just getting confused... but what happens if you docker-compose build ? is everything cached?
[18:58:58] <faceface> confusion is normal here...
[18:58:59] <dieguezz> yeah well, i run docker-compose up --build -V
[18:59:05] <dieguezz> so it rebuilds them
[18:59:07] <faceface> what does the -V do?
[18:59:08] <faceface> kk
[18:59:37] <faceface> It just looks wrong to me to not have the port there... 
[18:59:52] <faceface> how does wait.sh know when the api is actually up?
[19:00:17] <dieguezz> because it just do a curl to the ip
[19:00:21] <dieguezz> to see if its up
[19:00:24] <programmerq> docker-compose build will force the build to happen. normal build cache applies just like with any other 'docker build' command. 'docker-compose up' only builds if the image doesn't exist locally. 'docker-compose up --build' forces it to redo the build (but the docker build cache still applies just like with docker-compose build and docker build)
[19:03:06] <programmerq> the wait-for-it.sh at https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh will exit with an error if you omit the port.
[19:03:13] *** Quits: vidbina (~vid@x4db72484.dyn.telefonica.de) (Ping timeout: 268 seconds)
[19:04:29] <dieguezz> yeah you are right, anyway thats not the problem now, as i am not using wait-for-it anymore
[19:05:19] <faceface> programmerq: I don't know how I'll ever understand what you just wrote.
[19:06:08] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:06:55] <faceface> programmerq: when you say, "'docker-compose up' only builds if the image doesn't exist locally." ... what image? the image named in the compose file?
[19:07:30] <dieguezz> yeah, the image has neved been built yet... once you build the image you got it locally
[19:08:14] <faceface> and it gets it's name from the compose file, and that won't change 'by default' (unless you add an image name tag with a variable or so?)
[19:08:15] <programmerq> the corresponding image for the service. if you haven't specified an 'image' key, then it will name it <project>_<service> where project is the current compose project name and service is the name of the service in question. so if my foo project has a service called web, it'll use the name foo_web. If there's no foo_web in 'docker image ls', then compose will run the build if the build: key is
[19:08:17] <programmerq> specified.
[19:08:40] <programmerq> you need to specify either image or build for each service (and you can specify both if you want to override the image name that will be used at build time)
[19:09:01] <faceface> "then it will name it <project>_<service>" kk
[19:10:08] <programmerq> https://github.com/programmerq/scaletest/blob/master/docker-compose.yml#L8-L9 - this compose file has both since I wanted to make it so folks could follow along without *needing* to build locally. That means you can do 'docker-compose pull && docker-compose up' and use my published copy. You can also do 'docker-compose build && docker-compose up' to build and use the image locally.
[19:10:48] <programmerq> and since I control the 'programmerq/' namespace on the docker hub, I can also do 'docker-compose build && docker-compose push' to build and push the images.
[19:11:44] <faceface> hah... never tried docker-compose pull yet
[19:12:11] <faceface> BTW, since you mention the "compose project name", does that come from the basedir by default?
[19:12:12] *** Quits: dabbill (~dabbill@174.31.231.138) (Quit: ZNC - https://znc.in)
[19:12:32] <faceface> I'm asking because I have a question about the default network created by docker-compose
[19:20:17] *** Quits: winstonsmith (~winstonsm@77.247.181.211) (Remote host closed the connection)
[19:20:35] *** Joins: winstonsmith (~winstonsm@77.247.181.214)
[19:20:46] <tabakhase> faceface yep parent-dir name, .-P or COMPOSE_PROJECT_NAME env
[19:26:14] *** Joins: lilgopher (~textual@c-73-51-174-246.hsd1.il.comcast.net)
[19:27:32] *** Joins: vidbina (~vid@dynamic-046-114-032-002.46.114.pool.telefonica.de)
[19:31:26] <faceface> thanks
[19:31:28] <faceface> bbl
[19:32:52] *** Quits: vidbina (~vid@dynamic-046-114-032-002.46.114.pool.telefonica.de) (Ping timeout: 252 seconds)
[19:36:11] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Read error: Connection reset by peer)
[19:36:51] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[19:38:31] *** Joins: vidbina (~vid@dynamic-046-114-032-002.46.114.pool.telefonica.de)
[19:47:11] *** Quits: dasbootmir (~dasbootmi@user/dasbootmir) (Quit: dasbootmir)
[20:01:28] *** Quits: manin (~X@185.242.190.95) (Ping timeout: 252 seconds)
[20:01:31] *** Quits: palindrome (~vargasj@51.37.139.160) (Quit: WeeChat 3.2)
[20:02:46] *** Joins: useful_idiot (~useful_id@154.3.40.202)
[20:03:45] *** Quits: vxrx (~vxrx@proxy01.autarkic.org) (Quit: WeeChat 3.2)
[20:05:51] *** Joins: vxrx (~vxrx@proxy01.autarkic.org)
[20:05:55] *** Quits: c10l (~c10l@89.34.167.207) (Read error: Connection reset by peer)
[20:07:40] *** Quits: vidbina (~vid@dynamic-046-114-032-002.46.114.pool.telefonica.de) (Ping timeout: 240 seconds)
[20:08:17] *** Joins: c10l (~c10l@89.34.167.207)
[20:09:52] *** Joins: vidbina (~vid@dynamic-046-114-038-179.46.114.pool.telefonica.de)
[20:13:01] *** Quits: RV (~RV@92.173.180.89) (Ping timeout: 252 seconds)
[20:15:40] *** Quits: jazzy (~jaziz@2600:380:4548:2564:9586:3cbe:697a:6fd1) (Ping timeout: 240 seconds)
[20:17:55] *** Quits: lowcrash (~admin@84-255-205-230.static.t-2.net) (Quit: The Lounge - https://thelounge.chat)
[20:19:49] *** Joins: molt (~molt@79.140.150.21)
[20:20:50] *** Joins: Ryu945 (~Ryu945@107.150.22.75.adsl.inet-telecom.org)
[20:22:00] *** Joins: codebam (~codebam@user/codebam)
[20:23:28] *** Joins: zakame (~zakame@user/zakame)
[20:34:20] *** Quits: codebam (~codebam@user/codebam) (Remote host closed the connection)
[20:34:50] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Remote host closed the connection)
[20:36:55] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[20:39:58] <pycurious> is it ok to mount /dev from host inside a docker container? pros/cons?
[20:45:35] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Quit: No Ping reply in 180 seconds.)
[20:47:26] *** Quits: vidbina (~vid@dynamic-046-114-038-179.46.114.pool.telefonica.de) (Ping timeout: 268 seconds)
[20:47:57] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[20:48:12] <akik> pycurious: mount only the device files you need
[20:54:05] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Remote host closed the connection)
[20:54:27] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[20:54:34] *** Joins: rsx (~dummy@ppp-188-174-130-209.dynamic.mnet-online.de)
[21:04:24] *** Quits: dieguezz (~DieguezZ@81.0.5.196) (Quit: Leaving)
[21:06:06] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Remote host closed the connection)
[21:07:15] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[21:11:50] *** Joins: codebam (~codebam@user/codebam)
[21:22:31] *** Joins: FunnyLookinHat (~FunnyLook@64.184.172.137)
[21:23:25] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[21:28:03] *** Joins: RougeR (~rougex250@user/rouger)
[21:28:20] *** Joins: cwchristerw (~cwchriste@onyx.devices.christerwaren.fi)
[21:29:55] *** Joins: Guest36 (~textual@a83-161-198-206.adsl.xs4all.nl)
[21:46:31] *** Joins: junktext (~junktext@77.247.181.210)
[21:55:54] *** Joins: ada_ (uid242135@user/ada/x-9065485)
[21:55:54] *** ChanServ sets mode: +o ada_
[21:57:49] *** Quits: Guest36 (~textual@a83-161-198-206.adsl.xs4all.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:01:17] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[22:10:36] *** Joins: ultima (~ultima@23.81.113.231)
[22:13:23] *** Joins: Guest36 (~textual@a83-161-198-206.adsl.xs4all.nl)
[22:13:44] *** Quits: Guest36 (~textual@a83-161-198-206.adsl.xs4all.nl) (Client Quit)
[22:13:58] *** Joins: emiel (~emiel@a83-161-198-206.adsl.xs4all.nl)
[22:14:01] *** Quits: versageek (~versageek@wikimedia/Versageek) (Ping timeout: 248 seconds)
[22:17:10] <emiel> Anyone else had trouble running amd64 images on Apple M1? Things are really unstable for me...
[22:29:45] *** Joins: Ballerburg9005 (~ICH@dslb-002-204-002-034.002.204.pools.vodafone-ip.de)
[22:33:00] *** Quits: paulman (~kulernil@gateway/tor-sasl/kuler) (Remote host closed the connection)
[22:33:06] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[22:33:26] *** Joins: paulman (~kulernil@gateway/tor-sasl/kuler)
[22:34:23] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[22:39:10] *** Quits: rpthms (~rpthms@user/rpthms) (Remote host closed the connection)
[22:44:12] <s17> k
[22:44:31] *** Joins: kulernil (~kulernil@gateway/tor-sasl/kuler)
[22:46:13] *** Quits: paulman (~kulernil@gateway/tor-sasl/kuler) (Ping timeout: 244 seconds)
[22:46:58] *** Joins: rpthms (~rpthms@user/rpthms)
[22:52:39] *** Quits: lemonzest (~lemonzest@user/lemonzest) (Quit: Quitting)
[22:54:09] *** Joins: jgrim236 (~jgrim@d118-75-146-29.try.wideopenwest.com)
[22:55:54] *** Quits: molt (~molt@79.140.150.21) (Read error: Connection reset by peer)
[22:56:18] *** Joins: molt (~molt@79.140.150.21)
[22:56:22] *** Quits: jgrim23 (~jgrim@172.58.120.44) (Ping timeout: 252 seconds)
[22:56:22] *** jgrim236 is now known as jgrim23
[22:57:46] *** Quits: rsx (~dummy@ppp-188-174-130-209.dynamic.mnet-online.de) (Quit: rsx)
[23:00:14] *** Quits: emiel (~emiel@a83-161-198-206.adsl.xs4all.nl) (Quit: WeeChat 3.2)
[23:00:44] *** Joins: oxum (~oxum@122.172.205.112)
[23:01:27] *** Joins: Nigthknight (~Nigthknig@user/nigthknight)
[23:02:55] <Nigthknight> Hi all, I'm trying to figure out if it is possible to create a persistent volume with limited size. My understanding is that it is not possible. Am I right?
[23:05:10] *** Quits: oxum (~oxum@122.172.205.112) (Ping timeout: 252 seconds)
[23:07:00] *** Joins: mikkel (~mike@208.110.120.167)
[23:07:44] <akik> Nigthknight: i think it works with --storage-opt size
[23:07:54] <akik> Nigthknight: but not for all filesystems
[23:08:37] <akik> hmm i wonder why i stopped trying it. i think it doesn't work with swarm
[23:09:20] <akik> https://docs.docker.com/engine/reference/commandline/run/#set-storage-driver-options-per-container
[23:10:24] <akik> yea there's no mention of that option in https://docs.docker.com/compose/compose-file/compose-file-v3/
[23:13:33] <zoredache> Depends on the underlying filesystem.
[23:13:45] *** Quits: zakame (~zakame@user/zakame) (Ping timeout: 248 seconds)
[23:14:31] <zoredache> I think xfs, zfs, and btrfs would let you set a quota.
[23:15:57] *** Joins: zakame (~zakame@user/zakame)
[23:30:26] *** Quits: PeGaSuS (BlackHole@user/pegasus) (*.net *.split)
[23:30:27] *** Quits: fxrs_ (~fxrs@192.227.212.130) (*.net *.split)
[23:30:27] *** Quits: TheBigK (~quassel@user/thebigk) (*.net *.split)
[23:30:27] *** Quits: rmaw (~rmaw@90.162.90.196) (*.net *.split)
[23:30:27] *** Quits: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de) (*.net *.split)
[23:30:27] *** Quits: Shapeshifter (~Shapeshif@parakeet.ifi.uzh.ch) (*.net *.split)
[23:30:27] *** Quits: shr2 (~shrysr@user/shrysr) (*.net *.split)
[23:30:27] *** Quits: infernix (~nix@2a02:22a0:bbb1:d500::2) (*.net *.split)
[23:30:27] *** Quits: Neoon (~Neoon@2607:5300:60:23a5::1111) (*.net *.split)
[23:30:27] *** Quits: mva[covid19] (znc@gentoo/developer/mva) (*.net *.split)
[23:30:27] *** Quits: flommi_ (~flommi@puck942.startdedicated.de) (*.net *.split)
[23:30:27] *** Quits: Vazomi (~Vazomi@i100135.upc-i.chello.nl) (*.net *.split)
[23:30:27] *** Quits: phylaz (~phylaz@219.92-221-176.customer.lyse.net) (*.net *.split)
[23:30:27] *** Quits: gko (~user@user/gko) (*.net *.split)
[23:30:42] *** Joins: Shapeshifter (~Shapeshif@parakeet.ifi.uzh.ch)
[23:30:47] *** Joins: mva (znc@gentoo/developer/mva)
[23:31:13] *** Joins: Vazomi (~Vazomi@i100135.upc-i.chello.nl)
[23:31:27] *** Joins: Neoon (~Neoon@2607:5300:60:23a5::1111)
[23:31:30] *** Joins: flommi (~flommi@puck942.startdedicated.de)
[23:31:32] *** Joins: fxrs (~fxrs@192.227.212.130)
[23:31:51] *** Joins: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de)
[23:32:14] *** Joins: PeGaSuS (BlackHole@user/pegasus)
[23:36:34] <Nigthknight> I see. Thanks
[23:38:02] *** Joins: vidbina (~vid@x4db72484.dyn.telefonica.de)
[23:38:08] *** Joins: infernix (nix@spirit.infernix.net)
[23:39:28] *** Joins: derpadmin (~derpadmin@cloudbase2.200013.net)
[23:45:09] *** Quits: zakame (~zakame@user/zakame) (Quit: WeeChat 2.9)
[23:49:35] *** Parts: Nigthknight (~Nigthknig@user/nigthknight) ()
[23:56:05] *** Quits: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net) (Quit: aead)
