[01:41:35] *** Quits: def- (~def-@static.238.114.9.176.clients.your-server.de) (Quit: -)
[01:43:47] *** Joins: def- (~def-@static.238.114.9.176.clients.your-server.de)
[01:49:10] <arkanoid> I need to "let att = {"key1": "first value", "key2": "second value"}.toXmlAttributes" but I have a Table[string,string] instead of a literal dictionary
[01:49:22] <arkanoid> do you know a shortcut for this?
[01:56:35] <FromDiscord> <Tuatarian> Is there anyway to use emscripten with Nim?
[01:58:44] <FromDiscord> <Elegantbeef> Yes https://github.com/treeform/nim_emscripten_tutorial
[01:58:45] <nrds> <12R2D299> 4GitHub: 7"Nim emscripten tutorial."
[02:01:55] <FromDiscord> <tandy> is it possible to see how a jsony renameHook changes a string? i think mine isnt working
[02:03:13] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:a4b1:e74b:d226:1434) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[02:30:54] *** Quits: max22- (~maxime@2a01cb088335980069b6fcc0b7d66f69.ipv6.abo.wanadoo.fr) (Quit: Leaving)
[02:36:49] <FromDiscord> <ynfle (ynfle)> Print before and after?
[03:23:55] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[03:32:33] *** Joins: perro (~user@072-191-245-069.res.spectrum.com)
[03:43:11] *** Quits: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca) (Ping timeout: 250 seconds)
[03:44:45] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[03:45:30] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[03:46:36] *** Joins: flynn (~mcbloch@user/flynn)
[03:50:36] <arkanoid> I have a template with body:untyped as last arg. It works, but I'd like to have it work even when not provided. How can I do nothing (aka default)?
[03:52:07] <FromDiscord> <Elegantbeef> Have a variation with the same name that calls that template
[03:52:19] <arkanoid> k
[03:56:20] <arkanoid> is it possible to have 2 statements blocks in same template? like body:untyped, but two. I'm writing a template that runs httpclient.request, and I'd like to expose a "pre" and "post" statement blocks
[04:02:19] <FromDiscord> <Elegantbeef> Yes using the do syntax
[04:03:07] <FromDiscord> <Elegantbeef> https://play.nim-lang.org/#ix=3wSb
[04:05:04] <arkanoid> whoa! thanks, I see I can also add more than two
[04:05:21] <arkanoid> out of curiosity, is it possible to name them something else than do?
[04:06:25] <FromDiscord> <Elegantbeef> nope it's the do notation
[04:06:40] <FromDiscord> <Elegantbeef> Do think there is an rfc to have named blocks instead
[04:08:35] <FromDiscord> <Elegantbeef> Could be wrong
[04:08:47] <arkanoid> thanks for the hint, very satisfied with the solution
[04:11:34] <arkanoid> I've another question. I'm passing a an url string to the template and I'd like to generate a proc named as the last part of it with first letter lowercase. I've already the transformation function, but I don't know if I should pass the url as string, typed or untyped
[04:12:03] <arkanoid> what's the correct approach when editing a string is required before going back to the ast world?
[04:28:10] <FromDiscord> <Elegantbeef> I dont know if you can do that without using a macro
[04:29:39] <nrds> <06Prestige99> Elegantbeef how's the wm coming along?
[04:32:40] *** Quits: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca) (Ping timeout: 240 seconds)
[04:33:01] <FromDiscord> <Elegantbeef> Uhh smokebomb
[04:33:22] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[04:34:17] <nrds> <06Prestige99> Haha oh
[04:35:52] <FromDiscord> <Elegantbeef> I wanted to run it but i never got around to making it work with the gnome keyrin
[04:36:05] <FromDiscord> <Elegantbeef> So everytime i use it just logs me out of my accounts and it's not fun
[04:39:20] <nrds> <06Prestige99> Wait, do you have to do something specific for the gnome keyring?
[04:39:49] <FromDiscord> <Elegantbeef> Uncertain, think you need to start a daemon but i was getting too tired of getting logged out of the accounts to test
[04:40:41] <nrds> <06Prestige99> Can you just do it in xephyr? Maybe not since you are already logged in... I never had a problem with it, so idk
[04:40:57] <nrds> <06Prestige99> Maybe some verbose logging
[04:42:05] <FromDiscord> <Elegantbeef> I dont know what you mean verbose logging
[04:43:45] <nrds> <06Prestige99> Just to find out why you are getting logged out. I just have to enter my password in the gnome key ring GUI
[04:46:30] <FromDiscord> <Elegantbeef> Well i think it's just how i have my wm log me in maybe, doesnt call the proper xinit stuff
[04:50:24] <arkanoid> Elegantbeef, I've successfully converted the template into a macro (quote do and replace vars with `vars` basically). I've also turned the wannabe generated proc name into a myProcName: static[string] macro argument. I do the required transformation of the string before the "quote do", but I'm failing to use the name inside it
[04:52:34] <arkanoid> I keep getting errors on the first like of the quote do like "Error: identifier expected, but found '"getNetworkInterfaces"'" where the string is the wannabe name of the generated proc 
[04:52:47] <FromDiscord> <Elegantbeef> If a picture could speak a thousand words why cannot i not see the code?
[04:53:59] <arkanoid> Elegantbeef: https://play.nim-lang.org/#ix=3wSj
[04:54:39] <FromDiscord> <Elegantbeef> you're trying to use a strlit as an ident
[04:55:07] <FromDiscord> <Elegantbeef> `let nameIdent = ident(name)` then use `nameIdent`
[04:55:35] <FromDiscord> <Elegantbeef> what you're doing is writing `proc "getNetworkInterfaces"(args)` instead of `proc getNetworkInterfaces(args)`
[04:56:11] <arkanoid> it works!
[04:56:33] <arkanoid> yes it makes sense, strLit is not ident
[05:36:06] *** Quits: ozzz (~oz@46.49.41.80) (Ping timeout: 268 seconds)
[05:48:27] *** Quits: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca) (Ping timeout: 240 seconds)
[06:07:18] <FromDiscord> <JSONBash> In reply to @arkanoid "<@145405730571288577>: https://play.nim-lang.org/#i": are you doing a soap interfacing?
[06:12:28] <FromDiscord> <codic> gnome keyring works fine for me
[06:31:23] <nrds> <06Prestige99> we mean on beef's wm
[06:31:29] <nrds> <06Prestige99> guess there's an issue
[06:32:23] <FromDiscord> <Elegantbeef> Yea i'm missing something on startup, prestige are you using a login manager?
[06:32:53] <nrds> <06Prestige99> nope just startx
[06:48:59] *** Quits: arkurious (~arkurious@user/arkurious) (Quit: Leaving)
[07:01:41] <nrds> <06Prestige99> hbu Elegantbeef
[07:06:34] <FromDiscord> <Termer> Hi, how would I go about importing two modules which have the same name, but are in different places?
[07:07:01] <FromDiscord> <Termer> I have `tm_client/private/objects` and `objects` (which is in the same directory as the module I'm importing in)
[07:07:05] <FromDiscord> <Termer> but I can only import noe
[07:07:07] <FromDiscord> <Termer> (edit) "noe" => "one"
[07:07:22] <FromDiscord> <Termer> is there some way to import both, possibly one under an alias?
[07:08:20] <nrds> <06Prestige99> import foo as bar ?
[07:08:29] <FromDiscord> <Termer> oh, thanks
[07:10:45] *** Quits: def- (~def-@static.238.114.9.176.clients.your-server.de) (Quit: -)
[07:12:32] *** Joins: def- (~def-@static.238.114.9.176.clients.your-server.de)
[07:14:31] <FromDiscord> <Rika> you can use relative directories in import names
[08:03:33] *** Quits: rockcavera (~rc@user/rockcavera) (Remote host closed the connection)
[08:36:02] *** Quits: supakeen (~user@python/site-packages/supakeen) (Quit: WeeChat 3.2)
[08:36:31] *** Joins: supakeen (~user@python/site-packages/supakeen)
[08:59:18] <FromDiscord> <codic> > <Prestige> we mean on beef's wm↵yeah I meant I didn't need to do anything special
[09:17:56] <FromDiscord> <retkid> at first i was like
[09:18:14] <FromDiscord> <retkid> "kinda lame we have to make our own iterators, theres not much to do besides just copy pasta the same 5 lines"\
[09:18:23] <FromDiscord> <retkid> then i was like "holy shit this is actually amazing"
[09:19:11] <FromDiscord> <retkid> because, yes like 90% of the time its just the same 5 lines, but it gives you control over how your code looks, and also you can do really efficient code via not mincing and chaining loops
[09:20:17] <FromDiscord> <Yardanico> btw, if you actually want some pre-defined efficient chaining, there's https://github.com/zero-functional/zero-functional
[09:20:18] <nrds> <12R2D299> 4GitHub: 7"A library providing zero-cost chaining for functional abstractions in Nim."
[09:20:40] <FromDiscord> <retkid> why not just make my own library with all the loops i will ever need as i need them
[09:21:05] <FromDiscord> <retkid> oh
[09:21:10] <FromDiscord> <retkid> because theres a fuckton of loops here
[09:48:10] *** Quits: kayabaNerve_ (~kayabaNer@user/kayabanerve) (Ping timeout: 252 seconds)
[09:55:45] <FromDiscord> <linux user> nim and js same color
[09:55:50] <FromDiscord> <linux user> colour
[09:58:58] <FromDiscord> <Rika> Discussed before already
[10:15:24] <FromDiscord> <Yardanico> @linux user different :)
[10:15:41] <FromDiscord> <Yardanico> also we had to change the color before GitHub removed the similar color rule
[10:16:01] <FromDiscord> <Yardanico> (in the past you couldn't have a language with the color that's too similar to another language's color)
[10:16:07] <FromDiscord> <Yardanico> but now that restriction doesn't exist
[10:16:49] <FromDiscord> <Yardanico> @linux user see https://forum.nim-lang.org/t/6350 https://github.com/github/linguist/pull/4866 and https://github.com/github/linguist/pull/4900 for more context
[10:17:39] <FromDiscord> <Yardanico> lemme find a project with both nim and js to show you the difference
[10:19:24] <FromDiscord> <Yardanico> @linux user this is how a project with 50% nim 50% js would look like (edited html manually for 50/50 distribution) https://media.discordapp.net/attachments/371759389889003532/879965661944758292/unknown.png
[10:20:19] <FromDiscord> <Yardanico> and on light github theme https://media.discordapp.net/attachments/371759389889003532/879965891230564363/unknown.png
[10:20:47] <FromDiscord> <Bren> Is there a matrix protocol sdk for nim?
[10:21:12] <FromDiscord> <Yardanico> don't think so
[10:21:39] <FromDiscord> <Elegantbeef> Someone was working on one but idk how that's went
[10:22:11] <FromDiscord> <linux user> owo
[10:23:52] <FromDiscord> <linux user> i cant beleie it had cow poop green
[10:23:54] <FromDiscord> <linux user> bruh
[10:24:37] <FromDiscord> <Yardanico> that was set by some github employee in like 2012
[10:24:52] <FromDiscord> <Yardanico> but it wasn't that bad as you're describing it :)
[10:33:18] <FromDiscord> <Clonkk> https://without.boats/blog/the-problem-of-effects/ an interesting read about effects in programming language
[10:43:05] <FromDiscord> <Rika> If you say it’s interesting then I shall read it
[10:46:36] <FromDiscord> <Rika> It’s fine, but it need some intermediate knowledge about Rust
[10:49:56] *** Joins: PMunch (~PMunch@vpn.dualog.com)
[11:09:34] <FromDiscord> <enthus1ast> i started one but its more like "i throw stuff in there when i need it" and no encryption, and exactly like this it looks ;) .↵https://github.com/enthus1ast/nimMatrix
[11:09:36] <nrds> <12R2D299> 4GitHub: 7"matrix chat client library"
[11:10:15] <FromDiscord> <enthus1ast> BUT i use it
[11:24:47] *** Joins: jjido (~Denis@90.213.58.125)
[11:35:53] *** Joins: ozzz (~oz@46.49.41.80)
[11:36:02] *** Joins: max22- (~maxime@2a01cb0883359800b864da96ef8912fa.ipv6.abo.wanadoo.fr)
[11:42:21] <FromDiscord> <gogolxdong (liuxiaodong)> How to listen on all address for http/https with Jester or prologue?
[11:43:13] <madprops> if you mean without a port you'd have to reverse proxy i think
[11:43:47] <PMunch> @gogolxdong, what do you mean all addresses?
[11:51:17] <FromDiscord> <enthus1ast> you must listen on 0.0.0.0
[11:56:21] *** Joins: kayabaNerve (~kayabaNer@user/kayabanerve)
[12:14:02] <FromDiscord> <ondrejoda> good morning
[12:14:21] <FromDiscord> <Ondrejoda> hey there
[12:14:40] <FromDiscord> <Ondrejoda> how are you?
[12:14:46] <FromDiscord> <ondrejoda> i'm good
[12:15:19] <FromDiscord> <Elegantbeef> Someone's gone mad
[12:15:26] <FromDiscord> <ondrejoda> yeah, kinda
[12:15:35] <FromDiscord> <ondrejoda> i was just testing what would discord do
[12:15:45] <FromDiscord> <ondrejoda> when i would type in the matrix room
[12:16:51] <FromDiscord> <ondrejoda> and it does seem to work
[12:17:02] <FromDiscord> <ondrejoda> so yeah
[12:17:12] <FromDiscord> <ondrejoda> kind of a cool feature i guess
[12:20:27] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[12:22:52] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[12:36:56] <PMunch> Hmm, is Matrix also bridged through Discord?
[12:37:27] <PMunch> Because to me it appears like you're two different accounts on Discord with the same name just capitalized differently talking to each other
[12:37:54] <FromDiscord> <Elegantbeef> Yea it is
[12:56:58] <FromDiscord> <Rika> Lol
[12:57:04] <FromDiscord> <Rika> That’s hilarious
[13:07:47] <PMunch> Hmm, would this cause a string copy? http://ix.io/3wTy/nim
[13:08:38] <FromDiscord> <Elegantbeef> It should not afaik
[13:09:19] <PMunch> Nice
[13:09:38] <FromDiscord> <ondrejoda> yeah, i got somewhat confused by this
[13:10:12] <FromDiscord> <ondrejoda> and that there was no issue with the same names
[13:12:26] <arkanoid> what's the most convenient way to pass args to a proc generating macro that describes the input arguments of the generated proc?
[13:13:07] <FromDiscord> <haxscramper> I'd just pass proc signature and unparse it in macro
[13:13:32] <FromDiscord> <haxscramper> `macroCall(proc(arg1: int): ReturnType {.MaybeSomeSideEffects.})`
[13:13:59] <arkanoid> witty idea! thanks!
[13:16:20] *** Quits: jjido (~Denis@90.213.58.125) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[13:49:06] <arkanoid> I have noob question about macros. I have a NimNode of kind nnkProcDef, I need to modify it's nnkFormalParams tree, what's the correct way to access it? I see that it is the 4th child of the nnkProcDef, is it correct to do myProcDef[3]? is there a better way to navigate AST?
[14:01:08] <FromDiscord> <haxscramper> https://nim-lang.org/docs/macros.html#params%2CNimNode
[14:01:17] <FromDiscord> <haxscramper> But usually you do `[3]`
[14:01:32] <FromDiscord> <haxscramper> If you want to deconstruct proc you can use pattern matching
[14:01:48] <FromDiscord> <haxscramper> https://nim-lang.github.io/fusion/src/fusion/matching.html#tree-matching
[14:04:59] <arkanoid> thanks!
[14:05:04] <FromDiscord> <haxscramper> https://github.com/haxscramper/hack/blob/master/testing/nim/compilerapi/test5.nim#L31
[14:05:23] <arkanoid> but if NimNode is a variant objects, shouldn't it have attributes specific for it's kind?
[14:05:39] <arkanoid> I mean something like myProcDefNode.formalParams
[14:06:15] <arkanoid> or maybe not as it's just a tree of nodes
[14:12:01] <FromDiscord> <haxscramper> It does not have specific attributes, it is a homogeneous ast
[14:12:19] <FromDiscord> <haxscramper> There are some helper procs like `std/macros.params`
[14:13:52] <arkanoid> now I unserstand why you added many many utility funcs for that in your runtime ast generator library
[14:15:47] <FromDiscord> <haxscramper> yes
[14:16:10] <FromDiscord> <haxscramper> Actually I support both use case - homogenous AST via helper functions
[14:16:43] <FromDiscord> <haxscramper> And more structured one that has everything put in separate fields
[14:16:53] <arkanoid> I'm actually puzzle if I should use the helper functions, or just program the way dumpAstGen prints
[14:16:57] <arkanoid> *puzzled
[14:19:45] <FromDiscord> <ondrejoda> how do i do pointers in nim?
[14:20:19] <FromDiscord> <ondrejoda> i'm asking because i am using this sdl `getMouseState()` function and it takes in 2 int pointers
[14:21:06] <FromDiscord> <Yardanico> if you're using sdl2 from nim-lang, you don't need pointers, it has two overloads for getMouseState
[14:21:11] <FromDiscord> <Yardanico> although I'm not sure how correct that usage is
[14:21:14] <FromDiscord> <Yardanico> it has proc getMouseState(x, y: var cint): uint8 {.importc: "SDL_GetMouseState", discardable.}
[14:21:30] <FromDiscord> <Yardanico> so you can do `var x, y: int; getMouseState(x, y)`
[14:21:39] <FromDiscord> <Yardanico> (sent as one line for chat purposes)
[14:21:45] <FromDiscord> <ondrejoda> well i did
[14:22:01] <FromDiscord> <Yardanico> ah sorry, not int but cint
[14:22:06] <FromDiscord> <ondrejoda> and it gives me an error
[14:22:16] <FromDiscord> <ondrejoda> huh
[14:22:16] <FromDiscord> <ondrejoda> cint works
[14:22:21] <FromDiscord> <ondrejoda> gimme a sec
[14:22:22] <FromDiscord> <Yardanico> yeah, because nim's int is not cint
[14:22:42] <FromDiscord> <Yardanico> cint is C's int which is 32-bit even on 64-bit platforms
[14:22:46] <FromDiscord> <Yardanico> nim's int is arch-dependent
[14:23:25] * arkanoid raises finger: cint stands for compatible int, not C int!
[14:23:37] <arkanoid> I actually are the noob here, just a joke
[14:23:38] <FromDiscord> <haxscramper> It stands for common int
[14:23:46] <FromDiscord> <haxscramper> cstring is a common string
[14:23:55] <FromDiscord> <ondrejoda> so the var x, y\:cint getMouseState(x, y) doesn't work
[14:24:05] <FromDiscord> <haxscramper> In reply to @arkanoid "I'm actually puzzle if": It depends on your particular use case. For large blocks of code with some injections I use `quote do` (or my own reimplementation). When I need more sophisiticated logic I get to `newTree()` and helper pocs
[14:24:09] <FromDiscord> <Yardanico> then that usage is indeed incorrect I guess
[14:24:13] <FromDiscord> <Yardanico> @ondrejoda then just use it like this
[14:24:21] <FromDiscord> <Yardanico> var x,y: cint; getMouseState(addr x, addr y)
[14:24:29] <FromDiscord> <haxscramper> When I need some nuclear-tear AST transforms I start to add IR that also has own helper functions
[14:24:31] <FromDiscord> <ondrejoda> ah
[14:24:36] <FromDiscord> <Yardanico> addr is for getting a pointer of a variable
[14:24:38] <FromDiscord> <ondrejoda> now that is what i was looking for
[14:24:50] <FromDiscord> <ondrejoda> so addr acts like \ or & in c++?
[14:24:52] <FromDiscord> <Yardanico> yes
[14:24:53] <FromDiscord> <haxscramper> If you want to look at what complicated macros looks like you can see pattern matching implementation and accompanying article
[14:24:55] <FromDiscord> <Yardanico> kind of
[14:25:11] <FromDiscord> <haxscramper> In reply to @ondrejoda "so addr acts like": `addr` is `&`, `expr[]` is `expr`
[14:25:17] <FromDiscord> <ondrejoda> and yes i do know that pointers and references are two different things
[14:26:42] <FromDiscord> <Yardanico> @haxscramper do you think it's valid to do  `var cint`  for arguments that expect a pointer to a variable on the C side?
[14:26:47] <FromDiscord> <Yardanico> because apparently sdl2 package has an overload like this
[14:27:01] <FromDiscord> <Yardanico> multiple actually
[14:28:55] <FromDiscord> <haxscramper> If compiled to C there is no other way to get `var cint` semantics so yes
[14:29:05] <FromDiscord> <haxscramper> I would assume it is safe to do so
[14:29:15] <FromDiscord> <ondrejoda> praise the person that came up with `any`
[14:29:17] <FromDiscord> <Yardanico> well I just mean that it's essentially relying on an implementation detail but it's highly unlikely to change :P
[14:29:21] <FromDiscord> <Yardanico> @ondrejoda that's not what you think it is
[14:29:34] <FromDiscord> <ondrejoda> In reply to @Yardanico "<@!533966976754909216> that's not what": for proc input args?
[14:29:36] <FromDiscord> <haxscramper> In reply to @Yardanico "well I just mean": yes, it is a bad style by all accounts
[14:29:49] <FromDiscord> <Yardanico> In reply to @Ondrejoda "for proc input args?": for proc arguments it'll essentially create a new instantiation of a proc for every type of that argument
[14:29:49] <FromDiscord> <haxscramper> not everyone knows that `var == ptr` if you compile to C
[14:30:10] <FromDiscord> <Yardanico> it's not a dynamic type, all typing is still static even with `any`
[14:30:15] <FromDiscord> <Yardanico> lemme show you what I mean
[14:30:22] <FromDiscord> <ondrejoda> i think i know what you mean
[14:31:04] <FromDiscord> <ondrejoda> if i have a proc like this `proc something(x, y:any)`↵it makes all of the possible combinations
[14:31:07] <FromDiscord> <ondrejoda> right?
[14:31:11] <FromDiscord> <Yardanico> yes, essentially
[14:31:14] <FromDiscord> <Yardanico> sent a code paste, see https://play.nim-lang.org/#ix=3wTO
[14:31:24] <FromDiscord> <Yardanico> here test and test2 are effectively the same, it's just that test is a bit shorter
[14:31:26] <FromDiscord> <ondrejoda> so i should use templates?
[14:31:42] <FromDiscord> <haxscramper> what `something` does exactly?
[14:31:50] <FromDiscord> <ondrejoda> lemme show you
[14:31:56] <FromDiscord> <haxscramper> I doubt it is really "can accept any type" proc
[14:32:06] <FromDiscord> <ondrejoda> sent a code paste, see https://play.nim-lang.org/#ix=3wTP
[14:32:08] <FromDiscord> <Yardanico> uhh
[14:32:12] <FromDiscord> <Yardanico> what you want is SomeInteger probably
[14:32:12] <FromDiscord> <haxscramper> `T: SomeInteger`
[14:32:32] <FromDiscord> <ondrejoda> but then again, i sometimes pass a mix of floats and ints
[14:32:45] <FromDiscord> <Yardanico> In reply to @Ondrejoda "but then again, i": then SomeNumber
[14:32:50] <FromDiscord> <Yardanico> sent a code paste, see https://play.nim-lang.org/#ix=3wTR
[14:32:50] <FromDiscord> <ondrejoda> ah
[14:32:52] <FromDiscord> <Yardanico> !eval (5.0).cint
[14:32:55] <NimBot> Compile failed: /usercode/in.nim(1, 6) Error: expression 'cint(5.0)' is of type 'cint' and has to be used (or discarded)
[14:32:57] <FromDiscord> <ondrejoda> now i didn't know that that existed
[14:33:01] <FromDiscord> <Yardanico> yeah, that works apparently
[14:33:07] <FromDiscord> <Yardanico> In reply to @Ondrejoda "now i didn't know": and no need for `void` return type :)
[14:33:14] <FromDiscord> <ondrejoda> k
[14:33:32] <FromDiscord> <Yardanico> see some generic types here https://nim-lang.org/docs/system.html#SomeSignedInt
[14:33:34] <FromDiscord> <Yardanico> and below
[14:33:46] <FromDiscord> <ondrejoda> huh
[14:33:50] <FromDiscord> <ondrejoda> sent a code paste, see https://play.nim-lang.org/#ix=3wTp
[14:34:02] <FromDiscord> <Yardanico> yeah, because with what I sent you all types must be of the same type
[14:34:06] <FromDiscord> <Yardanico> or even with your any example
[14:34:10] <FromDiscord> <Yardanico> the proper fix would be this:
[14:34:44] <FromDiscord> <Yardanico> but again, IMO in this case you can just make it a template
[14:34:49] <FromDiscord> <Yardanico> sent a code paste, see https://play.nim-lang.org/#ix=3wTS
[14:35:19] <FromDiscord> <Yardanico> and about why you need separate arguments - if you have "x, y, x1, x2: SomeNumber" it means that all of those arguments must be of one type that is a part of SomeNumber
[14:35:37] <FromDiscord> <ondrejoda> sent a code paste, see https://play.nim-lang.org/#ix=3wTU
[14:35:45] <FromDiscord> <ondrejoda> no wait
[14:35:46] <FromDiscord> <Yardanico> no, that'll be the same as SomeNumber
[14:35:55] <FromDiscord> <Yardanico> as my SomeNumber example
[14:36:04] <FromDiscord> <ondrejoda> there
[14:36:09] <FromDiscord> <ondrejoda> sent a code paste, see https://paste.rs/ZLR
[14:36:29] <FromDiscord> <Yardanico> sent a code paste, see https://play.nim-lang.org/#ix=3wTW
[14:36:34] <FromDiscord> <Yardanico> ah wait sorry
[14:36:36] <FromDiscord> <Yardanico> that won't work obviously
[14:36:50] <FromDiscord> <ondrejoda> yeah, i still get that error
[14:36:52] <FromDiscord> <Yardanico> because in the end it's still the same as specifying "x, y, x1, x2: SomeNumber"
[14:36:55] <FromDiscord> <Yardanico> because you have only one T
[14:37:08] <FromDiscord> <Yardanico> so you must have 4 arguments specifying the type in each
[14:37:15] <FromDiscord> <Yardanico> as i said, you might as well just make it a template
[14:37:15] <FromDiscord> <ondrejoda> so i need to have [T, T1, T2, T3]?
[14:37:17] <FromDiscord> <Yardanico> yes
[14:37:29] *** Quits: max22- (~maxime@2a01cb0883359800b864da96ef8912fa.ipv6.abo.wanadoo.fr) (Remote host closed the connection)
[14:37:59] <FromDiscord> <ondrejoda> yeah, that works
[14:38:09] <FromDiscord> <ondrejoda> thanks for the help!
[14:38:11] <FromDiscord> <Yardanico> you might want to skim over https://nim-lang.org/docs/manual.html#generics for more info about generics
[14:38:21] *** Joins: max22- (~maxime@2a01cb08833598007e57431a6dc9d5b6.ipv6.abo.wanadoo.fr)
[14:47:30] <FromDiscord> <enthus1ast> i'm currently fighting with a webcrawler it seems that std/htmlparser is not capable of parsing this cra\. ↵Is the fusion/htmlparser any different?
[14:47:59] <FromDiscord> <Yardanico> I think it does have some differences, but not a lot
[14:48:00] <FromDiscord> <enthus1ast> when i diff them they seem quite similar.
[14:48:40] <FromDiscord> <enthus1ast> mh yeah
[14:48:51] <FromDiscord> <enthus1ast> it think i just regex everyhting then \:/
[14:54:07] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[15:14:08] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[15:15:13] <PMunch> @dom96, you around?
[15:20:56] <madprops> can I use block to continue a parent loop?
[15:20:59] <madprops> i have a for inside a for
[15:21:11] <madprops> i want to trigger continue on the parent loop
[15:21:23] <madprops> not just break the inner loop
[15:24:26] <PMunch> You can use a named block that you can break from the inside loop
[15:24:45] <PMunch> If that block extends to the end of the outer for loop that would essentially be the same as a continue
[15:28:06] <madprops> ah cool
[15:30:59] <madprops> I'm trying to add `block exit: discard` at the end
[15:31:05] <madprops> and before that `break exit` but it fails
[15:31:23] <madprops> undeclared identifier
[15:33:28] <PMunch> You have to put your stuff within the block and then you can use `break` to get out of it
[15:38:21] <PMunch> madprops, something like this: https://play.nim-lang.org/#ix=3wUe
[15:38:38] <madprops> yeah, thanks
[15:46:31] <NimEventer> New thread by Kalbhairab: A == b == c format, see https://forum.nim-lang.org/t/8364
[15:46:50] <arkanoid> Can macros emit code in specific module without generating nim files?
[15:47:53] <FromDiscord> <Rika> You mean macros generating code across another file?
[15:47:59] <FromDiscord> <Rika> I’ve never seen such a thing
[15:49:57] <arkanoid> let me explain. I N xml files, each would generate a nim module. If I would put all the generated code into a single module I'd have overlapping proc names. I'd surely append a prefix to proc names, but it'd be nicer using modules
[15:50:43] <FromDiscord> <enthus1ast> if you want to save the generated nim ast as a nim file your can just print it into a file
[15:52:40] *** Quits: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca) (Ping timeout: 240 seconds)
[15:52:47] <FromDiscord> <Rika> If you put it into separate modules, you would still have overlapping proc names, and it would probably still be annoying to fully qualify your procs
[15:52:57] <FromDiscord> <Rika> Can you not make them bound to a type?
[15:53:07] <FromDiscord> <Rika> Like perhaps each file is a certain type
[15:53:14] <FromDiscord> <Rika> Because it feels like that would work better
[15:53:49] <arkanoid> no, the splitting logic is namespace
[15:53:53] <arkanoid> not type
[15:54:25] <arkanoid> but you're right, I'd have overlapping proc anyway in the logic if two modules are imported at same time
[15:54:46] <arkanoid> maybe adding prefix is not so bad
[15:56:10] *** Joins: Vladar (~Vladar@46.162.2.53)
[15:58:38] <FromDiscord> <Rika> I know, but modules are not exactly namespaces
[15:59:57] <arkanoid> I should create mock type (empty object) just to differentiate procs? I surely can
[16:04:16] <FromDiscord> <Rika> Maybe? You can also, like, use the types for, uh, type stuff
[16:04:22] <FromDiscord> <Rika> Unless you don’t need to I guess
[16:04:52] <arkanoid> let's see what feels better
[16:20:12] <PMunch> Hmm, how do people deal with wrapped libraries and updates?
[16:21:24] <PMunch> For reference I have written a dynamic library in Nim, for this I have created definitions for my C types in Nim. But whenever the library updates there is a chance that they have added a field to an object which then causes my program to segfault or read the wrong data
[16:24:08] <PMunch> I tried to set up c2nim to make the bindings automatically, but the sources are too complex for it to handle
[16:27:00] <PMunch> Hmm, I could set up a test in C that just outputs the sizes and offsets of all the types and fields, and then a similar thing for Nim, and make a diff thing part of my tests
[16:27:39] <arkanoid> PMunch: isn't gintro doing something similar?
[16:30:09] <PMunch> I don't think so, not exactly sure how gintro works
[16:30:27] <PMunch> @StefanSalewski might be able to shed some light on it
[16:30:47] <NimEventer> New thread by Mareklachbc: Does Nim have anything equivalent to Ruby's puts, or Python's print, or Perl's say?, see https://forum.nim-lang.org/t/8365
[16:31:50] <arkanoid> I'm not into gtk, but I know gintro reads some xml files to generate nim code, and does that when you install gintro
[16:32:23] <arkanoid> xml from libgtk/libgobject, not from gintro
[16:36:01] *** Quits: supakeen (~user@python/site-packages/supakeen) (Quit: WeeChat 3.2)
[16:36:29] *** Joins: supakeen (~user@python/site-packages/supakeen)
[16:49:52] <FromDiscord> <MrOkram> When trying to statically compile with "re" library imported it compiles fine but when i try to run it i get "could not load: libpcre.so(.3|.1|)", any recommendations or replacement for that lib ?
[16:52:08] <FromDiscord> <Yardanico> Pure-nim regex - https://github.com/nitely/nim-regex
[16:52:10] <nrds> <12R2D299> 4GitHub: 7"Pure Nim regex engine. Guarantees linear time matching"
[16:52:35] <FromDiscord> <Yardanico> https://nitely.github.io/nim-regex/regex.html
[16:54:51] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:64af:236c:94c0:6372)
[16:54:53] <FromDiscord> <MrOkram> Thanks, that did the trick.
[16:55:53] <FromDiscord> <Yardanico> also, i'm curious because you said you need to compile your project for routers - what's the project's purpose?  of course you don't have to answer if it's a private matter :)
[16:57:01] <FromDiscord> <MrOkram> In reply to @Yardanico "also, i'm curious because": I work at an ISP, we needed something that can run on the end router and send periodic updates to some API, it needed to be light and fast and that's where Nim came into play (Also, not really into coding C/C++
[16:57:06] <FromDiscord> <MrOkram> (edit) "In reply to @Yardanico "also, i'm curious because": I work at an ISP, we needed something that can run on the end router and send periodic updates to some API, it needed to be light and fast and that's where Nim came into play (Also, not really into coding C/C++ ... " 03added "\:) )"
[16:57:08] <FromDiscord> <Yardanico> oh, nice
[16:57:10] <FromDiscord> <Rika> Nice
[16:57:18] <FromDiscord> <Yardanico> If you start using it at the company, pls add it to https://github.com/nim-lang/Nim/wiki/Organizations-using-Nim :P
[16:57:30] <FromDiscord> <Yardanico> if sharing the company name is fine
[16:57:49] <FromDiscord> <MrOkram> I'll talk with my supervisor and see if it's fine with him
[17:15:49] <PMunch> Hmm, maybe I should try to get the name of the company I work for on that list as well
[17:15:53] <FromDiscord> <haxscramper> sent a code paste, see https://play.nim-lang.org/#ix=3wUz
[17:16:04] <FromDiscord> <Yardanico> the more the better :)
[17:16:18] <FromDiscord> <haxscramper> When I add `--debugger:native` code is magically fixed
[17:16:33] <FromDiscord> <Yardanico> well that enables gcc's -g
[17:16:56] *** Joins: rockcavera (~rc@192.12.112.204)
[17:16:56] *** Quits: rockcavera (~rc@192.12.112.204) (Changing host)
[17:16:56] *** Joins: rockcavera (~rc@user/rockcavera)
[17:17:15] <FromDiscord> <haxscramper> Do you think this has an effect? I mean I can literally do `echo str.isSlice` and it reports `false`
[17:17:23] <FromDiscord> <haxscramper> And on the next line `echo str.str` fails
[17:17:27] <FromDiscord> <Yardanico> ah sorry actually -Og
[17:17:43] <FromDiscord> <Yardanico> In reply to @haxscramper "And on the next": maybe it's a result of specific optimizations being enabled/disabled with -Og ?
[17:17:47] <FromDiscord> <Yardanico> in gcc
[17:17:49] <FromDiscord> <Yardanico> can you try with clang?
[17:18:32] <FromDiscord> <haxscramper> alright, clang is working fine without debugger
[17:20:53] <FromDiscord> <enthus1ast> While developing nimja I always thought that it would be a nice match for router websites because it's so lightweight and the heavy lifting is done on compile time.↵(@MrOkram)
[17:21:01] <arkanoid> how to unittest macros? I've a macro that generated a proc*, if I run it into a test block I get "Error: 'export' is only allowed at top level"
[17:21:21] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:64af:236c:94c0:6372) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[17:21:24] <FromDiscord> <enthus1ast> I've done it with testament
[17:21:37] <FromDiscord> <enthus1ast> And matched on the output
[17:21:38] *** Quits: def- (~def-@static.238.114.9.176.clients.your-server.de) (Quit: -)
[17:22:19] <FromDiscord> <haxscramper> also test macro functionality
[17:22:53] <FromDiscord> <haxscramper> https://github.com/haxscramper/fusion/blob/matching-fixup/tests/tmatching.nim#L977
[17:23:10] <FromDiscord> <enthus1ast> https://github.com/enthus1ast/nimja/blob/master/tests/basic/test_tokens_before_extend_error.nim
[17:26:04] <FromDiscord> <Yardanico> searching "httpbeast" in shodan is fun :P
[17:26:07] <FromDiscord> <Yardanico> not a lot of results, but still
[17:26:09] <FromDiscord> <Yardanico> http://103.107.181.156:5005/
[17:26:30] <FromDiscord> <Yardanico> http://159.138.5.194:8000/
[17:26:40] <FromDiscord> <haxscramper> sent a code paste, see https://play.nim-lang.org/#ix=3wUC
[17:26:47] <FromDiscord> <haxscramper> Idenical (obviously) produced code, but fails with gcc
[17:26:57] <FromDiscord> <Yardanico> what's your gcc version?
[17:27:07] <FromDiscord> <Yardanico> maybe somehow try a newer one
[17:27:08] <FromDiscord> <haxscramper> `gcc version 11.1.0 (GCC)`
[17:27:23] <FromDiscord> <Yardanico> it could either be: a bug in clang that it allows this to work, a bug in gcc that it doesn't allow this to work, or some other weird stuff
[17:27:26] <FromDiscord> <Yardanico> but nonetheless it's very fun
[17:27:30] <FromDiscord> <Yardanico> "fun"
[17:27:44] <PMunch> @Yardanico, shodan?
[17:27:48] <FromDiscord> <Yardanico> yes
[17:27:49] <FromDiscord> <Yardanico> shodan.io
[17:27:49] <FromDiscord> <haxscramper> I'm going to try tcc
[17:28:06] <FromDiscord> <Yardanico> a service that scans whole IPv4 space for devices and fetches device banners
[17:28:23] <FromDiscord> <Yardanico>  https://media.discordapp.net/attachments/371759389889003532/880073619479363604/unknown.png
[17:28:53] <FromDiscord> <Yardanico> seems like there are quite a lot of internet-facing chinese web services using httpbeast
[17:28:58] <FromDiscord> <Yardanico> i mean out of 16
[17:29:18] <FromDiscord> <Yardanico> and i meant hong kong as a part of china (pls no politics :P)
[17:30:14] <FromDiscord> <haxscramper> In reply to @haxscramper "I'm going to try": it fails, but also in different place
[17:30:18] <FromDiscord> <Yardanico> huh
[17:30:43] <FromDiscord> <haxscramper> I'm curious about differences in program control flow due to `!(((1 &((NU8)1<<((NU)((str).isSlice)&7U)))!=0))` code like this
[17:31:09] <FromDiscord> <haxscramper> And different "standart compliant C compilers" having varying interpretations of this
[17:31:35] <FromDiscord> <Yardanico> you can make a minimized C code version and check it on wandbox.org
[17:31:39] <PMunch> Huh, interesting
[17:31:39] <FromDiscord> <haxscramper> And no, I don't think I can minimize it
[17:31:40] <FromDiscord> <Yardanico> with different C compilers and their versions
[17:31:42] <FromDiscord> <haxscramper> Ah, C only
[17:31:59] <FromDiscord> <Yardanico> wandbox has GCC from the latest devel version to 1.27
[17:32:17] <FromDiscord> <Yardanico> @PMunch yeah, people over the years found a lot of "bad" things here
[17:32:22] <FromDiscord> <Yardanico> like exposed mongodb instances
[17:32:27] <FromDiscord> <Yardanico> VNC without passwords (you can still find those)
[17:32:32] <FromDiscord> <Rika> Lol
[17:33:28] <PMunch> Yikes
[17:33:29] <FromDiscord> <Yardanico> for vnc without password on port 5900 (but that's really for #offtopic ) https://media.discordapp.net/attachments/371759389889003532/880074906300211220/unknown.png
[17:33:38] <FromDiscord> <Yardanico> will continue the discussion about it there
[17:34:21] <FromDiscord> <enthus1ast> why discord and not matrix?
[17:34:25] <FromDiscord> <enthus1ast> Matrix is open
[17:34:33] <FromDiscord> <enthus1ast> discord is like the new facebook
[17:34:44] <FromDiscord> <Yardanico> isn't the offtopic channel bridged to matrix?
[17:35:59] <FromDiscord> <enthus1ast> never seen any traffic there\: https://matrix.to/#/#nim-offtopic:matrix.org
[17:36:10] <FromDiscord> <enthus1ast> but idn maybe this is the wrong room
[17:36:14] <FromDiscord> <Yardanico> isn't nim's matrix in the different server now
[17:36:27] <FromDiscord> <Yardanico> https://matrix.to/#/#nim:envs.net
[17:38:38] <FromDiscord> <enthus1ast> it should not make a difference when the servers are federated
[17:38:59] *** Joins: def- (~def-@static.238.114.9.176.clients.your-server.de)
[17:39:14] <FromDiscord> <Yardanico> well, but the channel can only be bridged to a matrix channel on one of the servers
[17:39:40] <FromDiscord> <haxscramper> In reply to @Yardanico "you can make a": ``c
[17:39:47] *** Joins: arkurious (~arkurious@user/arkurious)
[17:39:50] <FromDiscord> <haxscramper> sent a code paste, see https://play.nim-lang.org/#ix=3wUK
[17:39:53] <FromDiscord> <haxscramper> and of course it does not fail, who could've guessed
[17:40:24] <FromDiscord> <Yardanico> it gives me different results with gcc
[17:40:35] <FromDiscord> <Yardanico> 0 without any compiler flags and 235 (return code I guess? or something) with -Og
[17:41:06] <FromDiscord> <haxscramper> I don't `return` from main explicitly, so
[17:41:27] <FromDiscord> <Yardanico> ah right, it's just a random return value
[17:45:50] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:64af:236c:94c0:6372)
[17:58:23] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[17:59:52] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Client Quit)
[18:06:55] <FromDiscord> <Yardanico> https://news.ycombinator.com/item?id=28293836
[18:07:01] <FromDiscord> <Yardanico> "I am the Nelua author, and I've used Nim for a reasonable amount of time before creating Nelua, thus Nim served as one of the inspirations for the project and they share similarities. But while Nim resembles Python, Nelua resembles Lua. Also when comparing both, Nelua tries to be more minimal and generate more readable and compact C code."
[18:07:08] <FromDiscord> <Yardanico> Nim mentioned a few times in the comments regarding the GC
[18:21:46] <FromDiscord> <lamersc.com 🐧> In reply to @Yardanico ""I am the Nelua": Gave me a good chuckle this morning
[18:34:18] <FromDiscord> <haxscramper> If it compiled to lua it could be used instead of it
[18:36:15] *** Quits: PMunch (~PMunch@vpn.dualog.com) (Quit: Leaving)
[18:48:25] <FromDiscord> <lamersc.com 🐧> Why would they reinvent the wheel when there’s already languages targeting low level sectors of lua, such as https://terralang.org
[18:51:26] <FromDiscord> <Rika> another comment said this
[18:51:27] <FromDiscord> <Rika> "Telling a programmer there's already a library to do X is like telling a songwriter there's already a song about love." - Pete Cordell
[18:59:30] <FromDiscord> <tandy> i tried that
[19:00:43] <FromDiscord> <tandy> but its hard to know whether its actually working
[19:00:58] <FromDiscord> <lamersc.com 🐧> In reply to @Rika ""Telling a programmer there's": Yeah you bring a good point
[19:00:59] <FromDiscord> <tandy> because the json should be fixed
[19:01:10] <FromDiscord> <Rika> i am merely the messenger
[19:10:14] <FromDiscord> <haxscramper> sent a code paste, see https://play.nim-lang.org/#ix=3wVb
[19:30:14] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:64af:236c:94c0:6372) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[19:31:25] <NimEventer> New post on r/nim by binaryfor: An alternative Twitter front-end written in Nim, see https://reddit.com/r/nim/comments/pbczm8/an_alternative_twitter_frontend_written_in_nim/
[19:31:40] <FromDiscord> <Yardanico> well, we do know about nitter already :)
[19:32:00] <FromDiscord> <Yardanico> and the link is borked
[19:33:11] <FromDiscord> <Yardanico>  https://media.discordapp.net/attachments/371759389889003532/880105025878241380/unknown.png
[19:33:19] <FromDiscord> <Yardanico> my bot is too fast for those people :P
[19:33:25] <FromDiscord> <Yardanico> it doesn't give them any time to delete or edit
[19:33:26] <NimEventer> New post on r/nim by prefixcoder: How does standard `set` work?, see https://reddit.com/r/nim/comments/pbd24a/how_does_standard_set_work/
[19:33:36] <FromDiscord> <Yardanico> wow that is a nice coincidence
[19:33:47] <FromDiscord> <Yardanico> two reddit posts in a short amount of time
[19:34:20] <FromDiscord> <Recruit_main707> too mainstream, time to search for another language
[19:36:11] <FromDiscord> <xflywind> In reply to @Yardanico "well, we do know": I guess it is posted because nitter was on hackernews front page before.
[19:36:34] <FromDiscord> <xflywind> 19 hours ago
[19:36:36] <FromDiscord> <Yardanico> ah right seems like someone reposted it on HN again 19 hours ago
[19:36:53] <FromDiscord> <Ayy Lmao> Does anyone have any advice on how you would structure a gui library in nim? I'm looking for ideas.
[19:51:41] *** Joins: krux02 (~krux02@p200300e81719330059822492d9593bdc.dip0.t-ipconnect.de)
[19:53:29] <krux02> leoriz
[19:53:55] <krux02> sorry, accidental send, can't delete here on IRC
[19:55:26] *** Quits: max22- (~maxime@2a01cb08833598007e57431a6dc9d5b6.ipv6.abo.wanadoo.fr) (Quit: Leaving)
[19:57:08] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:64af:236c:94c0:6372)
[19:58:08] <FromDiscord> <tandy> is there a function for parsing bools from a string?
[19:58:13] <FromDiscord> <tandy> like "true" = 1?
[19:58:21] <FromDiscord> <tandy> im trying to write a jsony parsehook
[20:00:06] <FromDiscord> <tandy> https://nim-lang.org/docs/strutils.html#parseBool%2Cstring
[20:00:09] <FromDiscord> <tandy> yee
[20:06:43] <FromDiscord> <aep> hi i'm wondering if nim might be useful for microcontrollers, where we only have C.    Is compiling to C merely a temporary measure or is this its final form? the website only mentions x86
[20:09:24] <FromDiscord> <Rika> nim has been compiling to C for a long time already, im pretty sure it is its final form
[20:09:47] <FromDiscord> <Rika> extra backends are being proposed but i dont think that would usurp C
[20:09:54] <FromDiscord> <Rika> (edit) "extra backends are being proposed but i dont think that would usurp ... Cbackend" 03added "the" | "theC ... " 03added "backend"
[20:10:01] <FromDiscord> <xflywind> You can find many posts on Nim forum https://forum.nim-lang.org/t/7731
[20:11:07] <FromDiscord> <xflywind> https://forum.nim-lang.org/t/7636
[20:53:53] <NimEventer> New thread by Mareklachbc: What's Nim's equivalent of Python's append() method for lists?, see https://forum.nim-lang.org/t/8366
[21:03:31] <FromDiscord> <dankrad> I've encountered that this issue https://github.com/nim-lang/Nim/issues/15452 is also on arch linux, but it's closed. ↵Do I need to wait before someone reopened it, or can I create a pr nevertheless.
[21:22:42] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[21:36:02] <NimEventer> New post on r/nim by Ether-naut: Sequence allocations, see https://reddit.com/r/nim/comments/pbfiud/sequence_allocations/
[21:38:21] <arkanoid> could you give me an example on how can I unittest macros?
[21:40:26] *** Joins: dmu (~darkmusic@user/darkmusic)
[21:46:04] *** Quits: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca) (Quit: Konversation terminated!)
[21:46:20] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[21:56:39] <FromDiscord> <konsumlamm> that heavily depends on the macro
[22:02:42] <arkanoid> konsumlamm, macro that returns a procDef
[22:04:04] <FromDiscord> <konsumlamm> then test the generated proc?
[22:05:54] *** Quits: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca) (Ping timeout: 250 seconds)
[22:08:39] <arkanoid> konsumlamm, if the the proc is exported, so it fails to be generated within the test block
[22:10:06] <FromDiscord> <haxscramper> Then put things on the toplevel?
[22:10:07] <FromDiscord> <haxscramper> Or make `doExport: static[bool] = true` argument in macro
[22:17:37] <arkanoid> ok, got it, gonna take the long road :D
[22:19:22] <arkanoid> I have question. I'm using proc readFile to read file contents at compile time. It works, but if it raises exception it doesn't get catched and compilation fails
[22:19:39] <arkanoid> I though exceptions were suppoted at compile time
[22:21:23] <FromDiscord> <haxscramper> exceptions are supported at compile time
[22:21:24] <FromDiscord> <haxscramper> But if exception leaves macro body it is turned into compilation errors
[22:23:59] <FromDiscord> <Neko~Neko~ni> i am facing a problem and i think its linux specific(atleast it was with python),↵lets say i am running an infinite loop and taking input from user to do specific things like cmd,in cmd or↵terminal when you press the Up key,that returns the previous command BUT that does not happen when i use the Up key. it just shows me garbled characters(`^[[A`).in python i would import the famous linux specific module called readline to resolv
[22:24:08] <arkanoid> it doesn't leave macro body, is a straight try: parseXml(path.readFile) except: ...
[22:24:34] *** Joins: auxym_ (~francis@modemcable027.118-81-70.mc.videotron.ca)
[22:27:05] <FromDiscord> <haxscramper> and what `parseXml` is?
[22:27:37] <arkanoid> is in std/xmltree
[22:28:27] <arkanoid> argument calculated before it, am I wrong?
[22:28:57] <FromDiscord> <haxscramper> I mean, exceptions won't be transferred from compile-time to runtime if that's what you are implying
[22:29:39] <arkanoid> no, I just have a chain of try: .. except: try: ... except: ... in a single static: proc
[22:30:12] <FromDiscord> <Rika> In reply to @Neko~Neko~ni "i am facing a": the up key does not return "previous command". it is a feature of the shell (bash, fish, zsh)
[22:31:01] <FromDiscord> <Rika> the "garbled characters" is the characters that are actually sent by the terminal, the shell just interprets it as "last entry in history"
[22:31:13] <FromDiscord> <Rika> (edit) "is" => "are"
[22:31:13] <arkanoid> haxscramper, here https://play.nim-lang.org/#ix=3wWw
[22:31:31] <FromDiscord> <Rika> there is a linenoise implementation in nim
[22:31:39] <FromDiscord> <Rika> https://nim-lang.org/docs/linenoise.html
[22:31:45] <FromDiscord> <Rika> implementation -> wrapper
[22:31:52] <FromDiscord> <Rika> but there are also implementations
[22:32:27] <FromDiscord> <haxscramper> That runs at compile-time?↵(<@709044657232936960_arkanoid=5b=49=52=43=5d>)
[22:32:40] <FromDiscord> <haxscramper> s/parseXml/findXml/
[22:32:43] <FromDiscord> <haxscramper> sent a code paste, see https://paste.rs/sT2
[22:34:14] <FromDiscord> <Neko~Neko~ni> In reply to @Rika "the "garbled characters" are": i see,didn't knew about that,thanks alot
[22:34:30] <arkanoid> haxscramper, no, I call the findXml proc from a static: block
[22:35:08] <arkanoid> it works if it doesn't raise the exception (if it get the paths right on first shot)
[22:35:10] <FromDiscord> <Rika> @Neko~Neko~ni https://nim-lang.org/docs/linenoise.html
[22:35:20] <FromDiscord> <haxscramper> `static:` runs at compile-time
[22:35:48] <FromDiscord> <Rika> the garbled characters are called "terminal escape codes" i believe
[22:35:56] <arkanoid> exactly (am I misinterpreting your question?)
[22:35:57] <FromDiscord> <Rika> this is the reference i usually use https://www.csie.ntu.edu.tw/~r92094/c++/VT100.html
[22:37:40] <FromDiscord> <haxscramper> I don't understand the question then. You raise something in `static:` block, and don't handle it in the same static block, so things propagage upwards and turn into compilation error. Once the exception leaves the static block and turns into error, there is no way to catch it↵(<@709044657232936960_arkanoid=5b=49=52=43=5d>)
[22:37:47] <FromDiscord> <Neko~Neko~ni> In reply to @Rika "the garbled characters are": Been usin linux for a long time but didn't knew that it was a feature of shell.this isn't a problem in windows.i think this feature is already present in windows command-interpreter.
[22:37:58] <FromDiscord> <haxscramper> `static: assert arg is string` etc.
[22:38:02] <FromDiscord> <Rika> windows is, uh, different
[22:38:08] <FromDiscord> <Rika> and i am completely unfamiliar
[22:38:13] <FromDiscord> <Rika> so you will need to figure that out
[22:38:25] <FromDiscord> <haxscramper> Like, you need to run something at compile-time and then unittest it?
[22:38:49] <FromDiscord> <Neko~Neko~ni> i see,thanks anyway!
[22:39:03] <FromDiscord> <haxscramper> The original question was "It works, but if it raises exception it doesn't get catched and compilation fails. I though exceptions were suppoted at compile time" so I assumed you somehow want to catch/test the exception
[22:39:20] <arkanoid> haxscramper, no, you can see here that findXml proc has 3 nested try/except. If first one raises, it doesn't get to the second if findXml is called from a static block
[22:39:24] <arkanoid> https://play.nim-lang.org/#ix=3wWw
[22:40:21] <FromDiscord> <Neko~Neko~ni> one question more,is there an HTTP library like pythons requests,httpx?
[22:40:28] <FromDiscord> <Rika> httpclient
[22:40:30] <FromDiscord> <Neko~Neko~ni> in nim.
[22:40:33] <FromDiscord> <Rika> https://nim-lang.org/docs/httpclient.html
[22:40:43] <arkanoid> the logic is quite simple: try to load from compilation dir, if fails try load from cache dir, otherwise download it. While I don't expect it to reach the third option, it doesn't even get to the second
[22:40:48] <FromDiscord> <Rika> literally called httpclient
[22:41:04] <arkanoid> if I remove the first option it works
[22:44:41] <FromDiscord> <haxscramper> Can you make a reproducible example? It is possible you hit a bug, because nested exceptions work perfectly fine https://wandbox.org/permlink/wMeEVSBEVpvUfjo0
[22:45:15] <FromDiscord> <haxscramper> Also, does httpclient even work at compile-time? `newHttpClient(timeout = 10000).getContent(schemaLocation)`
[22:46:23] <FromDiscord> <haxscramper> And xml as well, IIRC it uses streams module
[22:46:34] <arkanoid> haxscramper, don't know, I was curious, but I spotted this problem before even reaching it. It's not required to trigger it. Let me reduce it
[22:46:39] <arkanoid> no, xml works at compile time
[22:46:49] <arkanoid> I've been using it a lot
[22:47:09] <arkanoid> talking about xmlparser, xmltree and strtabs
[22:52:30] <arkanoid> haxscramper, here's a minimal version https://play.nim-lang.org/#ix=3wWE
[22:52:39] <arkanoid> no xml, no httpclient, not even an import
[22:53:30] <arkanoid> not sure if it is worth posting, I fear the answer would be "you should use staticRead"
[22:53:51] <arkanoid> but this doesn't explain the broken exception handling
[22:55:02] <arkanoid> what do you suggest?
[22:55:45] <FromDiscord> <haxscramper> Start with minimized example a
[22:58:28] <arkanoid> haxscramper, I've already produced it https://play.nim-lang.org/#ix=3wWE
[23:01:22] <arkanoid> I'll post on the forum
[23:01:43] <FromDiscord> <haxscramper> I guess it is a bug then, because ten nested try-catch work ok https://wandbox.org/permlink/vDjDg5vVLYK9iQnl
[23:01:46] <FromDiscord> <haxscramper> but readFile fails
[23:01:51] <FromDiscord> <haxscramper> and `staticRead` also fails
[23:02:01] <FromDiscord> <haxscramper> But `staticRead` at least has correct stactrace
[23:04:16] <NimEventer> New thread by Giaco: Using readFile at compile time break exceptions, see https://forum.nim-lang.org/t/8367
[23:05:14] <arkanoid> may I post your wandbox link in forum thread?
[23:06:21] <FromDiscord> <haxscramper> yes, of course
[23:08:18] <arkanoid> thanks
[23:08:50] <arkanoid> have to go now, let's wait for more feedback. Thanks for the help
[23:11:52] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:64af:236c:94c0:6372) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[23:24:11] <FromDiscord> <ondrejoda> sent a code paste, see https://play.nim-lang.org/#ix=3wWP
[23:24:11] <FromDiscord> <ondrejoda> how can i fix this?
[23:30:12] <FromDiscord> <Yardanico> uint8 is not int
[23:30:20] <FromDiscord> <Yardanico> as it says "ptr int" you need var val: int
[23:30:25] <FromDiscord> <Yardanico> and then pass it with addr
[23:30:43] <FromDiscord> <ondrejoda> gives me
[23:30:46] <FromDiscord> <ondrejoda> sent a code paste, see https://play.nim-lang.org/#ix=3wWW
[23:30:56] <FromDiscord> <ondrejoda> `/home/ondrejoda/Nim/Zimmer/engine.nim(35, 28) Error: type mismatch: got <ptr array[0..512, uint8]> but expected 'int'`
[23:31:15] <FromDiscord> <ondrejoda> (edit) "https://play.nim-lang.org/#ix=3wWW" => "https://play.nim-lang.org/#ix=3wWX"
[23:31:18] <FromDiscord> <Yardanico> you're assigning to keyboard
[23:31:29] <FromDiscord> <Yardanico> getKeyboardState returns a pointer to an array
[23:31:35] <FromDiscord> <Yardanico> you can't assign it to keyboard itself
[23:32:30] <FromDiscord> <ondrejoda> got it
[23:32:37] <FromDiscord> <ondrejoda> thanks!
[23:47:20] <FromDiscord> <tandy> is it possible to store a large string as a hash in nim?
[23:47:27] <FromDiscord> <tandy> so i dont have to have a huge string in my test?
[23:50:36] <FromDiscord> <Yardanico> uh, what do you mean by that?
[23:51:04] <FromDiscord> <Yardanico> if your testing only needs a string's hash, then you can use the hash
[23:51:09] <FromDiscord> <Yardanico> but otherwise you need to have the string itself
[23:51:43] <FromDiscord> <tandy> well its json↵(@Yardanico)
[23:51:50] <FromDiscord> <Yardanico> well what exactly are you testing
[23:51:59] <FromDiscord> <tandy> i guess i could get away with calculating hashes
[23:52:01] <FromDiscord> <Yardanico> if you need the original string for the test, then  you obviously can't remove it
[23:52:39] <FromDiscord> <tandy> i want to make sure jsony is working so converting json to object, then object to json↵(@Yardanico)
[23:52:53] <FromDiscord> <Yardanico> well why don't you want to have the original string in the test?
[23:53:01] <FromDiscord> <tandy> just cos its so big
[23:53:04] <FromDiscord> <Yardanico> if you don't want to store it in the .nim file itself you can just put it to a different file
[23:53:07] <FromDiscord> <Yardanico> how big?
[23:53:09] <FromDiscord> <tandy> true
[23:53:15] <FromDiscord> <tandy> just like 50 lines or so lol
[23:53:22] <FromDiscord> <Yardanico> well, I mean file size
[23:53:31] <FromDiscord> <tandy> hmm
[23:53:33] <FromDiscord> <Yardanico> 50 lines is small :)
[23:53:42] <FromDiscord> <Yardanico> unless each line has like 5k characters
[23:54:01] <FromDiscord> <tandy> 500 bytes lol
[23:54:06] <FromDiscord> <Rika> small
[23:54:08] <FromDiscord> <lamersc.com 🐧> Waiting for the day we get a system programming dialect of html 👀
[23:54:12] <FromDiscord> <Yardanico> ?
[23:54:17] <FromDiscord> <Yardanico> use karax server-side rendering
[23:54:34] <FromDiscord> <lamersc.com 🐧> It was a joke :P
[23:54:40] <FromDiscord> <Yardanico> about wat? 🤔
[23:54:55] <FromDiscord> <lamersc.com 🐧> System programming html
[23:55:01] <FromDiscord> <lamersc.com 🐧> (edit) "System" => "Systems"
[23:56:01] <FromDiscord> <Yardanico> html is not a programming language
[23:57:15] <FromDiscord> <Recruit_main707> i guess thats the joke
[23:58:01] <FromDiscord> <Yardanico> a joke has to be at least a bit funny :/
[23:58:31] <FromDiscord> <lamersc.com 🐧> Jokes are subjective, no need to hurt my feelings 🥲
