[00:03:37] *** Quits: pntaylor (~quassel@101.113.78.104) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[00:05:16] *** Joins: aleek (~aleek@user-5-173-10-123.play-internet.pl)
[00:07:20] *** Quits: aleek (~aleek@user-5-173-10-123.play-internet.pl) (Client Quit)
[00:07:51] *** Joins: fkaa1mt (~fkaa1mt@84-115-210-21.cable.dynamic.surfer.at)
[00:08:15] *** Quits: fkaa1mt (~fkaa1mt@84-115-210-21.cable.dynamic.surfer.at) (Quit: Connection closed)
[00:15:03] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[00:16:10] *** Quits: intrac (~intracube@user/intracube) (Remote host closed the connection)
[00:16:55] *** Quits: Celmor[m] (~celmormat@2001:470:69fc:105::434) (Ping timeout: 268 seconds)
[00:17:24] *** Joins: intrac (~intracube@user/intracube)
[00:17:47] *** Quits: jake[m] (~skyblmatr@2001:470:69fc:105::1:173b) (Ping timeout: 260 seconds)
[00:17:47] *** Quits: YakoYoku (~yakoyoku@2001:470:69fc:105::780) (Ping timeout: 260 seconds)
[00:17:48] *** Quits: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce) (Ping timeout: 250 seconds)
[00:17:48] *** Quits: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b) (Ping timeout: 250 seconds)
[00:18:01] *** Quits: volgar1x (~volgar1xm@2001:470:69fc:105::e61d) (Ping timeout: 250 seconds)
[00:18:02] *** Quits: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b) (Ping timeout: 240 seconds)
[00:18:14] *** Quits: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6) (Ping timeout: 260 seconds)
[00:18:21] *** Joins: pa (~pah@user/pah)
[00:18:27] *** Quits: gnurou (~gnurou@2001:470:69fc:105::c23b) (Ping timeout: 250 seconds)
[00:18:33] <pa> hi folks, any1 using qsv acceleration?
[00:18:46] <pa> i'm having problems transcoding from a non-qsv decoder to a qsv encoder
[00:18:57] <pa> not sure how to specify hwupload
[00:19:19] *** Quits: sixecho (~sixecho@2001:470:69fc:105::32) (Ping timeout: 250 seconds)
[00:19:25] *** Quits: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2) (Ping timeout: 240 seconds)
[00:19:31] *** Quits: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904) (Ping timeout: 250 seconds)
[00:19:32] *** Quits: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc) (Ping timeout: 240 seconds)
[00:19:45] *** Quits: donza[m] (~donzamatr@2001:470:69fc:105::78f7) (Ping timeout: 250 seconds)
[00:19:45] *** Quits: kerel (~kerel@2001:470:69fc:105::2e1b) (Ping timeout: 250 seconds)
[00:19:45] *** Quits: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22) (Ping timeout: 250 seconds)
[00:19:49] *** Quits: boris[m] (~borisruna@2001:470:69fc:105::32f3) (Ping timeout: 240 seconds)
[00:19:57] *** Quits: kepstin (~kepstin@user/kepstin) (Ping timeout: 250 seconds)
[00:20:38] *** Quits: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a) (Ping timeout: 268 seconds)
[00:20:42] <pa> qsv to qsv works with -hwaccel qsv  -c:v h264_qsv -i <file> -vf "scale_qsv=854:-1"   -c:a opus -strict -2 -b:a 48K  -c:v hevc_qsv  -load_plugin hevc_hw -preset slow -global_quality 26
[00:21:37] *** Joins: jschwart (~quassel@2001:985:2c6e:0:b00b:32ff:fe28:5567)
[00:25:35] <BtbN> Just throw a hwupload filter in
[00:26:45] *** Joins: ChocolateArmpits (~Chocolate@95.173.33.173)
[00:28:39] <pa> i tried adding -vf "scale_qsv=640:-1,hwupload=extra_hw_frames=64,format=qsv" but then i get: [hwupload @ 0x5578463fc7c0] A hardware device reference is required to upload frames to.
[00:29:16] <BtbN> Why would you upload after a filter that wants it uploaded?
[00:29:47] <BtbN> Not sure how to initialize qsv, but try -init_hw_device qsv
[00:30:08] *** Quits: BtbN (btbn@ffmpeg/developer/btbn) (Remote host closed the connection)
[00:31:45] <pa> ah i see
[00:31:46] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:31:54] <pa> order is still unclear to me :)
[00:32:22] *** Joins: kepstin (~kepstin@user/kepstin)
[00:32:32] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[00:33:34] *** Joins: BtbN (btbn@ffmpeg/developer/btbn)
[00:34:47] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 268 seconds)
[00:35:04] *** Joins: boris[m] (~borisruna@2001:470:69fc:105::32f3)
[00:35:05] *** Quits: jschwart (~quassel@2001:985:2c6e:0:b00b:32ff:fe28:5567) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[00:36:41] *** Joins: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22)
[00:37:15] *** Joins: jschwart (~quassel@2001:985:2c6e:0:b00b:32ff:fe28:5567)
[00:37:36] <pa> thanks, that worked!
[00:38:06] *** Joins: af (~af@awalgarg.me)
[00:39:54] *** Joins: Celmor[m] (~celmormat@2001:470:69fc:105::434)
[00:40:33] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[00:44:39] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 250 seconds)
[00:47:04] *** Joins: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce)
[00:48:12] *** Quits: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com) (Read error: Connection reset by peer)
[00:49:58] *** Joins: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc)
[00:51:12] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-e987-051e-5e5c-2913.res6.spectrum.com)
[00:51:47] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Ping timeout: 265 seconds)
[00:52:07] *** Joins: fuzzybear3965 (~fuzzybear@185.38.217.76)
[00:52:20] <fuzzybear3965> Long-time ffmpeg CLI copy-pasta machine, here.
[00:52:56] <fuzzybear3965> I have a webcam mp4 that I want to overlay on a screencast mp4. They're recorded by the same software to different files (software doesn't support layouts).
[00:53:22] <fuzzybear3965> I want an ffmpeg command that I can take that will overlay the webcam footage on top of the webcam/screencast footage.
[00:53:45] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[00:54:04] <fuzzybear3965> Bonus points if the webcam footage is masked with a circle so that it overlays a circular webcam shot on top of the background screencast video..
[00:54:20] <fuzzybear3965> Codecs and containers are the same for both files. Durations are the same.
[00:54:30] <fuzzybear3965> Audio is only in the screencast file.
[00:54:35] <fuzzybear3965> So, we can copy audio and copy video.
[00:54:47] <fuzzybear3965> Does anyone know a magic incantation that I can use?
[01:01:25] *** Joins: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2)
[01:01:37] *** Joins: lavaball (felix@31.204.155.215)
[01:07:14] *** Joins: jake[m] (~skyblmatr@2001:470:69fc:105::1:173b)
[01:10:18] *** Joins: KhazAkar (~KhazAkar@217.96.207.76.ipv4.supernova.orange.pl)
[01:10:49] *** Joins: YakoYoku (~yakoyoku@2001:470:69fc:105::780)
[01:13:45] *** Quits: KhazAkar (~KhazAkar@217.96.207.76.ipv4.supernova.orange.pl) (Quit: KhazAkar)
[01:14:25] *** Joins: KhazAkar (~KhazAkar@217.96.207.76.ipv4.supernova.orange.pl)
[01:16:51] *** Joins: jarthur_ (~jarthur@2603-8080-1540-002d-71f8-eb14-0c59-711a.res6.spectrum.com)
[01:18:20] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[01:18:54] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-e987-051e-5e5c-2913.res6.spectrum.com) (Ping timeout: 260 seconds)
[01:19:19] *** Joins: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6)
[01:19:57] *** Joins: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b)
[01:21:58] *** Joins: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b)
[01:25:52] *** Joins: blinky42 (~quassel@jabber.blinkylight.net)
[01:25:52] *** Quits: blinky42 (~quassel@jabber.blinkylight.net) (Changing host)
[01:25:52] *** Joins: blinky42 (~quassel@user/blinky42)
[01:29:02] *** Quits: ChocolateArmpits (~Chocolate@95.173.33.173) (Ping timeout: 240 seconds)
[01:31:00] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[01:35:51] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[01:39:03] *** Quits: KhazAkar (~KhazAkar@217.96.207.76.ipv4.supernova.orange.pl) (Quit: KhazAkar)
[01:41:39] *** Joins: actinium (~actinium@gateway/tor-sasl/actinium)
[01:52:05] *** Quits: YakoYoku (~yakoyoku@2001:470:69fc:105::780) (Remote host closed the connection)
[01:52:06] *** Quits: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b) (Read error: Connection reset by peer)
[01:52:06] *** Quits: Celmor[m] (~celmormat@2001:470:69fc:105::434) (Read error: Connection reset by peer)
[01:52:06] *** Quits: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce) (Remote host closed the connection)
[01:52:06] *** Quits: boris[m] (~borisruna@2001:470:69fc:105::32f3) (Write error: Connection reset by peer)
[01:52:07] *** Quits: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2) (Read error: Connection reset by peer)
[01:52:07] *** Quits: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc) (Read error: Connection reset by peer)
[01:52:07] *** Quits: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b) (Remote host closed the connection)
[01:52:08] *** Quits: jake[m] (~skyblmatr@2001:470:69fc:105::1:173b) (Write error: Connection reset by peer)
[01:52:08] *** Quits: kepstin (~kepstin@user/kepstin) (Read error: Connection reset by peer)
[01:52:09] *** Quits: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a) (Read error: Connection reset by peer)
[01:52:09] *** Quits: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22) (Read error: Connection reset by peer)
[01:52:10] *** Quits: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6) (Write error: Connection reset by peer)
[01:53:10] <BtbN> You can't copy video. Overlaying very much needs a full re-encode.
[01:53:17] *** Joins: kepstin (~kepstin@user/kepstin)
[01:53:34] <BtbN> The overlay filter can do that, but not in a circle.
[01:53:49] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[01:54:01] *** Joins: jake[m] (~skyblmatr@2001:470:69fc:105::1:173b)
[01:54:15] *** Joins: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b)
[01:54:15] *** Joins: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22)
[01:54:15] *** Joins: sixecho (~sixecho@2001:470:69fc:105::32)
[01:54:28] *** Joins: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce)
[01:54:28] *** Joins: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2)
[01:54:42] *** Joins: gnurou (~gnurou@2001:470:69fc:105::c23b)
[01:54:43] *** Joins: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc)
[01:54:43] *** Joins: YakoYoku (~yakoyoku@2001:470:69fc:105::780)
[01:54:43] *** Joins: volgar1x (~volgar1xm@2001:470:69fc:105::e61d)
[01:54:55] *** Joins: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b)
[01:55:07] *** Joins: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904)
[01:55:07] *** Joins: boris[m] (~borisruna@2001:470:69fc:105::32f3)
[01:55:07] *** Joins: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6)
[01:55:08] *** Joins: kerel (~kerel@2001:470:69fc:105::2e1b)
[01:55:08] *** Joins: Celmor[m] (~celmormat@2001:470:69fc:105::434)
[01:55:19] *** Joins: donza[m] (~donzamatr@2001:470:69fc:105::78f7)
[01:56:27] *** Quits: luni-4 (uid453292@id-453292.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[02:03:47] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[02:08:32] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[02:08:52] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[02:10:27] *** Joins: Hackerpcs (~user@user/hackerpcs)
[02:14:53] <fuzzybear3965> Oh, you're right.
[02:15:09] <fuzzybear3965> Okay, do you know how to configure the filter pipeline for something like this?
[02:15:23] <fuzzybear3965> Because, honestly, the syntax for ffmpeg filter chains has always scared me.
[02:15:37] <fuzzybear3965> BtbN, thanks for getting back to me!
[02:16:21] *** Quits: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22) (Quit: Client limit exceeded: 20000)
[02:16:39] *** Quits: sixecho (~sixecho@2001:470:69fc:105::32) (Quit: Client limit exceeded: 20000)
[02:16:41] *** Quits: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6) (Quit: Client limit exceeded: 20000)
[02:17:04] *** Quits: kepstin (~kepstin@user/kepstin) (Quit: Client limit exceeded: 20000)
[02:17:11] *** Quits: Celmor[m] (~celmormat@2001:470:69fc:105::434) (Quit: Client limit exceeded: 20000)
[02:17:15] *** Quits: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2) (Quit: Client limit exceeded: 20000)
[02:17:49] *** Quits: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a) (Quit: Client limit exceeded: 20000)
[02:17:56] *** Quits: volgar1x (~volgar1xm@2001:470:69fc:105::e61d) (Quit: Client limit exceeded: 20000)
[02:17:59] *** Quits: jake[m] (~skyblmatr@2001:470:69fc:105::1:173b) (Quit: Client limit exceeded: 20000)
[02:18:14] *** Quits: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b) (Quit: Client limit exceeded: 20000)
[02:18:15] *** Quits: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc) (Quit: Client limit exceeded: 20000)
[02:18:16] *** Quits: kerel (~kerel@2001:470:69fc:105::2e1b) (Quit: Client limit exceeded: 20000)
[02:18:28] *** Quits: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce) (Quit: Client limit exceeded: 20000)
[02:18:54] *** Quits: gnurou (~gnurou@2001:470:69fc:105::c23b) (Quit: Client limit exceeded: 20000)
[02:19:03] *** Quits: boris[m] (~borisruna@2001:470:69fc:105::32f3) (Quit: Client limit exceeded: 20000)
[02:19:03] <actinium> I use ffmpeg to rip blurays without having to create an intermediate file using dd or makemkv (ffmpeg -i bluray:/dev/sr0), but since I use a slow/sometimes unreliable external drive the input stream can be unstable leading to duplicate frames, etc.). Is there a way to fix that (wait for the drive instead of skipping frames) directly in ffmpeg or by piping the output of another program?
[02:19:04] *** Joins: kepstin (~kepstin@user/kepstin)
[02:19:11] *** Quits: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b) (Quit: Client limit exceeded: 20000)
[02:19:18] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[02:19:36] *** Quits: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904) (Quit: Client limit exceeded: 20000)
[02:19:37] *** Joins: jake[m] (~skyblmatr@2001:470:69fc:105::1:173b)
[02:19:52] *** Joins: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b)
[02:19:53] *** Joins: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22)
[02:19:59] *** Quits: donza[m] (~donzamatr@2001:470:69fc:105::78f7) (Quit: Client limit exceeded: 20000)
[02:20:07] *** Joins: sixecho (~sixecho@2001:470:69fc:105::32)
[02:20:25] *** Joins: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce)
[02:20:38] *** Joins: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2)
[02:20:52] *** Joins: gnurou (~gnurou@2001:470:69fc:105::c23b)
[02:20:52] *** Joins: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc)
[02:20:52] *** Joins: volgar1x (~volgar1xm@2001:470:69fc:105::e61d)
[02:21:05] *** Joins: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b)
[02:21:17] *** Joins: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904)
[02:21:17] *** Joins: boris[m] (~borisruna@2001:470:69fc:105::32f3)
[02:21:31] *** Joins: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6)
[02:21:44] *** Joins: kerel (~kerel@2001:470:69fc:105::2e1b)
[02:21:44] *** Joins: Celmor[m] (~celmormat@2001:470:69fc:105::434)
[02:21:56] *** Joins: donza[m] (~donzamatr@2001:470:69fc:105::78f7)
[02:27:25] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 240 seconds)
[02:39:16] *** Joins: KombuchaKip (~kip@192.252.230.5)
[02:51:39] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 265 seconds)
[02:52:12] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[02:55:06] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[02:55:47] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Quit: WeeChat 3.3)
[02:56:54] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 260 seconds)
[02:59:03] <jarthur_> actinium are you seeing "frame duplication too large, skipping" in the logs?
[02:59:08] *** jarthur_ is now known as jarthur
[02:59:58] <jarthur> And you're using the -playlist option?
[03:03:21] <actinium> I don't see errors in the log. Yes, I'm using the playlist option.
[03:03:39] *** Joins: thefuzz (~fuzzybear@88.155.97.241)
[03:05:17] <actinium> I don't see errors, but when I hear the drive struggling to read the disc the output stream often has duplicated frames
[03:05:43] *** Quits: fuzzybear3965 (~fuzzybear@185.38.217.76) (Ping timeout: 250 seconds)
[03:07:09] <actinium> if I copy the disc with dd or ddrescue first everything works, but I don't want to write hundreds of GB everyday to my old SSD...
[03:09:54] *** Joins: fuzzybear (~fuzzybear@185.38.217.76)
[03:09:54] *** Quits: thefuzz (~fuzzybear@88.155.97.241) (Read error: Connection reset by peer)
[03:14:37] *** Quits: a0z (~a0z@90.244.184.28) (Ping timeout: 240 seconds)
[03:28:44] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[03:30:53] *** Quits: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com) (Quit: Client closed)
[03:31:05] *** Joins: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com)
[03:33:22] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[03:35:10] *** Quits: dreamon (~dreamon@pd9503edd.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[03:35:38] *** Quits: c7s (~c7s@user/c7s) (Ping timeout: 256 seconds)
[03:38:44] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[03:45:37] *** Quits: Jerrrk (~Jerrk@193.138.218.223) (Read error: Connection reset by peer)
[03:46:24] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[03:48:32] *** Joins: thefuzz (~fuzzybear@185.38.217.76)
[03:48:32] *** Quits: fuzzybear (~fuzzybear@185.38.217.76) (Read error: Connection reset by peer)
[03:51:17] *** Quits: palasso (~palasso@user/palasso) (Quit: I am not a quitter!)
[04:00:21] <bencc1> is it possible to make x11grab use less cpu?
[04:00:54] *** Joins: Jerrk (~Jerrk@193.138.218.223)
[04:01:42] <bencc1> I'm using:
[04:01:44] <bencc1> -f x11grab -draw_mouse 0 -framerate 25 -video_size 1280x720 -i :0.0+0,0 -vcodec libx264 -pix_fmt yuv420p -preset:v veryfast -crf 23 -vf fps=25
[04:01:52] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[04:02:09] <bencc1> tried preset ultrafast and crf 17 but it use more cpu. not sure why
[04:03:26] <furq> try superfast
[04:03:42] <furq> also get rid of -vf fps
[04:04:54] <bencc1> I'll try superfast. why is it better then ultrafast?
[04:05:15] <bencc1> what's wrong with -vf fps=25?
[04:05:24] <furq> it's redundant if you set -framerate 25
[04:05:29] <furq> although that is a weird framerate to capture at
[04:05:33] <bencc1> without it I think the resulted fps wasn't constant
[04:05:45] <bencc1> what's wrong with 25 fps?
[04:05:57] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 250 seconds)
[04:06:03] <furq> what refresh rate is your screen
[04:06:04] <jarthur> actinium sorry, I don't have any good advice. ffmpeg doesn't expose much of libblurray options for speed or error correction if there are any to expose, so if the back and forth with the input is the issue, I don't know. I would at least make sure your OS hasn't mounted some form of file system from sr0 to avoid cross-contamination.
[04:06:20] <furq> if it's 75 or 125hz then i guess 25fps works
[04:06:29] <bencc1> I'm capturing a webcam that use less then 30 fps
[04:06:40] <bencc1> no reason to capture high framerate
[04:07:02] <bencc1> I'm using a virtual screen - Xvfb
[04:07:13] <bencc1> does it have equivalent framerate?
[04:07:32] <furq> no idea i don't use desktop linux
[04:07:41] <actinium> jarthur: ok thanks
[04:07:58] <furq> i would assume it's better if the capture framerate is at least cleanly divisible by your refresh rate
[04:08:58] <furq> not sure why ultrafast is slower than veryfast, i was just saying there's another one between the two
[04:09:04] <furq> or why it would be. it's not meant to be
[04:11:40] <bencc1> is there a bottleneck when running several instances of ffmpeg?
[04:12:08] <bencc1> I'm running several docker containers, each with ffmpeg that capture the screen
[04:12:47] <bencc1> it doesn't scale as I would expect. when I'm using N cpu cores I can only run N/2 docker containers with ffmpeg
[04:24:52] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Quit: leaving)
[04:25:07] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[04:27:40] <klaxa> how fast is your disk?
[04:36:03] <bencc1> nvme
[04:36:11] <bencc1> didn't test it but I assume it is very fast
[04:36:14] <bencc1> should I test?
[04:36:31] <furq> are you capping the number of threads libx264 uses
[04:37:09] <bencc1> furq: not when I capture
[04:37:13] <furq> or are you using any cpu affinity stuff with your containers
[04:37:21] <bencc1> I don't use cpu affinity
[04:37:28] <furq> yeah that's not good
[04:37:35] <furq> you should set -threads when capturing if you're running multiple jobs concurrently
[04:37:52] <bencc1> how many threads? 1 per ffmpeg capture?
[04:38:21] <furq> how many cores do you have and how many captures are you running
[04:38:27] <bencc1> I thought that screen capture is a fixed job so it doesn't matter if I limit threads or not
[04:39:15] <bencc1> I'm using amd 5950X - 16 cores / 32 threads
[04:39:30] <furq> it shouldn't matter too much for throughput but it'll stop each x264 spawning 48 threads
[04:39:35] <furq> which is going to wreck your cache
[04:39:37] <bencc1> 12 containers, each with 1 ffmpeg capture works fine
[04:40:19] <bencc1> but when I go to 16 containers I start to have cpu load issue
[04:40:28] <furq> try with 2 to 4 threads
[04:40:39] <furq> -threads as an output option
[04:40:47] <bencc1> is there a way to check how many threads ffmpeg in a container is actively using now?
[04:40:54] <furq> htop
[04:41:01] *** Quits: darkapex_ (~darkapex@user/darkapex) (Ping timeout: 240 seconds)
[04:41:05] <bencc1> ok
[04:41:18] <furq> but if your containers aren't bound to cores then i can tell you each one is using 48 encoding threads
[04:41:22] <bencc1> do I need -threads once or twice for audio and video?
[04:41:23] <furq> x264 defaults to logical cores * 1.5
[04:41:34] <bencc1> wow. that could be bad
[04:41:40] *** Joins: darkapex (~darkapex@user/darkapex)
[04:41:57] <bencc1> most of the time everything is fine but I have spikes of cpu for several minutes
[04:41:57] <furq> i don't think any audio encoders are multithreaded anyway
[04:42:08] <bencc1> and I also see that number of running processes go x10 up
[04:42:10] <furq> and you don't need to care about decoder threads because it's x11grab
[04:42:52] <bencc1> ok. I'll test with -threads 2 or 4
[04:42:54] <bencc1> thanks
[04:43:01] <furq> four threads ought to be fine for 720p on that cpu
[04:44:30] <bencc1> ps huH p <PID_OF_FFMPEG> | wc -l
[04:44:33] <bencc1> gives me 96
[04:44:57] <bencc1> does this means that a single ffmpeg instance is using 96 threads?
[04:47:51] <bencc1> how do I know how many threads I need?
[04:47:58] <bencc1> what happens if I give it too little?
[04:49:25] <bencc1> on my local machine with 4 cores without setting -threads I'm getting 21 threads for the ffmpeg process
[04:49:38] <bencc1> when setting -threads 4 I'm getting 15
[04:49:44] <bencc1> why 15 and not 4?
[04:51:07] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[04:55:23] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 252 seconds)
[04:58:47] <bencc1> furq: limiting the threads is a great suggestion
[04:59:01] <bencc1> how can I know how many threads to use by minimum?
[04:59:19] <bencc1> and why do I see much more threads than the 4 limit I use?
[04:59:48] <bencc1> I understand that there is also 1 main thread, 1 thread for audio, probably 2 more threads for decoding audio and video
[04:59:50] <bencc1> but why 15?
[05:00:58] <BtbN> Encoders and filters will do what they want
[05:01:10] <BtbN> if you got a bunch of filters, all with 4 threads, and libx264, you easily end up with a ton
[05:01:18] <BtbN> external libs do whatever they want in general
[05:04:30] <bencc1> BtbN: ok
[05:04:41] <bencc1> how can I tell how many threads to use for encoding x264 720p?
[05:04:52] <bencc1> furq suggested 2 or 4 but how can I tell?
[05:05:01] *** Joins: lucaswang (~lucaswang@58.246.19.98)
[05:06:14] <BtbN> However many you like really?
[05:06:29] <BtbN> If you want it to go fast, let it use all cores.
[05:06:46] <bencc1> I do realtime screen capture
[05:06:56] <bencc1> so using all cores doesn't help
[05:07:04] <BtbN> What do you mean?
[05:07:15] <bencc1> -f x11grab -draw_mouse 0 -framerate 25 -video_size 1280x720 -i :0.0+0,0 -vcodec libx264 -pix_fmt yuv420p -preset:v veryfast -crf 23 -vf fps=25
[05:07:30] <bencc1> I capture a virtual xvfb screen with ffmpeg
[05:07:41] <bencc1> so having too many threads doesn't help
[05:07:42] <BtbN> I don't see how that's related to thread count
[05:08:22] <bencc1> I want to use the minimum required threads so I can run multiple ffmpeg instances concurrently
[05:08:36] <BtbN> The minimum required number of threads is 1.
[05:09:40] <bencc1> but I encode in real time
[05:09:41] <BtbN> I really don't understand what you're going at. The amount of instances you can run doesn't notably change
[05:10:00] <BtbN> It's not like ffmpeg exclusively reserves the CPU cores
[05:10:06] <bencc1> I'm using ffmpeg to capture the screen and audio and encode it to a video file
[05:10:16] <BtbN> Yes, you keep saying that...
[05:10:27] <bencc1> I'm running multiple instances inside docker at the same time
[05:10:34] *** Quits: admal (~admal@gateway/tor-sasl/admal) (Remote host closed the connection)
[05:10:40] <bencc1> I'm expecting to be able to run N instances but able to only run N/2
[05:10:58] <actinium> jarthur: I get duplicate frames when encoding media.xiph.org test clips too, so it's actually unrelated to my bluray drive. Turns out that only my AV1 encodes are affected by the frame skip/duplicate problem (I mostly use rav1e, but I have this issue regardless of the encoder). It happens in VLC, mpv and web browsers (VIVICT comparison tool in Firefox: desync vs. source). Weird.
[05:10:58] <BtbN> If your CPU isn't fast enough to handle that many, there's not much you can do.
[05:10:58] <bencc1> furq suggested to limit the number of threads
[05:11:09] <bencc1> it is fast enoguh
[05:11:15] <BtbN> What makes you think that?
[05:11:18] <bencc1> but I'm probably creating a bottleneck
[05:11:48] <bencc1> I have virtual machines with 1/4 number of cores which can run 6 ffmpeg instances
[05:12:08] <actinium> I will try decoding the same files with libaom instead of dav1d.
[05:12:12] <bencc1> so I expect to be able to run 6*4 ffmpeg instances but I can only run 6*2
[05:12:24] <BtbN> 10 ffmpeg instances with 10 threads, each using 10% of each of 10 cores is not all that difference from 10 instances with each one thread which uses 100% of one core.
[05:12:31] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[05:12:38] <bencc1> sure
[05:12:59] <bencc1> unless many threads creates a bottleneck that few threads wouldn't
[05:13:12] <BtbN> That's not how that works.
[05:13:29] <BtbN> I'd also expect X to slow to a crawl if that many ffmpeg processes are constantly grabbing frames.
[05:13:35] <BtbN> So likely your issue is elsewhere.
[05:13:47] <BtbN> Is your CPU even maxed out? Or are you stuck in IO?
[05:13:58] <bencc1> it's a virtual screen - xvfb
[05:14:15] <jarthur> actinium interesting. Keep an eye out for dup= and drop= in the ffmpeg output for either encode or decode operation
[05:14:26] <bencc1> IO is negligible if I'm testing correctly
[05:14:46] <bencc1> I don't think a virtual xvfb screen has a bottleneck but I might be wrong
[05:14:55] <BtbN> 24 ffmpeg processes writing a video file to the same disk can be quite some random IO
[05:15:25] <BtbN> And 24 ffmpeg processes pulling on the same X-Server could also impact it quite a bit. That's not exactly what it's made for.
[05:15:34] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[05:16:43] <actinium> jarthur no dup, drop or error according to ffmpeg
[05:16:52] <bencc1> so it might be better to create severl virtual machines on the physical server?
[05:17:02] <another|> actinium: is that with libaom?
[05:17:03] <BtbN> What?
[05:17:07] <bencc1> BtbN: I thought that each docker container use a separate X
[05:17:25] <BtbN> docker generally does not use or interact with X at all, so no idea what you're doing.
[05:17:28] <actinium> another| with dav1d
[05:17:59] <BtbN> But there's really only 3 things that can slow you down. Either CPU power, speed of the input, or speed of the output
[05:18:40] <BtbN> So if you really got 24 ffmpeg instances writing video files to the same disk, specially if it's a spinning disk or cheapish SATA SSD, that can very much be your bottleneck.
[05:20:52] <bencc1> it's a fast nvme disk
[05:24:53] <jarthur> actinium any -r rates or -vsync in your options or decimate, detelicine, etc in your filter path?
[05:24:56] <actinium> ffplay can read the files just fine with both decoders, but in vlc and firefox/chromium (vivict) there's a weird desync vs. the source.
[05:30:14] *** Quits: emcodem (uid483343@id-483343.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[05:32:31] <actinium> jarthur no ("ffmpeg -i bluray:/dev/sr0 -c:v librav1e -speed 6 -tiles 4 -qp 100 -ac 2 -c:a libopus -b:a 96k output.mkv") and the frame-by-frame mode of ffplay works as intended unlike vlc and the vivict tool in firefox/chromium
[05:38:12] <actinium> vlc and vivict (firefox/chromium) allow for frame accurate seeking in frame-by-frame mode with h264 and h265 clips
[05:45:59] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[05:50:30] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 260 seconds)
[05:55:48] <jarthur> actinium gotcha. You may have reached beyond #ffmpeg's help unless someone here knows some AV1 decoding quirks. I'd try fiddling with Chrome or VLC's Hardware decode toggles or VLC's cache sizes in case it's just a system resources issue. Watch memory to make sure you're not swapping. Probably not an issue, but -speed is a popular ffmpeg option, you might consider assigning it to a stream to avoid ambiguity,
[05:55:49] <jarthur>  e.g. -speed:v:0 6
[06:19:28] *** Joins: thespikedballofd (~thespiked@pool-100-40-37-194.prvdri.fios.verizon.net)
[06:20:43] <thespikedballofd> Hi
[06:21:09] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[06:21:32] <thespikedballofd> I have this command im running on videos to compress them [ffmpeg -i "x.mp4" -vcodec libx264 -acodec aac -movflags +faststart -crf 25 "o"] but whenever i post them in discord the thumbnail is just a gray screen
[06:21:40] <thespikedballofd> Is there some way to fix that?
[06:25:30] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 260 seconds)
[06:26:48] *** Joins: feiw (~Fei.Wang@192.55.46.52)
[06:29:59] <jarthur> thespikedballofd I don't know what discord uses to derive the thumbnail if anything. If it looks for the cover image in the MPEG4 container, that is supported now. See -disposition in Main Options for an example (replace IMAGE with your desired cover image):
[06:30:01] <jarthur> https://www.ffmpeg.org/ffmpeg.html#Main-options
[06:31:43] <jarthur> To test, you should see that same image as the thumbnail in Apple Finder or VLC Media Information (while clip is playing or paused)
[06:34:33] <jarthur> I think MPEG 4 requires PNG or JPEG
[06:42:45] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[06:53:35] <tuxd3v> hello, I would love to filter out the noise that my computer and such make around
[06:53:56] <tuxd3v> is there any good filters, only to play the voice?
[06:55:25] <tuxd3v> abstudio, and a noise supression filter, with method RnNoise( higher CPU ), which does underfull with audio
[06:55:33] <tuxd3v> obstudio*
[07:00:25] *** Quits: jos1 (~jos3@host-091-097-189-111.ewe-ip-backbone.de) (Ping timeout: 252 seconds)
[07:10:29] *** Quits: thespikedballofd (~thespiked@pool-100-40-37-194.prvdri.fios.verizon.net) (Quit: Connection closed)
[07:12:00] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[07:13:57] *** Joins: jos1 (~jos3@dyndsl-178-142-064-248.ewe-ip-backbone.de)
[07:16:52] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[07:22:54] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 250 seconds)
[07:23:11] *** Joins: darkapex (~darkapex@user/darkapex)
[07:36:23] *** Joins: darkapex_ (~darkapex@user/darkapex)
[07:36:26] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 260 seconds)
[07:47:15] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[07:51:38] *** Quits: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com) (Remote host closed the connection)
[07:52:00] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[07:52:15] *** Quits: actinium (~actinium@gateway/tor-sasl/actinium) (Ping timeout: 276 seconds)
[08:00:00] *** Joins: actinium (~actinium@gateway/tor-sasl/actinium)
[08:19:22] *** Quits: af (~af@awalgarg.me) (Ping timeout: 260 seconds)
[08:19:42] *** Joins: af (~af@awalgarg.me)
[08:20:59] *** Quits: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu) (Ping timeout: 268 seconds)
[08:22:22] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[08:25:29] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:26:54] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[08:33:49] *** Quits: Keshl (~Purple@idlerpg/player/Keshl) (Read error: Connection reset by peer)
[08:34:01] *** Joins: Keshl (~Purple@idlerpg/player/Keshl)
[08:36:07] *** Quits: jab416171 (~jab416171@c-174-52-177-39.hsd1.ut.comcast.net) (Ping timeout: 252 seconds)
[08:41:34] *** Joins: jab416171 (~jab416171@c-174-52-177-39.hsd1.ut.comcast.net)
[09:03:06] *** Quits: admal (~admal@gateway/tor-sasl/admal) (Ping timeout: 276 seconds)
[09:10:47] *** Quits: lucaswang (~lucaswang@58.246.19.98) (Ping timeout: 250 seconds)
[09:13:01] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[09:17:11] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 252 seconds)
[09:25:49] *** Quits: Atsuko (~x@94.242.250.86) (Ping timeout: 240 seconds)
[09:52:19] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:53:08] *** Joins: dreamon (~dreamon@pd9503edd.dip0.t-ipconnect.de)
[10:02:49] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[10:07:02] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[10:07:08] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 265 seconds)
[10:10:42] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[10:12:33] *** Quits: vulpine (~xfnw@pool-71-246-231-249.washdc.fios.verizon.net) (Ping timeout: 252 seconds)
[10:14:54] *** Joins: vulpine (~xfnw@pidgin.owen.bellz.org)
[10:17:57] *** Quits: vulpine (~xfnw@pidgin.owen.bellz.org) (Max SendQ exceeded)
[10:20:35] *** Joins: vulpine (~xfnw@pidgin.owen.bellz.org)
[10:21:43] *** Quits: vulpine (~xfnw@pidgin.owen.bellz.org) (Max SendQ exceeded)
[10:23:41] *** Joins: vulpine (~xfnw@pidgin.owen.bellz.org)
[10:36:02] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:181c:e491:2cb7:3e4a) (Ping timeout: 268 seconds)
[10:45:40] *** Joins: Atsuko (~x@94.242.250.86)
[10:54:48] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[10:58:45] *** Quits: dreamon (~dreamon@pd9503edd.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[10:58:55] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 250 seconds)
[11:04:32] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[11:11:37] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[11:11:41] *** Joins: softworkz_ (~softworkz@user/softworkz)
[11:11:41] *** Quits: softworkz (~softworkz@user/softworkz) (Killed (strontium.libera.chat (Nickname regained by services)))
[11:11:41] *** softworkz_ is now known as softworkz
[11:13:27] *** Joins: taupiqueur (~taupiqueu@180.197.204.77.rev.sfr.net)
[11:20:18] *** Quits: taupiqueur (~taupiqueu@180.197.204.77.rev.sfr.net) (Ping timeout: 256 seconds)
[11:32:13] *** Joins: dreamon (~dreamon@ppp-88-217-95-198.dynamic.mnet-online.de)
[11:43:17] *** Joins: palasso (~palasso@user/palasso)
[11:45:06] *** Joins: lavaball (~Melissa@31.204.155.215)
[11:49:40] *** Joins: cmp (~cmp@lfbn-ren-1-1468-31.w90-27.abo.wanadoo.fr)
[11:55:27] *** Joins: emcodem (uid483343@id-483343.helmsley.irccloud.com)
[12:12:33] *** Joins: anotheruser (~user@197.54.98.58)
[12:15:56] *** Quits: someuser (~user@197.54.29.12) (Ping timeout: 268 seconds)
[12:16:35] *** Quits: Lazenca (~lazenca@user/lazenca) (Remote host closed the connection)
[12:17:34] *** Quits: thefuzz (~fuzzybear@185.38.217.76) (Quit: Leaving)
[12:24:48] *** Quits: feiw (~Fei.Wang@192.55.46.52) (Quit: Leaving)
[12:29:15] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Ping timeout: 250 seconds)
[12:30:23] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[12:44:47] *** Joins: taupiqueur (~taupiqueu@169.106.204.77.rev.sfr.net)
[12:45:14] *** Quits: hpkn (~hpkn@gateway/tor-sasl/hpkn) (Remote host closed the connection)
[12:58:42] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[13:11:22] *** Joins: Atsuko_ (~x@94.242.254.66)
[13:11:32] *** Joins: Gaboradon (~Gaboradon@cpe-86-58-57-5.static.triera.net)
[13:12:54] *** Quits: Atsuko (~x@94.242.250.86) (Ping timeout: 260 seconds)
[13:14:26] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[13:14:54] *** Joins: lavaball (felix@31.204.155.215)
[13:30:23] *** Joins: Volgaar (~volgaar@gw.lipn.univ-paris13.fr)
[13:34:31] *** Joins: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3)
[14:02:57] *** Parts: actinium (~actinium@gateway/tor-sasl/actinium) (Leaving)
[14:12:21] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-71f8-eb14-0c59-711a.res6.spectrum.com) (Quit: jarthur)
[14:16:07] *** Joins: hpkn (~hpkn@gateway/tor-sasl/hpkn)
[14:37:26] *** Quits: treefrob (~treefrob@p57a9652c.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[14:37:50] *** Joins: treefrob (~treefrob@p57a9652c.dip0.t-ipconnect.de)
[14:45:15] *** Quits: softworkz (~softworkz@user/softworkz) (Remote host closed the connection)
[14:45:40] *** Joins: softworkz (~softworkz@user/softworkz)
[14:55:56] *** Joins: a0z (~a0z@90.244.184.28)
[14:58:44] *** Quits: carwash (~jwash@c-73-254-46-148.hsd1.wa.comcast.net) (Ping timeout: 252 seconds)
[15:02:11] *** Joins: jwash (~jwash@c-73-254-46-148.hsd1.wa.comcast.net)
[15:11:08] *** Joins: darkapex (~darkapex@user/darkapex)
[15:11:45] *** Quits: darkapex_ (~darkapex@user/darkapex) (Ping timeout: 250 seconds)
[15:14:51] *** Quits: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com) (Quit: Client closed)
[15:15:14] *** Joins: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com)
[15:19:39] *** Quits: Stalker (~Stalker@89.201.5.246) (Read error: Connection reset by peer)
[15:19:56] *** Joins: Stalker (~Stalker@89.201.5.246)
[15:21:02] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:fcc3:c2aa:476f:b540)
[15:42:23] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[15:46:59] *** Quits: cmp (~cmp@lfbn-ren-1-1468-31.w90-27.abo.wanadoo.fr) (Quit: Connection closed)
[15:47:11] *** Joins: cmp (~cmp@lfbn-ren-1-1468-31.w90-27.abo.wanadoo.fr)
[16:01:46] *** Joins: vivek599 (~kvirc@119.82.86.72)
[16:01:52] *** Joins: xkuru (~xkuru@user/xkuru)
[16:08:03] *** Parts: JustLandedOnMars (question@user/question) ()
[16:28:32] *** Quits: Volgaar (~volgaar@gw.lipn.univ-paris13.fr) (Ping timeout: 240 seconds)
[16:30:26] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[16:31:54] *** Joins: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr)
[16:36:37] *** Joins: xkuru (~xkuru@user/xkuru)
[16:42:50] *** Quits: vivek599 (~kvirc@119.82.86.72) (Quit: KVIrc 5.0.1 Aria http://www.kvirc.net/)
[16:50:39] *** Quits: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com) (Quit: Client closed)
[16:51:07] *** Joins: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com)
[16:52:56] *** Joins: luc4 (~luc4@151.36.2.69)
[16:56:08] <luc4> Hello! Is it possible to encode a video with alpha channel to a vp9 stream with the libvpx-vp9 encoder? My understanding is this should be possible but it seems I’m failing.
[17:05:10] *** Quits: luc4 (~luc4@151.36.2.69) (Ping timeout: 268 seconds)
[17:11:19] *** Quits: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com) (Quit: Client closed)
[17:11:44] *** Joins: phinxy (~phinxy@78-71-229-90-no500.tbcn.telia.com)
[17:12:05] *** Joins: luc4 (~luc4@151.36.76.25)
[17:18:51] <BtbN> In theory, yeah. In practice, it's poorly supported by any and all players.
[17:19:59] <luc4> BtbN: actually, I’ll still play with ffmpeg
[17:20:58] <BtbN> yes, even with ffmpeg
[17:21:10] <BtbN> iirc the ffmpeg native vp9 decoder does not support it?
[17:21:35] <BtbN> You have to explicitly decode with libvpx to even have a chance
[17:21:41] <luc4> BtbN: yes, I just understood it :-)
[17:21:53] <luc4> your first sentence was sufficient :-)
[17:22:18] *** Joins: cosimone` (~user@93-47-230-227.ip115.fastwebnet.it)
[17:22:19] <luc4> thanks
[17:22:40] *** Quits: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Quit: ERC (IRC client for Emacs 27.1))
[17:22:50] <luc4> BtbN: weird though… I was tricked by the fact that ffprobe was returning yuv420p
[17:23:07] <BtbN> ffprobe will also use the native vp9 decoder, and it has no idea about alpha channels
[17:23:19] <luc4> ah… that explains it
[17:23:26] <luc4> thank you!
[17:24:46] <BtbN> And from a recent dicussion, I think Browsers also don't support alpha channels in VP9. Only VP8.
[17:24:56] <BtbN> So it's really not a useful thing whatsoever
[17:26:17] <luc4> BtbN: I’ll only read the file with libavcodec
[17:27:01] <luc4> BtbN: I hope that using libvpx-bp9 to decode I can still get the alpha channel
[17:27:09] <luc4> *vp9
[17:28:18] <luc4> BtbN: do you happen to know if vp9_cuvid supports it?
[17:28:38] <BtbN> It doesn't.
[17:29:00] <luc4> nVidia limitation or ffmpeg’s?
[17:29:12] <BtbN> There is no alpha capable pixel format listed in nvdec whatsoever.
[17:29:25] <luc4> cuda is not supporting it?
[17:29:37] <BtbN> The Alpha-Channel in VPx is handles very weidly. It's basically an entire second monochrome video stream, which is encoded and packaged alongside. An absolute afterthought to the format.
[17:29:41] <BtbN> *handled
[17:30:22] <BtbN> Unless I'm entirely mistaken, nvdec and nvenc have zero support for alpha channels.
[17:30:30] <BtbN> There is no supported input pixel format which has one
[17:30:51] <BtbN> They even explicitly use 0BGR and RGB0 as RGB formats
[17:31:14] <luc4> BtbN: I was a bit confused cause I found somewhere a nVidia changelog stating new support for the alpha channel. But maybe I understood this wrong.
[17:32:47] *** Joins: minimal (~minimal@user/minimal)
[17:32:51] <BtbN> nvdec can output exactly NV12, P016, YUV444p and YUV444p16
[17:32:57] <BtbN> https://github.com/FFmpeg/nv-codec-headers/blob/master/include/ffnvcodec/dynlink_cuviddec.h#L93
[17:33:50] <luc4> BtbN: pretty clear. Thank you!
[17:34:52] <BtbN> curiously, nvenc can take some pixel formats with Alpha-Support. Namely RGB ones. But it just ignores the Alpha-Channel, and h264/hevc can't use it anyway.
[17:36:04] <luc4> BtbN: these hardware codecs have many limitations
[17:37:56] <BtbN> Not supporting Alpha-Channels is hardly a hardware-codec limitation.
[17:38:03] <BtbN> It's _very_ exoctic as far as video goes
[17:38:42] <luc4> BtbN: actually, I used those pretty often in the past. For example in AR.
[17:38:59] <luc4> BtbN: but I see what you mean, I agree.
[17:39:01] *** Quits: bitblit (~bitblit@gateway/tor-sasl/bitblit) (Remote host closed the connection)
[17:39:23] *** Joins: bitblit (~bitblit@gateway/tor-sasl/bitblit)
[17:39:26] <BtbN> Like, even the native ffmpeg codecs don't support it, because it's such a mess to deal with. You effectively need to spin up a whole second decoder and somehow put the two video streams back together.
[17:40:21] <luc4> BtbN: I’ll keep using prores or raw, it is probably simpler
[17:40:34] <BtbN> Yeah, this oddity is very VPx specific
[17:40:49] <BtbN> They tacked Alpha-Support on after the fact for VP8. And then didn't care to fix it properly with VP9.
[17:45:18] *** Joins: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com)
[17:49:56] <luc4> BtbN: unrelated question: do you happen to know if it is possible to get a dmabuf from libavcodec when decoding using v4l2?
[17:50:18] <BtbN> v4l2_m2m can do that, but it's generally a somewhat broken painful mess
[17:51:06] *** Joins: c7s (~c7s@user/c7s)
[17:51:38] <luc4> BtbN: for an open project I had the idea of implementing something with zero-copy, but I guess it may then be harder than I thought
[17:51:58] <BtbN> It's just not a well supported backend
[17:52:10] <BtbN> And every vendor implements it differently. See nvidias interpretation of it
[17:52:38] <luc4> BtbN: in this case, my target would be raspberry pi
[17:53:02] <BtbN> Doesn't that use OpenMAX or something?
[17:53:07] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[17:53:21] <JEEB> rpi4 has m2m for MPEG-2 Video and H.264 apparently as of recently (based on MMAL in the background IIRC)
[17:53:26] <luc4> BtbN: yes, that is what I used, it was working fine, but it is dead now
[17:53:36] <JEEB> and then you have v4l2-requests for HEVC
[17:53:56] <JEEB> which is of course still in a flux and only the Kodi or whatever FFmpeg fork has that WIP patch set
[17:55:10] <luc4> JEEB: can libavcodec return a dmabuf for v4l2 or mmal backends?
[17:58:51] <luc4> For what I have in mind, I’d need to stream the decoded frames into opengl textures, and my guess is that dmabufs is what I need.
[18:00:18] <BtbN> Doing that on a Pi will be intensely painful to impossible
[18:00:29] <BtbN> With CUDA and nvdec it's relatively easy going
[18:00:53] <luc4> BtbN: with openmax, zero copy was pretty good in 1080p. Same concept.
[18:01:17] <luc4> BtbN: and I’m talking about rpi1
[18:01:59] <JEEB> I was trying to look at the hw pix_fmt that the m2m stuff would utilize but couldn't see any
[18:02:04] <JEEB> anyways, rpi1
[18:02:05] <JEEB> RIP
[18:02:39] <luc4> JEEB: openmax -> EGL -> opengl is good in rpi1, rpi2, rpi3
[18:03:12] <luc4> now I would like to use the new technology thought ffmpeg
[18:03:19] *** Joins: phonemic (~phonemic@193.56.117.50)
[18:03:40] <luc4> rpi4 gpu is more than enough, but it has to be zero-copy
[18:03:56] <luc4> and I’m unsure if it can be done with ffmpeg
[18:23:20] *** Quits: phonemic (~phonemic@193.56.117.50) (Quit: WeeChat 3.3)
[18:32:06] *** Quits: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr) (Ping timeout: 256 seconds)
[18:33:31] *** Joins: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr)
[18:34:20] *** Joins: Buster_ (~Buster@buster-net.ru)
[18:34:35] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[18:43:59] *** Joins: beaver (~beaver@user/pong)
[18:45:51] *** Joins: duder (~duder@78.32.96.45)
[18:47:40] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[18:48:21] *** Joins: neverfindme (~hayden@158.123.160.43)
[18:48:35] *** Joins: lavaball (felix@31.204.155.215)
[18:54:33] *** Quits: a0z (~a0z@90.244.184.28) (Quit: Leaving)
[19:10:05] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[19:13:26] *** Joins: demon__ (~user@45.130.86.2)
[19:16:23] *** Quits: anotheruser (~user@197.54.98.58) (Ping timeout: 250 seconds)
[19:18:19] *** Quits: neverfindme (~hayden@158.123.160.43) (Ping timeout: 250 seconds)
[19:21:26] *** Joins: neverfindme (~hayden@158.123.160.43)
[19:21:26] *** Quits: neverfindme (~hayden@158.123.160.43) (Remote host closed the connection)
[19:21:43] *** Joins: neverfindme (~hayden@158.123.160.43)
[19:30:31] *** Quits: nikos (~nikos@104.248.205.38) (Quit: "Quit")
[19:31:04] *** Joins: nikos (~nikos@104.248.205.38)
[19:42:57] *** Joins: rsx (~dummy@ppp-188-174-159-54.dynamic.mnet-online.de)
[19:52:54] *** Quits: luc4 (~luc4@151.36.76.25) (Quit: luc4)
[20:17:03] *** Quits: cosimone` (~user@93-47-230-227.ip115.fastwebnet.it) (Ping timeout: 250 seconds)
[20:17:16] *** Joins: cosimone` (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[20:17:33] *** Quits: dreamon (~dreamon@ppp-88-217-95-198.dynamic.mnet-online.de) (Ping timeout: 252 seconds)
[20:26:48] *** Quits: cosimone` (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Ping timeout: 268 seconds)
[20:28:08] *** softworkz is now known as Guest4564
[20:28:08] *** Quits: Guest4564 (~softworkz@user/softworkz) (Killed (tungsten.libera.chat (Nickname regained by services)))
[20:28:38] *** Quits: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr) (Quit: WeeChat 3.3)
[20:28:55] *** Joins: softworkz (~softworkz@user/softworkz)
[20:30:14] *** Joins: softworkz_ (~softworkz@user/softworkz)
[20:30:14] *** Quits: softworkz (~softworkz@user/softworkz) (Killed (strontium.libera.chat (Nickname regained by services)))
[20:30:14] *** softworkz_ is now known as softworkz
[20:34:50] *** Joins: dreamon (~dreamon@pd9503f67.dip0.t-ipconnect.de)
[20:39:07] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[20:41:13] *** Quits: microchip_ (~neutrino@user/microchip/x-0766185) (Quit: There is no spoon!)
[20:42:22] *** Quits: cmp (~cmp@lfbn-ren-1-1468-31.w90-27.abo.wanadoo.fr) (Quit: Connection closed)
[20:48:40] *** Joins: taupiqueur_ (~taupiqueu@34.106.204.77.rev.sfr.net)
[20:49:46] *** Quits: taupiqueur (~taupiqueu@169.106.204.77.rev.sfr.net) (Ping timeout: 260 seconds)
[20:50:58] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[20:52:19] *** Quits: omegatron (~some@p5484973e.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[20:53:14] *** Joins: omegatron (~some@p5484973e.dip0.t-ipconnect.de)
[20:56:16] *** Joins: microchip_ (~neutrino@user/microchip/x-0766185)
[20:56:52] *** Quits: rsx (~dummy@ppp-188-174-159-54.dynamic.mnet-online.de) (Quit: rsx)
[21:02:01] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[21:04:33] *** Quits: Atsuko_ (~x@94.242.254.66) (Remote host closed the connection)
[21:05:09] *** Joins: keypusher (keypusher@user/keypusher)
[21:06:27] <pagios> hi guys, can i strema vp9 using libpvx?
[21:06:29] <pagios> libvpx
[21:14:26] <emcodem> @pagios i dont see where your question goes... what keeps you from doing so?
[21:15:13] <pagios> could vp8 be unspoorted by some browsers? i am steaming in vp8/opus and some browsers dont like it, others do
[21:15:15] <pagios> so thought maybe vp9 is better?
[21:15:17] <pagios> when it comes to compatibility
[21:15:48] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[21:21:03] <emcodem> uhm i believe you would ususally provide a vp9 version in order to save bandwith "if possible" but also provide a fallback to h264 for clients that dont support vp9
[21:21:30] <emcodem> but i'm far away from being a pro in web delivery ^^
[21:22:28] <pagios> emcodem: thanks could a self signed certificate be causing the issue in playing instead of a codec?
[21:22:55] *** Quits: taupiqueur_ (~taupiqueu@34.106.204.77.rev.sfr.net) (Ping timeout: 268 seconds)
[21:23:00] <emcodem> sure
[21:24:37] *** Quits: neverfindme (~hayden@158.123.160.43) (Quit: Leaving)
[21:39:26] *** Joins: neverfindme (~hayden@158.123.160.43)
[21:40:34] *** Quits: neverfindme (~hayden@158.123.160.43) (Remote host closed the connection)
[21:41:41] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Read error: Connection reset by peer)
[21:44:04] *** Joins: ChocolateArmpits (~Chocolate@95.173.33.173)
[21:51:06] *** Quits: anticw (~anticw@157-131-153-146.fiber.dynamic.sonic.net) (Remote host closed the connection)
[21:51:30] *** Joins: anticw (~anticw@157-131-153-146.fiber.dynamic.sonic.net)
[21:52:02] *** Joins: ttys000 (~ttys000@user/ttys000)
[21:52:35] *** Joins: DaveGemini (~DIA@user/diabolic)
[21:52:43] *** Joins: taupiqueur (~taupiqueu@34.106.204.77.rev.sfr.net)
[21:56:55] *** Quits: taupiqueur (~taupiqueu@34.106.204.77.rev.sfr.net) (Ping timeout: 250 seconds)
[21:58:11] *** Joins: taupiqueur (~taupiqueu@34.106.204.77.rev.sfr.net)
[22:06:10] *** beaver is now known as pong
[22:08:39] *** Quits: marcj (~marc@205.175.215.25) (Ping timeout: 252 seconds)
[22:10:29] *** Joins: marcj (~marc@205.175.215.25)
[22:12:13] *** Quits: duder (~duder@78.32.96.45) (Quit: Connection closed)
[22:12:29] *** Quits: anticw (~anticw@157-131-153-146.fiber.dynamic.sonic.net) (Remote host closed the connection)
[22:18:57] *** Joins: anticw (~anticw@157-131-153-146.fiber.dynamic.sonic.net)
[22:26:46] *** Quits: lavaball (felix@31.204.155.215) (Quit: lavaball)
[22:27:16] *** Joins: lavaball (~Melissa@31.204.155.215)
[22:44:34] *** Quits: taupiqueur (~taupiqueu@34.106.204.77.rev.sfr.net) (Ping timeout: 260 seconds)
[22:46:03] *** Joins: taupiqueur (~taupiqueu@34.106.204.77.rev.sfr.net)
[22:50:05] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[22:54:34] *** Joins: darkstarx (~darkstard@50.39.115.145)
[22:55:40] *** Quits: darkstarx (~darkstard@50.39.115.145) (Remote host closed the connection)
[22:56:06] *** Joins: darkstarx (~darkstard@50.39.115.145)
[22:57:39] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-71f8-eb14-0c59-711a.res6.spectrum.com)
[22:59:30] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[23:00:00] *** softworkz is now known as Guest8104
[23:00:00] *** Joins: softworkz_ (~softworkz@user/softworkz)
[23:00:00] *** Quits: Guest8104 (~softworkz@user/softworkz) (Killed (tungsten.libera.chat (Nickname regained by services)))
[23:00:00] *** softworkz_ is now known as softworkz
[23:07:30] *** Joins: softworkz_ (~softworkz@user/softworkz)
[23:07:30] *** Quits: softworkz (~softworkz@user/softworkz) (Killed (molybdenum.libera.chat (Nickname regained by services)))
[23:07:30] *** softworkz_ is now known as softworkz
[23:07:52] *** Joins: Narrat (~omnius@p200300df5f0fbf2d06ea56fffe2e7cdc.dip0.t-ipconnect.de)
[23:10:14] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 268 seconds)
[23:16:07] *** Quits: Narrat (~omnius@p200300df5f0fbf2d06ea56fffe2e7cdc.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[23:16:33] *** Joins: Narrat (~omnius@p200300df5f0fbf2d06ea56fffe2e7cdc.dip0.t-ipconnect.de)
[23:16:46] *** Parts: DaveGemini (~DIA@user/diabolic) (Leaving)
[23:17:28] *** Joins: Atsuko (~x@94.242.254.66)
[23:30:35] *** Joins: alban771 (~alban@37.166.160.253)
[23:40:04] *** Quits: jab416171 (~jab416171@c-174-52-177-39.hsd1.ut.comcast.net) (Ping timeout: 250 seconds)
[23:40:53] *** Quits: meinside (uid24933@id-24933.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[23:45:14] *** Joins: jab416171 (~jab416171@c-174-52-177-39.hsd1.ut.comcast.net)
[23:50:53] *** Joins: DaveGemini (~DIA@user/diabolic)
[23:51:48] <DaveGemini> in a lua script set to use ffmpeg.....what do i have to add to this line to make the animated webp file loop?
[23:51:50] <DaveGemini> filters=string.format("fps=%s,zscale='trunc(ih*dar/3)*2:trunc(ih/3)*2':f=lanczos",
[23:52:23] <AMM> nothing
[23:52:38] <AMM> the -loop option is not part of the filters
[23:53:25] <DaveGemini> the file wasent looping in a browser only.....
[23:57:37] *** Quits: alban771 (~alban@37.166.160.253) (Ping timeout: 250 seconds)
