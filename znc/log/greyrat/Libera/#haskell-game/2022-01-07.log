[00:49:14] <icrbow[m]> A good habit is starting with STM. You can specialize later if you really need that.
[00:54:01] <f-a> never used stm , just mvars and such
[00:54:03] <f-a> what am I missing?
[01:07:34] <EvanR> it's pretty sweet
[01:07:50] <EvanR> as long as you stay out of unsafePerformIO
[01:10:01] <EvanR> as an example of something STM can do, say you are a thread looking at two TMVars, one TMVar and one TChan, or two Twhatever. You can try each one and if neither are ready, you 'retry' which puts you to sleep until either of them 'changes'
[01:10:54] <EvanR> you can do this with a set of basic TVars too, if you don't like their current contents
[01:11:31] <EvanR> you will also retry if something else committed changes during your atomic action
[01:11:47] <f-a> I see
[07:03:39] *** Quits: EvanR (~EvanR@user/evanr) (Quit: Leaving)
[07:04:31] *** Joins: EvanR (~EvanR@user/evanr)
[12:34:36] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[12:36:13] *** Quits: tzh (~tzh@c-24-21-73-154.hsd1.or.comcast.net) (Quit: zzz)
[13:09:35] <icrbow[m]> STM offers a way more primitives - different types of vars and channels/queues which all can be combined in a single query or update, like a proper database transaction.
[13:10:02] <icrbow[m]> with IORefs you'd have data races everywhere and with MVars it's deadlock ahoy
[14:09:29] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[14:28:22] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[17:31:26] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[18:59:48] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[20:08:16] <EvanR> MVar = dining philosophers xD
[20:38:58] *** Joins: tzh (~tzh@c-24-21-73-154.hsd1.wa.comcast.net)
[21:26:48] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[22:51:07] *** Joins: joes (~joes@dyndsl-031-150-077-229.ewe-ip-backbone.de)
[22:59:21] *** Joins: joes_ (~joes@dyndsl-031-150-077-229.ewe-ip-backbone.de)
[22:59:24] *** Quits: joes_ (~joes@dyndsl-031-150-077-229.ewe-ip-backbone.de) (Remote host closed the connection)
[23:08:00] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[23:25:44] *** Quits: joes (~joes@dyndsl-031-150-077-229.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
