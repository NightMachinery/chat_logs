[00:00:15] <podverse-mitch> well...i was thinking native full text search wouldn't work with an enormous table? 80 million rows? are we talking "LIKE %asdf%"?
[00:00:25] <xocolatl> no
[00:00:30] <xocolatl> actual full text search
[00:00:34] <xocolatl> ??fts
[00:00:34] <pg_docbot> http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/ :: http://rachbelaid.com/postgres-full-text-search-is-good-enough/
[00:00:34] <pg_docbot> http://www.sai.msu.su/~megera/postgres/fts/doc/index.html :: https://www.postgresql.org/docs/current/static/textsearch.html
[00:00:39] <kjetilho> podverse-mitch: so - you are indexing the description for each episode, which is in this large table?
[00:00:54] <podverse-mitch> we're indexing the title not description.
[00:01:04] <podverse-mitch> title could potentially be long for spam episodes
[00:01:35] <xocolatl> that first link seems really outdated
[00:01:58] <kjetilho> xocolatl: yep, the Soviet Union was dissolved 20 years ago
[00:02:02] <kjetilho> ;)
[00:02:20] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[00:02:41] <xocolatl> ?forget http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/
[00:02:42] <pg_docbot> Forgot 1 url
[00:02:50] <kjetilho> podverse-mitch: how much RAM does your system have?
[00:03:00] <podverse-mitch> sooo...I'm not opposed to using fts, it sounds like it might be smarter...BUT our system is already setup to handle these indexes from Manticore. it works well for all our tables except Episodes. i was hoping to try the SERIAL id path first
[00:03:33] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 250 seconds)
[00:03:36] *** Parts: theseb (~theseb@47-220-214-54.cnrocmta03.res.dyn.suddenlink.net) (Leaving)
[00:04:05] <podverse-mitch> that server has ~4GB free at all times. the docker container for Manticore has 4GB
[00:04:16] <kjetilho> podverse-mitch: anyway, the batch update would be scripted, but quite simple, if you don't care about ordering SERIAL for your old episodes.
[00:04:33] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[00:04:42] <podverse-mitch> yeah the order can be whatever, as long as its SERIAL and NOT NULL
[00:05:32] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:1d57:8085:a2ac:6196)
[00:05:33] <peerce> btw, the pseudotype hack SERIAL has been deprecated,t he new proper way is,  GENERATED BY DEFAULT AS IDENTITY
[00:05:45] <podverse-mitch> ohh
[00:05:51] <peerce> whihc is SQL standard, and implemented by several other major database servers
[00:05:55] *** Joins: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3)
[00:06:26] <podverse-mitch> this is about the most insightful chat i've ever joined lol. now i see why people use IRC
[00:07:02] <Petruchio> Yeah, I get a lot out of just listening to this channel.
[00:08:06] <podverse-mitch> So if I go the scripted batch update approach, lets say I name the column int_id, what type of column should it be? int? bigint? And also NOT NULL?
[00:08:11] <kjetilho> UPDATE episodes set episode_id = nextval('episode_id_seq') where id in (select id from episodes where episode_id IS NULL LIMIT 1000);
[00:08:31] <kjetilho> I think that would work.  but I'm not an expert :)
[00:08:55] <xocolatl> looks good, but you absolutely must vacuum before doing the next batch
[00:09:06] *** Quits: zer0bitz_ (~zer0bitz@2001:2003:f74d:b800:7859:22cf:713c:fe6e) (Ping timeout: 260 seconds)
[00:09:24] <podverse-mitch> If anyone wants more context, here's the Episodes table schema in TypeORM format... https://github.com/podverse/podverse-api/blob/develop/src/entities/episode.ts#L48
[00:09:45] <podverse-mitch> I'm wondering if episode_id is a safe column name to use? i was thinking int_id
[00:10:19] <kjetilho> PostgreSQL doesn't care.  your ORM might prefer one over the other, though
[00:10:35] <agates> podverse-mitch: told ya they're useful here :)
[00:10:56] <podverse-mitch> In any case, I'll give this UPDATE command a try. I have a 20,000 episode local database I can test with
[00:11:16] <podverse-mitch> #agates lol yeah no kidding. I should have joined IRC 8 years ago
[00:11:33] <kjetilho> podverse-mitch: obviously you need to create the episode_id_seq sequence first
[00:11:38] <podverse-mitch> agates: testing replies...
[00:11:45] <podverse-mitch> i'm not sure i'm replying here right...
[00:12:11] <podverse-mitch> Ok I'll create a episode_id_seq sequence first
[00:13:31] <agates> podverse-mitch: yeah that's the right way to reply
[00:13:42] <podverse-mitch> ok cool
[00:14:11] <kjetilho> episode_id should be bigint default nextval('episode_id_seq')
[00:14:11] *** Joins: bigGopher (~dan@207.98.176.66)
[00:14:39] <podverse-mitch> ok, bigint it is
[00:14:48] <podverse-mitch> alright, if anyone else has thoughts I'll check back here, but for now i think i've got a good path forward for local testing. thanks all!
[00:15:06] <xocolatl> try testing on a smaller table
[00:17:24] *** Quits: rufito (~phil@186-79-27-44.baf.movistar.cl) (Quit: Leaving)
[00:18:11] *** Quits: nillyhan (~1b93e2fa@user/nillyhan) (Quit: Leaving)
[00:18:29] *** Joins: nillyhan (~1b93e2d2@user/nillyhan)
[00:23:16] *** Quits: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[00:24:03] *** Quits: nillyhan (~1b93e2d2@user/nillyhan) (Quit: Leaving)
[00:24:43] *** Joins: nillyhan (~1b93e2d2@user/nillyhan)
[00:25:07] *** Quits: Michelle (~michelle@2407:8800:bc20:200a:cc1b:d05e:e093:6c3b) (Read error: Connection reset by peer)
[00:25:12] *** Quits: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[00:25:58] *** Joins: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com)
[00:27:15] *** Joins: Michelle (~michelle@203.206.128.220)
[00:32:25] *** Joins: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[00:35:37] *** Quits: zer0bitz (~zer0bitz@2001:2003:f74d:b800:1d57:8085:a2ac:6196) (Ping timeout: 250 seconds)
[00:36:49] <podverse-mitch> ??paste
[00:36:49] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[00:36:49] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[00:38:14] <podverse-mitch> So the UPDATE command worked like a charm locally. Here's all the code that was needed https://paste.depesz.com/s/iJ
[00:38:43] <podverse-mitch> I can set this up to run via script on the 80 million rows of episodes
[00:39:03] <kjetilho> great :)
[00:39:20] <podverse-mitch> I think there's one last piece to the puzzle though...when all episodes have an int_id, how do I change the column to not allow null? be GENERATED BY DEFAULT AS IDENTITY?
[00:40:40] *** Quits: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com) (Remote host closed the connection)
[00:41:24] <kjetilho> you should ALTER TABLE episode_id ALTER COLUMN int_id SET DEFAULT nextval('episode_int_id_seq')  before starting the UPDATE loop
[00:41:59] <kjetilho> to make any INSERT get a value from the get-go
[00:42:03] <kjetilho> well, you can do it at any time after adding the column, really
[00:42:08] <podverse-mitch> ohh
[00:42:12] *** Quits: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3) (Ping timeout: 240 seconds)
[00:42:13] <podverse-mitch> that would be better tho
[00:43:06] <kjetilho> this is basically simulating "GENERATED BY DEFAULT AS IDENTITY"
[00:43:16] <podverse-mitch> would this be valid? ALTER TABLE episodes ADD COLUMN int_id bigint SET DEFAULT nextval('episode_int_id_seq');
[00:43:27] <podverse-mitch> instead of ALTER COLUMN, do it at time of ADD?
[00:43:40] <kjetilho> well, that will take a day, I guess ...
[00:43:53] <podverse-mitch> oh
[00:44:18] <xocolatl> so what happened to doing a vacuum in between each batch?
[00:44:32] <podverse-mitch> ok, so because i add that rule _after_ the column is generated, it allows the null as default i guess?
[00:44:54] <podverse-mitch> and i don't know much about vacuuming yet :|
[00:46:04] <kjetilho> VACUUM just marks the disk space used by old rows (ie. those without the new value for int_id) to be reused.
[00:46:04] <xocolatl> in your external script that does the update, add "vacuum episodes;"
[00:47:10] <podverse-mitch> before i get to vacuuming...because this table will use a sequence as default, does that mean i won't need to add some kind of unique/serial type constraint after the update script finishes?
[00:47:26] <xocolatl> podverse-mitch: gimme a second
[00:47:34] <podverse-mitch> ok thanks
[00:47:46] <kjetilho> podverse-mitch: no, since it will allow an INSERT to have a specific value
[00:48:25] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[00:48:44] *** Joins: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com)
[00:49:15] <podverse-mitch> sorry, "no" as in it _will_ need some kind of unique constraint?
[00:49:25] <kjetilho> yes
[00:49:44] <podverse-mitch> ok. makes sense. because the default won't prohibit writing duplicate ids
[00:49:53] <kjetilho> right
[00:50:13] <podverse-mitch> then for vacuuming...i think i have tried running VACUUM on the episodes table before, and it locked up the db.
[00:50:28] <kjetilho> VACUUM FULL locks it.
[00:50:34] <kjetilho> just VACUUM should not
[00:50:39] <podverse-mitch> ahh ok
[00:51:07] <podverse-mitch> cool sounds easy enough
[00:52:25] *** Quits: magla (~gelignite@55d45672.access.ecotel.net) (Quit: Stay safe!)
[00:56:05] *** Quits: CanuteTheGreat (~CanuteThe@user/canutethegreat) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[00:58:10] <xocolatl> podverse-mitch: https://dpaste.org/r2xy
[00:58:33] <xocolatl> it seems it is not so easy to convert that to a proper GENERATED column using the same sequence :(
[00:58:40] * xocolatl does some research
[00:59:13] <kjetilho> good point, adding the unique constraint early, too
[01:01:30] <xocolatl> looks like the only way to do it is to modify the catalogs :(
[01:02:20] <kjetilho> xocolatl: but it would be just cosmetic, wouldn't it?
[01:02:20] *** Joins: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net)
[01:04:34] <podverse-mitch> interesting. thanks so much. working on a script right now...
[01:04:41] <xocolatl> podverse-mitch: here is my new suggestion https://dpaste.org/rOdM
[01:05:00] *** Joins: CanuteTheGreat (~CanuteThe@user/canutethegreat)
[01:05:13] <xocolatl> kjetilho: there are some corner cases that GAAI handles and the serial method does not, but it is mostly cosmetic
[01:06:26] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 256 seconds)
[01:06:40] <kjetilho> ok
[01:07:04] <kjetilho> just one step missing from your script - adding an index
[01:07:40] <xocolatl> more than what UNIQUE does?
[01:07:54] <kjetilho> uh, duh
[01:08:27] <podverse-mitch> xocolatl: cool, got it
[01:08:27] <kjetilho> me not so smrt
[01:09:10] <xocolatl> creating that index might take a while, but it is absolutely required for the updates
[01:09:15] *** Quits: dsrt^ (~dsrt@50.232.121.75) (Remote host closed the connection)
[01:09:42] <xocolatl> I guess we could do it concurrently outside of the transaction
[01:09:49] *** Joins: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[01:10:03] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[01:10:13] <podverse-mitch> xocolatl: i tried running the BEGIN - COMMIT part, and get "syntax error at or near INVALID...
[01:10:29] <xocolatl> NOT VALID
[01:10:31] <xocolatl> sorry
[01:11:30] <xocolatl> the point of all this song and dance is to keep locking to a minimum, otherwise there are much easier methods
[01:12:12] <podverse-mitch> ok that worked
[01:12:36] <podverse-mitch> thanks for doing the song and dance :) this would have taken weeks for me to figure out...
[01:13:20] *** Quits: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com) (Ping timeout: 272 seconds)
[01:16:03] <xocolatl> this should be the absolute minimum locking: https://dpaste.org/cgqQ
[01:17:17] <xocolatl> ask if you have any questions about it
[01:18:39] <podverse-mitch> I'll take a few minutes to try to understand it all...
[01:19:06] *** Joins: veesh (~veesh@89.237.103.173)
[01:19:32] <podverse-mitch> this part is weird to me... ADD CHECK (int_id IS NOT NULL) NOT VALID;
[01:19:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[01:19:38] <xocolatl> right
[01:19:53] <xocolatl> so that is kind of a misnomer, I think it should be "NOT VALIDATED"
[01:20:17] <xocolatl> it means that all new rows (inserted or updated) must obey the constraint, but that existing rows might not
[01:20:32] <podverse-mitch> whoa interesting
[01:20:49] <xocolatl> then on line 14 we validate the constraint which will check everything without a heavy lock
[01:21:20] <xocolatl> that way, line 16 sees the CHECK and doesn't recheck while holding a heavy lock
[01:21:40] <xocolatl> the CHECK could be dropped after all this.  I guess I forgot that
[01:23:48] <podverse-mitch> ok i think i get it
[01:23:56] *** Quits: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Remote host closed the connection)
[01:24:07] <xocolatl> line 7 means that if you drop this column, the sequence will be dropped too
[01:24:21] <podverse-mitch> hah i was just about to ask
[01:24:45] <podverse-mitch> i didn't know OWNED by could apply to columns.  i thought it was user level somehow
[01:25:05] <xocolatl> it's only for a sequence to be owned by a column
[01:25:08] <podverse-mitch> but yeah, no reason for the sequence to exist if the int_id column is gone
[01:25:13] <podverse-mitch> ok interesting
[01:25:48] *** Joins: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3)
[01:26:09] <xocolatl> all other ownerships are indeed about users owning objects
[01:28:07] <podverse-mitch> alright, i have to wrap up to go to billiards league soon, but thanks again for all your help! i have no one to really ask about Postgres and have skated by with TypeORM for too long
[01:28:31] <xocolatl> you have lots of people to ask about postgres :)
[01:28:40] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.4)
[01:28:58] *** Quits: Guddu (~Guddu@223.190.82.57) (Quit: Leaving)
[01:29:11] <podverse-mitch> is there a way i can send a tip or donation to y'all? this would have cost thousands of dollars to hire consulting lol
[01:29:26] <xocolatl> pay it forward
[01:29:27] <podverse-mitch> and as a FOSS project we definitely don't have those resources...
[01:30:12] *** Quits: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3) (Ping timeout: 240 seconds)
[01:30:18] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[01:30:26] <podverse-mitch> alright cool. well i'll definitely be floating around here going forward.
[01:30:45] <podverse-mitch> i think i'll have this task done in prod by the weekend
[01:30:46] *** Quits: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:32:49] *** Joins: Klinda (~superleag@user/klinda)
[01:33:06] *** Quits: gambl0re (~gambl0re@45.72.213.26) (Ping timeout: 260 seconds)
[01:35:11] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Remote host closed the connection)
[01:39:51] *** Quits: CanuteTheGreat (~CanuteThe@user/canutethegreat) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[01:42:38] <podverse-mitch> :xocolatl I'm getting `syntax error at or near "CONSTRAINTS"`
[01:43:16] <xocolatl> boo
[01:43:27] <xocolatl> that's what I get for coding straight on dpaste
[01:43:28] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[01:44:04] <xocolatl> ok, you need to name the check constraint: ADD CONSTRAINT chk CHECK (int_id IS NOT NULL)
[01:44:14] <xocolatl> then: VALIDATE CONSTRAINT chk
[01:44:49] *** Joins: zeden (~zeden@user/zeden)
[01:45:40] <podverse-mitch> so instead of ADD CHECK (int_id IS NOT NULL) NOT VALID; replace that with ADD CONSTRAINT chk CHECK (int_id IS NOT NULL)?
[01:46:00] <xocolatl> keep the NOT VALID at the end, but yes
[01:46:03] <podverse-mitch> ok cool
[01:46:18] <xocolatl> and you can name it whatever you want :)
[01:47:36] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[01:47:36] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[01:47:36] *** Joins: hoppity (~hoppity@user/hoppity)
[01:47:48] *** Quits: zeden (~zeden@user/zeden) (Client Quit)
[01:48:33] <podverse-mitch> ok that worked...
[01:48:35] <podverse-mitch> aaand last
[01:48:44] <podverse-mitch> "episodes_int_id_key" is not a unique index...
[01:49:01] <xocolatl> argh
[01:49:11] <xocolatl> CREATE UNIQUE INDEX CONCURRENTLY ...
[01:49:23] <xocolatl> sorry for the bugs
[01:49:35] <podverse-mitch> oh it's ok. the error messages give me some feedback to learn from
[01:49:57] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[01:50:28] *** Joins: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3)
[01:50:49] *** Quits: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[01:51:42] <podverse-mitch> looks like it worked! ran through the whole process + the script
[01:51:46] *** Joins: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com)
[01:51:57] <podverse-mitch> locally i mean
[01:52:21] <xocolatl> what is your final update script?
[01:54:00] <podverse-mitch> well forgive me for the ugly JavaScript... https://paste-bin.xyz/42192
[01:54:08] <podverse-mitch> but the queries are in there
[01:55:09] <xocolatl> the queries look good (I have no competence to comment on the javascript)
[01:55:27] <podverse-mitch> sweeeeet XD
[01:55:51] <podverse-mitch> this has literally been plaguing me for a week. it's been more than this with Manticore, but has been a big blocker
[01:56:08] <xocolatl> the update and vacuum will be in separate transactions, yes?
[01:56:09] *** Joins: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[01:56:17] <podverse-mitch> they should be, that's my understanding
[01:56:23] *** Joins: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[01:56:36] <podverse-mitch> i would have to specifically make it a transaction i think
[01:56:43] <xocolatl> ok
[01:57:06] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[01:57:21] <xocolatl> also, 1000 is kind of low.  I would do 10000 at the very least.  probably more
[02:00:02] *** Quits: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com) (Ping timeout: 240 seconds)
[02:00:32] <podverse-mitch> sounds good
[02:02:23] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[02:02:28] *** Quits: ekathva (~ekathva@n14jqqwhtfh2jdj1f-1.v6.elisa-mobile.fi) (Remote host closed the connection)
[02:03:37] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[02:04:03] *** Quits: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Remote host closed the connection)
[02:06:02] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[02:07:27] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Client Quit)
[02:12:29] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 252 seconds)
[02:15:41] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[02:15:56] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[02:15:56] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[02:15:56] *** Joins: hoppity (~hoppity@user/hoppity)
[02:23:25] *** Quits: karabaja4 (~karabaja4@dh207-92-111.xnet.hr) (Remote host closed the connection)
[02:24:46] *** Quits: mamad (~user@5.123.196.23) (Remote host closed the connection)
[02:25:32] *** Joins: dsrt^ (~dsrt@50.232.121.75)
[02:26:17] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[02:32:52] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[02:38:18] *** Joins: tc__ (~tc@103-140-203-11.vic.as139284.net.au)
[02:39:39] *** Joins: joast (~rick@cpe-98-146-112-4.natnow.res.rr.com)
[02:40:45] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[02:41:53] *** Quits: tc_ (~tc@103-140-203-11.vic.as139284.net.au) (Ping timeout: 256 seconds)
[02:42:17] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 240 seconds)
[02:43:24] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[02:46:35] *** Quits: iquad (~iquad@176.41.30.229) (Quit: Textual IRC Client: www.textualapp.com)
[02:49:51] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[02:50:37] *** Joins: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com)
[02:52:28] *** Quits: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com) (Client Quit)
[02:56:12] *** Quits: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3) (Ping timeout: 240 seconds)
[02:58:36] *** Quits: ur5us_ (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d) (Ping timeout: 240 seconds)
[03:04:12] *** Quits: bencc1 (~bencc1@2a00:a040:197:3af:3d85:ddc0:3595:9931) (Ping timeout: 252 seconds)
[03:05:48] *** Quits: libsys (~libsys@186.107.255.135) (Ping timeout: 240 seconds)
[03:06:35] *** Joins: libsys (~libsys@186.107.230.81)
[03:07:30] *** Quits: michalz (~michalz@185.246.204.93) (Remote host closed the connection)
[03:07:33] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[03:08:12] *** Joins: Forty-Bot (~kvirc@pool-108-18-137-133.washdc.fios.verizon.net)
[03:08:19] *** Quits: bird (~bird@136-25-143-83.cab.webpass.net) (Quit: bird)
[03:11:21] *** Quits: tobias1 (sid15532@django/member/tobias1) (Read error: Connection reset by peer)
[03:11:21] *** Quits: r0bby (r0bby@user/r0bby) (Ping timeout: 252 seconds)
[03:11:21] *** Quits: KnownSyntax (sid233169@user/knownsyntax) (Ping timeout: 252 seconds)
[03:11:21] *** Quits: MrNaz (sid133418@id-133418.uxbridge.irccloud.com) (Ping timeout: 252 seconds)
[03:11:21] *** Quits: shawnd (sid96041@id-96041.ilkley.irccloud.com) (Ping timeout: 252 seconds)
[03:11:29] *** Joins: tobias1 (sid15532@django/member/tobias1)
[03:11:32] *** Quits: joenoon (sid411732@id-411732.helmsley.irccloud.com) (Read error: Connection reset by peer)
[03:11:37] *** Quits: hoek (sid223452@id-223452.lymington.irccloud.com) (Read error: Connection reset by peer)
[03:11:38] *** Quits: geoffeg (sid5159@id-5159.ilkley.irccloud.com) (Read error: Connection reset by peer)
[03:11:45] *** Joins: shawnd (sid96041@id-96041.ilkley.irccloud.com)
[03:11:46] *** Joins: hoek (sid223452@id-223452.lymington.irccloud.com)
[03:11:47] *** Joins: geoffeg (sid5159@id-5159.ilkley.irccloud.com)
[03:11:49] *** Quits: elsmorian (sid307171@id-307171.lymington.irccloud.com) (Read error: No route to host)
[03:11:54] *** Quits: leont (sid489095@id-489095.uxbridge.irccloud.com) (Ping timeout: 252 seconds)
[03:11:54] *** Quits: Exterminador (sid116151@user/pegasus) (Ping timeout: 252 seconds)
[03:11:55] *** Quits: rubin55 (sid175221@id-175221.hampstead.irccloud.com) (Read error: Connection reset by peer)
[03:11:55] *** Quits: ehamberg (sid18208@id-18208.hampstead.irccloud.com) (Read error: Connection reset by peer)
[03:11:55] *** Quits: Liothen (sid23291@id-23291.helmsley.irccloud.com) (Read error: Connection reset by peer)
[03:11:55] *** Quits: kraih (sid17075@mojo/destroy-all-humans/kraih) (Read error: Connection reset by peer)
[03:11:55] *** Quits: karjala (sid176588@id-176588.lymington.irccloud.com) (Read error: Connection reset by peer)
[03:11:55] *** Quits: Spansh (sid299284@id-299284.lymington.irccloud.com) (Read error: Connection reset by peer)
[03:11:55] *** Quits: dsal (sid13060@id-13060.lymington.irccloud.com) (Read error: Connection reset by peer)
[03:12:05] *** Joins: elsmorian (sid307171@id-307171.lymington.irccloud.com)
[03:12:06] *** Joins: joenoon (sid411732@id-411732.helmsley.irccloud.com)
[03:12:06] *** Joins: leont (sid489095@id-489095.uxbridge.irccloud.com)
[03:12:10] *** Joins: karjala (sid176588@id-176588.lymington.irccloud.com)
[03:12:11] *** Joins: kraih (sid17075@mojo/destroy-all-humans/kraih)
[03:12:11] *** Joins: MrNaz (sid133418@id-133418.uxbridge.irccloud.com)
[03:12:13] *** Joins: ehamberg (sid18208@id-18208.hampstead.irccloud.com)
[03:12:15] *** Joins: KnownSyntax (sid233169@user/knownsyntax)
[03:12:15] *** Joins: rubin55 (sid175221@id-175221.hampstead.irccloud.com)
[03:12:17] *** Joins: dsal (sid13060@id-13060.lymington.irccloud.com)
[03:12:18] *** Joins: Spansh (sid299284@id-299284.lymington.irccloud.com)
[03:12:22] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[03:12:27] *** Joins: Guest43 (~Guest43@cli-5b7ed08e.ast.adamo.es)
[03:12:28] *** Joins: Exterminador (sid116151@user/pegasus)
[03:12:31] *** Joins: r0bby (r0bby@user/r0bby)
[03:12:34] *** Joins: Liothen (sid23291@id-23291.helmsley.irccloud.com)
[03:13:33] *** Quits: Berge (berge@redskapet.trivini.no) (Ping timeout: 252 seconds)
[03:13:33] *** Quits: Tenchi[m] (~tenchim]@2001:470:69fc:105::f42) (Ping timeout: 252 seconds)
[03:13:33] *** Quits: ilmari_ (~ilmari@user/ilmari) (Ping timeout: 252 seconds)
[03:14:06] *** Quits: pvoigt (~pvoigt@user/pvoigt) (Ping timeout: 252 seconds)
[03:14:06] *** Quits: Ollie[m] (~ollieocha@2001:470:69fc:105::41a5) (Ping timeout: 252 seconds)
[03:14:06] *** Quits: ktosiek (~ktosiek@2001:470:69fc:105::87ab) (Ping timeout: 252 seconds)
[03:14:06] *** Quits: ehuelsmann[m] (~ehuelsman@2001:470:69fc:105::169a) (Ping timeout: 252 seconds)
[03:15:49] <Guest43> Hi I have an SQL question: given this a number of rows with json TEXT strings, I would like to get a json array of the distinct json rows
[03:16:48] <Guest43> https://pastebin.com/4SY5em1M
[03:16:58] <Guest43> ??paste
[03:16:58] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[03:16:58] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[03:17:31] <xocolatl> select json_agg(distinct col) from tab;
[03:17:34] <Guest43> https://dpaste.org/CSQK
[03:17:54] <Guest43> xocolatl: the problem is that the result is a json array of text
[03:18:05] <Guest43> it's a bit hard to explain for me
[03:18:07] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[03:18:11] <xocolatl> cast it
[03:18:27] <xocolatl> jsonb_agg(distinct colum1::jsonb)
[03:19:25] <Guest43> I tried, but I get "could not identify an equality operator for type json"
[03:20:01] <xocolatl> I didn't use json for that reason
[03:20:27] <Guest43> Oh wow, thanks
[03:20:41] <Guest43> I spent at least 2h on this facepalm
[03:21:20] <Guest43> Thanks a lot!!!
[03:21:24] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 240 seconds)
[03:25:36] *** Joins: Berge (berge@redskapet.trivini.no)
[03:25:49] *** Joins: pvoigt (~pvoigt@user/pvoigt)
[03:26:13] *** Joins: ilmari_ (~ilmari@user/ilmari)
[03:26:43] *** Joins: Tenchi[m] (~tenchim]@2001:470:69fc:105::f42)
[03:27:24] *** Joins: Ollie[m] (~ollieocha@2001:470:69fc:105::41a5)
[03:29:04] *** Joins: ehuelsmann[m] (~ehuelsman@2001:470:69fc:105::169a)
[03:29:48] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 240 seconds)
[03:30:06] *** Joins: ktosiek (~ktosiek@2001:470:69fc:105::87ab)
[03:31:07] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[03:32:33] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[03:33:32] *** Quits: nulixes (~Thunderbi@gateway/vpn/pia/nulixes) (Ping timeout: 250 seconds)
[03:39:48] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[03:42:36] *** Quits: glik22_ (~glik22@99-36-164-253.lightspeed.snjsca.sbcglobal.net) (Ping timeout: 240 seconds)
[03:45:50] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[03:45:50] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[03:45:50] *** Joins: hoppity (~hoppity@user/hoppity)
[03:46:17] *** Joins: Junxter (~Junxter@121.237.63.222)
[03:47:08] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[03:47:53] *** Joins: hoppity (~hoppity@s0106b4fbe4e5da7b.cg.shawcable.net)
[03:47:53] *** Quits: hoppity (~hoppity@s0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[03:47:53] *** Joins: hoppity (~hoppity@user/hoppity)
[03:50:17] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[03:52:28] *** Quits: reprazent (~reprazent@178-118-195-230.access.telenet.be) (Ping timeout: 256 seconds)
[03:56:45] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[04:00:29] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[04:02:34] *** Joins: reprazent (~reprazent@178-118-195-230.access.telenet.be)
[04:06:16] *** Quits: Guest43 (~Guest43@cli-5b7ed08e.ast.adamo.es) (Quit: Client closed)
[04:07:33] *** Joins: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3)
[04:09:07] *** Joins: zeden (~zeden@user/zeden)
[04:13:48] *** Joins: hoppity (~hoppity@user/hoppity)
[04:14:16] *** Joins: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29)
[04:16:30] *** Quits: maciek__ (~maciek@2600:1700:a412:1c00:4005:1493:d7ac:e5b) (Quit: Leaving)
[04:18:10] *** Quits: reprazent (~reprazent@178-118-195-230.access.telenet.be) (Ping timeout: 250 seconds)
[04:18:37] *** Quits: foul_owl (~kerry@23.82.193.87) (Ping timeout: 240 seconds)
[04:19:48] *** Joins: ur5us_ (~ur5us@2406:e002:6845:dc01:68c7:1b9f:7d41:5e0d)
[04:21:04] *** Joins: foul_owl (~kerry@174-21-76-71.tukw.qwest.net)
[04:22:02] *** Quits: Su-Shee (~Susanne@p4ffc7dc4.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[04:25:04] *** Joins: reprazent (~reprazent@178-118-195-230.access.telenet.be)
[04:26:27] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[04:29:04] *** Joins: Su-Shee (~Susanne@148-125-142-46.pool.kielnet.net)
[04:29:35] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[04:30:01] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:1c1a:3fa2:4926:7c5a) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:30:41] *** Quits: foul_owl (~kerry@174-21-76-71.tukw.qwest.net) (Ping timeout: 256 seconds)
[04:31:15] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 256 seconds)
[04:33:16] *** Quits: dsrt^ (~dsrt@50.232.121.75) (Ping timeout: 256 seconds)
[04:33:42] *** Joins: nattiestnate (~nate@202.138.250.37)
[04:34:04] *** Quits: nattiestnate (~nate@202.138.250.37) (Client Quit)
[04:34:40] *** Quits: merzo (~Thunderbi@192.162.238.196) (Quit: merzo)
[04:34:56] *** Joins: merzo (~Thunderbi@192.162.238.196)
[04:39:08] *** Joins: KombuchaKip (~kip@192.252.230.5)
[04:39:11] *** Quits: merzo (~Thunderbi@192.162.238.196) (Ping timeout: 256 seconds)
[04:40:12] *** Quits: Guest5584 (~vit@chello085216193138.chello.sk) (Ping timeout: 240 seconds)
[04:45:59] *** Joins: foul_owl (~kerry@23.82.193.89)
[04:46:05] *** Quits: x88x88x (~x88x88x@2001:19f0:5:39a8:5400:3ff:feb6:73cb) (Read error: Connection reset by peer)
[04:47:31] *** Quits: Auron (Auron956@user/auron) (Remote host closed the connection)
[04:53:40] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[04:53:57] *** Quits: gp5st (~gp5st@2601:541:4301:5390:3c9f:6414:4d6d:1f3) (Ping timeout: 240 seconds)
[04:58:39] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[05:03:34] *** Joins: MrZeus__ (~MrZeus@194.37.96.103)
[05:06:50] *** Quits: MrZeus_ (~MrZeus@194.37.96.135) (Ping timeout: 252 seconds)
[05:07:31] *** Joins: maciek5432 (~maciek@2600:1700:a412:1c00:f594:9e77:af37:8a65)
[05:09:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[05:13:17] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[05:15:15] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[05:16:20] *** Quits: tehenderz (~tehenderz@ti0018a400-10008.bb.online.no) (Ping timeout: 256 seconds)
[05:16:23] *** Joins: off^ (~off@50.232.121.75)
[05:16:31] *** Quits: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[05:16:47] *** Joins: tehenderz (~tehenderz@ti0018a400-9207.bb.online.no)
[05:17:43] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[05:22:13] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[05:22:49] *** Joins: bird8 (~bird@136-25-143-83.cab.webpass.net)
[05:26:13] *** Quits: ivii (~ivan@user/ivii) (Remote host closed the connection)
[05:26:20] *** Joins: jazzy (~jaziz@user/jaziz)
[05:26:33] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::4f67)
[05:28:51] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[05:29:23] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 256 seconds)
[05:30:04] *** Quits: libsys (~libsys@186.107.230.81) (Remote host closed the connection)
[05:32:49] *** Joins: libsys (~libsys@186.107.230.81)
[05:34:08] <ario> This is a bad query plan, right? https://explain.depesz.com/s/j7af
[05:35:36] *** Quits: Su-Shee (~Susanne@148-125-142-46.pool.kielnet.net) (Ping timeout: 256 seconds)
[05:37:12] *** Joins: Su-Shee (~Susanne@120-110-142-46.pool.kielnet.net)
[05:42:54] *** Joins: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net)
[05:44:14] *** Quits: f3f3lix (~weechat@55d43a3b.access.ecotel.net) (Ping timeout: 252 seconds)
[05:46:18] *** Joins: f3f3lix (~weechat@55d422a9.access.ecotel.net)
[05:47:42] *** Quits: erisco (~erisco@d24-57-249-233.home.cgocable.net) (Quit: ZNC 1.8.2+cygwin2 - https://znc.in)
[05:48:31] *** Joins: erisco (~erisco@d24-57-249-233.home.cgocable.net)
[05:48:38] *** Quits: MrZeus__ (~MrZeus@194.37.96.103) (Ping timeout: 256 seconds)
[05:48:38] *** Quits: martti (~martti@46-126-48-136.dynamic.hispeed.ch) (Ping timeout: 256 seconds)
[05:56:32] *** Quits: Michelle (~michelle@203.206.128.220) (Ping timeout: 250 seconds)
[05:59:03] *** Joins: llanhmod (~personnel@user/domhnall/x-2887755)
[06:00:09] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[06:04:36] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 240 seconds)
[06:05:26] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[06:09:58] *** Quits: n0fun (~jack@mue-88-130-48-008.dsl.tropolys.de) (Ping timeout: 250 seconds)
[06:10:22] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 272 seconds)
[06:17:07] *** Quits: Teraii (~teraii@185.219.206.44) (Quit: %Ho Ishuudaa%)
[06:17:37] *** Joins: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net)
[06:19:53] *** Joins: Teraii (~teraii@185.219.206.44)
[06:20:03] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[06:20:09] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[06:20:17] <llanhmod> Hi, would like tips on troubleshooting why I cannot connect to my database/server via pgAdmin4. I am able to connect via cli using `su - postgres`.  This issue seems only on Ubuntu(20.04). pgAdmin4 works fine on Win32.
[06:21:34] <llanhmod> I get 'Unable to connect to server: connection to server at 'localhost' failed. password auth failed for user 'postgres'.  Which is strange because the password works on the command line just fine.
[06:22:38] *** Quits: Reiner_Unsinn (~quassel@p4fd6db85.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[06:24:04] <llanhmod> not sure it matters, but the output from `select version();` "PostgreSQL 12.9 (Ubuntu 12.9-0ubuntu0.20.04.1) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0, 64-bit"
[06:24:55] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Ping timeout: 240 seconds)
[06:25:14] <llanhmod> anyway, will work on other issues I am facing til someone replies...(if someone replies at all)
[06:25:29] *** Quits: krux02 (~krux02@p200300e8170d4f006ddf23d312f7f0a9.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[06:28:11] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[06:28:11] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[06:28:11] *** Joins: hoppity (~hoppity@user/hoppity)
[06:32:17] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[06:32:24] *** Quits: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net) (Quit: Leaving)
[06:33:46] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[06:33:46] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[06:33:46] *** Joins: hoppity (~hoppity@user/hoppity)
[06:37:45] *** Joins: maciek_ (~maciek@99-145-198-91.lightspeed.sntcca.sbcglobal.net)
[06:40:12] *** Quits: maciek5432 (~maciek@2600:1700:a412:1c00:f594:9e77:af37:8a65) (Ping timeout: 240 seconds)
[06:40:48] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[06:44:41] *** Quits: nivag (~gavin@103-76-144-176.ip.cis.gen.nz) (Remote host closed the connection)
[06:44:48] *** Joins: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com)
[06:45:18] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 256 seconds)
[06:45:25] *** Joins: nivag (~gavin@103-76-144-176.ip.cis.gen.nz)
[06:48:08] <peerce> llanhmod; are you runnin gpgadmin4 on the same host as the database server, or on another host?
[06:48:52] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[06:49:23] <ario> i forget, do subqueries hit an index or does the outter query only hit an index?
[06:49:43] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Remote host closed the connection)
[06:49:56] <peerce> subqueries are unwound and processed all as part of the whole operation, so the answer is, 'it depends'
[06:49:58] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[06:50:36] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[06:51:24] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Remote host closed the connection)
[06:51:38] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[06:53:06] <llanhmod> peerce: gpgadmin4 ? I don't know if I have that at all...let me check.
[06:54:17] <ario> hmm
[06:54:20] <llanhmod> peerce: I dont see that package in my distros repo and searching on system or using the command I cannot find anything
[06:56:43] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Remote host closed the connection)
[06:57:19] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[06:57:41] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[06:58:43] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Remote host closed the connection)
[06:59:48] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[07:00:07] <peerce> that was a typo, I meant pgadmin4.   are you running it on  the same system that the database service is on, or is it on another system, connecting via a tcp/ip address ?
[07:00:51] <peerce> postgres has to be configured to allow network connections
[07:02:18] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 272 seconds)
[07:02:46] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[07:03:40] <llanhmod> peerce: yes, I have the desktop and web version. though I am only using the desktop version
[07:04:21] <llanhmod> peerce: okay...would that be handled in the pdAdmin4 application or some config file?
[07:04:34] <llanhmod> er..pgAdmin48
[07:04:50] <peerce> ok, what specific errror did you get when you tried to connect ?
[07:06:31] *** Quits: tehenderz (~tehenderz@ti0018a400-9207.bb.online.no) (Ping timeout: 256 seconds)
[07:06:58] *** Joins: tehenderz (~tehenderz@ti0018a400-9282.bb.online.no)
[07:07:09] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[07:07:10] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[07:07:10] *** Joins: hoppity (~hoppity@user/hoppity)
[07:07:20] <llanhmod> peerce: https://imgur.com/a/xGYIEop
[07:07:44] <llanhmod> https://imgur.com/JiOipT9
[07:07:53] <llanhmod> I think they are the same..never used this site before
[07:07:54] <peerce> i don't want to look at a spammy paste site at images.    WHAT IS THE ONE LINE OF TEXT ERROR MESSAGE
[07:08:57] <llanhmod> "Unable to connect to server: connection to server at
[07:09:01] <peerce> sonmethin glike,  error: connection to server at "hostname" (xxx.xxx.xxx.xxx), port 5432 failed: FATAL:  password authentication failed for user "postgres"
[07:09:22] <llanhmod> 'localhost' ...failed password authentication failed for user postgres
[07:09:34] <llanhmod> yes
[07:09:54] <peerce> ok, did you set a password for the postgresl role?
[07:10:01] <llanhmod> yes
[07:10:18] <peerce> sudo -u postgres psql -c "alter role postgres password 'zyzzy'"
[07:10:18] <llanhmod> password works as expected via cli
[07:10:39] <peerce> does it?   if you use sudo -u .... psql   you're using peer authentication, not password
[07:11:11] <llanhmod> hm...did not know that
[07:11:16] <peerce> ??auth
[07:11:17] <pg_docbot> https://www.postgresql.org/docs/current/static/client-authentication.html
[07:11:18] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[07:12:02] <peerce> LOCAL and HOST .... 127.0.0.0/8   are different connection methods
[07:14:11] <llanhmod> peerce: so, for hostname/address I dont use localhost ?
[07:14:16] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[07:14:50] <llanhmod> oh nevermind...it works still
[07:15:02] <llanhmod> that was....simple. Thank you!
[07:15:24] <peerce> localhost is an alias for 127.0.0.1 and ipv6 ::1
[07:15:28] <llanhmod> right
[07:15:55] <llanhmod> looks like it is working and connected. on the the testing goat! thanks a million!
[07:15:59] <peerce> what I'm trying to say is,   psql ...   and psql -h localhost ....    are two different connection methods.
[07:16:09] <peerce> the first uses a direct 'unix domain socket' connection
[07:16:48] <peerce> while psql -h  uses a 'host'  tcp/ip connection
[07:17:13] <llanhmod> interesting, was that documented in that link....(I surely overlooked it if so)
[07:17:42] <peerce> look at 'host' vs 'local' in the pg_hba.conf authorization file
[07:18:04] * llanhmod *nods*
[07:18:48] *** Joins: Michelle (~michelle@2407:8800:bc20:200a:295a:436b:50a9:41d6)
[07:20:47] *** Quits: hoppity (~hoppity@user/hoppity) ()
[07:23:40] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:24:20] *** Quits: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net) (Quit: WeeChat 2.8)
[07:25:58] *** Joins: kstatz12 (~kstatz12@205.178.87.116)
[07:27:20] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:28:05] *** Joins: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net)
[07:29:37] *** Quits: Vacuity (~Vacuity@user/vovo) (Ping timeout: 240 seconds)
[07:30:38] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[07:31:35] *** Joins: Vacuity (~Vacuity@user/vovo)
[07:32:12] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 240 seconds)
[07:34:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[07:35:21] *** Quits: led_belly_ (~led_belly@37.120.197.46) (Remote host closed the connection)
[07:36:36] *** Quits: ur5us_ (~ur5us@2406:e002:6845:dc01:68c7:1b9f:7d41:5e0d) (Ping timeout: 240 seconds)
[07:38:13] *** Joins: zz1 (~Thunderbi@p9095131-ipngn8701marunouchi.tokyo.ocn.ne.jp)
[07:38:36] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[07:40:12] *** Quits: maciek_ (~maciek@99-145-198-91.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 240 seconds)
[07:41:46] *** Quits: sreve (~quassel@p4ff44d50.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[07:42:07] *** Joins: sreve (~quassel@p549d7045.dip0.t-ipconnect.de)
[07:42:12] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[07:42:17] *** Quits: zz1 (~Thunderbi@p9095131-ipngn8701marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 240 seconds)
[07:42:39] *** Joins: SwK_ (~SwK_@2600:1700:5360:40d0:a176:da3b:1a9f:8528)
[07:46:26] *** Quits: SwK (~SwK_@user/swk) (Ping timeout: 260 seconds)
[07:50:46] *** Joins: bpmedley_ (~bpmedley@2600:1700:e2c:8410:74fe:e115:6802:6be0)
[07:52:00] *** Quits: jjhoo (~jahakala@user/jjhoo) (Ping timeout: 268 seconds)
[07:53:17] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:7401:e850:bd68:4c37) (Ping timeout: 240 seconds)
[07:53:53] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[07:57:04] *** Joins: jjhoo (~jahakala@user/jjhoo)
[08:02:33] *** Quits: urandom9000 (~urandom90@2600:1700:1474:4b70:5c42:5649:b4d1:ac92) (Quit: Leaving)
[08:05:40] *** Joins: funhouse (~funhouse@user/funhouse)
[08:11:41] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Ping timeout: 256 seconds)
[08:13:43] *** Quits: agates (~agates@071-089-046-046.res.spectrum.com) (Quit: Connection closed)
[08:15:25] *** Quits: Slade (uid128877@user/slade) (Quit: Connection closed for inactivity)
[08:20:50] *** Quits: bird8 (~bird@136-25-143-83.cab.webpass.net) (Ping timeout: 272 seconds)
[08:22:16] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[08:25:02] *** Quits: uncleyear (ian@gateway/vpn/protonvpn/uncleyear) (Ping timeout: 256 seconds)
[08:25:56] *** Joins: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[08:26:44] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 256 seconds)
[08:29:40] *** Joins: k8yun (~k8yun@user/k8yun)
[08:33:49] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[08:37:53] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[08:38:25] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[08:41:28] *** Quits: zlinux (~zlinux@149.109.20.149) (Ping timeout: 256 seconds)
[08:47:56] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[08:48:14] *** Joins: mitch-podverse (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[08:54:09] *** Quits: off^ (~off@50.232.121.75) (Remote host closed the connection)
[08:54:36] *** Quits: llanhmod (~personnel@user/domhnall/x-2887755) (Ping timeout: 240 seconds)
[08:55:09] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[08:56:59] *** Quits: mitch-podverse (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[08:57:18] *** Joins: mitch-podverse (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[08:59:11] *** Joins: ur5us_ (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d)
[08:59:28] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[08:59:36] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 256 seconds)
[09:01:33] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 256 seconds)
[09:03:13] *** Quits: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:06:06] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Remote host closed the connection)
[09:11:41] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[09:12:09] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[09:18:21] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Remote host closed the connection)
[09:19:15] *** ba|ch` is now known as ba|ch
[09:20:08] *** Joins: mattil (~mattil@d5l3gsfh6tylg84rpnz-4.rev.dnainternet.fi)
[09:22:18] *** Quits: mitch-podverse (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[09:22:36] *** Joins: mitch-podverse (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[09:23:33] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[09:25:33] *** Quits: mattil (~mattil@d5l3gsfh6tylg84rpnz-4.rev.dnainternet.fi) (Remote host closed the connection)
[09:26:15] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Quit: Leaving)
[09:26:29] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[09:28:32] *** Joins: kakashiAL (~kakashi@105.156.4.88)
[09:30:11] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Client Quit)
[09:31:02] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[09:32:09] *** Joins: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net)
[09:32:28] *** Joins: mattil (~mattil@87-95-105-127.bb.dnainternet.fi)
[09:33:25] *** Joins: mattil_ (~mattil@d5l3gsfh6tylg84rpnz-4.rev.dnainternet.fi)
[09:37:34] *** Quits: mattil (~mattil@87-95-105-127.bb.dnainternet.fi) (Ping timeout: 256 seconds)
[09:37:45] *** Quits: mattil_ (~mattil@d5l3gsfh6tylg84rpnz-4.rev.dnainternet.fi) (Remote host closed the connection)
[09:38:35] *** Quits: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br) (Quit: leaving)
[09:38:49] *** Joins: darutoko (~darutoko@92.125.51.34)
[09:41:45] *** Joins: the_lanetly_052_ (~the_lanet@194.135.152.163)
[09:42:57] *** Quits: the_lanetly_052_ (~the_lanet@194.135.152.163) (Max SendQ exceeded)
[09:43:29] *** Joins: the_lanetly_052_ (~the_lanet@194.135.152.163)
[09:44:13] *** Quits: the_lanetly_052_ (~the_lanet@194.135.152.163) (Max SendQ exceeded)
[09:44:41] *** Joins: the_lanetly_052_ (~the_lanet@185.30.88.67)
[09:45:39] *** Quits: Enissay (~Enissay@user/enissay) (Quit: WeeChat 3.0)
[09:46:06] *** Quits: the_lanetly_052_ (~the_lanet@185.30.88.67) (Max SendQ exceeded)
[09:46:32] *** Joins: Enissay (~Enissay@user/enissay)
[09:46:33] *** Joins: the_lanetly_052_ (~the_lanet@185.30.88.67)
[09:47:51] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[09:48:09] *** Joins: szymon (~ugh@37.120.211.214)
[09:48:11] *** Joins: bindu (~bindu@user/bindu)
[09:50:47] *** Joins: mattil (~mattil@helsinki.portalify.com)
[09:50:51] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[09:51:04] *** Joins: mattil (~mattil@helsinki.portalify.com)
[09:52:46] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:55:40] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Quit: The Lounge - https://thelounge.chat)
[10:04:11] *** Joins: Slade (uid128877@user/slade)
[10:06:34] *** Joins: nulixes (~Thunderbi@gateway/vpn/pia/nulixes)
[10:10:26] *** Quits: szymon (~ugh@37.120.211.214) (Ping timeout: 256 seconds)
[10:16:54] *** Joins: uncleyear (ian@gateway/vpn/protonvpn/uncleyear)
[10:22:25] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[10:23:00] *** Quits: ur5us_ (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d) (Ping timeout: 240 seconds)
[10:23:09] *** Joins: mattil (~mattil@helsinki.portalify.com)
[10:23:27] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[10:23:39] *** Joins: mattil (~mattil@helsinki.portalify.com)
[10:28:49] *** Quits: tehenderz (~tehenderz@ti0018a400-9282.bb.online.no) (Ping timeout: 256 seconds)
[10:29:08] *** Joins: tehenderz (~tehenderz@ti0018a400-9392.bb.online.no)
[10:30:41] *** Quits: bigGopher (~dan@207.98.176.66) (Quit: bigGopher)
[10:33:43] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:36f7:98bd:5ea5:3ae5)
[10:38:08] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[10:39:05] *** Joins: kakashiA1 (~kakashi@105.157.237.207)
[10:40:13] *** Quits: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net) (Read error: Connection reset by peer)
[10:40:36] *** Joins: Reiner_Unsinn (~quassel@p4fd6db85.dip0.t-ipconnect.de)
[10:42:04] *** Quits: kakashiAL (~kakashi@105.156.4.88) (Ping timeout: 272 seconds)
[10:43:18] *** Quits: uncleyear (ian@gateway/vpn/protonvpn/uncleyear) (Ping timeout: 256 seconds)
[10:47:11] *** Joins: randir (~randir@93.159.239.42)
[10:50:38] *** Joins: mrwick (~mrwick@user/mrwick)
[10:51:04] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[10:52:12] *** Quits: randir (~randir@93.159.239.42) (Ping timeout: 272 seconds)
[10:52:24] *** Joins: mattil (~mattil@helsinki.portalify.com)
[10:55:01] *** Joins: uncleyear (~ian@31.173.83.37)
[10:55:27] *** Quits: mitch-podverse (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Ping timeout: 256 seconds)
[10:57:27] *** Quits: bencc1 (~bencc1@2a00:a040:197:3af:36f7:98bd:5ea5:3ae5) (Quit: Leaving)
[10:58:17] *** Joins: ekathva (~ekathva@93-90-58-246.welcomnet.fi)
[10:58:55] *** Joins: electron^-892402 (~electron^@212.66.122.116)
[11:01:04] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 272 seconds)
[11:01:41] *** Joins: mattil (~mattil@helsinki.portalify.com)
[11:03:36] *** Quits: Su-Shee (~Susanne@120-110-142-46.pool.kielnet.net) (Ping timeout: 272 seconds)
[11:04:45] *** Joins: Su-Shee (~Susanne@216-108-142-46.pool.kielnet.net)
[11:05:12] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[11:06:22] *** Joins: shiranaihito (~textual@27.105.50.111)
[11:07:24] *** Quits: marco44 (~marco44@82-64-126-208.subs.proxad.net) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[11:08:16] *** Joins: marco44 (~marco44@82-64-126-208.subs.proxad.net)
[11:08:22] *** Joins: palasso (~palasso@user/palasso)
[11:10:52] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:cf46:ee9d:2151:3270)
[11:12:15] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[11:15:00] *** Quits: kakashiA1 (~kakashi@105.157.237.207) (Ping timeout: 272 seconds)
[11:21:04] *** Joins: vanessa (~farawayas@103.160.128.7)
[11:22:12] *** Joins: gleu (~guillaume@78.203.164.42)
[11:22:13] *** Quits: fcr (~fran@r186-48-55-62.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[11:25:28] *** Joins: llanhmod (~personnel@user/domhnall/x-2887755)
[11:27:03] *** Joins: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de)
[11:30:03] *** Quits: csmiga (~Thunderbi@ec2-52-207-160-196.compute-1.amazonaws.com) (Remote host closed the connection)
[11:30:52] *** Joins: fcr (~fran@r167-60-23-73.dialup.adsl.anteldata.net.uy)
[11:32:06] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[11:32:15] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Quit: ponsfrilus)
[11:33:44] *** Joins: realies2 (~realies@user/realies)
[11:34:52] *** Quits: realies (~realies@user/realies) (Ping timeout: 256 seconds)
[11:34:52] *** realies2 is now known as realies
[11:36:08] *** Joins: jazzy2 (~jaziz@user/jaziz)
[11:36:36] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[11:39:24] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 256 seconds)
[11:39:33] *** jazzy2 is now known as jazzy
[11:40:21] *** Joins: michalz (~michalz@185.246.204.77)
[11:41:13] *** Joins: shka (~herr@109.231.3.55)
[11:41:15] *** Joins: ivii (~ivan@user/ivii)
[11:41:24] *** Joins: manti7 (~manti7@176.10.104.94)
[11:47:18] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[11:47:26] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (Ping timeout: 245 seconds)
[11:47:42] <maret> I am getting message checkpoints are occurring too frequently (24 seconds apart) Consider increasing the configuration parameter "max_wal_size". which is now 4GB how much should I increase it?
[11:47:57] *** Joins: mattil (~mattil@helsinki.portalify.com)
[11:48:44] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Quit: ponsfrilus)
[11:49:13] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[11:49:36] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[11:51:16] *** Joins: ur5us_ (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d)
[11:53:04] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[11:53:05] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[11:55:18] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[11:55:30] *** Joins: mattil (~mattil@helsinki.portalify.com)
[11:56:10] *** Joins: nulixes1 (~Thunderbi@gateway/vpn/pia/nulixes)
[11:56:37] *** Quits: shiranaihito (~textual@27.105.50.111) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[11:57:00] *** Quits: rb (~augh@209.141.39.190) (Ping timeout: 240 seconds)
[11:58:10] *** Joins: Shells (~michelle@203.206.128.220)
[11:59:01] *** Joins: rendar (~rendar@user/rendar)
[11:59:22] <peerce> maret; is this happening while you are doing something unuusal like maintenance or bulk importing, or just under normal workload?
[11:59:48] *** Quits: nulixes (~Thunderbi@gateway/vpn/pia/nulixes) (Ping timeout: 240 seconds)
[11:59:49] *** nulixes1 is now known as nulixes
[11:59:54] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[11:59:55] <peerce> I generally ignore those during unusual bulk data operations
[12:00:06] *** Quits: Michelle (~michelle@2407:8800:bc20:200a:295a:436b:50a9:41d6) (Ping timeout: 250 seconds)
[12:00:27] <maret> yeah something unusual basically (large) initial import of data
[12:00:58] <peerce> but if its happening under normal operations, I think the checkpoint target is 30s, so 24s is barely faster, so maybe double the checkpoint_segments
[12:01:13] <peerce> oh, ok, if its happening during a bulk import, yeah, ignore.
[12:01:32] *** Joins: vladoski (~vladoski@217.147.130.65)
[12:01:38] <peerce> if you had hours and hours of import and it was checkpointing every minute, tehen maybe I'd suggest adjusting
[12:01:44] *** Joins: ponsfrilus1 (~Thunderbi@vpn-254-195.epfl.ch)
[12:01:52] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 272 seconds)
[12:01:53] *** ponsfrilus1 is now known as ponsfrilus
[12:02:55] <peerce> er, every second.
[12:03:03] * peerce slaps myself silly.
[12:04:06] *** Joins: rwb (~augh@alogs.space)
[12:04:20] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 256 seconds)
[12:06:35] *** Quits: marco44 (~marco44@82-64-126-208.subs.proxad.net) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[12:06:41] *** Quits: rodo (~rodo@2a01:e0a:2c6:d5f0:bda2:9bac:150b:9d57) (Ping timeout: 268 seconds)
[12:06:51] *** Joins: marco44 (~marco44@82-64-126-208.subs.proxad.net)
[12:07:42] *** Joins: shiranaihito (~textual@2001-b011-4011-3ba9-800c-b172-f16d-89d0.dynamic-ip6.hinet.net)
[12:08:56] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[12:15:48] *** Quits: llanhmod (~personnel@user/domhnall/x-2887755) (Ping timeout: 272 seconds)
[12:17:52] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::4f67) (Ping timeout: 250 seconds)
[12:18:20] *** Joins: rodo (~rodo@2a01:e0a:2c6:d5f0:c065:d1e0:f2d9:673b)
[12:19:43] *** Joins: merzo (~Thunderbi@192.162.238.196)
[12:20:10] *** Quits: uncleyear (~ian@31.173.83.37) (Remote host closed the connection)
[12:20:42] *** Joins: nulixes1 (~Thunderbi@gateway/vpn/pia/nulixes)
[12:20:46] *** Quits: nulixes (~Thunderbi@gateway/vpn/pia/nulixes) (Ping timeout: 256 seconds)
[12:20:46] *** nulixes1 is now known as nulixes
[12:21:09] *** Joins: uncleyear (~ian@31.173.83.37)
[12:22:06] *** Quits: merzo (~Thunderbi@192.162.238.196) (Client Quit)
[12:24:36] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4)
[12:27:42] *** Joins: fercell (~ferr@45.82.33.229)
[12:29:46] *** Quits: magnush (~mha@postgresql/overlord) (Remote host closed the connection)
[12:30:26] *** Joins: mattil (~mattil@helsinki.portalify.com)
[12:30:32] *** Joins: magnush (~mha@postgresql/overlord)
[12:30:57] *** Joins: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[12:32:11] *** Joins: aLeSD (~aLeSD@91.126.33.194)
[12:32:21] *** Joins: martti (~martti@46-126-48-136.dynamic.hispeed.ch)
[12:33:48] *** Quits: uncleyear (~ian@31.173.83.37) (Ping timeout: 240 seconds)
[12:36:01] *** Joins: uncleyear (~ian@31.173.83.37)
[12:37:03] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[12:37:22] *** Joins: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com)
[12:37:24] *** Quits: xocolatl (~xocolatl@193.32.126.231) (Ping timeout: 240 seconds)
[12:37:49] *** Joins: bird8 (~bird@136-25-143-83.cab.webpass.net)
[12:38:38] *** Quits: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com) (Client Quit)
[12:39:14] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 272 seconds)
[12:39:16] *** Quits: bird8 (~bird@136-25-143-83.cab.webpass.net) (Client Quit)
[12:39:17] *** Joins: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com)
[12:39:28] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 256 seconds)
[12:40:41] *** Joins: cliluw (~cliluw@47.147.77.43)
[12:41:26] *** Joins: xocolatl (~xocolatl@193.32.126.219)
[12:41:30] *** Quits: ekathva (~ekathva@93-90-58-246.welcomnet.fi) (Remote host closed the connection)
[12:43:20] *** Joins: mattil (~mattil@helsinki.portalify.com)
[12:48:40] *** Joins: Auron (Auron956@user/auron)
[12:48:52] *** Joins: merzo (~Thunderbi@192.162.238.196)
[12:48:59] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[12:49:28] *** Joins: bird8 (~bird@136-25-143-83.cab.webpass.net)
[12:50:14] *** Quits: xocolatl (~xocolatl@193.32.126.219) (Ping timeout: 256 seconds)
[12:51:34] *** Joins: xocolatl (~xocolatl@194.110.113.71)
[12:56:05] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:1c1a:3fa2:4926:7c5a)
[12:56:57] *** Joins: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr)
[12:58:32] *** Quits: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[12:59:09] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:01:44] *** Joins: krux02 (~krux02@p200300e8170d4f006ddf23d312f7f0a9.dip0.t-ipconnect.de)
[13:05:12] *** Quits: gleu (~guillaume@78.203.164.42) (Ping timeout: 272 seconds)
[13:05:39] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[13:07:48] *** Quits: ur5us_ (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d) (Ping timeout: 240 seconds)
[13:08:02] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[13:08:40] *** Quits: held (~heldchen@user/held) (Remote host closed the connection)
[13:09:11] *** Quits: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca) (Ping timeout: 250 seconds)
[13:09:12] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:09:16] *** Joins: Guest5584 (~vit@chello085216193138.chello.sk)
[13:11:05] *** Joins: held (~heldchen@user/held)
[13:11:44] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[13:12:32] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 240 seconds)
[13:12:35] *** Joins: mattil (~mattil@helsinki.portalify.com)
[13:14:17] *** Quits: jmcgnh (~jmcgnh@wikipedia/jmcgnh) (Ping timeout: 256 seconds)
[13:15:48] *** Joins: Klinda (~superleag@user/klinda)
[13:16:06] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[13:16:12] *** Joins: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c)
[13:16:56] *** Quits: newdimension (~newdimens@user/newdimension) (Quit:  )
[13:18:09] *** Joins: newdimension (~newdimens@user/newdimension)
[13:19:13] *** Joins: gleu (~guillaume@78.203.164.42)
[13:19:17] *** Joins: jmcgnh (~jmcgnh@wikipedia/jmcgnh)
[13:23:32] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[13:24:16] *** Joins: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com)
[13:24:23] *** Quits: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com) (Remote host closed the connection)
[13:24:58] *** Joins: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca)
[13:26:34] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:27:21] *** Joins: ekathva (~ekathva@n14jr7jr13zqs0uz1-1.v6.elisa-mobile.fi)
[13:29:32] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[13:30:15] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Client Quit)
[13:32:11] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:32:25] *** Quits: phylaz (~phylaz@82.51-174-55.customer.lyse.net) (Ping timeout: 256 seconds)
[13:32:48] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Client Quit)
[13:33:31] *** Joins: mattil (~mattil@helsinki.portalify.com)
[13:34:09] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:34:26] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Client Quit)
[13:36:26] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:37:25] *** Joins: randir (~randir@93.159.239.42)
[13:40:39] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Client Quit)
[13:41:21] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:41:27] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Client Quit)
[13:41:53] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:41:56] *** Quits: randir (~randir@93.159.239.42) (Ping timeout: 272 seconds)
[13:43:35] *** Quits: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812) (Client Quit)
[13:45:30] *** Joins: phylaz (~phylaz@82.51-174-55.customer.lyse.net)
[13:45:52] *** Joins: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com)
[13:46:36] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[13:47:09] *** Joins: mattil (~mattil@helsinki.portalify.com)
[13:47:17] *** Quits: pgSnake (~dpage@ec2-18-135-169-55.eu-west-2.compute.amazonaws.com) (Client Quit)
[13:47:45] *** Joins: pgSnake (~dpage@2a05:d01c:f24:7700:408e:f5f8:c599:1812)
[13:52:34] *** Quits: tehenderz (~tehenderz@ti0018a400-9392.bb.online.no) (Ping timeout: 256 seconds)
[13:52:48] *** Joins: tehenderz (~tehenderz@ti0018a400-9502.bb.online.no)
[13:56:47] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[14:00:57] *** Joins: ekathva_ (~ekathva@n14jp5os0e43ev9my-1.v6.elisa-mobile.fi)
[14:02:08] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[14:02:13] *** Quits: ekathva (~ekathva@n14jr7jr13zqs0uz1-1.v6.elisa-mobile.fi) (Ping timeout: 240 seconds)
[14:03:38] *** Joins: irionr (~irionr@net-93-145-27-202.cust.vodafonedsl.it)
[14:04:10] *** Joins: alastairp (sid1249@2a03:5180:f:5::4e1)
[14:06:01] <alastairp> hi all - a quick question about postgres + libc, should I expect any problems if I load a postgres data directory created in alpine (musl) into postgres running on debian (glibc)? Specifically, I suddenly had a thought that collation might be different between the two, but I don't know if postgres just relies on the system value for this or stores it in the data file when creating an index
[14:07:25] *** Quits: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c) (Remote host closed the connection)
[14:07:51] *** Joins: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c)
[14:08:24] *** Quits: held (~heldchen@user/held) ()
[14:10:06] *** Quits: irionr (~irionr@net-93-145-27-202.cust.vodafonedsl.it) (Remote host closed the connection)
[14:11:01] <Myon> alastairp: it's a problem for text indexes if the glibc version is different
[14:11:03] <Myon> ??collation
[14:11:04] <pg_docbot> https://www.postgresql.org/docs/current/static/collation.html :: https://wiki.postgresql.org/wiki/Locale_data_changes
[14:11:04] <pg_docbot> https://postgresql.verite.pro/blog/2019/10/14/nondeterministic-collations.html
[14:11:11] *** Quits: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch) (Quit: ponsfrilus)
[14:11:11] <Myon> alastairp: middle link
[14:11:34] *** Joins: randir (~randir@93.159.239.42)
[14:11:47] <alastairp> Myon: ah great, I didn't know that this was even a problem between glibc's. Glad to know that my intuition was correct, thanks for the links
[14:11:54] <Myon> the tl;dr is: reindex all (text) indexes
[14:12:23] <alastairp> right
[14:12:51] *** Joins: held (~heldchen@user/held)
[14:15:48] *** Quits: randir (~randir@93.159.239.42) (Ping timeout: 240 seconds)
[14:19:17] <Myon> I have no idea where musl is in that list of back-and-forth changes
[14:21:12] *** Quits: jazzy (~jaziz@user/jaziz) (Quit: Beddie bye-bye)
[14:21:26] <alastairp> I'm currently doing a test on a copy of the db, so I'll soon see!
[14:22:07] *** Quits: held (~heldchen@user/held) ()
[14:23:51] *** Joins: held (~heldchen@user/held)
[14:26:57] *** Quits: dreinull30 (~dreinull@2a01:4f8:1c1c:8981::1) (Quit: The Lounge - https://thelounge.chat)
[14:27:19] *** Quits: held (~heldchen@user/held) (Remote host closed the connection)
[14:28:57] *** Joins: held (~heldchen@user/held)
[14:30:17] *** Joins: dreinull30 (~dreinull@2a01:4f8:1c1c:8981::1)
[14:30:41] *** Joins: n0fun (~jack@mue-88-130-48-048.dsl.tropolys.de)
[14:33:56] *** Quits: Guest5584 (~vit@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[14:35:37] *** Joins: Guest5584 (~vit@chello085216193138.chello.sk)
[14:39:44] *** Shells is now known as Michelle
[14:41:07] *** Joins: mattil (~mattil@helsinki.portalify.com)
[14:44:23] *** Quits: mnencia (~mnencia@debian/mnencia) (Read error: Connection reset by peer)
[14:44:37] *** Joins: mnencia (~mnencia@debian/mnencia)
[14:45:16] *** Joins: _vanessa_ (~farawayas@103.160.128.7)
[14:45:32] *** Joins: randir (~randir@93.159.239.42)
[14:48:26] *** Quits: vanessa (~farawayas@103.160.128.7) (Ping timeout: 272 seconds)
[14:49:58] *** Quits: randir (~randir@93.159.239.42) (Ping timeout: 250 seconds)
[14:51:51] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[14:51:57] *** Quits: gleu (~guillaume@78.203.164.42) (Ping timeout: 240 seconds)
[14:52:14] *** Joins: walterwhip (~www@user/walterwhip)
[14:52:57] *** Quits: walterwhip (~www@user/walterwhip) (Client Quit)
[14:57:18] *** Quits: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca) (Ping timeout: 272 seconds)
[14:57:42] *** Joins: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca)
[14:59:26] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 256 seconds)
[15:00:22] *** Quits: Guest5584 (~vit@chello085216193138.chello.sk) (Ping timeout: 250 seconds)
[15:00:37] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4) (Remote host closed the connection)
[15:01:09] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4)
[15:01:17] *** Joins: nyov (~nyov@user/nyov)
[15:06:46] *** Joins: gleu (~guillaume@78.203.164.42)
[15:10:51] *** Joins: ben__ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[15:10:51] *** Quits: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Read error: Connection reset by peer)
[15:11:46] *** Joins: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net)
[15:13:01] *** Joins: Virtuoso (~Virtuoso@88.223.110.194)
[15:13:55] <Virtuoso> is there any performance difference for `AFTER UPDATE` and `BEFORE UPDATE` triggers?
[15:18:18] *** Joins: Guest5584 (~vit@chello085216193138.chello.sk)
[15:19:28] <Myon> if they aren't deferred, I don't think so
[15:20:44] *** Quits: Klinda (~superleag@user/klinda) (Ping timeout: 272 seconds)
[15:21:09] *** Joins: Klinda (~superleag@user/klinda)
[15:21:31] <Virtuoso> just found in the PSQL docs, saying `If you have no specific reason to make a trigger BEFORE or AFTER, the BEFORE case is more efficient, since the information about the operation doesn't have to be saved until end of statement.`
[15:23:49] <Myon> nod
[15:28:34] *** Joins: Guest52 (~Guest52@213.162.65.110)
[15:29:45] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[15:30:25] <Guest52> hi, is it possible to negate a gist EXCLUDE CONSTRAINT? "tstzrange(from, to) WITH -|-" ensures that there are no adjacent records - but I want the oppostite: I want to force that the new record "touches" the end of the old one
[15:31:23] <Myon> that sounds like something a foreign key would do
[15:31:50] <Myon> alter table foo add foreign key (from) references foo (to);
[15:32:03] <Myon> requires (to) to be UNIQUE
[15:34:07] *** Quits: krux02 (~krux02@p200300e8170d4f006ddf23d312f7f0a9.dip0.t-ipconnect.de) (Remote host closed the connection)
[15:34:16] <Guest52> yes i tried - but the problem is the first entry - you always have to add a dummy entry - or I'm wrong?
[15:35:39] <xocolatl> you would have to have a dummy entry, yes
[15:35:59] <xocolatl> and the dummy from would be null
[15:35:59] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Quit: WeeChat 3.0)
[15:36:13] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[15:37:26] *** Joins: krux02 (~krux02@p200300e8170d4f006ddf23d312f7f0a9.dip0.t-ipconnect.de)
[15:38:41] <Myon> or identical, (a,a)
[15:39:53] <depesz> Virtuoso: what is the trigger doing?
[15:40:04] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[15:40:25] *** Joins: randir (~randir@93.159.239.42)
[15:41:36] <Virtuoso> depesz, this: update public.users set affiliates_net_profit_reduce = affiliates_net_profit_reduce + (new.total_cashback_claimed - old.total_cashback_claimed) where id = new.id;
[15:41:54] <Virtuoso> so basically, just adds the delta (difference) of new and old value, into another column
[15:42:08] <Myon> in the same table?
[15:42:11] <depesz> another column or another column in another table?
[15:42:50] <depesz> Virtuoso: this is trigger on what table? users?
[15:43:16] *** Quits: tehenderz (~tehenderz@ti0018a400-9502.bb.online.no) (Ping timeout: 250 seconds)
[15:43:19] <Virtuoso> Myon, depesz, yes same table.
[15:43:30] <depesz> Virtuoso: why update then? does it update the same row?
[15:43:45] <Virtuoso> yes, updates the same row.
[15:43:58] *** Joins: tehenderz (~tehenderz@ti0018a400-9547.bb.online.no)
[15:44:02] <depesz> Virtuoso: if this is same table, same row, then don't UPDATE. just make it before trigger, and in the code: NEW.whatever_column := ...;
[15:44:12] <depesz> calling update makes the whole process slower, and increases bloat.
[15:44:36] <Myon> update also makes concurrency worse I think
[15:44:54] <depesz> Myon: i assume this is trigger on update, so it shouldn't matter much, i think.
[15:44:55] <Virtuoso> depesz, (y) this is actually how i implemented it now, my TL suggested that. Is it that UPDATE statement makes it slower, as it creates a 2nd update?
[15:44:56] <Myon> but maintaining these running sums has issues with concurrency anyway
[15:45:52] <Virtuoso> instead of using the same update statement
[15:45:55] <depesz> Virtuoso: yes. update is slower. if you are using NEW.... = ... - then why did you want to change it to UPDATE ?
[15:46:04] *** Quits: xocolatl (~xocolatl@194.110.113.71) (Ping timeout: 272 seconds)
[15:46:21] <Virtuoso> initially it was using `UPDATE`, and I changed it to use the pattern you suggested before you writing it :D
[15:46:49] <Virtuoso> So I was actually wondering about 2 things - whether there was performance difference between BEFORE and AFTER triggers (answered by pSQL docs), and then whether there was difference between UPDATE and using your suggested pattern
[15:47:03] <depesz> update will run 2nd update.
[15:47:04] <Virtuoso> so seems like i got answers to both things :)
[15:47:09] *** Joins: xocolatl (~xocolatl@14.149.88.79.rev.sfr.net)
[15:47:12] *** Quits: Guest52 (~Guest52@213.162.65.110) (Quit: Client closed)
[15:47:19] <depesz> Virtuoso: you might want to read: https://www.depesz.com/2012/11/14/how-i-learned-to-stop-worrying-and-love-the-triggers/
[15:47:37] <Virtuoso> will do! thanks
[15:47:41] *** Joins: lxwulf (~lxwulf@user/lxwulf)
[15:47:45] *** Parts: lxwulf (~lxwulf@user/lxwulf) ()
[15:48:05] <Virtuoso> have read quite some of your posts in the past, they are very well written
[15:48:16] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:1c1a:3fa2:4926:7c5a) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:48:20] <depesz> thank you.
[15:48:25] <Myon> the performance question is only relevant for things both versions can do
[15:48:38] <Myon> if you are changing the row, AFTER is not an option
[15:50:48] *** Joins: ^vanessa^ (~farawayas@103.160.128.7)
[15:50:51] <Virtuoso> yeah, I understood that now. Because I used AFTER trigger initially, I used the select statement
[15:50:58] *** Quits: ben__ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Remote host closed the connection)
[15:53:14] *** Quits: _vanessa_ (~farawayas@103.160.128.7) (Ping timeout: 250 seconds)
[15:53:24] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:1c1a:3fa2:4926:7c5a)
[15:54:46] *** Joins: _vanessa_ (~farawayas@103.160.128.7)
[15:57:02] *** Quits: ^vanessa^ (~farawayas@103.160.128.7) (Ping timeout: 240 seconds)
[16:00:58] *** Joins: llanhmod (~personnel@user/domhnall/x-2887755)
[16:02:49] *** Quits: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com) (Quit: The Lounge - https://thelounge.chat)
[16:05:59] *** Joins: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[16:07:36] *** Quits: tazle (tazle@kapsi.fi) (Ping timeout: 272 seconds)
[16:09:19] *** Joins: tazle (~tazle@kapsi.fi)
[16:10:11] *** Joins: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch)
[16:10:59] *** Joins: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br)
[16:12:08] <DNH> Is there any benefit of connection_pooling on pg pool II, if my application has already application level pooling? Because my application will open 40 connections at start to pg_pool already, so I am wondering if pg_pool will then for every query coming in from that application open a new connection to one of the read replicas?
[16:13:08] *** Joins: rufito (~phil@186-79-27-44.baf.movistar.cl)
[16:13:48] *** Quits: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch) (Client Quit)
[16:14:26] *** Joins: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch)
[16:20:43] *** Joins: cerill (~cerill@h-155-4-198-153.A785.priv.bahnhof.se)
[16:30:10] *** Joins: Rashad (~textual@2a01:9700:1aac:7d00:51ec:991a:a841:ebcc)
[16:31:24] *** Joins: MrZeus__ (~MrZeus@194.37.96.119)
[16:32:14] <ne2k> DNH, I'm no expert, but my understanding is that the purpose of things like pgpool is to provide pooling to applications that don't support it, and are constantly opening and closing connections. the pooler then converts this into reusing existing ones. if your application already does pooling I see no point in having a separate pooler
[16:32:34] <ne2k> but, like I said, not an expert
[16:33:51] <Myon> it can make sense if the app insists on too many connections
[16:34:12] <Myon> 40 is already a lot if you have 10 app servers
[16:34:26] <Myon> but usually it's not necessary
[16:34:37] <Myon> (and even then, pgbouncer is the better pooler)
[16:35:08] *** Quits: GeorgeK (~GeorgeK@cpe-70-92-5-228.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[16:37:03] <DNH> okay thanks, I am currently opening around ~250 connections. Why is pgbouncer better? In what terms? pgpool II offers also HA, so kinda thought that would be the go to as it has everything in it
[16:37:05] *** Quits: peb (~PEB@debian/peb) (Ping timeout: 252 seconds)
[16:38:08] <Myon> imho pgpool bundles too many things in one tool, it's hard to debug if something goes wrong
[16:38:20] <Myon> there are also better HA solutions (patroni for instance)
[16:38:54] *** Quits: MrZeus__ (~MrZeus@194.37.96.119) (Ping timeout: 260 seconds)
[16:47:09] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[16:49:14] *** Joins: peb (~PEB@debian/peb)
[16:51:14] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[16:51:19] *** Quits: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch) (Quit: ponsfrilus)
[16:51:45] *** Joins: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch)
[16:53:15] *** Joins: ovnicraft (~ovnicraft@200.7.247.218)
[16:54:15] *** Quits: ba|ch (~user@p200300f3a7089c7deca13957824683d1.dip0.t-ipconnect.de) (Remote host closed the connection)
[16:55:58] *** Quits: cerill (~cerill@h-155-4-198-153.A785.priv.bahnhof.se) (Quit: Client closed)
[16:58:46] *** Joins: ba|ch (~user@p200300f3a7089c7de2a17090ff0750d1.dip0.t-ipconnect.de)
[16:58:51] *** Quits: ovnicraft (~ovnicraft@200.7.247.218) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:59:52] *** Quits: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch) (Quit: ponsfrilus)
[17:01:38] *** Joins: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch)
[17:02:45] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[17:03:52] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[17:08:24] *** Quits: awmv (~awmv@mob-194-230-148-95.cgn.sunrise.net) (Ping timeout: 272 seconds)
[17:09:00] *** Quits: epony (epony@user/epony) (Quit: QUIT)
[17:09:06] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[17:09:40] *** Quits: krux02 (~krux02@p200300e8170d4f006ddf23d312f7f0a9.dip0.t-ipconnect.de) (Remote host closed the connection)
[17:10:24] *** Joins: renihs (~renihs@89.58.15.194)
[17:11:49] <renihs> hmm should the intermediates (chain) be placed in the ssl_cert_file ?
[17:13:04] *** Joins: csmiga (~Thunderbi@ec2-52-207-160-196.compute-1.amazonaws.com)
[17:14:08] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[17:14:59] *** Quits: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch) (Quit: ponsfrilus)
[17:16:00] *** Quits: Su-Shee (~Susanne@216-108-142-46.pool.kielnet.net) (Ping timeout: 250 seconds)
[17:17:50] *** Joins: Su-Shee (~Susanne@195-108-142-46.pool.kielnet.net)
[17:18:19] *** Joins: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch)
[17:18:19] *** Quits: ponsfrilus (~Thunderbi@vpn-254-195.epfl.ch) (Client Quit)
[17:19:32] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[17:24:11] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[17:28:02] *** Quits: xinming (~xinming@115.221.9.44) (Ping timeout: 272 seconds)
[17:28:07] *** Joins: bigGopher (~dan@207.98.176.66)
[17:28:27] *** Joins: xinming (~xinming@115.221.9.44)
[17:28:36] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[17:29:07] <DNH> Thanks Myon , will take a look at patroni then as well and try to compare them with pg pool and use whatever fits/works better
[17:29:32] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Quit: ponsfrilus)
[17:31:11] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[17:34:34] *** Joins: kakashiA1 (~kakashi@105.157.237.207)
[17:35:34] *** Joins: Diggsey (uid120933@id-120933.uxbridge.irccloud.com)
[17:36:24] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[17:37:28] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[17:38:10] *** Quits: xinming (~xinming@115.221.9.44) (Ping timeout: 272 seconds)
[17:38:34] *** Joins: xinming (~xinming@115.221.9.44)
[17:40:04] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[17:40:55] *** Quits: rodo (~rodo@2a01:e0a:2c6:d5f0:c065:d1e0:f2d9:673b) (Ping timeout: 268 seconds)
[17:41:53] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[17:42:25] *** Joins: mattil (~mattil@helsinki.portalify.com)
[17:44:37] *** Quits: ba|ch (~user@p200300f3a7089c7de2a17090ff0750d1.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[17:45:35] *** Joins: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[17:47:38] *** Quits: shiranaihito (~textual@2001-b011-4011-3ba9-800c-b172-f16d-89d0.dynamic-ip6.hinet.net) (Ping timeout: 250 seconds)
[17:47:59] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[17:48:18] *** Quits: uncleyear (~ian@31.173.83.37) (Ping timeout: 272 seconds)
[17:52:20] *** Joins: rodo (~rodo@2a01:e0a:2c6:d5f0:c851:44e0:c7e1:2c78)
[17:52:56] <bmomjian> Any feedback on my new microservices talk?  https://momjian.us/main/writings/pgsql/microservices.pdf
[17:53:22] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[17:53:39] *** Joins: darkbit (~db@136.158.8.67)
[17:54:00] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 272 seconds)
[17:54:38] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[17:54:48] *** Joins: uncleyear (~ian@178.176.75.45)
[17:54:58] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Quit: ponsfrilus)
[17:55:10] *** Joins: mattil (~mattil@87-95-105-127.bb.dnainternet.fi)
[17:55:26] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[17:55:32] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Client Quit)
[17:55:48] *** Joins: ^vanessa^ (~farawayas@103.160.128.7)
[17:55:48] *** Joins: mattil_ (~mattil@d5l3gswg69n2x-8bzny-4.rev.dnainternet.fi)
[17:56:42] *** Quits: merzo (~Thunderbi@192.162.238.196) (Quit: merzo)
[17:58:02] *** Quits: _vanessa_ (~farawayas@103.160.128.7) (Ping timeout: 240 seconds)
[17:58:06] *** Joins: zeden (~zeden@user/zeden)
[18:00:20] *** Quits: mattil (~mattil@87-95-105-127.bb.dnainternet.fi) (Ping timeout: 272 seconds)
[18:01:35] *** Joins: Haudegen (~quassel@91.114.49.10)
[18:03:15] *** Quits: mattil_ (~mattil@d5l3gswg69n2x-8bzny-4.rev.dnainternet.fi) (Remote host closed the connection)
[18:04:32] *** Joins: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com)
[18:05:28] <TitanOfOld> I need a lead and am having a tough time finding it: I need US geographic data based on zip codes so I can determine county, metro/regional area. I don't really need a full blown GIS.
[18:06:39] *** Quits: bigGopher (~dan@207.98.176.66) (Quit: bigGopher)
[18:07:16] *** Joins: mattil (~mattil@d5l3gswg69n2x-8bzny-4.rev.dnainternet.fi)
[18:09:36] *** Joins: epony (epony@user/epony)
[18:10:09] *** Quits: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com) (Quit: The Lounge - https://thelounge.chat)
[18:10:22] <xocolatl> TitanOfOld: https://www.uszipcodeslist.net/
[18:11:53] *** Joins: jordi_ (~jordi@46.red-79-156-188.staticip.rima-tde.net)
[18:11:53] *** Quits: jordi_ (~jordi@46.red-79-156-188.staticip.rima-tde.net) (Client Quit)
[18:12:14] <dim> bmomjian: slides 28 and following, big red boxes are all named "Service", consider giving each their name to match with the sample query you're illustrating on the slide
[18:12:47] <dim> also I expected this section to expose transaction boundaries, and it does not
[18:13:11] <bmomjian> Hmm, so like service1, service2?
[18:13:16] *** Joins: funhouse (~funhouse@user/funhouse)
[18:13:29] <dim> slide 34: show an example of a join in SQL vs a nested-loop join in the app, that's a few lines of Python, I've done it in my book and maybe on public blog posts too
[18:13:34] <bmomjian> Uh, can you expand on transaction boundaries?
[18:13:43] <funhouse> Im trying to copy a csv without a header, how to define the column names?
[18:13:58] <funhouse> i just want the first and 2nd
[18:14:01] <TitanOfOld> xocolatl: Close, it just doesn't relate county and regions.
[18:14:03] <dim> bmomjian: “For example, look up all customers who have ordered in the past week, their orders and shipments.” ; I expect to see a “customer” service  and a “shipping” service etc
[18:14:12] <bmomjian> Oh, understood.
[18:14:40] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[18:15:50] *** Joins: _vanessa_ (~farawayas@103.160.128.7)
[18:15:54] *** Quits: mattil (~mattil@d5l3gswg69n2x-8bzny-4.rev.dnainternet.fi) (Remote host closed the connection)
[18:16:04] *** Joins: impermanence (~impermane@c-75-73-193-204.hsd1.mn.comcast.net)
[18:16:28] <dim> transaction boundaries: when you implement something that should be transactional (as in ACID), then it should all be implemented in a single service, because you don't have cross-services transactions, unless you go 2PC, which you introduce later ; I think in the whole monolith vs distributed architecture transaction boundaries should be the corner stone of the design
[18:16:41] <dim> usually they're not, hilarity ensues, or sadness and anger actually
[18:16:59] <funhouse> is it possible to do that?
[18:17:41] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[18:17:43] <bmomjian> Yeah, I am trying to make it simple at the start, then ramp up --- that has always been my style.
[18:18:00] *** Joins: mattil (~mattil@d5l3gswg69n2x-8bzny-4.rev.dnainternet.fi)
[18:18:03] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Client Quit)
[18:18:35] *** Quits: ^vanessa^ (~farawayas@103.160.128.7) (Ping timeout: 256 seconds)
[18:18:46] *** Quits: mattil (~mattil@d5l3gswg69n2x-8bzny-4.rev.dnainternet.fi) (Remote host closed the connection)
[18:18:47] <dim> after your idea of using PL for write APIs I expected to see PLproxy in there, that's the equivalent of FDW for functions
[18:18:48] *** Joins: xocolatl_ (~xocolatl@193.32.126.231)
[18:18:53] <bmomjian> Many of my talks have that pattern, e.g. window functions, mvcc.
[18:19:17] <dim> bmomjian: it can't even work or be simple if transaction boundaries in between services aren't in the picture, that's my whole point
[18:19:24] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[18:19:38] *** Quits: Rashad (~textual@2a01:9700:1aac:7d00:51ec:991a:a841:ebcc) (Quit: Textual IRC Client: www.textualapp.com)
[18:19:42] <dim> I don't think you have to address it from the begining that said, I like your style, but not mentioning it at all is... strange...
[18:20:23] *** Quits: xocolatl (~xocolatl@14.149.88.79.rev.sfr.net) (Ping timeout: 268 seconds)
[18:21:18] *** xocolatl_ is now known as xocolatl
[18:21:22] <dim> it would allow you to introduce saga better too, I suppose, explaining what difficult problem is solved by this approach
[18:21:28] <bmomjian> But somehow, in the microservices world, inter-service transactions are kind of an after-thought using saga.
[18:21:43] <dim> anyway that was a quick review, I hope you find it useful!
[18:21:48] <bmomjian> Like, oh, we will just fix it later.
[18:21:51] <bmomjian> Thanks for the review.
[18:22:11] <dim> yeah which is the main problem I've seen when I have had to help doing monolith to distributed archs as an architect
[18:22:19] <dim> devs want to think about the code first
[18:22:29] <dim> then they use a single db instance just as before
[18:22:33] <dim> then they want to split the db
[18:22:48] <dim> and then they realise that transactions... well, they're not sure, something's smelly
[18:23:17] <dim> and I've been an advocate of dissecting the db from the transaction boundaries first, then everything is pretty simple
[18:23:21] <bmomjian> The reaction I got when I gave the presentation to an EDB group was that splitting the db across nodes introduces a huge amount of complexity, which is what I wanted to get across.
[18:23:30] <dim> exactly
[18:23:36] *** Quits: rodo (~rodo@2a01:e0a:2c6:d5f0:c851:44e0:c7e1:2c78) (Ping timeout: 250 seconds)
[18:23:40] <bmomjian> It is true it only happens at the end, and you are missing my commentary by just seeing the slides.
[18:23:57] <dim> if you attack that ball of mud from the transaction boundaries instead well then you have something that makes sense for the application split in services already
[18:24:37] <dim> it's much simpler all along, but it's way harder to get started, because you can't have the transaction boundaries easily from static analysis of just the database, just the SQL queries, or just the code itself
[18:24:58] <dim> but I still didn't read anything as good as that approach on that topic
[18:25:25] <bencc1> what is a recommended replication and failover tool?
[18:25:29] <dim> bmomjian: agreed, my reactions are only to what I could grasp, not the whole thing, adjust as needed ;-)
[18:25:49] <funhouse> is there a way to copy a csv without a header?
[18:25:49] <dim> bencc1: pg_auto_failover is one, Patroni is another one, then there is also repmgr
[18:26:02] <funhouse> and only using certain columns?
[18:26:09] <bencc1> I saw RepMgr, Patroni and pg_auto_failover
[18:26:12] <dim> bencc1: as the author of pg_auto_failover I think you should read its documentation (some of it) first, and then pick your choice
[18:26:25] <bencc1> dim: same candidates :)
[18:26:29] <dim> https://pg-auto-failover.readthedocs.io/en/master/intro.html
[18:26:35] <Myon> funhouse: copy (select col1, .... colN from ...) to...
[18:26:46] <funhouse> i have to write select?
[18:26:50] <funhouse> Myon?
[18:26:53] <Myon> ... (csv, header off)
[18:26:59] <bencc1> pg_auto_failover is very appealing as an extension because it doesn't require external tools, right?
[18:27:07] *** Joins: glik22_ (~glik22@99-36-164-253.lightspeed.snjsca.sbcglobal.net)
[18:27:20] <Myon> funhouse: actually tbl (col...) works as well
[18:27:31] <funhouse> \COPY devices( SELECT col1, SELECT col2) FROM  csv_file.csv
[18:27:45] <Myon> funhouse: psql   \h copy
[18:27:48] <funhouse> \COPY devices(col1, col2) FROM  csv_file.csv how does it know what field to put into in postgres?
[18:28:05] <dim> bmomjian: the point I'm trying to make across myself is that in a microservices approach, what's the role of Postgres? it's not storage, that would be Ceph or minio (S3 like), Postgres service implements transactions (ACID), that's all it does, transactions.
[18:28:25] <bencc1> dim: what about the monitor being a single point of failure? https://github.com/citusdata/pg_auto_failover/issues/867
[18:28:32] <dim> bencc1: continue reading the docs and try it for yourself, it comes with a single tool, the command is named pg_autoctl
[18:28:37] <funhouse> ERROR:  column "col1" of relation "devices" does not exist
[18:28:38] <bencc1> dim: and this issue: https://github.com/citusdata/pg_auto_failover/issues/858
[18:28:55] <dim> bencc1: https://pg-auto-failover.readthedocs.io/en/master/faq.html#the-monitor-is-a-spof-in-pg-auto-failover-design-how-should-we-handle-that
[18:29:02] <ioguix> bencc1: and then you have the PAF pacemaker agent: https://clusterlabs.github.io/PAF/
[18:29:02] <Myon> funhouse: it's always using all columns of the CSV, you can only control the PostgreSQL side
[18:29:29] <Myon> for more control, try pgloader
[18:29:49] <dim> the monitor being down has no other impact on your Postgres instances, you just can't failover when it's down --- compare to the error modes of Patroni, in particular file system is full, or if you're deploying on 2 zones
[18:29:54] <funhouse> Myon how do i only use the 1st and 4rd columsns of the csv?
[18:29:58] <funhouse> 3rd*
[18:30:13] <Myon> 15:59 <Myon> for more control, try pgloader
[18:30:29] <bencc1> dim: do you mean that pg_auto_failover allows me to deploy on 2 zones?
[18:30:39] <dim> sure, Patroni and repmgr too
[18:31:03] <bencc1> dim: "in particular file system is full, or if you're deploying on 2 zones" what do you mean by 2 zones here?
[18:31:31] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[18:31:32] <TitanOfOld> xocolatl: zip-codes.com has what I'm looking for.
[18:31:44] <xocolatl> cool
[18:31:46] <TitanOfOld> It's paid, but at least it has the things.
[18:31:56] <bencc1> dim: faire enough. it's probably simplify the architecture to have a single monitor and chances for both the monitor and the primary going down is low
[18:32:14] <dim> and you can replace the monitor online without impact on the Postgres nodes
[18:33:38] <funhouse> Myon is it possible to do that do you know? Thank you for your help
[18:33:39] <bencc1> dim: can I have 3 nodes in the same datacenter and another async replica in a separate data center for disaster recovery?
[18:33:54] *** Quits: kakashiA1 (~kakashi@105.157.237.207) (Ping timeout: 272 seconds)
[18:35:54] *** Quits: _vanessa_ (~farawayas@103.160.128.7) (Quit: Leaving)
[18:36:05] *** Joins: rodo (~rodo@2a01:e0a:2c6:d5f0:61e5:dd37:d8c3:47fc)
[18:36:18] <dim> yes, it's documented
[18:36:29] <dim> see https://pg-auto-failover.readthedocs.io/en/master/architecture-multi-standby.html#sample-architecture-with-three-standby-nodes-one-async
[18:37:31] <dim> also note that you can change your mind online and edit candidate priority and replication quorum online without impact on your Postgres service
[18:38:52] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Quit: ponsfrilus)
[18:38:54] <pedja> funhouse, might want to use something like qsv to extract columns you want to another csv and then ingest that to postgres
[18:40:38] *** Joins: bigGopher (~dan@207.98.176.66)
[18:40:51] <bencc1> dim: sounds good. I'll read the docs. thanks
[18:41:03] *** Joins: imakestuff (~imakestuf@197.156.107.143)
[18:41:19] <imakestuff> what linux distro is postgres:14.2 based on?
[18:43:00] <Profpatsch> bmomjian: thanks for the slides, I might forward them to some coworkers, cause we’ve been talking about structuring our services that way
[18:43:21] <dim> bencc1: play with it too, it's meant to be easy to just play around and understand the concepts by “kicking the tires”
[18:43:25] <Profpatsch> Now I only have to prevent the mongodb person from smiting my plans
[18:43:30] <dim> (in the lab, of course)
[18:43:51] <Berge> imakestuff: The Docker hub images aren't maintained by the postgres project, fwiw
[18:44:08] <imakestuff> wow really? I didn't know that
[18:44:09] <Berge> imakestuff: But I think the Docker hub pages links to the git repos with the Dockerfiles, so it should be easy to check
[18:44:37] <Berge> No, they're made by the Docker company, I think?
[18:46:16] *** Joins: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com)
[18:46:25] <imakestuff> Berge: maybe it says "official image"
[18:46:42] <Berge> imakestuff: It does, and I wouldn't have written that if I were them
[18:46:51] <Berge> I think it's too easy to misunderstand
[18:46:57] *** Quits: tehenderz (~tehenderz@ti0018a400-9547.bb.online.no) (Ping timeout: 240 seconds)
[18:47:11] <imakestuff> Berge: they say
[18:47:12] <imakestuff> Docker, Inc. sponsors a dedicated team that is responsible for reviewing and publishing all content in the Docker Official Images. This team works in collaboration with upstream software maintainers, security experts, and the broader Docker community.
[18:47:39] *** Joins: tehenderz (~tehenderz@ti0018a400-10721.bb.online.no)
[18:47:53] <pedja> tags available "14.2, 14.2-alpine, 14.2-alpine3.15, 14.2-bullseye"
[18:48:05] <bencc1> dim: I'm not going to kick the db server :)
[18:48:13] <bencc1> ok. in the lab
[18:48:15] <imakestuff> yeah I'm trying to find out what the 14.2 is based on
[18:48:20] <imakestuff> the one without -suffix
[18:48:21] <Berge> imakestuff: Did you check the repo?
[18:49:15] <dim> bencc1: you can chose any HA solution you like, just make sure to fully understand how to properly handle error conditions with it before running production workload on it ;-)
[18:49:29] <bencc1> dim: ok
[18:49:37] <bencc1> thanks
[18:49:43] <imakestuff> Berge: just did doesn't seem to have git tags
[18:49:56] <Berge> imakestuff: I meant Docker tags.
[18:50:45] <dim> my intro to pg_auto_failover usually is in 2 steps: 1. deploy nodes 2. failover
[18:50:45] <imakestuff> Berge: yeah it's listed there. thanks! debian:bullseye-slim
[18:51:06] <Berge> np
[18:51:27] *** Quits: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Remote host closed the connection)
[18:51:36] <imakestuff> now I have to choose between debian:bullseye-slim and debian:bullseye 🥲
[18:52:15] <Berge> You also have the choice of not using Docker. (-:
[18:57:30] *** Joins: merzo (~Thunderbi@192.162.238.196)
[18:58:41] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[18:59:21] *** Quits: merzo (~Thunderbi@192.162.238.196) (Client Quit)
[19:02:57] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 240 seconds)
[19:07:10] *** Joins: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[19:11:16] *** Quits: zeden (~zeden@user/zeden) (Ping timeout: 272 seconds)
[19:11:41] *** Joins: zeden (~zeden@user/zeden)
[19:15:47] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[19:18:16] *** Quits: karlpinc (~user@173-161-46-9-Illinois.hfc.comcastbusiness.net) (Remote host closed the connection)
[19:19:31] *** Joins: mizi (~mizi@user/mizi)
[19:21:10] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[19:23:11] *** Quits: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi) (Ping timeout: 256 seconds)
[19:24:30] *** Quits: gleu (~guillaume@78.203.164.42) (Quit: Leaving.)
[19:25:21] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[19:27:41] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[19:29:26] *** Quits: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Remote host closed the connection)
[19:30:02] *** Joins: maciek_ (~maciek@2600:1700:a412:1c00:aac6:748b:3e34:70ee)
[19:30:31] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[19:32:01] *** Joins: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com)
[19:33:15] *** Joins: karlpinc (~user@173-161-46-9-Illinois.hfc.comcastbusiness.net)
[19:34:20] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Client Quit)
[19:36:50] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 250 seconds)
[19:38:43] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:44:09] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[19:44:43] *** Quits: zeden (~zeden@user/zeden) (Ping timeout: 256 seconds)
[19:45:45] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:46:39] *** Joins: merzo (~Thunderbi@192.162.238.196)
[19:48:03] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[19:48:53] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[19:50:09] *** Joins: zeden (~zeden@user/zeden)
[19:50:38] *** Joins: nuh^ (~nuh@50.232.121.75)
[19:51:57] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Remote host closed the connection)
[19:52:58] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 256 seconds)
[19:55:21] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[19:56:37] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 240 seconds)
[19:56:49] *** Joins: ponsfrilus (~Thunderbi@vpn-254-241.epfl.ch)
[19:57:45] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Remote host closed the connection)
[19:58:11] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[19:59:08] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Remote host closed the connection)
[20:00:37] *** Quits: thekingofbandit (thekingofb@user/thekingofbandit) (Remote host closed the connection)
[20:01:48] *** Joins: thekingofbandit (~thekingof@thunix.net)
[20:03:44] *** Quits: llanhmod (~personnel@user/domhnall/x-2887755) (Ping timeout: 256 seconds)
[20:05:41] *** Quits: uncleyear (~ian@178.176.75.45) (Ping timeout: 256 seconds)
[20:07:20] *** Joins: Phil (~phil@186-79-2-135.baf.movistar.cl)
[20:10:13] *** Quits: rufito (~phil@186-79-27-44.baf.movistar.cl) (Ping timeout: 256 seconds)
[20:11:25] *** Quits: Haudegen (~quassel@91.114.49.10) (Quit: Bin weg.)
[20:13:14] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[20:13:37] *** Quits: ben_ (~ben@host31-53-129-176.range31-53.btcentralplus.com) (Remote host closed the connection)
[20:14:49] *** Joins: sliss (~sliss@109.136.165.60)
[20:15:35] *** Quits: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net) (Quit: It's just that easy)
[20:20:44] *** Quits: ne2k (~andy@212.250.187.98) (Read error: Connection reset by peer)
[20:21:14] *** Joins: podverse-mitch (~podverse-@c-73-176-137-149.hsd1.il.comcast.net)
[20:22:21] <podverse-mitch> :xocolatl I just noticed our podcast feed parsers have been down since I made the change in prod yesterday :[
[20:22:48] <podverse-mitch> getting the following error when our parsers try to insert an episode
[20:22:50] <podverse-mitch> > error QueryFailedError: new row for relation "episodes" violates check constraint "chk"
[20:23:06] <xocolatl> did you remove the default on int_id?
[20:23:51] <podverse-mitch> not to my knowledge. this is what i ran https://github.com/podverse/podverse-api/blob/develop/migrations/0028_episodes_ids.sql
[20:23:55] <xocolatl> and what is the exact insert statement?  (the sql, not the whatever thing you're using)
[20:24:06] <xocolatl> looking
[20:24:18] <xocolatl> oh, that's what we did yesterday
[20:24:45] <xocolatl> what's the query that is failing?
[20:24:45] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Quit: Leaving)
[20:25:31] <podverse-mitch> well here is the error message https://paste-bin.xyz/42314
[20:25:48] <podverse-mitch> it's using an ORM so i'd have to log the query...
[20:26:01] <podverse-mitch> but it should be an INSERT episode
[20:26:06] <xocolatl> ahh
[20:26:09] <xocolatl> no, it's an update
[20:26:30] <xocolatl> (line 30)
[20:26:36] <podverse-mitch> ohhh i see
[20:27:15] <xocolatl> that is going to be a problem until the conversion is done
[20:27:19] <podverse-mitch> hmm so the UPDATEs don't add an int_id by default
[20:27:27] <xocolatl> right
[20:27:39] <podverse-mitch> whooops lol
[20:27:41] <xocolatl> okay, new plan
[20:27:47] <podverse-mitch> well, at least the whole db isn't down
[20:27:59] <xocolatl> first, this to get things going again:
[20:28:07] <xocolatl> alter table periods drop constraint chk;
[20:28:20] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[20:28:32] <podverse-mitch> periods? not episodes?
[20:28:46] <xocolatl> I don't know why I wrote that
[20:28:49] <podverse-mitch> lol
[20:28:50] <xocolatl> episodes, of course
[20:29:18] <podverse-mitch> ok, should i run that now?
[20:29:22] <xocolatl> you can do that immediately, yes
[20:29:56] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[20:30:17] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:1c1a:3fa2:4926:7c5a) (Ping timeout: 252 seconds)
[20:30:19] <podverse-mitch> looks like this may take some time
[20:30:33] <xocolatl> it should be instant as soon as it gets the lock
[20:30:52] <podverse-mitch> ok, i'll stop the parsers
[20:31:18] <xocolatl> then proceed with your batches as normal.  before line 20 on the 0028 file you sent me, add  alter table episodes add constraint chk check (int_id is not null) not valid;
[20:32:05] <xocolatl> and then one last batch before validating the constraint
[20:32:07] <podverse-mitch> it still has not gotten the lock apparently...
[20:32:18] <podverse-mitch> i ran the script this morning
[20:32:20] <podverse-mitch> just killed it
[20:32:29] <podverse-mitch> it didn't finish the VACUUM step after ~1 hour
[20:33:56] <xocolatl> that's why I said batches of 1000 were too small
[20:34:37] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::4f67)
[20:34:50] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[20:34:50] <podverse-mitch> ugh well sorry to be pain
[20:35:01] <podverse-mitch> is there something i can do to help it get a lock?
[20:35:07] <podverse-mitch> to drop the constraint
[20:35:19] *** Quits: Diggsey (uid120933@id-120933.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[20:35:52] <xocolatl> find out what is blocking it.  the vacuum would be blocking it, probably
[20:36:18] *** Quits: imakestuff (~imakestuf@197.156.107.143) (Remote host closed the connection)
[20:36:30] <podverse-mitch> ok, i can find a query for that
[20:37:42] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[20:37:42] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[20:37:42] *** Joins: hoppity (~hoppity@user/hoppity)
[20:37:58] <podverse-mitch> looks like i'll have to kill the vacuum by its pid
[20:38:17] <xocolatl> select pg_terminate_backend( <the pid >);
[20:39:48] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[20:41:30] <xocolatl> how's it going?
[20:41:32] <podverse-mitch> ??paste
[20:41:32] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[20:41:32] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[20:41:46] <podverse-mitch> when i ran this https://paste.depesz.com/s/sJp
[20:42:04] <podverse-mitch> it showed some processes, and i killed them, now it doesn't show any
[20:42:20] <xocolatl> because nothing is being blocked?
[20:42:29] <podverse-mitch> but this command still takes time when i run it alter table episodes drop constraint chk;
[20:42:54] <podverse-mitch> ah i haven't killed all the parser jobs though
[20:43:00] <xocolatl> keep that one going and do the terminating in a different session
[20:43:06] <xocolatl> how long do those last?
[20:43:38] <podverse-mitch> i'm stopping them, they're not working anyway
[20:43:53] <podverse-mitch> should all be stopped now
[20:43:56] <xocolatl> they will as soon the constraint is dropped :)
[20:43:58] *** Quits: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi) (Ping timeout: 256 seconds)
[20:44:41] *** Joins: wowi421309 (~wowi42@185.42.117.167)
[20:45:57] *** Quits: wowi42130 (~wowi42@185.42.117.170) (Remote host closed the connection)
[20:45:57] *** wowi421309 is now known as wowi42130
[20:46:06] *** Joins: jconway_ (~jconway@072-017-018-098.res.spectrum.com)
[20:46:13] <podverse-mitch> ok constraint dropped
[20:46:31] <xocolatl> how are the parsers doing now?
[20:47:40] <podverse-mitch> looks like they're working :)
[20:48:30] *** Quits: jconway (~jconway@072-017-018-098.res.spectrum.com) (Ping timeout: 256 seconds)
[20:48:43] <xocolatl> you should be able to continue with 0028_episodes_ids.ts (but set the batch to 8000000)
[20:49:03] <podverse-mitch> ok
[20:49:15] *** Quits: sliss (~sliss@109.136.165.60) (Quit: sliss)
[20:49:43] *** Joins: sliss (~sliss@109.136.165.60)
[20:50:46] <podverse-mitch> selecting that many is going to take a very long time i think. is that normal?
[20:51:22] <xocolatl> then do less :)
[20:51:23] <podverse-mitch> well, it's an update, but i know if i select 1+ million it takes a long time
[20:51:58] *** Quits: Su-Shee (~Susanne@195-108-142-46.pool.kielnet.net) (Ping timeout: 272 seconds)
[20:52:25] <xocolatl> whatever number you're comfortable with is fine.  you probably don't really need the vacuum step if you're going lower than that
[20:53:22] *** Joins: Su-Shee (~Susanne@148-108-142-46.pool.kielnet.net)
[20:54:06] *** Quits: jconway_ (~jconway@072-017-018-098.res.spectrum.com) (Quit: Leaving)
[20:54:23] <podverse-mitch> ok cool
[20:54:28] *** Joins: jconway (~jconway@072-017-018-098.res.spectrum.com)
[20:54:53] *** Joins: kakashiA1 (~kakashi@105.157.237.207)
[20:55:09] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[20:55:16] *** Quits: vladoski (~vladoski@217.147.130.65) (Remote host closed the connection)
[20:56:24] *** Quits: waxo (~waxo@37.252.189.165) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[20:56:27] <xocolatl> you should probably consider partitioning this table, too, to keep your maintenance down
[20:56:28] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[20:56:33] *** Joins: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net)
[20:57:26] *** rwb is now known as rb
[20:57:58] *** Quits: colo (~colo@user/colo) (Quit: Bye.)
[20:58:12] *** Joins: waxo (~waxo@37.252.189.165)
[20:59:57] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 240 seconds)
[21:01:02] *** Joins: colo (~colo@user/colo)
[21:02:52] *** Joins: k8yun (~k8yun@user/k8yun)
[21:04:48] *** Quits: michalz (~michalz@185.246.204.77) (Read error: No route to host)
[21:05:08] *** Quits: aLeSD (~aLeSD@91.126.33.194) (Remote host closed the connection)
[21:05:23] *** Joins: michalz (~michalz@185.246.204.72)
[21:06:53] *** Quits: Junxter (~Junxter@121.237.63.222) (Ping timeout: 256 seconds)
[21:07:36] *** Joins: uncleyear (~ian@178.176.72.65)
[21:10:30] *** Joins: retired (~usingbsd@228-134-237-24.gci.net)
[21:11:17] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Read error: No route to host)
[21:12:08] *** Quits: pg_docbot (~docbot_li@donatu.postgresql.org) (Quit: Signal received: INT - shutting down)
[21:14:28] *** Parts: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c) ()
[21:16:38] *** Quits: retired (~usingbsd@228-134-237-24.gci.net) (Quit: Leaving)
[21:16:52] *** Joins: pg_docbot (~docbot_li@donatu.postgresql.org)
[21:17:02] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[21:17:05] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[21:18:28] *** Joins: econo (uid147250@user/econo)
[21:18:47] *** Quits: darkbit (~db@136.158.8.67) (Ping timeout: 256 seconds)
[21:19:50] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[21:20:10] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[21:22:49] *** Joins: Ben[m]1234 (~benmatrix@2001:470:69fc:105::1:d678)
[21:23:52] *** Joins: ludste (~ludste@p200300cc1f1a28ac0413a4bccd6ff4a3.dip0.t-ipconnect.de)
[21:30:00] *** Quits: ns12 (~ns12@user/ns12) (Quit: bye)
[21:31:06] *** Joins: ns12 (~ns12@user/ns12)
[21:33:42] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[21:36:17] *** Joins: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net)
[21:36:56] *** Quits: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de) (Ping timeout: 272 seconds)
[21:41:22] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4) (Remote host closed the connection)
[21:42:38] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4)
[21:52:11] *** Joins: SwK (~SwK_@user/swk)
[21:53:15] *** Quits: podverse-mitch (~podverse-@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[21:53:17] *** Quits: SwK_ (~SwK_@2600:1700:5360:40d0:a176:da3b:1a9f:8528) (Ping timeout: 240 seconds)
[21:53:18] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[21:53:35] *** Joins: podverse-mitch (~podverse-@c-73-176-137-149.hsd1.il.comcast.net)
[21:53:57] *** Quits: k8yun (~k8yun@user/k8yun) (Read error: Connection reset by peer)
[21:55:05] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Remote host closed the connection)
[21:55:28] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[21:58:08] *** Joins: k8yun (~k8yun@user/k8yun)
[21:58:39] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[21:58:47] <alastairp> I have a `vacuumdb -U postgres --analyze-only` process running, and I see it doing stuff by checking pg_stat_progress_analyze, but I wanted to check how many of my tables have been vacuumed
[21:59:04] <alastairp> can I check something in pg_stats to show me this?
[21:59:16] <alastairp> (I just did a pg_upgrade, so am doing analyze)
[22:03:44] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[22:06:49] *** Quits: sliss (~sliss@109.136.165.60) (Quit: sliss)
[22:07:18] *** Joins: sliss (~sliss@109.136.165.60)
[22:11:08] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[22:11:32] *** Quits: evdubs (~evdubs@user/evdubs) (Ping timeout: 250 seconds)
[22:12:22] *** Quits: the_lanetly_052_ (~the_lanet@185.30.88.67) (Ping timeout: 256 seconds)
[22:19:25] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[22:21:39] *** Quits: darutoko (~darutoko@92.125.51.34) (Quit: Leaving)
[22:25:24] *** Quits: nulixes (~Thunderbi@gateway/vpn/pia/nulixes) (Ping timeout: 256 seconds)
[22:32:38] *** Joins: nulixes (~Thunderbi@gateway/vpn/pia/nulixes)
[22:33:14] *** Quits: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net) (Quit: Client closed)
[22:35:28] *** Quits: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[22:36:17] *** Quits: sliss (~sliss@109.136.165.60) (Ping timeout: 240 seconds)
[22:57:40] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[22:57:56] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Client Quit)
[22:58:25] *** Joins: isomorpheus (~isomorphe@c-73-53-247-25.hsd1.fl.comcast.net)
[23:00:24] <isomorpheus> I have a many-to-many table called `links` with columns (source_id, target_id) representing edges on a graph. Given a list of node_ids I'd like to query my `links` table such that both source_id and target_id are in my list. How do I do that efficiently?
[23:01:56] *** Quits: tolecnal (tolecnal@login.xiro.net) (Quit: server maintenance)
[23:07:17] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 240 seconds)
[23:07:42] *** Joins: tolecnal (tolecnal@login.xiro.net)
[23:08:00] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[23:11:54] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4) (Remote host closed the connection)
[23:12:25] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2cbf:4aaa:d234:cec4)
[23:13:22] *** Quits: podverse-mitch (~podverse-@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[23:13:42] *** Joins: podverse-mitch (~podverse-@c-73-176-137-149.hsd1.il.comcast.net)
[23:20:59] <xocolatl> isomorpheus: select * from links where source_id = any (node_ids) and target_id = any (node_ids);
[23:23:21] *** Joins: evdubs (~evdubs@user/evdubs)
[23:25:43] *** Quits: fcr (~fran@r167-60-23-73.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[23:28:14] *** Joins: Rashad (~textual@2a01:9700:1aac:7d00:51ec:991a:a841:ebcc)
[23:33:23] *** Joins: fcr (~fran@r167-60-121-186.dialup.adsl.anteldata.net.uy)
[23:34:00] *** Joins: bjsnider (~bjsnider@user/bjsnider)
[23:34:18] *** Joins: zaher (~zaher@37.48.179.168)
[23:34:35] <peerce> where (source_id,target_id) =any(($1,$2), ($3,$4),...)   and of course, you want an index (probably the PK) on (source_id,target_id)
[23:34:50] <zaher> hi anybody built pqlib 14 win32 dll?
[23:35:15] *** Joins: ponsfrilus1 (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[23:36:32] *** Quits: ponsfrilus (~Thunderbi@vpn-254-241.epfl.ch) (Ping timeout: 240 seconds)
[23:36:32] *** ponsfrilus1 is now known as ponsfrilus
[23:37:17] <bjsnider> i'm using 13.x and i'm trying to get pgsql to return the timestamp for the latest commit formatted and whatnot, but i have to convert from america/hell-a to america/new york and i want pgsql to say if it's est or edt. if i use AT TIME ZONE or whatever, it switches the timezone modifier off after, so it doesn't identify the timezone. i can return
[23:37:17] <bjsnider> the america/hell-a time and use php to modify it, but if i have to make a db call i want pgsql to do all the work. am i missing anything or is it impossible?
[23:37:37] *** Quits: uncleyear (~ian@178.176.72.65) (Ping timeout: 240 seconds)
[23:37:38] <isomorpheus> xocolatl, peerce ty
[23:38:26] *** Joins: uncleyear (~ian@178.176.72.65)
[23:38:34] <peerce> bjsnider: is CST Central Standard Time, or China Standard Time ?
[23:39:15] <bjsnider> what do i win if i get it right?
[23:39:21] <bjsnider> i want a new ferrari
[23:39:47] <peerce> I think my kid left a collection of matchbox cars around here somewhere, not sure if theres any ferraris in there
[23:40:30] <bjsnider> here's the relevant part of the query i am using: SELECT to_char(MAX(column AT TIME ZONE 'America/New_York'), 'Month FMDD, YYYY - FMHH12:MI PM TZ') as displaytime
[23:40:59] <bjsnider> the TZ is left off because if i ask pgsql what the modifier is, it shows -0.0 or something
[23:41:29] <bjsnider> i thought about maybe using a session timezone for that query
[23:41:49] <bjsnider> i'm nervous about changing the timezone in a larger context
[23:41:57] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[23:44:44] <bjsnider> the server tz is obviously pacific, if i forgot to say
[23:45:15] <kjetilho> Nauru or Kiribati?
[23:46:39] <braxas> hi, I want to atomically replace data in 2 tables, would doing CREATE OR REPLACE VIEW in a transaction do it?
[23:46:56] <peerce> select to_char(current_timestamp, 'YYYY-MM-DD HH:MI:SS TZ');    outputs  2022-03-09 12:15:35 EST  if I'm in America/New_York
[23:47:23] <peerce> um, what does a view have to do with UPDATE'ing data ?
[23:48:36] <peerce> braxas; normally, you would START TRANSACTION;  UPDATE table1 ...;  UPDATE table2 ...;  COMMIT;
[23:48:57] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[23:48:57] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[23:48:57] *** Joins: hoppity (~hoppity@user/hoppity)
[23:49:06] <braxas> peerce: I want to replace all content in both tables, I guess I could DELETE FROM and insert though.
[23:49:26] <braxas> But I think that is a bit wasteful
[23:49:56] <peerce> BEGIN;  TRUNCATE t1;  TRUNCATE t2;   INSERT INTO t1 ...;  INSERT INTO t2...;   COMMIT
[23:50:36] <braxas> https://www.postgresql.org/docs/9.1/sql-truncate.html: "TRUNCATE is not MVCC-safe. After truncation, the table will appear empty to concurrent transactions, if they are using a snapshot taken before the truncation occurred. See Section 13.5 for more details."
[23:51:09] <braxas> same for 14: https://www.postgresql.org/docs/14/sql-truncate.html
[23:51:17] <braxas> should not have quoted 9.1
[23:51:34] <braxas> so it has to be delete from
[23:53:07] *** Joins: ur5us_ (~ur5us@2406:e002:6845:dc01:c2e6:9f40:66a8:f76d)
[23:53:17] <braxas> will just do that for now
[23:53:44] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 272 seconds)
[23:53:54] <peerce> delete is a lot slower if therre's lots of rows
[23:54:03] <braxas> there are many rows
[23:54:19] <braxas> well relatively not that maybe, but maybe 1 or 2 million
[23:54:45] <braxas> The view thing would work very well, if it works
[23:56:01] <peerce> do other tables reference either table you're replacing ?
[23:56:17] *** Quits: uncleyear (~ian@178.176.72.65) (Ping timeout: 240 seconds)
[23:56:19] <braxas> they reference each other, no other tables will reference them
[23:56:25] <braxas> and if they do they would also have to be replaced
[23:57:05] *** Quits: rodo (~rodo@2a01:e0a:2c6:d5f0:61e5:dd37:d8c3:47fc) (Ping timeout: 268 seconds)
[23:57:44] *** Quits: Phil (~phil@186-79-2-135.baf.movistar.cl) (Quit: Leaving)
[23:59:42] *** Joins: SwK_ (~SwK_@2600:1700:5360:40d0:a176:da3b:1a9f:8528)
