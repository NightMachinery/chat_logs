[00:25:35] *** Quits: Hash (~Hash@hashsecurity.org) (K-Lined)
[00:29:12] *** Parts: Meli (~meli@user/meli) ()
[00:49:26] *** Quits: horseface (~horseface@user/horseface) (Ping timeout: 260 seconds)
[01:31:05] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:b145:6efe:44b7:516c) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:45:02] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Quit: Leaving)
[01:45:08] *** Quits: avril (av@user/avril) (Quit: later skater)
[01:59:37] *** Joins: avril (av@user/avril)
[02:04:27] *** Quits: avril (av@user/avril) (Client Quit)
[02:08:40] *** Joins: avril (~avril@user/avril)
[02:15:16] *** Quits: avril (~avril@user/avril) (Quit: later skater)
[03:13:10] *** Joins: rgrinberg (~textual@187.223.115.137)
[05:17:24] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[05:43:31] *** Quits: rgrinberg (~textual@187.223.115.137) (Read error: Connection reset by peer)
[05:44:13] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b)
[06:01:28] *** Joins: horseface (~horseface@user/horseface)
[06:04:27] *** Quits: horseface (~horseface@user/horseface) (Client Quit)
[06:06:03] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:17:35] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b)
[06:18:58] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[06:19:18] *** Joins: horseface (~horseface@user/horseface)
[06:27:22] *** Quits: horseface (~horseface@user/horseface) (Ping timeout: 256 seconds)
[06:31:37] *** Joins: horseface (~horseface@user/horseface)
[06:31:59] *** Quits: Duchess96 (~Duchess@2604:3d08:1:1b:c189:b6ab:68c1:858f) (Quit: Client closed)
[07:12:01] *** Quits: JPT (~jpt@classified.name) (Quit: Hoppla!)
[07:16:20] *** Joins: JPT (~jpt@classified.name)
[07:39:57] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[07:41:37] *** Joins: Atque (~Atque@user/atque)
[08:20:33] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:39:11] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b)
[08:45:28] *** Quits: monkeynuts (~monkeynut@user/monkeynuts) (Ping timeout: 250 seconds)
[09:02:04] *** Joins: monkeynuts (~monkeynut@user/monkeynuts)
[09:28:21] *** Quits: horseface (~horseface@user/horseface) (Ping timeout: 250 seconds)
[10:08:44] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[10:47:51] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:50:39] *** Joins: Atque (~Atque@user/atque)
[11:06:45] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[11:23:32] *** Joins: Atque (~Atque@user/atque)
[11:28:24] *** Joins: chuck48 (~chuck48@2a03:1b20:9:f011::a04d)
[12:05:27] *** Quits: sm (~sm@plaintextaccounting/sm) (Ping timeout: 268 seconds)
[12:05:28] *** Quits: Pixelized[m] (~contactis@2001:470:69fc:105::1:276c) (Ping timeout: 268 seconds)
[12:05:28] *** Quits: madduck (~madduck@user/madduck) (Ping timeout: 268 seconds)
[12:06:04] *** Quits: acidsys (~LSD@2.lsd.systems) (Ping timeout: 268 seconds)
[12:06:04] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 268 seconds)
[12:07:08] *** Joins: madduck (~madduck@user/madduck)
[12:20:12] *** Quits: Duchess (~Duchess@2604:3d08:1:1b:c189:b6ab:68c1:858f) (Quit: Client closed)
[12:20:16] *** Joins: Pixelized[m] (~contactis@2001:470:69fc:105::1:276c)
[12:20:16] *** ChanServ sets mode: +v Pixelized[m]
[12:20:25] *** Joins: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8)
[12:20:49] *** Joins: sm1 (~sm@plaintextaccounting/sm)
[12:23:08] *** Joins: acidsys (~LSD@2.lsd.systems)
[13:01:06] *** Joins: czard (~czard@host-78-150-125-181.as13285.net)
[13:48:41] *** dob1_ is now known as dob1
[13:59:49] *** Joins: horseface (~horseface@user/horseface)
[14:23:14] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[15:09:13] *** Quits: czard (~czard@host-78-150-125-181.as13285.net) (Ping timeout: 268 seconds)
[15:16:50] *** Joins: minimal (~minimal@user/minimal)
[16:50:58] *** Quits: minimal (~minimal@user/minimal) (Ping timeout: 268 seconds)
[17:33:13] *** Joins: czard (~czard@host-78-150-125-181.as13285.net)
[18:52:10] *** Quits: Deknos (~someone@user/menace) (Quit: Deknos)
[18:55:35] *** Joins: Core6587 (~czard@host-78-150-125-181.as13285.net)
[19:45:05] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Quit: Konversation terminated!)
[19:58:31] *** Joins: zerocool (~runcmd@user/zerocool-ng)
[20:06:19] *** Joins: minimal (~minimal@user/minimal)
[20:14:17] *** Quits: superkuh (~superkuh@user/superkuh) (Ping timeout: 240 seconds)
[20:23:20] <zerocool> hi there, I have a question. one or more of proofpoint's smtp servers state their hostname during EHLO, but these hostnames resolve to 127.0.0.1 (publicly). we are rejecting messages because 127.0.0.1 isn't in senders SPF. According to RFC5321 4.1.4 we MAY check that the EHLO hostname resolves to an IP but it then says that if verification fails we MUST NOT reject mail on that basis. It is unclear what 
[20:23:26] <zerocool> constitutes a verification failure.
[20:24:15] <lunaphyte> well, for starters [and this is a great example of why], rejecting mail based solely on spf checks is not wise
[20:24:38] <lunaphyte> do the spf check, and include the outcome as part of some larger scoring system [e.g. a content filter]
[20:25:44] <lunaphyte> the helo check element of the spf specification is a particularly not well understood area
[20:25:53] <lunaphyte> and often not well implemented
[20:27:42] <lunaphyte> also note that the specification defined in rfc 5321 has nothing to do with spf.  the two are independent
[20:29:19] <tuxick> i wouldn't accept mail for host with such broken dns
[20:29:29] <tuxick> s/for/from
[20:29:49] <lunaphyte> eh, arguably, that's not exactly broken dns
[20:30:23] <zerocool> Is it not a misuse?
[20:30:24] <tuxick> resolving to 127.0.0.1 public?
[20:30:33] <lunaphyte> misuse, how?
[20:30:48] <zerocool> Resolving a public record to 127.0.0.1
[20:31:12] <tuxick> there might be some stuff getting confused by that 
[20:31:14] <tuxick> i suppose
[20:31:21] <lunaphyte> that's not something i'd consider to have an empirically definitive answer
[20:32:03] <lunaphyte> is it a great idea?  no, it's probably not.  is it unequivocally wrong?  maybe, maybe not.
[20:32:49] <tuxick> i see no reason to accept mail from such host :)
[20:32:57] <lunaphyte> anyway, see rfc 7208 for the spf specification which includes verification processes and expectation regarding the helo identity
[20:33:20] <zerocool> That's been on my to-do list. RFC on SPF
[20:33:30] <lunaphyte> tuxick: yes, that's fine, and a matter of local policy.  those who elect to reject such mail will also need to accept [not pun intended] that they will likely lose otherwise legitimate mail
[20:33:31] <zerocool> I'll go check that out, but I appreciate your perspective lunaphyte 
[20:33:59] <lunaphyte> sure thing
[20:35:43] <tuxick> would be funny to also set your mx to 127.0.0.1
[20:36:31] <lunaphyte> the synopsis is that one should publish an spf record [e.g. a txt record] for the hostname declared in helo commands, listing ip addresses that are permitted to emit mail with which that hostname is used in their helo commands
[20:41:33] <lunaphyte> tuxick: it's happened.  some inexperienced admins [who aren't aware of rfc 7505] unfortunately think that doing that is a responsible way to "handle" domains that aren't meant to receive mail
[20:41:43] *** Joins: superkuh (~superkuh@user/superkuh)
[20:43:51] *** Quits: czard (~czard@host-78-150-125-181.as13285.net) (Quit: Bisou)
[20:48:14] <tuxick> gosh
[20:48:38] <zerocool> lunaphyte: so, in that case the hostname given during HELO/EHLO should resolve to an IP address other than 127.0.0.1, correct?
[20:48:58] <zerocool> If it is to be used in SPF
[20:48:59] <lunaphyte> no
[20:49:25] <lunaphyte> hostnames resolving to ip addresses are ptr records
[20:49:33] <lunaphyte> spf has nothing to do with ptr records
[20:49:39] <lunaphyte> "... publish an spf record [e.g. a txt record]..."
[20:52:05] *** Quits: Core6587 (~czard@host-78-150-125-181.as13285.net) (Ping timeout: 268 seconds)
[21:07:45] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b)
[21:32:44] *** Quits: chuck48 (~chuck48@2a03:1b20:9:f011::a04d) (Remote host closed the connection)
[21:58:27] *** Quits: colo (~colo@user/colo) (Quit: Bye.)
[21:58:41] *** Joins: colo_ (~colo@user/colo)
[22:19:57] *** Joins: Atque (~Atque@user/atque)
[23:05:56] *** Quits: horseface (~horseface@user/horseface) (Client Quit)
[23:12:43] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:b45f:204a:668d:262b) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:28:36] <zerocool> does policyd-spf check that the PTR of the client IP matches the HELO or that the A of the HELO resolves to the client IP?
[23:35:48] <zerocool> in RFC5321 2.3.5 "Only resolvable FQDNs are permitted when domains names are used in SMTP" ... "ie names that can be resolved to MX, A, AAAA, CNAMEs" ... "local nicknames or unqualified names must not be used". There is an exception specific to HELO: "the domain name given in EHLO must be either a primary host name (resolves to an address) OR address literal"
[23:35:49] *** Joins: horseface (~horseface@user/horseface)
[23:36:56] <lunaphyte> hopefully neither [if it follows the spf specification]
[23:37:25] <lunaphyte> zerocool: rfc 5321 doesn't have anything to do with spf
[23:38:55] *** Quits: horseface (~horseface@user/horseface) (Client Quit)
[23:42:21] <zerocool> Right, but the verification check we do with SPF is compatible with SMTP. It is taking place where mentioned in RFC5321 4.1.4 for HELO and or Mail From?
[23:42:39] <lunaphyte> i'm snot sure what you mean "the verification check we do with SPF is compatible with SMTP"
[23:43:58] <lunaphyte> the verification described in the specification is performed as it is described, regardless of "compatibility" with smtp
[23:44:59] <zerocool> Ok so then really we are not rejecting mail where it says "MUST NOT reject mail" based on if the HELO domain (hostname) resolves to the client's IP or not
[23:45:29] <zerocool> This isn't technically what we're doing we're using SPF here instead so just disregard
[23:45:43] *** Joins: horseface (~horseface@user/horseface)
[23:46:25] <lunaphyte> yeah all i can say is it seems like you're desperate to find some connection between the two specifications/rfcs, when there just isn't
[23:47:03] <lunaphyte> other than they both relate to the same overall larger topic of email, in general, obviously.  but that really isn't of much practical value
[23:50:17] <zerocool> The problem is that we are rejecting legitimate mail. When I look at the logs 99.999999% of the mail we reject for the same reason, should be rejected and I'd rather not and more cycles evaluating it.
[23:51:17] <zerocool> So, I am making the case that the sender needs to correct their records and or the smtp service. 
[23:52:00] <lunaphyte> if you are rejecting mail based on helo, then you are going to have collateral damage
[23:52:30] <zerocool> Sure but isn't that true for any rejection.
[23:52:48] <lunaphyte> and, as i stated at the very beginning of this conversation, if you are rejecting mail based on spf, you are also going to have collateral damage
[23:53:13] *** Quits: horseface (~horseface@user/horseface) (Client Quit)
[23:53:52] <lunaphyte> what is the specific circumstance in which you are rejecting the mail in question?
[23:54:33] *** Joins: horseface (~horseface@user/horseface)
[23:57:33] *** Quits: horseface (~horseface@user/horseface) (Client Quit)
