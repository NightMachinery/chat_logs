[00:08:19] *** Quits: HumanG33k (~HumanG33k@dau94-2-82-66-65-160.fbx.proxad.net) (Ping timeout: 268 seconds)
[00:08:51] *** Joins: HumanG33k (~HumanG33k@2a01:e0a:95:5d90:215:c5ff:fe68:fb04)
[00:12:26] *** Quits: beastd (~Akero7@p5b04ecc6.dip0.t-ipconnect.de) (Quit: The sun never sets on IRC)
[00:26:59] *** Quits: Volgaar (~volgaar@193.137.116.78.rev.sfr.net) (Quit: WeeChat 3.4)
[00:30:29] *** Joins: xlxlx (~igloo@172.58.129.173)
[00:30:31] *** Quits: xlxlx (~igloo@172.58.129.173) (Excess Flood)
[00:31:22] *** Joins: xlxlx (~igloo@172.58.129.173)
[00:31:24] *** Quits: xlxlx (~igloo@172.58.129.173) (Excess Flood)
[00:33:32] *** Joins: xlxlx (~igloo@c-73-49-186-198.hsd1.fl.comcast.net)
[00:33:33] *** Quits: xlxlx (~igloo@c-73-49-186-198.hsd1.fl.comcast.net) (Excess Flood)
[00:35:23] *** Joins: xlxlx (~igloo@172.58.129.237)
[00:35:25] *** Quits: xlxlx (~igloo@172.58.129.237) (Excess Flood)
[00:37:25] *** Quits: Flabb (~Flabb@89.169.42.92) (Quit: Leaving)
[00:40:13] *** Quits: s55 (~s55@user/s55) (Ping timeout: 256 seconds)
[00:41:05] *** Quits: rvalue (~rvalue@user/rvalue) (Quit: ZNC - https://znc.in)
[00:41:13] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[00:41:17] *** Joins: rvalue (~rvalue@user/rvalue)
[00:46:56] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[00:47:51] *** Quits: pong (~beaver@user/pong) (Quit: bon !)
[00:48:45] *** Joins: s55 (~s55@user/s55)
[00:48:48] *** Quits: l4yer (~l4yer@2001:ac8:31:8900:1012:304e:ad65:3e09) (Remote host closed the connection)
[00:48:51] *** Joins: pong (~beaver@user/pong)
[01:05:32] *** Quits: marcj (~marc@199.167.158.211) (Ping timeout: 250 seconds)
[01:07:24] *** Joins: marcj (~marc@199.167.158.211)
[01:10:44] *** Quits: blaze (~blaze@user/blaze) (Quit: WeeChat 3.3)
[01:17:04] *** Quits: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[01:17:18] *** Joins: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6)
[01:17:24] *** Joins: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952)
[01:18:12] <zumba_addict> Hey all, the playback is very fast but I like to record my screen at  60fps. I am not sure why using -r 60 made it real fast - ffmpeg -vaapi_device /dev/dri/renderD128 -f x11grab -r 60 -video_size 1920x1080 -i :0 -vf 'hwupload,scale_vaapi=format=nv12' -c:v h264_vaapi -qp 24 /tmp/output.mp4
[01:20:43] <BtbN> -r overrides the framerate ffmpeg gets from the input device.
[01:21:01] <BtbN> So it it records in 24 or something, and you then tell it "hey, this is actually 60 fps", it'll run super fast on playback
[01:21:37] *** Joins: xlxlx (~igloo@172.58.128.239)
[01:21:39] *** Quits: xlxlx (~igloo@172.58.128.239) (Excess Flood)
[01:21:43] <another|> is -r automatically translated to -framerate ?
[01:21:52] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[01:22:47] <BtbN> Don't think so?
[01:22:48] <zumba_addict> got it. what should be the proper parameter I should use for recording at 60 fps?
[01:23:05] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Read error: Connection reset by peer)
[01:23:18] <BtbN> Check the x11grab docs. It has its own option for that.
[01:23:24] <BtbN> -frame_rate or something? Not sure
[01:23:29] <zumba_addict> k
[01:24:15] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 276 seconds)
[01:26:09] <zumba_addict> I think my cpu can only handle 30fps fine. At 60, the recording was horrible
[01:26:23] <BtbN> define horrible
[01:27:45] <zumba_addict> in framerate 30 while recording 1920x1080, dragging windows(in compiz), the jelly movement was captured smoothly. Same ffmpeg parameters but I added -framerate 60, the movement on the window I am dragging was very sluggish
[01:28:42] <BtbN> People still use those gimmicks? wow
[01:28:48] <zumba_addict> hehe :D
[01:29:00] <zumba_addict> it was only sluggish in the recording video
[01:29:13] <zumba_addict> while i was dragging it, it was normal
[01:29:16] <BtbN> last compiz release was in like 2016 or something
[01:29:51] <zumba_addict> I can try it off and see if compiz is the culprit, one sec
[01:30:22] <BtbN> vaapi does to some degree use the iGPU for some post-processing.
[01:30:33] <BtbN> So if it's some dirt slow old iGPU, I could see it hogging large parts of it
[01:31:50] <zumba_addict> finished recording without compiz, recorded video was sluggish
[01:32:13] <zumba_addict> I ran this using vaapi - ffmpeg -vaapi_device /dev/dri/renderD128 -f x11grab -framerate 60 -video_size 1920x1080 -i :0 -vf 'hwupload,scale_vaapi=format=nv12' -c:v h264_vaapi -qp 24 /tmp/output.mp4
[01:32:16] *** Joins: wuxi (~wuxi@61.155.23.114)
[01:32:25] <zumba_addict> gotcha
[01:32:39] <zumba_addict> it's a radeon 460 I believe
[01:33:06] <BtbN> that should be more than capable of a bit of rendering and pre-processing.
[01:33:06] <zumba_addict> I'll be fine at 30fps
[01:33:14] <BtbN> vaapi/hwenc on it kinda sucks though
[01:33:19] <zumba_addict> I really wish I can record 4k with normal playback
[01:33:22] <zumba_addict> ah
[01:33:27] <zumba_addict> sucks on amd?
[01:33:43] <BtbN> On the open source driver specifically, but their hwenc is quite poor in general
[01:34:13] <zumba_addict> got this radeon from my son. I guess i should invest in nvidia. Someone told me a model but I forgot which one I should buy, with decent hardware recording
[01:34:37] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 240 seconds)
[01:34:46] <BtbN> Everything Turing or newer.
[01:34:55] <zumba_addict> ok
[01:35:13] <zumba_addict> someone also told me that my old cpu is just slow to record 4k
[01:35:26] *** Quits: JustLandedOnMars (question@user/question) (Ping timeout: 250 seconds)
[01:36:19] <BtbN> That's not really a great revelation
[01:37:07] *** Quits: wuxi (~wuxi@61.155.23.114) (Ping timeout: 268 seconds)
[01:38:31] <zumba_addict> i'll be saving up for a new machine
[01:38:50] <zumba_addict> For now, I'll do my screen recordings at 1920x1080 30fps
[01:39:33] <zumba_addict> what does -qp 24 mean?
[01:39:43] <zumba_addict> is it like -crf 22? for vide quality
[01:40:19] <BtbN> probably, no idea how vaapi interprets it
[01:41:40] <zumba_addict> yep, it is. I tried 40 and saw many artifacting/macroblocking
[01:45:05] *** Joins: vlm (~vlm@user/vlm)
[01:45:31] <zumba_addict> Ran htop, I don't even see ffmpeg. Looks like the culprit is the gpu recording
[01:46:07] <zumba_addict> and that's with -qp 52, the most compressed value
[01:46:37] <zumba_addict> I think I should try upgrading video card first then retry the command
[01:47:19] <BtbN> Why would the qp value have any influence?
[01:47:32] <BtbN> The hwenc is entirely separate
[01:47:38] <zumba_addict> i was thinking it might reduce it but since it's post, it wont
[01:47:54] <BtbN> The GPU does not encode. GPUs suck at that.
[01:47:59] <BtbN> It's a hardware encoder.
[01:48:09] <zumba_addict> is gpu different from hardware encoder?
[01:48:16] <BtbN> hm?
[01:48:41] <zumba_addict> i'm confused. AM I right that gpu is in the graphics card?
[01:48:51] <BtbN> The main chip on the card, yeah
[01:49:08] <zumba_addict> got it. Is hardware encoder physical or a code?
[01:49:23] <zumba_addict> i mean, like another chip?
[01:49:24] <another|> video encoding/decoding is usually done by a dedicated circuit
[01:49:29] <BtbN> It's a _hardware_ encoder. Dedicated silicon to encode video
[01:49:50] <BtbN> GPUs are not well suited to encode regular video codecs
[01:49:52] <zumba_addict> ah. Is hardware encoder also in the video card?
[01:50:10] <BtbN> The AMD one naturally is, of course
[01:50:47] <BtbN> There is dedicated encoder cards, but those are rare in the consumer grade
[01:50:50] <zumba_addict> so in amd video cards from what I understand now, has both gpu and hardware encoder chips. Correct?
[01:51:04] <DHE> yes, also nvidia cards for a while
[01:51:08] <BtbN> It's on the same die, but dedicated silicon
[01:51:17] <zumba_addict> got it
[01:51:44] <zumba_addict> you wrote, gpu chip are not meant for video encoding. Correct?
[01:52:22] <DHE> CUDA/OpenCL, which runs on the more conventional 3d silicon, isn't good for video encoding
[01:52:25] <BtbN> GPUs suck at encoding video, yeah. It's not something that fits their usual mode of operation
[01:52:56] <zumba_addict> the command I ran, what chip was it using?
[01:53:06] <BtbN> You can't parallelize encoding into thousands of parallel jobs, which is what GPUs excel at
[01:53:12] <zumba_addict> this -> ffmpeg -vaapi_device /dev/dri/renderD128
[01:54:11] <zumba_addict> or maybe, i can understand it better if i write this and if my hunch is correct. That hardware encoder in amd video cards suck. Correct?
[01:54:30] <BtbN> It doesn't have many uses
[01:54:54] <BtbN> if all you care about is low perf impact live-recording, where a stupid high bitrate is irrelevant, it's just fine for the job
[01:54:55] *** Joins: crashrep (~crashrep@user/crashrep)
[01:55:47] <zumba_addict> i just want to record my 4k screen and playback the recorded video to somewhat close the original movements
[01:56:26] <BtbN> I'm not sure if a 460 can encode 4K in real time
[01:56:32] *** Quits: elastic_1 (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[01:57:17] <zumba_addict> it can't
[01:57:46] <zumba_addict> do you think if I switch to nvidia card, it will be better?
[01:58:11] <zumba_addict> coz I wasn't sure if cpu also has to be upgraded
[01:58:25] <zumba_addict> if I can save money on buying the card first, that would be great
[01:59:08] <zumba_addict> playing 4k on 460 is fine right now but encoding is a different beast. I was thinking for the past few days that upgrading to nvidia might solve it
[02:01:55] *** Joins: elastic_1 (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[02:05:19] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[02:05:43] *** Joins: debayer948 (~debayer@76.82.226.116)
[02:05:44] *** Quits: pal (~pal@76-14-89-2.sf-cable.astound.net) (Quit: Leaving)
[02:10:19] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[02:17:40] *** Quits: Naleksuh (sid454423@wikimedia/naleksuh) ()
[02:17:50] *** Joins: Naleksuh (sid454423@wikimedia/naleksuh)
[02:18:01] *** Joins: JustLandedOnMars (question@user/question)
[02:26:31] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[02:35:03] *** Quits: dreamon (~dreamon@p57a4c923.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[02:36:53] *** Quits: cosimone (~user@93-47-231-147.ip115.fastwebnet.it) (Quit: ERC (IRC client for Emacs 27.1))
[02:42:53] *** Quits: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6) (Quit: Client closed)
[02:56:35] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[02:57:35] *** Joins: kevinnn (~kevinnn@2600:8802:3708:7700:c687:98f7:b8b4:b669)
[02:59:30] <kevinnn> Hi all, I am receiving an unusual amount of latency from av_parser_parse2. I have an h264 encoded stream running at 120fps (yes you read that right) and I can see the frame slices are indeed coming in at arond 120fps. But it takes around 20ms for av_parser_parse2 to actually produce a frame, which is even slower than 60fps. Why is this?
[02:59:54] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[03:06:18] *** Quits: Gnotchee (~Gnotchee@cpc160233-nrth4-2-0-cust37.8-4.cable.virginm.net) (Quit: Connection closed)
[03:09:40] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[03:12:12] <aphysically> oh, I guess subtitles overlayed before profile 5 dolby vision metadata is applied won't work very well
[03:12:14] <aphysically> huh
[03:12:57] <aphysically> I don't think there's a good workaround, you can't render out subtitles onto hardware frames so you would need to add an extra roundtrip to a software frame to fix it
[03:18:28] <kevinnn> are you answering my question?
[03:21:35] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[03:23:27] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:24:00] *** Quits: pong (~beaver@user/pong) (Quit: 2> /dev/null)
[03:26:37] <aphysically> no
[03:26:58] *** Joins: pong (~beaver@user/pong)
[03:34:53] *** Quits: pong (~beaver@user/pong) (Quit:  )
[03:35:55] *** Joins: pong (~beaver@user/pong)
[03:37:33] *** Quits: pong (~beaver@user/pong) (Client Quit)
[03:38:07] *** Joins: pong (~beaver@user/pong)
[03:42:14] *** Joins: Kacper_ (~kasper93@89-74-110-199.dynamic.chello.pl)
[03:43:20] *** Quits: Kruppt (~Kruppt@50.111.28.175) (Quit: Leaving)
[03:43:49] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 256 seconds)
[03:43:49] *** Kacper_ is now known as kasper93
[03:45:39] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[03:46:27] *** Joins: MrZeus_ (~MrZeus@185.206.227.134)
[03:49:47] *** Quits: pong (~beaver@user/pong) (Quit: reload)
[03:50:30] *** Joins: pong (~beaver@user/pong)
[03:51:11] *** Quits: pong (~beaver@user/pong) (Client Quit)
[03:51:43] *** Joins: pong (~beaver@user/pong)
[03:55:02] *** Quits: EvalCopy (~Eval_Copy@67-198-83-45.dyn.grandenetworks.net) (Quit: Leaving)
[03:55:18] *** Joins: pal (~pal@76-14-89-2.sf-cable.astound.net)
[03:57:54] *** Quits: kevinnn (~kevinnn@2600:8802:3708:7700:c687:98f7:b8b4:b669) (Quit: Client closed)
[03:58:42] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[03:58:59] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[04:04:24] *** Quits: djk (~Thunderbi@74.102.240.250) (Quit: djk)
[04:05:05] <tm512> I should be able to use my iGPU's Quick Sync Video codecs even after completely switching over to a discrete GPU, right? I made sure to tell UEFI to not disable my iGPU when a discrete GPU is installed, so there is still a device node for the iGPU in /dev/dri
[04:05:11] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[04:05:39] *** Joins: debayer948 (~debayer@76.82.226.116)
[04:05:49] <tm512> I'm wanting to get hardware accelerated video decoding working in firefox and it seems like it'd use VAAPI through ffmpeg
[04:06:29] <BtbN> Not sure if that works if firefox renders on a different GPU
[04:06:31] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[04:06:46] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[04:07:20] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[04:07:21] <tm512> I wish FF had a page analogous to chromium's chrome://gpu page, where I could get a conclusive answer as to whether hardware acceleration is being used
[04:07:40] <tm512> BtbN: yeah that's what I'm kinda worried about. the iGPU is the only VAAPI-capable device installed though
[04:08:31] <irc_user> If I cut a video using `ffmpeg -ss 5 -to 10 -i in.mkv out.mp4`, it plays just fine in a video player like mpv, but sharing it on social media doesn't appear to work. I put the cut into imovie and rendered the whole thing, and then sharing was flawless. Then I tried `ffmpeg -ss 5 -to 10 -i in.mkv -movflags faststart -map 0:a:0 -map 0✌️0 out.mp4` to no avail. Is there anything else I could try to fix this?
[04:09:44] <BtbN> define "doesn't work". What does it complain about?
[04:10:17] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[04:10:27] <irc_user> On facebook the video will upload but will stop at 100%. If I try to airdrop the video to my iphone it just flat out fails. If I try to view the video using MacOS
[04:10:42] <irc_user> preview it doesn't play the video, just shows the thumbnail.
[04:11:28] <BtbN> And what error does it give? Without any info what it doesn't like about the video, it's impossible to tell you what to fix.
[04:11:52] *** Quits: teebz89056 (~tcb@216.109.199.128) (Quit: The Lounge - https://thelounge.chat)
[04:13:38] <irc_user> Airdrop for example says "Failed to save item." I guess what I'm trying to get at is, what could iMovie possibly be doing that ffmpeg isn't?
[04:14:27] *** Joins: teebz89056 (~tcb@216.109.199.128)
[04:15:07] <BtbN> run both videos through ffprobe and paste the results.
[04:16:29] <irc_user> Okay, I will need a moment.
[04:18:02] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[04:19:13] <rv1sr> tm512: There is about:support which looks equivalent to chrome://gpu
[04:20:23] <rv1sr> Shows both renderers in my case, the primary/active one listed first
[04:23:36] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[04:24:45] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[04:31:15] <irc_user> BtbN: https://www.irccloud.com/pastebin/PN9YXYXt/
[04:39:15] *** Quits: c7s (~c7s@user/c7s) (Quit: c7s)
[04:41:28] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[04:55:12] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 250 seconds)
[04:56:00] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[04:59:26] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[05:01:20] *** Quits: treefrob (~treefrob@p2e5429e4.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[05:01:58] *** Joins: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6)
[05:02:56] *** Joins: treefrob (~treefrob@p2e5429e4.dip0.t-ipconnect.de)
[05:04:47] *** Quits: TheSashmo (~TheSashmo@158.106.77.7) (Read error: Connection reset by peer)
[05:04:56] *** Joins: TheSashmo (~TheSashmo@158.106.77.7)
[05:07:43] *** Joins: emanuele6 (~emanuele6@user/emanuele6)
[05:09:54] *** Joins: crashrep (~crashrep@user/crashrep)
[05:12:03] *** Quits: hs19 (~hs@149.199.62.128) (Quit: Connection closed)
[05:16:25] *** Joins: MrZeus (~MrZeus@89.238.130.70)
[05:16:26] *** Quits: MrZeus_ (~MrZeus@185.206.227.134) (Ping timeout: 250 seconds)
[05:20:20] *** Quits: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883) (Ping timeout: 250 seconds)
[05:21:05] *** Quits: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6) (Quit: Client closed)
[05:27:16] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:31:57] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:32:11] *** Joins: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883)
[05:35:49] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[05:36:06] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:37:32] <tm512> rv1sr: yeah I'm aware of about:support, but it doesn't appear to have anything relating to codec acceleration, whereas chrome://gpu pretty clearly indicates exactly what's being accelerated or not
[05:39:13] *** Quits: justache (~justache@user/justache) (Ping timeout: 256 seconds)
[05:40:43] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[05:40:53] *** Joins: KombuchaKip (~kip@192.252.230.5)
[05:40:59] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:41:31] *** Joins: betelgeuse9 (~betelgeus@94-225-47-8.access.telenet.be)
[05:42:26] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[05:42:38] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Remote host closed the connection)
[05:42:58] <tm512> it seems like enabling VAAPI in FF actually causes my CPU usage to go up by like 20%
[05:44:13] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:44:41] *** Quits: betelgeuse9 (~betelgeus@94-225-47-8.access.telenet.be) (Read error: Connection reset by peer)
[05:45:44] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[05:45:57] *** Joins: betelgeuse9 (~betelgeus@94-225-47-8.access.telenet.be)
[05:45:59] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:47:02] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[05:47:08] *** Quits: betelgeuse9 (~betelgeus@94-225-47-8.access.telenet.be) (Read error: Connection reset by peer)
[05:47:37] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:49:47] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[05:50:30] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:51:52] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[05:52:20] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[05:55:05] *** Joins: justache (~justache@user/justache)
[05:58:17] *** Quits: TheSashmo (~TheSashmo@158.106.77.7) (Ping timeout: 240 seconds)
[05:59:34] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[05:59:49] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[06:04:51] *** Quits: rv1sr (~rv1sr@user/rv1sr) ()
[06:05:17] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[06:05:36] *** Joins: debayer948 (~debayer@76.82.226.116)
[06:05:46] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[06:06:01] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[06:11:51] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[06:12:05] *** Quits: MrZeus (~MrZeus@89.238.130.70) (Ping timeout: 256 seconds)
[06:12:06] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[06:17:41] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[06:17:57] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[06:19:53] <aphysically> wew ffmpeg does *not* like seeking into the middle of some of these profile 5 dolby vision stuff
[06:19:57] <aphysically> slow seeking works okay
[06:20:04] <aphysically> errors galore (total failure)
[06:20:50] <aphysically> dunno how dolby vision works maybe it's intentionally unseekable or if it's fixable
[06:21:00] <aphysically> time to make ~samples~
[06:21:31] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Client Quit)
[06:21:44] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[06:22:17] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[06:23:04] *** Joins: TheSashmo (~TheSashmo@174.119.184.190)
[06:23:36] *** Quits: TheSash__ (~TheSashmo@174.119.184.190) (Read error: Connection reset by peer)
[06:25:28] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Remote host closed the connection)
[06:26:43] *** Quits: pong (~beaver@user/pong) (Remote host closed the connection)
[06:28:34] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Remote host closed the connection)
[06:28:40] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[06:29:41] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[06:32:09] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Remote host closed the connection)
[06:34:59] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[06:37:59] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Remote host closed the connection)
[06:38:07] <aphysically> if it's fixable it's a shame it missed 5.0 but eh what are you gonna do :P
[06:38:28] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[06:38:42] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Changing host)
[06:38:42] *** Joins: kasper93 (~kasper93@user/kasper93)
[06:38:57] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[06:39:15] *** Quits: kasper93 (~kasper93@user/kasper93) (Remote host closed the connection)
[06:40:00] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[06:40:00] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[06:40:09] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Remote host closed the connection)
[06:40:41] *** Joins: kasper93 (~kasper93@user/kasper93)
[06:44:09] *** Quits: kasper93 (~kasper93@user/kasper93) (Remote host closed the connection)
[06:49:26] *** Joins: kasper93 (~kasper93@user/kasper93)
[06:50:53] *** Joins: wuxi (~wuxi@61.155.23.114)
[06:54:57] *** Quits: wuxi (~wuxi@61.155.23.114) (Ping timeout: 240 seconds)
[07:00:07] *** Quits: TheSashmo (~TheSashmo@174.119.184.190) (Quit: Leaving...)
[07:07:15] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 256 seconds)
[07:09:32] *** Joins: guest (~guest@124.126.137.224)
[07:16:23] *** Quits: guest (~guest@124.126.137.224) (Quit: Connection closed)
[07:20:57] *** Quits: jos1 (~jos3@dyndsl-178-142-065-197.ewe-ip-backbone.de) (Ping timeout: 240 seconds)
[07:23:02] *** Joins: guest (~guest@124.126.137.224)
[07:29:21] *** Quits: guest (~guest@124.126.137.224) (Ping timeout: 256 seconds)
[07:34:37] *** Joins: jos1 (~jos3@dyndsl-091-248-051-023.ewe-ip-backbone.de)
[07:42:49] *** Joins: Colt (~Colt@user/colt)
[07:45:17] *** Quits: aphysically (~aphysical@user/aphysically) (Quit: aphysically)
[07:45:25] *** Quits: cryptic (~cryptic@142-196-139-017.res.spectrum.com) (Quit: Leaving)
[07:45:47] *** Joins: cryptic (~cryptic@142-196-139-017.res.spectrum.com)
[07:45:52] *** Quits: cryptic (~cryptic@142-196-139-017.res.spectrum.com) (Remote host closed the connection)
[07:47:05] *** Joins: cryptic (~cryptic@142-196-139-017.res.spectrum.com)
[07:49:07] *** Joins: aphysically (~aphysical@user/aphysically)
[07:50:01] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[08:04:57] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[08:05:35] *** Joins: debayer948 (~debayer@76.82.226.116)
[08:07:41] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Ping timeout: 256 seconds)
[08:31:28] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[08:36:12] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr) (Ping timeout: 250 seconds)
[08:37:17] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr)
[08:37:24] *** Joins: crashrep (~crashrep@user/crashrep)
[09:02:38] *** Joins: rainmon (~zfhr@104.220.168.36)
[09:04:58] *** Quits: rainmon (~zfhr@104.220.168.36) (Client Quit)
[09:07:24] *** Quits: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no) (Quit: Leaving)
[09:13:59] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 256 seconds)
[09:19:34] <aphysically> nooooo mov_text in mp4 got stuck rendering the last subtitle forever
[09:19:40] *** Joins: crashrip (~crashrep@user/crashrep)
[09:19:41] *** Joins: mixfix41 (~homefame@user/mixfix41)
[09:19:43] <aphysically> so I'll have to find a different way to store mov_text temporary for rendering
[09:19:51] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[09:30:43] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[09:35:58] <aphysically> okay, so rendering the mov_text version of the subtitles makes it get stuck on the last subtitle forever
[09:36:13] <aphysically> converting to srt or ass with ffmpeg loses the last line of the subtitles completely
[09:36:19] <aphysically> (mov_text source)
[09:36:47] <aphysically> my list of weird workarounds for subtitle stuff is getting insane at this point :D (I haven't found a workaround for mov_text yet)
[09:39:26] *** Joins: pong (~beaver@user/pong)
[09:41:10] <aphysically> hmmm, no fix_sub_duration shows it parsing again but maybe it's parsing with a huge length, not sure the format of INFO     [Parsed_subtitles_0 @ 0x55e2d30ea600] Event at 6998199, +942504: (is the + the display time?)
[09:43:04] <aphysically> if it's a really long display time that's still broken I guess; although I don't know what to do about it (mpv can get the duration right somehow so it SHOULD be possible)
[09:43:52] <aphysically> I'll wait an hour to encode something to see if that's too long still :P (I would seek to the timestamp, but this also happens to be a file with a bug with fast seeking :D )
[09:48:40] *** Quits: blb (~blb@user/blb) (Quit: brb)
[09:52:16] *** Joins: blb (~blb@user/blb)
[09:53:15] <aphysically> hmm, so I think I either always convert mov_text to ass with -fix_sub_duration and just accept that the last line might be eaten or let it render with some broken durations at the end
[09:54:06] <aphysically> I wonder what mpv is doing differently for mov_text than ffmpeg
[09:54:25] *** Joins: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net)
[09:54:27] *** Quits: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net) (Excess Flood)
[09:54:36] <aphysically> (especially since it uses ffmpeg, afaik)
[09:54:43] *** Joins: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net)
[09:54:45] *** Quits: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net) (Excess Flood)
[09:55:00] *** Joins: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net)
[09:55:02] *** Quits: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net) (Excess Flood)
[09:55:19] *** Joins: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net)
[09:55:20] *** Quits: xlxlx (~igloo@c-76-108-51-178.hsd1.fl.comcast.net) (Excess Flood)
[09:59:52] <aphysically> hmm, this seems to be a general problem with mov_text subtitle extraction hmmmhmmhmm
[10:03:35] <aphysically> I think my best option is to use -fix_sub_duration and just deal with the last line of mov_text subtitles getting deleted
[10:04:46] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[10:05:32] *** Joins: debayer948 (~debayer@76.82.226.116)
[10:06:15] <aphysically> found it, it's a known bug in ffmpeg https://trac.ffmpeg.org/ticket/7855
[10:06:20] <aphysically> but I wonder how mpv is working around it?
[10:07:24] <aphysically> :O and it looks like there's a patch from 3 years ago I wonder if it still applies
[10:11:53] <aphysically> hmmm, i see a dev comment on it breaking fate but don't see follow up patch
[10:16:17] *** Joins: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9)
[10:27:57] *** Quits: crashrip (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[10:31:30] *** nate is now known as Guest8125
[10:31:30] *** Quits: Guest8125 (NBishop@o.apocaleaps.com) (Killed (calcium.libera.chat (Nickname regained by services)))
[10:31:47] *** Joins: synapt (~NBishop@o.apocaleaps.com)
[10:33:28] *** Quits: xlxlx (~xlxlx@2601:583:300:7090:b823:e61a:b7:5ea9) (Quit: WeeChat 3.4)
[10:35:57] <aphysically> does mpv not using ffmpeg for subtitle decoding?
[10:38:11] *** synapt is now known as nate
[10:39:20] <gnoo> i think it does, i know it uses libass but not if it uses other things as well
[10:41:30] <aphysically> huh, so they must work around this bug *somehowW*
[10:42:59] <gnoo> did you try with ffplay?
[10:50:22] <aphysically> nah I'm rendering with subtitle filter cause that's what I need to do eventually anyway
[10:50:27] <aphysically> all those an all their conversions are broken
[10:50:33] <aphysically> and*
[10:51:11] <aphysically> so unfortunately I can't avoid using ffmpeg to actually decode it
[10:55:09] <aphysically> if it's something important I guess I can try to find something other than ffmpeg that can convert mov_text on a case by case basis as needed
[10:55:28] <aphysically> but I'm mostly interested in coding a workaround into my ffmpeg wrapper so that's not especially viable
[11:01:28] <aphysically> (if you have any workaround ideas I'm all ears!)
[11:04:26] * gnoo does not really know about things, just hangs around here cuz'
[11:04:37] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[11:10:03] *** Quits: foul_owl (~kerry@94.140.8.106) (Ping timeout: 250 seconds)
[11:24:05] *** Joins: foul_owl (~kerry@174-21-143-101.tukw.qwest.net)
[11:26:55] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:40:28] *** Joins: someuser (~user@197.54.81.5)
[11:41:37] *** Quits: Forza (~Forza@user/forza) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[11:41:50] *** Joins: Forza (~Forza@user/forza)
[11:44:01] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-d49e-2693-ff7b-69a7.res6.spectrum.com) (Quit: jarthur)
[11:47:02] *** Joins: TheSashmo (~TheSashmo@158.106.77.7)
[11:51:17] *** Quits: TheSashmo (~TheSashmo@158.106.77.7) (Ping timeout: 240 seconds)
[11:58:50] *** Joins: palasso (~palasso@user/palasso)
[11:58:53] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 256 seconds)
[12:02:04] *** Joins: dreamon (~dreamon@p57a4c923.dip0.t-ipconnect.de)
[12:32:40] *** Joins: lavaball (felix@31.204.155.215)
[12:34:07] *** Joins: anotheruser (~user@197.54.81.5)
[12:35:55] *** Quits: someuser (~user@197.54.81.5) (Ping timeout: 256 seconds)
[12:41:05] *** Joins: TheSashm_ (~TheSashmo@158.106.77.7)
[12:45:17] *** Quits: TheSashm_ (~TheSashmo@158.106.77.7) (Ping timeout: 240 seconds)
[12:46:35] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[13:17:52] *** Joins: TheSashmo (~TheSashmo@158.106.77.7)
[13:18:18] <Forza> Hi. Can ffmpeg convert truehd atmos audio to flac/aac with the sound objects rendered into the final stream?
[13:21:47] <JEEB> nope, it just utilizes the 7.1 bits. there seems to be an ETSI spec for the objects (which seems to be for E-AC-3, so in theory the data could be different for meridian lossless), but nobody has implemented that yet.
[13:21:54] *** Quits: MightyBOB (~MightyBOB@c-76-99-21-35.hsd1.pa.comcast.net) (Remote host closed the connection)
[13:22:35] *** Quits: TheSashmo (~TheSashmo@158.106.77.7) (Ping timeout: 268 seconds)
[13:23:42] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[13:23:51] *** Joins: Agafnd (~agafnd@2603-6080-0e02-1800-6b9f-3554-1548-346a.res6.spectrum.com)
[13:27:12] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[13:29:55] *** Quits: Agafnd (~agafnd@2603-6080-0e02-1800-6b9f-3554-1548-346a.res6.spectrum.com) (Quit: ｑｕｉｔ)
[13:31:29] *** Joins: wuxi (~wuxi@61.155.23.114)
[13:31:34] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[13:32:23] <Forza> JEEB: thanks
[13:33:41] <Forza> Maybe I have another issue as well. I often find that the audio gets shifted to the wrong speaker when converting TrueHD to AAC. Maybe the channel mapping gets off somehow
[13:36:09] *** Quits: wuxi (~wuxi@61.155.23.114) (Ping timeout: 268 seconds)
[13:36:41] <JEEB> do you see the output layout as something(back) ? (or possibly without anything), while the output one is (left)?
[13:37:42] <Forza> It was a while ago. I will see if I can find it again.
[13:37:57] <JEEB> I think 7.1 should be OK, though. 5.1 is where AAC spec finally changed the definition of what they meant with the channle mappings in 2013
[13:38:06] <JEEB> and FFmpeg currently implements how the spec wrote it down before 2013
[13:39:44] <Forza> ffmpeg doesn't really say anything other than this. I use "-ac 6 -c:a aac -b:a aac". Source is 7.1 TrueHD Atmos: Stream #0:0(eng): Audio: aac (LC) ([255][0][0][0] / 0x00FF), 48000 Hz, 5.1, fltp (24 bit), 500 kb/s (default)
[13:40:07] <JEEB> always prefer channel_layout to channel count
[13:40:13] <JEEB> anyways, that has 5.1 there
[13:40:16] <Forza> Where do I see that?
[13:40:37] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 240 seconds)
[13:40:54] <JEEB> ffmpeg -h long |grep "channel_layout", it just takes the named channel layouts as parameter :P
[13:40:57] <Forza> ffprobe on the source:   Stream #0:0(eng): Audio: truehd, 48000 Hz, 7.1, s32 (24 bit) (default)
[13:41:15] <JEEB> but yes, 5.1 is the one which AAC spec derped up back in the olden days
[13:41:20] <JEEB> and only in 2013 that got fixed :P
[13:41:57] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[13:42:12] <JEEB> so channel configuration 6 (5+1) used to be specified as: center front speaker | left, right front speakers | left surround, right surround *rear* speakers | front LFE
[13:42:28] <Forza> I am not sure I understand what I can do, if anything? Do you mean that the channels shifted in the new spec, but ffmpeg doesn't follow this?
[13:43:14] <JEEB> the *rear* bit is why we ended up with separate layouts for 5.1(back) (which is the default 5.1 in FFmpeg funny enough), and then 5.1(left) which AC-3 etc utilize
[13:43:50] <JEEB> why FFmpeg doesn't follow this yet, that's due to it being such a recent addition and basically nobod noticing that change in the spec until very lately :P
[13:44:01] <JEEB> and me being swarmed by other activities to actually post a patch
[13:44:21] *** Joins: Kacper_ (~kasper93@user/kasper93)
[13:44:41] <JEEB> and nobody else has so far cared to post a patch about this, either
[13:45:11] <JEEB> do remember that AAC is really old, so the mistake in the spec was there for very, very long :P
[13:45:55] <Forza> So to fix this I need to manually map the channels
[13:45:59] *** Quits: kasper93 (~kasper93@user/kasper93) (Ping timeout: 256 seconds)
[13:46:00] <JEEB> anyways you can check how things look if you actually encode AAC with 5.1(side)
[13:46:10] <JEEB> -channel_layout "5.1(side)"
[13:46:17] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 240 seconds)
[13:46:46] <JEEB> I think the AAC encoder could write various PCE
[13:47:05] <JEEB> so while in the older versions of the spec there was no specific channel_layout for 5.1(side)
[13:47:12] <JEEB> you could code it with other things
[13:48:03] <Forza> You mean with FLAC or AC3?
[13:48:12] <JEEB> no, AAC
[13:48:21] <JEEB> I think it should let you encode 5.1(left)
[13:48:29] <JEEB> if you have a thing around, you could test
[13:48:46] <JEEB> it will just not have a channel_layout 6 set but instead a custom layout
[13:48:52] <Forza> yea I have that test file
[13:49:50] <JEEB> so much "fun" due to the spec calling them "surround *rear* speakers" ^^;
[13:50:44] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[13:52:48] <Forza> Still not sure how to map it. Looking at https://trac.ffmpeg.org/wiki/AudioChannelManipulation now
[13:52:56] <JEEB> uhh
[13:52:59] *** Quits: anotheruser (~user@197.54.81.5) (Ping timeout: 256 seconds)
[13:53:11] <JEEB> you don't need to do that if you just specifically say you want output in "5.1(left)"
[13:53:14] <JEEB> instead of 5.1
[13:53:38] <Forza> mpc-hc lists the AAC trac I just encoded as "C L R Ls Rs LFE", while the TrueHD track  is listed as "L R C LFE Ls Rs Lb Rb" (see the LRC is shifted)
[13:54:11] <Forza> how? "-ac 6 -c:a aac -b:a 500k -channel_layout 5.1(left)" ?
[13:54:16] <JEEB> drop channel count
[13:54:21] <JEEB> since channel count is in all channel laoyouts
[13:54:44] <JEEB> but yes, add quotes around "5.1(left)" depending on your shell/batch/whatever
[13:55:23] *** Joins: fkaa (~fkaa@user/fkaa)
[13:55:54] <JEEB> and just a note, not sure if the mpc-hc view actually tells you anything. I would not utilize that to verify anything. if it's something like mediainfo that you're looking into, that is then probably the coding order, which then gets reordered by the decoder
[13:56:04] <Forza> now it says: Stream #0:1(eng): Audio: aac (LC) ([255][0][0][0] / 0x00FF), 48000 Hz, 5.1(side), fltp (24 bit), 500 kb/s (default)
[13:56:15] <JEEB> alright, so it did accept that channel layouts
[13:56:17] <JEEB> *layout
[13:56:31] <JEEB> it will no longer be channel configuration number 6, but a custom one
[13:56:53] <Forza> I'll test it on the TV, because the problem always was on there
[13:57:02] <Forza> Perhaps mpc-hc can handle anything =)
[13:57:09] <JEEB> uhh
[13:57:19] <JEEB> mpc-hc just uses LAV Filters, which utilizes FFmpeg in the background
[13:59:27] <JEEB> also if you're downmixing the FFmpeg decoder does expose the correct channel locations (as per what it encoded, since it interprets channel config 6 as 5.1(back), and thus any remix from there would be correct
[13:59:48] <JEEB> since after all the remix is all correctly done, just that everything needs to agree on what the data within each channel is :P
[14:00:37] <Forza> Highly likely plex+tv is borking it up then
[14:02:29] <JEEB> well, it borks up as soon as the expected layout is not agreeing on the layout's composition. FFmpeg related things definitely are all matching, but anything else (like a TV's firmware) probably aren't - unless they're using FFmpeg as well. After all, I think part of the reason for the spec change probably was because everyone (except FFmpeg or so) treated channel configuration 6 as if 5.1(left) even though
[14:02:35] <JEEB> the specification specifically said *rear* :D
[14:03:21] <JEEB> and yea, it's a mess. good that they finally changed the definitions, but people had already written code according to what was in the spec for what... 10+ years? :D
[14:03:29] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[14:03:42] <Forza> Yea, :)
[14:03:50] <JEEB> plus the spec is not freely available so that didn't exactly help getting newer versions of the spec to developers
[14:04:09] <Forza> Though a TV from 2020 probably should use up-to-date standards and not a 2013 standard?
[14:04:32] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[14:04:40] <JEEB> 2013 is the one where they changed it :P
[14:04:45] <JEEB> so that would be "new"
[14:04:52] <JEEB> also it might have always ignored the spec
[14:04:54] *** Joins: debayer948 (~debayer@76.82.226.116)
[14:04:57] <Forza> right what I meant =)
[14:04:59] <Forza> :D
[14:05:04] <JEEB> and just went with "let's not read the spec and just take it as the same 5.1"
[14:05:07] <JEEB> from the get go
[14:05:21] <JEEB> which is what many projects actually did
[14:05:40] <JEEB> I think FFmpeg was one of the few where someone actually read the spec and saw it said *rear*
[14:06:38] <JEEB> anyways, point being that whatever reason - if interpretation is different of what is in the channels, you get different results
[14:07:42] <Forza> just one other question. Why does it happen only on truehd 7.1 stuff that I encode down to 5.1? is it becuase I did -ac 6 instead of -channel_layout 5.1(side) ?
[14:08:10] <JEEB> yes, and the default channel layout for 6 is "5.1" which maps to AV_CH_LAYOUT_5POINT1_BACK
[14:09:08] <Forza> I see. So my fault all along :D
[14:09:25] <Forza> I see when doing a conversion from a 5.1 source it actually sayss 5.1(side).
[14:09:29] <Forza>  Stream #0:1(eng): Audio: dts (DTS-HD MA), 48000 Hz, 5.1(side), s32p (24 bit) (default)
[14:09:49] <JEEB> yes, all of the non-AAC decoders expose that more or less :D
[14:09:58] <JEEB> since the AAC spec was one of the few to say *rear*
[14:10:35] <JEEB> and now I think 5.1 back actually does not exist, it was a thing in the MPEG specs which got removed ~2013 :P
[14:10:50] <Forza> What does this mean? [aac @ 0x555e65ff9200] Using a PCE to encode channel layout "5.1(side)"
[14:11:05] <JEEB> yea it means that it has no channel configuration value
[14:11:10] <JEEB> it's a "custom layout"
[14:11:16] <Forza> So ffmpeg would do better to default to 5.1(side) instead of 5.1?
[14:11:41] <JEEB> so it's written as a series of custom mapping entries that say that this and this is this
[14:11:47] <JEEB> for each channel, IIRC
[14:12:34] <JEEB> I think yes, but I'd have to double check if anything else actually utilizes 5POINT1_BACK
[14:14:46] *** Joins: MrZeus (~MrZeus@194.37.96.150)
[14:14:59] <JEEB> but one thing is correct - you definitely should be using channel layout instead of channel count :)
[14:15:19] <JEEB> since channel count will just start looping through channel maps and see which is the first one with your requested amount of cahnnels
[14:15:22] <JEEB> *channels
[14:15:48] <JEEB> too many examples out there have -ac X there :)
[14:16:06] <JEEB> and of course with 1,2 channels that's kind of good enough
[14:16:11] <JEEB> since there's mono and stereo
[14:16:18] <JEEB> but as soon as you go into 4 or so
[14:16:26] <JEEB> you get 3.1 VS 4.0
[14:19:36] <Forza> You are right. I found the -ac from some example online too
[14:20:04] <Forza> Is there a way to merge/transcode the sound from the 7.1 to 5.1 layout?
[14:20:15] <Forza> or is it just dropping the two channels?
[14:24:23] <JEEB> most likely downmixing is happening, although it really depends on the exact channels at play in swresample
[14:25:35] <Forza> I see. Thanks!
[14:30:46] <Forza> Is it possible to do dialogue amplification etc too? I guess that really means amplifying the center channel?
[14:33:03] <JEEB> I have no idea how that thing is specifically specified :) I know that AC-3 etc just did dynamic range compression as an option. and that is what I've been using normally when downmixing to bring the overall dynamic range down (since when you go from 5.1 to stereo f.ex. the range will be *huge*).
[14:33:40] <JEEB> I usually do downmix to stereo + loudnorm, and then adjust the volume in the device (if I'm watching through a dumb device like a TV)
[14:34:17] <JEEB> loudnorm will not raise the volume, but it will bring it to a similar level throughout, so you no longer have the large difference between EXPLOSIONS and dialogue
[14:35:50] <JEEB> there's also dynaudnorm which does also raise volume dynamically, but I don't think I've found good parameters for it myself
[14:39:28] <Forza> I thought loudnorm only leveled linearly, not a dynamic compression like that
[14:39:56] <JEEB> whatever it does, it fits the bill well enough for downmixes for me :)
[14:40:20] <JEEB> just have a filter chain that first downmixes, then does the loudnorm
[14:40:31] <JEEB> or dynaudnorm, whichever side of these things you pick
[14:41:13] <JEEB> I think an example would be something like `-af "aformat=channel_layouts=stereo,loudnorm"`
[14:41:32] <JEEB> technically I think it will add a resample filter before the aformat to make sure at that point the format is stereo
[14:41:40] <JEEB> then passes it to loudnorm
[14:41:59] <JEEB> ah, forgot one bit since I think the loudnorm filter requires a high sample rate
[14:42:22] <JEEB> `-af "aformat=channel_layouts=stereo,loudnorm,aresample=sample_rate=48000"`
[14:42:26] <JEEB> something like that
[14:42:36] <JEEB> so loudnorm brings the sample rate up
[14:42:43] <JEEB> and the aresample should bring it down to 48000
[14:44:04] *** Joins: TheSashmo (~TheSashmo@158.106.77.27)
[14:44:13] <Forza> Ill try!
[14:44:14] *** Quits: TheSashmo (~TheSashmo@158.106.77.27) (Remote host closed the connection)
[14:44:16] <Forza> Thanks again!
[14:44:36] <JEEB> on my PC I usually do it during playback
[14:44:42] <JEEB> since that way I don't actually have to re-encode
[14:46:13] <Forza> Doesnt loudnorm require 2 pass encoding?
[14:46:27] <JEEB> nope
[14:47:31] <JEEB> with mpv since I can just insert FFmpeg audio filters I do `--af=format=channels=stereo,loudnorm` (where the format mpv filter does the downmix, and then loudnorm is called)
[14:48:15] <JEEB> but then if I have to do it for device playback I have to encode :)
[14:50:50] <JEEB> and yea, dynaudnorm raises the volume too instead of just lowering the most high points, but I haven't found too great overall parameters for it
[14:51:06] <JEEB> feel free to tweak etc
[15:01:31] *** Joins: someuser (~user@197.54.81.5)
[15:07:39] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[15:16:37] *** Joins: TheSashmo (~TheSashmo@158.106.77.27)
[15:16:44] *** Quits: TheSashmo (~TheSashmo@158.106.77.27) (Remote host closed the connection)
[15:26:45] *** Joins: Buster_ (~Buster@buster-net.ru)
[15:27:50] *** Joins: TheSashmo (~TheSashmo@158.106.77.27)
[15:27:52] *** Quits: TheSashmo (~TheSashmo@158.106.77.27) (Remote host closed the connection)
[15:35:37] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[15:56:37] *** Joins: keypusher (keypusher@user/keypusher)
[16:02:58] *** Joins: TheSashmo (~TheSashmo@158.106.77.27)
[16:02:58] *** Quits: TheSashmo (~TheSashmo@158.106.77.27) (Read error: Connection reset by peer)
[16:04:24] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[16:04:51] *** Joins: debayer948 (~debayer@76.82.226.116)
[16:05:11] *** Joins: TheSashmo (~TheSashmo@158.106.77.27)
[16:05:14] *** Quits: TheSashmo (~TheSashmo@158.106.77.27) (Read error: Connection reset by peer)
[16:11:12] *** Quits: someuser (~user@197.54.81.5) (Ping timeout: 250 seconds)
[16:15:23] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[16:15:54] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[16:16:00] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[16:18:29] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[16:20:18] *** Joins: someuser (~user@197.54.81.5)
[16:22:41] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[16:23:37] *** Quits: rvalue (~rvalue@user/rvalue) (Ping timeout: 240 seconds)
[16:25:38] *** Joins: rvalue (~rvalue@user/rvalue)
[16:25:51] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[16:26:28] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[16:32:35] *** Quits: someuser (~user@197.54.81.5) (Read error: Connection reset by peer)
[16:34:19] *** Joins: TheSashm_ (~TheSashmo@158.106.77.27)
[16:34:27] *** Quits: TheSashm_ (~TheSashmo@158.106.77.27) (Remote host closed the connection)
[16:35:50] *** Joins: someuser (~user@197.54.81.5)
[16:47:03] *** Joins: TheSashmo (~TheSashmo@158.106.77.27)
[16:51:20] *** Quits: TheSashmo (~TheSashmo@158.106.77.27) (Remote host closed the connection)
[16:52:02] *** Joins: TheSashmo (~TheSashmo@158.106.77.7)
[16:57:40] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[17:02:28] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[17:08:03] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[17:13:35] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[17:15:10] *** Quits: bencc1 (~bencc1@2a00:a040:197:3af:97ea:35ce:e87a:db57) (Quit: Leaving)
[17:25:19] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[17:26:30] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[17:28:44] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[17:33:45] <nitroxis> Hello, does anyone know if there is a proper way to have an AVCodecContext do multithreading but on a custom/shared thread pool? I found this solution from a couple of years ago https://stackoverflow.com/a/47233249 but it sounds more like a hack
[17:35:09] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Remote host closed the connection)
[17:43:17] *** Quits: someuser (~user@197.54.81.5) (Ping timeout: 240 seconds)
[17:43:52] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[17:49:25] *** Joins: rsx (~dummy@ppp-188-174-147-229.dynamic.mnet-online.de)
[18:02:51] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Read error: Connection reset by peer)
[18:03:15] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[18:04:13] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[18:04:49] *** Joins: debayer948 (~debayer@76.82.226.116)
[18:05:55] <DHE> that is most definitely not supported. also dependent on internals of ffmpeg which could change any day, and is not applicable to external libraries (eg: x264) which don't use ffmpeg's internals for their own use.
[18:06:17] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Quit: WeeChat 3.0)
[18:06:34] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:07:52] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:08:10] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:09:41] *** Quits: feiw (~Fei.Wang@192.55.46.52) (Ping timeout: 256 seconds)
[18:10:30] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:10:47] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:11:13] *** Joins: feiw (~Fei.Wang@192.55.46.52)
[18:13:49] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:14:07] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:15:06] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:15:23] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:19:45] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:20:04] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:21:05] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[18:21:41] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:21:58] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:23:19] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:23:36] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:24:22] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:24:41] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:25:49] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:26:06] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:27:07] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Client Quit)
[18:36:20] <JEEB> nitroxis: I think Firefox at one point requested that sort of support, to be able to stop threads etc
[18:38:07] <nitroxis> My concern is mostly just efficiency, I already have a thread pool with one thread per core in my app, FFmpeg spawning its own threads (per de/encoder too) doesn't sound very efficient
[18:38:43] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[18:40:03] <JEEB> apparently mozilla was open to adding support, but then priority got lowered apparently https://bugzilla.mozilla.org/show_bug.cgi?id=1261240
[18:41:59] <nitroxis> Ah I see. That's sad, sounds like a very useful feature for anything that does more than just play back one video at a time.
[18:42:09] <nitroxis> Well, thanks anyway
[18:44:07] <BtbN> It's also not really easily possible to implement, specially for external libraries
[18:46:39] <nitroxis> Yeah I get that, but at least for libavcodec's own implementations it shouldn't be too hard since the callbacks for this (execute/execute2) already exists. To my uneducated eyes it seems like it's mostly missing APIs for users to supply a thread pool
[18:48:37] <nitroxis> For example, that hack from the stackoverflow answer seems to work, but it's ugly
[18:49:43] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[18:52:44] *** Quits: epony (epony@user/epony) (Quit: QUIT)
[18:56:55] *** Joins: someuser (~user@197.54.81.5)
[19:05:11] *** Joins: wuxi (~wuxi@61.155.23.114)
[19:09:45] *** Quits: wuxi (~wuxi@61.155.23.114) (Ping timeout: 256 seconds)
[19:20:08] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 250 seconds)
[19:24:57] *** Joins: epony (epony@user/epony)
[19:30:51] *** Joins: zmt00 (~zmt00@user/zmt00)
[19:45:27] *** Joins: djk (~Thunderbi@74.102.240.250)
[19:50:50] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[19:51:15] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[19:51:46] *** Joins: kasper93 (~kasper93@user/kasper93)
[19:52:37] *** Quits: Kacper_ (~kasper93@user/kasper93) (Ping timeout: 240 seconds)
[19:52:48] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[19:55:46] *** Joins: powerman2206 (~powerman2@217-176.dsl.iskon.hr)
[19:56:54] <powerman2206> I can't seem to set the amount of B-frames in a video, stuff I yoink from StackOverflow doesn't work
[19:57:31] <powerman2206> Also every example uses `-g` but I can't find what it means in the docs
[19:58:27] <JEEB> `ffmpeg -h full |grep "\-g "`
[19:58:47] <powerman2206> Huh, would you look at that
[19:59:12] <JEEB> which encoder are you having problems setting bframe count for?
[19:59:37] <powerman2206> Regular ol' libx264
[19:59:54] <powerman2206> I just wanna set the amount ridiciously high to see what the video will look like
[20:00:44] <JEEB> the default for `-bf` is by default -1 for x264 (global default I think is zero, which is what you get for `ffmpeg -h full |grep "\-bf"`
[20:00:50] <JEEB> so auto by default
[20:01:51] <JEEB> I am pretty sure I'm setting that to zero myself and I think that worked, so it should get passed
[20:02:31] <JEEB> there is probably a maximum on how far you can set that, as well as x264 is actually adaptive regarding it depending on the source
[20:02:41] *** Joins: mixfix41 (~homefame@user/mixfix41)
[20:02:43] <JEEB> which is somewhat different from the more "dumber" encoders like microsoft's
[20:03:01] <JEEB> (microsoft then after a year or so just replaced their own encoder with mainconcept's, it was a bit too crappy)
[20:03:37] <powerman2206> Hm, is there another encoder where I can set like 150 B-frames?
[20:03:50] <rv1sr> powerman2206: using libx264 max ref frames are set with -refs and b-frames via -bf
[20:04:09] <powerman2206> Indeed that's what I did
[20:04:10] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[20:04:13] <powerman2206> but no worky
[20:04:17] <rv1sr> should work as intended
[20:04:38] <powerman2206> Could there be an uppser limit like JEEB said?
[20:04:44] <JEEB> > h->param.i_bframe = x264_clip3( h->param.i_bframe, 0, X264_MIN( X264_BFRAME_MAX, h->param.i_keyint_max-1 ) );
[20:04:47] *** Joins: debayer948 (~debayer@76.82.226.116)
[20:04:47] <JEEB> that's the limit
[20:04:58] <JEEB> keyint_max is your GOP length
[20:05:21] <JEEB> and > common/base.h:#define X264_BFRAME_MAX 16
[20:05:32] <JEEB> so effectively 16 is max consecutive bframes
[20:05:37] <powerman2206> Damn
[20:05:45] <powerman2206> Time to look for another encoder
[20:05:52] <JEEB> and you'd specifically have to make x264 "dumb" to make it actually utilize that many
[20:06:02] <JEEB> since it's actually checking if it's useful for compression
[20:06:19] <JEEB> what is it that you're actually trying to do :D
[20:06:19] <rv1sr> but I would you can open GOps (disabled closed gops), I remember ramping it up to 999 once
[20:06:37] <rv1sr> workes just fine if i recall correctly
[20:06:49] <JEEB> there's the unlimited GOP length, but that's not what this person seemingly wants
[20:07:09] <powerman2206> JEEB: I wanna crank it up so high to see what it does with the video
[20:07:20] <JEEB> what do you think this option does?
[20:07:20] <powerman2206> I wanna see it *struggle* to get a clear picture
[20:07:30] <JEEB> uhh
[20:07:41] <rv1sr> try in combination with -flags:v +bitexact-cgop
[20:07:51] <JEEB> it kinda sounds like you are misunderstanding that option
[20:08:01] <powerman2206> Maybe
[20:08:28] <powerman2206> So like, I-frames are the actual clear frame and B-frames try to manipulate the previous and next I-frames to get a picture?
[20:08:44] <JEEB> since bframe count is just the max for consecutive bframes, that doesn't really affect much more than utilized quantizer level on those frames, but that then again depends on your rate control anyways
[20:09:12] <JEEB> I frames are coded as a full picture, P pictures refer to previous pictures and B pictures are coded out of order so that you can refer to both past and future
[20:09:24] <JEEB> which is why you have reordering in the decoding
[20:09:37] <powerman2206> Right
[20:10:38] <JEEB> usually lower quantizers are utilized for I frames so that they can be utilized as good quality references, and then P and B frames get somewhat higher quantizers as they are generally considered less important. but that does not sound like what you're trying to test.
[20:11:02] <powerman2206> I want, like, 100 I-frames in a 5 minute 30fps video with the rest being B-frames
[20:11:07] <powerman2206> For example
[20:11:16] <powerman2206> Basically a low amount of I-frames
[20:11:18] <JEEB> ok
[20:11:52] <JEEB> I think what you want is just keyint=infinite and possibly disabling scenecut
[20:12:25] <powerman2206> Yes
[20:13:02] <JEEB> so not really related to b-frames
[20:13:08] <powerman2206> Oh
[20:13:28] <JEEB> you don't really care whether x264 decides to utilize b-frames or p-frames or whatever
[20:13:39] <JEEB> you just want long GOPs and see how low the bit rate can go, I guess? :P
[20:13:40] *** Joins: lavaball (felix@31.204.155.215)
[20:14:02] <powerman2206> So I just `-g 3549786`?
[20:14:21] <JEEB> I think it's easier to set -x264-params scenecut=infinite to be sure
[20:14:56] <JEEB> asdf
[20:14:57] <JEEB> wait a bit
[20:15:02] <JEEB> I think it was keyint=infinite
[20:15:18] <JEEB> yes
[20:16:36] <powerman2206> So the full command should be `ffmpeg -i in.mp4 -c:v libx264 -x264-params keyint=infinite -y out.mp4`?
[20:17:16] <JEEB> the basics of it, yes. that will have -preset medium and -crf 23 as the rate control
[20:17:39] <JEEB> if you want to make it compress even -preset veryslow is by now hilariously fast
[20:17:55] <JEEB> preset placebo is available but is even slower
[20:19:30] <powerman2206> Curses, it's still too clear
[20:20:04] <JEEB> just raise the crf from 23 upwards if you want to make it compress it harder and harder
[20:20:13] <JEEB> that will dynamically raise the quantizer
[20:20:23] <powerman2206> Time for `-crf 63` ig
[20:22:52] <powerman2206> Video bitrate doesn't change anything if crf is used, right?
[20:23:07] <JEEB> yea they are different primary rate control modes
[20:23:27] <JEEB> essentially some CRF with some parameters and some video ends up at bit rate X, and by adjusting CRF you can make x264 use less/more bit rate
[20:23:37] <JEEB> CRF goes up -> higher quantizers, less bit rate
[20:23:46] <JEEB> CRF goes down -> lower quantizers, more bit rate
[20:24:30] <JEEB> setting a specific bit rate only makes sense when you want to actually hit a specific average bit rate over the whole clip, and in that case you utilize 2pass
[20:24:46] <powerman2206> https://0x0.st/ooJi.jpg oh yeah, it's all coming together
[20:25:14] <JEEB> if you want something more dynamic then CRF is good, and does not require 2pass since an exact bit rate is just a specific CRF over a clip more or less
[20:36:50] <powerman2206> Oh also, how do I scale hardsubs?
[20:36:59] <powerman2206> Do I just edit the subtitle file itself?
[20:39:50] *** Joins: Guest97 (~Guest97@49.36.183.13)
[20:40:45] *** Quits: Guest97 (~Guest97@49.36.183.13) (Client Quit)
[20:42:45] <furq> set force_style in the subtitles filter
[20:44:11] <furq> force_style=Fontsize=64 or whatever
[20:44:23] *** Quits: s55 (~s55@user/s55) (Ping timeout: 256 seconds)
[20:44:24] <furq> except with more escaping
[20:48:48] *** Joins: ___Myst___ (~Myst@net-47-53-73-65.cust.vodafonedsl.it)
[20:49:29] *** Quits: __Myst__ (~Myst@net-47-53-73-65.cust.vodafonedsl.it) (Ping timeout: 256 seconds)
[20:53:46] *** Joins: s55 (~s55@user/s55)
[20:56:34] *** Joins: Volgaar (~volgaar@147.94.235.6)
[20:57:59] <znf> he did say "hard subs" tough, am I wrong to assume that he means bitmap-type subs?
[20:58:12] <znf> if that's the case, how would force_style help?
[20:58:20] <JEEB> hardsubbing is to put them into the video
[20:58:29] <JEEB> as opposed to softsubbing which is a separate subtitle stream
[20:59:02] *** Quits: s55 (~s55@user/s55) (Ping timeout: 240 seconds)
[20:59:18] *** Joins: s55 (~s55@user/s55)
[21:08:56] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[21:09:12] <aphysically> speaking of hardsubbing I spent way too long trying to figure out a work around for https://trac.ffmpeg.org/ticket/7855 but I only found the trac ticket on the like the third attempt to find it (because I'm inept at searching apparently)
[21:10:07] <aphysically> I didn't find a workaround, but at least it's reported already
[21:12:46] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[21:22:09] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:5424:bb:70fe:1fe3)
[21:22:21] *** Quits: s55 (~s55@user/s55) (Ping timeout: 268 seconds)
[21:22:22] *** Joins: Kruppt (~Kruppt@50-111-48-241.drhm.nc.frontiernet.net)
[21:22:28] *** Joins: eXtr3m0 (~eXtr3m0@user/eXtr3m0)
[21:24:17] *** Joins: kapnap (~kapnap@S01066c55e8853802.cg.shawcable.net)
[21:24:44] *** Quits: kapnap (~kapnap@S01066c55e8853802.cg.shawcable.net) (Client Quit)
[21:28:56] *** Quits: rsx (~dummy@ppp-188-174-147-229.dynamic.mnet-online.de) (Quit: rsx)
[21:31:53] *** Joins: s55 (~s55@user/s55)
[21:34:03] *** Quits: dreamon (~dreamon@p57a4c923.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[21:43:37] *** Quits: five64333 (~five6@8.40.26.70) (Ping timeout: 240 seconds)
[21:45:58] *** Joins: dreamon (~dreamon@p54b1472c.dip0.t-ipconnect.de)
[21:52:27] *** Joins: five64333 (~five6@8.40.26.70)
[22:01:17] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[22:04:00] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[22:04:45] *** Joins: debayer948 (~debayer@76.82.226.116)
[22:09:08] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 250 seconds)
[22:13:50] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[22:15:46] *** Joins: crashrep (~crashrep@user/crashrep)
[22:20:58] *** Quits: rv1sr (~rv1sr@user/rv1sr) ()
[22:22:03] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[22:22:28] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[22:24:34] *** Joins: mixfix41 (~homefame@user/mixfix41)
[22:34:46] *** Quits: ChanServ (ChanServ@services.libera.chat) (shutting down)
[22:35:18] *** Joins: ChanServ (ChanServ@services.libera.chat)
[22:35:18] *** erbium.libera.chat sets mode: +o ChanServ
[22:38:34] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[22:46:35] <nick87720z> Is it possible to use pixel value for arbitrary plugin? In filtergraph, where single pixel is resized to image and filled with geq depending on color, I tried (unsuccessfully) to st(0, p(X,Y)) in geq before resize, than try to drawbox=x=ld(0)
[22:47:07] <nick87720z> I hoped, there's other way to send comands than sendcmd, like eval function :/
[22:48:43] <nick87720z> but looks like, generic expr engine has no such function
[22:50:08] <nick87720z> could be best way to draw level bar, if drawbox could somehow receive argument, based on pixel data
[22:50:17] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[22:50:22] *** Quits: powerman2206 (~powerman2@217-176.dsl.iskon.hr) (Quit: WeeChat 3.4)
[22:50:24] <nick87720z> way better than geq :)
[22:54:38] *** Joins: wyatt8740 (~wyatt8740@149.164.111.65)
[22:55:37] *** Quits: wyatt8750 (~wyatt8740@38.67.247.58) (Ping timeout: 240 seconds)
[22:59:00] *** Joins: wyatt8750 (~wyatt8740@138.199.22.173)
[22:59:47] *** Quits: wyatt8740 (~wyatt8740@149.164.111.65) (Ping timeout: 268 seconds)
[23:01:53] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[23:02:18] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 276 seconds)
[23:03:39] *** Joins: crashrep (~crashrep@user/crashrep)
[23:16:17] *** Quits: crashrep (~crashrep@user/crashrep) (Read error: Connection reset by peer)
[23:16:39] *** Joins: crashrep (~crashrep@user/crashrep)
[23:22:55] *** Joins: c7s (~c7s@user/c7s)
[23:29:19] *** Joins: MightyBOB (~MightyBOB@c-76-99-21-35.hsd1.pa.comcast.net)
[23:35:48] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 250 seconds)
[23:42:53] *** Quits: someuser (~user@197.54.81.5) (Ping timeout: 256 seconds)
[23:47:30] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[23:53:06] <hardwire> vatomobile #rsfish
[23:57:12] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
