[00:01:00] <de-facto> what is the difference between htmlspecialchars and htmlspecialchars ?
[00:02:04] <de-facto> htmlentities and htmlspecialchars
[00:02:13] <de-facto> background: i want to decode every possible html encoding, regardless if its called special char or entity
[00:03:10] <de-facto> is it $str = html_entity_decode(htmlspecialchars_decode($html)) or the other way around?
[00:05:02] <kenoba> is there a way scan my code for compatibility with specific PHP version? Like 7.4 for example?   without simply updating and watching logs for what breaks.
[00:05:23] *** Quits: guidoc (~guido@host-79-13-254-102.retail.telecomitalia.it) (Quit: WeeChat 3.2)
[00:07:49] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[00:08:30] *** Joins: coder7of9 (~coder7of9@mail.cvage.ca)
[00:12:43] <biberu> kenoba: do you have tests?
[00:13:42] <kenoba> biberu 0. absolutely 0 tests
[00:14:38] <kenoba> there are organizations that pay for tests - I do not work for one of those
[00:15:26] <Sammitch> de-facto: https://www.php.net/manual/en/function.htmlentities.php
[00:15:34] <Sammitch> like the 3rd line is "
[00:15:37] <Sammitch> like the 3rd line is "This function is identical to htmlspecialchars() in all ways, except with htmlentities(), all characters which have HTML character entity equivalents are translated into these entities."
[00:15:54] <biberu> kenoba: they think it's faster not to have tests?
[00:17:31] <Sammitch> it's certainly faster to not have tests, until you find yourself in a situation like this where you need tests and have to go back and get your test coverage above 0%
[00:17:31] <biberu> wouldn't be so sure about that, and even less sure about cheaper
[00:17:31] <da_wunder> kenoba: I would recommend you to start with tools like ecs (https://github.com/symplify/easy-coding-standard), psalm (https://psalm.dev/) and phpstan (https://phpstan.org/)
[00:17:31] <da_wunder> kenoba: also you could use tool like rector (https://github.com/rectorphp/rector) to refactor your code
[00:17:56] <da_wunder> kenoba: but before using rector I would recommend to use those static analyzers to spot common errors
[00:18:13] <Sammitch> oh yeah, all-in it's faster and cheaper to write the tests at the same time as the code because it's far easier to know what the hell you even want to test when you're actively developing the code
[00:18:45] <da_wunder> I would recommend to use tests - personally spotted multiple problems just by because I have writed test for for thing X
[00:19:48] <da_wunder> and literally I have tests to test that eg. controller has E2E tests
[00:20:27] <de-facto> Sammitch, so htmlentities is a superset of htmlspecialchars?
[00:20:53] <da_wunder> so if someone will add new controller, he/she/they need also add at least basic E2E test for that new controller
[00:21:32] <de-facto> btw how do i trim() all whitespace, including non-breaking and tabs etc?
[00:21:37] <kenoba> da_wunder got  it. thanks for the actionable advise.
[00:22:07] <kenoba> noone mentions  PHPCompatibility /PHPCompatibility   package?
[00:22:30] <da_wunder> and really if you have tests to cover "almost" all your codebase - you can easily spot also 3rd libraries problems
[00:23:17] <Sammitch> de-facto: yes. though you should probably test to see that it does what you think it does
[00:23:25] <da_wunder> spotted those couple of times with Symfony - and then just created issue about those with blackfire comparison and just couple of hours that issue is fixed
[00:25:23] <da_wunder> one example about that there - https://blackfire.io/profiles/compare/05923414-4007-4492-969d-5339a0d3dad8/graph
[00:26:08] <kenoba> sure guys. no i get it - would I have time to do so - id write tests. However noone in my place cares about them so  I cannot win this battle, but i still need money to pay for stuff - is my dillema. clearly im alone in this unique experience.
[00:26:13] <da_wunder> performance issue was quite huge within that update, and I would not most likely even notice that without tests that I use
[00:27:07] <biberu> kenoba: personally i think it goes faster to write tests while i develop new features
[00:27:25] <da_wunder> ^
[00:27:53] <da_wunder> and you can be sure that later changes doesn't causing some issues
[00:28:43] <biberu> and ofc it means i catch issues that otherwise would have cost money, regressions that would have cost money, etc etc
[00:30:10] <da_wunder> tl;dr - in the long run tests will help you
[00:31:06] <biberu> kenoba: don't know the situation at your place so perhaps i'm preaching to the quire, but writing tests will ofc also mean that your code is *testable*, which tends to mean it's more flexible and robust to work with in general
[00:31:24] <da_wunder> ^
[00:31:25] <de-facto> is there a trim() that removes all space, non-breakable space, tabs, newlines and similar things?
[00:31:47] <de-facto> i want all of the type white-space
[00:31:52] <Sammitch> !+trim
[00:31:52] <php-bot> string trim(string str [, string character_mask])  - Strips whitespace from the beginning and end of a string - http://php.net/trim
[00:31:52] <__adrian> de-facto: https://php.net/trim
[00:32:11] <de-facto> yeah trim does not remove non-breakable space
[00:32:17] <__adrian> de-facto: read the documentation
[00:32:17] <Sammitch> please familiarize yourself with the manual
[00:32:26] <__adrian> you're not reading it  ;)
[00:32:27] <Sammitch> __adrian: double-jinx
[00:32:40] <__adrian> i don't like coke anyway
[00:32:57] <da_wunder> de-facto: or just use something like - preg_replace('/\s+/', '', $input);
[00:33:06] <de-facto> yeah tried all that, does not work
[00:33:19] <__adrian> da_wunder: that's substantially different than trim()
[00:33:29] <da_wunder> de-facto: so show us an example - 3v4l.org
[00:33:32] <__adrian> de-facto: reading the docs does indeed work
[00:33:40] <__adrian> look at the second argument
[00:33:51] <de-facto> so where in the docs is a complete list of all white-space characters for trim?
[00:34:08] <__adrian> why would that be in there? it has nothing to do with php.
[00:34:37] *** Joins: Phil-Work (~phil@62.3.100.20)
[00:34:37] <__adrian> if you don't want trim()'s default character set, then you need to provide your own.
[00:34:54] <__adrian> s/character set/set of characters/
[00:35:22] <de-facto> i want every character that is something like a whitespace
[00:35:32] <de-facto> including non-breaking, zero-space etc
[00:35:32] *** Quits: coder7of9 (~coder7of9@mail.cvage.ca) (Quit: Client closed)
[00:35:36] <__adrian> de-facto: then you need to provide your own list
[00:35:37] <de-facto> all those exotic ones removed
[00:35:46] <biberu> iirc trim isn't unicode safe, worth considering if you want to trim more exotic whitespace
[00:35:51] <__adrian> those are not "exotic," they're completely normal
[00:36:10] <de-facto> so php does not have such a trim then?
[00:36:23] <da_wunder> de-facto: 23:03 < da_wunder> de-facto: so show us an example - 3v4l.org
[00:36:29] <__adrian> and yes, if you need to cover multibyte characters, you'd need to use preg_replace as da_wunder suggested. you'd need to anchor it, though.
[00:36:36] <__adrian> de-facto: trim() exists
[00:37:12] <__adrian> this is not the problem. the problem is you want trim() to work exactly like you expect instead of just using it as intended
[00:37:36] <biberu> i don't think trim does what he wants
[00:37:39] <de-facto> i think i will need to write my own trim, and delete everything that is not in a whitelist
[00:37:54] <__adrian> .__Â·
[00:38:05] <__adrian> okthen
[00:38:38] <da_wunder> de-facto: really - how hard is to provide us an example to 3v4l.og what your input is and what you want?
[00:39:01] <__adrian> biberu: if multibyte, then maybe. trim() does operate on bytes and not characters.
[00:39:12] <__adrian> da_wunder's example covers that
[00:39:44] <biberu> __adrian: that's what I was remembering too, but it's been a while and I'm not at a computer
[00:47:35] *** Joins: keypushe- (keypusher@user/keypusher)
[00:47:40] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 260 seconds)
[00:50:28] *** keypushe- is now known as keypusher
[00:55:12] <da_wunder> and something simple like this - https://3v4l.org/HVbOJ - could be what you're looking for - it will trim _all_ whitespaces from start and end + convert possible whitespaces between that string to single space
[00:56:34] <de-facto> maybe something like $str = trim(preg_replace('/[\pZ\pC]/u', ' ', html_entity_decode(htmlspecialchars_decode($html))));   ?
[00:57:15] <da_wunder> de-facto: fourth (4) time - please provide 3v4l.org example for us
[00:57:35] <de-facto> i dont have a complete example yet
[00:57:59] <da_wunder> so why the fuck didn't you say that at first time...
[00:58:01] <__adrian> de-facto: all your example needs is (1) example input  (2) desired result
[00:58:02] <da_wunder> fuck sake
[00:58:17] <__adrian> chill please  :)
[00:59:03] <de-facto> i hoped to find a complete list for whitespace somewhere, but since i did not find it yet i cant provide a complete example
[00:59:05] <da_wunder> nope, asked example multiple times and just now got that information... how fucking hard is to tell that after first question...
[00:59:23] <kenoba> is this not a christian family-friendly channel i mistakenly assumed it was?
[00:59:37] <__adrian> de-facto: you'd look for a "complete list" somewhere like the unicode spec
[01:00:30] <da_wunder> de-facto: or just provide us the input that _you're_ currently working, where you have that issue - you don't need to cover all the "possible" use cases...
[01:01:16] <da_wunder> de-facto: you have that issue with certain input - so just share that and what you expect to get from that
[01:01:22] <de-facto> its very weird strings such as '&amp;nbsp;'
[01:01:35] <__adrian> that's html entity-encoded
[01:01:52] <__adrian> no amount of trimming whictespace will remove that, because it's _not_ whitespace
[01:01:55] <da_wunder> and those have nothing to do with whitespaces...
[01:02:30] <de-facto> yeah and i have to decode the special char &amp; then decode the entity &nbsp; and then recognize that special type of whitespace for trim
[01:02:42] <__adrian> you can decode both of them are the same time
[01:02:52] <__adrian> (in fact it would be harder not to)
[01:03:09] <__adrian> but if you allow html entities in your input, then you should be expecting this
[01:03:34] <__adrian> (i wouldn't allow it, personally)
[01:03:42] <__adrian> (but whatever your situation is)
[01:03:50] <da_wunder> de-facto: ok, so you really cannot provide simple 3v4l.org example... that would help a lot - so you're going to my ignore list - I hope that you get your issue solved
[01:05:13] <de-facto> i am sorry i can not provide you with your desired example, i wish i could
[01:05:40] <__adrian> de-facto: are you allowing html entities?
[01:05:48] <__adrian> *is it your intent to allow
[01:06:32] <de-facto> the input comes from https://simplehtmldom.sourceforge.io/manual_api.htm#api plaintext
[01:06:42] <__adrian> that was not my question
[01:06:45] <de-facto> i dont want to allow any entities in the output
[01:07:25] <__adrian> then you need to either *validate your input and reject input with htmlentities *encode the output properly so html entities are not rendered
[01:07:55] <__adrian> what you're doing right now is trying to "fix" the input. don't do that. the input is either valid or it's not.
[01:08:42] <de-facto> yeah it is what it is, i cant reject it or my function looks broken, so i have to fix it somehow
[01:09:32] <__adrian> of course you can reject it. that doesn't make your function "look broken." no error, but also not returning the expected results, would look broken.
[01:10:23] <__adrian> (because it _would be_ broken.)
[01:11:19] <biberu> why is it a concern that it "looks broken"?
[01:11:28] <de-facto> yeah, to me the output then looks broken
[01:11:56] <__adrian> the output should be something like "don't put html entities in your text"
[01:12:01] <__adrian> i.e., an error message
[01:12:06] <de-facto> ok
[01:12:14] <__adrian> tell the user their input was bad and they need to fix it
[01:12:23] <__adrian> it's _their_ job, not yours.
[01:12:24] <de-facto> not possible
[01:12:38] <__adrian> of course it's possible. there's a whole internet built around this.
[01:12:59] <biberu> why isn't it possible?
[01:13:17] <__adrian> if something's stopping you, then _that_ is the problem, not the "reject bad input" idea.
[01:13:42] <de-facto> look the input comes from HTML page, if its valid HTML its my own problem how i make a proper string out of it
[01:13:58] <__adrian> that ^ sounds like you _do_ want to allow it.
[01:14:02] <__adrian> so which is it?
[01:14:10] <biberu> now we're getting somewhere
[01:14:33] <biberu> do you actually want to use e.g. xpath to query this document for data?
[01:14:38] <de-facto> i dont want to allow html entities in the output
[01:14:39] <__adrian> this sounds like you're scraping something, is that correct? i.e., you're grabbing html source?
[01:14:48] <de-facto> yes
[01:15:01] <__adrian> then use something that parses html
[01:15:08] <__adrian> htmltidy is likely the correct thing
[01:15:29] <biberu> also just ask why enough times and problems go away
[01:15:33] <de-facto> i am trying to write a parser for a specific site for rss-bridge
[01:15:38] <__adrian> or DOM or something, maybe. html encodes text. you _can_ get the decoded text directly from the dom.
[01:15:43] <de-facto> it is a PHP project parsing HTML into Atom
[01:15:45] <__adrian> why write a parser?
[01:15:52] <__adrian> use an existing parser
[01:15:54] <de-facto> because i need the feed
[01:15:57] <__adrian> use an existing parser
[01:16:05] <de-facto> it does not exist for that page
[01:16:20] <__adrian> an _html_ parser
[01:16:26] <biberu> huh? wasn't it html?
[01:16:32] <de-facto> ok
[01:16:44] <__adrian> you're _not_ going to do a reasonable job of making your own. this is not a shot at you; it's a complex thing that takes teams of really smart people years and they still get it wrong
[01:17:09] <de-facto> i am using what they provide and that uses above linked function
[01:17:18] <__adrian> DOM might be all you need. if you need more, look at a tool like HtmlTidy
[01:17:19] <de-facto>  https://simplehtmldom.sourceforge.io/manual_api.htm#api plaintext
[01:17:33] <biberu> "they"?
[01:17:51] <__adrian> if you want to use simplehtmldom you'd need to look at their docs and ask on a forum where that's on topic
[01:18:00] <__adrian> i would not recommend simplehtmldom at all
[01:18:17] <__adrian> it's the next step of stupid past simplexml
[01:18:18] <biberu> if it's got simple in the name it's probably complicated
[01:18:30] <BadAdviceCat> DOM > simplehtmldom
[01:18:35] <BadAdviceCat> Hi.
[01:19:45] <Sammitch> https://www.php.net/manual/en/class.domdocument
[01:21:10] <BadAdviceCat> de-facto, I've been following this conversation for a bit, and I'm trying to understand, Why exactly do you want ot remove All kinds of whitespaces?
[01:21:41] <BadAdviceCat> WWhat problem is it solving? Why is it a big deal that Spaces appear in HTML? Isn't that a normal occurence in HTML documents?
[01:21:46] <__adrian> that's the next question... once you actually have an nbsp, why would you want to remove it?
[01:23:13] <da_wunder> and this all would be so clear _if_ he/she/someone would just provide _example_ about that input and wanted output....
[01:23:32] <__adrian> da_wunder: you're ignoring all this  :)
[01:24:09] <da_wunder> __adrian: I'm just ignoring that one nick
[01:24:23] <__adrian> makes things more annoying ime
[01:24:33] <__adrian> half-convos  :)
[01:24:51] <biberu> +1
[01:25:29] <biberu> if someone annoys you just stop engaging with them, easy
[01:25:42] <da_wunder> __adrian: might be - done that same for multiple nicks on multiple channels - usually because people doesn't provide asked information even if asked multiple times - just like in this case
[01:26:31] <da_wunder> biberu: for me that is just easier to add those people to ignore list - no need to ever see anything from them after that
[01:26:42] <biberu> meh, even if you got an example it might very well show the wrong thing
[01:26:49] <BadAdviceCat> de-facto, For example, is it for a security purpose? Is it fo save storage space (get rid of a few bytes?)
[01:26:58] <BadAdviceCat> What's the poitn to all of this?
[01:27:41] <biberu> i.e. you could get some trash text that you can make a pure and pretty function for, but he actually wants to do scraping
[01:28:23] <da_wunder> biberu: that was not the thing - even if that example would show wrong thing doesn't really matter - I asked that example multiple times, without response - so in my mind that person doesn't care what have been asked
[01:28:38] <__adrian> not questioning that.
[01:28:59] <__adrian> that's completely fine. ignore them.
[01:29:01] <__adrian> i understand the motivation. if you chose to /ignore somebody, please actually ignore them as well. as mentioned above, stop engaging.
[01:30:19] *** Quits: magla (~gelignite@55d44c2f.access.ecotel.net) (Quit: Stay safe!)
[01:30:24] <da_wunder> __adrian: I was engaging that person - I was just adding common reaction to other people chat messages
[01:30:58] <da_wunder> duck
[01:31:05] <da_wunder> s/I was/I was not
[01:31:31] *** Quits: acidsys (~LSD@2.lsd.systems) (Excess Flood)
[01:31:46] <de-facto> i can not provide an example, i am sorry.
[01:31:55] <de-facto> if i could the problem would be solved
[01:31:58] <BadAdviceCat> de-facto, I'm asking for the **PURPOSE**
[01:32:08] *** Joins: LSD (~LSD@2.lsd.systems)
[01:32:18] <de-facto> its a long story
[01:32:50] <BadAdviceCat> de-facto, your attempt to solve the issue is not it. Normally, one could just use regex to remove alll kinds of white spaces. What's the big deal?
[01:33:06] <__adrian> he's asking specifically about the purpose of removing spaces
[01:33:10] <BadAdviceCat> Or trim() and supply a list of whitespaces.
[01:33:25] <__adrian> i.e., they're not a problem. why do you want to remove them?
[01:34:47] <biberu> BadAdviceCat: (it seems like he also wants to remove e.g. zws, got to keep encodings in mind for this one)
[01:41:48] *** Joins: sidy (~sidy@user/sidy)
[01:44:57] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[01:46:47] *** Quits: pmercado (~pmercado@186.107.32.56) (Ping timeout: 265 seconds)
[01:48:12] *** Joins: gry_ (~quassel@botters/gry)
[01:48:16] *** Quits: gry (~quassel@botters/gry) (Ping timeout: 252 seconds)
[01:59:58] <CoJaBo> I always love bugs of the form "Function foo() evidently just returned from a random place that no return statement exists at"
[02:01:55] *** Joins: jetchisel (jetchisel@user/jetchisel)
[02:03:13] <CoJaBo> I don't even have a guess as to how to debug this one :/
[02:05:01] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[02:12:46] *** Joins: WishBoy (~WishBoy@user/wishboy)
[02:19:23] *** gry_ is now known as gry
[02:24:47] *** Quits: s17 (~nobody@user/s17) (Ping timeout: 240 seconds)
[02:33:29] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Ping timeout: 252 seconds)
[02:43:19] *** Joins: s17 (~nobody@user/s17)
[02:55:53] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[02:57:12] *** Quits: Warped (~Warped@user/warped) (Ping timeout: 245 seconds)
[03:23:14] *** Quits: James0r (~James0r@98.37.90.53) (Remote host closed the connection)
[03:23:21] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[03:26:08] *** Joins: noproto (~kubuntu@46-253-184-241.mobileaccess.monzoon.net)
[03:31:28] *** Quits: noproto (~kubuntu@46-253-184-241.mobileaccess.monzoon.net) (Quit: Leaving)
[03:35:32] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 265 seconds)
[03:41:12] *** Joins: adsr (~adsr@45.58.35.250)
[03:43:15] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 260 seconds)
[03:48:25] *** Joins: keypusher (keypusher@user/keypusher)
[04:01:20] *** Quits: lief (~lief@host-92-3-106-8.as13285.net) (Ping timeout: 260 seconds)
[04:09:48] *** Joins: bobdobbs (~user@2406:5a00:f027:d00:d897:66c8:8bf3:ad08)
[04:11:48] <CoJaBo> It seemed reasonable to assume that ::sleep($variable_set_to_zero) would probably not do anything of importance. As it turns out, assuming things is the devil's work.
[04:14:58] <Sammitch> ???
[04:16:18] <AmyMalik> ?!
[04:20:51] *** Quits: genomc (uid245282@id-245282.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[04:36:36] <CoJaBo> Sammitch: A function named sleep() threw an exception :/
[04:37:16] <CoJaBo> Which was then basically eaten by a function named ::print()
[04:39:57] <Blondie101010> functions don't eat
[04:40:21] <Blondie101010> please provide actual demonstrating code instead of your unclear descriptions and assumptions
[04:53:04] *** Joins: coder7of9 (~coder7of9@mail.cvage.ca)
[04:53:06] *** Joins: travisghansen (~travisgha@192.74.130.86)
[04:53:52] <coder7of9> i just upgraded to php 7.3 on a new server  and i get this error    Call to undefined function iconv_mime_decode()     isn't iconv built in
[04:54:21] <__adrian> it's often packaged separately
[04:55:46] <coder7of9> how do i enable it please
[04:56:40] <Blondie101010> how did you install php?  ie: which package manage did you use?
[04:56:51] <coder7of9> php fpm
[04:57:10] <coder7of9> which is new  before this app did not use it
[04:57:19] <__adrian> that's not a package manager
[04:57:35] <__adrian> how did you _install_ php, not how you're running it
[04:57:40] <__adrian> e.g., yum? apt?
[04:58:02] <coder7of9> on centros 7.9
[04:58:09] <__adrian> did you use yum, then?
[04:58:16] <coder7of9> not yum
[04:58:18] <coder7of9> moment
[04:58:21] <__adrian> what did you use
[04:58:55] <coder7of9> i didn't set it up so i have to research    but i think the option to install is turn key in centos
[04:59:37] <coder7of9> i have multiphp inin editor
[04:59:51] <__adrian> whatever tool you used, you need to use the same tool to install iconv. you'll need to find what package it's provided by (e.g., might be something like php73-iconv)
[04:59:57] <__adrian> this has nothing to do with your ini
[05:00:10] *** Quits: Donitz (~Donitz@85-156-203-108.elisa-laajakaista.fi) (Read error: Connection reset by peer)
[05:00:14] <__adrian> do you understand what we're talking about when we say "package manager"?
[05:00:17] *** Quits: onizu (uid373383@id-373383.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[05:00:24] <coder7of9> okay thanks... i will investigate
[05:00:27] <__adrian> as in, the tool your operating system uses to install software?
[05:00:36] <Blondie101010> what command did you use?
[05:01:03] <coder7of9> i did not install php so i will investigate... moment
[05:01:19] <__adrian> there's no "turn key" options or ini files. you (or your sysadmin) would have typed something like `yum install php73` on the cli.
[05:01:46] <__adrian> note, i don't know the package name(s), just throwing out an example.
[05:03:19] *** Joins: Donitz (~Donitz@85-156-203-108.elisa-laajakaista.fi)
[05:07:22] <coder7of9> easy apache
[05:07:26] <coder7of9> i see it  thanks!
[05:07:30] * __adrian sighs
[05:07:58] <__adrian> so this is a cpanel question
[05:08:30] <coder7of9> now my mail works !!!
[05:08:37] <__adrian> glad to hear it
[05:30:19] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:35:52] *** Quits: coder7of9 (~coder7of9@mail.cvage.ca) (Quit: Client closed)
[05:46:37] *** Quits: winlundn (nick@2600:3c01::f03c:92ff:fef3:7260) (Quit: WeeChat 2.8)
[05:48:27] *** Quits: gry (~quassel@botters/gry) (Ping timeout: 265 seconds)
[05:49:09] *** Joins: gry (~quassel@botters/gry)
[05:50:08] *** Joins: winlundn (nick@2600:3c01::f03c:92ff:fef3:7260)
[05:51:01] *** Quits: winlundn (nick@2600:3c01::f03c:92ff:fef3:7260) (Client Quit)
[06:21:52] <BadAdviceCat> Probably using mail() :P
[06:33:11] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[06:41:56] *** Joins: Rockwood (~Rocky@user/rocky)
[06:43:39] *** Joins: ferdna (~ferdna@user/ferdna)
[07:05:04] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[07:26:40] *** Quits: junktext (~junktext@109.201.152.177) (Ping timeout: 252 seconds)
[08:10:11] *** Joins: christianPHP (~christian@190.232.168.7)
[08:31:44] *** Joins: guidoc (~guido@host-79-49-248-67.retail.telecomitalia.it)
[08:32:14] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[08:43:29] *** Joins: Akimb (~Akimb@86.100.13.100)
[08:49:17] *** Quits: christianPHP (~christian@190.232.168.7) (Quit: Client closed)
[08:55:57] *** Quits: Zauberfisch (~Zauberfis@cm83-180.liwest.at) (Ping timeout: 245 seconds)
[08:56:40] *** Joins: Zauberfisch (~Zauberfis@62.240.156.18)
[09:22:30] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[09:26:02] *** Quits: Akimb (~Akimb@86.100.13.100) (Read error: Connection reset by peer)
[09:30:06] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[09:38:23] *** Quits: jetchisel (jetchisel@user/jetchisel) (Read error: Connection reset by peer)
[09:44:12] *** Joins: jetchisel (jetchisel@user/jetchisel)
[09:48:27] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[09:48:28] *** Quits: FloridaMan (~FloridaMa@user/floridaman) (Ping timeout: 252 seconds)
[09:49:31] *** Joins: FloridaMan (~FloridaMa@user/floridaman)
[10:05:23] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[10:33:43] *** Joins: genomc (uid245282@id-245282.stonehaven.irccloud.com)
[10:36:44] *** Quits: guidoc (~guido@host-79-49-248-67.retail.telecomitalia.it) (Quit: WeeChat 3.2)
[11:20:40] *** Quits: TakinOver (~quassel@47.150.196.72) (Ping timeout: 240 seconds)
[11:21:06] *** Joins: TakinOver (~quassel@47.150.196.72)
[11:23:43] *** Quits: bobdobbs (~user@2406:5a00:f027:d00:d897:66c8:8bf3:ad08) (Ping timeout: 252 seconds)
[11:35:56] *** Quits: toretto (~ryan@user/toretto) (Read error: Connection reset by peer)
[11:36:41] *** Joins: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:55:06] *** Quits: Furai (~Furai@cookiehoster.furai.pl) (Quit: WeeChat 3.2.1)
[11:55:22] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[11:57:57] *** Joins: Furai (~Furai@cookiehoster.furai.pl)
[12:02:23] *** Joins: WishBoy (~WishBoy@user/wishboy)
[12:09:16] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[12:34:05] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 260 seconds)
[12:38:37] *** Joins: tekmunkey (~Bubba@69.145.236.165)
[12:45:46] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3f1)
[12:52:35] *** Joins: jetchisel (jetchisel@user/jetchisel)
[12:53:55] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[12:56:24] *** Quits: semeion (~semeion@user/semeion) (Quit: WeeChat 3.2)
[12:59:13] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[12:59:29] *** Joins: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:213c:34e2:70bd:b038)
[13:01:48] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[13:03:06] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Client Quit)
[13:03:13] <freeman_h>  Hi all hope we are all well. My question is about pdo, sql update statement in a while or foreach loop. Currently in a foreach loop I am looping over around 50k records and then doing an update 1 by 1 for each of them based on some conditions. They are all updating(set) the same column but the values are different and WHERE clause is the same but the values are different. What is the best effective way to do this without having
[13:03:13] <freeman_h> to do it one at time? can i copy the update statement into a single statement and then just query the database once to make the update?
[13:03:26] <freeman_h> if so how to approach this. thank you
[13:04:20] *** Joins: wwwi (~wwwi@128-200-138.netrun.cytanet.com.cy)
[13:04:27] <biberu> freeman_h: are you using a parameterized query? and if so, are you reusing it or creating it anew for each iteration?
[13:04:43] <biberu> freeman_h: doing it under a transaction might help too
[13:04:46] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[13:07:32] <freeman_h> biberu, currently I am doing this update `orders` set hold = :hold, holdreason=:reason WHERE id =:id
[13:07:57] <freeman_h> then i prepere and execute it within that loop
[13:08:16] <Naktibalda> where do you get values for these fields from?
[13:08:20] <freeman_h> if processing 50k records i am doing 50k update statement to the db
[13:08:57] <freeman_h> Naktibalda, foreach($supplyData as $data)
[13:09:01] <freeman_h> its in the $data
[13:09:35] <biberu> freeman_h: don't prepare inside the loop, that'll cause a lot of repeat work for the db
[13:09:39] <freeman_h> the data is different but all updating the hold and holdreason columns based on the id
[13:09:56] <freeman_h> biberu, yes which is what I am looking for a way to do it
[13:10:02] <Naktibalda> is it coming from the same database or some external source, e.g. file?
[13:10:13] <freeman_h> external Naktibalda
[13:10:17] <Naktibalda> ok
[13:10:21] <biberu> freeman_h: prepare _outside_, bind _inside_
[13:10:26] <TinoDidriksen> Before the loop: Start a transaction and prepare once. Then execute in the loop. Then commit after the loop.
[13:10:38] <biberu> ^ that is what i'm saying
[13:13:51] <freeman_h> biberu, like this? https://3v4l.org/U0Efg
[13:14:07] <Naktibalda> no
[13:14:09] <biberu> no
[13:14:51] <Naktibalda> only bindParam is in correct place
[13:15:15] <TinoDidriksen> And you shouldn't be using bindParam anyway - use bindValue or just execute.
[13:17:29] <biberu> freeman_h: if($conn->beginTransaction()) { try { $stmt = $conn->prepare($query); foreach($vs as $v) { $conn->execute([...]); } $conn->commit(); } catch (Exception) { $conn->rollback(); throw; } }
[13:17:54] <biberu> that's obviously not valid code, but i hope it illustrates what you need to do
[13:18:41] <freeman_h> still looks like it is doing the update one at the time biberu
[13:19:10] <TinoDidriksen> It is
[13:19:19] <TinoDidriksen> But a transaction makes it super fast.
[13:19:19] <Naktibalda> you can't get away from it, but it is more efficient now
[13:19:38] <freeman_h> no difference in how it is doing it now in my code then
[13:19:43] <biberu> freeman_h: yes, but you're no longer preparing a query for each item, so the db doesn't have to re-parse it, and since it's under a transaction it can be clever about e.g. deferring index updates
[13:19:44] <TinoDidriksen> Big difference.
[13:19:48] <biberu> freeman_h: there's a big difference
[13:19:54] <freeman_h> thought they is a way to put it together and do it just once
[13:20:10] <TinoDidriksen> 1 prepare vs. 50k prepare. 1 commit vs. 50k commits.
[13:20:50] <TinoDidriksen> A transaction IS the way to put it together. That defers all the heavy stuff until commit time.
[13:22:06] <freeman_h> still confused sorry
[13:23:56] <freeman_h> will the overall look like this? https://3v4l.org/AEDcG
[13:24:06] <TinoDidriksen> Still no
[13:24:44] <freeman_h> okay brb let me do some googling
[13:25:59] <biberu> freeman_h: without transaction: hey db! do thing 1! db: ok! | do thing 2! db: ok! | ... | do thing n! db: ok!
[13:26:04] <biberu> freeman_h: with transaction: hey db! do things 1, 2, ... n! db: ok!
[13:27:52] <TinoDidriksen> freeman_h, https://3v4l.org/SgtYT
[13:37:02] *** Joins: Junxter (~Junxter@222.95.222.185)
[13:46:34] *** Quits: tekmunkey (~Bubba@69.145.236.165) (Remote host closed the connection)
[13:51:55] *** Joins: sumthing1980 (~sumthing1@94.54.64.154)
[13:59:37] *** Quits: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:213c:34e2:70bd:b038) (Ping timeout: 245 seconds)
[14:10:11] *** Joins: onizu (uid373383@id-373383.highgate.irccloud.com)
[14:15:09] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Quit: Leaving)
[14:31:56] *** Joins: LucaTM (~LucaTM@user/lucatm)
[14:34:26] *** Joins: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com)
[15:09:51] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[15:13:58] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[15:27:48] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[15:41:05] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 252 seconds)
[15:44:10] *** Quits: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f) (Ping timeout: 240 seconds)
[15:55:45] *** Quits: sumthing1980 (~sumthing1@94.54.64.154) (Quit: Leaving)
[15:57:00] *** Quits: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.2)
[15:57:55] *** Joins: Warped (~Warped@user/warped)
[16:09:58] *** Joins: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net)
[16:10:07] *** Quits: mrtnt (~Martin@2001:ad0:1:1:da9e:f3ff:fe4a:8dd0) (Quit: WeeChat 2.3)
[16:19:23] *** Joins: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br)
[16:21:17] *** Joins: wowas (~wowas@proxy01.imos.net)
[16:21:20] <wowas> Hello!
[16:22:20] <wowas> can someone help me with some SOAP/XML? I have this structure here: https://pastebin.com/W4s7pXXd and i dunno how to set xsi:type="wbci:Einzelanschluss" for the Element rufnummernPortierung
[16:31:04] *** Joins: pmercado (~pmercado@186.107.32.56)
[16:32:05] *** Joins: guidoc (~guido@host-79-19-252-175.retail.telecomitalia.it)
[16:35:50] <Blondie101010> isn't it already that way?
[16:39:09] *** Joins: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:d181:1ba9:a239:e1e9)
[16:40:36] <freeman_h> biberu, am back
[16:40:54] <biberu> o/
[16:40:55] <freeman_h> TinoDidriksen, thanks for the example
[16:42:04] <biberu> freeman_h: did you try if it runs faster like that?
[16:54:09] <freeman_h> biberu, 100% much faster
[16:54:16] <freeman_h> just tried it with 500k records
[16:54:56] <biberu> good :)
[16:55:04] <Naktibalda> wowas: do you use WSDL file?
[17:00:29] *** Joins: Poboy (~Poboy@user/poboy)
[17:07:37] <freeman_h> what happens if you prepare a query but do nto bind or execute it?
[17:10:31] <wowas> Naktibalda, https://paste.centos.org/view/3e3daef7 is it called remote wsdl what i use here?
[17:12:55] <biberu> freeman_h: nothing except wasting resources
[17:21:03] <freeman_h> biberu, like the above, question i asked i need to sort out some data in a few csv files however the are a few conditions before i do an update statement. sometimes the conditions to do the update never gets meet
[17:21:34] <freeman_h> so if i prepare outside the query
[17:22:17] <freeman_h> sorry if i prepare outside the condition but in the conditions i bind/execute it, if it never gets execute i wanted to know what will happen
[17:22:23] <TinoDidriksen> Then just don't execute it.
[17:22:37] <biberu> ^
[17:22:39] <TinoDidriksen> Committing nothing is fine.
[17:23:27] <freeman_h>  TinoDidriksen like this okay https://3v4l.org/Lqn0C
[17:24:21] <TinoDidriksen> Sure
[17:24:31] <biberu> (except that is assigning $y to $x)
[17:25:07] <freeman_h> biberu, lol
[17:29:35] <Naktibalda> wowas: SoapClient should add xsi attribute automatically.
[17:31:02] <wowas> right :-|
[17:36:40] *** Joins: wovixo (~wovixo@128.104.205.49)
[17:57:16] *** Quits: jgrim236 (~jgrim@d118-75-146-29.try.wideopenwest.com) (Quit: Buh bye!)
[17:59:50] *** Joins: jgrim236 (~jgrim@d118-75-146-29.try.wideopenwest.com)
[18:01:13] *** Quits: Junxter (~Junxter@222.95.222.185) (Read error: Connection reset by peer)
[18:13:37] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[18:23:33] *** Joins: ron1w (~roni@207.248.198.186)
[18:25:37] <ron1w> Is there a way to get a variable from a iframe ?
[18:30:29] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[18:32:18] *** Joins: keypusher (keypusher@user/keypusher)
[18:33:53] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[18:35:30] <BadAdviceCat> ron1w, if you are asking about a PHP variable, then no. Because what happens inside an iframe is a separate http request, with its own PHP running, separately.
[18:36:33] <__adrian> "what happens inside an iframe is a separate http request"  more specifically, the _result_ of a separate request
[18:41:29] *** Quits: ron1w (~roni@207.248.198.186) (Ping timeout: 252 seconds)
[18:48:06] *** Quits: mr_gant (~mr_gant@144.48.37.132) (Ping timeout: 256 seconds)
[19:00:52] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[19:00:59] *** Joins: mr_gant (~mr_gant@144.48.37.132)
[19:03:11] *** Quits: genomc (uid245282@id-245282.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[19:17:41] *** Quits: Cheez (~Cheez@user/cheez) (Quit: bye.)
[19:24:20] *** Joins: genomc (uid245282@id-245282.stonehaven.irccloud.com)
[19:25:52] *** Quits: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:d181:1ba9:a239:e1e9) (Ping timeout: 245 seconds)
[19:26:04] *** Joins: WishBoy (~WishBoy@user/wishboy)
[19:28:03] *** Joins: Cheez (~Cheez@user/cheez)
[19:30:20] *** Joins: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:d181:1ba9:a239:e1e9)
[19:41:30] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[19:59:23] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[20:02:39] *** Quits: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br) (Quit: harpia)
[20:23:47] *** Joins: Alex8532 (Alex8532@user/alex8532)
[20:31:26] *** Joins: Poboy (~Poboy@user/poboy)
[20:37:59] *** Quits: Poboy (~Poboy@user/poboy) (Ping timeout: 256 seconds)
[20:43:39] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Remote host closed the connection)
[20:44:07] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[20:44:48] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Read error: Connection reset by peer)
[20:44:59] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[20:45:08] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Remote host closed the connection)
[20:45:36] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[20:46:51] *** Joins: christianPHP (~christian@190.232.168.7)
[20:50:13] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Ping timeout: 252 seconds)
[20:58:53] *** Joins: stevenm__ (~stevenm@user/stevenm)
[20:59:08] *** Joins: Junxter (~Junxter@222.95.222.185)
[20:59:24] <stevenm__> is there some reason in some default web server configs... I see they go out of their way to make php files with no name - un-executable ?
[20:59:36] <stevenm__> e.g.   '.php' as a filename rather than 'a.php'
[21:00:05] <stevenm__> if there is a risk it's mitigating, I'd love to know what that risk is
[21:08:51] <BadAdviceCat> stevenm__, what config are you speaking about, specifically?
[21:10:31] <Sammitch> generally a filename beginning with . is considered to be 'hidden'
[21:10:44] <stevenm__> well for example (but maybe other distro's/web servers do this) in Debian 11 the default /etc/apache2/conf-available/php7.4-fpm.conf states... (it's a 3 line paste...)
[21:10:45] <stevenm__>     <FilesMatch ".+\.ph(ar|p|tml)$">
[21:10:45] <stevenm__>         SetHandler "proxy:unix:/run/php/php7.4-fpm.sock|fcgi://localhost"
[21:10:45] <stevenm__>     </FilesMatch>
[21:10:52] <Sammitch> but I'm going to file this one under "stop hitting yourself"
[21:10:58] <stevenm__> which is to say... if it's '.php' then don't pass it to the pool
[21:11:09] <stevenm__> Sammitch, but I like hitting myself
[21:11:58] <stevenm__> true I suppose it could be said hidden files aren't meant be publicly served or even interpreted
[21:13:26] <Sammitch> and agrument could be made about "does a filename that is only an extension have an extension at all?"
[21:19:48] *** Joins: magla (~gelignite@55d4c46b.access.ecotel.net)
[21:20:15] *** Quits: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:d181:1ba9:a239:e1e9) (Ping timeout: 260 seconds)
[21:30:20] *** LSD is now known as acidsys
[21:32:30] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3f1) (Ping timeout: 260 seconds)
[21:35:47] *** Joins: physikoi (~physikoi@user/physikoi)
[21:37:55] <physikoi> hello #php . I'm trying to figure out the secure usage pattern for https://github.com/symfony/dotenv. It's clear to me that I don't want secrets stored in `$_ENV`. What's not clear is how to use this symfony component safely in production. Am I supposed to implement my own caching solution? ty
[21:39:04] <physikoi> Maybe to make it simpler, the same question would apply to using  vlucas /
[21:39:09] <physikoi> phpdotenv directly
[21:39:46] <da_wunder> physikoi: if you look how Symfony framework is using that you should get quite clear answer - https://symfony.com/doc/current/configuration.html#configuring-environment-variables-in-production
[21:40:17] <physikoi> da_wunder: thanks for the tip!
[21:42:03] *** Joins: coder7of9 (~coder7of9@mail.cvage.ca)
[21:42:45] *** Joins: Rockwood (~Rocky@user/rocky)
[21:42:53] <physikoi> hm, well, i'm not using the symfony framework, so this looks like a no-go for me
[21:43:59] <Rockwood> lol
[21:48:50] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Ping timeout: 265 seconds)
[21:49:17] <coder7of9> does anyone use php with simple home brew frameworks...  or is it rare?
[21:50:28] *** Joins: Poboy (~Poboy@user/poboy)
[21:55:35] <da_wunder> physikoi: if you look that component - https://github.com/symfony/dotenv/blob/5.3/Dotenv.php#L148 - you should see that it would just try to load that `.local.php` file
[21:57:04] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[21:57:17] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 252 seconds)
[22:00:09] *** Quits: christianPHP (~christian@190.232.168.7) (Ping timeout: 256 seconds)
[22:01:20] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[22:07:41] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 265 seconds)
[22:10:37] <da_wunder> physikoi: so just to be clear - if you've that `.local.php` file which contains something like; `<?php return ['SOME_ENV' => 'some value', ...];` you should be ok
[22:17:37] *** Joins: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f)
[22:22:34] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[22:32:31] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[22:33:55] <Rockwood> o/
[22:34:08] <Rockwood> deltab, ypu can libe
[22:42:21] *** Joins: m6w6_ (mike@m6w6.name)
[22:42:54] *** Parts: m6w6_ (mike@m6w6.name) (Leaving)
[22:43:14] *** Quits: coder7of9 (~coder7of9@mail.cvage.ca) (Quit: Client closed)
[22:48:01] <TML> stevenm__: If it's `.php` (no actual filename), then there's nothing to pass to the pool
[22:50:35] <TML> stevenm__: That is to say, it's less about "mitigating some risk" and more about "Don't write configs that don't make sense"
[22:50:52] *** Quits: jess (~jess@libera/staff/jess) ()
[22:52:31] *** Joins: toretto (~ryan@user/toretto)
[22:55:09] *** Joins: junktext (~junktext@77.247.181.219)
[23:02:06] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[23:06:04] *** Quits: physikoi (~physikoi@user/physikoi) (Ping timeout: 252 seconds)
[23:29:54] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[23:33:01] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[23:34:05] *** Quits: toretto (~ryan@user/toretto) (Ping timeout: 252 seconds)
[23:38:00] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[23:38:41] *** Joins: mdbauman (~mdbauman@99-184-99-19.lightspeed.gnvlsc.sbcglobal.net)
[23:39:27] *** Quits: junktext (~junktext@77.247.181.219) (Quit: junktext)
[23:44:55] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 260 seconds)
[23:59:00] *** Joins: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:5d43:45db:959a:84d6)
