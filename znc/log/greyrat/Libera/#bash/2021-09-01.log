[00:00:27] *** Quits: Drek45 (~jrept371@129.59.122.18) (Ping timeout: 245 seconds)
[00:01:18] *** Parts: eoc (~pc@user/eoc) ()
[00:02:10] *** Joins: bgpepi (~quassel@ip-83-134-114-91.dsl.scarlet.be)
[00:02:47] *** Quits: bgpepi (~quassel@ip-83-134-114-91.dsl.scarlet.be) (Client Quit)
[00:03:01] <Soliton> # while read -r; do :; done < <(exit 42); wait "$!"; echo $?
[00:03:03] <shbot> Soliton: 42
[00:03:05] *** Joins: bgpepi (~quassel@ip-83-134-114-91.dsl.scarlet.be)
[00:03:24] *** Quits: nrl^ (~nrl@wsip-98-188-244-188.mc.at.cox.net) (Remote host closed the connection)
[00:03:27] *** Joins: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e)
[00:03:47] *** Joins: Dotz0cat (~Dotz0cat@h168.196.117.75.dynamic.ip.windstream.net)
[00:06:42] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 245 seconds)
[00:06:49] *** Joins: jess (~jess@libera/staff/jess)
[00:07:15] *** Joins: sinaowolabi__ (~SinaOwola@160.152.182.120)
[00:08:04] *** Quits: sinaowolabi_ (~SinaOwola@102.134.114.1) (Read error: Connection reset by peer)
[00:08:07] *** Joins: dsrt^ (~dsrt@wsip-98-188-244-188.mc.at.cox.net)
[00:09:20] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Read error: Connection reset by peer)
[00:09:38] *** Quits: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e) (Ping timeout: 256 seconds)
[00:10:34] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[00:11:28] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Quit: PROTO-IRC v0.73a (C) 1988 NetSoft - Built on 11-13-1988 on AT&T System V)
[00:13:19] *** Quits: sinaowolabi__ (~SinaOwola@160.152.182.120) (Ping timeout: 252 seconds)
[00:13:47] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[00:13:52] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[00:18:43] *** Quits: almostdvs (~almostdvs@162.154.206.233) (Quit: WeeChat 2.3)
[00:20:54] *** Joins: emg (~emg@cpe-70-93-247-186.natsow.res.rr.com)
[00:21:39] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[00:23:35] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 244 seconds)
[00:24:56] *** Joins: zro (~zro@user/zro)
[00:24:59] *** Joins: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is)
[00:25:40] *** Joins: sinaowolabi__ (~SinaOwola@160.152.31.71)
[00:28:03] *** Joins: almostdvs (~almostdvs@162.154.206.233)
[00:29:14] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[00:33:30] <dermoth> Soliton, yeah while reading the man page I had the feeling that owuld work, then the doorbell chimed... Thanks!
[00:34:10] *** Quits: Guest7127 (~afernande@63.240.73.102) (Quit: Konversation terminated!)
[00:34:23] *** Joins: Guest7127 (~afernande@63.240.73.102)
[00:37:41] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[00:37:55] <dermoth> 43# while read -r; do :; done < <(exit 42); wait "$!"; echo $?
[00:37:57] <shbot> dermoth: bash: wait: pid 55 is not a child of this shell
[00:37:57] <shbot> dermoth: 127
[00:38:07] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[00:38:12] <dermoth> I need to get bash 5 in :/
[00:38:23] <dermoth> 44# while read -r; do :; done < <(exit 42); wait "$!"; echo $?
[00:38:24] <shbot> dermoth: 42
[00:41:20] <earnestly> In pipelines it helps to convert the concept of error status into presence or absence of data
[00:42:37] <earnestly> Invalid input results in nothing.  Partially valid input can result in only valid output or nothing as well depending on how the chain is set up
[00:45:56] <dermoth> I just want to abort if the command didn'T succeed
[00:46:11] <dermoth> else the next error is misleading
[00:47:08] <dermoth> I have at least 2 other ways... this one was more elegant but I have only bash up to 4.3 in that env
[00:47:44] <dermoth> well I can also assign it all to a variable and use <<<
[00:49:06] <earnestly> Switching to pipelines requires a complete rethinking.  Ending up with <<< is usually a sign that it has gone wrong
[00:50:10] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 252 seconds)
[00:52:22] *** Quits: mhi (~mhi@46.23.94.209) (Changing host)
[00:52:22] *** Joins: mhi (~mhi@user/mhi)
[00:52:37] <earnestly> The idea of "aborting" doesn't make much sense because pipelines are parallel already.  What "aborting" means in this world is the pipeline getting EOF
[00:52:50] <CrtxReavr> bash seems rather hit or miss in expanding ~ into one's home directory.
[00:53:01] <CrtxReavr> In a script I mean.
[00:53:02] <phy1729> Are you messing with HOME?
[00:53:15] <CrtxReavr> I am not.
[00:53:18] <phy1729> # echo ~; HOME=foo; echo ~
[00:53:20] <shbot> phy1729: /root
[00:53:20] <shbot> phy1729: foo
[00:53:55] <earnestly> phy1729: This is probably the usual case where ~ is expected to expand when provided as a string
[00:57:00] <CrtxReavr> Yeah. . . 
[00:57:11] <CrtxReavr> In this case, I can be explicit I guess.
[00:57:49] *** Quits: ekathva (~ekathva@88-114-118-108.elisa-laajakaista.fi) (Remote host closed the connection)
[00:59:35] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Ping timeout: 252 seconds)
[01:00:54] <jetchisel> !~
[01:00:54] <greybot> http://bash-hackers.org/wiki/doku.php/syntax/expansion/tilde $HOME may be easier to use inside ""s as ~ won't expand when double quoted.
[01:04:16] *** Quits: magla (~gelignite@55d413e5.access.ecotel.net) (Quit: Stay safe!)
[01:07:08] *** Joins: XV8 (~XV8@2601:5cb:c001:50:7c79:4e14:5357:7ce1)
[01:07:40] *** Quits: smlavine (~smlavine@sourcehut/user/smlavine) (Quit: nyaa~)
[01:07:46] *** Quits: nobody_ (~nobody@host-79-24-179-239.retail.telecomitalia.it) (Ping timeout: 252 seconds)
[01:10:36] <Guest7127> hello
[01:11:30] *** Quits: Guest7127 (~afernande@63.240.73.102) (Changing host)
[01:11:30] *** Joins: Guest7127 (~afernande@user/wwilliam)
[01:11:30] *** wwilliam is now known as Guest4449
[01:11:30] *** Quits: Guest4449 (~Wiilliam@user/wwilliam) (Killed (calcium.libera.chat (Nickname regained by services)))
[01:11:30] *** Guest7127 is now known as wwilliam
[01:12:10] *** Joins: akoana (~ah@user/akoana)
[01:12:34] <wwilliam> I have dir foo and inside i have a subdir also call foo, I need to move the files to parent dir and delete the subdir how do i do this?
[01:12:36] *** Quits: XV8 (~XV8@2601:5cb:c001:50:7c79:4e14:5357:7ce1) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:12:57] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[01:14:23] <wwilliam> So move the contents to parent dir before deleting sub dir.
[01:14:55] *** Quits: vysn (~vysn@user/vysn) (Remote host closed the connection)
[01:14:58] *** Joins: Guest4449 (~Wiilliam@12.187.181.32)
[01:16:22] *** Joins: tangy (tangy@user/tangy)
[01:16:22] <wwilliam> This is a sample mv the pdfs to parent and then delete subdir
[01:16:24] <wwilliam> https://paste.debian.net/1209838/
[01:18:35] <Helmholtz> To check if a string exists in a file (all lines), best way is grep?
[01:18:36] <Helmholtz> I mean the file is line-separated
[01:18:36] <wwilliam> awk '/pattern/' file
[01:19:03] <earnestly> Helmholtz: Probably
[01:19:28] <Helmholtz> bash internals don't have this option right?
[01:19:32] <earnestly> Not sure what '(all lines)' means here unless you mean "check if a string exists on every line"
[01:19:34] <Helmholtz> I want to compare sha256
[01:19:51] <earnestly> sha256sum has -c
[01:19:55] <Helmholtz> earnestly, not every line. 
[01:20:16] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 250 seconds)
[01:20:38] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[01:22:28] <wwilliam> will this mv the pdfs to the parent?  on every dir.?
[01:22:30] <wwilliam> while read -r x;do mv -v -- "$x" ../ ;done < <(find .  -type f -name "*.pdf")
[01:22:34] <Helmholtz> earnestly, in -c mode, the file contains some hashes seperated by new line?
[01:23:18] *** Joins: euouae (~euouae@user/euouae)
[01:23:34] <Helmholtz> nvm
[01:23:35] <euouae> Hello how can I turn $2, ... etc into "-r $2 -r $3 ..." etc?
[01:23:40] <earnestly> Unless using BSD tags, it's the same format as sha256sum's output
[01:24:43] <earnestly> euouae: With a for loop, storing them in an array.  for arg; do cmdline+=(-r "$arg"); done
[01:24:49] *** Joins: XV8 (~XV8@2601:5cb:c001:50:7c79:4e14:5357:7ce1)
[01:25:03] <euouae> Nice! thank you 
[01:25:28] <euouae> Hm.. but I need to access the array containing $2, $3 etc... how do I do that?
[01:25:38] <Helmholtz> How to return exit code of a command inside a bash function?
[01:25:53] <Helmholtz> like return exit code of grep
[01:25:56] *** Joins: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0)
[01:26:05] <earnestly> It does that by default
[01:26:23] *** Joins: Drek45 (~jrept371@c-67-187-120-30.hsd1.tn.comcast.net)
[01:26:43] <earnestly> !array > euouae 
[01:26:43] <greybot> euouae: An array maps numbers to strings. Bash 4 also has associative arrays (maps strings to strings). http://mywiki.wooledge.org/BashSheet#Arrays http://mywiki.wooledge.org/BashFAQ/005 http://wiki.bash-hackers.org/syntax/arrays
[01:27:02] *** Quits: absc (~absc@dynamic-adsl-94-34-168-146.clienti.tiscali.it) (Remote host closed the connection)
[01:27:14] <euouae> Oh okay I understand now I think
[01:27:19] <earnestly> geirha: https://www.abs-lang.org/
[01:27:53] <earnestly> lol quickstart 404s
[01:28:06] <earnestly> Because their href includes a trailing /
[01:29:13] <earnestly> Oh no
[01:30:06] <euouae> thanks earnestly
[01:30:08] *** Quits: euouae (~euouae@user/euouae) (Quit: Client closed)
[01:34:41] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[01:34:49] *** Joins: Crescendo (~Crescendo@user/crescendo)
[01:34:53] *** Joins: euouae (~euouae@user/euouae)
[01:34:55] *** Quits: earendel (uid498179@user/earendel) (Quit: Connection closed for inactivity)
[01:35:24] <euouae> now I'd like to run a command with `foo -r "John Doe" -r "Jane Doe"`
[01:35:43] <euouae> but in $2 I have "John Doe". Should I be passing 
[01:35:51] <euouae> "\"$i\"" ?
[01:36:27] <euouae> oh nevermind I'm confusing shell with scripts
[01:39:10] <dermoth> earnestly, I'm not sure how you want to switch a while loop to a pipeline... in my case itd whole job is to set variables based on an external command so it must run in the main shell
[01:39:45] <dermoth> the output is fairly limited though... so I went with <<< with a note how it can work on 4.4+
[01:40:45] <dermoth> basically my while loop was a one-off to set up the script, then do all the work after - I can't do any work inline as I need the full output to start
[01:40:55] <euouae> Unfortunately `for i in {2..$#}` doesn't seem to work 
[01:41:40] <dermoth> euouae, for ((i=2; i<$#; i++)); do...
[01:42:00] <dermoth> <=$#
[01:42:30] <euouae> Ah nice! Thank you
[01:42:53] <dermoth> {...} expansions can'T use variables... unless you eval them
[01:43:15] <dermoth> but in this case a c-style loop is much better
[01:43:18] <euouae> and then how can I refer to $i as $2 $3? Would it be $$i?
[01:43:34] <dermoth> ok you want to loop over $@
[01:43:43] <euouae> Yes but only for the second argument and after
[01:44:01] <euouae> in fact what I want is to transform $@ into "-r $2 -r $3 ..."
[01:44:15] <dermoth> I youls rather shift the arguments... assuming you start at 2 you already use one, so get rit of ir with a lone shift, then...
[01:44:27] <euouae> aaah very nice. I did not know you can shift
[01:44:54] <dermoth> while (($#)); do myvar=$1; shift; done
[01:45:22] <dermoth> while [ $# -gt 0 ] works too
[01:46:48] <dermoth> typically, options are read until the first --, the way I read my args looks more like: while true; do case $1 in [...]; esac; done
[01:47:42] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Quit: too many notifications from idk what source, cya later)
[01:48:02] <earnestly> dermoth: The loop and your <() run in parallel
[01:48:13] <earnestly> It is a pipeline, just using fifos instead of pipe(2)
[01:48:32] <dermoth> then in the case I shift once for an option, twice (shift 2) if I read an argument ($2), and break on -- (actually I can do the while true because getopt which always add a --)
[01:48:43] <earnestly> That your loop is a one-off, is also a problem in pipeline designs
[01:48:47] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[01:49:27] <earnestly> euouae: for arg in "${@:2}"; you can also uses slices in bash like so
[01:49:47] <euouae> ah that's even more elegant, I just got it done with shifts
[01:49:52] <earnestly> In this way you don't lose the first argument to the shift (unless you assign it)
[01:50:07] *** Quits: lousiF (~lousiF@user/lousif) (Ping timeout: 252 seconds)
[01:50:23] <dermoth> indeed
[01:51:33] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:51:35] <PapaChub> Does anybody know if there's a way for a `bind -x keyseq:shell-command` macro to access the kill ring?
[01:51:36] <PapaChub> I know you can manipulate $READLINE_LINE, $READLINE_POINT, and $READLINE_MARK, but I was hoping to be able to "kill/yank" as well...
[01:51:48] <dermoth> earnestly, so inside my while there's not much being done, just setting some variables based on output. i don'T case if <() runs in parallel, once it's odone I cna just abort if it failed, whenever the command returned something or not
[01:52:30] <earnestly> dermoth: It's okay, thinking with pipelines is pretty alien
[01:53:40] <earnestly> E.g. that it's setting "variables", is also mostly unnecessary in a pipeline design
[01:54:15] <earnestly> Input is used immediately rather than being chopped up into temporary storage units only to be recalled once or twice
[01:55:14] <dermoth> well the wole goal here is to test what those variable are set too (interdependencies for ex)
[01:55:21] <earnestly> (And reusing the same variable becomes unnecessary in most cases because input is used immediately, due to most operations being done in a single invocation over all input rather than being invoked multiple times per input)
[01:56:18] *** Quits: kj- (~kj@beta.aerisnetwork.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:57:37] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 244 seconds)
[01:58:37] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[01:58:39] *** Joins: travaldo (~travaldo@159.203.88.148)
[01:59:24] <dermoth> ok maybe I could make it run the way you say, but then instead of running the command once I'd run it 3-4 times for subset of data, and it's quite heavy (annd i'm pretty sure it quite inneficient wo will do the same work whenever I get just a bit of info or everything I need at once)... so yes i'd rather buffer a few dozen lines and pass it with <<< than re-use a command that will buffed and process megabytes of data every call :)
[01:59:27] <earnestly> dermoth: To be fair, this approach doesn't work for everything, especially anything that is simply "if this then that"
[01:59:35] <euouae> hmm...
[01:59:41] <euouae> I am getting into trouble
[01:59:42] <earnestly> You don't run it multiple times, that's the whole point
[02:00:07] <euouae> I crafted a string containing "-r John -r Jane" but now I can't pass it to `gpg` because it understands it as a single argument 
[02:00:08] <earnestly> That's precisely the point, nor do you capture the input and reuse it.  The entire thing is consumed and processed in a single pass
[02:00:15] <dermoth> yeah but the data isn'T orderes in any way useful
[02:00:19] <earnestly> euouae: "${array[@]}"
[02:00:29] <euouae> thank you! you're awesome
[02:00:34] <dermoth> i can't just process something if I need something 30 lines down to process it
[02:00:37] <earnestly> euouae: The links show you this, please read them
[02:00:45] <earnestly> dermoth: You can
[02:01:07] <dermoth> how?
[02:01:11] <earnestly> But don't worry about it, I shouldn't have brought it up
[02:01:12] <dermoth> if you're not storing it
[02:02:21] <earnestly> You do store things, in cases like that you'd build a buffer and wait for the trigger
[02:02:35] <emg> (yay awk)
[02:02:43] <earnestly> You also consider transformations to the input to make subsequent processing simpler
[02:02:48] <earnestly> emg: Yeah exactly
[02:02:52] <mozgalom> Hi all! I suppose this should be a simple one. I have two lines in my bash script: "source $user_home/.virtualenvs/xxx/bin/activate" and "pip3 install --index-url https://$username:$password@host/". Shellcheck complains about double quotes (SC2086) for the second line, but not for the first one. Why is that?
[02:03:15] <earnestly> There's no need to try and process input as-is, it can be massaged into something more easily usable
[02:03:32] <earnestly> (So long as your transformations are lossless according to what you need from it)
[02:03:53] <dermoth> my while loo0p is the transformation :)
[02:03:53] <emg> mozgalom: IIRC shellcheck tries to be smart and let it slide if it can tell that the variable doesn't contain spaces, that being said you should use double quotes every time
[02:04:08] <mozgalom> emg Thanks!
[02:04:11] <earnestly> dermoth: Yeah, now just think about passing that data on directly instead of capturing it
[02:04:25] <earnestly> dermoth: E.g. cmd | while ...; done | cmd2 | etc.
[02:04:32] <earnestly> One pipe, executed once
[02:04:37] <earnestly> pipeline*
[02:05:13] <earnestly> mozgalom: The use of " around code in your message is very ambiguous
[02:05:24] <dermoth> I get it, just doesn'T apply to what I'm doing. iy would make the code muct more complex with zero benefit
[02:05:31] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Ping timeout: 252 seconds)
[02:05:54] <euouae> I am not able to get `${recipients[@]}` to work. I still get the same error. The contents are recipients="-r John -r Jane"
[02:06:03] <earnestly> You might be surprised, it has routinely halved everything I've applied it to and sped it up massively
[02:06:18] <earnestly> euouae: That's not an array, then is it i
[02:06:21] <mozgalom> earnestly Yea I figured after I posted :/ But those two lines I mentioned, each one is within quotes, no variable is quoted in any line...
[02:07:30] <PapaChub> euouae, recipients=( -r John -r Jane )  a.k.a.  recipients=( "-r" "John" "-r" "Jane" )
[02:07:41] <emg> euouae: where did you get the recipients from? how did you build that string? you should buyild an array instead
[02:07:41] <earnestly> euouae: That's a single string containing "-r john ..."
[02:07:41] <earnestly> emg: I literally showed them using a loop to assign array+=(-r "$...") and now they're giving me array="this crap"
[02:07:42] <euouae> emg: My program works like $0 [file] [recipients...] and it's supposed to gpg-encrypt a file for the recipients
[02:07:42] <earnestly> And the links to wooledge explaining what arrays are
[02:07:42] <earnestly> They're not reading it
[02:07:45] <euouae> earnestly: I misunderstood you and I thought that it was string concatenation, also the wooledge link has invalid SSL certs
[02:07:53] <euouae> or maybe none at all
[02:08:06] <emg> euouae: then what you want to do is    file=$1; shift; for r do args+=(-r "$r"); done; gpg ... "${args[@]}"
[02:08:06] *** Quits: mei (~mei@user/mei) (Read error: Connection reset by peer)
[02:08:31] *** Joins: mei (~mei@user/mei)
[02:08:34] <emg> euouae: that stores file, shifts it out of the way, then for each argument after, adds it to an array with the -r needed, then calls gpg with that array expanded to multiple arguments
[02:08:56] <euouae> Nice
[02:09:04] *** Quits: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:10:10] <earnestly> euouae: wooledge cert is fine
[02:10:14] <emg> euouae: you can even put other arguments into the args array before or after if you want, intsead of putting them directly on the call to gpg, e.g.    args=(-x -y something); ... for r do...done; args+=(--other stuff); ...; gpg .. "${args[@]}"             so all of the arguments are in the array
[02:10:23] <earnestly> euouae: TLS 1.3, A rated, etc.
[02:10:58] *** Quits: zouhair (~zouhair@lnsm1-montreal02-142-118-47-137.internet.virginmobile.ca) (Ping timeout: 252 seconds)
[02:11:05] *** Quits: Wulf (~Wulf@user/wulf) (Ping timeout: 250 seconds)
[02:11:24] *** Quits: aniruddha (uid340443@id-340443.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:11:52] <earnestly> euouae: Try with openssl s_client -connect wooledge.org -port 443
[02:12:10] <earnestly> Unless you don't allow Let's Encrypt
[02:12:26] <euouae> earnestly: Okay, now the wooledge link works! I have HTTPS only so I don't know why it didn't work before
[02:12:37] *** Quits: LuckyRawApe (~sergiy@194-223-37-55.tpgi.com.au) (Ping timeout: 252 seconds)
[02:12:56] *** Joins: zouhair (~zouhair@lnsm1-montreal02-142-118-47-137.internet.virginmobile.ca)
[02:13:02] *** Joins: LuckyRawApe (~sergiy@194-223-37-55.tpgi.com.au)
[02:13:16] <earnestly> euouae: You ought to tell people that the links didn't work when they show it to you
[02:13:26] <earnestly> Instead of ignoring it completely
[02:13:54] *** Joins: gr33nR10t (~greenriot@user/gr33nr10t)
[02:14:38] <euouae> My apologies, sometimes I forgo civility
[02:15:32] <earnestly> It's not about civility but knowing the information is available as otherwise you will be mislead
[02:16:16] <earnestly> Everything in the shell is about grouping things, quotes are used to do this.  They're not like strings in C or python
[02:17:02] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[02:17:53] <neshpion> i saw someone do `while [ True ]; do` and it raised my blood pressure
[02:17:57] *** Joins: earendel (uid498179@user/earendel)
[02:18:10] *** Quits: mei (~mei@user/mei) (Ping timeout: 252 seconds)
[02:18:31] <neshpion> # if [ ThisIsStupid ]; then echo yep; fi
[02:18:33] <shbot> neshpion: yep
[02:18:42] <phy1729> should have replaced it with while [ false ]; do
[02:18:47] <neshpion> exactly lol
[02:18:55] <earnestly> That would be cruel and delightful
[02:19:06] <earnestly> if [ false ]; then ...
[02:19:12] <neshpion> # if [ false ]; then echo true; fi
[02:19:13] <shbot> neshpion: true
[02:19:30] <earnestly> I do appreciate moreso the underhanded c contest so constructs like this excellent
[02:20:16] <earnestly> ormaaj has a nice example that uses [1=2] or such as globs inside [ ]
[02:20:32] <earnestly> There is a factoid for it here but I don't remember its name
[02:20:40] <neshpion> ![
[02:20:41] <greybot> [ or test is the POSIX test command. It can do simple tests on files and strings. In bash, you should use the more powerful [[ instead and ban [ for sake of consistency. [[ can do pattern matching, is faster and safer to use. http://mywiki.wooledge.org/BashGuide/TestsAndConditionals http://mywiki.wooledge.org/BashFAQ/031
[02:20:50] <neshpion> hmm not quite
[02:22:19] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[02:22:31] <earnestly> One of the many !ormaajbomb(n) factoids probably has it
[02:23:26] <earnestly> It's not the type of code that looks confusing but that which looks immediately sensible but is completely subverted
[02:24:51] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Client Quit)
[02:24:53] *** Joins: kj (~kj@kj.aerisnetwork.net)
[02:25:06] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[02:26:03] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Client Quit)
[02:26:20] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[02:27:41] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Client Quit)
[02:27:57] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[02:28:04] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 252 seconds)
[02:29:32] *** Joins: minted (~minted@user/qzulu)
[02:29:56] *** Quits: minted (~minted@user/qzulu) (Remote host closed the connection)
[02:31:18] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[02:35:43] *** Quits: furrymcgee (~devuan@31.179.186.66) (Ping timeout: 252 seconds)
[02:37:38] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[02:38:14] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[02:38:39] *** Joins: nergar (~Nergar@177.225.152.16)
[02:38:43] <nergar> hello
[02:39:28] <nergar> I'm trying to save the available disks to an array so I can later use the info on my script but honestly I have no idea what is going on
[02:41:15] <nergar> fdisk -l | grep "Disk\\s/dev" | awk '{print substr($2, 1, length($2)-1)}' give me the info I need, all the /dev/sdX devices and all that
[02:41:20] <emg> nergar: 1) how do you get a list of disks 2) what do you want to do with that list?
[02:41:23] <emg> ah, I'm too slow
[02:42:18] <nergar> now I want to save that to an array like this disk_array=!( fdisk -l | grep "Disk\\s/dev" | awk '{print substr($2, 1, length($2)-1)}')
[02:42:53] <nergar> and it isn't working, so I found a link on the web that says to add more parenthesis 
[02:43:07] <nergar> https://stackoverflow.com/questions/15105135/bash-capturing-output-of-awk-into-array
[02:43:07] *** Quits: topoi (~topoi@user/topoi) (Remote host closed the connection)
[02:43:20] <emg> nergar: probably want to use mapfile
[02:43:24] <emg> let me draw up an example
[02:43:49] <nergar> but the disk_array variable is saving my home folder contents instead!!!!
[02:44:35] *** Quits: euouae (~euouae@user/euouae) (Quit: Client closed)
[02:45:15] <emg> I'd probably do:     mapfile -t disks < <(sudo fdisk -l | awk -F '[ :]+' '/^Disk \/dev/{print$2}'); declare -p disks
[02:45:27] <nergar> ok
[02:45:43] <nergar> any ideas why the other way it is saving my home folder contents?
[02:45:46] <nergar> declare -p disk_array 
[02:45:46] <nergar> declare -a disk_array=([0]="f" [1]="Desktop" [2]="Documents" [3]="Downloads" [4]="Music" [5]="Pictures" [6]="Public" [7]="Templates" [8]="Videos")
[02:45:59] *** Joins: masoudd (~masoudd@user/masoudd)
[02:46:09] <nergar> doesn't make any effing sense to me
[02:46:35] <emg> there's porbably somewher you aren't quoting and there's a * that gets expanded as a glob
[02:48:27] <nergar> thanks for simplifying my awk as well :P
[02:49:32] *** Joins: masoudd_ (~masoudd@user/masoudd)
[02:49:55] <phogg> nergar: on Linux enumerating via /sys/block/ is probably a better idea
[02:51:03] *** Joins: LiENUS (~quake@108-242-135-2.lightspeed.btrgla.sbcglobal.net)
[02:51:15] <nergar> :o
[02:51:24] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[02:51:37] *** Joins: masoudd__ (~masoudd@user/masoudd)
[02:51:40] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 252 seconds)
[02:52:34] <nergar> looked around in lots of places and didn't see that suggested anywhere but makes tons of sense
[02:52:45] *** Joins: GNUHacker (~gnu@fsf/member/GNUHacker)
[02:53:13] *** Joins: Atque (~Atque@user/atque)
[02:54:00] <phogg> whether it's more helpful depends on what you're trying to do/know
[02:54:13] <phogg> but it's definitely more... idiomatic. Working with files is very Unixy.
[02:54:40] *** Quits: reset (~reset@user/reset) (Quit: reset)
[02:55:01] *** Quits: masoudd_ (~masoudd@user/masoudd) (Ping timeout: 252 seconds)
[02:55:41] *** Quits: GNUHacker (~gnu@fsf/member/GNUHacker) (Remote host closed the connection)
[02:55:41] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Read error: Connection reset by peer)
[02:56:07] *** Quits: blingrang_ (~blingrang@user/blingrang) (Ping timeout: 252 seconds)
[02:56:40] *** Quits: masoudd__ (~masoudd@user/masoudd) (Ping timeout: 252 seconds)
[02:59:10] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[02:59:49] *** Joins: masoudd (~masoudd@user/masoudd)
[02:59:57] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Client Quit)
[03:00:13] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[03:00:14] *** Quits: kr1x (kriket@gateway/vpn/protonvpn/kr1x) (Remote host closed the connection)
[03:00:57] *** Joins: masoudd_ (~masoudd@user/masoudd)
[03:02:31] <phogg> nergar: maybe something like mapfile -t disks < <(for bdev in /sys/dev/block/*; do udevadm info -rq name "$bdev"; done); declare -p disks
[03:04:00] *** masoudd is now known as Guest1069
[03:04:00] *** Quits: Guest1069 (~masoudd@user/masoudd) (Killed (sodium.libera.chat (Nickname regained by services)))
[03:04:00] *** masoudd_ is now known as masoudd
[03:05:58] <nergar> phogg, just realized this also lists partitions and non-writable media and since I am trying to pick a disk to format the fdisk -l approach works better 
[03:06:25] <phogg> like I said, it depends on what you want to do or know
[03:06:30] <nergar> yup, yup
[03:06:57] <phogg> I took a guess, but /sys is the real ground truth. It's worth remembering to look there, although it's not always as convenient.
[03:08:22] <nergar> def worth to keep in mind
[03:08:55] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 244 seconds)
[03:10:41] *** Quits: oprypin (~irc@pryp.in) (Quit: Bye)
[03:10:52] *** Joins: oprypin (~irc@pryp.in)
[03:11:33] *** Joins: GNUHacker (~gnu@fsf/member/GNUHacker)
[03:12:43] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Quit: john_johnk)
[03:14:00] *** Joins: kurahaupo (~kurahaupo@58.84.89.180)
[03:15:48] <jetchisel> doesn't blkid or lsblk prints the disk?
[03:15:49] *** Joins: tp43_ (~ndeem@2001:1970:502b:d701:a199:1a3e:abd1:ac4c)
[03:20:24] <jetchisel> blkid -o device
[03:20:57] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Quit: Goodbye)
[03:21:36] *** Joins: mawk (~mawk@wireguard/contributor/mawk)
[03:23:39] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.3-dev)
[03:24:20] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[03:26:22] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 252 seconds)
[03:27:18] *** Joins: Crescendo (~Crescendo@user/crescendo)
[03:28:13] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[03:28:18] *** Quits: Drek45 (~jrept371@c-67-187-120-30.hsd1.tn.comcast.net) (Quit: Leaving)
[03:29:26] *** Joins: Inline_ (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431)
[03:31:42] *** Quits: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431) (Ping timeout: 245 seconds)
[03:32:02] *** Quits: xx (~xx@user/xx) (Quit: xx)
[03:32:15] *** Quits: jsrnop (~mark@user/jsrnop) (Quit: The Lounge - https://thelounge.chat)
[03:32:42] *** Joins: jsrnop (~mark@user/jsrnop)
[03:33:07] *** Quits: luva (~luva@178.239.173.200) (Ping timeout: 240 seconds)
[03:33:12] *** Joins: kill (~killown@user/killown)
[03:33:26] *** Quits: kill (~killown@user/killown) (Read error: Connection reset by peer)
[03:33:38] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Ping timeout: 256 seconds)
[03:33:44] *** Joins: kill (~killown@user/killown)
[03:35:05] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Remote host closed the connection)
[03:35:07] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[03:35:10] *** Quits: tangy (tangy@user/tangy) (Ping timeout: 252 seconds)
[03:35:14] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[03:35:27] *** Joins: xx (~xx@user/xx)
[03:36:49] *** Quits: tp43_ (~ndeem@2001:1970:502b:d701:a199:1a3e:abd1:ac4c) (Ping timeout: 252 seconds)
[03:39:12] *** Quits: GNUHacker (~gnu@fsf/member/GNUHacker) (Ping timeout: 245 seconds)
[03:41:28] *** Joins: luva (~luva@178.239.173.201)
[03:41:40] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 240 seconds)
[03:42:52] *** Joins: Crescendo (~Crescendo@user/crescendo)
[03:44:54] *** Guest2168 is now known as itu
[03:45:24] *** itu is now known as Guest6671
[03:46:24] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[03:48:45] *** Quits: Guest6671 (~wp@lynx.uberspace.de) (Changing host)
[03:48:45] *** Joins: Guest6671 (~wp@wikipedia/itu)
[03:49:30] *** Guest6671 is now known as itu
[03:50:17] <noarb> I'm trying to cleanup a file that I create with mktemp in my bashrc. My first thought was to remove it in bash_logout, but how can I keep track of what file was created without creating a security loophole? Can I set a trap in bashrc to remove the temp file when EXIT happens? I'm referencing https://mywiki.wooledge.org/BashFAQ/062 - does creating in ~/.bashrc and deleting later impact anything?
[03:51:55] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Quit: leaving)
[03:52:45] *** Joins: Atque (~Atque@user/atque)
[03:55:45] <phogg> noarb: does the file need to live that long?
[03:56:34] *** Quits: bgpepi (~quassel@ip-83-134-114-91.dsl.scarlet.be) (Remote host closed the connection)
[03:57:35] *** Quits: akoana (~ah@user/akoana) (Quit: leaving)
[03:58:13] <noarb> I'm not sure. I can give some more context. I'm trying to keep track of how many vscode integrated terminals are running so I can join them to a tmux session at a specific window location. I first started looking at /proc and filtering on environ
[03:58:28] <noarb> I was trying things like this snippet: "for pro in  /proc/[1-9]*/environ; do  [ -r $pro ] && cat $pro | xargs -0 | tr \  \\n | grep -q  TERM && cat ${pro%/*}/cmdline; done"
[03:59:04] <noarb> Then I thought I could just check in ~/.bashrc if [ "$TERM_PROGRAM" == "vscode" ] and keep count myself with a temporary file
[04:00:30] <phogg> noarb: but you wish to remove the temp file if the last such shell exits
[04:00:32] <noarb> I was using /tmp/vcode-shell.$$ and that was flagged a security issue, had to dig into it
[04:00:50] <phogg> flagged by whom?
[04:01:21] <noarb> A user in the #ubuntu channel, mentioning that the /tmp/vscode-shell.$$ is a security anti-pattern
[04:01:23] <phogg> It's not *not* a security issue, but it's not that big a deal. It would be better to make a temp dir and put files in it, and the name of that dir should be unpredictable.
[04:02:05] <phogg> noarb: see https://mywiki.wooledge.org/BashFAQ/062
[04:03:00] <noarb> I had linked to that FAQ, I'm reading it. Those examples are clear when the same script does the cleanup. What about when I do it later, so its harder to find that exact filename, or dirname? Can I trap it?
[04:03:34] <phogg> noarb: for minor scripts I don't distribute to the masses I often use /tmp/scriptname.$$ as a name of a temp file. It's only a problem if you expect someone to be trying to do you harm
[04:04:09] <phogg> noarb: if you want to do it later you must preserve a reference via your environment (or some other well known location, which would likely defeat the point)
[04:04:45] <phogg> if your environment has a reference then it's entirely possible for it to be inspected by programs run by any shell, which is a security problem if you potentially don't trust those programs
[04:05:09] <phogg> but those programs already have full access to enumerate your files in /tmp, so you're not really safe anyway
[04:05:37] <noarb> OK thanks for your feedback, the "defeating the point" part is exactly what I was suspicious of. I was wondering if I had missed something simple
[04:05:41] <phogg> unless they are run as another user, in which case if you are careful to provide the new user a filtered environment you're fine
[04:06:17] <phogg> noarb: if you had a well known location to track things then you wouldn't be likely to be wanting a temp file in the first place
[04:06:44] <phogg> for some kinds of things I've used a dotfile in $HOME
[04:07:44] <phogg> noarb: you could also do something like this: [[ $TERM_PROGRAM == vscode ]] echo $$ >> ~/.my-prefix/pids; in .bashrc, then at logout time remove the matching line from that file. If it's then empty, rm it.
[04:07:56] <phogg> but that requires a well known location
[04:08:27] *** Joins: Weather7774 (~Weather77@124-170-121-245.dyn.iinet.net.au)
[04:08:43] <phogg> it also lets you be more clever and do a sweep to remove any pid that does not correspond to a running process, although collisions are always possible there (so it's not secure)
[04:08:51] *** Quits: greknod (~grek@114-198-46-223.dyn.iinet.net.au) (Ping timeout: 244 seconds)
[04:08:55] *** Joins: greknod2 (~grek@124-169-193-167.dyn.iinet.net.au)
[04:09:08] <phogg> hmm, I am missing an && before echo in my example code
[04:09:18] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[04:09:18] <noarb> phogg: that's actually one of the first points in the FAQ, to use a well-known location, and I think I may just do that. When you write your own scripts (non-distributed) is there a benefit to using /tmp other than quick fs access?
[04:09:29] *** Joins: Crescendo (~Crescendo@user/crescendo)
[04:09:49] <phogg> noarb: the advantage is if I neglect to clean it up there is a maximum limit to the lifespan of the junk
[04:10:47] <phogg> from my POV what you have is not temp data but var data. It's intended to survive the lifespan of a single process, therefore it's more /var like than /tmp like. 
[04:11:22] <phogg> But! there are no hard rules, you can do anything that works. That's what makes Unix so nice.
[04:14:06] *** Quits: fortuno51 (~fortuno51@37.120.156.254) (Remote host closed the connection)
[04:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:15:38] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[04:16:11] *** Joins: masoudd (~masoudd@user/masoudd)
[04:17:07] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 244 seconds)
[04:18:40] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 244 seconds)
[04:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:20:38] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[04:21:09] <ormaaj> So if I just want to run a shell with no login I should be using `sudo -s`? And if I want to mix the environment in some specific way I have to use `--preserve-env=list`? That means I'm pretty much going to have to configure this and synchronize sudo config files for the systems that use it...
[04:21:23] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[04:22:48] *** Quits: zoe (~zoe@fsf/member/zoe) (Ping timeout: 244 seconds)
[04:23:15] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[04:23:56] *** Joins: tp43_ (~ndeem@2001:1970:502b:d701:a199:1a3e:abd1:ac4c)
[04:25:55] <ormaaj> i totally forgot tmux defaults to running login shells too... ugh so many wrong defaults.
[04:26:22] <phy1729> It kinda makes sense because the tmux shells can outlive their login shell
[04:27:45] <emg> ormaaj: what differentiates when you do and don't want to run a login shell? and/or why would running a login shell be a problem?
[04:28:00] <ormaaj> does it matter that the login shell quits before tmux?
[04:29:04] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 252 seconds)
[04:29:17] *** Quits: Baggypants (~baggypant@cpc94362-ward12-2-0-cust376.10-2.cable.virginm.net) (Ping timeout: 245 seconds)
[04:29:37] <ormaaj> The login shell does the "one-time" setup stuff for the "session" like setting up dbus session bus , gpgagent, and ssh-agent (my gpg-agent does both but whatever)
[04:30:02] *** Quits: zopsi (~zopsi@irc.dir.ac) (Quit: Oops)
[04:30:03] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[04:30:26] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[04:30:53] *** Joins: zopsi (zopsi@2600:3c00::f03c:91ff:fe14:551f)
[04:30:57] <emg> ormaaj: ah, interesting
[04:31:33] <emg> guess I'm used to whatever service/daemon supervisor I'm using doing that type of stuff since I'm on single user computers
[04:32:24] <ormaaj> Yeah I'm trying to figure out how to make my several years outdated configurations work on "normal" systems that use systemd
[04:32:35] <emg> ah, yeah, I just avoid systemd
[04:32:55] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 252 seconds)
[04:33:24] <ormaaj> yeah same.
[04:37:32] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[04:37:54] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[04:40:07] <litheum> i finally have pretty good luck getting systemd to do the sort of stuff i want it to
[04:41:21] *** Joins: lq820105 (~lq@116.228.78.178)
[04:41:40] *** Joins: Baggypants (~baggypant@2001:470:1f09:349::baad:daad)
[04:43:01] *** Quits: lq (~lq@116.228.78.178) (Read error: Connection reset by peer)
[04:46:32] *** Joins: Kvothe (~weechat@user/elodin)
[04:47:42] *** Joins: Crescendo (~Crescendo@user/crescendo)
[04:47:59] *** Joins: Atque (~Atque@user/atque)
[04:49:04] *** Joins: sublim20 (~sublim20@user/sublim20)
[04:49:06] *** Joins: Lunaris (~Lunaris@gateway/tor-sasl/lunaris)
[04:50:17] <ormaaj> I also wonder what is the "session" number that shows in htop? I didn't know that processes had any such thing tied to them.
[04:52:07] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 252 seconds)
[04:52:52] <emg> setsid(3p)
[04:56:37] *** Joins: caterfxo (~caterfxo@user/tangy)
[04:57:21] *** Joins: odoood (~odoood@2601:c8:c003:a550::7)
[04:59:58] *** Quits: jaamro (~jaamro@user/ormaaj) (Quit: Ping timeout (120 seconds))
[05:00:28] *** Joins: jaamro (~jaamro@user/ormaaj)
[05:00:55] *** Quits: zro (~zro@user/zro) (Quit: WeeChat 3.2)
[05:03:40] *** Quits: Lunaris (~Lunaris@gateway/tor-sasl/lunaris) (Quit: leaving)
[05:03:42] *** Quits: Weather7774 (~Weather77@124-170-121-245.dyn.iinet.net.au) (Quit: Gone to check the Weather)
[05:03:53] *** Joins: Jenmin (~Jenmin@183.199.203.144)
[05:05:53] *** Joins: Kvothe (~weechat@user/elodin)
[05:06:56] *** Joins: mov_eax (~mov_eax@user/mov-eax/x-5035058)
[05:09:54] *** Joins: ferdna (~ferdna@user/ferdna)
[05:14:07] *** Quits: travaldo (~travaldo@159.203.88.148) (Quit: travaldo)
[05:14:36] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[05:22:36] *** Joins: masoudd_ (~masoudd@user/masoudd)
[05:24:40] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 240 seconds)
[05:28:56] *** Quits: masoudd_ (~masoudd@user/masoudd) (Ping timeout: 244 seconds)
[05:30:30] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:30:36] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Quit: Konversation terminated!)
[05:31:02] *** Joins: sublim20 (~sublim20@user/sublim20)
[05:34:28] *** Joins: vlm (~vlm@user/vlm)
[05:40:32] *** Joins: fortuno51 (~fortuno51@37.120.156.254)
[05:44:57] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 244 seconds)
[05:45:37] *** Joins: thyriaen (~thyriaen@x4db7e539.dyn.telefonica.de)
[05:46:25] *** Joins: Kvothe (~weechat@user/elodin)
[05:48:16] *** Quits: mov_eax (~mov_eax@user/mov-eax/x-5035058) (Ping timeout: 252 seconds)
[05:51:06] *** Quits: thyriaen (~thyriaen@x4db7e539.dyn.telefonica.de) (Quit: Leaving)
[05:51:31] *** Quits: cark (~cark@91.110.54.120) (Ping timeout: 252 seconds)
[05:51:51] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[05:57:15] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[06:01:06] *** Joins: Bhavuk (~BTaneja@122.173.30.136)
[06:01:25] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 252 seconds)
[06:01:59] *** Joins: zro (~zro@user/zro)
[06:03:05] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[06:04:14] *** Joins: cark (~cark@91.110.54.102)
[06:11:19] *** Joins: selve (~selve@bas2-montreal28-70-53-241-238.dsl.bell.ca)
[06:12:18] *** ormaaj is now known as ormaaj2
[06:12:32] *** jaamro is now known as ormaaj
[06:14:24] *** Quits: dsrt^ (~dsrt@wsip-98-188-244-188.mc.at.cox.net) (Ping timeout: 244 seconds)
[06:14:55] *** Quits: earendel (uid498179@user/earendel) (Quit: Connection closed for inactivity)
[06:24:34] *** Quits: nergar (~Nergar@177.225.152.16) (Ping timeout: 252 seconds)
[06:25:35] *** Joins: sublim20 (~sublim20@user/sublim20)
[06:26:48] *** Joins: Weather7774 (~Weather77@124-170-121-245.dyn.iinet.net.au)
[06:27:08] *** Quits: ormaaj (~jaamro@user/ormaaj) (Quit: Client closed)
[06:27:19] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 244 seconds)
[06:28:08] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[06:28:48] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[06:35:10] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[06:35:59] *** Joins: bn_work (uid268505@id-268505.highgate.irccloud.com)
[06:37:32] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[06:37:51] *** Quits: xx (~xx@user/xx) (Quit: xx)
[06:38:03] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[06:38:16] *** Joins: Atque (~Atque@user/atque)
[06:41:06] *** Joins: gnoo (~gnoo@user/gnoo)
[06:44:46] *** Joins: Kvothe (~weechat@user/elodin)
[06:45:29] *** Quits: BUSY (~BUSY@user/busy) (Read error: Connection reset by peer)
[06:45:46] *** Joins: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net)
[06:48:43] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Ping timeout: 252 seconds)
[06:48:43] *** shokohsc8 is now known as shokohsc
[06:51:12] *** Joins: Elodin (~weechat@user/elodin)
[06:53:43] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Quit: Leaving)
[06:54:03] *** Quits: jos1 (~jos3@dyndsl-095-033-174-102.ewe-ip-backbone.de) (Ping timeout: 250 seconds)
[06:54:10] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 240 seconds)
[06:54:56] <FreeBDSM> `nohup script.sh >/dev/null 2>&1 & disown; exec /entrypoint.sh "${@}"` doesn't seem to disown script.sh's process, it remains zombie (defunct) :(
[06:55:55] *** Quits: Elodin (~weechat@user/elodin) (Ping timeout: 252 seconds)
[06:56:03] *** Joins: yjy (~y@221.212.126.202)
[06:56:43] <ormaaj2> why would you use nohup and disown?
[07:00:12] <FreeBDSM> same without nohup :(
[07:00:30] <ormaaj2> FreeBDSM: Normally if disown is available you just use disown. nohup is a workaround for shells that dont support that.
[07:04:30] <FreeBDSM> https://unix.stackexchange.com/questions/3886/difference-between-nohup-disown-and
[07:05:20] *** Parts: selve (~selve@bas2-montreal28-70-53-241-238.dsl.bell.ca) ()
[07:06:58] *** Quits: yjy (~y@221.212.126.202) (Quit: Leaving.)
[07:07:14] *** Joins: jos1 (~jos3@dyndsl-178-142-070-022.ewe-ip-backbone.de)
[07:07:49] *** blink is now known as quick
[07:08:06] *** Quits: Murray7501 (~Murray@89.109-247-180.customer.lyse.net) (Quit: leaving)
[07:08:35] *** quick is now known as quik
[07:08:46] <ormaaj2> I don't see what this has to do with anything. If it's a zombie it's because the parent didn't wait on it and your pid(1) isn't cleaning it up for some reason.
[07:08:57] *** Joins: Elodin (~weechat@user/elodin)
[07:10:46] <ormaaj2> that only becomes relevant after the child has exited of course
[07:11:25] *** Joins: mags (~mags@097-090-237-145.res.spectrum.com)
[07:11:58] <FreeBDSM> that's exactly my case
[07:12:12] <FreeBDSM> I want parent (that's a bash script) to reap dead child
[07:13:06] *** Joins: diamondbond (~diamondbo@112.134.170.180)
[07:13:54] *** Quits: seninha (~seninha@user/seninha) (Remote host closed the connection)
[07:14:11] *** Joins: seninha (~seninha@user/seninha)
[07:14:17] <ormaaj2> and clearly the exec'd shell isn't doing that.
[07:15:10] *** Quits: odoood (~odoood@2601:c8:c003:a550::7) (Ping timeout: 240 seconds)
[07:15:27] <Weather7774> Is there a way to make netcat reverse shell secure?
[07:16:19] *** Quits: seninha (~seninha@user/seninha) (Client Quit)
[07:18:48] <ormaaj2> Without wrapping it in some kind of tunnel not really. I guess there could be some indirect ways that don't involve tunnels like ipsec but that's rather high effort / weird. ask #networking.
[07:19:58] *** Quits: quik (~x@awknode.com) (K-Lined)
[07:20:05] <ormaaj2> short answer is no though.
[07:20:40] *** Quits: Guest4677 (~rs@50.125.84.218) (Ping timeout: 240 seconds)
[07:20:54] <ormaaj2> depending what you mean by "secure"
[07:22:14] *** Joins: Weather7774-2 (~Weather77@124-170-121-245.dyn.iinet.net.au)
[07:22:27] *** Quits: Weather7774-2 (~Weather77@124-170-121-245.dyn.iinet.net.au) (Client Quit)
[07:22:34] <Weather7774> woops
[07:24:40] *** Quits: Jenmin (~Jenmin@183.199.203.144) (Ping timeout: 244 seconds)
[07:27:35] <ormaaj> (note netcat isn't one thing. there are a bunch of clones with different features and no standard.)
[07:29:22] *** Quits: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Ping timeout: 256 seconds)
[07:30:46] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[07:32:48] *** Joins: totenkoph (~scythe@user/totenkoph)
[07:33:52] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 252 seconds)
[07:35:51] *** Quits: sturmmann (~sturmmann@user/sturmmann) (Ping timeout: 276 seconds)
[07:38:13] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Ping timeout: 252 seconds)
[07:39:17] *** Joins: diamondbond_ (~diamondbo@116.206.246.30)
[07:40:01] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Quit: WeeChat 3.2)
[07:40:39] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:41:17] *** Joins: pystardust (~pystardus@223.226.38.41)
[07:41:55] *** Joins: Jenmin (~Jenmin@183.199.203.144)
[07:42:07] *** Quits: diamondbond (~diamondbo@112.134.170.180) (Ping timeout: 252 seconds)
[07:42:46] *** Quits: XV8 (~XV8@2601:5cb:c001:50:7c79:4e14:5357:7ce1) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:42:53] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[07:43:55] *** Joins: XV8 (~XV8@2601:5cb:c001:50:7c79:4e14:5357:7ce1)
[07:46:07] *** Joins: Kvothe (~weechat@user/elodin)
[07:47:32] *** Quits: Elodin (~weechat@user/elodin) (Ping timeout: 245 seconds)
[07:49:48] *** Joins: Gerula_ (~Gerula@user/gerula)
[07:49:48] *** Quits: Gerula (~Gerula@user/gerula) (Killed (cadmium.libera.chat (Nickname regained by services)))
[07:49:48] *** Gerula_ is now known as Gerula
[07:50:47] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[07:51:22] *** Joins: sgn (~sgn@user/sgn)
[07:51:28] *** Quits: Kvothe (~weechat@user/elodin) (Ping timeout: 252 seconds)
[07:52:24] *** Joins: Kvothe (~weechat@user/elodin)
[07:52:50] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[07:54:25] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[07:55:02] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[07:55:10] *** Quits: pystardust (~pystardus@223.226.38.41) (Ping timeout: 240 seconds)
[07:56:50] *** Joins: thiras (~thiras@user/thiras)
[07:57:40] *** Quits: diamondbond_ (~diamondbo@116.206.246.30) (Ping timeout: 240 seconds)
[07:59:21] *** Quits: nitro (~nitro@c-73-165-183-88.hsd1.pa.comcast.net) (Read error: Connection reset by peer)
[08:01:21] *** Quits: Jenmin (~Jenmin@183.199.203.144) (Ping timeout: 244 seconds)
[08:02:05] *** Quits: jinsun (~quassel@user/jinsun) (Ping timeout: 250 seconds)
[08:03:46] *** Quits: XV8 (~XV8@2601:5cb:c001:50:7c79:4e14:5357:7ce1) (Quit: Textual IRC Client: www.textualapp.com)
[08:05:27] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 245 seconds)
[08:06:21] *** Joins: lq (~lq@116.228.78.179)
[08:06:47] *** Quits: lq820105 (~lq@116.228.78.178) (Read error: Connection reset by peer)
[08:07:34] *** Quits: lq (~lq@116.228.78.179) (Remote host closed the connection)
[08:08:05] *** Joins: lq (~lq@180.167.42.3)
[08:08:59] *** Quits: lq (~lq@180.167.42.3) (Remote host closed the connection)
[08:09:21] *** Joins: lq (~lq@210.72.8.212)
[08:11:17] *** Joins: odoood (~odoood@2601:c8:c003:a550:fbdc:f2fe:53fa:f37f)
[08:11:29] *** Quits: lq (~lq@210.72.8.212) (Remote host closed the connection)
[08:12:05] *** Joins: lq (~lq@116.228.78.179)
[08:12:59] *** Quits: lq (~lq@116.228.78.179) (Remote host closed the connection)
[08:13:23] *** Joins: lq (~lq@116.228.78.179)
[08:14:33] *** Joins: Jenmin (~Jenmin@183.199.203.144)
[08:19:44] *** Joins: aniruddha (uid340443@id-340443.charlton.irccloud.com)
[08:25:28] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 256 seconds)
[08:26:39] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[08:34:56] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[08:36:09] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Quit: WeeChat 3.2)
[08:37:06] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[08:37:33] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[08:37:36] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[08:38:11] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[08:40:35] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[08:42:38] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[08:44:16] *** Quits: zro (~zro@user/zro) (Ping timeout: 252 seconds)
[08:45:16] *** Joins: NeoCron (~NeoCron@p200300c4cf4a8400dde9c021b1b0ad3f.dip0.t-ipconnect.de)
[08:45:19] *** Joins: zro (~zro@user/zro)
[08:47:07] *** Quits: odoood (~odoood@2601:c8:c003:a550:fbdc:f2fe:53fa:f37f) (Ping timeout: 245 seconds)
[08:47:23] *** Quits: mrjpaxton[m] (~mrjpaxton@2001:470:69fc:105::8ec4) (Changing host)
[08:47:23] *** Joins: mrjpaxton[m] (~mrjpaxton@user/mrjpaxtonm/x-9268659)
[08:48:34] *** Quits: mrjpaxton[m] (~mrjpaxton@user/mrjpaxtonm/x-9268659) (Quit: Reconnecting)
[08:48:49] *** Joins: mrjpaxton[m] (~mrjpaxton@2001:470:69fc:105::8ec4)
[08:50:15] *** Joins: ryzenda (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net)
[08:51:26] *** Joins: Murray7501 (~Murray@89.109-247-180.customer.lyse.net)
[08:53:13] *** Quits: mrjpaxton[m] (~mrjpaxton@2001:470:69fc:105::8ec4) (Changing host)
[08:53:13] *** Joins: mrjpaxton[m] (~mrjpaxton@user/mrjpaxtonm/x-9268659)
[08:53:32] *** Quits: austin987 (~null@100.42.98.196) (Ping timeout: 244 seconds)
[08:55:53] *** Joins: jinsun (~quassel@user/jinsun)
[08:58:09] *** Quits: NeoCron (~NeoCron@p200300c4cf4a8400dde9c021b1b0ad3f.dip0.t-ipconnect.de) (Remote host closed the connection)
[08:59:00] *** Quits: mrjpaxton[m] (~mrjpaxton@user/mrjpaxtonm/x-9268659) (Quit: Reconnecting)
[08:59:14] *** Joins: mrjpaxton[m] (~mrjpaxton@user/mrjpaxtonm/x-9268659)
[08:59:24] *** Quits: magyar (~magyar@user/magyar) (Read error: Connection reset by peer)
[09:00:25] *** Joins: magyar (~magyar@user/magyar)
[09:01:45] *** Joins: odoood (~odoood@2601:c8:c003:a550::7)
[09:06:56] *** Joins: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com)
[09:20:15] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:22:32] *** Quits: odoood (~odoood@2601:c8:c003:a550::7) (Ping timeout: 245 seconds)
[09:25:22] *** Quits: A_Dragon (A_D@doom-tower.awesome-dragon.science) (Ping timeout: 240 seconds)
[09:26:12] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[09:29:04] *** Joins: A_Dragon (A_D@doom-tower.awesome-dragon.science)
[09:29:07] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[09:30:02] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:31:15] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:31:31] *** Joins: vishal (~vishal@fedora/vishal)
[09:31:42] *** Quits: Jenmin (~Jenmin@183.199.203.144) (Ping timeout: 245 seconds)
[09:31:56] *** Joins: Wulf (~Wulf@user/wulf)
[09:33:46] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[09:43:29] *** Joins: pystardust_ (~pystardus@223.226.38.41)
[09:49:45] *** Quits: pystardust_ (~pystardus@223.226.38.41) (Quit: pystardust_)
[09:50:48] *** Joins: Jenmin (~Jenmin@183.199.203.144)
[09:56:03] *** Quits: Jenmin (~Jenmin@183.199.203.144) (Ping timeout: 244 seconds)
[09:56:21] *** Joins: vysn (~vysn@user/vysn)
[09:56:29] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[09:57:28] *** Joins: pystardu1t (~pystardus@223.226.38.41)
[09:58:47] *** Quits: pystardu1t (~pystardus@223.226.38.41) (Client Quit)
[10:04:38] *** Joins: pystardust (~pystardus@223.226.38.41)
[10:08:07] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[10:08:33] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[10:11:12] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Ping timeout: 276 seconds)
[10:15:24] *** Joins: fch (~myname87@mob-5-90-227-40.net.vodafone.it)
[10:16:26] *** Joins: Jenmin (~Jenmin@183.199.203.144)
[10:19:29] *** Logg_ is now known as Logg
[10:22:05] *** Quits: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (Read error: Connection reset by peer)
[10:37:24] <jmcantrell> This isn't necessarily a bash question, but I bet there are some opinions here. It's pretty standard that stderr is used for any kind of logging whereas stdout is for machine-readable output, right?
[10:37:32] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[10:37:51] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[10:38:41] *** Joins: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[10:39:23] <jmcantrell> cluelessperson: i'm glad you asked about this, because i started rethinking my assumptions and i'm not entirely sure it's so clear-cut
[10:44:37] *** Quits: Jenmin (~Jenmin@183.199.203.144) (Ping timeout: 245 seconds)
[10:45:36] *** Quits: Murray7501 (~Murray@89.109-247-180.customer.lyse.net) (Quit: leaving)
[10:47:53] *** Quits: pystardust (~pystardus@223.226.38.41) (Quit: pystardust)
[10:51:05] <geirha> yes, data goes to stdout. Errors, warnings, diagnostic messages go to stderr and/or separate file
[10:55:10] *** Quits: tp43_ (~ndeem@2001:1970:502b:d701:a199:1a3e:abd1:ac4c) (Ping timeout: 252 seconds)
[10:55:23] <jmcantrell> geirha: would usage text be considered "diagnostic"
[10:55:29] <jmcantrell> if requested with -h
[10:56:07] <geirha> if you requested it with -h, it's the data you want, so I'd put it on stdout
[10:56:38] <ormaaj2> geirha: on that subject, happen to know why glibc considers "standard streams" special? e.g. stdbuf only works on fds 0, 1, 2 and I have no idea why.
[10:57:09] <ormaaj2> but I don't think it's just an arbitrary limitation it seems to be something glibc does
[10:59:01] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[10:59:11] <jmcantrell> for example, `btrfs subvolume delete ...` outputs its message to stdout, but i would consider a message like "hey user, i'm deleting this subvolume" to be diagnostic
[10:59:38] *** Quits: qub411 (~user@203.221.155.223) (Quit: WeeChat 3.2)
[11:00:07] *** Quits: son0p (~ff@181.136.122.143) (Ping timeout: 244 seconds)
[11:00:34] *** Quits: lq (~lq@116.228.78.179) (Remote host closed the connection)
[11:01:08] *** Joins: lq (~lq@210.72.8.214)
[11:01:59] *** Quits: lq (~lq@210.72.8.214) (Remote host closed the connection)
[11:02:03] <ormaaj2> Jeremy Cantrell: For utilities that don't normally do any I/O on fds that they don't create for their own internal use, it's somewhat arbitrary.   btrfs doesn't read input and its only output is only ever informational.
[11:02:26] *** Joins: lq (~lq@210.72.8.214)
[11:02:53] <jmcantrell> that makes sense
[11:03:18] <ormaaj2> you still might keep the informational output on stdout and leave stderr for errors generated by various libraries.
[11:04:29] *** Quits: lq (~lq@210.72.8.214) (Remote host closed the connection)
[11:04:59] *** Joins: lq (~lq@210.72.8.204)
[11:08:19] *** Quits: Bhavuk (~BTaneja@122.173.30.136) (Ping timeout: 252 seconds)
[11:08:53] *** Joins: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com)
[11:09:06] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[11:10:22] *** Joins: lq820105 (~lq@180.167.42.3)
[11:11:19] <ormaaj2> maybe a better way to put it is "if you asked for the output, it goes to stdout, not stderr". If printing the output is the primary normal function  then it doesn't go to stderr. Occasionally a utility takes an fd number as an argument and sometimes people just use fd 2 because it's "available" and that can be misleading.
[11:12:26] *** Quits: lq (~lq@210.72.8.204) (Read error: Connection reset by peer)
[11:13:58] *** Joins: sublim20 (~sublim20@user/sublim20)
[11:15:59] *** Joins: tobybl (~tobybl@189.192.115.87.dyn.plus.net)
[11:16:28] <jmcantrell> What if an action was asked for, it has an informational message, and returns data?
[11:16:35] *** Joins: furrymcgee (~devuan@31.179.186.66)
[11:20:52] <ormaaj2> You hope it's implemented as a builtin so it can write to shell variables directly :) but in lieu of that sometimes they'll abuse stderr for the info output even if it might also be used to print errors, otherwise output will be to a file or through some other channel (socket, etc). Taking an  explicit fd like I mentioned is possible but rarely used. Mostly builtins do that. like `read -u`.
[11:22:10] <jmcantrell> ormaaj: what do you mean by "implemented as a builtin"?
[11:23:21] <ormaaj2> builtins are the faux utilities that run within the shell. e.g. exec, read, typeset
[11:23:46] *** Joins: mei (~mei@user/mei)
[11:23:59] <ormaaj2> # printf -v x %s 'some data'; typeset -p x
[11:24:00] <shbot> ormaaj2: declare -- x="some data"
[11:24:35] <ormaaj2> printf wrote directly to x because it's builtin.
[11:25:26] <jmcantrell> yeah, i get that. i thought you were saying that a thing could be created such that it would act as if it were a builtin
[11:25:38] <ormaaj2> it can
[11:26:14] <jmcantrell> oh, you mean like e.g. taking a var name as an argument
[11:26:15] <ormaaj2> !loadable
[11:26:15] <greybot> http://mywiki.wooledge.org/BashLoadableBuiltins
[11:26:39] <ormaaj2> yes
[11:26:47] <jmcantrell> oh interesting. thanks for that
[11:27:44] <ormaaj2> bash doesn't have a fantastic public API so they're not super common.
[11:28:16] <jmcantrell> noted. i'm surprised it exists at all
[11:28:42] *** Joins: TomyWork (~TomyLobo@p200300e80f06af006803dcffbc1f0b6e.dip0.t-ipconnect.de)
[11:29:21] *** Joins: frostwork (~frostwork@user/frostwork)
[11:33:50] *** Joins: wwilly (~wwilly@2a01:cb10:171:3a00:d2e:8faf:a535:2629)
[11:34:00] *** Joins: nergar (~Nergar@177.225.152.16)
[11:34:37] *** Joins: aakashi2001 (~aakashi20@user/aakashi2001)
[11:35:29] *** Joins: sandb0y (pirate@user/sandb0y)
[11:36:25] *** Quits: fch (~myname87@mob-5-90-227-40.net.vodafone.it) (Ping timeout: 252 seconds)
[11:41:07] *** Quits: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de) (Quit: ZNC - https://znc.in)
[11:41:49] *** Joins: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de)
[11:41:52] *** Quits: aakashi2001 (~aakashi20@user/aakashi2001) (Ping timeout: 252 seconds)
[11:47:07] *** Joins: lavaball (felix@31.204.155.215)
[11:49:12] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 244 seconds)
[11:55:04] *** Quits: kill (~killown@user/killown) (Ping timeout: 252 seconds)
[11:55:53] *** Joins: Jenmin (~Jenmin@183.199.203.144)
[12:10:21] *** Joins: fch (~myname87@mob-5-90-227-40.net.vodafone.it)
[12:11:02] *** Joins: rendar (~rendar@user/rendar)
[12:15:53] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[12:18:30] *** Quits: fch (~myname87@mob-5-90-227-40.net.vodafone.it) (Quit: Leaving)
[12:18:30] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Client closed)
[12:21:05] *** Joins: shad (~shad@user/shad)
[12:21:06] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[12:22:04] *** Quits: lq820105 (~lq@180.167.42.3) (Remote host closed the connection)
[12:22:23] *** Joins: lq820105 (~lq@210.72.8.204)
[12:29:20] *** Quits: unixcat64 (hyperreal@envs.net) (Quit: the lounge - https://webirc.envs.net)
[12:29:36] *** Joins: unixcat64 (hyperreal@envs.net)
[12:31:05] *** Joins: Mo (~Mo@dynamic-077-008-019-107.77.8.pool.telefonica.de)
[12:32:51] *** Joins: dsrt^ (~dsrt@wsip-98-188-244-188.mc.at.cox.net)
[12:33:16] <pj> alternatively you can design a utility that has output on stderr that is designed to be eval-ed.  eval "$(mycommand)" is acceptible if mycommand outputs proper bash code.
[12:36:29] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[12:36:59] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Remote host closed the connection)
[12:37:17] *** Joins: karakedi (~eAC53C340@user/karakedi)
[12:37:27] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[12:37:39] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[12:37:57] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[12:39:20] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[12:41:10] <furrymcgee> set is fine to store values
[12:41:42] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[12:44:01] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Client Quit)
[12:44:56] *** Joins: TastyWiener95 (~uhhh3@user/tastywiener95)
[12:45:10] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 252 seconds)
[12:45:28] <rando25892> yea i learn set yesterday 
[12:45:37] *** Joins: earnestly (~earnest@user/earnestly)
[12:48:52] *** Camus_ is now known as Camusensei
[12:49:08] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[12:53:01] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[12:54:05] *** Joins: legola (~legola@46.235.100.27)
[12:54:31] *** Quits: mags (~mags@097-090-237-145.res.spectrum.com) (Ping timeout: 252 seconds)
[12:56:05] *** Joins: drd (~drd@93-39-151-19.ip76.fastwebnet.it)
[13:00:05] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[13:01:37] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[13:03:49] *** Quits: Logg (~Logg@76.72.182.181) (Remote host closed the connection)
[13:03:56] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[13:03:56] *** Joins: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e)
[13:04:11] *** Joins: Logg (~Logg@76.72.182.181)
[13:05:37] *** Joins: nobody_ (~nobody@host-79-24-179-239.retail.telecomitalia.it)
[13:07:36] <ormaaj2> !learn ctypes.sh A bash loadable for libffi interfacing. Provides builtins for introspecting and manipulating foreign datastructures. https://github.com/taviso/ctypes.sh
[13:07:36] <greybot> OK, ormaaj2
[13:09:05] <earnestly> ormaaj2: Which factoid of yours used something like [1=2] in a [ statement that used file globbing to do true/false or something like that
[13:10:47] <ormaaj2> earnestly: Yeah I couldn't think of which one that would be.
[13:11:10] <ormaaj2> !ormaajtest
[13:11:10] <greybot> 42# [ <& $[ ] [ = [ && echo ha
[13:11:12] <shbot> greybot: ha
[13:11:13] <earnestly> I remember it looking fairly normal but abused the fact that globs inside [ ] work on files
[13:11:14] <ormaaj2> that one was just a bug.
[13:11:24] <ormaaj2> not globbing either
[13:12:02] <earnestly> It did create files
[13:13:44] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[13:14:15] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[13:14:52] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 252 seconds)
[13:15:47] <ormaaj> !forget ctags
[13:15:47] <greybot> OK, ormaaj
[13:16:31] *** Quits: stevenm (~stevenm@user/stevenm) (Ping timeout: 244 seconds)
[13:17:04] <ormaaj> !learn ctags The original intellisense. https://ctags.io/ http://ctags.sourceforge.net/
[13:17:04] <greybot> OK, ormaaj
[13:17:23] <earnestly> Heh, ormaaj factoids as unit tests in an irc channel
[13:17:34] <earnestly> Or regression tests
[13:17:59] <ormaaj> :)
[13:18:07] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[13:22:02] *** Joins: mozgalom (~mozgalom@ipnet-gw.157.157.97.111.simnet.is)
[13:22:08] *** Quits: steven_saus (~steven_sa@cpe-74-131-36-220.kya.res.rr.com) (Read error: Connection reset by peer)
[13:23:14] <emanuele6> !b21
[13:23:15] <greybot> If^H^HWhen the newbie's question is ambiguous, the proper interpretation will be whichever one makes the problem the hardest to solve.
[13:23:18] <emanuele6> !forget b21
[13:23:18] <greybot> OK, emanuele6
[13:23:45] <emanuele6> !learn b21When the newbie's question is ambiguous, the proper interpretation will be whichever one makes the problem the hardest to solve.
[13:23:45] <greybot> OK, emanuele6
[13:23:57] <emanuele6> !forget b21When
[13:23:57] <greybot> OK, emanuele6
[13:24:02] <emanuele6> !learn b21 When the newbie's question is ambiguous, the proper interpretation will be whichever one makes the problem the hardest to solve.
[13:24:02] <greybot> OK, emanuele6
[13:24:13] *** Quits: nergar (~Nergar@177.225.152.16) (Quit: Leaving)
[13:25:28] *** Quits: mozgalom (~mozgalom@ipnet-gw.157.157.97.111.simnet.is) (Read error: Connection reset by peer)
[13:25:37] <ormaaj> There are too many lame !b's created by non-greycats.
[13:25:50] *** Joins: stevenm__ (~stevenm@195.62.218.30)
[13:26:06] <emanuele6> this one was by a greycat though
[13:26:18] *** Joins: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is)
[13:26:35] <emanuele6> !metaurl b21
[13:26:35] <greybot> https://wooledge.org/~greybot/meta/b21
[13:26:47] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.2)
[13:27:56] *** Joins: steven_saus (~steven_sa@cpe-74-131-36-220.kya.res.rr.com)
[13:28:34] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Ping timeout: 252 seconds)
[13:30:51] *** Quits: nobody_ (~nobody@host-79-24-179-239.retail.telecomitalia.it) (Quit: Leaving)
[13:31:29] *** Joins: kill (~killown@user/killown)
[13:35:15] *** Joins: xx (~xx@user/xx)
[13:35:25] *** Joins: killown (~killown@user/killown)
[13:38:16] *** Quits: kill (~killown@user/killown) (Ping timeout: 256 seconds)
[13:38:28] *** Quits: lordrishav (~LordRisha@user/lordrishav) (Quit: WeeChat 2.8)
[13:41:08] <shailangsa> does anybody know if the arguments here "bash ../treble_experimentations/build-rom.sh android-8.1 lineage" are read by the shell script https://pastebin.com/1MXp1B25 ?
[13:41:09] <pasteban> Paste is available without ads on https://pastebin.com/raw/1MXp1B25
[13:41:09] *** stevenm__ is now known as stevenm
[13:41:14] *** Quits: stevenm (~stevenm@195.62.218.30) (Changing host)
[13:41:14] *** Joins: stevenm (~stevenm@user/stevenm)
[13:41:51] *** Joins: sazawal (~sazawal@122.162.80.16)
[13:42:30] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[13:43:18] <lopid> lines 12, 13, and 25
[13:44:14] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[13:44:29] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Changing host)
[13:44:29] *** Joins: stevenm_ (~stevenm@user/stevenm)
[13:44:31] *** Quits: stevenm (~stevenm@user/stevenm) (Killed (NickServ (GHOST command used by stevenm_)))
[13:44:33] *** stevenm_ is now known as stevenm
[13:51:09] *** Joins: maharg101 (~maharg101@savoy.force9.co.uk)
[13:56:40] *** Quits: stevenm (~stevenm@user/stevenm) (Ping timeout: 252 seconds)
[13:58:16] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 252 seconds)
[14:09:52] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Remote host closed the connection)
[14:12:11] *** Joins: elf_fortrez (~elf_fortr@adsl-64-237-239-250.prtc.net)
[14:14:41] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[14:15:00] *** b0nn is now known as rust
[14:15:11] *** rust is now known as b0nn
[14:16:05] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[14:16:16] *** Quits: illuminated (~quassel@107-133-152-77.lightspeed.okcbok.sbcglobal.net) (Remote host closed the connection)
[14:16:20] *** Joins: Atque (~Atque@user/atque)
[14:20:19] *** Quits: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e) (Ping timeout: 252 seconds)
[14:23:36] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[14:24:59] *** Quits: Mo (~Mo@dynamic-077-008-019-107.77.8.pool.telefonica.de) (Quit: Leaving)
[14:27:09] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Changing host)
[14:27:09] *** Joins: stevenm (~stevenm@user/stevenm)
[14:27:17] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[14:37:43] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[14:38:11] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[14:38:38] *** mozgalom is now known as bomb-on
[14:50:16] *** Joins: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e)
[14:54:22] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Ping timeout (120 seconds))
[14:54:34] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[15:00:02] *** Quits: ede (~ede@user/ede) (Remote host closed the connection)
[15:00:41] *** Joins: ede (~ede@user/ede)
[15:01:30] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[15:10:04] *** Quits: lordrishav (~LordRisha@user/lordrishav) (Quit: WeeChat 2.8)
[15:10:24] <Fernando-Basso> Bash man page spells "builtin". The opengroup spec spells it "built-in" under Shell Command Language. Any ideas why this difference in spelling exists in Bash's documentation?
[15:12:27] <djph> human preference for using the dash or not
[15:12:40] <lopid> you'll need the hyphen if the contraction isn't obvious
[15:12:51] <earnestly> Fernando-Basso: bash manual is just slightly incorrect
[15:13:06] <earnestly> It's not as formal as a spec
[15:13:51] <Fernando-Basso> OK. Thank you all.
[15:15:51] <earnestly> (The rules and logic of English grammar hasn't been taught for several decades leading many to conclude it has none)
[15:16:17] *** Quits: YHVH (~yhvh@2601:982:8300:8090:754d:7ef0:7033:d635) (Ping timeout: 250 seconds)
[15:16:31] <Fernando-Basso> :D
[15:16:39] <djph> earnestly: did it ever? :D
[15:16:46] <Fernando-Basso> Some people say the same about PHP and JavaScript.
[15:17:17] <earnestly> djph: Yes, and still does
[15:17:50] <emanuele6> the opengroup spec also defines a "built-in" named "builtin"
[15:17:55] <ede> "logic"?
[15:18:10] <ormaaj2> # type builtin
[15:18:11] <shbot> ormaaj2: builtin is a shell builtin
[15:18:15] <earnestly> djph: But the trinity hasn't been taught since the time of the medieval so expect the usual cliche of "hur dur, english has no logic"
[15:18:38] <djph> earnestly: wait, which trinity?
[15:18:52] <djph> earnestly: I don't need to go get vegetables, do I?
[15:18:58] <ormaaj2> k# whence -v builtin
[15:18:59] <shbot> ormaaj2: builtin is a shell builtin
[15:19:31] <earnestly> djph: Sorry, trivium
[15:20:12] <djph> ah
[15:21:03] <earnestly> emanuele6: One is introducing a noun and the other is giving it a name :p
[15:22:13] <earnestly> Let me find this excerpt from The Fish book (Expert C Programming) which used a story from alice in wonderland to demonstrate this beautifully
[15:23:12] <ormaaj2> i heard that book was kinda meh.
[15:23:23] <Fernando-Basso> emanuele6: Do you have the link where this builtin built-in command is defined?
[15:23:24] *** Joins: frostwork (~frostwork@user/frostwork)
[15:23:37] *** Quits: elf_fortrez (~elf_fortr@adsl-64-237-239-250.prtc.net) (Ping timeout: 256 seconds)
[15:23:42] <ormaaj2> maybe worth another look :)
[15:26:03] <emanuele6> Fernando-Basso: https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18
[15:26:10] <emanuele6> it does not actually define it
[15:26:59] <emanuele6> it just says that "builtin" is a "reserved word" and the result of using it is unexpected
[15:27:14] *** AndrewYu is now known as Andrew
[15:27:21] <emanuele6> s/expected/specified/
[15:27:42] <earnestly> emanuele6: https://0x0.st/-vaA.txt
[15:27:43] <Fernando-Basso> unspecified, you mean?
[15:28:02] <earnestly> emanuele6: I had to clean it up a bit since it's split over two pages and is in chm format
[15:28:38] <earnestly> ormaaj2: It's interesting insofar as it's written from the perspective of an old SunOS programmer and so is littered with lots of nice anecdotes about their time at microsun
[15:28:56] <earnestly> sunmicrosystems*
[15:29:02] *** Joins: YHVH (~yhvh@2601:982:8300:8090:b926:24a3:ed5e:cc61)
[15:29:25] *** Joins: illuminated (~quassel@107-133-152-77.lightspeed.okcbok.sbcglobal.net)
[15:29:51] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[15:30:36] *** Quits: tobybl (~tobybl@189.192.115.87.dyn.plus.net) (Remote host closed the connection)
[15:30:43] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[15:31:52] *** Joins: reset (~reset@user/reset)
[15:33:02] *** Quits: winstonsmith (~winstonsm@77.247.181.216) (Remote host closed the connection)
[15:33:19] *** Joins: winstonsmith (~winstonsm@109.201.152.176)
[15:33:41] *** Joins: besnn (~besnn@user/besnn)
[15:36:02] *** Joins: aakashi2001 (~aakashi20@103.61.255.36)
[15:36:02] *** Quits: aakashi2001 (~aakashi20@103.61.255.36) (Changing host)
[15:36:02] *** Joins: aakashi2001 (~aakashi20@user/aakashi2001)
[15:36:59] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[15:37:48] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[15:48:27] *** Joins: seninha (~seninha@user/seninha)
[15:57:41] *** Quits: aakashi2001 (~aakashi20@user/aakashi2001) (Remote host closed the connection)
[16:02:41] *** Joins: tobybl (~tobybl@189.192.115.87.dyn.plus.net)
[16:05:28] *** Quits: _daoistmonk (~daoistmon@113.90.179.18) (Ping timeout: 244 seconds)
[16:06:30] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Ping timeout: 244 seconds)
[16:06:54] *** Joins: speckz (~speckz@2600:1700:ce0:bf00:d0f8:7:895:4c4b)
[16:07:27] *** Joins: timj (~timj@user/timj)
[16:07:34] *** Quits: tobybl (~tobybl@189.192.115.87.dyn.plus.net) (Ping timeout: 252 seconds)
[16:09:08] *** Quits: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[16:14:33] *** Joins: tobybl (~tobybl@189.192.115.87.dyn.plus.net)
[16:15:05] *** Joins: shad (~shad@user/shad)
[16:15:10] *** Quits: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e) (Ping timeout: 240 seconds)
[16:18:56] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[16:21:14] *** Joins: xiao (~xiao@37.170.156.128)
[16:27:04] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[16:28:24] *** Joins: zoe (~zoe@fsf/member/zoe)
[16:28:58] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 252 seconds)
[16:29:21] *** Quits: chia (sid510567@id-510567.tinside.irccloud.com) ()
[16:29:23] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[16:29:44] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[16:31:13] *** Quits: lordrishav (~LordRisha@user/lordrishav) (Quit: WeeChat 2.8)
[16:31:48] *** Joins: Crescendo (~Crescendo@user/crescendo)
[16:32:16] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng31-58c384-213.dhcp.inet.fi)
[16:32:19] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Ping timeout: 252 seconds)
[16:36:17] *** Joins: daoistmonk (~daoistmon@113.90.179.18)
[16:36:44] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:18af:174e:6509:72c0)
[16:36:44] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:18af:174e:6509:72c0) (Changing host)
[16:36:44] *** Joins: skapata (~Skapata@user/skapata)
[16:37:31] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[16:38:14] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[16:38:50] *** Joins: euouae (~euouae@user/euouae)
[16:39:28] *** Joins: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0)
[16:40:38] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[16:43:31] *** Quits: JanC (~janc@user/janc) (Read error: Connection reset by peer)
[16:43:40] <ormaaj> I think the bash manuaAbout the manual... l think it began life as a copy of the ksh manual. Everything is in the same order and a few sections are copied verbatim. Probably the ksh manual has been evolving since before POSIX was a thing.
[16:43:52] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 252 seconds)
[16:44:13] *** Joins: luva6 (~luva@178.239.173.201)
[16:44:14] <ormaaj> heh ignore first part of sentence
[16:46:40] *** Joins: lousiF (~lousiF@user/lousif)
[16:46:52] *** Joins: JanC (~janc@user/janc)
[16:47:07] *** Quits: luva (~luva@178.239.173.201) (Ping timeout: 252 seconds)
[16:47:07] *** luva6 is now known as luva
[16:50:59] *** Joins: quercus (sid510567@id-510567.tinside.irccloud.com)
[16:51:10] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 240 seconds)
[16:52:07] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 245 seconds)
[16:52:40] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Ping timeout: 240 seconds)
[16:53:29] *** Quits: quercus (sid510567@id-510567.tinside.irccloud.com) (Client Quit)
[16:55:16] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[16:56:02] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Client closed)
[16:56:31] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[16:58:37] *** Joins: luva3 (~luva@178.239.167.169)
[16:58:40] *** Quits: luva (~luva@178.239.173.201) (Ping timeout: 252 seconds)
[16:58:40] *** luva3 is now known as luva
[17:01:12] *** Joins: graudre (~graudre@2607:fea8:560:7f20:6095:b4a5:1340:80b1)
[17:01:24] *** Quits: kj (~kj@kj.aerisnetwork.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:01:49] *** Quits: Blackpajamas (~Blackpaja@24-246-42-203.cable.teksavvy.com) (Quit: Blackpajamas)
[17:02:49] *** Joins: lazypwny[m] (~lazypwnyk@2001:470:69fc:105::e81e)
[17:03:01] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Quit: leaving)
[17:03:05] *** Joins: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0)
[17:04:46] *** Quits: daoistmonk (~daoistmon@113.90.179.18) (Ping timeout: 252 seconds)
[17:05:53] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[17:06:07] <Fernando-Basso> Interesting.
[17:08:04] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Ping timeout: 252 seconds)
[17:08:07] *** Joins: daoistmonk (~daoistmon@113.90.179.18)
[17:09:40] *** Quits: useretail (~useretail@185.132.19.151) (Read error: Connection reset by peer)
[17:10:28] *** Quits: daoistmonk (~daoistmon@113.90.179.18) (Max SendQ exceeded)
[17:10:47] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:10:56] *** Joins: daoistmonk (~daoistmon@113.90.179.18)
[17:15:48] *** Quits: speckz (~speckz@2600:1700:ce0:bf00:d0f8:7:895:4c4b) (Quit: Textual IRC Client: www.textualapp.com)
[17:17:27] *** Joins: humky (~humky@user/humky)
[17:22:20] *** Quits: legola (~legola@46.235.100.27) (Remote host closed the connection)
[17:23:24] *** Joins: legola (~legola@46.235.100.27)
[17:26:30] *** Joins: useretail (~useretail@185.132.19.151)
[17:27:12] *** Joins: _daoistmonk (~daoistmon@113.90.179.18)
[17:27:43] *** Joins: Philonous (~Philonous@user/philonous)
[17:27:57] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Quit: leaving)
[17:28:20] *** Quits: legola (~legola@46.235.100.27) (Ping timeout: 256 seconds)
[17:28:21] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[17:28:51] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[17:29:41] *** Quits: daoistmonk (~daoistmon@113.90.179.18) (Ping timeout: 244 seconds)
[17:29:49] *** Joins: legola (~legola@46.235.100.27)
[17:31:35] <earnestly> ksh really was the future that could have been
[17:31:53] <earnestly> It seems to do so many things right, by and large
[17:33:02] *** Joins: ravan (~ravan@42.201.198.151)
[17:33:42] *** Joins: aramtsamtsam (~Thunderbi@2001:861:388a:5600:a00:5cff:ee34:76b)
[17:33:47] *** Quits: lousiF (~lousiF@user/lousif) (Quit: Leaving)
[17:33:58] *** Joins: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0)
[17:35:10] *** Quits: drd (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 240 seconds)
[17:37:02] <phy1729> You don't want glob quals?
[17:38:38] <ormaaj> The various versions / forks developed since 2014 are all missing a lot of features
[17:42:40] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Ping timeout: 240 seconds)
[17:42:57] *** Joins: KateLibby (~Rae@user/katelibby)
[17:43:06] <KateLibby> hi
[17:43:13] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[17:43:56] *** Joins: Afroboy (~afroboy@105.235.135.234)
[17:44:41] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[17:44:49] <KateLibby> has anyone ever seen du -ch not giving the correct output? Like if im in /dir1/ and i type du -ch it shows all the folder sizes of the subdirs, but if i go into one of those and du -ch, its a lot bigger than it was in the ../ one?
[17:45:24] *** Joins: earendel (uid498179@user/earendel)
[17:45:58] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 252 seconds)
[17:49:59] *** Joins: besnn (~besnn@user/besnn)
[17:50:45] *** Quits: caterfxo (~caterfxo@user/tangy) (Remote host closed the connection)
[17:51:52] <ormaaj> https://gist.github.com/ormaaj/3d296c4dc865f2a58554c438ce27da32
[17:54:35] *** Quits: somlis (~somlis@user/somlis) (Read error: Connection reset by peer)
[17:55:22] *** Quits: ravan (~ravan@42.201.198.151) (Changing host)
[17:55:22] *** Joins: ravan (~ravan@user/ravan)
[17:56:25] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[17:58:24] *** Quits: _daoistmonk (~daoistmon@113.90.179.18) (Remote host closed the connection)
[17:58:40] *** Quits: aramtsamtsam (~Thunderbi@2001:861:388a:5600:a00:5cff:ee34:76b) (Ping timeout: 252 seconds)
[17:58:42] *** Joins: daoistmonk (~daoistmon@113.90.179.18)
[18:03:59] *** Quits: koolazer (~koo@user/koolazer) (Ping timeout: 250 seconds)
[18:04:24] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 276 seconds)
[18:05:00] *** Joins: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[18:05:11] *** Joins: chia (sid510567@id-510567.tinside.irccloud.com)
[18:05:35] *** Joins: frostwork (~frostwork@user/frostwork)
[18:05:59] *** Quits: euouae (~euouae@user/euouae) (Quit: euouae)
[18:07:19] *** Joins: kj (~kj@beta.aerisnetwork.net)
[18:08:32] *** Joins: wstrnr (~wstrnr@user/wstrnr)
[18:09:14] *** Joins: gnoo (~gnoo@user/gnoo)
[18:09:15] *** Joins: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0)
[18:09:37] *** Joins: tech_exorcist_ (~tech_exor@user/tech-exorcist/x-0447479)
[18:09:49] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Remote host closed the connection)
[18:11:01] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Ping timeout: 244 seconds)
[18:11:01] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[18:12:28] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[18:12:49] <Patsie> KateLibby: different filesystems mounted on the folder you are entering?
[18:13:42] *** Quits: kurahaupo (~kurahaupo@58.84.89.180) (Ping timeout: 252 seconds)
[18:15:23] *** Joins: Blackpajamas (~Blackpaja@167.167.46.2)
[18:15:57] *** Joins: blingrang_ (~blingrang@user/blingrang)
[18:17:23] *** Quits: blingrang_ (~blingrang@user/blingrang) (Client Quit)
[18:18:24] *** Quits: Weather7774 (~Weather77@124-170-121-245.dyn.iinet.net.au) (Read error: Connection reset by peer)
[18:18:28] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Ping timeout: 252 seconds)
[18:23:31] *** Joins: darkxploit (~jay@32.209.19.50)
[18:24:19] <KateLibby> Patsie, no, same drive, and its not mounted on a network or anything, its physical hdd in the machine
[18:24:21] <ormaaj> findmnt --tree /dir1
[18:24:51] *** Joins: meator (~meator@user/meator)
[18:25:02] <ormaaj> you may still have bind mounts and such. don't know how du deals with those. 
[18:26:04] *** Joins: ChmEarl (~chmearl@user/chmearl)
[18:26:08] <KateLibby> https://i.imgur.com/3C5kmFX.jpg
[18:26:13] <Patsie> (bind)mounts, permission issues, using weird/wrong/incoonsistent globbinb, so many things which can be wrong, without actually seeing what you're doing
[18:26:27] <Patsie> * -> globbinb issue
[18:26:30] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[18:26:30] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[18:26:35] <Patsie> is't missing any .hidden folders
[18:27:29] <KateLibby> you see, the first du is showing that monthly folder as 84gb, but when i cd into it, and du again, im seeing 3 folders of 40+ gb, and thats 131gb
[18:27:54] <KateLibby> and there are no hidden folders, and its just tar.gz files in the sub dirs in monthly
[18:28:14] <KateLibby> and no symlinks
[18:28:29] *** Quits: tech_exorcist_ (~tech_exor@user/tech-exorcist/x-0447479) (Quit: Goodbye)
[18:28:35] <ormaaj2> does it happen to be btrfs
[18:28:47] <KateLibby> and its not really a problem, there is free space, i just dont understand?
[18:28:50] <Patsie> can you show the output of: `df -Ph .` in both folders
[18:28:52] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[18:29:04] <Patsie> yeah, could be snapshots
[18:29:16] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Remote host closed the connection)
[18:30:50] <KateLibby> i'll try
[18:31:01] <ormaaj2> btrfs fi df -h
[18:31:30] <ormaaj2> s/df/du
[18:31:36] <KateLibby> /dev/mapper/vg_cpanel_backups-lv_cpanel_backups  493G  362G  106G  78% /backup
[18:31:47] <KateLibby> thats what df -Ph tells me, 
[18:31:56] <Patsie> for _both_ folders?
[18:32:00] <CrtxReavr> Tell me again why I should never use echo in a shell script?
[18:32:08] *** Quits: stevenm (~stevenm@user/stevenm) (Read error: Connection reset by peer)
[18:32:10] <Patsie> !echo
[18:32:10] <greybot> echo outputs a string. echo has many portability problems, and should never be used with option flags. Consider printf instead: printf 'name: %s\n' "$name". http://wiki.bash-hackers.org/commands/builtin/echo | http://cfajohnson.com/shell/cus-faq.html#Q0b | http://www.in-ulm.de/~mascheck/various/echo+printf
[18:32:11] <KateLibby> yes
[18:32:17] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[18:32:39] <ormaaj2> CrtxReavr: who said never? you can use echo...
[18:32:44] <Patsie> looks like LVM, so maybe some LVM snapshotting
[18:33:13] <Patsie> anywah, not a bash issue
[18:33:24] <KateLibby> yeah, its weird, its confusing, and its not a problem, its just something i have never seen before
[18:33:38] <Patsie> could be a 1001 things
[18:34:16] <KateLibby> yeah, i just thought someone might know, cause, i want to know, its going to bug me now
[18:34:40] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 240 seconds)
[18:34:58] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 252 seconds)
[18:35:18] <KateLibby> i even tested with my du, i sshfs mounted that dir on my local machine and then when i du, i get the right numbers
[18:37:10] <Soliton> do the backups use hard links or some deduplication?
[18:37:12] <CrtxReavr> This maybe a large volume with a shit-ton of small files, taking up more room than they should?
[18:37:35] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[18:37:49] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[18:37:56] <KateLibby> no, i checked the df -i, its using 1% and on that mount, its just bunches of tgz files, about 500 or so, 
[18:38:36] *** Joins: besnn (~besnn@user/besnn)
[18:38:44] <ormaaj> sshfs is quite weird. I wouldn't trust it to be a very faithful representation of the same thing mounted locally or over nfs or nbd
[18:39:56] <KateLibby> yes, but i did that just to test, then the monthly folder says its 131gb, 
[18:40:01] <ormaaj> it's a hackish fuse wrapper around the sftp protocol.
[18:40:51] <KateLibby> yeah, i was just using my du to see what i get, just out of interest sake, 
[18:41:08] <Soliton> presumably because sshfs has no clue about the deduplication or whatever is going on.
[18:41:42] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[18:41:45] <KateLibby> and this isn't a problem, its not bad or broken, its just something i noticed and it confused me, and i kind of want to know why, 
[18:41:55] <KateLibby> yes, thats what i figured
[18:42:24] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Read error: Connection reset by peer)
[18:42:25] <KateLibby> like the lvm or something is counting files differently somehow
[18:42:26] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[18:42:39] <ormaaj> just noticed yesterday kdeconnect's sshfs thing doesn't even expose dotfiles. And there's no options for adjusting sshfs parameters. useless.
[18:44:35] *** Joins: Everything (~Everythin@37.115.210.35)
[18:46:20] <ormaaj> still a better than average CLI for a kde app though.
[18:46:30] *** Joins: aramtsamtsam (~Thunderbi@94.239.102.102)
[18:47:34] *** Joins: drd (~drd@93-39-151-19.ip76.fastwebnet.it)
[18:51:50] *** Quits: sinaowolabi__ (~SinaOwola@160.152.31.71) (Ping timeout: 244 seconds)
[18:51:55] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[18:52:21] *** Quits: vysn (~vysn@user/vysn) (Quit: WeeChat 3.2)
[18:55:07] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 240 seconds)
[18:55:20] <KateLibby> well, thank you for listening to my ramblings and trying to help. Im still confused :(
[18:55:27] *** Quits: TastyWiener95 (~uhhh3@user/tastywiener95) (Ping timeout: 245 seconds)
[18:55:27] *** Quits: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Ping timeout: 244 seconds)
[18:55:33] *** Joins: Inhonion (~uhhh3@user/tastywiener95)
[18:55:38] <earnestly> ormaaj: It is strange because they will leave out these things but then spend quite a lot of time adding them back.  So eventually it might be more useful but only once someone has added the support
[18:55:51] <earnestly> It's strange because I would expect things like that to be there from the start
[18:56:05] <earnestly> E.g. kio only recently gained support for xattrs
[18:56:21] <earnestly> So that copying files via kio didn't lose them
[18:57:11] *** Joins: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[18:57:38] *** Parts: KateLibby (~Rae@user/katelibby) (Leaving)
[18:59:43] *** Quits: aramtsamtsam (~Thunderbi@94.239.102.102) (Ping timeout: 252 seconds)
[19:01:23] *** Quits: ravan (~ravan@user/ravan) (Remote host closed the connection)
[19:01:47] *** Joins: ravan (~ravan@42.201.198.151)
[19:01:54] *** Quits: Inline_ (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431) (Quit: Leaving)
[19:03:47] *** Joins: vysn (~vysn@user/vysn)
[19:03:53] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[19:04:09] *** Joins: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com)
[19:04:30] *** Joins: sinaowolabi__ (~SinaOwola@102.134.114.1)
[19:04:41] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 248 seconds)
[19:06:10] *** Joins: jetchisel (jetchisel@user/jetchisel)
[19:07:42] *** Quits: daoistmonk (~daoistmon@113.90.179.18) (Read error: Connection reset by peer)
[19:07:43] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[19:08:01] *** Joins: daoistmonk (~daoistmon@113.90.179.18)
[19:09:14] *** Joins: kurahaupo (~kurahaupo@58.84.89.180)
[19:09:38] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[19:10:04] <ormaaj2> "sshfs is great! because it's better than ftps."
[19:10:48] <ormaaj2> (they have 3 letters in common so must be practically the same though)
[19:12:08] <ormaaj2> s/sshfs/sftp/ for that to make sense
[19:12:25] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[19:13:28] *** Quits: Jenmin (~Jenmin@183.199.203.144) (Ping timeout: 252 seconds)
[19:14:03] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[19:14:26] <wstrnr> !ftp
[19:14:26] <greybot> http://mywiki.wooledge.org/FtpMustDie
[19:22:57] <xx> nabq but does anyone know how to disable that "Did you mean" section in shellcheck reports?
[19:24:43] <ormaaj2> has died https://www.feistyduck.com/bulletproof-tls-newsletter/issue_79_the_end_of_ftp_in_browsers
[19:26:28] *** Quits: Blackpajamas (~Blackpaja@167.167.46.2) (Remote host closed the connection)
[19:27:06] *** Joins: polve (~polve@twcitalia/polve)
[19:27:07] *** Quits: ravan (~ravan@42.201.198.151) (Quit: Leaving)
[19:27:07] *** Joins: Blackpajamas (~Blackpaja@167.167.46.2)
[19:27:54] *** Joins: aramtsamtsam (~Thunderbi@94.239.102.102)
[19:27:56] *** Quits: Blackpajamas (~Blackpaja@167.167.46.2) (Remote host closed the connection)
[19:28:40] *** Joins: Blackpajamas (~Blackpaja@167.167.46.2)
[19:29:58] <polve> Hi.  I'd like to write a list to a file and then `while read line; do ... ; done <list.txt`
[19:30:28] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Quit: Konversation terminated!)
[19:30:32] <polve> Problem is this prevents me from using STDIN within that block.  What is a better way?
[19:30:36] <Soliton> where does the list come from? why not use an array?
[19:30:47] <Soliton> !faq ffmpeg
[19:30:47] <greybot> https://mywiki.wooledge.org/BashFAQ/089 -- I'm reading a file line by line and running ssh or ffmpeg, only the first line gets processed!
[19:31:46] *** Joins: carlos (~pum@user/carlos)
[19:32:39] *** Quits: aramtsamtsam (~Thunderbi@94.239.102.102) (Ping timeout: 244 seconds)
[19:32:59] *** Joins: fuzzybear3965 (~fuzzybear@37.57.0.215)
[19:33:58] <fuzzybear3965> I'm trying to do something like NEWVAR=$(jq '<operations>' <<< "${VAR}")
[19:34:40] *** Joins: ayusta (Thunderbir@gateway/vpn/protonvpn/ayustae)
[19:34:48] <polve> Soliton: thank you.  In this case the list comes from another command.  If I do `for i in $(multiline_output_generating_cmd || exit 1); do ...; done`, will my script exit if commant fails, or will only the sub-shell exit with my script going on?
[19:34:55] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 252 seconds)
[19:35:15] <Soliton> !drlwf
[19:35:15] <greybot> https://mywiki.wooledge.org/DontReadLinesWithFor ... "for" is for iterating arguments/arrays, not strings. Never do: for x in $(cat file), or for x in $var; instead, use a glob (*.txt), an array ("${hosts[@]}") or a while-read loop. See also https://mywiki.wooledge.org/BashPitfalls#pf1
[19:35:50] <fuzzybear3965> But, that's not working and I'm pretty sure it's because of the HEREDOC (or what it should be call).
[19:35:51] <Soliton> mapfile -t array < <(multiline_output_generating_cmd); wait "$!" || exit
[19:36:01] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Ping timeout: 252 seconds)
[19:36:01] *** ayusta is now known as ayustae
[19:36:17] <Soliton> fuzzybear3965: sounds like bad design but it works anyway.
[19:36:26] *** Joins: killall (~killown@user/killown)
[19:36:41] <polve> Soliton: that's something I haven't seen before.  I'll give it a try, thank you!
[19:37:32] <Soliton> # var=$(jq -r '.[2]' <<< '[ "foo", "bar", 42 ]'); declare -p var
[19:37:34] <shbot> Soliton: declare -- var="42"
[19:38:05] <fuzzybear3965> Soliton What's a bad design?
[19:38:10] *** Joins: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e)
[19:38:22] <Soliton> something that is designed in a bad way.
[19:38:51] *** Quits: killown (~killown@user/killown) (Ping timeout: 244 seconds)
[19:40:33] <fuzzybear3965> What's designed in a bad way?
[19:40:49] <fuzzybear3965> Definitely not NEWVAR=$(jq '<operations>' <<< "${VAR}") 
[19:41:02] <Soliton> ok.
[19:41:30] <twkm> as an aside, don't use all upper-case variable names for purely internal purposes.
[19:42:10] <fuzzybear3965> twkm why?
[19:42:33] <fuzzybear3965> Soliton Are you suggesting var=$(jq -r '.[2]' <<< '[ "foo", "bar", 42 ]'); declare -p var
[19:43:40] <fuzzybear3965> Aghhh.
[19:43:41] <fuzzybear3965> Fixed it.
[19:43:47] <Soliton> i'm suggesting it shows that that works. of course you have given no hint on what is not working for you or even what your goal is.
[19:43:49] <fuzzybear3965> It was ${FOO} not ${VAR}
[19:43:50] *** Quits: francis (francis@user/francis) (Quit: rb)
[19:43:55] <fuzzybear3965> I had the wrong variable name.
[19:43:59] <fuzzybear3965> Thanks Soliton
[19:44:42] <NRK[m]> special env vars typically use all caps
[19:44:48] <NRK[m]> like PWD for example
[19:44:58] <Soliton> !caps
[19:44:58] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[19:44:58] <fuzzybear3965> Ahhhh
[19:45:12] <fuzzybear3965> Totally makes sense.
[19:45:20] <Soliton> you probably should not have that variable at all but who knows.
[19:45:26] <fuzzybear3965> NRK[m] my variables are lower-cased in my code.
[19:45:44] <fuzzybear3965> Soliton that variable is created in a pretty complex way.
[19:45:57] <fuzzybear3965> It's actually this: # objects=$(jq '[ .values | .[] | select( (.key|contains("_key")) or (.key|contains("_token"))  or (.key|contains("_password")) or (.key|contains("_buid")) ) | (.key | ascii_upcase) as $key | { "key": "\($key)", "value": .value } ]' < "${file}")
[19:46:11] <fuzzybear3965> And, I want to the above with $objects
[19:46:48] *** Joins: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0)
[19:46:57] <fuzzybear3965> *to do the above
[19:46:57] <Soliton> and you're going to use objects multiple times?
[19:47:03] <fuzzybear3965> Actually, only one time.
[19:47:12] <fuzzybear3965> I just wanted to bundle it into something atomic for readability.
[19:47:13] <Soliton> so completely useless.
[19:47:18] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[19:47:34] <fuzzybear3965> From a memory perspective "yes, it's useless".
[19:47:44] <fuzzybear3965> But, it helps make the code more readable, it seems to me.
[19:47:46] <fuzzybear3965> What would you suggest?
[19:47:48] <Soliton> you can put the jq call in a function for readability.
[19:47:57] <fuzzybear3965> But, I only use the function once.
[19:48:15] *** Joins: LuksNuke (~LuksNuke@2001:7e8:c00d:2800:5632:a48d:a3f2:8471)
[19:48:49] *** Joins: francis (francis@user/francis)
[19:48:54] <Soliton> and it will not make the whole operation slower.
[19:49:09] <fuzzybear3965> Neither will putting it in a variable...
[19:49:17] <Soliton> unlike capturing output only to stream it again.
[19:49:27] <fuzzybear3965> Oh, I see what you mean.
[19:50:12] <fuzzybear3965> Something like special_string=$(jq '<do_jq_stuff>' <<< create_objects_func )
[19:50:26] <fuzzybear3965> Fair enough.
[19:50:38] *** Joins: MarderIII (~MarderIII@2001:985:e889:1:91dd:369e:8b04:c6be)
[19:50:40] <Soliton> no clue what that is.
[19:50:50] *** Joins: lordrishav (~LordRisha@user/lordrishav)
[19:50:56] <Soliton> but i don't understand why this isn't a single jq statement anyway.
[19:51:26] <fuzzybear3965> Because <do_jq_stuff> is as complex as the parent jq statement above.
[19:51:32] <Soliton> why do you want to pipe jq output to jq? why not do in one go?
[19:51:34] <fuzzybear3965> Hard to grok/dissect.
[19:51:40] *** Quits: drd (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 240 seconds)
[19:52:01] <Soliton> so write the jq code in multiple lines?
[19:52:43] <fuzzybear3965> Okay, I can do that with some # documentation for each line
[19:52:51] <Soliton> you can even define a function in jq.
[19:53:17] *** Quits: LuksNuke (~LuksNuke@2001:7e8:c00d:2800:5632:a48d:a3f2:8471) (Remote host closed the connection)
[19:54:21] <fuzzybear3965> Oh, how?
[19:55:54] *** Quits: mteo (francis@user/francis) (Quit: rb)
[19:55:57] <fuzzybear3965> Oh. From https://stedolan.github.io/jq/manual/#Advancedfeatures 
[19:56:04] <fuzzybear3965> "It is also possible to define functions in jq"
[19:56:28] <fuzzybear3965> Not sure if that would help/hurt readability... Haha
[19:56:47] *** Quits: lordrishav (~LordRisha@user/lordrishav) (Quit: WeeChat 2.8)
[19:57:11] *** Joins: mteo (francis@user/francis)
[19:57:51] <Soliton> up to you. might be enough to write it multiline with proper indentation.
[20:00:45] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[20:01:34] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[20:02:37] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 244 seconds)
[20:02:56] <fuzzybear3965> I'll opt for that. Thanks Soliton.
[20:05:33] *** Joins: aramtsamtsam (~Thunderbi@94.239.102.102)
[20:05:43] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 252 seconds)
[20:11:47] *** Quits: aramtsamtsam (~Thunderbi@94.239.102.102) (Ping timeout: 245 seconds)
[20:13:48] <dob1> in a bash script that will be run as root what is the recommended way to execute a command as another user ?
[20:14:29] <twkm> su is common.  but there are many alternatives.
[20:14:48] *** Quits: humky (~humky@user/humky) (Remote host closed the connection)
[20:15:07] *** Joins: humky (~humky@user/humky)
[20:17:50] <dob1> I don't understand the meaning of this  sudo -H -u otheruser bash -c 'echo "I am $USER, with uid $UID"'      why the bash -c ?
[20:20:49] <dob1> ah, sudo -u user whoami  gives me user   but sudo -u user echo "$USER"  gives me root.  it's related to this
[20:21:01] <osse> dob1: otherwise it just prints   udo: echo "I am $USER, with uid $UID": command not found
[20:21:32] *** Joins: goldfish (~goldfish@user/goldfish)
[20:21:33] <osse> dob1: no, in your latter example $USER is expanded before sudo runs
[20:21:35] <twkm> $USER in the second example was expanded by the current shell, before sudo ever ran.
[20:22:07] *** Joins: nik (~nik777@vpn-users-dip-pool164.dip.cf.ac.uk)
[20:22:14] <emanuele6> also it would not work because it is not using a shell
[20:22:41] <twkm> i guess responding that su is the usual way turned out pointless.
[20:23:01] *** Joins: aramtsamtsam (~Thunderbi@94.239.102.102)
[20:24:06] <dob1> it's ok I will use su, I was just testing a bit
[20:26:16] <twkm> then testing with sudo is a mistake since they don't work the same.
[20:26:47] <emanuele6> if you are doing this to drop privileges, you should consider using setpriv(1) (or similar) over su-like programs
[20:26:49] <emanuele6> !su
[20:26:49] <greybot> su (switch user) opens a new interactive session with new privileges. Usually to run some commands as root. Don't use this to drop privileges in scripts; try setpriv instead, if you have it. See <http://jdebp.info/FGA/dont-abuse-su-for-dropping-privileges.html>
[20:28:03] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[20:28:05] <twkm> changing uid was the question.
[20:28:27] <twkm> "execute a command as another user"
[20:28:42] *** Quits: tejr (~tejr@user/tejr) (Ping timeout: 276 seconds)
[20:29:16] <twkm> also interactive is misleading in that factoid since it can open a new non-interactive session as well.
[20:30:03] <emanuele6> twkm: there is setuidgid
[20:30:05] *** Joins: tejr (~tejr@user/tejr)
[20:30:11] <emanuele6> it is mentioned in the link
[20:30:53] *** Joins: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431)
[20:31:06] *** Quits: Afroboy (~afroboy@105.235.135.234) (Quit: Leaving)
[20:31:41] <twkm> sorry i bothered to write "in that factoid".
[20:31:57] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 276 seconds)
[20:32:34] <Soliton> dob1: note that you must use shell injection with su if variables are involved since it forces a shell on you but does not support giving it arguments.
[20:33:45] <emanuele6> i was referring to "changing uid was the question." :D
[20:33:59] <twkm> you must use injection with sudo too.
[20:34:03] <twkm> dob1's test did injection, apparently unknowingly.
[20:34:19] *** Quits: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e) (Ping timeout: 252 seconds)
[20:34:33] <Soliton> no need to use injection. no need to use a shell at all unless you want to.
[20:35:19] <twkm> for dob1's example you certainly wouldn't want injection, and hir test seems to have used injection accidentally.
[20:35:42] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[20:35:53] <Soliton> where is the injection?
[20:36:00] <dob1> I am reading the factoid doc you linked and it seems I am doing it wrong then
[20:36:02] *** Quits: tobybl (~tobybl@189.192.115.87.dyn.plus.net) (Remote host closed the connection)
[20:36:22] <twkm> otoh jdebp can be a loon.
[20:37:36] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[20:37:55] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[20:38:19] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[20:39:27] <twkm> as in injecting current data to use, instead of using data that post-sudo provides.
[20:40:15] <Soliton> ok, more useless word play.
[20:40:20] *** Joins: gnoo (~gnoo@user/gnoo)
[20:42:20] <twkm> all things are.
[20:42:55] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 244 seconds)
[20:43:51] <dob1> sorry if I waste your time but I am a bit confused now, I suppose I am for sure overcomplicating things. What I have to do is this: mount a partition and run a backup command (restic) as an normal user; as a normal user because the password file for the backup is in a gocrypfs dir of this user. The problem is the mount. I could allow the user to mount the dir in fstab but I prefer no
[20:44:25] <dob1> so I run the backup command as my target user and the main script as root
[20:44:31] <TomyWork> dob1, is that partition listed in /etc/fstab?
[20:44:36] <dob1> it is
[20:44:51] <TomyWork> does that entry have the mount option "user"?
[20:45:08] <dob1> this will allow any user to mount it,  I don't like this 
[20:45:11] *** Quits: Blackpajamas (~Blackpaja@167.167.46.2) (Quit: Blackpajamas)
[20:45:12] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[20:45:12] <TomyWork> ok
[20:45:41] <TomyWork> can't you mount it in a place that's inaccessible to anyone but the backup user?
[20:45:44] <Soliton> just tell gocrypfs where the password file is?
[20:46:38] <dob1> gocryptfs will mount the encrypted dir where the password file is, it will be inaccessible by root too
[20:46:55] <dob1> TomyWork, I can consider this too
[20:47:11] <TomyWork> that would be easier than fiddling with su :)
[20:47:40] <Soliton> so this gocrypfs thing only works for this user?
[20:48:45] <dob1> Soliton, its mountpoint will be accessible only by the user
[20:52:44] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 244 seconds)
[20:54:53] *** Quits: aramtsamtsam (~Thunderbi@94.239.102.102) (Quit: aramtsamtsam)
[20:59:39] *** Joins: smlavine (~smlavine@sourcehut/user/smlavine)
[20:59:57] *** Joins: keir (~keir@user/keir)
[21:00:18] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:02:09] *** Quits: laris (undead@37.221.209.36) (Ping timeout: 276 seconds)
[21:03:03] *** Quits: fuzzybear3965 (~fuzzybear@37.57.0.215) (Quit: Client closed)
[21:04:01] *** Joins: laris (undead@37.221.209.36)
[21:07:23] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:07:48] <jmcantrell> If I have an array of items, is the best way to get the completion choices: `compgen -W "${array[*]}" -- "$cur"`?
[21:08:28] *** Joins: ravan (~ravan@user/ravan)
[21:11:33] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[21:14:30] *** Quits: earendel (uid498179@user/earendel) (Quit: Connection closed for inactivity)
[21:15:01] *** Joins: porn (~hentai@2a01:e0a:a5c:a070:6f38:c445:ff3c:8e97)
[21:15:01] *** Quits: porn (~hentai@2a01:e0a:a5c:a070:6f38:c445:ff3c:8e97) (Changing host)
[21:15:01] *** Joins: porn (~hentai@user/hentai)
[21:16:51] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[21:17:55] *** Joins: absc (~absc@dynamic-adsl-94-34-168-146.clienti.tiscali.it)
[21:18:31] *** Quits: Zucca (~Zucca@user/zucca) (Remote host closed the connection)
[21:18:47] *** Quits: hentai (~hentai@user/hentai) (Ping timeout: 240 seconds)
[21:19:36] *** Joins: Zucca (~Zucca@user/zucca)
[21:20:38] *** Joins: Kruppt (~Kruppt@50.111.20.14)
[21:21:05] *** Quits: A_Dragon (A_D@doom-tower.awesome-dragon.science) (Changing host)
[21:21:05] *** Joins: A_Dragon (A_D@libera/staff/dragon)
[21:21:20] *** Joins: YaoNai (~YaoNai@user/yaonai)
[21:21:40] *** Joins: alzgh (~alzgh@user/alzgh)
[21:24:37] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 245 seconds)
[21:27:46] *** Quits: absc (~absc@dynamic-adsl-94-34-168-146.clienti.tiscali.it) (Quit: Leaving.)
[21:30:11] *** Quits: wolfgang (~wolfgang@101.174.6.197) (Remote host closed the connection)
[21:30:40] *** Quits: alzgh (~alzgh@user/alzgh) (Quit: WeeChat 2.8)
[21:30:45] *** Quits: bomb-on (~mozgalom@IPnet-gw.157.157.97.111.simnet.is) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:30:58] *** Quits: bn_work (uid268505@id-268505.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[21:31:00] *** Joins: alzgh (~alzgh@user/alzgh)
[21:31:22] *** Joins: Betal (~Betal@user/betal)
[21:31:36] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Remote host closed the connection)
[21:31:45] *** A_Dragon is now known as ad
[21:31:45] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[21:31:54] *** ad is now known as A_Dragon
[21:32:06] *** A_Dragon is now known as A_D
[21:32:41] *** A_D is now known as ad
[21:32:49] *** ad is now known as A_Dragon
[21:34:12] *** Joins: GNUHacker (~gnu@fsf/member/GNUHacker)
[21:34:41] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[21:36:51] *** Joins: mago (~mago@93.176.175.73)
[21:37:55] *** Quits: TomyWork (~TomyLobo@p200300e80f06af006803dcffbc1f0b6e.dip0.t-ipconnect.de) (Remote host closed the connection)
[21:38:56] *** Joins: Yssk (~Yssk@newt-41-b2-v4wan-162231-cust52.vm11.cable.virginm.net)
[21:39:18] *** Quits: GNUHacker (~gnu@fsf/member/GNUHacker) (Remote host closed the connection)
[21:39:40] *** Joins: GNUHacker (~gnu@fsf/member/GNUHacker)
[21:40:21] <CrtxReavr> When I create functions, I like to start function names with an underscore to differentiate them from other commands. . . There any stylistic problems with that?
[21:40:30] *** Quits: Yssk (~Yssk@newt-41-b2-v4wan-162231-cust52.vm11.cable.virginm.net) (Client Quit)
[21:42:22] <lopid> subjective?
[21:44:26] *** Quits: meator (~meator@user/meator) (Quit: Leaving)
[21:44:27] <CrtxReavr> Absolutely.
[21:44:34] <CrtxReavr> Still looking for opinions.
[21:45:33] *** Joins: fedenix_ (~fedenix@gateway/tor-sasl/fedenix)
[21:45:46] *** Joins: Yssk (~Yssk@newt-41-b2-v4wan-162231-cust52.vm11.cable.virginm.net)
[21:45:46] *** Quits: Yssk (~Yssk@newt-41-b2-v4wan-162231-cust52.vm11.cable.virginm.net) (Client Quit)
[21:45:58] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[21:47:36] *** Quits: alzgh (~alzgh@user/alzgh) (Quit: WeeChat 2.8)
[21:48:15] <lopid> i don't see a problem. you mean interactive commands, right?
[21:49:08] *** Joins: alzgh (~alzgh@user/alzgh)
[21:49:35] <CrtxReavr> I mean like when the function is called within the script: ``_some_function``
[21:49:59] <CrtxReavr> It looks distinctively different from external programs being called by the script.
[21:50:00] <wstrnr> _ is a character that is hard to enter.  you have to press Shift, then press the _ key in outskirts of your keyboard.  you will get tired of this soon
[21:51:19] *** Joins: tobybl (~tobybl@189.192.115.87.dyn.plus.net)
[21:51:45] <wstrnr> also, in C it is a huge faux pas to make any name that starts with a underscore, because according to the standard, such naming scheme is reserved for standard language extensions, and is forbidden for ordinary programmers.  but that is about style of C programming, not really related to other programming languages
[21:53:06] *** Joins: besnn (~besnn@user/besnn)
[21:53:41] <CrtxReavr> In Python __important__ things frequently get named with double underscores (AKA "dunders") to tag them as distinctive.
[21:54:08] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 252 seconds)
[21:54:49] <CrtxReavr> Someone even printed up T-shirts with: __MIFFLIN__
[21:55:10] <wstrnr> bash scripts should not become so complex to gain need for use of a specific naming scheme for procedures.  if you cannot tolerate names made of ordinary words without of any special punctuation or marking, this is a sign that you are overcomplicating things
[21:55:15] *** Joins: greta (~androirc@vps-1946c2f8.vps.ovh.ca)
[21:56:48] <shush> Is there a less strict variant of `set -e`? I want for the shell to exit if a command exits with a code >0 but only if it wasn't "caught" or specifically apart of some other expression joined by an `||`. For example, if `curl $URL` fails, then we exit the shell, however if `curl $URL || echo "Failed. Retrying"` fails, then we don't exit.
[21:57:46] *** Quits: tobybl (~tobybl@189.192.115.87.dyn.plus.net) (Remote host closed the connection)
[21:58:03] <NRK[m]> i have a couple function in my .zshrc which aren't meant to be called directly, so i start them with _
[21:58:06] <wstrnr> with -e bash and sh will not terminate the script if a command fails in a chain of || or &&-separated commands
[21:58:07] *** Joins: magla (~gelignite@55d4b5be.access.ecotel.net)
[21:58:30] <NRK[m]> but i don't think it matters on a script.
[21:59:29] *** Quits: YaoNai (~YaoNai@user/yaonai) (Quit: leaving)
[21:59:37] <wstrnr> shush: so you can use -e with || and && and expect predictable results.  you can add "|| true" to the command you wish not to terminate the script
[22:01:13] <wstrnr> shush: inside the "condition statement" (the COMMANDS of   if COMMANDS; then ...) set -e has no effect at all.  you can   if ! curl ...; then  echo whatever;  fi   and your script will not be terminated
[22:01:27] *** Quits: roadie (~user@2a02:8108:ec0:1427:a87b:9dc9:85b8:6cc0) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[22:02:23] <wstrnr> shush: also,  curl ... || echo   will terminate with status of success, because echo terminates with 0, so your script running with -e should not die because of that
[22:03:37] * lopid spits out coffee, "someone's running a script with errexit?"
[22:04:39] <shush> https://privatebin.net/?a3fe90494230ae76#Cr6JJFV42QanRi5KV19rSQmnsy3XXfp7Tc4XyfR61TsW
[22:04:46] <shush> This is my script which
[22:04:59] <shush> This is the part of my script which fails 
[22:06:07] <wstrnr> good lord, "privatebin". this thing requires javascript to see!
[22:06:08] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Remote host closed the connection)
[22:06:09] <wstrnr> !paste
[22:06:09] <greybot> Paste short snippets (<= 5 lines) in channel. Paste more using http://paste.debian.net/ or http://paste.wooledge.org/ or see !ix or !sprunge. Please don't use pastebin.com -- it's full of ads and mangles whitespace. NEVER upload screen shots. Don't use a site that requires Javascript, or registration to view raw.
[22:06:12] <lopid> cmd ||:
[22:06:22] <emanuele6> shush: how does it fail?
[22:06:33] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[22:06:56] <emanuele6> i think you have a mistake in your logic
[22:07:03] <emanuele6> well
[22:07:32] <emanuele6> it is weird because `&& break' prevents the logic mistake
[22:07:38] <shush> Here's more surrounding code: https://privatebin.net/?f4fbdaa9ea9fdea5#4EodRQAqmSpBeRdpx5BuX45SZnbwXcR2jvGbqLHFQHui
[22:07:43] <emanuele6> but it surely is a weird way of writing it
[22:07:58] <wstrnr> shush: rewrite your && || && || as  if-commands-then-commands-else-commands-fi
[22:08:24] <shush> This is the syslogs: https://privatebin.net/?e182cc36ccfdc0d8#E9NkNuar1rF534c1yM6reZCBHjprBxQt8TtbFrcW34PX
[22:08:35] <wstrnr> !&&||
[22:08:35] <greybot> foo && bar || baz is not equivalent to 'if foo; then bar; else baz; fi'. In the former case, baz will happen if *either* foo *or* bar return false. In the latter case, baz will only trigger if foo returns false, regardless of the exit code for bar. See http://mywiki.wooledge.org/BashPitfalls
[22:08:39] <shush> I'll try the if commands
[22:09:18] <emanuele6> !quote > shush 
[22:09:18] <greybot> shush: https://mywiki.wooledge.org/Quotes
[22:09:44] <emanuele6> that is not really relevant, just a note
[22:09:46] <emanuele6> anyway
[22:09:49] <emanuele6> let is not posix
[22:09:52] *** Joins: Murray7501 (~Murray@89.109-247-180.customer.lyse.net)
[22:09:57] <lopid> it would be *much* easy to tell it to exit when and if desired, rather than to set errexit, handle all the edge cases, and *still* have it not exit in other desired cases
[22:09:59] <emanuele6> if you are using posix sh and not bash, you can't use that
[22:10:04] <lopid> easier
[22:10:22] <emanuele6> same deal for ((++tries))
[22:10:56] *** Quits: chia (sid510567@id-510567.tinside.irccloud.com) ()
[22:10:58] <shush> let and ((++tries)) aren't posix?
[22:11:16] <wstrnr> assignments of variables in (( )) are not POSIX
[22:11:20] <emanuele6> the are indeed not posix
[22:11:28] *** Joins: Shanzem (~Shanzem@86.31.109.147)
[22:11:34] <emanuele6> tries=$((tries + 1)) is posix
[22:11:37] <wstrnr> though tries=$((tries + 1))  will work in standard sh
[22:11:42] <emanuele6> and tries=0 is posix
[22:11:56] <emanuele6> but `let tries=0` and `((++tries))` are not posix
[22:12:26] <shush> So change `let tries=0` to `tries=0` and `((++tries))` to `tries=$((tries + 1))`
[22:12:50] <emanuele6> to make it valid code, yes
[22:13:42] <emanuele6> also, you should quote the $tries in [ $tries -lt 10 ]
[22:13:52] <emanuele6> [ "$tries" -lt 10 ]
[22:15:27] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[22:16:12] *** Quits: Shanzem (~Shanzem@86.31.109.147) (Ping timeout: 256 seconds)
[22:17:02] <NRK[m]> is the `||` even needed? since there's a break
[22:17:27] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[22:17:34] <wstrnr> it's a weird pitfall-like use of && and ||
[22:17:35] <emanuele6> it is also weird because the final && is run also when the curl fails normally
[22:17:41] <emanuele6> but && break prevents it
[22:17:52] <emanuele6> that is why i thought there was a logic mistake initially
[22:18:00] <emanuele6> surely an esoteric way of writing it
[22:18:04] <emanuele6> very esoteric
[22:18:21] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[22:18:27] <wstrnr> !pf 22
[22:18:28] <greybot> https://mywiki.wooledge.org/BashPitfalls#pf22 -- Don't do this! -- cmd1 && cmd2 || cmd3
[22:18:32] <emanuele6> curl doesn't fail*
[22:18:55] <emanuele6> wstrnr: it is not a problem at all in his case, but i would rewrite it
[22:19:25] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[22:20:40] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[22:21:40] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Ping timeout: 240 seconds)
[22:22:09] *** Joins: keypusher (keypusher@user/keypusher)
[22:24:50] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[22:25:15] *** Joins: Shanzem (~Shanzem@86.31.109.147)
[22:25:39] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[22:26:59] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[22:28:46] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[22:29:49] *** Quits: Shanzem (~Shanzem@86.31.109.147) (Ping timeout: 252 seconds)
[22:31:57] *** Joins: keypusher (keypusher@user/keypusher)
[22:34:17] *** Quits: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com) (Ping timeout: 248 seconds)
[22:36:37] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[22:37:38] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[22:38:01] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[22:40:00] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[22:40:50] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[22:41:18] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 276 seconds)
[22:42:53] *** Quits: keir (~keir@user/keir) (Quit: keir)
[22:43:04] *** Joins: keir (~keir@user/keir)
[22:46:11] *** Joins: shimbles (~shimbles@209.201.38.106)
[22:46:18] *** Joins: fch (~myname87@mob-5-90-227-40.net.vodafone.it)
[22:46:54] *** Joins: zebrag (~chris@user/zebrag)
[22:47:39] *** Quits: fch (~myname87@mob-5-90-227-40.net.vodafone.it) (Remote host closed the connection)
[22:50:10] *** Quits: wstrnr (~wstrnr@user/wstrnr) (Ping timeout: 252 seconds)
[22:53:54] *** Parts: mago (~mago@93.176.175.73) ()
[22:54:09] *** Joins: somlis (~somlis@user/somlis)
[22:55:36] *** Quits: A_Dragon (A_D@libera/staff/dragon) (Quit: ZNC - https://znc.in)
[22:55:56] *** Joins: A_Dragon (A_D@libera/staff/dragon)
[22:57:37] *** Joins: akoana (~ah@user/akoana)
[22:58:45] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Client closed)
[22:58:48] *** Quits: A_Dragon (A_D@libera/staff/dragon) (Remote host closed the connection)
[22:58:56] *** Joins: wolfgang (~wolfgang@101.174.6.197)
[22:59:02] *** Joins: A_Dragon (A_D@libera/staff/dragon)
[22:59:32] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[23:02:33] *** Quits: alzgh (~alzgh@user/alzgh) (Quit: WeeChat 2.8)
[23:03:25] <earnestly> curl has --retry-* on many possible conditions
[23:03:56] *** Joins: mozgalom (~mozgalom@194.144.47.113)
[23:07:13] *** Quits: robobo (~robobo@c-e52c524e.015-74-6762675.bbcust.telenor.se) (Ping timeout: 252 seconds)
[23:09:32] *** Joins: travaldo (~travaldo@159.203.88.148)
[23:10:33] *** Quits: Gamma (~Gamma@zsh/user/Gamma) (Ping timeout: 276 seconds)
[23:13:29] *** Joins: tangy (tangy@user/tangy)
[23:16:42] *** Joins: Gamma (~Gamma@zsh/user/Gamma)
[23:17:46] *** Quits: xiao (~xiao@37.170.156.128) (Remote host closed the connection)
[23:20:16] *** Quits: legola (~legola@46.235.100.27) (Remote host closed the connection)
[23:20:25] *** Quits: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com) (Ping timeout: 252 seconds)
[23:21:20] *** Joins: legola (~legola@46.235.100.27)
[23:21:40] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Remote host closed the connection)
[23:22:52] *** Joins: jdltouraine (~jdltourai@2a02:a03f:847b:b800:b5f8:2ce2:b911:512e)
[23:23:07] *** Joins: remirol (~lorimer@user/lorimer)
[23:23:07] *** Quits: lorimer (~lorimer@user/lorimer) (Killed (NickServ (GHOST command used by remirol)))
[23:23:16] *** remirol is now known as lorimer
[23:23:59] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[23:25:54] *** Quits: legola (~legola@46.235.100.27) (Ping timeout: 256 seconds)
[23:33:12] *** Joins: austin987 (~null@100.42.98.196)
[23:33:17] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aÐ»Ð»Ð¸Ð»Ñ¹Ñ–Ð°!)
[23:34:10] *** Joins: vysn (~vysn@user/vysn)
[23:35:55] *** Quits: besnn (~besnn@user/besnn) (Read error: Connection reset by peer)
[23:38:04] <shush> The if statement replacement worked
[23:38:18] <shush> Btw, what's a POSIX way of looping N times?
[23:39:38] <earnestly> shush: while with a counter
[23:40:00] *** Joins: Crescendo (~Crescendo@user/crescendo)
[23:40:16] *** Quits: shimbles (~shimbles@209.201.38.106) (Quit: Client closed)
[23:40:30] <shush> Is for not Posix?
[23:40:42] <earnestly> It is posix
[23:40:47] <emanuele6> times=10 i=0; while [ "$((i++))" -lt "$times" ]; do true the thing; done
[23:40:54] <earnestly> emanuele6: No ++
[23:41:08] <emanuele6> are you sure ++ is not posix?
[23:41:11] <earnestly> Yes
[23:41:23] <emanuele6> indeed
[23:41:31] <earnestly> So inside the loop you just do i=$((i + 1)), simple
[23:41:42] <emanuele6> times=10 i=1; while [ "$i" -le "$times" ]; do true the thing; i=$((i+1)); done
[23:42:04] <earnestly> shush: In one script I do: `for attempt in once twice; do ...; done' where $attempt is not used
[23:42:17] <earnestly> Well actually it is
[23:42:48] <earnestly> I also have a tried inner variable so I can do: if [ "$tries" -le 0 ] && [ "$attempt" = twice ]; then
[23:43:06] <shush> I do `for n in 1 2 3 4 5; do` but 1 2 3 4 5 is hard coded. So I'd like a variable to control the iteration count
[23:43:19] <earnestly> shush: You have to use a while loop
[23:43:29] <earnestly> Or redesign your script to not need loops like that
[23:43:45] <emanuele6> or use awk :)
[23:43:48] <emanuele6> jk
[23:44:34] <earnestly> I mean, redesigns to use awk often work well, and awk then slowly consumes the entire script
[23:45:53] <earnestly> To be fair, my for loop is a right hack.  It's this, and I know it could use ssh much more intelligently: https://0x0.st/-vek.txt
[23:48:35] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[23:48:48] *** Joins: Crescendo (~Crescendo@user/crescendo)
[23:51:08] <emanuele6> earnestly: can't you remove the shellcheck directive since attempt is used?
[23:52:04] *** Joins: greycat (~greg@209.142.155.49)
[23:52:08] <earnestly> emanuele6: Yep
[23:55:49] <NRK[m]> what about `for i in $(seq 10); do`
[23:55:56] <NRK[m]> is that not posix?
[23:56:09] <earnestly> NRK[m]: No
[23:56:31] *** Joins: m0viefreak (~asdf@user/m0viefreak)
[23:56:46] <earnestly> (seq is not posix, but using for loops over wordsplitting like that is nasty anyway)
[23:57:01] <earnestly> There's nothing wrong with a while loop
[23:57:36] <earnestly> Not sure why people would bend over backwards to avoid them, plus your exit condition is more flexible than c-style for loops
[23:58:38] <earnestly> And loop counter control
[23:58:53] *** Joins: Shanzem (~Shanzem@86.31.109.147)
[23:59:45] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
