[00:04:42] *** Joins: lexano (~lexano@174.119.69.134)
[00:19:19] *** Joins: dems98 (~alessandr@gateway/tor-sasl/dems98)
[00:39:45] *** Joins: xlei_ (~akans@pool-71-125-19-142.nycmny.fios.verizon.net)
[00:40:47] *** Quits: xlei (~akans@pool-71-125-19-142.nycmny.fios.verizon.net) (Ping timeout: 256 seconds)
[00:49:11] *** Quits: Volgaar (~volgaar@193.137.116.78.rev.sfr.net) (Quit: WeeChat 3.4)
[01:00:27] *** Quits: Buster_ (~Buster@46.160.36.66) (Ping timeout: 256 seconds)
[01:10:24] *** Joins: lavaball (felix@31.204.155.215)
[01:12:37] <zumba_addict> ah so it's called judder. That's what I want to fix. I am not sure if it's possible
[01:15:04] *** Joins: djk (~Thunderbi@74.102.240.250)
[01:15:31] <dems98> Hi, I have a problem with ffmpeg on Debian 11: when I do a game capture trough x11grab, the resulting video has lag. Maybe it is something with Vulkan, because the normal screen recording has no problem. https://imgur.com/a/GLFqEpm
[01:16:41] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[01:16:46] *** Joins: ivanich_ (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[01:16:49] <dems98> I've tried with the h264_qsv codec and recording with OBS Studio but I was not able to solve
[01:21:52] *** Joins: System_Error (~SystemErr@user/systemerror)
[01:23:09] *** Joins: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net)
[01:31:55] *** Quits: fkaa (~fkaa@user/fkaa) (Remote host closed the connection)
[01:32:47] *** Quits: ||arifaX (~Commodore@user/arifax/x-9857073) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[01:33:02] *** Quits: l4yer (~l4yer@178.239.168.223) (Ping timeout: 250 seconds)
[01:35:02] *** Joins: Agafnd (~agafnd@2603-6080-0e02-1800-0095-25e0-071c-5cb5.res6.spectrum.com)
[01:40:59] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[01:45:29] *** Joins: oriba (~oriba@dynamic-089-012-117-098.89.12.pool.telefonica.de)
[01:46:39] *** Joins: l4yer (~l4yer@178.239.168.223)
[01:51:49] *** Joins: pal (~pal@76-14-89-2.sf-cable.astound.net)
[01:55:01] *** Quits: pal_ (~pal@76-14-89-2.sf-cable.astound.net) (Ping timeout: 256 seconds)
[01:56:17] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[02:06:00] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[02:06:02] *** Quits: dreamon (~dreamon@p57a4c526.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[02:12:02] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[02:17:26] *** Quits: dems98 (~alessandr@gateway/tor-sasl/dems98) (Quit: Going AFK...)
[02:20:40] *** Quits: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com) (Quit: jarthur)
[02:46:51] *** Joins: itsalexjones_ (~itsalexjo@82.4.99.241)
[02:49:25] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Ping timeout: 256 seconds)
[02:57:15] *** Quits: irc_user (uid423822@id-423822.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[02:59:33] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-5dd7-8e71-50db-65dc.res6.spectrum.com)
[03:04:43] *** Quits: cosimone (~user@93-47-231-31.ip115.fastwebnet.it) (Ping timeout: 256 seconds)
[03:07:27] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[03:27:44] *** Quits: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:39:06] *** Joins: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net)
[03:41:19] *** Quits: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net) (Client Quit)
[03:41:53] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[03:44:17] *** Joins: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net)
[03:45:22] *** Joins: Macer (macer@lasziv.reprehensible.net)
[03:45:46] <Macer> hello. not sure if this is the place to ask but i was wondreing if anybody here was using ffmpegfs
[03:46:04] *** Quits: zmt00 (~zmt00@user/zmt00) (Read error: Connection reset by peer)
[03:46:30] <nick87720z> also: When drawgrid or drawbox are in -vf, input value range remaps so, that 0 becomes 16, though 127 is at least same if not less
[03:50:19] *** Quits: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:51:37] *** Quits: palasso (~palasso@user/palasso) (Read error: Connection reset by peer)
[03:53:05] <Macer> was curious if there was a method to make it encode using x265 instead of x264
[03:56:11] *** Joins: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net)
[03:57:15] <jarthur> Macer in the upcoming version, yes
[03:57:33] <Macer> jarthur: ah ok. so currently it does not?
[03:57:33] <jarthur> https://github.com/nschlia/ffmpegfs/issues/97
[03:58:29] <Macer> oh ok. i was looking at the readme.md on github and noticed this...
[03:58:31] <Macer> MP4 	AAC, MP3 	H264, H265, MPEG1, MPEG2
[03:58:42] *** Quits: djk (~Thunderbi@74.102.240.250) (Quit: djk)
[03:59:52] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[04:00:09] <Macer> jarthur: in my case i'm just trying to cp files over and let ffmpegfs handle the encoding during cp
[04:01:00] <jarthur> Yep, the README is up to date with the changes in the upcoming version
[04:01:20] *** Quits: ivanich_ (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[04:01:25] <Macer> ohhh ok haha
[04:01:46] <jarthur> You could build/install from the master branch to get a sneak peak.
[04:01:57] *** Quits: typ1cal_c0ffxe3 (~typ1cal_c@ppp215-240.static.internode.on.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:01:58] <Macer> thakns... so --videocodec H265 would work in newer version?
[04:02:21] <Macer> is it restricted to only AAC,MP3 though? for instance i want to just copy the audio and subtitle streams
[04:02:23] <jarthur> Probably. I don't know the exact symbol name he chose for the codec.
[04:03:13] <Macer> and i don't see subtitles anywhere so is it safe to assume it doesn't support them?
[04:03:23] <jarthur> That I don't know
[04:03:46] <Macer> ah ok. thanks. i really appreaciate the information. i'll try it with h264 and see what i wind up with
[04:03:49] <Macer> just as a test
[04:04:14] <Macer> pretty neat fuse filesystem.. it would save tons of time
[04:05:59] <Agafnd> the amount of things people have figured out how to do with fuse is quite impressive
[04:08:05] <nick87720z> Is there videofilter to store image between frames? E.g. I could use it to constantly shift image.
[04:09:53] *** Parts: babyface (~babyface@user/babyface) ()
[04:13:34] *** Joins: noobly (~user@50.38.127.83)
[04:14:27] <noobly> How does one get an mp4 with idx/sub subtitles to display (preferably optionally, not burnt on)?
[04:15:36] <furq> you ocr them to a text subtitle format
[04:16:07] <furq> mp4 doesn't support image subtitles
[04:16:16] <noobly> What's OCR?
[04:16:39] <noobly> Optical character recognition?
[04:16:39] <furq> optical character recognition
[04:16:44] <noobly> Thanks
[04:17:15] *** Quits: slisnake0 (~slisnake@82.102.25.12) (Ping timeout: 256 seconds)
[04:18:50] *** Joins: crashrep (~crashrep@user/crashrep)
[04:18:53] *** Joins: slisnake0 (~slisnake@82.102.25.13)
[04:19:37] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:60b2:d287:49b7:45eb) (Ping timeout: 240 seconds)
[04:21:02] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 240 seconds)
[04:24:33] <noobly> Can you 'burn them' on an MP4 without doing any OCR?
[04:25:32] <Macer> so i tried it out. seems like subtitles aren't copied over heh
[04:25:40] <Macer> but it's pretty straightforward
[04:27:23] <noobly> I think this command worked: ".././ffmpeg -i "Tanin no kao.mp4" -i "Tanin no kao".sub -i "Tanin no kao.idx" -filter_complex "[0:v][2:s]overlay" -vcodec mpeg4 -vb 6000000 -r 59.94 -aspect 16:9 -acodec libmp3lame -async 48000 -vol 1250 output.mp4"
[04:27:23] <noobly>  
[04:27:53] <noobly> but i have not watched the movie, only checked to see if subtitles were on there. The command ran forever and I terminated it early, but it seems it still formed a good output.
[04:30:35] *** Quits: noobly (~user@50.38.127.83) (Read error: Connection reset by peer)
[04:32:47] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[04:32:59] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Quit: bye)
[04:33:49] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[04:41:10] *** Quits: wuxi (~wuxi@61.155.23.114) (Remote host closed the connection)
[04:41:17] *** Joins: wuxi (~wuxi@61.155.23.114)
[04:47:10] *** Quits: slisnake0 (~slisnake@82.102.25.13) (Ping timeout: 250 seconds)
[04:49:15] *** Joins: slisnake0 (~slisnake@82.102.25.14)
[04:52:12] *** Joins: guest (~guest@222.128.6.148)
[04:53:50] *** Quits: oriba (~oriba@dynamic-089-012-117-098.89.12.pool.telefonica.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[05:21:30] *** Joins: MrZeus_ (~MrZeus@81.92.205.22)
[05:30:23] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:31:27] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:1551:2b7a:bff8:d06)
[05:33:45] *** Quits: someuser (~user@197.54.16.50) (Ping timeout: 256 seconds)
[05:42:56] *** Joins: lucaswang (~lucaswang@58.246.19.98)
[05:43:55] *** Joins: beaver (~beaver@user/pong)
[05:44:02] *** Quits: c7s (~c7s@user/c7s) (Ping timeout: 240 seconds)
[06:00:57] *** Joins: itsalexjones__ (~itsalexjo@82.4.99.241)
[06:01:17] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[06:03:32] *** Quits: itsalexjones_ (~itsalexjo@82.4.99.241) (Ping timeout: 240 seconds)
[06:10:01] *** Quits: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se) (Ping timeout: 256 seconds)
[06:13:46] *** Joins: zmt00 (~zmt00@user/zmt00)
[06:22:30] *** Quits: MrZeus_ (~MrZeus@81.92.205.22) (Ping timeout: 250 seconds)
[06:46:26] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[06:47:23] *** Joins: Guest3844 (~Guest3844@pool-138-88-181-150.washdc.fios.verizon.net)
[06:48:30] <Guest3844> Hello
[06:49:23] <Guest3844> vulkan_transfer_data_from_cuda function in the hwcontext_vulkan  doesn't seem to work
[06:49:57] <Guest3844> it fails with a invalid parameter cuda error
[06:51:12] <Guest3844> Is this an error on my end?
[06:52:23] *** Joins: incog (~ayy@pool-108-46-169-14.nycmny.fios.verizon.net)
[07:05:36] *** Quits: Guest3844 (~Guest3844@pool-138-88-181-150.washdc.fios.verizon.net) (Quit: Connection closed)
[07:09:37] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-5dd7-8e71-50db-65dc.res6.spectrum.com) (Ping timeout: 240 seconds)
[07:11:38] <alphamule> Hmm, VNC is vastly less efficient and convenient to read through, than simply downloading the log file...  oh well
[07:12:43] <alphamule> For MP4, you'd have to either create text subtitle files, or hard sub them?
[07:12:43] *** Joins: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com)
[07:13:09] <alphamule> So many old school translations edited with titlers directly XD
[07:13:29] *** Quits: guest (~guest@222.128.6.148) (Ping timeout: 256 seconds)
[07:13:44] <alphamule> Hilariously, there was a titler that used a Famicom inside.
[07:14:04] <alphamule> Or rather, the CPU and graphics chip.  Meh
[07:15:25] *** Quits: zmt00 (~zmt00@user/zmt00) (Read error: Connection reset by peer)
[07:16:52] *** Joins: zmt00 (~zmt00@user/zmt00)
[07:18:32] *** Quits: incog (~ayy@pool-108-46-169-14.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[07:19:48] *** Quits: wuxi (~wuxi@61.155.23.114) (Remote host closed the connection)
[07:21:02] *** Quits: blb (~blb@user/blb) (Ping timeout: 240 seconds)
[07:24:32] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 240 seconds)
[07:26:12] *** Quits: jos1 (~jos3@dyndsl-091-248-055-181.ewe-ip-backbone.de) (Ping timeout: 250 seconds)
[07:26:30] *** Joins: darkapex (~darkapex@user/darkapex)
[07:31:58] *** Quits: itsalexjones__ (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[07:36:43] *** Joins: wuxi (~wuxi@61.155.23.114)
[07:39:28] *** Joins: jos1 (~jos3@dyndsl-095-033-175-046.ewe-ip-backbone.de)
[07:42:00] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:06:42] *** Quits: wuxi (~wuxi@61.155.23.114) (Remote host closed the connection)
[08:06:48] *** Joins: wuxi (~wuxi@61.155.23.114)
[08:08:13] *** Quits: wuxi (~wuxi@61.155.23.114) (Remote host closed the connection)
[08:08:21] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[08:14:21] *** Joins: wuxi (~wuxi@61.155.23.114)
[08:14:59] *** Joins: abreyen (~abreyen@71-34-2-53.mpls.qwest.net)
[08:18:10] <abreyen> Anyone have guidance to getting hardware accelerated transcoding working on a legacy mac? I have a 2010 MBP and want to use its GPU to speed up FFMPEG transcodes. Or how to check if this is even supported?
[08:19:50] <alphamule> Does FFMPEG use GL or?
[08:20:12] <alphamule> I mean that's the question you might want to check
[08:20:27] <crashrep> abreyen: does videotoolbox work on your mac?
[08:20:29] <alphamule> See if protocol supported by both
[08:20:40] <crashrep> my 2015 mbp has videotoolbox for hardware accelerated encoding
[08:21:15] <abreyen> videotoolbox is listed as a codec in `ffmpeg -codecs` im 99% sure, but not sure if that list is from ffmpeg or from macOS
[08:23:02] <abreyen> DEV.LS h264                 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 libopenh264 ) (encoders: libx264 libx264rgb libopenh264 h264_videotoolbox )
[08:23:47] <abreyen> Uploaded file: https://uploads.kiwiirc.com/files/79ebad02cc3b0a49deb6d4e1b318b7c5/pasted.txt
[08:23:53] <abreyen> however, when running, it immediately craps out^^
[08:24:38] <abreyen> Uploaded file: https://uploads.kiwiirc.com/files/a738ada2c8e483202eac825a7bc6ebc5/pasted.txt
[08:24:47] <abreyen> heres the full output if thats helpful^^
[08:27:29] *** Joins: guest (~guest@222.128.6.148)
[08:29:02] *** Quits: abreyen (~abreyen@71-34-2-53.mpls.qwest.net) (Quit: Connection closed)
[08:29:13] *** Joins: abreyen (~abreyen@71-34-2-53.mpls.qwest.net)
[08:32:45] *** Joins: Jerrrk (~Jerrk@185.195.233.147)
[08:32:56] *** Quits: Jerrk (~Jerrk@193.138.218.212) (Ping timeout: 250 seconds)
[08:33:55] *** Joins: Jerrk (~Jerrk@185.65.135.238)
[08:34:36] *** Quits: Jerrk (~Jerrk@185.65.135.238) (Remote host closed the connection)
[08:37:21] *** Quits: Jerrrk (~Jerrk@185.195.233.147) (Ping timeout: 256 seconds)
[08:43:35] *** Quits: guest (~guest@222.128.6.148) (Ping timeout: 256 seconds)
[08:59:22] *** Joins: zmt01 (~zmt00@user/zmt00)
[08:59:24] *** Joins: guest (~guest@222.128.6.148)
[08:59:28] *** Quits: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6) (Quit: Client closed)
[09:01:05] *** Quits: abreyen (~abreyen@71-34-2-53.mpls.qwest.net) (Quit: Connection closed)
[09:02:17] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[09:14:26] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[09:20:40] *** Naleksuh is now known as Naleksuh2
[09:21:04] *** Naleksuh2 is now known as Naleksuh
[09:36:24] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[09:37:17] *** Quits: zmt01 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[09:58:06] *** Joins: youmustrust (~nobody@ec2-18-182-239-10.ap-northeast-1.compute.amazonaws.com)
[09:59:43] <youmustrust> Is there a way to remux a HDR10 mkv to a mp4 without losing metadata? Merely copying it doesn't work for QuickTime.
[10:00:33] <youmustrust> With `-vtag hvc1`, QuickTime can play it, but it's washed out. It looks to me that metadata was not preserved.
[10:02:20] *** Quits: guest (~guest@222.128.6.148) (Quit: Connection closed)
[10:06:20] *** Joins: irc_user (uid423822@id-423822.lymington.irccloud.com)
[10:24:39] <JEEB> youmustrust: how old is your ffmpeg tool? `ffmpeg -version`
[10:25:06] *** Joins: KombuchaKip (~kip@192.252.230.5)
[10:25:09] <JEEB> and yes, with HEVC QT is picky regarding the identifier so -tag:v hvc1 is required
[10:38:15] *** Joins: guest (~guest@222.128.6.148)
[10:42:51] *** Quits: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com) (Quit: jarthur)
[10:43:09] *** Quits: nightbreak (~vsong@168.5.170.222) (Ping timeout: 256 seconds)
[10:49:27] <youmustrust> JEEB: mine is 4.2.3.
[10:49:47] <youmustrust> Would the latest version maintain HDR10 metadata?
[10:51:54] <JEEB> I did various work that went into 4.4 or newer which did pass various metadata through, esp. during encoding. I think codec copy was behaving better before as well, but the writers and readers got greatly improved since 4.2.x
[10:52:05] <JEEB> so yea, I recommend grabbing a master build from BtbN's automated builds
[10:52:26] <JEEB> since I expect you are on linux if you have such an old version :)
[10:52:32] <JEEB> https://github.com/BtbN/FFmpeg-Builds/releases/tag/latest
[10:52:53] <JEEB> you probably want to grab the linux64-gpl one
[10:53:21] <JEEB> unless you are on macOS of course :P
[10:53:26] <youmustrust> Thanks for your amazing work! =)
[10:53:54] *** Joins: houge101 (~houge101@112.96.227.203)
[10:54:25] <houge101> arm-linux-gnueabihf-gcc is unable to create an executable file.
[10:54:26] <houge101> C compiler test failed.
[10:54:34] *** Joins: Nobrem (~Nobrem@85.187.219.21)
[10:54:35] <Nobrem> hello
[10:54:50] <Nobrem> Is there a known bug with borders around subtitles when burning them?
[10:55:03] <Nobrem> I get a really, really bad quality at the edges of the box
[10:55:22] <JEEB> you can look up with the keywords on trac.ffmpeg.org, if it's not there then there's nothing like that known
[10:55:23] <houge101> how to resolve this problem
[10:55:33] <houge101> arm-linux-gnueabihf-gcc is unable to create an executable file.
[10:55:34] <houge101> C compiler test failed.
[10:55:44] <JEEB> houge101: ffbuild/config.log contains what configure exactly attempted to run as well as the exact error the compiler provided
[10:55:48] <Nobrem> JEEB:  I already searched there,  but maybe with the wrong terms
[10:56:03] <Nobrem> Could I please show you guys a sample setup to reproduce what I see?
[10:56:56] <JEEB> youmustrust: I only did a rework of the encoding bit more or less; others did work on the mp4/mkv input reading/outputs writing
[10:58:26] <JEEB> youmustrust: primary thing to check is that both Input and Output things say that the video stream is properly acknowledged as having a HDR transfer, and that it gets shown in the Output bit as well
[11:00:07] <houge101> Uploaded file: https://uploads.kiwiirc.com/files/c4291c6d4d2e066cec0c95aee131d0a0/image.png
[11:00:28] <houge101> I know that
[11:00:31] <houge101> shanks
[11:02:02] *** Joins: blb (~blb@user/blb)
[11:02:13] <Nobrem> https://dpaste.org/1Kue
[11:02:21] <Nobrem> This is my test setup
[11:02:53] <Nobrem> The problem is, that the dark box behind the subtitles gets a totally fuzzy edge
[11:03:06] <Nobrem> Expected:   ---------------
[11:03:14] <Nobrem> what I get is:   ___-_-____-__--__-___
[11:03:28] <Nobrem> for example, at the top or bottom of the box  (the edge itself)
[11:03:45] <aphysically> JEEB: I was able to remux a profile 10 thing and get the RPU part applied
[11:03:50] <Nobrem> that does _not_ happen with -drawbox
[11:05:27] <Nobrem> I know, I could have combined the 2 ffmpeg commands,  but this way,  I could re-use  "video.mp4"  rather than re-creating it each time
[11:06:12] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 276 seconds)
[11:09:48] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:16:51] *** Quits: houge101 (~houge101@112.96.227.203) (Quit: Connection closed)
[11:19:45] <Nobrem> Please, guys.  don't ignore me :|
[11:23:01] <JEEB> sorry, $dayjob for me
[11:23:23] *** Joins: palasso (~palasso@user/palasso)
[11:23:43] <Nobrem> Disclaimer: I just asked my question in #linux, too
[11:23:58] <Nobrem> Because I kept asking in #ffmpeg the same question for some weeks, and I am desperate to solve it
[11:27:37] *** Quits: Aelius (~Aelius@user/aelius) (Quit: quit)
[11:28:34] *** Joins: Aelius (~Aelius@user/aelius)
[11:29:45] *** Joins: Flabb (~Flabb@89.169.42.92)
[11:30:30] *** Joins: lewisje (~lewisje@72.49.207.113)
[11:37:58] *** Joins: someuser (~user@197.54.16.50)
[11:41:22] *** Joins: anotheruser (~user@45.133.4.56)
[11:42:56] *** Joins: demon__ (~user@197.54.16.50)
[11:44:55] *** Quits: someuser (~user@197.54.16.50) (Ping timeout: 256 seconds)
[11:46:37] *** Quits: anotheruser (~user@45.133.4.56) (Ping timeout: 256 seconds)
[11:47:05] *** Joins: hwdyki (~hwdyki@user/hwdyki)
[11:47:32] <hwdyki> is avcodec_get_context_defaults3() deprecated in 5.0?
[11:48:02] *** Joins: lavaball (~Melissa@31.204.155.215)
[11:49:46] *** Quits: Aelius (~Aelius@user/aelius) (Quit: quit)
[11:51:12] <JEEB> hwdyki: it was deprecated way before, in 2016
[11:51:18] <JEEB> it was removed in 5.0
[11:51:47] <JEEB> it was only there to abuse the AVStream codec context to "reset" it to a "clean state"
[11:51:56] <JEEB> and since the AVStream codec context is no longer there
[11:52:01] <JEEB> it also was deprecated in 2016
[11:52:43] *** Joins: Aelius (~Aelius@user/aelius)
[11:52:50] *** Quits: Aelius (~Aelius@user/aelius) (Remote host closed the connection)
[11:53:31] *** Joins: Aelius (~Aelius@user/aelius)
[11:55:21] *** Joins: Volgaar (~volgaar@193.137.116.78.rev.sfr.net)
[11:55:40] *** Joins: Carter71 (~Carter@180.167.157.90)
[11:55:49] <hwdyki> i have code that calls it after gst_ffmpeg_avcodec_close(). so can i just remove it?
[11:56:38] <Nobrem> https://filebin.net/nr54xs1qd3a95c49
[11:56:46] <Nobrem> ^ this is how the edge of my box looks like
[11:56:56] <Nobrem> why do the subtitles get burned so badly?
[11:59:57] <Carter71> Hello! I'm one of the developer of [IINA](https://github.com/iina-plus/iina). I just upgrade dependency ffmpeg from 4 to 5. And I noticed that [avformat_open_input](https://github.com/iina-plus/iina/blob/develop/iina/FFmpegController.m#L515) no longer sets `pFormatCtx->metadata`, which make
[11:59:58] <Carter71> [av_dict_get](https://github.com/iina-plus/iina/blob/develop/iina/FFmpegController.m#L535) call failed
[12:00:51] *** Joins: MajorBiscuit (~MajorBisc@c-001-020-016.client.tudelft.eduvpn.nl)
[12:01:04] <Carter71> Related issue: https://github.com/iina-plus/iina/issues/21
[12:01:31] <Carter71> Is it expected ( a breaking change ) or a regression?
[12:01:55] <nick87720z> My appologies - my problem with input raw bytes did not reproduce using printf. Need to dig more.
[12:02:12] *** Joins: fkaa (~fkaa@user/fkaa)
[12:09:30] *** Joins: dreamon (~dreamon@ppp-88-217-76-15.dynamic.mnet-online.de)
[12:11:33] *** Quits: guest (~guest@222.128.6.148) (Ping timeout: 256 seconds)
[12:18:11] *** Quits: J_Darnley (~J_Darnley@d51a44418.access.telenet.be) (Ping timeout: 256 seconds)
[12:20:40] *** Joins: J_Darnley (~J_Darnley@d51A44418.access.telenet.be)
[12:21:05] *** Joins: cmp (~cmp@lfbn-ren-1-1575-159.w86-253.abo.wanadoo.fr)
[12:21:50] <nick87720z> Finally, that's not about ffmpeg, so double appologies. It's trying to 'printf ("%c", val)' from awk, which doesn't handle values 128..255
[12:22:17] *** Quits: nick87720z (~nick87720@196.10-157-90.telenet.ru) (Quit: Leaving)
[12:26:46] *** Quits: cmp (~cmp@lfbn-ren-1-1575-159.w86-253.abo.wanadoo.fr) (Quit: Connection closed)
[12:27:03] *** Joins: cmp (~cmp@lfbn-ren-1-1575-159.w86-253.abo.wanadoo.fr)
[12:33:05] *** Joins: guest (~guest@222.128.6.148)
[12:34:48] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[12:50:53] *** Gaboradon is now known as Gaboradon_
[12:54:02] *** Quits: guest (~guest@222.128.6.148) (Quit: Connection closed)
[12:54:47] *** Quits: Carter71 (~Carter@180.167.157.90) (Quit: Connection closed)
[12:54:52] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[12:56:52] *** Quits: Nobrem (~Nobrem@85.187.219.21) (Quit: Leaving)
[12:57:10] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[13:00:02] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[13:00:35] *** Joins: beaver (~beaver@user/pong)
[13:07:07] *** Quits: hwdyki (~hwdyki@user/hwdyki) (Quit: Client closed)
[13:11:00] *** Quits: Gaboradon_ (~Gaboradon@user/Gaboradon) (Quit: Konversation terminated!)
[13:11:16] *** Joins: Gaboradon_ (~Gaboradon@user/Gaboradon)
[13:11:38] *** Gaboradon_ is now known as Gaboradon
[13:11:46] *** Quits: Gaboradon (~Gaboradon@user/Gaboradon) (Client Quit)
[13:12:03] *** Joins: Gaboradon (~Gaboradon@user/Gaboradon)
[13:14:21] *** Joins: System_Error (~SystemErr@user/systemerror)
[13:26:26] *** Parts: youmustrust (~nobody@ec2-18-182-239-10.ap-northeast-1.compute.amazonaws.com) ()
[13:30:40] <Macer> https://www.ebay.com/itm/4GB-DDR5-Desktop-PC-Graphics-Card-128Bit-650MHz-1000MHz-PCI-E-3-0-Slot-for-AMD-/353798664924
[13:30:44] <Macer> what in the world is that?
[13:37:23] *** Joins: MrZeus_ (~MrZeus@89.238.143.230)
[13:39:15] *** Gaboradon is now known as Gaboradon_
[13:39:18] *** Gaboradon_ is now known as Gaboradon__
[13:39:19] *** Gaboradon__ is now known as Gaboradon
[13:39:24] *** Gaboradon is now known as Gaboradon__
[13:39:25] *** Gaboradon__ is now known as Gaboradon
[13:43:32] *** Joins: guest (~guest@222.128.6.148)
[13:46:04] *** Joins: Xaymar (~Xaymar@business-90-187-35-181.pool2.vodafone-ip.de)
[13:47:06] *** Quits: irc_user (uid423822@id-423822.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[13:48:09] <Macer> sticker says AMDHD6770 heh
[13:48:16] <Macer> kind of doubting that
[13:52:07] *** Quits: lucaswang (~lucaswang@58.246.19.98) (Quit: Connection closed)
[13:56:10] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[14:00:03] *** Joins: lavaball (felix@31.204.155.215)
[14:06:19] *** Quits: darkapex (~darkapex@user/darkapex) (Read error: Connection reset by peer)
[14:14:00] *** Joins: darkapex (~darkapex@user/darkapex)
[14:23:02] *** Quits: guest (~guest@222.128.6.148) (Ping timeout: 240 seconds)
[14:26:23] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[15:26:37] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[15:27:51] *** Joins: nrg (~NRG@user/nrg)
[15:28:41] *** Joins: NovumDXW (~NovumDXW@2409:8a28:3610:29b0:74d8:d16b:92b3:8d89)
[15:30:13] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[15:31:42] *** Joins: someuser (~user@197.54.16.50)
[15:32:43] *** Quits: demon__ (~user@197.54.16.50) (Ping timeout: 256 seconds)
[16:24:25] *** Joins: djk (~Thunderbi@74.102.240.250)
[16:26:04] *** Joins: Kacper_ (~kasper93@89-74-110-199.dynamic.chello.pl)
[16:27:00] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 250 seconds)
[16:27:01] *** Kacper_ is now known as kasper93
[16:32:41] *** Quits: kurosu (uid342582@id-342582.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[16:49:54] *** Joins: idj (~idj@37.160.10.94)
[16:51:59] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[16:52:30] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[16:53:58] <JEEB> idj: the "midi playback" part of FFmpeg is 100% libavformat/libmodplug.c
[16:54:21] <JEEB> so basically libmodplug is utilized to get PCM out of various such formats that are not PCM-based
[16:54:39] <idj> Hello everyone. Is it possible to route the MIDI Decoder output to the lv2 Plugin? So to play a MIDI file with a lv2 synthesizer
[16:55:18] <idj> Ok, I'd like to make this up, but I have very little experience with programming (I mean real world experience)
[16:55:33] <idj> I'm willing to try
[16:55:33] <BtbN> ffmpeg will not_ pass on midi as midi
[16:55:38] <BtbN> it'll "decode" it to pcm
[16:55:58] <idj> Oh, ok, so what could I do?
[16:56:11] <idj> What would I need for this "project"?
[16:56:18] <BtbN> Nothing special really
[16:56:35] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 256 seconds)
[16:57:34] <idj> Please, be more specific
[16:58:06] <BtbN> More specific how? You just need an ffmpeg build with support for lv2 and openmpt
[16:58:22] <idj> Huh? Why OpenMPT?
[16:58:39] <BtbN> I thought you wanted to play midi/modplug files?
[16:58:45] <idj> No
[16:58:56] <BtbN> ...?
[16:59:09] <idj> Well, I don't really know how to explain
[16:59:41] <idj> I'd like to play MIDI files, yes, but I'd like to do it through FFMpeg and using an lv2 synth
[16:59:52] <idj> If possible, headless
[17:00:28] <idj> I saw in the documentation that TyMIDIty++ is used to play MIDI files
[17:01:26] *** Quits: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu) (Read error: Connection reset by peer)
[17:02:00] <idj> This is why I posted in the devel section first, before
[17:02:10] *** Joins: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu)
[17:02:54] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[17:03:00] <BtbN> I see no notion of timidity support in ffmpeg
[17:03:14] <BtbN> it uses modplug (old and horrible) or openmpt (slightly less horrible)
[17:03:39] <idj> Ok, I trust you, also because I read quickly and I could have been misunderstood things
[17:04:10] <idj> So, I'd like to add MIDI support to FFMpeg, what could I do?
[17:04:23] <BtbN> Does openmpt not play midi files?
[17:04:39] <idj> IDK, but I'd stick with CLI only
[17:04:54] <idj> And nothing but FFMpeg
[17:05:15] <BtbN> ffmpeg is cli or library only by nature, so not sure what you're asking.
[17:05:36] *** Quits: softworkz (~softworkz@user/softworkz) (Quit: Leaving)
[17:06:22] <idj> let's say, something like:
[17:06:23] <idj> ffmpeg playmidi (midi file) lv2 (synthesizer name):(track name)
[17:06:32] <BtbN> You can manually convert your midi file to pcm via timidity and then process the pcm audio with ffmpeg, if openmpt does not do what you need.
[17:06:48] <idj> It's a different thing
[17:06:58] <BtbN> ffmpeg processes pcm based audio only
[17:07:16] <BtbN> it has no notion of processing midi/mod files outside of treating them like another codec that needs "decoded"
[17:07:29] <idj> Yes, indeed I'd like to add MIDI
[17:07:50] <BtbN> Add MIDI?
[17:08:02] *** Quits: l4yer (~l4yer@178.239.168.223) (Ping timeout: 240 seconds)
[17:08:49] <idj> Yes
[17:08:53] <Agafnd> are you wanting to use, perhaps, ffplay, not ffmpeg
[17:09:08] *** Quits: wolfshappen (~waff@irc.furworks.de) (Quit: later)
[17:10:29] <idj> I'm not sure
[17:10:44] <idj> Here: https://ffmpeg.org/general.html#File-Formats midi is listed as a decoder support
[17:11:41] <BtbN> It's actually not, no
[17:12:10] <BtbN> Only thing with MIDI in its name are sds files
[17:12:18] <BtbN> Which is related to MIDI, but not MIDI
[17:12:38] <idj> Oh, may then be with midish?
[17:13:04] <idj> https://midish.org/
[17:13:40] <BtbN> You will need _something_ that converts/plays your midi to raw pcm, or any other format ffmpeg can read
[17:13:49] <BtbN> What you use for that doesn't overly matter.
[17:14:10] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[17:15:11] <idj> And this is exactly why I'd like to implement MIDI support in FFMpeg. I'd really like so much to use FFMpeg's lv2 support as a software synthesizer for MIDI files
[17:15:52] <BtbN> What does that even mean?
[17:16:09] <idj> It's missing, so I'd like to implement it
[17:16:22] <BtbN> That's not something you can just implement
[17:16:33] <BtbN> Isn't lv2 ladspa stuff? filter plugins?
[17:16:34] <idj> What do you mean?
[17:16:47] <idj> lv2 uses synthesizers too
[17:17:00] <idj> it's a unification of LADSPA+DSSI
[17:18:09] <idj> when parsing a MIDI file, there should be a way to forward MIDI events to lv2
[17:18:22] <BtbN> As far as ffmpeg is concerned, it gets PCM data in, does stuff, and PCM data comes out
[17:19:06] <BtbN> There is zero understanding of anything but PCM anywhere in ffmpeg. So passing around raw MIDI is not happening without major rewrites and tweaks of basically every part of the libraries.
[17:19:07] <idj> Again, I'd like to develop such feature
[17:19:25] <idj> Uhm, seems overly complicated
[17:19:27] <BtbN> Well, good luck I guess, but I doubt it's feasible.
[17:21:24] <idj> Ok, I'll rethink this thing further
[17:22:32] <idj> Is JACK supported in FFMpeg?
[17:27:17] *** Quits: Agafnd (~agafnd@2603-6080-0e02-1800-0095-25e0-071c-5cb5.res6.spectrum.com) (Ping timeout: 240 seconds)
[17:37:22] <BtbN> Pretty sure jack input and output is supported, yeah
[17:39:58] <idj> Thx, I'll thing about my idea some more
[17:40:03] <idj> bye
[17:40:07] *** Quits: idj (~idj@37.160.10.94) (Quit: Connection closed)
[17:44:12] *** Joins: rsx (~dummy@ppp-188-174-135-179.dynamic.mnet-online.de)
[17:56:12] *** Joins: MrPaul (~MrPaul@172-124-194-94.lightspeed.nsvltn.sbcglobal.net)
[17:58:37] *** Joins: Kruppt (~Kruppt@50-111-55-116.drhm.nc.frontiernet.net)
[17:59:51] *** Joins: idj (~idj@37.160.10.94)
[18:00:04] <MrPaul> I've got a ts file that plays back fine in mpc-be & vlc (haven't tested other players) but when change the container from ts to mp4 (-c copy foo.mp4) the timing drifts throughout the video.  I've also tried reencoding the audio  & video but that didn't fix the issue either.
[18:00:05] <MrPaul> Other high level attempts included mkvtoolnix, videoredo, and handbrake.
[18:00:05] <MrPaul> Why would various players play the video in sync, even when skipping around, but encoders have "drift/slips"?  At the end of the video it's off by >20min.
[18:01:02] <idj> I got an idea, don/t know if it/s feasible. The idea is to embed a minimalistic MIDI protocol directly in the lv2 plugin
[18:01:06] <idj> Should this work?
[18:02:06] <MrPaul> I'm willing to try it.  Can I do a quick test by just reencoding the audio and leaving video untouched?
[18:08:42] *** Quits: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37) (Ping timeout: 260 seconds)
[18:10:26] *** Quits: idj (~idj@37.160.10.94) (Quit: Leaving)
[18:11:32] *** Joins: idj (~idj@37.160.10.94)
[18:12:18] <idj> BtbN, what's your opinion about my idea? Would it be simpler?
[18:23:59] *** Joins: wolfshappen (~waff@irc.furworks.de)
[18:27:09] *** Quits: idj (~idj@37.160.10.94) (Quit: Leaving)
[18:36:43] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[18:55:10] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[18:57:15] *** Joins: c7s (~c7s@user/c7s)
[19:01:05] *** Quits: wolfshappen (~waff@irc.furworks.de) (Ping timeout: 256 seconds)
[19:01:12] <marabej> Hey guys, I have a problem with audio transcoding mp2 to aac from UDP multicas MPEG TS.The IP in multicast consist 5 streams: 1 video, 3 AUDIO, 1 subtiles(dvb_subtitle)
[19:01:48] <marabej> The command is pretty simple:ffmpeg -i udp://224.2.2.42:1234 -c copy -map 0 -c:a aac -f mpegts "udp://224.4.0.1:1234?pkt_size=1316" Stream #0:0 -> #0:0 (copy)           Stream #0:1 -> #0:1 (mp2 (native) -> aac (native))
[19:01:49] <marabej> Stream #0:2 -> #0:2 (mp2 (native) -> aac (native))
[19:01:49] <marabej> Stream #0:3 -> #0:3 (mp2 (native) -> aac (native))
[19:01:49] <marabej> Stream #0:4 -> #0:4 (copy)
[19:01:49] <marabej> but the result analyzed with astra is this:
[19:01:50] <marabej> Jan 13 20:10:36: INFO: Bitrate: 0 Kbit/s
[19:01:52] <marabej> Jan 13 20:10:37: INFO: Bitrate: 11763 Kbit/s
[19:01:54] <marabej> Jan 13 20:10:38: INFO: Bitrate: 0 Kbit/s
[19:01:58] <marabej> Jan 13 20:10:39: INFO: Bitrate: 9198 Kbit/s
[19:02:00] <marabej> Jan 13 20:10:40: INFO: Bitrate: 1686 Kbit/s
[19:02:02] <marabej> Jan 13 20:10:41: INFO: Bitrate: 0 Kbit/s
[19:02:04] <marabej> Jan 13 20:10:42: INFO: Bitrate: 14344 Kbit/s
[19:02:06] <marabej> Jan 13 20:10:43: INFO: Bitrate: 1273 Kbit/s
[19:02:08] <marabej> Stream #0:4 is dvb_subtitles
[19:02:10] <marabej> If I remove them with '-sn' the result wuth astra --analyze is fine
[19:02:35] *** Joins: wolfshappen (~waff@irc.furworks.de)
[19:02:43] <marabej> I just wanted to change AUDIO streams from mp2 to aac. I have chaneel with multiple AUDIO and Subtitles streams
[19:02:57] <marabej> Is this a bug in ffmpeg?
[19:03:53] <marabej> I tested with ffmpeg 4.3.3 and ffmpeg 4.3.2
[19:04:42] *** Quits: Kruppt (~Kruppt@50-111-55-116.drhm.nc.frontiernet.net) (Read error: Connection reset by peer)
[19:08:04] *** Joins: ivanich_ (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[19:08:30] <MrPaul> My understanding is that as soon as you pass -map this tells ffmpeg that you are defining how each individual channel will be mapped.
[19:08:30] <MrPaul> Try ffmpeg -i udp://224.2.2.42:1234 -c copy -f mpegts "udp://224.4.0.1:1234?pkt_size=1316
[19:09:04] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Read error: Connection reset by peer)
[19:10:28] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[19:10:34] *** Joins: joes (~joes@dyndsl-095-033-032-093.ewe-ip-backbone.de)
[19:11:35] <marabej> "MrPaul" it's now workign because you "cut off" the remaining substreams (including subtitles)
[19:11:58] <marabej> Stream #0:0[0x264]: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709, top first),
[19:11:58] <marabej>  16:9], 25 fps, 50 tbr, 90k tbn, 50 tbc
[19:11:58] <marabej> Stream #0:1[0x278](eng): Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, fltp, 192 kb/s
[19:11:58] <marabej> Stream #0:2[0x279](fra): Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, fltp, 192 kb/s
[19:11:58] <marabej> Stream #0:3[0x27c](rus): Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, fltp, 192 kb/s
[19:11:59] <marabej> Stream #0:4[0x28a](BUL): Subtitle: dvb_subtitle ([6][0][0][0] / 0x0006)
[19:12:43] <marabej> look at these streams, it's enough to remove the subtitle stream, but it's not a solution
[19:15:58] <MrPaul> Yea.  And I reread the docs and -map 0 says to include all.  Odd
[19:16:26] <marabej> yes, include all and reencode AUDIO streams, that is the purpose
[19:19:02] *** Quits: xlei_ (~akans@pool-71-125-19-142.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[19:19:25] <thebombzen> marabej: are you trying to include all streams and re-encode only audio streams?
[19:19:33] <marabej> I think this is serious bug in ffmpeg, or we are missing something
[19:19:35] <marabej> yes
[19:19:47] <thebombzen> try: -map 0 -c copy -c:a libopus, or something
[19:20:17] <thebombzen> -c copy tells it to copy all streams, and -c:a overrides the -c option cause it comes later in the command line (but it only applies to audio streams)
[19:21:10] *** Joins: Kruppt (~Kruppt@50-111-55-116.drhm.nc.frontiernet.net)
[19:22:54] *** Quits: Kruppt (~Kruppt@50-111-55-116.drhm.nc.frontiernet.net) (Client Quit)
[19:27:11] <marabej> the same result
[19:27:13] <marabej> I tried
[19:27:41] <marabej> -map 0 -c copy -c:a libopus -f mpegts
[19:27:59] <thebombzen> post complete command used and full output log
[19:28:04] <thebombzen> (to a paste site)
[19:28:09] <marabej> if I put '-sn' and its working, sn means to cut off the subtitles sstreams
[19:28:22] <thebombzen> are you *trying* to remove them?
[19:28:53] <thebombzen> cause it sounds like you aren't, and shouldn't
[19:32:15] *** Joins: idj (~idj@37.160.10.94)
[19:32:38] <idj> Here I am, sorry, I was busy with other stuff
[19:33:41] <marabej> ffmpeg -i udp://224.2.2.42:1234 -map 0 -c copy -c:a aac -f mpegts "udp://224.4.0.1:1234?pkt_size=1316"
[19:33:41] <marabej> Input #0, mpegts, from 'udp://224.2.2.42:1234':
[19:33:41] <marabej>   Duration: N/A, start: 33569.405056, bitrate: N/A
[19:33:41] <marabej>   Program 14
[19:33:41] <marabej> 	Metadata:
[19:33:42] <marabej> 	  service_name    : TRACE SPORTS INTER HD
[19:33:44] <marabej> 	  service_provider:
[19:33:46] <marabej> 	Stream #0:0[0x264]: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709, top first), 1920x1080 [SAR 1:1
[19:33:49] <marabej>  DAR 16:9], 25 fps, 50 tbr, 90k tbn, 50 tbc
[19:33:51] <marabej> 	Stream #0:1[0x278](eng): Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, fltp, 192 kb/s
[19:33:52] <DHE> please stop spamming the channel... ?
[19:33:53] <marabej> 	Stream #0:2[0x279](fra): Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, fltp, 192 kb/s
[19:33:55] <marabej> 	Stream #0:3[0x27c](rus): Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, fltp, 192 kb/s
[19:33:57] <marabej> 	Stream #0:4[0x28a](BUL): Subtitle: dvb_subtitle ([6][0][0][0] / 0x0006)
[19:33:58] <thebombzen> [2022-01-17_10:58:04] <thebombzen> (to a paste site)
[19:34:01] <marabej> Multiple -c, -codec, -acodec, -vcodec, -scodec or -dcodec options specified for stream 1, only the last option '-c:a a
[19:34:04] <marabej> ac' will be used.
[19:34:05] <thebombzen> TO A PASTE SITE
[19:34:06] <marabej> Stream mapping:
[19:34:09] <marabej>   Stream #0:0 -> #0:0 (copy)
[19:34:11] <marabej>   Stream #0:1 -> #0:1 (mp2 (native) -> aac (native))
[19:34:13] <marabej>   Stream #0:2 -> #0:2 (mp2 (native) -> aac (native))
[19:34:15] <marabej>   Stream #0:3 -> #0:3 (mp2 (native) -> aac (native))
[19:34:17] <marabej>   Stream #0:4 -> #0:4 (copy)
[19:34:19] <marabej> Press [q] to stop, [?] for help
[19:34:21] <marabej> Output #0, mpegts, to 'udp://224.4.0.1:1234?pkt_size=1316':
[19:34:24] <marabej>   Metadata:
[19:34:26] <marabej> 	encoder         : Lavf58.45.100
[19:34:28] <marabej> 	Stream #0:0: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709, top first), 1920x1080 [SAR 1:1 DAR 16:9], q=2-31, 25 fps, 50 tbr, 90k tbn, 90k tbc
[19:34:29] *** Joins: MrCollinsGA (~MrCollins@199.231.255.146)
[19:34:33] <marabej> 	Stream #0:1(eng): Audio: aac (LC), 48000 Hz, stereo, fltp, 128 kb/s
[19:34:36] <marabej> 	Metadata:
[19:34:38] <marabej> 	  encoder         : Lavc58.91.100 aac
[19:34:40] <marabej> 	Stream #0:2(fra): Audio: aac (LC), 48000 Hz, stereo, fltp, 128 kb/s
[19:34:43] <marabej> 	Metadata:
[19:34:45] <marabej> 	  encoder         : Lavc58.91.100 aac
[19:34:47] <marabej> 	Stream #0:3(rus): Audio: aac (LC), 48000 Hz, stereo, fltp, 128 kb/s
[19:34:50] <marabej> 	Metadata:
[19:34:52] <marabej> 	  encoder         : Lavc58.91.100 aac
[19:34:54] <marabej> 	Stream #0:4(BUL): Subtitle: dvb_subtitle ([6][0][0][0] / 0x0006)
[19:34:56] <marabej> frame= 3883 fps= 53 q=-1.0 Lsize=   45364kB time=00:01:20.01 bitrate=4644.4kbits/s speed= 1.1x
[19:34:56] <DHE> geez...
[19:35:01] <thebombzen> can someone kick him
[19:35:39] <idj> thebombzen I ignored him
[19:35:50] <thebombzen> oh yea that's a feature
[19:35:52] <BtbN> marabej, do that again and be permanently gone.
[19:35:53] *** Joins: zmt01 (~zmt00@user/zmt00)
[19:36:48] <BtbN> idj, I don't know what you're trying to do still, but adding random functionality into an otherwise entirely unrelated filter is not something that's acceptable upstream. Though you can do for your convenience whatever you like, just don't expect it to get merged.
[19:37:06] <idj> Ok BtbN, I got it
[19:37:25] <thebombzen> you're better off using an external tool to synthesize midi and then work with that tbh
[19:37:52] <BtbN> Yeah, I said that multiple times. Specially as MIDI is not MIDI, and how it sounds very much depends on what plays it
[19:38:06] <idj> I/m sad with this, I would have liked to do everything with one single package
[19:38:16] <idj> *I'm
[19:38:33] <thebombzen> rendering MIDI as sound requires you to have a soundfont, like how rendering text on an image requires a font
[19:38:39] <thebombzen> which is somewhat outside the scopeo f FFmpeg
[19:38:44] <BtbN> adding timidity support to ffmpeg is entirely possible, just that nobody has done it so far
[19:39:11] <idj> Yep, but a soundfont is bound to a synthesizer (eg, fluidsynth)
[19:39:17] <kepstin> but that would act like a "decoder", which takes midi input and then generates pcm audio for the rest of ffmpeg to deal with.
[19:39:29] <BtbN> Yeah, that's the only way it can ever work for ffmpeg
[19:39:35] <idj> Ok, ok
[19:39:44] <BtbN> you're not, in a sane way, get ffmpeg to pass around "raw midi"
[19:40:02] <idj> I'm sorry for being annoying, I take your advice
[19:40:09] <BtbN> it would require an entire new filter infrastucture, and a whole lot of other changes left and right
[19:40:47] <BtbN> And even if you managed to wrap raw midi into an avframe, the lv2 filter would not know what to do with it and/or interpret it as PCM
[19:41:23] <idj> Still I'm impressed by the power and the simplicity of FFMpeg
[19:41:41] <idj> In combination with ImageMagick it becomes even more powerful
[19:42:29] <idj> One question: I saw in the documentation that FFMpeg can read from Android cam/mic
[19:42:40] *** Joins: intrac_ (~intracube@user/intracube)
[19:42:42] <marabej> Excuse me, this is my ffmpeg log
[19:42:43] <marabej> https://pastebin.com/Ra7DxF9n
[19:42:48] <idj> How is this done? Can I use FFMpeg as a library in Android Apps?
[19:42:55] <BtbN> yes
[19:43:11] <idj> Are there any tutorial or so?
[19:43:25] <thebombzen> marabej: that looks like it's doing exactly what you want it to do
[19:43:30] <BtbN> There's plenty of examples on how to use the various libav libs.
[19:43:36] <BtbN> Specifically for Android, no idea
[19:43:45] *** Quits: intrac (~intracube@user/intracube) (Ping timeout: 256 seconds)
[19:44:19] <marabej> yes "thebombzen" looks like, but astra --analyze says other
[19:44:29] <marabej> with '-sn' everything is ok
[19:44:44] <thebombzen> don't know what astra is but it does exactly what you asked it to do, which is copy all streams and re-encode only the audio streams
[19:44:52] <thebombzen> but it did*
[19:45:11] <idj> Uhm, I also didn't find anything on the FFMpeg Documentation
[19:45:29] <idj> Didn't try the Wiki
[19:45:48] <thebombzen> idj: "ffmpeg android" first page of results on google: https://www.geeksforgeeks.org/how-to-use-ffmpeg-in-android-with-example/
[19:46:20] <marabej> astra is if software for analyzing, HLS creating, MPTS, restreaming etc.
[19:46:30] <idj> You're awesome - I forgot to Google for it, because I was assuming I would have found everything in ffmpeg.org
[19:47:12] <marabej> Astra is a professional software to organize digital broadcasting service for TV operators and broadcasters
[19:51:07] <marabej> ffmpeg works in my case but "spits out" the rezult on portions. If I remove subtitles stream with '-sn' everything is ok
[19:51:17] *** Quits: NovumDXW (~NovumDXW@2409:8a28:3610:29b0:74d8:d16b:92b3:8d89) (Ping timeout: 240 seconds)
[19:57:22] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:f26e:7062:e00:bba4)
[19:59:30] <JEEB> libavformat is known to wait for subtitles possibly for too long
[19:59:59] *** Joins: EvalCopy (~Eval_Copy@67-198-83-45.dyn.grandenetworks.net)
[20:00:03] <JEEB> you may want to try a patch > lavf/mux: bypass interleave delay early when waiting on subtitle streams
[20:00:06] <JEEB> it's on patchwork
[20:00:15] <JEEB> and see if that helps
[20:00:35] <JEEB> the author never reworked it according to review so it's stuck as it i
[20:00:36] <JEEB> *it is
[20:01:13] <JEEB> https://patchwork.ffmpeg.org/project/ffmpeg/list/?series=512
[20:03:38] <marabej> Interesting, thank you for advice. I'll check it
[20:16:13] *** Quits: System_Error (~SystemErr@user/systemerror) (Remote host closed the connection)
[20:20:51] <JEEB> not sure what the exact value is that I utilized for that option but even the default is probably an improvement :)
[20:21:43] <jbg> what would cause `ffmpeg -version` to show `--enable-libpulse` in its configure flags, but `ffmpeg -formats` to not list the `pulse` input format?
[20:22:47] *** Joins: minimal (~minimal@user/minimal)
[20:26:03] *** Quits: idj (~idj@37.160.10.94) (Quit: Leaving)
[20:27:30] *** Quits: wallacer (~quassel@2001:bc8:1824:9a:cafe:babe:b00b:aa03) (Ping timeout: 250 seconds)
[20:31:03] *** Joins: wallacer (~quassel@2001:bc8:1824:9a:cafe:babe:b00b:aa03)
[20:31:22] <jbg> aha: "WARNING: library configuration mismatch"
[20:32:19] *** Quits: dreamon (~dreamon@ppp-88-217-76-15.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[20:34:19] <JEEB> jbg: which sounds like the ffmpeg.c you're running and the libraries that are getting loaded for it come from different builds :)
[20:34:52] <jbg> yeah, i modified the APKBUILD (on alpine) for ffmpeg but missed that they have split it into a package for the libs and a package for the binary
[20:34:54] <JEEB> usually a case of building libraries with config X first, then somehow rebuilding stuff in a manner that made the new ffmpeg.c load libraries from the previous build
[20:39:03] *** Quits: orthoplex64 (~crm@70.120.0.94) (Remote host closed the connection)
[20:39:27] *** Joins: orthoplex64 (~crm@70.120.0.94)
[20:39:35] *** Quits: rsx (~dummy@ppp-188-174-135-179.dynamic.mnet-online.de) (Quit: rsx)
[20:40:55] *** Joins: xlei (~akans@pool-71-125-19-142.nycmny.fios.verizon.net)
[20:41:05] *** Quits: joes (~joes@dyndsl-095-033-032-093.ewe-ip-backbone.de) (Changing host)
[20:41:05] *** Joins: joes (~joes@hardfought/member/joes)
[20:52:49] <MrPaul> What would cause a mpeg-ts video to play back properly in various players but when encoded the timing drift and end up significantly out of sync?  And is there some additional knob I can add that'll use whatever playback uses to keep it in sync when I'm encoding?
[20:53:09] <marabej> JEEB it's working with this patch. Thank you JEEB! Very sad that ffmpeg in debian 9,10,11 doesn't include this patch. It's essental for MPEG TS which includes VIDEO+AUDIO_SUBTITLES streams
[20:53:48] <JEEB> that's because it was never finished since someone would have to pick up the patch and take it through review
[20:54:00] <JEEB> since there were proper comments given
[20:56:54] <JEEB> MrPaul: not sure what you're doing but check out the result with `-vsync passthrough -copyts` (or just with the passthrough). vsync being ffmpeg.c's logic of trying to make things consistent (so not really vsync since there is no rendering going on). copyts just happens to disable various discontinuity handling (also causes stuff to not get adjusted to start at pts=0)
[20:58:06] <MrPaul> @jeeb Thanks.  I'll give that a shot.  Will take a few hours.
[20:58:23] <JEEB> I recommend testing with shorter clips which make it happen personally
[20:58:29] <JEEB> that way you can iterate
[20:58:32] <JEEB> without it taking a long time
[20:59:39] <MrPaul> OK.  For what it's worth my goal was to convert to mkv/mp4 containers without reencode as it's easy for my editor to work with.  (-i foo.ts -c copy foo.mp4).  Was going to encode to x265 after I cut the video but if I have to convert first then so be it.
[20:59:50] <MrPaul> I'll try some samples towards the end first.
[20:59:57] <JEEB> as for what sort of discontinuity handling ffmpeg.c has, there's one that looks at the difference in time between streams (if they get too much afar, they get pulled closer together) and then there's the "sudden jump in a single stream" handling, where if from one packet to another the time jumps more than 10 seconds, then it gets just pulled next to previous packet
[21:00:25] <JEEB> the latter is what I have hit with various semi-broken samples
[21:00:35] <JEEB> where for example the broadcast loses video for 10 seconds
[21:00:37] <JEEB> while you have audio
[21:01:15] <JEEB> ffmpeg.c decides that it was just a discontinuity and sticks the first packet after those 10 seconds of nothing as if it came right after the previous received video packet
[21:01:43] <MrPaul> That may be what I'm hitting.  This is a file created with streamlink but I've only seen this issue once and was unable to fix it so I just left it be.  I'm more motivated now.
[21:02:39] <JEEB> you can look at it with ffprobe or so
[21:02:43] <JEEB> graph the timestamps etc
[21:03:25] <JEEB> `ffprobe -of json -show_packets -show_streams -i input.ts > streams_and_packets.json`
[21:03:32] <MrPaul> Thanks.  Was gonna go RTFM :)
[21:03:40] <JEEB> that will generate a nice json dump of how the FFmpeg API thinks is in the input
[21:03:43] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-431-13.w86-246.abo.wanadoo.fr) (Quit: The Lounge - https://thelounge.chat)
[21:03:53] <JEEB> so you have packets which have a stream index
[21:04:01] <JEEB> and then you have stream listing
[21:05:06] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-431-13.w86-246.abo.wanadoo.fr)
[21:05:21] <JEEB> basically the ffprobe dump will show what ffmpeg.c will receive as it reads stuff with the API, and then ffmpeg.c may do adjustments on top of that
[21:05:34] <JEEB> so it's as "raw" as possible :)
[21:05:40] <MrPaul> Running it now.  I'll take a look at the JSON and see if something stands out to me.
[21:06:01] <JEEB> you'll probably want to check for stuff like DTS suddenly jumping more thna usual etc
[21:06:11] <JEEB> if you have b-frames then pts may go up/down
[21:06:16] <JEEB> since there is re-ordering
[21:06:27] <JEEB> but DTS is always <= PTS and monotonically rising
[21:08:20] *** Joins: dems98 (~alessandr@gateway/tor-sasl/dems98)
[21:09:57] <dems98> Hi, is there a way to capture a game with x11grab without lag?
[21:10:24] *** Quits: someuser (~user@197.54.16.50) (Ping timeout: 250 seconds)
[21:12:08] *** Quits: MrZeus_ (~MrZeus@89.238.143.230) (Ping timeout: 250 seconds)
[21:17:27] *** Quits: intrac_ (~intracube@user/intracube) (Quit: Konversation terminated!)
[21:17:42] *** Joins: intrac (~intracube@user/intracube)
[21:17:48] *** Quits: joes (~joes@hardfought/member/joes) (Quit: Leaving)
[21:17:55] <BtbN> the lag is most likely your CPU being overwhelmed with game + video encoding.
[21:19:20] <dems98> BtbN: The lag I'm referring to is that of the output mp4: https://imgur.com/a/GLFqEpm
[21:20:02] <BtbN> Yeah, that looks like encoder overload
[21:20:18] <BtbN> it's smooth in the beginning, and once the buffers are full, it starts discarding frames
[21:20:40] <dems98> BtbN: Is there a way to fix it?
[21:20:54] <dems98> I've also tried with OBS but didn't get any improvment
[21:20:56] <BtbN> Get a better CPU, or turn down the quality of the video
[21:21:08] <BtbN> Or use a hardware encoder if you have one, but quality will suffer
[21:22:14] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-431-13.w86-246.abo.wanadoo.fr) (Quit: The Lounge - https://thelounge.chat)
[21:22:47] <dems98> In Windows with the same CPU I'm able to record a game like Portal 2 (not very demanding)
[21:24:48] <BtbN> x264 does not have notably different CPU load per OS, so that makes no sense
[21:26:10] <dems98> BtbN: maybe the ffmpeg command I'm running is wrong? I don't know...
[21:26:22] *** Joins: xkuru (~xkuru@user/xkuru)
[21:26:40] <BtbN> Is this on AMD by chance?
[21:26:41] *** Quits: EvalCopy (~Eval_Copy@67-198-83-45.dyn.grandenetworks.net) (Quit: Leaving)
[21:26:44] <BtbN> AMD GPU that is
[21:27:04] <dems98> ffmpeg -y -f pulse -i 1 -f x11grab -framerate 60 -video_size 1920x1080 -i :0 -c:a aac -c:v libx264 -preset ultrafast -crf 28 -refs 4 -qmin 4 -pix_fmt yuv420p -filter:v fps=60 test.mp4;
[21:27:49] <dems98> BtbN: no, I'm using the Intel integrated graphics (my pc is old and I have a problem with the dedicated AMD GPU)
[21:28:34] <BtbN> No idea about Copy-Back perf on Intel. I know it's horrible on AMD, and good on Nvidia.
[21:28:41] <dems98> Intel HD Graphics 520
[21:29:08] <dems98> BtbN: I've tried also with qsv encoding but no improvements
[21:30:00] <dems98> And with this: https://github.com/nowrep/obs-vkcapture but I have not been able to make it working...
[21:30:01] *** Joins: utoneq (~utoneq@gateway/tor-sasl/utoneq)
[21:35:57] *** Quits: cmp (~cmp@lfbn-ren-1-1575-159.w86-253.abo.wanadoo.fr) (Quit: Connection closed)
[21:39:00] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Ping timeout: 250 seconds)
[21:39:01] *** Joins: dvanloon (~dvanloon@user/dvanloon)
[21:39:21] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[21:42:07] *** Quits: five64333 (~five6@8.40.26.70) (Quit: Ping timeout (120 seconds))
[21:42:28] *** Joins: five64333 (~five6@8.40.26.70)
[21:45:10] *** Joins: EvalCopy (~Eval_Copy@67-198-83-45.dyn.grandenetworks.net)
[21:50:39] *** Joins: l4yer (~l4yer@178.239.168.223)
[21:51:00] *** Quits: utoneq (~utoneq@gateway/tor-sasl/utoneq) (Ping timeout: 276 seconds)
[21:52:56] *** Joins: dreamon (~dreamon@p57a4c526.dip0.t-ipconnect.de)
[21:52:57] *** Quits: MajorBiscuit (~MajorBisc@c-001-020-016.client.tudelft.eduvpn.nl) (Ping timeout: 240 seconds)
[21:57:39] *** Joins: Buster_ (~Buster@46.160.36.66)
[22:04:35] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-431-13.w86-246.abo.wanadoo.fr)
[22:05:18] *** Quits: Keshl (~Purple@idlerpg/player/Keshl) (Read error: Connection reset by peer)
[22:05:24] *** Joins: Keshl_ (~Purple@idlerpg/player/Keshl)
[22:15:50] *** Quits: Keshl_ (~Purple@idlerpg/player/Keshl) (Ping timeout: 250 seconds)
[22:15:52] *** Joins: crashrep (~crashrep@user/crashrep)
[22:26:29] *** Joins: Keshl_ (~Purple@idlerpg/player/Keshl)
[22:37:20] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.3)
[22:37:47] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[22:46:09] *** Quits: dems98 (~alessandr@gateway/tor-sasl/dems98) (Quit: Jack Frusciante è uscito da Libera...)
[22:50:25] *** Joins: darkapex_ (~darkapex@user/darkapex)
[22:51:43] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 256 seconds)
[23:00:09] *** Quits: orthoplex64 (~crm@70.120.0.94) (Remote host closed the connection)
[23:00:33] *** Joins: orthoplex64 (~crm@70.120.0.94)
[23:05:14] *** Joins: vlm (~vlm@user/vlm)
[23:05:45] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[23:06:14] *** Joins: jkwnki1 (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[23:08:32] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Remote host closed the connection)
[23:08:32] *** Quits: jkwnki1 (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Remote host closed the connection)
[23:15:33] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[23:18:33] *** Joins: irc_user (uid423822@id-423822.lymington.irccloud.com)
[23:25:24] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-8926-a20e-7ef6-caff.res6.spectrum.com)
[23:27:42] *** Joins: intrac_ (~intracube@user/intracube)
[23:29:02] *** Quits: intrac (~intracube@user/intracube) (Ping timeout: 240 seconds)
[23:41:57] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[23:45:43] *** Quits: MrCollinsGA (~MrCollins@199.231.255.146) (Read error: Connection reset by peer)
[23:50:47] *** Quits: chowbok (~quassel@207.181.244.106) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[23:52:11] *** Joins: chowbok (~quassel@207.181.244.106)
[23:56:46] *** Joins: debayer948 (~debayer@cpe-76-169-99-230.socal.res.rr.com)
