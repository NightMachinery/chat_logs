[00:03:09] *** Quits: stevenliu (~stevenliu@ffmpeg/developer/stevenliu) (Read error: Connection reset by peer)
[00:03:36] *** Joins: stevenliu (~stevenliu@ffmpeg/developer/stevenliu)
[00:04:58] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 272 seconds)
[00:05:27] *** Quits: muji369 (~muji369@2a00:23c7:e506:1401:4367:c3f7:893a:ad9f) (Ping timeout: 252 seconds)
[00:05:44] *** Quits: faLUKE (~paolo@host-212-171-66-64.retail.telecomitalia.it) (Quit: Konversation terminated!)
[00:07:55] *** Quits: beaver_ (~beaver@user/pong) (Ping timeout: 240 seconds)
[00:10:03] *** Joins: euphoricallysane (~quatro@user/euphoricallysane)
[00:15:53] *** Quits: euphoricallysane (~quatro@user/euphoricallysane) (Quit: Leaving)
[00:17:08] *** Joins: Buster_ (~Buster@46.160.36.66)
[00:17:40] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[00:18:06] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[00:23:47] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[00:24:24] *** Joins: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se)
[00:26:53] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[00:29:28] *** Quits: user282069 (user@2a01:7e00::f03c:92ff:fe7f:456d) (Quit: WeeChat 2.3)
[00:32:20] *** Parts: sy (~sy@zm.is) (bai)
[00:34:44] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 272 seconds)
[00:35:24] *** Quits: fling (~fling@user/fling) (Remote host closed the connection)
[00:37:27] *** Quits: foul_owl (~kerry@207.244.125.36) (Ping timeout: 250 seconds)
[00:38:27] *** Joins: muji369 (~muji369@2a00:23c7:e506:1401:be3d:7522:8321:411d)
[00:41:27] *** Quits: muji369 (~muji369@2a00:23c7:e506:1401:be3d:7522:8321:411d) (Remote host closed the connection)
[00:41:42] *** Joins: muji369 (~muji369@2a00:23c7:e506:1401:6e62:30b6:779f:d7d0)
[00:47:55] *** Quits: muji369 (~muji369@2a00:23c7:e506:1401:6e62:30b6:779f:d7d0) (Remote host closed the connection)
[00:48:12] *** Joins: muji369 (~muji369@2a00:23c7:e506:1401:e5ab:2cc2:1dcd:5d94)
[00:51:47] *** Joins: fling (~fling@user/fling)
[00:52:48] *** Joins: foul_owl (~kerry@207.244.125.36)
[00:55:23] *** Quits: muji369 (~muji369@2a00:23c7:e506:1401:e5ab:2cc2:1dcd:5d94) (Remote host closed the connection)
[01:07:03] *** Quits: Volgaar (~volgaar@2a01:cb14:675:e500:e1a8:ddac:588e:abe1) (Quit: WeeChat 3.4)
[01:11:05] *** Joins: muji369 (~muji369@2a00:23c7:e506:1401:8aee:1d45:f50e:b5c3)
[01:12:39] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[01:33:45] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:40:35] *** Joins: five64333349 (~five6@8.40.26.72)
[01:42:27] *** Quits: five6433334 (~five6@8.40.26.82) (Ping timeout: 250 seconds)
[01:42:27] *** five64333349 is now known as five6433334
[01:42:56] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[01:48:04] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[01:50:44] *** Quits: Buster_ (~Buster@46.160.36.66) (Ping timeout: 272 seconds)
[01:54:27] *** Joins: cheetahw26 (~cheetahw2@14.150-pool-xdsl-mi.sccoast.net)
[02:00:35] *** Quits: feiw (~Fei.Wang@192.55.46.52) (Read error: No route to host)
[02:01:31] *** Joins: feiw (~Fei.Wang@192.55.46.54)
[02:12:09] <babyface> can I somehow crop a video without reencoding it?
[02:15:06] <BtbN> not sensibly
[02:16:54] *** Quits: muji369 (~muji369@2a00:23c7:e506:1401:8aee:1d45:f50e:b5c3) (Ping timeout: 252 seconds)
[02:24:37] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[02:35:29] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[02:48:34] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[02:49:55] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 240 seconds)
[02:54:17] *** Joins: beaver (~beaver@user/pong)
[02:58:01] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:19:31] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 250 seconds)
[03:20:49] *** Quits: TheSas___ (~TheSashmo@158.106.77.7) (Quit: Leaving...)
[03:22:44] *** Joins: Preddy (~Preddy@92.44.103.122)
[03:24:43] *** Joins: crashrep (~crashrep@user/crashrep)
[03:25:43] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[03:26:35] *** Joins: TheSashm_ (~TheSashmo@158.106.77.7)
[03:39:02] *** Quits: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se) (Ping timeout: 272 seconds)
[03:40:43] *** Joins: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se)
[03:45:56] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[03:52:03] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[03:53:35] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[04:03:43] *** Quits: gnoo (gnoo@user/gnoo) (Ping timeout: 250 seconds)
[04:10:12] *** Quits: Preddy (~Preddy@92.44.103.122) (Quit: Leaving)
[04:21:33] *** Joins: pedalo (~pedalo@lfbn-dij-1-273-166.w86-235.abo.wanadoo.fr)
[04:26:23] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[04:40:56] *** Joins: gnoo (gnoo@user/gnoo)
[04:54:08] *** Quits: pedalo (~pedalo@lfbn-dij-1-273-166.w86-235.abo.wanadoo.fr) (Quit: Leaving)
[04:58:10] *** Joins: guest86 (~guest@161.117.202.209)
[05:00:16] *** Joins: bpmedley_ (~bpmedley@2600:1700:e2c:8410:a11b:dff5:39c9:bc45)
[05:02:17] *** Joins: lucaswang (~lucaswang@58.246.19.98)
[05:02:57] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:e438:c47c:d7b4:3864) (Ping timeout: 240 seconds)
[05:04:11] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[05:05:53] *** Joins: pedalo (~pedalo@lfbn-dij-1-273-166.w86-235.abo.wanadoo.fr)
[05:06:21] *** Joins: Hackerpcs (~user@user/hackerpcs)
[05:06:39] *** Quits: Hackerpcs (~user@user/hackerpcs) (Max SendQ exceeded)
[05:07:45] *** Joins: Hackerpcs (~user@user/hackerpcs)
[05:08:15] *** Quits: pedalo (~pedalo@lfbn-dij-1-273-166.w86-235.abo.wanadoo.fr) (Client Quit)
[05:12:46] *** Quits: c7s (~c7s@user/c7s) (Ping timeout: 272 seconds)
[05:23:54] *** Quits: qwedfg (~qwedfg@user/qwedfg) (Remote host closed the connection)
[05:24:28] *** Joins: qwedfg (~qwedfg@user/qwedfg)
[05:30:19] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:33:10] *** Joins: vlm (~vlm@user/vlm)
[05:35:24] *** Quits: MrZeus__ (~MrZeus@185.248.85.38) (Ping timeout: 240 seconds)
[05:51:03] *** Joins: Lesuorac (~Lesuorac@141.94.22.147)
[06:02:26] *** Quits: Lesuorac (~Lesuorac@141.94.22.147) (Quit: Connection closed)
[06:42:45] *** Quits: jos1 (~jos3@dyndsl-091-248-048-089.ewe-ip-backbone.de) (Ping timeout: 250 seconds)
[06:46:36] *** Quits: guest86 (~guest@161.117.202.209) (Ping timeout: 240 seconds)
[06:53:15] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 240 seconds)
[06:53:34] *** Joins: System_Error (~SystemErr@user/systemerror)
[06:55:35] *** Joins: jos1 (~jos3@dyndsl-178-142-069-147.ewe-ip-backbone.de)
[07:25:24] *** Quits: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se) (Ping timeout: 240 seconds)
[07:39:43] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[07:58:55] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[08:04:30] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 252 seconds)
[08:08:33] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[08:08:49] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[08:23:15] *** Quits: chowbok (~quassel@207.181.241.169) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[08:24:44] *** Joins: chowbok (~quassel@207.181.241.169)
[08:25:41] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[08:26:57] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[08:27:10] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[08:39:00] <aphysically> is there an easy trick to make start_time for video and audio 0 if you want it to be?
[08:39:23] <aphysically> I have files that start with video and audio start_time of 0, but typically always start with start_times ~a frame in when encoded
[08:39:36] <aphysically> with ~default ffmpeg.c options
[08:41:18] <aphysically> hmmmmm maybe this is an libfdk thing
[08:43:27] <aphysically> looks like aac encoder does different start time than libfdk_aac, but libopus results in same video start time as libfdk_aac (all of these always have audio start time at 0)
[08:44:32] *** Quits: babyface (~babyface@user/babyface) (Ping timeout: 240 seconds)
[08:45:45] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 252 seconds)
[08:50:32] *** Quits: Aelius (~Aelius@user/aelius) (Quit: quit)
[08:50:45] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[08:51:00] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[08:55:33] *** Joins: Aelius (~Aelius@user/aelius)
[08:57:18] *** Joins: irc_user (uid423822@id-423822.lymington.irccloud.com)
[08:57:49] <irc_user> is there any way to take a video that is just panning over an image which doesn't change, and somehow obtain the original image?
[09:01:08] *** Joins: babyface (~babyface@user/babyface)
[09:14:31] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:14:46] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[09:27:46] <klaxa> irc_user:i think you basically want image stitching and you can just use the video frames as input
[09:29:28] <klaxa> a quick search on github yielded this: https://github.com/ppwwyyxx/OpenPano if it does what it says it seems to be what you need
[09:31:41] *** Joins: meinside (uid24933@id-24933.helmsley.irccloud.com)
[09:31:44] <irc_user> klaxa: Thank you! Seems like ffmpeg isn't the tool for the job then, I'll check that out!
[09:32:51] <klaxa> ffmpeg might still be useful for extracting the individual frames ;)
[09:38:21] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:38:36] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[09:49:24] *** Quits: alban771 (~alban@37.166.16.187) (Ping timeout: 240 seconds)
[09:59:23] *** Joins: guest43 (~guest@222.128.6.148)
[09:59:26] *** Quits: guest43 (~guest@222.128.6.148) (Client Quit)
[10:02:02] *** Joins: Guest7421 (~Guest74@137.59.100.134)
[10:02:15] <Guest7421> hi
[10:02:29] *** Quits: Guest7421 (~Guest74@137.59.100.134) (Client Quit)
[10:09:13] *** Joins: lavaball (felix@31.204.155.215)
[10:24:34] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[10:24:49] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:25:57] *** Quits: hpkn (~hpkn@gateway/tor-sasl/hpkn) (Remote host closed the connection)
[10:33:55] *** Joins: eSlavko (~eSlavko@46.248.86.124)
[10:34:07] *** Joins: palasso (~palasso@user/palasso)
[10:35:34] <eSlavko> Hello.. I have question how to proper use timeout feature when using rtsp. Everything I tried doesn't work as I expected
[10:36:28] <eSlavko> I asked on https://stackoverflow.com/questions/71095477/ffmpeg-timeout-with-rtsp/71095777?noredirect=1# and someone there sugest to ask question here
[10:49:58] *** Joins: yaymukund (~yaymukund@user/yaymukund)
[10:50:32] <yaymukund> Basic question: Is there a neat way to split up long chains of -vf "a;b;c;d;e" over multiple lines in a script?
[10:56:25] *** Quits: kurosu (uid342582@id-342582.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[11:07:31] *** Quits: eSlavko (~eSlavko@46.248.86.124) (Quit: Client closed)
[11:09:12] <yaymukund> Eh, I did a zsh array + join using `${(j:,:)FILTERS}`
[11:10:11] *** Joins: eSlavko (~eSlavko@46.248.86.124)
[11:13:09] *** Quits: lavaball (felix@31.204.155.215) (Ping timeout: 252 seconds)
[11:16:29] *** Joins: Volgaar (~volgaar@2a01:cb14:675:e500:e1a8:ddac:588e:abe1)
[11:17:38] *** Joins: guest82 (~guest@161.117.202.209)
[11:30:29] *** Joins: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e)
[11:30:57] <aphysically> ugggghhhh
[11:30:59] <aphysically> gross
[11:31:06] <aphysically> I can't assume the bwdif filter doubles the framerate
[11:31:12] <aphysically> (as detected by ffprobe)
[11:31:37] <aphysically> sometimes it does and sometimes it doesn't! and sometimes the mode 1 or whatever will halve the framerate instead of leaving it the same
[11:32:15] <aphysically> I'm guessing this has something to do with the field order where some types of interlacing will display in ffprobe with the framerate already doubled and some won't
[11:32:28] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:32:37] <aphysically> I'm not sure where to find this information for which is which though hmmm'
[11:32:57] <aphysically> i.e. reliably predict what the framerate output of bwdif dinterlacing will be
[11:33:05] <aphysically> (based on information I can get from ffprobe?)
[11:39:51] *** Quits: kilobyte_ch (~kbch@77.109.171.85) (Ping timeout: 256 seconds)
[11:40:29] <aphysically> hmmm maybe the framerate in this video is just set wrong somehow
[11:40:36] <aphysically> interesting!
[11:43:23] *** Quits: NaviTheFairy (~Squirrel@user/navithefairy) (Remote host closed the connection)
[11:43:43] *** Joins: kilobyte_ch (~kbch@77.109.171.85)
[12:17:06] *** Quits: irc_user (uid423822@id-423822.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[12:24:03] <aphysically> I'll just not bother supporting incorrectly marked files
[12:27:07] *** Joins: whitepenguin (~whitepeng@user/whitepenguin)
[12:28:12] *** Quits: whitepenguin (~whitepeng@user/whitepenguin) (Remote host closed the connection)
[12:37:31] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[12:38:11] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[12:47:08] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[12:48:30] *** Quits: m5zs7k (aquares@web10.mydevil.net) (Read error: Connection reset by peer)
[12:48:48] *** Joins: m5zs7k_ (aquares@web10.mydevil.net)
[12:49:36] *** Quits: Macer (macer@lasziv.reprehensible.net) (Quit: Fear is the mind killer.)
[12:49:50] *** Joins: Macer (macer@lasziv.reprehensible.net)
[12:52:42] *** Quits: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e) (Ping timeout: 252 seconds)
[12:54:43] *** Joins: MajorBiscuit (~MajorBisc@c-001-001-032.client.tudelft.eduvpn.nl)
[12:55:12] *** Joins: cmp (~cmp@lputeaux-658-1-177-87.w92-154.abo.wanadoo.fr)
[12:57:46] *** m5zs7k_ is now known as m5zs7k
[13:11:27] *** Quits: eSlavko (~eSlavko@46.248.86.124) (Quit: Client closed)
[13:11:57] *** Joins: emagex (~user@user/emagex)
[13:14:00] *** Joins: rsx (~dummy@ppp-188-174-143-198.dynamic.mnet-online.de)
[13:36:35] *** Joins: cosimone (~user@93-44-187-99.ip98.fastwebnet.it)
[13:44:09] *** Quits: guest82 (~guest@161.117.202.209) (Quit: Connection closed)
[13:53:11] *** Quits: lucaswang (~lucaswang@58.246.19.98) (Quit: Connection closed)
[14:07:35] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[14:15:32] *** Quits: foul_owl (~kerry@207.244.125.36) (Ping timeout: 272 seconds)
[14:27:15] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[14:29:00] *** Joins: lavaball (felix@31.204.155.215)
[14:30:37] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Quit: 🖖)
[14:32:05] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-b815-d0c3-2814-01b3.res6.spectrum.com) (Quit: jarthur)
[14:32:30] *** Joins: dvanloon (~dvanloon@user/dvanloon)
[14:38:28] *** Joins: XdaddyZX_ (uid456733@id-456733.tinside.irccloud.com)
[14:39:44] *** Joins: foul_owl (~kerry@207.244.125.36)
[14:48:36] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[14:52:01] *** Joins: Wieku (~Wieku@80.82.17.10)
[14:55:36] *** Joins: blaze (~blaze@user/blaze)
[14:55:55] <Wieku> Hi, has anyone had problems with NVENC and ffmpeg 5.0? When I try to encode 960x540 or 640x480 videos, ffmpeg just freezes indefinitely. Want to make sure if it's an issue with BtBN build, not ffmpeg in itself. I have latest (511.79) NVIDIA drivers and BtBN's ffmpeg 4.4 build works fine. Thanks!
[14:58:23] <JEEB> I'd see where it gets stuck
[14:58:30] <JEEB> most likely in nvidia driver
[15:00:02] *** Joins: kurosu (uid342582@id-342582.hampstead.irccloud.com)
[15:02:48] <Wieku> Interesting, when I set "-loglevel debug" it started working?
[15:05:16] <Wieku> Without debug: https://img.wieku.me/22/2022-02-15_12-33-49_LOaeb.png (and stays like that)
[15:05:17] <Wieku> With debug: https://img.wieku.me/22/2022-02-15_12-34-55_NlYON.png (encode is progressing)
[15:05:53] <BtbN> Are you using some cuda filters?
[15:06:06] <BtbN> The initial compilation takes a few seconds
[15:07:01] <Wieku> Nope, with loglevel debug it starts encoding right off the bat
[15:07:23] <BtbN> Yes, the compilation is done only once and then is cached
[15:07:48] <BtbN> So I highly suspect you just weren't patient enough in your first attempt.
[15:08:16] <Wieku> When I remove loglevel argument it's stuck again though
[15:08:44] *** Quits: someuser (~user@197.54.81.3) (Ping timeout: 272 seconds)
[15:10:30] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[15:10:52] <BtbN> weird. What's your commandline?
[15:11:02] <BtbN> It's obviously not the fault of nvenc in that case then
[15:11:27] <Wieku> It works normally for 720p videos and above even without loglevel set to debug
[15:12:03] <Wieku> ffmpeg -y -f rawvideo -vcodec rawvideo -s 640x480 -pix_fmt yuv420p -r 60 -i - -an -vf vflip -profile:v high -preset p7 -c:v h264_nvenc -color_range 1 -colorspace 1 -color_trc 1 -color_prim
[15:12:04] <Wieku> aries 1 -movflags +write_colr -rc constqp -qp 25 video.mp4
[15:12:17] <Wieku> libx264 works normally with that resolution and -crf 20
[15:15:36] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[15:21:12] *** Quits: cosimone (~user@93-44-187-99.ip98.fastwebnet.it) (Ping timeout: 252 seconds)
[15:22:36] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[15:22:40] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[15:31:46] *** Joins: mort (~mort@188.166.114.29)
[15:31:54] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[15:32:37] <mort> hey, 'struct AVStream' used to have a 'codec' field, but that doesn't seem to exist anymore?
[15:33:00] *** pah is now known as pa
[15:45:38] <BtbN> It was deprecated like 5 years ago, and finally removed recently
[15:46:09] <mort> I see
[15:46:41] <mort> when you have an AVFormatContext, how are you supposed to know which stream corresponds to a video stream? We used to loop over the streams, find their codec, and check if its type is AVMEDIA_TYPE_VIDEO
[15:48:01] <mort> ah, codecpar
[15:56:46] <JEEB> yup
[15:57:21] <JEEB> basically the info is there, but you make your own codec context for that codec (intead of (ab)using the one that avformat might or might not have)
[16:00:19] <mort> yeah
[16:00:22] <mort> it makes sense
[16:05:17] *** Joins: MrZeus__ (~MrZeus@185.248.85.23)
[16:10:12] *** Joins: vent (~vent@185.62.190.213)
[16:15:11] *** Quits: l4yer (~l4yer@2001:ac8:31:8900:1011:a2ec:d550:c4fb) (Ping timeout: 250 seconds)
[16:57:34] *** Quits: cheetahw26 (~cheetahw2@14.150-pool-xdsl-mi.sccoast.net) (Quit: Client closed)
[17:07:21] *** Quits: MajorBiscuit (~MajorBisc@c-001-001-032.client.tudelft.eduvpn.nl) (Ping timeout: 252 seconds)
[17:11:38] *** Joins: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e)
[17:16:10] <yuri6037> Hi, I have a problem the tool I made refuses to decode a video generated by Davinci Resolve 17.The FFMPEG C API errors with "Failed to find decoder for stream #2". Acording to QuickTime Player video stream #1 is H.264 and audio stream #2 is "Linear PCM, 16 bit little-endian signed integer, 48000 Hz". Is it normal FFMPEG refuses to decode that audio?
[17:19:00] <BtbN> that audio already is decoded
[17:19:39] <yuri6037> but FFMPEG C API still fails
[17:20:18] <yuri6037> if it's already decoded why does FFMPEG C API throws  "Failed to find decoder for stream #2"
[17:20:40] <BtbN> Does the cli tool work fine for that file?
[17:20:57] <BtbN> Raw PCM is what you get when you decode something like AAC. So decoding it makes no sense. It's as unencoded as audio gets
[17:24:06] <yuri6037> wait that's even worse ffmpeg says there are 3 streams in it
[17:24:11] <yuri6037> quicktime ignores 1
[17:24:33] <BtbN> ah, so stream #2 might be some random data stream
[17:24:40] <yuri6037> wtf is that "Data: none (tmcd / 0x64636D74), 0 kb/s"?
[17:25:05] <yuri6037> why is davinci generating that crap where IMovie is not?
[17:25:19] <BtbN> Might just be some random DaVinci specific Metadata
[17:25:22] <BtbN> you can just ignore it
[17:25:33] <yuri6037> well thing is here my tool cannot accept that
[17:25:45] <BtbN> You need to fix your tool then ;)
[17:25:48] <yuri6037> is there a way to strip this data from the file using CLI ffmpeg?
[17:25:49] <galad> that's a timecode track
[17:26:14] <BtbN> I'm sure there is a way to see if a stream is a data stream, and just ignore it
[17:26:36] <yuri6037> what's the purpose of timecode track?
[17:27:09] <galad> it contains timecode from the original clips or something similar
[17:27:59] <yuri6037> ok then davinci is a peace of crap
[17:28:32] <yuri6037> when I ask it to build a video I'm not expecting it to render a video with original timecodes that's complete nonsense
[17:28:33] <galad> well that's a quite common track
[17:28:38] <BtbN> Nothing "piece of crap" about it
[17:28:48] <BtbN> data tracks are common and you need to be able to handle (i.e. ignore) them
[17:28:49] <galad> it's a separate track
[17:29:04] <galad> you can ignore it if you don't need it
[17:29:20] *** Quits: meinside (uid24933@id-24933.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[17:29:42] <yuri6037> the fact is imovie is smarter and works much better with my tool
[17:30:18] *** Joins: IOhannes (~zmoelnig@kolab.algorythmics.at)
[17:30:31] <yuri6037> can you strip that garbage track from ffmpeg CLI?
[17:31:10] <BtbN> Just remux while only mapping the two main streams
[17:31:24] <BtbN> but really, how doing literally nothing with a stream such a huge deal for you?
[17:31:33] <BtbN> Just check if it's a data stream aaand... do nothing
[17:32:08] <yuri6037> because more than 2 tracks flags other parts of the software because it expects 1 audio track and 1 video track
[17:32:19] <yuri6037> not 3 tracks
[17:32:26] <BtbN> it's one audio and one video track
[17:32:34] <BtbN> just ignore any data tracks
[17:34:42] <yuri6037> thanks the ffmpeg -i file.mov file1.mov fixed everything now it says AAC 48khz which I know works and no more garbage third track
[17:34:48] <galad> it would be easier to fix your tool
[17:35:20] <IOhannes> i'm rtying to port somebody  else's code to FFmpeg-5 and i'm currently stuck at "AVCodecContext->coder_type = FF_CODER_TYPE_RLE"; the (old) headers said this was deprecated and i should "use encoder private options instead". i'm not sure how i would do that though..
[17:35:24] <yuri6037> no it's faster this way 1 CLI call no need to update 3 git repos
[17:35:39] <BtbN> that command is a full re-encode and will a) take forever and b) trash your quality
[17:36:13] <BtbN> Add at the very least -c copy, and the relevant -map 's to only map the audio and video stream
[17:37:05] <another|> timecode is tricky though. can be a hassle to get rid of
[17:37:43] <yuri6037> would be nice that davinci gave us an option "generate a clean video"
[17:38:03] <BtbN> It is a clean video
[17:38:11] <BtbN> the only thing that's lacking in this scenario is your tool
[17:38:24] <another|> If your tool can't handle timecode, fix your tool
[17:38:37] <another|> because it's quite common in isobmff files
[17:39:08] *** Joins: minimal (~minimal@user/minimal)
[17:44:56] <IOhannes> now that the previous discussion has died away, i'll try again:
[17:45:01] <IOhannes> i'm trying to port somebody  else's code to FFmpeg-5 and i'm currently stuck at "AVCodecContext->coder_type = FF_CODER_TYPE_RLE"; the (old) headers said this was deprecated and i should "use encoder private options instead". i'm not sure how i would do that though..
[17:45:20] <yuri6037> Well that one is out of question because all streams have to load by " const AVCodec *codec = avcodec_find_decoder(stream->codecpar->codec_id);" if that returns NULL the entire system cannot continue all streams must be decodable
[17:45:50] <BtbN> Your entire system is majorly flawed then
[17:46:02] <BtbN> Sorry, but there is no other way to it. Your tool has a serious bug.
[17:46:10] <BtbN> And it's probably a two line fix.
[17:46:23] <yuri6037> there is a way because as I said with one CLI call it works
[17:46:35] <BtbN> Then at least fix the CLI call
[17:46:49] <yuri6037> what do you mean?
[17:46:54] <yuri6037> the CLI call works
[17:47:09] <another|> see above
[17:47:16] <BtbN> [15:05:39] <BtbN> that command is a full re-encode and will a) take forever and b) trash your quality
[17:47:16] <BtbN> [15:06:13] <BtbN> Add at the very least -c copy, and the relevant -map 's to only map the audio and video stream
[17:48:15] <yuri6037> yeah well your last message is complete nonsense to me what does "-c copy" mean and "-map" mean and how am I supposed to use that
[17:48:59] <BtbN> https://ffmpeg.org/ffmpeg-all.html has answers
[17:49:38] <IOhannes> yuri6037: it just tells ffmpeg to not re-encode
[17:50:21] <IOhannes> and "it" being flags you have to add to your CLI call
[17:51:27] <yuri6037> yeah but that still doesn't answer how am I supposed to use that
[17:53:42] <yuri6037> Is it normal that ffmpeg throws "[mov @ 0x7f8441006980] Application provided duration: -9223372036854775808 / timestamp: -9223372036854775808 is out of range for mov/mp4 format" when I run it to transcode?
[17:53:47] *** Quits: minimal (~minimal@user/minimal) (Read error: Connection reset by peer)
[17:53:59] *** Joins: minimal (~minimal@user/minimal)
[17:54:07] <yuri6037> and again that is on original file from davinci resolve 17
[18:00:04] *** Quits: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no) (Read error: Connection reset by peer)
[18:03:48] *** Quits: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e) (Ping timeout: 240 seconds)
[18:05:58] *** Joins: MajorBiscuit (~MajorBisc@c-001-001-032.client.tudelft.eduvpn.nl)
[18:08:26] <IOhannes> at the danger of resurrecting the *other* conversation again, i would like to re-ask my question:
[18:08:40] <IOhannes> i'm trying to port somebody else's code from FFmpeg-4 to FFmpeg-5.
[18:08:59] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[18:09:07] <IOhannes> this mostly went smooth, but I'm currently stuck at a call "AVCodecContext->coder_type = FF_CODER_TYPE_RLE" (in the original code)
[18:09:30] <IOhannes> this no longer compiles, as 'coder_type' and 'FF_CODER_TYPE_RLE' had been deprecated for ages and are now removed.
[18:09:46] <IOhannes> the (old) headers said that i should "use encoder private options instead".
[18:10:19] <IOhannes> however, I have no clue what to do that (me obviously not being a libav native)
[18:10:57] <IOhannes> is this channel the right place to ask such a question? (or should I go to some mailinglist instead)?
[18:11:45] <c_14> which encoder is being used?
[18:12:18] <IOhannes> no idea.
[18:12:29] <IOhannes> this is a generic wrapper library around ffmpeg
[18:12:39] <IOhannes> ah: hold the line
[18:13:43] <IOhannes> it's AV_CODEC_ID_TARGA
[18:14:28] <BtbN> look up what options it has, and set it on the codecs priv_opts
[18:14:40] *** Joins: minimal (~minimal@user/minimal)
[18:14:41] <BtbN> codec specific struct fields have been removed, so use the avoption interface
[18:14:56] <another|> ffmpeg -h encoder=targa
[18:15:07] <c_14> https://git.ffmpeg.org/gitweb/ffmpeg.git/blob/HEAD:/libavcodec/targaenc.c#l193
[18:15:10] <c_14> ^
[18:16:39] * IOhannes is reading up
[18:19:16] <IOhannes> so it's basically `av_opt_set_int(AVCodecContext, "rle", 1)`?
[18:19:18] <yuri6037> I found a variation of the command because map doesn't work
[18:19:19] <yuri6037> ffmpeg -i SAINADVPG_P2.mov -c:v copy -c:a aac -write_tmcd 0 SAINADVPG_2.mov
[18:19:24] *** Quits: minimal (~minimal@user/minimal) (Read error: Connection reset by peer)
[18:19:33] <BtbN> If you want aac audio, sure
[18:19:40] *** Joins: minimal (~minimal@user/minimal)
[18:19:54] <BtbN> but probably want to set a bitrate. The default is quite poor.
[18:20:10] <yuri6037> From what I've seen ffmpeg decided that it was better to keep tmcd at all costs so you have to add this strange "-write_tmcd 0"
[18:20:10] <another|> is it? IIRC it's 128k
[18:20:44] <another|> yep. that's what I meant with hassle
[18:20:47] <yuri6037> related issue: https://trac.ffmpeg.org/ticket/5492
[18:20:49] <another|> the hassle to find the muxer option
[18:22:32] <yuri6037> is there a less lossy audio codec which is supported by "const AVCodec *codec = avcodec_find_decoder(stream->codecpar->codec_id);"
[18:22:34] <yuri6037> ?
[18:24:40] <another|> any lossless codec?
[18:24:59] *** Joins: muji369 (~muji369@92.40.176.68.threembb.co.uk)
[18:25:18] <yuri6037> any audio codec which is least lossy and where avcodec_find_decoder is not NULL
[18:25:32] <yuri6037> non-lossy is fine of course
[18:25:51] <another|> flac?
[18:26:31] <yuri6037> unforunatly it appears mov doesn't want flac
[18:27:19] <yuri6037> i'm not sure if my avformat build accepts mp4
[18:28:00] <yuri6037> well no it's not gonna work
[18:28:12] <yuri6037> ffmpeg says flac is experimental
[18:28:34] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[18:29:09] <Wieku> iirc mkv supports flac
[18:29:26] <another|> still not sure why you can't keep the rawaudio
[18:30:15] <yuri6037> because avcodec_find_decoder refuses to support it
[18:31:33] <yuri6037> my software cannot work if all streams are not decodable and unfortunatly my ffmpeg build returns null in avcodec_find_decoder when the audio is said as PCM 16 bit signed LE
[18:31:33] <another|> why do you need a decoder for rawaudio?
[18:32:50] <yuri6037> the system requires a known audio format and video format that's all in the C API I've seen to use this avcodec_find_decoder API which is what I used that's all
[18:33:17] *** Quits: Volgaar (~volgaar@2a01:cb14:675:e500:e1a8:ddac:588e:abe1) (Quit: WeeChat 3.4)
[18:33:25] <yuri6037> but well if it returns NULL I just assume that FFMPEG doesn't know how to decode that stream
[18:33:38] *** Joins: Volgaar (~volgaar@2a01:cb14:675:e500:e1a8:ddac:588e:abe1)
[18:33:51] <another|> there's nothing to decode
[18:34:31] <yuri6037> maybe but anyway FFMPEG C API could have returned a dummy codec so that there's nothing unexpected from all examples you see
[18:35:02] <yuri6037> litterally all examples uses this function if randomly you have to go a different path sorry but it wasn't said in the doc
[18:36:19] <yuri6037> and it's too late to up 3 git repos without even talking about how painful it is to build because the actual machine running the code doesn't support FFMPEG I need to use a custom downloaded build
[18:41:48] <yuri6037> I've just found "Apple Lossless, 48000 Hz" alac on my mac ffmpeg no idea if the custom downloaded build does decode that
[18:41:58] <BtbN> There is a dummy decoder for raw PCM that does exactly that.
[18:42:18] <yuri6037> well then why is avcodec_find_decoder returning NULL?
[18:42:50] <BtbN> Nobody here knows your code, so that's impossible to answer.
[18:44:41] <yuri6037> I'll try again it's possible that the garbage timecode section was causing a conflict
[18:46:18] <IOhannes> BtbN: i'm still trying to figure out how to do set private options. afaict both 'av_opt_set_int(AVCodecContext->priv_data, "rle", 1, 0)' and 'av_opt_set_int(AVCodecContext, "rle", 1, AV_OPT_SEARCH_CHILDREN)' should work. is that correct?
[18:46:31] <IOhannes> and probably even 'av_opt_set_int(AVCodecContext, "rle", 1, 0)'
[18:46:58] <BtbN> only one of the two will work
[18:47:06] <yuri6037> well that was it so avcodec works it's just that the rust code conflicts when a garb timecode section exists
[18:47:06] <BtbN> the one for the AVOptions that contain the rle option
[18:47:26] <BtbN> The timecode track is still not garbage... It's a very standard thing.
[18:47:48] <BtbN> IOhannes, the usual flow is to try and set it on the codecs private AVOptions, and if that fails on the global ones
[18:47:58] <BtbN> in this case you can skip the later part, since you know it's a private option.
[18:48:20] <IOhannes> ok. so it's the first of my examples.
[18:48:29] <IOhannes> thanks.
[18:49:09] *** Joins: Kruppt (~Kruppt@50.111.17.210)
[18:49:31] <yuri6037> and I've just noticed davinci resolve generates a blue tint
[18:51:09] <IOhannes> yuri6037: that would typically be an alpha channel that you use as the blue channel
[18:51:30] <BtbN> h264 has no alpha channel
[18:51:41] <yuri6037> I don't think there's an alpha channel in my davinci project
[18:52:16] <yuri6037> perhaps is it a side effect of the free version available on mac app store or a side effect of running an old crappy slow MBP 2017
[18:53:33] <IOhannes> my point was more, that it is as misinterpretation  of the channels on the player (assuming that the player is self-written code)
[18:54:08] <yuri6037> well nevermind the blue tint is also on the original video
[18:56:37] *** Joins: c7s (~c7s@user/c7s)
[18:58:43] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[19:00:22] *** Joins: kwizart (~kwizart@fedora/kwizart)
[19:00:27] *** Parts: kwizart (~kwizart@fedora/kwizart) (Leaving)
[19:03:26] *** Quits: therobin (~UserNick@69-165-136-219.dsl.teksavvy.com) (Remote host closed the connection)
[19:18:16] *** Quits: emagex (~user@user/emagex) (Ping timeout: 272 seconds)
[19:22:45] *** Quits: XdaddyZX_ (uid456733@id-456733.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[19:34:13] *** Joins: xkuru (~xkuru@user/xkuru)
[19:41:46] *** Joins: Jerrk (~Jerrk@185.195.233.145)
[19:51:24] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[20:04:42] *** Joins: panella32 (~panella32@154.6.22.21)
[20:05:16] *** Quits: cc0 (~cc0@2001:bc8:1830:2329::1) (Remote host closed the connection)
[20:05:30] *** Joins: cc0 (~cc0@2001:bc8:1830:2329::1)
[20:05:42] *** Quits: cc0 (~cc0@2001:bc8:1830:2329::1) (Remote host closed the connection)
[20:06:05] *** Joins: cc0 (~cc0@2001:bc8:1830:2329::1)
[20:07:53] *** Quits: cc0 (~cc0@2001:bc8:1830:2329::1) (Remote host closed the connection)
[20:09:27] *** Joins: cc0 (~cc0@2001:bc8:1830:2329::1)
[20:18:23] *** Quits: cc0 (~cc0@2001:bc8:1830:2329::1) (Remote host closed the connection)
[20:18:36] *** Joins: cc0 (~cc0@2001:bc8:1830:2329::1)
[20:19:51] *** Quits: c7s (~c7s@user/c7s) (Ping timeout: 252 seconds)
[20:23:36] *** Joins: therobin (~UserNick@2607:f2c0:94b9:9e00:48fa:9021:2fed:458e)
[20:25:55] *** LRN_ is now known as LRN
[20:29:39] *** Joins: fkaa (~fkaa@user/fkaa)
[20:30:00] *** Parts: panella32 (~panella32@154.6.22.21) (Textual IRC Client: www.textualapp.com)
[20:35:48] *** Quits: kilobyte_ch (~kbch@77.109.171.85) (Ping timeout: 252 seconds)
[20:47:31] *** Joins: sagax (~sagax_nb@user/sagax)
[20:49:00] *** Joins: kilobyte_ch (~kbch@213.55.224.175)
[20:50:42] *** Quits: cc0 (~cc0@2001:bc8:1830:2329::1) (Remote host closed the connection)
[20:51:05] *** Joins: cc0 (~cc0@2001:bc8:1830:2329::1)
[20:52:00] *** Quits: arinov_ (~arinov@213.194.126.155) (Ping timeout: 272 seconds)
[21:01:06] *** Quits: kilobyte_ch (~kbch@213.55.224.175) (Ping timeout: 252 seconds)
[21:03:06] *** Joins: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6)
[21:09:08] *** Joins: arinov_ (~arinov@213.194.126.155)
[21:13:11] *** Joins: linuxuser07 (~linuxuser@41.71.2.179)
[21:13:19] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[21:14:07] *** Quits: MajorBiscuit (~MajorBisc@c-001-001-032.client.tudelft.eduvpn.nl) (Quit: WeeChat 3.4)
[21:14:41] *** Joins: kilobyte_ch (~kbch@77.109.171.85)
[21:17:33] *** Quits: linuxuser07 (~linuxuser@41.71.2.179) (Client Quit)
[21:18:45] *** Joins: someuser (~user@41.199.16.35)
[21:19:26] *** Quits: myon98 (~myon98@user/myon98) (Ping timeout: 250 seconds)
[21:20:21] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 252 seconds)
[21:22:19] *** Joins: crashrep (~crashrep@user/crashrep)
[21:31:51] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[21:32:03] *** Joins: c7s (~c7s@user/c7s)
[21:32:18] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[21:33:19] *** Quits: rsx (~dummy@ppp-188-174-143-198.dynamic.mnet-online.de) (Quit: rsx)
[21:41:05] *** Joins: l4yer (~l4yer@2001:ac8:31:8900:1012:9968:6473:e574)
[21:42:25] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[21:45:43] *** Joins: nrg (~NRG@user/nrg)
[21:47:06] *** Quits: kilobyte_ch (~kbch@77.109.171.85) (Ping timeout: 272 seconds)
[21:52:08] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[22:00:11] *** Joins: kilobyte_ch (~kbch@77.109.171.85)
[22:03:48] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[22:08:59] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[22:10:06] *** Joins: nrg (~NRG@user/nrg)
[22:11:45] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[22:13:09] *** Joins: Buster_ (~Buster@buster-net.ru)
[22:13:42] *** Joins: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se)
[22:17:11] *** Joins: NaviTheFairy (~Squirrel@user/navithefairy)
[22:18:08] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[22:26:29] <muji369> JEEB: btw, i was able to write a decoder in no time with http://blog.thescorpius.com/index.php/2017/07/15/presentation-graphic-stream-sup-files-bluray-subtitle-format/
[22:26:34] <muji369> which i found thanks to you, so thanks!
[22:28:33] <JEEB> for the record, as far as I understand the SUP container itself is not official in any way
[22:29:09] <JEEB> it's just a simple container into which put a presentation graphics stream when it's not part of an MPEG-TS mux
[22:29:35] <JEEB> since I couldn't find a reference to it in the blu-ray specification
[22:30:02] <JEEB> not that I can't be mistaken and my reference just being old :)
[22:30:13] *** Joins: x_kuru (~xkuru@user/xkuru)
[22:30:18] <JEEB> but it felt it was similar to these files with DVD subtitles in a minimal mux
[22:30:35] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 240 seconds)
[22:31:00] <JEEB> but great that you got some references that are more public on the presentation graphics side of things :)
[22:31:00] *** Joins: crashrep (~crashrep@user/crashrep)
[22:31:35] <JEEB> previously when someone was interested I posted certain specifics from the spec
[22:32:00] <JEEB> (since I'm not sure if it's kosher for me to share the actual specification with randoms)
[22:33:30] *** Quits: xkuru (~xkuru@user/xkuru) (Ping timeout: 252 seconds)
[22:34:29] <JEEB> muji369: also one thing - I'm pretty sure the PTS time base with sup is the same as mpeg-ts, 90k - and not 90 :)
[22:35:00] <muji369> JEEB: i was about to quickly realize this when i went and divide :P
[22:35:49] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[22:35:52] *** Quits: mthall (~quassel@mail.thalliman.com) (Ping timeout: 272 seconds)
[22:35:54] *** Joins: mthall_ (~quassel@mail.thalliman.com)
[22:36:03] *** Joins: rvalue (~rvalue@user/rvalue)
[22:36:25] <muji369> this is pretty great, i couyld write an OCR'er for PGS in 3 hrs
[22:38:01] <JEEB> but yea, just keep in mind that SUP is probably something that the community made, while PGS (the contents that are put into SUP) is what's utilized in blu-ray :)
[22:38:14] <JEEB> since I don't think SUP is a format utilized for mastering, either
[22:38:30] <JEEB> it's just a "convenient minimal container" if you want the subpictures without the mpeg-ts
[22:38:35] <muji369> yep, got it
[22:38:49] <JEEB> alrighty
[22:38:55] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[22:40:01] <muji369> what's not clear to me is how the duration of subtitles is decided
[22:40:11] <muji369> i guess it's just, one after the other with no gaps?
[22:40:40] <muji369> yea i guess it resets on the next PCS
[22:40:46] <muji369> some of them are empty
[22:40:56] <JEEB> broadcast and DVD/blu-ray often just utilize a reset packet
[22:42:16] <JEEB> there is an End of Display Set Segment but I'm not sure if that just marks "we finished transferring the subpicture stuff to you" or actual end
[22:44:42] <JEEB> I wonder what the spec keeps referring to as the "video frame grid". with a presentation composition segment it says that the PTS of the PES packet has to be on the video frame grid, while f.ex. for an end of display set segment it says "may or may not be on the video frame grid" :)
[22:45:08] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[22:47:48] <JEEB> btw, a fun bit about PGS in FFmpeg
[22:48:16] <JEEB> either original hacker didn't have enough references or something else, but the YCbCr->RGB conversion in the decoder was wrong for quite a while :)
[22:48:48] <JEEB> since it was interpreted as full range YCbCr, and I think rec601 (latter of which is correct for SD, but most blu-ray content is HD)
[22:48:48] *** Joins: MrZeus_ (~MrZeus@185.248.85.10)
[22:49:48] <JEEB> http://git.videolan.org/?p=ffmpeg.git;a=commit;h=9779b6262471d553c1ed811ff7312564e39d8adf
[22:49:59] <JEEB> man so I only got to this back in 2016
[22:51:48] *** Quits: MrZeus__ (~MrZeus@185.248.85.23) (Ping timeout: 240 seconds)
[22:52:59] <muji369> JEEB: aha, i'm actually doing that wrong rn
[22:53:48] <JEEB> technically the PGS are not supposed to be overlayed as RGB of course
[22:54:05] <JEEB> but rather players are supposed to overlay them on top of post-decoding YCbCr
[22:54:22] <JEEB> or I guess it could be as RGB too, since they actually specify it
[22:54:51] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[22:55:56] <JEEB> quote from the spec https://ffmpeg.org/pipermail/ffmpeg-devel/2016-April/193194.html
[22:56:01] *** Joins: nrg (~NRG@user/nrg)
[22:56:42] <JEEB> and since UHD BD PGS streams don't look completely incorrect I have a suspicion that this stuff still holds even if the video is BT.2020/PQ
[22:58:57] <JEEB> although I should probably try and interpret them as BT.2020/PQ some day as well. but they did look close enough that I'm sus
[23:10:05] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[23:20:29] <muji369> JEEB: btw, the doc does say 90k, but then says "divide by 90"
[23:22:02] <BtbN> to get from a 90k TB to a millisecond one you divide by 90 indeed
[23:23:42] <JEEB> yea the blog post does mention that it just uses division by 90 to get milliseconds
[23:24:30] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Remote host closed the connection)
[23:28:04] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[23:31:44] <muji369> BtbN: that's ... true.
[23:32:48] *** Joins: minimal (~minimal@user/minimal)
[23:39:39] *** Joins: euphoricallysane (~quatro@user/euphoricallysane)
[23:41:47] *** Quits: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se) (Ping timeout: 256 seconds)
[23:45:17] *** Quits: NaviTheFairy (~Squirrel@user/navithefairy) (Quit: Oh no. A thing broke.)
[23:45:50] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[23:47:33] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[23:47:59] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[23:50:24] *** Joins: NaviTheFairy (~Squirrel@user/navithefairy)
[23:52:24] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[23:52:42] *** Quits: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:9980:28d:a4a3:60f) (Ping timeout: 252 seconds)
[23:54:08] *** Joins: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se)
