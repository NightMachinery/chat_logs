[00:01:27] *** Joins: fendor__ (~fendor@212095005025.public.telering.at)
[00:05:11] *** Quits: fendor_ (~fendor@91.141.79.239.wireless.dyn.drei.com) (Ping timeout: 256 seconds)
[00:28:00] *** Quits: fendor__ (~fendor@212095005025.public.telering.at) (Read error: Connection reset by peer)
[00:28:06] *** Joins: fendor_ (~fendor@91.141.79.239.wireless.dyn.drei.com)
[00:54:38] <pepeiborra> maerwald: what is the `ghcup install -u` url for the Darwin artifacts? I tried with ` https://gitlab.haskell.org/maerwald/haskell-language-server/-/jobs/929333/artifacts/raw/out/haskell-language-server-1.6.1.0-x86_64-apple-darwin.tar.xz` but not good
[00:55:11] <maerwald> sec
[00:55:55] <maerwald> https://gitlab.haskell.org/maerwald/haskell-language-server/-/jobs/929333/artifacts/raw/out/haskell-language-server-1.6.1.0-x86_64-apple-darwin.tar.xz?job=tar-x86_64-apple-darwin
[00:56:26] *** Joins: coot (~coot@213.134.190.95)
[00:57:26] <pepeiborra> same issue
[00:57:31] <pepeiborra> https://www.irccloud.com/pastebin/nFpoI7Og/
[00:58:02] <maerwald> are you running the new ghcup?
[00:59:04] <maerwald> https://gitlab.haskell.org/haskell/ghcup-hs/-/pipelines/47053 darwin build is not yet finished
[00:59:28] <maerwald> should be in a minute
[00:59:31] <pepeiborra> aha, that was the problem.
[00:59:34] <pepeiborra> I have a local build
[01:00:07] <pepeiborra> works!
[01:00:11] <maerwald> cool
[01:00:40] <pepeiborra> Let's go ahead and land this, release ghcup, and after a while, migrate the vscode extension
[01:01:12] *** Quits: coot (~coot@213.134.190.95) (Client Quit)
[01:01:55] <maerwald> sure, I'll do some more manual testing tomorrow
[01:43:57] *** Quits: fendor_ (~fendor@91.141.79.239.wireless.dyn.drei.com) (Read error: Connection reset by peer)
[02:16:32] <maerwald> hls still doesn't work in ghcup codebase :o
[02:16:44] <maerwald> I just get back None from the server to whatever query
[02:23:51] <maerwald> I guess it's still boot files
[02:39:51] *** Quits: emad (~emad@156.214.198.176) (Quit: Leaving)
[07:07:52] *** Quits: pie_ (~pie_bnc@user/pie/x-2818909) (Quit: pie_)
[07:11:28] *** Joins: pie_ (~pie_bnc@user/pie/x-2818909)
[09:18:44] *** Joins: libertyprime (~libertypr@118-92-72-229.dsl.dyn.ihug.co.nz)
[10:56:56] *** Joins: fendor (~fendor@178.115.78.100.wireless.dyn.drei.com)
[11:17:01] *** Quits: libertyprime (~libertypr@118-92-72-229.dsl.dyn.ihug.co.nz) (Ping timeout: 256 seconds)
[12:26:14] *** Joins: libertyprime (~libertypr@118-92-72-229.dsl.dyn.ihug.co.nz)
[14:48:57] *** Quits: libertyprime (~libertypr@118-92-72-229.dsl.dyn.ihug.co.nz) (Ping timeout: 256 seconds)
[15:06:21] *** Joins: libertyprime (~libertypr@118-92-72-229.dsl.dyn.ihug.co.nz)
[15:55:48] *** Quits: hololeap (~hololeap@user/hololeap) (Remote host closed the connection)
[15:57:11] *** Joins: hololeap (~hololeap@user/hololeap)
[17:34:45] <maerwald> how do you build the documentation?
[17:47:35] <fendor[m]> I bet with nix
[17:48:15] <fendor[m]> there is a makefile...
[17:49:51] <fendor[m]> The instructions there say nix: https://github.com/haskell/haskell-language-server/pull/2083
[17:51:58] <fendor[m]> but it should be enough to have python installed with `myst-parser` and `sphinx_rtd_theme` (and sphinx)
[17:56:37] <maerwald> pip install -r requirements.txt
[17:56:41] <maerwald> and then `make html`
[17:59:33] <maerwald> I don't really understand the release doc... I propose someone else adjusts that
[18:00:36] <fendor[m]> fine by me
[18:01:05] <maerwald> I added https://github.com/haskell/haskell-language-server/pull/2675/commits/23aa27d29c6fb51a5bb0e91ef4f32d3699702ca4
[18:01:48] <fendor> awesome! That's a good start
[18:02:08] <fendor> the next question is, what is hacky in the deployment and what we need to document for future devs
[18:02:15] <fendor> however, we can figure that out some other time, imo
[18:02:19] <maerwald> the only thing left is to adjust the release github workflow... there are two options: 1. have gitlab push to github, 2. have github pull from a finished gitlab pipeline
[18:02:38] <maerwald> but that's not a blocker
[18:03:10] <maerwald> gitlab has api to download artifacts from CI jobs
[18:03:32] <maerwald> e.g. https://gitlab.haskell.org/api/v4/projects/1178/jobs/artifacts/hasufell/PR/distribute-dyn-builds/raw/out/haskell-language-server-1.6.1.0-x86_64-deb10-linux.tar.xz?job=tar-x86_64-linux-deb10
[18:06:04] <fendor> maerwald, cabal does have a ghc AbiTag, do you care about that being exposed?
[18:06:25] <fendor> probably mainly for the future
[18:06:51] <maerwald> in the compiler info?
[18:07:22] <fendor> yeah
[18:07:33] <maerwald> only for ghc or for all global packages?
[18:08:40] <maerwald> I'd say it should be an array: '{ "abis": [ { "pkg": "ghc", "abi": "1234" }, ... ]'
[18:09:14] <fendor> only for ghc
[18:09:36] <fendor> also it is hardcoded to NoAbiTag
[18:09:41] <maerwald> great
[18:09:43] <maerwald> :D
[18:10:14] <maerwald> prolly wait then until its useful
[18:11:27] <fendor> yeah sounds good. The json is going to be versioned anyway
[18:11:33] <fendor> (thinking about cabal status atm)
[19:01:13] *** Joins: shapr (~user@pool-173-73-44-186.washdc.fios.verizon.net)
[19:29:38] <fendor[m]> why is ghcjs so hard to use T_T
[19:40:52] <maerwald> the only way to install it is via nix... that's usually a good indicator something is messed up xD
[19:43:45] <Hecate> yup'
[20:31:20] <maerwald> fendor[m]: I'm still wondering about the repro case jneira[m] wanted
[20:32:44] <maerwald> a) when does the static build not work and b) does the dynamically linked one work instead or will it just error out harder with ABI mismatch message?
[20:37:21] <fendor[m]> where did jneira say that? However, I somewhat don't believe a test proving statically linked to be broken and dynamically linked to work is really possible without a very elaborate setup
[20:40:21] <maerwald> well, so are we sure this is actually an improvement? :D
[20:44:59] <maerwald> what I don't fully understand is what is the difference between: 1. a statically linked binary with an ABI match check and 2. a dynamically linked binary with an ABI match check
[21:01:51] <fendor[m]> ah yeah. I don't we can really prove that it works better, we will have to give it a try, imo
[21:02:38] <fendor[m]> I think that TH behaviour is different for some reason?
[21:21:31] <maerwald> wz1000: ^
[22:36:53] *** Quits: libertyprime (~libertypr@118-92-72-229.dsl.dyn.ihug.co.nz) (Remote host closed the connection)
[23:35:23] *** Quits: juhp (~juhp@128.106.188.82) (Ping timeout: 256 seconds)
[23:37:13] *** Joins: juhp (~juhp@128.106.188.82)
