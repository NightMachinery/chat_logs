[00:11:10] *** Quits: trace987 (~trace@user/trace) (Ping timeout: 272 seconds)
[00:14:17] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[00:15:12] *** Joins: trace987 (~trace@user/trace)
[01:05:09] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Quit: Ex-Chat)
[01:27:24] *** Quits: trace987 (~trace@user/trace) (Ping timeout: 240 seconds)
[01:29:06] *** Joins: trace987 (~trace@user/trace)
[01:37:01] *** Quits: mannequin (uid453465@id-453465.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[01:38:14] *** Joins: remirol (~lorimer@user/lorimer)
[01:38:14] *** Quits: lorimer (~lorimer@user/lorimer) (Killed (NickServ (GHOST command used by remirol)))
[01:38:16] *** remirol is now known as lorimer
[01:59:15] <dtm> greetz.  this is my Nth attempt over the years at setting up a real VPN and by golly i dont understand it, and every howto i've found is very detailed and still has flaws, but i'm almost done.  centos 7 server (openvpn 2.4.11, gonna upgrade this year) and fedora 35 client.
[02:00:27] <dtm> i'm testing it with this 'sudo /usr/sbin/openvpn --status-version 2 --suppress-timestamps --config /etc/openvpn/server.conf' and it says 'Enter Private Key Password:' so what on earth is that?  in the whole setup process, i dont think i've seen "private key password".
[02:01:01] <mzar> dtm: have you tried to do it on FreeBSD ? it's a piece of cake and works flawlessy
[02:02:03] <dtm> uhhhhh.. what?  of course not
[02:02:39] <mzar> you should give it a try
[02:02:45] <dtm> .....no.  so anyway where is that set?  do i need to add an "askpass" option to server.conf
[02:14:26] <rob0> If you set a password on the private key which was used to create your certificate signing request, you have to provide it.
[02:14:49] <rob0> It is of course generally recommended that a server key NOT have a passphrase.
[02:16:25] <rob0> I hate to suggest this, because this channel is for the open source community openvpn, but you really might want to look at Access Server for the server side.
[02:16:36] <dtm> rob0: i see!  and for funsies, i guess i'd take suggestions on a relevant easy howto.
[02:16:50] <dtm> okay well i'm so glad you hate that so much!
[02:17:00] <thumbs> be careful with howtos, they are sewn with landmines
[02:17:02] <dtm> that's super good
[02:17:06] <rob0> the community howto is at the wiki, community.openvpn.net
[02:17:08] <dtm> omg it's thumbs 
[02:17:33] <thumbs> no, this is rob0 here.
[02:17:41] <dtm> where
[02:17:47] <rob0> Access Server is proprietary software, but free (as in beer) for two concurrent connections.
[02:18:33] <dtm> even after knowing it's inappropriate, and being rejected, you still went with the brain toxin metaphor and not even "free as in lunch" lol
[02:18:43] <rob0> That's why I hate to suggest it, proprietary.  But I did because it would certainly be easier for you.
[02:18:44] <dtm> i'm just kindly noting that
[02:19:11] <dtm> just another remote, unreceptive observation in kind
[02:19:37] <rob0> I've been in the free software world a lot of years, and "free as in beer" is a common expression.
[02:19:38] <dtm> i could put it on repeat if that helps
[02:20:02] <rob0> what helps is for me to get back to work.  Good luck
[02:20:15] <dtm> it's the antithetical echo chamber hour ^_^
[02:20:17] <dtm> rob0: thank you so much
[02:20:54] <rob0> yw
[02:20:55] <dtm> this is a tedious thing to learn and i have my coffee
[02:21:37] <dtm> also i hope you're not workin too hard on a saturday
[02:22:12] <rob0> it is a regular work day for me.  We have 24/7 coverage.
[02:22:43] <dtm> okay but i'm jealous and always up for a data center tour.  got any cable porn or spaghetti?
[02:23:08] <dtm> i haven't been in one for *way* too long, hence the stupid n00b questions
[02:23:17] <rob0> I work from home in rural Mississippi.
[02:23:41] <dtm> a road warrior, i love it
[02:23:57] <dtm> i come from outside smallville
[02:24:04] <dtm> pre-internet
[02:34:07] *** Quits: DoucheEnrique (~quassel@i5C7563E0.versanet.de) (Ping timeout: 256 seconds)
[02:34:35] *** Joins: DoucheEnrique (~quassel@i5C756508.versanet.de)
[02:47:58] <dtm> rob0: okay i'm sorry but what file do i need to delete and what step to re-run, to eliminate the password on the private key?
[02:54:21] <thumbs> see man openssl
[02:54:29] <dtm> when i run './easyrsa build-server-full server', it requires PEM and ca.key both
[02:55:26] <dtm> thumbs: okay, for what?
[02:56:01] <dtm> running openssl is not in any of the given commands
[02:56:53] <dtm> is it './easyrsa build-ca nopass'?
[02:57:31] <dtm> no that's for the CA signing
[02:59:40] <rob0> ca is CA, yes
[03:00:07] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[03:00:14] <rob0> you probably DO want to keep a passphrase on the CA key
[03:00:19] <dtm> okay
[03:00:26] <dtm> yeah that's just an occasional manual command
[03:00:28] <rob0> you only use it manually and deliberately
[03:01:21] <rob0> server keys and usually also client keys do not use passphrases
[03:01:46] <rob0> it's up to you of course, if you want higher security over ease of use
[03:02:38] <dtm> rob0: yeah we already agreed so i asked what to do.  what file to delete and what command to re-run
[03:04:33] <rob0> yeah, you'd have to look at easyrsa documentation, I don't use it
[03:04:48] <dtm> ok was i correct though, that i can store a password in a file for openvpn to feed itself upon startup?  like with the 'askpass' option?
[03:04:49] <rob0> and I guess also in your openvpn config file
[03:05:42] <dtm> if this particular password is only for server startup purposes then i can store it
[03:28:40] *** Quits: trace987 (~trace@user/trace) (Remote host closed the connection)
[03:29:05] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Quit: Ex-Chat)
[04:20:29] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[04:26:51] *** Joins: trace987 (~trace@user/trace)
[04:29:27] <dtm> rob0: so let's say this "Enter Private Key Password:" isn't going away.  where did that ever get set?  i wrote down every credential i created, and then i tried pasting em all into this and they dont work lol.  it says "Cannot load private key file private/server.key"  and then is that what the "askpass" argument is for in the server and client conf files?
[04:30:38] <dtm> but private/server.key does exist
[04:32:41] <dtm> i guess /etc/openvpn should be owned by group 'openvpn' to be readable
[04:33:16] <dtm> if the openvpn daemon automatically drops privilege and changes user
[04:35:34] <dtm> aha i guess that was it, and it is the PEM passphrase.
[04:36:40] <dtm> i hope this isn't complicated by the fact that my openvpn server is to run inside an openvz VPS
[04:37:05] <rob0> it might not work at all inside openvz
[04:47:44] <dtm> rob0: neato
[04:48:39] <dtm> rob0: do you know where i'd store that password?
[04:48:44] <dtm> the PEM passphrase
[04:50:06] <rob0> that depends how you are starting openvpn, and no
[04:50:15] <dtm> k
[04:50:27] <rob0> I wouldn't use a passphrase on a server key
[04:51:10] <rob0> if you want to, you get to figure out how :)
[04:51:21] <dtm> i can't figure out how not to ;)
[04:51:48] <rob0> easyrsa created the key
[04:51:49] <dtm> if this is impossible in openvz, then that's my first main complaint about not having a real kernel like in KVM
[04:52:10] <dtm> it's kind of a kernel!
[04:52:20] <rob0> well, openvz MIGHT work IF the host kernel has everything you need!
[04:52:36] <rob0> easyrsa created the key using openssl commands
[04:52:53] <rob0> and openssl commands can remove the passphrase from the key
[04:52:58] <dtm> k
[04:53:25] <rob0> and if you had taken my advice and tried Access Server, you'd be trying to figure out routing by now.
[04:53:28] <rob0> :)
[04:53:37] <dtm> okay now where'd i put my trout
[04:54:06] <dtm> i need me some turbo TroutPower(tm).  that thing is slippery
[04:54:46] <rob0> you're still struggling with the TLS PKI, which is easyrsa
[04:55:01] <dtm> listen here, i got some advice  /me ties rob0's upstream in a knot
[04:55:24] <dtm> k  well you gave me a google fu clue
[04:55:26] <rob0> in AS, that's built-in (for better or worse, less secure to have the CA on the VPN server.)
[04:55:46] <dtm> where's the CA ideally located?
[04:55:57] <BtbN> In a safe, somewhere secret
[04:55:59] <dtm> on paper?
[04:56:15] <rob0> off the VPN, ^^ a USB disk in a safe
[04:56:17] <BtbN> Something that last at least as long as the cert
[04:56:21] <dtm> k
[04:56:41] <BtbN> Though tbf, for single-server CAs, I never bother. If someone takes control of the server to reach the CA, I lost anyway
[04:56:54] <dtm> so there's no call for it being on the server whatsoever, and it just exists amorphously, but easyrsa requires it on the server?
[04:56:58] <rob0> That said about less secure, ^^ it's not a major worry
[04:57:21] *** Joins: winston-yallow (~winston-y@2a04:4540:6c1e:e600:a51c:68e0:7ffc:3481)
[04:57:26] <rob0> easyrsa DOES NOT require that it is on a server, in fact, it recommends against that
[04:57:32] <dtm> oh.
[04:57:42] <rob0> why did you think that was required?
[04:57:57] <dtm> because that's what it, or these howtos, ended up with
[04:58:05] <rob0> howtos are stupid
[04:58:10] <dtm> k
[04:58:17] <dtm> not knowin stuff is stewpid
[04:58:29] <rob0> bloggers seldom know enough to write good documentation
[04:58:48] <dtm> this is fedora and others
[05:01:50] <BtbN> If you are only setting up a single server, it's not all that critical really
[05:02:01] <BtbN> if someone gains access to the CA, they then also gained access to the VPN server itself
[05:02:37] <dtm> yeah this is trivial, personal, single server
[05:04:05] <winston-yallow> I set up an openvpn server on debian. I can't access the internet once I'm connected. I narrowd down the issue to the servers firewall (ufw). When I disable ufw everything works. What can I do to further debug this? Any tools or steps that could give me more information than "something with the firewall"?
[05:04:11] <dtm> okay i think we have openvz lobotomy.  one workaround upon each boot is 'mknod /dev/net/tun c 10 200' but still, 'modprobe tun ; lsmod tun' does nothing.  and then this --> ERROR: Cannot open TUN/TAP dev /dev/net/tun: Operation not permitted (errno=1)
[05:05:18] <rob0> Your openvz does not have tun support, end of that fight.
[05:05:24] <dtm> b3wm
[05:05:28] <dtm> headshot
[05:06:17] <rob0> winston-yallow: if you want help with ufw, good luck with that.  I'd say throw it away and just use a simple iptables or nft ruleset.
[05:06:32] *** Joins: tracey (~trace@user/trace)
[05:07:13] <winston-yallow> rob0 any reason why you recommend iptables? I jsut moved from iptables to ufw since a colleague recommended it and I wanted to try it
[05:07:27] <BtbN> you realize that ufw sits on top of iptables?
[05:08:13] <winston-yallow> BtbN yes I do, but it seemed like a neat way to manage iptables
[05:08:14] <rob0> ufw is just a broken frontend
[05:08:25] <rob0> ask your friend to help with it
[05:08:35] <rob0> (I bet s/he can't)
[05:08:46] <BtbN> Every time I came into contact with ufw, or any of the other iptables-manglers, they made a right mess of the actual ruleset they generate
[05:08:58] <BtbN> So my usual reaction to seeing one of those is to immediately uninstall them
[05:09:16] <winston-yallow> okay time to ditch ufw before even starting to use it, thanks for the heads up
[05:09:28] *** Quits: trace987 (~trace@user/trace) (Ping timeout: 272 seconds)
[05:10:57] <dtm> okay this is the second time i've done elaborate research and realized at the end that i had always been dead man walking.  missed dependency.  lol.
[05:11:02] <dtm> this week
[05:12:36] <dtm> i appreciate everybody's technical contribution to the farce.  it was valid practice because i am lifelong VPN-deficient.
[05:32:25] <dtm> ultimately, all i need is a UDP-capable proxy.  i first tried socks5 via one ssh command, and then realized i needed even a little bit of udp too.  not just tcp.
[05:54:53] *** Quits: winston-yallow (~winston-y@2a04:4540:6c1e:e600:a51c:68e0:7ffc:3481) (Quit: Client closed)
[06:19:25] <rob0> what would you do with a UDP proxy?
[06:40:28] <dtm> rob0: just proxy both tcp and udp for a couple apps for privacy.  i see now that openssh's socks5 simply can't proxy udp.  so maybe a different proxy will.
[06:57:07] *** Joins: adeliktas9 (~adeliktas@i59F5F949.versanet.de)
[06:59:01] *** Quits: adeliktas (~adeliktas@i59F52DFA.versanet.de) (Ping timeout: 256 seconds)
[06:59:01] *** adeliktas9 is now known as adeliktas
[07:28:49] *** Joins: gast0n (~g4570n@user/gast0n)
[08:13:49] <rob0> I'm asking what you would do with UDP through the proxy, DNS?
[08:46:47] *** Quits: lord_daemon (~lord_daem@187.36.203.244) (Quit: Leaving)
[09:19:24] *** Quits: gast0n (~g4570n@user/gast0n) (Quit: Bye, see you soon! ðŸ‘‹)
[09:19:58] <dtm> rob0: maybe, and bittorrent, at least
[09:23:00] <dtm> i was even reading that it's possible to convert udp into tcp, through openssh's tcp-only socks5.  i dunno how it's supposed to be converted back on the other endpoint. socat -T15 udp4-recvfrom:1337,reuseaddr,fork tcp:localhost:1337
[09:27:14] <dtm> my VPS support dude says he heard openvpn is possible there but it's hard... I guess i'll await escalation lol
[10:24:49] *** Quits: noarb (~noarb@user/noarb) (Quit: ZNC 1.8.2 - https://znc.in)
[10:28:57] *** Joins: noarb (~noarb@user/noarb)
[10:32:33] *** Joins: noarb- (~noarb@user/noarb)
[10:34:05] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 256 seconds)
[11:23:39] *** Quits: noarb- (~noarb@user/noarb) (Ping timeout: 256 seconds)
[11:25:29] *** Joins: noarb (~noarb@user/noarb)
[11:29:05] *** Joins: noarb- (~noarb@user/noarb)
[11:30:30] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 260 seconds)
[11:44:40] *** Joins: noarb (~noarb@user/noarb)
[11:45:45] *** Quits: noarb- (~noarb@user/noarb) (Ping timeout: 256 seconds)
[12:36:47] *** Joins: Snegodick (~ne@user/Snegodick)
[13:07:20] *** Joins: plasma (plasma@firstlevel.technicalsupportresources.com)
[13:30:29] *** Joins: winston-yallow (~winston-y@2a04:4540:6c16:3100:79ed:3ac3:90cb:707a)
[13:30:34] *** Quits: Snegodick (~ne@user/Snegodick) (Quit: Going offline, see ya! (www.adiirc.com))
[13:35:38] <winston-yallow> Is there some common tooling to allow users to generate their own client configs? Something like users can login on a website and then generate & download configs. This way users can generate a separate config for each of their devices and would also be able to revoke them (via the website) in case they loose a device. Is there some commonly used
[13:35:38] <winston-yallow> tooling for this or will I be on my own to implement this?
[13:39:50] *** Quits: jkotra (~jkotra@122.169.141.242) (Quit: ZNC 1.8.2+deb2 - https://znc.in)
[13:41:11] *** Joins: jkotra (~jkotra@122.169.141.242)
[13:55:30] *** Quits: jkotra (~jkotra@122.169.141.242) (Quit: ZNC 1.8.2+deb2 - https://znc.in)
[13:55:49] *** Joins: jkotra (~jkotra@122.169.141.242)
[14:23:31] *** Quits: jkotra (~jkotra@122.169.141.242) (Quit: ZNC 1.8.2+deb2 - https://znc.in)
[14:23:56] *** Joins: jkotra (~jkotra@122.169.141.242)
[14:27:15] *** Quits: winston-yallow (~winston-y@2a04:4540:6c16:3100:79ed:3ac3:90cb:707a) (Ping timeout: 256 seconds)
[14:32:37] *** Joins: Snegodick (~ne@user/Snegodick)
[14:58:11] *** Quits: Snegodick (~ne@user/Snegodick) (Quit: Going offline, see ya! (www.adiirc.com))
[15:12:06] *** Quits: jkotra (~jkotra@122.169.141.242) (Quit: ZNC 1.8.2+deb2 - https://znc.in)
[15:12:56] *** Joins: jkotra (~jkotra@122.169.141.242)
[15:30:17] *** Quits: csrf (~csrf@user/csrf) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[15:31:01] *** Joins: csrf (~csrf@user/csrf)
[15:47:25] *** Quits: ender (~ender1@2a01:260:4094:1:6045:6fff:fedd:cbf3) (Ping timeout: 240 seconds)
[15:48:09] *** Joins: ender (~ender1@2a01:260:4094:1:6045:6fff:fedd:cbf3)
[16:34:58] *** Joins: joo-_ (~joo-_@fsf/member/joo--)
[16:36:05] <joo-_> how can i list the other devices on the same network? i have setup some dns intries in the openvpn cloud, not sure if You are familiar with that system or only self-installation... i could just print the page of the dns entries i have created, but i would like it to be retrieved somehow
[16:40:13] <mzar> winston-yallow: I use perl and bourne shell scripting
[16:46:09] <BtbN> joo-_, layer 3 VPN has no LAN-Like auto discovery
[16:47:27] <joo-_> ok i guess i could maintain a file myself for that
[17:19:10] <Tuvix> joo-_: To what end? If 'openvpn cloud' is part of the commercial offerings, you probably need to speak to the vendor. This isn't a vendor or provider-specific support environment. However, there are low-effort ways to do something like publish a list of connected devices.
[17:20:57] <joo-_> just to get an overview of my network and the names of the servers and clients available on the network 
[17:21:16] <Tuvix> On the VPN network, or on networks behind those devices?
[17:21:42] <Tuvix> If all you want is to see the list of common-names and VPN-addresses, the status-file already has all that information.
[17:22:19] <joo-_> what status file ? i want to see on the vpn network only which clients are connected
[17:22:28] <Tuvix> That's what that feature does, yes.
[17:22:46] <Tuvix> See the `--status` option in the manpage.
[17:24:25] <joo-_> for openvpn ?
[17:24:44] <Tuvix> Yes. If you're on a Unix-alike system, `man openvpn` will show you. Search for that option.
[17:25:27] <joo-_> yes but it says it can write operational status to a file every n seconds, so are You suggesting thats what i do on each machine or on the server? and read from that file ?
[17:25:59] <joo-_> ah it is a status file, i thought it was like a logfile
[17:26:00] <Tuvix> You told me all you wanted was to see that data; the status file does that. This is an option that you'd add to the server.
[17:26:33] <Tuvix> And yes, you have it right. You said you wanted to see which VPN clients were connected. Just view the status-file and you see that. If you want something else perhaps ask about your real goal instead.
[18:30:23] *** Joins: gast0n (~g4570n@user/gast0n)
[18:43:03] *** Quits: tracey (~trace@user/trace) (Remote host closed the connection)
[18:45:04] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[18:51:52] *** Joins: trace987 (~trace@user/trace)
[19:11:21] <joo-_> ok thanks
[20:58:36] *** Quits: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com) (Ping timeout: 240 seconds)
[21:15:06] *** Joins: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com)
[21:21:46] *** Quits: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com) (Ping timeout: 260 seconds)
[22:30:18] *** Quits: Haxxa (~Haxxa@203-123-96-204.ip4.superloop.com) (Remote host closed the connection)
[22:31:28] *** Joins: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com)
[22:31:38] *** Joins: Haxxa (~Haxxa@203-123-96-204.ip4.superloop.com)
[22:45:03] *** Quits: Haxxa (~Haxxa@203-123-96-204.ip4.superloop.com) (Quit: Haxxa flies away.)
[22:47:50] *** Joins: Haxxa (~Haxxa@203-123-96-204.ip4.superloop.com)
[23:00:23] *** Quits: nerozero (~nerozero@87.253.63.54) (Ping timeout: 256 seconds)
[23:07:26] *** Quits: Haxxa (~Haxxa@203-123-96-204.ip4.superloop.com) (Ping timeout: 245 seconds)
[23:08:43] *** Joins: Haxxa (~Haxxa@203-123-96-204.ip4.superloop.com)
[23:14:45] *** Quits: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com) (Ping timeout: 268 seconds)
[23:15:20] *** Joins: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com)
