[00:01:27] *** Parts: nickspoon (8f6e16a287@user/nickspoon) ()
[00:02:44] *** Quits: anorak (~anorak@p200300db9f193761bddac3409298648a.dip0.t-ipconnect.de) (Remote host closed the connection)
[00:03:41] *** Quits: _sean (~xsean@203.86.202.187) (Ping timeout: 250 seconds)
[00:17:20] *** Joins: vidbina (~vid@dynamic-077-191-104-051.77.191.pool.telefonica.de)
[00:21:19] *** Quits: GailWynand (~GailWynan@195.216.219.1) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[00:30:02] *** Quits: Ivii (~Ivyy@2001:a62:4c3:8e01:6d96:190f:824f:1d2) (Quit: Leaving)
[00:42:56] *** Quits: rvalue (~rvalue@user/rvalue) (Quit: ZNC - https://znc.in)
[00:45:15] *** Joins: rvalue (~rvalue@user/rvalue)
[00:55:15] *** Quits: Nightah (~Nightah@user/nightah) (Quit: ZNC - https://znc.in)
[00:58:38] *** Joins: Nightah (~Nightah@user/nightah)
[00:59:18] *** Joins: bn_work (uid268505@id-268505.uxbridge.irccloud.com)
[01:11:22] *** Joins: SigHunter (~SigHunter@2a02:810d:8b80:8fc:81c2:1117:f46:70b5)
[01:15:48] *** Quits: Nightah (~Nightah@user/nightah) (Quit: ZNC - https://znc.in)
[01:20:56] *** Joins: Nightah (~Nightah@user/nightah)
[01:24:44] *** Quits: BenjiProd (~BenjiProd@user/benjiprod) (Quit: Leaving)
[01:37:53] *** Joins: AnapodoPsalidi (~AnapodoPs@154.57.4.229)
[01:40:32] *** Quits: AnapodoPsalidaki (~AnapodoPs@2a02:587:291a:6af6:68a4:b02a:6352:42bd) (Ping timeout: 268 seconds)
[01:40:56] *** Joins: AnapodoPsalidaki (~AnapodoPs@2a02:587:291a:6af6:59ea:3880:d1d9:b410)
[01:41:32] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[01:43:00] *** Quits: AnapodoPsalidi (~AnapodoPs@154.57.4.229) (Ping timeout: 268 seconds)
[01:43:33] *** Joins: luc4 (~manjaro-u@host-87-5-176-139.retail.telecomitalia.it)
[01:44:10] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[01:49:34] *** Quits: luc4 (~manjaro-u@host-87-5-176-139.retail.telecomitalia.it) (Quit: Konversation terminated!)
[01:54:39] *** Quits: gproto23 (~gproto23@user/gproto23) (Ping timeout: 256 seconds)
[02:01:33] *** Quits: XATRIX (~xatrix@176.108.186.5) (Remote host closed the connection)
[02:23:32] *** Quits: SigHunter (~SigHunter@2a02:810d:8b80:8fc:81c2:1117:f46:70b5) (Quit: Client closed)
[02:29:04] *** Joins: frittro__ (~frittro@user/frittro)
[02:29:18] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-495e-8be4-79fe-5895.res6.spectrum.com) (Ping timeout: 250 seconds)
[02:31:43] *** Quits: frittro_ (~frittro@user/frittro) (Ping timeout: 268 seconds)
[02:36:43] *** Quits: MikeBux (~MikeBux@host-091-097-120-046.ewe-ip-backbone.de) (Quit: I was raided by the FBI and all I got to keep was this lousy quit message!)
[02:37:06] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 250 seconds)
[02:43:04] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[02:43:21] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[02:49:42] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[02:55:05] <rvalue> my head hurts going through https://github.com/jupyter/docker-stacks/blob/master/base-notebook/Dockerfile and https://github.com/jupyter/docker-stacks/blob/master/base-notebook/start.sh ... i am sure there is a reason for all this but for the love of god
[02:56:52] <rvalue> after 3 hours of wrestling with this.. i think i need to try again tomorrow
[02:56:55] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[03:06:56] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[03:09:25] *** Joins: punk (~zdg@187.64.21.110)
[03:13:46] *** Quits: punk (~zdg@187.64.21.110) (Changing host)
[03:13:46] *** Joins: punk (~zdg@user/punk)
[03:24:38] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[03:25:28] *** Joins: trevors (~trevors@user/trevors)
[03:30:01] <minimal> rvalue: there's some older but simpler Alpine dockerfiles around
[03:32:35] <xMopx> can docker limit sysctls per container? 
[03:32:46] *** Quits: cotko (~cotko@188-230-251-153.dynamic.t-2.net) (Ping timeout: 268 seconds)
[03:36:28] *** Quits: Feuermagier (~Feuermagi@user/feuermagier) (Ping timeout: 250 seconds)
[03:38:02] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 240 seconds)
[03:38:36] *** Joins: Enitin (~Enitin@82.102.22.84)
[03:40:23] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[03:41:09] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:45:49] *** Joins: Lycurgus (~juan@98.4.112.204)
[04:11:00] *** Quits: vidbina (~vid@dynamic-077-191-104-051.77.191.pool.telefonica.de) (Ping timeout: 268 seconds)
[04:12:26] *** Joins: jazzy (~jaziz@user/jaziz)
[04:24:34] *** Quits: Lycurgus (~juan@98.4.112.204) (Quit: Exeunt)
[04:36:05] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[04:48:37] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Ping timeout: 268 seconds)
[04:54:06] *** Quits: hub (~hub@user/hub) (Quit: WeeChat 2.8)
[04:54:18] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[04:59:08] *** Quits: LtHummus (~lthummus@97-126-121-3.tukw.qwest.net) (Quit: ZNC 1.8.2 - https://znc.in)
[05:00:52] *** Joins: BSaboia (~bsaboia@189.45.78.253)
[05:07:04] *** Joins: LtHummus (~lthummus@97-126-121-3.tukw.qwest.net)
[05:09:53] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[05:14:46] *** Quits: punk (~zdg@user/punk) (Quit: Leaving)
[05:18:07] *** Joins: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com)
[05:27:40] *** Quits: BSaboia (~bsaboia@189.45.78.253) (Quit: This computer has gone to sleep)
[05:30:23] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:37:42] *** Joins: hrob (~hrob@31-209-221-88.dsl.dynamic.simnet.is)
[05:37:50] <hrob> o/
[05:39:03] <hrob> Im really confused to read statements like "FROM codebase as codebase_with_assets"¬† in the middle of a Dockerfile Im debugging
[05:39:49] <hrob> I thought that there should be only one base image defined at top of file
[05:40:27] <hrob> like¬† From python:3.8¬†¬† --- but why do¬† FROM python:3.8 as base
[05:40:40] <hrob> what can the "base" be re-used as?
[05:41:34] <tabakhase> hrob keyword multistage dockerfile
[05:43:40] <tabakhase> for a simple why, you want to compile something, but neither the code nor the compiler shall end up in your image ((as docker "only adds layers" there is no such thing as deleting files))
[05:45:21] <hrob> tabakhase -- ahhh....¬† it pruning things... ok... so I can break up the process like that
[05:46:30] <hrob> so... basically I want to avoid artifacts except for those that I intend --- however it complicates the process quite a bit it seems
[05:46:40] *** Joins: BSaboia (~bsaboia@189.45.78.253)
[05:49:04] <tabakhase> not that easy to say rly, - does it get a line-more-complicated? sure - but in the end, it actually should make things a whole lot simpler - but it also alows for some rather stupid to not-needed jumping around sure...
[05:52:09] <tabakhase> and like, this all is a give&take with things like buildcache on the other end too...
[05:52:49] <hrob> tabakhase thanks!¬†¬† but basically I should wonder if it helps make my image lighter, right?
[05:53:03] <hrob> if it has good effect use it
[05:53:30] <tabakhase> so some things just whacking it all in one long RUN block may be fine, in others you dont want npm to spend 30 minutes downloading shit just to transpile your 40line script that just needs to land in some nginx in the end
[05:54:20] <hrob> tabakhase right,¬† some things are like that... use it once and get rid of it... but I dont seem to be dealing with that most of the time
[05:54:30] <BtbN> multistage builds won't help you with that
[05:54:46] <tabakhase> (+ you would not want to install node in a nginx image - and neither would you want to install nginx in a node image -- so multistage may also just be used to combine different set of toolings a bit more "docker native" than having your own apt-get worms
[05:55:13] *** Quits: tsal (~tsal@user/tsal) (Ping timeout: 268 seconds)
[05:55:17] <BtbN> multistage builds are useful whenever you have massive build-time only deps that you don't want to inflate the final image
[05:55:30] *** Quits: DoofusCanadensis (~DoofusCan@S01061056117e7f56.cg.shawcable.net) (Quit: So long, suckers)
[05:55:53] <tabakhase> (explicitly not talking of a node served webserver but some static client js you wanne deliver via some random nginx purely as example)
[05:56:37] <hrob> I think Im seeing what this is about -- at least in the image im fixing... this multistage concept was unnecessary... except maybe helps to clean up apt cache in a simple way
[05:56:46] <hrob> and maybe npm has some overhead too
[05:56:49] *** Quits: BSaboia (~bsaboia@189.45.78.253) (Quit: This computer has gone to sleep)
[05:57:01] <hrob> more powerful probably for things like C-code builds
[05:58:34] <BtbN> npm downloads A LOT of crap
[05:58:41] <hrob> lol
[06:00:27] <tabakhase> there is certainly a lot out there that "should rather be just one a bit longer RUN block..." ;-)
[06:00:28] <hrob> but I think I will consider these extra lines if builds / installs have considerable effect on the base
[06:01:08] <BtbN> There really is no general rule to that
[06:01:12] <hrob> but running many RUN blocks is fine too,¬† I use many RUN to break up the steps that may fail and need fixing
[06:01:23] *** Joins: tsal (~tsal@user/tsal)
[06:01:32] <BtbN> Well, many run blocks instead of one large one often inflate the image
[06:01:49] <hrob> docker was a wonderful improvement in that it caches RUN steps
[06:02:06] *** Joins: BSaboia (~bsaboia@189.45.78.253)
[06:02:24] <BtbN> The thing is, you cannot delete stuff in lower layers. It'll still be in the image, increasing its size
[06:02:39] <hrob> BtbN yup, I can imagine it does a bit inflate... but I havent gone to that level yet :D
[06:02:44] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[06:03:02] <tabakhase> one RUN to another just has above mentioned problem that DOCKER NEVER DELETES A THING -- deleting a file is not only not freeing any, but actually "taking more diskspace" as now it needs to write down that this file was deleted in the layer above :D <- and this happends for chmods and everything, so horrific
[06:03:06] <BtbN> Like, for some of our images only copying the build results to a fresh image makes the image go from 17GB to 200MB
[06:03:49] <tabakhase> but if those run¬¥s got nothing todo with another - well, i think 127 or so was the maximum number of layers :P then dockerD just implodes xD
[06:04:34] <BtbN> Yeah, the layers also get more and more inefficient the more you pile up
[06:04:55] *** Quits: z8z (~x@ac255238.ppp.asahi-net.or.jp) (Remote host closed the connection)
[06:06:53] <hrob> hm... Im kinda in kindergarten still... only few lines per image lol¬† -- maybe max 20x
[06:07:24] *** Joins: trevors (~trevors@user/trevors)
[06:07:31] <hrob> and I see hardly any difference ... but probably isolating apt-get update is a good start with this method
[06:08:12] <BtbN> https://bpa.st/T2QA something like this without multistage builds would just implode on itself. WAY too many layers, and a lot of build artifacts leaking into the image.
[06:09:54] <hrob> BtbN¬† so hard to read lol.. but hmm... best that I do some experiments with this -- especially if I feel unhappy about the size
[06:10:15] <BtbN> it's generated, so it being a mess is kinda expected
[06:11:01] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[06:11:21] <hrob> but boild down to optimization, thanks guys/gals for the explanation makes more sense to me... but I question if some premature opt going on sometimes
[06:11:26] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[06:12:03] <tabakhase> "docker history IMAGE" and https://github.com/wagoodman/dive for on-layer-investigation also help a lot in those regards
[06:12:35] <hrob> using this feature requires good understanding of what is happening on a low level -- not the same as running a desktop
[06:12:40] <BtbN> The most annoying bullshit docker does is increase in size on chmod...
[06:13:13] <hrob> chmod ... ah like chmod -R on large data --- it must keep track?
[06:13:47] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Quit: CodeSpelunker)
[06:13:56] <BtbN> Yeah, and it keeps track by... copying all the files you chmod again
[06:14:03] <BtbN> so if you chmod a 10GB file, image size goes up by 10GB
[06:14:42] <BtbN> So when you need to do that, multistage builds are your only hope as well
[06:15:26] <hrob> I saw chmod being done in some images, gutt feeling was to get the user / group right, and fix that... but didnt know it could have such impact
[06:15:51] <hrob> thats quite a gotcha
[06:15:52] <BtbN> It's rare you chmod large amounts of data
[06:16:01] <BtbN> but if you do... well, you got a problem at hand
[06:20:00] <tabakhase> and this gets even more fun if you take that "chmod during build" is often entirely pointless anyhow as this is rly a runtime setting (my --user is different than yours) + COPY has a chown + you can USER and just do the things under the right one to begin with :P
[06:24:16] *** Joins: akurilin_ (uid322841@id-322841.ilkley.irccloud.com)
[06:28:03] <hrob> another thing as a newb i was wondering about ... is there any way in docker-compose to specify that a command should accept keyboard input --- say if it requests a user:¬† password:
[06:29:00] <hrob> I was wondering, because sometimes you just want to run a container as a setup procedure... exiting after some input from user
[06:49:09] <tabakhase> hrob "docker-compose run" is a thing, comes with a few imitations tho -- and "the dockerish way is env-vars (or potentially "secrets" in swarm)" has no user.. (in the rare case, youd script something with your entrypoint and the "expect" tooling to emulate it :P
[06:51:55] <hrob> tabakhase ... thanks yes I saw, I can define¬† stdin_open: true¬† +¬† tty: true¬†¬† in docker-compose¬† +¬† command: /bin/bash -c "this thing I want to run"¬†¬† +¬† then just docker-compose run --rm ...
[06:52:17] *** Quits: BSaboia (~bsaboia@189.45.78.253) (Quit: This computer has gone to sleep)
[06:52:43] <hrob> a bit elaborate, but quite documentable as a single command to get things started
[06:53:47] <hrob> but yes... hm env vars when i can use them good idea
[06:54:32] <hrob> probably almost always usable actually -- passwords a bit of pain
[06:54:47] <hrob> expect is a hack
[06:57:43] <tabakhase> well anything that can eat the env-var itself already is nice, but very often its an entrypoint who writes those into a configfile thats then read by the actual application - expct is rly a "last resort" hack sure
[07:07:33] *** Joins: z8z (~x@ac255238.ppp.asahi-net.or.jp)
[07:12:27] *** Quits: z8z (~x@ac255238.ppp.asahi-net.or.jp) (Quit: Quitting)
[07:16:48] *** Quits: hrob (~hrob@31-209-221-88.dsl.dynamic.simnet.is) (Quit: Client closed)
[07:31:14] *** Quits: catbehemoth (~vasyl@bras-base-lnglpq6100w-grc-15-206-172-247-176.dsl.bell.ca) (Quit: WeeChat 3.4)
[07:36:05] *** Quits: frittro__ (~frittro@user/frittro) (Quit: Ka kite an≈ç au i a koe.)
[07:48:48] *** Joins: z8z (~x@ac255238.ppp.asahi-net.or.jp)
[07:49:08] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[07:54:17] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[08:06:46] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[08:15:04] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[08:25:12] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[08:30:13] *** Quits: samuelb (~samuelber@nata01.lip.pt) (Ping timeout: 240 seconds)
[08:30:46] *** Quits: yuesbeez (uid458354@id-458354.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[08:43:58] *** Joins: samuelbernardo (~samuelber@194.210.119.251)
[08:50:04] *** Quits: C4Crawford (~C4Crawfor@2600:1700:5470:712f:2588:16f1:67a5:acd6) (Quit: C4Crawford)
[08:59:36] *** Joins: jarthur_ (~jarthur@cpe-70-114-198-37.austin.res.rr.com)
[09:01:31] *** Quits: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com) (Ping timeout: 256 seconds)
[09:16:17] *** Joins: pvdp (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au)
[09:17:58] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:20:44] *** Joins: _sean (~xsean@203.86.202.187)
[09:26:19] *** Joins: maggotbrain (~maggotbra@c-73-225-163-217.hsd1.wa.comcast.net)
[09:36:14] *** Joins: mintoyatsu (~mint@ip24-255-4-17.tc.ph.cox.net)
[09:40:53] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[09:41:07] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[09:43:33] *** Quits: rvalue (~rvalue@user/rvalue) (Quit: ZNC - https://znc.in)
[09:43:45] *** Joins: rvalue (~rvalue@user/rvalue)
[09:48:34] *** Joins: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no)
[09:49:43] *** Quits: alicef (~none@gentoo/developer/alicef) (Quit: install gentoo)
[09:50:29] *** Joins: alicef (~none@gentoo/developer/alicef)
[09:58:24] *** Parts: mintoyatsu (~mint@ip24-255-4-17.tc.ph.cox.net) (Leaving)
[10:08:12] *** Quits: emerent (~quassel@p200300cd570443e6ba27ebfffed28a59.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[10:08:31] *** Joins: emerent (~quassel@p200300cd5704432fba27ebfffed28a59.dip0.t-ipconnect.de)
[10:10:52] *** Quits: jarthur_ (~jarthur@cpe-70-114-198-37.austin.res.rr.com) (Quit: jarthur_)
[10:11:23] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[10:18:17] *** Quits: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no) (Read error: Connection reset by peer)
[10:19:47] *** Joins: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no)
[10:24:49] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 256 seconds)
[10:35:49] *** Quits: greyltc__ (~greyltc@user/greyltc) (Ping timeout: 240 seconds)
[10:41:53] *** Quits: rpthms (~rpthms@user/rpthms) (Remote host closed the connection)
[10:49:21] *** Joins: rpthms (~rpthms@user/rpthms)
[10:50:49] *** Joins: cewood (~cewood@ip5b417897.dynamic.kabel-deutschland.de)
[11:12:49] *** Quits: BobbyJr (~BobbyJr@robsworld.plus.com) (Ping timeout: 256 seconds)
[11:14:06] *** Quits: nuala (~nuala@user/nuala) (Quit: ()
[11:15:07] *** Joins: BobbyJr (~BobbyJr@robsworld.plus.com)
[11:16:11] *** Joins: MillerBOSS (~fire@su.per.ca.li.fra.gil.is.tic.ex.pi.a.li.do.cious.millerboss.com)
[11:19:36] *** Joins: jazzy2 (~jaziz@user/jaziz)
[11:23:36] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 250 seconds)
[11:25:17] *** Joins: jazzy (~jaziz@user/jaziz)
[11:27:05] *** Joins: ExeciN (~ExeciN@user/nicexe)
[11:27:30] *** Quits: jazzy2 (~jaziz@user/jaziz) (Ping timeout: 250 seconds)
[11:29:42] *** Joins: factor7 (~factor@c-73-68-120-166.hsd1.ma.comcast.net)
[11:31:50] *** Quits: factor (~factor@c-73-68-120-166.hsd1.ma.comcast.net) (Ping timeout: 250 seconds)
[11:31:50] *** factor7 is now known as factor
[11:37:42] <maret> I stopped a docker container and now I can't see  with docker container list --all or docker ps -a
[11:41:25] *** Quits: Furai (~Furai@furai.pl) (Quit: WeeChat 3.4)
[11:43:32] *** Joins: Furai (~Furai@furai.pl)
[12:03:39] *** Joins: iomari891 (~iomari891@197.210.70.166)
[12:04:22] *** Joins: vidbina (~vid@dynamic-077-011-147-212.77.11.pool.telefonica.de)
[12:06:58] <wez> maret: How did you start it?  with --rm?
[12:09:08] *** Quits: rowbots (~dirgeable@h64-17-89-214.arvdco.broadband.dynamic.tds.net) (Quit: Leaving)
[12:21:45] *** Joins: TomyWork (~TomyLobo@p200300e80f006700f55970884699e0c8.dip0.t-ipconnect.de)
[12:31:58] <maret> wez don't remember but that could be an explanation. Btw when is --rm useful? seems like its used a lot in examples one the web, but IMHO it's pretty dangerous
[12:32:21] *** Joins: typ1cal_c0ffxe3 (~typ1cal_c@sip.cloudspark.com.au)
[12:32:22] <maret> dangerous is bit strong word but , I only had a extra work because of it
[12:32:52] *** Joins: _bt (~bt@user/bt/x-4531783)
[12:33:28] <wez> maret: It's useful everywhere. When you deploy something it should be something that can be rebuilt and the previous one thrown away.  You use mount points or some type of persistence store to keep your actual data.
[12:34:26] <maret> wez well sure, but you lost logs unless you persist logs themself and I dont see a benefit of container being throw away right away.
[12:34:26] <wez> When it comes to services, don't treat your servers at pets, treat them as cattle.
[12:34:34] <wez> at = as
[12:35:03] <_bt> just moving an nginx to docker and have a question regarding proper usage. i need only the nginx config, ssl key and ssl cert in the container. is it OK to use a docker-compose.yml and RO volumes to mount these? or should i be creating a dockerfile and copying the files into the image?
[12:35:09] <selckin> agree --rm should be the default, maret if you want to keep the logs then you should set it up so they are exported automatically or on a volume etc
[12:35:22] <wez> maret: Yes, I use a log driver. The container only runs one process and it does it at logging to stdout / stderr or I install a logging agent that logs somewhere off the container.
[12:36:09] *** Quits: typ1cal_c0ffxe3 (~typ1cal_c@sip.cloudspark.com.au) (Client Quit)
[12:36:17] <wez> _bt: I don't even do that, I either regenerate tls keys at run time (which my load balancer ignored) or use load balancer TLS termination.
[12:37:05] <_bt> wez: in this case nginx will be the terminator
[12:37:16] <maret> doesn't --rm in that case just cause you extra work unless docker container crashes a lot and need to be thrown a lot, not seeing a much of benefit. Is there something else than saving you to run docker rm command? I guess might be different for larger deploys where you have container management setup and / or container are large enough and might take unncessery space?
[12:37:23] *** Joins: typ1cal_c0ffxe3 (~typ1cal_c@sip.cloudspark.com.au)
[12:37:27] *** Quits: jmcgnh (~jmcgnh@wikipedia/jmcgnh) (Ping timeout: 250 seconds)
[12:38:09] <wez> _bt: It's fine to mount them in there. You just need to make sure you use a consistent uid for nginx, so when you deploy an updated image you don't need to redo the permissions.
[12:39:01] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:5c5b:f4e6:6fc3:e08e)
[12:39:16] <_bt> thanks wez, i was wanting to use a vanilla image, avoiding having to build one, by just mounting the 3 things i need, i will check uid and permissions, thanks!
[12:40:16] *** Quits: lemonsnicks (~lemonsnic@cpc159519-perr18-2-0-cust114.19-1.cable.virginm.net) (Ping timeout: 256 seconds)
[12:41:21] <wez> _bt: The vanilla nginx image uses a consistent uid for nginx.
[12:41:32] <_bt> wez, excellent, thank you
[12:41:44] <wez> üëç
[12:42:17] *** Joins: jmcgnh (~jmcgnh@wikipedia/jmcgnh)
[12:42:27] *** Joins: lemonsnicks (~lemonsnic@cpc159519-perr18-2-0-cust114.19-1.cable.virginm.net)
[12:45:38] *** Parts: ksynwa (~ksynwa@5.45.111.57) (WeeChat 2.8)
[12:47:11] *** Joins: tolland (~tolland@138.197.109.178)
[12:49:47] *** Joins: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr)
[12:50:07] *** Quits: bn_work (uid268505@id-268505.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[12:50:51] *** Quits: typ1cal_c0ffxe3 (~typ1cal_c@sip.cloudspark.com.au) (Ping timeout: 250 seconds)
[12:50:56] <tolland> I have a macbook provided by corporate with a system proxy, and appropriate bypass/NO_PROXY set for lan resources which works fine. i.e. browser uses proxy for internet sites, and can access lan services bypassinging proxy. in particular testing using `openssl s_client -connect my.lan.server:443 -showcerts` returns the cert that is on the lan server
[12:51:49] <tolland> however inside a docker container, that command is returning the cert for the system proxy `openssl s_client -connect my.lan.server:443 -showcerts` returns a cert with CN=lan-proxy
[12:53:22] <tolland> also curl times out, because its trying to go via external proxy to get to a lan resource. `docker info` shows that its has a proxy set as `HTTPS Proxy: http.docker.internal:3128`
[12:54:57] <tolland> there is nothing in the environment vars in the container relating to proxies, and setting NO_PROXY, no_proxy etc doesn't seem to make any difference
[13:07:32] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[13:07:55] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr)
[13:08:47] *** Joins: shiriru (~shiriru@user/shiriru)
[13:10:51] *** Quits: shiriru (~shiriru@user/shiriru) (Client Quit)
[13:12:41] *** Joins: shiriru (~shiriru@user/shiriru)
[13:15:46] *** Joins: monoxane6 (~monoxane@user/monoxane)
[13:16:10] *** Quits: shiriru (~shiriru@user/shiriru) (Client Quit)
[13:17:29] *** Quits: monoxane (~monoxane@user/monoxane) (Ping timeout: 256 seconds)
[13:17:30] *** monoxane6 is now known as monoxane
[13:25:52] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[13:26:12] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[13:29:03] *** Joins: gbellinoz (~gbell2@106-69-130-211.dyn.iinet.net.au)
[13:31:16] <gbellinoz> is there any way to make a container run separately from a docker composition see the same network and hostnames as the members of the composition see?
[13:35:23] *** Joins: AnapodoPsalidi (~AnapodoPs@154.57.4.229)
[13:37:00] *** Quits: _bt (~bt@user/bt/x-4531783) (Quit: Leaving)
[13:38:20] *** Quits: AnapodoPsalidaki (~AnapodoPs@2a02:587:291a:6af6:59ea:3880:d1d9:b410) (Ping timeout: 268 seconds)
[13:46:46] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[13:47:02] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[13:48:21] <LordKalma> gbellinoz, `docker-compose up -d --build <name_of_specific_service_in_docker-compose_file>`
[13:48:22] <Johnsen> I believe you can just run it in the same network with --network flag
[13:49:01] <LordKalma> ah I misunderstood the question
[13:49:06] <LordKalma> yeah, what Johnsen said
[13:49:10] <LordKalma> just add it to the network
[13:49:18] *** Joins: lithium (~lithium@user/lithium)
[14:02:41] *** Joins: cotko (~cotko@188-230-251-153.dynamic.t-2.net)
[14:02:43] *** Joins: bouncy (~ben@user/benoit)
[14:27:52] <vext01_> so yesterday I learned that CAP_PERFMON doesn't work with docker
[14:28:05] <vext01_> now I'm trying to understand the consequences of running with CAP_SYS_ADMIN
[14:28:17] <ikke> That's close to running as root
[14:28:18] <vext01_> it allows setns(2)
[14:28:28] <vext01_> so a proces could break out, right?
[14:28:31] <ikke> yes
[14:28:34] <vext01_> terrible
[14:28:44] <ikke> Did you look at seccomp profiles?
[14:28:50] <vext01_> not yet
[14:29:08] <ikke> Not sure, but it might be the seccomp profile blocking the syscall
[14:29:34] <vext01_> basically i need `perf_event_open()` inside a container
[14:29:47] <vext01_> the capability that manages that is CAP_PERFMON
[14:29:55] <vext01_> but that is broken in docker at the moment
[14:30:28] <vext01_> https://github.com/docker/docker.github.io/issues/14124
[14:48:02] <ikke> So it does not even know the capabilitry
[14:54:48] *** Joins: dalan (~dalan@59-102-63-107.tpgi.com.au)
[14:57:01] *** Quits: dalan (~dalan@59-102-63-107.tpgi.com.au) (Client Quit)
[14:58:20] *** Joins: dalan (~dalan@59-102-63-107.tpgi.com.au)
[15:00:57] *** Quits: dalan (~dalan@59-102-63-107.tpgi.com.au) (Read error: Connection reset by peer)
[15:01:27] *** Joins: dalan (~dalan@59-102-63-107.tpgi.com.au)
[15:02:16] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Remote host closed the connection)
[15:05:09] *** Joins: LenarHoyt (~LenarHoyt@p200300eec717e00091770efed06eced9.dip0.t-ipconnect.de)
[15:05:09] *** Quits: hendry (~hendry@210.23.22.2) (Ping timeout: 256 seconds)
[15:06:23] *** Joins: hendry (~hendry@210.23.22.2)
[15:06:32] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[15:13:06] *** Quits: LenarHoyt (~LenarHoyt@p200300eec717e00091770efed06eced9.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[15:13:33] *** Joins: dalan6 (~dalan@59-102-63-107.tpgi.com.au)
[15:15:32] *** Quits: dalan (~dalan@59-102-63-107.tpgi.com.au) (Ping timeout: 240 seconds)
[15:15:32] *** dalan6 is now known as dalan
[15:27:55] <vext01_> nope
[15:28:00] *** Quits: cewood (~cewood@ip5b417897.dynamic.kabel-deutschland.de) (Ping timeout: 256 seconds)
[15:28:02] *** Joins: BSaboia (~bsaboia@189.45.78.253)
[15:31:35] *** Joins: Tach (~Tach@user/tach)
[15:41:02] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 240 seconds)
[15:42:46] *** Joins: Enitin (~Enitin@82.102.22.84)
[15:54:29] *** Quits: BSaboia (~bsaboia@189.45.78.253) (Quit: This computer has gone to sleep)
[16:00:06] <Tach> Do people here still combine php-fpm with nginx within the same container ?
[16:03:39] <gordonjcp> Tach: I wonder if it's worth doing that if you're behind a "bigger" proxy
[16:04:21] <gordonjcp> Tach: I'm considering switching how I dockerise flaskbb to just expose uwsgi on http and screw having nginx
[16:04:29] *** Quits: Fauve (~Fauve@user/fauve) (Ping timeout: 268 seconds)
[16:05:27] <Tach> gordonjcp that is exactly my concern... for smaller (swarm) setups a combined container might be easier
[16:06:13] *** Quits: sehrope_ (~sehrope@23-24-81-162-static.hfc.comcastbusiness.net) (Ping timeout: 240 seconds)
[16:12:41] *** Quits: greyrat (~greyrat@ip202.ip-51-178-215.eu) (Bye)
[16:13:02] *** Joins: greyrat_ (~greyrat@ip202.ip-51-178-215.eu)
[16:13:03] *** Joins: moldorcoder7 (~moldorcod@37.120.143.28)
[16:13:03] *** Joins: dodo__ (~dodo@user/dodo)
[16:13:25] *** Joins: r0bby_ (r0bby@user/r0bby)
[16:13:38] *** Joins: Trieste_ (T@user/pilgrim)
[16:14:10] *** Joins: jjakob_ (~quassel@2a01:260:8028:10f0::62)
[16:14:14] *** Joins: LyndsySimon_ (sid34452@lymington.irccloud.com)
[16:14:21] *** Joins: [Pokey] (~pokey@spikeyCactus/hoosky)
[16:14:21] *** Joins: szkl_ (uid110435@uxbridge.irccloud.com)
[16:15:02] *** Joins: dostoyev1ky2 (~sck@user/dostoyevsky2)
[16:15:03] *** Server sets mode: +nrt 
[16:15:13] *** Joins: Spiney (~Spiney@2604:a880:400:d0::1d82:b001)
[16:15:17] *** Joins: Helikopt1 (~Helikopte@infracloud.lcnaud.fr)
[16:15:23] *** Joins: rick123_ (~rick123@157.245.192.96)
[16:15:26] *** Joins: farn_ (~farn@2a03:4000:7:3cd:d4ab:85ff:feeb:f505)
[16:15:34] *** Joins: wez_ (~wyoung@about/web/wez)
[16:15:35] *** Joins: Abdullah_ (user21348@user/abdullah)
[16:15:39] *** Joins: badeball_ (~jonas@159.65.195.62)
[16:15:42] *** Joins: leonardo1 (~leonardo@user/leonardo)
[16:16:05] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 240 seconds)
[16:16:05] *** Quits: r0bby (r0bby@user/r0bby) (Ping timeout: 240 seconds)
[16:16:05] *** Quits: jrgilman (~jrgilman@67.205.178.139) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: LyndsySimon (sid34452@id-34452.lymington.irccloud.com) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: dCLCp (sid184777@id-184777.uxbridge.irccloud.com) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: greyrat (~greyrat@ip202.ip-51-178-215.eu) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: gajus (sid202456@2a03:5180:f::3:16d8) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: matdev (~matdev@2a01:6e60:10:793:666:feed:dead:beef) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: sstutz (~stutz@user/stutz) (Ping timeout: 240 seconds)
[16:16:06] *** armeg is now known as jrgilman
[16:16:06] *** Quits: notevil (~notevil@user/notevil) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: koolazer (~koo@user/koolazer) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: Bardon (~Bardon@user/Bardon) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: rawtaz (~rawtaz@user/rawtaz) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: MillerBOSS (~fire@su.per.ca.li.fra.gil.is.tic.ex.pi.a.li.do.cious.millerboss.com) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: akurilin_ (uid322841@id-322841.ilkley.irccloud.com) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: jjakob (~quassel@2a01:260:8028:10f0::62) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: goose (goose@bucket.goose.ws) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: burrows (burrows@user/burrows) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: KnownSyntax (sid233169@user/knownsyntax) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: Abdullah (user21348@user/abdullah) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: Helikoptere (~Helikopte@infracloud.lcnaud.fr) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: wez (~wyoung@about/web/wez) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: leonardo (~leonardo@user/leonardo) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: rick123 (~rick123@157.245.192.96) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: badeball (~jonas@159.65.195.62) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: moldorcoder7_ (~moldorcod@37.120.143.28) (Ping timeout: 240 seconds)
[16:16:06] *** Quits: mva (znc@gentoo/developer/mva) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: TheBigK_ (~quassel@user/thebigk) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: lilgopher (~textual@2601:241:8000:38f0:e07f:8cb1:cc13:aa1f) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: Spiney_ (~Spiney@2604:a880:400:d0::1d82:b001) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: Fossil (~Fossil@2a03:b0c0:0:1010::398:b001) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: mtj (quasselcor@2400:8902::f03c:91ff:fe93:b7f1) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: Proxysna_ (~Proxysna@62.119.254.142) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: Pokey (~pokey@spikeyCactus/hoosky) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: SirScott (~SirScott@c-67-176-100-163.hsd1.co.comcast.net) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: kostkon (~kostkon@2a02:587:a116:f212:4d86:1980:f91d:1e03) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: russjr08 (~russjr08@fw.internal.russ.network) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: nobiz (~nobiz@user/nobiz) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: libcat (~quassel@2a01:4f8:c2c:2b3a::1) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: boycott (~boycott@user/boycott) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: dodo (~dodo@user/dodo) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: beencubed (~beencubed@209.131.238.248) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: farn (~farn@2a03:4000:7:3cd:d4ab:85ff:feeb:f505) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: znf (ibm86@2001:19f0:5001:3600:5400:3ff:fecd:9ee5) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: theo (~theo@user/theo) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: jtdowney (~jtdowney@user/jtdowney) (Ping timeout: 240 seconds)
[16:16:07] *** Quits: SilverEagleDev (~SilverEag@azuracast/lead-developer/SilverEagleDev) (Ping timeout: 240 seconds)
[16:16:08] *** Quits: chodonne_ (~chodonne@ec2-3-18-56-136.us-east-2.compute.amazonaws.com) (Ping timeout: 240 seconds)
[16:16:08] *** Quits: weyhmueller (~weyhmuell@blofeld.nc.w9r.de) (Ping timeout: 240 seconds)
[16:16:08] *** LyndsySimon_ is now known as LyndsySimon
[16:16:08] *** mven1 is now known as mven
[16:16:08] *** SirScott8 is now known as SirScott
[16:16:08] *** gajus_ is now known as gajus
[16:16:08] *** theo5 is now known as theo
[16:16:08] *** SilverEagleDev5 is now known as SilverEagleDev
[16:16:11] *** KnownSyntax_ is now known as KnownSyntax
[16:16:13] *** nobiz4 is now known as nobiz
[16:16:13] *** russjr089 is now known as russjr08
[16:16:13] *** r0bby_ is now known as r0bby
[16:16:13] *** akurilin__ is now known as akurilin_
[16:16:13] *** terrorjack0 is now known as terrorjack
[16:16:13] *** Fossil_ is now known as Fossil
[16:16:14] *** dodo__ is now known as dodo
[16:16:21] *** Joins: znf_ (ibm86@blender.linge-ma.ro)
[16:16:38] *** Joins: koolazer (~koo@user/koolazer)
[16:16:46] *** Joins: stutz (~stutz@user/stutz)
[16:16:53] *** Joins: burrows (burrows@user/burrows)
[16:17:06] *** Joins: mtj (quasselcor@2400:8902::f03c:91ff:fe93:b7f1)
[16:17:14] *** Joins: beencubed (~beencubed@209.131.238.248)
[16:17:24] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[16:17:47] *** Joins: Proxysna_ (~Proxysna@62.119.254.142)
[16:17:53] *** Joins: rawtaz (~rawtaz@user/rawtaz)
[16:18:03] *** Joins: Fauve (~Fauve@user/fauve)
[16:18:04] *** Quits: Proxysna__ (~Proxysna@62.119.254.142) (Read error: Connection reset by peer)
[16:18:07] *** Joins: nickel715 (~nickel715@user/nickel715)
[16:18:55] *** Joins: sehrope (~sehrope@23-24-81-162-static.hfc.comcastbusiness.net)
[16:18:56] *** Joins: Enitin (~Enitin@82.102.22.84)
[16:19:54] *** Quits: murych (~Thunderbi@83.220.239.219) (Read error: Connection reset by peer)
[16:19:57] *** Quits: szkl_ (uid110435@uxbridge.irccloud.com) (Ping timeout: 256 seconds)
[16:20:10] *** Joins: matdev (~matdev@2a01:6e60:10:793:666:feed:dead:beef)
[16:20:31] *** Quits: badeball_ (~jonas@159.65.195.62) (Ping timeout: 256 seconds)
[16:20:31] *** Quits: rick123_ (~rick123@157.245.192.96) (Ping timeout: 256 seconds)
[16:20:31] *** Quits: [Pokey] (~pokey@spikeyCactus/hoosky) (Ping timeout: 256 seconds)
[16:20:31] *** Quits: Trieste_ (T@user/pilgrim) (Ping timeout: 256 seconds)
[16:20:40] *** Joins: TheBigK (~quassel@user/thebigk)
[16:20:44] *** leonardo1 is now known as leonardo
[16:20:57] *** Joins: Pokey (~pokey@spikeyCactus/hoosky)
[16:21:02] *** Joins: Trieste (T@user/pilgrim)
[16:21:26] *** Joins: rick123 (~rick123@157.245.192.96)
[16:21:35] *** Joins: murych (~Thunderbi@83.220.239.219)
[16:21:54] *** Joins: badeball_ (~jonas@159.65.195.62)
[16:22:03] *** Joins: BSaboia (~bsaboia@189.45.78.253)
[16:22:18] *** Joins: nickel71530 (~nickel715@user/nickel715)
[16:23:51] *** Pokey is now known as [Pokey]
[16:23:53] *** [Pokey] is now known as Pokey
[16:23:55] *** Pokey is now known as _Pokey_
[16:23:57] *** _Pokey_ is now known as __Pokey__
[16:24:04] *** __Pokey__ is now known as [Pokey]
[16:25:52] *** Quits: nickel715 (~nickel715@user/nickel715) (Quit: Client closed)
[16:26:00] *** Quits: nickel71530 (~nickel715@user/nickel715) (Client Quit)
[16:26:17] *** Joins: nickel715 (~nickel715@user/nickel715)
[16:28:29] *** Quits: [Pokey] (~pokey@spikeyCactus/hoosky) (Quit: Hecc! My server must have died!)
[16:28:29] *** Quits: murych (~Thunderbi@83.220.239.219) (Read error: Connection reset by peer)
[16:29:48] *** Joins: Pokey (~pokey@spikeyCactus/hoosky)
[16:29:52] *** Joins: murych (~Thunderbi@83.220.239.219)
[16:30:21] *** kostkon_ is now known as kostkon
[16:33:12] *** Joins: weyhmueller (~weyhmuell@blofeld.nc.w9r.de)
[16:34:02] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[16:34:18] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[16:35:51] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[16:35:51] *** Quits: murych (~Thunderbi@83.220.239.219) (Read error: Connection reset by peer)
[16:36:58] *** Joins: murych (~Thunderbi@83.220.239.219)
[16:40:48] *** Quits: murych (~Thunderbi@83.220.239.219) (Client Quit)
[16:41:41] *** Joins: lenarhoyt (~lenarhoyt@p200300eec717e000809108ea6415b05b.dip0.t-ipconnect.de)
[16:43:19] *** Joins: DrowningElysium (uid190788@user/drowningelysium)
[16:47:31] *** Quits: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr) (Quit: WeeChat 3.4)
[17:20:09] *** Joins: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr)
[17:21:54] *** Joins: trevors (~trevors@user/trevors)
[17:23:55] *** Quits: pvdp (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au) (Remote host closed the connection)
[17:27:04] *** Quits: Leonarbro (~Leonet@user/leonarbro) (Read error: Connection reset by peer)
[17:33:03] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 256 seconds)
[17:33:15] *** Joins: Ivii (~Ivyy@2001:a62:4c3:8e01:1619:ead6:822:30d1)
[17:49:06] *** Quits: iomari891 (~iomari891@197.210.70.166) (Ping timeout: 256 seconds)
[17:56:50] *** Quits: BSaboia (~bsaboia@189.45.78.253) (Quit: Leaving)
[17:57:08] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[17:57:28] *** Joins: ExeciN (~ExeciN@user/nicexe)
[17:58:50] *** Joins: BSaboia (~bsaboia@189.45.78.253)
[18:00:29] *** znf_ is now known as znf
[18:02:13] *** Quits: BSaboia (~bsaboia@189.45.78.253) (Client Quit)
[18:02:59] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-7c3a-da49-c036-254f.res6.spectrum.com)
[18:03:12] <gxt> Hi, I'm just getting started writing dockerfiles and I managed to get a node app that builds to a static site to work, but I'm unsure if it's the right way. Any feedback is welcome https://bpa.st/ZYOA
[18:04:32] *** Quits: thanas (~thanas@user/thanas) (Quit: ZNC - https://znc.in)
[18:05:05] <tabakhase> gtx you likely want to split your copy/yarn install, and no need for that EXPOSE (nginx should have it already)
[18:05:17] <larsks> EXPOSE is generally just informational in any case.
[18:05:19] *** Joins: thanas (~thanas@user/thanas)
[18:05:41] <gxt> Ah good to know, thanks!
[18:06:02] <gxt> tabakhase: What do you mean by "split copy/yarn install" though?
[18:07:08] <tabakhase> gxt https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#add-or-copy see the pip example there
[18:07:23] <tabakhase> that way buildcache can kick in^^
[18:09:06] *** Quits: nickel715 (~nickel715@user/nickel715) (Quit: Client closed)
[18:09:59] *** Joins: nickel715 (~nickel715@user/nickel715)
[18:11:24] <gxt> Thanks for that link! I actually had the separation like that before, copied from a tutorial, but I didn't understand the reasoning and thought I'd simplify it :) I'll go through those best practices now.
[18:14:43] <tabakhase> :P - in a similar gist, even the "COPY . ." has an extra note to add i guess -> have a ".dockerignore" file, it acts like a .gitignore, but for the "docker packs up the context" stage, this way you can ignore things like vendor/node_modules from the host entirely, or dont spend time packing up the ".git" dir and such junk
[18:14:48] <gxt> And the message I get when `docker run`ing that image in a container is normal? ("/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration" and 7 more lines of docker-entrypoint.sh output)
[18:15:06] <tabakhase> then ideally a rebuild will "not touch anything and finish in 0.1 seconds" if no code was changed, do ONLY the build when code changed, and only waste time to actually download packages when packages.json&co were changed
[18:15:13] <gxt> tabakhase: Good advice, thank you!
[18:15:24] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[18:16:55] <tabakhase> gxt thats likely "fine" and whatever that nginx image does, https://github.com/nginxinc/docker-nginx/blob/3a7105159a6c743188cb1c61e4186a9a59c025db/mainline/debian/docker-entrypoint.sh#L14
[18:18:11] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[18:18:15] <tabakhase> where "whatever" = those 3 i guess https://github.com/nginxinc/docker-nginx/tree/3a7105159a6c743188cb1c61e4186a9a59c025db/mainline/alpine
[18:20:27] *** Joins: ueberall (ueberall_l@user/ueberall)
[18:32:10] <gxt> And is it cleaner to copy all files in separate COPY lines, or is `COPY . .` after `RUN yarn build` just as good as long as I have a .dockerignore?
[18:34:09] *** Joins: Leonarbro (~Leonet@user/leonarbro)
[18:35:57] *** Quits: lenarhoyt (~lenarhoyt@p200300eec717e000809108ea6415b05b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[18:41:52] *** Joins: dob1_ (~dob1@user/dob1)
[18:42:58] *** Quits: dob1 (~dob1@user/dob1) (Ping timeout: 268 seconds)
[18:59:04] *** Joins: BinarySavior (~BinarySav@idlerpg/player/BinarySavior)
[18:59:08] *** Joins: iomari891 (~iomari891@197.210.70.132)
[19:00:51] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 276 seconds)
[19:01:14] *** Joins: lilgopher (~textual@2601:241:8000:38f0:f4fc:9cd1:65b9:ee10)
[19:04:20] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[19:04:53] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[19:06:32] *** Joins: vbotka (~vbotka@92.245.202.144)
[19:28:37] *** Quits: packet_lozenge (~packet_lo@user/packet-lozenge/x-7125090) (Read error: Connection reset by peer)
[19:28:51] *** Joins: minimal (~minimal@user/minimal)
[19:31:06] *** Joins: packet_lozenge (~packet_lo@user/packet-lozenge/x-7125090)
[19:41:26] *** Quits: lilgopher (~textual@2601:241:8000:38f0:f4fc:9cd1:65b9:ee10) (Read error: Connection reset by peer)
[19:42:01] *** Joins: lilgopher (~textual@2601:241:8000:38f0:f4fc:9cd1:65b9:ee10)
[19:50:18] *** Joins: rsx (~dummy@ppp-188-174-150-235.dynamic.mnet-online.de)
[19:56:42] *** Quits: rsx (~dummy@ppp-188-174-150-235.dynamic.mnet-online.de) (Quit: rsx)
[19:57:05] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Remote host closed the connection)
[19:57:13] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[20:06:34] *** Joins: lenarhoyt (~lenarhoyt@p200300eec717e000809108ea6415b05b.dip0.t-ipconnect.de)
[20:07:57] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[20:09:25] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[20:11:43] *** Quits: l4yer (~l4yer@178.239.168.223) (Ping timeout: 256 seconds)
[20:12:05] *** notevil_ is now known as NOTevil
[20:38:25] *** Joins: gproto23 (~gproto23@user/gproto23)
[20:39:44] *** Quits: nvmd (~nvmd@user/nvmd) (Quit: Later, nerds.)
[20:44:01] *** Quits: [diablo] (~diablo]@user/diablo/x-9068044) (Quit: The Lounge - https://thelounge.chat)
[20:44:44] *** Joins: [diablo] (~diablo]@user/diablo/x-9068044)
[20:49:07] *** Quits: lenarhoyt (~lenarhoyt@p200300eec717e000809108ea6415b05b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[20:49:47] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[20:50:52] *** dostoyev1ky2 is now known as dostoyevsky2
[20:53:41] *** Quits: platta (~platta@pool-173-61-104-121.cmdnnj.fios.verizon.net) (Quit: The Lounge - https://thelounge.chat)
[20:59:15] *** Quits: vidbina (~vid@dynamic-077-011-147-212.77.11.pool.telefonica.de) (Ping timeout: 268 seconds)
[20:59:43] *** Joins: platta (~platta@pool-173-61-104-121.cmdnnj.fios.verizon.net)
[21:02:00] *** Joins: bancroft (~bancroft@user/bancroft)
[21:04:29] *** Quits: platta (~platta@pool-173-61-104-121.cmdnnj.fios.verizon.net) (Client Quit)
[21:04:58] *** Joins: platta (~platta@pool-173-61-104-121.cmdnnj.fios.verizon.net)
[21:13:02] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[21:13:29] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[21:23:05] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[21:23:27] *** Joins: ExeciN (~ExeciN@user/nicexe)
[21:24:50] *** Joins: trevors (~trevors@user/trevors)
[21:25:37] <bancroft> so ENV's in a dockerfile are not available in the ENTRYPOINT command?
[21:27:56] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:31:41] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Remote host closed the connection)
[21:32:01] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[21:34:07] *** Joins: yuesbeez (uid458354@id-458354.tinside.irccloud.com)
[21:45:54] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[21:46:13] *** Joins: ExeciN (~ExeciN@user/nicexe)
[21:47:27] <tabakhase> bancroft you may need to escape your $
[21:47:50] <tabakhase> can doublecheck with "docker inspect NAME" 
[21:50:19] *** Joins: dCLCp (sid184777@id-184777.uxbridge.irccloud.com)
[21:51:04] *** Joins: C4Crawford (~C4Crawfor@2600:1700:5470:712f:397d:b:b0f1:c17d)
[21:54:48] *** Joins: jamiejackson (~jamiejack@107.116.83.38)
[22:00:08] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[22:00:44] <bancroft> tabakhase: I think it's shell vs exec form problem, so I made an entrypoint.sh and it works 
[22:00:58] <bancroft> I knew there was a reason I used to build images this way 
[22:15:16] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[22:15:35] *** Joins: ExeciN (~ExeciN@user/nicexe)
[22:16:13] *** Quits: iomari891 (~iomari891@197.210.70.132) (Quit: WeeChat 3.3)
[22:19:41] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[22:20:00] *** Joins: ExeciN (~ExeciN@user/nicexe)
[22:23:43] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[22:24:02] *** Joins: ExeciN (~ExeciN@user/nicexe)
[22:27:53] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[22:28:03] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[22:28:12] *** Joins: ExeciN (~ExeciN@user/nicexe)
[22:31:13] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[22:31:37] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[22:38:32] *** Joins: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:1d25:8cf4:f508:5e5f)
[22:39:55] *** Quits: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com) (Quit: The Lounge - https://thelounge.chat)
[22:40:40] *** Joins: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com)
[22:40:41] *** Quits: phalanx (~thelounge@user/phalanx) (Quit: The Lounge - https://thelounge.chat)
[22:43:31] *** Quits: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com) (Client Quit)
[22:44:11] *** Joins: phalanx5 (~thelounge@user/phalanx)
[22:44:15] *** Joins: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com)
[22:45:05] *** Quits: Haxxa (~Haxxa@202-144-174-197.ip4.superloop.com) (Quit: Haxxa flies away.)
[22:45:44] *** Quits: nickel715 (~nickel715@user/nickel715) (Quit: nickel715)
[22:47:19] *** Joins: Haxxa (~Haxxa@202-144-174-197.ip4.superloop.com)
[22:48:39] *** Quits: TomyWork (~TomyLobo@p200300e80f006700f55970884699e0c8.dip0.t-ipconnect.de) (Quit: Leaving)
[22:49:07] *** Joins: nickel715 (~nickel715@user/nickel715)
[22:50:53] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[22:51:13] *** Joins: ExeciN (~ExeciN@user/nicexe)
[22:57:09] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[23:01:45] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Quit: CodeSpelunker)
[23:08:24] *** Joins: GailWynand (~GailWynan@195.216.219.1)
[23:12:17] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[23:14:28] *** Quits: Tach (~Tach@user/tach) (Quit: Tach)
[23:15:49] *** Joins: amnrst (~amnrst@45-79-201-163.ip.linodeusercontent.com)
[23:18:22] *** Quits: lilgopher (~textual@2601:241:8000:38f0:f4fc:9cd1:65b9:ee10) (Quit: Textual IRC Client: www.textualapp.com)
[23:24:08] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[23:24:33] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[23:26:37] *** Joins: eroux (~eroux@102-65-85-89.ftth.web.africa)
[23:33:33] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[23:33:52] *** Joins: ExeciN (~ExeciN@user/nicexe)
[23:35:30] *** Joins: faLUKE (~prepeppe@host-82-59-128-89.retail.telecomitalia.it)
[23:36:00] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:5c5b:f4e6:6fc3:e08e) (Remote host closed the connection)
[23:36:59] <faLUKE> Hello:  with this command I replace some content in tasks.py  "docker exec -it hassio_supervisor sed -i 's/^RUN_UPDATE_SUPERVISOR = .*/RUN_UPDATE_SUPERVISOR = 2592000/g' /usr/src/supervisor/supervisor/misc/tasks.py"       My question is: how can I pull out tasks.py, so to read its content?
[23:37:05] <faLUKE> thanks
[23:41:37] *** Quits: _dp (~dp@user/dp/x-8792323) (Remote host closed the connection)
[23:42:31] *** Quits: eroux (~eroux@102-65-85-89.ftth.web.africa) (Ping timeout: 256 seconds)
[23:42:40] *** wez_ is now known as wez
[23:47:25] *** Quits: GailWynand (~GailWynan@195.216.219.1) (Quit: GailWynand)
[23:48:09] <faLUKE> (solved: I use cp)
[23:54:02] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 256 seconds)
