[00:06:05] <eddiemundo> I'm thinking about working on https://github.com/haskell/haskell-language-server/issues/600 but when I load up plugins/hls-hlint-plugin/src/Ide/Plugin/Hlint.hs HLS complains about `Multi Cradle: No Prefixes matched`
[00:06:28] <eddiemundo> maybe because there are hie.yamls in the test directory
[00:07:14] <eddiemundo> i'm not sure if i should add a hie.yaml to the top level, or how did other people work on the Hlint plugin before? maybe without HLS?
[00:21:49] <eddiemundo> I added a hie.yaml with multi cradle cabal thing and it's working now
[00:26:12] <shapr> what's the multi cradle cabal thing?
[00:27:23] <eddiemundo> i wrote this into hie.yaml in the hls-hlint-plugin directory... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/87b20d4bd47d3bdd071fd5b307f9b4bbfe7242d4)
[00:38:54] <shapr> oh, ok
[00:39:12] <shapr> I've never figured out how to use hls on hls itself
[00:43:19] <fendor[m]> shapr: what was your issue? At least for me, no configuration is usually necessary
[00:44:08] <fendor[m]> <eddiemundo> "I added a hie.yaml with multi..." <- interesting, I think this is a bug, since hls should be able to load it just fine
[00:46:03] <fendor[m]> with the default configuration I mean
[00:46:57] <fendor[m]> > <@jshen:matrix.org> i wrote this into hie.yaml in the hls-hlint-plugin directory... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/9480c2eb4dc7e31722f20035f0802be3557d2f44)
[00:47:16] <fendor[m]> fendor[m]: take it back, apparently I have a hie.yaml file all this time and I just forgot about it
[00:48:14] <eddiemundo> haha I was just about to try the simpler hie.yaml
[00:54:36] <shapr> fendor[m]: I'll try again after work and get back to you, maybe it's all fixed! or maybe it's something to do with using nixos
[00:56:33] <eddiemundo> <shapr> "I've never figured out how to..." <- i also use nixos and i used the nix flake to setup. it can take minutes for something to show up the first time. also i figured if you can set the language server client to use the options `--debug --logfile=<dir>` you can see if the server is doing anything
[00:59:56] <fendor[m]> Nixos can be a culprit, but also make sure to try out the hie.yaml I posted! That usually works 
[01:00:40] <shapr> fendor[m]: which one did you post? 
[01:00:50] <shapr> oh, I see it, oops
[01:00:59] <shapr> thanks, I'll try that!
[01:16:02] *** Quits: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net) (Read error: Connection reset by peer)
[01:16:19] *** Joins: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net)
[01:23:28] <jneira[m]> hmm i cant load Hlint.hs in hls but i would swear it worked recently (and i dont have a hie.yaml since long time ago)
[01:25:01] <jneira[m]> looking to the cradle error i see `"(\"./plugins/hls-hlint-plugin/test\",Cabal {component = Just \"hls-hlint-plugin:test:tests\"})"` but no entry for the plugin lib
[01:25:19] <jneira[m]> maybe it worked before moving the tests to the plugin?
[01:25:57] <eddiemundo> the testdata contain hie.yamls inside so maybe that's what changed
[01:33:56] <jneira[m]> mmm gen-hie produces a hie.yaml with the lib included, weird
[01:34:11] <jneira[m]> and other plugins has the lib component in the auto config
[01:35:04] <jneira[m]> `"(\"./plugins/hls-class-plugin/src\",Cabal {component = Just \"lib:hls-class-plugin\"})"` f.e.
[01:42:16] <jneira[m]> hmm in fact all plugins has the lib component in the cradle but hlint one, and most of them have a testdata with hie.yaml
[01:45:54] <eddiemundo> i guess the hlint plugin never had an entry in the auto config, and also never had testdata with hie.yaml and so it worked fine, but then the tests were moved, and then it became an issue?
[01:47:03] *** Joins: libertyprime (~libertypr@203.211.73.21)
[01:48:37] <jneira[m]> maybe, but why other plugins with test/testdada/hie.yaml works?
[01:49:38] <eddiemundo> oh i dunno what you mean by auto config. i just assumed there was a config file somewhere with those plugins listed in there that does some magic that makes it work, but hlint wasn't in that config, and so it worked for all those other plugins
[01:52:39] <jneira[m]> with auto config i mean the implicit cradle hls uses if there is no explicit hie.yaml
[01:53:06] <jneira[m]> if you look at the no prefixesmatched error you can see that implicit configuration in the errpr
[01:53:18] <jneira[m]> s/errpr/error/
[01:55:25] <eddiemundo> there is a flag unique to hls-hlint-plugin in stack.yaml does the auto generation thing look at that?
[02:08:32] <eddiemundo> nevermind i dont think what i'm saying makes sense... i don't know anything about the infrastructure
[02:11:21] <jneira[m]> dont worry, lot of pieces around, i still miss some of them
[03:01:14] *** Quits: libertyprime (~libertypr@203.211.73.21) (Ping timeout: 260 seconds)
[03:44:13] *** Quits: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net) (Ping timeout: 250 seconds)
[04:00:01] *** Joins: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net)
[05:11:05] *** Joins: libertyprime (~libertypr@203.211.73.21)
[07:06:57] *** Quits: libertyprime (~libertypr@203.211.73.21) (Ping timeout: 265 seconds)
[08:31:46] *** Quits: shapr (~user@pool-100-36-247-68.washdc.fios.verizon.net) (Ping timeout: 245 seconds)
[10:52:08] *** Joins: lortabac (~lortabac@2a01:e0a:541:b8f0:c480:7b03:c5d:3876)
[11:18:10] *** Joins: arrowd (~arr@2.93.55.66)
[11:45:46] <fendor[m]> implicit-hie looks barely at anything at all, it might just mis-interpret or miss something
[11:46:21] <fendor[m]> cabal-hie is more sophisticated for cabal and nowadays, cabal is way smarter than what implicit-hie generates
[12:44:07] <wz1000> pepeiborra: how come `buildRulesBuilt` and `buildRulesChanged` are higher in the "after edit" benchmarks compared to without edits?
[12:44:25] <wz1000> here for example: https://github.com/haskell/haskell-language-server/runs/4219372895?check_suite_focus=true
[12:46:31] <pepeiborra> Good question, I don't know! Maybe the reporting logic is buggy
[12:48:04] <pepeiborra> Oh, I think it is because we are looking at a full build (first build), since each iteration doesn't restart the build
[13:00:49] * anton-latukha[m] uploaded an image: (823KiB) < https://libera.ems.host/_matrix/media/r0/download/matrix.org/jKdVUSLsGfNdxyjHMEyvJLqF/simple.png >
[13:01:43] <anton-latukha[m]> +====
[13:01:43] <anton-latukha[m]> Yesterday generated the module map for `ghcide`:
[13:01:57] * anton-latukha[m] uploaded an image: (823KiB) < https://libera.ems.host/_matrix/media/r0/download/matrix.org/weTNfVnClANyGtvHgcHkkqev/simple.png >
[13:04:32] <anton-latukha[m]> & posted several bugreports into `graphmod`, as it needs several fixes to be able to generate these.
[13:06:01] <jneira[m]> wow that would be useful for new contributors
[13:06:50] <jneira[m]> we need a new section in docs about architecture/lib internals
[13:32:40] <fendor[m]> Are NormalizedFilePaths supposed to be canonicalized as well?
[13:32:51] <fendor[m]> or only normalised?
[13:49:04] <jneira[m]> only normalized, we had to be careful with performance for that
[13:49:08] <jneira[m]> iirc!
[13:51:14] <fendor[m]> targets obtained from hie-bios are all canonicalized
[13:51:24] <fendor[m]> Ill remove that and open a PR to see whether something breaks
[13:55:20] <fendor[m]> do we have test-cases in ghcide that use symlinks?
[13:55:32] <fendor[m]> can I add one, and does that break on windows? jneira 
[13:56:21] <jneira[m]> depending on the machine configuration, i would try to run it just in case
[13:56:46] <jneira[m]> it is matter to add a `knownBroken..` if it does not work
[13:59:22] <fendor[m]> ok, will add a test
[14:55:06] <fendor[m]> https://github.com/haskell/haskell-language-server/pull/2359
[15:38:49] *** Joins: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz)
[16:28:36] *** Quits: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz) (Ping timeout: 256 seconds)
[17:37:39] *** Joins: shapr (~user@pool-100-36-247-68.washdc.fios.verizon.net)
[17:48:09] *** Joins: frosch03 (~user@2a02:c98:1003:8000:9b12:1a19:a343:46e8)
[18:57:10] *** Quits: frosch03 (~user@2a02:c98:1003:8000:9b12:1a19:a343:46e8) (Remote host closed the connection)
[20:19:37] *** Quits: lortabac (~lortabac@2a01:e0a:541:b8f0:c480:7b03:c5d:3876) (Ping timeout: 265 seconds)
[22:15:07] <shapr> eddiemundo: just to be clear, setting up via the flake is just nix-shell, right?
[22:16:59] <eddiemundo> I don't remember exactly I think I used `nix develop` as the command but because i use `direnv` it automatically does that for me
[22:25:08] *** Quits: arrowd (~arr@2.93.55.66) ()
[22:47:34] <eddiemundo> <shapr> "eddiemundo: just to be clear..." <- I think I used `nix develop` as the command but because i use `direnv` it automatically does that for me. (sending it again but as a reply just in case you didn't see)
[22:50:36] *** Joins: libertyprime (~libertypr@118-92-79-220.dsl.dyn.ihug.co.nz)
[23:12:43] <fendor[m]> jneira: Do I understand it correctly that we need `canonicalizePath` to make sure c: and C: are normalised in windows?
[23:12:55] <fendor[m]> I hope I misunderstood that
[23:13:41] <shapr> eddiemundo: thanks, I'll try it
[23:35:39] *** Quits: juhp (~juhp@128.106.188.82) (Ping timeout: 268 seconds)
[23:37:13] *** Joins: juhp (~juhp@128.106.188.82)
[23:46:43] *** Quits: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net) (Ping timeout: 250 seconds)
[23:50:59] *** Joins: myShoggoth (~myShoggot@97-120-85-195.ptld.qwest.net)
