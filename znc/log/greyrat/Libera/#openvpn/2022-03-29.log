[00:02:17] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[00:02:36] *** Joins: fling (~fling@user/fling)
[00:28:16] <drew> got everything working earlier today but my flight took off before I could say thanks, so thank you ordex and Pippin_
[00:29:34] <ordex> cool
[01:06:35] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[01:08:41] *** Joins: fling (~fling@user/fling)
[02:10:27] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[02:10:46] *** Joins: fling (~fling@user/fling)
[02:34:12] *** Quits: DoucheEnrique (~quassel@i5C756E72.versanet.de) (Ping timeout: 252 seconds)
[02:34:37] *** Joins: DoucheEnrique (~quassel@i5C7574E1.versanet.de)
[03:14:33] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[03:14:54] *** Joins: fling (~fling@user/fling)
[03:47:57] *** Quits: lotharn (~kvirc@71-223-15-163.phnx.qwest.net) (Ping timeout: 240 seconds)
[04:10:32] *** Quits: krzee (~k@user/krzee) (Changing host)
[04:10:32] *** Joins: krzee (~k@openvpn/corp/krzee)
[04:10:38] *** Joins: lotharn (~kvirc@71-223-15-163.phnx.qwest.net)
[04:15:00] *** Quits: lotharn (~kvirc@71-223-15-163.phnx.qwest.net) (Ping timeout: 240 seconds)
[04:16:48] *** Quits: krzee (~k@openvpn/corp/krzee) (Changing host)
[04:16:48] *** Joins: krzee (~k@openvpn/krzee)
[04:27:24] *** Quits: mannequin (uid453465@id-453465.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[04:27:48] *** Joins: lotharn (~kvirc@59-166-190-77.rev.home.ne.jp)
[04:30:14] *** Quits: fling (~fling@user/fling) (Remote host closed the connection)
[04:30:29] *** Joins: fling (~fling@user/fling)
[04:37:00] *** Quits: lotharn (~kvirc@59-166-190-77.rev.home.ne.jp) (Ping timeout: 240 seconds)
[04:39:01] *** Quits: Bebef (sbreit@phobos.bebef.de) (Quit: bye)
[04:43:37] *** Joins: Bebef (sbreit@phobos.bebef.de)
[04:44:03] *** Quits: r00tobo (~r00tobo@r00tobo.on.ftp.sh) (Excess Flood)
[04:44:28] *** Joins: r00tobo (~r00tobo@r00tobo.on.ftp.sh)
[04:44:44] *** Quits: BtbN (btbn@ffmpeg/developer/btbn) (Remote host closed the connection)
[04:44:45] *** Quits: moldorcoder7 (~moldorcod@37.120.143.29) (Quit: %bye mirc%)
[04:46:50] *** Joins: moldorcoder7 (~moldorcod@37.120.143.30)
[04:47:13] *** Joins: BtbN (btbn@ffmpeg/developer/btbn)
[04:52:42] *** Joins: Pippin_ (Pippin_@openvpn/community/Pippin)
[04:52:42] *** ChanServ sets mode: +o Pippin_
[05:01:36] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:12:02] *** Joins: vlm (~vlm@user/vlm)
[05:22:55] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[05:25:00] *** Joins: fling (~fling@user/fling)
[05:40:01] *** Quits: MikZyth (~MikZyth@host-243-154-66-217.spbmts.ru) (Read error: Connection reset by peer)
[05:40:26] *** Joins: MikZyth (~MikZyth@host-243-154-66-217.spbmts.ru)
[05:40:38] *** Quits: dka (~code-is-a@ns3059207.ip-193-70-33.eu) (Ping timeout: 272 seconds)
[06:00:22] *** Joins: gast0n (~g4570n@user/gast0n)
[06:21:31] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[06:21:51] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Remote host closed the connection)
[06:26:47] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[06:27:34] *** Joins: fling (~fling@user/fling)
[06:35:53] *** Quits: Tuvix (~Tuvix@gateway/tor-sasl/tuvix) (Remote host closed the connection)
[06:40:17] *** Joins: Tuvix (~Tuvix@gateway/tor-sasl/tuvix)
[06:47:43] *** Quits: csrf (~csrf@user/csrf) (Ping timeout: 246 seconds)
[06:57:10] *** Quits: gast0n (~g4570n@user/gast0n) (Ping timeout: 246 seconds)
[07:08:51] *** Joins: adeliktas9 (~adeliktas@i59F527CA.versanet.de)
[07:10:31] *** Quits: adeliktas (~adeliktas@i59F4DE4D.versanet.de) (Ping timeout: 260 seconds)
[07:10:31] *** adeliktas9 is now known as adeliktas
[07:31:15] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[07:33:00] *** Joins: fling (~fling@user/fling)
[07:35:52] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[07:41:38] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Ping timeout: 260 seconds)
[07:47:37] *** Joins: Buggys (~Buggys@185.149.90.52)
[07:53:00] *** Joins: lotharn (~kvirc@211.48.67.148)
[07:54:15] *** Quits: lotharn (~kvirc@211.48.67.148) (Read error: Connection reset by peer)
[07:56:20] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[07:58:53] *** Joins: frank- (1000@apache/committer/thumbs)
[08:00:28] *** frank- is now known as thumbs
[08:14:25] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Quit: Ex-Chat)
[08:24:59] *** Joins: lotharn (~kvirc@public-nat-14.vpngate.v4.open.ad.jp)
[08:29:00] *** Quits: lotharn (~kvirc@public-nat-14.vpngate.v4.open.ad.jp) (Ping timeout: 240 seconds)
[08:34:55] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[08:37:17] *** Joins: fling (~fling@user/fling)
[09:39:35] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[09:41:24] *** Joins: fling (~fling@user/fling)
[10:19:44] *** Joins: nerozero (~nerozero@87.253.63.54)
[10:43:06] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[10:43:28] *** Joins: fling (~fling@user/fling)
[10:59:50] *** Quits: cation (cation@user/cation) (Ping timeout: 272 seconds)
[11:01:34] *** Joins: lotharn (~kvirc@221.159.144.4)
[11:08:49] *** Quits: lotharn (~kvirc@221.159.144.4) (Ping timeout: 246 seconds)
[11:13:36] *** Quits: ender (~ender1@2a01:260:4094:1:6045:6fff:fedd:cbf3) (Quit: We make the shepherds kings at the end of our stories because they already know how to lead recalcitrant, bleating creatures of limited intellect.	â€” A Practical Guide to Evil)
[11:15:46] *** Joins: ender (~ender1@2a01:260:4094:1:6045:6fff:fedd:cbf3)
[11:25:43] *** Joins: lotharn (~kvirc@222.103.11.123)
[11:30:52] *** Quits: lotharn (~kvirc@222.103.11.123) (Ping timeout: 246 seconds)
[11:35:24] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Ping timeout: 240 seconds)
[11:46:56] *** Quits: fling (~fling@user/fling) (Remote host closed the connection)
[11:47:41] *** Joins: fling (~fling@user/fling)
[11:59:57] *** Joins: upgreydd (~upgreydd@user-5-173-147-22.play-internet.pl)
[12:04:58] <upgreydd> hey guys. Have a problem with OpenVPN. I've created server and client and connection between is fine, on the server I have 2 external ip address, one is connected to machine as main IP and second one is not used so I'm trying to forward all traffic from second IP to specific host in OpenVPN.
[12:06:16] <upgreydd> What I've did is ccd with iroute with external IP for this machine, and added route `2.2.2.2 via 10.8.0.2 dev tun0` where 2.2.2.2 is second external IP
[12:13:51] <ordex> upgreydd: can you rephrase "I'm trying to forward all traffic from second IP to specific host in OpenVPN." ?
[12:14:04] <ordex> I don't get what you exactly want to achieve
[12:14:28] <ordex> don't mention the steps you are taking, but just your high level goal
[12:16:08] <upgreydd> ordex, I have dedicated server with 2 external IPs, 1st ip is main ip for all services, second is not connected to anything at this moment. I have client inside nat with no option to get external IP (mikrotik router) and trying to use second server IP as a mikrotik external IP. so what I'm trying to do is push all traffik from 2.2.2.2 to openvpn 10.8.0.2 client
[12:16:48] <ordex> upgreydd: oh ok
[12:16:58] <ordex> upgreydd: is th mikrotik router connecting to the server via VPN?
[12:17:00] <ordex> *the
[12:18:11] <upgreydd> ordex, yes, via openvpn. At this moment when I'm trying to reach 2.2.2.2 from the server all looks fine - i have response from machine next to mikrotik but when I try to do this from external ip not related to this network it's timing out. I've tried tcpdump and I see it in tun0 interface on both sides
[12:19:01] <ordex> upgreydd: from what you are saying it sounds to me as if you want to do 1-to-1 NAT between the 2.2.2.2 IP and the mikrotik VPN IP
[12:19:10] <ordex> so that traffic is simply translated on the way out and then back in
[12:19:38] <ordex> no?
[12:19:55] <upgreydd> yes I guess that's it
[12:20:18] <ordex> haven't done it in a while, but it should be doable with a SNAT rule in iptables
[12:20:35] <ordex> (openvpn itself doesn't really have much to do in this case, because the translation happens all on the server side)
[12:22:04] <upgreydd> ordex, routing is not enough for that? `2.2.2.2 via 10.8.0.2 dev tun0` route works for dedicated server itself - i see everything like it supposed to be, problem occures when I try some external machine.
[12:22:32] <ordex> upgreydd: have you configured the 2.2.2.2 IP on the mikrotik as well?
[12:22:48] <upgreydd> ordex, I've added it to VPN interface in mikrotik.
[12:23:09] <ordex> upgreydd: you could do it with routing too, I guess, but then you need to not assign the 2.2.2.2 IP to any iface on the server, otherwise it will simply "receive" it instead of rerouting
[12:23:28] <upgreydd> in case if I do request from dedicated server I see req/resp in mikrotik, but when I do req from external I see only req with no responses :/
[12:23:48] <upgreydd> ordex, 2.2.2.2 is not assigned
[12:24:10] <ordex> ok, that's good
[12:24:29] <ordex> when you do the external request, where do you see the packet with tcpdump ?
[12:24:36] <ordex> do you see requests reaching tun0?
[12:25:53] <upgreydd> ordex, I see packets on eth0, tun0 on server, then I see packets on tun0 on mikrotik but I see no responses from mikrotik for external requests :/
[12:26:23] <ordex> I see - is it possible the mikrotik is replying via another interface? i.e. its own wan/lan ?
[12:27:08] <ordex> or does the mikrotik have a default route over the VPN?
[12:27:44] <ordex> what I am guessing is: the request is originated by an IP that the mikrotik wants to reach via an interface that is not tun0, thus getting lost due to somebody dumping it
[12:28:31] <upgreydd> ordex, let me past routing from mikrotik
[12:28:40] <ordex> ok
[12:29:14] <upgreydd> ordex, https://bpa.st/7T5A
[12:29:15] <vpnHelper> Title: View paste 7T5A (at bpa.st)
[12:30:18] <upgreydd> my ISP in nat uses 10.0.0.0/8 and I'm using 10.8.0.0/24 - but on different interfaces - maybe that's the problem? But then why server itself responds fine?
[12:30:47] <ordex> probably the server is using 10.8.0.1 to talk to 2.2.2.2
[12:31:02] <ordex> therefore the mikrotik router is replying using tun0
[12:31:10] <ordex> because it has a route for 10.8.0.0/24 over VPN
[12:31:17] <ordex> but if the request comes from, say, 1.1.1.1
[12:31:31] <ordex> mikrotik will send the response to 10.0.0.1
[12:31:54] <ordex> so the best way to solve this would be source routing
[12:32:09] <ordex> on linux you'd say "anything from 2.2.2.2 -> default 10.8.0.1"
[12:32:41] <ordex> so traffic on mikrotik with source IP 2.2.2.2 woul ignore the main routing table and would use another default route which says to go over tun0
[12:33:09] <upgreydd> ordex, I should configure this on server right? Not a mikrotik?
[12:35:21] <ordex> upgreydd: no, this is on mikrotik
[12:35:43] <ordex> upgreydd: at the moment is the mikrotik router that is deciding to send packets to its own GW, instead of the VPN
[12:36:13] <upgreydd> ok so need add firewall rule
[12:36:33] <upgreydd> or route? cause I get lost :/
[12:36:39] <ordex> upgreydd: unless requests to 2.2.2.2 all come from specific IPs, then you cpuld push some routes
[12:37:02] <ordex> but if you are aiming at just redirecting all traffic to 2.2.2.2, then you need policy routing
[12:37:19] <ordex> you need "policy routing" that allows you to specify routes based on the source IP
[12:37:25] <ordex> not sure where that can be on mikrotik
[12:38:17] <ordex> on linux you use "ip rule" for that
[12:40:09] <upgreydd> ordex, can you give me an example of ip rule for such case? I'll try to find out it in mikrotik
[12:40:43] <ordex> ip rule add from 2.2.2.2/32 table xxx
[12:40:47] <ordex> where xxx is a new routing table
[12:40:58] <ordex> then: ip route add default via 10.8.0.1 table xxx
[12:44:19] *** Joins: becm (~becm@55d4f217.access.ecotel.net)
[12:48:20] <upgreydd> ordex, thanks, I'll try
[12:48:51] <ordex> np
[12:50:55] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[12:59:05] *** Joins: fling (~fling@user/fling)
[12:59:14] *** Quits: MikZyth (~MikZyth@host-243-154-66-217.spbmts.ru) (Quit: WeeChat 3.4.1)
[13:09:09] <upgreydd> ordex, thanks man - you're right - problem is with mikrotik routing
[13:09:59] <ordex> upgreydd: did you manage to find a way to get policy routing on the mikrotik?
[13:11:58] <upgreydd> ordex, not yet, preparing to ask at #mikrotik
[13:12:03] <ordex> okyz
[13:12:19] <ordex> I am pretty sure it must have some way
[13:17:14] <upgreydd> ordex, https://bpa.st/RQDQ this is how packet is routed - ether1 is main mikrotik GW - it should be VPN - I'll ask them how to fix this
[13:17:15] <vpnHelper> Title: View paste RQDQ (at bpa.st)
[13:18:21] <ordex> upgreydd: yeah, imho "policy routing" is key, but maybe theyhave other terminology. you basically want to make sure that packets created by mikrotik with IP 2.2.2.2 are always routed out of tun0
[13:18:47] <ordex> even though you don't have a default route pointing there (because you don't want to)
[13:19:00] <upgreydd> ordex, exactly :)
[13:24:02] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[13:57:35] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[13:58:00] *** Joins: fling (~fling@user/fling)
[14:57:55] *** Joins: mannequin (uid453465@id-453465.helmsley.irccloud.com)
[15:31:00] *** Joins: csrf (~csrf@user/csrf)
[15:33:39] *** Joins: cation (cation@user/cation)
[15:35:52] <rob0> is the Mikrotic a Linux OS?
[15:38:09] <rob0> if so, and if they provide the /sbin/ip tool (iproute2), then generic Linux policy routing information is applicable
[15:39:05] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Ping timeout: 250 seconds)
[15:39:30] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[15:39:33] <rob0> iproute2 is considered a required tool for the Linux kernel, well over 20 years now, so maybe some embedded device manufacturers are starting to figure that out by now.
[15:48:12] *** Quits: anexit (~anexit@46.23.90.146) (Remote host closed the connection)
[15:57:50] <upgreydd> mikrotik is not directly a linux
[15:57:58] <upgreydd> however I've solved a problem
[15:58:06] <upgreydd> let me do the paste with details
[16:08:47] <upgreydd> rob0, ordex https://bpa.st/E74A here's how I finished
[16:08:48] <vpnHelper> Title: View paste E74A (at bpa.st)
[16:10:04] <ordex> upgreydd: I am not familiar with that syntax, but it seems like you created a policy routing rule using fw mark
[16:10:10] <ordex> cool
[16:12:34] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Quit: bye)
[16:12:37] <upgreydd> ordex, Yes, I've marked first connections from VPN interface with no mark with new mark=vpn_conn where dest address != local, then I've marked routing new_routing=vpn_table where connection mark=vpn_conn, then in routing I've just routed vpn_table to use VPN :)
[16:13:37] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[16:13:41] <ordex> upgreydd: maybe you wanted to restrict the scope to connections with dest address == 2.2.2.2 only? just to avoid corner cases you haven't thought about
[16:13:44] <ordex> but it sounds good anyway
[16:17:10] <upgreydd> ordex, In my case it's not only mikrotik connections - mikrotik forwards 80,443 to machine inside the nat and restriction for dest address == 2.2.2.2 only will block marking this packets which go like this: ExtIp -> VPN -> Mikrotik -> Server in LAN :)
[16:18:07] <upgreydd> so in such case packet will be marked to mikrotik, but not mikrotik to server and due to that response is not marked and go through main ip of mikrotik nat
[16:19:59] <upgreydd> ordex, ah OK - you're talking about rule which marks connection not routing - yes I can add dest address there, additionally there's !local which do this
[16:20:08] <upgreydd> ordex, thank you for help :)
[16:21:36] <ordex> upgreydd: yeah, about the marking
[16:21:37] <ordex> np!
[16:21:41] <ordex> glad you figured this out :)
[16:34:43] <ordex> becm: was it you reporting issues with ovpn-dco and v6 mapped addresses?
[16:37:36] <becm> ordex: no, neither a thing I get in contact with (so far)
[16:41:32] <ordex> ok, time to look at the backlog :D
[16:41:35] <ordex> sorry for the noise
[16:42:21] <ordex> BtbN: it was you!
[16:43:10] <BtbN> hmm?
[16:43:17] <BtbN> ah, yes
[16:44:05] <BtbN> btw., I just realized you probably don't know: I'm Timo, we've been mailing about the dco as well :D
[16:51:44] <ordex> oh, I wasn't aware :D
[16:52:00] <ordex> BtbN: I am asking about the v6 thing because I can't reproduce right now
[16:52:12] <BtbN> I can rebuild and give it another go
[16:52:15] <ordex> I am running client and server on the same host (different namespaces) and the server is listening on ::
[16:52:30] <ordex> the client can happily connect using v4 and I Can ping
[16:52:35] <ordex> I am wondering what might be different
[16:52:39] <BtbN> maybe it got fixed by other changes in the meantime?
[16:52:39] <ordex> from your setup
[16:52:50] <ordex> BtbN: quite unlikely...but never say never :)
[16:52:55] <ordex> if you could give it another go..I'd be happy
[16:53:03] <ordex> and possibly share your configs, so I can test them here too
[16:55:19] <BtbN> "configure: error: iproute2 support cannot be enabled when using DCO" this is new. So far I had both enabled
[16:55:52] <ordex> yeah, came in with some late change
[16:55:55] *** Quits: fling (~fling@user/fling) (Remote host closed the connection)
[16:56:01] <ordex> to use DCO you must use sitnl
[16:56:09] <ordex> because iproute needs patching otherwise
[16:56:14] <ordex> (and that will take time)
[16:56:23] *** Joins: fling (~fling@user/fling)
[16:57:33] <BtbN> Wonder if that was related to my issue
[16:57:44] <ordex> I doubt so
[16:57:59] <ordex> because iproute/sitnl is just used to setup the tunnel interface
[16:58:03] <ordex> but the transport layer is unrelated
[16:58:08] <ordex> but you never know
[17:00:47] <BtbN> It's still broken at least
[17:01:16] <BtbN> With ovpn-dco ab2a06f and OpenVPN 2.6_git [git:dco/4362fec1abdd1858+]
[17:02:52] <ordex> yeah, expected
[17:02:55] <ordex> can you share your configs?
[17:03:03] <ordex> there must be something specific that I don't have here
[17:04:06] <ordex> BtbN: have client and server the same arch? wondering if it's something low level ..
[17:04:13] <BtbN> Both amd64
[17:04:16] <BtbN> one Windows, one Linux
[17:04:28] <ordex> ok, thanks
[17:04:33] <BtbN> Server is Linux, and client is Windows 11 with latest 2.5.6 community installer
[17:04:57] <ordex> BtbN: are you using ovpn-dco-win on windows? or plain userspace?
[17:05:12] <BtbN> Just the plain latest release client from the msi installer on the Website
[17:06:02] <ordex> okyz, thanks
[17:06:09] <ordex> would you be able to share configs?
[17:06:10] <BtbN> https://gist.github.com/BtbN/fb2fc20150da1923bf64d2796bc448a1
[17:06:13] <ordex> ah thanks :)
[17:09:47] <ordex> BtbN: mah, there is nothing obvious :D
[17:10:05] <BtbN> This is on a 5.10 kernel, if that's important
[17:10:07] <ordex> wth
[17:10:09] <ordex> aah
[17:10:11] <ordex> yes it is
[17:10:18] <ordex> dual stack is supported starting from 5.12
[17:10:22] <ordex> because there is a bug in the kernel
[17:10:26] <BtbN> oh, what
[17:10:32] *** Joins: cdman (~dcm@user/dmc/x-4369397)
[17:11:08] <BtbN> Would have hoped they backport a crucial fix like that
[17:12:00] <ordex> added a note here: https://github.com/OpenVPN/ovpn-dco/commit/3a3ff945573f40aec87cb6390907609ae82fb096
[17:12:07] <ordex> eh I think it was somewhat invasive
[17:12:11] <ordex> and nobody cared until then
[17:12:31] <ordex> can try to poke the dragon though
[17:13:16] <BtbN> I can also just upgrade the server to 5.15, which seems decently stable by now. But I'm sure stable-distro users will run into this
[17:13:43] <ordex> yeah
[17:13:45] <ordex> let me poke
[17:15:36] <BtbN> Do you happen to know which commit fixed it?
[17:15:40] <ordex> that reminds me, I shouldupgrade to 5.17
[17:16:55] <ordex> BtbN: and I even though about this issue last time we spoke about it, but then I forgot to tell you :p
[17:17:00] <ordex> *thought
[17:20:50] <BtbN> it turns out, googling for IPv6 issues with Linux 5.12 is not something Google gives useful results for
[17:21:47] *** Joins: Pippin__ (Pippin_@openvpn/community/Pippin)
[17:21:47] *** ChanServ sets mode: +o Pippin__
[17:21:47] *** Quits: Pippin_ (Pippin_@openvpn/community/Pippin) (Killed (tungsten.libera.chat (Nickname regained by services)))
[17:21:47] *** Pippin__ is now known as Pippin_
[17:24:52] <ordex> BtbN: this is really a narrow narrow narrow corner cases
[17:24:54] <ordex> *case
[17:25:02] <ordex> I think few people use v6 mapped v4 addresses
[17:25:22] <BtbN> I don't think so really. A lot of people might use it without realizing.
[17:25:27] <ordex> the commit speaks about UDP GRO being affected, so somebody noticed there, but, like I Said, probably nobody really complained about this for ages
[17:25:45] <ordex> no clue
[17:26:04] <BtbN> Like, what other option would one have to connect to an openvpn server with both ipv4 and ipv6, without outright running two openvpn instances?
[17:26:39] <ordex> at the moment there is no alternative
[17:26:50] <ordex> but the issue exists only with dco, so nobody will run in this issue for now
[17:26:51] <ordex> :D
[17:27:14] <BtbN> Yeah, that's what I mean. I'm sure once dco would get rolled out more widespread, a lot of people would have the issue
[17:27:22] <ordex> ah sure sure
[17:27:30] <ordex> my point was about why it went unnoticed so far
[17:27:55] <BtbN> yeah, with seemingly affecting in-kernel stuff only, I can totally see it going unnoticed
[17:40:35] *** Quits: upgreydd (~upgreydd@user-5-173-147-22.play-internet.pl) (Quit: Leaving)
[17:46:29] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[17:55:09] <ordex> BtbN: sent an email
[17:59:49] *** Quits: fling (~fling@user/fling) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[18:00:16] *** Joins: fling (~fling@user/fling)
[18:53:32] *** Joins: gast0n (~g4570n@user/gast0n)
[18:58:37] <BtbN> ordex, https://github.com/BtbN/openvpn/commit/f1c5de13b0328616a7ed31aaa7629ee955020251 that solves the capability situation for me
[18:58:49] <BtbN> "user openvpn" + dco works for me with that
[18:59:26] <BtbN> I'm sure the patch needs polish, given I just kinda threw it in, in the obvious place, but the general principle is the same no matter what
[19:00:22] <ordex> that's great work! thanks a lot
[19:00:36] <ordex> do we really need to depend on libcap? I was hoping those cap_* things were standard syscalls :(
[19:02:21] <BtbN> Nowadays people even use libcap-ng, because of how horrible the interface of libcap is
[19:02:36] <ordex> hehe
[19:02:38] <BtbN> I haven't found an obvious even lower-level interface to the whole cap stuff
[19:02:47] <ordex> it seems I have both on my system
[19:03:10] <ordex> Latest Release is 0.8.2
[19:03:11] <ordex> Dec 09, 2020:
[19:03:55] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[19:04:32] *** Joins: fling (~fling@user/fling)
[19:04:42] <BtbN> There are lower level capability syscalls. capget and capset
[19:04:44] <BtbN> but they seem ugly
[19:05:10] <ordex> I guess that's why we have the libs
[19:05:42] <BtbN> If people made a lib to wrap the lib that wraps the syscalls... something must be up :D
[19:05:50] <ordex> :D
[19:05:55] <ordex> sounds like a burrito
[19:06:14] <BtbN> Though I'm not actually sure if libcap-ng sits on top of libcap, or directly the syscalls
[19:08:25] <BtbN> Ah, I found what's up with those libs: glibc does not wrap the syscalls
[19:08:32] <BtbN> you have to fumble around with syscall()
[19:09:22] <ordex> yeah
[19:09:26] <ordex> that's what the man says
[19:09:33] <ordex> so the lib is kinda "required"
[19:10:44] <BtbN> The manpage kinda says "don't use this", yeah
[19:10:54] <BtbN> so libcap it is
[19:13:43] *** Quits: cdman (~dcm@user/dmc/x-4369397) (Quit: Leaving)
[19:17:11] <ordex> yeah
[19:17:22] <ordex> BtbN: why not joining the -devel channel and drop your poc there?
[19:17:29] <ordex> not everybody follows this channel
[19:17:42] <BtbN> yeah, will do
[19:18:12] <ordex> :) thanks
[19:31:34] *** Quits: krzee (~k@openvpn/krzee) (Ping timeout: 272 seconds)
[19:40:26] <ordex> BtbN: did you manage to test the v6 thing n a newer kernel?
[19:40:30] <ordex> *on
[19:41:36] <BtbN> No, can't just reboot the machine in the middle of the day
[19:46:08] <ordex> boring!
[19:46:09] <ordex> :)
[19:46:12] <ordex> ok, thanks
[19:53:06] *** Joins: krzee (~k@openvpn/krzee)
[19:59:16] *** Quits: DArqueBishop (~drkbish@athena.darquecathedral.org) (Quit: End of line.)
[20:04:20] *** Joins: DArqueBishop (~drkbish@athena.darquecathedral.org)
[20:04:56] *** Quits: lorimer (~lorimer@user/lorimer) (Quit: NAE TROOSERS)
[20:26:51] *** Joins: lorimer (~lorimer@user/lorimer)
[20:33:48] *** Quits: jkotra (~jkotra@122.176.152.121) (Ping timeout: 240 seconds)
[20:42:02] *** Joins: sky-4 (~sky@user/sky-)
[20:46:18] *** Quits: sky- (~sky@user/sky-) (Ping timeout: 272 seconds)
[20:46:19] *** sky-4 is now known as sky-
[20:50:53] *** Quits: Merixer (~Merixer@46.252.5.32) (Quit: ZNC 1.6.5 - http://znc.in)
[21:02:35] *** Joins: Merixer (~Merixer@46.252.5.32)
[21:08:15] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[21:08:45] *** Joins: fling (~fling@user/fling)
[21:31:31] *** Quits: krzee (~k@openvpn/krzee) (Ping timeout: 260 seconds)
[21:46:52] *** Joins: krzee (~k@openvpn/krzee)
[21:58:58] *** Quits: DArqueBishop (~drkbish@athena.darquecathedral.org) (Quit: End of line.)
[21:59:36] *** Joins: DArqueBishop (~drkbish@athena.darquecathedral.org)
[22:12:34] *** Quits: fling (~fling@user/fling) (Remote host closed the connection)
[22:13:02] *** Joins: fling (~fling@user/fling)
[22:15:37] *** Quits: mannequin (uid453465@id-453465.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[22:17:42] *** Joins: mannequin (uid453465@id-453465.helmsley.irccloud.com)
[22:18:08] *** Quits: nerozero (~nerozero@87.253.63.54) (Ping timeout: 272 seconds)
[23:16:15] *** Quits: fling (~fling@user/fling) (Ping timeout: 240 seconds)
[23:16:44] *** Joins: fling (~fling@user/fling)
[23:45:06] *** Quits: Haxxa (~Haxxa@202-130-210-100.ip4.superloop.com) (Quit: Haxxa flies away.)
[23:48:33] *** Joins: Haxxa (~Haxxa@202-130-210-100.ip4.superloop.com)
