[00:00:11] *** Quits: lazyrat (~lazycat@user/lazycat) (Quit: ZNC - https://znc.in)
[00:02:36] *** Joins: lazycat (~lazycat@user/lazycat)
[00:28:26] *** Joins: jotoho (~jotoho@user/jotoho)
[00:29:53] <jotoho> gahr: I've got the backtrace you wanted. Sadly I was accidentally using my build without debug symbols when it happened this time. https://github.com/neomutt/neomutt/issues/3313#issuecomment-1079764288
[00:32:25] <jotoho> gdb and neomutt are still open right now, if you want me to run more gdb commands
[00:35:08] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Quit: Leaving)
[00:48:19] *** Joins: inak (~justme@228-134-237-24.gci.net)
[00:59:29] <mfiano> Hmm, neomutt is using 100% of my cpu
[00:59:33] *** Quits: strajder (~strajder@user/strajder) (Quit: leaving)
[01:00:12] <mfiano> and won't respond to any input
[01:35:51] *** Quits: dharrigan (~dharrigan@user/dharrigan) (Quit: ZNC - https://znc.in)
[01:39:01] *** Joins: rgrinberg (~textual@fixed-186-96-26-198.totalplay.net)
[01:39:16] *** Joins: dharrigan (~dharrigan@user/dharrigan)
[01:52:30] *** Quits: rgrinberg (~textual@fixed-186-96-26-198.totalplay.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:18:37] <mfiano> flatcap: I found a major bug with the file browser
[02:19:04] <mfiano> Pressing <right> in either mailbox or directory mode segfaults
[02:35:26] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[02:35:49] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[03:08:42] *** Joins: vysn (~vysn@user/vysn)
[03:12:04] *** Parts: jotoho (~jotoho@user/jotoho) (Leaving channel)
[03:19:48] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[03:31:26] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[03:42:12] *** Quits: vroom (~vroom@user/vroom) (Ping timeout: 240 seconds)
[03:48:12] *** Quits: sammelweis (~quassel@2601:401:8200:2d4c:bd9:d04c:7f69:eb10) (Ping timeout: 240 seconds)
[03:49:10] *** Joins: vroom (~vroom@cable-84-43-163-47.mnet.bg)
[03:49:11] *** Quits: vroom (~vroom@cable-84-43-163-47.mnet.bg) (Changing host)
[03:49:11] *** Joins: vroom (~vroom@user/vroom)
[03:54:37] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[03:56:33] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[04:05:16] *** Joins: sammelweis (~quassel@2601:401:8200:2d4c:bd9:d04c:7f69:eb10)
[04:18:34] *** Joins: Pali (~pali@user/pali)
[04:25:14] *** Joins: gabriel1_ (~gabriel1@2a02-8440-6200-5a27-f4e6-45b4-20ef-9627.rev.sfr.net)
[04:27:42] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Ping timeout: 252 seconds)
[05:32:17] *** Quits: maetthew (~maetthew@user/maetthew) (Quit: ZNC 1.8.2 - https://znc.in)
[05:34:54] *** Joins: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se)
[05:34:55] *** Quits: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se) (Changing host)
[05:34:55] *** Joins: maetthew (~maetthew@user/maetthew)
[06:26:22] *** Quits: plastico (~plastico@neomutt/plastico) (Quit: WeeChat 3.4)
[06:36:20] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[06:41:18] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:45:33] *** Quits: reset (~reset@user/reset) (Quit: reset)
[07:38:14] *** Joins: cdman (~dcm@user/dmc/x-4369397)
[07:39:54] *** Joins: _dmc_ (~dcm@27.2.216.148)
[07:43:11] *** Quits: cdman (~dcm@user/dmc/x-4369397) (Ping timeout: 256 seconds)
[07:58:53] *** Quits: Pali (~pali@user/pali) (Ping timeout: 252 seconds)
[08:04:38] *** Quits: nyah (~nyah@05453449.skybroadband.com) (Ping timeout: 272 seconds)
[08:19:48] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[08:33:18] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[08:33:44] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[08:39:46] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:42:25] *** Joins: vysn (~vysn@user/vysn)
[08:44:02] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[08:49:07] *** Quits: _dmc_ (~dcm@27.2.216.148) (Changing host)
[08:49:07] *** Joins: _dmc_ (~dcm@user/dmc/x-4369397)
[08:49:22] *** Quits: _dmc_ (~dcm@user/dmc/x-4369397) (Quit: Leaving)
[08:49:49] *** Joins: cdman (~dcm@user/dmc/x-4369397)
[08:56:10] *** Quits: saki (~saki@gateway/tor-sasl/saki) (Remote host closed the connection)
[08:56:36] *** Joins: saki (~saki@gateway/tor-sasl/saki)
[08:59:28] *** Joins: _dmc_ (~dcm@27.2.216.148)
[08:59:28] *** Quits: _dmc_ (~dcm@27.2.216.148) (Changing host)
[08:59:28] *** Joins: _dmc_ (~dcm@user/dmc/x-4369397)
[09:00:25] *** Quits: _dmc_ (~dcm@user/dmc/x-4369397) (Remote host closed the connection)
[09:17:55] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:35:10] *** Quits: inak (~justme@228-134-237-24.gci.net) (Quit: Leaving)
[09:46:01] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[09:47:52] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Client Quit)
[09:48:43] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[09:59:48] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[10:35:05] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 252 seconds)
[10:39:20] *** Quits: sbach (~sbach@user/sbach) (Read error: Connection reset by peer)
[10:41:45] *** Joins: sbach (~sbach@user/sbach)
[11:01:25] *** Quits: mrus (~mrus@gateway/tor-sasl/mrus) (Remote host closed the connection)
[11:01:43] *** Joins: mrus (~mrus@gateway/tor-sasl/mrus)
[11:14:20] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:15:05] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[11:20:37] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Ping timeout: 240 seconds)
[11:38:22] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[11:38:41] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[11:42:13] *** Joins: vysn (~vysn@user/vysn)
[12:35:55] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Ping timeout: 240 seconds)
[13:01:59] *** Quits: qub411 (~user@60-242-81-127.tpgi.com.au) (Quit: WeeChat 3.0)
[13:04:24] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[13:27:31] *** Joins: kalebris (~kalebris@84-236-14-55.pool.digikabel.hu)
[13:28:13] *** Quits: kalebris_ (~kalebris@212-40-86-29.pool.digikabel.hu) (Ping timeout: 240 seconds)
[13:30:30] *** Quits: mvdan (~mvdan@2001:470:69fc:105::63d) (Quit: You have been kicked for being idle)
[13:36:02] *** Quits: noex (~null@user/noex) (Remote host closed the connection)
[13:36:31] *** Joins: noex (~null@user/noex)
[14:06:37] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[14:16:54] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[14:22:06] *** Quits: redgloboli (~redglobol@user/redgloboli) (Ping timeout: 272 seconds)
[14:22:40] *** Joins: redgloboli (~redglobol@user/redgloboli)
[14:32:18] *** Joins: strajder (~strajder@user/strajder)
[15:12:13] *** Joins: reset (~reset@user/reset)
[15:18:54] <flatcap> morning all
[15:24:27] <mfiano> Morning
[15:26:29] <mfiano> So after reading the entire guide, I just want to confirm something: Is it true that mutt/neomutt does not have any means to do automatic filtering of incoming messages (moving them to another mailbox based on diferent criteria), and this can only be done interactively after reading a message with mbox-hook?
[15:28:32] <flatcap> yes, traditionally that was done by procmail (long unmaintained)
[15:28:37] <mfiano> I see there is a separate tool that does this for IMAP, but can anyone recommend a good way to do this with local Maildir mailboxes?
[15:28:45] <mfiano> (imapfilter)
[15:28:55] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Ping timeout: 240 seconds)
[15:32:38] <mfiano> I see the big appeal for notmuch now then. However, I decided it's too unreliable with my setup, so I'm back to plain mailboxes.
[15:32:45] <flatcap> sorry, dunno. I run my own mail server, so I use sieve for basic sorting
[15:33:09] <mfiano> OK no worries.
[15:33:30] <mfiano> flatcap: Did you see the segfault that is reliably reproducible above?
[15:33:51] <flatcap> yes.  right...
[15:33:57] <flatcap> what version are you running?
[15:34:10] <mfiano> next-page segfaults, presumably because my list is short and there is no next page? (guess a guess)
[15:34:19] <flatcap> I tried just randomly hitting <right> in the browser with any problems
[15:34:29] <mfiano> just a guess*
[15:34:32] <mfiano> uh, one sec
[15:34:52] <flatcap> oh, what do you mean by "browser" ?
[15:35:01] <flatcap> what are you viewing?
[15:35:50] <mfiano> neomutt 20211029-2 (latest Arch package)
[15:36:10] <flatcap> ok, good
[15:36:26] <mfiano> Oh, when I <save-message> and hit '?', it pops up the "browser"
[15:36:57] <mfiano> My browser is less than a page, so hitting <right>/<pagedown> segfaults
[15:37:01] <flatcap> yes, good.  that's the browser (just checking we were looking at the same thing)
[15:37:16] * flatcap tries again
[15:39:39] <flatcap> still no problem, here
[15:39:58] <mfiano> Interesting
[15:40:04] <mfiano> I can reproduce is every time.
[15:40:10] <mfiano> s/is/it/
[15:40:37] <flatcap> does arch use systemd?
[15:40:41] <mfiano> Yes
[15:40:55] <flatcap> coredumpctl dump -q > coredump
[15:41:10] <flatcap> gdb /usr/bin/neomutt coredump
[15:41:29] <mfiano> I must mention it strips debugging symbols of packages
[15:41:37] <flatcap> ah
[15:42:18] <flatcap> then, I think you're going to need to build neomutt to get any more info
[15:43:05] <flatcap> hmm...
[15:43:16] * flatcap checks the logs for talk of Arch build flags
[15:45:22] <flatcap> aha!  "they get stripped unless you add `options=(!strip)`"
[15:46:15] <mfiano> Ah ok
[15:46:29] <mfiano> By the way here's just the (useless) info: https://gist.github.com/mfiano/4f069a278b28dd0065e9665386cb495b
[15:47:04] <flatcap> ok :-)
[15:47:25] <mfiano> Let me find the pkgbuild the maintainers use so I can build with debugging symbols
[15:48:35] <flatcap> ok
[15:53:56] <mfiano> flatcap: Ok, I got a gdb prompt. I'm not sure what to do
[15:55:31] <flatcap> type `bt` to get a backtrace
[15:55:41] <flatcap> + <enter> :-)
[15:56:29] <mfiano> https://img.mfiano.net/zuWMXL.png
[15:57:24] <flatcap> aha, that's better
[15:57:42] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[15:57:54] <flatcap> a text paste would be better still (so I can cut'n'paste :-)
[15:58:20] <mfiano> One sec then
[15:59:07] <mfiano> https://gist.github.com/mfiano/e52143bbe87eeb077ebcfaca5cd7379d
[15:59:20] <flatcap> thanks
[15:59:31] <mfiano> Sure
[16:01:44] <mfiano> I also had a case where the process consumed 100% cpu and was unresponsive, but I doubt I can help debug that, especially considering it only happened once randomly when I wasn't even using neomutt.
[16:03:20] <flatcap> hmm... ok
[16:04:19] <mfiano> Let me know if you need me to do anything else to help debug this issue though. I'm sorry I'm not a C programmer but I want to help make neomutt better in any way I can :/
[16:06:01] <flatcap> thanks, will do
[16:07:06] <mfiano> moving away from this screen but i will get notified if you ping me
[16:10:34] <flatcap> ok
[16:13:33] *** Quits: baloona (~baloona@mail.baloona.de) (Quit: WeeChat 3.0)
[16:14:22] <mfiano> If you can't find it, I could also try pulling HEAD to see if that's why you can't reproduce it.
[16:16:52] <flatcap> yes please
[16:17:17] <flatcap> I'm trying both that release and the current dev version
[16:17:58] <mfiano> and you couldn't repro with that release either?
[16:18:12] <flatcap> neither
[16:18:19] <mfiano> Weird.
[16:18:42] <flatcap> the recent code has undergone large changes (so it may be fixed)
[16:19:33] <flatcap> where it crashes, it's gone beyond the end of a list of files/dirs
[16:19:53] <mfiano> Which branch do you want me to try?
[16:19:55] <flatcap> something particular about your directory
[16:20:02] <flatcap> `master` please
[16:20:28] <mfiano> flatcap: Also in case you missed it, this happens if I <tab> to mailboxes too, not just directories
[16:20:43] <flatcap> hmm... ok
[16:20:59] <mfiano> Let me provide a backtrace for that too
[16:21:05] <flatcap> now I have less of a clue
[16:21:07] <flatcap> thanks
[16:23:54] <mfiano> This one is for the mailbox list https://gist.github.com/mfiano/2593398a5761b266627367511a1c1217
[16:24:15] <mfiano> Looks almost the same
[16:25:19] <mfiano> looks like a buffer overflow
[16:26:55] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Ping timeout: 240 seconds)
[16:27:04] <mfiano> I'm going to bisect my config first before I try master
[16:27:13] <mfiano> I might be able to limit it down to a setting
[16:27:24] <flatcap> ok, good idea
[16:27:26] <flatcap> https://github.com/neomutt/neomutt/blob/master/browser/browser.c#L837-L841=
[16:27:45] <flatcap> it crashes when it tries to format a string do display in the browser
[16:27:57] <flatcap> that line is where is gets its data
[16:28:45] <flatcap> if ARRAY_GET() fails (if it tries to get line n+1 from an array of n), then we'd see the crash where we do
[16:30:16] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[16:31:00] *** Joins: baloona (~baloona@mail.baloona.de)
[16:33:01] <mfiano> I am almost done finding the problematic variable setting
[16:34:17] <mfiano> $menu_move_off = no
[16:34:21] <mfiano> That triggers the bug
[16:34:53] <flatcap> aha!
[16:35:38] <flatcap> bingo! crash!
[16:36:01] <mfiano> Alright, at least we are on the same page, no pun intended
[16:36:30] <flatcap> :-)
[16:43:15] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Ping timeout: 240 seconds)
[16:43:26] *** Joins: plastico (~plastico@neomutt/plastico)
[16:43:53] *** Quits: baloona (~baloona@mail.baloona.de) (Quit: WeeChat 3.0)
[16:44:26] *** Joins: baloona (~baloona@mail.baloona.de)
[16:44:52] <mfiano> Unrelated, but not sure if this is a feature, but it would be useful to have a "new message hook", so I can apply custom headers to it which I could then match against with save-hook expandos
[16:45:37] <mfiano> Trying to think of a way to keep from writing tons of matchers for saving different messages
[16:46:46] *** Quits: capn (~capn@user/capn) (Remote host closed the connection)
[16:46:59] <flatcap> ok, noted
[16:48:05] *** Joins: capn (~capn@user/capn)
[16:49:19] <mfiano> Ah I guess $index_format doesn't have an expando like ~GX but for custom headers.
[16:49:31] <mfiano> SO might be a bit of work since also need transformers
[16:50:35] <flatcap> no it doesn't: yes it would be 
[16:51:09] * flatcap 's mind is racing wondering how new-message-hook would work :-)
[16:51:38] <mfiano> Probably a bad idea anyway. Adding headers for the sole purpose of taxonomy wouldn't want to make their way to sent out mail.
[16:53:07] <mfiano> I think we should just have a "labels" feature (because "tag" is taken) where we can apply client-side labels to messages as they hit the spool mailbox
[16:53:32] <mfiano> Then a new message hook could automatically move them to different folders
[16:54:03] <mfiano> I am probably thinking too much and you have a lot of other work to do :)
[16:54:13] <flatcap> hehe, yes :-)
[16:54:44] <flatcap> I've found the problem in the browser.  I'll dig deeper a bit later
[16:54:52] <mfiano> Oh nice
[16:54:58] <flatcap> but now, it's crossword time
[16:55:03] <mfiano> Enjoy
[16:55:14] <flatcap> thanks
[16:55:31] <flatcap> and thanks for your help debugging
[16:57:55] <mfiano> Anytime.
[17:00:03] *** Joins: nyah (~nyah@05453449.skybroadband.com)
[17:08:56] *** Joins: Pali (~pali@user/pali)
[17:10:05] *** Quits: cdman (~dcm@user/dmc/x-4369397) (Quit: Leaving)
[17:11:51] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[17:16:32] *** Quits: bremner (~bremner@notmuch/developer/bremner) (Read error: error:1408F10B:SSL routines:ssl3_get_record:wrong version number)
[17:26:07] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[17:26:27] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[17:44:16] *** Quits: gabriel1_ (~gabriel1@2a02-8440-6200-5a27-f4e6-45b4-20ef-9627.rev.sfr.net) (Read error: Connection reset by peer)
[17:45:14] *** Joins: gabriel1_ (~gabriel1@37.165.21.225)
[18:02:39] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[18:06:57] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Ping timeout: 240 seconds)
[18:13:08] *** Joins: cdman (~dcm@user/dmc/x-4369397)
[18:41:23] *** Quits: Pali (~pali@user/pali) (Ping timeout: 260 seconds)
[18:44:56] <mfiano> flatcap: You mentioned you use sieve on your mail server...
[18:45:25] <flatcap> yes, just some simple rules
[18:45:37] <mfiano> Do you have any idea why the filters wouldn't be applied to new mail? manually calling sieve-filter works though
[18:46:31] <mfiano> I'm using Dovecot. Not sure what you use
[18:46:36] <flatcap> same
[18:46:42] * flatcap looks at his config...
[18:48:17] <mfiano> I have this in conf.d/15-lda.conf
[18:48:41] <mfiano> protocol lda { mail_plugins = $mail_plugins sieve }
[18:49:19] <flatcap> same
[18:49:35] <mfiano> Strange.
[18:50:01] <flatcap> and my conf.d/90-sieve.conf looks like https://pastebin.com/raw/S1BiE7bb
[18:50:42] <mfiano> Oh I didn't see that one
[18:51:01] <mfiano> I assume it isn't created with a Dovecot install
[18:51:07] <mfiano> Where did you learn about that?
[18:51:14] <flatcap> in ~/sieve I have managesieve.sieve which are my actual rules
[18:52:31] <flatcap> the conf file is part of the dovecot-pigeonhole package (on Fedora)
[18:53:25] <mfiano> Yeah I found it in /usr/share/doc... I had to manually copy it to /etc/dovecot/conf.d
[18:53:33] <flatcap> ah
[18:53:42] <mfiano> I didn't see this is the Dovecot manual. Thanks...will keep playing around
[18:53:46] <flatcap> np
[19:04:58] <mfiano> Well this issue is in the sieve log
[19:05:00] <mfiano> line 2: error: unknown command 'fileinto'
[19:05:18] <mfiano> But it works using sieve directly. I guess dovecot uses a different sieve syntax?
[19:05:26] <flatcap> I doubt it
[19:05:45] <mfiano> Can you share an excert of your .dovecot.sieve file?
[19:05:46] <flatcap> ah, my sieve file starts:
[19:05:48] <flatcap> require ["date","fileinto","imap4flags","relational","vacation"];
[19:07:37] <mfiano> Ok that worked.
[19:09:26] <flatcap> great
[19:09:33] <flatcap> https://pastebin.com/raw/nsH6sMUF
[19:09:40] <flatcap> that's the start of mine
[19:16:30] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[19:31:16] <mfiano> Nice thanks. What kind of mailbox do you have?
[19:33:03] <mfiano> I'm asking because I still can't figure out Dovecot's namespace/mailbox directives well enough to create a hierarchy. Like, I'd like a "lists" folder, with a child for each mailing list.
[19:33:21] <mfiano> If it's not too much of a bother I'd like to see your 15-mailboxes.conf
[19:34:39] <flatcap> on the server side, the dirs are .x, .x.y, .x.y.z (each with cur,new,tmp)
[19:34:52] <flatcap> to the client, it looks like x, x/y, x/y/z nesting
[19:35:29] <mfiano> Interesting. Can I see how you did that. I'm using the default dovecot mailboxes of ~/Maildir/{INBOX,Sent,Junk,Trash,Drafts}
[19:35:57] <mfiano> The namespace/mailbox documentation is pretty confusing to me.
[19:36:09] <flatcap> my 15-mailboxes.conf  https://pastebin.com/raw/udF4CE5h
[19:36:38] <mfiano> So where do the dots come from?
[19:38:00] <flatcap> I'm just looking for the right config file
[19:38:21] <flatcap> it's mostly a default install
[19:38:49] <mfiano> Mine is too. I didn't get the dotted directory layout. Probably 10-mail.conf
[19:43:26] *** Joins: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net)
[19:43:39] *** Quits: cdman (~dcm@user/dmc/x-4369397) (Quit: Leaving)
[19:44:05] <mfiano> "Dovecot uses the dot (.) as separator by default for Maildir and IMAP folders"
[19:44:32] <mfiano> So maybe I don't have a Maildir folder? What is the value of your mail_location variable in 10-mail.conf?
[19:46:12] <flatcap> ah, that explains it
[19:46:28] <flatcap> mail_location = maildir:~
[19:47:04] <mfiano> Ok yeah that explains it. I have some cryptic thing
[19:47:24] <flatcap> my postfix delivers to a dedicated mail user
[19:47:36] <mfiano> mail_location = mbox:~/Maildir:INBOX=/var/mail/%u
[19:47:55] <mfiano> My postfix delivers to /var/mail/%u, and dovecot-lda delivers that to ~/Maildir
[19:48:21] <mfiano> That variable was actually the only thing I could get working
[19:49:13] <flatcap> but dovecot's expecting mbox format for ~/Maildir
[19:49:18] <mfiano> Let me shut down my server and backup my maildir and see what happens
[20:01:06] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[20:05:22] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[20:06:34] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[20:06:57] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[20:17:00] <mfiano> Do you know where I can find the complete syntax for sieve?
[20:17:55] <flatcap> https://datatracker.ietf.org/doc/html/rfc5228
[20:18:22] <mfiano> Ah I didn't know it was an rfc
[20:26:31] *** Quits: gabriel1_ (~gabriel1@37.165.21.225) (Remote host closed the connection)
[20:37:29] <mfiano> Do your root directories start with a dot too?
[20:41:31] <flatcap> yes.  in ~ I have cur new tmp (the inbox) and .apple .banana etc as root folders
[20:42:23] <mfiano> Hmm mine do and it's confusing my neomutt config. Do you use mbsync?
[20:43:02] <flatcap> I _have_ done, but no
[20:43:17] <mfiano> Wonder if I am supposed to use "Flatten ." or SubFolders for the store section
[20:43:30] <mfiano> Or if my muttrc should dot prefix everything
[20:45:59] *** Quits: rgrinberg (~textual@fixed-186-96-30-153.totalplay.net) (Ping timeout: 260 seconds)
[20:47:56] <mfiano> Because currently when I <save-message> to a non-existent mailbox and create a new one, they don't show up in my filesystem...
[20:52:27] <flatcap> really?
[20:53:27] <flatcap> if you save to "apple" that'll create a new folder in the current dir
[20:53:44] <flatcap> "+apple" or "=apple" will be created in $folder/apple
[20:53:57] <flatcap> the type is determined by $mbox_type
[20:54:21] *** Quits: vysn (~vysn@user/vysn) (Remote host closed the connection)
[20:58:22] <mfiano> I fixed it
[20:59:02] <mfiano> flatcap: So with sieve, I seem to have to restart dovecot for rule updates to take effect. Is there a better way?
[20:59:46] <flatcap> dunnu, possibly SIGHUP
[21:00:19] <flatcap> that triggers a reread of config in many programs
[21:00:51] <flatcap> systemctl reload dovecot
[21:00:53] <flatcap> perhaps
[21:01:51] <flatcap> ah, the service reload calls: doveadm reload
[21:03:19] <mfiano> Ah
[21:03:53] <mfiano> I was trying to use sievec to compile my script, but get syntax errors. Dovecot must be setting up extensions and whatnot
[21:04:06] <mfiano> Well at least I understand what to do now
[21:12:52] <mfiano> Ok it seems you don't have to reload dovecot after editing the sieve rules. I was just getting a syntax error so it passed through without filtering
[21:12:53] *** Joins: jotoho (~jotoho@user/jotoho)
[21:13:07] <flatcap> ah
[21:13:18] <mfiano> I need to figure out which extensions I need for the "if header :value"
[21:13:25] <mfiano> says :value is invalid.
[21:13:44] <mfiano> Trying to do: if header :value "gt" "x-spam-score" "5" { ... }
[21:14:08] <mfiano> Must be one of the ones you have.
[21:14:23] <mfiano> Trial and error I guess. I don't see it mentioned in the RFC
[21:15:07] <flatcap> gt is greater-than, so I guess "relational"
[21:16:03] <mfiano> I guess dovecot has a lot of vendor extensions, which is unfortunate because I don't see an exhaustive list of its additions to the RFC
[21:25:23] <mfiano> Does the Seen flag you set for junk prevent neomutt from beeping with beep_new?
[21:25:54] <mfiano> I would assume yes
[21:26:28] <flatcap> yes
[21:26:40] <mfiano> Perfect.
[21:27:01] <mfiano> Now I can work on managing my inbox less manually with some filters.
[21:27:13] <mfiano> The infinite inbox is a real problem over here :)
[21:28:59] <flatcap> :-)
[21:29:25] <mfiano> Can I delete mailboxes from within neomutt?
[21:29:52] <mfiano> I have a bunch of temporary filter testing folders I want to get rid of now. I could use the shell, but I might want to do it more efficiently in the future with some keybindings
[21:36:04] <flatcap> yes, from the browser
[21:37:43] <mfiano> Sad. "Delete is only supported for IMAP mailboxes"
[21:37:58] <mfiano> I would think it'd be simple to do it for a local Maildir
[21:40:59] <flatcap> yes, that's being worked on
[21:42:29] <mfiano> It doesn't matter anyway. mbsync is not behaving how I'd expect. I have "Expunge Both" but after `rm`ing a directory, it just shows up again on the next sync.
[21:42:47] * mfiano tries to think how to delete local mailboxes so they stay deleted
[21:44:58] <flatcap> food, back later
[22:01:40] *** Joins: M4rty (~M4rtyflex@91-166-220-92.subs.proxad.net)
[22:03:14] *** Joins: oriba (~oriba@dynamic-077-013-007-140.77.13.pool.telefonica.de)
[22:05:19] <flatcap> mfiano: please can you give branch [devel/menu] a try. it should fix your crash
[22:05:33] <mfiano> Sure will do right now
[22:05:36] <flatcap> thanks
[22:05:45] <flatcap> food's actually ready this time, back later :-)
[22:11:21] <mfiano> devel/menu or flatcap/menu?
[22:11:36] <mfiano> oh i misread
[22:11:40] <mfiano> trying
[22:12:22] *** Joins: nattiestnate (~nate@202.138.250.62)
[22:14:04] <mfiano> flatcap: That fixes the problem!
[22:26:24] *** Quits: M4rty (~M4rtyflex@91-166-220-92.subs.proxad.net) (Quit: leaving)
[22:40:36] *** Joins: Pali (~pali@user/pali)
[22:49:54] *** Quits: strajder (~strajder@user/strajder) (Quit: leaving)
[22:53:26] *** Joins: strajder (~strajder@user/strajder)
[23:01:04] *** Quits: mrus (~mrus@gateway/tor-sasl/mrus) (Remote host closed the connection)
[23:01:22] *** Joins: mrus (~mrus@gateway/tor-sasl/mrus)
[23:05:18] *** Joins: rgrinberg (~textual@2806:102e:18:79a2:b869:a1d7:8a8:5006)
[23:59:57] *** Quits: rgrinberg (~textual@2806:102e:18:79a2:b869:a1d7:8a8:5006) (Quit: My MacBook has gone to sleep. ZZZzzz…)
