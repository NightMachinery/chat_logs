[00:11:02] *** Joins: vldcnst (vld@user/vldcnst)
[00:13:55] *** Quits: AnrDaemon (~ZNC@darkdragon-nln.starlink.ru) (Quit: q)
[00:18:32] <vldcnst> Hello, I'm seeing different results from array_multisort() with PHP version 5.6 and 7.4. When using boolean values, it seems the behaviour of the sorting has been changed. Is there a way to get the old behaviour back? https://pastie.dev/YUstLn.php
[00:23:25] *** Joins: AnrDaemon (~ZNC@darkdragon-nln.starlink.ru)
[00:28:42] <AllenJB> vldcnst: I would adjust the options flags (order and comparison method) until you get the order you desire. It looks like this behavior changed between 7.0 and 7.1: https://3v4l.org/jkKmh
[00:29:22] <vldcnst> AllenJB: I've tried every option and I couldn't reproduce the old behaviour.
[00:30:12] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 240 seconds)
[00:30:41] *** Joins: Joss (~joss@user/Joss)
[00:32:53] *** Quits: Joss (~joss@user/Joss) (Client Quit)
[00:35:13] <AllenJB> This change is probably related: https://www.php.net/manual/en/migration71.incompatible.php#migration71.incompatible.sort-order
[00:35:48] <AllenJB> Also, it may help you to use var_dump (or var_export) rather than print_r (which obfuscates the difference between numeric and boolean values)
[00:36:40] *** Joins: Donitz (~Donitz4@88-115-149-215.elisa-laajakaista.fi)
[00:38:26] *** Joins: Dan39 (~dan@user/dan39)
[00:40:03] <Dan39> using apache httpd with php(via php-fpm) 7.4 on rhel 8. i have a webui to allow downloading of some log files. i noticed on rhel 8 (but not on 7) i get selinux denials for php-fpm trying to use "map", for example: avc:  denied  { map } for  pid=957 comm="php-fpm" path="/var/log/chrony/system.log" dev="nvme0n1p2" ino=28181627 scontext=system_u:system_r:httpd_t:s0
[00:40:05] <Dan39> tcontext=system_u:object_r:chronyd_var_log_t:s0 tclass=file permissive=0
[00:40:08] <AllenJB> If you're not sorting multiple / multi-dimensional arrays, you may also want to look at the other array sorting functions. In this case, if you really need the old sort order and cannot reproduce it another way, you could use usort() / uasort() to write your own sorting function
[00:40:25] <Dan39> everything still seems to work fine though
[00:40:57] <Dan39> i'm thinking, does php try to use map, and then if it can't falls back to another method? should i give it access to use map on these files?
[00:41:54] <__adrian> https://3v4l.org/9QCGY https://3v4l.org/M3hFv  am i missing something? is $sort_direction just being ignored?
[00:42:39] <Dan39> i am using readfile() function in the script to send to browser
[00:43:01] <Sammitch> vldcnst: array_multisort($array, SORT_ASC, SORT_NUMERIC); https://3v4l.org/6kCLV
[00:43:22] <Sammitch> also don't expect sane results if you're sorting randomly mixed data types
[00:45:06] <Dan39> is string "0" still empty? :P
[00:45:10] <Sammitch> __adrian: SORT_REGULAR is probably type-juggling oddly. possibly to boolean
[00:45:36] <Sammitch> var_dump(empty("0"));
[00:45:37] <__adrian> Sammitch: point being ASC and DESC ought to give opposite results, not the same results
[00:45:58] <Sammitch> __adrian: if they all juggle to `true` then the order is indeterminate
[00:46:17] <__adrian> true (no pun intended)
[00:46:21] <Sammitch> heyooo
[00:47:57] <Sammitch> Dan39: if you're doing something like `while($foo = read_operation()) {...}` and that read returns the string "0", the while condition juggles that to `false` and your loop exits.
[00:48:18] <AllenJB> Dan39: Your question might be better asked in a distro specific channel. I don't know about the PHP internals for readfile, but selinux is designed to deny access to files to processes which shouldn't need to touch those files. I would read up on exactly what the map operation is in selinux terms and go from there.
[00:48:19] <AllenJB> Alternatively, learn how to use ssh / scp / sftp to transfer files without exposing them directly to a network service.
[00:48:50] <Sammitch> I'd like to tack rsync onto that list
[00:49:01] <AllenJB> (And other tools such as less and grep to search logs without transferring them elsewhere)
[00:49:08] <Dan39> AllenJB: haha, i figured someone would eventually say that
[00:49:23] <Dan39> but it's already a sold product as is
[00:49:44] <Dan39> i'm the OS guy and was told to get it on newer rhel :P
[00:49:55] <Dan39> you know how it goes..
[00:50:44] <Sammitch> I'm moving some stuff between Centos7 and Rocky8 and I'm noticing that some selinux contexts differ
[00:50:48] <AllenJB> If it's not an application you've written, consult the application authors.
[00:50:49] <Sammitch> YMMV
[00:51:04] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Read error: Connection reset by peer)
[00:51:11] <Dan39> AllenJB: well, i did write this PHP actually haha, embarassingly so
[00:51:32] <Dan39> but it works and customer is happy
[00:51:39] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Ping timeout: 260 seconds)
[00:51:41] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[00:51:57] <Dan39> i'm the linux tech asked to do some software projects, this is what you get :)
[00:52:13] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Client Quit)
[00:52:31] <Dan39> it has a user login system and all at least, and i even added csrf
[00:52:54] <Dan39> which was way too annoying
[00:53:10] <Sammitch> I mean usually people _remove_ CSRF
[00:53:12] <Sammitch> :P
[00:53:53] <Dan39> o_O?
[00:54:02] <Dan39> oh
[00:54:05] <Dan39> you know what i mean
[00:54:08] <Dan39> csrf PROTECTION
[00:54:15] <Dan39> funny guy
[00:54:28] <Sammitch> I'll be here all week. try the chicken.
[00:56:08] <Sammitch> confession: even though I am in a senior infra position, and an adovcate for selinux, I still know little more than how to set the contexts correctly to make selinux stop complaining. the rest is voodoo to me. <_<;
[00:56:32] <Dan39> i have a pretty big custom selinux policy module i made for this php WebUI
[00:57:44] <Dan39> previous OS guy just set the system permissive lol
[00:58:15] <Dan39> i also made custom domain transitions and all so that the services started from it don't run unconfined
[00:58:26] <Dan39> nightmare.
[00:58:41] <Sammitch> [goes back to the ansible role he's upgrading, immediately sees the following task from past-me] "Turn off selinux for this dumpsterfire" <_<;;;;;;;;;
[00:58:57] <Dan39> haha
[00:59:02] <Dan39> i really want to use ansible more
[00:59:04] <Sammitch> in my defense, it's jenkins
[00:59:31] <Dan39> i've never used jenkins iirc, except maybe a couple times from other people's FOSS projects
[00:59:40] <Dan39> i hate the name tho
[01:00:22] <Dan39> reminds me of jenkem
[01:00:48] <Sammitch> I am not really a fan of Jenkins. it more or less pre-dates CI and is more of a general "run tasks base on conditions" system than anything else
[01:01:11] <Dan39> or is he Old Man Jenkins?
[01:01:22] <Sammitch> Jenkins teh Butler
[01:01:43] <Dan39> you know of jenkem? <_<
[01:01:55] <Sammitch> nobody google that
[01:03:48] <Dan39> sorry
[01:05:13] <Dan39> ok well i'll just give it the map access to these files haha
[01:05:27] <Dan39> it'll only be for specific files that i know it already reads, so shouldn't hurt
[01:06:27] <Dan39> https://forums.devnetwork.net/viewtopic.php?p=396377&sid=4251a98f248f63cc2ed269306455726f#p396377
[01:06:38] <Dan39> not the most reputable source, but seems valid
[01:07:02] <Dan39> that's like the only mention of it i found quickly
[01:10:54] *** Quits: chemsmith (~chemsmith@user/chemsmith) (Ping timeout: 252 seconds)
[01:13:06] *** Joins: chemsmith (~chemsmith@user/chemsmith)
[01:15:57] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[01:16:21] *** Parts: vldcnst (vld@user/vldcnst) ()
[01:16:47] <Sammitch> what problem are you attempting to resolve with that information? o_oa
[01:31:15] *** Joins: mattf (~mattf@li908-138.members.linode.com)
[01:31:23] <mattf> openldap experts. I wanted to migrate mysql users to ldap without needing them to register again but their passwords were created with this odd hash over hash thing: https://github.com/WWBN/AVideo/blob/8a416c4eacca26229e0d5191119a9cf88ade8bb0/objects/functions.php#L2654  md5(hash("whirlpool", sha1($password)));   .... So, what can I do, is there a way to make openldap have an alternative hashing algorithm where i could use that? Can i
[01:31:24] <mattf> create a custom hashing script to make those old hashes compatible with ldap?
[01:32:06] *** Joins: l__q (~modinfo@user/modinfo)
[01:37:48] *** Quits: pmercado (~pmercado@186.107.58.34) (Quit: Konversation terminated!)
[01:42:16] *** Joins: Poboy (~Poboy@user/poboy)
[01:43:47] *** Joins: newwebdev13 (~newwebdev@78.135.92.217)
[01:44:05] <Sammitch> mattf: literally none of that has anything to do with PHP
[01:44:17] <mattf> well ok
[01:46:35] <Sammitch> but also, now that I look, that hashing method is hilariously non-standard and bad that I doubt that anything would accept it without a custom-written module specifically for that.
[01:46:45] <Sammitch> also, don't hash passwords like that.
[01:47:52] <da_wunder> mattf: you could migrate those users to your ldap, and on first login attempt make those users to input new password OR send emails to all those users with unique link where they can input their password
[01:47:52] <Sammitch> if you _really_ don't want to just blanket-reset passwords [which you should] I'd say alter your login workflow to include a migration to LDAP
[01:48:24] <mattf> well i didnt
[01:48:35] <mattf> yes thats some idea
[01:49:13] <Sammitch> if you are responsible for the code, it doesn't matter if your predecessor wrote bad code. you own it now.
[01:49:36] <mattf> im not
[01:49:43] <mattf> is not like i can't open an issue though
[01:49:46] <mattf> which im about to do
[01:50:54] <da_wunder> why you can't open issue? https://github.com/WWBN/AVideo/issues
[01:53:21] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[01:54:49] <mattf> i said im about to
[01:56:06] *** Joins: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs)
[02:00:17] *** Quits: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs) (Ping timeout: 240 seconds)
[02:00:34] *** Quits: genom (~g@37.214.75.10) (Remote host closed the connection)
[02:20:47] *** Quits: guido (~weechat@host-79-13-28-99.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[02:24:59] *** Quits: olle (~olle@c-8a89e455.034-536-6d6c6d4.bbcust.telenor.se) (Remote host closed the connection)
[02:26:53] *** Quits: l__q (~modinfo@user/modinfo) (Quit: interet cut off, write me memo! it will be send to my mail!)
[02:27:38] *** Joins: l__q (~modinfo@user/modinfo)
[02:28:40] *** Quits: l__q (~modinfo@user/modinfo) (Read error: Connection reset by peer)
[02:29:52] <Blondie101010> just be very patient, it will probably never be done from the look of it
[02:30:00] *** Quits: magla (~gelignite@d5367a39.access.ecotel.net) (Quit: Stay safe!)
[02:30:09] *** Joins: l__q (~modinfo@user/modinfo)
[02:30:13] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[02:32:42] <Blondie101010> mattf: I strongly suggest you look for a new tool
[02:32:42] *** Quits: wovixo (~wovixo@128.104.205.49) (Quit: Leaving)
[02:32:49] <Blondie101010> that code is horrible and not maintained
[02:37:37] *** Joins: l__q (~modinfo@user/modinfo)
[02:38:23] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[02:38:42] *** Joins: l__q (~modinfo@user/modinfo)
[02:39:01] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[02:41:09] *** Joins: l__q (~modinfo@user/modinfo)
[02:42:44] *** Joins: filename (~kilitary@188.242.105.134)
[02:44:38] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[02:44:49] *** Joins: l__q (~modinfo@user/modinfo)
[02:45:51] *** Quits: dallegos (~dallegos@191.97.196.147) (Remote host closed the connection)
[02:45:55] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[02:46:05] *** Joins: l__q (~modinfo@user/modinfo)
[02:48:07] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[02:49:10] *** Joins: l__q (~modinfo@user/modinfo)
[02:50:58] *** Joins: velix (~velix@user/velix)
[02:51:47] <velix> Do I "need" __DIR__ when accessing a relative file location? require_once __DIR__ . '/../whatever.php'. Actually it also works without?
[02:52:17] <velix> without it's "../whatever.php" of course.
[02:52:41] <Sammitch> __DIR__ is the directory in which the current file lives. './' is the current working directory, which is usually the directory in which the current invocation started, but not necessarily
[02:53:41] <velix> Sammitch: So I better keep it to be 100% sure ;)
[02:53:43] <Sammitch> I generally recommend something like `define('APPROOT', realpath('./foo/bar');`
[02:54:04] <velix> Sammitch: Yeah, I'll do this when the final structure is fixed ;)
[02:54:37] <Sammitch> !+later
[02:54:38] <php-bot> "later"? best practices — like input validation, prepared statements, testing, coding style, and so forth — are important. Many people say they "just want it to work" and claim they will "fix it later." Though they might even be sincere, experience shows it almost **never** happens. Don't be that person! Do it right the first time!
[02:55:42] <velix> Sammitch: the whole projekt is like a liquid with lots of wind.
[02:55:45] <velix> it's changing every day.
[02:55:49] <velix> sometimes it swaps
[02:55:56] <velix> it's always in motion :D
[03:04:45] <da_wunder> velix: that sounds like you don't have any real plan what your application should do and how
[03:08:08] <Sammitch> I don't know how you could possibly not know where your application is rooted, but ok.
[03:08:40] <da_wunder> velix: you really should talk with your team about that and really make decisions what you and your team should do
[03:08:56] <da_wunder> if you cannot do that - I would say that your project is doomed
[03:09:15] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[03:09:33] <velix> da_wunder: Our project has WWWWWWWAAAAAAAAYYYYYYY more fundamental problems than the root of PHP ;9
[03:09:47] <velix> da_wunder: The professor didn't finish the price list on the day, the shop went live.
[03:10:18] <velix> da_wunder: and 2 days before, the lawyer guy didn't get all the detals for the terms of trade.
[03:10:21] <velix> da_wunder: ;)
[03:10:23] <da_wunder> velix: I was not talking about PHP problems - I was talking generic stuff - you and your team should solve those things first...
[03:10:59] <velix> da_wunder: nobody is interested in this discussion here. I think nobody would even care.
[03:11:08] <velix> da_wunder: and the "team" is 2 people ;)
[03:11:35] <da_wunder> velix: your attitude about your problem is totally wrong...
[03:11:39] <Sammitch> well then, best of luck to you.
[03:11:53] <da_wunder> and even when there is just 2 people - it's a team...
[03:12:24] *** Quits: qwedfg_ (~qwedfg@user/qwedfg) (Read error: Connection reset by peer)
[03:13:02] <da_wunder> velix: and you already mentioned three people; you, professor and lawyer - so that is your team with that application - note that not all team member need to write code
[03:14:20] <Sammitch> someone check the temperature in hell, because da_wunder is saying things I agree with.
[03:14:58] <da_wunder> Sammitch: hahhaa :D
[03:15:43] <velix> da_wunder: I guess the professor is the last person on earth, who'd love to be counted to the project team :D
[03:15:47] <velix> but I got ya.
[03:16:03] <da_wunder> Sammitch: could you remind me when we've had some disagrees?
[03:16:52] <da_wunder> velix: if he/she is doing something to that project - then he/she is in the team...
[03:18:00] <Sammitch> da_wunder: not to put too fine a point on it, but I long ago generally stopped trying to stop you
[03:18:37] *** Joins: qwedfg (~qwedfg@user/qwedfg)
[03:18:48] <da_wunder> Sammitch: I don't have any memories about that, so cannot really say anything
[03:19:12] <Sammitch> ¯\_(ツ)_/¯
[03:22:12] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[03:24:03] *** Quits: bytestream2 (~bytestrea@user/bytestream) (Remote host closed the connection)
[03:40:30] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 252 seconds)
[03:42:53] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[03:45:25] *** Joins: l__q (~modinfo@user/modinfo)
[03:47:50] *** Quits: d3sync (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr) (Quit: KVIrc 5.0.0 Aria http://www.kvirc.net/)
[03:51:49] <funhouse> Warning
[03:51:49] <funhouse> As of PHP 8.1.0, a class which implements Serializable without also implementing __serialize() and __unserialize() will generate a deprecation warning.
[03:52:02] <funhouse> How do I also implement __serialize() and __unserialize() ?
[03:52:16] *** Parts: velix (~velix@user/velix) (Leaving)
[03:55:38] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[03:58:20] *** Quits: filename (~kilitary@188.242.105.134) (Remote host closed the connection)
[04:00:10] <da_wunder> funhouse: see - https://www.php.net/manual/en/class.serializable.php
[04:02:42] <funhouse> da_wunder I am, not sure what Im supposed to do now
[04:02:50] <funhouse> just get rid of the warning?
[04:08:54] <da_wunder> see that warning in the docs
[04:14:16] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[04:17:06] <Blondie101010> funhouse:  you can adjust error_reporting, but that'd be ill advised as it's telling you to change your code or it will not work in the near future
[04:18:53] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[04:26:10] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[04:28:01] <funhouse> yes i do, its being used in this file --> https://pastebin.com/VQ8DkiMJ
[04:28:03] <funhouse> Facebook SDK
[04:28:18] <funhouse> Dont even see any serialize or unserialize functions being used
[04:28:34] <funhouse> Youd think a multi billion corp would update their code
[04:54:24] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[04:55:04] *** Quits: Awaru (~Awaru@213.152.187.235) (Ping timeout: 272 seconds)
[05:03:06] *** Joins: Awaru (~Awaru@213.152.187.235)
[05:03:22] *** Quits: Awaru (~Awaru@213.152.187.235) (Remote host closed the connection)
[05:07:54] *** Joins: Awaru (~Awaru@213.152.187.235)
[05:09:24] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[05:11:10] *** Joins: l__q_ (~modinfo@user/modinfo)
[05:12:45] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[05:13:01] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 240 seconds)
[05:19:29] *** Joins: filename (~kilitary@188.242.105.134)
[05:23:18] *** Quits: newwebdev13 (~newwebdev@78.135.92.217) (Quit: Leaving)
[05:23:50] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[05:25:53] *** Joins: The_Blod- (~Blode@user/the-blode/x-7164444)
[05:26:06] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 272 seconds)
[05:29:16] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 272 seconds)
[05:30:09] *** Quits: filename (~kilitary@188.242.105.134) (Remote host closed the connection)
[05:34:18] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[05:36:27] *** Joins: filename (~kilitary@static.246.201.46.78.clients.your-server.de)
[05:40:01] <Dan39> Sammitch: lol that information won't solve anything, more just info :P
[05:40:59] *** Quits: filename (~kilitary@static.246.201.46.78.clients.your-server.de) (Ping timeout: 260 seconds)
[05:43:12] *** Quits: Awaru (~Awaru@213.152.187.235) (Ping timeout: 272 seconds)
[05:43:52] <Sammitch> Dan39: don't absorb information from that thread then, there's a lot of dumb and misleading things said in it.
[05:45:12] <Sammitch> not to mention that in the 15 years since that forum post there have been more than a few changes.
[05:57:03] *** Joins: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs)
[06:00:42] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[06:01:31] *** Quits: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs) (Ping timeout: 260 seconds)
[06:01:37] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[06:03:41] *** Joins: vlm (~vlm@user/vlm)
[06:10:43] *** Joins: Awaru (~Awaru@213.152.187.235)
[06:11:05] *** Quits: Awaru (~Awaru@213.152.187.235) (Remote host closed the connection)
[06:13:49] *** Joins: Awaru (~Awaru@213.152.187.235)
[06:24:24] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 252 seconds)
[06:33:18] *** Joins: coder7of9 (~coder7of9@user/coder7of9)
[06:34:36] <coder7of9> i have 5 string i need to check against every server[request_uri].   what is the most efficeint way to do this... strpos === false, preg_grep.  another way    thanks
[06:35:49] <coder7of9> php 7
[06:36:17] <Blondie101010> that looks like premature optimization
[06:36:47] <Blondie101010> the simplest solution would probably be a better option
[06:38:02] <Blondie101010> if it's a substring search for 5 words, it seems regex would do a good job
[06:38:03] <coder7of9> well since it is every singe hit to the site
[06:38:24] <Blondie101010> 5 string comparisons?
[06:38:43] <coder7of9> 5 text patterns in the url.   2 are words  3 are less than 50 char
[06:38:49] <Blondie101010> from a URL, so not something huge for sure
[06:39:20] <Blondie101010> how much time do you think you can save with that? :)
[06:39:24] <coder7of9> 2 are 10 char. 3 about 30 or 40 char
[06:39:33] <Blondie101010> likely less than 10ms
[06:39:55] <coder7of9> so no diff between loop and strpos and pgeeg
[06:39:58] <coder7of9> preg
[06:40:04] <coder7of9>  okay you have a point
[06:40:05] <Blondie101010> if your script is slow, profile it
[06:40:20] <TML> coder7of9: The question seems a bit suspect
[06:40:21] <Blondie101010> that means to pinpoint exactly what is slow
[06:40:51] <TML> are you doing some kind of routing here?
[06:41:01] <coder7of9> i am asking because it will be on every single server hit.  that is alll
[06:41:21] *** Joins: roadie (~user@pd956924f.dip0.t-ipconnect.de)
[06:41:31] <coder7of9> yes.  preventing some database entried on specific polling urls which are frequent
[06:41:35] <Blondie101010> that's what "premature optimization" means
[06:41:36] <coder7of9> i will see how it is
[06:41:46] <TML> Right, but I'm saying "doing such an evaluation on every server hit seems like a bad way to solve whatever your problem is"
[06:42:07] <TML> coder7of9: What are you doing if it matches one of those strings?
[06:42:09] <Blondie101010> it often leads to harder to maintain code which may eventually slow things down
[06:44:00] <Blondie101010> coder7of9:  the sanest approach is to look for actual bottlenecks when they occur....  if you're worried about your app's performance, you could benchmark it
[06:44:25] <coder7of9> an optimal redesign is not practical .... at some point perhaps....
[06:44:32] *** Joins: filename (~kilitary@188.242.105.134)
[06:44:56] <Blondie101010> not suggesting that at all
[06:45:03] <coder7of9> some poll urls which are frequent need to be ignored for last updats value, database entries
[06:45:28] <Blondie101010> how many hits do you get per minute?
[06:46:03] <coder7of9> starts at 30 seconds and incremnts based on last access to 2 hours
[06:46:44] <coder7of9> some depends on number of users   likley under 100
[06:46:47] <Blondie101010> I'd write that in 15 lines using a file with lock
[06:47:52] <Blondie101010> but my question was how many hits does your script get per minute
[06:48:16] <coder7of9> 300 or 400
[06:48:22] <coder7of9> maybe more
[06:48:50] <Blondie101010> ok, so then what is your high level bottleneck?
[06:49:00] <Blondie101010> RAM, IO, CPU, network?
[06:49:49] <Blondie101010> a glance at `top` under load could give a pretty good answer
[06:49:49] <coder7of9> i think it will be okay. i am not concerned about performance of the server   but more for the sql server. i will not pre optimize.:)
[06:49:59] <Blondie101010> ;)
[06:50:31] <Sammitch> sounds like something that might be better addressed by a caching layer
[06:50:44] <Blondie101010> possibly
[06:51:15] <coder7of9> real time data... new messages, likes,
[06:51:47] <coder7of9> it was every 30 seconds.   i just added incremental intervals
[06:52:00] <Sammitch> caching, queues, background workers
[06:52:36] <coder7of9> yes.  good point...
[06:52:59] *** Quits: roadie (~user@pd956924f.dip0.t-ipconnect.de) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[06:53:27] <coder7of9> but the hits are quick... minimal data... counts and the like.. followed by data requests when needed
[06:54:05] <coder7of9> a chaching queue and background workers are certainly an improvement
[06:54:16] <Sammitch> eg: rather than every "vote" triggering an insert or update, stuff that event in a queue, have a worker tend to that queue and handle things in batches. additionally, when updating the database you can also push-update the cache directly rather than relying on a pull-through model
[06:54:27] <TML> coder7of9: What are you doing if it matches one of those strings?
[06:55:55] <coder7of9> if it matchs a string there is the last_update value is not updated, there are a few database hots which are avoided
[06:56:04] <Sammitch> you can also get around users' votes not technically being immediate by faking it. submit the event, update the user's view with JS, and by the next time they touch the server it'll probably be processed.
[06:56:17] <coder7of9> *hit
[06:56:28] <TML> coder7of9: How are you avoiding the database hits?
[06:56:59] <TML> i.e., what are you _doing_
[06:57:06] <coder7of9> a section is wrapped.  if allowUpdates
[06:57:26] *** Joins: funhouse (~funhouse@user/funhouse)
[06:57:42] <TML> so you're branching which queries are run based on those URIs?
[06:58:04] <coder7of9> preventing based on urls
[06:58:37] <coder7of9> this is old code
[06:58:48] <TML> You could do a RewriteMap (or your httpd's equivalent) and set a single request parameter if it's one of the 5 strings, and then you only have one thing to check for in the PHP side
[06:59:45] <coder7of9> there is even a class which does some db accesses in the contructor which is nightmare and i do not need that to fire.
[06:59:50] <coder7of9> that is a good idea
[07:00:44] <coder7of9> i thought to also rewrite all the polling to a specific url   but a mao would also acomplish this
[07:01:17] <coder7of9> thanks
[07:01:56] <coder7of9> that is a very good near term solution
[07:02:18] <coder7of9> i will test it
[07:09:51] <TML> That's why I was trying to get you to tell me what you're doing on a match, so we could propose alternatives
[07:10:06] <TML> not that this is a performance difference, but IMO it'll make for cleaner code
[07:17:07] <coder7of9> yes much cleaner
[07:20:34] * Blondie101010 likes it
[07:29:12] *** Joins: Vision (~Vision@023-084-128-214.res.spectrum.com)
[07:32:56] <Dan39> Sammitch: lmao, i figured.
[07:33:24] <Dan39> i didn't read much tbh, ctrl+f what i wanted and noticed the people didn't seem too bright so kinda ignored it
[07:43:18] *** Quits: filename (~kilitary@188.242.105.134) (Quit: joined libera)
[07:45:17] *** Joins: filename (~kilitary@static.246.201.46.78.clients.your-server.de)
[07:53:54] *** Quits: coder7of9 (~coder7of9@user/coder7of9) (Quit: Client closed)
[07:55:54] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[07:58:35] *** Quits: travisghansen (~travisgha@192.74.130.86) (Ping timeout: 256 seconds)
[07:59:22] *** Quits: The_Blod- (~Blode@user/the-blode/x-7164444) (Ping timeout: 272 seconds)
[08:04:12] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[08:04:21] *** Joins: Jck_true1 (~jcktrue@user/jck-true/x-0200799)
[08:04:49] *** Quits: Jck_true (~jcktrue@user/jck-true/x-0200799) (Ping timeout: 256 seconds)
[08:04:49] *** Jck_true1 is now known as Jck_true
[08:06:25] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[08:06:31] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[08:10:19] *** Quits: filename (~kilitary@static.246.201.46.78.clients.your-server.de) (Ping timeout: 260 seconds)
[08:13:18] *** Joins: filename (~kilitary@188.242.105.134)
[08:25:43] *** Quits: mintoyatsu (~mint@user/mintoyatsu) (Remote host closed the connection)
[08:27:35] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 260 seconds)
[09:19:24] *** Quits: aloy (~luna@2001:41f0:3fe:3:c950:4707:486d:2b89) (Read error: Connection reset by peer)
[09:20:45] *** Quits: sreve (~quassel@p4ff44d34.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[09:21:13] *** Joins: sreve (~quassel@p54a71d5a.dip0.t-ipconnect.de)
[09:23:38] *** Joins: aloy (~luna@2001:41f0:3fe:3:3c53:82ba:e6d2:6740)
[09:56:57] *** Joins: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs)
[10:02:14] *** Quits: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs) (Ping timeout: 272 seconds)
[10:05:27] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[10:05:52] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[10:14:09] *** Quits: filename (~kilitary@188.242.105.134) (Remote host closed the connection)
[10:20:40] *** Quits: Forza (~Forza@user/forza) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[10:21:03] *** Joins: Forza (~Forza@user/forza)
[10:26:20] <ash_worksi> mattf: I didn't read the whole backlog, but re your hash/hash problem; I would make an upgrade script for that. Port the passwords using those nested hashes and when users login, rehash the plaintext password.
[10:26:39] <ash_worksi> (using whatever you actually wanted to use)
[10:28:42] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[10:42:02] <Blondie101010> that is indeed a proper solution
[10:50:04] *** Joins: guido (~weechat@host-87-21-253-205.retail.telecomitalia.it)
[10:55:25] *** Quits: mr_gant (~mr_gant@203-206-182-122.perm.iinet.net.au) (Read error: Connection reset by peer)
[10:56:11] *** Joins: mr_gant (~mr_gant@103.192.80.185)
[11:09:04] *** Joins: hh (~g@37.214.75.10)
[11:19:50] <mishehu> these days I'm using the argon2 functionality for handling passwords with password_hash() etc.
[11:28:00] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[11:28:57] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 240 seconds)
[11:35:10] *** Joins: nwulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[11:37:37] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 240 seconds)
[12:00:02] *** Quits: BrunoFontes (~bruno@2a02:c207:2026:6264::1) (Quit: WeeChat 2.8)
[12:05:14] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[12:11:48] *** Joins: sgen (~sgen@2607:fea8:7ce1:c8e0:ec7f:bf70:4897:f9a7)
[12:19:27] *** Joins: Lazenca (~lazenca@user/lazenca)
[12:28:52] *** Quits: N3X15 (~nexis@mail.nexisonline.net) (Quit: ZNC - http://znc.in)
[12:30:30] *** Joins: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs)
[12:31:31] *** Joins: N3X15 (~nexis@mail.nexisonline.net)
[12:32:52] *** Joins: filename (~kilitary@188.242.105.134)
[12:35:07] *** Quits: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs) (Ping timeout: 256 seconds)
[12:38:04] *** Quits: filename (~kilitary@188.242.105.134) (Remote host closed the connection)
[13:01:36] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b1b1:e3c2:ffcc:c651)
[13:15:45] *** Quits: shailangsa (~shailangs@host165-120-169-51.range165-120.btcentralplus.com) (Ping timeout: 268 seconds)
[13:24:12] <netstar> Hi. I'm looking into extending my PHP session lifetime via an AJAX request. Essentially, I have a timer which does an AJAX request to a URL that modifies the session only. I should expect the cookie age would change? My attempt has 0 affect.
[13:31:39] <AllenJB> How are you modifying the session? (show us the code for the AJAX request handler - use a pastebin such as gist.github.com )
[13:32:47] <netstar> Ah ok...sorry. I just realised I had a syntax error...it's working now :)
[13:40:17] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Ping timeout: 256 seconds)
[13:49:31] *** Joins: LucaTM (~LucaTM@user/lucatm)
[14:04:45] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b1b1:e3c2:ffcc:c651) (Ping timeout: 252 seconds)
[14:06:17] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[14:11:39] *** Quits: BlackIkeEagle (~BlackIkeE@archlinux/trusteduser/blackikeeagle) ()
[14:14:47] *** Joins: BlackIkeEagle (~BlackIkeE@archlinux/trusteduser/blackikeeagle)
[14:21:42] *** Quits: Lazenca (~lazenca@user/lazenca) (Remote host closed the connection)
[14:49:51] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 252 seconds)
[14:52:51] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[15:05:39] *** Joins: velix (~velix@user/velix)
[15:06:18] <velix> Wow, most of the long-running PHP repositories on Github are deprecated for 8 years. Is it a "no go" to have long-running php workers?
[15:08:51] <velix> hrhrhr, this php-daemon is written in python ;) https://github.com/stianstr/phpydaemon/blob/master/phpydaemon/__init__.py
[15:21:16] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Quit: elastic_dog)
[15:21:35] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[15:27:41] *** Joins: shailangsa (~shailangs@host86-162-150-212.range86-162.btcentralplus.com)
[15:28:27] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Read error: Connection reset by peer)
[15:29:43] <AllenJB> velix: No - I'd suggest there's better ways of doing things than there used to be. Projects such as ReactPHP and Swoole have brought new ways of doing things and continued to evolve. Frameworks like Symfony have standard command packages they've evolved.
[15:31:40] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[15:31:52] <velix> AllenJB: Okay, I'll switch to Python for these workers then. I don't want huge frameworks, just to send a mail ;)
[15:31:58] <velix> Thanks
[15:32:58] *** Joins: newwebdev13 (~newwebdev@78.135.92.217)
[15:33:02] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Remote host closed the connection)
[15:33:36] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[15:33:45] *** Quits: guido (~weechat@host-87-21-253-205.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[15:33:50] <velix> hrhr, someone, who doesn't want to be named in here, just has sent me this link: https://bernardphp-com.readthedocs.io/projects/bernard/index.html
[15:46:09] *** Parts: velix (~velix@user/velix) (Leaving)
[15:48:42] *** Joins: Bushmaster (~Goondog@user/bushmaster)
[15:48:50] <Bushmaster> Hi, not sure its the right place, to ask, but CSS may be right channel, but I ask here first and see what some of you folks say, my website layout changes from browser to browser, in Firefox browser it looks all fine, but in Microsoft Edge the layout gets changes, especially borders at the bottom of the page ...any idea how to ensure nothing gets changes from browser to browser?
[15:50:47] <AllenJB> Definitely more a CSS question. I would suggest you read up on CSS reset stylesheets. Alternatively go full-in with a CSS framework such as Bootstrap (which will provide a reset stylesheet as part of itself)
[16:03:18] <Bushmaster> Excellent answer, thanks a lot, yes I need to learn Bootstrap, I have not learnt bootstrap or CSS Reset Style Sheet yet
[16:29:50] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 272 seconds)
[16:29:56] *** Joins: Bencraft (~Bencraft@user/Bencraft)
[16:38:01] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5071:8b3d:d587:ed33)
[16:41:35] *** Quits: Bencraft (~Bencraft@user/Bencraft) (Quit: brb)
[16:43:59] *** Joins: Bencraft (~Bencraft@user/Bencraft)
[16:56:06] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b1b1:e3c2:ffcc:c651)
[17:00:45] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b1b1:e3c2:ffcc:c651) (Ping timeout: 252 seconds)
[17:02:02] *** l__q_ is now known as l__q
[17:17:23] *** Parts: alien_lappy (~alien@user/alien) ()
[17:19:11] *** Joins: filename (~kilitary@static.246.201.46.78.clients.your-server.de)
[17:33:59] *** Joins: velix (~velix@user/velix)
[17:34:25] <velix> Hmm. PHP says it has thrown, but try/catch didn't caught it. Anyone with an idea why? https://3v4l.org/hOv1T#v8.1.4
[17:34:53] <velix> catch*
[17:38:53] <velix> ahhh \Error !
[17:38:54] <velix> thanks
[17:42:18] *** Joins: phil (~phil@host-24-224-210-50.public.eastlink.ca)
[17:42:58] *** Quits: phil (~phil@host-24-224-210-50.public.eastlink.ca) (Client Quit)
[17:45:19] *** Joins: phil (~phil@host-24-224-210-50.public.eastlink.ca)
[17:45:48] *** Joins: _filename (~kilitary@188.242.105.134)
[17:49:00] *** Quits: filename (~kilitary@static.246.201.46.78.clients.your-server.de) (Ping timeout: 272 seconds)
[17:52:12] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[18:11:24] *** Quits: phil (~phil@host-24-224-210-50.public.eastlink.ca) (Quit: Leaving)
[18:18:16] *** Joins: mintoyatsu (~mint@user/mintoyatsu)
[18:21:49] *** Quits: Vision (~Vision@023-084-128-214.res.spectrum.com) (Ping timeout: 240 seconds)
[18:23:07] <velix> Hmm, I can't get set_error_handler() to work. It never gets active.
[18:30:58] <velix> Is set_error_handler() deprecaed in Php8 ?
[18:32:43] *** Joins: thiras (~thiras@user/thiras)
[18:33:13] <AllenJB> No, it's not deprecated. Can you show us a code example (pastebin / gist / https://3v4l.org ) that reproduces your problem?
[18:33:21] <da_wunder> no - https://www.php.net/set_error_handler
[18:34:40] <Blondie101010> deprecation causes a deprecation error which may or may not be visible depending on your error_reporting...  after deprecation, a functionality is removed, which would result in a fatal error representing the missing function (not the case here)
[18:36:33] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[18:37:49] <velix> I figured it out. I didn't need set_error_handler(), but register_shutdown_function() :D
[18:42:21] *** Joins: Vision (~Vision@023-084-128-214.res.spectrum.com)
[18:45:47] <velix> I think something is messed up with the php-fpm config. display_error, etc. are Off (normal production settings), but I still see "Fatal error".
[18:45:57] <velix> I'll reinstalled it. Don't know who messed around here :D
[18:46:56] *** Quits: newwebdev13 (~newwebdev@78.135.92.217) (Read error: Connection reset by peer)
[18:47:09] *** Joins: newwebdev13 (~newwebdev@78.135.92.217)
[18:47:24] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b1b1:e3c2:ffcc:c651)
[18:47:54] *** Quits: Vision (~Vision@023-084-128-214.res.spectrum.com) (Ping timeout: 272 seconds)
[18:49:12] <AllenJB> If you're using a custom error handler, then display_errors won't have any effect on that.
[18:49:57] <AllenJB> Also check that you haven't got an ini_set() call somewhere in your code that's turning display_errors on
[18:50:58] <velix> AllenJB: No, I removed it for tested and still all errors are shown. I've got a blank file: <?php blupp();
[18:52:29] <velix> Yeah, reinstall did it.
[18:52:39] <velix> Someone of the "team" seems to have messed around with the config :(
[18:53:00] <velix> I really need to revoke some permissions!!!
[18:53:22] <AllenJB> Consider having your php configuration in repo and part of the deploy process - that way all changes are recorded
[18:53:44] <velix> AllenJB: Yeah, I'll get rid of Debian soon and switch to Containers. I don't like this monolith stuff.
[18:55:10] <AllenJB> Whether you're using containers or not has nothing to do with whether your architecture is monolithic. You can have microservices running without containers, and a monolith running in containers.
[18:56:46] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5071:8b3d:d587:ed33) (Ping timeout: 268 seconds)
[19:12:26] <da_wunder> and anything between those
[19:13:30] *** Joins: Vision (~Vision@023-084-128-214.res.spectrum.com)
[19:18:25] *** Quits: Pixi (~Pixi@user/pixi) (Quit: Leaving)
[19:25:17] *** Quits: Vision (~Vision@023-084-128-214.res.spectrum.com) (Ping timeout: 240 seconds)
[19:29:01] *** Joins: Pixi (~Pixi@user/pixi)
[19:36:37] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 240 seconds)
[19:37:54] *** Joins: guido (~weechat@host-87-17-251-90.retail.telecomitalia.it)
[19:38:28] *** Joins: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs)
[19:42:18] *** _filename is now known as filename
[19:50:06] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[19:56:12] *** Joins: mpldr_ (~mpldr@user/mpldr)
[19:57:49] <mpldr_> Hi, I know there is an option to "globally preload" a php-file in PHP-FPM… So that this file is basically "included" first. Does anyone happen to know what this was called? Unfortunately all my searches lead me to opcache and I'm pretty sure that wasn't it
[19:59:11] <__adrian> auto_prepend_file
[19:59:27] <__adrian> though note, _Using_ this is generally a signof a very bad design
[19:59:32] <mpldr_> Thanks.
[19:59:38] <__adrian> np
[20:00:02] <mpldr_> I have to use a framework and don't want to edit files from that so that it's not overwritten on every update
[20:00:07] <TinoDidriksen> auto_prepend_file is for when you need a quick'n'dirty temporary hack.
[20:00:44] <__adrian> auto_prepend_file was for a generally bad design idea
[20:01:12] <mpldr_> okay, maybe you have a better alternative: my usecase is that I want to basically die(); with an error page if the database does not exist
[20:01:23] <__adrian> .__·
[20:01:29] <__adrian> sure, that's a real bad design idea.
[20:01:34] <TinoDidriksen> ...why would the database not exist?
[20:01:36] <mpldr_> we had multiple cases of data inconsistencies because that framework sucks ass
[20:01:56] <__adrian> "data inconsistency" or "database does not exist"?
[20:01:56] <mpldr_> delete file first, then update database
[20:02:13] <mpldr_> the latter fails, but the database wasn't made aware of that
[20:02:29] <mpldr_> and the supplier is like "too bad"
[20:02:32] *** Joins: BrunoFontes (~bruno@2a02:c207:2026:6264::1)
[20:02:34] <__adrian> so the db thinks the file exists but it doesn't
[20:02:39] <mpldr_> exactly
[20:02:53] <__adrian> "supplier is like "too bad""  did you pay for this?
[20:03:15] <mpldr_> yup… but it's in use since 2011 so it's a pretty hard dependency
[20:03:23] *** Quits: wolfshappen (~waff@irc.furworks.de) (Quit: later)
[20:05:00] *** Quits: filename (~kilitary@188.242.105.134) (Remote host closed the connection)
[20:05:17] <__adrian> as a paying comsumer, you have some right to expect the product you purchased actually works. though 11 years might put it out of reasonable support... also 11 years seems like it's likely you need to update a lot of things anyway
[20:05:54] <Blondie101010> if the software provider doesn't support it (anymore), then you're responsible for it
[20:06:07] <__adrian> mm
[20:06:13] <__adrian> time to fork.
[20:06:17] <Blondie101010> making bad patches will only make the application harder and harder to maintain
[20:06:18] <mpldr_> I've been bothering my boss about that for ages… but he's one of the never touch a running system types
[20:06:25] <__adrian> note, this would also allow you to control updates.
[20:06:47] <mpldr_> "time to fork" proprietary as all hell… we only got heavily obduscated bytecode
[20:06:59] <__adrian> "he's one of the never touch types"  well, we can't change that  ;)  and it doesn't change what the correct approach is.
[20:07:00] *** Joins: wolfshappen (~waff@irc.furworks.de)
[20:07:10] <__adrian> i'll wish you luck
[20:07:36] <mpldr_> thanks ^^ I hope the auto_prepend will at least keep my saturdays free from now on
[20:08:18] <Blondie101010> it will take you twice as long to troubleshoot most issues, so it depends how lucky you are
[20:08:40] <da_wunder> at least you should get overtime pay for saturdays
[20:09:22] <Blondie101010> depends where you work, but likely not
[20:09:52] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[20:10:12] *** Joins: thiras (~thiras@user/thiras)
[20:10:13] <AllenJB> sounds like you need to explain the difference between a "running" system (that continually catches fire) and a "working" system, perhaps in the form of a resignation letter
[20:10:24] <Blondie101010> :)
[20:11:24] *** Joins: l__q (~modinfo@user/modinfo)
[20:13:19] <da_wunder> mpldr_: may I ask what framework you're using? and which version?
[20:15:06] <Blondie101010> it's proprietary obfuscated crap
[20:15:21] <__adrian> asked and answered indeed
[20:16:29] <Blondie101010> options include contacting the author to get/buy the real source code so it can be forked
[20:16:49] <mpldr_> some custom tailored stuff from SAP
[20:17:39] <mpldr_> Allen: I really like the idea… but I'd prefer to have a follow up job beforehand. and the benefits are pretty nice
[20:18:21] <__adrian> no one said you couldn't/shouldn't find another job first
[20:18:39] <mpldr_> Blondie: from my interactions with SAP until now, that's somewhat unlikely… they have been less than cooperative so far
[20:18:53] *** Parts: Simos (~simos@user/h7-25) (Textual IRC Client: www.textualapp.com)
[20:19:14] *** Joins: filename (~kilitary@static.246.201.46.78.clients.your-server.de)
[20:19:50] <Blondie101010> mpldr_:  so your problematic software is official SAP?
[20:20:14] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[20:20:17] <mpldr_> yes, but the cooperation with them ended 3 years ago
[20:21:15] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[20:21:15] <Blondie101010> did you already have those problems when you ended it?
[20:21:32] <da_wunder> so when was the latest update to that tailored framework?
[20:22:05] <mpldr_> about 4 years ago going by the timestamps
[20:22:25] <da_wunder> ok, and what PHP version you're using?
[20:22:26] <mpldr_> Blondie: haven't been with the company that long… but probably
[20:22:37] <mpldr_> 5
[20:22:49] <da_wunder> PHP5?
[20:22:50] <Blondie101010> mpldr_:  then your predecessor messed up big time
[20:23:37] <mpldr_> da_wunder: yes. tried to change it to at least 7 (no chance to get it to 8) but not a chance… and it's not like I can really fix the errors either
[20:23:40] <Blondie101010> you should never let go of a support contract unless you're replacing the solution
[20:23:45] <mpldr_> amen
[20:23:57] <da_wunder> you know that has not been supported in years, and that is exposing your application serious security risks
[20:24:16] <mpldr_> yes, i know that perfectly well
[20:24:17] <da_wunder> if your boss cannot understand that risk - then I really recommend you to look for new job
[20:25:15] <mpldr_> will definitely do that… it's the 5th time this year i had to come in on weekends
[20:25:40] <da_wunder> I really hope that you get overtime pay for that
[20:26:02] <mpldr_> I do, but it's not worth it wasting your time on this shit
[20:26:33] <mpldr_> at least I have a mail from him clearly telling me not to update php or apache on that server
[20:27:16] <mpldr_> and no moving from Centos 5 either
[20:27:41] <mpldr_> this must be a pretty deep circle of hell
[20:45:33] *** Quits: newwebdev13 (~newwebdev@78.135.92.217) (Quit: Leaving)
[20:46:42] *** Quits: Jck_true (~jcktrue@user/jck-true/x-0200799) (Quit: The Lounge - https://thelounge.chat)
[20:47:54] *** Joins: Jck_true (~jcktrue@user/jck-true/x-0200799)
[20:48:12] <Blondie101010> Centos 5?
[20:48:25] <Blondie101010> that company has serious issues
[20:51:43] *** Quits: Jck_true (~jcktrue@user/jck-true/x-0200799) (Client Quit)
[20:52:07] *** Joins: Jck_true (~jcktrue@user/jck-true/x-0200799)
[20:53:12] <BrunoFontes> This is like a bomb ticking and you do not know when it is going to explode, you only knows it will explode someday.
[20:55:39] *** Quits: mmk2410 (~mmk2410@user/mmk2410) (Quit: ZNC - https://znc.in)
[20:56:17] *** Joins: _filename (~kilitary@188.242.105.134)
[20:56:30] *** Joins: mmk2410 (~mmk2410@user/mmk2410)
[20:58:36] *** Quits: filename (~kilitary@static.246.201.46.78.clients.your-server.de) (Ping timeout: 240 seconds)
[21:02:38] <AllenJB> A risk assessment and disaster recovery plan for that system must be a fun read
[21:04:24] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[21:08:52] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[21:09:09] *** Joins: ms49434 (~ms49434@user/ms49434)
[21:11:52] *** Quits: _filename (~kilitary@188.242.105.134) (Read error: Connection reset by peer)
[21:13:24] <Blondie101010> it's easy to guess there isn't
[21:23:51] *** Joins: filename (~kilitary@static.246.201.46.78.clients.your-server.de)
[21:26:53] *** Joins: roadie (~user@2a02:8108:5a40:1d87:6df3:c9fa:594c:9ab9)
[21:30:50] *** Joins: opeerateur_ (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs)
[21:33:54] <mpldr_> Blondie get's 100 points… at least there is no recovery plan that deserves that name in my opinion
[21:34:25] <mpldr_> list of servers, and where their backups are. nothing more. not even a list of services per server
[21:34:41] <mpldr_> if something blows up this company is in serious trouble
[21:34:56] *** Quits: opeerateur_ (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs) (Ping timeout: 245 seconds)
[21:35:14] <AllenJB> When was the last time one of those backups was successfully restored?
[21:44:54] *** Joins: Rockwood (~Rocky@user/rocky)
[21:45:33] <Robdgreat> mpldr_: s/if/when/
[21:45:59] <Robdgreat> or: s/^.*up //
[21:46:25] <mpldr_> fair enough
[21:47:25] <Nekomander> > at least I have a mail from him clearly telling me not to update php or apache on that server    <--- YIKES!
[21:49:26] <mpldr_> yup… but I can point fingers. One thing I learned early on: always get bad instructions in written form
[21:51:50] <mpldr_> in a former company I worked in, pretty much every file even remotely related to authentication or permissions had a similar header along the lines: "[boss] was informed about the following security risks: [bullet point list]. Instruction to keep it as is was given YYYY-MM-DD HH:mm
[21:53:11] <Nekomander> Nice logging. :)
[21:55:17] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[21:55:35] <mpldr_> it was the reason I left that company, but since it's software used in hospitals I wanted to cover my ass
[21:55:45] <mpldr_> still doesn't sit right with me
[21:55:51] <mpldr_> but not much I can do about it
[21:56:49] *** Joins: Rockwood (~Rocky@user/rocky)
[21:58:09] *** Quits: Rockwood (~Rocky@user/rocky) (Client Quit)
[22:01:24] *** Quits: sgen (~sgen@2607:fea8:7ce1:c8e0:ec7f:bf70:4897:f9a7) (Ping timeout: 240 seconds)
[22:20:03] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[22:20:22] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[22:24:19] *** Joins: newwebdev13 (~newwebdev@78.135.92.217)
[22:25:08] *** Joins: funhouse (~funhouse@user/funhouse)
[22:30:09] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[22:30:12] *** Quits: filename (~kilitary@static.246.201.46.78.clients.your-server.de) (Ping timeout: 272 seconds)
[22:31:09] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[22:34:25] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Read error: Connection reset by peer)
[22:42:19] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[22:45:00] *** Joins: fef (~thedawn@user/thedawn)
[22:48:12] <velix> Interesting, I didn't know that "finally" is called even after "return" in a function: https://3v4l.org/S1MJ7
[22:48:34] <velix> I thought "return" always exits the function
[22:48:54] *** Quits: roadie (~user@2a02:8108:5a40:1d87:6df3:c9fa:594c:9ab9) (Ping timeout: 252 seconds)
[22:49:51] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142)
[22:49:56] <Naktibalda> I didn't know this, but it makes sense that finally is executed always
[22:51:04] <Hash> https://stackoverflow.com/questions/41616790/how-is-the-keyword-finally-meant-to-be-used-in-php
[22:51:25] <Hash> I didnt' even realize php had finally.
[22:51:28] <Naktibalda> I still consider finally a new feature, it was introduced in 5.5 so I haven't used it much
[22:51:30] <Hash> There'
[22:51:35] <Hash> is a good explain of this on the page
[22:51:47] <Hash> Oh tis that old? 5.5
[22:51:52] <Hash> Wow.
[22:52:26] <TinoDidriksen> I still haven't found a case where I needed/wanted finally.
[22:52:37] <Hash> it's javaesque
[22:53:13] *** Joins: DevAntoi_ (~DevAntoin@2a01:e34:ec18:50c0:6479:a4f:3fd8:4be7)
[22:53:24] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 240 seconds)
[22:53:36] <Naktibalda> in my current job we use finally to release locks a lot
[22:54:05] <Hash> Yeah, database connection closing is a need, with or without exceptions.
[22:54:17] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142) (Ping timeout: 240 seconds)
[22:55:07] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b1b1:e3c2:ffcc:c651) (Ping timeout: 260 seconds)
[22:59:24] <TinoDidriksen> PDO can't close the connection, so meh.
[23:00:05] <Hash> Had to make my own function, PDOFetchAllAssoc in addition to PDOFetchAll
[23:00:38] <Hash> PDO::FETCH_COLUMN|PDO::FETCH_GROUP
[23:01:04] <TinoDidriksen> As for locks, PHP mostly supports RAII, so you don't need finally.
[23:01:19] <Hash> What is RAII?
[23:01:27] <TinoDidriksen> Scope-bound resource management.
[23:01:29] <Hash> I'm noob and haven't used php in years
[23:01:37] <Hash> I see
[23:02:00] <TinoDidriksen> When the last reference to an object goes out of scope, the destructor is fired and you can do the cleanup there.
[23:02:40] <Hash> https://bpa.st/HJEA
[23:02:47] <Hash> What do you think about this code?
[23:02:58] <Naktibalda> it looks like this: $lockId = lock(); try { doWork(); } finally {  releaseLock($lockId); }  our lead developer would consider destructor magic and magic is not allowed
[23:03:32] <Hash> I use  __destruct() often when killing objects and sometimes manually refcouting
[23:03:42] <Hash> Well. I say manual. I mean more like gc_release* etc.
[23:03:42] <TinoDidriksen> Destructors are not magic in C++ or PHP. They are in most other languages, though.
[23:03:50] <Hash> What is magic?
[23:03:58] <TinoDidriksen> Unreliable
[23:04:01] <Hash> I am not familiar with this term in programming
[23:04:03] <Hash> Oh
[23:04:28] <TinoDidriksen> In other languages you can't rely on when an object is destroyed, or the order of destruction. You can rely on that in C++ and PHP.
[23:04:41] <Hash> I like that feature.
[23:04:51] <Hash> I use it a lot sometimes when need is there
[23:05:55] <Hash> Many a time, destroying the object and unsetting some vars when you dont' need them, explicits, or calling gc release cycles or something, helps manage memory in php scripts. I discovered.
[23:06:01] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[23:06:12] <Hash> Sometimes I have had to run with memory contrains on systems, very low.
[23:06:31] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[23:06:36] <Hash> Though there doesn't seem to be a need for it usually, the gc* functions are still useful for some manual memory management
[23:08:20] <Hash> https://www.php.net/manual/en/features.gc.collecting-cycles.php
[23:08:45] <Hash> The rationale behind the ability to turn the mechanism on and off, and to initiate cycle collection yourself, is that some parts of your application could be highly time-sensitive. In those cases, you might not want the garbage collection mechanism to kick in.
[23:09:06] <Hash> That's interesting.
[23:11:18] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142)
[23:11:22] *** Quits: guido (~weechat@host-87-17-251-90.retail.telecomitalia.it) (Ping timeout: 272 seconds)
[23:12:27] *** Joins: luva8 (~luva@185.168.9.235)
[23:12:37] *** Quits: luva (~luva@45.141.152.52) (Ping timeout: 256 seconds)
[23:12:37] *** luva8 is now known as luva
[23:13:03] *** Joins: guido (~weechat@host-87-17-251-90.retail.telecomitalia.it)
[23:15:51] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142) (Ping timeout: 252 seconds)
[23:22:55] *** Quits: justOkay (~justache@user/justache) (Read error: Connection reset by peer)
[23:23:28] *** Joins: justOkay (~justache@user/justache)
[23:29:04] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142)
[23:29:33] *** Quits: operateur (~My_user_n@93-86-81-12.dynamic.isp.telekom.rs) (Quit: WeeChat 3.4.1)
[23:34:00] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142) (Ping timeout: 252 seconds)
[23:35:11] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142)
[23:40:03] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142) (Ping timeout: 252 seconds)
[23:51:01] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142)
[23:56:00] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5df7:60e8:c4d9:142) (Ping timeout: 252 seconds)
[23:58:53] *** Joins: roadie (~user@2a02:8108:5a40:1d87:b850:c068:358c:507a)
