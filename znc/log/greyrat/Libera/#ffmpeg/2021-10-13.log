[00:00:35] <twiclo> How do I get a filtergraph?
[00:05:00] <durandal_1707> if you do not know what is filtegraph, than you probably do not use it
[00:05:08] <durandal_1707> post full command line you use instead
[00:05:14] <durandal_1707> *pastebin it
[00:05:59] <twiclo> ffmpeg -i Lost.S02E13.mkv -map 0:v -map 0:a:m:language:eng -map 0:s:m:language:eng -c copy output.mkv
[00:07:14] <durandal_1707> well, i guess you will need to use setts bitstream filter
[00:08:19] <twiclo> What does that do?
[00:10:12] <durandal_1707> just changes PTS & DTS in video
[00:10:58] <twiclo> DTS is a sound thing isn't it? What does that have to do with timestamps?
[00:11:16] <durandal_1707> DTS is not display time stamp
[00:11:28] <durandal_1707> s/not//
[00:11:37] <durandal_1707> PTS is presentation timestamp
[00:11:54] <durandal_1707> DTS is actually demuxer timestamp or something like that
[00:12:06] <kepstin> i always though DTS was decode time stamp
[00:12:06] <durandal_1707> decoded i guess
[00:12:20] <durandal_1707> yes, brain farts, sorry
[00:12:45] <twiclo> So what are we changing about these things?
[00:12:53] <durandal_1707> only PTS and DTS
[00:12:59] <durandal_1707> audio and video remain same
[00:14:07] <twiclo> Right so what are we changing with PTS and DTS?
[00:14:16] <furq> oh nice
[00:14:18] <furq> how new is that
[00:15:54] *** Quits: lexano (~lexano@cpe00e06722f0e4-cm98524a70e35e.cpe.net.cable.rogers.com) (Remote host closed the connection)
[00:16:23] <durandal_1707> twiclo: changing numbers so they are monotonous, and you get no messages as above
[00:16:50] <twiclo> Okay great. So what do I need to add to my command?
[00:16:59] <durandal_1707> furq: in 4.4
[00:17:44] <durandal_1707> twiclo: setts bitstream filter with custom parameters to match your inputs
[00:30:17] <twiclo> Couldn't I just filter out stderr or something?
[00:30:31] <twiclo> Not really interested in spending the time to learn about bitstream filters and all that
[00:30:32] *** Quits: Arsen (~arsen@managarm/dev/Arsen) (Quit: Quit.)
[00:30:53] *** Joins: Arsen (~arsen@managarm/dev/Arsen)
[00:30:57] <hyrcanus> sounds like you need to hire a consultant
[00:31:12] <durandal_1707> twiclo: if i'm not mistaken it stops processing on such error
[00:31:46] <twiclo> No it's just spitting it out hundreds of times per file. The transcode or whatever it's called still works
[00:32:05] <durandal_1707> than just use -v fatal
[00:32:42] <durandal_1707> or use &> output to direct logs to file
[00:32:45] <twiclo> Oh perfect. Thanks
[00:33:06] <durandal_1707> depending on which shell you use
[00:33:12] <twiclo> Bash
[00:33:23] <durandal_1707> consult bash documentation
[00:46:52] *** Quits: a0z (~a0z@87.74.81.189) (Ping timeout: 265 seconds)
[00:49:20] <Vall> back
[00:49:45] <Vall> Does hvec_nvenc supports 2-pass encoding?
[00:50:16] <BtbN> no
[00:50:18] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 260 seconds)
[00:50:42] <Vall> Ok, so it's like hvec_vaapi in this regard
[00:50:53] <BtbN> at least not in the sense of doing actual two passes to achieve an exact file size
[00:51:11] <BtbN> nvidia came up with some other mode nobody really understands and called it twopass mode
[00:51:20] <Vall> ah
[00:51:29] <Vall> Is it supported by ffmpeg?
[00:52:15] <BtbN> sure, it's just a flag you set
[00:52:20] <BtbN> the slow preset includes it
[00:52:34] <Vall> nice, so I'm running it already
[00:52:55] <Vall> Man, 'slow' preset is doing like ~8x here in my machine
[00:53:26] <Vall> I don't even want to know how much 'fast preset' would be
[00:55:04] *** Joins: lexano (~lexano@cpe00e06722f0e4-cm98524a70e35e.cpe.net.cable.rogers.com)
[00:55:55] *** Quits: Zouppen_ (~joell@jkl.hacklab.fi) (Quit: Das Boot)
[00:58:18] <hyrcanus> i do two passes manually every time, by running ffmpeg on the output file, again... to get better compression
[00:59:42] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[01:00:09] <Vall> hyrcanus: doesnt that f*ck up the quality?
[01:01:57] <hyrcanus> mhm, rehash of an old compression joke
[01:02:28] <hyrcanus> a lot of people imagine 'two pass = better' without understanding
[01:02:33] <Vall> ah, so you are kidding ;-)
[01:02:36] <Vall> heh
[01:03:43] <Vall> Back in the day (late 80s), before ZIP, there was a compression program called ARC which actually benefitted from being run twice.
[01:03:49] <Vall> But it was a piece of crap
[01:04:13] <hyrcanus> x264 and x265 benefit from two-pass when you are trying to 1) hit a specific filesize (e.g fill a CD-ROM fully) or 2) generate optimal stream for a bandwidth target
[01:04:35] <Vall> hyrcanus: my case is #2 (generate optimal stream for a bandwidth target)
[01:04:36] <BtbN> they also don't re-encode twice in two pass mode
[01:04:47] <BtbN> they literally just do the same encode twice, recording knowledge during the first pass
[01:04:57] <hyrcanus> ^
[01:05:23] <Vall> BtbN: yep, pass 1 prepare a log file and pass 2 uses it to 'distribute' bandwidth optimally
[01:05:54] <Vall> But if hvec_nvenc doesn't support it, I don't want it ;-)
[01:06:08] <Vall> I'm now a nvenc convert, thanks to BtbN ;-)
[01:06:18] <AMM> When I was new into pretty much everything I did at first think 2pass was better, because words about it said it was as the encoder then had hints of the complicated parts etc
[01:06:32] <BtbN> You can kinda emulate it, by just trial-and-erroring a cq value
[01:06:34] <AMM> omitting the part about basic lookahead
[01:06:42] <BtbN> that's rather similar than what x264/5 are doing even
[01:07:07] *** Quits: odrling (~odrling@korone.aidoru.agency) (Quit: see you space cowboy)
[01:07:20] <Vall> yeah, but real 2-pass should reach a more optimal bandwidth distribution than lookahead
[01:07:34] <Vall> (or at least I think so, from the depth of my ignorance)
[01:07:50] <AMM> Yes, if you have to consider a strict bandwidth limit
[01:08:08] *** Joins: odrling (~odrling@korone.aidoru.agency)
[01:08:21] <BtbN> not so much bandwidth limit
[01:08:25] <BtbN> but file size limit
[01:08:30] <BtbN> the momentary bandwidth can be quite high
[01:08:57] <Vall> BtbN: isn't file size and bandwidth strictly correlated for the same file?
[01:09:11] <Vall> I mean, double the bandwidth, double the file size etc?
[01:09:12] <BtbN> only if you only consider the whole file
[01:09:35] <Vall> Which is what 'real' 2-pass does, no?
[01:09:43] <BtbN> The file can be 50kbps for 90% of playtime, but still end up at 8mbps average total bitrate with a sufficiently huge spike
[01:10:06] <BtbN> and that's all two-pass does, ensure average bitrate for that specific file
[01:10:32] <BtbN> so if it decides that 5 seconds of an hour long video needs most of the bitrate, that's where it'll go
[01:10:46] <BtbN> granted, that's a stupidly extreme example, just to illustrate the behaviour
[01:10:56] <Vall> yep, I dig it
[01:11:15] <Vall> Man, hvec_nvenc 'slow'
[01:11:33] <BtbN> I think for 1080p at fastest settings it does 2000 fps or something
[01:11:41] <BtbN> If you can deliver it frames fast enough
[01:11:56] <Vall> er, hvec_nvenc 'slow' preset is so fast it's saturating my output device (a 4-disk raidz2 ZFS composed -- unfortunatelly - of SMR disks)
[01:12:25] <Vall> I think I will buy better disks just to make hvec_nvenc happier ;-)
[01:12:55] <BtbN> -f null - to see how fast it goes
[01:14:20] <Vall> here, '-f null' aborts with something like being unable to determine the output format without an extension
[01:14:46] <BtbN> huh. null is the output format in that case
[01:14:48] <Vall> and 'null.mp4' actually generates a file called 'null.mp4' in the current dir ;-)
[01:14:49] <BtbN> the - is important
[01:15:02] <Vall> ah, the - *after* the null
[01:15:08] <Vall> I really overlooked that
[01:15:15] <BtbN> the - is the output
[01:15:20] <Vall> OK
[01:15:31] <Vall> Will try that here
[01:15:55] <Vall> As soon as the current batch of transcoding finishes (which should not take long)
[01:16:25] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[01:20:23] <gonewest818[m]> is there a way to get ffprobe (or some other tool like it) to print the details of the edit list atoms in a quicktime mov?
[01:31:14] <Vall> Does `-threads 2` actually mean 2 CPU threads running in parallel? Or something else?
[01:37:55] <BtbN> yes
[01:38:31] <BtbN> By default it will use all threads it can get. Which for one makes no sense for hwaccel, and actually causes issue cause it buffers one frame per "thread", resulting in the decoder running out of framebuffers
[01:38:52] <Vall> ah, it makes sense now.
[01:39:37] <Vall> Anyway, I see ffmpeg using less than 18% (of a single CPU here) so it's probably being limited by my SMR disks etc
[01:46:40] <BtbN> With hwenc, the most likely limit is either the hwencoder itself, or your ability to get data to and from it fast enough
[01:46:47] <BtbN> pretty much never the CPU
[01:49:51] *** Parts: twiclo (~twiclo@2604:7b80:2000:1069:52fc:cedd:fbeb:10c) (WeeChat 3.2)
[01:52:36] <Vall> kk
[01:56:42] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Quit: Leaving)
[01:58:58] *** Joins: auth (~auth@user/auth)
[02:14:03] *** Quits: durandal_1707 (~computer@212.15.178.140) (Read error: Connection reset by peer)
[02:27:05] *** Quits: Atsuko (~x@45.63.115.64) (Remote host closed the connection)
[02:28:01] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 245 seconds)
[02:38:48] *** Joins: Atsuko (~x@45.63.115.64)
[02:39:21] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[02:46:40] *** Quits: alphalpha (~michael@dslb-178-009-200-117.178.009.pools.vodafone-ip.de) (Remote host closed the connection)
[02:53:52] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[02:57:50] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 260 seconds)
[02:59:49] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:00:26] *** Joins: waleee (~waleee@h-98-128-228-119.NA.cust.bahnhof.se)
[03:10:53] *** Joins: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net)
[03:12:50] *** Quits: waleee (~waleee@h-98-128-228-119.NA.cust.bahnhof.se) (Ping timeout: 265 seconds)
[03:25:03] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[03:56:06] *** Joins: MrZeus__ (~MrZeus@81.92.205.25)
[03:57:32] *** Quits: unmanbearpig (~unmanbear@user/unmanbearpig) (Remote host closed the connection)
[03:57:55] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[03:59:44] *** Quits: MrZeus_ (~MrZeus@2a02:c7f:a0aa:4400:290b:e0a5:a3d4:4cc9) (Ping timeout: 246 seconds)
[04:03:06] *** Quits: MrZeus__ (~MrZeus@81.92.205.25) (Ping timeout: 265 seconds)
[04:03:30] *** Quits: LuKaRo (~LuKaRo@p4fc3226e.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[04:08:49] *** Joins: LuKaRo (~LuKaRo@p57b15e22.dip0.t-ipconnect.de)
[04:27:42] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[04:29:31] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[04:30:23] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[04:34:48] *** Joins: vlm (~vlm@user/vlm)
[04:36:43] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:98c3:6174:8ff5:a406)
[04:39:21] *** Quits: demon__ (~user@45.130.83.111) (Ping timeout: 265 seconds)
[04:48:28] *** Quits: Jerrk (~Jerrk@45.83.220.203) (Remote host closed the connection)
[04:49:01] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 252 seconds)
[04:49:36] *** Joins: someuser (~user@196.149.149.129)
[04:53:44] *** Quits: someuser (~user@196.149.149.129) (Read error: Connection reset by peer)
[04:53:52] *** Joins: someuser (~user@196.149.149.129)
[04:54:28] *** Quits: realies (~realies@user/realies) (Ping timeout: 252 seconds)
[05:02:17] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[05:02:20] *** Joins: anotheruser (~user@197.54.29.21)
[05:04:55] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[05:05:34] *** Quits: someuser (~user@196.149.149.129) (Ping timeout: 260 seconds)
[05:08:51] *** Quits: lexano (~lexano@cpe00e06722f0e4-cm98524a70e35e.cpe.net.cable.rogers.com) (Remote host closed the connection)
[05:18:30] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[05:30:50] *** Quits: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net) (Quit: Client closed)
[05:32:47] *** Joins: beaver (~beaver@user/pong)
[05:38:07] *** Parts: listenurs (~igloo@c-98-240-233-64.hsd1.mn.comcast.net) (Igloo IRC: https://iglooirc.com)
[05:40:47] *** Joins: vqueiroz (uid340368@id-340368.hampstead.irccloud.com)
[05:42:33] *** Joins: lexano (~lexano@cpe00e06722f0e4-cm98524a70e35e.cpe.net.cable.rogers.com)
[05:44:18] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[06:03:13] *** Quits: ^-^hi (~nikw@user/-hi/x-1729478) (Remote host closed the connection)
[06:17:57] *** Quits: jos1 (~jos3@dyndsl-091-096-039-243.ewe-ip-backbone.de) (Ping timeout: 265 seconds)
[06:30:51] *** Joins: jos1 (~jos3@dyndsl-091-248-049-058.ewe-ip-backbone.de)
[07:30:48] *** softworkz is now known as Guest4589
[07:30:48] *** Joins: softworkz_ (~softworkz@user/softworkz)
[07:30:49] *** Quits: Guest4589 (~softworkz@user/softworkz) (Killed (copper.libera.chat (Nickname regained by services)))
[07:30:49] *** softworkz_ is now known as softworkz
[07:32:42] *** Bertl_oO is now known as Bertl_zZ
[07:34:55] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 260 seconds)
[07:49:55] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[07:54:02] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 260 seconds)
[08:00:49] *** Joins: Jerrk (~Jerrk@185.65.135.235)
[08:03:38] *** Quits: intrac (~intracube@user/intracube) (Read error: Connection reset by peer)
[08:19:27] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[08:33:03] *** Joins: af (~af@awalgarg.me)
[08:45:51] *** Joins: Maple (uid10029@user/maple)
[08:47:14] *** Joins: Maple_ (~Maple@user/maple)
[08:53:18] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[08:55:59] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[09:01:21] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 245 seconds)
[09:01:34] *** Quits: Maple_ (~Maple@user/maple) (Quit: WeeChat 3.3)
[09:36:04] *** Quits: af (~af@awalgarg.me) (Ping timeout: 252 seconds)
[09:37:11] *** Joins: af (~af@awalgarg.me)
[10:03:01] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 245 seconds)
[10:15:30] *** Joins: ninawa (~ninawa@94.105.98.9.dyn.edpnet.net)
[10:16:38] <ninawa> im trying to compile ffmpeg om ubuntu 18.04
[10:16:41] <ninawa> i get the following: ERROR: dav1d >= 0.5.0 not found using pkg-config
[10:17:07] <another|> do you have dav1d installed?
[10:18:07] <ninawa> i used: sudo snap install dav1d
[10:18:09] <ninawa> it didnt help
[10:18:34] <another|> I fairly sure the snap package does not contain the headers
[10:19:20] <ninawa> any reccomendations to fix this error ?
[10:19:36] <another|> either build dav1d yourself or not include it
[10:21:49] <ninawa> when i try to build dav1d i also get error
[10:22:02] <ninawa> The Meson build system
[10:22:02] <ninawa> Version: 0.45.1
[10:22:02] <ninawa> Source dir: /home/ubuntu/dav1d
[10:22:02] <ninawa> Build dir: /home/ubuntu/dav1d/build
[10:22:02] <ninawa> Build type: native build
[10:22:03] <ninawa> meson_options.txt:57:0: ERROR: Unknown type feature.
[10:22:05] <ninawa> A full log can be found at /home/ubuntu/dav1d/build/meson-logs/meson-log.txt
[10:22:31] <hyrcanus> i found ubuntu was not a good OS to compile new things with
[10:22:36] <hyrcanus> i think you will discover this too
[10:23:02] <another|> especially one that old. the minimum meson version required by dav1d in 0.49.0
[10:23:57] <another|> nasm >= 2.13.02
[10:24:05] <another|> they seem to have that one at least
[10:24:17] <another|> though it won't support avx512
[10:24:36] <ninawa> its better i upgrade ubntu then?
[10:27:40] <hyrcanus> i can't advise on that
[10:29:16] *** Joins: palasso (~palasso@user/palasso)
[10:29:25] <hyrcanus> maybe you can keep your current ubuntu 18.04 as your main environment, and put a more current linux in a chroot or vm or something?
[10:29:32] <hyrcanus> just for compiling newer type things
[10:32:49] <hyrcanus> there once was this UML (user mode linux) i used for this kind of thing
[10:37:19] *** Joins: keypusher (keypusher@user/keypusher)
[10:40:28] *** Quits: vqueiroz (uid340368@id-340368.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[10:42:44] *** Joins: durandal_1707 (~computer@212.15.178.140)
[10:44:22] *** Quits: af (~af@awalgarg.me) (Ping timeout: 260 seconds)
[10:45:01] *** Joins: af (~af@awalgarg.me)
[10:45:56] *** Quits: OsteHovel (~OsteHovel@ti0056a400-6574.bb.online.no) (Read error: Connection reset by peer)
[10:46:01] *** Joins: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr)
[10:46:50] *** Quits: ninawa (~ninawa@94.105.98.9.dyn.edpnet.net) (Ping timeout: 260 seconds)
[10:53:38] *** Quits: greyrat (~greyrat@ip202.ip-51-178-215.eu) (Bye)
[11:53:51] *** Joins: greyrat (~greyrat@ip202.ip-51-178-215.eu)
[11:55:05] *** Server sets mode: +Ccnt 
[11:55:24] *** Joins: [R]x (~Positive@user/rx/x-1245542)
[11:56:27] *** Joins: deetwelve (~deetwelve@user/deetwelve)
[11:57:00] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (*.net *.split)
[11:57:00] *** Quits: meinside (uid24933@id-24933.helmsley.irccloud.com) (*.net *.split)
[11:57:00] *** Quits: volgar1x (~volgar1xm@2001:470:69fc:105::e61d) (*.net *.split)
[11:57:00] *** Quits: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6) (*.net *.split)
[11:57:00] *** Quits: averne (~averne@2001:861:5102:3290:9952:d870:185e:c44c) (*.net *.split)
[11:57:00] *** Quits: sebbu (~sebbu@user/sebbu) (*.net *.split)
[12:01:48] *** Joins: moviuro (~moviuro@znc.popho.be)
[12:03:18] *** Joins: KDDLB (kevin@user/kddlb)
[12:03:41] *** Joins: Brocker (~NoBody@2002:95ca:ed03::95ca:ed03)
[12:03:41] *** Joins: termos (sid18647@2a03:5180:f:1::48d7)
[12:03:41] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[12:03:41] *** Joins: meinside (uid24933@id-24933.helmsley.irccloud.com)
[12:03:41] *** Joins: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6)
[12:03:41] *** Joins: volgar1x (~volgar1xm@2001:470:69fc:105::e61d)
[12:03:41] *** Joins: averne (~averne@2001:861:5102:3290:9952:d870:185e:c44c)
[12:03:41] *** Joins: sebbu (~sebbu@user/sebbu)
[12:03:45] *** tinytoas1 is now known as tinytoast
[12:04:49] *** tinytoast is now known as tinytoes
[12:07:07] *** Quits: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904) (Ping timeout: 240 seconds)
[12:08:34] *** Quits: af (~af@awalgarg.me) (Ping timeout: 252 seconds)
[12:09:56] *** Joins: garfvl_ (~root@ns530260.ip-149-56-24.net)
[12:10:06] *** Joins: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904)
[12:13:01] *** Joins: bencoh (~bencoh@user/bencoh)
[12:16:09] *** Quits: bertieb_ (~bertieb@217.155.39.147) (Ping timeout: 250 seconds)
[12:17:02] *** Joins: Henry151 (~bishop@user/henry151)
[12:20:32] *** Joins: samhza (sam@2600:3c03::f03c:92ff:fe40:814c)
[12:20:34] *** Joins: Mavrik (~Mavrik@virag.si)
[12:20:37] *** Joins: drv (quasselcor@oak.drv.nu)
[12:20:39] *** Joins: illya (~user@irc.0x1.st)
[12:20:41] *** Joins: itok_ (sid418430@id-418430.ilkley.irccloud.com)
[12:20:44] *** Quits: illya (~user@irc.0x1.st) (Changing host)
[12:20:44] *** Joins: illya (~user@ffmpeg/developer/illya)
[12:20:45] *** Joins: HumanG33k (~HumanG33k@2a01:e0a:95:5d90:215:c5ff:fe68:fb04)
[12:20:58] *** Joins: user282069 (user@2a01:7e00::f03c:92ff:fe7f:456d)
[12:21:21] *** Joins: vulpine (xfnw@tilde.team)
[12:21:21] *** Joins: rossome (~rossome@server.likeaross.com)
[12:21:52] *** Joins: therobin (~UserNick@2607:f2c0:9510:9e00:f914:7777:3f6:7770)
[12:23:24] *** Joins: znf (~ibm86@toaster.linge-ma.ro)
[12:25:31] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Ping timeout: 245 seconds)
[12:29:58] *** garfvl_ is now known as garfvl
[12:35:40] *** Joins: troyt (~troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[12:49:00] *** Joins: cosimone (~user@93-44-185-179.ip98.fastwebnet.it)
[12:49:02] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[13:05:32] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[13:05:45] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[13:11:26] *** Quits: elenril (~elenril@tutturu.red.khirnov.net) (Ping timeout: 268 seconds)
[13:15:31] *** Quits: odrling (~odrling@korone.aidoru.agency) (Ping timeout: 252 seconds)
[13:17:07] *** Joins: dbal (~dbal@2603:300c:b04:b100:8846:1de1:bb3f:96ef)
[13:18:07] *** Quits: Vall (~durval@plexus.tmp.com.br) (Ping timeout: 250 seconds)
[13:18:07] *** Joins: odrling (~odrling@korone.aidoru.agency)
[13:18:55] *** Joins: Vall (~durval@plexus.tmp.com.br)
[13:22:47] *** Joins: bertieb (~bertieb@217.155.39.147)
[13:23:58] *** Joins: elenril (~elenril@tutturu.red.khirnov.net)
[13:28:51] *** Joins: a0z (~a0z@87.74.80.38)
[13:29:16] *** Quits: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22) (Quit: Bridge terminating on SIGTERM)
[13:29:16] *** Quits: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6) (Quit: Bridge terminating on SIGTERM)
[13:29:16] *** Quits: Celmor[m] (~celmormat@2001:470:69fc:105::434) (Quit: Bridge terminating on SIGTERM)
[13:29:16] *** Quits: kepstin (~kepstin@user/kepstin) (Quit: Bridge terminating on SIGTERM)
[13:29:16] *** Quits: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2) (Quit: Bridge terminating on SIGTERM)
[13:29:16] *** Quits: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: Helmholtz (~leibnizma@2001:470:69fc:105::3124) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: volgar1x (~volgar1xm@2001:470:69fc:105::e61d) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: YakoYoku (~yakoyoku@2001:470:69fc:105::780) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: speakertomeat[m] (~speakerto@user/speakertomeat) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: kerel (~kerel@2001:470:69fc:105::2e1b) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: memst[m] (~memst@2001:470:69fc:105::716) (Quit: Bridge terminating on SIGTERM)
[13:29:17] *** Quits: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b) (Quit: Bridge terminating on SIGTERM)
[13:29:18] *** Quits: gnurou (~gnurou@2001:470:69fc:105::c23b) (Quit: Bridge terminating on SIGTERM)
[13:29:22] *** Quits: skybl[m] (~skyblmatr@2001:470:69fc:105::1:173b) (Quit: Bridge terminating on SIGTERM)
[13:29:22] *** Quits: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc) (Quit: Bridge terminating on SIGTERM)
[13:29:22] *** Quits: sixecho (~sixecho@2001:470:69fc:105::32) (Quit: Bridge terminating on SIGTERM)
[13:29:23] *** Quits: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904) (Quit: Bridge terminating on SIGTERM)
[13:31:42] *** Joins: JEEB (~jeeb@kuroko.fushizen.eu)
[13:32:24] *** Joins: kepstin (~kepstin@user/kepstin)
[13:32:55] *** Joins: af (~af@awalgarg.me)
[13:35:19] *** Quits: Buliarou1 (~gypsydang@185.207.166.57) (Ping timeout: 252 seconds)
[13:36:49] *** Joins: Buliarous (~gypsydang@185.207.166.57)
[13:37:00] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[13:37:00] *** Joins: sixecho (~sixecho@2001:470:69fc:105::32)
[13:37:00] *** Joins: memst[m] (~memst@2001:470:69fc:105::716)
[13:37:00] *** Joins: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22)
[13:37:00] *** Joins: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2)
[13:37:00] *** Joins: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260)
[13:37:00] *** Joins: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc)
[13:37:00] *** Joins: Helmholtz (~leibnizma@2001:470:69fc:105::3124)
[13:37:00] *** Joins: volgar1x (~volgar1xm@2001:470:69fc:105::e61d)
[13:37:00] *** Joins: speakertomeat[m] (~speakerto@user/speakertomeat)
[13:37:00] *** Joins: YakoYoku (~yakoyoku@2001:470:69fc:105::780)
[13:37:00] *** Joins: Celmor[m] (~celmormat@2001:470:69fc:105::434)
[13:37:00] *** Joins: jemershaw[m] (~jemershaw@2001:470:69fc:105::b904)
[13:37:00] *** Joins: yuu[m] (~yuumatrix@2001:470:69fc:105::8a6)
[13:37:00] *** Joins: kerel (~kerel@2001:470:69fc:105::2e1b)
[13:37:12] *** Joins: gonewest818[m] (~gonewest8@2001:470:69fc:105::f38b)
[13:37:12] *** Joins: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce)
[13:37:12] *** Joins: skybl[m] (~skyblmatr@2001:470:69fc:105::1:173b)
[13:37:14] *** Joins: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b)
[13:37:14] *** Joins: gnurou (~gnurou@2001:470:69fc:105::c23b)
[13:37:45] *** Quits: auth (~auth@user/auth) (Quit: Leaving)
[13:38:00] *** Joins: auth (~auth@user/auth)
[13:45:13] *** Quits: darkapex_ (~darkapex@user/darkapex) (Ping timeout: 252 seconds)
[13:46:43] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Ping timeout: 250 seconds)
[13:46:48] *** Joins: darkapex (~darkapex@user/darkapex)
[13:47:53] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[13:49:12] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Client Quit)
[13:49:57] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 276 seconds)
[13:49:58] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[13:50:27] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Client Quit)
[13:51:59] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[13:52:22] *** Quits: af (~af@awalgarg.me) (Ping timeout: 252 seconds)
[13:52:22] *** Quits: hyrcanus (~hyrcanus@p2e5ae5e8.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[13:52:35] *** Joins: hyrcanus (~hyrcanus@p2e5ae5e8.dip0.t-ipconnect.de)
[14:00:43] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Remote host closed the connection)
[14:01:03] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[14:04:14] *** Bertl_zZ is now known as Bertl
[14:08:13] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[14:08:22] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[14:08:56] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Client Quit)
[14:09:12] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[14:10:06] *** Quits: ops (~ops@user/echelon) (Ping timeout: 245 seconds)
[14:13:49] *** Quits: Bertl (herbert@irc.13thfloor.at) (Ping timeout: 252 seconds)
[14:14:33] *** Joins: Bertl (herbert@irc.13thfloor.at)
[14:15:45] *** Quits: gabby (~aphysical@user/aphysically) (Ping timeout: 250 seconds)
[14:15:52] *** Joins: af (~af@awalgarg.me)
[14:16:27] *** Joins: ops (~ops@user/echelon)
[14:17:47] *** Joins: gabby (~aphysical@user/aphysically)
[14:21:45] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[14:23:16] *** Joins: af (~af@awalgarg.me)
[14:24:39] *** Joins: dbal_ (~dbal@c-98-198-217-184.hsd1.tx.comcast.net)
[14:24:45] *** Quits: dbal (~dbal@2603:300c:b04:b100:8846:1de1:bb3f:96ef) (Read error: No route to host)
[14:28:10] *** Quits: af (~af@awalgarg.me) (Ping timeout: 252 seconds)
[14:28:32] *** Joins: SimAV (~SimAV@btp9x4.phy.uni-bayreuth.de)
[14:28:56] *** Joins: intrac (~intracube@user/intracube)
[14:30:58] *** Joins: af (~af@awalgarg.me)
[14:31:09] <SimAV> Had by chance anyone in here a closer look at decklink_input_callback::VideoInputFrameArrived in libavdevice/decklink_dec.cpp?
[14:33:17] <SimAV> I'm capturing with a DeckLink Duo 2 in half-duplex mode an SDI Signal (1080i50) from an Atomos Shogun 7 in its switcher mode and experiencing audio/video sync issues after some time.
[14:34:16] <SimAV> In the "Desktop Video Developer Support FAQs" on https://www.blackmagicdesign.com/developer/product/capture-and-playback there is an entry titled "Audio / Video stream time offset when capturing with DeckLink Duo 2 / Quad 2 in Half Duplex" which obviously seems very related
[14:34:52] <SimAV> there, BMD recommends "applications should restart the streams at the no signal -> signal transition point, which will ensure synchronisation between the stream times"
[14:35:19] <SimAV> As far as I can see, ffmpeg doesn't follow these recommendations yet?
[14:37:02] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Read error: Connection reset by peer)
[14:37:22] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[14:41:34] *** Quits: Lazenca (Lazenca@user/lazenca) (Remote host closed the connection)
[14:41:39] <hyrcanus> maybe you've found something to improve, that the developer should know about
[14:42:04] <hyrcanus> the chances that he is reading this right now are quite slim
[14:45:10] *** Quits: af (~af@awalgarg.me) (Ping timeout: 252 seconds)
[14:45:23] <SimAV> I tinkered a little bit with the code and tried to simply put a variant of BMD's example code at the corresponding place.
[14:45:34] <SimAV> To me it seems as if it indeed improves the situation
[14:46:07] *** Joins: af (~af@awalgarg.me)
[14:46:35] <SimAV> however, I do not have a signal generator which can reliably create flaky SDI signals
[14:47:35] <SimAV> I can only wobble a barely inserted cable.
[14:48:33] <SimAV> But this suffices to make audio and video PTS drift during the "lost connection" state
[14:49:20] <hyrcanus> perhaps you could email the maintainer of that code and cc: the manufacturer of the device
[14:49:23] <SimAV> (or at the point where signal is lost or returning, with just wobbling a cable I can't diagnose this more fine grained)
[14:56:17] *** Joins: kib (~kib@user/kib)
[14:59:54] *** Quits: kib (~kib@user/kib) (Client Quit)
[15:01:33] <bencoh> this is how the workaround was implemented in upipe, if it helps: https://github.com/Upipe/upipe/commit/d18e14fdcd7b07551cf8cd1af1b6ec7520e30880
[15:02:03] <bencoh> (ffmpeg should probably do something similar)
[15:02:27] *** Joins: minimal (~minimal@user/minimal)
[15:04:05] <SimAV> bencoh, thanks for bringing this to my attention!
[15:09:19] *** Joins: demon__ (~user@45.130.83.82)
[15:12:30] *** Quits: anotheruser (~user@197.54.29.21) (Ping timeout: 265 seconds)
[15:12:40] *** Joins: kib (~kib@user/kib)
[15:17:04] *** Quits: af (~af@awalgarg.me) (Ping timeout: 252 seconds)
[15:17:37] <SimAV> However, I'm not 100% sure whether one shouldn't really drop the frame on which a returned input is reported too (as the av_log line suggests, but as far as I can see isn't really done)
[15:18:32] <SimAV> in my tests it has a high probability of having less audio samples than expected
[15:18:47] *** Joins: af (~af@awalgarg.me)
[15:20:13] <SimAV> the "somewhat less than 1920 samples per 1/25s" sign was what actually caught my attention when trying to figure out how audio and video can drift
[15:20:16] *** Joins: jkwnki (~jkwnki@p2e57959a.dip0.t-ipconnect.de)
[15:20:16] *** Joins: jkwnki1 (~jkwnki@p2e57959a.dip0.t-ipconnect.de)
[15:29:54] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[15:30:16] *** Quits: Bertl (herbert@irc.13thfloor.at) (Ping timeout: 252 seconds)
[15:30:32] *** Joins: af (~af@awalgarg.me)
[15:30:55] *** Joins: Bertl (herbert@irc.13thfloor.at)
[15:31:18] *** Joins: anotheruser (~user@45.130.83.82)
[15:31:25] *** Quits: eqw (~eqw@31.134.178.99) (Ping timeout: 252 seconds)
[15:33:19] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 250 seconds)
[15:33:33] <SimAV> as far as I understand SDI, audio and video running out of sync should never be possible as audio packets are always aligned with video frames (they are stored next to each video line in the horizontal blanking interval)...
[15:35:16] *** Quits: demon__ (~user@45.130.83.82) (Ping timeout: 252 seconds)
[15:35:44] *** Quits: af (~af@awalgarg.me) (Ping timeout: 268 seconds)
[15:37:02] *** Joins: nillyhan (~00000000@user/nillyhan)
[15:37:06] <BtbN> blanking interval on a digital link?
[15:38:09] *** Joins: eqw (~eqw@31.134.178.99)
[15:38:31] *** Quits: Bertl (herbert@irc.13thfloor.at) (Ping timeout: 252 seconds)
[15:39:09] *** Joins: Bertl (~herbert@irc.13thfloor.at)
[15:39:30] <bencoh> well, we're talking about SDI, right? ...
[15:39:33] <SimAV> BtbN, yes, when SDI was defined, a simple A/D conversion strategy was chosen (simply sample the analog signal with constant rate) which brought the horizontal and vertical blanking interval in the digital era.
[15:39:37] *** Joins: af (~af@awalgarg.me)
[15:39:59] <bencoh> you even need to parse "ancillary data" there ...
[15:40:11] <BtbN> And they stuck with it for 4K and everything?
[15:40:15] <SimAV> in the horizontal blanking interval audio is stored. in the vertical blanking interval stuff like closed captions are transferred
[15:40:28] <SimAV> BtbN, I guess you want your 7.1 audio? ;)
[15:40:44] <bencoh> iirc 4k works the same yeah
[15:43:23] *** Joins: taupiqueur_ (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[15:43:55] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 265 seconds)
[15:45:22] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[15:45:42] *** Joins: af (~af@awalgarg.me)
[15:46:26] <SimAV> bencoh, does SDI transfer separate timestamps for audio and video?
[15:48:10] *** Quits: Atsuko_ (~x@45.63.115.64) (Remote host closed the connection)
[15:49:55] *** Quits: jkwnki (~jkwnki@p2e57959a.dip0.t-ipconnect.de) (Ping timeout: 268 seconds)
[15:49:55] *** Quits: jkwnki1 (~jkwnki@p2e57959a.dip0.t-ipconnect.de) (Ping timeout: 268 seconds)
[15:51:10] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[15:51:20] <BtbN> Does it transmit timestamps at all? I'd assume so, given you can synchronize various separate sources?
[15:54:49] <bencoh> tbh I haven't played with SDI for ~6 years, but the decklink API allows retrieving a frame timestamp/duration
[15:55:46] <bencoh> I don't remember how that is transmitted (if at all), or whether it's separate for a/v
[15:55:48] <SimAV> bencoh, but if that timestamp was embedded in the frame, it should neither restart at zero if one follows BMD's recommendation nor drift just because signal was lost
[15:56:18] <SimAV> so from that perspective i doubt that the decklink card evaluates metadata for returning the timestamps at all
[15:57:04] <bencoh> but considering how it was designed, I wouldn't be surprised if there were no timestamp for video (assuming a fixed framerate)
[15:57:05] <SimAV> (whether metadata is in principle present, is another question. But I wouldn't make conclusions from what the decklink API offers)
[15:57:31] <SimAV> yes, that's what I assume too
[15:57:43] <bencoh> and having ancillary-based timestamp for audio wouldn't surprise me either
[15:57:47] <bencoh> but I honestly don't know
[16:06:55] <SimAV> hmm, OK...
[16:08:31] <SimAV> anyway, if as in my case the SDI source continuously transmits, and only the cable is disconnected/reconnected, it is definitely wrong to have different audio and video PTS if they were identical before
[16:08:51] <SimAV> *after connection is reestablished
[16:10:23] <SimAV> Hmm, I need a 1.5G SDI capable BNC-T-adapter... Would be interesting whether one and the same signal applied to two inputs will end up with different PTS on both inputs if one of them is disconnected for some time...
[16:14:29] *** Quits: xlei (akans@pool-68-129-84-118.nycmny.fios.verizon.net) (Ping timeout: 245 seconds)
[16:15:14] <SimAV> bencoh, https://www.appliedelectronics.com/documents/Guide%20to%20Standard%20HD%20Digital%20Video%20Measurements.pdf page 47
[16:15:51] <SimAV> The Audio Control Packet (shown in Figure56) is transmitted once per field in the second horizontal ancillary data space afterthe vertical interval switch point. It containsinformation on audio frame number, samplingfrequency, active channels, and relative audio-to-video delay of each channel.Transmission of audio control packets isoptional for 48 kHz synchronous operation and required for allother modes of operation (since it contains the
[16:15:51] <SimAV> information as towhat mode is being used).
[16:20:23] <bencoh> nice :)
[16:21:46] *** Quits: kib (~kib@user/kib) (Quit: WeeChat 3.3)
[16:22:46] *** Joins: kib (~kib@user/kib)
[16:23:20] <SimAV> bencoh, they want you to order their oscilloscopes with fancy information screens ;)
[16:28:09] *** Quits: KyleSiefring (~quassel@ec2-35-174-255-234.compute-1.amazonaws.com) (Remote host closed the connection)
[16:29:25] *** Joins: KyleSiefring (~quassel@ec2-35-174-255-234.compute-1.amazonaws.com)
[16:38:51] *** Quits: qwedfg (~qwedfg@user/qwedfg) (Ping timeout: 245 seconds)
[16:40:06] *** Joins: qwedfg (~qwedfg@user/qwedfg)
[16:55:04] *** Joins: xlei (akans@pool-68-129-84-118.nycmny.fios.verizon.net)
[16:57:58] *** Quits: SimAV (~SimAV@btp9x4.phy.uni-bayreuth.de) (Ping timeout: 268 seconds)
[16:59:48] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[16:59:56] *** Quits: therobin (~UserNick@2607:f2c0:9510:9e00:f914:7777:3f6:7770) (Read error: Connection reset by peer)
[17:00:05] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[17:00:29] *** Joins: therobin (~UserNick@45.72.211.155)
[17:08:03] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[17:21:07] *** Joins: yeirr (~yeirr@user/yeirr)
[17:24:10] *** Quits: kib (~kib@user/kib) (Ping timeout: 252 seconds)
[17:26:19] *** Joins: af (~af@awalgarg.me)
[17:34:07] *** Quits: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr) (Ping timeout: 265 seconds)
[17:35:08] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[17:35:26] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[17:36:58] *** Joins: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr)
[17:38:02] *** Joins: kib (~kib@user/kib)
[17:42:22] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[17:42:41] *** Joins: yeirr (~yeirr@user/yeirr)
[17:45:59] *** Joins: SimAV (~SimAV@btp9x4.phy.uni-bayreuth.de)
[17:48:08] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[17:49:07] *** Quits: cosimone (~user@93-44-185-179.ip98.fastwebnet.it) (Remote host closed the connection)
[17:49:25] *** Joins: cosimone (~user@93-44-185-179.ip98.fastwebnet.it)
[17:51:55] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[17:52:56] *** Joins: yeirr (~yeirr@user/yeirr)
[17:54:28] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[17:56:57] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 276 seconds)
[18:00:24] *** Joins: demon__ (~user@45.130.83.82)
[18:00:55] *** Joins: Yonle (~Yonle@user/yonle)
[18:03:46] *** Quits: anotheruser (~user@45.130.83.82) (Ping timeout: 252 seconds)
[18:07:29] *** Quits: BtbN (btbn@ffmpeg/developer/btbn) (Remote host closed the connection)
[18:09:53] *** Joins: notarealtest (~windowsli@185.21.217.54)
[18:10:15] *** Joins: BtbN (btbn@ffmpeg/developer/btbn)
[18:10:58] <notarealtest> is getting an error such as "cabac decode of qscale diff failed at 118 15" usual? i'm downscaling a video and wondering if i should abort and just get a different source
[18:11:47] *** Joins: notmyroot (~root@78.141.218.14)
[18:11:52] <notmyroot> test
[18:12:23] <notmyroot> ping notarealtest
[18:12:31] *** Quits: notmyroot (~root@78.141.218.14) (Client Quit)
[18:15:08] <JEEB> notarealtest: generally that means there's corruption
[18:15:24] <JEEB> what sort of input is it, and does it happen more than at the very beginning of the stream
[18:16:52] <notarealtest> i noticed it around 750mb so it had to be midway or somewhat close to the middle of the conversion
[18:17:23] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Quit: leaving)
[18:17:27] <notarealtest> does this mean that a frame will be skipped, or will the entire video be unplayable?
[18:17:44] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[18:18:14] <kepstin> it most likely means that there will be some visual corruption on the frame, which may persist into following frames due to prediction
[18:18:25] <kepstin> the effects might not be visible tho
[18:19:02] <JEEB> notarealtest: what sort of input is this?
[18:19:21] <JEEB> if it's MPEG-TS there's a flag that's for some reason not enabled by default
[18:19:36] <JEEB> which makes libavformat not actually output packets noted as corrupt
[18:19:56] <notarealtest> MPEG-4
[18:20:37] <JEEB> which part of MPEG-4? you have the container (part 12), you have what used to be used by xvid|divx (part 2), what is often known as H.264... (part 10)
[18:21:00] <JEEB> I was speaking of input/container
[18:22:50] <notarealtest> i don't understand, unfortunately
[18:23:50] <another|> is it a .mp4?
[18:24:01] <notarealtest> oh yeah it's mp4
[18:24:25] <another|> then it's most likely MPEG-4 Part 12
[18:25:01] <JEEB> ok, then it sounds like you've gotten that file corrupted
[18:25:15] <notarealtest> the output file, or the input file?
[18:25:28] <JEEB> since mp4 stuff doesn't sound like you'd start or stop a packet mid-ways
[18:25:46] <JEEB> while in mpeg-ts if you stop receiving a TV channel or something, your last packet will be partial
[18:26:06] <JEEB> and you get a broken last packet (unsurprisingly)
[18:27:04] <notarealtest> would it matter if i just start the process over again, or is the problem from the source material?
[18:28:24] <JEEB> the error you posted is a decode error, so unless you were decoding what you have just produced yourself that'd be the input
[18:28:43] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[18:28:59] <JEEB> (cabac is the bit of H.264 or HEVC decoding which is akin to unzipping some data to actually read the unpacked result)
[18:30:39] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[18:32:54] *** Joins: Hackerpcs (~user@user/hackerpcs)
[18:32:55] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[18:33:12] <notarealtest> very interesting. i guess i'll just wait out the conversion and see how it looks
[18:33:19] *** Joins: yeirr (~yeirr@user/yeirr)
[18:33:25] <notarealtest> thank you
[18:34:19] <hyrcanus> i bet someone could make a h.264 or 265 encoder that does higher bitrate on some regions of screen vs others
[18:35:02] *** Joins: arcatech (~arcatech@user/arcatech)
[18:35:54] *** Quits: notarealtest (~windowsli@185.21.217.54) (Quit: leaving)
[18:37:04] *** Quits: Hackerpcs (~user@user/hackerpcs) (Client Quit)
[18:38:12] *** Joins: Hackerpcs (~user@user/hackerpcs)
[18:41:44] *** Quits: a0z (~a0z@87.74.80.38) (Quit: Leaving)
[18:42:42] <JEEB> hyrcanus: that is generally what an intelligent encoder does :P
[18:42:53] <JEEB> utilizes bits where there is actual detail
[18:43:10] <hyrcanus> yeah i forgot to say, user-defined regions
[18:43:11] <JEEB> alternatively if you think you can help an encoder, both x264 and x265 IIRC have regions of interest APIs
[18:43:11] <bencoh> :)
[18:43:16] <hyrcanus> OOO
[18:43:32] <hyrcanus> "regions of interest" is a searchable term?
[18:43:40] <JEEB> ROI or that, yes
[18:43:46] <hyrcanus> thanks!
[18:43:51] <bencoh> oh, I never noticed they had support for ROI
[18:44:03] <JEEB> yea x264 had it and I would be surprised if x265 didn't copy that
[18:44:17] <JEEB> since MCW licensed x264's code after all :P
[18:45:00] <hyrcanus> i'm not sure it would 'help' as much as provide opportunity for some entertaining 'glitch art' encodes
[18:46:04] <JEEB> it was originally added to x264 for stuff like video calls
[18:46:13] <JEEB> where you can attempt to guess where the person is
[18:46:19] <JEEB> and focus on that
[18:46:24] <hyrcanus> cool
[18:46:49] <JEEB> which I guess helps if the image overall has detail
[18:46:56] <JEEB> but you only care about the face
[18:47:20] <JEEB> anyways, not sure how well the stuff can be utilized through ffmpeg.c
[18:47:34] <JEEB> I know side data was added for it
[18:47:43] *** Parts: markizano (markizano@2600:3c00::f03c:92ff:fe86:b66e) (Leaving)
[18:48:13] *** Quits: Volgaar (~volgaar@nat-wifi-eduroam.reseau.univ-paris13.fr) (Ping timeout: 265 seconds)
[18:58:35] *** Joins: zmt00 (~zmt00@user/zmt00)
[18:58:42] *** Joins: redro (~redro@125.red-2-138-22.dynamicip.rima-tde.net)
[19:00:43] <redro> Hi! I have a question about filter_complex. I'm gonna upload a pic with options A and B showing different ordering. Which one should I use?
[19:00:51] <redro> Uploaded file: https://uploads.kiwiirc.com/files/40dff2f1a5b6c0808638515a3c9449bd/Clipboard01.jpg
[19:06:56] <kepstin> redro: they're the same filter chain
[19:07:13] *** Joins: Flole (~Flole@94.31.101.37)
[19:07:36] *** Quits: Flole (~Flole@94.31.101.37) (Client Quit)
[19:08:06] *** Joins: Flole (~Flole@94.31.101.37)
[19:11:17] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[19:11:22] <redro> kepstin yes... but the second one used to give me synchronization problems with past builds so I had to use the first one to solve that.
[19:11:59] *** Joins: realies (~realies@user/realies)
[19:12:09] <redro> I don't know if this is still true, and if there's a preferred way for any reason
[19:13:11] *** Joins: af (~af@awalgarg.me)
[19:13:56] <kepstin> huh, i wonder how that would happen. as i understand it both examples should result in identical filter chains internally.
[19:16:18] <redro> I haven't tested it lately but it was a nightmare until I figured it out back then, specially if you had more than two or three 'segments'
[19:16:25] *** Joins: yeirr (~yeirr@user/yeirr)
[19:16:52] *** Quits: SimAV (~SimAV@btp9x4.phy.uni-bayreuth.de) (Ping timeout: 252 seconds)
[19:18:01] *** Quits: af (~af@awalgarg.me) (Ping timeout: 245 seconds)
[19:18:01] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:98c3:6174:8ff5:a406) (Ping timeout: 252 seconds)
[19:19:54] <redro> So I thought I better ask before I start messing with it again and see if I can get an 'authoritative' answer.
[19:22:15] <durandal_1707> redro: changing pts can be dangerous, as stream can sync out causing out of ram usage
[19:22:28] <durandal_1707> so they are not same filtergraphs actually
[19:23:40] <durandal_1707> you could check with graphmonitor filter if frames are bufferen too much
[19:24:01] *** Quits: auth (~auth@user/auth) (Ping timeout: 252 seconds)
[19:24:59] <redro> Hm, didn't though about that. I guessed it was due to different frame sizes for audio/video, not buffering, but I'll have to check it.
[19:26:02] <redro> So, based on the problem with changing pts, what would be the safer option?
[19:26:34] <durandal_1707> to carefully inspect how pts are changed and that buffering is not excessive
[19:26:49] *** Joins: AbleBacon_ (~AbleBacon@user/AbleBacon)
[19:26:49] <durandal_1707> so if A case works always use it
[19:27:19] *** Quits: anticw (~anticw@157-131-246-230.fiber.dynamic.sonic.net) (Ping timeout: 250 seconds)
[19:28:01] <kepstin> hmm. is this a problem because some of the filters in that chain aren't activate-callback based, maybe?
[19:28:07] *** Joins: anticw (~anticw@157-131-246-230.fiber.dynamic.sonic.net)
[19:29:10] <durandal_1707> i do not think so
[19:29:26] <durandal_1707> it happens with A/V pts diverge from each other
[19:30:42] <kepstin> since if it is all activate based, the concat filter should be requesting frames from v1 and a1 in both cases, and those are both the trims with matching pts in the trim and atrim.
[19:31:01] *** Quits: AbleBacon_ (~AbleBacon@user/AbleBacon) (Client Quit)
[19:31:09] <kepstin> and keep going on those until the trim filters report eof, at which point it switches to v2 and a2, right?
[19:31:32] *** Bertl is now known as Bertl_oO
[19:31:59] <kepstin> that said, I personally try to avoid doing multiple trims with the same source file. especially if there are big gaps, separate inputs with seek can be better
[19:33:27] <redro> Better in what sense?
[19:34:24] <kepstin> faster, at least
[19:35:08] <kepstin> (multiple inputs will be slower with small gaps since there's overhead to initializing each input)
[19:37:05] <redro> I haven't found speed problems doing it this way though I rarely need more than 10 segments.
[19:38:46] <redro> And, also, it simplifies scripting for me. But I'd have to check. It's valid reasoning, though. Worth testing.
[19:39:24] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[19:39:45] *** Joins: yeirr (~yeirr@user/yeirr)
[19:40:32] *** Quits: Flole (~Flole@94.31.101.37) (Read error: Connection reset by peer)
[19:40:36] <durandal_1707> redro: if there are no gaps between segments, use (a)segment filters
[19:41:04] *** Joins: AbleBacon_ (~AbleBacon@user/AbleBacon)
[19:41:16] *** Joins: Flole (~Flole@94.31.101.37)
[19:41:16] *** Quits: yeirr (~yeirr@user/yeirr) (Client Quit)
[19:41:27] <durandal_1707> or if there are gaps, just send them to (a)nullsink
[19:41:35] <durandal_1707> and use (a)segment filters
[19:43:05] <kepstin> i kinda wish the ffmpeg-filters doc said which version filters were added in, heh
[19:43:22] <redro> Segment filters = less overhead ?
[19:43:46] <kepstin> the segment filters can do basically what you're doing with trim, except without any buffering worries
[19:44:29] <redro> That sounds good.
[19:44:34] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[19:44:41] <redro> Never though of them.
[19:44:52] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Ping timeout: 268 seconds)
[19:45:20] <kepstin> well, they were only added to ffmpeg git a couple months ago :)
[19:45:27] <kepstin> so makes sense you wouldn't have thought of them
[19:46:13] <redro> Now I feel better :')
[19:46:18] <durandal_1707> redro: you will still need to use setpts filters, as segment filters do not reset timestamps
[19:47:38] <redro> I'll remember that. Good to know it.
[19:47:46] *** Joins: yeirr (~yeirr@user/yeirr)
[19:48:22] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[19:48:29] <redro> Thanks guys, I've came for an answer and got a new perspective also.
[19:48:51] *** Quits: treefrob (~treefrob@p2e54293e.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[19:49:37] <redro> I'll need to polish my english, too, now that I read myself.
[19:49:43] *** Quits: yeirr (~yeirr@user/yeirr) (Client Quit)
[19:51:02] <redro> Well, kepstin & durandal_1707, thanks for your help and your free teaching. Much appreciated! Bye!
[19:51:08] *** Joins: af (~af@awalgarg.me)
[19:51:39] <kepstin> i need to build a new ffmpeg for my production stuff, that segment filter looks really useful :)
[19:54:31] *** Joins: SimAV (~SimAV@ip1f10fb08.dynamic.kabel-deutschland.de)
[19:54:57] *** Quits: redro (~redro@125.red-2-138-22.dynamicip.rima-tde.net) (Quit: Wherever I may roam)
[20:02:36] *** Joins: MrZeus__ (~MrZeus@81.92.205.25)
[20:02:41] *** Joins: treefrob (~treefrob@p2e54293e.dip0.t-ipconnect.de)
[20:06:06] *** Joins: yeirr (~yeirr@user/yeirr)
[20:16:31] *** Quits: wyatt8740 (~wyatt8740@192.145.119.194) (Ping timeout: 265 seconds)
[20:17:44] *** Quits: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104) (Quit: Connection closed)
[20:17:50] *** Joins: wyatt8740 (~wyatt8740@209.58.146.165)
[20:18:49] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[20:18:56] *** Joins: Atsuko (~x@45.63.115.64)
[20:19:11] *** Joins: yeirr (~yeirr@user/yeirr)
[20:33:58] *** Quits: intrac (~intracube@user/intracube) (Quit: Konversation terminated!)
[20:34:13] *** Joins: intrac (~intracube@user/intracube)
[20:40:15] *** Joins: waleee (~waleee@h-98-128-228-119.na.cust.bahnhof.se)
[20:48:50] *** Quits: af (~af@awalgarg.me) (Ping timeout: 260 seconds)
[20:49:19] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[20:50:40] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[20:50:51] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[20:52:08] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[20:55:05] *** Quits: Yonle (~Yonle@user/yonle) (Read error: Connection reset by peer)
[21:07:54] *** Quits: kib (~kib@user/kib) (Ping timeout: 265 seconds)
[21:11:50] *** Joins: af (~af@awalgarg.me)
[21:12:57] *** Quits: beaver (~beaver@user/pong) (Quit: Oh snap back to reality )
[21:13:27] *** Joins: Calint (~none@2806:1000:8200:7409::3)
[21:14:11] <Calint> hello, I am reading a mkv file with FFMPEG and streaming to peertube, How do I make ffmpeg include the subtitles in the stream?
[21:14:13] *** Joins: beaver (~beaver@user/pong)
[21:23:09] *** Quits: Keshl_ (~Purple@idlerpg/player/Keshl) (Read error: Connection reset by peer)
[21:23:32] *** Joins: Keshl_ (~Purple@idlerpg/player/Keshl)
[21:27:18] <another|> -map 0:s
[21:28:18] <klaxa> from what i can tell peertube uses rtmp so tough luck
[21:28:40] <murb> people still use rtmp?!
[21:29:07] <JEEB> people have invested in it with existing solutions, so hard to get them out of it without another completely full solution
[21:30:21] <murb> ha well i spent lots of energy getting a working HLS configuration, top tip ffmpeg only does mpegts'ed mp3 in hls mode if you want raw mp3 you have to use the other segmenter which isn't quite HLS compliant.
[21:30:34] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[21:30:51] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[21:31:58] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[21:32:15] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[21:33:39] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[21:33:56] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[21:37:39] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[21:40:12] *** Joins: dreamon (~dreamon@pd9503e35.dip0.t-ipconnect.de)
[21:44:29] *** AbleBacon_ is now known as AbleBacon
[21:48:54] *** gabby is now known as aphysically
[21:51:55] *** Quits: yeirr (~yeirr@user/yeirr) (Quit: yeirr)
[21:52:27] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[21:52:44] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[21:57:44] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[22:02:36] *** Quits: lexano (~lexano@cpe00e06722f0e4-cm98524a70e35e.cpe.net.cable.rogers.com) (Ping timeout: 245 seconds)
[22:02:50] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[22:02:58] *** Quits: Bertl_oO (~herbert@irc.13thfloor.at) (Ping timeout: 252 seconds)
[22:03:01] *** Joins: lexano (~lexano@cpe00e06722f0e4-cm98524a70e35e.cpe.net.cable.rogers.com)
[22:03:28] *** Joins: Bertl_oO (herbert@IRC.13thfloor.at)
[22:05:08] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Read error: Connection reset by peer)
[22:05:25] *** Joins: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca)
[22:19:58] *** Quits: omegatron (~some@p5b056a70.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[22:20:44] *** Quits: af (~af@awalgarg.me) (Ping timeout: 265 seconds)
[22:22:10] <Calint> Thanks @another|
[22:22:15] <Calint> this is my command
[22:22:28] <Calint> ffmpeg -re -i "My video.mkv" -i Mylogo.png -filter_complex "overlay=(main_w-overlay_w-10):10" -vcodec libx264 -preset veryfast -maxrate 1984k -bufsize 3968k -acodec
[22:22:28] <Calint> libmp3lame -f flv rtmp://My_streamming_addrress
[22:22:32] *** Joins: omegatron (~some@p5b056a70.dip0.t-ipconnect.de)
[22:22:46] <Calint> where should -map 0:s go?
[22:23:18] <furq> rtmp doesn't support subtitles
[22:23:28] <furq> you'd have to burn them in
[22:26:15] *** Quits: mickey8 (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[22:26:37] *** Joins: mickey8 (~user@user/mickey)
[22:29:27] <Calint> thanks furq how do I do that?
[22:29:41] <Calint> can ffmpeg burn them in in the fly?
[22:30:05] <another|> trac.ffmpeg.org has an article about it
[22:34:24] *** Joins: af (~af@awalgarg.me)
[22:48:26] *** Quits: mickey8 (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[22:48:45] *** Joins: mickey8 (~user@user/mickey)
[22:49:24] <Calint> thanks @another it is interesting read but says nothing about subtitles on the streaming section... am I looking in the wrong part?
[22:52:48] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[22:56:37] <another|> search for subtitles: https://trac.ffmpeg.org/wiki/HowToBurnSubtitlesIntoVideo
[23:08:25] *** Quits: jab416171 (~jab416171@c-174-52-53-66.hsd1.ut.comcast.net) (Ping timeout: 252 seconds)
[23:10:47] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[23:13:49] *** Joins: jab416171 (~jab416171@c-67-161-208-101.hsd1.ut.comcast.net)
[23:13:55] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 252 seconds)
[23:16:07] *** Quits: nd (~nd@user/nd) (Ping timeout: 252 seconds)
[23:16:35] <Calint> Muchas gracias, parece que ya lo logr
[23:16:38] <Calint> les agradezco mucho
[23:17:04] <Calint> Sorry, I meant, Thank you very much, it seems like I have it working now
[23:17:11] <Calint> ffmpeg is amazing
[23:20:57] *** Joins: nd (~nd@user/nd)
[23:26:04] *** Quits: s0berage (~s0berage@135-23-213-77.cpe.pppoe.ca) (Quit: Leaving)
[23:27:04] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[23:27:14] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[23:29:13] *** Joins: MrZeus_ (~MrZeus@2a02:c7f:a0aa:4400:9923:6b23:c70b:2ac5)
[23:29:25] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[23:33:15] *** Quits: MrZeus__ (~MrZeus@81.92.205.25) (Ping timeout: 268 seconds)
[23:35:30] *** Joins: MrZeus__ (~MrZeus@194.37.96.105)
[23:39:16] *** Quits: MrZeus_ (~MrZeus@2a02:c7f:a0aa:4400:9923:6b23:c70b:2ac5) (Ping timeout: 252 seconds)
[23:49:29] *** Quits: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net) (Ping timeout: 250 seconds)
[23:57:37] *** Joins: Buster_ (~Buster@buster-net.ru)
