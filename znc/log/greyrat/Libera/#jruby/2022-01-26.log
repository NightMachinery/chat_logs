[02:39:57] *** Quits: subbu (~subbu@user/subbu) (Ping timeout: 240 seconds)
[02:40:50] <basshelal[m]> headius: I do wonder if this issue can affect yall on the JRuby side of things, that could be a problem, can users add and load their own dylibs in JRuby?
[02:40:50] <basshelal[m]> Also, should I add some better error message with the env variables like you had mentioned at some point earlier?
[02:40:50] <basshelal[m]> Like, maybe checking if the error message was because of `dlopen` failing and if so, in the exception message add the DYLD environment variables? Might not be a bad idea, pretty easy addition
[03:03:22] *** Joins: subbu (~subbu@user/subbu)
[03:21:38] <headius> Absolutely...ruby FFI support is pretty widely used
[03:21:51] <headius> It is how we manage to run a few libs that have native bits
[05:57:04] *** Quits: subbu (~subbu@user/subbu) (Quit: Leaving)
[11:34:32] *** Quits: Albertico[m] (~albertico@2001:470:69fc:105::1:3a89) (Quit: Client limit exceeded: 20000)
[15:14:37] <basshelal[m]> I wonder if anyone has faced any similar problems in JRuby then because of this problem
[19:16:33] <ahorek[m]1> has anyone seen this before? it happens reliably on jruby 9.2.20(.1)
[19:16:33] <ahorek[m]1> LoadError: load error: delayed/backend/mongoid -- java.lang.StackOverflowError: null
[19:16:33] <ahorek[m]1>                               require at org/jruby/RubyKernel.java:974
[19:16:33] <ahorek[m]1> https://github.com/newrelic/newrelic-ruby-agent/runs/4944950586?check_suite_focus=true
[19:19:05] <ahorek[m]1> 9.2.19. and https://github.com/jruby/jruby/tree/jruby-9.2 are fine, any idea what could fix it? there aren't many changes, but none of them seems to be related
[19:21:38] <ahorek[m]1> https://github.com/jruby/jruby/compare/9.2.20.1...jruby-9.2
[19:22:35] <enebo[m]> ahorek: https://www.jruby.org/2021/09/22/jruby-9-3-0-0.html
[19:22:49] <enebo[m]> ahorek: load/require stuff had huge changes for 9.3
[19:23:12] <enebo[m]> not sure if this is from that or not but it is happening resolving dependencies so it would be my bet
[19:28:25] <ahorek[m]1> newrelic is still testing ancient stuff like rails 3 :-( which is no longer supported on jruby 9.3 https://github.com/newrelic/newrelic-ruby-agent/pull/784
[19:33:28] <enebo[m]> ahorek: and sorry I misread this.  You are saying 9.2.20.1 is having the issue
[19:35:03] <ahorek[m]1> 9.2.19 passes, 9.2.20 broken, 9.2.20.1 broken and 9.2 dev branch is ok again
[19:35:11] <enebo[m]> ahorek: I don't think Ruby 2.6 will even run Rails 3
[19:35:26] <enebo[m]> wot!
[19:36:10] <ahorek[m]1> it doesn't make much sense, but it happens reliably, same environment, same java....
[19:38:51] <enebo[m]> The only thing remotely maybe would be 3dc0362ba93ee7365a995f3d841747873a0ad918
[19:39:21] <enebo[m]> I don't see how but it is pushing a new frame which was there before
[19:39:31] <enebo[m]> was/wasn't
[19:41:38] <ahorek[m]1> I may just give up and upgrade their CI to 9.3 :) but it's pretty complex, they're testing combinations with rails 3 - rails 7....
[19:41:44] <enebo[m]> My brain is broken this morning
[19:42:02] <enebo[m]> I keep reading stuff wrong :)
[19:42:12] <ahorek[m]1> I'll try that commit, thanks
[19:42:13] <enebo[m]> that SHA is something I could see "fixing" since it is working again
[19:42:38] <enebo[m]> since you said branch is working again
[19:46:24] <enebo[m]> the dregex fixes have been broken as long as 9.x has existed
[19:47:02] <enebo[m]> dedup is something which can change whether we have multiple instances or not of a string but I just don't see that affecting much
[19:51:59] <enebo[m]> jffi failing or no longer failing loading something else?
[19:52:08] <enebo[m]> Just randomly typing stuff at this point
[19:57:06] <ahorek[m]1> ok, I can confirm this one fixed it https://github.com/jruby/jruby/commit/3dc0362ba93ee7365a995f3d841747873a0ad918
[19:57:12] <ahorek[m]1> good morning guess @enebo :)
[19:57:32] <ahorek[m]1> s/@//
[19:58:35] <enebo[m]> ok cool!
[19:58:54] <enebo[m]> So 9.2.21.0 will be golden again
[19:59:01] <ahorek[m]1> yep
[20:00:19] <enebo[m]> firm handshakes
[21:47:04] *** Quits: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22) (K-Lined)
