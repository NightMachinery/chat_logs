[00:00:09] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[00:04:45] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[00:06:19] *** Joins: carragom (~textual@201.204.94.76)
[00:10:35] *** Joins: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net)
[00:13:31] *** Joins: twiclo (~twiclo@66.29.177.50.static.utbb.net)
[00:13:59] <twiclo> I'm switching from mysql to postgres. On mysql I could run `mysql -u my_user` and that would let me in if no password was set on my_user
[00:14:20] <twiclo> With psql it looks like I don't have that option. Looks like I have to do sudo -u postgres psql to get in as the postgres user
[00:15:04] <twiclo> How do I set this up?
[00:15:19] *** Quits: cxreg (~count@63.228.111.44) (Ping timeout: 256 seconds)
[00:15:28] <peerce> you can configure postgres authentication many different ways, but the default is usually 'peer' for local connections, and password for localhost
[00:15:30] <peerce> ??auth
[00:15:30] <pg_docbot> https://www.postgresql.org/docs/current/static/client-authentication.html
[00:16:17] <peerce> easiest thing to do usually is to setup a postgres role with the same name as your regular system user, and grant it the level of permissions you want
[00:17:16] *** Joins: dante443 (~dante443@2600:1702:7a0:9a40:6e62:6dff:fe5d:c340)
[00:18:00] <twiclo> p.twil.cx/how
[00:18:11] <twiclo> Created the user and still can't get in with it
[00:18:16] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[00:22:07] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[00:24:00] *** Joins: karabaja4 (~karabaja4@dh207-95-139.xnet.hr)
[00:27:25] <Net> ilmari: thanks
[00:29:11] *** Quits: `2jt (~jtomas@130.red-88-22-46.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[00:31:28] *** Joins: `2jt (~jtomas@130.red-88-22-46.staticip.rima-tde.net)
[00:31:33] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[00:32:36] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[00:34:12] <twiclo> Can anyone help me out here?
[00:34:49] <twiclo> Oh wait I think I got it
[00:35:11] <twiclo> No I don't
[00:35:18] <twiclo> [twiclo@momo raising_pains]$ psql
[00:35:20] <twiclo> psql: error: FATAL:  database "twiclo" does not exist
[00:35:37] <twiclo> Why is it complaining about a twiclo database? I just want to drop into the shell
[00:36:08] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[00:36:55] <ilmari> by default it connects to the database with the same name as your OS user
[00:37:24] <ilmari> if you want to connect to a different database specify it on the psql command line, e.g.g `psql postgres`
[00:37:48] <ktosiek> twiclo: try: psql pr
[00:37:48] <ilmari> a psql session is always connected to some database
[00:38:02] <ktosiek> ugh, "rp" not "pr"
[00:38:35] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[00:38:59] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[00:39:26] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[00:39:57] *** Quits: mexen (uid495612@user/mexen) (Quit: Connection closed for inactivity)
[00:40:33] *** Joins: tozhu (~tozhu@218.89.244.95)
[00:40:56] <twiclo> So you have to specify a database when connecting?
[00:40:59] <twiclo> That worked btw
[00:41:40] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 272 seconds)
[00:42:19] <twiclo> So who do I connect to rp as the user "rp"? I've created the user, set th user as the owner of the rp database, and granted all privileges to it and I still can't get in
[00:42:24] <twiclo> [twiclo@momo raising_pains]$ psql rp -U rp
[00:42:26] <twiclo> psql: error: FATAL:  Peer authentication failed for user "rp"
[00:42:56] *** Quits: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net) (Ping timeout: 272 seconds)
[00:44:46] *** Quits: tozhu (~tozhu@218.89.244.95) (Ping timeout: 250 seconds)
[00:45:06] <ktosiek> the error should give you a hint: *Peer authentication* failed for user "rp". Basically, this means you've tried to connect over unix socket (a special, local kind of connection) and your user name does not match the username you've tried to connect as.
[00:45:21] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 256 seconds)
[00:45:58] <ktosiek> do you need to connect as rp? If not, just connect as yourself
[00:47:31] <twiclo> I do need to connect as rp
[00:48:28] *** Quits: r2ndur (~r2ndur@46-39-145-84.telset.ee) (Remote host closed the connection)
[00:48:41] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[00:49:14] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Quit: Konversation terminated!)
[00:49:21] <twiclo> This is so my Rust application can connect to the DB. I can log in as twiclo to rp using `psql rp` but when I try having the Rust application log in as me I get "Ident authentication failed for user "twiclo""
[00:49:33] <twiclo> Which doesn't make too much sense to me considering I'm the one who ran the process that's trying to log in as me
[00:50:27] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[00:50:40] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[00:50:55] *** Joins: schinckel (uid38120@user/schinckel)
[00:52:59] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[00:53:01] *** Joins: Measles (~Measles@186.226.224.169)
[00:53:46] <ktosiek> the hint is in the error message again, even if it's subtle: Ident authentication. This means your Rust app is not connecting through unix socket (which can identify the user reliably), but through network (even if localhost). What's in your pg_hba.conf?
[00:53:56] <ktosiek> Did you setup a password for the rp user?
[00:54:10] <Measles> whats a good way to query a set of paginated results from a table + total number of rows that would be returned without pagination?
[00:54:51] <ktosiek> Measles: two queries, the count one simplified if possible
[00:55:31] <Measles> yeah thats what Im thinking
[00:57:28] <twiclo> I don't have a pg_hba actually. I would have though that'd be set up on its own but I guess not
[00:57:34] <twiclo> There's no password on the rp user
[00:57:50] <twiclo> I'll have to add my hba then change the auth method
[00:59:03] <Tenchi[m]> "Where the collaborative spirit may be insufficient to inspire folks to use the same schema, we still have laziness to help us fight entropy."
[00:59:31] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[01:01:58] <ilmari> twiclo: you always have a pg_hba.conf file `show hba_file;` in psql to show the location
[01:02:50] *** Quits: OliverMT (sid16701@id-16701.hampstead.irccloud.com) (Read error: Connection reset by peer)
[01:02:50] *** Quits: Skaag (sid164385@id-164385.hampstead.irccloud.com) (Read error: Connection reset by peer)
[01:03:00] *** Joins: OliverMT (sid16701@id-16701.hampstead.irccloud.com)
[01:03:00] *** Joins: Skaag (sid164385@id-164385.hampstead.irccloud.com)
[01:03:00] *** Quits: scav (sid309693@id-309693.helmsley.irccloud.com) (Ping timeout: 240 seconds)
[01:03:14] *** Quits: TomTom (uid45892@id-45892.ilkley.irccloud.com) (Read error: Connection reset by peer)
[01:03:18] *** Quits: leont (sid489095@id-489095.uxbridge.irccloud.com) (Read error: Connection reset by peer)
[01:03:24] *** Quits: schinckel (uid38120@user/schinckel) (Ping timeout: 240 seconds)
[01:03:24] *** Quits: gajus (sid202456@id-202456.tinside.irccloud.com) (Ping timeout: 240 seconds)
[01:03:25] *** Quits: holbrode (sid339826@id-339826.tinside.irccloud.com) (Ping timeout: 240 seconds)
[01:03:27] *** Joins: leont (sid489095@id-489095.uxbridge.irccloud.com)
[01:03:27] *** Quits: wooster_ (sid316977@id-316977.helmsley.irccloud.com) (Read error: Connection reset by peer)
[01:03:28] *** Joins: TomTom (uid45892@id-45892.ilkley.irccloud.com)
[01:03:30] *** Quits: dba (sid533975@id-533975.hampstead.irccloud.com) (Read error: Connection reset by peer)
[01:03:32] *** Joins: scav (sid309693@id-309693.helmsley.irccloud.com)
[01:03:32] *** Quits: nickb (sid293439@id-293439.uxbridge.irccloud.com) (Read error: Connection reset by peer)
[01:03:35] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Read error: No route to host)
[01:03:38] *** Joins: wooster_ (sid316977@id-316977.helmsley.irccloud.com)
[01:03:40] *** Joins: dba (sid533975@id-533975.hampstead.irccloud.com)
[01:03:42] *** Joins: nickb (sid293439@id-293439.uxbridge.irccloud.com)
[01:03:44] *** Joins: schinckel (uid38120@user/schinckel)
[01:03:44] <peerce> note there's a difference between a 'local' connection, and a host connection over localhost
[01:03:44] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
[01:04:12] *** Quits: braxas (sid508886@id-508886.lymington.irccloud.com) (Ping timeout: 240 seconds)
[01:04:27] <peerce> those are different in pg_hba.conf.   so psql role and psql -h localhost role are two different things
[01:04:34] *** Quits: viaSanctus (~viaSanctu@user/viasanctus) (Quit: Connection closed)
[01:04:36] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Ping timeout: 240 seconds)
[01:04:40] *** Joins: holbrode (sid339826@id-339826.tinside.irccloud.com)
[01:05:00] *** Quits: econo (uid147250@user/econo) (Ping timeout: 240 seconds)
[01:05:33] *** Joins: gajus (sid202456@id-202456.tinside.irccloud.com)
[01:05:36] *** Joins: econo (uid147250@user/econo)
[01:05:40] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[01:05:48] *** Joins: braxas (sid508886@id-508886.lymington.irccloud.com)
[01:08:37] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[01:08:53] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[01:10:04] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[01:27:48] <twiclo> https://p.twil.cx/zik
[01:27:53] <twiclo> Looks like I don't have one ilmari
[01:29:07] <Berge> twiclo: End the SQL command with a semicolon
[01:29:16] <Berge> Ie. what's on line number 9 in your paste
[01:32:13] *** Quits: Measles (~Measles@186.226.224.169) (Quit: Client closed)
[01:32:36] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 240 seconds)
[01:35:44] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[01:36:15] <senoraraton> So I have a database, and if I run \dt in it, it says "Did not find any relations" but if I run CREATE TABLE IF NOT EXISTS USERS it says relation "users" already exists.
[01:37:03] <senoraraton> It is part of schema, but the schema exists, and is listed in \dn
[01:37:23] <Berge> senoraraton: What's your search path?
[01:37:26] <Berge> SHOW search_path;
[01:39:35] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.3)
[01:39:51] <senoraraton> "$user", public
[01:40:04] <senoraraton> I did add myself as a superuser as well, because it made my life easier.
[01:40:48] <Berge> Is there a view called users, perhaps?
[01:40:48] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Read error: Connection reset by peer)
[01:41:12] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[01:41:45] <senoraraton> Lost connection there.  It returned '$user', public
[01:41:51] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[01:42:01] <Berge> 23:10:48 < Berge> Is there a view called users, perhaps?
[01:42:04] <senoraraton> I don't know if the message got added, but I did add myself as a superuser to the database as well.
[01:42:08] <Berge> Do \d (without the t)
[01:43:27] <senoraraton> \d Did not find any realtions
[01:44:14] <Berge> Can you pastebin a complete psql transcript, where you do your CREATE TABLE, \d and SHOW search_path; ?
[01:45:20] <senoraraton> If I type CREATE TABLE users; it tells my syntax error now... something is wonky.
[01:45:59] <Berge> That's because it's an incomplete CREATE TABLE
[01:46:04] <Berge> Do the actual statement that failed
[01:46:57] <senoraraton> That worked, and its listed in \dt now
[01:47:39] <Berge> This sounds like a search path issue of sorts
[01:47:52] <senoraraton> Let me test something.
[01:48:25] <senoraraton> Wait.. this is a schema problem isn't it?
[01:48:28] <peerce> what schema was the users table in before you did this latest create ?
[01:48:55] <senoraraton> The one I JUST created wasn't in a schema, but my actual table is
[01:49:04] <peerce> what schema are listed on \dn ?    \dt schemaname.users
[01:49:05] <Berge> All relations exist in a schema
[01:49:08] <senoraraton> \dn
[01:49:18] <peerce> the default schema is public
[01:49:21] *** Joins: dre (~dre@2001:8003:c932:c301:2079:4593:1556:be9c)
[01:49:24] <senoraraton> Blog and public.  I'm using blog as my schema for the users table.
[01:49:47] <Berge> senoraraton: Then your either didn't paste your actual query, or your search_path wasn't what you pasted
[01:49:59] <peerce> Blog is not in your default search_path unless you are logged on as role Blog
[01:50:02] <Berge> Or, I suppose, your currently logged in user is called "blog"?
[01:50:19] <peerce> [since the default search_path is $user,public]
[01:50:24] <senoraraton> I'm logged in as my user account.
[01:50:24] <Berge> All of which would be easy for us to assess if you'd pasted a psql transcript.
[01:50:56] <senoraraton> How do I add my login to the default search path then?
[01:51:13] <Berge> But your \dt should've listed any tables with that search path
[01:51:17] <Berge> So something's off
[01:51:26] <Berge> senoraraton: What do you mean?
[01:52:42] *** Joins: _SKiTZO (~SKiTZO@64.89-10-146.nextgentel.com)
[01:53:07] <senoraraton> Here is my query, abreviated, and the search path CREATE TABLE IF NOT EXISTS BLOG.USERS ( id int, test int);  SHOW search_path -> "$user", public
[01:53:35] <Berge> ok, so that's not what you pasted
[01:53:42] <ario> when i do select * from table; it throws the entire table into memory and my queries are super faster after
[01:53:51] <ario> is there a way to optimize queries like this?
[01:53:57] <senoraraton> I added it to the path, and it lists the tables now.
[01:53:59] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[01:54:42] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[01:54:42] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[01:55:36] <Berge> ario: To preheat the cache, you mean?
[01:58:21] <Berge> ario: Do you really need SELECT * FROM table; to be fast?
[01:59:13] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Client Quit)
[01:59:14] <Berge> pg_prewarm can be used to pre-heat caches
[02:00:37] *** Quits: magla (~gelignite@55d4275f.access.ecotel.net) (Quit: Stay safe!)
[02:02:50] <ario> Berge: yeah to prehead the cache
[02:02:57] <ario> preheat*
[02:03:57] *** Quits: fcr (~fran@r167-60-109-101.dialup.adsl.anteldata.net.uy) (Ping timeout: 252 seconds)
[02:04:20] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[02:04:21] <ario> Berge: I don't need the select * from table; to be fast, I need queries made to that table to be preheated
[02:04:22] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[02:05:21] *** Quits: pvn (~Adium@85-195-230-32.fiber7.init7.net) (Quit: Leaving.)
[02:05:25] *** Quits: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru) (Remote host closed the connection)
[02:06:26] *** Joins: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru)
[02:07:18] *** Joins: Measles (~Measles@186.226.224.169)
[02:07:52] <Measles> how do I get the total count of a query that gas GROUP BY and HAVING?
[02:07:52] <Measles> ```
[02:07:53] <Measles> SELECT count(p.id) FROM product p
[02:07:53] <Measles> LEFT JOIN vendor v ON p.vendor_id = v.id
[02:07:54] <Measles> LEFT JOIN product_product_tag ppt ON ppt.product_id = p.id
[02:07:54] <Measles> LEFT JOIN product_tag pt ON ppt.product_tag_id = pt.id
[02:07:55] <Measles> WHERE p.group_id = $1
[02:07:55] <Measles> AND p.status = $2
[02:07:56] <Measles> GROUP BY p.id
[02:07:56] <Measles> HAVING (
[02:07:57] <Measles>   $3 ilike any(array_agg(pt.name))
[02:07:57] <Measles>   OR p.name ilike $4
[02:07:58] <Measles>   OR sku ilike $5
[02:07:58] <Measles> )
[02:07:59] <Measles> ```
[02:08:34] <Measles> the group by makes it so it returns many rows with count = 1
[02:08:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[02:09:34] <ario> you should post SQL queries into a pastebin or some sort
[02:09:57] *** Joins: fcr (~fran@r167-60-16-70.dialup.adsl.anteldata.net.uy)
[02:11:07] <StuckMojo> Measles: select p.id, count(*) ...
[02:12:00] <StuckMojo> also, are you sure, given the conditions, that 1 is not the correct count?
[02:12:03] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[02:12:17] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[02:13:14] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Remote host closed the connection)
[02:16:22] *** Joins: zeden (~zeden@user/zeden)
[02:16:48] *** Joins: hoppity (~hoppity@66.222.130.38)
[02:16:48] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[02:16:48] *** Joins: hoppity (~hoppity@user/hoppity)
[02:18:51] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[02:21:23] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 256 seconds)
[02:21:41] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 256 seconds)
[02:24:38] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[02:26:09] <ash_worksi> ne2k: so, I was not able to use `using constraint = CONSTRAINT_NAME` on pg12, I get an error unless I use `GET STACKED DIAGNOSTICS __constraint = CONSTRAINT_NAME; RAISE NOTICE USING constraint = __constraint_name;` is that what you meant or am I missing something?
[02:32:04] *** Joins: Elodin (~elodin@user/elodin)
[02:34:06] *** Quits: sagax (~sagax_nb@user/sagax) (Excess Flood)
[02:36:17] *** Quits: indy (~indy@dsl-static-104.213-160-167.telecom.sk) (Ping timeout: 240 seconds)
[02:37:24] *** Quits: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru) (Ping timeout: 240 seconds)
[02:37:37] *** Joins: indy (~indy@dsl-static-104.213-160-167.telecom.sk)
[02:38:23] *** Quits: `2jt (~jtomas@130.red-88-22-46.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[02:38:23] *** Quits: htd (~htd@095129203062.t4.akis.net) (Read error: Connection reset by peer)
[02:38:51] *** Joins: htd (~htd@095129203062.t4.akis.net)
[02:40:07] *** Quits: htd (~htd@095129203062.t4.akis.net) (Read error: Connection reset by peer)
[02:41:12] *** Quits: michalz (~michalz@185.246.204.57) (Remote host closed the connection)
[02:43:02] *** Quits: ch (ch@percival.namespace.at) (Ping timeout: 250 seconds)
[02:43:19] <Measles> StuckMojo yeah for sure. I tried that and now it returns rows with their id and count = 1
[02:44:36] *** Joins: ch (ch@percival.namespace.at)
[02:44:56] *** Quits: xq (~xq@user/xq) (Ping timeout: 245 seconds)
[02:45:02] *** Quits: b0nn (~shane@user/b0nn) (Ping timeout: 240 seconds)
[02:45:45] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[02:46:05] *** Joins: htd (~htd@095129203062.t4.akis.net)
[02:46:37] *** Quits: mniip (mniip@libera/staff/mniip) (Ping timeout: 606 seconds)
[02:46:45] <StuckMojo> well you're going to need the id either way
[02:47:05] <StuckMojo> raw counts without telling you what's being counted gains you nothing ;)
[02:47:15] *** Quits: tachoknight (~textual@2600:1700:3060:3ee0:f467:fda7:b67f:3b6) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:49:31] <StuckMojo> Measles: that query doesn't look valid to me. HAVING can't refere to things that aren't in the select list?
[02:50:19] *** Joins: hoppity (~hoppity@66.222.130.38)
[02:50:19] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[02:50:19] *** Joins: hoppity (~hoppity@user/hoppity)
[02:50:30] * StuckMojo wanders off to each lunch
[02:50:48] *** Joins: b0nn (~shane@user/b0nn)
[02:51:31] *** Joins: juan321 (~juan321@181.174.106.62)
[02:52:06] *** Parts: dminuoso (~dminuoso@user/dminuoso) (WeeChat 3.3)
[02:52:11] *** Quits: zlinux (~zlinux@149.109.12.63) (Read error: Connection reset by peer)
[02:52:39] *** Joins: zlinux (~zlinux@149.109.12.63)
[02:54:25] *** Joins: mniip (mniip@libera/staff/mniip)
[02:55:06] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 252 seconds)
[03:01:19] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[03:04:35] *** Quits: _mikey (~mikey@user/mikey/x-4335048) (Ping timeout: 240 seconds)
[03:06:21] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:08:36] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[03:08:43] *** Joins: _mikey (~mikey@user/mikey/x-4335048)
[03:12:34] *** Quits: saml (~saml@cpe-74-73-80-162.nyc.res.rr.com) (Quit: Leaving)
[03:14:29] *** moe[m] is now known as moe[m]1
[03:21:48] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Ping timeout: 240 seconds)
[03:24:36] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 240 seconds)
[03:29:54] *** Joins: concrete-houses (~g@209.6.150.53)
[03:29:56] *** Joins: krismatrix (~krismatri@205.178.37.15)
[03:30:19] <concrete-houses> How would I find the most common queries that need an index ?
[03:30:30] <concrete-houses> I have pg_stat_statments enabled
[03:31:50] *** Joins: funhouse (~funhouse@user/funhouse)
[03:34:11] <StuckMojo> by need to you mean are using one, or could use one?
[03:34:40] <StuckMojo> basically you'd have to go through your most common queries and run explain or explain analyze against them
[03:34:52] <StuckMojo> there's no "index predictor" built into pg
[03:36:08] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[03:37:25] <ilmari> ??powa
[03:37:25] <pg_docbot> http://dalibo.github.io/powa/
[03:39:54] <ilmari> if you install pg_qualstats as ewll, POWA can suggest missing indexes
[03:40:23] <ilmari> and with HypoPG you can even check if postgres would use a suggested index without actually creating it
[03:43:23] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[03:45:33] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[03:46:07] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[03:47:24] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Ping timeout: 240 seconds)
[03:50:37] *** Quits: xocolatl (~xocolatl@193.32.126.231) (Ping timeout: 240 seconds)
[03:53:50] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[03:55:36] *** Quits: Kohe (~Kohe@46.12.76.236.dsl.dyn.forthnet.gr) (Ping timeout: 252 seconds)
[03:58:54] *** Quits: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[03:59:01] <StuckMojo> :thumbsup:
[03:59:05] <StuckMojo> i've been meaning to try that
[04:00:24] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[04:02:46] *** Joins: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6)
[04:03:57] <zumba_addict> Hi all. We're trying to debug if our network connection between a psql client and server is unstable. I don't know if writing a script that runs psql every 15 seconds to login is a good idea. What is your recommendation?
[04:04:20] <concrete-houses> wow
[04:07:55] <StuckMojo> zumba_addict: that's what i do
[04:08:02] <zumba_addict> cool
[04:08:20] <StuckMojo> while /usr/bin/true; do psql ... -c "select now();"; sleep 1; done
[04:08:47] <zumba_addict> i need to find the database. Right now when I log in, it says can't find database and it brings me back to the prompt
[04:08:49] <peerce> or run iperf on the server and client, and choose a slow test rate
[04:08:50] <StuckMojo> probably want to redirect the output to a file
[04:09:05] <zumba_addict> server is aws postgres
[04:09:14] <peerce> ah, then iperf isn't an option.
[04:09:18] <zumba_addict> yep, I'll redirect to a file
[04:09:26] <StuckMojo> zumba_addict: can't find the database??
[04:09:28] <zumba_addict> yep iperf isn't
[04:09:29] <peerce> doesn't aws dashboard show any errors ?
[04:09:45] <zumba_addict> I can login but i don't know the name of the databases that are in there
[04:09:52] <StuckMojo> peerce: it doesn't really work like that
[04:10:11] <zumba_addict> so when i login using psql, it bringe me back to the prompt
[04:10:15] <peerce> um, psql -l -h hostaddress ...  will list all databases
[04:10:18] <StuckMojo> you'd have to set cloudwatch alerts, and even then, if the db isn't the issue and it's network out in front of it, you won't get anything useful
[04:10:23] <zumba_addict> oh tryhing it now
[04:10:23] <peerce> or at that prompt, \l  will list all databases
[04:10:44] <StuckMojo> zumba_addict: without an error?
[04:11:00] <StuckMojo> psql: error: FATAL:  database "foobie" does not exist
[04:11:04] <StuckMojo> something like that?
[04:11:33] <zumba_addict> yay, it displayed the dbs
[04:11:55] <zumba_addict> i didn't know about the -l param :)
[04:12:12] <zumba_addict> i'll use select now()
[04:12:48] <zumba_addict> select now() worked
[04:13:41] <zumba_addict> thanks to you both:)  for the -c and -l
[04:14:04] <zumba_addict> now I need to automate the password
[04:14:08] <zumba_addict> so -p?
[04:14:16] <StuckMojo> export PGPASSWORD='lsjkfa;dslfkj'
[04:14:21] <zumba_addict> cool
[04:14:22] <StuckMojo> that's insecure
[04:14:29] <zumba_addict> it is
[04:14:31] <StuckMojo> or use ~/.pgpass
[04:14:36] <zumba_addict> got it
[04:14:37] <StuckMojo> ??pgpass
[04:14:37] <pg_docbot> https://www.postgresql.org/docs/current/static/libpq-pgpass.html
[04:15:48] <zumba_addict> i added the password in pgpass, it told me to correct the permission which i did. Then I ran it again, it's still asking me for password
[04:15:48] *** Quits: concrete-houses (~g@209.6.150.53) (Remote host closed the connection)
[04:16:14] <zumba_addict> am I missing in psql param?
[04:17:43] <zumba_addict> ah, i see
[04:18:00] *** Quits: Auron (Auron956@user/auron) (Remote host closed the connection)
[04:20:49] <zumba_addict> got pgpass working. I had to specify the db too
[04:21:17] <zumba_addict> is one login every 15 seconds enough?
[04:21:27] *** Joins: concrete-houses (~g@209.6.150.53)
[04:22:42] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[04:26:18] <StuckMojo> depends on how flaky your network is
[04:26:29] <StuckMojo> if it only goes down for 5s, then you could miss it
[04:26:32] <zumba_addict> right now, we're just assuming
[04:26:37] <zumba_addict> yep
[04:26:39] <StuckMojo> meh. just do 1s
[04:26:53] <StuckMojo> it's not like it will hurt anything or generate any real load
[04:27:04] <zumba_addict> yep, data returned is tiny
[04:27:10] <zumba_addict> i'll do 5
[04:27:39] <zumba_addict> I'll also write another script that will monitor the cpu load
[04:27:40] *** Joins: zachxz (~zachary@124.133.18.218)
[04:28:41] <StuckMojo> you won't even be able to detect selecting the current date
[04:29:31] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[04:33:45] <concrete-houses> https://youtu.be/Mni_1yTaNbE self indexing postgres?  interesting   !   are multi colmn index way better than individual coumn index I think he says that
[04:35:03] *** Joins: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au)
[04:35:13] <peerce> a multicolumn index is useful for a query that uses multiple columrs in the where clause, l ike, if you WHERE a=$1 AND b=$2, then an index on (a,b) will work.
[04:36:13] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Quit: au revoir)
[04:36:46] <quazimodo> I'd like some table naming guidance/opinions. Currently I have user.referral_slug:string and this has worked well however new partner table needs a referral_slug and these need to be unique against user.referral_slug. I have decided (open to changing this) to have new polymorphic referral_detail table (common in rails world) with referrer_id, referrer_type and slug column
[04:36:56] <quazimodo> the name 'referral_detail' doesn't sit right with me
[04:37:19] <quazimodo> it seems to indicate the details of a given referral, not the configuration information of how a user or partner might engage in referring someone
[04:37:44] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[04:38:09] <quazimodo> every time I need to name a new concept I have a full mental breakdown :(
[04:38:29] *** Joins: zachxxz (~zachary@124.133.18.218)
[04:38:49] <quazimodo> referrer_<something> ? referrer_info or referrer_detail ?
[04:39:04] <quazimodo> referrer_attributes?
[04:39:46] *** Joins: hoppity (~hoppity@user/hoppity)
[04:40:11] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8)
[04:40:55] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[04:41:21] *** Quits: zachxz (~zachary@124.133.18.218) (Ping timeout: 256 seconds)
[04:41:53] *** Quits: ivii (~ivan@user/ivii) (Remote host closed the connection)
[04:43:14] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[04:46:15] <concrete-houses> ok
[04:47:20] *** Joins: tozhu (~tozhu@218.89.244.95)
[04:47:40] <quazimodo> im gonno go with `referrer`
[04:48:00] *** Quits: PyHedgehog (uid146498@id-146498.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[04:48:02] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 272 seconds)
[04:48:58] *** Joins: lechner (~lechner@debian/lechner)
[04:50:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[05:01:41] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[05:02:04] <dodobrain> hi all.. is there a way i can get `create role if not exists ...` ?
[05:02:45] <StuckMojo> quazimodo: why not make partner.referral_slug a foreign key to user.erferral_slug?
[05:03:12] <quazimodo> StuckMojo: live in ruby on rails world where fk is always on id column
[05:03:36] <StuckMojo> you can put FKs directly into the db to enforce consistency
[05:03:43] <StuckMojo> you don't have to do it through rails
[05:03:48] <quazimodo> but that wouldn't prevent a user & a partner from pointing to the same slug, either
[05:04:00] <StuckMojo> and rails can execute arbitraty sql as part of a migration IIRC
[05:04:13] <StuckMojo> quazimodo: you can also make the column unique
[05:04:35] <quazimodo> StuckMojo: yeah you can make rails do almost anything for sure, actually my concern is that a User & a Partner must _never_ share a slug
[05:04:51] <quazimodo> so unique column on User, and unique column on Partner wont achieve it
[05:04:55] <StuckMojo> oh that's what you mean by unique ok
[05:05:04] *** Quits: Measles (~Measles@186.226.224.169) (Quit: Client closed)
[05:05:12] <quazimodo> I think referrer is okay though
[05:05:19] <quazimodo> it explains the intention well
[05:05:41] <StuckMojo> how does that stop them from pointing to the same slug though?
[05:06:06] <StuckMojo> you'd need to have a trigger on partner an user that checks for that slug / slug_id in the opposite table
[05:06:23] <StuckMojo> i.e. one on user that looks in parter, one on partner that looks in user
[05:07:00] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[05:07:03] *** Joins: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[05:08:10] <StuckMojo> you could have a table slugs(id identity, slug text); then user.slug_id unique fk -> slugs.id, partner.slug_id unique fk -> slugs, and the two triggers to check the other table
[05:08:19] <StuckMojo> indexes on slug_id of course
[05:08:27] <StuckMojo> actually, the unique takes care of that bit
[05:09:21] <StuckMojo> easy peasy
[05:09:48] *** Quits: krismatrix (~krismatri@205.178.37.15) (Ping timeout: 240 seconds)
[05:12:16] *** Quits: Rashad (~textual@2a01:9700:1a7c:8900:84a2:920e:e2a8:8ec) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[05:20:27] *** Quits: n0fun_ (~jack@i577BC0C9.versanet.de) (Ping timeout: 256 seconds)
[05:25:33] *** Joins: zachxz (~zachary@124.133.18.218)
[05:26:14] *** Quits: concrete-houses (~g@209.6.150.53) (Remote host closed the connection)
[05:27:55] *** Joins: krismatrix (~krismatri@205.178.37.15)
[05:29:12] *** Quits: zachxxz (~zachary@124.133.18.218) (Ping timeout: 272 seconds)
[05:30:17] *** Quits: dre (~dre@2001:8003:c932:c301:2079:4593:1556:be9c) (Quit: Leaving)
[05:35:01] *** Quits: tozhu (~tozhu@218.89.244.95) (Quit: tozhu)
[05:37:06] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[05:42:12] *** Quits: f3f3lix (~weechat@55d48b13.access.ecotel.net) (Ping timeout: 240 seconds)
[05:42:51] *** Joins: johnjacob (~johnjacob@131.106.25.151)
[05:43:01] <johnjacob> hiya
[05:44:26] *** Joins: f3f3lix (~weechat@55d486e6.access.ecotel.net)
[05:44:51] *** Joins: trafficjam (~qubes@2001:8004:1500:2c2b:47ac:bc3f:ac64:7600)
[05:45:00] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[05:45:05] <trafficjam> should i use rds/aurora db?
[05:45:40] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[05:47:16] <johnjacob> question: if i had a table with 1000 rows, how could i get rows 950 through 1000 in ascending order? i tried doing this which returns the correct rows, but it has them in the wrong order: `SELECT * FROM replies WHERE id < 9999999999 ORDER BY id DESC LIMIT 50;`
[05:49:11] <peerce> order by id offset 50
[05:49:36] <peerce> oops, offset 950
[05:50:01] <peerce> or, select * from (SELECT * FROM replies WHERE id < 9999999999 ORDER BY id DESC LIMIT 50) order by id asc;
[05:50:19] <johnjacob> oh, i don't know in advance how many rows there are going to be. i was just choosing a number to make a concrete example, sorry x_x
[05:50:28] <johnjacob> basically i want the last 50 rows in ascending order
[05:50:33] <peerce> then that.
[05:50:46] <peerce> select * from (SELECT * FROM replies WHERE id < 9999999999 ORDER BY id DESC LIMIT 50) order by id asc;
[05:50:50] <johnjacob> ok yeah i have to wrap it in another select i wasn't sure if there was another way
[05:50:52] <johnjacob> thanks!
[05:53:03] *** Quits: Su-Shee (~Susanne@p4ffc7bc5.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[05:54:31] *** Quits: krismatrix (~krismatri@205.178.37.15) (Quit: Leaving)
[05:54:36] *** Joins: Su-Shee (~Susanne@p4ffc7736.dip0.t-ipconnect.de)
[05:54:53] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[05:55:45] <trafficjam> also are aurora/rds compatible with postgresql?
[05:55:56] <trafficjam> like if i wanted to switch to my own hardware, could i do that?
[05:56:30] *** Joins: tozhu (~tozhu@218.89.244.95)
[05:59:00] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[06:02:39] <StuckMojo> trafficjam: they are both postgresql, yes
[06:03:07] <StuckMojo> Aurora being PG with the storage layer yanked out, and some plan caching added
[06:04:04] *** Quits: justGhost (~justache@user/justache) (Read error: Connection reset by peer)
[06:05:07] <trafficjam> StuckMojo: are they worth using?
[06:05:14] *** Joins: justGhost (~justache@user/justache)
[06:05:19] <trafficjam> or should i just stick with an EC2 instance and put postgres on that?
[06:05:25] <trafficjam> (for a side project)
[06:06:27] *** Joins: pagnol (~user@014198154145.ctinets.com)
[06:08:09] *** Quits: fercell (~ferr@185.65.50.80) (Ping timeout: 252 seconds)
[06:08:16] *** Joins: ferr_ (~ferr@185.65.50.92)
[06:08:25] *** Quits: JordiGH (~jordi@user/jordigh) (Ping timeout: 250 seconds)
[06:08:59] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[06:09:48] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[06:14:20] *** Quits: bmomjian (~bruce@momjian.us) (Read error: Connection reset by peer)
[06:14:26] *** Joins: bmomjian1 (~bruce@momjian.us)
[06:16:00] *** Quits: _xor (~xor@dsl-50-5-233-169.fuse.net) (Quit: brb)
[06:17:54] <pagnol> I'm surprised to see that plv8, plperl, pltcl and even plcoffee are all available on RDS, but no plpython
[06:18:07] <pagnol> is anybody seriously running coffeescript on RDS?
[06:22:24] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[06:23:32] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[06:24:16] *** Joins: concrete-houses (~g@209.6.150.53)
[06:25:33] <concrete-houses> is use the index luke a good site?
[06:25:39] <peerce> plpython is an unsafe language
[06:25:48] <concrete-houses> seems to have great tips on indexing
[06:26:16] <concrete-houses> also is the art of postgresql a good first postgresql book?
[06:26:33] <pagnol> peerce: aren't there both safe and unsafe versions?
[06:26:33] <concrete-houses> how about pltcl?
[06:26:53] <concrete-houses> navisrver and postgresql on archlinux
[06:26:56] <concrete-houses> for the win!!
[06:27:23] <concrete-houses> or hek freebsd
[06:27:28] <pagnol> plpython3 and plpython3u
[06:27:29] <peerce> pagnol; there are for perl and others, but not for python because the language itself doesn't offer a safe version
[06:28:24] <peerce> https://www.postgresql.org/docs/current/plpython.html  see the paragraph between TIP and NOTE
[06:28:26] <pagnol> ah ok, didn't know that
[06:28:58] <peerce> and RDS doesn't allow you to have any superuser privs.
[06:32:09] *** Quits: mordant (~mordant@69.174.145.100) (Ping timeout: 256 seconds)
[06:32:32] *** Quits: EvanCarroll (~ecarroll@198-0-91-126-static.hfc.comcastbusiness.net) (Ping timeout: 272 seconds)
[06:38:28] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[06:42:54] *** Quits: v3gajerusalem (~v3ga@2603-6080-5204-3b35-0000-0000-0000-18ad.res6.spectrum.com) (Quit: WeeChat 3.4)
[06:43:38] *** Joins: v3ga (~v3ga@2603-6080-5204-3b35-0000-0000-0000-18ad.res6.spectrum.com)
[06:44:46] *** Joins: JordiGH (~jordi@user/jordigh)
[06:47:33] *** Quits: tozhu (~tozhu@218.89.244.95) (Quit: tozhu)
[06:49:37] *** Quits: JordiGH (~jordi@user/jordigh) (Ping timeout: 240 seconds)
[06:50:26] *** Quits: Xof (~Xof@198-0-193-113-static.hfc.comcastbusiness.net) (Quit: Bye.)
[06:51:00] *** Joins: JordiGH (~jordi@fencepost.gnu.org)
[06:51:00] *** Quits: JordiGH (~jordi@fencepost.gnu.org) (Changing host)
[06:51:00] *** Joins: JordiGH (~jordi@user/jordigh)
[06:55:56] <trafficjam> peerce: could this hardware handle decent traffic? https://instances.vantage.sh/rds/?selected=db.t3.small
[06:55:57] *** Quits: JordiGH (~jordi@user/jordigh) (Ping timeout: 240 seconds)
[06:56:30] *** Joins: tozhu (~tozhu@218.89.244.95)
[07:05:43] <peerce> 'how long is a string' ?    I have zero knowlege of what AWS instances are anymores. not a fan of cloudy databases.     and what is your definition of 'decent traffic' ?    on a 2 lane country road in th emiddle of nowhere, that might be a few cars an hour.    on a busy urban 10 lane interstate, its a lot higher than that.
[07:07:12] *** Quits: tozhu (~tozhu@218.89.244.95) (Quit: tozhu)
[07:07:16] *** Joins: Emet-Selch (~haise01@user/haise01)
[07:08:34] *** Quits: CodeMouse92 (~CodeMouse@user/codemouse92) (Remote host closed the connection)
[07:10:20] *** Joins: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[07:10:20] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[07:10:41] *** Quits: Azem (~haise01@user/haise01) (Ping timeout: 256 seconds)
[07:10:55] *** Joins: JordiGH (~jordi@fencepost.gnu.org)
[07:10:55] *** Quits: JordiGH (~jordi@fencepost.gnu.org) (Changing host)
[07:10:55] *** Joins: JordiGH (~jordi@user/jordigh)
[07:13:48] *** Quits: chadea (~a@pool-96-241-113-90.washdc.fios.verizon.net) (Ping timeout: 240 seconds)
[07:14:36] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[07:14:36] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[07:17:17] *** Quits: JordiGH (~jordi@user/jordigh) (Ping timeout: 240 seconds)
[07:19:07] <trafficjam> peerce: i guess maybe 1000 requests per second?
[07:21:58] <peerce> um, you mean queries or transactions, or http requests of your webserver ?
[07:22:48] <peerce> and if you mean 1000/sec queries/transactions, how complex are they?
[07:25:19] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[07:27:19] *** Joins: pvn (~Adium@85-195-230-32.fiber7.init7.net)
[07:30:02] <trafficjam> peerce: well 1000 queries per second
[07:30:36] <trafficjam> and the queries are of maybe medium complexity? (several joins over different tables, but generally returning only a small number of rows per query)
[07:30:53] <trafficjam> (infinite scroll based, so like 10 or 20 rows per query)
[07:31:23] <trafficjam> maybe on average 3 or 4 joins per query
[07:31:46] <trafficjam> total number of rows per table is at the moment very small (few hundred)
[07:31:55] *** Quits: pvn (~Adium@85-195-230-32.fiber7.init7.net) (Ping timeout: 256 seconds)
[07:32:11] <peerce> and how complex are these queries ?    k.     its as important how many rows they have to look at as is the number returned.
[07:32:55] <trafficjam> like i said, at the moment all tables have no more than a few hundred rows
[07:43:57] *** Quits: trafficjam (~qubes@2001:8004:1500:2c2b:47ac:bc3f:ac64:7600) (Ping timeout: 240 seconds)
[07:46:29] *** Joins: trafficjam (~qubes@2001:8004:2758:10cc:c716:a0b9:4ca0:4867)
[07:46:36] *** Quits: sreve (~quassel@p4ff4449e.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[07:47:08] *** Joins: sreve (~quassel@p4ff44eec.dip0.t-ipconnect.de)
[07:55:40] *** Joins: tozhu (~tozhu@218.89.244.95)
[07:59:20] *** Joins: Guest3209 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp)
[08:02:01] *** Joins: dre (~dre@2001:8003:c932:c301:2079:4593:1556:be9c)
[08:02:37] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8) (Ping timeout: 240 seconds)
[08:03:05] *** Quits: tozhu (~tozhu@218.89.244.95) (Quit: tozhu)
[08:04:22] *** Quits: Guest3209 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 272 seconds)
[08:05:34] *** Joins: JordiGH (~jordi@fencepost.gnu.org)
[08:05:34] *** Quits: JordiGH (~jordi@fencepost.gnu.org) (Changing host)
[08:05:34] *** Joins: JordiGH (~jordi@user/jordigh)
[08:07:18] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[08:12:44] *** Joins: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net)
[08:12:44] *** Quits: hoppity (~hoppity@S0106b4fbe4e5da7b.cg.shawcable.net) (Changing host)
[08:12:44] *** Joins: hoppity (~hoppity@user/hoppity)
[08:21:00] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[08:25:59] *** Joins: zachxxz (~zachary@124.133.18.218)
[08:29:09] *** Quits: zachxz (~zachary@124.133.18.218) (Ping timeout: 256 seconds)
[08:30:36] *** Quits: JordiGH (~jordi@user/jordigh) (Ping timeout: 240 seconds)
[08:34:58] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[08:37:11] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[08:37:41] *** Quits: juan321 (~juan321@181.174.106.62) (Quit: Client closed)
[08:38:57] *** Quits: RangerRick (~quassel@99-69-21-21.lightspeed.rlghnc.sbcglobal.net) (Ping timeout: 240 seconds)
[08:44:54] *** Joins: mordant (~mordant@69.174.145.100)
[08:46:51] *** Joins: zachxz (~zachary@124.133.18.218)
[08:49:01] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.213)
[08:49:47] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.213) (Max SendQ exceeded)
[08:49:58] *** Quits: zachxxz (~zachary@124.133.18.218) (Ping timeout: 272 seconds)
[08:50:17] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.213)
[08:51:01] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.213) (Max SendQ exceeded)
[08:51:30] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.213)
[08:51:53] *** Quits: eroux (~eroux@102-65-81-186.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:52:18] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.213) (Max SendQ exceeded)
[08:52:46] *** Joins: the_lanetly_052 (~the_lanet@185.30.90.117)
[08:53:38] *** Quits: the_lanetly_052 (~the_lanet@185.30.90.117) (Max SendQ exceeded)
[08:54:07] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.213)
[08:55:19] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.213) (Max SendQ exceeded)
[08:55:53] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.213)
[08:57:00] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.213) (Max SendQ exceeded)
[08:57:28] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.213)
[08:57:42] *** Quits: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de) (Remote host closed the connection)
[08:58:48] *** Joins: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de)
[08:59:41] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22)
[09:04:05] *** Quits: smp (~smp@user/smp) (Quit: ZNC 1.8.2 - https://znc.in)
[09:04:23] *** Joins: smp (~smp@user/smp)
[09:08:36] *** Quits: Elodin (~elodin@user/elodin) (Ping timeout: 240 seconds)
[09:12:16] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[09:18:31] *** Joins: zachxxz (~zachary@124.133.18.218)
[09:20:00] *** Joins: tozhu (~tozhu@171.92.131.153)
[09:21:24] *** Quits: zachxz (~zachary@124.133.18.218) (Ping timeout: 240 seconds)
[09:22:45] *** Joins: mexen (uid495612@user/mexen)
[09:25:15] *** Quits: concrete-houses (~g@209.6.150.53) (Quit: Lost terminal)
[09:27:49] *** Quits: mordant (~mordant@69.174.145.100) (Ping timeout: 256 seconds)
[09:28:07] *** Quits: tozhu (~tozhu@171.92.131.153) (Quit: tozhu)
[09:36:41] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:40:35] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[09:41:05] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Client Quit)
[09:41:16] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 272 seconds)
[09:41:23] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[09:43:17] *** Joins: _xor (~xor@dsl-50-5-233-169.fuse.net)
[09:43:46] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Quit: ping timeout... you sure??)
[09:44:08] *** Quits: bird (~bird@136-25-143-83.cab.webpass.net) (Quit: bird)
[09:44:55] *** Joins: mordant (~mordant@69.174.145.100)
[09:45:19] *** Joins: bird (~bird@136-25-143-83.cab.webpass.net)
[09:48:09] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[09:52:43] *** Joins: eroux (~eroux@102-65-81-186.ftth.web.africa)
[09:53:56] *** Joins: Atque (~Atque@user/atque)
[09:59:48] *** Joins: shiranaihito (~textual@219-84-255-97-adsl-tan.dynamic.so-net.net.tw)
[10:04:33] *** Joins: ekathva (~ekathva@n3k05vuqs1ol74l3j-1.v6.elisa-mobile.fi)
[10:07:07] *** Joins: PyHedgehog (uid146498@id-146498.ilkley.irccloud.com)
[10:10:42] *** Quits: shiranaihito (~textual@219-84-255-97-adsl-tan.dynamic.so-net.net.tw) (Read error: Connection reset by peer)
[10:12:41] *** Joins: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr)
[10:13:28] *** Joins: Reiner_Unsinn_ (~quassel@p579d7a94.dip0.t-ipconnect.de)
[10:14:16] *** Joins: rodo (~rodo@pop.92-184-118-128.mobile.abo.orange.fr)
[10:15:22] *** Joins: shiranaihito (~textual@219.85.86.94)
[10:17:04] *** Joins: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru)
[10:18:10] *** Joins: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz)
[10:18:13] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[10:19:20] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[10:19:20] *** Quits: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru) (Read error: Connection reset by peer)
[10:19:48] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[10:19:52] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[10:19:54] *** Joins: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru)
[10:20:36] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[10:21:31] *** Joins: mncheck (~mncheck@193.224.205.254)
[10:21:48] *** Quits: dre (~dre@2001:8003:c932:c301:2079:4593:1556:be9c) (Ping timeout: 240 seconds)
[10:23:04] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[10:24:11] *** Joins: michalz (~michalz@185.246.204.61)
[10:24:24] <_xor> Gah, I always forget which environment variable to set the connection string to.
[10:25:19] *** Quits: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net) (Quit: WeeChat 2.8)
[10:25:36] *** Quits: mahlon (~mahlon@martini.nu) (Ping timeout: 272 seconds)
[10:26:46] *** Quits: randir (~randir@2.92.196.208) (Remote host closed the connection)
[10:27:00] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[10:27:19] *** Joins: randir (~randir@2.92.196.208)
[10:28:39] *** Joins: mahlon (~mahlon@martini.nu)
[10:29:14] *** Joins: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net)
[10:31:56] *** Quits: randir (~randir@2.92.196.208) (Ping timeout: 272 seconds)
[10:34:22] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[10:34:36] *** Quits: veesh (~veesh@89.237.103.109) (Ping timeout: 240 seconds)
[10:37:22] <peerce> _xor; i don't think there is an envirnoment variable for the 'connection string', just the elements of it, like PGHOST, PHPORT, PGDATABASE, etcetc.
[10:37:32] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[10:39:15] *** Quits: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru) (Remote host closed the connection)
[10:39:37] *** Joins: randir (~randir@93.159.239.42)
[10:40:11] *** Quits: johnjacob (~johnjacob@131.106.25.151) (Quit: Client closed)
[10:41:05] *** Joins: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru)
[10:42:35] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[10:42:46] *** Joins: darutoko (~darutoko@92.125.61.64)
[10:45:04] <selckin> !paste
[10:45:54] *** Quits: JanC (~janc@user/janc) (Remote host closed the connection)
[10:46:08] *** Joins: JanC (~janc@user/janc)
[10:46:55] *** Joins: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de)
[10:47:20] *** Joins: off^ (~off@12.163.216.98)
[10:47:39] *** Joins: veesh (~veesh@5.28.154.20)
[10:47:46] *** Quits: shiranaihito (~textual@219.85.86.94) (Ping timeout: 272 seconds)
[10:48:57] <Zr40> ??paste
[10:48:57] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[10:48:57] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[10:50:34] *** Joins: shiranaihito (~textual@219.85.156.113)
[10:52:59] *** Quits: shiranaihito (~textual@219.85.156.113) (Client Quit)
[10:56:13] <selckin> anyone see any obvious ways to maybe improve this https://explain.depesz.com/s/aNya#html
[10:56:50] *** Joins: xocolatl (~xocolatl@193.32.126.213)
[10:57:23] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[10:58:09] *** Joins: Junxter (~Junxter@222.95.164.193)
[10:58:20] <selckin> guess i need an index on status + updated
[10:59:52] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[11:00:24] *** Joins: manti7 (~manti7@176.10.104.94)
[11:01:00] <selckin> hmm on a smaller db, it uses a profile.updated index scan with status filter
[11:02:58] *** Quits: _mikey (~mikey@user/mikey/x-4335048) (Quit: WeeChat 3.4)
[11:05:26] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[11:06:46] *** Quits: xocolatl (~xocolatl@193.32.126.213) (Ping timeout: 272 seconds)
[11:07:30] *** Joins: dre (~dre@2001:8003:c932:c301:f5ca:6748:5b2:4153)
[11:09:31] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[11:10:13] *** Joins: ponsfrilus1 (~Thunderbi@vpn-253-167.epfl.ch)
[11:10:34] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 272 seconds)
[11:10:35] *** ponsfrilus1 is now known as ponsfrilus
[11:12:36] *** Joins: xocolatl (~xocolatl@193.32.126.225)
[11:12:48] <_xor> peerce: You are correct, I was mistaken in thinking so :/
[11:13:06] <selckin> status, update index down to 50ms, and (update, status) 300ms, kinda expecting the oposite, since filter on update removes more records
[11:22:28] *** Joins: zachxz (~zachary@124.133.18.218)
[11:23:08] *** Joins: shiranaihito (~textual@1-164-242-177.dynamic-ip.hinet.net)
[11:25:24] *** Quits: zachxxz (~zachary@124.133.18.218) (Ping timeout: 240 seconds)
[11:25:51] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[11:25:52] *** Joins: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[11:25:56] *** Joins: palasso (~palasso@user/palasso)
[11:29:34] *** Quits: merzo (~Thunderbi@95.132.54.193) (Ping timeout: 272 seconds)
[11:30:12] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[11:30:12] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[11:33:53] *** Quits: dre (~dre@2001:8003:c932:c301:f5ca:6748:5b2:4153) (Quit: Leaving)
[11:37:17] *** Joins: rendar (~rendar@user/rendar)
[11:38:13] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[11:41:24] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Ping timeout: 240 seconds)
[11:46:40] *** Quits: immibis_ (~hexchat@dynamic-089-204-139-245.89.204.139.pool.telefonica.de) (Ping timeout: 272 seconds)
[11:47:41] *** Joins: _xxoxx (~Junxter@222.95.164.193)
[11:47:42] *** Quits: _xxoxx (~Junxter@222.95.164.193) (Remote host closed the connection)
[11:50:44] *** Joins: shka (~herr@109.231.3.55)
[11:50:53] *** Quits: Junxter (~Junxter@222.95.164.193) (Ping timeout: 256 seconds)
[11:54:57] <selckin> hmm think it was just a case of analyse/stats being out of date
[11:57:11] *** Joins: psoo (~psoo@dslb-090-186-134-090.090.186.pools.vodafone-ip.de)
[12:04:42] *** Joins: Ergo^ (~ergo@91.238.59.144)
[12:12:41] *** Joins: Auron (Auron956@user/auron)
[12:13:51] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.213) (Ping timeout: 256 seconds)
[12:14:02] *** Joins: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de)
[12:16:58] *** Joins: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com)
[12:18:57] *** Quits: jim (~jim@about/linux/staff/jim) (Ping timeout: 256 seconds)
[12:19:31] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Quit: Leaving)
[12:19:48] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[12:20:01] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[12:20:31] *** Joins: jim (~jim@about/linux/staff/jim)
[12:21:30] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[12:22:46] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[12:25:34] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[12:28:08] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[12:30:08] *** Quits: AndreasKarlsson[ (~kandreasm@2001:470:69fc:105::707) (Quit: You have been kicked for being idle)
[12:30:08] *** Joins: Guddu (~Guddu@117.247.153.18)
[12:32:15] *** Quits: shiranaihito (~textual@1-164-242-177.dynamic-ip.hinet.net) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[12:32:25] <Guddu> Is 4 GB of RAM enough for hosting a postgres instance. Mild load. 1 connection per 30 seconds or so. Each connection lasts for milliseconds only.
[12:33:07] <peerce> 1 connection, or 1 query ?
[12:34:01] <Guddu> 1 client connection. 4 to 5 queries that will take milliseconds combined
[12:34:16] <peerce> how big is the database?  are you going to run it under a very stripped OS ?
[12:34:22] *** Joins: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net)
[12:35:00] <Guddu> peerce, I am thinking Centos 9. Database size will be small. Don't expect to exceed 500 Mb. I will have regular purging in place.
[12:35:26] <peerce> centos9 is pretty bloated and also not really a stable platform to be running a server on.
[12:36:19] <koollman> Guddu: I would consider that it is sufficient, yes
[12:36:20] <Guddu> peerce, I can do Ubuntu?
[12:36:22] <peerce> ideally, you run the database server as a headless system, no GUI at all, shell management
[12:36:40] <peerce> ubuntu lts or debian are good choices, doing minimal installs and just adding the packages you need
[12:36:54] <Guddu> peerce, I will use nginx also on the same server for my frontend app.
[12:37:16] <peerce> then even more so waht i said about minimal install, and installing just what you need
[12:37:25] *** Joins: mrwick (~mrwick@user/mrwick)
[12:37:33] <Myon> 4GB is too much ;)
[12:37:37] <Guddu> :-)
[12:37:48] <peerce> we used to run web servers with database servers on 1-2gb servers.
[12:37:49] <koollman> well, yeah. but 'too much' is sufficient ;)
[12:38:02] <Guddu> Linode dedicated CPU 4Gb will cost me 30 USD monthly.
[12:38:38] *** Joins: ivii (~ivan@user/ivii)
[12:38:50] *** Joins: merzo (~Thunderbi@185.39.197.205)
[12:38:59] *** Joins: shiranaihito (~textual@1-164-242-177.dynamic-ip.hinet.net)
[12:40:09] <mrwick> would there ever be a reason to use select exists(select 1 from information_schema.tables where table_name = 'my_table') as a test before alter table add column
[12:40:13] <kjetilho> Guddu: I'd say you never need more than 1G for the software itself and then all of the database in RAM.  so with a 500 MB database, even 2GB should work fine.
[12:40:20] <mrwick> instead of using `if exists´
[12:40:52] <mrwick> ( or better `if not exists´ )
[12:40:55] <Myon> mrwick: maybe if you wanted to avoid an error if the table is missing
[12:41:05] *** Joins: immibis (~hexchat@dynamic-089-204-139-245.89.204.139.pool.telefonica.de)
[12:41:48] <mrwick> ah so a library may throw an error even if you use `if not exists´
[12:42:33] <mrwick> ugh, sorry I mixed up my question, but it applies to either `create table´ or `alter table add column´
[12:42:45] <Guddu> Thanks. I have the option of "dedicated CPU" with 4 GB RAM at 30 USD monthly or "Shared CPU" 8 GB RAM at 40 USD monthly. or or "Shared CPU" 4 GB RAM at only 20 USD monthly
[12:47:23] <buu> Those all sound very expensive
[12:48:32] <buu> Is that linode?
[12:50:02] <mrwick> was linode just bought by someone?
[12:50:10] <selckin> akami
[12:50:12] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[12:50:37] <selckin> Guddu: basically sounds like even a potato should be fine with your requirements, so just get the cheapest
[12:50:48] <selckin> if thats the concern
[12:51:08] <buu> 4 vCore 8 GB 160 GB SSD NVMe 1 Gbps unmetered / $23
[12:51:23] <buu> https://us.ovhcloud.com/vps/compare/
[12:51:54] *** Quits: pagnol (~user@014198154145.ctinets.com) (Ping timeout: 272 seconds)
[12:53:10] *** Quits: Guddu (~Guddu@117.247.153.18) (Ping timeout: 272 seconds)
[12:53:12] <peerce> as long as your database stays in the sub 1gb range, that server would probably handle 100s or even 1000 simple transactions/second
[12:57:37] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[12:57:46] *** Quits: TMM_ (hp@amanda.tmm.cx) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[12:57:53] *** Joins: TMM_ (hp@amanda.tmm.cx)
[13:01:59] *** Joins: zachxxz (~zachary@124.133.18.218)
[13:05:00] *** Quits: zachxz (~zachary@124.133.18.218) (Ping timeout: 240 seconds)
[13:10:15] *** Joins: `2jt (~jtomas@130.red-88-22-46.staticip.rima-tde.net)
[13:12:05] *** Joins: mattil (~mattil@87-92-28-123.bb.dnainternet.fi)
[13:12:31] *** Quits: mattil (~mattil@87-92-28-123.bb.dnainternet.fi) (Read error: Connection reset by peer)
[13:12:42] *** Joins: mattil (~mattil@87-92-28-123.bb.dnainternet.fi)
[13:16:02] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[13:17:24] *** Quits: shiranaihito (~textual@1-164-242-177.dynamic-ip.hinet.net) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[13:17:30] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[13:19:21] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[13:19:24] *** Quits: xocolatl (~xocolatl@193.32.126.225) (Ping timeout: 240 seconds)
[13:19:29] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[13:19:46] *** Quits: zachxxz (~zachary@124.133.18.218) (Ping timeout: 272 seconds)
[13:21:00] *** Quits: mattil (~mattil@87-92-28-123.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[13:21:34] *** Joins: the4thdoctor (~thedoctor@host201-61-234-109.static.ehiweb.it)
[13:21:48] *** Quits: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net) (Ping timeout: 240 seconds)
[13:22:58] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: No Ping reply in 180 seconds.)
[13:24:22] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[13:25:07] *** Joins: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de)
[13:30:46] *** Quits: marcel (~marcel@user/marcel) (Quit: The Lounge - https://thelounge.chat)
[13:31:03] *** Joins: marcel (~marcel@user/marcel)
[13:33:56] *** Quits: JamesHarrison (~jharrison@83.151.206.91) (Quit: WeeChat 3.3)
[13:36:59] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Remote host closed the connection)
[13:38:01] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[13:38:34] *** Joins: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5)
[13:39:13] <aLeSD[m]> hi all
[13:40:08] <aLeSD[m]> I have several microservices using one database. Is it a good policy to have a role for each microservice ?
[13:40:49] *** Joins: furrymcgee (~devuan@cgn-89-1-211-93.nc.de)
[13:41:51] <peerce> 'microservice' doesn't really have a hard definition, its more a fuzzy concept with multiple implementations.      we had different applications sharing a database, and each app had its own role/user (and also schema... they all shared public)
[13:43:25] *** Quits: ptman[m] (~ptmanm]@2001:470:69fc:105::34) (Quit: Bridge terminating on SIGTERM)
[13:43:25] *** Quits: Tenchi[m] (~tenchim]@2001:470:69fc:105::f42) (Quit: Bridge terminating on SIGTERM)
[13:43:25] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Bridge terminating on SIGTERM)
[13:43:25] *** Quits: lli[m] (~llim]@2001:470:69fc:105::1:3259) (Quit: Bridge terminating on SIGTERM)
[13:43:25] *** Quits: Zaab1t (~carlbordu@2001:470:69fc:105::78e) (Quit: Bridge terminating on SIGTERM)
[13:43:25] *** Quits: Honiix[m] (~honiixmat@2001:470:69fc:105::c0c4) (Quit: Bridge terminating on SIGTERM)
[13:43:25] *** Quits: graingert[m] (~graingert@2001:470:69fc:105::653) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: zilti[m] (~ziltimatr@2001:470:69fc:105::16d0) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: spokojni[m] (~spokojnio@2001:470:69fc:105::1:3fb2) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: intelfx (~intelfx@2001:470:69fc:105::942) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: ish[m] (~jasonishm@2001:470:69fc:105::2b4) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: freshgum[m] (~freshgum_@2001:470:69fc:105::c1a5) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: arcatech[m] (~arcatech@user/arcatech) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: the_drow (~thedrowma@2001:470:69fc:105::c984) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: ehuelsmann[m] (~ehuelsman@2001:470:69fc:105::169a) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: graham (~gchristen@user/gchristensen) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: diegov (~diegov@2001:470:69fc:105::103f) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: ktosiek (~ktosiek@2001:470:69fc:105::87ab) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: wildsebastian (~wildsebas@2001:470:69fc:105::1:14b1) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: Jalada (~jalada@2001:470:69fc:105::1:1b69) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: reactormonk[m] (~reactormo@2001:470:69fc:105::3c24) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: ilmari_ (~ilmari@user/ilmari) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: heftig (~heftig@archlinux/developer/heftig) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: moe[m]1 (~moebusylo@2001:470:69fc:105::1:6679) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: thel00p[m] (~thel00pma@2001:470:69fc:105::1:4c05) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: ademan[m] (~ademanmat@2001:470:69fc:105::1:16db) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: uberardy[m] (~uberardye@2001:470:69fc:105::1:7094) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: mugli[m] (~muglimatr@2001:470:69fc:105::1:3bde) (Quit: Bridge terminating on SIGTERM)
[13:43:26] *** Quits: alex[m]123 (~alexchete@2001:470:69fc:105::1:1001) (Quit: Bridge terminating on SIGTERM)
[13:43:28] *** Quits: Hansuke[m] (~hansukema@2001:470:69fc:105::1:86bb) (Quit: Bridge terminating on SIGTERM)
[13:43:28] *** Quits: Travis[m] (~travis-st@2001:470:69fc:105::1:3772) (Quit: Bridge terminating on SIGTERM)
[13:43:29] *** Quits: Ollie[m] (~ollieocha@2001:470:69fc:105::41a5) (Quit: Bridge terminating on SIGTERM)
[13:43:29] *** Quits: robe2 (~robeosgeo@2001:470:69fc:105::318e) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: hsiktas[m] (~hsiktasm]@2001:470:69fc:105::30d4) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: bmbouter[m] (~bmbouter@2001:470:69fc:105::162f) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: sfkeller[m] (~sfkellerm@2001:470:69fc:105::31a2) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: psydroid (~psydroid@user/psydroid) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: NoGare[m] (~nogaremat@2001:470:69fc:105::35f2) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: bsenst (~bastianfr@2001:470:69fc:105::1:433b) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: jomat (~jomat@2001:470:69fc:105::21) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: aLeSD[m] (~alambicco@2001:470:69fc:105::1:452a) (Quit: Bridge terminating on SIGTERM)
[13:43:30] *** Quits: moritz[m]1 (~moritzgeg@2001:470:69fc:105::1:b65b) (Quit: Bridge terminating on SIGTERM)
[13:43:32] *** Quits: aei-tech[m] (~aei-techm@2001:470:69fc:105::1:c060) (Quit: Bridge terminating on SIGTERM)
[13:45:15] *** Joins: aLeSD[m] (~alambicco@2001:470:69fc:105::1:452a)
[13:45:15] <aLeSD[m]> peerce: thanks
[13:46:48] <aLeSD[m]> is there any tool that could analyze the database schema and found flows ?
[13:47:02] <aLeSD[m]> s/found/find/, s/flows/errors/
[13:48:10] *** Joins: Zaab1t (~carlbordu@2001:470:69fc:105::78e)
[13:49:20] *** Joins: firewyre (~firewyre@pool-71-184-153-62.bstnma.fios.verizon.net)
[13:49:26] *** Joins: mattil (~mattil@87-92-28-123.bb.dnainternet.fi)
[13:50:45] *** Quits: firewyre- (~firewyre@pool-71-184-153-62.bstnma.fios.verizon.net) (Ping timeout: 256 seconds)
[13:52:39] <wez> aLeSD[m]: running the schema will pick up errors :)
[13:52:56] *** Joins: the_drow (~thedrowma@2001:470:69fc:105::c984)
[13:52:56] *** Joins: ptman[m] (~ptmanm]@2001:470:69fc:105::34)
[13:52:56] *** Joins: Tenchi[m] (~tenchim]@2001:470:69fc:105::f42)
[13:52:56] *** Joins: diegov (~diegov@2001:470:69fc:105::103f)
[13:52:56] *** Joins: zilti[m] (~ziltimatr@2001:470:69fc:105::16d0)
[13:52:56] *** Joins: NoGare[m] (~nogaremat@2001:470:69fc:105::35f2)
[13:53:17] *** Joins: reactormonk[m] (~reactormo@2001:470:69fc:105::3c24)
[13:53:20] *** Joins: intelfx (~intelfx@2001:470:69fc:105::942)
[13:53:23] *** Joins: hsiktas[m] (~hsiktasm]@2001:470:69fc:105::30d4)
[13:53:46] *** Joins: uberardy[m] (~uberardye@2001:470:69fc:105::1:7094)
[13:53:56] *** Joins: ish[m] (~jasonishm@2001:470:69fc:105::2b4)
[13:54:02] *** Joins: robe2 (~robeosgeo@2001:470:69fc:105::318e)
[13:54:23] *** Joins: bmbouter[m] (~bmbouter@2001:470:69fc:105::162f)
[13:55:00] *** Quits: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au) (Ping timeout: 240 seconds)
[13:55:01] *** Joins: ktosiek (~ktosiek@2001:470:69fc:105::87ab)
[13:55:10] *** Joins: Jalada (~jalada@2001:470:69fc:105::1:1b69)
[13:55:19] *** Joins: psydroid (~psydroid@user/psydroid)
[13:55:40] *** Joins: bsenst (~bastianfr@2001:470:69fc:105::1:433b)
[13:55:40] *** Joins: heftig (~heftig@archlinux/developer/heftig)
[13:55:41] *** Joins: ehuelsmann[m] (~ehuelsman@2001:470:69fc:105::169a)
[13:55:41] *** Joins: lli[m] (~llim]@2001:470:69fc:105::1:3259)
[13:55:56] *** Joins: sfkeller[m] (~sfkellerm@2001:470:69fc:105::31a2)
[13:55:56] *** Joins: Honiix[m] (~honiixmat@2001:470:69fc:105::c0c4)
[13:56:12] *** Joins: alex[m]12345 (~alexchete@2001:470:69fc:105::1:1001)
[13:56:12] *** Joins: mugli[m] (~muglimatr@2001:470:69fc:105::1:3bde)
[13:56:12] *** Joins: graingert[m] (~graingert@2001:470:69fc:105::653)
[13:56:12] *** Joins: moritz[m] (~moritzgeg@2001:470:69fc:105::1:b65b)
[13:56:12] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[13:56:12] *** Joins: wildsebastian (~wildsebas@2001:470:69fc:105::1:14b1)
[13:56:12] *** Joins: spokojni[m] (~spokojnio@2001:470:69fc:105::1:3fb2)
[13:56:24] *** Joins: Travis[m] (~travis-st@2001:470:69fc:105::1:3772)
[13:56:24] *** Joins: jomat (~jomat@2001:470:69fc:105::21)
[13:56:24] *** Joins: freshgum[m] (~freshgum_@2001:470:69fc:105::c1a5)
[13:56:24] *** Joins: graham (~gchristen@user/gchristensen)
[13:56:36] *** Joins: Ollie[m] (~ollieocha@2001:470:69fc:105::41a5)
[13:56:50] *** Joins: M[m]12 (~moebusylo@2001:470:69fc:105::1:6679)
[13:56:50] *** Joins: Hansuke[m] (~hansukema@2001:470:69fc:105::1:86bb)
[13:57:03] *** Joins: thel00p[m] (~thel00pma@2001:470:69fc:105::1:4c05)
[13:57:03] *** Joins: ademan[m] (~ademanmat@2001:470:69fc:105::1:16db)
[13:57:03] *** Joins: ilmari_ (~ilmari@user/ilmari)
[13:57:03] *** Joins: arcatech[m] (~arcatech@user/arcatech)
[13:57:03] *** Joins: aei-tech[m] (~aei-techm@2001:470:69fc:105::1:c060)
[13:59:33] *** Quits: the4thdoctor (~thedoctor@host201-61-234-109.static.ehiweb.it) (Quit: Leaving)
[14:00:21] *** Joins: the4thdoctor (~the4thdoc@host201-61-234-109.static.ehiweb.it)
[14:02:17] *** Quits: valdez (~coinbird@62.159.119.178) (Ping timeout: 240 seconds)
[14:06:37] *** Quits: fcr (~fran@r167-60-16-70.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[14:08:00] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[14:13:39] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:252f:1c34:e1bf:7de2)
[14:14:04] *** Joins: fcr (~fran@r186-48-120-226.dialup.adsl.anteldata.net.uy)
[14:17:02] *** Joins: Junxter (~Junxter@222.95.164.193)
[14:18:41] *** Joins: shiranaihito (~textual@220-133-46-51.hinet-ip.hinet.net)
[14:20:54] *** Joins: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[14:21:58] *** Quits: mattil (~mattil@87-92-28-123.bb.dnainternet.fi) (Ping timeout: 260 seconds)
[14:23:44] *** Quits: shiranaihito (~textual@220-133-46-51.hinet-ip.hinet.net) (Ping timeout: 272 seconds)
[14:26:07] *** Joins: olebra (olebra@cassarossa.samfundet.no)
[14:27:03] *** Joins: coinbird (~coinbird@62.159.119.178)
[14:35:00] *** Quits: off^ (~off@12.163.216.98) (Ping timeout: 240 seconds)
[14:37:30] *** Joins: off^ (~off@12.163.216.98)
[14:40:16] <depesz> aLeSD[m]: https://gitlab.com/depesz/pgWikiDont/
[14:40:31] *** wez is now known as notwez
[14:40:36] *** notwez is now known as we
[14:40:38] *** we is now known as wez
[14:45:06] *** rwb is now known as rb
[14:50:23] *** Joins: JamesHarrison (~jharrison@83.151.206.91)
[14:52:02] <phx> how can a generator expression on a generated column in a child table be overridden? the parent and the child tables are to use a different expression to generate that particular column's value, and i'm getting the error ERROR:  child column "values" specifies generation expression/HINT:  Omit the generation expression in the definition of the child table column to inherit the generation expression from
[14:52:08] <phx> the parent table.
[14:52:12] <phx> but i do want to use a different generator expression in the child
[14:55:55] <peerce> um, that sounds like you're going way deep into wtf territory.
[14:56:16] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[14:56:29] <Myon> the usual answer is "don't use table inheritance"
[14:56:43] <peerce> the only 'safe' usage of parent and child table inheritance is partitioning, and i don't think this question would arise doing that
[14:56:56] <phx> no partitioning here
[14:57:17] <phx> in a structural way, inheritance is convenient. with some irritating limitations of course
[14:57:28] <peerce> trying to use postgresql's table inheritance for other things is dangerous at best.
[14:57:43] <phx> but it would be logical if the child table could simply redefine the parent's generator expression on the column
[14:57:51] <phx> and why's that?
[14:58:03] <peerce> you just walked right into a reason why
[14:58:10] <phx> and from being unable to FK on the common PK, i haven't found any other drawbacks
[14:58:19] <peerce> things don't always behave as you expect
[14:58:58] <phx> there's a beauty to living dangerously? :)
[14:59:53] <depesz> well, people who are here for MANY years are telling you to avoid doing something. yet you are bent on doing things "your way". great. go for it. just don't expect that others will then bend over to help you with whatever hole you'll end up in.
[14:59:54] <peerce> i lost my desire for that sort of thing about 30 years ago in my 45 year career
[15:00:36] <depesz> inheritance in pg was mostly "nice idea, but never use it". and then we got proper partitioning, and the "nice idea," part was dropped.
[15:00:49] <peerce> being 'clever' bites your ass more often than not.
[15:00:55] <phx> i'm just a bit surprised, i'm using inheritence occasionally for like 15 years in postgresql, and apart from minor characteristics, i never really had any serious issues with it
[15:01:23] <peerce> well, apparently you hit a new issue.
[15:01:49] <peerce> and it sounds too tankgled for me to even want to suss out what youre' doing and the subtleys of how you got caught.
[15:02:04] <phx> a simple trigger can solve it, so it's not really any serious issue
[15:02:16] <peerce> no triggers are simple.
[15:02:34] <peerce> IMHO, using triggers enables programming by side effect, which is in my book another antipattern
[15:03:10] <phx> before going for inheritance, i've been thinking maybe not using it altogether, but that would have created another load of issues, requiring a bloatloadful of triggers to keep data coherent
[15:03:14] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[15:03:35] <phx> so i rather went for inheritance then adding gazillions of complicated triggers
[15:03:56] *** Joins: Atque (~Atque@user/atque)
[15:04:20] <peerce> huh, yeahk,s ounmds like you've seriously misused the relational data model.
[15:07:02] <peerce> generated columns are already a hack on the relational model, other than generated by sequence  'serial' ID style.
[15:08:20] <phx> true, i could have used a single table, with a generic jsonb field holding the data without any kind of constraints, or any kind of fixed structure to it, but i think that would have been worse
[15:08:23] <peerce> they smell of denormlized data
[15:09:12] <phx> it's tokenized to the last bit and normalized, thats why i've ended up with a bigger structure. instead of dumping everyhing into a single generic column, without any normalization
[15:09:12] <peerce> thats the 'one big table' fallacy, which is an extended version of EAV
[15:09:14] <peerce> ??EAV
[15:09:14] <pg_docbot> http://decipherinfosys.wordpress.com/2007/01/29/name-value-pair-design/ :: http://en.wikipedia.org/wiki/Inner-Platform_Effect
[15:09:15] <pg_docbot> http://joecelkothesqlapprentice.blogspot.com/2007/06/db-table-design-question.html :: http://tonyandrews.blogspot.com/2004/10/otlt-and-eav-two-big-design-mistakes.html
[15:09:15] <pg_docbot> https://wiki.postgresql.org/images/3/37/Eav-pgconfnyc2014.pdf
[15:10:12] *** Quits: rodo (~rodo@pop.92-184-118-128.mobile.abo.orange.fr) (Read error: Connection reset by peer)
[15:11:07] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[15:13:44] *** Quits: the4thdoctor (~the4thdoc@host201-61-234-109.static.ehiweb.it) (Quit: Leaving)
[15:15:09] *** Joins: mattil (~mattil@87-92-28-123.bb.dnainternet.fi)
[15:16:50] <sobel> the last time i suffered an inherited table, i had to immediately learn UPDATE ONLY and was upset that basic SQL could get retconned by this inheritance stuff
[15:17:28] <sobel> definitely glad for modern postgresql
[15:20:40] *** Joins: greenriot (~greenriot@user/gr33nr10t)
[15:20:45] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Ping timeout: 272 seconds)
[15:22:36] *** Quits: mattil (~mattil@87-92-28-123.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[15:22:44] *** Joins: teddyc (theodorc@cassarossa.samfundet.no)
[15:25:38] <depesz> peerce: for what it's worth, i do like triggers.
[15:25:49] <depesz> allow me to keep tight control over data, in the db,.
[15:26:49] <sobel> the only reason i like triggers as much as i do is they're entirely reasonable. my main objection to programming by side-effect is loss of reasonability.
[15:26:58] *** Joins: n0fun_ (~jack@mue-88-130-48-214.dsl.tropolys.de)
[15:27:00] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[15:27:33] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[15:27:34] *** Joins: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[15:27:40] <sobel> ...provided the behavior you code into your trigger is reasonable. the critical bit being triggers aren't inherently hard to reason about.
[15:27:41] *** Quits: tolecnal (tolecnal@login.xiro.net) (Quit: server maintenance)
[15:27:41] <Myon> triggers are fine until you forget they are there :)
[15:28:07] <sobel> you can write a trigger to check for that condition, too :P
[15:28:27] <sobel> definitely a DBA suffers a risk from triggers regular users don't
[15:28:48] *** Joins: zlinux_ (~zlinux@149.109.12.63)
[15:28:52] <Myon> create temp table foo (...) on forget drop;
[15:29:26] <sobel> i'm still working on the exactness of this, but it seems like relations are pretty good but not perfect for implementing strong RI, so we end up having to "break" the model to have reliable data
[15:30:12] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 240 seconds)
[15:32:08] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[15:32:08] *** Quits: zlinux (~zlinux@149.109.12.63) (Ping timeout: 272 seconds)
[15:32:25] *** Joins: nyov (~nyov@user/nyov)
[15:32:46] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[15:35:35] *** Quits: ponsfrilus (~Thunderbi@vpn-253-167.epfl.ch) (Remote host closed the connection)
[15:37:04] *** Joins: tolecnal (tolecnal@login.xiro.net)
[15:41:01] *** Joins: zlinux[] (~zlinux@142.247.8.13)
[15:43:48] *** Quits: zlinux_ (~zlinux@149.109.12.63) (Ping timeout: 240 seconds)
[15:50:30] *** Quits: zlinux[] (~zlinux@142.247.8.13) (Ping timeout: 272 seconds)
[15:52:15] *** Quits: Komzzpa (~kom@2a02:220f:2000:2c00:8079:4cec:8bf1:2a0e) (Ping timeout: 252 seconds)
[15:57:23] *** Joins: Klinda (~superleag@user/klinda)
[16:04:03] *** Quits: eroux (~eroux@102-65-81-186.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:06:28] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[16:06:38] *** Quits: PyHedgehog (uid146498@id-146498.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[16:13:14] *** Quits: breinbaas (~aardvark@45.83.234.25) (Remote host closed the connection)
[16:13:16] *** Joins: rodo (~rodo@pop.92-184-118-128.mobile.abo.orange.fr)
[16:19:05] *** Quits: Helikoptere (~Helikopte@infracloud.lcnaud.fr) (Quit: WeeChat 2.8)
[16:19:56] *** Joins: epony (epony@user/epony)
[16:22:13] *** Joins: chadea (~a@pool-96-241-113-90.washdc.fios.verizon.net)
[16:26:23] *** Joins: zlinux[] (~zlinux@142.247.8.13)
[16:29:41] *** Quits: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru) (Remote host closed the connection)
[16:31:51] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[16:32:16] *** Joins: uncleyear (~ian@pppoe.178-66-157-18.dynamic.avangarddsl.ru)
[16:33:23] *** Parts: trilobite (~Malka@ns300725.ip-91-121-65.eu) (The Lounge - https://thelounge.chat)
[16:34:21] *** Joins: rufito (~phil@186-79-29-179.baf.movistar.cl)
[16:35:37] *** Quits: zlinux[] (~zlinux@142.247.8.13) (Ping timeout: 240 seconds)
[16:35:38] *** Joins: eroux (~eroux@102-65-81-186.ftth.web.africa)
[16:36:12] *** Quits: n0fun_ (~jack@mue-88-130-48-214.dsl.tropolys.de) (Ping timeout: 240 seconds)
[16:39:37] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Ping timeout: 256 seconds)
[16:39:40] *** Joins: PyHedgehog (uid146498@id-146498.ilkley.irccloud.com)
[16:44:29] *** Quits: erisco (~erisco@d24-57-249-233.home.cgocable.net) (Ping timeout: 256 seconds)
[16:45:39] *** Joins: erisco (~erisco@d24-57-249-233.home.cgocable.net)
[16:49:35] *** Joins: JordiGH (~jordi@fencepost.gnu.org)
[16:49:35] *** Quits: JordiGH (~jordi@fencepost.gnu.org) (Changing host)
[16:49:35] *** Joins: JordiGH (~jordi@user/jordigh)
[16:51:24] *** Joins: mizi (~mizi@user/mizi)
[16:51:40] *** Joins: zeden (~zeden@user/zeden)
[16:57:19] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[16:59:48] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[17:01:45] *** Joins: Helikoptere (~Helikopte@infracloud.lcnaud.fr)
[17:02:01] *** Joins: k8yun (~k8yun@user/k8yun)
[17:04:34] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[17:06:35] *** Joins: sheb (~sheb@31.223.228.71)
[17:07:18] *** Quits: sheb (~sheb@31.223.228.71) (Remote host closed the connection)
[17:11:03] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[17:11:13] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[17:11:26] *** Quits: Profpatsch (~Profpatsc@static.88-198-193-255.clients.your-server.de) (Ping timeout: 252 seconds)
[17:12:56] *** Joins: zlinux[] (~zlinux@142.247.8.13)
[17:17:51] *** Quits: zlinux[] (~zlinux@142.247.8.13) (Ping timeout: 256 seconds)
[17:21:52] *** Joins: Profpatsch (~Profpatsc@static.88-198-193-255.clients.your-server.de)
[17:23:02] *** Joins: RangerRick (~quassel@99-69-21-21.lightspeed.rlghnc.sbcglobal.net)
[17:27:24] *** Quits: ekathva (~ekathva@n3k05vuqs1ol74l3j-1.v6.elisa-mobile.fi) (Remote host closed the connection)
[17:36:16] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 272 seconds)
[17:36:35] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[17:37:02] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[17:43:24] *** Quits: veesh (~veesh@5.28.154.20) (Ping timeout: 240 seconds)
[17:43:40] *** Joins: veesh (~veesh@89.237.103.133)
[17:50:02] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[17:51:09] *** Joins: Haudegen (~quassel@91.114.49.10)
[17:56:23] *** Joins: vladoski (~vladoski@2001:b07:add:d406:9b5e:84c2:428:6aab)
[18:00:21] *** Quits: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5) (Remote host closed the connection)
[18:03:57] *** Quits: wowi4213 (~wowi42@185.42.117.170) (Quit: Ping timeout (120 seconds))
[18:04:03] *** Joins: fef (~thedawn@user/thedawn)
[18:04:15] *** Joins: wowi4213 (~wowi42@185.42.117.170)
[18:05:40] *** Joins: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5)
[18:05:43] *** Quits: rednul__ (~rednul@098-127-178-044.biz.spectrum.com) (Read error: Connection reset by peer)
[18:06:26] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[18:08:16] *** Joins: jtomas (~jtomas@210.red-88-24-179.staticip.rima-tde.net)
[18:10:36] *** Quits: `2jt (~jtomas@130.red-88-22-46.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[18:12:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[18:13:55] *** Quits: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5) (Read error: Connection reset by peer)
[18:15:12] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[18:15:41] *** Quits: trafficjam (~qubes@2001:8004:2758:10cc:c716:a0b9:4ca0:4867) (Quit: trafficjam)
[18:17:47] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[18:21:11] *** Joins: FreeBDSM (~FreeBDSM@user/freebdsm)
[18:21:39] *** Quits: off^ (~off@12.163.216.98) (Remote host closed the connection)
[18:22:05] *** Joins: off^ (~off@12.163.216.98)
[18:22:06] <FreeBDSM> hi. For some reason I have memory that doesn't seem to be supported by facts, that it is a bad idea to run multiple postgresql instances on a single server. Is it so or is it not?
[18:22:36] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[18:22:55] *** Quits: glik22_ (~glik22@99-36-164-253.lightspeed.snjsca.sbcglobal.net) (Ping timeout: 250 seconds)
[18:23:12] <selckin> everything is a tradeoff
[18:23:29] <FreeBDSM> afaitir it was advised against doing so because of how postgres works with buffers / memory pages and that it basically can't know that someone else might need those resources
[18:23:46] *** Quits: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[18:24:40] <FreeBDSM> or is it all strictly configurable via all those settings like shared_buffers, work_mem, maintenance_work_mem, temp_buffers, wal_buffers, effective_cache_size и т.п.?
[18:25:12] <Myon> yes except that effective_cache_size is only a hint, not something PostgreSQL allocates itself
[18:26:36] <Myon> if you run two instances on the same host, each can use all the cpu cores while the other is idle
[18:28:06] *** Joins: Elodin (~elodin@user/elodin)
[18:28:53] <selckin> which these days can be managed easier with containers/vm etc, so depends on what a single server is too, and if you have enough hardware to handle your needs
[18:30:07] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[18:31:55] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[18:32:28] *** Joins: randir (~randir@93.159.239.42)
[18:35:52] *** Joins: xq (~xq@user/xq)
[18:36:55] *** Quits: randir (~randir@93.159.239.42) (Ping timeout: 256 seconds)
[18:40:21] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[18:41:06] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[18:46:32] *** Joins: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de)
[18:47:43] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[18:50:31] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[18:50:34] *** Joins: randir (~randir@2.92.196.208)
[18:52:52] *** Quits: k8yun (~k8yun@user/k8yun) (Read error: Connection reset by peer)
[18:53:15] *** Joins: k8yun (~k8yun@user/k8yun)
[18:55:51] *** Joins: hoppity (~hoppity@user/hoppity)
[18:59:52] *** Quits: RangerRick (~quassel@99-69-21-21.lightspeed.rlghnc.sbcglobal.net) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[19:00:12] *** Quits: gajus (sid202456@id-202456.tinside.irccloud.com) (Ping timeout: 240 seconds)
[19:00:40] *** Quits: schinckel (uid38120@user/schinckel) (Quit: Connection closed for inactivity)
[19:00:54] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Read error: No route to host)
[19:01:03] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
[19:01:04] *** Quits: u4ia_ (~u4ia@2a10:3781:18fd:1:53d4:805b:c8e3:1629) (Ping timeout: 250 seconds)
[19:01:15] *** Joins: gajus (sid202456@id-202456.tinside.irccloud.com)
[19:01:40] *** Joins: RangerRick (~quassel@99-69-21-21.lightspeed.rlghnc.sbcglobal.net)
[19:01:52] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[19:02:25] *** Joins: u4ia_ (~u4ia@2a10:3781:18fd:1:53d4:805b:c8e3:1629)
[19:03:52] *** Joins: rednul_ (~rednul@098-127-226-233.biz.spectrum.com)
[19:04:49] *** Joins: the_lanetly_052 (~the_lanet@185.30.90.117)
[19:06:06] *** Joins: mattil (~mattil@helsinki.portalify.com)
[19:09:26] *** Quits: rodo (~rodo@pop.92-184-118-128.mobile.abo.orange.fr) (Read error: Connection reset by peer)
[19:09:50] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[19:09:51] *** Joins: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[19:11:33] <Kobaz> is there a way in psql console to do tab-complete for functions in select * from foo.functionanme
[19:11:44] <Kobaz> I can do select * from foo.<tab> and get tables... but not functions
[19:12:00] *** Joins: sebastorama (~sebastora@104.131.87.249)
[19:13:24] *** Joins: tachoknight (~tachoknig@2600:1700:3060:3ee0:6dd8:7cde:f63:8efb)
[19:17:15] *** Quits: jontxu (~jon@user/jontxu) (Quit: I must go, my people need me)
[19:18:41] <Myon> no
[19:18:50] *** Joins: thd (~user@45.76.37.129)
[19:18:56] <Myon> select columnname<tab> doesn't work either
[19:20:20] *** Quits: off^ (~off@12.163.216.98) (Remote host closed the connection)
[19:21:09] *** Joins: rednul__ (~rednul@098-127-178-044.biz.spectrum.com)
[19:23:24] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 240 seconds)
[19:24:11] <Kobaz> you can't select a column, well because it doesn't know the table yet...
[19:24:39] *** Joins: cliluw (~cliluw@47.147.77.43)
[19:24:45] <Kobaz> perhaps if you pretyped select from foo.. and then arrowed back to after 'select' you could in theory tab through columns
[19:26:13] <mrhansen> after upgrading perl what needs to be done if anything with plperl/plperlu ?
[19:26:28] <Kobaz> not much
[19:26:36] <Kobaz> if you use any cpan modules you'll need to upgrade those
[19:26:59] <Kobaz> but perl/perlu itself... nothing really... unless you're affected by perl-specific updates
[19:27:12] <Kobaz> you'll need to go through the release notes of perl itself to see if you're affected by any of it
[19:27:13] <mrhansen> it appears I am ... :(
[19:27:33] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[19:29:35] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[19:31:00] *** Quits: vladoski (~vladoski@2001:b07:add:d406:9b5e:84c2:428:6aab) (Remote host closed the connection)
[19:31:10] <aremaref_> \quit
[19:31:13] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Quit: leaving)
[19:31:24] <aremaref> Oops ^ :)
[19:35:22] <Myon> mrhansen: if you compiled PostgreSQL yourself, you need to re-do that
[19:35:24] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 240 seconds)
[19:36:16] *** Joins: mauz (~mauz@2a01:e0a:994:7ed0:75f8:dfaa:8a2c:e39a)
[19:37:14] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[19:38:43] <mrhansen> it seems i'm missing utf8_heavy.pl
[19:39:08] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Ping timeout: 272 seconds)
[19:40:12] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[19:40:39] *** Quits: eroux (~eroux@102-65-81-186.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:40:51] *** Joins: zlinux[] (~zlinux@142.247.8.13)
[19:41:46] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[19:42:29] *** Joins: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de)
[19:44:57] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[19:48:36] *** Quits: gajus (sid202456@id-202456.tinside.irccloud.com) (Ping timeout: 240 seconds)
[19:49:15] *** Joins: rodo (~rodo@pop.92-184-105-121.mobile.abo.orange.fr)
[19:49:24] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Ping timeout: 240 seconds)
[19:49:58] <mrhansen> so it seems you cant use utf8 in plperl scripts on perl >5.30.... surely theres a fix for that
[19:50:36] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[19:50:44] *** Joins: gajus (sid202456@id-202456.tinside.irccloud.com)
[19:51:31] *** Joins: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de)
[19:52:18] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[19:52:35] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
[19:56:46] *** Parts: thd (~user@45.76.37.129) ()
[19:58:23] *** Quits: the_lanetly_052 (~the_lanet@185.30.90.117) (Remote host closed the connection)
[20:00:53] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[20:01:06] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[20:01:15] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Read error: No route to host)
[20:01:18] *** Quits: gajus (sid202456@id-202456.tinside.irccloud.com) (Read error: Connection reset by peer)
[20:01:42] *** Joins: gajus (sid202456@id-202456.tinside.irccloud.com)
[20:01:47] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
[20:02:09] *** Joins: the_lanetly_052 (~the_lanet@185.30.90.117)
[20:05:06] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 272 seconds)
[20:05:42] *** Quits: phx (~phoemix@marvin.harmless.hu) (Read error: Connection reset by peer)
[20:06:01] *** Joins: rufo (~phil@186-79-17-191.baf.movistar.cl)
[20:07:24] *** Quits: kakashiAL (~kakashi@p5dd8ca04.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[20:08:54] *** Quits: rufito (~phil@186-79-29-179.baf.movistar.cl) (Ping timeout: 272 seconds)
[20:10:15] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[20:11:05] *** Joins: phx (~phoemix@marvin.harmless.hu)
[20:12:06] *** Quits: Haudegen (~quassel@91.114.49.10) (Quit: Bin weg.)
[20:14:39] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[20:14:50] *** Quits: dreinull3 (~dreinull@2a01:4f8:1c1c:8981::1) (Quit: The Lounge - https://thelounge.chat)
[20:15:13] *** Quits: mexen (uid495612@user/mexen) (Quit: Connection closed for inactivity)
[20:15:13] *** Joins: hoppity (~hoppity@66.222.130.38)
[20:15:13] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[20:15:13] *** Joins: hoppity (~hoppity@user/hoppity)
[20:16:34] *** M[m]12 is now known as moe[m]
[20:17:27] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[20:17:44] *** Joins: dreinull30 (~dreinull@2a01:4f8:1c1c:8981::1)
[20:19:59] *** Joins: bmomjian (~bruce@momjian.us)
[20:20:06] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[20:20:23] *** Joins: hoppity (~hoppity@66.222.130.38)
[20:20:23] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[20:20:23] *** Joins: hoppity (~hoppity@user/hoppity)
[20:20:35] <ash_worksi> earlier I was advised "to do raise notice using constraint = CONSTRAINT_NAME"... which was contrasting that to using GET STACKED DIAGNOSTICS (in conjunction, `constraint = __constraint_name`), but I was unable to do that on PG12. Am I missing something or is the latter how you have to do it?
[20:21:48] *** Quits: bmomjian1 (~bruce@momjian.us) (Read error: Connection reset by peer)
[20:23:28] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[20:24:04] *** Joins: n0fun (~jack@mue-88-130-48-214.dsl.tropolys.de)
[20:28:59] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[20:30:13] <foo> Trying to get a unique count based off IPs, can someone help me here? SELECT count(*) FROM (SELECT DISTINCT ip FROM shorturl_log WHERE shorturl_id=91613) sub; -> not sure what I'm doing, unless the list is actually already unique
[20:30:29] *** Joins: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr)
[20:31:19] *** Joins: the_lanetly_052_ (~the_lanet@194.135.166.105)
[20:33:38] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[20:33:55] *** Quits: the_lanetly_052 (~the_lanet@185.30.90.117) (Ping timeout: 256 seconds)
[20:34:59] *** Joins: palasso (~palasso@user/palasso)
[20:40:04] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Read error: No route to host)
[20:40:06] *** Quits: gajus (sid202456@id-202456.tinside.irccloud.com) (Read error: Connection reset by peer)
[20:40:15] *** Joins: gajus (sid202456@id-202456.tinside.irccloud.com)
[20:40:36] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
[20:42:47] *** Joins: TomyWork (~TomyLobo@p200300e80f006700a193e451d2860f64.dip0.t-ipconnect.de)
[20:43:20] *** Quits: mauz (~mauz@2a01:e0a:994:7ed0:75f8:dfaa:8a2c:e39a) (Quit: Leaving...)
[20:44:53] <capitol> foo: select count(distinct ip) from shorturl_log where shorturl_id=91613;
[20:45:43] *** Joins: mexen (uid495612@user/mexen)
[20:46:23] *** Joins: vit (~vit@chello085216193138.chello.sk)
[20:46:47] *** vit is now known as Guest6792
[20:46:53] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[20:47:10] <foo> capitol: ok, so that's returning 82... same as without distinct... so maybe they are already unique.
[20:47:26] *** Joins: hoppity (~hoppity@66.222.130.38)
[20:47:26] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[20:47:26] *** Joins: hoppity (~hoppity@user/hoppity)
[20:47:38] *** Guest6792 is now known as freeworld
[20:49:03] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[20:49:15] *** Joins: hoppity (~hoppity@66.222.130.38)
[20:49:15] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[20:49:15] *** Joins: hoppity (~hoppity@user/hoppity)
[20:49:40] *** Quits: mexen (uid495612@user/mexen) (Max SendQ exceeded)
[20:50:25] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Ping timeout: 256 seconds)
[20:50:26] *** Joins: mexen (uid495612@user/mexen)
[20:51:22] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
[20:53:26] *** Quits: turlando (~turlando@user/turlando) (Quit: turlando)
[20:53:50] <Xgc> foo: That's not what it means.  But queries are functionally equivalent.
[20:53:59] <Xgc> s/But/Both/
[20:54:23] *** Quits: sebastorama (~sebastora@104.131.87.249) (Remote host closed the connection)
[20:54:24] <foo> Xgc: thank you thank you
[20:54:28] <foo> right, I'm following
[20:54:40] *** Joins: sebastorama (~sebastora@104.131.87.249)
[20:55:48] <Xgc> foo: If you want to find ips which are not distinct, try: SELECT ip FROM shorturl_log WHERE shorturl_id = 91613 GROUP BY ip HAVING COUNT(*) > 1;
[20:56:22] <Xgc> foo: If you want to count those, wrap this in a SELECT COUNT(*) FROM (... the above SQL ...) AS x
[20:56:40] *** Joins: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net)
[20:56:42] *** Joins: turlando (~turlando@93-42-250-112.ip89.fastwebnet.it)
[20:56:42] *** Quits: turlando (~turlando@93-42-250-112.ip89.fastwebnet.it) (Changing host)
[20:56:42] *** Joins: turlando (~turlando@user/turlando)
[20:59:09] <foo> Xgc: thank you thank you
[20:59:11] <Xgc> foo: If you want the count of ips which are unique within that shorturl list: SELECT COUNT(*) FROM (SELECT ip FROM shorturl_log WHERE shorturl_id = 91613 GROUP BY ip HAVING COUNT(*) = 1) AS x
[21:00:11] *** Quits: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de) (Remote host closed the connection)
[21:00:56] *** Joins: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de)
[21:04:16] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[21:04:45] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[21:04:49] *** Joins: hoppity (~hoppity@66.222.130.38)
[21:04:49] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[21:04:49] *** Joins: hoppity (~hoppity@user/hoppity)
[21:06:20] *** Quits: furrymcgee (~devuan@cgn-89-1-211-93.nc.de) (Quit: leaving)
[21:06:37] *** Joins: carragom (~textual@201.204.94.76)
[21:08:54] *** Quits: u4ia_ (~u4ia@2a10:3781:18fd:1:53d4:805b:c8e3:1629) (Ping timeout: 250 seconds)
[21:09:37] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 256 seconds)
[21:10:11] *** Joins: u4ia_ (~u4ia@2a10:3781:18fd:1:53d4:805b:c8e3:1629)
[21:13:11] *** Joins: immibis_ (~hexchat@dynamic-089-204-138-049.89.204.138.pool.telefonica.de)
[21:15:35] *** Quits: immibis (~hexchat@dynamic-089-204-139-245.89.204.139.pool.telefonica.de) (Ping timeout: 256 seconds)
[21:17:37] *** Joins: hoppity (~hoppity@66.222.130.38)
[21:17:37] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[21:17:37] *** Joins: hoppity (~hoppity@user/hoppity)
[21:17:40] *** Quits: merzo (~Thunderbi@185.39.197.205) (Quit: merzo)
[21:18:53] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[21:19:26] *** Joins: hoppity (~hoppity@66.222.130.38)
[21:19:26] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[21:19:26] *** Joins: hoppity (~hoppity@user/hoppity)
[21:19:47] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[21:19:59] *** Joins: hoppity (~hoppity@66.222.130.38)
[21:19:59] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[21:19:59] *** Joins: hoppity (~hoppity@user/hoppity)
[21:20:05] *** Quits: TomyWork (~TomyLobo@p200300e80f006700a193e451d2860f64.dip0.t-ipconnect.de) (Quit: Leaving)
[21:21:59] *** Quits: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de) (Remote host closed the connection)
[21:23:11] *** Joins: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de)
[21:24:31] *** Joins: econo (uid147250@user/econo)
[21:25:49] *** Joins: Komzzpa (~kom@2a02:220f:2000:2c00:ec12:6eb8:75bd:2212)
[21:27:05] *** Quits: rodo (~rodo@pop.92-184-105-121.mobile.abo.orange.fr) (Read error: Connection reset by peer)
[21:27:09] *** Quits: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de) (Remote host closed the connection)
[21:30:28] *** Joins: Rashad (~textual@2a01:9700:1a7c:8900:84a2:920e:e2a8:8ec)
[21:33:02] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:8ce:52c8:d2f7:fc08) (Remote host closed the connection)
[21:43:03] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[21:43:07] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[21:43:39] *** Joins: hoppity (~hoppity@66.222.130.38)
[21:43:39] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[21:43:39] *** Joins: hoppity (~hoppity@user/hoppity)
[21:46:14] *** Joins: cloudbender (~cloudbend@user/cloudbender)
[21:47:22] <aremaref> Is there a way to approximate index bloat? I was using pgstatindex but the index is massive and it's taking forever to return results
[21:47:53] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:cc52:7eea:1d8:af54)
[21:48:27] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[21:48:58] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 272 seconds)
[21:49:11] *** Joins: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de)
[21:49:34] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[21:50:29] <Walex2> aremaref: that sounds like an index with poor selectivity, like an index on true/false, or one where only a few values are very common.
[21:50:51] *** Quits: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com) (Remote host closed the connection)
[21:51:31] *** Joins: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com)
[21:51:36] <Walex2> aremaref: https://www.citusdata.com/blog/2018/03/06/postgres-planner-and-its-usage-of-statistics/
[21:52:54] <aremaref> Walex2: I think it's pretty high cardinality, but the table it's indexing is very large
[21:53:24] *** Joins: pmcnabb (~pmcnabb@user/pmcnabb)
[21:53:44] <Walex2> well ANALYZE etc. as described in that page will tell you usually...
[21:54:15] <Walex2> aremaref: also depends on what you mean with "index bloat".
[21:54:47] <Walex2> aremaref: if the table is very large the index is going to be big and depending on other stuff will have many levels.
[21:55:24] <Walex2> aremaref: also the relation itself may be "bloated".
[21:55:29] <ash_worksi> if I UNION two ordered subqueries s1 and s2 without sorting the final result am I guarenteed the order s1 rows then s2?
[21:55:49] <depesz> ash_worksi: no.
[21:55:58] <ash_worksi> boo
[21:56:01] <Walex2> ash_worksi: I really hope not, it is a perverse expectation.
[21:56:10] <depesz> ash_worksi: *especially* if you user "union", as opposed to "union all"
[21:56:17] <Walex2> ash_worksi: relations are not ordered.
[21:56:48] <Walex2> ash_worksi: and it is very easy to add a constant field to both 'select's in the unions and sort on that.
[21:57:15] <aremaref> Walex2: Maybe some context here would help: https://explain.depesz.com/s/pNmG#html
[21:57:25] *** Quits: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com) (Remote host closed the connection)
[21:58:33] <aremaref> Normally, the query planner choooses another index, index_orders_on_status, but here it started using orders_pkey
[21:58:42] <depesz> Walex2: ash said about ordered subqueries, not union of relations.
[21:58:58] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[21:59:31] *** Joins: hoppity (~hoppity@66.222.130.38)
[21:59:31] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[21:59:31] *** Joins: hoppity (~hoppity@user/hoppity)
[22:03:55] <Walex2> aremaref: I am trying to skip over it, but a random suggestion to wo a 'WITH' with just 'orders' in it and the three selections related just to it...
[22:04:01] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 256 seconds)
[22:04:31] <Walex2> aremaref: it would also improve readability. BTW your indentation of the query is uncommonly decent.
[22:04:31] <aremaref> Yeah - i figured doing an optimization fence with a CTE would "fix" this, but i wanted to figure out the root cause
[22:05:00] <aremaref> :D
[22:05:32] <Walex2> aremaref: CTE is not necessarily a fence, it is more of a hint.
[22:06:30] <Walex2> I personally would put all four relations mentioned in 'where' in CTEs with appropriate descriptive names just for readability.
[22:06:41] <aremaref> Oh - i thought on PG10/11 and below, the query in the CTE wouldn't get re-written/optimized with the rest of the query
[22:07:08] *** Joins: hoppity (~hoppity@66.222.130.38)
[22:07:08] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[22:07:08] *** Joins: hoppity (~hoppity@user/hoppity)
[22:08:07] <aremaref> Agreed about the CTEs being better for readability, although this is an output from an ORM that doesn't support CTEs :(
[22:09:00] <aremaref> We may just need to move away from the ORM for these
[22:09:15] <Walex2> aremaref: part of the question is which of the 'acquire', 'importance' and 'status' fields are part of the primary key, if 'orders_pkey' is indexing the primary key.
[22:09:17] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22)
[22:12:31] <aremaref> Walex2: None - the primary key is just the id
[22:13:15] <aremaref> Which is what lead me to believe something is funky with the index_orders_on_status index
[22:13:20] *** Joins: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com)
[22:13:21] <Walex2> aremaref: if the index names are descriptive, the planner wants to use an index that contains some attribute in the selection filter, and guesses that "((status)::text = 'goat_check'::text))" is less selective than 'acquire' or 'importance'
[22:13:27] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:cc52:7eea:1d8:af54) (Remote host closed the connection)
[22:14:31] <Walex2> aremaref: therefore the statistics on 'orders' may not reflect selectivities, and therefore 'ANALYZE' and 'CREATE STATISTICS' etc. would be useful.
[22:15:02] <aremaref> Walex2: That's what i thought too - but the table had been analyzed already earlier in the day
[22:16:02] <aremaref> Worth noting, though, that we don't tune any parameters for statistics. It's all default values
[22:18:05] *** Joins: Xof (~Xof@198-0-193-113-static.hfc.comcastbusiness.net)
[22:18:06] *** Quits: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com) (Ping timeout: 272 seconds)
[22:19:04] <aremaref> So my dilemma here is, i think a CTE would probably solve *this* query timeout, but we've been noticing sporadic timeouts due to similar issues recently. I wanted to dig in a little deeper as to why
[22:20:25] <Walex2> aremaref: 100m rows selected away, in 3 loops (row 6 in HTML).
[22:21:33] <aremaref> Yeah - the actual results returned are tiny - maybe 200 rows
[22:21:38] <Walex2> I think the planner is not using the right statistics also as to the order in which to do the joins.
[22:25:49] <aremaref> Walex2: Yeah, which makes sense when we convert the orders query to a CTE: https://explain.depesz.com/s/jROY
[22:26:10] <Walex2> aremaref: I writing for you some queries.
[22:26:36] *** Quits: psoo (~psoo@dslb-090-186-134-090.090.186.pools.vodafone-ip.de) (Ping timeout: 240 seconds)
[22:27:28] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[22:28:52] *** Quits: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz) (Ping timeout: 272 seconds)
[22:28:58] <Walex2> the obvious ones: http://paste.debian.net/1231443/
[22:30:53] *** Joins: thekingofbandit (thekingofb@user/thekingofbandit)
[22:31:14] <Walex2> BTW I usually don't like a lot 'IN' unless the right hand side is a 'SELECT' or a largish constant relation, but that is just style. :-)
[22:31:24] *** Quits: thekingofbandit (thekingofb@user/thekingofbandit) (Remote host closed the connection)
[22:32:07] <aremaref> The first query returns the fewest, and the second and third return millions
[22:32:47] <Walex2> aremaref: I would expect 'goat_check' to be highly selective...
[22:33:10] <aremaref> Yup - that's the one that only returns 280 or so
[22:33:27] <Walex2> aremaref: the other selections are not that selective.
[22:33:55] <Walex2> aremaref: so the planner is not figuring out that 'status' has very few 'goat-check' :-)
[22:34:34] <aremaref> Right right - so we think that the table statistics are out of date?
[22:35:11] *** Quits: darutoko (~darutoko@92.125.61.64) (Quit: Leaving)
[22:36:08] <Walex2> aremaref: note also that in the CTE 'explain' the big deal is "Index Cond: ((status)::text = 'goat_check'::text)" which is the right thing.
[22:36:29] *** Joins: thekingofbandit (thekingofb@user/thekingofbandit)
[22:36:37] <aremaref> Yeah! Which is what i want, and i get that when running the same query in a staging environment
[22:37:00] <aremaref> And i think i also get this normally in prod, but sometimes i don't
[22:37:06] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[22:37:13] <Walex2> aremaref: so perhaps it is expecting "(NOT acquire) AND (importance = ANY ('{2,3}'::integer[])))" to be more selective than it turns out.
[22:38:20] *** Joins: pvn1 (~Adium@85-195-230-32.fiber7.init7.net)
[22:38:48] <Walex2> aremaref: or perhaps it is expecting, in the non-CTE case, that the "join" conditions be very selective.
[22:39:16] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[22:39:47] <Walex2> aremaref: I would compare as per the article I linked to above, the statistics on 'orders' and 'shipping_infos'
[22:40:33] <Walex2> but I should really be going now. I hope that I have added some useful information. Part of which is that the planner usually does the most sensible things with the statistics it has got.
[22:40:46] <aremaref> Walex2: For sure, appreciate your time and talking about this with me!
[22:41:34] <Walex2> aremaref: another thing in the CTE 'EXPLAIN' is that the joins are done in a different order too.
[22:41:39] <Walex2> ok, bye bye.
[22:43:36] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[22:47:20] *** Joins: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com)
[22:51:00] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[22:51:24] *** Quits: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com) (Ping timeout: 240 seconds)
[22:53:37] *** Quits: pmcnabb (~pmcnabb@user/pmcnabb) (Ping timeout: 256 seconds)
[22:54:05] *** Joins: pmcnabb (~pmcnabb@user/pmcnabb)
[22:55:13] *** Quits: mexen (uid495612@user/mexen) (Quit: Connection closed for inactivity)
[22:55:31] *** Joins: maxzor (~maxzor@2a01cb04054faa0029307b4f13034fa3.ipv6.abo.wanadoo.fr)
[22:55:37] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[22:55:53] *** Quits: maxzor (~maxzor@2a01cb04054faa0029307b4f13034fa3.ipv6.abo.wanadoo.fr) (Read error: Connection reset by peer)
[22:56:12] *** Joins: maxzor (~maxzor@2a01cb04054faa0029307b4f13034fa3.ipv6.abo.wanadoo.fr)
[23:02:23] *** Quits: the_lanetly_052_ (~the_lanet@194.135.166.105) (Remote host closed the connection)
[23:03:14] *** Quits: Junxter (~Junxter@222.95.164.193) (Read error: Connection reset by peer)
[23:06:42] <Net> What's the right way to return multiple declared variables from a pgpsql function?
[23:07:00] *** Quits: Klinda (~superleag@user/klinda) (Ping timeout: 240 seconds)
[23:07:25] *** Joins: Klinda (~superleag@user/klinda)
[23:07:49] <Net> I've declared my return type as RETURNS TABLE (gig_id int, remaining_count int), and I have as my final statement RETURN (gig_id, remaining_count); where gig_id and remaining_count are both int variables, but I get this error: RETURN cannot have a parameter in function returning set
[23:08:36] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 240 seconds)
[23:08:53] *** Quits: shka (~herr@109.231.3.55) (Quit: Konversation terminated!)
[23:11:17] <Net> RETURN QUERY SELECT gig_id, remaining_count; seems to work, not sure if that's the best way though
[23:13:35] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[23:14:12] *** Joins: hoppity (~hoppity@66.222.130.38)
[23:14:12] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[23:14:12] *** Joins: hoppity (~hoppity@user/hoppity)
[23:16:35] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[23:16:47] *** Joins: hoppity (~hoppity@user/hoppity)
[23:19:23] *** Quits: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net) (Ping timeout: 256 seconds)
[23:20:47] *** Quits: fef (~thedawn@user/thedawn) (Quit: Leaving)
[23:21:41] *** Joins: noarb- (~noarb@user/noarb)
[23:21:54] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 260 seconds)
[23:23:34] *** Quits: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de) (Remote host closed the connection)
[23:25:48] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[23:27:34] *** Joins: noarb (~noarb@user/noarb)
[23:28:36] *** Quits: noarb- (~noarb@user/noarb) (Ping timeout: 240 seconds)
[23:28:45] *** Joins: bkkk (~bkkk@dslb-088-070-030-097.088.070.pools.vodafone-ip.de)
[23:30:54] *** Joins: gareppa (~gareppa@user/gareppa)
[23:31:48] *** Joins: carragom (~textual@201.204.94.76)
[23:32:36] *** Quits: k8yun (~k8yun@user/k8yun) (Read error: Connection reset by peer)
[23:33:17] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[23:33:55] *** Joins: Simplar (~Simplar@188.163.93.241)
[23:36:00] *** Quits: reprazent (~reprazent@178-118-195-230.access.telenet.be) (Ping timeout: 272 seconds)
[23:36:33] *** Joins: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com)
[23:37:40] *** Joins: mattil (~mattil@87-92-28-123.bb.dnainternet.fi)
[23:37:44] *** Quits: mattil (~mattil@87-92-28-123.bb.dnainternet.fi) (Read error: Connection reset by peer)
[23:37:48] *** Joins: reprazent (~reprazent@178-118-195-230.access.telenet.be)
[23:38:14] *** Joins: mattil (~mattil@helsinki.portalify.com)
[23:39:47] *** Joins: grandrew (~grandrew@104-50-140-129.lightspeed.sntcca.sbcglobal.net)
[23:40:07] *** Quits: gareppa (~gareppa@user/gareppa) (Quit: Leaving)
[23:41:42] *** Quits: ben_ (~ben@host86-160-225-46.range86-160.btcentralplus.com) (Ping timeout: 272 seconds)
[23:41:48] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Ping timeout: 240 seconds)
[23:56:23] *** Joins: magla (~gelignite@55d44f7e.access.ecotel.net)
[23:59:38] *** Quits: pacninja (sid471347@id-471347.helmsley.irccloud.com) (Read error: No route to host)
[23:59:47] *** Joins: pacninja (sid471347@id-471347.helmsley.irccloud.com)
