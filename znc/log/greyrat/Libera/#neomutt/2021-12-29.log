[00:01:43] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[00:53:59] *** Quits: gabriel1_ (~gabriel1@host-95-239-6-20.retail.telecomitalia.it) (Ping timeout: 256 seconds)
[01:29:01] <Raito_Bezarius> Hi there, flatcap, succeded to trigger another segfault with ASAN: https://clbin.com/5Sfpj (still on devel/monitor)
[01:29:09] <Raito_Bezarius> (same trigger: opening a folder)
[01:29:43] <Raito_Bezarius> this time, it looks like another codepath
[01:29:50] <Raito_Bezarius> https://github.com/neomutt/neomutt/blob/0a980fc6b106ecb204677706e4d02a347510d5a8/monitor.c#L342
[01:59:10] *** Quits: strajder (~strajder@user/strajder) (Quit: leaving)
[02:07:33] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Ping timeout: 276 seconds)
[02:08:36] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[02:18:36] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[02:20:50] <flatcap> Raito_Bezarius: thanks for the debugging, I'll have a look in the morning
[02:21:28] <Raito_Bezarius> flatcap: thank you :)
[02:29:27] *** Joins: gabriel1_ (~gabriel1@k2.ilion.info)
[02:31:59] *** Joins: rgrinberg (~textual@2806:265:5401:9431:1190:319b:cdf4:fd53)
[02:49:25] *** Quits: mingdao (~mingdao@wireguard/tunneler/mingdao) (Remote host closed the connection)
[02:53:11] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Read error: Connection reset by peer)
[03:03:11] *** Quits: whatsyourask (~whatsyour@user/whatsyourask) (Quit: whatsyourask)
[03:10:51] *** Quits: plastico (~plastico@neomutt/plastico) (Quit: WeeChat 3.3)
[04:01:36] *** Quits: bsd4me (~bsduser@user/bsd4me) (Quit: Lost terminal)
[04:18:33] *** Quits: noex (~null@2600:8804:1280:aa0:5857:94a:25de:c513) (Changing host)
[04:18:33] *** Joins: noex (~null@user/noex)
[04:46:30] *** Joins: mingdao (~mingdao@wireguard/tunneler/mingdao)
[04:47:02] *** Quits: nattiestnate (~nate@114.122.107.61) (Quit: WeeChat 3.4)
[04:47:23] *** Joins: nattiestnate (~nate@114.122.107.61)
[05:01:15] *** Quits: nattiestnate (~nate@114.122.107.61) (Quit: WeeChat 3.4)
[05:01:38] *** Joins: nattiestnate (~nate@114.122.107.61)
[05:32:20] *** Quits: rgrinberg (~textual@2806:265:5401:9431:1190:319b:cdf4:fd53) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:33:17] *** Quits: maetthew (~maetthew@user/maetthew) (Quit: ZNC 1.8.2 - https://znc.in)
[05:35:53] *** Joins: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se)
[05:35:53] *** Quits: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se) (Changing host)
[05:35:53] *** Joins: maetthew (~maetthew@user/maetthew)
[05:42:27] *** Joins: haniaF (~haniaF@79.191.100.173.ipv4.supernova.orange.pl)
[05:42:59] *** Quits: haniaF_ (~haniaF@83.24.190.184.ipv4.supernova.orange.pl) (Ping timeout: 256 seconds)
[05:59:03] *** Joins: rgrinberg (~textual@2806:265:5401:9431:1190:319b:cdf4:fd53)
[06:09:55] *** Joins: haniaF_ (~haniaF@79.191.105.142.ipv4.supernova.orange.pl)
[06:10:17] *** Quits: haniaF (~haniaF@79.191.100.173.ipv4.supernova.orange.pl) (Ping timeout: 240 seconds)
[06:17:45] *** Quits: nattiestnate (~nate@114.122.107.61) (Quit: WeeChat 3.4)
[06:18:06] *** Joins: nattiestnate (~nate@114.122.107.61)
[06:37:03] *** Joins: dob1_ (~dob1@user/dob1)
[06:39:39] *** Quits: dob1 (~dob1@user/dob1) (Ping timeout: 256 seconds)
[06:43:42] *** Joins: dob1 (~dob1@user/dob1)
[06:45:19] *** Quits: dob1_ (~dob1@user/dob1) (Ping timeout: 256 seconds)
[06:53:09] *** Quits: nattiestnate (~nate@114.122.107.61) (Quit: WeeChat 3.4)
[06:55:06] *** Joins: nattiestnate (~nate@114.122.104.173)
[07:09:01] *** Joins: Vonter (~Vonter@user/vonter)
[07:14:14] *** Quits: gabriel1_ (~gabriel1@k2.ilion.info) (Remote host closed the connection)
[07:28:14] *** Quits: Pali (~pali@user/pali) (Ping timeout: 260 seconds)
[07:33:53] *** Quits: nattiestnate (~nate@114.122.104.173) (Quit: WeeChat 3.4)
[07:35:29] *** Quits: nyah (~nyah@94.6.71.219) (Remote host closed the connection)
[09:16:33] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Ping timeout: 276 seconds)
[09:18:06] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[09:48:33] *** Quits: weirdsmiley (~weirdsmil@203.122.10.222) (Read error: Connection reset by peer)
[10:03:23] *** Joins: weirdsmiley (~weirdsmil@203.122.10.222)
[11:49:51] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[11:59:50] *** Quits: polve (~polve@user/polve) (Ping timeout: 260 seconds)
[12:02:05] <gahr> moin
[12:05:15] *** Joins: polve (~polve@user/polve)
[12:12:51] *** Quits: haniaF_ (~haniaF@79.191.105.142.ipv4.supernova.orange.pl) (Ping timeout: 256 seconds)
[12:15:59] *** Quits: epony (epony@user/epony) (Quit: QUIT)
[12:18:37] *** Joins: epony (epony@user/epony)
[12:18:46] *** Joins: haniaF (~haniaF@83.24.188.64.ipv4.supernova.orange.pl)
[12:42:05] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 252 seconds)
[12:57:14] <flatcap> morning all
[13:00:49] *** Joins: strajder (~strajder@user/strajder)
[13:08:30] *** Joins: plastico (~plastico@neomutt/plastico)
[13:19:33] <gahr> hi flatcap 
[13:19:49] <flatcap> hi gahr 
[13:19:59] <flatcap> thanks for the index fix :-)
[13:20:21] <gahr> o/
[13:25:38] <flatcap> How was your Christmas?  Do anything / go anywhere exciting?
[13:47:04] <flatcap> Raito_Bezarius: I've updated branch [devel/monitor], please can you give it a try.  Thanks.
[13:47:09] *** Quits: rgrinberg (~textual@2806:265:5401:9431:1190:319b:cdf4:fd53) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:59:24] <gahr> nothing too fancy, been seeing some relatives etc 
[13:59:32] <gahr> how about you? Took an additional day off?
[13:59:36] <gahr> or two..
[14:01:07] <flatcap> Down to see my sister and the little ones -- fun, but I'm quite sleep-deprived now :-)
[14:01:24] <flatcap> A rare couple of days afk!
[14:02:52] <flatcap> They're old enough, now, to be slightly interesting ;-)
[14:03:06] <flatcap> (and play chess!)
[14:09:33] *** Joins: breavyn_ (~breavyn@user/breavyn)
[14:10:54] *** Quits: breavyn (~breavyn@user/breavyn) (Ping timeout: 268 seconds)
[14:40:17] <gahr> sounds not too bad!
[14:43:37] <flatcap> yeah, much drinking and playing of games :-)
[14:46:04] <gahr> I think I figures #3134
[14:46:05] <neo-bot> PR by @gahr "Improve API of strto* wrappers": https://github.com/neomutt/neomutt/pull/3134
[14:47:14] <gahr> *figured
[14:47:43] <gahr> https://github.com/neomutt/neomutt/blob/11da862999b2494cb743772ee58096daf301e4ab/index/functions.c#L1008
[14:47:50] * flatcap looks ...
[14:47:51] <gahr> here it correctly identifies the email to move to
[14:48:18] <gahr> but if you go from a more limited view (say, 400 msgs) to a less limited view (say, 1000 msgs), priv->menu->max still has 400 here
[14:48:31] <gahr> so if you want to select email number 700, it'll fail
[14:48:39] <flatcap> ah
[14:51:41] <gahr> setting priv->menu->max = shared->mailbox->vcount; before looking for the email fixes it
[14:51:52] <gahr> but I'm not sure how nice it is to change menu->max here
[14:52:00] <gahr> I see it's being done elsewhere, too
[14:52:37] <flatcap> yeah, that was a workaround too
[14:53:07] <gahr> ok, I'll fix it like this for now
[14:53:10] <flatcap> it should be ok, because the Menu isn't the owner of the data
[14:53:46] <flatcap> great
[15:04:27] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[15:04:51] * flatcap builds ...
[15:05:51] <flatcap> that works nicely
[15:06:15] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Remote host closed the connection)
[15:07:18] <flatcap> hmm...
[15:07:39] *** Joins: darkstardevx (~darkstard@50.39.115.145)
[15:09:08] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Remote host closed the connection)
[15:10:33] <flatcap> <limit>NOMATCH  <limit>.  works
[15:10:49] <flatcap> <limit>match-current-email  <limit>.  works
[15:11:49] *** Joins: darkstardevx (~darkstard@50.39.115.145)
[15:12:11] <flatcap> <limit>NOMATCH  <limit>match-current-email  creates the correct list, but I don't get a selected email
[15:14:19] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Max SendQ exceeded)
[15:15:23] <gahr> which would be what I fixed in the previous PR?
[15:16:42] <flatcap> hmm...
[15:19:32] <flatcap> not quite.  after the empty set, limiting to a set including the original email gets misaligned
[15:19:42] <gahr> which original email?
[15:19:45] <gahr> ah
[15:19:58] <gahr> you would like to remember the original email after the empty set?
[15:20:39] <gahr> I hadn't considered that
[15:21:03] <flatcap> empty -> all correctly selects, but empty to small-set-that-includes-the-original-email doesn't select
[15:32:23] <gahr> what would it select?
[15:33:02] <gahr> I don't think we can remeber the original email across empty-set limits
[15:35:24] <flatcap> er, it seems to in my tests
[15:37:52] <flatcap> the index is remembering the "current email"...
[15:38:12] <flatcap> <limit>NOMATCH -> no select, current email is preserved
[15:38:35] <flatcap> <limit>. -> select the previous current email
[15:38:39] <flatcap> that works for me
[15:38:55] <gahr> ah that's probably because we don't change the menu selection
[15:39:06] <flatcap> oh
[15:39:18] <flatcap> a side-effect :-)
[15:39:26] <gahr> it doesn't really work for me.. NOMATCH -> all selects a random email
[15:40:45] <flatcap> oh, in that case don't worry about it :-)
[15:42:10] <gahr> ok I won't (phew)
[15:42:30] <gahr> we could probably make it work, but we can do it in the scope of some other PR :)
[15:43:05] <flatcap> yeah, another day
[15:47:07] <gahr> :)
[15:55:30] *** Quits: madage (~madage@user/madage) (Remote host closed the connection)
[15:55:44] *** Joins: madage (~madage@user/madage)
[16:15:24] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[16:18:25] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[16:23:43] *** Joins: Pali (~pali@user/pali)
[16:25:54] <flatcap> any FreeBSD users got a second to test something?
[16:43:56] *** Joins: ueberall (ueberall_l@user/ueberall)
[17:06:42] *** Joins: M4rty (~M4rtyflex@37.164.148.220)
[17:19:36] *** Quits: M4rty (~M4rtyflex@37.164.148.220) (Quit: leaving)
[17:30:26] <gahr> sure
[17:34:42] <flatcap> LANG=de_DE.utf-8 neomutt -n -F /dev/null -e "set quit=ask-yes"
[17:35:07] <flatcap> when you 'q' <quit> does NeoMutt accept 'j' (Ja) as yes?
[17:35:29] *** Quits: jelly (~me@user/jelly) (Read error: Connection reset by peer)
[17:36:38] <flatcap> we get the y/n translations from a call to nl_langinfo(YESEXPR) -- they're not part of NeoMutt's translations
[17:37:08] <flatcap> but I've got a FreeBSD user for whom it's not working (but I have no idea why not)
[17:40:34] *** Joins: jelly (jelly@user/jelly)
[17:42:10] * gahr rebuilds with locale
[17:43:06] <flatcap> thanks
[17:43:18] <flatcap> I've put a trivial prog here: https://gist.github.com/flatcap/cecd7d3a82c97ddba9612597d3a0a30d
[17:44:00] <flatcap> LANG=de_DE.utf-8 nl  ->  ^[+1jJyY]
[17:44:18] <flatcap> LANG=ru_RU.utf-8 nl  ->  ^[+1yYДд]
[17:48:49] <flatcap> I have a package installed which may be the source: glibc-all-langpacks
[17:50:25] <flatcap> yes, without that I only get  ^[yY]
[17:55:50] <gahr> no, it doesn't
[17:56:15] <gahr> I get a ([ja]/nein) prompt but it only accepts y as a yes
[17:56:37] <gahr> let me run your sample prog
[17:56:48] <flatcap> yeah, the string has already been translated by the time mutt_yesorno() gets it
[17:58:21] <flatcap> please can you search for: "glibc-langpack-de" or "glibc-all-langpacks" packages
[17:58:42] <gahr> that program always gives me Yn
[17:58:56] <flatcap> ok, thanks
[17:59:05] <gahr> we don't have any glibc packages :)
[17:59:19] <flatcap> ah, I thought that might be the case
[18:00:04] *** Quits: saki (~saki@gateway/tor-sasl/saki) (Quit: Quitting)
[18:00:22] *** Joins: saki (~saki@gateway/tor-sasl/saki)
[18:01:08] <gahr> so nl_langinfo is broken on freebsd?
[18:01:38] <flatcap> dunno
[18:02:10] <flatcap> there might be a separate language package, like here on Fedora
[18:02:24] <gahr> let me search a bit
[18:02:31] <flatcap> thanks
[18:04:14] <flatcap> we've got enough info to generate the string ourselves: "yes" and "no" exist in the .po files
[18:07:02] <gahr> wait
[18:07:07] <gahr> it works
[18:07:24] <flatcap> ooh!
[18:07:34] <gahr> you'll need de_DE.UTF-8 (upper case UTF-8 part)
[18:07:53] <flatcap> oh
[18:08:22] <gahr> now neomutt accepts both J and Y
[18:08:39] <gahr> and your program gives me ^(([jJ]([aA])?)|([jJ])|([yY]([eE][sS])?)|([yY]))
[18:08:54] <flatcap> wow!
[18:09:04] <flatcap> brilliant, thanks!
[18:10:29] <flatcap> when I run strace on neomutt, I see it looking for lots of combinations of lang...
[18:11:14] <flatcap> /usr/share/locale/XXX/LC_MESSAGES/neomutt.mo  de_DE.utf-8, de_DE.utf8, de_DE, de.utf-8, de.utf8, de
[18:12:49] <gahr> % truss -o prog.out ./prog && grep locale prog.out
[18:12:49] <gahr> ^[yY]
[18:12:50] <gahr> open("/usr/share/locale/de_DE.utf-8/LC_COLLATE",O_RDONLY,013720646057) ERR#2 'No such file or directory'
[18:12:56] <gahr> we aren't that smart :)
[18:13:22] <flatcap> :-)
[18:15:56] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[18:23:32] *** Joins: ueberall (ueberall_l@user/ueberall)
[18:25:03] <Raito_Bezarius> flatcap: compiling!
[18:26:28] <flatcap> great :-)
[18:48:26] <Raito_Bezarius> it seems like to be fixed, flatcap !
[18:48:42] <Raito_Bezarius> I'm still under ASAN and no crashes, so I suppose it did the job :)
[18:53:11] <flatcap> thanks
[19:15:27] *** Quits: madage (~madage@user/madage) (Remote host closed the connection)
[19:15:39] *** Joins: madage (~madage@user/madage)
[19:49:51] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[20:10:05] *** Quits: weirdsmiley (~weirdsmil@203.122.10.222) (Remote host closed the connection)
[20:13:07] *** Joins: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263)
[20:15:42] *** Joins: weirdsmiley (~weirdsmil@203.122.10.222)
[20:21:12] *** Quits: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263) (Quit: WeeChat 3.4)
[20:21:34] *** Joins: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263)
[20:24:05] *** Quits: fmneto (~quassel@2804:14c:70:27f0::1000) (Ping timeout: 252 seconds)
[20:24:18] *** Joins: fmneto (~quassel@2804:14c:70:27f0::1000)
[20:26:30] *** Quits: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263) (Quit: WeeChat 3.4)
[20:31:26] *** Joins: mokulus (~mokulus@user/mokulus)
[20:31:31] *** Quits: mokulus (~mokulus@user/mokulus) (Client Quit)
[20:39:48] *** Joins: _hades_ (~ralphe@cable-84-44-244-10.nc.de)
[21:43:39] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[21:47:43] *** Joins: ueberall (ueberall_l@user/ueberall)
[21:51:18] *** Joins: rgrinberg (~textual@2806:101e:7:33a5:7059:f90b:c049:c6ca)
[21:58:54] *** Joins: alban771 (~alban@37.171.24.58)
[22:22:52] <Raito_Bezarius> btw, flatcap, this might interest you: https://clbin.com/mZJG0 — leaksanitizer results
[22:23:20] <Raito_Bezarius> fortunately, I have 2MB I can spare for this beautiful software <3
[22:23:31] <Raito_Bezarius> hm 2KB * I meant :D
[22:28:12] *** Quits: _hades_ (~ralphe@cable-84-44-244-10.nc.de) (Quit: leaving)
[22:33:46] *** Quits: rgrinberg (~textual@2806:101e:7:33a5:7059:f90b:c049:c6ca) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:37:16] *** Joins: rgrinberg (~textual@187.223.75.25)
[22:57:32] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[23:01:52] *** Joins: ueberall (ueberall_l@user/ueberall)
[23:23:00] <flatcap> Raito_Bezarius: hmm... that's an interesting one.  the leaks are coming from Xapian (Notmuch's database)
[23:23:18] <flatcap> it's possible we didn't close a connection, or Notmuch leaked
[23:26:01] <flatcap> adray: if you get a second, please could you have a look and a think about this leak.  https://clbin.com/mZJG0  Thanks
[23:37:39] *** Quits: saki (~saki@gateway/tor-sasl/saki) (Remote host closed the connection)
[23:37:54] *** Joins: saki (~saki@gateway/tor-sasl/saki)
[23:38:51] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 268 seconds)
[23:42:35] *** Quits: saki (~saki@gateway/tor-sasl/saki) (Remote host closed the connection)
[23:43:38] *** Joins: saki (~saki@gateway/tor-sasl/saki)
