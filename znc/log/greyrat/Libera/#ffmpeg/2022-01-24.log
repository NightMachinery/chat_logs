[00:00:35] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[00:03:49] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[00:04:14] *** Joins: debayer948 (~debayer@76.82.226.116)
[00:05:00] *** Quits: rvalue (~rvalue@user/rvalue) (Quit: ZNC - https://znc.in)
[00:06:19] *** Joins: xkuru (~xkuru@user/xkuru)
[00:07:16] *** Joins: rvalue (~rvalue@user/rvalue)
[00:34:08] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 268 seconds)
[00:35:59] *** Joins: KombuchaKip (~kip@192.252.230.5)
[00:45:07] *** Quits: Volgaar (~volgaar@147.94.235.6) (Quit: WeeChat 3.4)
[00:50:23] *** Quits: fkaa (~fkaa@user/fkaa) (Remote host closed the connection)
[00:51:02] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 240 seconds)
[01:04:53] *** Quits: dreamon (~dreamon@p54b1472c.dip0.t-ipconnect.de) (Remote host closed the connection)
[01:09:21] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Quit: WeeChat 3.0)
[01:09:40] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[01:12:05] *** Joins: dionys_ (dionys@user/dionys)
[01:14:24] *** Joins: minimal (~minimal@user/minimal)
[01:15:27] *** Joins: lavaball (felix@31.204.155.215)
[01:28:18] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Quit: WeeChat 3.0)
[01:28:36] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[01:33:02] *** Quits: isamiamsam (~d@zukertort.childrenofmay.org) (Ping timeout: 240 seconds)
[01:35:54] <irc_user> Why is it that sometimes when using `ffmpeg -ss 5 -t 10 -i in.mkv -c copy out.mp4`, the timestamp for the end of the video is way longer than 5 seconds? It doesn't happen all the time.
[01:37:46] *** Joins: m5zs7k (aquares@web10.mydevil.net)
[01:37:49] <JEEB> you can utilize -debug_ts to see what sort of packets are read and how they're interpreted
[01:38:05] <JEEB> of course, it will spam quite a bit since there's one entry for demux, demux+ffmpeg, decode, filtering, encode
[01:38:13] <JEEB> for each thing that goes through those steps
[01:40:26] *** Joins: samiamsam (~d@zukertort.childrenofmay.org)
[01:41:32] <crashrep> using copy instead of re-encoding with trimmed videos can have buggy behavior, it has to do with video keyframes, etc.
[01:42:08] <BtbN> Nothing buggy about it
[01:42:14] <BtbN> it just can't start at a random point
[01:42:34] <crashrep> yes, that's what i kind of meant, just didn't explain well
[01:42:57] <crashrep> try the same command but without -c copy and it should be a length of 5 seconds
[01:44:04] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[01:44:11] <irc_user> off_time and pkt_pts_time seem to correspond well to the start time and end time I supplied
[01:44:47] <irc_user> I reencode when I need to, but otherwise to make copying work consistently it seems like I need to do this instead: `ffmpeg -ss 5 -i in.mkv -t 5 -c copy out.mp4`?
[01:45:20] <irc_user> I just don't understand why -to as an input option would cause that behavior, I would rather use -to
[01:45:27] <irc_user> (as an input option)
[01:45:46] <JEEB> I'm not sure -t as an input option makes sense
[01:46:18] <JEEB> not that I recall how that option is actually defined
[01:46:42] <JEEB> > OPT_INPUT | OPT_OUTPUT
[01:46:46] <irc_user> Do you mean `-to`? I never used `-t` as an input option
[01:46:55] <JEEB> you wrote -t there
[01:47:03] <JEEB> in your first line on chat :)
[01:47:10] <irc_user> Oh crap
[01:47:12] <irc_user> My bad!
[01:47:20] <irc_user> That was supposed to be -to haha
[01:47:52] <irc_user> The command I actually used was with `-to` as an input option
[01:48:14] <irc_user> The command that fixed it was `ffmpeg -ss 5 -i in.mkv -t 5 -c copy out.mp4`, but then I have to use duration instead
[01:49:51] <JEEB> -t is what I've always used so far since it looks into time after you start, I think? -to I'd have to look into how it's exactl implemented. I mean, it seems to be applied to output_file(s) when they're opened and I guess it's utilizing the same recording_time variable (stop_time - start_time)
[01:49:58] <JEEB> stop_time being where the value from -to goes
[01:51:13] *** Quits: djk (~Thunderbi@74.102.240.250) (Quit: djk)
[01:53:02] *** Quits: MrZeus (~MrZeus@194.37.96.150) (Ping timeout: 240 seconds)
[01:55:08] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:56:34] <irc_user> Hmm, I'll just use -t as an output option for my script then. I think I will never understand video lol
[02:03:42] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[02:04:11] *** Joins: debayer948 (~debayer@76.82.226.116)
[02:08:20] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Ping timeout: 250 seconds)
[02:14:30] *** Quits: c7s (~c7s@user/c7s) (Quit: c7s)
[02:18:02] *** Quits: ___Myst___ (~Myst@net-47-53-73-65.cust.vodafonedsl.it) (Ping timeout: 240 seconds)
[02:18:18] *** Joins: __Myst__ (~Myst@net-47-53-73-65.cust.vodafonedsl.it)
[02:19:04] *** Quits: zmt00 (~zmt00@user/zmt00) (Read error: Connection reset by peer)
[02:27:47] *** Joins: zmt00 (~zmt00@user/zmt00)
[02:45:07] *** vulpine is now known as vlpn
[02:49:02] *** Quits: deltab (~deltab@user/deltab) (Ping timeout: 240 seconds)
[02:49:07] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[02:49:41] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 256 seconds)
[02:52:04] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[02:54:51] *** Quits: rv1sr (~rv1sr@user/rv1sr) ()
[02:59:01] *** Joins: deltab (~deltab@user/deltab)
[03:11:30] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[03:17:06] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 276 seconds)
[03:18:45] *** Joins: nrg (~NRG@user/nrg)
[03:19:02] *** Joins: crashrep (~crashrep@user/crashrep)
[03:22:33] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[03:25:16] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Client Quit)
[03:25:46] *** Quits: crashrep (~crashrep@user/crashrep) (Max SendQ exceeded)
[03:26:07] *** Joins: crashrep (~crashrep@user/crashrep)
[03:42:37] *** Quits: five64333 (~five6@8.40.26.70) (Ping timeout: 240 seconds)
[03:43:26] *** Joins: five64333 (~five6@8.40.26.70)
[03:49:54] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-b8c4-ca89-654d-bf74.res6.spectrum.com)
[04:02:53] *** Joins: xiongxin (~Thunderbi@2409:8954:38c4:44c4:53d0:6eda:c8cd:506c)
[04:03:22] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[04:03:35] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[04:04:08] *** Joins: debayer948 (~debayer@76.82.226.116)
[04:28:33] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[04:34:27] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.3)
[04:34:59] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[04:36:59] *** Quits: Kruppt (~Kruppt@50-111-48-241.drhm.nc.frontiernet.net) (Quit: Leaving)
[04:37:17] *** Joins: Ducky (~Ducky@host-92-7-215-211.as13285.net)
[04:38:17] *** Quits: xiongxin (~Thunderbi@2409:8954:38c4:44c4:53d0:6eda:c8cd:506c) (Ping timeout: 240 seconds)
[04:40:01] <Ducky> hi, I'm seeing if I can create a DASH stream on localhost with the webm container and vp8/vorbis. I've been able to make a manifest file using the instructions at http://wiki.webmproject.org/adaptive-streaming/instructions-to-playback-adaptive-webm-using-dash but I'm not sure what the next step is to streaming it to localhost so that I can play the
[04:40:01] <Ducky> video back in realtime. I've also been experimenting with nginx-rtmp-module but I don't think that is capable of streaming webm over DASH. is what I'm trying to do possible?
[04:40:45] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 256 seconds)
[04:46:00] <BtbN> "streaming" it is just putting it on any random http server
[04:47:30] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[04:49:31] <Ducky> more or less I'd like to be able to open a url that will let me watch the video in real time from an ffmpeg source
[04:51:35] <Ducky> *ffmpeg -re -i video.mp4  -vcodec libx264 -vprofile baseline -acodec libmp3lame -ar 44100 -ac 1 -f flv rtmp://localhost:1935/hls/test* something like this, but using vp8, libvorbis and webm instead of flv
[04:52:25] <Ducky> because I'd like to open the stream in a player that only supports that format
[04:53:00] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 250 seconds)
[04:54:40] *** Quits: irc_user (uid423822@id-423822.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[04:54:49] *** Joins: xiongxin (~Thunderbi@120.197.198.189)
[04:56:28] *** Joins: MrZeus (~MrZeus@194.37.96.134)
[04:57:20] *** Joins: wuxi (~wuxi@61.155.23.114)
[04:59:52] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:02:57] *** Joins: MrZeus_ (~MrZeus@81.92.206.10)
[05:04:55] *** Joins: xiongxin1 (~Thunderbi@120.197.198.177)
[05:06:15] *** Quits: MrZeus (~MrZeus@194.37.96.134) (Ping timeout: 256 seconds)
[05:06:15] *** Quits: xiongxin (~Thunderbi@120.197.198.189) (Ping timeout: 256 seconds)
[05:06:15] *** xiongxin1 is now known as xiongxin
[05:08:36] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 250 seconds)
[05:09:34] *** Quits: xiongxin (~Thunderbi@120.197.198.177) (Client Quit)
[05:14:42] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:19:37] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 240 seconds)
[05:25:00] *** Joins: MrZeus__ (~MrZeus@194.37.96.150)
[05:27:57] *** Quits: MrZeus_ (~MrZeus@81.92.206.10) (Ping timeout: 240 seconds)
[05:28:46] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[05:30:35] <znf> Ducky, you can just write it to a path /var/www/path/to/stream and then fetch that via any web server at http://host/path/to/stream
[05:30:40] <znf> not that complicated
[05:30:49] *** Joins: rvalue (~rvalue@user/rvalue)
[05:31:14] *** Quits: Atsuko (~x@94.242.254.66) (Remote host closed the connection)
[05:35:45] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[05:38:27] *** Quits: wuxi (~wuxi@61.155.23.114) ()
[05:41:03] <Ducky> znf I'm looking at the other page that has instructions for live streaming http://wiki.webmproject.org/adaptive-streaming/instructions-to-do-webm-live-streaming-via-dash and using this command:
[05:41:25] <znf> ok?
[05:41:26] <Ducky> ffmpeg -re -r 25 -i video.m4v -map 0:0 -pix_fmt yuv420p -c:v libvpx -s 800x600 -keyint_min 25 -g 25 -speed 6 -threads 8 -static-thresh 0 -max-intra-rate 300 -deadline realtime -lag-in-frames 0 -error-resilient 1 -f webm_chunk -header "webm_live/glass_360.hdr" -chunk_start_index 1 webm_live\glass_360_%d.chk
[05:41:29] <znf> that says the same thing
[05:41:29] <znf> :)
[05:42:00] <Ducky> hmm? it says something different for me
[05:42:17] <Ducky> but I create the manifest file according to that page and place it on a web server
[05:42:17] <znf> ...?
[05:42:29] <Ducky> I can navigate to that file but it doesn't play any media and mpv fails to play any media too
[05:42:37] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-b8c4-ca89-654d-bf74.res6.spectrum.com) (Ping timeout: 240 seconds)
[05:43:10] <znf> what's the error?
[05:43:11] <Ducky> ffmpeg -f webm_dash_manifest -live 1 -i webm_live/glass_360.hdr -c copy -map 0 -f webm_dash_manifest -live 1 -adaptation_sets "id=0,streams=0" -chunk_start_index 1 -chunk_duration_ms 2000 -time_shift_buffer_depth 7200 -minimum_update_period 7200 manifest.mpd is the command I use to make the manifest
[05:43:33] *** Joins: jarthur_ (~jarthur@2603-8080-1540-002d-40a9-cbd8-8be9-e1d1.res6.spectrum.com)
[05:43:34] <Ducky> however that command does make a file but says: Output file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)
[05:44:24] <Ducky> this is the mpv output: https://pastebin.com/W3WsVJeB
[05:44:26] <znf> I'm not following you - the instructions are pretty clear
[05:45:01] <znf> that looks to me like youtube-dl output
[05:45:24] <znf> either way, it's pretty clear - the manifest points to a segment, but the segment is not reachable
[05:46:21] <znf> it also clearly states that you need to run the first command to actually generate the data, then you also need to create the manifest
[05:46:40] *** Quits: Ducky (~Ducky@host-92-7-215-211.as13285.net) (Quit: Connection closed)
[05:46:40] <znf> presumably you want to create the manifest after the live stream is running aalready
[05:48:52] *** Joins: Ducky^ (~theo@ks361234.kimsufi.com)
[05:49:15] <Ducky^> sorry znf, I had a crash
[05:49:18] <znf> presumably you want to create the manifest after the live stream is running aalready
[05:49:48] <Ducky^> yes I start the stream running and run the command to make the manifest
[05:54:48] *** Quits: eXtr3m0 (~eXtr3m0@user/eXtr3m0) (Ping timeout: 268 seconds)
[06:00:25] *** Joins: MrZeus_ (~MrZeus@194.37.96.134)
[06:03:17] *** Quits: MrZeus__ (~MrZeus@194.37.96.150) (Ping timeout: 240 seconds)
[06:03:24] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[06:04:10] *** Joins: debayer948 (~debayer@76.82.226.116)
[06:09:01] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[06:22:56] *** vlpn is now known as vulpine
[06:31:37] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Ping timeout: 240 seconds)
[06:31:54] *** Joins: dvanloon (~dvanloon@user/dvanloon)
[06:40:26] *** Quits: Flat_ (~flat@35.137.99.241) (Ping timeout: 268 seconds)
[06:40:31] *** Quits: MrZeus_ (~MrZeus@194.37.96.134) (Ping timeout: 256 seconds)
[06:45:57] *** Joins: Flat (~flat@35.137.99.241)
[07:06:50] *** Joins: irc_user (uid423822@id-423822.lymington.irccloud.com)
[07:07:54] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[07:20:20] *** Quits: jos1 (~jos3@dyndsl-091-248-051-023.ewe-ip-backbone.de) (Ping timeout: 250 seconds)
[07:23:42] *** Joins: reynaldo (~reynaldo@ec2-34-200-7-37.compute-1.amazonaws.com)
[07:23:57] *** Quits: jarthur_ (~jarthur@2603-8080-1540-002d-40a9-cbd8-8be9-e1d1.res6.spectrum.com) (Ping timeout: 240 seconds)
[07:24:31] *** Quits: Jerrk (~Jerrk@185.213.154.238) (Remote host closed the connection)
[07:27:02] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[07:27:09] *** Joins: jarthur (~jarthur@cpe-70-114-198-37.austin.res.rr.com)
[07:33:36] *** Joins: jos1 (~jos3@dyndsl-178-142-065-039.ewe-ip-backbone.de)
[07:41:09] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 256 seconds)
[07:54:07] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[07:54:52] *** Joins: Jerrk (~Jerrk@185.213.154.232)
[08:34:19] *** Joins: Jerrrk (~Jerrk@185.65.135.232)
[08:34:47] *** Quits: Jerrk (~Jerrk@185.213.154.232) (Ping timeout: 256 seconds)
[08:34:47] *** Quits: Jerrrk (~Jerrk@185.65.135.232) (Read error: Connection reset by peer)
[08:37:51] *** Joins: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no)
[08:55:30] <aphysically> oh huh, this hevc encode to mkv ended up with an enormous runtime somehow
[08:57:18] <aphysically> hmm, it's okay when I clip to a timestamp with -t
[08:58:49] <aphysically> maybe it's something weird with the end of the file, let's try seeking to the end and encoding the rest
[09:01:20] <aphysically> nope, so I'll have to encode the entire thing if I want to reproduce probably hmmm
[09:04:18] <aphysically> 1195 hours hmmmm
[09:08:32] <aphysically> dunno probably just something weird about one of the input streams, oh well
[09:09:21] *** Quits: `St0ner (~services@user/st0ner/x-3205467) (Read error: Connection reset by peer)
[09:13:32] *** Joins: vlm (~vlm@user/vlm)
[09:16:09] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:18:11] *** Quits: vlm (~vlm@user/vlm) (Client Quit)
[09:27:09] *** Joins: gucky-chat-laden (~gucky-cha@2a02:a00:f004:1::d6)
[09:27:13] *** Parts: gucky-chat-laden (~gucky-cha@2a02:a00:f004:1::d6) ()
[09:27:32] *** Joins: gucky-chat-laden (~gucky-cha@2a02:a00:f004:1::d6)
[09:33:24] *** Joins: vlm (~vlm@user/vlm)
[09:50:09] *** Joins: KombuchaKip (~kip@192.252.230.5)
[09:51:52] *** Joins: Atsuko (~x@94.242.250.86)
[09:54:37] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[10:03:12] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[10:03:34] *** Joins: debayer948 (~debayer@76.82.226.116)
[10:13:06] *** Joins: Vonter (~Vonter@user/vonter)
[10:19:59] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[10:33:43] *** Joins: fkaa (~fkaa@user/fkaa)
[10:39:08] <rvalue> this PR scares the shit out of me https://github.com/Homebrew/homebrew-core/pull/93167
[10:42:26] *** Joins: nillyhan (~00000000@user/nillyhan)
[10:45:32] *** Joins: Flabb (~Flabb@89.169.42.92)
[10:58:06] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:10:48] *** Joins: someuser (~user@197.54.4.96)
[11:16:31] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[11:27:17] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[11:31:07] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[11:32:12] *** Joins: palasso (~palasso@user/palasso)
[11:32:31] *** Joins: Vonter (~Vonter@user/vonter)
[11:36:15] *** Joins: guest (~guest@161.117.202.209)
[11:36:33] *** Joins: guest100 (~guest@222.128.6.148)
[11:40:17] *** Quits: guest (~guest@161.117.202.209) (Ping timeout: 240 seconds)
[11:46:18] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:59:09] *** Joins: cmp (~cmp@lfbn-ren-1-1575-159.w86-253.abo.wanadoo.fr)
[12:03:05] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[12:03:33] *** Joins: debayer948 (~debayer@76.82.226.116)
[12:25:00] *** frojnd1 is now known as frojnd
[12:30:58] *** Joins: Gaboradon (~Gaboradon@user/Gaboradon)
[12:37:07] *** Quits: guest100 (~guest@222.128.6.148) (Quit: Connection closed)
[12:38:48] *** Joins: rsx (~dummy@ppp-188-174-140-28.dynamic.mnet-online.de)
[12:53:36] *** Joins: lavaball (felix@31.204.155.215)
[12:58:29] *** Quits: treefrob (~treefrob@p2e5429e4.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[13:03:55] *** Joins: keypusher (keypusher@user/keypusher)
[13:05:56] *** Quits: MightyBOB (~MightyBOB@c-76-99-21-35.hsd1.pa.comcast.net) (Remote host closed the connection)
[13:07:26] *** Quits: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37) (Ping timeout: 250 seconds)
[13:11:45] *** Joins: treefrob (~treefrob@p57a967da.dip0.t-ipconnect.de)
[13:12:05] *** Quits: someuser (~user@197.54.4.96) (Ping timeout: 256 seconds)
[13:12:47] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[13:17:58] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[13:26:34] *** Joins: MajorBiscuit (~MajorBisc@c-001-025-008.client.tudelft.eduvpn.nl)
[13:30:28] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[13:32:19] *** Joins: someuser (~user@197.54.4.96)
[13:32:33] *** Joins: eXtr3m0 (~eXtr3m0@user/eXtr3m0)
[13:36:08] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[13:36:08] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[13:50:50] *** Joins: dreamon (~dreamon@ppp-88-217-91-105.dynamic.mnet-online.de)
[14:02:37] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[14:03:00] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[14:03:31] *** Joins: debayer948 (~debayer@76.82.226.116)
[14:06:56] *** Joins: Vonter (~Vonter@user/vonter)
[14:10:26] *** Joins: fling (~fling@user/fling)
[14:15:28] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[14:16:30] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[14:21:57] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 240 seconds)
[14:22:48] *** Joins: nillyhan (~00000000@user/nillyhan)
[14:35:55] *** Quits: nillyhan (~00000000@user/nillyhan) (Quit: Ping timeout (120 seconds))
[14:36:15] *** Joins: nillyhan (~00000000@user/nillyhan)
[14:36:57] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[14:44:17] *** Quits: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37) (Ping timeout: 240 seconds)
[14:47:49] *** Joins: pk08 (~pk08@182.77.119.65)
[14:55:08] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[14:55:30] *** Joins: lavaball (felix@31.204.155.215)
[15:00:02] *** Quits: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37) (Ping timeout: 240 seconds)
[15:01:08] *** Quits: chowbok (~quassel@207.181.244.106) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[15:02:34] *** Joins: chowbok (~quassel@207.181.244.106)
[15:07:14] *** Quits: nillyhan (~00000000@user/nillyhan) (Read error: Connection reset by peer)
[15:08:21] *** Joins: any1 (~andri@yngvason.is)
[15:09:17] *** Quits: HumanG33k (~HumanG33k@2a01:e0a:95:5d90:215:c5ff:fe68:fb04) (Ping timeout: 240 seconds)
[15:11:01] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[15:14:08] *** Joins: nillyhan (~00000000@user/nillyhan)
[15:33:12] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[15:34:29] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[15:39:28] <any1> Adding an audio channel to a live stream (both rtmp and rtsp) adds at least 1s of latency. I guess audio/video sync requires some buffering, but surely it can make do with less?
[15:40:23] <JEEB> are you sure it's not on the player side? I wouldn't be surprised if the players would attempt to sync
[15:40:40] <any1> Yeah, that's what I'm saying, it's the player
[15:40:55] <JEEB> ?
[15:40:58] <any1> Both mpv and ffplay do this.
[15:41:17] <JEEB> tried the low latency profile with mpv?
[15:41:32] <JEEB> but yes, players generally don't default to low latency config since it fights against smooth playback :)
[15:42:07] <JEEB> vlc 4 is apparently also getting a low latency config
[15:42:34] <any1> I've tried a few different settings for mpv. I'm really just wondering where in ffmpeg the latency gets added.
[15:42:37] *** Quits: five64333 (~five6@8.40.26.70) (Ping timeout: 240 seconds)
[15:42:46] <JEEB> ok, so now you're back to FFmpeg?
[15:42:54] *** Joins: sinajit (~sinajit@147.91.27.102)
[15:42:57] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Ping timeout: 240 seconds)
[15:43:04] <any1> mpv and ffplay use ffmpeg underneath?
[15:43:16] <JEEB> sure
[15:43:19] <JEEB> they're API clients
[15:43:24] <JEEB> the API can be utilized in different ways
[15:43:48] <JEEB> I'm just trying to understand whether you're complaining about FFmpeg apparently adding latency when encoding
[15:43:56] <JEEB> or do you just have a problem with clients not doing stuff low latency enough
[15:44:11] <any1> ffmpeg maybe adding latency when decoding is what I'm wondering about
[15:44:12] <JEEB> and you popped up on #ffmpeg and thus I started making sure that your clients aren't adding latency
[15:44:49] <JEEB> any latency that FFmpeg *decoding* adds is measured in frames, and if you just process the input as fast as possible you can ignore that since you will catch up ASAP
[15:44:51] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[15:44:52] <JEEB> it's up to the API user
[15:45:35] <any1> Ok, so the demuxer doesn't try to do any av-sync. Well, that's good
[15:45:45] <JEEB> lol
[15:45:58] <JEEB> you were just talking about decoding and now suddenly you're saying you meant demuxing?
[15:46:04] <JEEB> since I was specifically explaining about decoding
[15:46:33] <JEEB> demuxing may buffer but the thing is, even if you buffer some amount you still can start eating those packets up at speed
[15:47:45] <JEEB> mpv's `--profile=low-latency --untimed` is generally speaking a pretty good test
[15:48:05] <JEEB> oh, and --no-config in case you have random stuff in your config :P
[15:48:16] <any1> please excuse my lax adherence to strict terminology
[15:48:21] *** Joins: five64333 (~five6@8.40.26.70)
[15:48:44] <JEEB> yea, it's just that I tried to help/explain you specifically with what you asked
[15:48:57] <JEEB> since there's different gotchas with different levels
[15:49:01] <any1> of course. my bad.
[15:49:19] <JEEB> but in either case, it's more up to the API user to optimize for (low) latency
[15:49:21] <sinajit> Hello, everyone!
[15:49:22] <sinajit> I am trying to insert a dynamic OSD overlay over a camera feed and send the result via UDP/RTP. I have written the code to generate the OSD from some telemetry data in raw RGBA format.
[15:49:22] <sinajit> Now, what is the best way to overlap the OSD with the camera feed? Do I need to write a custom ffmpeg filter or is there a way to somehow provide my OSD stream as ffmpeg input directly?
[15:49:23] <sinajit> Thanks in advance :)
[15:51:17] <any1> JEEB: Thanks
[15:51:50] *** Joins: djk (~Thunderbi@74.102.240.250)
[15:58:02] *** Quits: omegatron (~some@p5484973e.dip0.t-ipconnect.de) (Quit: Power is a curious thing.It can be contained, hidden, locked away,and yet it always breaks free.)
[15:58:36] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 250 seconds)
[15:59:11] *** Joins: nillyhan (~00000000@user/nillyhan)
[16:02:48] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[16:03:27] *** Joins: debayer948 (~debayer@76.82.226.116)
[16:04:22] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[16:04:41] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[16:06:59] *** Quits: rsx (~dummy@ppp-188-174-140-28.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[16:14:40] *** Quits: irc_user (uid423822@id-423822.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[16:19:37] *** Joins: rsx (~dummy@ppp-188-174-152-164.dynamic.mnet-online.de)
[16:23:42] *** Quits: sinajit (~sinajit@147.91.27.102) (Quit: Connection closed)
[16:28:42] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[16:28:57] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[16:30:40] *** Quits: someuser (~user@197.54.4.96) (Ping timeout: 250 seconds)
[16:32:49] *** Joins: Volgaar (~volgaar@147.94.235.17)
[16:32:52] *** Joins: someuser (~user@197.54.4.96)
[16:32:53] *** Joins: anotheruser (~user@197.54.4.96)
[16:35:31] *** Quits: dreamon (~dreamon@ppp-88-217-91-105.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[16:40:44] *** Quits: anotheruser (~user@197.54.4.96) (Quit: Leaving)
[16:41:30] *** Quits: Volgaar (~volgaar@147.94.235.17) (Ping timeout: 250 seconds)
[16:42:14] *** Joins: SegmentFault (~SegmentFa@47.241.29.141)
[16:52:18] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[16:52:34] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[17:07:38] *** Quits: SegmentFault (~SegmentFa@47.241.29.141) (Quit: Client closed)
[17:13:09] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[17:13:14] *** Joins: egrain (felix@31.204.155.215)
[17:16:13] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[17:16:32] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[17:24:15] *** Quits: someuser (~user@197.54.4.96) (Ping timeout: 256 seconds)
[17:26:26] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[17:31:37] *** Joins: SegmentFault (~SegmentFa@101.86.249.9)
[17:32:21] *** Joins: someuser (~user@197.54.4.96)
[17:33:56] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 250 seconds)
[17:37:57] *** Quits: ttys000 (~ttys000@user/ttys000) (Read error: Connection reset by peer)
[17:38:51] *** Joins: Volgaar (~volgaar@147.94.235.17)
[17:40:38] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[17:41:00] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[17:43:01] *** Joins: minimal (~minimal@user/minimal)
[17:46:33] *** Quits: SegmentFault (~SegmentFa@101.86.249.9) (Quit: Client closed)
[17:59:37] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[18:00:14] *** Joins: dreamon (~dreamon@ppp-88-217-91-105.dynamic.mnet-online.de)
[18:05:08] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[18:05:23] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[18:05:39] *** Quits: pong (~beaver@user/pong) (Ping timeout: 276 seconds)
[18:08:16] *** Joins: pong (~beaver@user/pong)
[18:09:01] *** Quits: debayer948 (~debayer@76.82.226.116) (Ping timeout: 256 seconds)
[18:09:28] *** Quits: Volgaar (~volgaar@147.94.235.17) (Ping timeout: 250 seconds)
[18:12:23] *** Joins: kurosu (uid342582@id-342582.hampstead.irccloud.com)
[18:12:39] *** Joins: debayer948 (~debayer@76.82.226.116)
[18:19:26] *** Quits: debayer948 (~debayer@76.82.226.116) (Quit: Ping timeout (120 seconds))
[18:19:43] *** Joins: debayer948 (~debayer@76.82.226.116)
[18:22:05] *** Joins: jdarnley (~J_Darnley@d51A44418.access.telenet.be)
[18:22:59] *** Quits: J_Darnley (~J_Darnley@d51a44418.access.telenet.be) (Ping timeout: 256 seconds)
[18:26:17] *** Joins: c7s (~c7s@user/c7s)
[18:28:52] *** Quits: someuser (~user@197.54.4.96) (Read error: Connection reset by peer)
[18:28:58] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[18:29:13] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[18:30:17] *** Quits: aphysically (~aphysical@user/aphysically) (Ping timeout: 240 seconds)
[18:33:52] *** Joins: aphysically (~aphysical@user/aphysically)
[18:34:56] *** Quits: pong (~beaver@user/pong) (Remote host closed the connection)
[18:35:42] *** Joins: pong (~beaver@user/pong)
[18:37:28] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[18:37:32] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[18:38:57] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[18:45:51] *** Joins: Jerrk (~Jerrk@185.65.135.232)
[18:47:15] *** Quits: pong (~beaver@user/pong) (Ping timeout: 276 seconds)
[18:47:32] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 240 seconds)
[18:47:41] *** Joins: pong (~beaver@user/pong)
[18:49:56] *** Joins: someuser (~user@197.54.4.96)
[18:52:50] *** Joins: MzDay (~MzDay@93-172-149-158.bb.netvision.net.il)
[18:53:05] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[18:53:20] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[18:54:23] <MzDay> Hey, I have a problem with a video I am encoding using the ffmpeg api in C++, the output video seems to be using different color spaces in VLC vs another media player, any idea what could cause it?
[18:54:43] *** Quits: debayer948 (~debayer@76.82.226.116) (Ping timeout: 256 seconds)
[18:55:07] <MzDay> I tried setting `color_range`, `color-trc` and `colorspace`, it does seem to change some stuff but there is still inconsistency between media players
[18:57:15] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[18:57:46] <JEEB> MzDay: some players are hard-coded but it's really hard to know what you're doing etc with that little info :)
[18:58:22] <MzDay> Can I post source here?
[18:58:38] <JEEB> pastebin/github gist and link here
[19:04:28] <MzDay> https://pastebin.com/uXASQnps
[19:04:28] <MzDay> Ok, this is the full source,
[19:04:29] <MzDay> But I think maybe those lines are the problem:
[19:04:29] <MzDay> https://pastebin.com/Fj0grafr
[19:06:25] <JEEB> is this android MediaRecorder per chance?
[19:06:37] <MzDay> no
[19:06:53] <MzDay> Its part of the example in ffmpeg site
[19:07:06] <MzDay> and I changed a few things for testing and for something I am working on
[19:07:40] <JEEB> for YCbCr<->RGB conversion I definitely recommend utilizing something like zimg (if CPU based is needed) or libplacebo (if GPU based is needed)
[19:07:51] <JEEB> although not 100% sure if libplacebo does YCbCr output
[19:08:29] *** Quits: someuser (~user@197.54.4.96) (Read error: Connection reset by peer)
[19:08:35] <MzDay> instead of sws_scale?
[19:08:35] *** Joins: debayer948 (~debayer@76.82.226.116)
[19:08:58] <JEEB> yea, it requires you to actually set the values but you should actually know what you're getting
[19:09:19] <JEEB> but basically swscale by default utilizes BT.601 primaries and matrix
[19:09:26] <JEEB> you can set it to BT.709 as well
[19:09:38] <JEEB> basically it has a single option for this which is why they're not separate
[19:09:43] <JEEB> and I just hope the values in swscale are that
[19:10:35] <JEEB> also thankfully now there's an AVFrame API for swscale
[19:10:46] <JEEB> so you can feed an AVFrame and get an AVFrame :P
[19:11:09] <MzDay> I am not I am following (just started using ffmpeg), but you think the problem is the color conversion and I'll need to change it, am I correct?
[19:11:36] <MzDay> I'll read up about BT.601 and 709 to catch up :)
[19:11:49] <JEEB> I think it's worth it to just stop and take a step back
[19:12:08] <JEEB> but do grab H.273, that's going to be useful to understand those things in the future :)
[19:12:20] <JEEB> that documents these things
[19:12:47] <MzDay> I really want to step back and research more but my boss is breathing down my neck lol
[19:13:01] <JEEB> so, since your first question was regarding "different players show this differently"
[19:13:01] <MzDay> I'll try to read about those things hopefully understanding the issue
[19:13:15] <JEEB> let's make an example that you should more or less know how it should show up
[19:13:34] <MzDay> Ok
[19:15:28] <JEEB> take an sRGB PNG file, and `ffmpeg -v verbose -i input.png -vf "zscale=m=709,format=pix_fmts=yuv420p" -c:v libx264 -crf 21 -color_primaries:v bt709 -color_trc:v iec61966-2-1 -movflags +faststart out.mp4`
[19:15:35] <JEEB> or anything else that is sRGB basically
[19:15:50] <JEEB> that uses zscale filter which utilizes zimg internally to then convert only the matrix
[19:16:10] <JEEB> sRGB is already with bt709 primaries so we tag that, as well as the sRGB transfer
[19:16:23] <JEEB> that should show up in capable players as something very close to the PNG
[19:17:09] <MzDay> Okay I'll try this right now
[19:17:25] <JEEB> what's btw your actual use case in the end?
[19:17:36] <JEEB> what will be your input and what will be your output?
[19:17:42] <MzDay> I am trying to stream frames from Unity to FFmpeg to generate a video
[19:17:43] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[19:17:58] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[19:19:56] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[19:20:33] <MzDay> okay i generated the video
[19:20:44] <MzDay> VLC wont run it, but I can see the preview from Windows
[19:20:54] <JEEB> you probably need to not play it :D
[19:21:01] <JEEB> `mpv --pause file.mp4`
[19:21:06] <JEEB> for example
[19:21:09] <JEEB> which will start it paused
[19:21:18] <JEEB> something similar probably needed for vlc too
[19:21:46] <MzDay> Okay got it
[19:23:22] <MzDay> The video looks correct
[19:23:34] <JEEB> anyways, the point being that if something now didn't show that correct then it isn't interpreting the values correctly
[19:23:37] <JEEB> :)
[19:23:48] <JEEB> so you should more or less know whether it's correctly poking at it or not
[19:24:06] <JEEB> (more or less validation of what you're trying to validate things with)
[19:24:12] <JEEB> if that makes sense
[19:24:45] <MzDay> Yeah that make sense
[19:25:28] <JEEB> thus, we move to your swscale usage
[19:26:02] <JEEB> if you're not setting any settings I think it interprets RGB by default as full range, and YCbCr as limited range. and bundles matrix and primaries into a single value
[19:26:10] <JEEB> transfer function as far as I understand it does not touch
[19:27:18] <JEEB> and the default for matrix & primaries is BT.601
[19:27:36] <JEEB> it is configurable, just like range etc
[19:27:59] <JEEB> but yea, its design does show that it's from the early 2000s :)
[19:28:01] <MzDay> So basically I need something different than 601? like 709 you used?
[19:28:09] <MzDay> Lol
[19:28:17] <JEEB> well, it depends
[19:28:36] <JEEB> if you are doing RGB to YCbCr you are in control, so if you want BT.709 you can set that. you then have to of course then set the metadata for the encoder for it
[19:28:50] <kepstin> unless you're working with SD video you probably want to avoid 601
[19:28:54] <JEEB> for YCbCr to RGB you need to know according to the values you receive for the input
[19:29:32] <JEEB> kepstin: yea but I'm mostly trying to get the point across of "know what you deal with, and then set that stuff"
[19:29:59] <JEEB> and since transfer function does not get poked by swscale (as far as I can understand?)
[19:30:08] *** Quits: eccentric-introv (~eccentric@2001:470:69fc:105::1:5909) (Quit: You have been kicked for being idle)
[19:30:08] <JEEB> you just pass that metadata from the input
[19:30:21] *** Joins: eccentric-introv (~eccentric@2001:470:69fc:105::1:5909)
[19:30:22] *** Parts: eccentric-introv (~eccentric@2001:470:69fc:105::1:5909) ()
[19:32:19] <MzDay> Okay I think I get it, I am doing RGBA to YCbCr (Don't know if the A matters but that's the data in memory)
[19:33:02] <JEEB> OK, in a manner that's simpler :)
[19:33:08] <JEEB> your input is supposed to be sRGB, right?
[19:33:14] <JEEB> the actual data within those RGB planes
[19:34:15] <MzDay> I am actually not sure how Unity sends the frame let me check that real quick
[19:34:21] <MzDay> I think its sRGB
[19:34:41] <JEEB> yea, most game engines it's going to be sRGB unless you're doing HDR or something
[19:34:55] <kepstin> if it's pulling them from the screen surface and you're not running with HDR output then it should be sRGB yeah
[19:35:23] <MzDay> Yeah sRGB
[19:36:09] <JEEB> ok, so you should be able to then set swscale to BT.709 primaries&matrix with https://github.com/FFmpeg/FFmpeg/blob/master/libswscale/swscale.h#L90
[19:36:19] <JEEB> also I do recommend utilizing the AVFrame based API :D
[19:36:36] <JEEB> and then you know that you should have utilized a BT.709 matrix conversion
[19:37:01] <JEEB> and thus you in theory (?) should be OK with flagging the same values as in that zscale example we did with the PNG
[19:37:08] <JEEB> primaries and matrix as BT.709
[19:37:26] <JEEB> and transfer being that iec61966-2-1
[19:37:30] <JEEB> which is sRGB
[19:37:51] <JEEB> if swscale does it correctly, then you should have correct metadata set to what you are doing
[19:38:37] <JEEB> I think sws_setColorspaceDetails is the thing to set values?
[19:38:47] <MzDay> Yeah I just read about it !
[19:38:59] <MzDay> I will try to set it up right now and see the results
[19:39:38] <MzDay> also I'll try going with your recommendation! sounds really interesting and I really want to learn more about it
[19:40:16] <JEEB> it's kind of unfortunate that swscale only has a single value for the different things, since at the end it's three things (plus color range) that matter for rendering
[19:40:25] <JEEB> primaries, matrix and transfer
[19:40:35] <JEEB> swscale just has one enum for "lol BT.709"
[19:40:47] <JEEB> and I don't know whether it's primaries or matrix, or both
[19:40:51] <JEEB> probably includes matrix
[19:41:20] <JEEB> in theory sRGB to BT.709/BT.709 YCbCr only requires matrix to be applied, after all
[19:41:36] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[19:41:37] <JEEB> so if it ends up looking correct, maybe it then does not apply primaries adjustment?
[19:41:51] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[19:42:37] <MzDay> I think I got the same result, I did it like this:
[19:42:37] <MzDay> sws_setColorspaceDetails(swsContext, sws_getCoefficients(SWS_CS_ITU601), 0,
[19:42:38] <MzDay>                              sws_getCoefficients(SWS_CS_ITU709), 0,
[19:42:38] <MzDay>                              0, 1 << 16, 1 << 16);
[19:42:43] <MzDay> right before the sws_scale
[19:43:31] <JEEB> that sets output to BT.601
[19:43:37] <MzDay> Oh ops
[19:43:45] <JEEB> I just read the doxy
[19:43:58] <JEEB> and your input is RGB so not sure if inv_table gets utilized?
[19:44:16] <JEEB> >  @param inv_table the yuv2rgb coefficients describing the input yuv space
[19:44:41] <JEEB> not 100% sure of course if these get ignored with RGB pix_fmt
[19:45:36] <JEEB> also I am pretty sure the RGB is full range and you want limited range in the output?
[19:46:59] <JEEB> btw, this document is what defines the enums utilized in video codecs for the trinity (primaries, matrix, transfer function) and describes them https://www.itu.int/rec/T-REC-H.273-202107-I/en
[19:47:13] <MzDay> I have set AVCOL_RANGE_JPEG, so the output is using full range ( I assume, based on a comment), but I tried using the limited range and got the same result
[19:48:18] <JEEB> I see 0, 0 there. which looks like limited/limited ? also for YCbCr unless you know the stuff that is going to be playing your stuff supports the full range flag, you should utilize limited range for YCbCr output side
[19:48:58] <MzDay> Okay got it!
[19:49:21] <MzDay> Removed the flag, I'll go with limited range
[19:49:45] <JEEB> what swscale does is set in the setColorspaceDetails
[19:49:51] <JEEB> or well, what you tell it to do
[19:49:59] <JEEB> then what you set as metadata should match that
[19:52:05] <JEEB> so if you tell swscale to utilize full range output, you can set AVCOL_RANGE_JPEG, and if you utilize limited range output (default for YCbCr) you set AVCOL_RANGE_MPEG
[19:52:22] <JEEB> then for transfer function your input is sRGB so you want to utilize the sRGB transfer
[19:52:30] *** Joins: danielpetri (~danielpet@131.159.199.234)
[19:52:52] <MzDay> What do you mean "utilize the sRGB transfer"?
[19:53:05] *** Quits: wyatt8750 (~wyatt8740@138.199.22.173) (Ping timeout: 256 seconds)
[19:53:35] <JEEB> like, you know your image was that, and you have not changed your transfer
[19:53:38] <JEEB> > AVCOL_TRC_IEC61966_2_1 = 13, ///< IEC 61966-2-1 (sRGB or sYCC)
[19:53:40] <JEEB> and that is it
[19:54:22] <JEEB> your matrix should be BT.709 after the RGB->YCbCr conversion so AVCOL_SPC_BT709       = 1,  ///< also ITU-R BT1361 / IEC 61966-2-4 xvYCC709 / derived in SMPTE RP 177 Annex B
[19:54:45] <JEEB> and primaries should hopefully not be changed from your input sRGB, so AVCOL_PRI_BT709       = 1,  ///< also ITU-R BT1361 / IEC 61966-2-4 / SMPTE RP 177 Annex B
[19:55:11] <JEEB> in other words, set in the encoder based on your input plus what conversions you've possibly done to it
[19:55:41] <MzDay> Okay got it!
[19:55:50] <MzDay> Thank you!
[19:56:05] <JEEB> and yes, due to hysterical raisins matrix became AVColorSpace :)
[19:56:41] <MzDay> Ok so basically:
[19:56:42] <MzDay> codec_context->color_range = AVColorRange::AVCOL_RANGE_MPEG;
[19:56:42] <MzDay> codec_context->color_trc = AVColorTransferCharacteristic::AVCOL_TRC_IEC61966_2_1;
[19:56:43] <MzDay> codec_context->colorspace = AVColorSpace::AVCOL_SPC_BT709;
[19:56:43] <MzDay> codec_context->color_primaries = AVColorPrimaries::AVCOL_PRI_BT709;
[19:56:43] <MzDay> I did this
[19:56:54] <MzDay> The output video was indeed identical to other players, but different from the source image
[19:57:12] <MzDay> but that is probably okay, because I assume maybe its only the color conversion
[19:57:32] <JEEB> you might want to spin it through zimg matrix-only conversion and check?
[19:57:46] <MzDay> I will probably should
[19:57:47] <JEEB> also make sure those values for swscale that you set match the metadata that you are set in the encoder
[19:57:58] <JEEB> since the idea is that the two match :P
[19:58:04] <MzDay> Noted!
[19:58:31] <MzDay> Thank you very much! I'll be heading home so I'll update tomorrow hopefully with some success! :D
[19:58:50] <JEEB> and if you get tired by swscale being imprecise etc, then I recommend poking at zimg/zscale
[19:59:05] <JEEB> since it will require you to actually specify the inputs and outputs
[19:59:25] <JEEB> I think the only special case is RGB to YCbCr where you may just define the output matrix
[19:59:42] <JEEB> since that is the only conversion in that case zimg will undertake
[19:59:49] <JEEB> it will leave your primaries and transfer alone
[20:01:06] <MzDay> I think I got it, I'll try zimg when I get home
[20:01:27] <MzDay> Thank you again!
[20:05:38] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[20:05:55] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:07:58] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[20:09:27] *** Joins: System_Error (~SystemErr@user/systemerror)
[20:12:05] *** Joins: someuser (~user@197.54.4.96)
[20:13:43] <danielpetri> Hi. A while ago I submitted a small patch (https://patchwork.ffmpeg.org/project/ffmpeg/patch/20210803094534.1000-1-daniel.petri@tum.de/) that makes it possible to load referenced images in SVG files. Does anyone know who I could reach out to in order to expedite the review process? I'd be happy to see this enhancement included in the upcoming
[20:13:43] <danielpetri> FFmpeg versions. Thanks in advance
[20:15:04] <JEEB> I recommend poking #ffmpeg-devel :)
[20:15:26] <JEEB> this is the channel where various developers don't sit f.ex. because they're not as masochistic as I am to help random people
[20:16:48] <danielpetri> Thank you :)
[20:22:02] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[20:22:53] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Quit: taupiqueur)
[20:24:21] <kepstin> danielpetri: good luck with that :) Main comment I have is that you need to make sure that without the option, external files aren't loaded (for security reasons).
[20:28:05] *** Quits: rsx (~dummy@ppp-188-174-152-164.dynamic.mnet-online.de) (Quit: rsx)
[20:29:33] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[20:29:50] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:32:05] *** Joins: zmt00 (~zmt00@user/zmt00)
[20:37:04] <danielpetri> kepstin: ok I see! thank you, I will
[20:40:34] *** Joins: crashrep (~crashrep@user/crashrep)
[20:43:47] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[20:44:35] *** Joins: debayer948 (~debayer@76.82.226.116)
[20:44:39] *** Quits: dreamon (~dreamon@ppp-88-217-91-105.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[20:48:25] *** Joins: Jerrrk (~Jerrk@185.195.233.155)
[20:49:25] *** Quits: Jerrrk (~Jerrk@185.195.233.155) (Remote host closed the connection)
[20:50:02] *** Quits: Jerrk (~Jerrk@185.65.135.232) (Ping timeout: 240 seconds)
[20:54:01] *** Joins: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de)
[20:54:17] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[20:54:32] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:57:12] *** Joins: Volgaar (~volgaar@147.94.235.17)
[21:00:07] *** Joins: MrZeus_ (~MrZeus@81.92.205.22)
[21:00:46] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[21:01:13] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[21:02:42] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[21:02:55] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[21:04:30] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[21:05:16] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[21:05:43] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[21:08:27] *** Quits: jkwnki (~jkwnki@p4fedb70b.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[21:09:06] *** Quits: cmp (~cmp@lfbn-ren-1-1575-159.w86-253.abo.wanadoo.fr) (Quit: Connection closed)
[21:10:15] *** Joins: jkwnki (~jkwnki@p2e579abf.dip0.t-ipconnect.de)
[21:15:22] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[21:16:02] *** Joins: l4yer (~l4yer@2001:ac8:31:8900:1011:28c3:8ee7:36c1)
[21:18:13] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[21:18:28] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[21:18:56] *** Joins: FreEm1nD (~FreEm1nD@mail.guarapari.store)
[21:20:30] *** Parts: FreEm1nD (~FreEm1nD@mail.guarapari.store) ()
[21:21:37] *** Quits: MajorBiscuit (~MajorBisc@c-001-025-008.client.tudelft.eduvpn.nl) (Ping timeout: 240 seconds)
[21:23:50] *** Joins: irc_user (uid423822@id-423822.lymington.irccloud.com)
[21:25:01] *** Quits: System_Error (~SystemErr@user/systemerror) (Remote host closed the connection)
[21:25:16] *** Quits: pk08 (~pk08@182.77.119.65) (Quit: Leaving)
[21:25:38] *** Joins: System_Error (~SystemErr@user/systemerror)
[21:28:51] *** Quits: Ducky^ (~theo@ks361234.kimsufi.com) (Ping timeout: 256 seconds)
[21:29:01] *** Joins: dreamon (~dreamon@p54b1472c.dip0.t-ipconnect.de)
[21:29:13] *** Joins: Ducky^ (~theo@ks361234.kimsufi.com)
[21:46:59] *** Quits: dreamon (~dreamon@p54b1472c.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[21:48:18] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 250 seconds)
[21:48:21] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[21:48:29] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Client Quit)
[21:48:53] *** Joins: dreamon (~dreamon@p54b1472c.dip0.t-ipconnect.de)
[21:52:37] *** Quits: someuser (~user@197.54.4.96) (Ping timeout: 240 seconds)
[21:59:58] *** Quits: fkaa (~fkaa@user/fkaa) (Remote host closed the connection)
[22:02:16] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[22:02:57] *** Quits: aphysically (~aphysical@user/aphysically) (Ping timeout: 240 seconds)
[22:03:42] *** Joins: aphysically (~aphysical@user/aphysically)
[22:06:35] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[22:06:50] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[22:11:22] <irc_user> for `ffmpeg -f concat -i file.txt`, it seems like you have to escape quotation marks and apostrophes? For example if the filename is something horrible like `a"b'c"d'`, it doesn't appear to work properly. Is there a convenient way to generate the text file with escaped quotes?
[22:13:21] *** Joins: MightyBOB (~MightyBOB@c-76-99-21-35.hsd1.pa.comcast.net)
[22:13:49] *** Quits: debayer948 (~debayer@76.82.226.116) (Ping timeout: 256 seconds)
[22:15:07] <BtbN> Put it in '' and only escape '
[22:16:40] *** Quits: Inglebert (~juju@2600:6c63:427f:2fec:dc8:bccf:7b94:cb5) (Remote host closed the connection)
[22:18:41] <irc_user> Okay thanks, I guess I can just do `%s/'/\\'/g` in vim if I only have to escape one character.
[22:23:01] *** Joins: Buster (~Buster@46.160.36.66)
[22:23:51] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[22:24:42] *** Joins: Atsuko (~x@94.242.254.66)
[22:27:29] *** Joins: Jerrk (~Jerrk@185.195.233.155)
[22:27:54] *** Joins: debayer948 (~debayer@76.82.226.116)
[22:31:32] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[22:31:50] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[22:34:18] <kepstin> note that you can't actually escape a ' in side ' quotes in most unix shells
[22:35:02] <kepstin> often people do quotes like 'here'"'"'s some quoted text' to work around that :/
[22:35:29] <kepstin> (inside ' quotes you can put any character other than ' without needing escaping)
[22:36:37] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[22:37:14] <irc_user> kepstin: I think I did run into that issue just now, thank you for explaining! I actually found the surrounding apostrophes in `file '1.mp4'` can just be omitted entirely.
[22:38:33] <irc_user> Still kind of verbose to do `ls | vim -` `:%s/'/\\'/g` `:%norm Ifile ` though to be honest haha
[22:40:40] *** Quits: nobiz (~nobiz@user/nobiz) (Quit: The Lounge - https://thelounge.chat)
[22:42:49] *** Joins: nobiz (~nobiz@user/nobiz)
[22:43:12] *** Quits: danielpetri (~danielpet@131.159.199.234) (Quit: Connection closed)
[22:48:49] *** Quits: nobiz (~nobiz@user/nobiz) (Quit: The Lounge - https://thelounge.chat)
[22:50:37] *** Joins: nobiz (~nobiz@user/nobiz)
[22:54:33] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[22:54:49] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[22:57:42] <furq> irc_user: printf %q
[22:58:43] <irc_user> furq: I don't think I have that option on MacOS unfortunately, maybe I'll try installing GNU utils on this. Thank you :)
[23:00:00] <furq> it's usually a shell builtin unless you call /usr/bin/printf
[23:00:16] <kepstin> well, in order to use printf %q you have to have the input already in a form that you can pass to printf as one argument - i.e. in a shell variable or otherwise already quoted.
[23:00:35] <kepstin> but if you're just using ls - most implementations of ls have an option to produce shell-quoted names
[23:01:00] <furq> to generate a concat list then presumably you have the filename as a loop variable
[23:01:53] <irc_user> `/usr/bin/printf %q` `printf: illegal format character q`
[23:02:01] <irc_user> oh you said unless
[23:02:03] <irc_user> sec...
[23:02:12] <irc_user> Oh you're right
[23:02:37] *** Quits: debayer948 (~debayer@76.82.226.116) (Ping timeout: 240 seconds)
[23:05:34] <furq> printf 'file "%q"\n' *
[23:05:40] <furq> if you want everything in the directory
[23:05:44] <irc_user> Oh awesome it worked, thanks fur! Earlier when I was googling solutions I was doing `printf("%q"` which must be different than without parenthesis
[23:06:47] <irc_user> I had no idea printf could glob by itself
[23:07:10] <irc_user> Oh it doesn't, bash does the globbing and prints takes all the args
[23:07:14] <irc_user> cool
[23:07:30] <irc_user> This is so much faster
[23:10:35] *** Quits: Volgaar (~volgaar@147.94.235.17) (Quit: WeeChat 3.4)
[23:16:08] *** Joins: debayer948 (~debayer@76.82.226.116)
[23:18:33] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[23:18:48] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[23:28:59] *** Quits: Buster (~Buster@46.160.36.66) (Ping timeout: 256 seconds)
[23:28:59] *** Quits: nick87720z (~nick87720@196.10-157-90.telenet.ru) (Remote host closed the connection)
[23:29:11] *** Joins: Buster (~Buster@46.160.36.66)
[23:34:21] *** Quits: debayer948 (~debayer@76.82.226.116) (Remote host closed the connection)
[23:36:02] *** Joins: debayer948 (~debayer@76.82.226.116)
[23:43:45] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[23:44:01] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[23:48:55] *** Quits: finsternis (~X@23.226.237.192) (Quit: Changing server)
[23:49:19] *** Joins: finsternis (~X@23.226.237.192)
[23:55:15] *** Quits: debayer948 (~debayer@76.82.226.116) (Ping timeout: 256 seconds)
