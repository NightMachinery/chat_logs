[00:04:34] *** Quits: dangerousdave (~dangerous@host-92-16-216-211.as13285.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:06:13] <rvalue> i am trying to understand folder mounts in docker. out of the 3 folder mounts, 2 folders, inside the container, are owned by root and 1 by the container default user. Just trying to confirm, even if the  mount is ro or rw, the folder can be owned by any container user, right?
[00:06:48] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[00:07:25] <rvalue> if i do a chown on any of these folders, how will the permissions on the host for these folders be effected?
[00:08:34] <dodo> rvalue: do you mean bind mount?
[00:08:36] *** Joins: dangerousdave (~dangerous@host-92-16-216-211.as13285.net)
[00:09:08] *** Quits: dangerousdave (~dangerous@host-92-16-216-211.as13285.net) (Client Quit)
[00:09:53] <dodo> rvalue: if yes, they are the same filesystem. uids in the container might be different though
[00:11:05] *** Quits: PeGaSuS (ubuntu@user/pegasus) (Quit: Goodbye! - WeeChat 3.4)
[00:11:34] <rvalue> yes they are bind mounts
[00:12:03] *** Joins: PeGaSuS (ubuntu@user/pegasus)
[00:12:05] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[00:12:25] <bdax> https://blog.gougousis.net/file-permissions-the-painful-side-of-docker/
[00:12:25] <dodo> then inside the container they are "owned" by whoever has the samd uid as the owner on the host
[00:12:27] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Client Quit)
[00:12:51] <dodo> there's really nothing painful about it. it's just how filesystems work
[00:13:33] <bdax> well docker promises to create isolated environments, but that's an area where the sandbox breaks down and the container internals start to leak out
[00:13:55] <dodo> if you have a bind mount you chose not to be isolated
[00:14:54] *** Joins: waldo323 (~waldo323@d14-69-96-170.try.wideopenwest.com)
[00:15:37] <rvalue> i see.. so no matter what i do, i can never get this working correctly as not all folders are owned by the same user
[00:15:56] <dodo> rvalue: which problem do you have?
[00:16:17] <bdax> the link I posted has some solutions, not ideal, but workable
[00:16:37] <rvalue> checking
[00:16:55] <bdax> personally I just have the container set the permissions to whatever it needs and live with it
[00:17:13] <dodo> rvalue: fwiw, when i want +rw in a bind mount i just create the docker user with the same uid/gid as the host user
[00:19:20] *** Quits: PeGaSuS (ubuntu@user/pegasus) (Quit: Goodbye! - WeeChat 3.4)
[00:19:34] *** Joins: PeGaSuS (ubuntu@user/pegasus)
[00:23:07] *** Quits: PeGaSuS (ubuntu@user/pegasus) (Client Quit)
[00:23:24] *** Joins: PeGaSuS (ubuntu@user/pegasus)
[00:27:49] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:29:46] *** Quits: MikeBux (~MikeBux@host-091-097-126-240.ewe-ip-backbone.de) (Quit: Don't follow me)
[00:33:43] *** Quits: bdax (~tom@05432be4.skybroadband.com) (Quit: bdax)
[00:34:27] *** Joins: Davidian1024 (~Davidian1@d149-67-174-81.clv.wideopenwest.com)
[00:35:37] <rvalue> so in the docker file reference, USER <user>[:<group>], say USER hello, will hello have a uid of 0 in the container?, what if after some commands i changed the user like, USER world, what uid will user world have? (neither hello or world user exist on the host)
[00:36:33] *** Quits: Davidian1024 (~Davidian1@d149-67-174-81.clv.wideopenwest.com) (Client Quit)
[00:36:34] <ikke> rvalue: It will look for the user in /etc/passwd
[00:37:24] <ikke> You can also set the UID / GID directly
[00:40:08] <rvalue> hmm so it literally fails to build, executor failed running [/bin/sh -c touch /touch-hello]: unable to find user hello: no matching entries in passwd file
[00:40:39] <ikke> So you need to run adduser / useradd hello
[00:40:49] <ikke> (with appropriate flags)
[00:41:08] *** Joins: nomercy (~wine@user/nomercy)
[00:42:10] <artok> one good one would be doing uid and gid checks on entrypoint and hassle with permissions using uid0 until checks are clear, and then demote to desired uid
[00:43:15] <rvalue> ikke: yes
[00:44:28] *** Parts: nomercy (~wine@user/nomercy) ()
[00:44:39] *** Quits: sgt_chuckles (~sgt_chuck@pool-71-190-209-205.nycmny.fios.verizon.net) (Quit: Client closed)
[00:49:27] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[00:53:21] *** Joins: Bruners (~lasseb@178.16.64.98)
[00:59:22] *** Joins: ario (~ario@159.65.220.102)
[00:59:43] <ario> So I have this docker-compose setup: https://github.com/bitnami/bitnami-docker-redis-cluster/blob/master/docker-compose.yml
[01:00:07] <ario> but in my driver library when i set the hosts to: redis-node-0..5 with the password, it can't ocnnect
[01:00:46] <ario> i can docker exec -it connect just fine
[01:01:41] <ario> i'm so confused
[01:02:56] <ario> maybe it's a NAT mapping
[01:07:10] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[01:10:20] <tabakhase> ario connect from where?
[01:11:05] <ario> from another container, a test container
[01:11:43] <tabakhase> if "other containers" shall connect to it, from the same compose file you can use "redis-node-5" yes, from OTHER containers you cant, youll need to share a network between the two
[01:13:05] <tabakhase> so, "docker-exec redis-node-4 ping redis-node-5" should theoretically be fine  (compose creates a network spanning all containers in its file by default)
[01:13:17] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[01:14:40] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-3d81-c410-7c1c-5594.res6.spectrum.com)
[01:14:54] <tabakhase> if "thats from another compose stack" youd elect one as "master", in there you define a network with a mixed name -- then on your other composefile(s) you retagte that very same network, but declare is as external:true ((that way THIS composefile will not try to create/delete the network while your MAIN-container is still alive in it)) -- a pattern youd use to "share the global ingress 
[01:14:55] <tabakhase> nginx/traefik/caddy with multiple projects" or to run "just one big database" or so
[01:15:10] <ario> oh interesting
[01:15:24] <ario> yeah my test container can't ping redis-node-* (any of them)
[01:15:35] <tabakhase> s/mixed name/fixed name/ :D
[01:16:17] *** Joins: ExeciN (~ExeciN@user/nicexe)
[01:16:21] <ario> this is only in my dev environment 
[01:19:50] <ario> i need expose those to my other containers
[01:19:51] <ario> hmm
[01:20:59] <tabakhase> basically "plug in the network cables" yes - so docker knows that you WANT those to find another
[01:21:44] <ario> OH!
[01:23:11] <tabakhase> otherwise things would get haywirre once you have like 15 things running there that all listen to the name "backend" or "api" :D
[01:23:55] <ario> you're right, i forgot setup the network! 
[01:24:01] <ario> thanks so much
[01:24:10] *** Quits: russjr08 (~russjr08@fw.internal.russ.network) (Ping timeout: 260 seconds)
[01:24:23] <ario> that was like 2 hours of my trying differnt things haha
[01:27:24] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[01:27:57] *** Joins: russjr08 (~russjr08@fw.internal.russ.network)
[01:31:16] *** Festivus-Maximus is now known as Kilroy
[01:33:34] *** Joins: endigma (~endigma@drmons0552w-134-41-91-32.dhcp-dynamic.fibreop.ns.bellaliant.net)
[01:37:55] <dob1> if you create a Dockerfile and you don't specify entrypoint or cmd  they are taken from the original image? both ?
[01:49:36] *** Joins: trevors (~trevors@user/trevors)
[01:52:27] <tabakhase> dob1 yep
[01:53:00] <tabakhase> (just note that setting a ENTRYPOINT whipes out the CMD, so youd have to repeat that)
[01:57:09] <dob1> tabakhase, but if you set CMD ? it will take ENTRYPOINT from the original image ?
[01:59:41] *** Joins: Bruners (~lasseb@178.16.64.98)
[02:00:47] *** Joins: evocatus (~evocatus@62.182.77.224)
[02:01:24] *** Quits: evocatus (~evocatus@62.182.77.224) (Remote host closed the connection)
[02:02:02] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[02:02:15] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[02:03:25] <tabakhase> dob1 yepyep
[02:05:14] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[02:16:52] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[02:18:12] *** Joins: Bruners (lasseb@178.16.64.98)
[02:40:23] <rvalue> so i figured out the right UIDs to set for user in container and fix some folder mounts, however one remaining which is a bind read only mount, in the container the folder permissions are 000 instead of like 400, and from the host, the same folder has 777 permissions, what should i look at to fix this?
[02:42:37] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 240 seconds)
[02:58:05] *** Quits: zer0bitz (~zer0bitz@196.244.192.57) (Ping timeout: 256 seconds)
[03:00:22] *** Quits: kostkon (~kostkon@2a02:587:a116:f212:4d86:1980:f91d:1e03) (Quit: Leaving)
[03:00:40] *** Joins: vidbina (~vid@213.94.6.230)
[03:05:38] *** Joins: kostkon (~kostkon@2a02:587:a116:f212:4d86:1980:f91d:1e03)
[03:05:47] *** Quits: Santzes (~Santzes@2400:8901::f03c:92ff:fe49:47a6) (Quit: WeeChat 3.3)
[03:07:49] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:08:37] *** Quits: vidbina (~vid@213.94.6.230) (Ping timeout: 240 seconds)
[03:16:16] *** Quits: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:f943:785b:4c6e:c7d6) (Quit: So long, suckers)
[03:20:01] *** Joins: tricklynch (~tricklync@216-180-94-57.starry-inc.net)
[03:20:29] *** Quits: BSaboia (~bsaboia@177.37.198.83) (Quit: This computer has gone to sleep)
[03:25:43] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[03:25:59] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[03:41:09] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[03:41:25] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 240 seconds)
[03:43:26] *** Joins: Bruners (~lasseb@178.16.64.98)
[03:49:48] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[04:03:40] *** Joins: Bruners (~lasseb@178.16.64.98)
[04:13:56] *** Quits: Haxxa (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com) (Quit: Haxxa flies away.)
[04:27:57] *** Quits: Zta (~Zta@5.186.52.63.static.fibianet.dk) (Quit: Zta)
[04:30:36] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[04:32:18] *** Joins: jazzy (~jaziz@user/jaziz)
[04:33:15] *** Joins: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com)
[04:34:25] *** Quits: artok (~azo@mobile-access-bcee77-2.dhcp.inet.fi) (Ping timeout: 256 seconds)
[04:35:08] *** Joins: Bruners (lasseb@178.16.64.98)
[04:43:26] <bn_work> hi, docker 20.10.12, in a container (ex: alpine-openjdk based) why does netstat -tulpn or ss -tulpn not show the owning process in the container pid-space that were launched via the entrypoint (instead it just shows lines like `tcp        0      0 :::56789                :::*                    LISTEN      -`) but if I manually `docker exec -it <container_name> /bin/bash` into it and run a process, it does?
[04:48:03] <programmerq> where are you running netstat if not doing it in a docker exec session?
[04:48:38] <programmerq> if the process is owned by 0 in the container, and you run netstat as something other than 0, it can't read the /proc entries and see the program name.
[04:49:17] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 240 seconds)
[04:51:00] *** Joins: Bruners (~lasseb@178.16.64.98)
[04:53:36] <tabakhase> hub having troubles? (website at least...)
[04:54:05] <tabakhase> flipping between dead slow and http:500´s
[04:57:13] <bn_work> programmerq: inside the container as 0
[04:58:26] *** Joins: Haxxa (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com)
[05:02:56] *** Joins: kevinnn (~kevinnn@2600:8802:3708:7700::f5)
[05:03:06] <bn_work> tabakhase: seems to be ok over here (from US at least)?  do you have a specific URL it's 500-ing on?
[05:05:57] *** Quits: bzyx (~quassel@89-69-20-238.dynamic.chello.pl) (Ping timeout: 240 seconds)
[05:16:32] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[05:17:33] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-3d81-c410-7c1c-5594.res6.spectrum.com) (Quit: jarthur)
[05:24:07] *** Joins: trevors (~trevors@user/trevors)
[05:25:17] *** Quits: retrogore (~retrogore@modemcable194.160-58-74.mc.videotron.ca) (Remote host closed the connection)
[05:39:44] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[05:45:49] *** Quits: tsal (~tsal@user/tsal) (Ping timeout: 256 seconds)
[05:51:04] *** Joins: tsal (~tsal@user/tsal)
[05:56:33] *** Joins: Bruners (lasseb@178.16.64.98)
[06:04:31] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Ping timeout: 256 seconds)
[06:06:56] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[06:16:23] *** Joins: BSaboia (~bsaboia@177.37.198.83)
[06:18:43] *** Joins: jgrim6 (~jgrim@172.58.197.55)
[06:21:49] *** Quits: jgrim (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[06:21:49] *** Joins: jgrim (~jgrim@d60-65-99-197.col.wideopenwest.com)
[06:23:37] *** Quits: jgrim6 (~jgrim@172.58.197.55) (Ping timeout: 240 seconds)
[06:25:31] *** Quits: BSaboia (~bsaboia@177.37.198.83) (Quit: This computer has gone to sleep)
[06:31:11] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[06:31:20] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[07:06:37] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 240 seconds)
[07:08:33] *** Joins: Bruners (~lasseb@178.16.64.98)
[07:11:23] *** Quits: denningsrogue (~denningsr@98.97.131.238) (Ping timeout: 256 seconds)
[07:11:59] *** Joins: denningsrogue (~denningsr@98.97.131.238)
[07:32:59] *** Quits: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[07:41:36] *** Joins: boubou (~boubou@hide.my.ip.upsidehosting.com)
[08:12:48] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[08:13:52] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[08:15:21] *** Joins: Bruners (lasseb@178.16.64.98)
[08:24:13] *** Quits: lilgopher (~textual@2601:241:8000:38f0:34e3:500e:d1f0:a562) (Quit: Textual IRC Client: www.textualapp.com)
[08:30:13] *** Joins: akurilin_ (uid322841@id-322841.ilkley.irccloud.com)
[08:32:37] *** Joins: waldo323_ (~waldo323@d14-69-96-170.try.wideopenwest.com)
[08:35:15] *** Quits: waldo323 (~waldo323@d14-69-96-170.try.wideopenwest.com) (Ping timeout: 256 seconds)
[08:41:54] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Read error: Connection reset by peer)
[08:44:19] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[08:47:43] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[08:52:23] *** Joins: Bruners (~lasseb@178.16.64.98)
[08:52:41] *** Quits: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469) (Remote host closed the connection)
[09:03:32] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[09:06:40] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Read error: Connection reset by peer)
[09:07:57] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[09:09:58] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[09:11:17] *** Joins: Bruners (~lasseb@178.16.64.98)
[09:12:13] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 240 seconds)
[09:14:12] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[09:31:25] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 240 seconds)
[09:33:33] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[09:34:17] *** Joins: sudoforg1 (~sudoforge@wireguard/tunneler/sudoforge)
[09:38:18] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 256 seconds)
[09:39:21] *** Quits: sudoforg1 (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 268 seconds)
[09:40:37] *** Joins: sudoforg1 (~sudoforge@wireguard/tunneler/sudoforge)
[09:57:34] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[09:57:53] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[10:09:05] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Quit: 🖖)
[10:09:36] *** Joins: dvanloon (~dvanloon@user/dvanloon)
[10:13:12] *** Joins: Flash_ (~Flash@user/flash)
[10:13:50] *** Quits: Flash (~Flash@user/flash) (Ping timeout: 260 seconds)
[10:14:20] *** Joins: Bruners (lasseb@178.16.64.98)
[10:15:53] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[10:28:16] *** Joins: BSaboia (~bsaboia@177.37.198.83)
[10:37:36] *** Joins: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469)
[10:45:01] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[10:54:04] *** Joins: Bruners (lasseb@178.16.64.98)
[11:09:57] *** Quits: Church (~aleph@pool-98-116-232-112.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[11:10:58] *** Joins: OpenBDSM (~FreeBDSM@user/freebdsm)
[11:11:48] *** Joins: Church (~aleph@pool-98-116-232-112.nycmny.fios.verizon.net)
[11:12:13] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[11:13:30] *** Quits: FreeBDSM (~FreeBDSM@user/freebdsm) (Ping timeout: 256 seconds)
[11:14:03] *** Joins: Bruners (lasseb@178.16.64.98)
[11:16:35] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:17:52] *** Joins: rsx (~dummy@ppp-188-174-144-29.dynamic.mnet-online.de)
[11:23:49] *** Quits: inductiveload (~inductive@user/inductiveload) (Ping timeout: 240 seconds)
[11:24:51] *** Joins: iomari891 (~iomari891@105.112.138.38)
[11:26:27] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[11:26:57] *** Quits: blackwood821_ (~blackwood@user/blackwood821) (Ping timeout: 256 seconds)
[11:27:06] *** Joins: inductiveload (~inductive@user/inductiveload)
[11:27:08] *** Joins: blackwood821 (~blackwood@user/blackwood821)
[11:32:03] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 256 seconds)
[11:32:25] *** Joins: iomari891 (~iomari891@105.112.138.38)
[11:39:26] *** Joins: jayray_ (~jayray@user/jayray)
[11:40:00] *** Joins: rvgate2 (~rvgate@user/rvgate)
[11:41:07] *** Quits: jayray (~jayray@user/jayray) (Ping timeout: 256 seconds)
[11:41:07] *** jayray_ is now known as jayray
[11:41:50] *** Quits: rvgate (~rvgate@user/rvgate) (Ping timeout: 256 seconds)
[11:41:50] *** rvgate2 is now known as rvgate
[11:42:33] *** Joins: IceMicha- (~IceMichae@h2878436.stratoserver.net)
[11:42:35] *** Quits: Tabmow (~tabmow@user/tabmow) (Quit: ZNC 1.8.2 - https://znc.in)
[11:42:58] *** Quits: IceMichael (~IceMichae@h2878436.stratoserver.net) (Ping timeout: 256 seconds)
[11:43:19] *** Joins: Tabmow (~tabmow@user/tabmow)
[11:44:29] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[11:53:44] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 256 seconds)
[11:54:04] *** Joins: iomari891 (~iomari891@105.112.138.38)
[11:54:27] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[11:56:25] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[11:57:22] *** Joins: Bruners (lasseb@178.16.64.98)
[12:03:47] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[12:05:06] *** Joins: Bruners (lasseb@178.16.64.98)
[12:13:34] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 256 seconds)
[12:21:40] *** Joins: iomari891 (~iomari891@105.112.138.38)
[12:28:52] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 256 seconds)
[12:29:56] *** Joins: iomari891 (~iomari891@105.112.138.38)
[12:44:13] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 240 seconds)
[12:45:11] *** Joins: Bruners (~lasseb@178.16.64.98)
[12:46:17] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 256 seconds)
[12:46:48] *** Joins: iomari891 (~iomari891@105.112.138.38)
[13:02:43] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 256 seconds)
[13:04:29] *** Joins: iomari891 (~iomari891@197.210.85.157)
[13:11:31] *** Joins: lithium (~lithium@user/lithium)
[13:15:20] *** Quits: lithium (~lithium@user/lithium) (Client Quit)
[13:23:31] *** Joins: millido (~millido@84.210.150.128)
[13:25:35] <dob1> I am reading about registry, I would like to run it on a remote machine accessing it via vpn only. When you push an image to the registry it will upload all the image from my local pc or the base image will be taken from the hub ?
[13:25:56] <dob1> and it will just upload the layers I have created
[13:26:26] <millido> I am attempting to properly setup nftables on some docker-hosts. But I am having a hard time configuring it properly. My rules are attempting setting policy drop for input/forward/output chains, and allowing the required traffic. But for some reason, I cannot access any of the docker ports remotely unless I set policy ACCEPT on the FORWARD chain. Any suggestions?
[13:27:03] <millido> dob1: I am not certain, but I would think it uploads everything from your local machine
[13:27:38] <dob1> no good for my bad connection :)
[13:28:36] <millido> dob1: Could you have a small git server on the remote machine, and the do the docker build there as well?
[13:29:12] <dob1> millido, I am a beginner, not practice to do this
[13:31:13] <millido> dob1: What OS would you have on the remote?
[13:32:07] <dob1> linux
[13:32:11] <dob1> debian
[13:32:31] <millido> Are you familiar with rsync?
[13:32:38] <dob1> I know how to use rsync
[13:33:37] <millido> Could that be a solution? If you use rsync just to push your (only incremental) changes to the remote, and then log in to that remote and run docker build there
[13:34:20] <dob1> millido, I was thinking a similar solution, better than uploading the entire image for sure in my case
[13:43:40] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[13:44:21] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[13:45:23] *** Joins: Bruners (~lasseb@178.16.64.98)
[13:48:56] <ikke> I have a custom script that combines inotifywait + rsync to automatically sync changes to a remote, works really well for me
[13:55:49] *** Joins: bindu_ (~bindu@user/bindu)
[13:56:33] *** Quits: Fauve (~Fauve@user/fauve) (Ping timeout: 256 seconds)
[13:56:48] *** Quits: bindu (~bindu@user/bindu) (Ping timeout: 276 seconds)
[13:57:44] *** bindu_ is now known as bindu
[14:07:00] <dob1> what I don't understand is the tag thing on registry, from the doc:  docker image tag ubuntu localhost:5000/myfirstimage   why it is tagging it ?   When it does  docker push localhost:5000/myfirstimage this is not a tag, is  registry address + image, or am I wrong?
[14:09:55] *** Joins: Fauve (~Fauve@user/fauve)
[14:14:13] *** Quits: Fauve (~Fauve@user/fauve) (Ping timeout: 240 seconds)
[14:15:04] <ikke> dob1: sorry, what exactly are you asking? The registry to push to is part of the image name. with docker tag, you add an image name (repository) to an image
[14:15:43] <dob1> ikke, so registry address is part of the tag too
[14:15:58] <ikke> yes. For docker hub images, it's implicit
[14:16:32] <ikke> docker.io/library
[14:16:46] <dob1> ok
[14:16:53] <ikke> but for other registries, you have to explicitly name it
[14:20:32] *** Joins: pbd69 (~AdminUser@user/pbd69)
[14:25:05] *** Joins: zer0bitz (~zer0bitz@196.244.192.61)
[14:25:43] *** Joins: zer0bitz_ (~zer0bitz@196.244.192.61)
[14:27:29] *** Joins: Fauve (~Fauve@user/fauve)
[14:29:25] *** Quits: zer0bitz (~zer0bitz@196.244.192.61) (Ping timeout: 256 seconds)
[14:30:07] *** Quits: pbd69 (~AdminUser@user/pbd69) (Quit: cu)
[14:31:14] *** Joins: monkeycoder (~monkey@2001:d08:229f:d324:4913:d22d:46fe:6de1)
[14:31:55] <monkeycoder> Hello everyone.
[14:34:26] *** Joins: Zta (~Zta@5.186.52.63.static.fibianet.dk)
[14:35:15] <monkeycoder> help me to understand this, when I run docker-compose locally on my machine I got 3 containers all networked and able to ping to each other. However, when uploaded to Docker Hub and pull, I only got 1 container running. Is it a logic error on my end? 
[14:41:52] *** Joins: fuzzybear3965 (~fuzzybear@185.38.217.76)
[14:42:17] *** Joins: ExeciN (~ExeciN@user/nicexe)
[14:42:20] <fuzzybear3965> I'm trying to run docker on a live CD but I want to cache /var/lib/docker between reboots.
[14:42:47] <fuzzybear3965> I've been trying to set up filesystem overlay that captures changes to /var/lib/docker while the live CD is running.
[14:43:05] <fuzzybear3965> But, I _also_ want to use the overlay2 storage driver in Docker.
[14:43:32] <fuzzybear3965> I'm running into problems when I try to start the docker systemd service while my own caching overlay is mounted.
[14:44:19] <fuzzybear3965> I'm running into problems saving layers if I wait to mount my own caching overlay _after_ the docker systemd service is running.
[14:44:34] <fuzzybear3965> Is there any way to get what I want?
[14:45:16] <fuzzybear3965> I want an fstab entry for overlaying /var/lib/docker with a separate filesystem (removable storage) _and_ I want to use the overlay2 storage driver with docker.
[14:51:06] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[14:52:02] *** Joins: Bruners (~lasseb@178.16.64.98)
[14:58:28] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[14:59:37] *** Quits: monkeycoder (~monkey@2001:d08:229f:d324:4913:d22d:46fe:6de1) (Quit: WeeChat 2.8)
[14:59:41] *** Joins: Bruners (lasseb@178.16.64.98)
[15:27:22] *** Quits: Tach (~Tach@user/tach) (Ping timeout: 256 seconds)
[15:30:30] *** Joins: lithium (~lithium@user/lithium)
[15:48:13] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:52:25] *** Joins: lithium (~lithium@user/lithium)
[16:01:12] <dob1> what can I do if I need ping to check network in an image that doesn't have it? is there any trick for this?  or I need maybe to copy busybox and create a new image?
[16:02:44] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:03:49] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 240 seconds)
[16:04:20] <dob1> or copy busybox into the container
[16:10:40] *** Joins: lithium (~lithium@user/lithium)
[16:13:37] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 240 seconds)
[16:15:40] *** Joins: Bruners (lasseb@178.16.64.98)
[16:15:46] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:41:43] *** Joins: null23 (~null23@h-37-123-160-123.A251.priv.bahnhof.se)
[16:43:49] <null23> hm... running docker and nextcloud.. one day my client wont connect, so i restart the docker and it runs fine. Today it happens again, so i did the same but client wont connect, then i see nextcloud is in setup mode. Luckly i got backup but everything on the mainserver was wiped... what can cause this? bad drive? 
[16:44:30] <ikke> Hard to tell without getting more details about your setup
[16:44:37] <ikke> end checking what is actually missing
[16:44:40] <ikke> and*
[16:45:35] *** Quits: BSaboia (~bsaboia@177.37.198.83) (Quit: This computer has gone to sleep)
[16:47:01] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 240 seconds)
[16:53:12] <null23> ikke: im running OMV with portainer, within portainer i deployed this example stack https://pastebin.com/X6kDHDe2
[16:55:08] *** Joins: trevors (~trevors@user/trevors)
[16:57:53] *** Quits: trevors (~trevors@user/trevors) (Client Quit)
[16:58:35] <null23> hm, whatever it was it has affected all containers.  :/
[17:03:27] *** Joins: Bruners (lasseb@178.16.64.98)
[17:04:09] *** Quits: toozej85 (~toozej@184.3.207.155) (Quit: The Lounge - https://thelounge.github.io)
[17:10:54] *** Quits: ksynwa (~ksynwa@5.45.111.57) (Quit: oh no they're here)
[17:12:33] *** Joins: ksynwa (~ksynwa@5.45.111.57)
[17:13:05] *** Joins: trevors (~trevors@user/trevors)
[17:14:30] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[17:14:57] *** Joins: bindu (~bindu@user/bindu)
[17:23:57] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[17:26:53] *** Joins: Bruners (lasseb@178.16.64.98)
[17:31:35] *** Joins: lenarhoyt (~lenarhoyt@p200300eec717e0008827ec4cfddb5e10.dip0.t-ipconnect.de)
[17:35:58] *** Joins: GailWynand (~GailWynan@195.216.219.122)
[17:43:23] *** Joins: DrowningElysium (uid190788@user/drowningelysium)
[17:43:28] *** Joins: hub (~hub@user/hub)
[17:50:14] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[17:51:25] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 240 seconds)
[17:54:30] *** Joins: trevors (~trevors@user/trevors)
[17:55:43] *** Joins: Bruners (lasseb@178.16.64.98)
[17:59:56] *** Joins: bouncy (~ben@user/benoit)
[18:06:06] *** Joins: s33ker (~s33ker@89-212-68-200.dynamic.t-2.net)
[18:08:40] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[18:11:10] *** Joins: trevors (~trevors@user/trevors)
[18:19:42] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[18:20:33] *** Joins: trevors (~trevors@user/trevors)
[18:20:33] *** Joins: BSaboia (~bsaboia@177.37.198.83)
[18:26:40] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[18:28:33] *** Joins: trevors (~trevors@user/trevors)
[18:29:01] *** Quits: trevors (~trevors@user/trevors) (Client Quit)
[18:36:29] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[18:37:05] *** Quits: s33ker (~s33ker@89-212-68-200.dynamic.t-2.net) (Quit: Client closed)
[18:45:32] *** Joins: trevors (~trevors@user/trevors)
[18:53:45] *** Joins: AnapodoPsalidaki (~AnapodoPs@2a02:587:291b:fbb7:1134:f32e:b870:dcc2)
[18:54:24] *** Joins: Bruners (lasseb@178.16.64.98)
[18:56:22] *** Joins: AnapodoPsalidi (~AnapodoPs@154.57.4.229)
[18:59:17] *** Quits: AnapodoPsalidaki (~AnapodoPs@2a02:587:291b:fbb7:1134:f32e:b870:dcc2) (Ping timeout: 268 seconds)
[19:03:05] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[19:04:18] *** Joins: lilgopher (~textual@c-24-12-183-227.hsd1.il.comcast.net)
[19:04:53] *** Quits: tricklynch (~tricklync@216-180-94-57.starry-inc.net) (Remote host closed the connection)
[19:05:03] *** Joins: MikeBux (~MikeBux@dyndsl-085-016-204-181.ewe-ip-backbone.de)
[19:05:08] *** Joins: tricklynch (~tricklync@216-180-94-57.starry-inc.net)
[19:06:07] *** Joins: trevors (~trevors@user/trevors)
[19:15:11] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[19:26:53] *** Joins: vidbina (~vid@213.94.6.230)
[19:26:58] *** Joins: jkwnki (~jkwnki@p2e5794ba.dip0.t-ipconnect.de)
[19:27:49] *** Joins: trevors (~trevors@user/trevors)
[19:29:45] *** Quits: lenarhoyt (~lenarhoyt@p200300eec717e0008827ec4cfddb5e10.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[19:30:31] *** Quits: trevors (~trevors@user/trevors) (Client Quit)
[19:31:10] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[19:31:43] *** Quits: frittro (~frittro@user/frittro) (Read error: Connection reset by peer)
[19:36:07] *** Joins: RougeR (~RougeR@user/rouger)
[19:38:49] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[19:47:24] *** Quits: rsx (~dummy@ppp-188-174-144-29.dynamic.mnet-online.de) (Quit: rsx)
[19:49:19] *** Joins: trevors (~trevors@user/trevors)
[19:54:23] *** Joins: awmv (~awmv@2a02:21b0:644f:c181:c4a3:dda1:576:428c)
[20:00:20] *** Joins: eldereko (~eldereko@user/eldereko)
[20:00:35] *** Joins: Bruners (lasseb@178.16.64.98)
[20:02:03] *** Quits: sudoforg1 (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 256 seconds)
[20:05:01] *** Quits: jkwnki (~jkwnki@p2e5794ba.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[20:09:46] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[20:14:16] *** Parts: OpenBDSM (~FreeBDSM@user/freebdsm) (Leaving)
[20:16:10] *** Joins: Lycurgus (~juan@98.4.112.204)
[20:17:30] *** Quits: fuzzybear3965 (~fuzzybear@185.38.217.76) (Quit: Client closed)
[20:27:26] *** Quits: ryu` (~ryusaku@c6A334BC1.dhcp.as2116.net) (Ping timeout: 245 seconds)
[20:27:47] *** Joins: ryu` (~ryusaku@c6A334BC1.dhcp.as2116.net)
[20:28:25] *** Quits: reenix (~reenix@h2924837.stratoserver.net) (Ping timeout: 250 seconds)
[20:28:35] *** Joins: reenix (~reenix@2a01:238:420e:ae00:1c37:63c1:24c0:ff75)
[20:29:58] *** Quits: Lycurgus (~juan@98.4.112.204) (Quit: Exeunt)
[20:30:29] *** Joins: Atque (~Atque@user/atque)
[20:32:08] *** Joins: waldo323__ (~waldo323@d14-69-96-170.try.wideopenwest.com)
[20:32:26] *** Quits: ses1984 (~stephanst@128.27.196.35.bc.googleusercontent.com) (Ping timeout: 245 seconds)
[20:32:41] *** Joins: ses1984 (~stephanst@128.27.196.35.bc.googleusercontent.com)
[20:32:51] *** Quits: vogelfrei (vogelfrei@user/vogelfrei) (Ping timeout: 245 seconds)
[20:33:04] *** Joins: vogelfrei (vogelfrei@user/vogelfrei)
[20:33:11] *** Quits: jimmyb (~jimmyb@user/jimmyb) (Ping timeout: 250 seconds)
[20:33:31] *** Joins: jimmyb (~jimmyb@user/jimmyb)
[20:34:29] *** Quits: brw (~bas@haring.bas.sh) (Ping timeout: 250 seconds)
[20:34:54] *** Joins: brw (~bas@haring.bas.sh)
[20:34:55] *** Quits: waldo323_ (~waldo323@d14-69-96-170.try.wideopenwest.com) (Ping timeout: 256 seconds)
[20:35:29] *** Quits: Bruners (lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[20:37:56] *** Quits: erhandsome (~erhandsom@user/erhandsome) (Ping timeout: 252 seconds)
[20:38:08] *** Joins: erhandsome (~erhandsom@user/erhandsome)
[20:43:53] *** Joins: s33ker (~s33ker@89-212-68-200.dynamic.t-2.net)
[20:44:32] *** Quits: njka (~njka@user/njka) (Ping timeout: 252 seconds)
[20:45:38] *** Quits: Kilroy (~thelounge@user/Kilroy) (Ping timeout: 252 seconds)
[20:46:24] *** Quits: GailWynand (~GailWynan@195.216.219.122) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:46:31] *** Joins: Kilroy (~thelounge@user/Kilroy)
[20:46:49] *** Joins: njka (~njka@user/njka)
[20:47:55] *** Quits: programmerq (~programme@user/programmerq) (Ping timeout: 250 seconds)
[20:48:14] *** Joins: programmerq (~programme@user/programmerq)
[20:48:14] *** ChanServ sets mode: +o programmerq
[20:52:20] *** Joins: goldfish (~goldfish@user/goldfish)
[20:53:59] *** Quits: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469) (Remote host closed the connection)
[20:54:54] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[20:58:39] *** Joins: n9nes (~n9nes@user/n9nes)
[21:00:56] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[21:05:09] <wyre> hi guys, I'm trying to get up a docker container with this image https://hub.docker.com/r/fiware/orion/
[21:05:50] <wyre> but ... following the step "1. The fastest way" I'm having a message after trying to get it up with docker-compose up saying "(root) Additional property mongo is not allowed"
[21:05:54] <wyre> why is this? 🤔
[21:08:38] <wyre> I've got the images for fiware/orion and mongo
[21:08:58] <wyre> but that docker-compose.yml is not able to create the containers 😥
[21:09:15] *** Joins: Lycurgus (~juan@98.4.112.204)
[21:11:42] <wyre> oh, I need to wrap that whole snippet inside a `services:` directive
[21:15:18] *** Quits: vidbina (~vid@213.94.6.230) (Ping timeout: 256 seconds)
[21:22:09] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[21:29:58] *** Quits: haritz (~hrtz@user/haritz) (Read error: Connection reset by peer)
[21:33:33] *** Quits: Zta (~Zta@5.186.52.63.static.fibianet.dk) (Quit: Zta)
[21:39:27] *** Joins: fuzzybear3965 (~fuzzybear@185.38.217.76)
[21:39:42] <fuzzybear3965> I'm trying to use overlay2 on top of an overlayfs. I'm having some problems.
[21:40:04] *** Joins: haritz (~hrtz@user/haritz)
[21:40:21] <fuzzybear3965> Correction/rephrase: I'm trying to use an overlayfs on top of /var/lib/docker (docker configured with overlay2). I'm having some problems.
[21:40:48] <fuzzybear3965> I posted this question in StackOverflow but I don't like the answer that I got - I'm hoping it's wrong: https://stackoverflow.com/questions/70631927/using-overlay2-storage-driver-with-an-overlay-filesystem
[21:40:50] <tabakhase> uh? shouldnt those things be a thing of the past since like docker 19.x - code/paste pls :P
[21:41:19] <fuzzybear3965> Shouldn't which things be a thing of the past? tabakhase : talking to me?
[21:41:25] <tabakhase> ye
[21:41:49] <fuzzybear3965> Copy/paste what? I linked to the question I asked on StackOverflow which includes a lot of context and output of different commands.
[21:42:01] <fuzzybear3965> I'm on Docker 20.10.12
[21:42:11] <fuzzybear3965> Linux kernel 5.15.12
[21:42:48] <tabakhase> that stack link wasnt there when i read your entry post ;-)
[21:43:10] *** Quits: imp (~imp@192-141-191-227.alternativaip.net.br) (Quit: imp)
[21:43:32] <fuzzybear3965> Ahhh
[21:43:42] <fuzzybear3965> tabakhase thanks for taking a look.
[21:44:13] <tabakhase> and yea, that not gonna function - - what is it that you "actually want todo"? is that CI or so?
[21:45:42] <fuzzybear3965> tabakhase It's not CI. It's my daily driver OS.
[21:46:05] <fuzzybear3965> My development/daily driver OS is on a flash drive an is unloaded to RAM at boot-time.
[21:46:13] <fuzzybear3965> So, every time I reboot the system state is erased.
[21:46:30] <tabakhase> boot2docker brings mechanics for persistent disks -- but if you are just attempting to "build faster" or so cache-from is maybe all you actually need - and if its actually about "storing images" run a registry somewhere (asside from the $$$hub there are products like gitlab (with auth) and "its a single docker run command" for LAN (no auth)
[21:46:32] <fuzzybear3965> I want to preserve my Docker build cache, so I have a layerfs mount to /var/lib/docker with an SDcard
[21:47:07] <fuzzybear3965> Nahhh, it's nothing related to boot2docker or CI.
[21:47:40] <fuzzybear3965> I just want to have /var/lib/docker exposed on an SD card instead of in RAM.
[21:49:00] <tabakhase> you can change "where the whole thing is", just not as overlay --- /var/lib/docker as bindmount (should) work just fine
[21:50:25] <fuzzybear3965> Okay, but it's not possible to have /var/lib/docker as an overlayfs and have Docker using overlay2 on in that filesystem?
[21:51:15] <fuzzybear3965> *and have Docker configured to use overlay2 on top of that filesystem?L
[21:51:28] <tabakhase> and look into cache-from --- "normally" dockerD only considers "things it build itself" as valid build cache, with cache-from this can be extended to "trust" other images, (think "docker pull myimage && docker build -t myimage ." with 0 changes will still rebuild the whole thing --- but "docker pull myimage && docker build -t myimage --cache-from myimage ." will finish within 0.1 seconds 
[21:51:29] <tabakhase> reuisng the cache for all --- pattern generally used with throw-away-ci-machiens like gitlab/github - but may apply to ya as well
[21:52:41] <fuzzybear3965> Oh, yeah, I love that. Thanks!
[21:52:46] <fuzzybear3965> Is cache-from available as a daemon configuration?
[21:52:55] *** Joins: Bruners (~lasseb@178.16.64.98)
[21:53:39] <tabakhase> no, "per build" (cache_from: for docker-compose)
[21:53:51] *** Joins: emad (~emad@156.214.64.147)
[21:53:55] <fuzzybear3965> Okay, only on the build commands. All good.
[21:54:01] <fuzzybear3965> I can alais.
[21:54:03] <fuzzybear3965> *alias
[21:54:26] <fuzzybear3965> tabakhase I did a couple of experiments and my kernel has no problem mounting overlay on top of overlay.
[21:54:36] <fuzzybear3965> Why cant't docker run on top of an overlayfs? What's the technical limitation?
[21:57:31] <tabakhase> ((also the "why is that cache-from needed?" - afaik 'i could build a image, then fake the actual .tar.gz i upload with an evil payload but "claim" that its the same last layer as "debian:latest" - now i somehow get you to download this image for somethign entirely unrelated - 2 weeks later you do a random FROM debian:latest and BAM youd use my poisoned layer instead of actual debian')) <- dont 
[21:57:32] <tabakhase> quote me on that tho, may not be how it is practically done :D
[22:00:35] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[22:01:06] <tabakhase> and the "overlay on overlay" likely isnt the issue, id guess its the other way around that breaks when it tries to "assemble a new overlay from parts of the overlay inside that same overlay" --- but im also not rly deep ennuf in docker/kernel dev to rly give an answer there :P
[22:02:32] <fuzzybear3965> The security respect makes sense.
[22:02:37] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[22:02:47] <fuzzybear3965> *security aspect makes sense.
[22:03:05] <tabakhase> fuzzybear3965 and point remains, "why even mess with overlay?" - if you want docker to persist, put the folder on a disk - having "half of it" sounds spooked and as if it will certainly break smth else
[22:03:06] <fuzzybear3965> > not deep enough
[22:03:07] <fuzzybear3965> Fair enough. Yeah, it was a weird problem to hit.
[22:03:54] <fuzzybear3965> tabakhase Because putting all of /var/lib/docker is almost definitely going to add things that don't change between re-initializations of docker service.
[22:04:21] <fuzzybear3965> I want the minimum set of files that capture what's unique to a given session. The overlay is great about that with copy-on-write semantics.
[22:04:48] <tabakhase> (+ that whole mess will break again when you get buildX into the game that introduces that whole concept of "builders" that arent directly "your docker engine" but also are :D)
[22:05:53] <fuzzybear3965> What's buildX?!
[22:06:47] <fuzzybear3965> https://docs.docker.com/buildx/working-with-buildx/
[22:07:36] <tabakhase> yeps this monster^^
[22:08:50] <fuzzybear3965> Maybe I'll move to a rootless OCI system....
[22:09:53] <wyre> why do you think I cannot see any log entry for orion service? https://bpa.st/O2LA
[22:10:08] <tabakhase> id say the "cleanest" is prob. to run a registry and pull/cache-from as needed --- you can even do this fully locally by "running a registry" in that very same dockerD with then a bindmount for its datadir out to your disk -- then you can boot, fire u registry, pull over "last" images, rebuild with cache-from as needed, and push them back up on shutdown
[22:11:07] <fuzzybear3965> You mean run the registry on localhost to a bindmount?
[22:11:09] *** Quits: s33ker (~s33ker@89-212-68-200.dynamic.t-2.net) (Quit: Client closed)
[22:11:21] <fuzzybear3965> That's not a bad solution at all.
[22:11:29] <fuzzybear3965> But, I would lose my container state, then.
[22:12:09] <tabakhase> `docker run -d -p 127.0.0.1:5000:5000 -v /mnt/disk1/registry:/var/lib/registry registry:2` - and you can "docker push localhost:5000/my-image:bla"
[22:12:16] *** Joins: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:70dc:a404:f80d:f3e3)
[22:13:41] <fuzzybear3965> Oh, nice! https://docs.docker.com/registry/
[22:14:01] <fuzzybear3965> tabakhase Yep, I think we're on to something. Thanks for the pointers. I'll get this resolved.
[22:14:04] <tabakhase> (docker save/load technically do the same and could work "directly to .tar.gz files" -- but with buildX on the horizon and possible swarm adventures there kinda is a point to "run a whole registry" i think....
[22:14:14] <fuzzybear3965> But, there's no way to preserve volumes/containers this way, right?
[22:14:27] <fuzzybear3965> For that, I'd need to bindmount the whole /var/lib/docker, I guess.
[22:14:37] *** Quits: factor (~factor@c-66-30-67-217.hsd1.ma.comcast.net) (Read error: Connection reset by peer)
[22:14:55] <fuzzybear3965> There's no daemon configuration for pointing Docker to the place it should store container filesystems/volumes, right?
[22:15:27] <tabakhase> there are dozens of little .json´s everywhere - so "pick and choose" in var/lib is certainly a lost game...
[22:16:13] <fuzzybear3965> Hehhhh, so no way to preserve docker-compose state across reboots, it looks like, without bind-mounting all of /var/lib/docker
[22:16:30] *** Quits: Bruners (~lasseb@178.16.64.98) (Ping timeout: 256 seconds)
[22:16:50] <tabakhase> and like, you kinda gotta decide what you want :D -- either you want things to persist, or not -- and going by your very mentioned rule "same files on the daemon restart" - well sure those containers would be, so you ASKED for them to get wiped out didnt ya? ;)
[22:18:24] <fuzzybear3965> Huh? I _only_ want my docker environment to persist.
[22:19:14] *** Joins: Bruners (lasseb@178.16.64.98)
[22:19:16] <fuzzybear3965> I think if I only save the images using a localhost registry that the volumes and running containers won't be preserved.
[22:19:38] *** Joins: factor (~factor@c-66-30-67-217.hsd1.ma.comcast.net)
[22:19:48] <fuzzybear3965> Ideally, I'd have a solution where networks, volumes, running containers, and built/pulled images would be saved to storage.
[22:23:21] <tabakhase> that just brings uis back to "if you want docker to persist, put the folder on a disk"
[22:25:35] <fuzzybear3965> tabakhase Yeah, but I don't want `swarm` and `gen-runtimes*` (or, do I?) and `plugins` and the whole laundry basket saved to this disk.
[22:28:26] <tabakhase> think im not even understanding what youd want to assemble for an overlay for what if it where to work what you initially asked for... on one hand sounds like you want a read-only snapshot that rolls back, but also things to freshly generate, while also being able to write ("keep my containers") -- so maybe im just missunderstanding your need...
[22:28:46] *** Quits: imp (~imp@192-141-191-227.alternativaip.net.br) (Quit: imp)
[22:29:13] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[22:29:38] *** Joins: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com)
[22:30:26] *** Joins: minimal (~minimal@user/minimal)
[22:31:26] <fuzzybear3965> tabakhase I think the bind mount is closest to what I want (or a series of bind mounts for each subdirectory of /var/lib/docker that I actually want to keep). But, /var/lib/docker has ~18 directories, right now.
[22:31:50] <fuzzybear3965> Some of them I want to cache, because it's annoying to re-obtain ~2GiB of images every reboot.
[22:32:14] <fuzzybear3965> It would also be nice to preserve container state, volumes, etc. for if I reboot but want to maintain my development state.
[22:32:39] <fuzzybear3965> But, the vast majority of the OS and filesystem _should_ be stateless, so that when I reboot, I don't have a bunch of crap left from when I was last working.
[22:32:46] <fuzzybear3965> Docker being an exception.
[22:33:54] <fuzzybear3965> I have no idea what /var/lib/docker/gen-runtimes572654696 or gen-runtimes565284951 or gen-runtimes516486982 are. But, I don't want them preserved on-disk if they're not needed to recreate my docker-compose environment(s).
[22:34:03] <fuzzybear3965> Same with /var/lib/docker/swarm
[22:34:33] <fuzzybear3965> I probably want to preserve /var/lib/overlay2 and /var/lib/containers and /var/lib/network and /var/lib/volumes
[22:34:35] <fuzzybear3965> Maybe a few other ones.
[22:35:12] <fuzzybear3965> But, my guess is that there's a lot of "crap" in /var/lib/docker that isn't _necessary_ for `docker ps` to show the same state across reboots.
[22:35:27] <fuzzybear3965> Or, for `docker image ls` to show the same list across reboots.
[22:36:26] *** Quits: naicam|ne (~naicam|ne@wireguard/tunneler/naicamne) (Quit: bye)
[22:45:03] *** Quits: ultima (~ultima@23.81.113.230) (Quit: ZNC 1.8.2 - https://znc.in)
[22:46:13] *** Joins: ultima (~ultima@23.81.113.230)
[22:48:27] *** Joins: catbehemoth (~vasyl@bras-base-lnglpq6100w-grc-15-206-172-247-21.dsl.bell.ca)
[22:52:27] *** Joins: naicam|ne (~naicam|ne@wireguard/tunneler/naicamne)
[22:54:33] *** Quits: Lycurgus (~juan@98.4.112.204) (Quit: Exeunt)
[23:03:27] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 276 seconds)
[23:09:13] *** Joins: goldfish (~goldfish@user/goldfish)
[23:22:07] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[23:22:23] *** Joins: moha (uid506645@id-506645.helmsley.irccloud.com)
[23:25:38] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 256 seconds)
[23:27:09] *** Joins: bouncy (~ben@user/benoit)
[23:29:23] *** Quits: brooks73669 (~brooks@23.157.160.131) (Ping timeout: 268 seconds)
[23:33:25] *** Quits: iomari891 (~iomari891@197.210.85.157) (Ping timeout: 256 seconds)
[23:38:35] *** Joins: iomari891 (~iomari891@105.112.138.38)
[23:41:29] *** Quits: emad (~emad@156.214.64.147) (Quit: Leaving)
[23:41:52] *** Joins: emad (~emad@156.214.64.147)
[23:48:37] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 240 seconds)
[23:49:14] *** Joins: algae (~algernon@170.10.246.117)
[23:50:56] *** Joins: nocture (~textual@c-xd4ed87fa.cust.hiper.dk)
[23:50:59] *** Joins: iomari891 (~iomari891@197.210.79.39)
[23:57:03] *** Joins: vidbina (~vid@213.94.6.230)
