[00:17:41] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 258 seconds)
[00:18:37] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[00:30:35] <aphysically> bash is the worst language to do this https://dpaste.com/23RZNP8VH
[00:32:13] <aphysically> self contained test script building up a filter graph for a already-built array of encoding resolutions and types
[00:32:29] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:33:16] <aphysically> avoiding all duplicate resolution scales and hwuploads or hwdownloads
[00:34:59] <aphysically> goal is to send to [n+1] where n was the index of the original array, so I can test the encode settings with :n :P
[00:37:43] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[00:38:58] *** Joins: Hackerpcs (~user@user/hackerpcs)
[00:54:54] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[01:00:00] <aphysically> actually another thing I never investigated is sometimes on cropped video my lower resolution transcodes can display with an odd colored bar at the bottom on firefox
[01:00:18] <aphysically> I'm not sure if this is firefox's fault, my swscale downscaling choices, or both
[01:01:31] <aphysically> I think some weird interaction between force aspect ratio=1 when the aspect ratio isn't exact and firefox's rendering? I'd be surprised if it was the encode that actually had the odd line in it but i never tested
[01:05:03] *** Quits: Volgaar (~volgaar@2a01:cb14:279:1900:efab:56f4:5513:da8) (Quit: WeeChat 3.2)
[01:05:04] *** Quits: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com) (Remote host closed the connection)
[01:05:25] *** Joins: Volgaar (~volgaar@2a01:cb14:279:1900:efab:56f4:5513:da8)
[01:06:22] *** Joins: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com)
[01:07:45] *** Quits: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com) (Remote host closed the connection)
[01:24:04] <kepstin> hmm. in firefox's renderer i've sometimes seen issues with stray 1-pixel-thick lines when non-integer scale factors are in use (probably an issue with rounding in their compositor.
[01:26:21] <aphysically> yeah that's exactly what I'm seeing, but I never got around to making an exact reproducer to be sure
[01:27:05] <aphysically> maybe a good project for this weekend or soon so I can report it to firefox if it's on their end (I suspect it is)
[01:33:20] *** Quits: sosodank (~dankamong@199.185.175.96) (Read error: Connection reset by peer)
[01:33:33] *** Joins: sosodank (~dankamong@199.185.175.96)
[01:33:34] *** Quits: furrymcgee (~devuan@31.179.186.66) (Ping timeout: 258 seconds)
[01:45:26] *** Joins: arcatech (~arcatech@user/arcatech)
[01:50:09] *** Joins: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com)
[01:51:12] *** Quits: cryptic (~cryptic@142-196-139-017.res.spectrum.com) (Ping timeout: 258 seconds)
[01:53:17] *** Quits: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com) (Client Quit)
[01:59:20] *** Quits: jansenh (~jansenh@202-130-238-185.connected.by.freedominter.net) (Ping timeout: 272 seconds)
[02:04:05] *** Joins: cryptic (~cryptic@142-196-139-017.res.spectrum.com)
[02:04:33] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[02:15:25] *** Joins: arcatech (~arcatech@user/arcatech)
[02:17:04] *** Quits: arcatech (~arcatech@user/arcatech) (Client Quit)
[02:22:13] *** Quits: MoC (~moc@user/moc) (Quit: Konversation terminated!)
[02:24:19] *** Quits: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[02:24:41] *** Joins: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952)
[02:30:22] *** Quits: Volgaar (~volgaar@2a01:cb14:279:1900:efab:56f4:5513:da8) (Ping timeout: 272 seconds)
[02:37:41] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[02:46:07] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[02:56:56] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 252 seconds)
[02:57:45] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[03:06:18] *** Joins: arcatech (~arcatech@user/arcatech)
[03:12:04] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[03:35:56] *** Joins: arcatech (~arcatech@user/arcatech)
[03:39:17] <aphysically> whatever this filter graph is good enough I can extend it later if libplacebo stuff lands https://dpaste.com/27JBGS6L9
[03:41:41] *** Joins: mickey8 (~user@user/mickey)
[03:42:23] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[03:42:23] *** mickey8 is now known as mickey
[03:44:31] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[03:46:36] *** Joins: jansenh (~jansenh@2a10:3781:4dd:a:906e:1144:d769:19d9)
[03:48:08] <aphysically> this should let me transcode to more bitrates while still constructing the graph automatically by choosing the same resolutions
[03:48:51] <aphysically> last time I bottlenecked on the scaling in the filtergraph cause although I have a lot of cores for encoding, the filter graph is run through in a single thread so it got bottlenecked first
[03:56:57] *** Joins: arcatech (~arcatech@user/arcatech)
[03:58:53] *** Quits: darkapex (~darkapex@user/darkapex) (Read error: Connection reset by peer)
[04:00:30] *** Joins: darkapex (~darkapex@user/darkapex)
[04:09:58] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[04:16:45] *** Joins: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com)
[04:23:33] *** Joins: wyatt8750 (~wyatt8740@94.140.11.225)
[04:24:33] *** Quits: wyatt8740 (~wyatt8740@94.140.11.225) (Ping timeout: 276 seconds)
[04:38:49] *** Joins: witchcraft (~witch@79-68-13-238.dynamic.dsl.as9105.com)
[04:38:49] *** Quits: witchcraft (~witch@79-68-13-238.dynamic.dsl.as9105.com) (Changing host)
[04:38:49] *** Joins: witchcraft (~witch@user/witch)
[04:54:27] *** Quits: der_richter (~Akemi@p2e580ddd.dip0.t-ipconnect.de) (Quit: Leaving.)
[05:02:52] *** Quits: witchcraft (~witch@user/witch) (Quit: Leaving)
[05:10:57] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.0.1)
[05:22:56] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[05:24:29] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:26:38] *** Joins: KombuchaKip (~kip@192.252.230.5)
[05:32:02] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:34:30] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[05:36:12] *** Joins: vlm (~vlm@user/vlm)
[05:45:32] *** Quits: elastic_dog (~elastic_d@ary207.neoplus.adsl.tpnet.pl) (Ping timeout: 245 seconds)
[05:47:16] *** Quits: Bombo (atom@user/bombo) (Ping timeout: 258 seconds)
[05:47:20] *** Joins: Bombo_ (atom@p4ff00688.dip0.t-ipconnect.de)
[06:02:17] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 258 seconds)
[06:02:21] *** Joins: minimal (~minimal@user/minimal)
[06:03:34] *** Joins: elastic_dog (~elastic_d@ary207.neoplus.adsl.tpnet.pl)
[06:14:33] *** Joins: optative (~optative@198.13.181.215)
[06:17:56] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[06:35:03] *** Quits: optative (~optative@198.13.181.215) (Quit: Good bye libera and take care.)
[06:42:47] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[06:52:52] *** Joins: zmt00 (~zmt00@user/zmt00)
[06:55:35] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[06:56:31] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Read error: Connection reset by peer)
[06:57:40] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[07:10:30] *** Joins: jos1 (~jos3@host-091-097-185-221.ewe-ip-backbone.de)
[07:13:04] *** Quits: jos2 (~jos3@dyndsl-091-096-036-238.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
[07:32:18] *** Quits: nitram (~nitram@superblob.com) (Ping timeout: 258 seconds)
[07:45:58] *** Joins: gnoo (~gnoo@user/gnoo)
[07:51:07] *** Quits: gnoo (~gnoo@user/gnoo) (Remote host closed the connection)
[07:51:46] *** Joins: gnoo (~gnoo@user/gnoo)
[08:10:50] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[08:33:16] <aphysically> whoa
[08:33:46] <aphysically> one problem I've always had with nvidia's nvenc encoder for HEVC is on certain scenes it can't seem to avoid introducing really bad banding, even at outrageous bitrates like 30 megabit
[08:34:14] <aphysically> but if I encode with 10 bit (an 8 bit source) it's no problem at all
[08:34:20] <aphysically> huh
[08:36:43] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 250 seconds)
[08:37:58] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:38:07] <aphysically> I (finally) got around to setting up a pipeline to rigorously test all settings on scenes where it has that banding problem and discovered this
[08:38:43] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[08:40:10] <furq> is that surprising
[08:40:33] <aphysically> the main thing that surprises me about it is *only* their hevc encoder has the problem
[08:40:48] <aphysically> their h264 nvenc encoder doesn't introduce the bad banding even with the same settings
[08:41:33] <aphysically> as a result the h264 encoder was higher quality with my settings at high bitrates
[08:43:14] *** Joins: arcatech (~arcatech@user/arcatech)
[08:49:43] *** Joins: shlomif (~shlomif@87.68.242.72.adsl.012.net.il)
[08:54:30] *** Quits: Ares000 (~Ares3@37.228.196.119) (Read error: Connection reset by peer)
[08:55:08] *** Joins: Ares000 (~Ares3@37.228.196.119)
[08:56:00] *** Quits: Ares000 (~Ares3@37.228.196.119) (Read error: Connection reset by peer)
[08:56:18] *** Joins: Ares000 (~Ares3@37.228.196.119)
[09:11:57] <aphysically> even at 100 megabit the banding is almost perfect. I might write something to try to inspect the video, it's almost like their encoder only encodes the first 6 or 7 bits or something
[09:12:18] <aphysically> it's obviously converging to the color banding and not to the input video at high bitrate
[09:13:39] <aphysically> however, I thought I recalled having this problem with HEVC 10 bit video too, but then I was testing a 10 bit source
[09:14:28] <aphysically> I should find a new 10 bit source and try it with and without dithering down to 8 bit first
[09:16:13] <aphysically> I really doubt this is an ffmpeg bug, I'm pretty sure the code just passes stuff along
[09:18:57] <aphysically> If I go up to outrageously high bitrates all the banding lines are completely sharp so I think the theory that the encoder isn't encoding all 8 bits is the best explanation really
[09:19:32] <aphysically> I wonder if there's an ffmpeg filter to dither down arbitrary amounts like that to compare
[09:19:55] <aphysically> or rather, *not* dither down
[09:20:01] <aphysically> leave off the last significant bit
[09:20:45] <furq> not that i know of
[09:20:54] <furq> other than to 256-bit paletted
[09:20:59] <furq> what generation of nvenc is this
[09:21:07] <aphysically> I might be able to save as image and do it in imagemagick or something
[09:21:21] <furq> 256 colours not 256 bit obviously
[09:21:32] <aphysically> turing, but I think ampere has the same nvenc chip
[09:22:03] <aphysically> so, it's their latest chip afaik
[09:22:36] <aphysically> I've actually found in the past people complaining about HEVC banding on nvidia forums but the engineers would ask for samples and OP would disappear
[09:26:27] <aphysically> here, look at what I mean
[09:26:53] <aphysically> here's the source: https://i.imgur.com/YQMzf9Q.png and here's the output of NVENC's HEVC encoder (8bit/main profile) at 100 megabit: https://i.imgur.com/r38jN6Q.png
[09:27:06] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[09:27:37] <aphysically> there's no visible banding at even 3 megabit with their 10 bit encoder, or 4 megabit or so with their h264 encoder with the same settings
[09:28:43] <aphysically> you can see what I mean it kind of looks like they chopped off the least significant bit
[09:35:09] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[09:39:01] <aphysically> 10 bit doesn't have the problem but it changes the color slightly for some reason (???)
[09:44:06] <aphysically> I'm not sure where that could be happening since I'm not touching color anywhere, but I haven't tested it's not just the format conversion+hwupload in ffmpeg that does it
[09:44:32] <furq> well if nvenc h264 works then it seems unlikely to be ffmpeg's fault
[09:47:19] <aphysically> well, the color thing could be ffmpeg since I can't test that directly with h264 (nvidia doesn't have a hardware 10bit h264 encoder)
[09:47:37] <aphysically> but I can figure that out myself
[09:48:09] <aphysically> well, mostly, I can duplicate the filter chain up to the encoder than bring it out and encode into an image or something
[09:48:15] <furq> oh right
[09:49:19] <aphysically> I do want to investigate if I can find an imagemagick filter or similar that lets me chop off the least significant bit then I can get the same exact frames and compare
[09:50:20] <aphysically> for reference here's the output of nvenc 10 bit encoder at 10 megabit https://i.imgur.com/BnoO6Xz.png at about the same spot as the other two
[09:50:20] <furq> i wouldn't put too much effort into investigating nvenc internals
[09:50:24] <furq> it's not like you can do anything about it
[09:50:34] <aphysically> you can see there's no longer any awful banding but the color changed slightly inexplicably
[09:52:19] <aphysically> the 8bit encode looks like it has correct color except for the banding problem, the only difference to the 10 bit encode is I'm using the main10 instead of main profile and I do a format conversion to p010 before hwupload to cuda in order to do it
[09:53:23] <furq> maybe try the p010 conversion with zscale if you're not using that already
[09:53:37] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[09:54:34] <aphysically> hmmm, I think actually zscale can't do format conversions but maybe I'm remembering wrong
[09:54:36] <aphysically> let's check
[09:55:57] <aphysically> yeah it can't
[09:56:07] <furq> -vf zscale,format=p010le
[09:56:20] <aphysically> isn't that doing it as two separate filters?
[09:56:28] <furq> no
[09:56:40] <furq> that signals to zscale what format it should output
[09:57:05] <aphysically> huh
[09:57:07] <aphysically> okay, let's try it
[10:01:53] <aphysically> nope, same color as before
[10:03:26] <aphysically> so I guess you gotta pick your poison -> worse blocking (h264), awful banding (hevc), or inaccurate color (hevc 10 bit)
[10:04:10] <aphysically> honestly the color change isn't that bad I wouldn't notice it if I wasn't comparing the images side by side
[10:06:47] <aphysically> re: too much effort, yeah except for what seems like a pretty low chance it's an ffmpeg bug, it does seem like a bit of a lost cause
[10:07:26] <furq> well if it also happens with zscale then it's unlikely to be an swscale bug
[10:07:38] <furq> so unless you're not flagging primaries etc correctly then it's nvenc's fault
[10:07:56] <galad> hardware encoders, also known as abandon hope all ye who enter here
[10:08:51] <aphysically> I'm not touching that at all, so it stays p709 or whatever it is I think furq
[10:09:20] <furq> it's worth explicitly flagging everything just in case
[10:09:48] <aphysically> I *think* I will be able to cleanly do that with vf_libplacebo when that lands
[10:10:47] <aphysically> in the meantime I'm not sure offhand the best way, zscale can do conversions which is probably more correct than blindly flagging (I'm sure to run into whatever the SD color primary thing is sometimes)
[10:28:03] <aphysically> furq: yeah this *particular* input file had the colors untagged and tagging them fixed the color in the 10 bit file
[10:28:05] <aphysically> interesting!
[10:29:32] <aphysically> let's try the 8 bit encode again
[10:30:18] <aphysically> nope the 8 bit encode is still super borked, but worth a check anyway
[10:31:19] <aphysically> hmmm I wonder how I should handle this in my program for arbitrary files; zscale actually fails completely on the file and I have to specify the input primaries manually
[10:31:40] <furq> with difficulty
[10:31:59] <aphysically> lol
[10:32:28] <aphysically> well at least in principle I don't have to choose between blockier encodes and insane banding anymore
[10:33:28] <aphysically> or rather blockier encodes and inaccurate color
[10:34:24] <aphysically> iirc vf_libplacebo doesn't choke with unspecified color primaries and stuff so I can use that to specify the colors in all cases
[10:35:36] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 258 seconds)
[10:41:42] <aphysically> I can use ffprobe to see if it's specified and if not to assume it's bt709 or something? How does mpv do this?
[10:41:52] <aphysically> assume based on resolution?
[10:42:02] *** Joins: Vonter (~Vonter@user/vonter)
[10:45:54] <furq> as far as i know yes
[10:46:10] <furq> 601 for sd, 709 for hd, then beyond that it's complicated
[10:46:31] <furq> granted it's complicated for the other two also but those values are almost always correct
[10:46:33] <aphysically> yeah I mean, if it's "beyond that" I'm probably not encoding without implementing tonemapping and I would do that with vf_libplacebo anyway
[10:46:43] <furq> right
[10:47:12] <furq> well there's plenty of non-hdr 2160p but that's the point at which you need to get more in depth with it
[10:47:57] <aphysically> I'd probably just assume that's bt709 too
[10:48:12] <aphysically> the only non-HDR 4k I have on my system are all tagged bt709 at least
[10:48:47] <furq> yeah if it's 8-bit then it's probably 709
[10:48:54] <furq> if it's not then good luck
[10:50:16] <aphysically> oh zscale has an unspecified option for the inputs ~ let's try that, maybe zscale has an implementation of this "assuming" for me
[10:50:58] <aphysically> if that works that's easy, I can probe the file to see if it's specified in advance
[10:52:07] <aphysically> ah nope, it errors out for unspecified, so I do have to do it myself
[10:54:48] <aphysically> this is a mess
[10:55:05] <furq> correct
[10:57:32] <aphysically> idk I might just assume everything unspecified is bt709 until vf_libplacebo lands and then let it do it
[10:58:40] <aphysically> that would be more correct than my current situation for 10 bit HEVC
[11:00:28] <aphysically> I do need to find some 10 bit content to test though, if it's the case that the least significant bit or something isn't getting encoded in the nvenc HEVC encoders, if I'm encoding 10 bit content I need to dither it down to 8 bit before encoding at main10
[11:08:09] *** Joins: Ravalox (~Ravalox@cpe-76-182-226-114.tx.res.rr.com)
[11:09:40] <Ravalox> When using ffmpeg on audio files that have embedded album art, what is the correct way to preserve the art and write it into the output?
[11:10:26] <Ravalox> someone on the net had posted to use -c:v copy ... but this doesnt seem to work
[11:11:01] <furq> you usually need -disposition:v attached_pic
[11:11:16] <furq> some muxers don't support album art though
[11:12:51] <Ravalox> ok, thanks!   I'll check that out
[11:51:41] *** Joins: Buster_ (~Buster@buster-net.ru)
[11:51:43] <aphysically> oh god I'm not sure if I want to go through making a minimal reproducer for the problem with nvenc hevc, if it's broken on nvidia's side it might not even be a problem that's fixable without a hardware revision
[12:09:23] <aphysically> oh I got my screencaps wrong I should automate it so I can't mess up anymore, setting the primaries and such didn't fix the 10 bit nvenc encoder
[12:09:39] <aphysically> (the color of it I mean)
[12:10:48] <aphysically> eh it's late time to mess with this more tomorrow
[12:14:30] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 276 seconds)
[12:25:20] *** Joins: debayer (~debayer@2603-8000-cf00-0010-4dc2-efc1-b952-84db.res6.spectrum.com)
[12:40:02] *** Quits: elastic_dog (~elastic_d@ary207.neoplus.adsl.tpnet.pl) (Ping timeout: 256 seconds)
[12:42:56] *** Joins: palasso (~palasso@user/palasso)
[12:45:10] *** Quits: Ravalox (~Ravalox@cpe-76-182-226-114.tx.res.rr.com) ()
[12:46:39] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[12:58:09] *** Joins: Fohsap (~Muimi@60.20.216.21)
[13:02:42] *** Joins: Volgaar (~volgaar@2a01:cb14:279:1900:efab:56f4:5513:da8)
[13:25:39] *** Quits: Fohsap (~Muimi@60.20.216.21) (Quit: Going offline, see ya! (www.adiirc.com))
[13:37:59] *** Quits: darkapex (~darkapex@user/darkapex) (Read error: Connection reset by peer)
[13:39:41] *** Joins: darkapex (~darkapex@user/darkapex)
[14:07:20] *** Joins: der_richter (~Akemi@p2e580ddd.dip0.t-ipconnect.de)
[14:14:17] *** Quits: xlei (znc@pool-68-129-84-118.nycmny.fios.verizon.net) (Ping timeout: 245 seconds)
[14:15:06] *** Joins: therobin_ (~UserNick@69-165-144-254.dsl.teksavvy.com)
[14:15:32] *** Quits: cryptic (~cryptic@142-196-139-017.res.spectrum.com) (Ping timeout: 245 seconds)
[14:15:56] *** Joins: cryptic (~cryptic@142-196-139-017.res.spectrum.com)
[14:16:11] *** Quits: galad (~galad@104.244.73.90) (Ping timeout: 252 seconds)
[14:16:22] *** Quits: therobin (~UserNick@69-165-144-254.dsl.teksavvy.com) (Ping timeout: 245 seconds)
[14:16:32] *** therobin_ is now known as therobin
[14:16:39] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[14:17:17] *** Quits: ullbeking (sid5364@id-5364.charlton.irccloud.com) (Ping timeout: 252 seconds)
[14:17:17] *** Quits: GTAXL (~gtaxlnetw@user/gtaxl) (Ping timeout: 252 seconds)
[14:18:02] *** Quits: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru) (Ping timeout: 245 seconds)
[14:18:20] *** Joins: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru)
[14:18:23] *** Quits: lullerhaus (SAI@aws.imelik.info) (Ping timeout: 252 seconds)
[14:18:27] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 245 seconds)
[14:18:32] *** Joins: lullerhaus (SAI@aws.imelik.info)
[14:18:38] *** Quits: michaelni (~michael@213-47-68-29.cable.dynamic.surfer.at) (Ping timeout: 256 seconds)
[14:19:00] *** Quits: Fenrir (~Fenrir@user/fenrir) (Ping timeout: 272 seconds)
[14:19:08] *** Joins: ullbeking (sid5364@id-5364.charlton.irccloud.com)
[14:19:17] *** Quits: tmatth (sid143283@videolan/developer/tmatth) (Ping timeout: 245 seconds)
[14:19:29] *** Quits: itok (sid418430@id-418430.charlton.irccloud.com) (Ping timeout: 252 seconds)
[14:19:52] *** Joins: GTAXL (~gtaxlnetw@user/gtaxl)
[14:20:02] *** Quits: Tips|Cloud (sid62231@id-62231.charlton.irccloud.com) (Ping timeout: 252 seconds)
[14:20:07] *** Quits: neil46 (~neil@117.139.15.34) (Ping timeout: 245 seconds)
[14:21:28] *** Quits: berndj (~berndj@ns1.linksynergy.co.za) (Ping timeout: 256 seconds)
[14:22:02] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Ping timeout: 256 seconds)
[14:22:36] *** Quits: betelgeuse (~john2gb@94-225-47-8.access.telenet.be) (Ping timeout: 256 seconds)
[14:22:46] *** Quits: intrac (~intracube@user/intracube) (Read error: Connection reset by peer)
[14:22:48] *** Quits: termos (sid18647@id-18647.brockwell.irccloud.com) (Ping timeout: 272 seconds)
[14:23:27] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 245 seconds)
[14:23:27] *** Quits: colona_ (~colona@grunt.ycc.fr) (Ping timeout: 245 seconds)
[14:23:31] *** Joins: xlei (znc@pool-68-129-84-118.nycmny.fios.verizon.net)
[14:24:04] *** Quits: linjie (sid455360@id-455360.brockwell.irccloud.com) (Ping timeout: 272 seconds)
[14:25:59] *** Quits: anticw (~anticw@157-131-246-230.fiber.dynamic.sonic.net) (Ping timeout: 250 seconds)
[14:27:30] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[14:28:50] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Ping timeout: 252 seconds)
[14:30:26] *** Joins: linjie (sid455360@id-455360.brockwell.irccloud.com)
[14:30:30] *** Joins: Fenrir (~Fenrir@2607:f298:5:101d:f816:3eff:feda:e700)
[14:30:30] *** Quits: Fenrir (~Fenrir@2607:f298:5:101d:f816:3eff:feda:e700) (Changing host)
[14:30:30] *** Joins: Fenrir (~Fenrir@user/fenrir)
[14:30:32] *** Quits: shlomif (~shlomif@87.68.242.72.adsl.012.net.il) (Ping timeout: 245 seconds)
[14:30:34] *** Joins: tmatth (sid143283@videolan/developer/tmatth)
[14:30:34] *** Joins: Tips|Cloud (sid62231@id-62231.charlton.irccloud.com)
[14:30:54] *** Joins: michaelni (~michael@213-47-68-29.cable.dynamic.surfer.at)
[14:31:24] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[14:31:24] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Client Quit)
[14:32:13] *** Quits: dustinm` (~dustinm@static.38.6.217.95.clients.your-server.de) (Ping timeout: 245 seconds)
[14:32:30] *** Joins: termos (sid18647@id-18647.brockwell.irccloud.com)
[14:32:37] *** Quits: tofran (~tofran@37.189.158.134) (Ping timeout: 245 seconds)
[14:33:27] *** Quits: Hackerpcs (~user@user/hackerpcs) (Ping timeout: 245 seconds)
[14:33:58] *** Joins: tofran (~tofran@37.189.158.134)
[14:34:18] *** Joins: berndj (~berndj@ns1.linksynergy.co.za)
[14:34:42] *** Joins: itok (sid418430@id-418430.charlton.irccloud.com)
[14:35:37] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[14:35:59] *** Quits: michaelni (~michael@213-47-68-29.cable.dynamic.surfer.at) (Ping timeout: 252 seconds)
[14:36:21] *** Joins: michaelni (~michael@213-47-68-29.cable.dynamic.surfer.at)
[14:37:12] *** Quits: pulec (~pulec@user/pulec) (Ping timeout: 245 seconds)
[14:37:12] *** Joins: pulec_ (~pulec@2a01:7c8:aabf:229:a8ad:c144:ead8:663)
[14:37:36] *** Joins: Hackerpcs (~user@user/hackerpcs)
[14:37:48] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[14:38:27] *** Joins: Vonter (~Vonter@user/vonter)
[14:40:55] *** Joins: dustinm` (~dustinm@static.38.6.217.95.clients.your-server.de)
[14:41:30] *** Quits: berndj (~berndj@ns1.linksynergy.co.za) (Excess Flood)
[14:42:13] *** pulec_ is now known as pulec
[14:43:15] *** Quits: pulec (~pulec@2a01:7c8:aabf:229:a8ad:c144:ead8:663) (Changing host)
[14:43:15] *** Joins: pulec (~pulec@user/pulec)
[14:43:53] *** Joins: berndj (~berndj@ns1.linksynergy.co.za)
[14:43:57] *** Joins: colona (~colona@grunt.ycc.fr)
[14:46:26] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Ping timeout: 252 seconds)
[14:46:39] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[14:51:47] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 245 seconds)
[14:52:08] *** Joins: keypusher (keypusher@user/keypusher)
[14:53:19] *** Joins: intrac (~intracube@user/intracube)
[14:56:40] *** Joins: anticw (~anticw@157-131-246-230.fiber.dynamic.sonic.net)
[15:12:30] *** Quits: mickey (~user@user/mickey) (Remote host closed the connection)
[15:14:03] *** Joins: mickey8 (~user@user/mickey)
[15:32:16] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[15:32:29] *** Joins: mickey8 (~user@user/mickey)
[15:37:24] *** Quits: hendry (~hendry@210.23.22.2) (Quit: brb)
[15:39:42] *** Joins: hendry (~hendry@210.23.22.2)
[15:48:56] *** Quits: Vonter (~Vonter@user/vonter) (Read error: Connection reset by peer)
[15:49:22] *** Joins: Vonter (~Vonter@user/vonter)
[16:29:18] *** Quits: jansenh (~jansenh@2a10:3781:4dd:a:906e:1144:d769:19d9) (Read error: Connection reset by peer)
[16:37:12] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 245 seconds)
[16:39:29] *** Joins: waleee (~waleee@h-98-128-228-119.NA.cust.bahnhof.se)
[16:58:51] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[16:59:36] *** Joins: Atsuko (~x@94.242.250.86)
[17:04:19] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[17:07:34] <SnakesAndStuff> I have two mp4 videos that I recorded via sstream... the files were recorded using -f ssegment so I assume I need to do something more complicated than just a concat?
[17:07:54] <SnakesAndStuff> sorry, ignore "via sstream"
[17:12:17] <BtbN> I'm not actually sure what happens if you do ssegment for mp4
[17:12:23] <BtbN> the format is not exactly compatible with that
[17:13:10] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[17:13:24] <SnakesAndStuff> Hmmm... I'm trying now just copying the streams and re-encoding (-i file -i file) and *not* copying the video codec... seeing if it will concat and reencode one after another.
[17:13:53] <SnakesAndStuff> Silly me, I have the computer I'm recoding this on 120 miles away and it isn't internet accessible... so I don't have the complete command I used.
[17:13:57] <BtbN> I'd assume you can just physically concat those files if you use ssegment
[17:14:09] <BtbN> i.e. cat file1.mp4 file2.mp4
[17:14:26] <BtbN> but it'll horribly explode if you get the order wrong or don't include all segments
[17:14:32] <SnakesAndStuff> I'm pretty sure I had movflags=+faststart -reset_timestamps 1.....
[17:14:43] <BtbN> +faststart probably will not work with ssegment
[17:14:53] <SnakesAndStuff> I do know that if I just c:video copy and use both files it ends up with a file that is just the length of the first one.....
[17:15:06] <BtbN> the whole point of ssegment over segment is to not re-open the muxing session with every segment
[17:15:12] <BtbN> which with mp4 is... problematic
[17:16:11] <SnakesAndStuff> what container is safer? If it matters I'm just copying the video codec and not re-encoding the rtsp stream
[17:17:52] *** Joins: Vonter (~Vonter@user/vonter)
[17:18:13] <BtbN> pretty much everything else but mp4
[17:18:19] <BtbN> typically you use mpegts
[17:18:44] <SnakesAndStuff> another stupid question (sorry, I'm full of them)
[17:19:13] <SnakesAndStuff> when testing to see if I can combine them, would it make sense to output raw video first to see if it works rather than waste the processor time encoding an hour of video on a test run?
[17:21:45] <BtbN> Not sure what you mean
[17:21:49] <BtbN> why not just play the result?
[17:23:54] *** Quits: blb (~blb@user/blb) (Ping timeout: 276 seconds)
[17:24:14] *** Joins: blb (~blb@user/blb)
[17:24:16] <SnakesAndStuff> I was encoding it back to another, new mp4... it was taking forever to encode and I wasn't sure if it was going to work....
[17:26:16] <SnakesAndStuff> So I went back and am trying it with -vcodec rawvideo and saving it and then if it works, I'll encode it.... maybe save some time by not encoding a file that doesn't work....
[17:29:47] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[17:29:48] <BtbN> Why re-encode it at all?
[17:29:52] <BtbN> Just concat the files and see
[17:30:18] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[17:33:03] <SnakesAndStuff> The concat did not work.
[17:33:13] <SnakesAndStuff> I tried to concat two 30 minute files... and the output was 30 minutes long
[17:33:38] <BtbN> can you play each individual file?
[17:33:45] <SnakesAndStuff> Yes.
[17:34:30] <BtbN> Interesting, then the ssegment muxer was smart enough
[17:34:35] <BtbN> Just use the usual concat methods then
[17:34:49] <BtbN> But there might be a noticeable gap between the segments
[17:35:02] <SnakesAndStuff> I apologize as I'm running on 2 hours of sleep, lots of driving, and worn out.... :D I wish I would've copied down the exact command I used to record the data with.
[17:35:29] *** Joins: nrg (~NRG@user/nrg)
[17:35:42] <SnakesAndStuff> I realize I came in here barking out questions and don't want to come across as rude. I understand that I have a lack of information and understanding when it comes to video decoding/encoding :D
[17:48:20] <SnakesAndStuff> BtbN: Thank you
[17:58:00] *** Quits: debayer (~debayer@2603-8000-cf00-0010-4dc2-efc1-b952-84db.res6.spectrum.com) (Quit: Textual IRC Client: www.textualapp.com)
[17:59:14] *** Joins: rsx (~dummy@ppp-188-174-157-141.dynamic.mnet-online.de)
[18:14:05] *** Joins: Buster_ (~Buster@buster-net.ru)
[18:44:45] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[18:51:02] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[18:51:19] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[18:57:36] *** Quits: Bombo_ (atom@p4ff00688.dip0.t-ipconnect.de) (Changing host)
[18:57:36] *** Joins: Bombo_ (atom@user/bombo)
[18:57:36] *** Bombo_ is now known as Bombo
[19:04:18] *** Joins: anyhow (~anyhow@193.170.138.1)
[19:30:02] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 272 seconds)
[19:42:53] *** Quits: TheSashmo (~TheSashmo@158.106.77.7) (Quit: Leaving...)
[19:52:48] *** Joins: zmt00 (~zmt00@user/zmt00)
[19:59:20] *** Quits: anyhow (~anyhow@193.170.138.1) (Remote host closed the connection)
[19:59:36] *** Joins: anyhow (~anyhow@193.170.138.1)
[20:00:26] *** Joins: TheSashmo (~TheSashmo@158.106.77.7)
[20:14:23] *** Joins: phonemic (~phonemic@104-60-219-66.lightspeed.nsvltn.sbcglobal.net)
[20:16:41] *** Quits: phonemic (~phonemic@104-60-219-66.lightspeed.nsvltn.sbcglobal.net) (Client Quit)
[20:16:43] *** Quits: Vonter (~Vonter@user/vonter) (Quit: WeeChat 3.2)
[20:37:21] *** Quits: jess (~jess@libera/staff/jess) ()
[20:51:55] *** Joins: cslcm (~cslcm@46.33.132.100)
[21:21:44] *** Joins: Vonter (~Vonter@user/vonter)
[21:24:20] *** Quits: Aelius (~Aelius@user/aelius) (Quit: quit)
[21:25:35] *** Joins: Aelius (~Aelius@user/aelius)
[21:27:37] *** Quits: anyhow (~anyhow@193.170.138.1) (Ping timeout: 250 seconds)
[21:32:16] *** Joins: KombuchaKip (~kip@192.252.230.5)
[21:34:52] *** Joins: minimal (~minimal@user/minimal)
[21:36:40] <aphysically> okay back to debugging nvenc hevc encoding today
[21:41:39] <cslcm> Hi everyone - how can I change a property of a filter in an AVFilterGraph during playback? Do I have to tear down the graph and re-build it?
[21:41:47] <cslcm> (in this case, volume)
[21:53:01] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[21:58:41] *** Joins: keypushe- (keypusher@user/keypusher)
[21:59:15] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 250 seconds)
[22:01:53] *** keypushe- is now known as keypusher
[22:05:03] *** Joins: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu)
[22:05:52] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[22:10:50] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[22:22:34] *** Joins: Trieste_ (T@user/pilgrim)
[22:22:52] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 272 seconds)
[22:28:18] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Remote host closed the connection)
[22:30:14] *** Joins: Hibana_ (~zsoltiv@fibhost-67-12-35.fibernet.hu)
[22:30:38] *** Hibana_ is now known as Guest8678
[22:30:56] *** Quits: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu) (Ping timeout: 268 seconds)
[22:30:56] *** Guest8678 is now known as zsoltiv_
[22:33:21] <aphysically> furq: aw okay, so normalizing my testing stuff to the same frame and being very careful about naming - tagging the correct color primaries and such causes the 10 bit nvenc hevc encode colors to be a bit worse (but h264 nvenc colors stay the same!)
[22:33:39] <aphysically> good lord
[22:36:47] <aphysically> ahah, but it's *not* nvenc's fault, I just tested and the color change happens with p010le conversion
[22:37:18] <aphysically> if I make a screenshot of the reference but with -vf format=p010le I get the same colors as the 10 bit nvenc encode
[22:42:43] <aphysically> reference source: https://stream.gably.net/images/encode/03-reference.png
[22:42:44] *** Quits: Nex8192 (~Nex8192@user/nex8192) (Ping timeout: 252 seconds)
[22:42:58] *** Joins: arcatech (~arcatech@user/arcatech)
[22:42:59] <aphysically> reference with -vf format=p010le https://stream.gably.net/images/encode/03-reference-p010le.png
[22:43:15] <aphysically> hevc 10 bit encode: https://stream.gably.net/images/encode/03-30M-hevc-10bit.png
[22:43:40] <aphysically> so for whatever reason the 8 to 10 bit conversion introduces a teeny bit of color change
[22:44:46] *** Joins: Nex8192 (~Nex8192@user/nex8192)
[22:46:13] *** Joins: anyhow (~anyhow@178.113.107.134.wireless.dyn.drei.com)
[22:51:22] *** Quits: anyhow (~anyhow@178.113.107.134.wireless.dyn.drei.com) (Ping timeout: 245 seconds)
[22:52:49] *** Quits: BUSY (~BUSY@user/busy) (Read error: Connection reset by peer)
[22:56:48] *** Quits: rsx (~dummy@ppp-188-174-157-141.dynamic.mnet-online.de) (Quit: rsx)
[22:58:55] *** Joins: anyhow (~anyhow@178.113.107.134.wireless.dyn.drei.com)
[22:59:34] *** Quits: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com) (Quit: Konversation terminated!)
[23:16:13] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Quit: Konversation terminated!)
[23:17:06] *** Quits: raytiley (sid13397@id-13397.stonehaven.irccloud.com) (Ping timeout: 240 seconds)
[23:17:34] *** Quits: mindfreeze (uid250931@user/mindfreeze) (Read error: Connection reset by peer)
[23:18:40] *** Quits: kurosu (uid342582@id-342582.stonehaven.irccloud.com) (Ping timeout: 272 seconds)
[23:18:40] *** Joins: BUSY (~BUSY@user/busy)
[23:21:03] *** Joins: raytiley (sid13397@stonehaven.irccloud.com)
[23:21:34] *** Joins: mindfreeze (uid250931@user/mindfreeze)
[23:21:40] *** Joins: kurosu (uid342582@id-342582.stonehaven.irccloud.com)
[23:24:39] *** Quits: wyatt8750 (~wyatt8740@94.140.11.225) (Ping timeout: 276 seconds)
[23:27:33] <aphysically> question about the logging when doing -vf zscale,format=p010le, is this really zscale doing the format conversion: https://dpaste.com/7J4R2CVY2
[23:27:44] *** Quits: anyhow (~anyhow@178.113.107.134.wireless.dyn.drei.com) (Ping timeout: 256 seconds)
[23:27:56] <aphysically> I clipped just the part of interest - isn't [auto_scaler_0 @ 0x559ab6ccafc0] swscale?
[23:28:35] <JEEB> yes, since zscale only deals with planar formats
[23:28:45] <JEEB> so you got auto-inserted scale filter
[23:28:52] <JEEB> there IIRC is an option to specifically disable that
[23:29:02] <JEEB> so if you ask for something not possible -> you get an error
[23:29:20] <aphysically> no auto conversion or something?
[23:29:26] <aphysically> I think I remember reading that
[23:29:59] <JEEB> but basically with zscale it would be `zscale,format=yuv420p10,scale,format=p010` , I think?
[23:30:15] <JEEB> since you need scale filter to just do the repacking from yuv420p10 (planar) to p010 (half-packed)
[23:33:06] <aphysically> yeah that works it looks like
[23:33:32] <JEEB> and if your input is not planar, zimg/zscale needs the input to be planar
[23:33:38] <JEEB> yuv420p etc is planar, though
[23:36:45] <aphysically> going yuv420p->yuv420p10->p010 results in different color from yuv420p->p010 which are both slightly different colors from the base yuv420p
[23:37:27] <aphysically> going yuv420p->p010->yuv420p results in a different color still from all of the above, unless I specify -sws_flags accurate_rnd+full_chroma_int in which case it matches the yuv420p->p010 case
[23:39:28] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[23:43:45] *** Joins: wyatt8740 (~wyatt8740@149.164.111.64)
[23:50:36] *** Quits: darkapex (~darkapex@user/darkapex) (Read error: Connection reset by peer)
[23:50:40] *** Joins: darkapex_ (~darkapex@user/darkapex)
[23:52:11] *** Joins: darkapex (~darkapex@user/darkapex)
[23:54:57] *** Quits: darkapex_ (~darkapex@user/darkapex) (Ping timeout: 250 seconds)
[23:57:30] *** Joins: nitram (~nitram@superblob.com)
[23:58:36] <aphysically> yuv420p->yuv420p10 is the same color as yuv420p->yuv420p10->p010 though, but I'm not sure how that could end up different from yuv420p->p010
[23:58:53] <JEEB> whatever route scale filter decides to take there?
[23:58:57] <JEEB> or well, swscale
