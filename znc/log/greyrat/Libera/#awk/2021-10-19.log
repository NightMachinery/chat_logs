[00:03:21] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[00:27:00] *** Joins: seninha (~seninha@user/seninha)
[00:44:03] *** Quits: nvmd (~nvmd@user/nvmd) (Quit: Later, nerds.)
[01:03:46] *** Joins: Torr (~Torr@user/torr)
[02:06:55] *** Quits: nmz1 (~nmz@24.137.228.140) (Quit: EXIT)
[02:21:08] *** Joins: nmz (~nmz@24.137.228.140)
[02:21:14] *** Quits: nmz (~nmz@24.137.228.140) (Client Quit)
[02:32:20] *** Joins: velix (~velix@user/velix)
[02:33:23] <velix> Is there a way to merge those three commands? Or doesn't it work? I tried '{...} {...} {...}', but the results were different: `awk -F '/' '{ print $(NF-1)"/"$(NF) }' | awk '!a[$0]++' | awk '{printf("%08d_%s\n", NR, $0)}'`
[02:34:09] <velix> I mean, piping doesn't hurt that mutch, does it?
[02:37:46] <earnestly> velix: '!a[$(NF-1)"/"$NF]++ {printf ...}'
[02:38:04] <emanuele6> awk -F/ '{ tmp = $(NF-1)"/"$(NF); if (!a[tmp]++) print tmp }'
[02:38:34] <velix> does this do the same?  '!a[$0]++' is pretty important to keep the order and remove duplicates.
[02:38:46] <e36freak> yes
[02:38:47] <emanuele6> yes
[02:38:52] <velix> hello echo
[02:38:56] <e36freak> hello echo
[02:38:59] <velix> )
[02:39:01] <velix> ;)
[02:39:07] <velix> Thanks a lot.
[02:39:37] <velix> wait... for which solution shall I go? earnestly or emanuele6 ?
[02:39:49] <e36freak> they both do the same thing
[02:39:55] <e36freak> whichever you find more readable
[02:40:16] <earnestly> I just did beta reduction, or whatever it's called
[02:40:23] <e36freak> like literally the exact same thing, one just uses a temp variable
[02:40:43] <earnestly> Since they use -F, the printf might need to change what $0 means
[02:40:56] <velix> But what about the NR part? :D
[02:41:00] <earnestly> So a temporary might be useful to avoid retyping out the same expansion
[02:41:19] <emanuele6> awk -F/ '{ tmp = $(NF-1)"/"$(NF); if (!a[tmp]++) printf "%08_%s\n", length(a), tmp; }'
[02:41:24] <emanuele6> this should work, maybe
[02:41:24] <velix> ahhhh
[02:41:39] <e36freak> or just keep a counter variable
[02:41:43] <earnestly> Yeah
[02:41:49] <e36freak> i'd probably do that preferably to calling length() over and over
[02:42:00] <emanuele6> right, that is better
[02:42:20] <velix> erm okay. let me google for this
[02:42:23] <emanuele6> awk -F/ '{ tmp = $(NF-1) "/" $NF; if (!a[tmp]++) printf "%08_%s\n", ++i, tmp; }'
[02:42:35] <e36freak> ya
[02:42:53] <velix> This returns %08_670 etc. ;)
[02:43:10] <e36freak> missing a d in the format string
[02:43:16] <earnestly> velix: clearly they missed 'd', so add it back
[02:43:21] <velix> oh yeah sorry.
[02:43:22] <emanuele6> awk -F/ '{ tmp = $(NF-1) "/" $NF; if (!a[tmp]++) printf "%08d_%s\n", ++i, tmp }'
[02:43:29] <velix> 1:15 am ... sorry
[02:43:38] <earnestly> It is late yeah, wtf am I doing here
[02:43:44] <emanuele6> same
[02:44:14] <velix> thanks a lot ;)
[03:03:50] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[03:10:43] <velix> Which one would you go for?
[03:10:44] <velix>     echo "00000686/00006440/9YF7VVR60007" | awk -F/ -vOFS= '{print "tiffcrop -c g4 02-input/", $0, ".tct 03-processing/", $1, "_", $2, "_", $3, ".tif; echo"}'
[03:10:44] <velix>     echo "00000686/00006440/9YF7VVR60007" | awk -F/ '{printf("tiffcrop -c g4 02-input/%s.tct 03-processing/%s_%s_%s.tif; echo\n", $0, $1, $2, $3)}'
[03:11:54] <emanuele6> that looks like an unsafe code injection
[03:12:05] <velix> emanuele6: 100% safe input
[03:12:24] <velix> like condom + pill + nosex
[03:16:24] <velix> normally I like printf
[03:17:13] <emanuele6> what's the point of OFS=''?
[03:18:20] <emanuele6> awk -F/ '{print "tiffcrop -c g4 02-input/" $0 ".tct 03-processing/" $1 "_" $2 "_" $3 ".tif; echo"}'
[03:18:42] <emanuele6> you can concatenate the string and then print
[03:19:40] <velix> emanuele6: I thought this adds spaces. Okay, I'll try.
[03:19:59] <emanuele6> velix: if you pass individual arguments, it does
[03:20:11] <emanuele6> s/individual/multiple/
[03:20:24] <emanuele6> but i am passing a single argument, notice that there are no commas
[03:20:58] <emanuele6> why are you doing a code injection by the way?
[03:24:15] <emanuele6> # printf '%s\n' '$(poweroff)' "echo 'hello, velix'; " '*/*' | awk -vq=\' 'function shquote(str) { gsub(q, q "\\" q q, str); return q str q; } { print shquote($0) }'
[03:24:18] <shbot> emanuele6: '$(poweroff)'
[03:24:18] <shbot> emanuele6: 'echo '\''hello, velix'\''; '
[03:24:18] <shbot> emanuele6: '*/*'
[03:24:54] <emanuele6> shquote() is easy to implement in awk
[03:25:23] <e36freak> yurp
[03:27:08] <velix> emanuele6: The incoming stuff is 100% safe
[03:28:07] <emanuele6> you are never really safe with sh injections unless you quote :o
[03:28:18] <emanuele6> but what is the code injection for anyway?
[03:28:55] <velix> Sorry, I don't get the point. I'm reading tct files and writing them to .tif ;)
[03:29:47] <emanuele6> i am asking, what are you doing with the output of that awk command?
[03:29:54] <emanuele6> `| sh -'?
[03:30:03] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[03:30:56] <velix> Yes, but using xargs. but the input is 100% safe. No powerdown, nothing.
[03:31:00] <emanuele6> if you are doing that a while-read instead of awk is surely a better option
[03:31:16] <velix> No, the output is being archived before running etc.
[03:37:38] <velix> emanuele6: but you're right of course.
[03:37:57] <velix> For input I don't know, your way is the right one.
[03:38:18] <velix> But the incoming filenames are 100% right and synthetic. And there's no AI messing with that :D
[03:40:56] *** Joins: nmz (~nmz@adsl-64-237-239-136.prtc.net)
[03:42:08] <emanuele6> i'm not even saying you should use a shquote() function in awk, i'm saying you shouldn't use a code injection at all
[03:42:27] <emanuele6> even if you want to log commands, your posix shell can do that
[03:44:50] <emanuele6> this code injection seems very unnecessary, but whatever
[04:09:08] *** Joins: roarde (~roarde@user/roarde)
[04:22:43] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[04:30:29] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[04:34:39] *** Joins: vlm (~vlm@user/vlm)
[04:50:52] <velix> emanuele6: Sorry, I think I'm missunderstanding "code injection". Normally this means something bad.
[04:50:57] <velix> Like "SQL injection"
[05:06:02] <nmz> I suppose argument injection for shell is code injection?
[05:08:32] <nmz> I don't like it either tbh
[05:16:20] *** Quits: nmz (~nmz@adsl-64-237-239-136.prtc.net) (Ping timeout: 258 seconds)
[05:16:44] *** Joins: nmz (~nmz@24.137.228.140)
[05:35:14] *** Quits: nmz (~nmz@24.137.228.140) (Ping timeout: 260 seconds)
[05:37:03] *** Joins: nmz (~nmz@24.137.228.140)
[05:58:06] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 260 seconds)
[06:35:47] *** Quits: nmz (~nmz@24.137.228.140) (Ping timeout: 264 seconds)
[06:37:31] *** Joins: nmz (~nmz@24.137.228.140)
[06:42:05] *** Quits: ztx (~ztx@user/ztx) (Quit: ztx)
[06:48:00] *** Joins: ztx (~ztx@user/ztx)
[07:17:05] *** Quits: tag (sid271787@id-271787.lymington.irccloud.com) (Ping timeout: 258 seconds)
[07:19:26] *** Joins: tag (sid271787@id-271787.lymington.irccloud.com)
[07:24:51] *** Joins: lgc (~lgc@user/lgc)
[09:57:01] *** Joins: lavaball (felix@31.204.155.215)
[10:06:22] *** Quits: unmanbearpig (~unmanbear@user/unmanbearpig) (Ping timeout: 260 seconds)
[10:11:30] *** Joins: loganlee (~Thunderbi@user/loganlee)
[10:21:24] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[10:49:16] *** Joins: loganlee (~Thunderbi@user/loganlee)
[10:49:52] *** Joins: earnestly (~earnest@user/earnestly)
[11:44:15] *** Quits: ravan (~ravan@user/ravan) (Remote host closed the connection)
[11:51:03] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[12:45:18] *** Quits: lgc (~lgc@user/lgc) (Quit: WeeChat 3.2-dev)
[13:00:48] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[13:08:15] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[13:09:27] *** Joins: lavaball (felix@31.204.155.215)
[14:45:59] *** Quits: Torr (~Torr@user/torr) (Ping timeout: 264 seconds)
[15:53:23] *** Joins: Torr (~Torr@user/torr)
[15:55:30] *** Quits: Torr (~Torr@user/torr) (Read error: Connection reset by peer)
[16:25:24] *** Quits: roarde (~roarde@user/roarde) (Quit: Leaving)
[16:41:37] *** Joins: seninha (~seninha@user/seninha)
[16:57:51] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[17:16:02] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[17:43:24] *** Joins: lgc (~lgc@user/lgc)
[18:16:47] *** Joins: lavaball (felix@31.204.155.215)
[18:48:56] *** Quits: Fozzworth_ (~Fozzworth@68-123-12-205.lightspeed.sntcca.sbcglobal.net) (Quit: Leaving)
[19:20:21] *** Quits: ztx (~ztx@user/ztx) (Read error: Connection reset by peer)
[19:26:20] *** Joins: ztx (~ztx@user/ztx)
[20:08:40] *** Joins: Torr (~Torr@user/torr)
[22:47:55] *** Joins: kensanata (~user@user/kensanata)
[23:13:01] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[23:35:25] *** Joins: jetchisel (jetchisel@user/jetchisel)
[23:50:41] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 258 seconds)
