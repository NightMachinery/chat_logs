[00:12:56] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[00:14:54] *** Joins: waldo323 (~waldo323@d14-69-96-170.try.wideopenwest.com)
[00:14:58] <ash_worksi> is there a command to append after a specific line so I can do a "last match" thing easily with END? something like `awk '/pattern/{p=NR} END {append_after_line(NR, "more content")}'` ?
[00:18:27] <geirha> you could read the file twice, or store it in memory
[00:19:51] <ash_worksi> to read twice I do `awk ... file file` ?
[00:20:19] <geirha> yes   awk 'FNR == NR && /pattern/ { p = FNR ; next } { print; if (p == FNR) print "more content" }' file file
[00:21:25] <ash_worksi> so NR keeps counting up into the second file?
[00:21:39] <geirha> yes, while FNR resets to 1 for each file
[00:21:55] <ash_worksi> so it doesn't matter if p = FNR or NR, does it?
[00:22:05] <ash_worksi> since the block is guarded by FNR == NR anyway
[00:22:10] <geirha> right
[00:22:16] <ash_worksi> I see
[00:22:21] <ash_worksi> what do you need next?
[00:22:28] <ash_worksi> oh
[00:22:35] <ash_worksi> to stop it from running the print
[00:23:16] <ash_worksi> so you're actually printing the second file
[00:23:21] <ash_worksi> I got it
[00:23:50] <emanuele6> it should be `FNR == NR { if (/pattern/) p = FNR ; next }' i think
[00:24:35] <geirha> a more complicated approach is to start storing lines everytime you encounter pattern, until the next pattern, then you print the stored data and reset. In END you can then include your extra line(s)
[00:26:13] <ash_worksi> emanuele6: why?
[00:26:27] <geirha> awk '/pattern/{ for ( i = 1; i <= n; ++i) print a[i]; n = 0 } { a[++n] = $0 } END { print a[1] ; print "more content"; for (i = 2; i <= n; ++i) print a[i] }' file
[00:26:31] <geirha> something like that
[00:26:59] <geirha> ah yes, emanuele6 is right
[00:27:50] <emanuele6> ash_worksi: otherwise you'll first print all the lines in the that don't match /pattern/ and then then print the whole file again with "more content" added
[00:37:23] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[00:46:04] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Remote host closed the connection)
[00:46:07] <ash_worksi> I see
[00:46:12] <ash_worksi> thanks emanuele6 
[00:46:16] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[00:48:05] <emanuele6> you could use something like this
[00:48:10] <emanuele6> awk 'buf { buf = buf "\n" $0 } !buf { buf = $0 } /pat/ { print buf; buf = ""; x = 1 } END { printf "%s%s%s", x ? "something\n" : "", buf, buf ? "\n" : "" }' file
[00:49:03] <ash_worksi> crazeh
[00:50:39] <ash_worksi> wait... I thought I understood the flaw to && but I dont
[00:51:24] <emanuele6> it's not that hard
[00:51:45] <emanuele6> `FNR == NR && /pattern/ { ...; next }' only calls next for the lines of the first file that match /pattern/
[00:51:58] <ash_worksi> oh
[00:52:03] <emanuele6> you want to call next for all the lines in the first file, not just the ones that match /pattern/
[00:52:13] <ash_worksi> I see
[01:01:10] *** Quits: user51 (~user51@176.228.148.215) (Remote host closed the connection)
[01:36:29] *** Quits: ccl (ccl@shell.xshellz.com) (Ping timeout: 256 seconds)
[01:43:13] *** Joins: ccl (ccl@shell.xshellz.com)
[01:47:02] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[01:55:11] *** Quits: ccl (ccl@shell.xshellz.com) (Ping timeout: 256 seconds)
[02:43:18] *** Joins: ccl (ccl@shell.xshellz.com)
[02:51:14] *** Joins: Torr (~Torr@user/torr)
[03:20:29] *** Quits: BSaboia (~bsaboia@177.37.198.83) (Quit: This computer has gone to sleep)
[05:04:02] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[05:55:26] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Quit: ZNC 1.8.2 - https://znc.in)
[05:56:36] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[06:03:26] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Remote host closed the connection)
[06:04:34] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[06:05:29] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Remote host closed the connection)
[06:08:36] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[06:09:54] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Remote host closed the connection)
[06:11:29] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[06:13:06] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[06:14:44] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Remote host closed the connection)
[06:16:08] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[06:16:23] *** Joins: BSaboia (~bsaboia@177.37.198.83)
[06:18:50] *** Quits: lockywolf (~lockywolf@2a03:6000:6f63:638::177) (Remote host closed the connection)
[06:22:00] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[06:24:38] *** Quits: lockywolf (~lockywolf@2a03:6000:6f63:638::177) (Remote host closed the connection)
[06:25:31] *** Quits: BSaboia (~bsaboia@177.37.198.83) (Quit: This computer has gone to sleep)
[06:28:02] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[06:54:32] *** Quits: samir_ (~azureuser@user/samir) (Ping timeout: 256 seconds)
[07:10:03] *** Quits: lockywolf (~lockywolf@2a03:6000:6f63:638::177) (Quit: ZNC 1.8.2 - https://znc.in)
[07:11:33] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[07:14:58] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Remote host closed the connection)
[07:18:18] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[07:22:02] *** Joins: samir_ (~azureuser@user/samir)
[07:41:36] *** Joins: boubou (~boubou@hide.my.ip.upsidehosting.com)
[08:32:37] *** Joins: waldo323_ (~waldo323@d14-69-96-170.try.wideopenwest.com)
[08:35:15] *** Quits: waldo323 (~waldo323@d14-69-96-170.try.wideopenwest.com) (Ping timeout: 256 seconds)
[08:52:07] *** Joins: epony (~epony@user/epony)
[09:03:43] *** Joins: bluedust (~bluedust@103.148.20.45)
[09:21:58] *** Joins: bluedust_ (~bluedust@185.248.85.25)
[09:24:57] *** Quits: bluedust (~bluedust@103.148.20.45) (Ping timeout: 240 seconds)
[09:26:38] *** Quits: lockywolf (~lockywolf@2a03:6000:6f63:638::177) (Quit: ZNC 1.8.2 - https://znc.in)
[09:28:09] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[09:29:28] *** Quits: lockywolf (~lockywolf@2a03:6000:6f63:638::177) (Remote host closed the connection)
[09:30:59] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[09:34:36] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Remote host closed the connection)
[09:34:46] *** Quits: bluedust_ (~bluedust@185.248.85.25) (Remote host closed the connection)
[09:37:08] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[09:42:36] *** Joins: bluedust (~bluedust@86.106.136.216)
[09:53:42] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Ping timeout: 276 seconds)
[09:55:26] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[09:55:58] *** Joins: user51 (~user51@176.228.148.215)
[10:05:36] *** Joins: bluedust_ (~bluedust@117.222.186.134)
[10:08:37] *** Quits: bluedust (~bluedust@86.106.136.216) (Ping timeout: 240 seconds)
[10:08:45] *** Quits: earnest (~earnest@user/earnestly) (Ping timeout: 256 seconds)
[10:13:39] *** Joins: mixfix41 (~homefame@user/mixfix41)
[10:28:16] *** Joins: BSaboia (~bsaboia@177.37.198.83)
[10:30:26] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 256 seconds)
[10:33:27] *** Joins: bluedust (~bluedust@103.148.20.45)
[10:36:37] *** Quits: bluedust_ (~bluedust@117.222.186.134) (Ping timeout: 240 seconds)
[10:50:45] *** Joins: earnest (~earnest@user/earnestly)
[11:20:56] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[11:21:51] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[11:22:18] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[11:23:49] *** Quits: jmcantrell (~jmcantrel@user/jmcantrell) (Ping timeout: 240 seconds)
[11:24:37] *** Joins: otisolsen70_ (~otisolsen@xd4ed80b5.cust.hiper.dk)
[11:28:05] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Ping timeout: 256 seconds)
[11:28:05] *** Quits: user51 (~user51@176.228.148.215) (Ping timeout: 256 seconds)
[11:28:22] *** Joins: user51 (~user51@176.228.148.215)
[11:39:27] *** Quits: bluedust (~bluedust@103.148.20.45) (Remote host closed the connection)
[11:39:55] *** Joins: jmcantrell (~jmcantrel@user/jmcantrell)
[11:42:15] *** Quits: Norkle (~norkle@admin.nasa-g0v.com) (Ping timeout: 256 seconds)
[11:43:06] *** Joins: Norkle (~norkle@admin.nasa-g0v.com)
[12:07:25] *** Joins: bluedust (~bluedust@103.148.20.45)
[12:09:25] *** Quits: bluedust (~bluedust@103.148.20.45) (Remote host closed the connection)
[12:22:37] *** Quits: mknod (~mknod@user/mknod) (Quit: mknod)
[12:40:10] *** Quits: x88x88x (~x88x88x@2001:19f0:5:39a8:5400:3ff:feb6:73cb) (Remote host closed the connection)
[12:40:55] *** Joins: x88x88x (~x88x88x@149.28.53.172)
[12:51:28] *** Joins: lavaball (felix@31.204.155.215)
[13:37:09] *** Joins: bluedust (~bluedust@103.148.20.45)
[13:58:48] *** Quits: lockywolf (~lockywolf@2a03:6000:6f63:638::177) (Quit: ZNC 1.8.2 - https://znc.in)
[14:02:27] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[14:38:46] *** Joins: kensanata (~user@user/kensanata)
[14:47:53] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[15:04:34] *** Quits: roarde (~roarde@user/roarde) (Quit: Leaving)
[15:10:30] *** Quits: kensanata (~user@user/kensanata) (Ping timeout: 268 seconds)
[15:13:19] *** Quits: bluedust (~bluedust@103.148.20.45) (Remote host closed the connection)
[15:27:19] *** Joins: bluedust (~bluedust@103.148.20.45)
[15:51:16] *** Quits: bluedust (~bluedust@103.148.20.45) (Remote host closed the connection)
[16:45:35] *** Quits: BSaboia (~bsaboia@177.37.198.83) (Quit: This computer has gone to sleep)
[17:29:32] *** Joins: bluedust (~bluedust@103.148.20.45)
[17:44:11] *** Joins: bluedust_ (~bluedust@185.206.227.136)
[17:46:37] *** Joins: kensanata (~user@user/kensanata)
[17:47:20] *** Joins: egm (~egm@user/egm)
[17:47:49] *** Quits: bluedust (~bluedust@103.148.20.45) (Ping timeout: 240 seconds)
[17:56:34] *** Joins: bluedust (~bluedust@117.207.226.11)
[17:57:05] *** Joins: bluedus__ (~bluedust@185.248.85.40)
[17:59:39] *** Quits: bluedust_ (~bluedust@185.206.227.136) (Ping timeout: 256 seconds)
[18:00:37] *** Quits: bluedust (~bluedust@117.207.226.11) (Ping timeout: 240 seconds)
[18:03:08] *** Joins: bluedust (~bluedust@117.207.226.11)
[18:04:02] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[18:06:36] *** Quits: bluedus__ (~bluedust@185.248.85.40) (Ping timeout: 256 seconds)
[18:06:59] <egm> can someone tell me what i'm doing wrong here? https://envs.sh/Ewy.awk
[18:16:48] <egm> nevermind i see what i did wrong
[18:19:04] *** Joins: seninha (~seninha@user/seninha)
[18:19:11] <egm> fixed https://envs.sh/Ew6.awk
[18:20:33] *** Joins: BSaboia (~bsaboia@177.37.198.83)
[18:26:08] <earnest> egm: The variable NF might be useful, you can also reassign positional variables and print $0
[18:26:16] <emanuele6> egm: awk 'BEGIN { for (i = 1; i <= 500; ++i) if (i % 10 == 0) printf("%9d#", i); print "" }'
[18:26:50] <earnest> If you don't want to guess '9', then %*d can work with a computed value as argument to *
[18:27:21] *** Joins: Everything (~Everythin@37.115.210.35)
[18:27:47] <emanuele6> yeah, you could use   BEGIN { x = 10; ... if (i % x == 0) printf("%*d#", x - 1, i); ...
[18:28:16] <egm> earnest: that is really cool, learning something here
[18:28:24] <egm> thanks emanuele6 
[18:30:43] *** Quits: Torr (~Torr@user/torr) (Remote host closed the connection)
[18:32:51] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Quit: ZNC 1.8.2 - https://znc.in)
[18:36:27] *** Joins: lockywolf (~lockywolf@46.23.90.177)
[18:59:57] *** Quits: kensanata (~user@user/kensanata) (Ping timeout: 240 seconds)
[19:00:51] *** Quits: lockywolf (~lockywolf@46.23.90.177) (Ping timeout: 256 seconds)
[19:03:45] *** Quits: Nahra (~user@static.161.95.99.88.clients.your-server.de) (Remote host closed the connection)
[19:08:20] *** Joins: lockywolf (~lockywolf@2a03:6000:6f63:638::177)
[19:31:50] *** Quits: bluedust (~bluedust@117.207.226.11) (Remote host closed the connection)
[19:32:26] *** Joins: bluedust (~bluedust@117.207.226.11)
[19:37:07] *** Quits: bluedust (~bluedust@117.207.226.11) (Ping timeout: 256 seconds)
[19:41:44] *** Joins: bluedust (~bluedust@117.207.226.11)
[19:43:36] *** Quits: bluedust (~bluedust@117.207.226.11) (Read error: Connection reset by peer)
[19:43:52] *** Joins: bluedust (~bluedust@117.207.226.11)
[20:27:26] *** Quits: ryu` (~ryusaku@c6A334BC1.dhcp.as2116.net) (Ping timeout: 245 seconds)
[20:27:47] *** Joins: ryu` (~ryusaku@c6A334BC1.dhcp.as2116.net)
[20:28:51] *** Quits: jle (~jle@user/jle) (Ping timeout: 250 seconds)
[20:32:08] *** Joins: waldo323__ (~waldo323@d14-69-96-170.try.wideopenwest.com)
[20:34:29] *** Quits: brw (~bas@haring.bas.sh) (Ping timeout: 250 seconds)
[20:34:50] *** Joins: brw (~bas@haring.bas.sh)
[20:34:55] *** Quits: waldo323_ (~waldo323@d14-69-96-170.try.wideopenwest.com) (Ping timeout: 256 seconds)
[20:37:31] *** Quits: asdflkj_sh (asdflkj@user/asdflkj-sh/x-6013523) (Ping timeout: 250 seconds)
[20:39:18] *** Joins: asdflkj_sh (asdflkj@bsdforall.org)
[20:53:27] *** Quits: Everything (~Everythin@37.115.210.35) (Quit: leaving)
[20:53:33] *** Quits: Strykar_ (~wakka@signald/Strykar) (Ping timeout: 250 seconds)
[20:54:16] *** Joins: Strykar (~wakka@signald/Strykar)
[21:07:56] *** Quits: egm (~egm@user/egm) (Quit: leaving)
[21:18:42] *** Joins: egm (~egm@user/egm)
[21:29:57] *** Joins: bluedust_ (~bluedust@185.195.232.175)
[21:31:35] *** Quits: bluedust (~bluedust@117.207.226.11) (Ping timeout: 256 seconds)
[21:42:00] *** Quits: egm (~egm@user/egm) (Remote host closed the connection)
[21:43:04] *** Joins: bluedust (~bluedust@117.207.226.11)
[21:46:19] *** Quits: bluedust_ (~bluedust@185.195.232.175) (Ping timeout: 256 seconds)
[22:21:53] *** Joins: Torr (~Torr@user/torr)
[22:28:20] *** Quits: lavaball (felix@31.204.155.215) (Quit: lavaball)
[22:38:46] *** Joins: mknod (~mknod@user/mknod)
[23:25:33] *** Joins: roarde (~roarde@user/roarde)
[23:49:14] *** Joins: algae (~algernon@170.10.246.117)
[23:51:09] *** Quits: user51 (~user51@176.228.148.215) (Quit: Lost terminal)
[23:52:56] *** Joins: bluedust_ (~bluedust@185.248.85.40)
[23:55:01] *** Quits: bluedust (~bluedust@117.207.226.11) (Ping timeout: 240 seconds)
