[00:15:09] *** Joins: justsomeguy (~justsomeg@user/justsomeguy)
[00:16:24] *** Joins: imp_ (~imp@192-141-191-231.alternativaip.net.br)
[00:20:05] *** Quits: imp (~imp@138.255.144.170) (Ping timeout: 256 seconds)
[00:20:07] *** imp_ is now known as imp
[00:28:11] *** Joins: deuxexmachina (worker@2a01:7e01::f03c:92ff:fecb:5a96)
[00:29:38] <deuxexmachina> if you don't put network_mode in the docker_compose (v3.8), then what is the default?
[00:29:44] <deuxexmachina> idk why it is hard to find in the docs...
[00:29:52] *** Joins: VectorX (~sunilaiya@user/vectorx)
[00:30:24] <VectorX> so you cant run Vbox and Docker on windows effectively(you can but not that great in hypervisor), is the same problem there with https://virt-manager.org/ ?
[00:30:36] <VectorX> ie using virt manager as an alternative to vbox?
[00:31:47] <deuxexmachina> VectorX: your question isn't clear to me
[00:31:51] <deuxexmachina> yes docker & vbox work on windows
[00:31:59] <deuxexmachina> what's the relationship between them?
[00:32:04] <deuxexmachina> I would use virt-manager on linux
[00:32:11] <deuxexmachina> idk about virt-manager on windows
[00:32:20] <rawtaz> deuxexmachina: whatever the default is in docker in general - compose just wraps docker
[00:32:36] <programmerq> deuxexmachina▸ default is bridge if you're using regular containers. this is the same as just doing 'docker run --net somenetwork'
[00:32:39] <rawtaz> i suggest you refer to the documentation for `docker run` to see if you can find it there
[00:32:51] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:33:20] <programmerq> I don't necessarily agree with the compose syntax introducing this "network mode" concept because docker run just has a straight up --net argument, and it ends up being a little confusing for new compose users.
[00:35:07] <programmerq> but it's not too bad once you're aware of it.
[00:35:45] <rawtaz> at least most of the directives are a 1:1 match, thats something
[00:36:25] <programmerq> yeah, but the "bridge" mode is specifically a compose terminology. with a regular "docker run --net foo" it's just connecting to the foo network, regardless of the network driver of the foo network.
[00:36:30] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 260 seconds)
[00:37:08] <deuxexmachina> So host is kinda like bridge without isolation from host?
[00:38:05] <programmerq> I wouldn't say that host is like bridge. 'docker run --net=host' is host mode networking. it effectively turns off all of the container network isolation and other docker networking features. no port publishing. no docker service discovery, etc...
[00:38:25] <programmerq> it's a way to put your containerized processes in the host's namespace just like any other non-containerized process that starts up on the host.
[00:39:06] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[00:39:09] <deuxexmachina> im trying to use it because I've some containers that need DNS working - which only works in production. Dev machines aren't online with FQDNs
[00:39:31] <deuxexmachina> So I'm thinking the build & launch process will stop failing due to containers not knowing the FQDNs of other containers
[00:39:34] <deuxexmachina> if I use host mode
[00:39:36] <programmerq> the default docker networking setup isn't known to break dns?
[00:39:57] <deuxexmachina> It isn't really breaking DNS... In production the containers have FQDNs
[00:40:05] <deuxexmachina> But that wouldn't be the case in a dev environment
[00:40:20] <deuxexmachina> Meaning a domain name on the open web that resolves to a certain container
[00:40:48] *** Quits: ablutor_ (~quassel@145.131.24.183) (Quit: star tracking)
[00:40:49] <programmerq> docker sets up dns discovery for you. you can use the container name to connect from another container on the same network. or containername.networkname.
[00:41:19] <deuxexmachina> yes but an app inside of the container uses an FQDN sometimes
[00:41:24] <deuxexmachina> and no, I can't make the developer rewrite it
[00:41:26] *** Joins: ablutor_ (~quassel@145.131.24.183)
[00:41:28] <deuxexmachina> and I don't feel like figuring out javascript
[00:41:43] <programmerq> that would still be okay-- the fqdn should lead to your ingress/layer 7 reverse proxy
[00:41:46] <deuxexmachina> all of my stuff works with just the container names, yes.
[00:41:52] <programmerq> and then that would drop the request on the appropriate service
[00:41:58] <programmerq> that's a typical production type setup.
[00:42:14] <deuxexmachina> it doesn't resolve
[00:42:16] <programmerq> traefik or nginx are common
[00:42:25] <deuxexmachina> yes using traefik in production
[00:42:30] <programmerq> "doesn't resolve" -- why not? If it's a real DNS address it would definitely resolve.
[00:42:44] *** Quits: ablutor_ (~quassel@145.131.24.183) (Client Quit)
[00:42:47] <deuxexmachina> ok im probably not communicating clearly enough
[00:43:09] <deuxexmachina> in a developer machine environment... it isn't open to the web, doesn't have a FQDN, etc.
[00:43:36] <programmerq> that's fine, but you were saying something about an fqdn not resolving in the case of the production environment
[00:43:43] *** Joins: ablutor_ (~quassel@145.131.24.183)
[00:43:45] <deuxexmachina> production works perfectly
[00:43:50] <deuxexmachina> so does staging
[00:43:59] <deuxexmachina> now... time to make the devs use an identical environment :)
[00:44:01] <programmerq> where is it you are using host mode networking then?
[00:44:05] <deuxexmachina> (except for host mode I guess)
[00:44:10] <deuxexmachina> dev env
[00:44:22] <deuxexmachina> is where I'll use host mode I suppose... about to see if this works...
[00:44:47] *** Quits: zer0bitz (~zer0bitz@185.112.82.230) (Read error: Connection reset by peer)
[00:46:29] <deuxexmachina> programmerq: I did think about injecting records into each containers /etchosts
[00:46:32] <programmerq> okay, you have several options for dev environments. I'm not really sure how host mode would help you out though. if you need to differentiate containers by name, but want them all in the same network namespace, you may run into a port collision. Are you skipping the reverse proxy component in the dev env? Normally, you could just publish ports for the reverse proxy to the dev machine, and then set
[00:46:33] <deuxexmachina> etc/hosts... but that is messy...
[00:46:35] <programmerq> up a DNS name that points to their dev machine's ip address. There's a ton of possible tricks depending on how uniform you want the environments between systems.
[00:46:52] <deuxexmachina> yes skipping reverse proxy in dev envs
[00:47:06] <deuxexmachina> oh damn... failed
[00:47:11] <deuxexmachina> ya you can't call containers by their names anymore :(
[00:47:19] <deuxexmachina>  invalid IP address in add-host:
[00:47:35] <programmerq> correct-- host mode networking disables *all* of the docker networking features including service discovery
[00:47:54] <deuxexmachina> wish I could have container names instead of IPs in /etc/hosts
[00:48:20] <deuxexmachina> cuz if I hardcode FQDNs to container IPs
[00:48:23] *** Quits: ablutor_ (~quassel@145.131.24.183) (Client Quit)
[00:48:31] <deuxexmachina> Then those will probably change in teh future, because aren't they generated dynamically?
[00:49:22] <programmerq> or you could write up a quick nginx config for dev
[00:49:33] <deuxexmachina> well we use traefik everywhere
[00:49:37] <deuxexmachina> so I'd wanna figure it out in that
[00:50:15] <deuxexmachina> how would you make containers resolve each other's FQDN in traefik?
[00:52:02] <programmerq> you'd mirror your production environment but in dev. I've seen more than one dev team have a real DNS record that points to 127.0.0.1, which makes it work for the dev to access it on their system. Then in your compose file setting up traefik, set up an add_hosts entry that makes that FQDN point to traefik for any containers on the same network as traefik.
[00:52:22] *** Joins: noarb (~noarb@user/noarb)
[00:52:35] <programmerq> then those containers will try to hit 'dev.example.com' or whatever your FQDN is, and they'll hit traefik. Your dev will hit 'dev.example.com' in their browser, and they'll hit 127.0.0.1 on the published traefik port.
[00:53:08] <programmerq> that'll work for a dev whether they're running docker desktop on mac/linux or if they're running dockerd directly on their linux box.
[00:53:27] <deuxexmachina> ohhh
[00:53:34] <deuxexmachina> so add_hosts in traefik instead of each docker container
[00:53:48] <programmerq> err, it's extra_hosts
[00:53:52] <programmerq> it's one or the other in compose
[00:54:17] <deuxexmachina> do you know how to get the IPs programmatically into extra_hosts... Otherwise I gotta inspect_network, see the IPs each container gets... And I think they might change, right? Because they're generated dynamically... 
[00:55:28] <programmerq> okay, it's aliases, not add_hosts. Let me check and share a gist. one moment.
[00:56:22] <deuxexmachina> oh - --net-alias?
[00:56:24] <deuxexmachina> sweet thx
[00:58:20] <programmerq> yeah, aliases is it.
[00:58:32] <deuxexmachina> I imagine if I use extra_hosts in traefik so each container is redirected to 127.0.0.1, then how will it know how to get back to the respective container?
[00:58:54] <deuxexmachina> or I suppose you do mean redirect each FQDN to the respective docker internal IP of the container?
[00:59:00] <programmerq> https://gist.github.com/63b31c68cef357f6161ae6052d4ab183
[00:59:10] <programmerq> no, each container shouldn't be directed to itself
[00:59:35] <programmerq> if the container really needs to hit the FQDN, then it needs to hit traefik, right? just like the end user would need their request to go through traefik on that fqdn?
[01:00:09] *** Quits: MrBlue (~MrBlue@24.114.93.161) (Quit: Leaving)
[01:00:42] <deuxexmachina> interesting, ill try this alias trick
[01:00:58] <deuxexmachina> right, but I wasn't understanding how it would find its way back from traefik to the contianer
[01:01:02] <deuxexmachina> traefik would see the FQDN
[01:01:12] <programmerq> traefik would need to be configured just like it would on production
[01:01:16] <deuxexmachina> then traefik would have its own /etc/hosts?
[01:01:18] <programmerq> it'd need all the same routes and stuff
[01:01:43] <programmerq> so if your production traefik is already up and working, that's a good starting point
[01:01:56] <deuxexmachina> so how to populate those /etc/hosts in dev environment for traefik?
[01:02:03] <programmerq> usually traefik hits the docker api and then looks for labels on containers and discovers the bockend(s) that way
[01:02:06] <programmerq> nothing to do with /etc/hosts
[01:02:19] <programmerq> unless you have a very unique/custom traefik config
[01:02:22] <deuxexmachina> traefik would be aware of "aliases" in another docker-compose file?
[01:02:37] <deuxexmachina> hmmm yes i realize it can see those labels
[01:02:42] <deuxexmachina> ok gonna try that :)
[01:03:04] <programmerq> traefik never looks at compose files and neither do containers. docker-compose looks at a compose files and then makes api calls to dockerd and creates objects like containers, networks, volumes, etc...
[01:03:22] <deuxexmachina> right, sorry, bad wording on my part
[01:04:47] <deuxexmachina> maybe it would be good for production to have this behavior too actually... 
[01:05:06] <programmerq> yeah, it's nice avoiding a hairpin nat situation where possible
[01:05:13] <deuxexmachina> if the javascript devs refuse to understand how their code affects local vs external connections, then just make them local
[01:05:34] <deuxexmachina> (so long as we're talking FQDNs of the server(s) in question
[01:05:39] <deuxexmachina> )
[01:06:12] *** Joins: MrBlue (~MrBlue@24.114.93.161)
[01:07:44] <deuxexmachina> programmerq: in your example, how would the FQDN get assocaited with web1 vs web2 service?
[01:07:59] <deuxexmachina> like if services in one docker-compose have different FQDNs, then how does it know which corresponds to which?
[01:08:43] <programmerq> again, if you want everything to go through traefik, then traefik would get the aliases for the fqdn. Traefik's own configuration would take over to figure out which domain goes where.
[01:09:52] <deuxexmachina> how does traefik figure out which domain goes where, is my question.
[01:09:57] <deuxexmachina> again sorry for the confusion
[01:10:29] <programmerq> if you have a working prod traefik configuration, that'll be your best starting point. traefik uses labels to figure out what goes where. it connects to the docker api, looks for labels on containers, and sets up its internal state based on those.
[01:10:58] <deuxexmachina> right I am starting there... just wondering which info in the API it matches with aliases
[01:11:07] <deuxexmachina> like if it'll match any FQDN it sees to any alias
[01:11:12] <programmerq> the aliases have nothing to do with traefik's configuration
[01:11:14] <deuxexmachina> or it'll match only aliases to aliasses
[01:11:22] <programmerq> it looks at labels on containers
[01:11:30] <deuxexmachina> yes, the FQDNs are in those labels
[01:11:38] <programmerq> there you go then
[01:11:59] <programmerq> so if a container is labeled as foo.example.com for traefik to find, then if traefik gets a request for foo.example.com it'll send it to that container
[01:12:02] <deuxexmachina> as i.e. 
[01:12:08] <deuxexmachina> "traefik.http.routers.gql-$COMPOSE_PROJECT_NAME.rule=Host(`${GQL_VHOST}`)"
[01:12:35] <deuxexmachina> ^ is this container "labeled as" GQL_VHOST?
[01:12:40] <programmerq> setting a foo.example.com alias on the traefik container only affects what containers on that network get when they try to resolve 'foo.example.com', to make those requests go to the traefik container.
[01:13:05] <programmerq> that looks like a label substitution, so whatever the value of the GQL_VHOST variable is will be what is populated by compose when it creates the container.
[01:13:13] <deuxexmachina> right
[01:13:27] <deuxexmachina> should have omitted the substitution for the point of my question
[01:13:34] *** Quits: GailWynand (~GailWynan@195.216.219.1) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:13:49] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[01:14:10] <deuxexmachina> but the container name is its service name
[01:14:17] <deuxexmachina> not any of the label names
[01:14:23] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[01:14:29] <deuxexmachina> but yes, traefik sees the label names
[01:14:30] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 276 seconds)
[01:14:39] <deuxexmachina> anyway, I'll try this and get back to you
[01:14:48] <deuxexmachina> I'm semi-sure I understand what you're saying
[01:21:39] *** Joins: vidbina (~vid@dynamic-078-054-102-172.78.54.pool.telefonica.de)
[01:22:37] *** Joins: lilgopher (~textual@2601:241:8000:38f0:c5e8:6dd:df4e:31d6)
[01:25:14] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[01:27:37] *** Quits: jkwnki (~jkwnki@p4ff31198.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[01:34:09] <tabakhase> VectorX didnt get your full story, but when you mean "no hyperv" - checkout the old docker_toolbox (there are some forks of it with up2date docker versions) - it does NOT have the "useland proxy running on windows" for portfwds (has to use vbox ip), but everything else works
[01:41:00] <deuxexmachina> wow programmerq ... I think I actually got it working :) Much appreciated
[01:41:17] <deuxexmachina> not quite... I think my self signed certs aren't being served correctly to the services 
[01:41:55] *** Joins: XV8 (~XV8@2601:5cb:c001:50:3d6e:cfa4:63ac:b4be)
[01:42:58] <deuxexmachina> I think it is because I installed the certificate onto the host system using mkcert, but treafik/docker doesn't know about it (firefox & chromim do though)
[01:43:59] <deuxexmachina> but the DNS works now ~~~<^_^>~~~
[01:46:37] *** Quits: XV8 (~XV8@2601:5cb:c001:50:3d6e:cfa4:63ac:b4be) (Ping timeout: 240 seconds)
[01:51:01] *** Joins: Crell (~Crell@24.148.30.77)
[01:52:22] *** Quits: withered_wolf (~withered_@97.112.15.92) (Remote host closed the connection)
[01:53:52] *** Joins: withered_wolf (~withered_@97.112.15.92)
[01:54:36] <VectorX> tabakhase its just a hacky way of getting it working, so I dont want to install them on windows, so trying to find an alternative that I can use my vbox disks with
[01:54:54] <VectorX> also the performance of vbox on hyper-v seems slow
[01:55:32] <tabakhase> i dont think i understand :D
[01:57:39] <deuxexmachina> VectorX: I highly recommend defining "it" when communicating a new idea to strangers
[01:57:58] <tabakhase> also them :P
[01:58:26] <VectorX> vbox v5 does not work if you have hyper-v enabled on windows which docker requires so you cant run both at the same time, v6+ enabled a experimental mode that can run vbox in hyper-v but it is not as fast as vbox would run natively
[01:58:44] <VectorX> you can use docker_toolbox etc to get it to work but vbox is not as fast when you do these things
[02:00:08] <VectorX> so my question was if anyone has used virtual machine manager and docker together on windows without issue and performance issues
[02:00:38] <tabakhase> "experimental" as in UseRing0Runloop 0 you mean?
[02:00:56] <VectorX> that is one setting you have to set manually
[02:01:22] <VectorX> beside the last option in the interface https://docs.oracle.com/en/virtualization/virtualbox/6.0/admin/ExperimentalFeatures.html
[02:01:25] <VectorX> in vbox
[02:03:37] *** Quits: gr1m (~gr1m@45.83.220.192) (Ping timeout: 240 seconds)
[02:04:34] <tabakhase> im still not entirely sure what your problem / expected thing to fix is in the end tbh :| -- the only one to do anything on vboxPerformance is oracle
[02:04:57] *** Quits: sebastianos (~sebastian@user/sebastianos) (Ping timeout: 240 seconds)
[02:05:47] <VectorX> i am not trying to fix anything Vbox runs slow on Hyper-V, so I am trying to see if there is an alternative to run alongside docker
[02:06:57] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Ping timeout: 240 seconds)
[02:07:18] <tabakhase> lemme ask differently - an alternative for what? other random vms? "native on hyperv" i guess is your answer then?
[02:08:30] *** Joins: sebastianos (~sebastian@user/sebastianos)
[02:12:26] <deuxexmachina> VectorX: Along side?
[02:12:34] <deuxexmachina> you want Docker and you want VMs at the same time?
[02:12:35] <VectorX> if we were talking about vbox 5, and I asked does vbox work with docker on windows, the answer would have been NO, I have been through this in this channel sometime ago
[02:12:38] <deuxexmachina> How are those two related?
[02:12:53] <deuxexmachina> You're not communicating clearly from my perspective
[02:13:08] <deuxexmachina> Vbox inside of docker, docker inside of vbox, vbox & docker on the same host... what?
[02:13:18] <VectorX> tabakhase I am not asking about a random VM's I have a specific name virtual machine manager and am asking if that works with docker on windows
[02:13:42] <deuxexmachina> VMs and docker are very different
[02:13:45] <deuxexmachina> not the same
[02:14:02] <deuxexmachina> virt-manager & VirtualBox are similar
[02:14:06] <deuxexmachina> but those are not similar to docker at all
[02:14:20] <VectorX> deuxexmachina you have a Windows Host, you install Vbox, then you install Docker on the host, one of them are not going to work
[02:14:23] <deuxexmachina> maybe conceptually to someone who is extremely new to these fields
[02:14:29] <VectorX> this is not about intalling a VM inside a VM
[02:14:43] <tabakhase> "virtual machine manager" is a microsoft product https://docs.microsoft.com/en-US/system-center/vmm/system-requirements?view=sc-vmm-2019 - as well as libvirt https://virt-manager.org/ - so....
[02:14:44] <deuxexmachina> VirtualBox & Docker will both work, yes
[02:14:51] <deuxexmachina> They both are compatible with windows
[02:14:56] <deuxexmachina> And can run at the same time on the same windows host
[02:15:03] <deuxexmachina> Is that clear?
[02:15:04] <tabakhase> deuxexmachina carefull there
[02:15:23] <deuxexmachina> ...
[02:15:23] <VectorX> deuxexmachina I am guessing you have never installed vbox and docker on a windows host before
[02:15:36] <deuxexmachina> I would never use windows
[02:15:40] <deuxexmachina> but unfortunately i have before
[02:15:43] <riotz> windows sucks
[02:15:55] <riotz> on linux both run side by side without a problem
[02:16:07] <VectorX> riotz true
[02:16:07] <riotz> i dont see any reason why it shouldnt run on windows
[02:17:04] <deuxexmachina> tabakhase: you told me to be careful...
[02:17:06] <deuxexmachina> why
[02:17:49] <tabakhase> "docker-for-windows" demands hyperV --- vbox 5 cant use hyperV -- vbox 6 can, but only with a "shim" kinda deal -- "windows-toolbox" is the (old&deprecated, but forks exist) nonHyperV-variant of windows-ON-docker (note, not "FOR") that used  vBox as runtime
[02:18:21] <tabakhase> notably that "docker-toolbox" obvs. also only does linux containers -- windows-containers is hyperV only
[02:18:29] <riotz> https://www.tcg.com/blog/yes-you-can-run-docker-and-virtualbox-on-windows-10-home/
[02:18:41] <deuxexmachina> :)
[02:19:02] <VectorX> riotz nice article but it also points out what I have been repeatadly saying all this time : Performance/Stability
[02:19:24] <VectorX> we also already discussed that it an run with vbox6
[02:19:47] <riotz> to hell with windows
[02:19:51] <VectorX> :)
[02:20:16] <deuxexmachina> I still can't even figure out what you're communicating
[02:20:33] <deuxexmachina> so the issue isn't docker, it is vbox doesn't run well on windows...
[02:21:04] <tabakhase> 'performance' ive seen but not rly noticably, 'stability' wise ive not heard of issues in my circles at least... (we have quite the vagrant setups so vbox is still much a deal here)
[02:21:06] <deuxexmachina> just run vbox on windows, run linux in that, and run docker in that
[02:21:46] <riotz> it probably depends on what you run on vbox aswell
[02:22:06] <tabakhase> and as said, "if you need performance on both" - a updated fork of toolbox is just fine  (official is stuck on docker 19 or even 18) - then its all in vbox no hyperv
[02:22:40] <riotz> its a difference if you run a service on a debian vbox machine vs a full blown windows that you want to use as desktop replacement
[02:22:40] <tabakhase> and heck if toolbox drills you, install the dam vm 2by hand" - toolbox is just a 20 line batchscript with vboxManage.exe calls anyhow :D
[02:23:24] <VectorX> tabakhase it's usualy a mess when I install both, and I am on a fresh win 10 install so trying to keep it as clean and see if virt manager playes better, coz vbox installs a bunch of crap I would like to avoid if something else works better
[02:24:59] <deuxexmachina> the whole point of docker is not dirtying up your env
[02:25:10] <deuxexmachina> this whole "Fresh install" thing could be a thing of the past bro ;)
[02:25:23] <deuxexmachina> just install linux, then you can have a fresh install of windows whenever you need it using a VM
[02:25:32] <deuxexmachina> best distro of windows is AME imo
[02:25:47] <tabakhase> you are entirely loosing me by "virt manager" & windows... - can you clearify what specific product you are talking about? ;D
[02:27:12] <VectorX> My question was if https://virt-manager.org/ works better than vbox installed on the same host in terms of performance
[02:27:36] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[02:27:41] *** Quits: remote (~self@user/hackers) (Remote host closed the connection)
[02:27:55] <VectorX> deuxexmachina does AME not require a license
[02:28:03] <tabakhase> VectorX this is not windows software
[02:28:40] <deuxexmachina> VectorX: indeed it doesn't
[02:28:50] <deuxexmachina> go to ameliorated.info for more info
[02:28:58] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Remote host closed the connection)
[02:29:22] <deuxexmachina> VectorX: I don't think you'll find it easier to use (virt manager)
[02:29:30] <deuxexmachina> VirtualBox is more user friendly.
[02:30:17] <tabakhase> s/it easier/a way/
[02:30:24] <LordKalma> Docker on windows 10 uses WSL 2 by default so that article is outdated I guess?
[02:30:54] <LordKalma> or I mean, old news
[02:33:00] *** Quits: MrBlue (~MrBlue@24.114.93.161) (Quit: Leaving)
[02:41:01] *** Quits: Crell (~Crell@24.148.30.77) (Quit: Client closed)
[02:48:26] *** Joins: hrob (~hrob@31-209-221-88.dsl.dynamic.simnet.is)
[02:50:30] *** Joins: gebbione (~gebbione@82.132.243.210)
[02:51:57] *** Quits: sebastianos (~sebastian@user/sebastianos) (Ping timeout: 256 seconds)
[02:56:36] *** Quits: withered_wolf (~withered_@97.112.15.92) (Remote host closed the connection)
[03:01:15] *** Joins: MrBlue (~MrBlue@24.114.93.161)
[03:01:32] *** Quits: MrBlue (~MrBlue@24.114.93.161) (Remote host closed the connection)
[03:08:48] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[03:13:43] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-1c51-9998-c8b0-ddb4.res6.spectrum.com) (Quit: jarthur)
[03:17:09] *** Quits: cliluw (~cliluw@47.147.73.223) (Read error: Connection reset by peer)
[03:18:46] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:23:11] *** Joins: hackers (~self@user/hackers)
[03:23:19] *** hackers is now known as remote
[03:27:49] *** Quits: Leonarbro (~Leonet@user/leonarbro) (Ping timeout: 240 seconds)
[03:27:52] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[03:28:11] *** Joins: Leonarbro (~Leonet@user/leonarbro)
[03:46:25] *** Joins: The_Czernobog (~Czernobog@user/czernobog)
[03:46:38] *** Quits: Czernobog (~Czernobog@user/czernobog) (Read error: Connection reset by peer)
[03:46:50] *** The_Czernobog is now known as Czernobog
[03:48:00] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:50:19] *** Quits: polymorphic (~polymorph@user/polymorphic) (Ping timeout: 256 seconds)
[03:50:23] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:50:50] *** Joins: polymorphic (~polymorph@user/polymorphic)
[03:53:07] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[04:05:34] *** Joins: eein (35f97d3dbd@2604:bf00:561:2000::2a6)
[04:17:32] *** Joins: MrBlue (~MrBlue@24.114.93.161)
[04:28:26] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:28:46] *** Quits: MrBlue (~MrBlue@24.114.93.161) (Quit: Leaving)
[04:36:37] *** Quits: martums (~martums@user/martums) (Read error: Connection reset by peer)
[04:37:17] *** Quits: gebbione (~gebbione@82.132.243.210) (Ping timeout: 240 seconds)
[04:37:23] *** Joins: martums (~martums@user/martums)
[04:37:51] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[04:48:53] *** Quits: lilgopher (~textual@2601:241:8000:38f0:c5e8:6dd:df4e:31d6) (Quit: Textual IRC Client: www.textualapp.com)
[04:53:29] *** Quits: polymorphic (~polymorph@user/polymorphic) (Quit: polymorphic)
[04:55:06] *** Joins: polymorphic (~polymorph@user/polymorphic)
[04:55:25] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[04:56:17] *** Quits: vidbina (~vid@dynamic-078-054-102-172.78.54.pool.telefonica.de) (Ping timeout: 240 seconds)
[05:24:57] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 240 seconds)
[05:24:59] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[05:36:30] *** Joins: Enitin (~Enitin@82.102.22.84)
[05:44:49] *** Joins: devslash (~devslash@46.232.211.210)
[05:47:28] <devslash> does anyone know how to bind docker to a socket proxy instead of using docker.sock
[05:54:30] <tabakhase> devslash uhm what?
[05:54:55] <devslash> do you know what a socket proxy is ?
[05:55:24] <tabakhase> i wonder if you mean socks
[05:55:30] <devslash> no
[05:55:58] <devslash> a socket-proxy
[05:57:06] <devslash> The image is called tecnativa/docker-socket-proxy
[05:59:50] <tabakhase> thats a reverse-proxy for http(s)
[06:00:58] <tabakhase> also not sure what "bind to that" entails... dockerD knows nothing of this, this sits infront and you make other things talk to it instead of dockerD directly
[06:03:40] <tabakhase> ergo, that thing still needs docker.sock to then actually talk to the daemon - (or could use https with client-certs, http(dont lol), or the internal dail command used with ssh i guess - but sock should be kinda fine (linux does ACL on those files so they would be about same as secure as the cert on disk i guess))
[06:03:55] <devslash> the socker-proxy does but not portainer
[06:04:34] <devslash> socket-proxy has a bind to docker.sock. Im trying to get portainer to use  it
[06:05:06] <tabakhase> so tell it DOCKER_HOST=tcp://localhost:2375 as the readme says?
[06:05:36] <devslash> i did that doesnt work
[06:05:41] <devslash> let me show you my compose
[06:06:31] <tabakhase> given portainer runs in another container, "localhost" obvs wont cut it - but asside this that should be normal config stuff to just "tell" it
[06:07:02] <devslash> https://pastecode.io/s/pf1cbbuz
[06:07:21] <devslash> it should be but theres a docker issue thats preventing it dfrom working
[06:07:54] <devslash> I am getting an error from line 37. it says no such networkj
[06:08:11] <devslash> but it should still let me use that container as a proxy
[06:08:32] <tabakhase> compose-file-format-errors are miles away from smth working or not
[06:08:36] <tabakhase> and you say networks: default
[06:08:40] <tabakhase> so ofc it wont know
[06:08:45] <devslash> so what do i do
[06:08:51] <devslash> delete the networks section at the top
[06:09:23] <tabakhase> also portainer and proxy obvs need to share a network to talk to another
[06:09:39] <devslash> is there anything that can be done to fix this
[06:10:53] *** Joins: leitz (~LeamHall@072-182-158-027.res.spectrum.com)
[06:13:31] *** Quits: leitz (~LeamHall@072-182-158-027.res.spectrum.com) (Client Quit)
[06:17:19] *** Joins: dob1_ (~dob1@user/dob1)
[06:17:36] *** Joins: alchemist_ (~alchemist@user/alchemist)
[06:17:47] *** Joins: nattiestnate (~nate@114.122.105.227)
[06:19:49] *** Quits: dob1 (~dob1@user/dob1) (Ping timeout: 240 seconds)
[06:20:37] *** Quits: alchemist (~alchemist@user/alchemist) (Ping timeout: 240 seconds)
[06:30:13] *** Quits: tsal (~tsal@user/tsal) (Ping timeout: 240 seconds)
[06:30:53] *** Quits: infernix (nix@2a02:22a0:bbb1:d500::2) (Quit: ZNC - http://znc.sourceforge.net)
[06:32:23] *** Quits: Leonarbro (~Leonet@user/leonarbro) (Ping timeout: 256 seconds)
[06:32:40] *** Joins: leitz (~LeamHall@072-182-158-027.res.spectrum.com)
[06:33:47] *** Joins: Leonarbro (~Leonet@user/leonarbro)
[06:35:02] *** Joins: tsal (~tsal@user/tsal)
[06:38:58] *** Quits: Leonarbro (~Leonet@user/leonarbro) (Ping timeout: 268 seconds)
[06:43:57] *** Joins: Leonarbro (~Leonet@user/leonarbro)
[07:11:41] *** Quits: Forsaken87 (~quassel@ip-109-43-114-36.web.vodafone.de) (Remote host closed the connection)
[07:11:43] *** Joins: infernix (nix@2a02:22a0:bbb1:d500::2)
[07:22:35] *** Quits: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1) (Quit: The Lounge - https://thelounge.chat)
[07:23:35] *** Joins: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1)
[07:26:22] *** Quits: leitz (~LeamHall@072-182-158-027.res.spectrum.com) (Quit: nappy time)
[07:41:24] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[07:44:22] *** Joins: XV8 (~XV8@2601:5cb:c001:50:3d6e:cfa4:63ac:b4be)
[07:49:16] *** Quits: XV8 (~XV8@2601:5cb:c001:50:3d6e:cfa4:63ac:b4be) (Ping timeout: 268 seconds)
[07:49:16] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 268 seconds)
[07:50:09] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[07:50:35] *** Joins: bouncy (~ben@user/benoit)
[07:50:59] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[08:05:15] *** Joins: lalitmee_ (~lalitmee@180.94.33.76)
[08:06:27] *** Quits: junktext__ (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 256 seconds)
[08:12:28] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:21:37] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 240 seconds)
[08:22:13] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 240 seconds)
[08:22:36] *** Joins: imp_ (~imp@192-141-191-236.alternativaip.net.br)
[08:23:49] *** Quits: imp (~imp@192-141-191-231.alternativaip.net.br) (Ping timeout: 240 seconds)
[08:23:49] *** imp_ is now known as imp
[08:36:12] *** Joins: Czernobog (~Czernobog@user/czernobog)
[08:45:42] *** Quits: tkazi (~tkazi@user/tkazi) (Quit: Disconnected)
[08:46:01] *** Joins: tkazi (~tkazi@user/tkazi)
[08:46:02] *** Quits: tkazi (~tkazi@user/tkazi) (Remote host closed the connection)
[08:48:45] *** Joins: tkazi (~tkazi@user/tkazi)
[08:53:11] *** Quits: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:99f6:4780:b5f3:5110) (Quit: So as you can see from this flowchSQUIRREL!!)
[09:18:25] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 256 seconds)
[09:19:21] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[09:19:37] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[09:27:46] *** Joins: Czernobog (~Czernobog@user/czernobog)
[09:28:48] *** Quits: Czernobog (~Czernobog@user/czernobog) (Read error: Connection reset by peer)
[09:30:05] *** Joins: kapil (~kapil@okweb.co.in)
[09:30:12] *** Joins: Czernobog (~Czernobog@user/czernobog)
[09:35:16] *** Joins: lalitmee__ (~lalitmee@180.94.33.171)
[09:37:41] *** Quits: lalitmee_ (~lalitmee@180.94.33.76) (Ping timeout: 256 seconds)
[09:56:17] *** Quits: jayray (~jayray@user/jayray) (Ping timeout: 240 seconds)
[10:07:09] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 256 seconds)
[10:21:17] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[10:22:02] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Client Quit)
[10:22:44] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[10:52:03] *** Joins: ztx (~ztx@user/ztx)
[10:55:46] *** Joins: lalitmee_ (~lalitmee@180.94.32.181)
[10:57:57] *** Quits: lalitmee__ (~lalitmee@180.94.33.171) (Ping timeout: 240 seconds)
[11:16:05] *** Joins: null23 (~null23@h-37-123-160-123.A251.priv.bahnhof.se)
[11:21:04] <null23> Hm.. i got thus news website i like to have a local copy of,  allways logged in so i dont need to login everywere and get this security concerns from the site... What docker container should you have used for this?
[11:37:00] *** Quits: gioyik (~gioyik@gateway/tor-sasl/gioyik) (Quit: WeeChat 3.3)
[11:38:50] *** Joins: lalitmee__ (~lalitmee@180.94.33.245)
[11:41:13] *** Quits: lalitmee_ (~lalitmee@180.94.32.181) (Ping timeout: 256 seconds)
[11:43:23] *** Quits: nattiestnate (~nate@114.122.105.227) (Quit: WeeChat 3.4)
[11:46:07] *** Joins: XV8 (~XV8@2601:5cb:c001:50:3d6e:cfa4:63ac:b4be)
[11:50:17] *** Quits: XV8 (~XV8@2601:5cb:c001:50:3d6e:cfa4:63ac:b4be) (Ping timeout: 240 seconds)
[11:51:46] *** Joins: lalitmee_ (~lalitmee@180.94.32.85)
[11:54:34] *** Quits: lalitmee__ (~lalitmee@180.94.33.245) (Ping timeout: 260 seconds)
[12:10:41] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 256 seconds)
[12:16:31] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[12:19:21] *** Joins: monoxane (~monoxane@user/monoxane)
[12:20:19] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 256 seconds)
[12:21:03] *** Joins: jayray (~jayray@user/jayray)
[12:26:33] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 256 seconds)
[12:33:40] *** Quits: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[12:34:18] *** Joins: gopar (~gopar@c-67-164-79-22.hsd1.ca.comcast.net)
[12:35:23] *** Quits: imp (~imp@192-141-191-236.alternativaip.net.br) (Quit: imp)
[12:51:01] *** Joins: sebastianos (~sebastian@user/sebastianos)
[13:00:15] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[13:35:46] *** Joins: GailWynand (~GailWynan@195.216.219.1)
[13:43:06] *** Quits: thekingofbandit (~thekingof@user/thekingofbandit) (Remote host closed the connection)
[13:44:24] *** Joins: thekingofbandit (~thekingof@user/thekingofbandit)
[14:15:38] *** Quits: hrob (~hrob@31-209-221-88.dsl.dynamic.simnet.is) (Quit: Client closed)
[14:16:17] *** Joins: lalitmee__ (~lalitmee@180.94.32.14)
[14:18:45] *** Quits: lalitmee_ (~lalitmee@180.94.32.85) (Ping timeout: 256 seconds)
[14:27:01] *** Quits: GailWynand (~GailWynan@195.216.219.1) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:27:05] *** Joins: JingleJazzy (~jaziz@user/jaziz)
[14:41:59] *** Joins: The_Loko (~The_Loko@79.116.24.80)
[14:47:25] *** Joins: Tach (~Tach@user/tach)
[14:55:20] *** Joins: gfawcett (~gfawcett@ns521973.ip-158-69-124.net)
[14:57:10] *** Quits: alchemist_ (~alchemist@user/alchemist) (Read error: Connection reset by peer)
[14:59:31] *** JingleJazzy is now known as jazzy
[15:02:11] <wez> null23: so you want a docker image to mirror a website?
[15:03:27] *** Joins: JingleJazzy (~jaziz@user/jaziz)
[15:03:34] *** Quits: JingleJazzy (~jaziz@user/jaziz) (Remote host closed the connection)
[15:03:41] *** Joins: Czernobog (~Czernobog@user/czernobog)
[15:27:29] *** Joins: GailWynand (~GailWynan@195.216.219.1)
[15:28:33] *** Quits: GailWynand (~GailWynan@195.216.219.1) (Client Quit)
[15:31:15] *** Joins: thiras (~thiras@user/thiras)
[15:33:26] <Tach> are there no createClient() api events for swarm when starting a container ?
[15:48:26] *** Joins: alchemist (~alchemist@user/alchemist)
[15:55:51] <Tach> anyone using ufw-docker with swarm ?
[16:07:50] *** Joins: withered_wolf (~withered_@97.112.15.92)
[16:10:01] *** Quits: alchemist (~alchemist@user/alchemist) (Remote host closed the connection)
[16:10:20] *** Joins: alchemist (~alchemist@user/alchemist)
[16:15:49] *** Quits: alchemist (~alchemist@user/alchemist) (Ping timeout: 240 seconds)
[16:16:42] *** Joins: alchemist (~alchemist@user/alchemist)
[16:17:25] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:19:49] *** Joins: vidbina (~vid@dynamic-078-054-042-128.78.54.pool.telefonica.de)
[16:28:38] *** Quits: TheFatherMind (~TheFather@user/thefathermind) (Read error: Connection reset by peer)
[16:29:26] *** Quits: withered_wolf (~withered_@97.112.15.92) (Remote host closed the connection)
[16:30:47] *** Joins: withered_wolf (~withered_@97.112.15.92)
[16:31:27] *** Joins: TheFatherMind (~TheFather@user/thefathermind)
[16:33:41] *** Joins: Forsaken87 (~quassel@2a02:908:1866:e360:63f3:d802:2473:110d)
[16:34:05] *** Joins: DrowningElysium (uid190788@user/drowningelysium)
[16:35:00] *** Quits: vidbina (~vid@dynamic-078-054-042-128.78.54.pool.telefonica.de) (Ping timeout: 240 seconds)
[16:40:54] *** Quits: infernix (nix@2a02:22a0:bbb1:d500::2) (Quit: ZNC - http://znc.sourceforge.net)
[16:41:06] *** Quits: Forsaken87 (~quassel@2a02:908:1866:e360:63f3:d802:2473:110d) (Quit: No Ping reply in 180 seconds.)
[16:42:23] *** Joins: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73)
[16:55:48] *** Joins: MrBlue (~MrBlue@24.114.84.33)
[16:57:14] *** Joins: XV8 (~XV8@2601:5cb:c001:50:bd72:41d1:6a0f:1d3a)
[17:08:02] *** Joins: B4re (~l4yer@178.239.168.223)
[17:08:05] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[17:08:57] *** Joins: minimal (~minimal@user/minimal)
[17:09:06] *** Quits: l4yer (~l4yer@178.239.168.223) (Ping timeout: 260 seconds)
[17:15:35] *** Joins: andycooper (uid246432@id-246432.helmsley.irccloud.com)
[17:17:53] *** Joins: ueberall (ueberall_l@user/ueberall)
[17:18:15] *** Joins: infernix (nix@spirit.infernix.net)
[17:21:37] *** Quits: ueberall (ueberall_l@user/ueberall) (Client Quit)
[17:28:40] *** Joins: ueberall (ueberall_l@user/ueberall)
[17:30:47] *** Quits: martums (~martums@user/martums) (Ping timeout: 268 seconds)
[17:44:10] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[17:47:55] *** Joins: gebbione (~gebbione@82.132.242.103)
[17:51:08] *** Quits: Czernobog (~Czernobog@user/czernobog) (Read error: Connection reset by peer)
[17:54:11] *** Joins: Czernobog (~Czernobog@user/czernobog)
[18:01:40] *** Joins: bap (~lambda@82-64-232-223.subs.proxad.net)
[18:15:14] *** Joins: vidbina (~vid@dynamic-078-054-042-128.78.54.pool.telefonica.de)
[18:17:29] *** Joins: leitz (~LeamHall@072-182-158-027.res.spectrum.com)
[18:20:00] <DeeJay2> rawtaz: Is there an easy way to integrate the exec from within the container? 
[18:20:29] <rawtaz> sorry, what do you mean and what is the context?
[18:20:30] <DeeJay2> rawtaz: I'd like the backups to be triggered from the containers themselves...
[18:20:50] <rawtaz> my memory only spans two previous lines of chat :P
[18:20:56] <DeeJay2> hahaha =)
[18:21:12] <DeeJay2> Well.. I have gogs running as container (from docker-compose).
[18:21:20] <DeeJay2> gogs as its own command to run to output a zip file as backup
[18:21:34] <DeeJay2> I want something that periodically runs it so I can take it from bacula..
[18:21:42] <DeeJay2> so yeah a mount available from the host is ok
[18:21:45] <rawtaz> right that
[18:21:54] <DeeJay2> but I'd like to avoid running it from the host's crontab.
[18:22:13] <DeeJay2> I'd prefer it to be all triggered from within the containers / docker-compose...
[18:22:33] <rawtaz> well either you make a cron thing that runs inside the original container, or you make another container having the same thing in it but that runs cron instead of gogs, or you use something like https://github.com/mcuadros/ofelia
[18:23:02] <rawtaz> perhaps a more or less identical container that runs cron instead of gogs is your sweet spot then
[18:23:11] *** Joins: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:2822:c688:f23f:bce0)
[18:23:34] <DeeJay2> ok, so a docker-compose with the same image with a diffrent entrypoint ?
[18:23:47] <rawtaz> another service in the same compose, yes. thats one option. yes
[18:23:49] *** Quits: infernix (nix@spirit.infernix.net) (Ping timeout: 268 seconds)
[18:24:00] *** Quits: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970:2822:c688:f23f:bce0) (Client Quit)
[18:24:07] <DeeJay2> ok, thank you!
[18:24:22] <rawtaz> yw
[18:24:36] <rawtaz> whats the command to tell gogs to make a backup?
[18:25:16] *** Quits: Czernobog (~Czernobog@user/czernobog) (Read error: Connection reset by peer)
[18:28:14] *** Joins: Czernobog (~Czernobog@user/czernobog)
[18:29:18] *** Quits: MrBlue (~MrBlue@24.114.84.33) (Quit: Leaving)
[18:37:15] *** remote is now known as alphabeta
[18:42:28] *** alphabeta is now known as alphabeta[m]
[18:45:03] *** alphabeta[m] is now known as remote
[18:48:08] *** Joins: junktext__ (~junktext@gateway/vpn/pia/junktext)
[19:01:46] *** Joins: bouncy (~ben@user/benoit)
[19:05:09] *** Quits: gebbione (~gebbione@82.132.242.103) (Ping timeout: 250 seconds)
[19:30:02] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 240 seconds)
[19:32:00] *** Joins: bouncy (~ben@user/benoit)
[19:34:37] *** Quits: wez (~wyoung@about/web/wez) (Ping timeout: 240 seconds)
[19:35:53] *** Joins: wez (~wyoung@about/web/wez)
[19:37:35] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[19:37:37] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 240 seconds)
[19:38:49] *** Quits: c10l (~c10l@user/c10l) (Quit: The Lounge - https://thelounge.chat)
[19:39:03] *** Joins: c10l (~c10l@user/c10l)
[19:39:03] *** Joins: Enitin (~Enitin@82.102.22.85)
[19:39:11] *** Quits: c10l (~c10l@user/c10l) (Client Quit)
[19:39:25] *** Joins: c10l (~c10l@user/c10l)
[19:47:15] *** Quits: jazzy (~jaziz@user/jaziz) (Quit: Beddie bye-bye)
[19:55:03] *** Joins: bn_work (uid268505@id-268505.uxbridge.irccloud.com)
[20:00:17] *** Quits: justsomeguy (~justsomeg@user/justsomeguy) (Ping timeout: 240 seconds)
[20:00:27] *** Joins: maxzor (~maxzor@2a01cb04054faa0038d81c6f7a412044.ipv6.abo.wanadoo.fr)
[20:00:47] <maxzor> Can I use amdgpu kernel module in docker?
[20:05:29] <tabakhase> maxzor should, just make sure to bridge in the actual device
[20:06:01] <maxzor> i bridged devices dri and kfd with "device" entries in docker-compose*
[20:06:39] <maxzor> but still sh: 1: lsmod: not found ROCk module is NOT loaded, possibly no GPU devices
[20:08:52] <maxzor> that's my little factory https://salsa.debian.org/maxzor/rocm-builder
[20:09:21] <maxzor> the guys at amd manage to do it here https://github.com/RadeonOpenCompute/ROCm-docker
[20:11:42] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[20:12:17] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[20:12:34] <tabakhase> oh boy... :D
[20:13:13] <maxzor> just pushed the new docker-compose^
[20:13:16] <maxzor> what? :D
[20:13:34] <tabakhase> also "where do you get that error"? - and "tried on the host first?" ((cause loading kernel modules and such is job of the host, not container, its a shared kernel))
[20:14:01] <maxzor> sure, I have a program called rocminfo which works on the host, and gives above error message in container
[20:15:55] <tabakhase> >what< -- you gotta explain "docker-compose is useful for bind-mounts, instead of named volumes which can use Dockerfile only"  --- Dockerfiles dont rly do any of this, and bindmounts vs. volumes are a very different thing - so "docker run -v $PWD/salsa:/debamd ..." will do just as fine  ((that said, having a compose even for just one is totally fine, heck, its nice even - just the "why" 
[20:15:55] <tabakhase> description seems like a missunderstanding :D
[20:17:50] <maxzor> I very possible misunderstood. I tried documenting my learning, I thought that declaring volumes in docker-compose was bind-mounting them
[20:19:22] <C4Crawford> Docker-compose can absolutely use named volumes, I use them all the time. For examples, see the Docker-compose documentation on the "Volume configuration reference": https://docs.docker.com/compose/compose-file/compose-file-v2/#volume-configuration-reference
[20:20:15] <maxzor> What I meant was that if you only want name volumes dockerfile is enough, but if you want bind-mounts, you need a docker-compose, or bind-mount from the command line^
[20:20:35] <tabakhase> >what< part 2 - that dockerfile does a lot of "things that will break" (for a partial rebuild after some time) - have a read https://docs.docker.com/develop/develop-images/dockerfile_best-practices/  espc. about gouping apt calls / logical units  - also there shouldnt rly be sudo in there (usually) 
[20:21:02] <tabakhase> and that whole "user dance" is kinda its own story... ("by the book you dont know ids when building as your and my pc want a different one" -> for a local build using scripts this may be totally fine to ignore, just a thing to keep in mind when you later get onto other images where the ENTRYPOINT has todo that (or --user))
[20:21:07] <maxzor> I heard about gosu and ran away :)
[20:22:06] *** Joins: DoofusCanadensis (~DoofusCan@S01061056117e7f56.cg.shawcable.net)
[20:22:16] <tabakhase> if it actually needs rooty, gosu is the better yes
[20:22:53] <maxzor> I was happy with my little sauce before being yelled at by you :D
[20:23:57] *** Quits: lalitmee__ (~lalitmee@180.94.32.14) (Ping timeout: 240 seconds)
[20:24:07] <maxzor> (except that I cannot reach the GPU), but all critique welcome, thank you :)
[20:24:58] <maxzor> I'll keep in mind gosu and entry points if I need to be serious about docker some time soon.
[20:25:19] <tabakhase> and the "volume vs bindmount" thing is a little subotimal - BOTH works with the same "-v" // volumes: syntax and the ONLY difference to "turn a volume or a bindmount" is if the first character is a "/" --- so "-v bla/mo:/meme" will create a volume called bla/mo -- while "-v /bla/mo:/meme" will actually bindmount /bla/mo   ||| what gets especially interesting as "volumes" KEEP wat was in the 
[20:25:20] <tabakhase> container (note, this "copy" is done only ONCE, never updated!) - while bindmounts _completly_ overshaddow the files that were in there before
[20:26:35] *** Joins: MrBlue (~MrBlue@24.114.84.33)
[20:27:15] <tabakhase> the VOLUME in a dockerfile "does kinda nothing" you could almost say, it just creates a marker that will tell docker to later use a "anonymous-volume" on that path if it gets run -- but if thats data you want to keep one is supposed to use a named-volume/mount anyhow, anonymous ones are rly more for internals
[20:28:16] <maxzor> I am not sure I understood. Did you mean that in there https://salsa.debian.org/maxzor/rocm-builder/-/blob/master/docker-compose.yml I actually made bind-mounts out of devices and modules and OTOH made a named volume out of ./salsa...?
[20:29:56] <tabakhase> "./" is special, compose translates that to the absolute path before sending it onto the docker-daemon -- so this ends up as /home/user/projects/rocm-builder/salsa or whatever in the end
[20:31:06] <tabakhase> ("-v ./bla:/blub" would NOT get translated and create a volume called "./bla" - so there one uses "-v $PWD/bla:/blub" instead as $PWD is set by your terminal
[20:31:10] *** Joins: gebbione (~gebbione@82-132-216-196.dab.02.net)
[20:34:20] <maxzor> ah ok
[20:34:27] <tabakhase> and well, for your actual amd issue -  that lib-mount seems odd - and try if some of the existing amd-containers work maybe... seems there is quite some fuzz about driver versions too (not all cards working with all and such) but thats kinda all i got :|
[20:36:51] *** Joins: Tas-sos (~Tas-sos@ppp005054047017.access.hol.gr)
[20:39:08] *** Quits: Tas-sos (~Tas-sos@ppp005054047017.access.hol.gr) (Client Quit)
[20:41:46] *** Joins: Tas-sos (~Tas-sos@ppp005054047017.access.hol.gr)
[20:43:35] <maxzor> I didn't like having multiple line arguments. It makes for bad stdout at build time. That's a reason why I went for several 'RUN apt', another reason being to take advantage of multi-stage. you seemed to imply that it was wrong and I wanted to group logical units? 
[20:45:41] <maxzor> I got several learnings from the best practice link, thanks^
[20:49:10] *** Joins: ExeciN (~ExeciN@user/nicexe)
[20:50:30] <maxzor> ah! works! found this on reddit "it worked after I installed kmod and msr-tools. Thanks!"
[20:54:36] *** Joins: GailWynand (~GailWynan@195.216.219.1)
[20:59:28] <maxzor> I have a render group on host n°107. It is not found by guest, which is why I recreate a render group in dockerfile. Do you know why?
[21:01:10] *** Joins: lilgopher (~textual@2601:241:8000:38f0:6415:ac65:3de6:8743)
[21:01:49] *** Joins: rsx (~dummy@ppp-188-174-133-88.dynamic.mnet-online.de)
[21:09:49] *** Quits: rsx (~dummy@ppp-188-174-133-88.dynamic.mnet-online.de) (Quit: rsx)
[21:11:13] <tabakhase> maxzor sure for debugging / "while under construction" noone gives a f. about that dockerfile and going line-by-line is precisely what i would do too :P -- and while this has a theoretical problem (the max number of layers a image can have is like 127 i think?) - the much more practical one is that "when you add a package in line 15 now, the build will restart after 14, today thats just fine, 
[21:11:14] <tabakhase> but maybe tomorrow or in a week the apt-repo was updated and everything 404´s - you need to rerun apt update whats line 3, what would mean you also have to sit around for another hour to then wait for 4 to 14 to be done --- "so youd want apt update and install in one step" -- but "just update in every step" is not a fix either (layering filesystem, docker never deletes anything, so you would 
[21:11:15] <tabakhase> have to actually do "apt update && apt install && rm $apt_cache_dir" to not waste space -- what now means your one build will have to update the repo "15 times in one build" -- but stuffing "all into one" may also suck as its longer --- so its rly a "depends..." / sliding balance where/what to group
[21:11:20] <tabakhase> and wall of text o.O
[21:12:53] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[21:14:42] <tabakhase> maxzor on users/groups - is also a funny one... the container has its OWN /etc/passwd and /etc/groups files -- but "the kernel" actually doesnt care about either of those in the end, all it cares are "nummeric ids" - so thats the thing to line up on
[21:14:57] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 240 seconds)
[21:15:00] *** Joins: s33ker (~s33ker@89-212-68-200.dynamic.t-2.net)
[21:16:09] <maxzor> When is clean successor to docker coming in?
[21:16:10] <maxzor> xD
[21:16:22] <maxzor> The internet is littered with such bugs https://githubmate.com/repo/RadeonOpenCompute/ROCm-docker/issues/65
[21:16:32] *** Joins: Enitin (~Enitin@82.102.22.84)
[21:17:46] <maxzor> "Failed to get user name to check for group membership" within docker
[21:17:52] <maxzor> thank you!
[21:18:54] *** Joins: ada_ (uid242135@user/ada/x-9065485)
[21:18:54] *** ChanServ sets mode: +o ada_
[21:23:27] <maxzor> Is there no utility to sync conveniently UIDs and GUIDs? it all looks like an awful melting-pot of custom solutions
[21:24:00] <maxzor> s/GUID/GID
[21:28:57] *** Joins: nattiestnate (~nate@114.122.107.61)
[21:29:17] *** Quits: ExeciN (~ExeciN@user/nicexe) (Ping timeout: 256 seconds)
[21:30:39] *** Joins: ExeciN (~ExeciN@user/nicexe)
[21:34:57] *** Quits: ExeciN (~ExeciN@user/nicexe) (Ping timeout: 256 seconds)
[21:36:30] <maxzor> tabakhase, gave a dance to GID in the end aswell :D https://salsa.debian.org/maxzor/rocm-builder/-/blob/master/Dockerfile#L30
[21:37:02] <tabakhase> maxzor kinda, kinda not  - in some cases mounting passwd from the host into the container can be reasonabe - often a simple "--user $UID" to the docker run cuts it - but other times you also "need files" and then you end with tooling like https://github.com/boxboat/fixuid
[21:39:00] <tabakhase> and as said before - "in some cases" cheating and 'building it with your ids locally' is just fine - say especially when "using docker as builder" rather than "producing a docker image" as your actual result in the end
[21:39:36] <maxzor> right, life is easy inside the comfort of the home
[21:40:00] <tabakhase> that kinda just flips in the moment where you plan to "run the image elsewhere" - push it to a registry, deploy in prod or if i wanted to pull it :P
[21:42:27] <maxzor> pulseaudio -k
[21:42:48] * maxzor err
[21:44:48] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[22:03:32] *** Quits: gebbione (~gebbione@82-132-216-196.dab.02.net) (Read error: Connection reset by peer)
[22:05:50] *** Quits: vidbina (~vid@dynamic-078-054-042-128.78.54.pool.telefonica.de) (Ping timeout: 268 seconds)
[22:06:39] *** Quits: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[22:09:56] *** Joins: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73)
[22:19:37] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 240 seconds)
[22:20:38] *** Quits: maxzor (~maxzor@2a01cb04054faa0038d81c6f7a412044.ipv6.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[22:20:43] *** Joins: Enitin (Enitin@gateway/vpn/protonvpn/enitin)
[22:27:47] *** Quits: Enitin (Enitin@gateway/vpn/protonvpn/enitin) (Ping timeout: 256 seconds)
[22:28:02] *** Joins: Enitin (Enitin@gateway/vpn/protonvpn/enitin)
[22:29:40] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:38:04] *** Quits: ztx (~ztx@user/ztx) (Quit: ztx)
[22:38:18] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[22:41:11] *** Quits: Enitin (Enitin@gateway/vpn/protonvpn/enitin) (Ping timeout: 245 seconds)
[22:42:33] *** Joins: Enitin (Enitin@gateway/vpn/protonvpn/enitin)
[22:45:06] *** Quits: Haxxa (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com) (Quit: Haxxa flies away.)
[22:47:03] *** Quits: Enitin (Enitin@gateway/vpn/protonvpn/enitin) (Ping timeout: 256 seconds)
[22:47:10] *** Joins: Haxxa (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com)
[22:55:20] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:57:27] *** Joins: jkwnki (~jkwnki@p4ff31198.dip0.t-ipconnect.de)
[22:59:08] *** Quits: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[23:00:51] *** Joins: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73)
[23:05:41] *** Joins: BenjiProd (~BenjiProd@user/benjiprod)
[23:07:27] *** Quits: n9nes (~n9nes@user/n9nes) (Ping timeout: 256 seconds)
[23:08:32] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 240 seconds)
[23:10:17] *** Quits: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[23:12:00] *** Joins: Forsaken87 (~quassel@2a02:908:1866:e360:88b0:2032:220f:3f73)
[23:12:58] *** Quits: C4Crawford (~C4Crawfor@162-238-18-201.lightspeed.bcvloh.sbcglobal.net) (Quit: The Lounge - https://thelounge.chat)
[23:15:30] *** Joins: C4Crawford (~C4Crawfor@162-238-18-201.lightspeed.bcvloh.sbcglobal.net)
[23:16:33] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[23:17:59] *** Quits: withered_wolf (~withered_@97.112.15.92) (Ping timeout: 252 seconds)
[23:22:38] *** Quits: JohnDoe2 (~johndoe2@2001:470:1f07:89::dead:bead) (Quit: bye)
[23:27:26] *** Quits: s33ker (~s33ker@89-212-68-200.dynamic.t-2.net) (Quit: Client closed)
[23:33:02] *** Quits: tianon (~tianon@user/tianon) (Ping timeout: 240 seconds)
[23:33:20] *** Joins: tianon (~tianon@user/tianon)
[23:36:46] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:41:49] *** Joins: withered_wolf (~withered_@97.112.15.92)
[23:49:07] *** Quits: jkovac1 (~jkovac1@user/jkovac1) (Quit: The Lounge - https://thelounge.chat)
[23:49:19] *** Joins: jkovac1 (~jkovac1@user/jkovac1)
[23:50:12] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[23:51:25] *** dob1_ is now known as dob1
[23:59:09] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[23:59:19] *** Joins: JohnDoe2 (~johndoe2@2001:470:1f07:89::dead:bead)
[23:59:56] *** Quits: greenbagels (~gb@user/greenbagels) (Ping timeout: 245 seconds)
