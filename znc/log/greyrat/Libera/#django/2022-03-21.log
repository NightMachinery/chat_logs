[00:01:15] *** Joins: LordVan (~lordvan@gentoo/developer/lordvan)
[00:10:38] <skinkie> I have a rather particular problem regarding an unmanaged model as a facade for a postgresql view. The view contains (multiple) left joins and the queries from django show all the content when repeated in psql. The column that is joined is shown as 'None' object. When changing this column to a fixed value (or mapping it to a different column) the value appears.
[00:11:24] <skinkie> What part of Django should I 'debug' in order to find how the database query results gets transformed into an object?
[00:12:30] *** Quits: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[00:20:30] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[00:24:07] *** Quits: wattux (~wattux@2a02:238:f014:472:254a:a07f:d097:49ec) (Ping timeout: 256 seconds)
[00:30:42] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 268 seconds)
[00:38:16] *** Joins: admin123 (~harrymore@ool-2f12f5b1.dyn.optonline.net)
[00:43:05] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[00:52:06] *** kostkon_ is now known as kostkon
[00:52:52] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[00:54:45] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[01:02:27] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: No Ping reply in 180 seconds.)
[01:30:32] *** Quits: LordVan (~lordvan@gentoo/developer/lordvan) (Remote host closed the connection)
[01:33:29] *** Joins: Thanatos (~Thanatos@105.112.30.185)
[01:36:27] *** Joins: LordVan (~lordvan@gentoo/developer/lordvan)
[01:41:48] *** justAstache is now known as justOkay
[01:50:50] *** Quits: LordVan (~lordvan@gentoo/developer/lordvan) (Quit: Leaving)
[02:02:07] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:03:54] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[02:04:29] *** Quits: Donitz (~Donitz4@88-115-149-215.elisa-laajakaista.fi) (Read error: Connection reset by peer)
[02:04:37] *** Joins: yanchai (~yanchai@115.147.34.99)
[02:08:09] *** Joins: Donitz (~Donitz4@88-115-149-215.elisa-laajakaista.fi)
[02:13:18] *** Joins: django-ticketbot (~django-ti@django/ops/ticketbot)
[02:17:06] <schinckel_> skinkie: Can you show us the view and model? There may be something helpful there.
[02:17:27] <schinckel_> (Specifically, what is the column type that you are using?)
[02:17:32] <schinckel_> field
[02:28:25] <skinkie> schinckel_: https://code.djangoproject.com/ticket/33590
[02:30:08] <skinkie> schinckel_: I wonder if you after reading that ticket would have any pointers where this could go wrong.
[02:34:02] <schinckel_> skinkie: I think using a calculated column for the id is “dangerous” - that value could depend on the rest of the query.
[02:37:00] *** Joins: ThanatosJ (~Thanatos@105.112.182.105)
[02:37:07] <skinkie> schinckel_: then i still fail to understand how a column value could change during that query. If you have a suggestion what to change the id into, happy to try it.
[02:37:40] <schinckel_> I’m just saying I think using a row_number column, and ther querying on it, could cause issues.
[02:37:50] <schinckel_> In this case, I don’t know that it is related.
[02:38:16] <schinckel_> Can you see the SQL that the querysets you are filtering on is generating?
[02:40:15] *** Quits: Thanatos (~Thanatos@105.112.30.185) (Ping timeout: 250 seconds)
[02:40:43] <skinkie> schinckel_: changed the 'id' to the epoch of scheduled, which should be stable across queries. Issue remains.
[02:42:36] <schinckel_> So do you need a LEFT OUTER JOIN instead of a LEFT (INNER) JOIN?
[02:42:39] <skinkie>  {'sql': 'SELECT "blxadmin_nextschedule"."id", "blxadmin_nextschedule"."scheduled", "blxadmin_nextschedule"."exact_schedule_id", "blxadmin_nextschedule"."negative_schedule_id" FROM "blxadmin_nextschedule" LIMIT 1', 'time': '0.113'}
[02:43:14] <schinckel_> It won’t return any rows when there are no matching items in blxadmin_negativeschedule.
[02:43:38] <skinkie> schinckel_: because the negative schedule does not exist in 99% of the cases
[02:43:53] <schinckel_> So do you want rows returned in those cases? Or not.
[02:44:51] <skinkie> schinckel_: the output of this query is basically analogue to all upcomming 'cronjobs', which the option that the cronjob is skipped (and why)
[02:45:40] <schinckel_> So can you answer my question? Should “NextSchedule” return all schedules, or only those thate have a value in negative_schedule_id?
[02:45:51] <skinkie> Both.
[02:45:59] <schinckel_> Okay, you can’t use an inner join then.
[02:46:11] *** Quits: yanchai (~yanchai@115.147.34.99) (Ping timeout: 245 seconds)
[02:46:16] <schinckel_> Because that will filter out rows where the are no matching negative schedules.
[02:47:00] <skinkie> Basically what I am looking for is where in Django the model is filled with the query output. Because I want to check out what exactly happens in this case.
[02:48:08] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[02:49:16] <schinckel_> The model instantiation occurs at https://github.com/django/django/blob/main/django/db/models/query.py#L89
[02:49:36] <schinckel_> But if you use `.values()` on your queryset, you’ll see a dict-like structure which is often easier for debugging.
[02:49:56] <schinckel_> But that’s not going to help you if you are filtering out rows because of your join type.
[02:51:14] <skinkie> schinckel_: how can my join type (which is behind a view, hence transparent for the client) affect how django interprets the values?
[02:52:14] <skinkie> ...and the value becoming visible if the datetime range is increased, while still having the same query output.
[02:52:31] <schinckel_> I don’t think it does. You said you wanted all rows, not just those with a negative schedule - I’m pointing out that your JOIN type is not going to include those.
[02:52:41] <schinckel_> But try .values() to see what data django gets.
[02:53:26] <skinkie> schinckel_: The output of the ticket is exacly what I want, the 'null' rows on the right side are included.
[02:54:59] <skinkie> <QuerySet [{'id': 1647824400.0, 'scheduled': datetime.datetime(2022, 3, 21, 1, 0), 'exact_schedule_id': 1, 'negative_schedule_id': None}]>
[02:55:06] <skinkie>  1647824400 | 2022-03-21 01:00:00 |                 1 |                    1
[02:55:29] *** Joins: blackout69 (~blackout6@37.183.198.248)
[02:55:46] *** Joins: rje (~textual@50.35.241.164)
[02:55:55] <schinckel_> Ugh, my bad. I had in my head that LEFT JOIN was LEFT INNER JOIN, not LEFT OUTER JOIN.
[02:55:59] <schinckel_> Need more coffee.
[02:56:46] <schinckel_> So if .values() is giving the value as None, maybe it’s the database handler that’s munging the value?
[02:58:03] <schinckel_> If you drop into a debugger at that point, you should be able to have a look at `row` and see what it contains.
[02:58:06] <skinkie> schinckel_: I am now at the breakpoint just before that mapping, it is already None there. (results)
[02:58:39] <schinckel_> Which db backend?
[02:58:46] *** Quits: ThanatosJ (~Thanatos@105.112.182.105) (Read error: Connection reset by peer)
[02:58:47] <skinkie> PostgreSQL
[02:59:40] <skinkie> schinckel_: after compiler.execute_sql, [(1647824400.0, datetime.datetime(2022, 3, 21, 1, 0), 1, None)]
[02:59:53] *** Quits: rje (~textual@50.35.241.164) (Read error: Connection reset by peer)
[03:00:09] *** Joins: rje (~textual@65.141.156.170)
[03:00:42] <skinkie> SELECT "blxadmin_nextschedule"."id", "blxadmin_nextschedule"."scheduled", "blxadmin_nextschedule"."exact_schedule_id", "blxadmin_nextschedule"."negative_schedule_id" FROM "blxadmin_nextschedule" WHERE "blxadmin_nextschedule"."id" = 1647824400 LIMIT 21; being the query
[03:00:57] <skinkie> and when executed in postgresql, no null value appears...
[03:03:50] *** Quits: blackout69 (~blackout6@37.183.198.248) (Quit: Leaving.)
[03:06:05] <schinckel_> https://github.com/django/django/blob/b07ee98b27e58992fdc10fec0ec67e68ae1d272d/django/db/models/sql/compiler.py#L1670 looks like it may apply converters to the rows that are returned.
[03:08:12] <skinkie> schinckel_: i am hopping now being get_default_columns and get_col
[03:12:47] <skinkie> schinckel_: lets say that it is already bad after models/query.py compiler.execute_sql I am not hitting the get_converters.
[03:15:37] <schinckel_> Okay.
[03:16:09] <schinckel_> Oh wait, that was the SQLInsertCompiler.
[03:16:14] <skinkie> schinckel_: I can likely surprise you more. The output of cursor.fetchone() is *already* wrong.
[03:16:40] <schinckel_> So maybe it’s psycopg2 that’s screwing it up?
[03:17:34] <schinckel_> https://github.com/django/django/blob/b07ee98b27e58992fdc10fec0ec67e68ae1d272d/django/db/models/sql/compiler.py#L1405
[03:17:43] <schinckel_> Does it think it has the wrong number of columns?
[03:19:05] <skinkie> schinckel_: shall I test it with psycopg2 first to figure output the baseline?
[03:20:07] <schinckel_> Might be worth it.
[03:22:13] <skinkie> schinckel_: same psycopg2 gets the right result
[03:22:20] <skinkie> (1647824400.0, datetime.datetime(2022, 3, 21, 1, 0), 1, 1)
[03:22:47] *** Quits: slav0nic_ (slav0nic@python.su) (Ping timeout: 252 seconds)
[03:23:06] <schinckel_> Okay, I wonder if you can debug on the line I linked above (or whatever the equivalent line is in your version of django)
[03:24:32] <schinckel_> https://github.com/django/django/blob/b07ee98b27e58992fdc10fec0ec67e68ae1d272d/django/db/models/sql/compiler.py#L1896 suggests it would just drop column values after `col_count`, which could result in a None being used for the value.
[03:24:59] <skinkie> schinckel_: at that point I have self.col_count = 4
[03:25:18] <skinkie> and self.has_extra_select = False
[03:26:11] <skinkie> the problem is before this. because cursor.fetchone() results here already in the None column.
[03:26:35] *** Quits: shodan45 (~quassel@107.161.22.155) (Ping timeout: 256 seconds)
[03:30:10] <schinckel_> Hmm.
[03:30:26] <schinckel_> https://github.com/psycopg/psycopg2/blob/1d3a89a0bba621dc1cc9b32db6d241bd2da85ad1/psycopg/cursor_type.c#L648 suggests that’s written in C.
[03:30:54] <skinkie> schinckel_: already validated with three lines of python that psycopg2 results the correct values.
[03:36:14] <skinkie> schinckel_: django fails consistently, a raw query on the object has the same effect.
[03:38:08] <skinkie> schinckel_: now I do get a result that fails with a django connection, when approaching it from the connection.cursor() direction
[03:39:06] <skinkie>  c.execute('SELECT * FROM blxadmin_nextschedule where id = 1647824400')  c.fetchone()  (1647824400.0, datetime.datetime(2022, 3, 21, 1, 0), 1, None)
[03:42:13] <skinkie> https://code.djangoproject.com/ticket/33590#comment:2
[03:48:12] <schinckel_> Okay, can you see if there is a difference between `cur.description` between the two cursor types?
[03:48:37] <schinckel_> (I’m clutching at straws a little here)
[03:49:35] <skinkie> psycopg2; (Column(name='id', type_code=701), Column(name='scheduled', type_code=1114), Column(name='exact_schedule_id', type_code=20), Column(name='negative_schedule_id', type_code=20))
[03:50:16] <skinkie> django; (Column(name='id', type_code=701), Column(name='scheduled', type_code=1114), Column(name='exact_schedule_id', type_code=20), Column(name='negative_schedule_id', type_code=20))
[03:52:57] *** schinckel_ is now known as schinckel
[03:54:55] <skinkie> schinckel: I guess we both agree there is a bug at play here, that given it can be reproduced, must be resolved given that it is going to cause a lot of others to go insane :)
[03:58:17] <schinckel> It seems like it should not be limited to being a VIEW that causes this though - postgres should not care whether it’s from a view or not.
[03:58:35] <schinckel> Might be worth trying to build a django test case (ie, in the django source code) to reproduce it.
[04:00:14] *** Joins: explore (uid233125@id-233125.hampstead.irccloud.com)
[04:01:38] <skinkie> schinckel: I am going to do two things now. See what wireshark tells me given that connection. And create a simple SQL-only example without any Django, to do the connection thing.
[04:04:14] <skinkie> schinckel: I don't know if you are surprised. But already at wire level there is a NULL.
[04:04:35] <schinckel> Okay, so something is triggering the database to return a NULL there.
[04:08:23] <skinkie> schinckel: I am not allowed to upload an attachement sadly.
[04:09:21] <skinkie> second time worked
[04:09:35] *** Joins: djapo (~archangel@user/djapo)
[04:09:55] <skinkie> schinckel: how do we proceed?
[04:11:21] <schinckel> Might have to wait and see who weighs in on the ticket.
[04:11:38] <schinckel> Does re-ordering the columns in the view make any difference?
[04:16:00] <skinkie> https://code.djangoproject.com/attachment/ticket/33590/reproduce.sql
[04:16:15] <skinkie> A single row cannot be reordered ;)
[04:19:05] <schinckel> No, the columns, not the rows.
[04:19:16] <schinckel> Delete and redefine the view.
[04:19:39] <schinckel> (ie, trying to figure out if it’s the last column, or something about that column)
[04:20:01] <schinckel> (and maybe trying to find a workaround, by adding an extra column that you don’t actually use)
[04:22:34] <skinkie> schinckel: adding two columns behind it does not have any impact
[04:23:32] <skinkie> schinckel: when i started this, I already validated that it is also not about the column 'name', it can rename another column with the same name, and get content.
[04:23:55] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 240 seconds)
[04:28:57] *** Quits: cs (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Ping timeout: 240 seconds)
[04:30:57] *** Joins: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec)
[04:31:19] <schinckel> Okay, cool (or not cool)
[04:32:59] *** Quits: rje (~textual@65.141.156.170) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:33:00] <skinkie> schinckel: someone closed the ticket...
[04:33:04] <skinkie> really....
[04:34:42] <schinckel> I think maybe the title needs changing.
[04:35:01] <skinkie> schinckel: suggestions?
[04:36:23] <schinckel> Can you get an exact query from your postgres logs?
[04:36:50] <skinkie> schinckel: sure, but it is also in the wireshark log.
[04:37:07] <schinckel> I don’t have wireshark or anything to look at that file.
[04:37:36] <skinkie> so you want me to show you that this thing does the exact same query?
[04:38:06] *** Quits: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:38:28] *** Joins: rje (~textual@50.35.241.164)
[04:38:30] <schinckel> Yes. ;)
[04:39:13] *** Joins: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec)
[04:40:14] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[04:42:01] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[04:44:43] <skinkie> schinckel: https://pastebin.com/HF5g3zEZ
[04:45:39] <skinkie> schinckel: thanks for your reply in the ticket.
[04:58:41] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 250 seconds)
[05:05:19] *** Joins: mbrndtgn6 (~mbrndtgn@undecidable.de)
[05:06:12] *** Quits: Lartza (lartza@user/lartza) (Ping timeout: 240 seconds)
[05:06:15] *** Joins: Lartza_ (lartza@user/lartza)
[05:06:36] *** Quits: simplici1y (~yti@user/simplicity) (Ping timeout: 240 seconds)
[05:07:00] *** Quits: dang`r`us (~eismann@pg.afoo.at) (Ping timeout: 240 seconds)
[05:07:00] *** Quits: mbrndtgn (~mbrndtgn@undecidable.de) (Ping timeout: 240 seconds)
[05:07:00] *** mbrndtgn6 is now known as mbrndtgn
[05:07:38] *** Joins: dang`r`us (~eismann@pg.afoo.at)
[05:08:29] *** Joins: simplicity (~yti@user/simplicity)
[05:16:35] *** Joins: yanchai (~yanchai@222.127.97.162)
[05:30:55] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 240 seconds)
[05:32:01] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[05:37:26] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[05:37:51] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[06:05:14] *** Joins: llanhmod (~developer@user/domhnall/x-2887755)
[06:05:40] *** Joins: dre (~dre@2001:8003:c932:c301:6340:c00d:1602:9f)
[06:08:01] *** Quits: rje (~textual@50.35.241.164) (Quit: Textual IRC Client: www.textualapp.com)
[06:08:21] *** Joins: rje (~textual@65.141.156.170)
[06:16:35] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 240 seconds)
[06:18:51] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[06:44:28] <theprophet> Where can i find filter() args list? for example __icontains and other args.
[06:48:56] <GinFuyou> https://docs.djangoproject.com/en/4.0/ref/models/querysets/#field-lookups-1
[06:49:44] <theprophet> What a weird way to put it out there . jfc
[06:49:49] <theprophet> GinFuyou thanks gin
[06:51:28] <theprophet> field lookups -_-
[07:12:41] *** Quits: llanhmod (~developer@user/domhnall/x-2887755) (Ping timeout: 256 seconds)
[07:12:42] *** Quits: ahadi (~ahadi@246-42-142-46.pool.kielnet.net) (Ping timeout: 252 seconds)
[07:17:31] *** Joins: ahadi (~ahadi@168-41-142-46.pool.kielnet.net)
[07:23:34] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:24:22] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:24:22] *** Quits: rje (~textual@65.141.156.170) (Read error: Connection reset by peer)
[07:28:46] *** Joins: rje (~textual@65.141.156.170)
[07:29:56] *** Quits: explore (uid233125@id-233125.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[07:37:25] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[07:37:57] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[07:42:35] *** Joins: djapo (~archangel@user/djapo)
[07:43:28] *** Joins: sixpiece (~brainz3sl@static.61.104.203.116.clients.your-server.de)
[07:43:37] <sixpiece> hello my name is six
[07:43:48] <sixpiece> can someone help me with django?
[07:44:31] <theprophet> :DD
[07:44:37] <theprophet> ask your question
[07:51:08] <sixpiece> ok basically I am trying to install django
[07:52:02] <sixpiece> After you’ve created and activated a virtual environment, enter the command:
[07:52:02] <sixpiece> / 
[07:52:02] <sixpiece> $ python -m pip install Django
[07:52:10] <sixpiece> so when I do that step
[07:52:25] <sixpiece> it says /usr/local/bin/python: No module named pip
[07:52:48] <sixpiece> I am on freebsd 13 release 4
[07:52:55] <theprophet> you dont need -m after you've already created venv.
[07:53:10] <theprophet> when u activate venv and u see that u did it
[07:53:15] <theprophet> you can just pip install django
[07:53:47] <theprophet> and to make it even easier for you, if your python version is 3 or above
[07:53:48] <sixpiece> I never activated venv
[07:53:57] <sixpiece> yes it is 3.8
[07:53:59] <theprophet> you can do py instead of python
[07:54:09] <theprophet> well you need to activate you venv first
[07:54:38] <theprophet> you need to change the interpreter to python.exe which is located in your venv directory
[07:55:11] *** Quits: yanchai (~yanchai@222.127.97.162) (Ping timeout: 256 seconds)
[07:55:17] <theprophet> if you're trying all that in vscode, when you choose interpreter you can see the white star which says recommended
[07:56:12] <theprophet> which text editor are you using?
[07:57:38] <sixpiece> I just have putty
[07:57:40] <sixpiece> and vi
[07:57:49] <sixpiece> but I can use my computer also and have it here
[07:58:32] <theprophet> ok, so yea , you need to activate your venv by changing the interpreter from global to one that is located in your venv directory
[07:58:46] <sixpiece> I followed a few of the steps but got hung up on one of them
[07:58:53] <sixpiece> https://docs.djangoproject.com/en/4.0/intro/contributing/
[07:59:07] <sixpiece> python -m pip install -e /path/to/your/local/clone/django/
[07:59:20] <sixpiece> this one basically I don't know how to find the path to django I think is the problem
[08:01:12] <theprophet> that path means your location
[08:01:23] <sixpiece> yes location of the django right?
[08:01:26] <theprophet> i mean where you stand
[08:01:31] <theprophet> no
[08:01:53] <sixpiece> then what?
[08:01:53] <theprophet> that django is just a example name
[08:02:01] <theprophet> its a folder
[08:02:06] <sixpiece> like where I will leave the files?
[08:02:11] <theprophet> where you iinstall your venv
[08:02:12] <sixpiece> working directory?
[08:02:15] <theprophet> yes
[08:02:32] <theprophet> its a endpoint of the folder
[08:02:32] <sixpiece> so I can make it anything?
[08:02:41] <sixpiece> what should I make it ?
[08:02:43] <theprophet> what you mean anything?
[08:02:49] <theprophet> i dont get it
[08:02:55] <sixpiece> like I choose the folder to be a working directory?
[08:03:01] <theprophet> yes
[08:03:08] <sixpiece> what should it be?
[08:03:12] <theprophet> its your choice what you name the directory folder
[08:03:16] <theprophet> does not matter
[08:03:19] <theprophet> name what you want
[08:03:25] <sixpiece> just curious if you had a good idea of unix mannerisms
[08:03:30] <theprophet> its just a directory where you make your venv
[08:03:58] <theprophet> no i dont
[08:04:13] <sixpiece> neither do I unfortunately I just know there are some ethics there
[08:04:28] <sixpiece> I will try /home/venv even though I am breaking the rules
[08:04:41] <theprophet> make a folder on your desktop
[08:04:49] <theprophet> open that folder in your text editor
[08:05:00] <theprophet> then open up a new terminal in that exact directory
[08:05:06] <theprophet> and instal venv there
[08:05:12] <theprophet> then activate it
[08:05:18] <sixpiece> https://bsd.to/GPW4
[08:05:51] <sixpiece> I'm installing it on a vps I will install it later on a desktop I suppose
[08:05:57] <theprophet> listen
[08:05:59] <sixpiece> I'm just getting started literally
[08:06:07] <sixpiece> like a vps server I mean
[08:06:14] <theprophet> i see
[08:06:38] <theprophet> then ask your question again and wait for some1 more experienced to answer your question
[08:07:16] <sixpiece> ok thank you, seriously?
[08:07:25] <theprophet> huh?
[08:07:59] <sixpiece> like you sound pretty experienced
[08:08:34] <theprophet> i am ok.
[08:09:25] <theprophet> rn , all i can say is , if you want to make a venv. just make a folder on you desktop, open that folder in your text editor and make your venv in that exact directory.
[08:09:42] <theprophet> than when you activate that venv, you can install django there.
[08:10:39] <theprophet> to activate that venv, you need to change from global python interpreter to venv python interpreter which is located in venv directory u made.
[08:10:57] <sixpiece> what venv?
[08:11:05] <theprophet> virtual enviroment
[08:11:20] <sixpiece> I understand but I mean
[08:11:21] <theprophet> your first question, here was that
[08:11:28] <sixpiece> what is the purpose let's say of this step
[08:11:37] <theprophet> to make venv?
[08:11:42] <theprophet> why make venv?
[08:11:59] <sixpiece> Go ahead and install the previously cloned copy of Django:
[08:11:59] <sixpiece> / 
[08:11:59] <sixpiece> $ python -m pip install -e /path/to/your/local/clone/django/
[08:12:28] <sixpiece> exactly I don't understand what the goal is or how to achieve this step
[08:12:30] <theprophet> do you know what git is?
[08:12:35] <sixpiece> and move on to the next one
[08:12:41] <sixpiece> it's a repository perhaps?
[08:12:46] <sixpiece> like type of svn?
[08:13:17] <theprophet> are you trying to write a patch?
[08:13:45] <sixpiece> no I am trying to follow the steps to get django to work
[08:13:49] <sixpiece> and see what it's about
[08:13:56] <theprophet> you dont need git
[08:14:01] <theprophet> that cloning thing is for git
[08:14:10] <theprophet> why are you trying this i am not sure
[08:14:11] <sixpiece> I didn't ask about git I am just quoting the steps
[08:14:28] <theprophet> ok let me ask
[08:14:34] <theprophet> are you just starting django?
[08:14:59] <sixpiece> yes ok makes I think I didn't think that step
[08:15:00] <sixpiece> sorry
[08:15:33] <theprophet> no its ok, i am just trying to understand what ur trying to acomplish
[08:15:36] <theprophet> no need to sorry
[08:15:44] <theprophet> ok then u dont need the link you gave me
[08:16:17] <theprophet> start it from here https://docs.djangoproject.com/en/4.0/intro/install/
[08:16:27] <sixpiece> oh cool I have version 3.2.12
[08:16:30] <sixpiece> is that ok?
[08:17:00] <theprophet> its fine , bur if you know how , update it.
[08:18:04] <sixpiece> I'm trying
[08:18:53] <theprophet> are you on windows,linux,mac?
[08:21:48] <sixpiece> I'm on Windows 10
[08:22:04] <sixpiece> professional but I have on the vps FreeBSD which is Berkeley Systems Distribution
[08:22:10] <sixpiece> it's a Unix operating system
[08:22:30] <sixpiece> and I use Windows/Linux for the most part
[08:22:52] <theprophet> open up you cmd and type this pip3 install --upgrade django
[08:22:59] <sixpiece> I think the problem is that I need to sign into a user account with wheel designation
[08:23:01] <theprophet> open up you cmd and type this pip install --upgrade django
[08:23:28] <sixpiece> that was easier
[08:23:36] <sixpiece> thank you
[08:24:12] <sixpiece> it still says 3.22
[08:24:19] <sixpiece> 3.2.12
[08:25:40] <sixpiece> https://bsd.to/Bd6p
[08:25:43] <sixpiece> something like that
[08:26:41] *** Quits: sreve (~quassel@p54a71b7a.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[08:26:46] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[08:26:49] <sixpiece> https://bsd.to/3xof
[08:26:59] *** Joins: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de)
[08:26:59] <sixpiece> and that shows you where I get the 3.2.12
[08:27:39] <sixpiece> I might take a bit of a break now
[08:27:46] <sixpiece> thank you theprophet
[08:27:50] <sixpiece> be back in 30 minutes or so
[08:28:02] <sixpiece> or I might hit the hay and just wake up early tomorrow
[08:28:37] <theprophet> sixpiece pip install -U Django try this
[08:29:36] <sixpiece> same result
[08:29:47] <theprophet> what does the first line says
[08:30:01] <theprophet> Requirement already satisfied: Django in c:\new folder\lib\site-packages (4.0.3) does it look like this?
[08:30:37] <sixpiece> https://bsd.to/vw5U
[08:32:40] <theprophet> you got everything messed up
[08:32:43] <sixpiece> I think I need to upgrade python
[08:32:55] <sixpiece> https://docs.djangoproject.com/en/4.0/faq/install/#faq-python-version-support
[08:33:03] <theprophet> your directory for django it says virtual env and its messing things up
[08:34:36] <theprophet> its upgrading different django
[08:34:49] <theprophet> in your computer
[08:36:52] <sixpiece> yes it's all confusing lol
[08:37:03] <sixpiece> I feel like Bill and Ted with this stuff right now
[08:37:22] <theprophet> root/.virtualenvs <-- i am not sure what created this venv here
[08:37:44] <theprophet> but from cmd ur not upgrading this , ur upgrading django where it has been installed when u first did it
[08:38:35] <theprophet> cmd upgrades the django in directory when you insalled django in the first place
[08:40:05] <theprophet> maybe your text editor has builtin venv option, like in pycharm. but cmd only affects global directory.
[08:40:32] <theprophet> and that venv is not inheriting global packages.
[08:50:54] <sixpiece> interesting
[08:51:00] <sixpiece> I don't exactly follow
[08:51:10] <sixpiece> sorry I had to go to the washroom for a second
[08:51:59] <theprophet> open up your text editor and make a full screenshot for a sec, or you can go hit hay your choice
[08:52:27] <sixpiece> text editor?
[08:52:52] <theprophet> where do you write your code?
[08:54:10] <sixpiece> in this ssh box
[08:54:24] <sixpiece> puTTy
[08:55:16] <theprophet> ah that makes sense
[08:55:43] <theprophet> when i told you to open up cmd, u did it on your computer or in putty?
[08:56:08] <sixpiece> putty
[08:56:35] <theprophet> and where did you installed your python and django?
[08:56:42] <theprophet> when u first did it?
[08:58:28] <sixpiece>  I have no idea really I just typed pip
[08:58:32] <sixpiece> or did pkg install python
[08:58:50] <sixpiece> or like git clone http://github.com/django.git
[08:58:56] <theprophet> typed pip in putty or on your computer?
[08:59:10] <sixpiece> in putty
[08:59:17] <sixpiece> in putty on my computer
[08:59:31] <sixpiece> but yes it's the computer in France that is affected
[08:59:32] <theprophet> yes
[09:00:05] <theprophet> why are you even trying to do all these on putty?
[09:00:32] <theprophet> why dont use your pc in first place?
[09:01:33] <sixpiece> because I want it on the computer not on my pc
[09:02:11] <theprophet> well
[09:02:48] <theprophet> django has localhost
[09:03:14] <theprophet> which you can use for tests
[09:03:21] <theprophet> while learning
[09:04:18] <sixpiece> yes but I want to use localhost on the vps
[09:04:28] <sixpiece> on the computer in France
[09:04:33] <theprophet> gotcha
[09:04:47] <theprophet> i am not sure why its not upgrading tho
[09:05:00] <theprophet> seems like ur doing everything right
[09:05:29] <theprophet> just be sure, is putty server a linux server?
[09:08:28] <theprophet> ah yea it is , i checked
[09:08:49] <sixpiece> someone just said I have the latest release anyways
[09:09:08] <sixpiece> they said it's not lts 3.2.12 is the latest
[09:10:10] <sixpiece> and he said that 3.7 should be fine
[09:10:35] <theprophet> it would be fine yea
[09:12:37] <sixpiece> now I did tutorial 1 and there were problems with that
[09:12:46] <sixpiece> https://docs.djangoproject.com/en/4.0/intro/tutorial01/
[09:13:13] <theprophet> what kind of problem?
[09:13:37] <sixpiece> https://bsd.to/zdDt
[09:14:26] <theprophet> from _sqlite3 import *
[09:14:32] <theprophet> what are you trying to do here?
[09:15:02] <sixpiece> I just followed the tutorial
[09:15:15] <sixpiece> django-admin startproject mysite
[09:15:30] <sixpiece> python manage.py runserver
[09:16:52] <theprophet> django-admin startproject mysite
[09:16:58] <theprophet> so u good with this?
[09:17:12] <theprophet> which of the two commands gave you the error?
[09:17:37] <sixpiece> yes the python manage.py runserver
[09:21:00] *** Joins: humanBird (~humanBird@2603-8001-7000-3642-897b-ea6d-3a67-30c3.res6.spectrum.com)
[09:21:08] <theprophet> i am not seeing the cause of that problem
[09:23:54] <sixpiece> I think it's because I didn't link the database?
[09:24:05] <sixpiece> it's 2 am here maybe I should try another day
[09:24:21] <sixpiece> it's fun but I was hoping to wake up in a couple hours if it's possible
[09:24:24] <sixpiece> thank you for your help
[09:24:27] <theprophet> yea its better if you do
[09:25:51] <sixpiece> ok good night , see you later, signing off
[09:25:53] *** Parts: sixpiece (~brainz3sl@static.61.104.203.116.clients.your-server.de) (Leaving)
[09:40:32] *** Quits: svedrin (~quassel@tiamat.funzt-halt.net) (Quit: https://quassel-irc.org - Komfortabler Chat. Überall.)
[09:40:49] *** Joins: svedrin (~quassel@tiamat.funzt-halt.net)
[09:44:54] *** Joins: dor (~erg@188.146.38.211.nat.umts.dynamic.t-mobile.pl)
[09:49:14] *** Joins: yanchai (~yanchai@222.127.97.162)
[09:54:07] *** Joins: relight (~relight@user/relight)
[09:56:22] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Ping timeout: 240 seconds)
[09:57:59] <serafeim> hey friends
[10:01:17] <theprophet> hello
[10:09:58] *** Joins: ekathva (~ekathva@2001:999:50:7590:3293:e550:f3ea:111)
[10:17:12] *** Joins: pro_z_ (~pro_z@37.214.63.146)
[10:28:27] *** Quits: magnesium_carbon (~li2so4@sr388.sophieversum.net) (Quit: .)
[10:42:21] *** Quits: dor (~erg@188.146.38.211.nat.umts.dynamic.t-mobile.pl) (Ping timeout: 256 seconds)
[10:51:00] <serafeim> ok here's the $ 1 000 000 question. have you been able to find a formatter for django-html files *that works* ?
[10:51:13] <serafeim> this is my holy grail
[10:51:25] *** Quits: dre (~dre@2001:8003:c932:c301:6340:c00d:1602:9f) (Ping timeout: 240 seconds)
[10:53:59] <theprophet> serafeim you mean extension?
[10:54:10] *** Joins: mrwick (~mrwick@user/mrwick)
[10:54:19] <serafeim> theprophet: ideally yes, a VS code package
[10:54:34] <serafeim> but i don't care that much. i just want something that will format my django-html files
[10:55:18] <theprophet> no
[11:00:42] *** Quits: humanBird (~humanBird@2603-8001-7000-3642-897b-ea6d-3a67-30c3.res6.spectrum.com) (Quit: Client closed)
[11:01:45] *** Joins: luigibu (~luigi@93.176.153.88)
[11:02:39] *** Joins: jmd (~user@de.cellform.com)
[11:04:35] *** Joins: dor (~erg@188.146.38.211.nat.umts.dynamic.t-mobile.pl)
[11:08:29] *** Quits: dor (~erg@188.146.38.211.nat.umts.dynamic.t-mobile.pl) (Remote host closed the connection)
[11:10:11] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[11:10:11] *** ChanServ sets mode: +v EvilDMP
[11:32:22] *** Quits: jmd (~user@de.cellform.com) (Remote host closed the connection)
[11:37:47] *** Joins: jmd (~user@de.cellform.com)
[11:41:01] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 268 seconds)
[11:42:07] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[11:44:04] *** Joins: pycode (~pycode3@2001:b07:5d28:551:eb94:250d:4306:dbac)
[12:04:30] *** Joins: explore (uid233125@id-233125.hampstead.irccloud.com)
[12:12:50] *** Quits: vdamewood (~vdamewood@fedora/vdamewood) (Read error: Connection reset by peer)
[12:13:22] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[12:17:46] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:21:39] <yanchai> hi does anyone know where to put follow_x_forwarded_for allow 192.168.1.1
[12:21:47] <yanchai> i mean which file?
[12:24:30] *** Quits: coldmountain (sid484352@id-484352.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[12:29:49] *** Lartza_ is now known as Lartza
[12:31:42] *** Quits: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Ping timeout: 252 seconds)
[12:33:44] *** Joins: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec)
[12:37:42] *** Joins: Ergo^ (~ergo@91.238.59.144)
[12:42:26] <hop> seems to be a squid thing
[12:44:46] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[12:44:46] *** ChanServ sets mode: +v EvilDMP
[12:46:27] *** Parts: yanchai (~yanchai@222.127.97.162) ()
[12:52:55] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[12:59:35] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4.1)
[13:01:01] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[13:04:44] *** Joins: sernamar (~user@2001:720:101c:116:e2ce:a1e8:4718:e925)
[13:12:39] <skinkie> schinckel: I am able to reproduce the issue in psycopg2
[13:15:36] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4.1)
[13:15:45] *** Joins: brsc2909 (~Thunderbi@109.255.244.60)
[13:16:56] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[13:22:49] *** Joins: slav0nic (slav0nic@python.su)
[13:23:27] *** Quits: jmd (~user@de.cellform.com) (Remote host closed the connection)
[13:25:30] *** Joins: Thanatos (~Thanatos@105.112.182.163)
[13:26:04] *** Joins: ThanatosJ (~Thanatos@105.112.182.163)
[13:27:36] *** Quits: Thanatos (~Thanatos@105.112.182.163) (Read error: Connection reset by peer)
[13:30:21] <schinckel> skinkie: That’s excellent!
[13:34:38] <skinkie> schinckel: lets say... now i still need to do my view 'UTC' compliant.
[13:38:41] *** Quits: relight (~relight@user/relight) (Ping timeout: 250 seconds)
[13:39:36] *** Joins: relight (~relight@user/relight)
[13:42:55] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 240 seconds)
[13:44:57] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[13:54:27] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4.1)
[13:55:34] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[14:09:33] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4.1)
[14:11:25] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[14:11:47] *** Joins: merrinx (~merrinx@ti0028a400-3686.bb.online.no)
[14:22:46] *** Quits: merrinx (~merrinx@ti0028a400-3686.bb.online.no) (Quit: WeeChat 3.3)
[14:28:35] *** Joins: mattil (~mattil@helsinki.portalify.com)
[14:28:59] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[14:29:48] *** Joins: mattil (~mattil@helsinki.portalify.com)
[14:31:33] *** Quits: mattil (~mattil@helsinki.portalify.com) (Read error: Connection reset by peer)
[14:35:15] *** Quits: mxp (~mxp@185.16.205.131) (Ping timeout: 256 seconds)
[14:42:09] *** Joins: mxp (~mxp@185.16.205.131)
[14:44:59] *** Joins: mattil (~mattil@helsinki.portalify.com)
[14:46:03] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[14:50:30] *** Joins: audiobirb (~audio@user/audio)
[14:59:58] <pycode> hello, i have followed the DRF example about "general relations" https://www.django-rest-framework.org/api-guide/relations/#generic-relationships the example has TaggedIdem and Bookmark
[15:00:09] <pycode> i wonder if i can do a similar thing starting from TaggedItem
[15:00:25] <pycode> i mean ...an end point that show all the TaggedIdea and the "related" object
[15:00:41] <pycode> TaggedIdea -> TaggedItem
[15:00:56] <pycode> so starting from TaggedItem see the related object too
[15:01:25] <pycode> is that possible somehow? i think no because for every taggeditem ango should do a query to retrieve the object
[15:01:32] <pycode> but i wait your sentence :D
[15:26:35] *** Joins: jug (~jug@user/jug)
[15:29:09] *** Joins: mattil (~mattil@helsinki.portalify.com)
[15:36:21] *** Quits: sernamar (~user@2001:720:101c:116:e2ce:a1e8:4718:e925) (Remote host closed the connection)
[15:40:27] *** Joins: shodan45 (~quassel@107.161.22.155)
[15:40:35] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 240 seconds)
[15:43:48] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[15:44:34] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[15:46:43] <pycode> anyone?
[15:53:50] *** Quits: slavfox (~slavfox@93.158.232.111) (Ping timeout: 260 seconds)
[15:53:50] *** Quits: slav0nic (slav0nic@python.su) (Remote host closed the connection)
[15:54:10] *** Joins: slav0nic (slav0nic@python.su)
[15:55:15] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 240 seconds)
[16:14:22] *** Quits: pycode (~pycode3@2001:b07:5d28:551:eb94:250d:4306:dbac) (Ping timeout: 260 seconds)
[16:14:54] *** Quits: schinckel (uid38120@user/schinckel) (Quit: Connection closed for inactivity)
[16:17:52] *** Joins: Elzington (~Elzington@87.249.134.39)
[16:21:14] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:38:12] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[16:38:12] *** ChanServ sets mode: +v EvilDMP
[16:39:33] *** Quits: theprophet (~theprophe@212.58.102.155) (Quit: Client closed)
[16:42:11] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 256 seconds)
[17:05:37] *** Joins: az (az@user/azz)
[17:15:10] *** Joins: Thanattt (~Thanatos@105.112.16.248)
[17:17:05] *** Quits: vdamewood (~vdamewood@fedora/vdamewood) (Read error: Connection reset by peer)
[17:18:09] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[17:18:15] *** Quits: ThanatosJ (~Thanatos@105.112.182.163) (Ping timeout: 252 seconds)
[17:25:03] *** Joins: slavfox (~slavfox@93.158.232.111)
[17:26:57] *** Joins: Kalov (~Thunderbi@181.226.96.240)
[17:30:10] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[17:38:55] *** Joins: pycode (~pycode3@2001:b07:5d28:551:e527:3116:4249:2a88)
[17:47:26] *** Joins: merrinx (~merrinx@ti0028a400-3686.bb.online.no)
[17:48:51] *** Quits: merrinx (~merrinx@ti0028a400-3686.bb.online.no) (Client Quit)
[17:54:32] *** Joins: tamere (~tamere@user/loodoons)
[17:54:37] <tamere> Hello guys
[17:55:26] <tamere> Is it possible to override the 'pk' in a REST route? I have 2 id and I want to split them with '-'
[17:55:46] <tamere> Like /foo/1-2 -> '1-2'.split('-') and put 2 in pk
[17:57:50] <tamere> https://bpa.st/BRGQ
[18:00:52] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[18:03:46] *** Quits: ekathva (~ekathva@2001:999:50:7590:3293:e550:f3ea:111) (Remote host closed the connection)
[18:04:33] <tamere> Any idea?
[18:13:57] *** Joins: dkliban (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net)
[18:19:29] *** Joins: mattil (~mattil@helsinki.portalify.com)
[18:23:49] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 250 seconds)
[18:30:39] *** Joins: gitesh (uid423739@id-423739.ilkley.irccloud.com)
[18:30:50] <gitesh> Can a view have more than a model in django?
[18:31:13] *** Quits: tamere (~tamere@user/loodoons) (Quit: Client closed)
[18:34:27] <GinFuyou> gitesh, not sure what exactly you are asking, but models and views are separate concerns they can be mixed in any way
[18:34:35] <gitesh> I'm asking
[18:34:53] <gitesh> model = Post
[18:35:10] <gitesh> So in this case Post is a model assigned to model
[18:35:20] <gitesh> So it's only one model
[18:35:33] <GinFuyou> *to a class based view I presume
[18:35:37] <gitesh> Yes
[18:35:39] *** Joins: mattil (~mattil@dy6k-b7-g7hby2-8hs6dt-4.rev.dnainternet.fi)
[18:35:43] <gitesh> Sorry didn't say that
[18:37:09] <GinFuyou> So, all (built-in at least) CBVs have a single model attribute (if any) since it's not clear how it should handle more
[18:37:30] <gitesh> Okay
[18:37:39] <GinFuyou> which doesn't stop you from adding any number of other objects in it's methods
[18:38:01] *** Joins: minto (~mintograd@47.201.5.61)
[18:38:03] <gitesh> Okay
[18:38:10] <gitesh> Thanks
[18:39:24] <gitesh> I still new to django, didn't know there is a way from method
[18:40:57] *** Quits: minto_ (~mintograd@47.201.5.61) (Ping timeout: 250 seconds)
[18:42:05] <GinFuyou> If you are new it might be wiser to user simple function-based views, at least when CBV requires customizations to it's default processes
[18:42:15] *** Quits: mattil (~mattil@dy6k-b7-g7hby2-8hs6dt-4.rev.dnainternet.fi) (Remote host closed the connection)
[18:42:41] <gitesh> Okay
[18:43:27] <GinFuyou> I like CBVs a lot and use them 90% of time, but it requires some understanding of their relatively complicated internals to use efficiently
[18:44:17] *** Quits: Staunch (~Staunch@c-24-7-237-208.hsd1.mn.comcast.net) (Remote host closed the connection)
[18:44:58] *** Joins: Staunch (~Staunch@137.83.202.220)
[18:49:02] *** Joins: dor (~erg@188.146.51.110.nat.umts.dynamic.t-mobile.pl)
[18:52:37] <vancha112[m]> Hey there django pros ^^ I have three django models in my code, two of which are connect to each other with a manytomany field, "through" the third one. lets say like this:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/45badc21ef9306ddd12dbba0e1e4537cb44a5907)
[18:52:39] <vancha112[m]>  * Hey there django pros ^^ I have three django models in my code, two of which are connected to each other with a many-to-many field, "through" the third one. lets say like this:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/14375dc19a8080976ed69e0a0ff319856f7d239b)
[18:54:07] *** Joins: mattil (~mattil@dy6k-b7-g7hby2-8hs6dt-4.rev.dnainternet.fi)
[18:56:44] <vancha112[m]> I *may* have misunderstood the idea behind that "through" though..
[18:58:05] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[18:58:46] *** Quits: mattil (~mattil@dy6k-b7-g7hby2-8hs6dt-4.rev.dnainternet.fi) (Remote host closed the connection)
[18:59:45] <GinFuyou> how you want to access them? also we'd prefer code at dpaste.org as irc topic suggests
[19:00:04] <GinFuyou> BE model seems unfinished though
[19:07:24] *** Joins: djapo (~archangel@user/djapo)
[19:11:33] *** Quits: djapo (~archangel@user/djapo) (Remote host closed the connection)
[19:16:27] *** Joins: djapo (~archangel@user/djapo)
[19:21:00] <vancha112[m]> <GinFuyou> "BE model seems unfinished though" <- I have a bunch of B objects in a queryset. So preferrably i'd like to access them in a foreach loop.
[19:23:39] <vancha112[m]> The reason BE exists, was for me to add E objects to  my B object, but add another property to them: quantity. Lets say B is booking, and E erm.. Eppartment, and i can add eppartments to a booking through the BE model so that i can also store a quantity.
[19:24:03] *** Joins: mr66sus (~nurettin@176.240.192.27)
[19:26:30] *** Quits: luigibu (~luigi@93.176.153.88) (Quit: WeeChat 3.4.1)
[19:26:35] <vancha112[m]> https://dpaste.org/xsab
[19:27:02] <vancha112[m]> apologies, maybe that example makes more sense :) there's no other properties to the classes of note.
[19:27:06] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Read error: Connection reset by peer)
[19:28:43] <vancha112[m]> I have a list of `orders  = Order.objects.all()`, and i'd like to get the the itemCount (not itemlist) for every order in orders.
[19:29:02] <vancha112[m]>  * Hey there django pros ^^ I have three django models in my code, two of which are connected to each other with a many-to-many field, "through" the third one. lets say like this:... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/2c245da396824c01a485107e0ee811bab88c9d3a)
[19:29:03] <GinFuyou> vancha112[m], as far as I remember through model must have FK to both models
[19:29:28] <vancha112[m]> that's interesting :o
[19:29:29] <vancha112[m]> i don't have that
[19:30:05] <vancha112[m]> actually for some reason i managed to get the entire thing to work, i even have it set up correctly as an inline tabel in the admin interface
[19:31:32] <GinFuyou> > When you set up the intermediary model, you explicitly specify foreign keys to the models that are involved in the many-to-many relationship. This explicit declaration defines how the two models are related.
[19:36:03] *** Joins: Elzington_ (~Elzington@37.19.210.26)
[19:38:46] *** Quits: Elzington (~Elzington@87.249.134.39) (Ping timeout: 260 seconds)
[19:38:59] *** Quits: explore (uid233125@id-233125.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[19:44:18] *** Quits: vdamewood (~vdamewood@fedora/vdamewood) (Read error: Connection reset by peer)
[19:45:11] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[19:52:14] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 252 seconds)
[19:59:37] *** Joins: kostkon_ (~androirc@2.142.66.94.static.otenet.gr)
[20:08:10] *** Joins: jmd (~user@de.cellform.com)
[20:09:56] *** Quits: jmd (~user@de.cellform.com) (Remote host closed the connection)
[20:24:44] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[20:33:46] *** Quits: Elzington_ (~Elzington@37.19.210.26) (Quit: Leaving)
[20:34:43] *** Joins: Elzington (~Elzington@static-68-235-44-30.cust.tzulo.com)
[20:42:17] *** Quits: audiobirb (~audio@user/audio) (Ping timeout: 240 seconds)
[20:42:37] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[20:43:34] *** Joins: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com)
[20:43:53] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:47:01] *** Quits: idontnee_ (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se) (Ping timeout: 240 seconds)
[20:53:18] *** Quits: rje (~textual@65.141.156.170) (Read error: Connection reset by peer)
[20:55:15] *** Quits: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Ping timeout: 256 seconds)
[20:55:53] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[20:55:53] *** ChanServ sets mode: +v EvilDMP
[20:56:16] *** Joins: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec)
[20:59:00] *** Joins: rje (~textual@65.141.156.170)
[21:00:49] *** fikran_ is now known as fikran
[21:01:14] *** Joins: Atque (~Atque@user/atque)
[21:04:07] *** Quits: djapo (~archangel@user/djapo) (Remote host closed the connection)
[21:05:15] *** Joins: djapo (~archangel@user/djapo)
[21:13:33] *** Quits: Atque (~Atque@user/atque) (Remote host closed the connection)
[21:14:39] *** Joins: Atque (~Atque@user/atque)
[21:17:48] *** Quits: lucascastro (~lucascast@192-140-51-239.static.oncabo.net.br) (Ping timeout: 240 seconds)
[21:20:15] *** Quits: Atque (~Atque@user/atque) (Ping timeout: 240 seconds)
[21:23:49] *** Quits: jochum (~quassel@user/jochum) (Ping timeout: 256 seconds)
[21:23:49] *** Joins: Atque (~Atque@user/atque)
[21:24:16] *** Joins: jochum (~quassel@user/jochum)
[21:25:00] *** Quits: mr66sus (~nurettin@176.240.192.27) (Ping timeout: 268 seconds)
[21:25:13] *** Quits: Thanattt (~Thanatos@105.112.16.248) (Read error: Connection reset by peer)
[21:25:56] *** Joins: Thanatos (~Thanatos@105.112.16.248)
[21:27:11] *** Joins: andyewen (~andyewen@91.110.2.87)
[21:29:09] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:30:13] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[21:30:13] *** ChanServ sets mode: +v EvilDMP
[21:33:13] *** Quits: rje (~textual@65.141.156.170) (Ping timeout: 256 seconds)
[21:36:16] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[21:37:30] *** Joins: rje (~textual@50.35.241.164)
[21:49:19] *** Quits: pro_z_ (~pro_z@37.214.63.146) (Ping timeout: 256 seconds)
[21:49:57] *** Joins: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[21:53:17] *** Quits: rpkilby (~rpkilby@ec2-34-252-84-235.eu-west-1.compute.amazonaws.com) (Ping timeout: 256 seconds)
[21:54:04] <andyewen> Any ORM gurus around to give me a hand with a query I'm working on? I've created an example using the Book and Author example models from the docs: https://dpaste.org/90Re
[21:54:46] <andyewen> I feel like I've overcomplicated this but I couldn't seem to find a simpler way to do it.
[21:56:05] <andyewen> The query gets the count of authors and the count of authors that have a book grouped by country.
[21:57:49] *** Quits: kostkon_ (~androirc@2.142.66.94.static.otenet.gr) (Ping timeout: 256 seconds)
[22:05:24] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:07:15] *** Joins: Atque (~Atque@user/atque)
[22:16:53] *** Quits: pycode (~pycode3@2001:b07:5d28:551:e527:3116:4249:2a88) (Ping timeout: 252 seconds)
[22:17:05] *** Joins: alexandros_c (~amcollie@108.60.250.6)
[22:20:05] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[22:20:35] *** Quits: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[22:21:08] *** Joins: kostkon_ (~androirc@athedsl-393845.home.otenet.gr)
[22:21:23] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[22:22:21] *** Quits: vdamewood (~vdamewood@fedora/vdamewood) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:26:54] *** Quits: djapo (~archangel@user/djapo) (Read error: Connection reset by peer)
[22:27:15] *** Joins: Atque (~Atque@user/atque)
[22:27:27] *** Joins: djapo (~archangel@user/djapo)
[22:31:00] *** Quits: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[22:34:19] *** Joins: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de)
[22:36:04] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[22:36:05] *** ChanServ sets mode: +v EvilDMP
[22:36:45] *** Joins: lucascastro (~lucascast@192-140-51-239.static.oncabo.net.br)
[22:40:00] *** Joins: humanBird (~humanBird@2603-8001-7000-3642-dceb-bf7e-650a-7ef8.res6.spectrum.com)
[22:40:36] *** Quits: ST47 (~ST47@wikimedia/st47) (Ping timeout: 240 seconds)
[22:40:53] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 256 seconds)
[22:54:01] <nbjoerg> andyewen: are you asking about the number of books each author has per country?
[22:54:47] <andyewen> No. I need to get the number of authors that have at least one book associated with them by country.
[22:55:49] <nbjoerg> you mean for each country, figure how what authors have at least one book?
[22:56:02] <nbjoerg> how many
[22:56:12] <andyewen> Yeah. Something like this:
[22:56:13] <andyewen> | Country code | Count | Count has book |
[22:56:13] <andyewen> |--------------|-------|----------------|
[22:56:13] <andyewen> | GB           |    12 |              4 |
[22:56:13] <andyewen> | US           |    50 |             30 |
[22:58:16] *** Quits: relight (~relight@user/relight) (Ping timeout: 245 seconds)
[22:58:34] *** Joins: relight (~relight@user/relight)
[22:58:40] *** Joins: djapo (~archangel@user/djapo)
[22:59:41] *** Joins: ST47 (~ST47@wikimedia/st47)
[23:02:00] <nbjoerg> Author.objects.filter(book__isnull = False).annotate(Count('id')).group_by("country") or so?
[23:08:50] <andyewen> I tried a similar approach with `book_isnull` and it caused me to get inflated counts if the author had more than one book.
[23:09:54] <andyewen> Also the query you suggested only counts authors that have a book. Ideally it would be able to count how many have a book and how many there are total in a single query.
[23:12:43] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[23:14:32] *** Joins: Atque (~Atque@user/atque)
[23:15:53] *** Quits: lucascastro (~lucascast@192-140-51-239.static.oncabo.net.br) (Ping timeout: 250 seconds)
[23:16:14] <nbjoerg> the group_by is important
[23:16:35] <nbjoerg> that said, this is the point where I would personally just go to raw SQL...
[23:18:24] <andyewen> I don't believe you can use `group_by` exists as a queryset method. I think you need to do something like `Author.objects.filter(book__isnull = False).values('country').annotate(Count('id'))`
[23:18:30] *** Joins: Elzington_ (~Elzington@87.249.134.24)
[23:18:51] <andyewen> *I don't believe `group_by` exists
[23:20:02] <nbjoerg> sure, see "or so" :)
[23:20:46] *** Quits: Elzington (~Elzington@static-68-235-44-30.cust.tzulo.com) (Ping timeout: 245 seconds)
[23:23:34] <andyewen> Thanks for your input :)
[23:30:18] *** Joins: mr66sus (~nurettin@176.240.192.27)
[23:32:09] *** Parts: last1 (~last1@109.100.153.87) ()
[23:34:36] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[23:39:04] *** Parts: gitesh (uid423739@id-423739.ilkley.irccloud.com) ()
[23:40:10] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:45:28] *** Quits: slav0nic (slav0nic@python.su) (Remote host closed the connection)
[23:45:47] *** Joins: slav0nic (slav0nic@python.su)
[23:46:33] *** Joins: Atque (~Atque@user/atque)
[23:51:03] *** Quits: Grauwolf (~grauwolf@user/grauwolf) (Quit: WeeChat 3.4)
[23:54:48] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 252 seconds)
