[00:01:00] *** Quits: genom (~g@37.214.74.93) (Remote host closed the connection)
[00:01:42] *** Joins: Mr-Snick_ (mr-snick@gateway/vpn/protonvpn/mr-snick)
[00:07:33] <__adrian> "acts like" in what way? just the same methods/usage?
[00:07:46] *** Quits: jeffrey (~jeffrey@80-115-60-193.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[00:33:35] *** Joins: dibber (~dibber@c-73-14-187-235.hsd1.co.comcast.net)
[00:45:31] *** Joins: WishBoy (~WishBoy@user/wishboy)
[01:01:32] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Ping timeout: 272 seconds)
[01:14:56] *** Quits: entuland (~entuland@user/entuland) (Quit: Leaving)
[01:19:50] *** kevr is now known as kevr[m]
[01:20:17] *** kevr[m] is now known as kevr
[01:39:00] *** Joins: glumanda (~glumanda@194-208-201-025.tele.net)
[01:53:12] *** Joins: entuland (~entuland@user/entuland)
[01:59:33] *** Joins: ethoxy (~root@cx21.havox.ru)
[02:05:25] *** Joins: sheepduck (~sheepduck@user/sheepduck)
[02:11:46] *** Quits: sheepduck (~sheepduck@user/sheepduck) (Remote host closed the connection)
[02:28:32] *** Quits: ethoxy (~root@cx21.havox.ru) (Remote host closed the connection)
[02:28:54] *** Quits: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:7969:171a:ce93:2df8) (Ping timeout: 252 seconds)
[02:43:12] *** Quits: glumanda (~glumanda@194-208-201-025.tele.net) (Quit: WeeChat 3.0.1)
[02:45:51] *** Quits: epolanski (uid312403@id-312403.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[02:54:36] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:56:38] *** Joins: Northwoods (~Northwood@223.130.30.69)
[02:56:39] *** Joins: ethoxy (~caretaker@cx21.havox.ru)
[02:58:07] *** Quits: stenno (~stenno@user/stenno) (Quit: WeeChat 3.1)
[03:00:31] *** Joins: sumthing1980 (~sumthing1@94.54.64.154)
[03:01:10] <sumthing1980> hello I have some problems with 2 scripts that use simple sockets, can anyone assist
[03:02:41] <Northwoods> Blondie101010, ^
[03:03:15] <Blondie101010> I talked to him yesterday and he refused to try or answer anything
[03:03:48] <sumthing1980> No not you pls Blondie101010
[03:04:27] <Blondie101010> did you do any corrections to your code?
[03:04:53] <sumthing1980> Im not here to improve cosmetics of my code
[03:05:15] <sumthing1980> the problem is not cosmetic
[03:06:12] <Blondie101010> definitely not
[03:06:26] <Blondie101010> your code is not ugly, it's just really bad
[03:06:41] <Blondie101010> ok, but did you remove the @ and enable error reporting at least?
[03:07:04] <da_wunder> so share your code and explain what is failing with it
[03:07:04] <sumthing1980> pls ignore my comments
[03:07:24] <sumthing1980> https://bugs.php.net/bug.php?id=81304
[03:07:37] <Blondie101010> Status:	Not a bug	
[03:07:41] <sumthing1980> so I have a simple socket server that sends 12 mb when requested
[03:08:11] <sumthing1980> the receiver side gets transmitted different amounts each time it connects
[03:08:15] <Blondie101010> but they gave you a good suggestion...  did you try it?
[03:09:02] <sumthing1980> lets not talk ok?
[03:09:31] <Blondie101010> I am politely trying to help you while you persist in acting like a jerk
[03:09:38] <sumthing1980> no it is the opposite
[03:09:43] <sumthing1980> and no thanks
[03:09:53] <Blondie101010> fine, but I won't be far
[03:09:56] <da_wunder> sumthing1980: if you don't want messages from someone you know that you can ignore those? - just use `/ignore somenick` and that's all
[03:10:08] <sumthing1980> ok
[03:11:21] <sumthing1980> the socket server claims it sends 12 mb, the receiver gets like 8-12 mb of data, sometimes, rarely it gets the complete data transfer
[03:12:05] <da_wunder> so maybe some server setting issue?
[03:12:22] <sumthing1980> I have tried on 2 computers now both get irregular amounts
[03:12:35] <sumthing1980> both are linux mint though and same php version
[03:13:25] <__adrian> sumthing1980: to be clear, this is a public channel and when you ask a question you cannot control who is allowed to answer or what their answers can be
[03:13:41] <__adrian> and if you want to use /ignore that's fine, though i find it counterproductive
[03:14:03] <sumthing1980> The code is simple to inspect, there is no attempt at hacking or anything
[03:14:42] <sumthing1980> Id like for someone to run the code and check themselves
[03:14:52] <__adrian> that's generally not a realistic request
[03:15:08] <Blondie101010> and, I have absolutely no doubt that it will fail
[03:15:23] <__adrian> you need to be responsible for your own troubleshooting. if you want someone to do the work for you you should probably consider hiring someone
[03:15:57] <sumthing1980> the behaviour is not what is supposed to happen
[03:16:03] <da_wunder> unless someone provide eg. simple repository that users can clone and just start it as told in README.md to reproduce that issue
[03:16:34] <__adrian> da_wunder: even then, not so much. yes, much more likely someone would, but still not a fair expectation that anyone _will_.
[03:16:44] <sumthing1980> ok then
[03:16:55] <sumthing1980> Im looking for someone to run my simple socket code
[03:17:07] <Blondie101010> why?  we know it will fail
[03:17:10] <da_wunder> yeah, I didn't mean that would be expected even after that - but it would be most likely that someone could do that
[03:17:40] <__adrian> sumthing1980: the idea on a help channel is that you can describe a problem and find possible ways to approach solving it. e.g., in your case, suggestions for things to try to troubleshoot next.
[03:17:42] <sumthing1980> you run it with php 1listen.php and in another terminal you run 2receive.php
[03:17:53] <sumthing1980> thats it
[03:19:48] <__adrian> i feel like you're missing the point. how simple it is to run doesn't correlate to whether you should expect people to run it. especially when you decide to not cooperate when people try to offer suggestions for troubleshooting.
[03:20:41] <Sammitch> just opening a raw socket connection and naively blasting data across with no actual protocol defined is going to wind up like this
[03:20:52] <sumthing1980> Sammitch: why is that
[03:20:55] <Blondie101010> exactly
[03:21:08] <sumthing1980> doesnt tcp have error correction and such
[03:21:17] <Blondie101010> :(
[03:21:24] <Blondie101010> tcp doesn't fix bad code
[03:21:36] <Sammitch> because there might be a slight timing mismatch where the sender hasn't sent a new packet, and the receiver reads from the socket, gets nothing, and goes "must be done"
[03:22:10] <sumthing1980> I know udp is unreliable but tcp is not like that afaik
[03:22:22] <Blondie101010> well now you know that is wrong
[03:22:36] <Blondie101010> tcp does retransmission but that is not where your problem is
[03:22:54] <Sammitch> tcp is reliable, but you're not using it in a way that is reliable
[03:23:28] <Sammitch> just because you do socket_read() and have a zero byte buffer doesn't mean that there isn't anything else on the way
[03:23:40] * Blondie101010 nods
[03:23:57] <Sammitch> a GOOD naieve implementation would assuming that the connection being closed to mean that the transmission was complete
[03:24:33] <sumthing1980> Im checking for the wrong thing?
[03:24:36] <Sammitch> but without a protocol indicating how long the data is, even if the socket closes you may or may not have the whole thing
[03:25:00] <sumthing1980> I do check if it is complete but that is the last step
[03:25:29] <sumthing1980> so the checking if the buffer is empty, in non blocking tcp that should be not an issue
[03:25:41] <sumthing1980> sorry I meant in blocking
[03:26:25] <Sammitch> there is ZERO guarantee that when you do socket_read() that there will be anything there to read
[03:26:28] <Blondie101010> no
[03:26:36] <Blondie101010> that is not what blocking does
[03:26:39] *** Quits: Teraii (~teraii@185.219.206.44) (Read error: Connection reset by peer)
[03:26:41] <Sammitch> even if you're 6 bytes into a 2GB transmission
[03:26:49] <Blondie101010> it doesn't guarantee that your whole file will arrive in one shot
[03:26:51] *** Joins: Teraii (~teraii@juraii-s1-1.teraii.net)
[03:27:08] <Sammitch> even if both the sender and receiver are on the same machine
[03:27:51] <Blondie101010> blocking guarantees you one byte
[03:28:06] <Blondie101010> typically it will give you a block but that is not guaranteed
[03:28:49] *** Quits: ferdna (~ferdna@user/ferdna) (Remote host closed the connection)
[03:30:08] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[03:34:43] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[03:35:12] <Sammitch> protocols exist so that both sides of the connection can communicate what they are doing, when they are doing it, and if they did it correctly.
[03:36:10] <Sammitch> TCP only ensures that packets are moved, it doesn't give a flippin flap about their contents or what higher-level protocol may or may not be contained therein
[03:41:56] <sumthing1980> the connection is reset by peer after different lengths of transfer, it is out of my control
[03:42:42] *** Quits: entuland (~entuland@user/entuland) (Ping timeout: 240 seconds)
[03:43:53] <Blondie101010> which side tells you that?
[03:44:02] <sumthing1980> the client
[03:48:40] <Blondie101010> what is the sender's output?
[03:48:57] <Blondie101010> I mean the server
[03:49:09] <sumthing1980> 12 mb of serialized string of a array
[03:49:39] <Blondie101010> I mean it's stdout+stderr
[03:50:03] *** Quits: genomc (uid245282@id-245282.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[03:51:53] <sumthing1980> it is what I tell the program to output
[03:52:47] <Blondie101010> I don't see that in your code
[03:53:19] <Blondie101010> but you're missing some kind of sending loop to get this single connection (at a time) code
[03:53:49] <Blondie101010> to confirm, $l2 == $l1?
[03:55:04] <sumthing1980> $l1 is the data l2 is what is sent
[03:55:29] <Blondie101010> no, but are lengths, which is why the variable starts with 'l'
[03:55:40] <Blondie101010> what is the output?
[03:55:54] <sumthing1980> s_l: wrote 11794899 / 11794899 bytes
[03:56:07] <Blondie101010> hmmm ok
[04:00:51] <Blondie101010> not getting any RST....  the client just closes
[04:00:54] *** Joins: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick)
[04:01:15] <sumthing1980> are you trying it
[04:01:59] <Blondie101010> yes
[04:02:05] <sumthing1980> well thank you
[04:02:08] <Blondie101010> and it does exactly what Sammitch told you at the start
[04:02:44] <Blondie101010> hold on
[04:03:21] <sumthing1980> with MSG_WAITALL in blocking it says Block until at least length are received. However, if a signal is caught or the remote host disconnects, the function may return less data.
[04:03:41] <Blondie101010> php client.php # gives:
[04:03:41] <Blondie101010> bool(false)
[04:04:23] *** Quits: Mr-Snick_ (mr-snick@gateway/vpn/protonvpn/mr-snick) (Ping timeout: 265 seconds)
[04:05:07] <Blondie101010> oh now I see the error by removing what I'd ask you to remove, the @
[04:09:20] <__adrian> !+@
[04:09:21] <php-bot> [@] The PHP error control operator that suppresses errors (@foo()), see: http://php.net/operators.errorcontrol - Don't use it. See http://derickrethans.nl/five-reasons-why-the-shutop-operator-should-be-avoided.html for some reasons why not
[04:10:42] *** Joins: sumthing1980_ (~sumthing1@94.54.64.154)
[04:11:27] *** Quits: sumthing1980 (~sumthing1@94.54.64.154) (Read error: Connection reset by peer)
[04:23:16] <sumthing1980_> Blondie101010: whats the error
[04:24:05] <Blondie101010> no flow control
[04:24:24] <Blondie101010> the code pretends to send at 4Gbps on my computer
[04:24:39] <Blondie101010> make that 13Gbps, sorry
[04:24:40] <sumthing1980_> it is on the local computer it will be high
[04:24:55] <Blondie101010> it won't go that fast once it actually works
[04:25:30] <Blondie101010> you're causing a buffer overrun
[04:25:39] <Blondie101010> you send too fast
[04:25:51] <sumthing1980_> should I send in a loop
[04:25:54] <sumthing1980_> how did you learn that
[04:26:04] <Blondie101010> decades of experience
[04:26:26] <Blondie101010> you should follow a protocol
[04:26:42] <Blondie101010> don't just dump data
[04:27:02] <sumthing1980_> like what
[04:27:32] <sumthing1980_> thats the tcp s job
[04:27:39] <Blondie101010> no
[04:27:41] <Blondie101010> hold on
[04:28:38] <Blondie101010> if I send you a P (piece of information) and then expect you to get it instantly, then the receiving end needs to have a buffer bigger than the transfer size
[04:28:50] <Blondie101010> otherwise the receiving part can not handle it
[04:29:34] <sumthing1980_> I just storing it in a php variable, it can handle hundreds of mb
[04:29:43] <Blondie101010> that's not the point
[04:30:10] <Blondie101010> the TCP buffer won't allow that HUGE buffer size unless you do a major bad hack on your kernel
[04:30:37] <sumthing1980_> so I should send it in chunks in a loop?
[04:30:58] <Blondie101010> in chunks, yes, and following some protocol, not blindly
[04:31:08] <sumthing1980_> what protocol
[04:31:19] <Blondie101010> your own or an existing one
[04:32:07] <Blondie101010> an application level protocol, such as HTTP is required
[04:33:20] <Blondie101010> a simpler (less resilient) approach would at least know the transfer lenght, block size, and normally some kind of ack
[04:33:53] <Blondie101010> like I said earlier, this code will not allow simultaneous connections even if you fix what you already know
[04:34:03] *** Joins: jeffrey (~jeffrey@80-115-60-193.cable.dynamic.v4.ziggo.nl)
[04:34:27] <sumthing1980_> Thats not the aim at the moment, I had the same problem there
[04:34:57] <Blondie101010> !+socket_select
[04:34:57] <php-bot> int socket_select(array &read_fds, array &write_fds, &array except_fds, int tv_sec[, int tv_usec])  - Runs the select() system call on the sets mentioned with a timeout specified by tv_sec and tv_usec - http://php.net/socket_select
[04:35:02] <Blondie101010> learn to use that ^^
[04:35:16] <Sammitch> or instead of reinventing the wheel you could use one of many pre-existing protocols for which many pre-existing libraries exist
[04:35:33] <Blondie101010> then it will be easy to send a message to inform of the length, and a reply to say "hey I got that big chunk"
[04:36:01] <__adrian> we often warn against premature optimization - that is, if you don't have a problem, don't try to solve it - but it's also true that if you DO know about a problem, you should solve it
[04:37:07] <sumthing1980_> It works
[04:37:19] <Blondie101010> sumthing1980_:  while not optimal, block size is a safe limit
[04:37:26] <sumthing1980_> I do socket write in a loop with chunks
[04:37:30] <sumthing1980_> and it works
[04:37:32] <sumthing1980_> thanks Blondie101010
[04:37:37] <__adrian> eh
[04:37:44] <Blondie101010> no problem, but like I said, it's very partially solved
[04:38:11] <Blondie101010> you need to establish or follow a protocol to make it usable
[04:38:48] <sumthing1980_> and thanks everyone else as well
[04:39:07] <sumthing1980_> for the help
[04:39:55] <sumthing1980_> how did you think it was buffer overrun
[04:40:05] <Blondie101010> it went way too fast
[04:40:21] *** Quits: dibber (~dibber@c-73-14-187-235.hsd1.co.comcast.net) (Ping timeout: 252 seconds)
[04:40:24] <Sammitch> non-sequitur: hey devs. if you check in code at the end of the day that triggers a failed deploy, and then just LEAVE... well an infra guy like me is going to come to your house and set you on fire.
[04:40:48] <__adrian> lesson: make sure to break the maps code too.
[04:41:01] <sumthing1980_> maps?
[04:41:27] <Blondie101010> sumthing1980_:  I used traces (my common approach)
[04:41:43] <Blondie101010> a few `echo` here and there and the problem became obvious
[04:41:58] <Blondie101010> tcpdump wasn't able to go as fast
[04:42:00] <Blondie101010> :)
[04:42:03] <sumthing1980_> ok
[04:42:55] *** Joins: dibber (~dibber@c-73-14-187-235.hsd1.co.comcast.net)
[04:49:21] <Blondie101010> Sammitch:  I'm not pyro, fortunately for them
[04:52:38] <Blondie101010> at my job at least they get almost everything through QA, and deploy mid-day except Fridays, so deployments in themselves are not causing us issues directly
[04:52:51] <Blondie101010> but that doesn't mean they don't use a load of junk :)
[04:57:59] *** Quits: sumthing1980_ (~sumthing1@94.54.64.154) (Quit: Leaving)
[04:59:13] *** Joins: glumanda (~glumanda@194-208-201-025.tele.net)
[05:01:22] *** Quits: glumanda (~glumanda@194-208-201-025.tele.net) (Client Quit)
[05:03:05] *** Joins: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:51d3:394c:4618:cf07)
[05:13:23] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Read error: Connection reset by peer)
[05:15:10] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[05:26:50] <Sammitch> all the unit/integration tests passed, but there's a bad DB migration, or bad data in the env's DB. either way that's out of my bailiwick.
[05:27:09] *** Quits: pmercado (~pmercado@190.22.176.14) (Quit: Konversation terminated!)
[05:27:38] <Sammitch> the real kicker is that I'm trying to refresh the DB, but I can't do that properly if the env can't redeploy itself cleanly afterwards
[05:29:06] *** Quits: dimbag (~dimbag@dynamic-193-228-165-8.ppp.kmv.ru) (Ping timeout: 240 seconds)
[05:30:26] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:34:16] *** Joins: vlm (~vlm@user/vlm)
[05:36:13] <Blondie101010> that other part also needs to be standardized between preprod and prod for that reason
[05:52:14] *** Quits: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:51d3:394c:4618:cf07) (Quit: Leaving)
[05:59:50] *** Quits: cspray (~cspray@75.76.18.60) (Ping timeout: 256 seconds)
[06:00:29] *** Joins: mishehu (~mishehu@tunnel44858-pt.tunnel.tserv8.dal1.ipv6.he.net)
[06:06:08] *** Quits: fstd (~fstd@xdsl-85-197-59-162.nc.de) (Ping timeout: 258 seconds)
[06:12:32] <celphi> can someone explain to me why curl -I mysite.com returns 404 page, but if i do curl mysite.com i get the html of that page
[06:16:12] <__adrian> the site probably doesn't want to be scraped
[06:16:45] <__adrian> er sorry, misread
[06:19:08] <Blondie101010> celphi:  fist I have to mention that this question is not about PHP...  it is either with curl or your webserver....  that said, I also find that a bit strange, so much that I suspect you're not giving us accurate details
[06:19:27] <Blondie101010> perhaps try it on a different system to validate
[06:20:49] <celphi> the website is on a aws server. I'm literally typing `curl -I https://website.com/` and i get `HTTP/1.1 404 Not Found` but if i type `curl https://website.com/` i get the page php is echoing
[06:21:07] <celphi> which room should i goto then?
[06:21:51] <Blondie101010> some troubleshooting could be done in PHP in this case, even if that's not what causes it
[06:22:14] <Blondie101010> get your PHP script to output traces to a file
[06:22:33] <celphi> debug_print_backtrace() ?
[06:22:48] <Blondie101010> no about the client conneciton
[06:23:11] <celphi> sorry- i dont know what that means
[06:23:39] <Blondie101010> now I'm wondering if it would be possible for you to have code that returns a 404 without realizing it
[06:24:10] <Blondie101010> so do a really basic test script, test.php
[06:24:24] <Blondie101010> does it do the same thing?
[06:24:47] <celphi> https://bpa.st/MR3Q
[06:26:26] <celphi> the site is not public
[06:26:33] <celphi> only has my ip whitelisted
[06:27:36] <Blondie101010> make a test script with only: <?="hello world";
[06:27:46] <Blondie101010> does it have the same behaviour?
[06:27:52] <celphi> inside of test.index?
[06:28:00] <celphi> *index.php
[06:28:39] <Blondie101010> test.php
[06:30:05] <celphi> so same thing happens with test.php -- but wheni tried it with index.php it works
[06:30:29] <celphi> im using FallbackResource to index.php
[06:30:47] <Blondie101010> yeah but that should not affect an existing file, unless you bypassed logic
[06:31:26] <celphi> im just using routes inside of index.php
[06:31:46] <celphi>  but no idea why  im getting 404 from using `-I`
[06:31:59] <Blondie101010> do you mean that `curl -I https://twalow.com/index.php` work but not `curl -I https://twalow.com/`?
[06:32:38] <celphi> nope i mean when i put echo 'hi' inside of index.php it works -- im still using `curl -I https://twalow.com/`
[06:32:59] <Blondie101010> you mean as opposed to your existing code?
[06:33:41] <celphi> if i try to do https://twalow.com/contact i get the html but if i use `-i https://twalow.com/contact` i get 404
[06:33:56] <celphi> it's like it's not forwarding
[06:34:05] <Blondie101010> forwarding??
[06:34:07] <Blondie101010> duh
[06:34:15] <Blondie101010> man curl
[06:34:24] <Blondie101010> and note that '-I' is different from '-i'
[06:34:37] <Blondie101010> you're only fetching headers
[06:34:57] <celphi> but shouldnt i still get 200 headers?
[06:36:36] <Blondie101010> show me: `wget https://twalow.com/contact` and `wget -S https://twalow.com/contact`
[06:38:11] <celphi> the file is the contact page
[06:38:23] <Blondie101010> I want to see
[06:38:32] <Blondie101010> "show me"
[06:38:47] <Blondie101010> not the contact page, the output
[06:39:13] <celphi> your first exmple downloads a file
[06:39:18] <celphi> the 2nd one does this https://bpa.st/RXVA
[06:39:57] <celphi> https://bpa.st/DB5Q
[06:40:00] <celphi> ^ first one
[06:40:29] <Blondie101010> ok so no redirect
[06:40:51] <celphi> yeah the php handles all the routes
[06:41:50] <Blondie101010> the first thing I tried to get you to do is to bypass your code
[06:42:04] <Blondie101010> start your index.php with: <?php die("here");
[06:43:16] <Blondie101010> celphi:  does that show the same problem?
[06:43:27] <celphi> checking
[06:44:22] <celphi> nope it works
[06:44:25] <celphi> 200 headers
[06:44:33] <Blondie101010> darn
[06:44:45] <Blondie101010> then I stand corrected, the bug is in your PHP code
[06:46:21] <Blondie101010> put traces around the part that returns a 404 (send them to a file)
[06:47:16] <__adrian> note -I sends a HEAD request
[06:47:25] <__adrian> if your routing doesn't account for that...
[06:47:45] <Blondie101010> file_put_contents("/tmp/traces", "this is a trace of variable var: $var\n", FILE_APPEND);
[06:48:42] <celphi> this is my code https://github.com/twalow/php_project
[06:49:32] <Blondie101010> I won't read that code unless you point me to a very specific piece of code
[06:49:53] <celphi> k - it's small site
[06:50:14] <Blondie101010> where do you check the verb/method?
[06:53:13] <celphi> https://github.com/twalow/php_project/blob/master/src/core/Request.php
[06:54:08] <__adrian> so  https://github.com/twalow/php_project/blob/3389adc71dd7e7c49ba845b363fbe999c0a85d59/src/core/Router.php#L46-L51
[06:54:19] <__adrian> do you define any HEAD routes?
[06:54:49] <Blondie101010> so the only place you return a 404
[06:54:57] <Blondie101010> :/
[06:57:12] *** Joins: Rockwood (~Rocky@user/rocky)
[06:59:06] <celphi> ah i see what you mean
[06:59:43] <Rockwood> o/
[07:00:29] *** Joins: yuckey2d (~yuckey2d@209.181.233.16)
[07:01:39] <celphi> thank you Blondie101010 for taking time to troubleshoot it
[07:01:49] <Blondie101010> np
[07:02:09] <Blondie101010> I obviously didn't expect that
[07:06:06] *** Quits: yuckey2d (~yuckey2d@209.181.233.16) (Quit: The Lounge - https://thelounge.chat)
[07:07:00] *** Joins: yuckey2d (~yuckey2d@46.246.3.212)
[07:26:18] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[07:36:12] *** Quits: DaNeenjah (~jake@adsl-74-230-9-66.hsv.bellsouth.net) (Quit: WeeChat 3.2)
[07:51:30] *** Joins: guidoc (~guido@host-79-13-249-37.retail.telecomitalia.it)
[07:58:18] *** Quits: dibber (~dibber@c-73-14-187-235.hsd1.co.comcast.net) (Ping timeout: 240 seconds)
[08:07:49] <celphi> does it even make sense to add a "head" route for every endpoint?
[08:09:22] *** Joins: Alex123 (~Adium@cpe-172-249-100-115.socal.res.rr.com)
[08:10:56] <Alex123> Hey guys, I have a problem. Lets say I have arbitrary date  03/03/2023 , I want to get a date of the Tuesday which is the same week as given date
[08:11:32] <celphi> Alex123: only a date in future?
[08:11:45] <celphi> or can go back in time?
[08:12:06] <Alex123> it can go both direction
[08:12:41] <Alex123> so this case it will return 02/28/2023
[08:14:05] <celphi> what format? same format?
[08:14:20] <Alex123> mm-dd-yyyy
[08:14:37] <Alex123> mm/dd/yyyy
[08:15:02] <Blondie101010> hmmm, one way would be to, using your favorite date tool/class/library get the weekday, and from there -2 to get the difference in number of days to add
[08:15:36] <__adrian> DateTime::createFromFormat("m/d/Y", $date)->modify("this week tuesday");
[08:15:49] <__adrian> i'd 3v4l but 3v4l seems to be timing out
[08:15:52] <celphi> i got one
[08:15:53] <Blondie101010> yes, but not something I recommend
[08:16:24] <Alex123> cool __adrian let me try thanks
[08:17:28] <Blondie101010> using human language makes it more error prone
[08:17:43] <__adrian> celphi: many frameworks will automatically route HEAD requests for defined GET routes
[08:18:32] <__adrian> blondie: true, but this is date language :) it's dense but it's deterministic
[08:18:59] <Blondie101010> hmmm, does it rely on locale?
[08:19:31] <Alex123> no all the same time zone
[08:19:41] <Blondie101010> that is not relevant
[08:20:25] <Blondie101010> if DateTime uses the locale, then it will interpret the string differently in different environments
[08:20:40] <celphi> `max((new DateTime('03/03/2023'))->modify('last tuesday')->format('m-d-Y'),(new DateTime('03/03/2023'))->modify('next tuesday')->format('m-d-Y'))`
[08:20:50] <celphi> actualy use `min`
[08:21:28] <Blondie101010> hmmm, adrian's solution did that approach better
[08:22:06] <celphi> oh i didnt even know there was a this week tuesday
[08:22:19] <celphi> but wait
[08:22:29] <celphi> this week tuesday isnt what he asked
[08:23:27] <__adrian> "the Tuesday which is the same week"  ?
[08:23:41] <celphi> then why would he say forwards or backwards?
[08:23:45] <Blondie101010> anyways, my solution is the best
[08:23:46] <__adrian> if they want something else, ok, but that's how i read it
[08:24:01] <Blondie101010> damn 3v4l.org
[08:24:11] <__adrian> yeah dunno what's going on there
[08:24:20] <Blondie101010> you understood it like me
[08:24:56] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[08:25:02] *** Joins: genomc (uid245282@id-245282.stonehaven.irccloud.com)
[08:25:04] <__adrian> blondie: re: locale: ahh... i.e., start of week?
[08:27:02] <__adrian> "celphi> then why would he say forwards or backwards?" because "tuesday this week" might already be past, or in the future
[08:28:20] <__adrian> "this week" resets to start of week. then "tuesday" advances to tuesday.
[08:28:43] <celphi> makes sense
[08:29:02] <__adrian> now, "start of week" might mean sunday or monday (or possibly something else...? not sure) depending on your locale
[08:29:13] <__adrian> which might give you unexpected results
[08:33:00] <Blondie101010> the way I would do it is: date("Y-m-d", $ts + (2 - date('w', $ts)) * 24 * 60 * 60);
[08:33:41] <Blondie101010> note: not fully tested
[08:38:46] <Blondie101010> oh so our result is different
[08:39:00] <Blondie101010> unless I made a mistake, mine does what they want
[08:39:13] <Blondie101010> the same logic can be used with DateTime
[08:46:28] <__adrian> well, same date
[08:46:43] <__adrian> my version resets to midnight
[08:49:07] <Rockwood> what is going to change now?
[08:49:27] <Rockwood> __adrian, hi how are you sir?
[08:51:18] <__adrian> hi
[08:58:00] *** Joins: dlundgren_ (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net)
[08:59:57] *** Quits: dlundgren (~dlundgren@utm1.ctic-inc.com) (Ping timeout: 252 seconds)
[08:59:57] *** dlundgren_ is now known as dlundgren
[09:08:45] *** Quits: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick) (Remote host closed the connection)
[09:09:29] *** Joins: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick)
[09:17:25] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[09:23:23] *** Quits: Northwoods (~Northwood@223.130.30.69) (Ping timeout: 265 seconds)
[09:30:00] *** Quits: robotkittenscat (~robotkitt@pool-108-18-153-114.washdc.fios.verizon.net) (Quit: Bridge terminating on SIGTERM)
[09:30:34] *** Quits: Warped (~Warped@user/warped) (Quit: We Gone! Bye Bye)
[09:30:49] *** Joins: robotkittenscat (~robotkitt@pool-108-18-153-114.washdc.fios.verizon.net)
[09:38:34] *** Quits: wovixo (~wovixo@128.104.205.49) (Ping timeout: 256 seconds)
[09:40:01] *** Quits: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net) (Quit: dlundgren)
[09:51:54] *** Quits: jeffrey (~jeffrey@80-115-60-193.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[10:34:22] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[11:13:32] *** Quits: guidoc (~guido@host-79-13-249-37.retail.telecomitalia.it) (Quit: WeeChat 3.2)
[11:30:53] *** Joins: MCMiic (~mcmic@63.120.199.77.rev.sfr.net)
[11:32:05] *** Joins: DevAntoine (~DevAntoin@78.196.234.32)
[11:35:44] *** Joins: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:59:44] *** Joins: epolanski (uid312403@id-312403.brockwell.irccloud.com)
[12:04:35] *** Quits: celphi (sid97751@user/celphi) (Quit: Connection closed for inactivity)
[12:32:12] *** Joins: Northwoods (~Northwood@157.39.108.232)
[12:32:23] *** Joins: hamilton5 (iamfive@user/ham5)
[12:33:41] *** Quits: ham5 (iamfive@user/ham5) (Ping timeout: 258 seconds)
[12:33:41] *** hamilton5 is now known as ham5
[12:53:08] *** Quits: Alex123 (~Adium@cpe-172-249-100-115.socal.res.rr.com) (Quit: Leaving.)
[13:10:24] *** Joins: LucaTM (~LucaTM@user/lucatm)
[13:10:31] *** Joins: entuland (~entuland@user/entuland)
[13:11:27] *** Joins: delboy1978uk (~delboy197@d51a46db4.access.telenet.be)
[13:12:54] <delboy1978uk> morning o/
[13:15:06] *** Quits: delboy1978uk (~delboy197@d51a46db4.access.telenet.be) (Client Quit)
[13:16:15] *** Joins: delboy1978uk (~delboy197@d51a46db4.access.telenet.be)
[13:17:05] *** Joins: jetchisel (jetchisel@user/jetchisel)
[13:21:09] *** Quits: Northwoods (~Northwood@157.39.108.232) (Read error: No route to host)
[13:28:08] *** Joins: aruns (~aruns@94.12.74.9)
[13:28:13] <aruns> https://www.php.net/manual/en/function.constant.php
[13:28:18] <aruns> Returns the value of the constant, or null if the constant is not defined.
[13:28:21] <aruns> An E_WARNING level error is generated if the constant is not defined.
[13:28:23] <aruns> ???
[13:31:33] <AllenJB> What's the query? If you're unclear on the behavior you can easily try it out on the commandline (`php -a`) or a repl or a sandbox like 3v4l.org
[13:34:18] *** Joins: Alex123 (~Adium@cpe-172-249-100-115.socal.res.rr.com)
[13:37:35] <Naktibalda> aruns: yes
[13:40:06] *** Joins: celphi (uid97751@user/celphi)
[13:50:17] *** Joins: fandre1986 (~fandre198@78.10.133.217)
[14:14:17] *** Quits: Teraii (~teraii@juraii-s1-1.teraii.net) (Ping timeout: 245 seconds)
[14:17:04] *** Joins: Teraii (~teraii@185.219.206.44)
[14:17:44] <celphi> this documentation to install xdebug sucks
[14:18:03] <celphi> well how to use it sucks
[14:20:30] <Derick> celphi: thanks.
[14:20:36] <Derick> Maybe you just didn't read it all.
[14:21:00] <celphi> im reading it.
[14:21:49] <celphi> https://xdebug.org/docs/
[14:22:09] <celphi> it should have lke "How to use"
[14:22:25] <biberu> celphi: what does the copyright notice at the bottom say?
[14:22:42] <Naktibalda> celphi: xdebug can do multiple things, pick one first
[14:22:45] <celphi> doesnt matter
[14:22:59] <biberu> celphi: it may
[14:23:42] <celphi> im entitled to my opinion right? it can be a great product,. but a new user is expressing the confusion to just get it working
[14:24:31] <biberu> celphi: not saying you aren't entitled to your opinion, just that it might be curious to read the author's name
[14:24:55] <celphi> The author is Derick Rethans
[14:25:23] <celphi> I don't get how that changes anything.
[14:27:01] <Derick> celphi: Then, what are you trying to do, and what are you missing? Saying "it sucks" is usually not the best way to get help...
[14:27:51] <celphi> I agree. I had wrong approach and spoke out of fusteration.
[14:30:23] *** Joins: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net)
[14:32:37] <Naktibalda> there was no question, you didn't have to respond :)
[14:33:48] *** Quits: ham5 (iamfive@user/ham5) (Remote host closed the connection)
[14:33:59] <celphi> So like point 1:
[14:34:59] <celphi> the video talks about the modes. it doesnt state which php.ini file, or where in ini file i add the line
[14:35:33] <Derick> the latter doesn't matter, so no need to mention it. The first one... the php.ini that you use for all other settings?
[14:35:35] <celphi> so yeah i just happen to know php -i | grep php.ini shows me which one
[14:35:56] <celphi> but it's assuming we know this
[14:36:13] <celphi> does it matter where in file it goes (doesnt say)
[14:36:19] <Derick> yes, some assumptions are made, because it makes no sense to teach eveything from the ground up in a 5 minute video ;-)
[14:36:24] <Derick> no, it does not matter where in the file it is
[14:36:56] <celphi> yeah but to a new user it helps to at least show all the steps to get hello world going
[14:36:59] <Derick> it takes the assumption that you know how to configure PHP.
[14:37:56] <celphi> im also assuming i need to restart fpm
[14:38:24] <Derick> FWIW, the installation documentation does talk about this: https://xdebug.org/docs/install#configure-php
[14:39:22] <celphi> yeah i saw that part- none of that talks about what i just mentioned
[14:39:27] *** Joins: punkgeek (~punkgeek@151.247.214.211)
[14:39:43] <celphi> also i added xdebug.mode = debug
[14:39:52] <celphi> how do i know it's working? it doesnt say
[14:39:58] *** Parts: punkgeek (~punkgeek@151.247.214.211) (Konversation terminated!)
[14:41:05] <Derick> it's all in the next video
[14:42:23] <Derick> you're expecting a video on Xdebug 3's mode to tell you everything you need to know. That's not what that video is about.
[14:43:52] <celphi> i dont need a video. i need instructions on how to install aand use in a basic example
[14:44:11] <Derick> celphi: https://xdebug.org/docs/install#configure-php
[14:44:17] <Derick> celphi: https://xdebug.org/docs/install
[14:44:24] <Derick> It's the "Installation" link right on the home page
[14:44:35] <Derick> Happy to hear how that doesn't solve your problem or if it misses something.
[14:44:43] <celphi> yes it's not compete instructions
[14:44:56] <celphi> xdebug.mode	develop (still shows as)
[14:44:57] <biberu> celphi: did you see how to proceed to e.g. enabling step debugging?
[14:45:00] <Derick> you said that. What is it missing.
[14:45:13] <biberu> that is what you're looking for, right?
[14:45:32] <celphi> biberu: i added xdebug.mode = debug in my ini file
[14:45:36] <Derick> Maybe you missed the sentence that links to the next step for debugging?
[14:45:42] <Derick> With Xdebug loaded, you can now enable individual features, such as Step Debugging, or Profiling. « that one?
[14:48:17] <celphi> I added `xdebug.mode=debug` to my ini and it still shows it as "develop" on phpinfo
[14:49:15] <biberu> celphi: are you editing the same php.ini that's listed in that phpinfo? did you restart fpm if you're using that?
[14:49:57] <celphi> so i need to add to my web one and cli php.ini file?
[14:49:58] <biberu> celphi: i'm just guessing a bit here, i doubt you can get better help than Derick ;)
[14:50:26] <biberu> yes, each sapi uses a different configuration, that's a php thing, unrelated to xdebug
[14:51:12] <celphi> ok i added to both and still shows as develop
[14:51:39] <biberu> and you restarted? how are you running php? fpm? mod_php?
[14:51:46] <celphi> fpm
[14:51:53] <biberu> restarted?
[14:52:02] <celphi> yes
[14:52:18] <celphi> sudo systemctl restart php7.4-fpm.service
[14:53:26] <celphi> i added to both `/etc/php/7.4/apache2/php.ini ` and `/etc/php/7.4/cli/php.ini` the line: `xdebug.mode=debug`
[14:53:49] <biberu> your fpm install is using the config for apache?
[14:54:12] <biberu> phpinfo says which configs have been loaded, please double check that
[14:54:22] <celphi> https://bpa.st/UQHQ
[14:55:02] <biberu> celphi: open a file with <?php phpinfo(); in your browser
[14:55:07] <Derick> you sure you're not using apache instead of php-fpm?
[14:55:46] <celphi> `www-data  203603  0.0  1.1 207624 11212 ?        S    10:20   0:00 php-fpm: pool www`
[14:56:04] <biberu> celphi: the service can be running without apache being configured to use that
[14:56:25] <biberu> celphi: that'd probably be a configuration mistake though, but you've got to check how your httpd is set up
[14:56:34] <celphi> biberu: https://bpa.st/SAYQ
[14:56:47] <Derick> Server APIApache 2.0 Handler
[14:56:53] <Derick> that's definitely not using PHP-FPM
[14:57:05] <biberu> so restart apache
[14:58:07] <celphi> ok that was issue
[14:58:55] <Derick> yeah, there is nothing that Xdebug documentation can do about you configuring PHP-FPM, but actually using Apache.
[14:59:33] <biberu> i dunno, maybe that Derick guy should cover that
[15:00:21] *** Joins: gefd (~Geoff@user/gefd)
[15:00:31] <celphi> thank you for help
[15:00:44] <celphi> im not sure why it's not using fpm
[15:06:41] *** Quits: Rubin (~rubin@2001:470:69fc:105::17e) (Quit: Bridge terminating on SIGTERM)
[15:09:16] *** Joins: Rubin (~rubin@2001:470:69fc:105::17e)
[15:11:15] <celphi> looks like fpm docs missing how to change apache api
[15:12:23] *** Quits: travisghansen (~travisgha@192.74.130.86) (Ping timeout: 258 seconds)
[15:14:27] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Quit: The Lounge - https://thelounge.chat)
[15:15:41] <celphi> guess they need to add this to their docs: https://askubuntu.com/questions/1319861/how-to-configure-apache-http-to-php-fpm-on-ubuntu-20-10
[15:21:53] <celphi> where is the actual page on how to use it
[15:21:55] *** Quits: Alex123 (~Adium@cpe-172-249-100-115.socal.res.rr.com) (Quit: Leaving.)
[15:26:21] <biberu> celphi: how to use what?
[15:26:44] <celphi> how to use xdebug
[15:27:01] <celphi> i have a basic loop echoing to page in my index.php file
[15:27:14] <celphi> and i have browser open-
[15:27:28] <celphi> how do  i make it run code step by step
[15:27:39] <biberu> what editor are you using?
[15:27:41] <celphi> vim
[15:28:18] <biberu> ok, do you have one of these editors available? https://xdebug.org/docs/step_debug#related_content
[15:28:20] <Naktibalda> celphi: have you read https://xdebug.org/docs/step_debug ?
[15:29:17] <celphi> ok i dont have any of those editors but at least they are how tos
[15:29:38] <celphi> Naktibalda: that page is just settings
[15:29:39] *** Quits: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.2)
[15:29:57] <Naktibalda> there is a link to VIM plugin
[15:31:12] <biberu> i'd expect it to be easier to get started in e.g. vscode, but didn't try the vim plugin so ¯\_(ツ)_/¯
[15:31:31] <celphi> Naktibalda: where at
[15:31:35] <Naktibalda> yes, settings is all you need - you have to enable debugging and configure remote client configuration. How you actually step over the code depends on client implementation
[15:31:52] <celphi> wheres link to vim plugin
[15:31:52] <Naktibalda> https://xdebug.org/docs/step_debug#clients
[15:32:09] <celphi> ok i have that one installed
[15:32:17] <celphi> but it's not connecting
[15:32:22] <celphi> after i hit f5
[15:32:44] <celphi> how do i know which xdebug.ini my xdebug is using
[15:32:52] <celphi> i have 4 of them
[15:33:55] <Naktibalda> where?
[15:35:49] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[15:39:05] <celphi> Naktibalda: https://paste.ofcode.org/38DhmztcLtPX2zicwyqC3Vy
[15:39:26] *** Joins: Mr-Snick (mr-snick@gateway/vpn/protonvpn/mr-snick)
[15:39:52] *** Joins: Brion_ (~Brion@gateway/tor-sasl/brion)
[15:39:59] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Ping timeout: 244 seconds)
[15:40:14] *** Brion_ is now known as Brion
[15:42:48] *** Quits: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick) (Ping timeout: 265 seconds)
[15:43:28] <Naktibalda> celphi: you were running mod_php earlier, so if you haven't switched to php-fpm, you have to update config file in apache2 directory
[15:43:46] <celphi> ive switched
[16:12:03] *** Joins: guidoc (~guido@host-95-234-254-213.retail.telecomitalia.it)
[16:18:03] <Blondie101010> then if you're using fpm, you should probably look at that directory for includes, but it's always a good idea to look at the ini include path in phpinfo() from the same SAPI
[16:40:21] *** Joins: onizu (uid373383@id-373383.highgate.irccloud.com)
[16:40:25] <onizu> hi
[16:40:34] *** Joins: olle (~olle@mue-88-130-56-052.dsl.tropolys.de)
[16:41:35] <onizu> how to array_merge so that if the key of the 2nd array exists in the 1st one, it should append a new entry with the 2nd array's value (of the same index) in the resulting array?
[16:45:07] <entuland> do you want the two values to end up with two different keys or you want both values put together into, say, a sub array?
[16:45:48] <entuland> showing samples of the input you have and output you want would help a lot
[16:47:08] <Blondie101010> onizu:  it sounds to me like a normal merge...  have you tried it?
[16:47:41] <onizu> Blondie101010: yes, tried.. normal merge does not 'add' a new entry in the array if the index already exists
[16:47:57] <onizu> entuland: diff keys
[16:48:03] <Blondie101010> what is your criteria?
[16:48:13] <onizu> anyway, I looped through the 2nd array and pushed each val in the 1st one
[16:48:28] <Blondie101010> so you're only looking at values?
[16:48:33] <onizu> Blondie101010: yes
[16:48:46] <Blondie101010> that is not what array_merge() does
[16:49:12] <onizu> yes, i saw that .. had a wrong idea about it
[16:49:48] <Blondie101010> are you keys useful or meaningless?
[16:50:19] <onizu> keys not important in this case
[16:50:45] <Blondie101010> and the values are strings?
[16:50:48] <onizu> yes
[16:50:53] <entuland> are you going to add all values from array2 regardless of whether the keys are in array1?
[16:51:05] <onizu> entuland: yes
[16:51:32] <entuland> in practice, you want a single array with all the values of array1 and array2 regardless of any key check
[16:51:49] <onizu> yes
[16:51:59] <Blondie101010> you could array_flip() both, array_merge() them and array_keys() on the result
[16:52:06] <onizu> and I thought array_merge would do that, but I had the wrong idea of the way it works
[16:52:20] <entuland> are you going to have duplicate values?
[16:52:26] <onizu> array_flip() o.O looking it up
[16:52:47] <onizu> entuland: no, i know there are not going to be duplicates
[16:52:56] <entuland> then the above should do
[16:53:43] <onizu> entuland: yea I did it. Just wondered if there was a single command that did what I wanted
[16:54:02] <entuland> the quest for the single command often wastes more time than what it saves :P
[16:54:18] *** Quits: fandre1986 (~fandre198@78.10.133.217) (Quit: Connection closed)
[16:54:32] <onizu> no quest :) ..i just didn't want to miss out on it if it existed
[16:54:53] <entuland> just loudthinking, don't mind that :P
[16:54:59] <onizu> sure, np
[16:55:52] <Blondie101010> it is a good observation, but it was not a case where there was an obvious solution
[16:59:11] <celphi> can someone help with this xdebug
[16:59:31] <celphi> im trying to use with vim for past 5hrs and cant get it to work
[17:01:29] <Blondie101010> did you validate that the ini file is loaded with phpinfo()?
[17:03:28] *** Quits: delboy1978uk (~delboy197@d51a46db4.access.telenet.be) (Quit: delboy1978uk)
[17:03:35] <celphi> yes
[17:07:21] <Blondie101010> you had the best resource possible available earlier, and you messed up because you keep changing your webserver config :S
[17:09:18] <celphi> the fpm docs missed several important steps to install it
[17:09:25] <celphi> i fixed those-
[17:12:23] <biberu> celphi: you could have done that at any time, maybe you didn't notice who was trying to help? :)
[17:13:03] <celphi> you and Naktibalda were
[17:13:38] *** Quits: guidoc (~guido@host-95-234-254-213.retail.telecomitalia.it) (Quit: WeeChat 3.2)
[17:13:59] <biberu> celphi: and someone else
[17:14:09] *** Joins: guidoc (~guido@host-95-234-254-213.retail.telecomitalia.it)
[17:14:36] <celphi> lmao - is that seriously the programmer of xdebug?
[17:15:27] <celphi> haha now it all makes sense
[17:16:07] *** Joins: magla (~gelignite@55d45e55.access.ecotel.net)
[17:16:21] <celphi> it was like 3am for me so thats prob why it didnt click
[17:16:45] <biberu> celphi: anyway, as i said it's been a long time and i'm doing something else right now, but did you e.g. check if xdebug is listening to the port you configured? can you connect manually?
[17:17:15] *** Joins: cspray (~cspray@75.76.18.60)
[17:17:48] <celphi> np- ill research that - i havent tried that one yet
[17:18:00] <celphi> thnx
[17:18:11] <biberu> that should tell you if you need to focus on your client or on your xdebug configuration
[17:19:59] <celphi> k
[17:21:57] <celphi> btw
[17:22:21] <celphi> if fpm is installed- his instructions are wrong on how to spot the correct php.ini file
[17:22:45] <celphi> Derick: ^
[17:24:07] <biberu> celphi: which ones?
[17:25:19] <celphi> "Alternatively, you can run php --ini on the command line."
[17:25:51] <Blondie101010> that works on systems where they put everything in one place
[17:26:00] <Blondie101010> learn to differentiate
[17:26:12] <Blondie101010> your OS setup is not PHP's responsibility
[17:26:21] <biberu> if you're looking at what i think you are looking at there should be a big red warning box immediately below that line that clarifies it
[17:27:28] <celphi> yes it says there could be more than one- which there are but it doesnt list the right one
[17:27:54] <biberu> how should it? that depends entirely on your setup
[17:28:47] <celphi> his script example works - and i would think it would always work using that, but to say alternatively it to me suggests you can do this step w/o making script with same results
[17:29:32] <biberu> either way this doesn't seem productive for your current problem
[17:29:42] <celphi> true
[17:30:08] <celphi> im just fusterated being stuck on this so long- so plz dont mind my critiques
[17:30:42] <biberu> so did you find out if it's listening?
[17:31:16] <celphi> still googling what that means
[17:32:23] *** Joins: travisghansen (~travisgha@192.74.130.86)
[17:32:30] <biberu> use e.g. netstat to see what ports are listning for tcp connections, and if one of them is the one you chose for xdebug
[17:33:25] <celphi> nope debug not listed
[17:33:30] *** Quits: gefd (~Geoff@user/gefd) (Ping timeout: 240 seconds)
[17:33:33] <celphi> 22,80 and 443
[17:34:05] <biberu> right, i believe it should show up there, perhaps someone who has it running can confirm
[17:34:50] <celphi> oh wait
[17:35:03] <celphi> i pressed f5 to start listening in vim
[17:35:09] <celphi> and it shows tcp        0      0 0.0.0.0:9000            0.0.0.0:*               LISTEN      205220/vim
[17:44:05] <biberu> ah, xdebug called out? i forgot how this works
[17:44:58] *** Joins: DaNeenjah (~jake@adsl-74-230-9-66.hsv.bellsouth.net)
[17:45:12] <biberu> celphi: in that case you could eliminate your plugin from the equation by setting up your own listener at the configured endpoint, just to see if you get any connection attempts to it, then debug the configuration until you do
[17:45:38] <celphi> i think i see prob
[17:46:17] <celphi> it's creating the xdebug on 9003
[17:46:48] <celphi> `[Step Debug] Creating socket for 'localhost:9003', poll success, but error: Operation now in progress (29).`
[17:47:03] <celphi> `[Step Debug] Could not connect to debugging client. Tried: localhost:9003 (through xdebug.client_host/xdebug.client_port) :-(`
[17:47:35] <celphi> still researching on how to change that
[17:47:56] <biberu> just change it in vim otherwise
[17:49:55] <celphi> how do i know which ini file xdebug uses?
[17:50:07] <celphi> i have 4 on my machine
[17:51:03] *** Joins: zibby15 (~androirc@user/zibby15)
[17:53:11] <celphi> ooo i think i got it working!
[17:53:52] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[17:53:53] <biberu> good job
[17:54:39] <celphi> cool going to youtube the interface-- thanks a lot biberu you've been very patient
[17:55:10] *** Joins: Dragoon (~Dragoon@user/dragoon)
[17:55:30] <Dragoon> Hello
[17:55:47] <Dragoon> I am having some permission problems with php-fpm
[17:56:20] <Dragoon> I am running postfixadmin via nginx and php-fpm, and when I try to go to my postfixadmin page I get the following error:
[17:56:22] <biberu> celphi: i didn't do much, happy you got it to work :)
[17:56:28] <Dragoon> ERROR: the templates_c directory doesn't exist or isn't writeable for the webserver
[17:56:45] <Dragoon> this same error appears in the php-fpm log
[17:57:02] <Dragoon> I checked the folder exists and is writable by the postfixadmin user
[17:57:56] *** Joins: delboy1978uk (~delboy197@d51a46db4.access.telenet.be)
[17:58:01] <Dragoon> php-fpm has a separate pool, using the configuration found on the arch wiki here: https://wiki.archlinux.org/title/PostfixAdmin#php-fpm_2
[17:59:00] <Dragoon> I made sure there was no open_basedir restriction in effect, and have whitelisted the directory in the systemd service as well
[17:59:31] <Dragoon> The only thing is that the templates_c directory is a symlink, maybe that's what's causing the issue?
[18:00:46] <Dragoon> Also what I think is weird is that the error seems to come from the www pool in the logs, even though I am connecting to the socked of the postfixadmin pool
[18:02:10] <Dragoon> I don't know why this is broken now, as this worked in the past
[18:07:10] *** Joins: Akimb (~Akimb@78-58-31-17.static.zebra.lt)
[18:27:58] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[18:28:05] *** Quits: Akimb (~Akimb@78-58-31-17.static.zebra.lt) (Read error: Connection reset by peer)
[18:29:25] *** Quits: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net) (Quit: dlundgren)
[18:29:41] *** Joins: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net)
[18:40:48] *** Joins: pmercado (~pmercado@190.22.176.14)
[18:40:53] *** Parts: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net) ()
[18:44:54] *** Joins: wovixo (~wovixo@128.104.205.49)
[19:04:44] *** Joins: dlundgren (~dlundgren@75-9-109-251.lightspeed.milwwi.sbcglobal.net)
[19:14:11] *** Quits: undefined_bob (~undefined@user/undefined-bob/x-5411918) (Quit: WeeChat 1.5)
[19:16:25] <Dragoon> I fixed it, I was blind
[19:16:29] *** Parts: Dragoon (~Dragoon@user/dragoon) (WeeChat 2.5)
[19:23:30] *** Joins: ferdna (~ferdna@user/ferdna)
[19:25:18] *** Joins: joachimo (~joachimo@cloud02.joachimopdenakker.be)
[19:33:54] *** Joins: Brion_ (~Brion@gateway/tor-sasl/brion)
[19:34:33] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Ping timeout: 244 seconds)
[19:34:33] *** Brion_ is now known as Brion
[19:45:57] *** Joins: alexeightsix (~alexeight@65.ip-158-69-214.net)
[19:46:57] *** Joins: coder7of9 (~coder7of9@mail.cvage.ca)
[19:49:45] *** Joins: genom (~g@37.214.28.175)
[19:50:00] *** Quits: Ducki_ (~ducki@user/ducki) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[19:50:40] <alexeightsix> im having issues with monolog writing to a file, im getitng this error unless i set the file to 777: Uncaught Exception UnexpectedValueException: "The stream or file "xxx.log" could not be opened in append mode: failed to open stream: Permission denied" at /var/www/asdasdasd-asdasdasd-api-app/releases/1623688311/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php line 111
[19:57:34] <AllenJB> Look at what user your script is running as. Is it a commandline script or a web request? If the latter, check the PHP-FPM or webserver configuration (if mod_php or old fastcgi setup)
[19:58:05] *** Quits: delboy1978uk (~delboy197@d51a46db4.access.telenet.be) (Quit: delboy1978uk)
[20:01:18] *** Quits: aruns (~aruns@94.12.74.9) (Read error: Connection reset by peer)
[20:03:24] <alexeightsix> its a web request, will the user be defined in the php.ini file?
[20:05:04] <AllenJB> No. If you're using php-fpm it should be in the pool configuration file (often something like /etc/php-fpm.d/www.conf).
[20:05:19] <AllenJB> Otherwise I believe it'll be down to your webserver configuration
[20:05:19] <alexeightsix> ahh got it
[20:05:59] <alexeightsix> yeah so it's set to www-data
[20:08:31] <da_wunder> any change that your server is using selinux?
[20:09:49] <AllenJB> Given chmod'ing to 777 reportedly allows the file to be written to, I don't think selinux is at play here. It's probably just a straight ownership issue
[20:10:17] <alexeightsix> im using docker, on the HOST we use centos and inside the docker container we use debian
[20:10:37] <alexeightsix> OUTSIDE the container the file permissions are set with log rotate and our CI to centos:centos 755
[20:11:24] <alexeightsix> our web app is mounted from the host to the container with docker-compose volumes
[20:11:47] *** Joins: Ducki (~ducki@user/ducki)
[20:12:04] *** Quits: magla (~gelignite@55d45e55.access.ecotel.net) (Quit: Stay safe!)
[20:12:11] <da_wunder> ok, more information which is good
[20:12:46] <alexeightsix> inside the docker container we have a centos user and group created
[20:12:55] <da_wunder> so if you get bash inside that docker container and you run `whoami` command what you get? and also check those file permissions inside that docker container
[20:13:21] <alexeightsix> i get "root" when typing whoami
[20:13:25] *** Quits: guidoc (~guido@host-95-234-254-213.retail.telecomitalia.it) (Quit: WeeChat 3.2)
[20:13:57] <Byteflux> With Docker with bind mounts, the proper thing to do here is have the image run stuff as the same UID/GID
[20:14:11] *** Joins: guidoc (~guido@host-95-234-254-213.retail.telecomitalia.it)
[20:14:15] <da_wunder> so then you're not using that created centos user as you mentioned
[20:14:33] <da_wunder> and Byteflux is exactly right with that
[20:14:43] <Byteflux> Alternatively you could use Docker volumes instead which doesn't rely on mangling with host permissions
[20:16:27] <alexeightsix> i would need to create a www-data user on the host?
[20:16:41] <alexeightsix> with the same UID etc as whats in the container?
[20:17:05] <Byteflux> What you'd normally do is build a Docker image that uses the UID/GID of what's expected on your host.
[20:17:08] <da_wunder> create new user inside that docker container with same UID/GID that you're using on your host machine
[20:17:26] <Byteflux> This is just one of the reasons bind mounts tend to be a bad idea
[20:17:28] *** Joins: delboy1978uk (~delboy197@d51A46DB4.access.telenet.be)
[20:17:50] <alexeightsix> we do that already with the centos user and group
[20:17:58] <alexeightsix> but not www-data
[20:17:58] <Byteflux> You should adapt the Docker image to your host, not the other way around.
[20:18:00] *** Quits: delboy1978uk (~delboy197@d51A46DB4.access.telenet.be) (Client Quit)
[20:18:13] <alexeightsix> we have a centos user created inside the docker container
[20:18:18] <da_wunder> yeah, and that is problem only within linux hosts, windows and mac doesn't have that problem
[20:18:38] <Byteflux> You could configure php-fpm to run as the centos user
[20:18:57] *** Joins: delboy1978uk (~delboy197@d51a46db4.access.telenet.be)
[20:19:00] <da_wunder> alexeightsix: then if you get `root` user when you use `whoami` your container isn't using that user...
[20:19:42] <Byteflux> And to be clear, UID means the numeric ID of the user, not the name. The name is irrelevant.
[20:19:53] <Byteflux> Which makes it all even more confusing
[20:20:08] <da_wunder> and same goes for GID too
[20:20:28] <alexeightsix> yeah we specify the same uid/gid etc as host for centos
[20:21:03] <da_wunder> but still if you get that `root` from `whoami` command inside that container - you're _not_ using that user...
[20:21:37] <Byteflux> You have stuff mounted from the host to the container, stuff that you expect the container to be able to write to. The UID/GID of the user running any processes that are expected to route to the files mounted to the host need to be the same as the UID/GID of the user that owns those files on the host.
[20:22:19] <Byteflux> If you already created a user within the container for this purpose, then you need to configure your container processes to run as that user.
[20:22:41] <Byteflux> s/route/write/
[20:23:51] *** Quits: delboy1978uk (~delboy197@d51a46db4.access.telenet.be) (Ping timeout: 276 seconds)
[20:23:58] <da_wunder> alexeightsix: eg. I use this on my `Dockerfile_dev` - https://gist.github.com/tarlepp/c476dffd39a984c071cdffd0acb04903 - there I create that user with host machine UID/GID and change that container to use that created `dev` user
[20:24:36] <alexeightsix> got it, thanks
[20:25:38] <Byteflux> Assuming your container's centos user has the same numeric UID/GID as your host's, sounds like your problem could be resolved by configuring your www.conf(?) for php-fpm to run the worker processes as that user.
[20:26:26] <Derick> __adrian: you need to update the version numbers :-)
[20:31:01] <alexeightsix> yeah so in my case, we have some instances where the log file works
[20:31:13] <alexeightsix> and some dont, and the servers that is because there's no 1001 user created locally
[20:31:36] <alexeightsix> as for running PHP as root, we should change that i guess to run as another user? is it a security issue?
[20:31:55] <alexeightsix> www-data is defined as the user inside the conf file
[20:32:31] *** Joins: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com)
[20:32:35] <alexeightsix>     1 root      20   0  302524  21108  14240 S   0.0   0.3   0:58.86 php-fpm
[20:32:41] <alexeightsix> 25877 www       20   0  377076  23280  13892 S   0.0   0.3   0:05.46 php-fpm
[20:32:51] <alexeightsix> ... and the rest of the processes are www
[20:33:13] *** Quits: MCMiic (~mcmic@63.120.199.77.rev.sfr.net) (Quit: Konversation terminated!)
[20:34:51] *** Joins: no_gravity (~no_gravit@user/no-gravity/x-5639427)
[20:36:23] *** Quits: zibby15 (~androirc@user/zibby15) (Quit: Leaving.)
[20:37:15] *** Quits: Norkle (~norkle@admin.nasa-g0v.com) (Killed (NickServ (GHOST command used by Norkle_!~2@115-189-94-163.mobile.spark.co.nz)))
[20:39:21] *** Joins: delboy1978uk (~delboy197@d51a46db4.access.telenet.be)
[20:43:15] *** __adrian changes topic to 'Stable PHP versions: 8.0.9, 7.4.22, 7.3.29 · /msg php-bot guidelines · Be respectful at all times & keep your language clean · Use a paste site for code · http://hashphp.org has some useful links · caffinated, one of the original members of freenode/##PHP, died in June 2017. RIP, Ben.'
[20:43:22] <__adrian> thx Derick
[20:43:29] *** Quits: no_gravity (~no_gravit@user/no-gravity/x-5639427) (Quit: leaving)
[20:43:38] *** Joins: Rockwood (~Rocky@user/rocky)
[20:43:58] *** Quits: delboy1978uk (~delboy197@d51a46db4.access.telenet.be) (Ping timeout: 272 seconds)
[20:44:28] *** Joins: glumanda (~glumanda@194-208-201-025.tele.net)
[20:46:43] *** Quits: glumanda (~glumanda@194-208-201-025.tele.net) (Client Quit)
[20:56:15] <Derick> __adrian: I wrote that literally the second after "git push", though :D
[20:59:55] <__adrian> i call it success if i notice within a week
[21:01:14] *** Joins: bradp (~bradp@cpe-70-92-7-182.wi.res.rr.com)
[21:01:37] <Derick> :D
[21:01:55] <Derick> it happens every 4 weeks, set a calendar notification :-þ
[21:03:46] *** Joins: delboy1978uk (~delboy197@d51A46DB4.access.telenet.be)
[21:13:17] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: Do fish get thirsty?)
[21:13:49] <Rockwood> delboy1978uk, o/
[21:14:07] <Rockwood> when??
[21:15:02] *** Quits: coder7of9 (~coder7of9@mail.cvage.ca) (Quit: Client closed)
[21:34:26] *** Joins: Rockwood_ (~Rocky@user/rocky)
[21:37:37] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 245 seconds)
[21:38:19] *** Joins: magla (~gelignite@55d45e55.access.ecotel.net)
[21:43:40] *** Joins: dimbag (~dimbag@62.76.35.23)
[21:49:52] *** Quits: delboy1978uk (~delboy197@d51A46DB4.access.telenet.be) (Quit: delboy1978uk)
[21:50:22] *** Quits: ferdna (~ferdna@user/ferdna) (Remote host closed the connection)
[21:50:45] *** Quits: Rockwood_ (~Rocky@user/rocky) (Quit: The Time is Over)
[22:00:53] *** Quits: olle (~olle@mue-88-130-56-052.dsl.tropolys.de) (Ping timeout: 250 seconds)
[22:17:41] *** Joins: jetchisel (~jetchisel@user/jetchisel)
[22:22:48] *** Joins: Alex123 (~Adium@cpe-172-249-100-115.socal.res.rr.com)
[22:51:48] *** Joins: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br)
[22:55:50] *** Joins: glumanda (~glumanda@194-208-201-025.tele.net)
[22:56:32] <relipse> What does private mean in this code:
[22:56:40] <relipse> https://www.irccloud.com/pastebin/NPL9jP1y/
[22:57:26] <AllenJB> It's a private property (using the new constructor promotion feature)
[22:57:50] <AllenJB> The property can only be accessed from the same class - extending classes cannot see it
[22:59:06] <AllenJB> https://www.php.net/manual/en/language.oop5.decon.php#language.oop5.decon.constructor.promotion
[23:02:28] <Sammitch> neat
[23:05:04] <relipse> i'm not in a hurry to move to php 8
[23:05:11] <relipse> i enjoy 7.4 so much anyway
[23:05:50] <AllenJB> 8 is pretty meh. But 8.1 has Enums and readonly properties!
[23:10:01] <da_wunder> constructor promotion is good addition - and enums are great addition - not sure if those readonly properties was accepted already
[23:10:24] <da_wunder> next big step would be enums imho
[23:10:39] <da_wunder> s/enums/generics
[23:10:58] <AllenJB> Don't hold your breath
[23:11:17] <da_wunder> yeah that will long road before that happen
[23:20:09] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[23:28:56] *** Joins: joo-_ (~joo-_@fsf/member/joo--)
[23:37:08] *** Joins: Warped (~Warped@user/warped)
[23:38:37] *** Quits: genom (~g@37.214.28.175) (Remote host closed the connection)
[23:39:49] *** Quits: guidoc (~guido@host-95-234-254-213.retail.telecomitalia.it) (Quit: WeeChat 3.2)
[23:40:57] *** Parts: glumanda (~glumanda@194-208-201-025.tele.net) (WeeChat 3.0.1)
[23:43:25] *** Joins: sidy (~sidy@user/sidy)
