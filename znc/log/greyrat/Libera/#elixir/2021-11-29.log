[00:13:58] *** Quits: andrhua (~andrhua@31.134.187.8) (Remote host closed the connection)
[00:24:13] *** Quits: phaleth (~phaleth@user/phaleth) (Quit: phaleth)
[01:12:35] *** Quits: Doraemon (~NeoCron@p200300c4cf07d8007d174ac0d3b51364.dip0.t-ipconnect.de) (Quit: Leaving)
[01:12:55] *** Joins: NeoCron (~NeoCron@p200300c4cf07d8007d174ac0d3b51364.dip0.t-ipconnect.de)
[01:17:15] *** Joins: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au)
[01:47:25] *** Quits: mahmutov (~mahmutov@37.155.33.70) (Ping timeout: 250 seconds)
[02:17:13] *** Quits: NeoCron (~NeoCron@p200300c4cf07d8007d174ac0d3b51364.dip0.t-ipconnect.de) (Quit: Leaving)
[02:23:38] *** Quits: mouseghost (~draco@user/mouseghost) (Ping timeout: 268 seconds)
[03:49:07] *** Joins: brauliobz (~manjaro-u@user/brauliobz)
[04:20:39] *** Joins: livoreno (~livoreno@user/notzmv)
[04:26:01] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[04:26:09] *** Joins: sgn_ (~sgn@user/sgn)
[04:29:38] *** Quits: Tanger (~Donger@signiq.cust.bdr01.per02.wa.VOCUS.net.au) (Remote host closed the connection)
[04:30:04] *** Quits: fub (uid190747@id-190747.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[05:10:12] *** Quits: gitgood (~gitgood@85.210.185.0) (Ping timeout: 256 seconds)
[05:59:57] *** Joins: rambocoder_ (uid20220@id-20220.uxbridge.irccloud.com)
[06:15:08] *** Quits: livoreno (~livoreno@user/notzmv) (Read error: Connection reset by peer)
[06:20:05] *** Quits: nickjj (~nickjj@user/nickjj) (Read error: Connection reset by peer)
[06:20:29] *** Joins: nickjj (~nickjj@user/nickjj)
[06:41:48] *** Quits: brauliobz (~manjaro-u@user/brauliobz) (Ping timeout: 265 seconds)
[06:46:58] *** Quits: sgn_ (~sgn@user/sgn) (Read error: Connection reset by peer)
[06:47:21] *** Joins: sgn (~sgn@user/sgn)
[07:07:35] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[07:07:54] *** Joins: sgn (~sgn@user/sgn)
[07:31:00] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[07:35:56] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 265 seconds)
[07:43:40] *** Quits: ur5us (~ur5us@2406:e002:6c7b:2301:1b18:b746:eaa9:fad6) (Ping timeout: 268 seconds)
[08:05:35] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[08:07:56] *** Quits: rambocoder_ (uid20220@id-20220.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[08:10:21] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[08:42:47] *** Joins: Tanger (~Donger@signiq.cust.bdr01.per02.wa.vocus.net.au)
[09:15:54] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[09:23:41] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[09:23:45] *** Joins: livoreno (~livoreno@user/notzmv)
[09:24:07] *** Joins: sgn (~sgn@user/sgn)
[09:32:02] *** Quits: ihabunek (~ihabunek@bezdomni.net) (*.net *.split)
[09:32:02] *** Quits: GLaDER (~GLaDER@h-98-128-172-23.A785.priv.bahnhof.se) (*.net *.split)
[09:32:02] *** Quits: johnhamelink (3ae947b049@2604:bf00:561:2000::1b) (*.net *.split)
[09:32:02] *** Quits: esainane (esainane@antihype.space) (*.net *.split)
[09:32:02] *** Quits: pflanze (~pflanze@5-168-208-80-pool.fiber.fcom.ch) (*.net *.split)
[09:32:02] *** Quits: jtdowney (~jtdowney@user/jtdowney) (*.net *.split)
[09:32:02] *** Quits: marcos (~marcos@2a01:4f8:c17:e59::2) (*.net *.split)
[09:32:03] *** Quits: drincruz (drincruz@2607:5300:203:3f52::19) (*.net *.split)
[09:32:03] *** Quits: sweater (~sweater@206.81.18.26) (*.net *.split)
[09:32:03] *** Quits: azazel (~azazel@orphu.arstecnica.it) (*.net *.split)
[09:32:10] *** Joins: johnhamelink (3ae947b049@2604:bf00:561:2000::1b)
[09:32:12] *** Joins: azazel (~azazel@orphu.arstecnica.it)
[09:32:13] *** Joins: esainane (esainane@antihype.space)
[09:32:18] *** Joins: marcos (~marcos@2a01:4f8:c17:e59::2)
[09:32:26] *** Joins: pflanze (~pflanze@5-168-208-80-pool.fiber.fcom.ch)
[09:32:42] *** Joins: drincruz (drincruz@2607:5300:203:3f52::19)
[09:32:56] *** Joins: GLaDER (~GLaDER@h-98-128-172-23.A785.priv.bahnhof.se)
[09:32:57] *** Joins: jtdowney (~jtdowney@user/jtdowney)
[09:33:51] *** Joins: sweater (~sweater@206.81.18.26)
[09:34:11] *** Joins: ihabunek (~ihabunek@bezdomni.net)
[09:36:24] *** Quits: rduplain (~rduplain@user/rduplain) (*.net *.split)
[09:36:24] *** Quits: adrianhblack[m] (~adrianhbl@2001:470:69fc:105::1:30c9) (*.net *.split)
[09:36:24] *** Quits: foogiyama (~foogiyama@pool-71-172-157-172.nwrknj.fios.verizon.net) (*.net *.split)
[09:36:25] *** Quits: malware (~malware@ec2-52-91-134-43.compute-1.amazonaws.com) (*.net *.split)
[09:36:25] *** Quits: tristan (~tristan@51.15.38.185) (*.net *.split)
[09:36:31] *** Joins: tristan (~tristan@51.15.38.185)
[09:36:36] *** Joins: foogiyama (~foogiyama@pool-71-172-157-172.nwrknj.fios.verizon.net)
[09:37:39] *** Joins: rduplain (~rduplain@user/rduplain)
[09:38:10] *** Joins: malware (~malware@ec2-52-91-134-43.compute-1.amazonaws.com)
[09:38:20] *** Joins: adrianhblack[m] (~adrianhbl@2001:470:69fc:105::1:30c9)
[09:40:27] *** Quits: ihabunek (~ihabunek@bezdomni.net) (Ping timeout: 256 seconds)
[09:40:27] *** Quits: sweater (~sweater@206.81.18.26) (Ping timeout: 256 seconds)
[09:42:04] *** Joins: sweater (~sweater@206.81.18.26)
[09:42:28] *** Joins: ihabunek (~ihabunek@bezdomni.net)
[10:19:18] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 265 seconds)
[10:20:04] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[10:40:08] *** Joins: parv (~quass@user/parv)
[10:42:01] *** Quits: livoreno (~livoreno@user/notzmv) (Ping timeout: 265 seconds)
[10:43:28] *** Quits: notzmv (~zmv@user/notzmv) (Ping timeout: 265 seconds)
[11:03:44] *** Quits: Sgeo (~Sgeo@user/sgeo) (Read error: Connection reset by peer)
[11:05:30] *** Quits: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au) (Ping timeout: 256 seconds)
[11:06:35] *** Quits: parv (~quass@user/parv) (Ping timeout: 260 seconds)
[11:13:46] *** Joins: notzmv (~zmv@user/notzmv)
[11:19:17] *** Joins: fub (uid190747@id-190747.ilkley.irccloud.com)
[11:19:23] *** Joins: parv (~quass@user/parv)
[11:33:47] *** Joins: andrhua (~andrhua@31.134.187.8)
[12:05:33] *** Joins: ur5us (~ur5us@203.86.198.200)
[12:08:38] *** Joins: vllorens (~vllorens@dzd6d6yjsxdzsfxxq5nht-3.rev.dnainternet.fi)
[12:11:15] *** Quits: vllorens (~vllorens@dzd6d6yjsxdzsfxxq5nht-3.rev.dnainternet.fi) (Client Quit)
[12:15:04] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[12:30:00] *** Joins: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au)
[12:52:33] *** Quits: ur5us (~ur5us@203.86.198.200) (Ping timeout: 256 seconds)
[12:53:58] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[12:54:12] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[12:55:32] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:57:12] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[12:58:31] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Client Quit)
[12:58:55] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[13:02:45] *** Quits: andrhua (~andrhua@31.134.187.8) (Ping timeout: 256 seconds)
[13:15:41] *** Quits: srfsh (~srfsh@user/srfsh) (Remote host closed the connection)
[13:16:05] *** Joins: srfsh (~srfsh@user/srfsh)
[13:29:37] *** Quits: kvn_ (~weechat@cpc115982-dals23-2-0-cust605.20-2.cable.virginm.net) (Ping timeout: 268 seconds)
[13:35:06] *** Quits: johnhamelink (3ae947b049@2604:bf00:561:2000::1b) (Remote host closed the connection)
[13:35:44] *** Joins: johnhamelink (3ae947b049@2604:bf00:561:2000::1b)
[13:39:05] *** Joins: andrhua (~andrhua@31.134.187.8)
[13:41:41] <serafeim> hello friends
[13:46:48] *** Joins: brauliobz (~manjaro-u@user/brauliobz)
[14:07:52] <rawtaz> yo
[14:13:57] *** Joins: mouseghost (~draco@user/mouseghost)
[14:15:41] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:17:43] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[14:18:41] *** Quits: srfsh (~srfsh@user/srfsh) (Remote host closed the connection)
[14:18:54] *** Joins: srfsh (~srfsh@user/srfsh)
[14:23:18] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:25:37] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[14:26:22] *** Joins: notapenguin (~ryu@179.222.254.137)
[14:32:45] *** Quits: cursey (~cursey@user/cursey) (Quit: bye)
[14:37:06] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[14:42:16] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 264 seconds)
[14:45:33] *** Joins: cursey (~cursey@user/cursey)
[15:03:49] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:27:20] *** Quits: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au) (Ping timeout: 252 seconds)
[15:36:32] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[15:37:54] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[15:40:30] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[15:59:04] *** Quits: parv (~quass@user/parv) (Quit: parv)
[16:04:06] <dch> servus
[16:35:23] *** Quits: johnhamelink (3ae947b049@2604:bf00:561:2000::1b) (Remote host closed the connection)
[16:35:45] *** Joins: johnhamelink (3ae947b049@2604:bf00:561:2000::1b)
[16:37:41] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[16:50:56] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[17:05:11] *** Joins: kvn_ (~weechat@cpc115982-dals23-2-0-cust605.20-2.cable.virginm.net)
[17:05:57] <benwilson512> josevalim: I posted some :observer images taken during compilation to the M1 thread https://elixirforum.com/t/erlang-and-elixir-on-apple-silicon-m1-chip/35699/47
[17:06:49] <benwilson512> tl;dr: scheduler utilization is on average quite low, ~30% during compilation
[17:06:54] <benwilson512> however the utilization is relatively _even_ at least
[17:07:08] <benwilson512> with the exception of a handful of obviously bottlenecked deps
[17:07:31] <josevalim> benwilson512: is this using all cores? or only efficiency ones?
[17:07:38] <josevalim> i.e. did you address the other issue?
[17:08:17] <benwilson512> josevalim: this is me debugging that issue. from a system monitoring perspective I only see the first two cores being used.
[17:08:19] <benwilson512> however what I'm trying to determine is which direction the causal relationship is
[17:08:29] <benwilson512> is it using the efficiency cores because the OS thinks the scheduler threads aren't actually that busy?
[17:08:42] <benwilson512> or are the scheduler threads idle because they're limited to 2 physical cores?
[17:08:59] <benwilson512> I am wondering if it is the former
[17:15:16] *** Joins: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au)
[17:18:58] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[17:20:01] *** Quits: kvn_ (~weechat@cpc115982-dals23-2-0-cust605.20-2.cable.virginm.net) (Ping timeout: 256 seconds)
[17:20:35] *** Quits: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au) (Ping timeout: 256 seconds)
[17:24:11] *** Quits: mouseghost (~draco@user/mouseghost) (Quit: mew wew)
[17:24:16] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 264 seconds)
[17:28:02] *** Joins: livoreno (~livoreno@user/notzmv)
[17:33:54] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:58c0:b83a:3eea:a1cf)
[17:39:41] <josevalim> benwilson512: can you exercise all cores using beam otherwise?
[17:40:12] <benwilson512> josevalim: great question, let me try
[17:42:09] <benwilson512> josevalim: yes
[17:42:13] <benwilson512> https://www.irccloud.com/pastebin/qIugRSQz/
[17:42:39] <benwilson512> josevalim: and notably, this show as using all 10 cores at the OS level to 100%
[17:43:11] <benwilson512> so maybe I'm coming at this problem wrong. The issue isn't that BEAM is only using 2 cores, the issue is that for whatever reason compilation is bottlenecked on something that isn't the CPU
[17:43:55] <josevalim> maybe, maybe not. for any large project we are certainly using multiple processes
[17:44:25] <josevalim> benwilson512: what are you using to test drive it?
[17:44:28] <benwilson512> sure, there are a _lot_ of low (almost 0) scheduler utilization periods in those charts while compiling
[17:44:43] <benwilson512> I'm using our main project, let me find an open source one
[17:47:12] <benwilson512> josevalim: OK so I compiled Absinthe (and its deps) and this is the observer chart I got https://usercontent.irccloud-cdn.com/file/zo0ZkvYY/image.png
[17:47:29] <benwilson512> via :observer.start then Mix.Task.run("deps.compile"); Mix.Task.run("compile")
[17:47:45] <benwilson512> the actual Absinthe part kicks in at about T-10s
[17:47:56] <benwilson512> let me try to find a larger phoenix project, maybe hex.pm
[17:48:56] <benwilson512> what is the "Analyzing applications..." step?
[17:49:19] <benwilson512> hexpm is a great example of what I'm talking about, you've got these lengthy periods of inactivity
[17:49:55] <benwilson512> https://usercontent.irccloud-cdn.com/file/xEvMQR6T/image.png
[17:50:06] <benwilson512> they do seem correlated with erlang deps
[17:50:20] <benwilson512> https://usercontent.irccloud-cdn.com/file/zHszflnH/image.png
[17:50:34] <benwilson512> this more active period is solid elixir deps. Still definitely not CPU bound at all
[17:52:40] <josevalim> benwilson512: can you do me a favor?
[17:52:41] <josevalim> https://github.com/elixir-lang/elixir/blob/main/lib/elixir/lib/kernel/parallel_compiler.ex#L173
[17:52:56] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[17:53:08] <josevalim> change that to `    schedulers = :erlang.system_info(:schedulers_online) * 2` or * 4 and let me know how it goes?
[17:53:16] <josevalim> we should probably expose this via a concurrency flag
[17:53:25] <benwilson512> yeah sure
[17:54:44] *** Joins: gitgood (~gitgood@85.210.185.0)
[17:55:02] *** Quits: notapenguin (~ryu@179.222.254.137) (Quit: WeeChat 3.3)
[17:57:59] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[18:01:04] *** Joins: kuzyn (beea2fef6b@2604:bf00:561:2000::8f)
[18:01:40] <benwilson512> josevalim: that does seem to help some, let me try with * 4. Two things stand out. 1) The erlang deps are definitely those big flat gaps, not sure what's up with that, does it spawn its own `erlc` call for those?
[18:01:40] <benwilson512> 2) there seems to be some sort of constant time delay at the start of each dep to inventory it or w/e
[18:02:14] <josevalim> benwilson512: can you merge the time before and after?
[18:02:27] <josevalim> are those erlang deps being compiled with make or rebar3?
[18:02:40] <josevalim> it may be make being sequential here, try setting manager: :rebar3 in the mix.exs
[18:02:41] <benwilson512> it's cowlib and hackney and stuff, presumably rebar3
[18:02:53] <josevalim> i think the cowlib ones are using make :(
[18:02:56] <benwilson512> ah
[18:03:01] <benwilson512> well I mean that's fine, it is what it is
[18:03:04] *** Joins: kvn_ (~weechat@cpc115982-dals23-2-0-cust605.20-2.cable.virginm.net)
[18:03:10] <benwilson512> and either way it's gonna be no worse on m1 than on intel so
[18:03:35] <benwilson512> when you say "merge the time before and after" what do you mean?
[18:04:49] <josevalim> s/merge/measure
[18:05:17] <josevalim> i am wondering if * 2 or * 4 brings concrete benefits overall
[18:05:18] <benwilson512> ah yes, working on that
[18:05:20] <josevalim> if so we should bump it
[18:05:45] <benwilson512> I'm gonna time just the hexpm code base part for that to avoid erlang diluting it
[18:05:53] <benwilson512> I'll also test on Absinthe
[18:07:56] *** Quits: kvn_ (~weechat@cpc115982-dals23-2-0-cust605.20-2.cable.virginm.net) (Ping timeout: 252 seconds)
[18:12:18] <benwilson512> josevalim: I do think the lack of JIT support is partially the issue here too
[18:12:53] <benwilson512> almost done w/ measurements
[18:13:10] <benwilson512> I know JIT is coming in OTP 25, I tried running that but rebar3 errored out
[18:17:00] <benwilson512> josevalim:  https://docs.google.com/spreadsheets/d/1Sz3S05HVYf_k9XOW-1W5B8ov7k4FYgMNvNnJ5kneLow/edit?usp=sharing
[18:17:11] <benwilson512> it varried by +/-10% 
[18:17:21] <benwilson512> didn't seem to make a consistent difference either way
[18:18:05] <benwilson512> It sort of looks like there are a few deps that could benefit from more schedulers but it isn't super impactful. Overall CPU usage is still sort of max ~3 cores
[18:18:12] <benwilson512> I did:
[18:18:12] <benwilson512>     schedulers = max(:erlang.system_info(:schedulers_online), 2) * 2
[18:18:12] <benwilson512>     IO.puts "Compiling with #{schedulers} schedulers"
[18:18:24] <benwilson512> to visually confirm that I was running the count I expected for these measurements
[18:19:20] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:21:45] *** Joins: voltone (~voltone@mailgw3.be-all.com)
[18:25:21] *** Joins: sjm (5b6c6c128c@2604:bf00:561:2000::9c)
[18:33:42] *** Quits: voltone (~voltone@mailgw3.be-all.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:34:17] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[18:37:53] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:58c0:b83a:3eea:a1cf) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:40:34] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:58c0:b83a:3eea:a1cf)
[18:44:17] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Remote host closed the connection)
[18:44:52] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[18:47:36] *** Quits: livoreno (~livoreno@user/notzmv) (Read error: Connection reset by peer)
[18:49:44] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[18:54:49] <dch> benwilson512: does the M1 report any NUMA info? and are you pinning threads to cores? `ERL_AFLAGS="+sbt nnts"` I think for the latter
[18:57:20] *** Joins: Sgeo (~Sgeo@user/sgeo)
[19:02:06] <benwilson512> dch: I am not pinning any threads, let me give that a whirl
[19:02:36] <benwilson512> > setting scheduler bind type 'nnts' failed: not supported
[19:03:27] <dch> aah this is why work needs to get my M1 to me
[19:03:42] <dch> benwilson512, what does :erlang.system_info :cpu_topology give you as is?
[19:03:57] <benwilson512> dch: it might be better on OTP 25, let me try that
[19:04:05] <benwilson512> :undefined
[19:04:38] <benwilson512> eh it's :undefined under OTP 25 too
[19:04:48] <dch> on aarch64? 
[19:04:55] <dch> let me check a couple of boxes here
[19:05:29] <benwilson512> https://www.irccloud.com/pastebin/UJd0oaKC/
[19:06:57] <dch> ok something is borked on darwin, I have these settings in OTP24 on arm64
[19:07:43] <benwilson512> dch: I'm happy to continue to guinea pig this, is there some sort of followup I can do?
[19:08:33] <dch> benwilson512: I'll get something a bit more concrete together, throw it on the end of that elixirforums post, and ping you back later tonight. 
[19:08:51] <benwilson512> dch: great, thanks!
[19:11:33] <dch> the kerl options look pretty vanilla, I don't think I'm doing anything fancier on FreeBSD other than adding sharing-preserving & SCTP which shouldn't involve that.
[19:11:53] <dch> benwilson512: can you post your kerl build log for OTP24 somewhere? PM is ok if its sensitive
[19:12:24] <benwilson512> dch: yup let me do a rebuild
[19:16:57] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[19:17:25] <dch> benwilson512: the general idea here is to do 2 things: bind schedulers to specific cpu cores (so the OS doesn't shift them around randomly), and to inform the BEAM of the actual NUMA layout of the cores (so it doesn't try to drag memory across the slow boundary between physical cores).
[19:17:37] *** Quits: staceee (~stacy@51.158.78.158) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[19:17:39] <benwilson512> ah
[19:17:45] <benwilson512> that makes sense
[19:18:02] <dch> benwilson512: afaict there are no compile time options relating to this at all, so it should be possible to see in the configure / build log from kerl what it decided not to do
[19:18:25] <benwilson512> is there a game plan to deal with non homogeneous process architectures?
[19:19:22] <dch> benwilson512: the feedback I got from the people who build cpus is that generally you're better off letting the runtime figure out that these cores just aren't consuming work as fast
[19:19:51] <dch> or if its truly cpu limited and having a further 2 slow cores makes things worse, we can already restrict beam to just the cores we want
[19:20:09] *** Joins: hoppity (~user@user/hoppity)
[19:20:10] <benwilson512> makes sense
[19:20:20] <dch> whether apple has exposed these apis and whether erlang consumes them is something the otp team would need to answer
[19:21:04] *** Joins: staceee (2110cfac7a@2604:bf00:561:2000::b0)
[19:21:14] <hoppity> Hi guys, I had the following dependency in mix.exs "{:floki, ">= 0.32.0", only: test} but my application would not compile with the only: test option. I had to remove it as per Mix's recomendation and now all is good. Is this ok? Or am I doing something wrong by removing the test option?
[19:21:52] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 264 seconds)
[19:24:03] <benwilson512> dch: asdf cleans up logs after a successful build lol, one sec let me tail it so that I can get it
[19:24:29] <benwilson512> hoppity: if you have another dep that needs it outside of tests then removing it is the right option
[19:24:46] *** Joins: tmjoen (~textual@84.209.131.177)
[19:24:47] <dch> benwilson512: lol. when I first started using erlang back in ~ 2010 it took well over 24 hours to build. so much pain.
[19:24:52] <hoppity> benwilson512: thank you
[19:25:37] <benwilson512> oh wow, yeah it builds in like a few minutes now
[19:28:34] *** Joins: staceee_ (~stacy@51.158.78.158)
[19:29:08] <dch> the other thing would be to see if `+sbwt none +sbwtdcpu none +sbwtdio none` helps in those flat bits.  This tweaks how quickly the scheduler decides to idle and move work between schedulers, at the expense of higher user-visible cpu usage. I wouldnt expect much change for that.
[19:29:10] <dch> some lean background reading is https://www.erlang.org/doc/man/erl.html 
[19:29:51] <benwilson512> dch: one moment, asdf makes it _very_ hard to preserve logs, I'm giving up and just downloading the OTP git repo and building it from there
[19:38:41] <benwilson512> dch: oh, my KERL_OPTIONS has a typo, I'm missing a `\`. Let me fix those, reinstall, and make sure that things still are the same
[19:41:38] *** Quits: staceee_ (~stacy@51.158.78.158) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[19:42:03] <dch> sadpanda
[19:42:04] *** Joins: phaleth (~phaleth@user/phaleth)
[19:42:19] <benwilson512> oh good / bad news: Fixing the flags did not change anything
[19:43:29] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[19:43:38] *** Joins: sgn (~sgn@user/sgn)
[19:45:39] <dch> benwilson512: I think you can just run `iex --erl "+sbt garbage"` to see what the compiled VM supports, if you can paste that, it will help. 
[19:45:47] <benwilson512> sure one sec
[19:46:06] <dch> ley_: is your epoch system an M1?
[19:46:13] <benwilson512> https://www.irccloud.com/pastebin/7nlOAU6M/
[19:47:03] <benwilson512> https://usercontent.irccloud-cdn.com/file/prG6iTkp/config.log
[19:47:04] <dch> its at least displayed there.
[19:47:12] <benwilson512> dch: that's the output of `./configure --disable-debug       --disable-silent-rules       --enable-dynamic-ssl-lib       --disable-hipe       --enable-shared-zlib       --enable-smp-support       --enable-threads       --enable-wx       --with-ssl=/opt/homebrew/opt/openssl@1.1       --without-javac       --enable-darwin-64bit       --enable-kernel-poll       --with-dynamic-trace=dtrace > config.log`
[19:47:36] <benwilson512> do you need the make output too?
[19:47:59] <dch> benwilson512: if you can, yes thats helpful, but not if its painful to get
[19:52:03] <benwilson512> https://usercontent.irccloud-cdn.com/file/FWUDPhQX/make.log
[19:52:05] <benwilson512> dch: ^
[19:52:46] *** Joins: mekhami (~ldv@2605:a601:aaf2:ef00:383f:a991:12f0:4f28)
[19:55:44] <dch> thanks benwilson512 I'll dig around tonight. Also I think a friend has an M1 I can ssh into.
[20:00:35] <tmjoen> excited to see what you can find out!
[20:02:19] <benwilson512> dch: great, thanks so much for your help!
[20:03:56] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[20:04:05] *** Joins: sgn (~sgn@user/sgn)
[20:27:11] <hoppity> We are looking to hire a web GUI designer for a Phoenix + TailwindCSS project. Does anyone know where it would be a good place to find a good candidate?
[20:29:55] *** Joins: natrys (~natrys@user/natrys)
[20:33:47] <phaleth> hoppity: meetup in your area?
[20:34:18] <hoppity> phaleth: I did not know there were still meetups with the whole covid thing but that's a good idea, thanks
[20:36:04] <phaleth> yw
[20:36:26] *** Quits: natrys (~natrys@user/natrys) (Ping timeout: 252 seconds)
[20:37:47] *** Quits: brauliobz (~manjaro-u@user/brauliobz) (Ping timeout: 256 seconds)
[20:37:52] *** Joins: braulio-bz (~manjaro-u@user/brauliobz)
[20:39:29] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[20:43:27] *** Quits: braulio-bz (~manjaro-u@user/brauliobz) (Ping timeout: 256 seconds)
[20:44:08] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[20:51:23] *** Joins: natrys (~natrys@user/natrys)
[20:52:03] *** Joins: mahmutov (~mahmutov@37.155.33.70)
[21:00:24] *** Quits: equil (~u@user/eq) (Ping timeout: 268 seconds)
[21:01:44] *** Quits: mahmutov (~mahmutov@37.155.33.70) (Ping timeout: 252 seconds)
[21:02:06] *** Joins: mahmutov (~mahmutov@5.176.50.7)
[21:04:59] *** Joins: braulio-bz (~manjaro-u@user/brauliobz)
[21:06:20] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:58c0:b83a:3eea:a1cf) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:10:39] *** Joins: equil (~u@user/eq)
[21:14:34] *** Quits: mekhami (~ldv@2605:a601:aaf2:ef00:383f:a991:12f0:4f28) (Quit: WeeChat 2.8)
[21:27:16] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:58c0:b83a:3eea:a1cf)
[21:30:55] *** Joins: andreyorst_erc (~user@176.59.52.35)
[21:32:07] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[21:32:42] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[21:37:28] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 264 seconds)
[21:57:37] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
[22:00:23] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[22:00:33] *** Joins: sgn (~sgn@user/sgn)
[22:00:39] *** Joins: 073AAA7KZ (~w1ntermut@dslb-002-201-217-078.002.201.pools.vodafone-ip.de)
[22:02:13] *** Quits: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[22:02:56] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:07:08] *** Joins: odoood (~odoood@pool-71-251-227-104.rcmdva.fios.verizon.net)
[22:08:17] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[22:16:06] *** Quits: andrhua (~andrhua@31.134.187.8) (Remote host closed the connection)
[22:20:10] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:24:53] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[22:26:56] *** Joins: chgr (~ek@nat-91-137-30-14.net.encoline.de)
[22:32:57] <hoppity> Has anyone here goten the Js library "Datatables" to work on a Phoenix liveview app?
[22:34:49] *** Quits: fub (uid190747@id-190747.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[22:36:46] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:36:52] *** Quits: odoood (~odoood@pool-71-251-227-104.rcmdva.fios.verizon.net) (Ping timeout: 264 seconds)
[22:39:26] *** Joins: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au)
[22:42:16] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 264 seconds)
[22:44:09] *** Quits: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au) (Ping timeout: 256 seconds)
[22:51:11] *** Quits: siiky (~siiky@2001:8a0:ff7d:dd00:1f5d:a8bd:3bdc:60a8) (Ping timeout: 245 seconds)
[22:54:25] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:54:48] *** 073AAA7KZ is now known as _w1ntermute
[22:58:30] *** Joins: livoreno (~livoreno@user/notzmv)
[22:59:04] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 264 seconds)
[23:03:27] *** Quits: livoreno (~livoreno@user/notzmv) (Ping timeout: 265 seconds)
[23:04:30] *** Quits: _w1ntermute (~w1ntermut@dslb-002-201-217-078.002.201.pools.vodafone-ip.de) (Quit: Konversation terminated!)
[23:05:42] *** Quits: chgr (~ek@nat-91-137-30-14.net.encoline.de) (Quit: WeeChat 3.3)
[23:10:26] *** Joins: ur5us (~ur5us@2406:e002:6c7b:2301:f812:b76c:617f:99d7)
[23:14:50] *** Quits: mahmutov (~mahmutov@5.176.50.7) (Ping timeout: 252 seconds)
[23:30:15] *** Joins: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au)
[23:30:16] *** Joins: parv (~quass@user/parv)
[23:30:23] *** Quits: tmjoen (~textual@84.209.131.177) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:32:56] *** Quits: adrianhblack[m] (~adrianhbl@2001:470:69fc:105::1:30c9) (Ping timeout: 265 seconds)
[23:33:54] *** Quits: cro[m] (~orcmatrix@2001:470:69fc:105::1:2f1b) (Ping timeout: 265 seconds)
[23:33:54] *** Quits: PatrikStenmark[m (~patrikste@2001:470:69fc:105::bfa1) (Ping timeout: 265 seconds)
[23:34:35] *** Quits: withersh1 (~craig@pa49-184-231-51.pa.vic.optusnet.com.au) (Ping timeout: 256 seconds)
[23:46:41] *** Joins: adrianhblack[m] (~adrianhbl@2001:470:69fc:105::1:30c9)
[23:47:54] *** Quits: sm2n (~sm2n@user/sm2n) (Quit: Leaving)
[23:49:19] *** Quits: andreyorst_erc (~user@176.59.52.35) (Ping timeout: 256 seconds)
[23:49:28] *** Joins: PatrikStenmark[m (~patrikste@2001:470:69fc:105::bfa1)
[23:49:31] *** Joins: cro[m] (~orcmatrix@2001:470:69fc:105::1:2f1b)
[23:59:07] *** Joins: yauhsien (~yauhsien@61-231-58-114.dynamic-ip.hinet.net)
