[00:00:42] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[00:05:37] *** Joins: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick)
[00:07:11] *** Quits: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick) (Read error: Connection reset by peer)
[00:07:32] *** Joins: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick)
[00:08:54] *** Quits: Mr-Snick_ (mr-snick@gateway/vpn/protonvpn/mr-snick) (Ping timeout: 272 seconds)
[00:10:02] *** Quits: Mr-Snick__ (mr-snick@gateway/vpn/protonvpn/mr-snick) (Client Quit)
[00:14:34] *** Joins: Error (~err@user/error)
[00:14:55] *** Quits: Junxter (~Junxter@222.95.164.193) (Ping timeout: 256 seconds)
[00:25:00] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 240 seconds)
[00:27:11] *** Quits: Error (~err@user/error) (Quit: When we hang the capitalists they will sell us the rope we use - Joseph Stalin)
[00:30:05] *** Joins: Error (~err@user/error)
[00:30:47] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Quit: Leaving)
[00:32:05] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:a8be:1150:edc4:ea4d)
[00:35:25] *** Quits: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48) (Read error: Connection reset by peer)
[00:36:03] *** Joins: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48)
[00:36:29] *** Quits: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48) (Read error: Connection reset by peer)
[00:36:36] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:a8be:1150:edc4:ea4d) (Ping timeout: 245 seconds)
[00:37:06] *** Joins: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48)
[00:47:31] *** Quits: magla (~gelignite@d5361f17.access.ecotel.net) (Quit: Stay safe!)
[00:47:40] *** Joins: Junxter (~Junxter@222.95.164.193)
[01:10:36] *** Quits: hh (~g@37.214.26.148) (Remote host closed the connection)
[01:12:00] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:a8be:1150:edc4:ea4d)
[01:15:22] *** Joins: inoas (~ionas@ip-037-201-194-167.um10.pools.vodafone-ip.de)
[01:16:36] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:a8be:1150:edc4:ea4d) (Ping timeout: 245 seconds)
[01:19:23] <teresko> what's the standard approach for generating UUID in php?
[01:19:57] <teresko> it looks like the RFC died many years ago ..
[01:20:51] <judah> teresko, https://github.com/ramsey/uuid
[01:20:58] <Albright> teresko: Yeah, oddly PHP has a billion built-ins but nothing to make a uuid. I suggest using a library such as https://github.com/ramsey/uuid
[01:23:40] <teresko> also, should I stick with v4?
[01:24:09] <judah> 4 is random, which is a great place to start
[01:24:17] <judah> https://en.wikipedia.org/wiki/Universally_unique_identifier
[01:24:31] <teresko> which is why I was asking
[01:24:37] <judah> When you ask for a uuid, v4 is what most people think of. There are other types to note of, but you most likely want 4
[01:24:55] <Albright> Yeah.
[01:27:51] <judah> Also, not that it matters much, but if its going into a database do yourself a favor and store in binary
[01:28:36] <judah> taking a binary uuid and casting it to hex then encoding as text to store in a database, just to be indexed as text
[01:28:48] <judah> its not doing any favors
[01:28:56] *** Joins: hays (rootvegeta@fsf/member/hays)
[01:29:10] <Albright> I'd say to use your DB's standard UUID field type if it provides one. Otherwise, a string field which is set as a key never got anyone fired (that I'm aware of)
[01:29:18] <Albright> *varchar field
[01:29:29] <Albright> *unique/primary key
[01:30:01] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[01:30:26] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[01:31:30] *** Quits: d3sync (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr) (Read error: Connection reset by peer)
[01:31:57] *** Joins: d3sync (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr)
[01:32:07] <teresko> Albright: well, I am using PostgreSQL
[01:32:40] <Albright> Okay, use its UUID type then
[01:32:41] <teresko> as in: "real database"
[01:33:07] <teresko> yeah, already made it the changes in table before asking about versions
[01:34:09] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Read error: Connection reset by peer)
[01:34:34] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[01:36:06] *** Joins: wfpkhc (~wfpkhc@user/wfpkhc)
[01:36:12] * wfpkhc wanders into a channel
[01:36:15] * wfpkhc waves hello
[01:36:19] <wfpkhc> When building a class
[01:36:23] <biberu> Albright: using a varchar would waste a lot of space, both for data and indexes, and for something that's of a fixed length it'd probably perform worse
[01:36:29] <wfpkhc> its commont to use lowercase for method names
[01:36:56] <wfpkhc> should methods that are static still use this? or is capital letters for static function names be used?
[01:37:08] <teresko> camel-case for methods, pascal-case for class names
[01:37:09] <__adrian> wfpkhc: pick a style (or style guide, e.g., PSR2)
[01:37:17] <teresko> and static methods usually should not exist
[01:37:27] <wfpkhc> im using psr4
[01:37:39] <teresko> wfpkhc: so you have no idea what he said
[01:37:44] <__adrian> ^ but when they do, there's absolutely zero reason for them to be named differently from instance methods
[01:37:47] <__adrian> heh
[01:37:50] <wfpkhc> im using psr4 for namespaces
[01:37:52] <teresko> please read PSR-1, PSR-2 and PSR-12
[01:38:03] <__adrian> that has nothing to do with your question, nor my answer
[01:38:08] <Albright> biberu: Marginally worse, yes. Not enough for me (or anyone) to lose sleep over.
[01:38:09] <wfpkhc> ok
[01:39:18] <wfpkhc> looking at https://www.php-fig.org/psr/psr-2/
[01:39:31] <biberu> Albright: why would you design it like that though?
[01:39:58] <__adrian> wfpkhc: teresko's suggestion is the most common style these days. but point is to choose something and be consistent.
[01:40:02] <wfpkhc> so lower case
[01:40:10] <__adrian> and if you're working with someone else's code, you do it how they do it
[01:40:18] <__adrian> who said "lowercase" ?
[01:40:22] <Albright> biberu: Because it's fast and easy.
[01:40:26] <teresko> wfpkhc: do you know what "camel-case" is?
[01:40:31] <wfpkhc> yes - i have done that - been consistent - but im hoping to bring my project more inline with "common standards"
[01:40:34] <__adrian> even PSR-2 doesn't say "lowercase"
[01:40:34] <Albright> And more than good enough.
[01:40:50] <__adrian> var_dump($bins);
[01:40:56] <__adrian> damnit
[01:40:57] <wfpkhc> i use hungarian notation
[01:41:07] * teresko headdesks
[01:41:16] <__adrian> "wfpkhc> i use hungarian notation" no trolling pls
[01:41:20] <wfpkhc> https://www.php-fig.org/psr/psr-2/     4.5. abstract, final, and static
[01:41:38] <biberu> Albright: how is it easier than doing it the right way?
[01:42:01] <wfpkhc> thank you
[01:42:10] * wfpkhc hugs everyone and runs out
[01:42:13] *** Quits: wfpkhc (~wfpkhc@user/wfpkhc) (Quit: Leaving)
[01:42:31] <__adrian> ofc he wasn't trolling, he was serious. but...
[01:43:24] <teresko> his reading comprehension skill seem to be at 4th grade level
[01:43:52] <teresko> maybe 2nd grade, if you use eastern europian standards
[01:44:02] <__adrian> i think it's more jumping-to-conclusions
[01:44:47] <__adrian> the idea that he'd try to conform with common practice is remarkable. a good step forward. let's focus on that.
[01:44:53] <teresko> he was looking for naming convention for static methods ... and the section he "chose as proof" was talking abourt what case should bve used for `static` reserved word
[01:45:30] <__adrian> hm
[01:45:44] <teresko> it's reading comprehension
[01:45:44] <__adrian> fig actually deprecated psr-2. didn't realize that was the plan.
[01:45:52] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[01:46:19] <__adrian> comprehension is something one should be happy to deal with so long as there's effort.
[01:46:27] *** Parts: [twisti] (~twisti@toadwater.com) ()
[01:46:33] <teresko> oŌ
[01:47:47] <__adrian> i'm thinking you read that as "forgiven"
[01:48:13] <teresko> it's mean to be raised eyebrow
[01:48:17] <teresko> *meant
[01:48:23] <__adrian> got it
[01:49:19] <teresko> also, I had forgotten how half-assed the PSR standards are
[01:49:28] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[01:49:33] <__adrian> they're works of a committee
[01:50:34] <Albright> biberu: Because you don't have to manually translate the uuid to some other format and back. At any rate it doesn't seem like I'm likely to change your mind on this, so feel free to go ahead doing things your way and I'll do them mine.
[01:50:43] <__adrian> a committee made of individuals that, to some extent or another, are championing particular practices that they like and/or would cause them the least work on their own projects if adopted
[01:51:33] <biberu> Albright: why would you change it back and forth?
[01:52:41] <teresko> only thing I'm going to do is make it a "named sting" type basicbitch ValueObject
[01:52:51] <teresko> just for nicer typehint
[01:53:01] <teresko> *named string
[01:54:10] <teresko> btw, recently I *finally* figured out what was the point of postgres' schemas
[01:54:39] *** Quits: mintoyatsu (~mint@user/mintoyatsu) (Remote host closed the connection)
[01:55:00] <teresko> which means that my latest parsonal project has a bit mor fancier DB structure
[01:56:36] *** freeworld is now known as Guest6792
[01:57:11] <Guest6792> Hii where can find the best informations about pattern design OOP
[01:57:34] <Guest6792> where can i find the best informations about pattern design OOP
[01:59:00] <teresko> https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612
[01:59:51] <teresko> but I strongly suspect that you have the wrong idea regarding the point of design patterns
[02:00:08] <teresko> design patterns are NOT blueprints for your code
[02:00:39] <teresko> instead they are just shorthands, that you can use, when describing code that you have ALREADY written
[02:02:44] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[02:03:47] <__adrian> many patterns are standard solutions to common problems - some of which are already solved in particular languages, or are just problems you don't have
[02:12:50] <Guest6792> i can see that more pattern designs for example: CREATIONAL PATTERN DESIGN, STRUCTURAL PATTERN DESIGN, BEHAVIORAL PATTERN DESIGN -> and this pattern designs have i think that subgroups CREATIONAL DESIGNS -> Constructor, Factory, Abstract Factory, Prototype, Singleton, Builder ; Structural Design -> Adapter, Bridge, Composite, Decorator, Facade, Flyweight, Proxy ; BEHAVIORAL DESIGN -> Chain of responsibility, Command, Iterator, Mediator, Memento,
[02:12:52] <Guest6792> Observer, State , Strategy, Template method, Visitor
[02:13:59] <Guest6792> but i don't know if when i choose behavioral pattern design if i must programming pattern design under this behavioral design
[02:14:23] <Guest6792> i can't find informations about it anywhere
[02:20:32] <__adrian> pretty easy to find. "object oriented design patterns"
[02:20:58] <__adrian> start with wikipedia, even.
[02:21:22] <__adrian> or the book teresko mentioned, ofc.
[02:21:41] <__adrian> (that's "the book")
[02:22:29] <teresko> as an alternative, I personally read https://www.amazon.com/Design-Patterns-Explained-Perspective-Oriented/dp/0321247140 long time ago
[02:22:49] <teresko> IIRC it had for each pattern "how not to use it" section
[02:23:08] <__adrian> "how not to use" is useful
[02:25:51] <teresko> for some reason it always reminds me of https://brajeshwar.com/2005/resign-patterns-ailments-of-unsuitable-project-disoriented-software/
[02:31:45] <Guest6792> ok i'll looking at it
[02:31:52] <Guest6792> thanks
[02:33:45] *** Joins: olle (~olle@i5E866D83.versanet.de)
[02:33:56] <olle> Oh, it works to pass references to object properties...
[02:34:09] <__adrian> -___-
[02:34:16] <teresko> wat
[02:34:23] <olle> Sec
[02:34:45] <olle> https://paste.centos.org/view/2028fd42
[02:34:56] <olle> function moo(&$property)
[02:35:01] <olle> moo($thing->prop);
[02:35:37] <TML> olle: in most cases, if you type & in your userland PHP code, you're probably doing something wrong
[02:36:08] <olle> ;)
[02:36:28] <olle> Like trying to do embedded DSL? :D
[02:36:29] <olle> Phew
[02:37:22] <teresko> I know that D stands for Dysfunctional and L is for lies ... no sure if there is a polite version for S
[02:37:27] <Guest6792> i understand that patterns are optional ?? i can also create own pattern designs ???
[02:38:14] <Guest6792> i can see that modern pattern design and probably very good pattern design is MVC - model, view, controller
[02:38:28] <teresko> thise are architectural patterns
[02:38:32] <teresko> *those
[02:38:37] <olle> teresko: I mean, we all do it. SQL builders, for example.
[02:38:37] <teresko> and there is a different book for that
[02:39:06] <TML> olle: Speak for yourself. Never used an "SQL builder", never plan to.
[02:39:17] <teresko> Guest6792: those are in https://www.amazon.com/Patterns-Enterprise-Application-Architecture-Martin/dp/0321127420
[02:39:30] *** Joins: ferdna (~ferdna@user/ferdna)
[02:39:47] *** Quits: guido (~weechat@host-95-238-17-169.retail.telecomitalia.it) (Quit: WeeChat 3.4)
[02:40:00] <teresko> olle: the most I have built is a "WhereBuilder" and that did not require that type of heracy
[02:40:08] <olle> TML: Welcome to 1999 :)
[02:40:25] <teresko> shold we send aid or guns?
[02:40:40] <TML> olle: The only SQL you'll ever see in my PHP is 'select <list all columns> from <view_name>'
[02:40:58] <TML> maybe an occasional where clause, depending on the purpose of the SQL
[02:41:20] <teresko> I sometimes need a bit more complicated WHERE in my collection mappers
[02:41:33] <teresko> especially if API endpoint need filters/search
[02:41:39] <teresko> *needs
[02:42:18] <TML> olle: we keep all logic in the database views because we have multiple pieces of software in multiple programming languages that need to get the exact same behaviour, and it's easier to control that on the database than to have the DBAs reviewing every line of Ruby, PHP, Perl, Python, Java, C, C++, Lisp, Flex, D, BOB/J, and Lua.
[02:42:37] <teresko> Guest6792: btw, it might surprise you, but if you think you understand MVC from looking at PHP frameworks - you don't
[02:42:56] <olle> TML: That's the opposite of my situation - one app, multiple db vendors
[02:43:07] *** Quits: inoas (~ionas@ip-037-201-194-167.um10.pools.vodafone-ip.de) (Quit: Leaving...)
[02:43:09] <teresko> TML: how do you handle versioning of the database?
[02:43:10] <TML> Having PHP code and Ruby code give slightly different results because of either an SQL builder or a developer's poor SQL skills would be absolutely catastrophic
[02:43:23] <TML> teresko: The database is maintained as its own distinct code project
[02:43:37] <TML> It's not written in a third-party language
[02:43:53] <teresko> hh .. yeah ... "we have a team for that" is not really practical in my case
[02:45:55] <TML> *shrug* we have a 200+TiB database with what I would assume are trillions of rows at this point, though I haven't checked row counts in a few years
[02:46:08] <TML> "we maintain that in our PHP code" is not practical for us
[02:46:55] <olle> What domain is this?
[02:47:07] <teresko> that's about 10x of what I have at work
[02:47:32] <TML> esp. given that some of those views have to be materialized in order to provide assured response times to certain queries for legal/compliance reasons
[02:48:19] <TML> teresko: and you maintain the SQL code inside your PHP project?
[02:48:40] <Guest6792> teresko: why, or what is or where is there problem in php frameworks ?
[02:49:36] <teresko> TML: unfortunetally, we do ... doctrine migrations ... I hate every moment of it, but it was as choice made long before my time and I still don't have the seniority there to start changing everything
[02:49:46] *** Quits: pmercado_ (~pmercado@186.107.38.28) (Ping timeout: 272 seconds)
[02:49:47] *** Joins: thiras (~thiras@user/thiras)
[02:50:02] <TML> teresko: seems like your project is overdue for a major error :(
[02:50:31] <teresko> I probably will be gone by then
[02:50:40] <olle> Oh, references work for array keys too: `moo($arr['thing']);`
[02:50:55] <teresko> bosses announced taht "inflation is not a good reason to readjust salaries"
[02:51:25] <TML> ah - so you're trapped in the Hellmouth
[02:51:58] <teresko> olle: you probably should give it a fancy name and make a PR for Laravel
[02:53:27] <teresko> TML: kinda .. but the work itself is very chill .. I will see what happens in the news few months and if it's still stupid, will start looking for a new place
[02:53:31] <olle> teresko: A DSL?
[02:53:34] <olle> The*
[02:54:25] <teresko> call it "domain inclusive mutations"
[02:55:05] <olle> Tagless-final - already has a fancy and obscure name
[02:57:59] <Guest6792> teresko: how do you thought with those frameworks
[02:58:37] <teresko> Guest6792: it stems from the fact that majority of frameworks are optimized for "presentation slides". The default use-cases are very simple. That results in meaning for the application layers to be lost. In particular, business logic leaking in the application layer and mergin of User interface and Presentation layers
[02:59:34] <teresko> yoiu get a lot of "fancy scaffolding" and using the name for "marketing purposes" (like referring to dumb tamplates as "views")
[03:00:24] <teresko> oh ... and active record anti-pattern everywhere
[03:02:22] <olle> Might be good enough for lots of use-cases
[03:03:22] <teresko> yes, but only for the very simple ones
[03:03:43] <teresko> ya know, like "make a blog" ... which is very nice to show in a conference presentation
[03:05:58] <teresko> and then you, the young and plucky specialst, have to make a complex CRM system and your rapid-prototyping framework turns out to not be up to it .... a month after you have published it, because database has finally had data filled in
[03:09:26] <olle> "Choose the right tool for the job" --> Wordpress :D
[03:09:56] * olle wishes we used Wordpress instead of Joomla...
[03:10:49] <teresko> that like wishing for differen spieces of intestinal worms
[03:10:59] <teresko> *that's
[03:11:13] <teresko> (many typos)
[03:11:18] <olle> Anything to get me out of manually writing the localization import/export script
[03:13:07] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[03:13:15] <BadAdviceCat> LMAO.
[03:13:32] <olle> Are you laughing with me or at me?
[03:13:44] <BadAdviceCat> olle, at you! :D
[03:13:47] <olle> :(
[03:14:24] <olle> You'd think it's a "solved problem" with translations
[03:14:26] <olle> Apparently not
[03:14:29] <olle> In Joomla world
[03:15:09] <teresko> hmmm .... with UUID it seems taht I can actually use a shared Identity Map (fancy name for "runtime cache") in all of my repositories
[03:15:43] *** Joins: tex (~super@user/dix)
[03:15:50] <BadAdviceCat> olle, almost 2 hours ago, https://paste.gg/p/anonymous/0e3dbc6230fd483abfe6678608d3b889 xD
[03:16:41] <olle> Yep, we have lots of that in our legacy app
[03:17:04] <teresko> are you, per chance, using Yii?
[03:17:09] <olle> Trying to purge it step by step
[03:17:14] <olle> teresko: Yii 1, nothing less :D
[03:17:19] <olle> No, Yii 2 too internally
[03:17:40] <olle> purge = replace with psalm notation
[03:18:26] <teresko> I suspect you also need holy water for cooling the servers
[03:18:44] <olle> Nah, it's all good
[03:18:46] <teresko> I had to work with Yii for a year, long long time ago ... I can still remember
[03:18:53] <olle> Yii 1?
[03:18:56] <teresko> yeah
[03:19:01] <olle> It's old now
[03:19:08] <teresko> so am I
[03:19:12] <olle> ^^
[03:19:42] <olle> Well, our app used NO framework before Yii, so
[03:20:02] <teresko> it's what you get when DJango developer fucks a CakePHP developer
[03:20:34] <teresko> so, no, I think "no framework" would be the preferable option
[03:20:55] <teresko> the "app" god object still makes me angry
[03:21:10] <teresko> or should I call it "god singleton"
[03:21:49] <teresko> and it's a gnostic god
[03:23:08] <olle> So don't use it?
[03:23:17] <olle> Inject the parts of it you need in each service
[03:23:56] <teresko> that's what I would do in 2021, yes, but I worked on it ... dunno .. maybe 2008 or 2010
[03:24:05] <olle> Mm
[03:24:25] <olle> But still: You can use old frameworks in new ways to reduce the "damage" of global stuff etc
[03:24:40] <teresko> I know, we at work have ZF2
[03:25:53] <olle> Dunno anything about really. Except repo pattern.
[03:28:23] <jamesmartinez> teresko: I enjoy ZF2
[03:30:56] <teresko> there is no accounting for lack of taste
[03:31:45] <olle> Well
[03:31:52] <olle> Can't go online without strong opinions, you know :)
[03:33:15] <teresko> anywa, I think I should go AFK, since I have to be awake for the Daily at 10AM
[03:33:17] <teresko> nn
[03:34:31] <olle> \o
[03:36:35] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[03:45:37] <olle> Fowler wrote a book on DSLs
[03:45:39] <olle> Neat!
[03:45:48] <olle> https://martinfowler.com/bliki/FluentInterface.html
[03:45:51] <olle> Related
[03:47:35] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[03:48:40] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[03:56:46] *** Quits: olle (~olle@i5E866D83.versanet.de) (Ping timeout: 256 seconds)
[04:00:34] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[04:02:47] *** Quits: tex (~super@user/dix) (Quit: tex)
[04:04:17] <Guest6792> teresko: Thanks for advice
[04:07:17] <TML> man, I thought that whole craze around "Fluent APIs" died
[04:15:00] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 240 seconds)
[04:32:11] *** Quits: Guest6792 (~vit@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[04:36:06] *** Quits: Bitflux (~byte@byteflux.net) (Quit: ZNC - https://znc.in)
[04:36:18] *** Joins: Byteflux (~byte@byteflux.net)
[04:42:58] *** Joins: Rockwood (~Rocky@user/rocky)
[04:43:48] *** Quits: tccki (~tccki@box.webslate.co.nz) (Ping timeout: 256 seconds)
[04:44:58] *** Joins: tccki (~tccki@box.webslate.co.nz)
[04:45:13] *** Quits: Poboy (~Poboy@user/poboy) (Ping timeout: 256 seconds)
[05:11:38] *** Quits: joo-_ (~joo-_@fsf/member/joo--) (Ping timeout: 272 seconds)
[05:23:46] <znf> Hm.
[05:24:11] <znf> Why is this code https://pastie.dev/nCmNIG.php -- complaining that $raw_data (line 52) is empty when I do `echo something | ./script.php`
[05:25:41] <__adrian> because it's potentially not defined
[05:26:13] <__adrian> i'd guess either you couldn't open stdin, or there were no lines
[05:26:30] <znf> would I need a newline \n ?
[05:26:30] <__adrian> note that   $some_variable;  on its own doesn't accomplish anything
[05:26:35] <__adrian> what?
[05:27:03] <znf> do I need a newline in the stdin for that code to read it properly?
[05:27:12] <__adrian> by "complaininng" do you mean, there's an error? e.g., "undefined variable $raw_data" ?
[05:27:20] <znf> yeah
[05:27:49] <__adrian> look at line 43. you might not be doiong anything at all.
[05:27:57] <__adrian> var_dump($stdin_fh);
[05:28:58] <znf> resource(5) of type (stream)
[05:29:06] <znf> Notice: Undefined variable: raw_data in /root/cpanel_hooks/email_filters.php on line 45
[05:29:12] <znf> (changed the code a bit)
[05:29:18] <znf> (as in, repositioned some stuff)
[05:29:54] <__adrian> so after your while loop, var_dump($raw_data);
[05:30:17] <__adrian> or more to the point, _inside_ your while() loop,  echo ".";
[05:30:19] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:30:38] <znf> yeah, $raw_data is there, string resource
[05:30:38] <__adrian> or  var_dump($line);
[05:30:45] <__adrian> what?
[05:31:09] <__adrian> $raw_data will never be a resource
[05:31:13] <znf> https://pastie.dev/hUr6uf.apache
[05:31:16] <znf> oh, wait you said line
[05:31:35] <__adrian> Notice: Undefined variable: raw_data  ← that's what i thought
[05:31:41] <__adrian> now dump $line
[05:32:10] <znf> https://pastie.dev/NCm8Ht.php
[05:32:21] <znf> output at the end, 70:
[05:32:39] <__adrian> $line is "aaaaaaaaa" ?
[05:32:56] <znf> aaaaaaaaaa\n by the looks of it
[05:33:17] <__adrian> the undefined variable error is from line 46
[05:33:20] <znf> oh
[05:33:24] <znf> it's the .=
[05:33:28] <__adrian> you try to append to a variable that doesn't exist
[05:33:36] <znf> got it
[05:33:43] <__adrian> back up, remember what i said about line 39
[05:33:45] <znf> why would they put this code in the documentation, damn it
[05:33:49] <znf> yeah
[05:33:49] <__adrian> it's useless. does nothing.
[05:34:01] <__adrian> $raw_data = "";  otoh, would.
[05:34:04] <znf> it's their boilerplate code from the documentation, kinda weird
[05:34:13] <__adrian> so here's something else to consider
[05:34:25] <__adrian> don't do it this way.  https://www.php.net/commandline.io-streams
[05:34:50] <__adrian> you can also file_get_contents it.
[05:35:10] <__adrian> you're trying to get all of stdin and json_decode it, yes?
[05:35:50] <znf> yup, I *think* that's what their internal plugin stuff uses, just passes a json string to stdin for the scripts it calls
[05:36:10] <znf> And that's the code they showcase https://api.docs.cpanel.net/guides/guide-to-standardized-hooks/guide-to-standardized-hooks-hook-action-code#php-script
[05:37:25] <__adrian> $input = json_decode(file_get_contents(STDIN), true, 512, JSON_THROW_ON_ERROR);
[05:38:04] <Rockwood> __adrian, hi sir
[05:38:50] <znf> what's the 512 for?
[05:39:00] <znf> 512 bytes buffers (?)
[05:39:16] <znf> no wait, that's to json_decode
[05:39:22] <__adrian> https://php.net/json_decode
[05:39:45] <__adrian> it's the default $depth (my intent is only to set JSON_THROW_ON_ERROR)
[05:43:42] <znf> I see
[05:46:42] *** Quits: MetroConductor (~MetroCond@user/MetroConductor) (Remote host closed the connection)
[05:50:17] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[05:50:32] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 250 seconds)
[05:55:02] *** Joins: Hiccup (cHoy@user/hiccup)
[06:06:12] *** Quits: justAstache (~justache@user/justache) (Remote host closed the connection)
[06:06:40] *** Joins: justAstache (~justache@user/justache)
[06:09:09] <znf> is there a better way of checking for --options other than doing array_key_exists() on getopt?
[06:09:44] <__adrian> sure, https://symfony.com/doc/current/console/input.html
[06:09:48] <__adrian> :p
[06:11:44] <znf> uh, no
[06:11:58] <znf> I've been spoiled by Python's argparse :P
[06:12:35] <Albright> znf: https://packagist.org/packages/zozlak/argparse
[06:12:48] <Albright> https://github.com/zozlak/argparse even
[06:13:23] <znf> I figured that must exist, but it's a needless dep for a CLI script :)
[06:14:17] <Albright> PHP's CLI tools are sufficient in a "you should be able to do anything some way or other" sense but not as deep as other languages, no.
[06:14:59] <znf> uhm, why does the last if break the script completely? https://pastie.dev/J8GVtb.php
[06:15:11] <znf> there's no error
[06:15:16] <__adrian> define "break completely"
[06:15:21] <znf> returns nothing
[06:15:40] <__adrian> what's the result of  array_key_exists('add-forward', $options)  ?
[06:15:47] <Albright> Well, you're not doing anything with $input
[06:15:56] <znf> but I'm not reaching $input
[06:16:08] <znf> __adrian, I don't know, not even the var_dump() above returns anything
[06:16:19] <__adrian> on :35?
[06:16:25] <znf> yeah
[06:16:41] <__adrian> if the script isn't getting to :35, why would you assume the problem is on :43 ?
[06:16:51] <znf> if I comment out the last if block, the var_dump returns
[06:16:53] <Blondie101010> znf: aren't you used to having a ton of dependencies in Python?
[06:16:54] <znf> (and --describe works)
[06:17:17] <znf> Blondie101010, yes, but argparse is /usually/ a given in most environments so I don't have to handle them manually
[06:17:34] <__adrian> php -l
[06:17:49] <znf> error parsing
[06:17:51] <znf> wth
[06:18:01] <__adrian> !+error logging
[06:18:01] <php-bot> In addition to configuring error reporting (/msg php-bot error reporting), set log_errors=1 and error_log=/path/to/your/error.log in your php.ini file. This allows you to simply tail the log to see errors, and to disable display_errors (e.g., during production).
[06:18:02] <Blondie101010> that package is on packagist...  easier to install than any Python lib
[06:19:08] <__adrian> znf: highly recommend an editor or IDE that, at a minimum, does syntax highlighting and basic parsing.
[06:19:09] <znf> Blondie101010, yes, but then it wouldn't be a single-file script anymore and I'd have to ship/install it on my targets, while in this case argparse is already on the system due to whatever other deps are there
[06:19:22] <__adrian> heh
[06:19:41] <Albright> znf: On line 46, you need "catch (Exception $e) {"
[06:19:41] <znf> __adrian, I am running vim with a php linter, just not sure why it's not screaming at me in this case
[06:19:46] <znf> Albright, yes, I figured :)
[06:20:08] <znf> my usual vim environment is on ubuntu/debian, and I'm writing this on RHEL-based distro, things are kinda weird
[06:20:18] <Albright> I'm not sure what line 1 is about but maybe the -q is causing PHP to not cry about that error?
[06:21:58] <znf> it's meant to suppress output, by cpanel's boilerplate, wonder if that would break anything if I just remove it
[06:22:33] <Albright> If it does and you can't use Cpanel anymore, it will do you a favor
[06:23:09] <znf> kinda hard when it's one of our main business points :P
[06:23:18] *** Joins: mlu (~mlu@user/mlu)
[06:23:46] *** Quits: Rockwood (~Rocky@user/rocky) (Read error: Connection reset by peer)
[06:23:47] <__adrian> interesting. one of our main selling points is that we _don't_ use cpanel
[06:23:57] <znf> It's incredibly popular
[06:24:07] <__adrian> and expensive
[06:24:07] *** Joins: Rockwood (~Rocky@user/rocky)
[06:24:20] <__adrian> ;)
[06:24:21] *** BadAdviceCat is now known as Nekomander
[06:24:25] <znf> We don't use it for our big clients, but think we host over 2000 cpanel accounts at this point
[06:24:27] <mlu> I personally dislike CPanel
[06:24:38] <mlu> quite annoying and is really just a security hole
[06:24:41] <znf> it is, indeed, kinda expensive
[06:24:49] <znf> mlu, how is it a security hole? :)
[06:24:50] <mlu> but so many people are so used to it :(
[06:25:07] <mlu> znf: ** potential security hole
[06:25:19] <znf> everything is a potential security hole if you think at it that way
[06:25:37] <mlu> it is: I just personally think of CPanel as one of those all-too-powerful clicky tools
[06:25:49] <znf> It's not inherently terrible, mind you
[06:26:08] *** Joins: Rockwood_ (~Rocky@user/rocky)
[06:26:08] <mlu> it's less terrible than WebMin, for example
[06:26:30] <znf> My biggest annoyance is that a few of it's core functions are half-baked, and you need to buy *extra* stuff to deploy it as a shared hosting platform
[06:26:30] *** Quits: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net) (Ping timeout: 250 seconds)
[06:26:37] <mlu> and the exposed surface area is similar to that of DirectAdmin at the end of the day
[06:26:54] <znf> ie: CloudLinux, LiteSpeed, JetBackup, Imunify 360
[06:27:22] <znf> eh, DirectAdmin is absolutely terrible to be fair
[06:27:56] <mlu> it is :P
[06:28:06] <znf> cPanel is relatively fine
[06:28:25] <mlu> I like to emphasize relatively here
[06:28:51] <znf> well, if I personally get the choice of cPanel or nothing, I prefer nothing
[06:29:00] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 240 seconds)
[06:29:11] <znf> between cPanel and... well, any other "webhosting panel" that I have tried, I'll pick cPanel
[06:29:31] <znf> DirectAdmin feels like a decade behind, if you ask me
[06:29:51] <znf> granted: I'm mostly speaking from the perspective of a server administrator
[06:31:06] <mlu> I'm 100% with you there
[06:31:40] <mlu> I'm like: it's a static web host: how much do you really need?
[06:32:04] <znf> static websites are incredibly rare at this point, looking at our customer base
[06:32:14] <znf> probably more than half are Wordpress
[06:32:47] <Albright> I have recently been working on a WordPress site for a client and oh my God
[06:33:00] <mlu> znf: you own this webhost, or do you just work there?
[06:33:03] <Albright> It's like going back in time two decades
[06:33:40] <znf> mlu, we're very a small webhosting company, I work there, but think "very small" = under 5 employees :)
[06:33:52] <mlu> hehe, which region?
[06:33:56] <znf> Eastern Europe
[06:34:16] <mlu> hmm, dang, have a list but everyone I know is based in north america
[06:34:56] <mlu> znf: will note to ask you if some of my Belarusian friends need a fast-loading wordpress host though
[06:35:18] <znf> I doubt our peering with Belarus is decent :D
[06:35:58] <mlu> in my experience, Belarus tends to route through Stockholm
[06:36:05] *** Joins: naimz82 (~naim@175.143.179.255)
[06:36:50] <znf> Our "big" clients are just nginx+php+mysql
[06:37:17] <mlu> hmm... LAMP except with N these days?
[06:37:18] <znf> We don't offer "managed" cPanel for example.
[06:37:34] <znf> "LEMP" :)
[06:37:40] <znf> that's how you'll find it referred to as
[06:38:38] <mlu> wonder what the E stands for: egress?
[06:38:53] <znf> eNginx :P
[06:38:58] <mlu> :D
[06:39:11] <znf> nginx (pronounced engine-x, hence the E in the acronym)
[06:39:47] * mlu sees a few cogs spinning in his brain
[06:45:22] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 272 seconds)
[06:50:34] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[06:53:24] *** Joins: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net)
[06:55:55] *** Joins: pmercado_ (~pmercado@186.107.58.161)
[06:58:32] *** Rockwood_ is now known as Rockwood
[07:00:35] <znf> __adrian, is STDIN supposed to be a constant for php://stdin ?
[07:01:24] <Blondie101010> "constant" is certainly the wrong term
[07:02:01] <Blondie101010> https://3v4l.org/T0CBd
[07:03:17] <__adrian> it's a "magic const," so more like it's called a const butit'smore like a read-only variable
[07:03:37] <__adrian> see docs
[07:03:40] <znf> so why is file_get_contents(STDIN) not working in this case, but file_get_contents('php://stdin') does?
[07:03:42] <znf> I'm getting Warning: file_get_contents() expects parameter 1 to be a valid path, resource given in /var/cpanel/chroot_hooks/email_filters.php on line 43
[07:03:43] <__adrian> it's an "already-open stream"
[07:03:55] <__adrian> oh, bleh. yeah, that's my bad.
[07:04:03] *** Joins: slashasdf (~slashasdf@030-245-128-083.dynamic.caiway.nl)
[07:04:09] <__adrian> file_get_contents('php://stdin')   yes
[07:04:10] <Blondie101010> !+file_get_contents
[07:04:10] <php-bot> string file_get_contents(string filename [, long flags [, resource context [, long offset [, long maxlen]]]])  - Read the entire file into a string - http://php.net/file_get_contents
[07:04:19] <Blondie101010> that takes a filename, not a resource
[07:04:25] <__adrian> yep. my bad.
[07:04:29] <znf> I followed blindly :)
[07:04:44] <__adrian> ah ha! let that be a lesson to you
[07:05:07] <znf> ...I'll never learn
[07:08:29] *** Joins: christianPHP (~christian@190.232.168.7)
[07:11:46] *** Quits: Rockwood (~Rocky@user/rocky) (Read error: Connection reset by peer)
[07:12:07] *** Joins: Rockwood (~Rocky@user/rocky)
[07:13:48] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 240 seconds)
[07:25:30] <znf> can I easily flatten the 'data' key somehow so I can get all those domains in a single array? https://pastie.dev/QMAmEn.json
[07:26:46] <znf> array_values() perhaps?
[07:35:13] *** Joins: bluehoney (~bluehoney@gateway/vpn/pia/bluehoney)
[07:39:50] *** Quits: slashasdf (~slashasdf@030-245-128-083.dynamic.caiway.nl) (Ping timeout: 272 seconds)
[07:42:42] <Blondie101010> far from it...  you're dealing with an object
[07:43:12] <Blondie101010> and the properties are mixed types
[07:43:33] <Blondie101010> just write it in 3-4 lines
[07:47:37] <Blondie101010> $domains = array_merge([$obj->data->main_domain], $obj->data->parked_domains, $obj->data->sub_domains, $obj->data->addon_domains);
[07:51:18] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[07:51:39] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[08:02:01] *** Joins: toastloop (~toastloop@user/toastloop)
[08:10:28] *** Quits: Rockwood (~Rocky@user/rocky) (Read error: Connection reset by peer)
[08:20:59] *** ChanServ sets mode: +o __adrian
[08:21:01] *** __adrian sets mode: +v Blondie101010
[08:21:09] *** ChanServ sets mode: -o __adrian
[08:22:25] *** Quits: newwebdev13 (~newwebdev@78.135.91.153) (Quit: Leaving)
[08:32:32] *** Quits: toastloop (~toastloop@user/toastloop) (Quit: WeeChat 3.5-dev)
[08:32:53] *** Joins: toastloop (~toastloop@user/toastloop)
[08:38:52] *** Quits: christianPHP (~christian@190.232.168.7) (Quit: Client closed)
[08:49:19] *** Joins: thiras (~thiras@user/thiras)
[08:50:48] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 250 seconds)
[08:56:32] *** Quits: pmercado_ (~pmercado@186.107.58.161) (Ping timeout: 256 seconds)
[08:59:27] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[09:12:53] <TML> Sammitch: You around?
[09:14:57] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 256 seconds)
[09:24:31] *** Joins: sebbu (~sebbu@user/sebbu)
[09:29:37] *** Joins: thiras (~thiras@user/thiras)
[09:29:45] *** Joins: stenno (~stenno@user/stenno)
[09:34:12] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[09:37:10] *** Joins: ramblebamble (ramblebamb@gateway/vpn/protonvpn/ramblebamble)
[09:47:49] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 256 seconds)
[09:49:24] *** Quits: Pixi (~Pixi@user/pixi) (Ping timeout: 252 seconds)
[09:51:49] *** Joins: Pixi (~Pixi@user/pixi)
[09:54:36] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[09:58:18] *** Joins: doubleplusuncool (~doubleplu@user/doubleplusuncool)
[09:59:30] *** Joins: stenno (~stenno@user/stenno)
[10:08:29] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[10:09:24] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[10:09:50] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[10:14:47] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[10:19:10] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[10:28:17] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662)
[10:49:34] *** Quits: ramblebamble (ramblebamb@gateway/vpn/protonvpn/ramblebamble) (Quit: quick everyone outta the universe)
[10:54:50] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[10:57:08] *** Quits: tercaL (~tercaL@user/tercal) (Remote host closed the connection)
[11:11:49] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:13:26] *** Joins: roadie (~user@2a02:8108:5a40:1d87:3d55:e1ba:c614:431c)
[11:14:29] *** Joins: stenno (~stenno@user/stenno)
[11:22:56] *** Joins: pycode (~pycode3@2001:b07:5d28:551:8cd3:c6f7:4118:8d3b)
[11:30:03] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[11:34:02] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Remote host closed the connection)
[11:35:10] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[11:35:36] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::e3bb)
[11:40:56] *** Quits: naimz82 (~naim@175.143.179.255) (Quit: Leaving)
[11:42:09] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::e3bb) (Ping timeout: 250 seconds)
[11:54:48] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::e3bb)
[11:55:00] *** Joins: LucaTM (~LucaTM@user/lucatm)
[11:58:23] *** Quits: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48) (Read error: Connection reset by peer)
[11:59:01] *** Joins: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48)
[11:59:27] *** Quits: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48) (Read error: Connection reset by peer)
[12:00:04] *** Joins: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48)
[12:11:01] *** Quits: Kilroy7 (~thelounge@user/Kilroy) (Quit: Ping timeout (120 seconds))
[12:11:51] *** Joins: Kilroy7 (~thelounge@user/Kilroy)
[12:13:47] *** Quits: poseidon_ (~broseidon@users.757.org) (Ping timeout: 250 seconds)
[12:24:24] *** Quits: marc-o (e23c17097e@vps71629.serveur-vps.net) (Quit: Gateway shutdown)
[12:25:53] *** Quits: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48) (Read error: Connection reset by peer)
[12:26:00] *** Quits: oztunan (~oztunan@oztunan.org) (Quit: In the morning!)
[12:26:31] *** Joins: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48)
[12:26:53] *** Quits: onichomp (~onichomp@2806:264:4408:1f2:e911:cc31:4d8c:5e48) (Read error: Connection reset by peer)
[12:26:59] *** Joins: oztunan (~oztunan@oztunan.org)
[12:40:03] *** Joins: mintoyatsu (~mint@user/mintoyatsu)
[12:43:04] *** Joins: olle (~olle@i5E866D84.versanet.de)
[12:43:49] *** Quits: konrados (~konrados@user-94-254-225-58.play-internet.pl) (Ping timeout: 256 seconds)
[12:44:58] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Quit: elastic_dog)
[12:46:12] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[12:47:26] *** Joins: Guest6792 (~vit@chello085216193138.chello.sk)
[12:51:37] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[12:53:51] *** Joins: slashasdf (~slashasdf@030-245-128-083.dynamic.caiway.nl)
[12:58:46] *** Joins: konrados (~konrados@user-94-254-225-58.play-internet.pl)
[13:00:04] *** Quits: konrados (~konrados@user-94-254-225-58.play-internet.pl) (Read error: Connection reset by peer)
[13:01:00] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::e3bb) (Ping timeout: 240 seconds)
[13:06:45] *** Joins: konrados (~konrados@user-94-254-166-2.play-internet.pl)
[13:07:35] *** Quits: konrados (~konrados@user-94-254-166-2.play-internet.pl) (Remote host closed the connection)
[13:13:00] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Remote host closed the connection)
[13:13:20] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[13:26:12] *** Joins: freeman_h (~freeman_h@37.120.159.215)
[13:26:38] <freeman_h> hi guys, in linux how can I see how much thread the fpm is using?
[13:31:54] <olle> htop?
[13:37:03] *** Quits: m5zs7k (aquares@web10.mydevil.net) (Ping timeout: 272 seconds)
[13:38:13] *** Joins: m5zs7k (aquares@web10.mydevil.net)
[13:43:49] <olle> If you mean CPU
[13:43:52] <olle> iotop for disk access
[13:44:29] <Naktibalda> I thought that fpm is a process manager, does it use threads?
[13:46:47] *** Joins: bytestream (~bytestrea@user/bytestream)
[13:47:57] *** Quits: bytestream2 (~bytestrea@user/bytestream) (Ping timeout: 240 seconds)
[13:51:27] <olle> No idea
[13:56:29] <freeman_h> issue is that incoming https request are hanging and after a while 504 or 500
[13:58:01] <TinoDidriksen> You were also asking about deadlocks yesterday. What are you doing? Trying to run a popular site on a potato?
[13:58:24] <Naktibalda> deadlock is not a performance issue, deadlocks are resolved instantly :)
[13:58:53] <freeman_h> TinoDidriksen, lol
[13:59:29] <Naktibalda> freeman_h: are you making another request from the same browser while your server is processing 10 minute request?
[14:00:44] <olle> hanging sounds like database issue
[14:00:52] <olle> check mysql status
[14:01:10] <freeman_h> Naktibalda, up to 10 mins this dependings how big the request is :) but that has been broken down now
[14:01:26] <freeman_h> its not db issue olle ignore TinoDidriksen
[14:01:52] <olle> k
[14:02:10] <Naktibalda> if you are making request from the same browser, the obvious cause is session locking.  Execute session_write_close(); at the beginning of long running process
[14:02:18] <olle> freeman_h: what's a "big request"? o0
[14:02:57] <freeman_h> Naktibalda, 2 servers. request 1 from server A make request to server B to create a cron job. server B response saying OK 200
[14:03:28] <freeman_h> server B has many applications(no front end site) just api urls
[14:03:45] <freeman_h> let me finish
[14:03:51] *** Joins: CapitalistPunk (~Capitalis@liledevil.xs4all.nl)
[14:04:13] <freeman_h> the applications or api ends points are broken down into ORDERS API, PRODUCTS API, WAREHOUSE API, etc
[14:04:54] <freeman_h> so the cron job from order api will products api to update the inventory and recalculate price
[14:05:06] <freeman_h> my request fails when it is trying to get the token
[14:05:11] <freeman_h> just gets 500 back
[14:05:38] <Naktibalda> 500 could be anything, 504 means that PHP takes too long.
[14:05:40] <olle> check error log on server
[14:05:40] <freeman_h> works locally and on dev box
[14:06:07] <olle> "works locally" - same PHP version??
[14:06:27] <freeman_h> olle, yep
[14:06:43] <olle> what does 500 show in error log, then?
[14:06:49] <olle> logging enabled? tracing?
[14:07:03] <olle> slow query log?
[14:13:53] <freeman_h> olle, no apache error log for the 500
[14:14:26] <freeman_h> "query logs are not enabled on the live DB"
[14:14:30] <freeman_h> note the quote
[14:15:22] <olle> freeman_h: no log for 500?
[14:15:36] <olle> which framework are you on? error handler objects or setup?
[14:16:17] <freeman_h> lumen
[14:17:15] <freeman_h> the recent error someone must have restarted the cron worker or apache
[14:17:17] <olle> freeman_h: https://lumen.laravel.com/docs/5.3/errors#the-exception-handler
[14:17:26] <freeman_h> let me see if its happens again
[14:19:01] <strykr> obviously dont have log_errors enabled ?
[14:20:26] *** Quits: roadie (~user@2a02:8108:5a40:1d87:3d55:e1ba:c614:431c) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[14:21:06] *** Joins: chao (~stenno@user/stenno)
[14:22:37] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[14:25:59] *** Joins: NakedKing (~NakedKing@user/nakedking)
[14:31:29] *** Joins: d3sync- (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr)
[14:33:10] *** Quits: NakedKing (~NakedKing@user/nakedking) (Quit: Leaving)
[14:33:25] *** Quits: d3sync (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr) (Ping timeout: 256 seconds)
[14:33:25] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[14:42:38] *** Joins: luva4 (~luva@45.141.152.62)
[14:44:12] *** Quits: luva (~luva@185.168.9.231) (Ping timeout: 252 seconds)
[14:44:12] *** luva4 is now known as luva
[14:46:43] *** Quits: led_belly (~led_belly@37.120.197.44) (Read error: Connection reset by peer)
[14:52:41] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::e3bb)
[14:53:40] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[14:55:47] *** Joins: led_belly (~led_belly@37.120.197.44)
[15:02:32] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Ping timeout: 272 seconds)
[15:05:05] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 252 seconds)
[15:07:58] *** Quits: Hiccup (cHoy@user/hiccup) (Remote host closed the connection)
[15:08:59] *** Joins: BrunoFontes (~bruno@138.199.58.78)
[15:18:32] *** Quits: pycode (~pycode3@2001:b07:5d28:551:8cd3:c6f7:4118:8d3b) (Ping timeout: 240 seconds)
[15:27:30] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.4)
[15:32:04] *** Quits: bluehoney (~bluehoney@gateway/vpn/pia/bluehoney) (Ping timeout: 256 seconds)
[15:33:16] *** Joins: bluehoney (~bluehoney@gateway/vpn/pia/bluehoney)
[15:40:33] *** Quits: rb (~augh@209.141.39.190) (Ping timeout: 272 seconds)
[15:41:36] *** Joins: chao (~stenno@user/stenno)
[15:45:01] *** Joins: pmercado_ (~pmercado@186.107.58.161)
[15:47:47] *** Joins: ArtfulDodger (~ArtfulDod@81.126.81.79.rev.sfr.net)
[15:48:19] *** chao is now known as stenno
[15:52:51] <ArtfulDodger> Hello there! I'm activating automated tasks of an opensource ERP via Crontab on an OVH hosting. The ERP has a cron_run_jobs.php file to run its planned jobs but it's made for command line call so with Cron it complains because it's in CGI mode https://github.com/Dolibarr/dolibarr/blob/develop/scripts/cron/cron_run_jobs.php#L52-L54
[15:54:31] <ArtfulDodger> I've replaced x = argv[x] inputs by hardcoded values, but is it safe to also disable the check for CGI in the above lines or can it create other problems?
[15:54:34] *** Joins: pycode (~pycode3@2001:b07:5d28:551:8c1a:86c1:2b50:13d9)
[15:55:17] <AllenJB> Ask the software authors. The crons are obviously designed to run on commandline. We can't tell you what assumptions they made.
[15:55:38] <Naktibalda> how does your Cron run scripts?
[15:55:39] <AllenJB> Also note that long-running tasks are likely to be interrupted due to timeouts if you're trying to run them as web requests.
[15:59:20] <ArtfulDodger> Naktibalda, OVH's Crontab only runs PHP files in CGI, there is no other option (see the screenshot here https://docs.ovh.com/gb/en/hosting/hosting_automated_taskscron/ )
[15:59:29] <ArtfulDodger> So I cannot create a shell script
[16:02:29] <Naktibalda> so you have to change that part which handles parameters
[16:05:00] *** Joins: guido (~weechat@host-79-32-92-124.retail.telecomitalia.it)
[16:05:00] <ArtfulDodger> Naktibalda, yes I replaced the argv[] parameters. But I'm a bit more concerned by disabling the CGI test because I don't know what could be the differences between CGI and command-line.
[16:05:07] <ArtfulDodger> I will ask the developpers
[16:17:08] *** Quits: pycode (~pycode3@2001:b07:5d28:551:8c1a:86c1:2b50:13d9) (Ping timeout: 252 seconds)
[16:22:09] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[16:22:43] <AllenJB> I don't see anything in the OVH support document that indicates scripts are / should be run using cgi. You may want to contact OVH to make sure they haven't messed something up on their end
[16:23:35] *** Joins: swapgs (~swapgs@user/swapgs)
[16:31:36] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[16:32:31] <Blondie101010> there's nothing talking about CGI there
[16:34:10] *** Joins: thiras (~thiras@user/thiras)
[16:35:44] <Kadigan> Uhm... weird...
[16:35:49] <ArtfulDodger> OK I'll start by asking OVH then AllenJB Blondie101010. As an OVH customer, you would expect the Cron system of this hosting service to run CLI mode instead of CGI mode?
[16:35:56] <Kadigan> bcmath() balks at me about "function argument" not being well-formed.
[16:36:27] <teresko> ArtfulDodger: yes, it should be in CGI mode
[16:36:31] <Kadigan> "bcdiv(4.3, 10, 2);" produces an issue, but "bcdiv(sprintf("%.16F", 4.3), 10, 2);" does not... WTH
[16:37:32] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[16:37:33] <Naktibalda> Kadigan: the first 2 parameters should be strings
[16:38:03] <Kadigan> Holy crap, how did I *not* notice that it operates on strings before? o.O
[16:38:03] <Blondie101010> ArtfulDodger:  do you have ssh access?
[16:38:18] <ArtfulDodger> yes Blondie101010
[16:38:33] <Blondie101010> look at the different php* executables
[16:39:12] <Kadigan> Naktibalda: whose bright idea was to have the *math* module run on *strings* of all things? :D
[16:39:43] <Naktibalda> Kadigan: it works with large numbers that can't be represented as integers
[16:40:30] <Kadigan> Okay. That is actually a very good reason.
[16:40:50] <Kadigan> Is there a ticket to make it disregard locale though?
[16:41:20] <ArtfulDodger> teresko, if you expect the Crontab to run in CGI mode, and my script is meant to run in CLI mode, then the problem is not due to OVH (like suggested by AllenJB )?
[16:43:12] <ArtfulDodger> Blondie101010, there is also a cron_run_jobs_by_url.php https://github.com/Dolibarr/dolibarr/blob/develop/htdocs/public/cron/cron_run_jobs_by_url.php and this one seems to work with CGI according to line 54
[16:44:26] <Blondie101010> from what you're showing, they're providing you with different tools, which you can select, or use your own
[16:53:01] <swapgs> hey! i'm looking for a maintainer part of the security@ group on this chan, anybody around?
[16:54:04] <Blondie101010> swapgs:  can you clarify?
[16:55:08] *** Joins: ms49434 (~ms49434@user/ms49434)
[17:01:11] *** Quits: guido (~weechat@host-79-32-92-124.retail.telecomitalia.it) (Ping timeout: 245 seconds)
[17:03:00] *** Quits: BrunoFontes (~bruno@138.199.58.78) (Ping timeout: 240 seconds)
[17:03:15] *** Joins: guido (~weechat@host-79-23-252-34.retail.telecomitalia.it)
[17:03:22] <swapgs> Blondie101010: I submitted a security issue 6+ months ago, the maintainers started to address it but now everything is on hold. I'm also not hearing back from security@ anymore, so I would like to have a quick chat and understand where it's stuck
[17:03:56] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[17:04:31] <Blondie101010> still unsure what you're talking about..
[17:04:47] <Blondie101010> are you talking about a security bug report, or something else?
[17:05:48] <swapgs> yes, a security bug report related to a service of the php.net infrastructure
[17:06:12] <swapgs> can't go much more into details on a public channel though :)
[17:07:52] <Blondie101010> agreed, but this channel does not control the site nor the program...  bug reports should go through the regular route
[17:08:23] <Blondie101010> https://wiki.php.net/security pretty much covers this in detail, though you may already be familiar with that
[17:08:46] <swapgs> yeah, my message is just in case a maintainer is lurking here
[17:09:07] <swapgs> thanks :)
[17:09:22] *** Joins: BrunoFontes (~bruno@191.32.136.226)
[17:15:24] *** Quits: BrunoFontes (~bruno@191.32.136.226) (Ping timeout: 240 seconds)
[17:17:06] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Read error: Connection reset by peer)
[17:17:08] *** Joins: BrunoFontes (~bruno@138.199.4.92)
[17:17:16] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[17:20:36] *** Quits: brentaarnold (~brentaarn@24.112.56.42) (Ping timeout: 240 seconds)
[17:21:44] *** Joins: freeman_h1 (~freeman_h@cpc94282-ward11-2-0-cust375.10-2.cable.virginm.net)
[17:22:12] *** Quits: BrunoFontes (~bruno@138.199.4.92) (Ping timeout: 240 seconds)
[17:22:36] *** Joins: BrunoFontes (~bruno@138.199.4.92)
[17:25:00] *** Quits: freeman_h (~freeman_h@37.120.159.215) (Ping timeout: 240 seconds)
[17:26:16] *** Joins: brentaarnold (~brentaarn@24.112.56.42)
[17:28:12] *** Quits: freeman_h1 (~freeman_h@cpc94282-ward11-2-0-cust375.10-2.cable.virginm.net) (Ping timeout: 272 seconds)
[17:29:24] <olle> About mocking in phpunit or whatever, would the test fail if I try to use a non-mocked function from a mocked class?
[17:30:22] <teresko> I think it should, but it kinda depends what kind of perversion are done by the mocking library
[17:30:45] <teresko> I tend to use various test-doubles instead
[17:31:01] *** Joins: alien_lappy (~alien@user/alien)
[17:31:52] <Naktibalda> olle: if the function is not mocked, it should do whatever it is supposed to do, doesn't it?
[17:32:06] <olle> No idea
[17:32:16] <alien_lappy> so, i got "Constant expression contains invalid operations" when i had a Closure in an array as a constant expression to a static class variable
[17:32:24] <olle> Like a mocked $model->save() that also does $model->delete(), but delete() is not mocked.
[17:32:26] <teresko> honestly, you should be mocking interfaces, olle  :P
[17:32:35] <olle> This is a hypothetical
[17:32:37] <alien_lappy> i figured, i'd make the Closure a static function (); but that didn't work either
[17:32:40] <teresko> oh god, activerecord
[17:32:42] <olle> I'm only mocking ASTs now :D
[17:33:26] <alien_lappy> how can i have a Closure in an array as a constant expression for a static class variable?
[17:33:55] *** Joins: pycode (~pycode3@2001:b07:5d28:551:be0a:f2b0:2882:ab8a)
[17:34:35] <Naktibalda> olle: By default, all methods of the original class are replaced with a dummy implementation that returns null (without calling the original method)
[17:34:39] <Naktibalda> https://phpunit.readthedocs.io/en/9.5/test-doubles.html
[17:35:03] <olle> Naktibalda: Thanks!
[17:35:16] <olle> Naktibalda: Hm, returning null is not the same as failing, tho
[17:36:04] <Naktibalda> you can setup expectations for other methods that they should not be called
[17:36:23] <teresko> interfaces ;)
[17:36:33] <olle> Naktibalda: Sure, question is if I'm protected against forgetting something
[17:37:00] <teresko> only if you are also running mutation tests
[17:37:04] <olle> Hm
[17:37:26] <teresko> have you played around with those?
[17:37:43] <olle> Niet
[17:37:56] <olle> I'm arguing with a friend about mocking AST DSL vs standard mocking
[17:38:00] <teresko> https://github.com/infection/infection
[17:38:26] *** Quits: BrunoFontes (~bruno@138.199.4.92) (Ping timeout: 256 seconds)
[17:38:41] <teresko> strongly recommended
[17:39:22] <teresko> and you do not need to technically write new tests, because mutation get run against your existing unit tests
[17:41:22] *** Joins: newwebdev13 (~newwebdev@78.135.91.153)
[17:41:46] <olle> Again, that's another discussion
[17:42:54] *** Joins: BrunoFontes (~bruno@138.199.4.92)
[17:43:16] <alien_lappy> is there a reason why Closure is not allowed for constant expressions? even if it's a static closure? i mean, the code is there static and stuff...?
[17:43:55] <olle> alien_lappy: You'd have to ask internals, I guess
[17:44:01] <olle> Unless someone here knows :)
[17:45:32] <__adrian> alien_lappy: because constants are evaluated at compile time, so it can't contain expressions that rely on runtime
[17:46:03] <__adrian> anon functins are objects. they cannot exist until runtime.
[17:47:32] *** Quits: BrunoFontes (~bruno@138.199.4.92) (Ping timeout: 240 seconds)
[17:47:57] *** Joins: BrunoFontes (~bruno@138.199.4.92)
[17:50:26] *** Quits: BrunoFontes (~bruno@138.199.4.92) (Client Quit)
[17:50:49] <olle> Unless you define it as a string and use eval...
[17:51:24] *** Quits: toastloop (~toastloop@user/toastloop) (Ping timeout: 240 seconds)
[17:53:41] *** Joins: toastloop (~toastloop@user/toastloop)
[17:55:39] <__adrian> if it really is static, make it a static method
[17:56:02] <__adrian> if it's not, then assign it on construct. that's what __construct() is for.
[17:56:57] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[17:57:28] <olle> Or, you know, just define a function.
[17:57:59] <__adrian> mmm hm
[17:59:31] *** Joins: stenno (~stenno@user/stenno)
[17:59:55] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[18:06:23] <judah> Slack down for anyone else this morning?
[18:11:44] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[18:11:58] <__adrian> is acting buggy
[18:12:43] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[18:16:17] <__adrian> https://status.slack.com/  btw
[18:17:05] <olle> IRC will raise!
[18:17:26] <__adrian> just sayin, IRC's never had a problem loading threads.
[18:17:34] <olle> :)
[18:17:43] <teresko> based on how ban-happey the Silicon Walley companies are - yes
[18:17:52] <olle> Best code-metric for bug density: age.
[18:20:01] *** Joins: freeman_h2 (~freeman_h@37.120.159.215)
[18:20:47] <freeman_h2> curl response code of 0 is this curl failing to connect via to ssl handshake or ssl validation or could be a million response
[18:20:52] <freeman_h2> reason*
[18:23:20] <Naktibalda> probably you should look for something else, 0 is not useful
[18:23:43] <Naktibalda> don't you get an error message?
[18:23:52] <freeman_h2> Naktibalda, happens once in a while response code is just 0
[18:35:43] *** Quits: Atlas (~atlas@user/atlas) (Quit: ZNC - https://znc.in)
[18:36:34] *** Joins: Atlas (~atlas@user/atlas)
[18:48:50] *** Joins: wovixo (~wovixo@128.104.205.49)
[18:49:39] *** Joins: delboy1978uk (~delboy197@d51a4773c.access.telenet.be)
[18:49:45] <delboy1978uk> morning o/
[18:50:40] <olle> always check curl_error after each curl call
[18:50:49] <delboy1978uk> the most annoying thing about the PHP docs is the date format pages, i can never find the correct page. All i want is to format  day name like Mon to Sun
[18:51:05] <delboy1978uk> is it here? no https://www.php.net/manual/en/datetime.formats.date.php
[18:51:29] <delboy1978uk> or here? no https://www.php.net/manual/en/datetime.formats.compound.php
[18:51:38] <Naktibalda> !+date
[18:51:38] <php-bot> string date(string format [, long timestamp]) - Format a local date/time - http://php.net/date
[18:51:54] <Naktibalda> hmm, not there anymore?
[18:52:19] <Naktibalda> alright description of format parameter links to https://www.php.net/manual/en/datetime.format.php
[18:52:26] <delboy1978uk> thanks Naktibalda I found it via you https://www.php.net/manual/en/datetime.format.php
[18:52:50] <delboy1978uk> and it's exactly what i thought it was lol
[19:02:06] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[19:02:35] *** Quits: luva (~luva@45.141.152.62) (Ping timeout: 272 seconds)
[19:03:14] *** Joins: luva (~luva@45.141.152.52)
[19:05:11] *** pmercado_ is now known as pmercado
[19:18:44] *** Joins: qaluh (~qaluh___@p200300e6171525006245cbfffea017b6.dip0.t-ipconnect.de)
[19:23:54] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::e3bb) (Ping timeout: 250 seconds)
[19:25:07] *** Joins: roadie (~user@2a02:8108:5a40:1d87:102d:d7c:48b:58f7)
[19:30:31] *** Joins: hh (~g@37.214.26.148)
[19:33:15] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Remote host closed the connection)
[19:33:37] *** Joins: clarjon1 (~clarjon1@user/clarjon1)
[19:44:29] *** Joins: newwebdev132 (~newwebdev@78.135.91.153)
[19:44:57] <TML> delboy1978uk: For your future self, it's linked right from php.net/date
[19:45:09] *** Quits: newwebdev13 (~newwebdev@78.135.91.153) (Read error: Connection reset by peer)
[19:45:56] <delboy1978uk> the function, not the class, cheers TML, although i wish it was linked from the DateTime class too
[19:46:32] <TML> delboy1978uk: Which class?
[19:46:41] <delboy1978uk> DateTime
[19:47:09] <TML> delboy1978uk: DateTime uses a different format, and its class page has links to its formats
[19:47:20] <TML> "Valid formats are explained in Date and Time Formats."
[19:47:53] <TML> (There's some overlap, but DateTime's format is a superset of date()'s, so it has its own documentation)
[19:47:59] <delboy1978uk> I wanted `D` for short day name, can you find that via the class page?
[19:49:32] *** Joins: Rockwood (~Rocky@user/rocky)
[19:50:44] *** Joins: vlm (~vlm@user/vlm)
[19:50:54] <teresko> good lord, my beer venison-chilli is almost donr
[19:50:57] <teresko> *done
[19:51:02] <teresko> it only took like 6 hours
[19:51:16] <teresko> wait, no almost 8
[19:52:47] <TML> delboy1978uk: I don't know, but if it's NOT on there, file a doc bug
[19:53:27] <delboy1978uk> ive put up with this misery for years lol, every time i need to remind myself a format lol, i always end up on the wrong page
[19:53:39] <Rockwood> delboy1978uk, namaskar bhai :)
[19:53:55] <delboy1978uk> namaste shreeman Rockwood
[19:55:16] <Rockwood> delboy1978uk, aur sab theek?
[19:55:52] <delboy1978uk> erm, good? i think?
[19:56:06] <Rockwood> nice
[19:56:29] <teresko> Rockwood: derka derka? https://www.watchandlearnpodcast.com/wp-content/uploads/2019/12/team_america_world_police_derka_derka.jpg
[19:56:32] <Rockwood> i was asking how are you? <--
[19:57:38] <Rockwood>  derka derka? <--
[19:57:40] <Rockwood> ??
[19:57:54] <teresko> you have not seen the movie
[19:57:59] <Rockwood> dehko <--
[19:58:07] <Rockwood> no
[20:08:49] *** Joins: magla (~gelignite@55d4d6c3.access.ecotel.net)
[20:10:06] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[20:14:45] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Client Quit)
[20:15:07] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[20:17:43] *** Quits: Pixi (~Pixi@user/pixi) (Quit: Leaving)
[20:20:29] *** Joins: Poboy (~Poboy@user/poboy)
[20:20:38] *** Joins: rwb (~augh@209.141.39.190)
[20:23:21] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[20:24:32] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Quit: Leaving)
[20:28:51] *** Joins: WishBoy (~WishBoy@user/wishboy)
[20:34:16] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662) (Remote host closed the connection)
[20:36:03] *** Joins: DuckThom (~luna@2001:41f0:3fe:3:6848:c91a:3603:d384)
[20:38:27] *** Quits: jgrim (~jgrim@d199-74-109-78.col.wideopenwest.com) (Quit: Buh bye!)
[20:38:57] *** Quits: aloy (~luna@2001:41f0:3fe:3:61a3:45ea:67be:97e9) (Ping timeout: 252 seconds)
[20:41:16] <arash> Hello,Imagine $result is a pdo result object, we want to use $result->username in a few different lines. How much of a matter of writing good code with better performance and better execution time is it important to don’t use $username = $result->username and then use $username?
[20:41:30] <arash> In other words, should we use variables in this case? Or should we use $result->username in all our codes?
[20:43:10] <arash> $username vs $result->username
[20:43:10] <__adrian> this will have no appreciable impact on performance.
[20:43:33] <arash> what about coding style?
[20:43:44] *** Joins: jgrim (~jgrim@d199-74-109-78.col.wideopenwest.com)
[20:44:08] <__adrian> more importantly, there's no such thing as a "pdo result object," unless you simply mean you're fetching rows as an object?
[20:44:24] <arash> yes, that's what i mean
[20:44:38] <TinoDidriksen> Keeping $result and using $result->username is cleanest, imo. Clearly shows providence.
[20:44:41] <__adrian> > what about coding style   // pick a style and be consistent
[20:46:10] <__adrian> > fetching rows as an object   // if you mean just stdClass, then my view is that's silly. arrays are for arbitrary key:value pairs. if an object, why not a specific class? why not a _domain_ object, populated from that row?
[20:46:24] <__adrian> these sorts of concerns are much more relevant/impactful
[20:50:02] <arash> its not a pdo actually, $result is a capsule object, laravel Query Builder.
[20:50:18] <__adrian> k
[20:51:37] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: Few women admit their age.  Few men act theirs.)
[20:51:47] <arash> where can I find good resource to learn these things? where should we put values in a variable and when should we use them directly?
[20:52:02] *** Joins: Pixi (~Pixi@user/pixi)
[20:52:08] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 272 seconds)
[20:52:47] <Rockwood> arash, your query builder also uses PDO
[20:57:22] <arash> what about this one? $promo_code = $vars['promo']; if(empty($promo_code) or if(empty($vars['promo']) or if(empty($promo_code = $vars['promo'])? which one do you prefer to use and why?
[20:57:51] <__adrian> arash: just think about what you actually need. is there a _reason_ to assign to a new variable? what's it accomplish? do you need to pass only the username to some other function? does it make things clearer?
[21:00:05] *** Joins: freeman_h1 (~freeman_h@cpc94282-ward11-2-0-cust375.10-2.cable.virginm.net)
[21:00:17] <__adrian> speaking of, it's generally less confusing to not assign variables as part of an expression
[21:03:51] *** Quits: freeman_h2 (~freeman_h@37.120.159.215) (Ping timeout: 256 seconds)
[21:08:50] *** Quits: delboy1978uk (~delboy197@d51a4773c.access.telenet.be) (Quit: delboy1978uk)
[21:10:51] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662)
[21:15:27] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662) (Ping timeout: 250 seconds)
[21:25:44] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[21:26:20] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[21:26:25] *** BadAdviceCat is now known as Nekomander
[21:34:16] *** Joins: stenno (~stenno@user/stenno)
[21:44:41] *** Joins: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861)
[21:46:32] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[21:47:56] *** Joins: onichomp (~onichomp@2806:264:4408:55:40f3:bd5f:4b18:7f92)
[21:49:00] *** Quits: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861) (Client Quit)
[22:00:41] *** Joins: delboy1978uk (~delboy197@ip-213-49-240-222.dsl.scarlet.be)
[22:02:08] *** Quits: magla (~gelignite@55d4d6c3.access.ecotel.net) (Read error: Connection reset by peer)
[22:02:27] *** Joins: magla (~gelignite@55d4d6c3.access.ecotel.net)
[22:11:38] *** Quits: toastloop (~toastloop@user/toastloop) (Quit: WeeChat 3.5-dev)
[22:17:45] *** Quits: freeman_h1 (~freeman_h@cpc94282-ward11-2-0-cust375.10-2.cable.virginm.net) (Read error: Connection reset by peer)
[22:25:30] *** Quits: slashasdf (~slashasdf@030-245-128-083.dynamic.caiway.nl) (Ping timeout: 260 seconds)
[22:30:06] *** Quits: qaluh (~qaluh___@p200300e6171525006245cbfffea017b6.dip0.t-ipconnect.de) (Quit: Leaving)
[22:33:42] *** Quits: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net) (Ping timeout: 250 seconds)
[22:40:02] *** Quits: hh (~g@37.214.26.148) (Remote host closed the connection)
[22:41:19] *** Quits: delboy1978uk (~delboy197@ip-213-49-240-222.dsl.scarlet.be) (Quit: delboy1978uk)
[22:47:51] *** Quits: pycode (~pycode3@2001:b07:5d28:551:be0a:f2b0:2882:ab8a) (Ping timeout: 245 seconds)
[22:53:24] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[23:07:17] <esselfe> My web server fails to display a page starting with <?xml version=..., I get this message: "Parse error: syntax error, unexpected 'version' (T_STRING) in /srv/files/docs/tmp/index.html on line 1" I tried rebuilding php with --enable-xml, then --with-expat but both fail to parse it, any ideas?
[23:08:19] <esselfe> and in php.ini there's only ";extension=xmlrpc" but I think it's not that
[23:08:42] <AllenJB> esselfe: Disable short_open_tags in php.ini. (short open tag is '<?' - note that this will not disable '<?=')
[23:08:50] <esselfe> let me try this :)
[23:09:00] <AllenJB> https://www.php.net/manual/en/language.basic-syntax.phptags.php
[23:09:21] <esselfe> "short_open_tag = Off" already
[23:12:37] <esselfe> and in phpinfo.php which only calls phpinfo(); I can see "libXML support | active"
[23:12:45] <AllenJB> When you say "display a page", is the file with <?xml in your .php file, or a file you're processing in your script somehow? (and if the latter, how are you processing it?)
[23:13:03] <esselfe> it's the first line of an HTML file
[23:13:21] <esselfe> like there's only the error message, no content
[23:14:03] <AllenJB> What does phpinfo() say the value of short_open_tag is?
[23:14:37] <esselfe> got it, "short_open_tag | On"!
[23:14:50] <esselfe> php.ini is in /etc, I'll try putting it in /etc/php/
[23:15:09] <AllenJB> Check you're editing the right php.ini (see the top section of phpinfo()), then restart php-fpm / Apache
[23:15:25] <esselfe> it was that! thanks alot
[23:15:39] <esselfe> so my distro installs php.ini in the wrong place
[23:17:50] <AllenJB> It's not necessarily "wrong" - just different. Different distros have different policies about where ini files should go. Some distros use per-SAPI (cli, fpm, cgi, etc) ini files. Some use split ini files (ini file per extension). Some use a single ini file.
[23:18:07] <esselfe> I see
[23:18:13] *** Quits: onichomp (~onichomp@2806:264:4408:55:40f3:bd5f:4b18:7f92) (Read error: Connection reset by peer)
[23:18:35] <esselfe> but shouldn't php see it's in /etc?
[23:18:43] <AllenJB> (And some distros only support a single version of PHP, while others support multiple concurrent versions)
[23:18:52] *** Joins: onichomp (~onichomp@2806:264:4408:55:40f3:bd5f:4b18:7f92)
[23:18:57] <AllenJB> It depends how PHP was configured at build time
[23:20:37] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 240 seconds)
[23:27:57] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[23:28:47] *** Joins: sudorm (~sudorm@abordeaux-654-1-103-197.w92-162.abo.wanadoo.fr)
[23:29:11] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[23:30:02] <sudorm> I'm doing another 10739827th simple tool to edit web pages quickly. Let's say user has his published his page on my service: myservice.com/userABC/index.html
[23:30:35] <sudorm> And he wants to use it on his own domain, eg   userabc.com/home/
[23:31:31] <sudorm> How can this non-tech user quickly make that userabc.com/home/ redirects to myservice.com/userABC/index.html, but the URL address doesn't change to myservice.com in the browser?
[23:32:11] <Albright> sudorm: That's more of a web server configuration question than a PHP one.
[23:32:42] <sudorm> well I made my tool in PHP, but you're right
[23:32:59] <Albright> Basically you'd point the userabc domain to the myservice server but configure the server so it uses that particular webroot when a request comes in for the userabc domain.
[23:33:09] <Albright> Specifics will vary based on your server daemon.
[23:33:15] <sudorm> I mean: can a non-tech user ABC *who doesn't have any server* but only owns the domain userabc.com do this?
[23:33:38] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[23:33:39] <Albright> Yes, if the person who *does* own the server it's hosted on does the relevant configuration on their side
[23:33:56] <Albright> They just set the DNS records for the domain name to point to the server it's hosted on.
[23:33:58] <sudorm> Albright, yes I own the final server
[23:34:49] <AllenJB> Look at how other services (eg. GitHub Pages) implement custom domains
[23:34:54] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[23:35:03] <sudorm> Albright, what's the simplest thing I can ask the final user?   "Go to your registrar, DNS settings, put an A record to <IP of my server>"
[23:35:27] <Albright> Yep
[23:35:48] <sudorm> AllenJB, oh yes that's precisely what I was wondering. What is the most common thing that hosting services ask their customers to do?
[23:35:58] <sudorm> It should be something simple. An A record? A CNAME record?
[23:36:06] <Albright> A record.
[23:36:12] <Albright> You had it right.
[23:36:28] <AllenJB> A CNAME rather than an A record would allow the service more control over the subdomain
[23:37:02] <AllenJB> (eg. the service could change the final IP address without requiring users to perform DNS updates)
[23:37:19] <sudorm> AllenJB, it was a very good hint about Github pages: https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site
[23:37:28] <sudorm> AllenJB, +1 for CNAME
[23:39:01] <sudorm> Is there a way that *wouldn't* require a special config on my own server?
[23:39:25] <sudorm> ie:   userabc.com   always redirect to myservice.com/userabc/
[23:39:42] <sudorm> (without a redirection that changes the browser URL address)
[23:40:00] <AllenJB> I don't believe so
[23:40:42] <sudorm> AllenJB, I guess it's not possible to do this DNS record:    userabc.com  CNAME   myservice.com/userabc/
[23:40:54] <sudorm> because the destination has to be a domain, and not a domain + path, is that right?
[23:41:03] <AllenJB> (The only other method I can think of I've seen to do this is a page that's just an iframe to the final page - but this has a number of drawbacks)
[23:41:17] <Albright> Yes. "paths" don't exist as a concept at the DNS level.
[23:41:25] <AllenJB> Correct - you can only do it for an entire (sub)domain using DNS
[23:41:33] <sudorm> Albright, Ok. that's what I was thinking too
[23:41:42] <sudorm> AllenJB, yes iFrame is not nice
[23:42:49] <sudorm> Then I have to configure my server to automatically create/delete  new apache2.conf <VirtualHost> and restart the webserver each time there is a new user? seems complicated. what is the more common way to handle this?
[23:43:52] *** Quits: FloridaMan (~FloridaMa@user/floridaman) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[23:45:12] <Albright> sudorm: If you're using Apache, ask in an Apache channel.
[23:46:19] *** Quits: d3sync- (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr) (Quit: KVIrc 5.0.0 Aria http://www.kvirc.net/)
[23:46:26] <sudorm> Albright, I'll probably not use Apache for this, it doesn't seem the adapted tool
[23:46:35] <sudorm> Which tool would you use if you have to do this?
[23:47:39] <Albright> I don't know. This is still not a PHP question. Ask in #httpd or #nginx or somewhere populated by sysadmins, not lowly PHP programmers. :P
[23:47:48] <Albright> That's what I would do if I had to do this.
[23:48:40] *** Joins: d3sync (~d3sync@212.251.16.252.dsl.dyn.forthnet.gr)
