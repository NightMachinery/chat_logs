[00:00:03] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 258 seconds)
[00:00:31] *** Joins: nvmd (~nvmd@user/nvmd)
[00:01:59] *** Joins: greycat (~greg@209.142.155.49)
[00:06:50] *** Joins: Hax0r (~pncl3@87.101.193.195)
[00:08:13] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[00:10:36] *** Quits: lsrtl (~lsrtl@user/lsrtl) (Ping timeout: 252 seconds)
[00:15:17] <MaximB> got a small issue with a function: https://paste.debian.net/1206709/  ,instead of replacing the old amount, it adds the new amount in front, like if old amount is 5, and new is 8, it adds 85. 
[00:15:37] <greycat> !math
[00:15:37] <greybot> Add 7 to a variable: ((a+=7)) OR a=$((a+7)) OR let 'a+=7' # See http://mywiki.wooledge.org/ArithmeticExpression
[00:15:39] <MaximB> also getting error:  ./final-new.sh: line 138: local: `=5': not a valid identifier
[00:15:56] <greycat> did you write local $x=5 when you meant local x=5
[00:16:31] <MaximB> maybe :)
[00:17:02] <MaximB> thanks
[00:17:32] <esselfe> there's also $[2+4]
[00:17:40] <greycat> !math
[00:17:41] <greybot> Add 7 to a variable: ((a+=7)) OR a=$((a+7)) OR let 'a+=7' # See http://mywiki.wooledge.org/ArithmeticExpression
[00:18:21] <MaximB> in this funcgtion I'm just replacing a string , not doing math. it works now
[00:19:30] *** Joins: dolor_avis (~dolor_avi@user-5-173-8-99.play-internet.pl)
[00:19:59] *** Quits: drd (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 258 seconds)
[00:20:50] *** Quits: wstrnr (uid510617@id-510617.tooting.irccloud.com) (Quit: Connection closed for inactivity)
[00:23:39] *** Joins: absc (~absc@dynamic-adsl-94-34-201-166.clienti.tiscali.it)
[00:24:06] *** Quits: dolor_avis (~dolor_avi@user-5-173-8-99.play-internet.pl) (Quit: dolor_avis)
[00:24:10] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[00:25:05] *** Quits: absc (~absc@dynamic-adsl-94-34-201-166.clienti.tiscali.it) (Client Quit)
[00:31:37] *** Quits: Strom (strom@fedora/strom) ()
[00:33:43] *** Joins: Strom (strom@fedora/strom)
[00:34:17] *** Joins: cer-0 (~cer-0@189.228.172.244)
[00:38:55] *** Joins: sazawal (~sazawal@122.161.170.192)
[00:41:05] <d1rewolf_> thx all and sorry to go silent. connectivity problems on my end
[00:41:31] *** Quits: enoq (~enoq@194-208-179-35.lampert.tv) (Quit: enoq)
[00:45:30] *** Quits: chromis (sid150893@id-150893.tinside.irccloud.com) (Ping timeout: 240 seconds)
[00:45:46] *** Quits: darxun (sid504814@id-504814.tinside.irccloud.com) (Ping timeout: 240 seconds)
[00:46:11] *** Quits: yuesbeez (uid458354@id-458354.tinside.irccloud.com) (Ping timeout: 250 seconds)
[00:46:14] *** Quits: nem (sid113421@user/nem) (Ping timeout: 252 seconds)
[00:46:38] <d1rewolf_> tirnanog: I should have been specific...this is on macOS and -t doesn't seem to be valid option. what's that do exactly?
[00:46:40] *** Quits: nescafe1001 (sid211018@id-211018.tinside.irccloud.com) (Ping timeout: 272 seconds)
[00:46:47] *** Quits: shush_ (sid21719@id-21719.tinside.irccloud.com) (Ping timeout: 252 seconds)
[00:46:48] *** Quits: sa (sid1055@id-1055.tinside.irccloud.com) (Ping timeout: 256 seconds)
[00:47:06] *** Quits: Razva (sid17541@user/razva) (Ping timeout: 240 seconds)
[00:47:06] *** Quits: hubvu (sid495858@id-495858.tinside.irccloud.com) (Ping timeout: 240 seconds)
[00:47:22] *** Quits: holbrode (sid339826@id-339826.tinside.irccloud.com) (Ping timeout: 256 seconds)
[00:47:41] <twkm> get a less ancient bash.
[00:48:21] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 258 seconds)
[00:49:09] * d1rewolf_ nods
[00:50:31] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[00:51:31] <earnestly> I have found that -exec sh -c ... _ {} + does wonders for implementing many GNU features heh... ._>
[00:52:38] <twkm> on macos?
[00:54:18] <earnestly> No idea about macos, I'd hope it's posix enough to support sh's printf
[00:54:29] *** Quits: makara (~sol@196.61.111.63) (Ping timeout: 258 seconds)
[00:54:43] <earnestly> Used it to implement GNU find's %P and -print0 at one time or another
[00:55:14] <earnestly> And also just using it to convert file paths into arguments as a way to handle newlines
[00:55:32] <earnestly> (That a for loop couldn't do as easily)
[00:55:45] *** Quits: Hax0r (~pncl3@87.101.193.195) (Remote host closed the connection)
[00:59:10] *** Joins: pncl (~pncl3@87.101.193.195)
[00:59:44] *** Quits: pncl (~pncl3@87.101.193.195) (Client Quit)
[00:59:45] *** Joins: Hax0r (~Hax0r@87.101.193.195)
[01:00:29] *** Quits: killown (~killown@user/killown) (Ping timeout: 250 seconds)
[01:02:17] *** Joins: nem (sid113421@user/nem)
[01:02:45] *** Joins: darxun (sid504814@tinside.irccloud.com)
[01:02:54] *** Joins: Razva (sid17541@user/razva)
[01:02:58] *** Joins: sa (sid1055@tinside.irccloud.com)
[01:05:15] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 250 seconds)
[01:08:40] *** Joins: goldfish__ (~goldfish@user/goldfish)
[01:09:58] <Riviera> earnestly: fwiw macos is certified posix, iirc not every single version, but in general it is
[01:11:21] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Ping timeout: 258 seconds)
[01:11:21] *** Quits: goldfish_ (~goldfish@user/goldfish) (Ping timeout: 258 seconds)
[01:12:46] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[01:13:05] *** Joins: yuesbeez (uid458354@tinside.irccloud.com)
[01:13:08] *** Joins: holbrode (sid339826@tinside.irccloud.com)
[01:13:33] *** Joins: shush_ (sid21719@tinside.irccloud.com)
[01:14:54] *** Joins: nescafe1001 (sid211018@tinside.irccloud.com)
[01:15:46] *** Joins: lavaball (~Melissa@31.204.155.215)
[01:16:08] <earnestly> Are you sure you're not thinking of unix ceritification?  I'm not sure how that differs, susv3/4?
[01:16:09] *** Joins: akoana (~ah@user/akoana)
[01:16:34] <earnestly> Riviera: FreeBSD for example uses outdated implementations of cp, so that following symlinks can only be done when using -R
[01:17:28] <MaximB> how do I print the output of the command? 
[01:17:29] <MaximB> all=("cat $rec_file |sort -d")
[01:17:29] <MaximB> echo $all
[01:17:46] <MaximB> wihtout eval ;)
[01:17:58] <e36freak> ...what?
[01:18:08] *** Quits: alzgh (~alzgh@216.155.158.214) (Quit: Client closed)
[01:18:10] <phy1729> sort -d <"$rec_file"
[01:18:12] <e36freak> why are you using an array syntax when you're making an array with one element?
[01:18:19] <e36freak> also quote "$all" on the expansion
[01:18:21] *** Joins: tradar (~tradar@user/tradar)
[01:18:37] *** Joins: odoood (~odoood@2601:c8:c003:a550::8)
[01:18:41] <e36freak> !faq complex > MaximB 
[01:18:41] <greybot> MaximB : https://mywiki.wooledge.org/BashFAQ/050 -- I'm trying to put a command in a variable, but the complex cases always fail!
[01:18:47] *** Quits: nvmd (~nvmd@user/nvmd) (Quit: Later, nerds.)
[01:20:29] <Riviera> earnestly: well, what i mean is relatively trivial: what macos is certified for [in this context], and that's afaik unix 03, see the description here: https://pubs.opengroup.org/onlinepubs/015967575/toc.htm
[01:20:56] *** Quits: furrymcgee (~devuan@31.179.186.66) (Ping timeout: 258 seconds)
[01:21:02] <Riviera> earnestly: the actual question is IMHO rather what you really mean with "posix" (or "posix enough")
[01:21:18] <Riviera> earnestly: in any case, it hardly gets better than that "on paper" :)
[01:21:50] <earnestly> Riviera: I mean posix according to the latest specs
[01:22:22] <earnestly> Riviera: E.g. nothing implements posix more(1) :p
[01:22:22] <Riviera> ah
[01:22:32] <Riviera> :)
[01:22:38] <earnestly> It's quite nice tbh, if the features it described were actually available anywhere
[01:23:32] <Riviera> yeah, true; but then i personally don't like the idea anyway that these specs are not almost solely descriptive and prescriptive only when necessary
[01:23:56] *** Joins: chromis (sid150893@tinside.irccloud.com)
[01:24:04] <Riviera> (of course it's prescriptive as a standard, but i hope it's clear what i mean)
[01:27:44] <MaximB> that's what I was looking for:    all="$(cat $rec_file |sort -d)"
[01:27:50] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[01:28:18] <greycat> what on earth is that
[01:28:39] <MaximB> displays the output of the command and not command name
[01:28:58] <greycat> It's a quoting error and a UUOC and a failure to store a list in an array...
[01:29:30] <MaximB> it works
[01:29:33] <Riviera> !itworks
[01:29:33] <greybot> It is a usual technique to make a program and then to test it. But: program testing can be a very effective way to show the presence of bugs, but it is hopelessly inadequate for showing their absence. -- Edsger W. Dijkstra
[01:29:38] *** Joins: nvmd (~nvmd@user/nvmd)
[01:30:10] <MaximB> the other way is to use eval
[01:30:53] <earnestly> Riviera: You want them to be more active in deciding on what to exclude if there's multiple incompatible implementations?
[01:31:25] <earnestly> Such as requiring make have := instead of ::= because some obscure implementation of make used := for something else/
[01:31:32] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[01:31:55] <earnestly> Or for them to start including GNU flags based on current usage today?
[01:32:32] *** Joins: goldfish_ (~goldfish@user/goldfish)
[01:32:40] *** Quits: sazawal (~sazawal@122.161.170.192) (Quit: Leaving)
[01:32:52] *** Quits: goldfish_ (~goldfish@user/goldfish) (Remote host closed the connection)
[01:32:56] <earnestly> MaximB: Generally you don't want to capture multi-line output as a variable unless you know the format is static enough to support it.  There are ways to do it but it's a bit hacky
[01:33:35] <earnestly> MaximB: That is, using variables as if they were like files tends to be awkward in the shell
[01:33:39] <greycat> I'm recognizing enough danger signs *not* to ask any follow-up questions in this case, because there's an extremely high chance of it ending with screaming and /ignore.
[01:33:42] *** Joins: goldfish (~goldfish@user/goldfish)
[01:34:22] <earnestly> Sometimes Alice's rabbit hole has alcoves with nothing but horror novels
[01:35:18] *** Quits: goldfish__ (~goldfish@user/goldfish) (Ping timeout: 252 seconds)
[01:35:33] <Riviera> earnestly: i don't really know, i would have to think a bit to what extent this standard really still matters first
[01:36:59] *** Quits: MaximB (~MaximB@87.68.164.32) (Quit: Client closed)
[01:37:49] <earnestly> It matters insofar as all knowledge eventually flows from it even if it gets mangled along the way.  It may be obscured by all the stuff built on top of it but it's implicit
[01:38:22] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 256 seconds)
[01:38:27] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 244 seconds)
[01:38:32] <earnestly> Which is sad in a way because kernels offer so much more but people on Linux tend to limit themselves so that BSD doesn't lose out
[01:39:13] <phy1729> The BSD users think otherwise, but appreciate the people who do limit themselves
[01:39:36] <earnestly> It's de facto because the kernel APIs tend to be little known
[01:39:52] <earnestly> (Outside of a few rockstar ones that get lots of blog posts)
[01:40:33] <earnestly> That's what I mean, if someone looks for a tutorial they tend to get more-or-less the posix apis
[01:41:03] <earnestly> And that's the degree to which it matters imo
[01:41:14] <phy1729> I'd argue then tend to get something that's not C.
[01:42:08] <earnestly> C/UNIX/POSIX APIs are all blurred together
[01:42:34] <phy1729> right and most people don't code in C anymore
[01:43:24] <earnestly> Outside of the bubble it's pretty much all C/C++98
[01:44:29] *** Joins: hubvu (sid495858@tinside.irccloud.com)
[01:45:48] *** Quits: thad_the_man_2 (~tlophd_be@99-104-67-23.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[01:46:47] *** Quits: LiftLeft (~LiftLeft@191.96.227.138) (Ping timeout: 245 seconds)
[01:47:35] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[01:48:55] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Ping timeout: 258 seconds)
[01:49:35] *** jess is now known as j
[01:49:42] *** Quits: FreeBDSM (~uzer@user/freebdsm) (Ping timeout: 276 seconds)
[01:50:00] <lavaball> earnestly, if you remember my quake/darkplaces console issue. |awk /cure|heal/ print status  doesn't work. it prints status in the terminal, but it doesn't affect the quake server. is there a way to do the tmux send keys thing without tmux? not that i shy away from tmux, i'm just asking for a friend.
[01:50:26] <earnestly> lavaball: I tried to answer what your question asked
[01:50:36] <earnestly> Not sure where quake server got involved
[01:50:53] <earnestly> Unless you're refering to 'console' as in the quake console
[01:51:05] <lavaball> well, i don't know what i wrote exactly, but it always was about ... yeah. that.
[01:51:31] <earnestly> If so, I'd check if darkplaces doesn't have remote control such as sockets or fifos to send that sort of thing to it properly
[01:52:00] *** Joins: alzgh (~alzgh@216.155.158.214)
[01:52:40] <lavaball> as far as i know only the rcon command in quake itself. i'll check again though. thanks.
[01:53:07] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[01:53:21] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[01:53:28] *** Quits: geli (~gelignite@55d40e37.access.ecotel.net) (Quit: Stay safe!)
[01:53:33] <earnestly> I remember using rcon in JKA heh
[01:54:10] <earnestly> rcon would be the right way
[01:54:15] *** Joins: FreeBDSM (~uzer@user/freebdsm)
[01:55:02] <earnestly> lavaball: http://jonjohnston.co.uk/articles/3/how-to-access-quake-iii-arena-dedicated-server-from-linux-command-line they use nc(1)
[01:55:03] *** Quits: potamides (~amnifiliu@2003:a:270f:c400:28d8:e046:7d92:3970) (Quit: WeeChat 3.2)
[01:55:17] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:56:34] <earnestly> Seems pretty trivial
[01:56:41] *** Joins: potamides (~amnifiliu@2003:a:270f:c400:28d8:e046:7d92:3970)
[01:57:23] <lavaball> thanks for looking that up.
[01:58:32] <lavaball> i wonder how it works with darkplaces. anyway, wouldn't it be easier to just do a tmux send keys? i mean what i'm doing is on the same server anyway.
[01:58:45] <earnestly> There are a few darkplaces rcon implementations
[01:58:50] <earnestly> Do it right
[02:00:31] *** Joins: LiftLeft (~LiftLeft@191.96.227.27)
[02:00:37] *** Quits: tradar (~tradar@user/tradar) (Quit: tradar)
[02:01:14] <earnestly> lavaball: E.g. https://github.com/bacher09/xrcon
[02:01:34] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 258 seconds)
[02:02:16] <earnestly> Apparently darkplaces has a secure version which this does
[02:02:59] <sixwheeledbeast> the amount of rcon implementations, you'd think they would be standard
[02:03:06] *** Joins: shabius_ (~shabius@195.98.189.216)
[02:03:12] *** Joins: Crescendo (~Crescendo@user/crescendo)
[02:03:15] *** Quits: Hax0r (~Hax0r@87.101.193.195) (Remote host closed the connection)
[02:03:46] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 240 seconds)
[02:03:53] *** Joins: Hax0r (~Hax0r@87.101.193.195)
[02:04:00] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[02:04:09] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[02:04:09] <earnestly> It does a HMAC-MD4 challenge
[02:05:20] <lavaball> i don't know. i don't see why i should use another client to connect to something i have running on the same machine. 
[02:05:28] <lavaball> anyway, i'll take another look at it tomorrow. 
[02:05:30] <lavaball> thanks again.
[02:06:05] <earnestly> Because it's a well defined protocol for communicating with the server
[02:06:17] <earnestly> This is better than throwing stateless key sequences at it
[02:06:42] *** Quits: shabius (~shabius@2a0e:1c80:2:1022::1006) (Ping timeout: 256 seconds)
[02:07:42] *** rcernin is now known as rcernin|brb
[02:07:42] *** Quits: terabyte (~terabyte@27.176-105-213.static.virginmediabusiness.co.uk) (Quit: Client closed)
[02:09:53] *** Joins: solar_sea (~solar_sea@user/solar-sea/x-3088627)
[02:10:12] <lavaball> i don't see the difference. if i have a rcon or a tmux send keys in front of it ... the commands stay the same.
[02:10:18] <lavaball> the nc thing intrigues me though.
[02:11:13] *** Quits: xall (~xall@2600:8800:8c02:3600:849b:ccd0:e33f:e479) (Quit: Client closed)
[02:12:34] <earnestly> If you don't 'see' the difference then there is nothing I can do
[02:13:56] *** Quits: Hax0r (~Hax0r@87.101.193.195) (Quit: Leaving)
[02:14:13] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[02:15:37] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[02:16:40] <geirha> The difference is like typing on the keyboard with your eyes open, vs typing blindly
[02:17:06] <earnestly> https://nitter.namazso.eu/pic/media%2FE8DIHB3WUAMZ8YP.jpg%3Fname%3Dorig
[02:18:02] <earnestly> hm wrong channel
[02:19:26] <alzgh> is there a difference between `bash` and `bash -i`?
[02:20:12] <earnestly> alzgh: no
[02:20:18] *** Quits: strive (~strive@user/strive) (Quit: WeeChat 3.2)
[02:21:06] <alzgh> what about `bash` and `bash -l` ?
[02:21:54] <earnestly> -l starts a login shell, the manual documents this.  See the INVOCATION section
[02:22:22] *** Quits: mohabaks_ (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 244 seconds)
[02:22:51] *** Quits: rcernin|brb (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 276 seconds)
[02:25:31] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Quit: Leaving)
[02:25:49] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[02:26:36] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[02:27:00] *** Quits: WinterStar (~IceLight@user/icelight) (Quit: WeeChat 3.2)
[02:27:03] *** Joins: enoq (~enoq@194-208-179-35.lampert.tv)
[02:27:38] *** Quits: cer-0 (~cer-0@189.228.172.244) (Ping timeout: 258 seconds)
[02:28:27] *** Quits: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431) (Quit: Leaving)
[02:28:31] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[02:29:56] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 258 seconds)
[02:33:00] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Remote host closed the connection)
[02:33:11] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Quit: Leaving)
[02:34:26] <alzgh> thanks earnestly I'm getting it roughly. There are 2 types of bash invocation login-wise and two types of invocation interactive-wise. Interactive login shells are those you get while doing ssh, or when target level is below desktop (like pressing ctrl+alt+F2 or just changing the target level) or when you do bash -l. Interactive non-login shells
[02:34:26] <alzgh> are gui emulations. These two types of shells differ mainly in the settings files they load upon invocation. The non interactive shells are those sub-shells that are automatically spawned when we run a command or a script. Those have also their own batch of settings files. What I'm not sure about is whether non-interactive shells have also login
[02:34:27] <alzgh> and non-login subtypes or they are all non-login. This is a lot to digest.
[02:36:04] <earnestly> There aren't 'login subshells'
[02:37:27] <earnestly> The ssh case is rare and not enabled by default but most distros set -DNON_INTERACTIVE_LOGIN_SHELLS during compile for some reason, it's not even a compile-time flag
[02:37:28] <alzgh> Ahh, OK. Then login shells are always interactive and super parent shells. Any subshells interactive or not are non login. 
[02:37:53] <earnestly> commands don't case subshells either
[02:38:22] <earnestly> They're generally an implementation detail to implement features like pipes, assignment, etc.  You may be reading too much into this
[02:38:32] *** Quits: sdu (~doo@185.44.146.64) (Remote host closed the connection)
[02:38:34] <alzgh> I thought running a command spwans a sub shell. Isn't it the reason we use `source` to load a script in the current shell?
[02:39:09] <earnestly> No, that's all unrelated, and wrong
[02:39:11] *** Joins: sublim20 (~sublim20@user/sublim20)
[02:39:59] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[02:40:00] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[02:40:03] <alzgh> Or pipes and all, I was thinking they all makes sub shells and plumb the stdout of the sub shell to the stdin of the parent shell
[02:40:17] <alzgh> Yeah, maybe I'm confusing things
[02:40:27] *** Joins: goldfish (~goldfish@user/goldfish)
[02:40:49] <earnestly> subshells and interactive/login shells are two different categories of things
[02:41:28] <earnestly> They're documented under: COMMAND EXECUTION ENVIRONMENT in the manual
[02:42:36] <alzgh> what about the ssh part. I thought when we ssh into a system, we are at an interactive login shell? I didn't get the part with the compile time flag you mentioned earlier.
[02:43:05] <earnestly> Notice how often you write 'we', don't you think it's a bit odd?
[02:43:21] <earnestly> ssh complicates things
[02:43:49] *** Quits: sublim20 (~sublim20@user/sublim20) (Client Quit)
[02:44:18] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 276 seconds)
[02:44:34] <earnestly> I said it's not a compile-time flag, it's a cpp macro.  This macro is why every .bashrc has that seemingly pointless interactivity check at the top
[02:44:34] <alzgh> I'm not a native speaker. With `we` I meant any person like when you use `you` or `one` in English.
[02:45:40] <earnestly> And it's for ssh which starts a login shell 
[02:48:47] <earnestly> I don't know of anything else that starts non-interactive shells
[02:48:52] <earnestly> login shells*
[02:49:07] *** Joins: rcernin|brb (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[02:49:28] <earnestly> For ssh it becomes non-interactive if stdin is not a terminal (such as pipes, file redirects, etc.)
[02:49:46] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 240 seconds)
[02:50:09] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 276 seconds)
[02:51:16] *** Joins: goldfish_ (~goldfish@user/goldfish)
[02:51:24] <alzgh> O, you can pipe the output of one machine into another machine via ssh. Didn't know about that.
[02:51:28] *** rcernin|brb is now known as rcernin
[02:53:42] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 258 seconds)
[02:56:46] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 258 seconds)
[02:56:58] *** Quits: alzgh (~alzgh@216.155.158.214) (Ping timeout: 246 seconds)
[02:58:06] *** Quits: winstonsmith (~winstonsm@109.201.152.173) (Remote host closed the connection)
[02:58:20] *** Joins: Hax0r (~Hax0r@87.101.193.195)
[02:58:21] *** Joins: winstonsmith (~winstonsm@109.201.152.176)
[02:58:44] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[02:58:44] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Remote host closed the connection)
[02:58:59] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[03:00:19] *** Quits: RickDeckard (~RickDecka@pool-100-12-189-215.nycmny.fios.verizon.net) (Quit: Leaving...)
[03:05:41] *** Quits: motherr (~motherr@user/motherr) (Quit: zzz)
[03:07:06] *** Joins: ferdna (~ferdna@user/ferdna)
[03:12:15] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Quit: tech_exorcist)
[03:16:16] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[03:19:28] *** Quits: solar_sea (~solar_sea@user/solar-sea/x-3088627) (Read error: Connection reset by peer)
[03:19:47] *** Joins: alzgh (~alzgh@89.187.177.74)
[03:19:53] *** Quits: zouhair (~zouhair@lnsm1-montreal02-142-118-47-137.internet.virginmobile.ca) (Quit: KVIrc 5.0.1 Aria http://www.kvirc.net/)
[03:21:17] *** Joins: goldfish__ (~goldfish@user/goldfish)
[03:23:08] *** Quits: goldfish__ (~goldfish@user/goldfish) (Read error: Connection reset by peer)
[03:24:08] *** Joins: goldfish__ (~goldfish@user/goldfish)
[03:24:26] *** Quits: goldfish_ (~goldfish@user/goldfish) (Ping timeout: 272 seconds)
[03:25:02] *** Joins: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru)
[03:26:17] <Eaglet> Hello! Sorry for the question not on the subject of the conference. Can anyone help me find a job as a system administrator?
[03:27:02] *** Joins: gordonfish- (~gordonfis@user/gordonfish)
[03:27:10] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 256 seconds)
[03:27:37] *** Quits: SuperLag (~akulbe@user/superlag) (Ping timeout: 245 seconds)
[03:28:35] *** Quits: goldfish__ (~goldfish@user/goldfish) (Ping timeout: 258 seconds)
[03:28:43] *** Joins: zouhair (~zouhair@lnsm1-montreal02-142-118-47-137.internet.virginmobile.ca)
[03:29:07] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 250 seconds)
[03:29:26] *** Joins: SuperLag (~akulbe@user/superlag)
[03:30:35] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[03:30:35] *** Quits: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru) (Read error: Connection reset by peer)
[03:32:27] *** Quits: jsrnop (~mark@user/jsrnop) (Quit: The Lounge - https://thelounge.chat)
[03:32:43] *** Joins: kill (~killown@user/killown)
[03:32:55] *** Joins: jsrnop (~mark@user/jsrnop)
[03:33:31] <emanuele6> !bug
[03:33:32] <greybot> Use the bashbug script to report bugs. It sends reports to bug-bash@gnu.org. Bug fixes, answers to questions, and new release announcements are posted to the usenet group gnu.bash.bug.
[03:33:38] *** Quits: zouhair (~zouhair@lnsm1-montreal02-142-118-47-137.internet.virginmobile.ca) (Quit: KVIrc 5.0.1 Aria http://www.kvirc.net/)
[03:33:53] <emanuele6> are they actually still sent to a usenet group?
[03:35:43] *** Quits: Nahra (~user@static.161.95.99.88.clients.your-server.de) (Remote host closed the connection)
[03:37:00] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[03:37:36] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[03:38:27] *** Joins: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru)
[03:39:04] *** Quits: odoood (~odoood@2601:c8:c003:a550::8) (Ping timeout: 256 seconds)
[03:40:21] *** Joins: odoood (~odoood@c-73-184-143-53.hsd1.ga.comcast.net)
[03:40:21] *** Quits: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru) (Read error: Connection reset by peer)
[03:41:22] *** j is now known as jess
[03:41:54] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[03:42:22] *** Quits: b0b (~bob@user/b0b) (Quit: o/)
[03:43:04] *** Joins: b0b (~bob@user/b0b)
[03:44:36] *** Joins: goldfish (~goldfish@user/goldfish)
[03:44:50] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[03:46:22] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[03:46:49] *** Joins: goldfish (~goldfish@user/goldfish)
[03:47:14] *** Quits: deltab (~deltab@user/deltab) (Ping timeout: 265 seconds)
[03:47:35] *** Quits: LSD (~LSD@2.lsd.systems) (Excess Flood)
[03:47:55] *** Joins: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru)
[03:49:06] *** Quits: odoood (~odoood@c-73-184-143-53.hsd1.ga.comcast.net) (Ping timeout: 240 seconds)
[03:49:06] *** Quits: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru) (Read error: Connection reset by peer)
[03:49:50] *** Joins: LSD (~LSD@2.lsd.systems)
[03:51:18] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[03:51:35] *** Joins: dre (~dre@2001:8003:c932:c301:28ee:7f92:679d:6e08)
[03:51:44] *** Joins: goldfish (~goldfish@user/goldfish)
[03:51:58] *** Joins: cdown (~cdown@163.114.131.1)
[03:52:03] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[03:52:41] *** Joins: deltab (~deltab@95.154.230.49)
[03:54:49] *** Joins: goldfish (~goldfish@user/goldfish)
[03:55:02] *** Quits: MercilessDeth (~brad@136.49.61.2) (Ping timeout: 258 seconds)
[03:55:51] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[03:56:02] *** Quits: vysn (~vysn@user/vysn) (Remote host closed the connection)
[03:57:51] *** Joins: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru)
[03:58:24] *** Joins: YaoNai (~YaoNai@user/yaonai)
[03:58:54] *** Quits: kevr (~kevr@user/kevr) (Ping timeout: 256 seconds)
[03:59:02] *** Quits: deltab (~deltab@95.154.230.49) (Changing host)
[03:59:02] *** Joins: deltab (~deltab@user/deltab)
[03:59:33] <Nintendo> Eh, why not?  I hear people use them.
[04:01:18] *** Joins: sublim20 (~sublim20@user/sublim20)
[04:03:24] *** Joins: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[04:03:36] *** Joins: Nahra (~user@static.161.95.99.88.clients.your-server.de)
[04:08:54] *** Joins: PrenzlBurg (~PrenzlBur@p5b05e91c.dip0.t-ipconnect.de)
[04:08:55] *** Quits: Eaglet (~redarmy@host-80-95-45-36.dsl.sura.ru) (Read error: Connection reset by peer)
[04:09:37] *** Quits: qub411 (~user@203-219-207-138.tpgi.com.au) (Quit: WeeChat 2.3)
[04:10:03] *** Quits: alzgh (~alzgh@89.187.177.74) (Quit: Client closed)
[04:11:18] *** Quits: julius_c (~julius_c@197.red-88-0-60.dynamicip.rima-tde.net) (Quit: Leaving)
[04:13:06] *** Quits: PrenzlBurg (~PrenzlBur@p5b05e91c.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[04:15:00] *** Quits: YaoNai (~YaoNai@user/yaonai) (Quit: leaving)
[04:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:15:37] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[04:17:28] *** Joins: wstrnr (uid510617@id-510617.tooting.irccloud.com)
[04:18:54] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Ping timeout: 272 seconds)
[04:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:20:08] *** Quits: Hax0r (~Hax0r@87.101.193.195) (Quit: Leaving)
[04:20:37] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[04:21:33] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[04:21:54] *** Joins: zouhair (~zouhair@lnsm1-montreal02-142-118-47-137.internet.virginmobile.ca)
[04:29:22] *** Quits: enoq (~enoq@194-208-179-35.lampert.tv) (Quit: enoq)
[04:30:12] *** Joins: F0odMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[04:30:44] *** Joins: Codaraxis_ (~Codaraxis@user/codaraxis)
[04:32:58] *** Quits: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 240 seconds)
[04:34:18] *** Quits: Codaraxis__ (~Codaraxis@user/codaraxis) (Ping timeout: 240 seconds)
[04:35:40] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 258 seconds)
[04:37:49] *** Quits: burrows (burrows@user/burrows) (Quit: Quitting)
[04:39:42] *** Quits: greycat (~greg@209.142.155.49) (Quit: Bye)
[04:40:02] *** Quits: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (Quit: ZNC 1.8.2 - https://znc.in)
[04:40:20] *** Joins: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[04:41:07] *** Joins: burrows (burrows@user/burrows)
[04:41:25] *** Quits: austin987 (~null@100.42.98.196) (Ping timeout: 258 seconds)
[04:46:46] *** Quits: fortuno51 (~fortuno51@37.120.156.254) (Ping timeout: 272 seconds)
[04:47:34] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[04:47:44] *** Joins: motherr (~motherr@user/motherr)
[04:47:45] *** Joins: Crescendo (~Crescendo@user/crescendo)
[04:49:08] *** jess is now known as sandcat
[04:51:59] *** Joins: totenkoph (~scythe@user/totenkoph)
[04:54:52] *** Joins: austin987 (~null@2603-8080-2700-d768-0000-0000-0000-0b6a.res6.spectrum.com)
[04:58:03] *** Quits: wstrnr (uid510617@id-510617.tooting.irccloud.com) (Changing host)
[04:58:03] *** Joins: wstrnr (uid510617@user/wstrnr)
[05:00:04] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 272 seconds)
[05:00:33] *** Joins: Crescendo (~Crescendo@user/crescendo)
[05:03:53] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Quit: Leaving)
[05:09:56] *** Quits: karakedi (~eAC53C340@user/karakedi) (Remote host closed the connection)
[05:10:32] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[05:11:28] *** Quits: wstrnr (uid510617@user/wstrnr) (Killed (NickServ (GHOST command used by wstrnr_!~wstrnr@user/wstrnr)))
[05:14:03] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[05:14:23] *** Joins: Crescendo (~Crescendo@user/crescendo)
[05:14:24] *** Quits: ferdna (~ferdna@user/ferdna) (Remote host closed the connection)
[05:15:57] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[05:22:52] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[05:29:05] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[05:30:23] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:33:49] *** Quits: motherr (~motherr@user/motherr) (Quit: zzz)
[05:34:13] *** Joins: vlm (~vlm@user/vlm)
[05:34:14] *** Quits: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (Quit: ZNC 1.8.2 - https://znc.in)
[05:34:19] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[05:36:07] *** Joins: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[05:37:15] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[05:38:10] <tirnanog> d1rewolf_: sorry, I had to leave before.
[05:39:56] *** Joins: downunder (~downunder@110.151.122.76)
[05:40:14] <tirnanog> d1rewolf_: effectively, it allows for the destination directory to precede the pathnames of the files and/or directories that should be moved.
[05:40:38] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[05:40:52] *** Joins: kevr (~kevr@user/kevr)
[05:49:04] *** Joins: dub_a (~dub_a@173.205.92.152)
[05:52:20] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 258 seconds)
[05:53:21] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Quit: Konversation terminated!)
[05:58:00] *** Joins: wstrnr (~wstrnr@user/wstrnr)
[06:02:01] *** Quits: Sasazuka (~Sasazuka@user/sasazuka) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:03:41] <wstrnr> # words=(a b c d e f); end=${#words[@]}; while ((end > 1)); do ((rnd = RANDOM % end, end--)); tmp=${words[end]} words[end]=${words[rnd]} words[rnd]=$tmp; done
[06:03:42] <shbot> wstrnr: no output
[06:04:00] <wstrnr> output you say...
[06:04:09] <wstrnr> # words=(a b c d e f); end=${#words[@]}; while ((end > 1)); do ((rnd = RANDOM % end, end--)); tmp=${words[end]} words[end]=${words[rnd]} words[rnd]=$tmp; done; declare -p words
[06:04:10] <shbot> wstrnr: declare -a words=([0]="f" [1]="d" [2]="c" [3]="e" [4]="a" [5]="b")
[06:04:17] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[06:04:39] <wstrnr> pragma-'s shuffle spell, adapted from shuffle is /say { srand(time(0)); int array[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }, end = 10; while(end > 0) { int random = rand() % end; end--; int temp = array[end]; array[end] = array[random]; array[random] = temp; } for(int i = 0; i < 10; i++) printf("%d ", array[i]); } from #c
[06:05:37] <wstrnr> i always wrote this thing using for, but with while (end > 1) it's much easier to maintain in memory as a fixed idiom
[06:05:59] *** Quits: sudomann (~sudomann@c-73-133-131-19.hsd1.md.comcast.net) (Read error: Connection reset by peer)
[06:06:24] *** Joins: ferdna (~ferdna@user/ferdna)
[06:07:05] <wstrnr> it's a convenience that ${#words[@]} shows the id of last element + 1, so you never need to use "+ 1" or "- 1" in any computations or boolean checks
[06:08:07] <wstrnr> obviously, in C sizeof works like that too. (i mean the sizeof array / sizeof array[0] idiom)
[06:08:44] <wstrnr> and even if you mix up 1 and 0 in the only place where it's mentioned, it's no harm
[06:09:06] *** Joins: PrenzlBurg (~PrenzlBur@p200300ca57319c00b09da0d2dad20612.dip0.t-ipconnect.de)
[06:10:18] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 240 seconds)
[06:12:09] *** Joins: odoood (~odoood@c-73-184-143-53.hsd1.ga.comcast.net)
[06:13:30] *** Quits: PrenzlBurg (~PrenzlBur@p200300ca57319c00b09da0d2dad20612.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[06:14:14] *** Joins: sharperguy_ (~sharpergu@2001:16b8:5c62:3100:48fe:b07b:f21f:4d1)
[06:16:47] *** Quits: sharperguy__ (~sharpergu@2001:16b8:5cd4:c00:90a:543f:b6df:be7f) (Ping timeout: 245 seconds)
[06:17:51] <wstrnr> by the way, when i said that ${#words[@]} returns the id of last element plus one, i meant that in this use-case it expands into that. if you have a sparse array in bash, this won't hold true. ${#array[@]} will expand to the amount of elements
[06:18:46] <wstrnr> in order to get the id of the last element, you will need to, probably
[06:20:09] <wstrnr> # a=(1 2 3 [10]=10 [20]=20); ids=("${!a[@]}"); echo "id of last: ${ids[@]: -1}"
[06:20:10] <shbot> wstrnr: id of last: 20
[06:20:18] *** Joins: n4dir (~user@i59F77C87.versanet.de)
[06:22:19] <wstrnr> if a is going to be an "associative array" with keys which just happen to look like numbers, this won't hold true
[06:22:47] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Read error: Connection reset by peer)
[06:23:32] <wstrnr> in order to find the numerically biggest key in an associative array, you will need to loop over its keys
[06:25:11] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[06:26:02] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.0.1)
[06:26:50] *** Quits: odoood (~odoood@c-73-184-143-53.hsd1.ga.comcast.net) (Ping timeout: 258 seconds)
[06:26:51] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 258 seconds)
[06:30:48] *** Joins: qub411 (~user@203-219-207-138.tpgi.com.au)
[06:31:03] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 258 seconds)
[06:31:38] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:54a:ad39:458:159f)
[06:31:38] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:54a:ad39:458:159f) (Changing host)
[06:31:38] *** Joins: skapata (~Skapata@user/skapata)
[06:34:03] *** Quits: Kruppt (~Kruppt@50.111.9.86) (Quit: Leaving)
[06:38:13] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[06:39:37] *** Joins: Codaraxis__ (~Codaraxis@user/codaraxis)
[06:42:03] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[06:44:09] *** Quits: Codaraxis_ (~Codaraxis@user/codaraxis) (Ping timeout: 276 seconds)
[06:47:51] *** Joins: odoood (~odoood@2601:c8:c003:a550::8)
[06:48:02] *** Joins: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[06:50:35] *** Joins: F00dMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[06:52:08] *** Quits: F0odMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 258 seconds)
[06:52:53] <pj> wstrnr: ${ids[-1]}
[06:53:15] *** Joins: kurahaupo_ (~kurahaupo@124-171-138-127.tpgi.com.au)
[06:54:49] *** Quits: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 258 seconds)
[06:55:43] <wstrnr> sure
[06:56:21] *** Quits: kurahaupo (~kurahaupo@pa49-195-104-15.pa.nsw.optusnet.com.au) (Ping timeout: 258 seconds)
[06:56:44] <pj> yours works too, just a bit simpler.  Other than that you've pretty much got the general idea, I think.
[06:57:58] <pj> it would be nice if you could do: ${!a[-1]} or ${!a[@]: -1} but unfortunately those don't work.
[06:59:16] *** Quits: dub_a (~dub_a@173.205.92.152) (Quit: WeeChat 3.2)
[07:00:02] *** Joins: cdown (~cdown@163.114.131.1)
[07:00:18] *** Joins: motherr (~motherr@user/motherr)
[07:01:14] *** Quits: motherr (~motherr@user/motherr) (Client Quit)
[07:04:15] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Quit: leaving)
[07:05:33] *** Quits: smlavine (smlavine@sourcehut/user/smlavine) (Ping timeout: 258 seconds)
[07:09:15] *** Quits: austin987 (~null@2603-8080-2700-d768-0000-0000-0000-0b6a.res6.spectrum.com) (Ping timeout: 250 seconds)
[07:10:08] <bn_work> why would the following not create a file on the fly?  
[07:10:43] <bn_work> https://www.irccloud.com/pastebin/hKYILYlm/heredoc_test.sh
[07:11:38] <bn_work> s/file/file called test/  note, am doing this interactively vs in a shell script
[07:11:50] *** Joins: jos1 (~jos3@host-091-097-184-063.ewe-ip-backbone.de)
[07:11:57] <bn_work> (bash v4.2.46)
[07:12:17] <wstrnr> you forgot the invocation of a program that'd copy input from stdin into stdout
[07:12:32] <wstrnr> # cat <<<"hello" >file;  cat file
[07:12:33] <shbot> wstrnr: hello
[07:12:34] *** Joins: Sasazuka (~Sasazuka@user/sasazuka)
[07:13:27] *** Joins: cer-0 (~cer-0@189.228.172.244)
[07:13:39] <wstrnr> bash does not know that you want to copy input. but if you run a program that does that, the program will do it
[07:13:47] *** Joins: PrenzlBurg (~PrenzlBur@p200300ca57319c00b09da0d2dad20612.dip0.t-ipconnect.de)
[07:14:04] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[07:14:06] *** Quits: superboot (~agentgasm@user/superboot) (Quit: leaving)
[07:14:17] *** Quits: cronolio (~alex@user/cronolio) (Ping timeout: 245 seconds)
[07:14:44] *** Quits: jos2 (~jos3@dyndsl-091-096-035-113.ewe-ip-backbone.de) (Ping timeout: 268 seconds)
[07:15:12] *** Joins: cronolio (~alex@user/cronolio)
[07:15:42] <bn_work> oh, so I needed to prefix cat?
[07:15:51] <wstrnr> yes.
[07:15:54] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 258 seconds)
[07:16:02] <wstrnr> it is the most important part
[07:16:07] *** Joins: Byteflux (~byte@byteflux.net)
[07:17:40] <wstrnr> cat is just one of programs which copy input from stdin into stdout. other programs can do that: head, tail, grep, ``awk 1'', many others
[07:18:37] <wstrnr> if you want to write something in a file literally, of course you can use bash builtins for that
[07:18:44] <wstrnr> i'd write
[07:18:57] <wstrnr> printf %s 'first line
[07:19:01] <wstrnr> second line
[07:19:06] <wstrnr> third line' >file
[07:19:07] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Ping timeout: 246 seconds)
[07:19:25] <wstrnr> if you want to store something in a file without of final newline
[07:19:31] <bn_work> wstrnr: what if I wanted to prefix a shell var value at the beginning of an existing file? 
[07:19:54] *** Quits: PrenzlBurg (~PrenzlBur@p200300ca57319c00b09da0d2dad20612.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[07:20:01] <wstrnr> not a problem at all. cat can do that too
[07:20:10] <tirnanog> create a temp file then move it into place upon the preceding operations succeeding.
[07:20:39] <wstrnr> # var=something;  echo some-contents >file;  printf %s\\n "$var" | cat - file >file- && mv file- file;   cat file
[07:20:40] <shbot> wstrnr: something
[07:20:41] <shbot> wstrnr: some-contents
[07:20:46] <bn_work> tirnanog: that was my first thought but was wondering if there was a more direct way to do that
[07:20:52] <wstrnr> the "something" was taken from var
[07:21:03] <wstrnr> the "some-contents" is what was in the file before
[07:21:24] <wstrnr> there is a factoid about this technique on this channel
[07:21:34] <tirnanog> the more direct way would be to use an editor such as ed(1), though it's less safe.
[07:21:43] <wstrnr> !prepend
[07:21:43] <greybot> To prepend a string to a file, use cat with the stdin flag: cat - origfile <<< "string" > newfile && mv newfile origfile
[07:22:10] <tirnanog> and not really any less fiddly from a scripting point of view.
[07:23:30] <wstrnr> <<<"..." herestring is a bash feature. you can   printf '%s\n' "$var" | cat - origfile >tmpfile && mv tmpfile origfile   even in standard sh
[07:25:18] <wstrnr> also it is safe in case of error conditions (e.g. disk full error etc. either >tmpfile redirect will fail and error will be reported by bash without of running cat, or cat will fail to write data and terminate with error diagnostic message, or mv will fail with a comprehensible error message)
[07:26:43] <bn_work> so "cat - origfile" concats stdinput + origfile in that order?  if so, why is the "mv newfile origfile" needed?
[07:27:13] <wstrnr> it concats allright, but it writes output to stdout
[07:27:44] <wstrnr> not in a file of any kind, so you have to use a shell feature to redirect output to a file
[07:28:35] <wstrnr> and when >redirect happens, the file is either created anew or truncated, either way it is going to be empty by the time cat runs, so you have to redirect the output to some other file
[07:28:40] <bn_work> oh wait, did I misread that, so cat - origfile <<< "string" > newfile is one command, then switch them?
[07:28:43] *** Quits: Sasazuka (~Sasazuka@user/sasazuka) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:29:19] <tirnanog> you may also find this post informative.
[07:29:24] <tirnanog> !editinginplace > bn_work 
[07:29:40] <tirnanog> oh
[07:29:43] <tirnanog> !editinplace > bn_work 
[07:29:44] <greybot> bn_work: http://backreference.org/2011/01/29/in-place-editing-of-files/
[07:30:40] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[07:30:40] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[07:31:05] <wstrnr> bn_work: <<<"string" is a here-string syntax of bash, it is like a heredoc, but a little bit easier to type maybe, if you want to "heredoc" just one line. it automatically adds newline in the end of the string.
[07:31:21] <wstrnr> bn_work: >file is a ordinary redirect of stdout to a file
[07:32:18] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[07:32:48] <wstrnr> bn_work: cat - origfile is a program that concatenates data from stdin (the "-" argument) and from a file ("origfile"), and dumps the text on stdout, which is going to be redirected by bash to a file if you use a >file redirect
[07:33:02] <wstrnr> well, yes, it is one command.
[07:33:27] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 245 seconds)
[07:33:46] <wstrnr> ``cat file >file'' is a wrong usage of a redirect.
[07:34:17] <wstrnr> because >file redirect effectively deletes any content from the file, it truncates the file 
[07:34:59] <wstrnr> and it happens before cat runs. so cat will just dump literally nothing and exit.
[07:35:47] <wstrnr> therefore if you want to "update" a file, you have to dump output to another file, a temporary one, then replace the original with the new version using mv program
[07:37:05] <wstrnr> # echo "original contents" >file;  echo whatever | cat - file >file- && mv file- file;  grep -H '' file
[07:37:06] <shbot> wstrnr: file:whatever
[07:37:07] <shbot> wstrnr: file:original contents
[07:37:42] <wstrnr> (used ``grep -H '' file'' here just for the sake of dumping text together with the name of the file it was taken from)
[07:39:43] *** Joins: gnoo (~gnoo@user/gnoo)
[07:40:02] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Quit: WeeChat 3.2)
[07:40:19] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:41:59] *** Quits: yuesbeez (uid458354@tinside.irccloud.com) (Quit: Connection closed for inactivity)
[07:42:18] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 240 seconds)
[07:43:53] *** Quits: odoood (~odoood@2601:c8:c003:a550::8) (Ping timeout: 258 seconds)
[07:44:18] <bn_work> ah, thanks for the detailed explanation
[07:44:19] *** Joins: odoood (~odoood@2601:c8:c003:a550::8)
[07:45:39] *** Joins: dermoth_ (~dermoth@user/dermoth)
[07:45:56] *** Quits: dermoth (~dermoth@user/dermoth) (Killed (NickServ (GHOST command used by dermoth_)))
[07:45:58] *** dermoth_ is now known as dermoth
[07:48:06] *** Joins: mohabaks_ (~mohabaks@gateway/tor-sasl/mohabaks)
[07:49:33] *** Joins: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com)
[07:52:15] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Quit: PROTO-IRC v0.73a (C) 1988 NetSoft - Built on 11-13-1988 on AT&T System V)
[07:54:53] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[07:55:59] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Client Quit)
[07:57:27] *** Joins: MercilessDeth (~brad@136.49.61.2)
[08:01:32] *** Joins: ozoned (~odoood@2601:c8:c003:a550::8)
[08:02:11] *** Quits: odoood (~odoood@2601:c8:c003:a550::8) (Read error: Connection reset by peer)
[08:10:34] *** Quits: cer-0 (~cer-0@189.228.172.244) (Ping timeout: 240 seconds)
[08:12:31] *** Joins: cer-0 (~cer-0@189.228.172.244)
[08:27:54] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 240 seconds)
[08:28:52] *** Quits: cer-0 (~cer-0@189.228.172.244) (Ping timeout: 245 seconds)
[08:31:55] *** Quits: wstrnr (~wstrnr@user/wstrnr) (Quit: .)
[08:33:23] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[08:33:42] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[08:35:10] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[08:35:34] *** Quits: Bercik (~Redomen@user/bercik) (Ping timeout: 258 seconds)
[08:38:59] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[08:39:12] *** Joins: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl)
[08:39:12] *** Quits: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl) (Changing host)
[08:39:12] *** Joins: Bercik (~Redomen@user/bercik)
[08:40:34] *** Quits: ozoned (~odoood@2601:c8:c003:a550::8) (Ping timeout: 240 seconds)
[08:45:36] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 258 seconds)
[08:50:09] *** Joins: smlavine (smlavine@sourcehut/user/smlavine)
[08:53:46] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[08:58:13] *** Joins: PrenzlBurg (~PrenzlBur@p5b05e91c.dip0.t-ipconnect.de)
[08:58:27] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 250 seconds)
[09:02:18] *** Quits: PrenzlBurg (~PrenzlBur@p5b05e91c.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[09:02:55] *** Quits: marcel (~marcel@user/marcel) (Quit: The Lounge - https://thelounge.chat)
[09:04:06] *** Joins: marcel (~marcel@user/marcel)
[09:09:45] *** Joins: edlou (uid413273@id-413273.brockwell.irccloud.com)
[09:26:37] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 258 seconds)
[09:30:27] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[09:32:01] *** Joins: fortuno51 (~fortuno51@37.120.156.254)
[09:32:58] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[09:37:53] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 250 seconds)
[09:38:41] *** Quits: lq820105 (~lq@180.167.42.10) (Read error: Connection reset by peer)
[09:38:49] *** Quits: kurahaupo_ (~kurahaupo@124-171-138-127.tpgi.com.au) (Read error: Connection reset by peer)
[09:39:04] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[09:39:21] *** Joins: lq (~lq@180.167.42.3)
[09:41:06] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 240 seconds)
[09:41:17] *** Quits: sinaowolabi (~SinaOwola@41.190.2.136) (Read error: Connection reset by peer)
[09:42:27] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:1138:99e5:5cd0:db05)
[09:42:28] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:1138:99e5:5cd0:db05) (Changing host)
[09:42:28] *** Joins: skapata (~Skapata@user/skapata)
[09:43:37] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[09:50:19] *** Quits: mohabaks_ (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 244 seconds)
[09:50:30] *** Joins: skapate (~Skapata@2804:14c:87b0:a6f9:1138:99e5:5cd0:db05)
[09:50:30] *** Quits: skapate (~Skapata@2804:14c:87b0:a6f9:1138:99e5:5cd0:db05) (Changing host)
[09:50:30] *** Joins: skapate (~Skapata@user/skapata)
[09:50:33] *** Quits: skapate (~Skapata@user/skapata) (Read error: Connection reset by peer)
[09:53:58] *** Quits: cim (~cim@205.185.117.110) (Quit: Ping timeout (120 seconds))
[09:54:27] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 244 seconds)
[09:55:06] *** Quits: mute (scott@nicholas.one) (Ping timeout: 240 seconds)
[09:55:17] *** Joins: cim (~cim@205.185.117.110)
[09:56:18] *** Quits: grossing (~grossing@user/grossing) (Ping timeout: 240 seconds)
[09:57:12] *** Joins: grossing (~grossing@user/grossing)
[10:04:28] *** Joins: makara (~sol@196.61.111.63)
[10:05:46] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[10:08:29] *** Joins: alzgh (~alzgh@216.155.158.214)
[10:11:16] *** Joins: furrymcgee (~devuan@31.179.186.66)
[10:11:58] *** Joins: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66)
[10:14:17] *** Quits: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66) (Ping timeout: 250 seconds)
[10:14:26] *** Quits: n4dir (~user@i59F77C87.versanet.de) (Remote host closed the connection)
[10:15:07] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 244 seconds)
[10:15:22] *** Quits: mcint (mcint@user/mcint) (Ping timeout: 240 seconds)
[10:15:33] <alzgh> Are bash scripts executed in a sub shell when called from a terminal? What here documents?
[10:17:08] *** Joins: totenkoph (~scythe@user/totenkoph)
[10:18:37] *** Quits: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca) (Ping timeout: 250 seconds)
[10:20:29] <tirnanog> no. they are executed by a new bash process, which just happens to be a child process of the shell from which you invoked them.
[10:20:41] <tirnanog> just like any other executable.
[10:21:22] *** Joins: mcint (mcint@user/mcint)
[10:23:54] *** Joins: mute (scott@nicholas.one)
[10:25:33] <alzgh> tirnanog is this new bash process the same as a sub shell that I said or do you mean something different?
[10:25:40] <tirnanog> no.
[10:26:13] <tirnanog> a subshell is the case where a shell forks itself, but does not replace itself.
[10:26:44] <alzgh> OK, thank you.
[10:26:56] <tirnanog> launching a sub-process tpyically entails a fork - at which point a child is born - then an exec, whereby the child replaces itself with some other program.
[10:27:30] *** Quits: mcint (mcint@user/mcint) (Ping timeout: 272 seconds)
[10:27:48] <tirnanog> in short, don't conflate the term, subshell, with the term, subprocess
[10:28:15] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[10:28:17] <tirnanog> while it's true that a subshell is also a subprocess, it's the absence of the self-replacement step that makes it different.
[10:28:45] *** Joins: karakedi (~eAC53C340@user/karakedi)
[10:29:12] <tirnanog> # foo=bar; ( echo "parent = $$; subshell = $BASHPID"; declare -p foo )
[10:29:14] <shbot> tirnanog: parent = 44; subshell = 51
[10:29:14] <shbot> tirnanog: declare -- foo="bar"
[10:29:50] <tirnanog> # foo=bar; bash -c 'echo "parent = $PPID; child = $BASHPID"; declare -p foo'
[10:29:51] <shbot> tirnanog: parent = 44; child = 51
[10:29:51] <shbot> tirnanog: bash: line 1: declare: foo: not found
[10:31:33] <tirnanog> in the first case, the parent forked itself, with the child remaining privy to the internal state, so to speak. hence, foo was still defined.
[10:32:39] <tirnanog> and the only way you can get a subshell is through the use of various forms of shell syntax.
[10:37:01] *** Joins: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca)
[10:37:06] *** Joins: terabyte (~terabyte@27.176-105-213.static.virginmediabusiness.co.uk)
[10:42:41] *** Joins: mcint (mcint@user/mcint)
[10:46:29] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[10:49:19] *** Parts: akoana (~ah@user/akoana) ()
[10:49:51] *** Joins: sdu (~doo@185.44.146.64)
[10:51:54] <ormaaj> subshells aren't technically required to fork or be implemented in any particular way, though that's not particularly relevent to any of the major shells.
[10:53:01] <ormaaj> http://www.ccs.neu.edu/home/shivers/papers/scheme02/article/threads.pdf
[10:53:18] *** Joins: yogoyo (~paddy@user/yogoyo)
[10:55:26] *** Joins: Lord_of_Life_ (~Lord@user/lord-of-life/x-2819915)
[10:55:53] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 250 seconds)
[10:56:40] *** Lord_of_Life_ is now known as Lord_of_Life
[10:57:57] *** Joins: rendar (~rendar@user/rendar)
[11:01:00] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[11:03:16] *** Quits: rustyshackleford (uid236774@id-236774.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[11:09:44] *** Quits: LiftLeft (~LiftLeft@191.96.227.27) (Ping timeout: 258 seconds)
[11:18:03] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[11:24:20] *** Joins: jmcantrell (~weechat@user/jmcantrell)
[11:26:00] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 256 seconds)
[11:32:57] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[11:33:26] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[11:37:20] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[11:37:47] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[11:40:07] *** Quits: richardm75 (~richardm7@2600:8801:c502:1000:3044:747c:82af:888e) (Ping timeout: 245 seconds)
[11:44:10] *** Quits: wolfshappen_ (~waff@irc.furworks.de) (Ping timeout: 258 seconds)
[11:48:51] *** Joins: angryman (~angryman@139.180.173.134)
[11:50:04] *** Joins: jetchisel (jetchisel@user/jetchisel)
[11:53:06] *** Joins: Adoi (~Adoi@user/adoi)
[12:00:14] *** Joins: LordRishav (~lordrisha@157.42.49.190)
[12:00:39] *** Joins: PrenzlBurg (~PrenzlBur@p200300ca57319c00103a139c8c329a46.dip0.t-ipconnect.de)
[12:02:20] *** Quits: rs_ (~ubuntu@ec2-18-222-18-102.us-east-2.compute.amazonaws.com) (Quit: WeeChat 3.1)
[12:02:22] *** Joins: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa)
[12:02:37] *** Joins: ubuntu (~ubuntu@ec2-18-222-18-102.us-east-2.compute.amazonaws.com)
[12:02:49] *** ubuntu is now known as rs_
[12:03:47] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Ping timeout: 258 seconds)
[12:04:19] *** Quits: rs_ (~ubuntu@ec2-18-222-18-102.us-east-2.compute.amazonaws.com) (Client Quit)
[12:04:43] *** Joins: ubuntu (~ubuntu@ec2-18-222-18-102.us-east-2.compute.amazonaws.com)
[12:05:06] *** ubuntu is now known as rs_
[12:05:58] *** Quits: edlou (uid413273@id-413273.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[12:06:58] *** Quits: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa) (Ping timeout: 240 seconds)
[12:13:42] *** Joins: ubuntu (~ubuntu@ec2-3-131-133-109.us-east-2.compute.amazonaws.com)
[12:14:06] *** ubuntu is now known as Guest8144
[12:14:11] *** Joins: lq820105 (~lq@210.72.8.203)
[12:15:20] *** Quits: rs_ (~ubuntu@ec2-18-222-18-102.us-east-2.compute.amazonaws.com) (Quit: WeeChat 3.1)
[12:15:37] *** Guest8144 is now known as rs_
[12:16:28] *** Quits: lq (~lq@180.167.42.3) (Read error: Connection reset by peer)
[12:16:47] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[12:18:20] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[12:20:42] *** Quits: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (Ping timeout: 240 seconds)
[12:21:14] *** Joins: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa)
[12:21:46] *** Joins: Pall (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net)
[12:22:09] <Pall> anyone got any idea how I could do this:         echo "file \'$i\'" >> output.txt     but have it work?    
[12:22:17] <Pall> really cannot figure it out at all
[12:22:26] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[12:22:32] *** Joins: no_gravity (~no_gravit@user/no-gravity/x-5639427)
[12:22:37] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[12:22:49] <osse> Pall: how do you want it to work?
[12:23:12] <no_gravity> I would like to make a list similar to the output of 'find .' but I want it to not dive into dirs that contain a .git dir. Any ideas how to go about this?
[12:23:22] <Pall> I would like the text "file 'xxx'" to be put into the file output.txt
[12:23:34] <Pall> it is inside a foreach loop a the minute hence the $i
[12:24:02] <Pall> but the apostrophe is giving a syntax error, i need it there, but cannot figure out how to escape it
[12:24:20] <osse> # i=xxx; echo "file '$i'" >> output.txt; cat output.txt
[12:24:21] <tirnanog> so you're generating shell code?
[12:24:22] <shbot> osse: file 'xxx'
[12:25:31] <tirnanog> there's nothing syntactically wrong with the given command anyway, though the approach looks suspicious. if it doesn't work, there's probably yet another quoting layer that you haven't mentioned.
[12:26:26] <tirnanog> # i=thing; echo "file \'$i\'"
[12:26:27] <shbot> tirnanog: file \'thing\'
[12:26:39] <tirnanog> perhaps you really want:
[12:26:51] <Pall> https://paste.ubuntu.com/p/9X4GBdrWjN/ here is the full thing ive made so far, and the error https://paste.ubuntu.com/p/KRNQfFwBvK/
[12:26:52] <tirnanog> # i=thing; printf 'file %q\n' "$i"
[12:26:53] <shbot> tirnanog: file thing
[12:27:24] <tirnanog> ah, I see.
[12:28:09] *** Joins: vysn (~vysn@user/vysn)
[12:28:47] <alzgh> I'm reading this book and it says: "a sub shell can be spawned using the bash command". But isn't this false? Creating a shell with bash creates a sub process but not a sub shell.
[12:29:06] <geirha> yes, the book is wrong
[12:29:07] <tirnanog> alzgh: indeed, it's false. wrong terminology.
[12:29:25] <alzgh> thanks
[12:29:25] <Soliton> Pall: for f in *jpg; do ...; done
[12:29:51] <geirha> no_gravity: find . -type d -exec sh -c 'test -e "$1/.git"' _ {} \; ! -prune -o -print
[12:30:02] *** Quits: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa) (Ping timeout: 256 seconds)
[12:30:04] <no_gravity> geirha: let me try that ...
[12:31:05] <no_gravity> geirha: Holy moly! Looks good on a first test!
[12:31:45] <no_gravity> And on a second test!
[12:31:57] *** Quits: yogoyo (~paddy@user/yogoyo) (Quit: WeeChat 3.0.1)
[12:32:01] <tirnanog> Pall: replace lines 9-14 with: printf "file '%s'\\n" *.jpg > output.txt. also, run it through shellcheck do learn of another issue.
[12:32:39] <tirnanog> if it still doesn't work, please identify a sample input line intended for ffmpeg that you think is wrong and show it here.
[12:33:21] *** Joins: earnestly (~earnest@user/earnestly)
[12:33:27] <tirnanog> or simply explain what the error is, if nothing else.
[12:33:30] <geirha> you might get away with   -exec test -e {}/.git \;  too, but iirc, when {} is part of another argument, it's undefined by posix
[12:33:42] <Soliton> the error is a missing semicolon.
[12:34:08] <no_gravity> geirha: I think I understand it up to the _ sign. What does _ do?
[12:34:10] <Pall> thank you tirnanog! It is working as expected now
[12:34:19] <tirnanog> Pall: very good.
[12:34:43] <Soliton> might still want handling of ' in filenames.
[12:34:52] <geirha> no_gravity: sets the script name ($0) to "_". You have to pass a name, so _ is chosen as an arbitrary string
[12:35:44] <geirha> normally, the name of the script is based on the script filename, but when you provide the script via -c, there's not script filename to base it on, so it expects the next argument to be the name instead
[12:36:07] <tirnanog> I was wondering how ffmpeg is supposed to handle the apostrophe but have no idea.
[12:37:20] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Quit: WeeChat 3.2)
[12:37:37] *** Joins: shad (~shad@user/shad)
[12:37:53] <geirha> when dealing with arbitrary filenames and ffmpeg, I'd create symlinks with safe names to pass. ffmpeg does some weird parsing
[12:39:48] *** Joins: jochum (~jochum@user/jochum)
[12:39:52] *** Joins: modin (~modin@user/modin)
[12:40:09] <no_gravity> geirha: When you say "you have to pass a name" - who expects the name?
[12:40:29] <Soliton> probably the thing you pass it to.
[12:41:27] <no_gravity> Soliton: That would be sh I think.
[12:41:57] *** Joins: PrenzlBu_ (~PrenzlBur@p200300ca57319c00110669b9544d1a05.dip0.t-ipconnect.de)
[12:42:55] <no_gravity> Soliton: But I don't think sh expects a script name. "sh -c 'echo 7'" works just fine for me.
[12:43:09] <geirha> the shell. It uses it in error messages and such. And you have to put something there in order to pass an argument ($1)
[12:43:34] <geirha> # sh -c '<nonexistent' foo bar
[12:43:36] <shbot> geirha: foo: 1: foo: cannot open nonexistent: No such file
[12:43:44] *** Joins: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de)
[12:43:57] <tirnanog> geirha: it seems rather odd to me that it doesn't have a --files0-from style option.
[12:44:05] <osse> # sh -c 'echo "I am $0"; echo args are "$@"'
[12:44:07] <shbot> osse: I am sh
[12:44:07] <shbot> osse: args are
[12:44:11] <osse> # sh -c 'echo "I am $0"; echo args are "$@"' foo bar baz
[12:44:12] <shbot> osse: I am foo
[12:44:13] <shbot> osse: args are bar baz
[12:44:42] *** Quits: PrenzlBurg (~PrenzlBur@p200300ca57319c00103a139c8c329a46.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[12:56:10] *** Joins: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa)
[12:56:51] <alzgh> man, I think I'm starting to understand why `export` is used and the difference between global and local variables.
[12:59:22] *** Quits: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66) (Quit: Leaving)
[12:59:48] *** Quits: no_gravity (~no_gravit@user/no-gravity/x-5639427) (Quit: leaving)
[13:00:06] *** Joins: tccki (~tccki@2406:e001:2:5a60:250:56ff:fe9e:8795)
[13:01:10] *** Quits: LordRishav (~lordrisha@157.42.49.190) (Quit: Konversation terminated!)
[13:01:35] *** Quits: PrenzlBu_ (~PrenzlBur@p200300ca57319c00110669b9544d1a05.dip0.t-ipconnect.de) ()
[13:01:39] <Soliton> !env
[13:01:39] <greybot> The environment comprises the subset of variables that are exported, either permanently by the "export" statement or temporarily by prefix assignment. All variables are copied to subshells, but only exported variables are received by other programs; that is the ONLY effect of "export". It's intentionally not possible to modify variables in another process. http://mywiki.wooledge.org/Environment
[13:04:10] *** Quits: dre (~dre@2001:8003:c932:c301:28ee:7f92:679d:6e08) (Quit: Leaving)
[13:05:31] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[13:05:57] *** Joins: ApostleInTriumph (~ApostleIn@vpn2.lix.polytechnique.fr)
[13:08:34] *** Joins: drd (~drd@93-39-151-19.ip76.fastwebnet.it)
[13:09:39] *** Joins: Mo_ (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de)
[13:10:07] *** Joins: Bhavuk (~BTaneja@122.173.24.168)
[13:11:29] *** Joins: lavaball (felix@31.204.155.215)
[13:12:01] *** Quits: bn_work (uid268505@id-268505.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[13:13:41] <alzgh> the local variable sharing among parent shell and sub shell works both ways, I just learned.
[13:14:19] *** Quits: Betal (~Beta@user/betal) (Quit: WeeChat 3.2)
[13:14:22] <tirnanog> alzgh: it doesn't. it's impossible.
[13:14:42] <tirnanog> at least, given the way bash is implemented.
[13:15:09] <tirnanog> # foo=1; ( bar=2 ); declare -p foo bar
[13:15:10] <shbot> tirnanog: declare -- foo="1"
[13:15:10] <shbot> tirnanog: bash: declare: bar: not found
[13:16:38] <alzgh> yes, I made a mistake in my test cases, the variable I was checking was previously set in the parent shell
[13:16:59] <Soliton> there is no IPC involved. the subshell is just a process copy that has all the same state when it is created.
[13:17:08] <tirnanog> yes. it would require some form of IPC to be otherwise.
[13:17:19] <Soliton> !varparent
[13:17:19] <greybot> gdb -batch-silent -p "$PPID" -ex "call bind_variable(\"${1:?}\", \"$2\", 0)"
[13:19:45] *** Joins: N4buc0 (~N4buc0@2001:1284:f016:1112:c1b7:d115:ba5a:a45f)
[13:23:06] <rendar> can i tell bash to use another bash_history file when i'm using it, for instance, in vscode?
[13:23:48] *** Joins: maledict1um (~crux@176.78.88.18)
[13:23:50] <Soliton> set HISTFILE to something else.
[13:24:07] <rendar> also, can i tell bash, when i press the up arrow to get the previous command, if i hit it again, if the previous previous command is the same, to skip that and give me the first *different* previous command?
[13:24:17] *** Quits: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa) (Ping timeout: 258 seconds)
[13:24:20] *** Joins: julius_c (~julius_c@174.red-83-57-76.dynamicip.rima-tde.net)
[13:24:50] *** Quits: maledictium (~crux@bl10-83-37.dsl.telepac.pt) (Ping timeout: 272 seconds)
[13:25:05] <ormaaj> haha nice
[13:25:19] <ormaaj> !meta varparent
[13:25:19] <greybot> izabera 1515777959(2018-01-12) learn gdb -batch-silent -p "$PPID" -ex "call bind_variable(\"${1:?}\", \"$2\", 0)"
[13:25:27] <Soliton> you can set HISTCONTROL to avoid saving duplicates.
[13:25:53] <izabera> o.o
[13:26:19] <izabera> i think that leaks btw, or used to
[13:26:40] <ormaaj> i hadn't seen that one :P
[13:26:41] <izabera> don't use it for anything serious
[13:26:47] *** Quits: GNUHacker (~foobar@fsf/member/GNUHacker) (Remote host closed the connection)
[13:28:34] *** Joins: GNUHacker (~foobar@fsf/member/GNUHacker)
[13:28:36] *** Joins: WinterStar (~IceLight@user/icelight)
[13:28:56] *** Joins: TomyWork (~TomyLobo@p200300e80f06af00f862160e61be0137.dip0.t-ipconnect.de)
[13:29:00] <alzgh> I was about to say that I don't understand why exporting a variable in a child shell won't change its value in other/parent shells, but I guess I understand it now that I thought about it.
[13:29:08] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[13:29:46] <izabera> honestly it's a design bug that people have been putting up with for 50 years
[13:30:32] *** Quits: BUSY (~BUSY@user/busy) (Ping timeout: 272 seconds)
[13:32:18] <Soliton> wake up sheeple.
[13:32:28] <alzgh> haha @iz
[13:32:36] <alzgh> izabera
[13:34:46] *** Quits: skapata (~Skapata@user/skapata) (Read error: Connection reset by peer)
[13:36:58] *** Joins: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa)
[13:37:43] *** Quits: GNUHacker (~foobar@fsf/member/GNUHacker) (Remote host closed the connection)
[13:38:05] *** Joins: GNUHacker (~foobar@fsf/member/GNUHacker)
[13:38:43] <izabera> there's some features that need a separate process, because they either change attributes that are process-wide like (cd /some/where && ./cmd ./file)
[13:39:09] <izabera> or because they do multiple things that are supposed to run at the same time, like     cmd1 | cmd2
[13:39:34] <izabera> sh uses subprocesses far too much
[13:40:41] <izabera> there is absolutely no reason why   x=$(cmd)   should fork by default, as indicated by the fact that you can replicate it with    cmd > file; x=$(<file)    (which by the way also forks in bash for some reason)
[13:42:06] *** Quits: roadie (~user@2a02:8108:ec0:1427:4923:8053:599c:ccaa) (Ping timeout: 276 seconds)
[13:44:22] <ormaaj> there was briefly a feature in ksh where you could assign to .sh.value from within ${ ; } and that was supposed to support returning the variable directly  through the parameter, so a function with a nameref argument was supposed to support being passed a value directly through the command substitution.
[13:44:30] <earnestly> Doesn't ksh optimise most of those cases away?
[13:44:39] <ormaaj> I pointed out a few problems in it and DGK just backed out the change.
[13:45:28] <ormaaj> for builtins i think it can
[13:46:06] <izabera> this is all because someone couldn't be arsed to code a function to restore things after doing something, which is why special builtins are special
[13:47:16] *** Joins: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd)
[13:49:06] <izabera> i don't like things
[13:49:19] * izabera grumpy today
[13:50:06] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Remote host closed the connection)
[13:50:09] <ormaaj> :)
[13:50:40] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[13:52:16] *** Quits: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd) (Ping timeout: 258 seconds)
[13:54:28] *** Joins: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com)
[13:55:20] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 258 seconds)
[13:57:35] *** Quits: ApostleInTriumph (~ApostleIn@vpn2.lix.polytechnique.fr) (Quit: Client closed)
[13:57:56] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Quit: WeeChat 3.2)
[14:00:49] *** Quits: GNUHacker (~foobar@fsf/member/GNUHacker) (Remote host closed the connection)
[14:02:08] *** Joins: GNUHacker (~foobar@fsf/member/GNUHacker)
[14:04:40] *** Quits: GNUHacker (~foobar@fsf/member/GNUHacker) (Remote host closed the connection)
[14:05:03] *** Joins: GNUHacker (~foobar@fsf/member/GNUHacker)
[14:05:11] *** Joins: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd)
[14:08:21] *** Joins: sharperguy__ (~sharpergu@2001:1438:4010:3101:10a::3133)
[14:11:04] *** Quits: sharperguy_ (~sharpergu@2001:16b8:5c62:3100:48fe:b07b:f21f:4d1) (Ping timeout: 272 seconds)
[14:12:28] *** Joins: magla (~gelignite@55d4c44d.access.ecotel.net)
[14:18:33] *** Quits: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de) (Read error: Connection reset by peer)
[14:18:40] <alzgh> all files that are in `/etc/profile.d/` are run when bash is invoked in login mode?
[14:19:06] <earnestly> Depends on what /etc/profile does
[14:19:14] *** Joins: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de)
[14:19:24] <earnestly> Also, can this be done in bash without the fork?          touch -r "$tmp"/timeref -- "$statedir"/livestreams
[14:19:28] <earnestly> Hm not that
[14:20:01] <earnestly> data=$(dd ibs=1 count="$size" <&3 2> /dev/null)
[14:20:15] *** Quits: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au) (Ping timeout: 258 seconds)
[14:20:23] <ormaaj> Some of those are compile-time configurable. Not sure about profile.d
[14:21:42] <earnestly> maybe `read' has some way to do nbytes
[14:21:50] <earnestly> Hm, chars
[14:22:09] *** Quits: Hyde_ (~MrHyde@static.54.68.46.78.clients.your-server.de) (Quit: leaving)
[14:22:19] *** Joins: Hyde (~MrHyde@static.54.68.46.78.clients.your-server.de)
[14:22:53] *** Joins: Atque (~Atque@user/atque)
[14:24:49] *** Joins: kurahaupo (~kurahaupo@124-171-138-127.tpgi.com.au)
[14:25:21] <Soliton> so use a locale where character and byte are the same thing.
[14:26:00] *** Quits: shad (~shad@user/shad) (Ping timeout: 258 seconds)
[14:26:38] <earnestly> Does read work with LC_ALL=C read ...?
[14:27:40] <earnestly> Hopefully so
[14:27:56] *** Joins: shad (~shad@user/shad)
[14:29:17] *** Joins: dza (~dza@user/dza)
[14:32:43] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[14:38:42] *** Joins: darkbit (~db@152.32.99.67)
[14:42:52] *** Quits: moto (~moto@user/moto) (Ping timeout: 258 seconds)
[14:46:19] *** Quits: shad (~shad@user/shad) (Ping timeout: 258 seconds)
[14:49:01] *** Quits: rs (~rs@user/rs) (Ping timeout: 250 seconds)
[14:49:30] *** Joins: elf_fortrez (~elf_fortr@adsl-72-50-4-118.prtc.net)
[14:49:31] *** Joins: moto (~moto@user/moto)
[14:53:07] *** Quits: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com) (Remote host closed the connection)
[14:53:44] *** Quits: Hyde (~MrHyde@static.54.68.46.78.clients.your-server.de) (Quit: leaving)
[14:53:46] *** Quits: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de) (Ping timeout: 240 seconds)
[14:53:53] *** Joins: Hyde (~MrHyde@static.54.68.46.78.clients.your-server.de)
[14:56:12] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[14:56:26] *** Joins: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de)
[14:56:30] *** Joins: libremind (~andrea@gateway/tor-sasl/libremind)
[14:56:48] *** Quits: StathisA (~StathisA@ppp-94-65-240-150.home.otenet.gr) (Ping timeout: 256 seconds)
[14:59:52] *** Joins: IndieBoy (~IndieBoy@37.162.56.53)
[15:00:24] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Remote host closed the connection)
[15:00:44] <IndieBoy> Hello, can someone help me translate this in bash https://paste.centos.org/view/raw/0ebf4c70?
[15:01:00] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[15:01:20] *** Quits: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de) (Read error: Connection reset by peer)
[15:01:24] *** Quits: Mo_ (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de) (Ping timeout: 276 seconds)
[15:01:46] *** Joins: rawgreaze (~rawgreaze@c-73-89-208-53.hsd1.ma.comcast.net)
[15:01:46] *** Quits: rawgreaze (~rawgreaze@c-73-89-208-53.hsd1.ma.comcast.net) (Changing host)
[15:01:46] *** Joins: rawgreaze (~rawgreaze@user/rawgreaze)
[15:01:47] *** Quits: rawgreaze (~rawgreaze@user/rawgreaze) (Read error: Connection reset by peer)
[15:02:18] *** Quits: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd) (Ping timeout: 240 seconds)
[15:02:21] *** Joins: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de)
[15:03:43] *** Quits: libremind (~andrea@gateway/tor-sasl/libremind) (Quit: "Happy Hacking")
[15:04:46] <selckin> cp $(ldd /usr/sbin/devlink | grep '/lib/' | sed -re 's,.*(/lib/[^ ]+).*,\1,') $JAIL/
[15:05:27] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[15:06:35] <IndieBoy> Thanks
[15:07:16] <Soliton> you're missing the shell injection.
[15:07:43] *** Quits: Mo (~Mo@dynamic-095-116-134-009.95.116.pool.telefonica.de) (Quit: Leaving)
[15:07:51] <selckin> no hable perl
[15:09:40] *** Parts: IndieBoy (~IndieBoy@37.162.56.53) ()
[15:13:04] *** Joins: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[15:14:00] <Soliton> odd that they didn't even try it.
[15:15:36] *** Joins: seninha (~seninha@user/seninha)
[15:15:50] *** Quits: F00dMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 258 seconds)
[15:16:07] *** Joins: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd)
[15:16:34] *** Quits: nobody_ (~nobody@host-79-45-186-108.retail.telecomitalia.it) (Ping timeout: 240 seconds)
[15:18:47] *** Joins: enoq (~enoq@194-208-179-35.lampert.tv)
[15:18:55] *** Quits: igemnace (~ian@user/igemnace) (Quit: WeeChat 3.2)
[15:21:19] *** Joins: tech_exorcist_ (~tech_exor@user/tech-exorcist/x-0447479)
[15:21:22] *** Quits: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd) (Ping timeout: 272 seconds)
[15:22:44] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Ping timeout: 258 seconds)
[15:24:52] *** Quits: tech_exorcist_ (~tech_exor@user/tech-exorcist/x-0447479) (Remote host closed the connection)
[15:25:13] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[15:27:30] *** Joins: loganlee (~Thunderbi@user/loganlee)
[15:31:32] *** Quits: fortuno51 (~fortuno51@37.120.156.254) (Remote host closed the connection)
[15:32:52] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[15:34:38] *** Joins: fortuno51 (~fortuno51@37.120.156.254)
[15:36:58] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[15:40:53] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[15:42:27] *** Joins: omegatron (~some@p54849842.dip0.t-ipconnect.de)
[15:46:28] *** Quits: furrymcgee (~devuan@31.179.186.66) (Quit: leaving)
[15:47:01] *** Joins: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd)
[15:48:26] *** Joins: F0odMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[15:48:49] *** Quits: hyper_ch (~hyper_ch@user/hyper-ch/x-8215596) (Ping timeout: 250 seconds)
[15:49:47] *** Joins: F00dMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[15:51:06] *** Quits: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 258 seconds)
[15:52:27] *** Joins: StathisA (~StathisA@80.107.84.195)
[15:53:22] *** Quits: F0odMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 240 seconds)
[15:55:44] *** Quits: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd) (Ping timeout: 256 seconds)
[15:56:57] *** Joins: n4dir (~user@i59F77C87.versanet.de)
[15:57:42] *** Quits: downunder (~downunder@110.151.122.76) (Quit: WeeChat 3.2)
[16:03:22] *** Quits: drd (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 240 seconds)
[16:04:44] *** Joins: jwakely (~jwakely@redhat/jwakely)
[16:04:57] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[16:05:47] <jwakely> is it reasonable to expect this to work?   eval `type -a _filedir | sed 1d`
[16:06:17] <jwakely> i.e. print out the definition of a shell function (removing the "_filedir is a function" line that type prints) and eval it?
[16:07:38] <jwakely> in the original function definition it says IFS=$'\n' but the output of type -a replaces that with IFS=' then a new line and then the closing '
[16:07:38] <izabera> yes, what's not working?
[16:07:40] <geirha> use declare -f _filedir instead
[16:07:41] <jwakely> and eval barfs on that
[16:07:51] <geirha> you forgot to quote it
[16:07:53] <izabera> what
[16:07:55] <izabera> ah lol
[16:07:58] <jwakely> let me show a minimal reproducer ...
[16:08:06] <geirha> eval "$(declare -f _filedir)"
[16:08:11] <izabera> why even do this
[16:08:13] <jwakely> geirha: ah ok, thanks
[16:08:21] <izabera> you already have _filedir
[16:08:27] <izabera> why reeval it
[16:08:32] <jwakely> izabera: I want to modify it
[16:08:44] <geirha> uh oh
[16:09:00] <izabera> _filedir is probably not what you want to touch
[16:09:00] <jwakely> my real use case is   eval `type -a _filedir | tail -n +2 | sed -e 's/compopt -o filenames 2>/compopt -o filenames -o noquote 2>/'`
[16:09:05] <izabera> god
[16:09:06] <Soliton> why not just define your own version.
[16:09:11] <jwakely> because the expansion rules are horrible otherwise
[16:09:31] <izabera> i forgot i shouldn't ask
[16:09:33] <izabera> my bad
[16:09:34] <jwakely> Soliton: because 95% of it is fine, and I don't want to have to rebase my own version when I update the bash_completion package
[16:09:36] <izabera> rookie mistake
[16:09:39] <jwakely> heh
[16:10:53] <jwakely> is there a better way to avoid this problem? https://askubuntu.com/q/70750
[16:11:10] <jwakely> when I tab complete something with $PWD in it, why on earth would I want that to expand to \$PWD ?
[16:11:46] <jwakely> ls $PWD/<TAB> oh great, now it's expanded to something useless
[16:13:01] <jwakely> also https://bugzilla.redhat.com/show_bug.cgi?id=1782809
[16:13:31] <jwakely> I don't understand the logic to current expansion rules
[16:14:16] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[16:14:24] *** Joins: motherr (~motherr@user/motherr)
[16:15:00] <jwakely> so I want -o noquote to be used in the compopt command that _filedir uses, so I rewrite _filedir :-P
[16:16:15] <Soliton> shopt -u progcomp
[16:16:23] *** Joins: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd)
[16:17:05] <Soliton> that bug is filed against bash not bash-completion so it's probably never going to be fixed.
[16:17:11] <geirha> It sounds like a bug in bash-completion, so surely bash-completion will try to fix it in next release?
[16:17:54] <jwakely> the bugzilla bug is in bash, not bash-completion, but it means I can't use direxpand to stop bash-completion being dumb (because direxpand is broken for tmpfs)
[16:18:55] *** Quits: shabius_ (~shabius@195.98.189.216) (Quit: Leaving)
[16:19:04] <jwakely> the behaviour shown in the bugzilla is unusable for me, and quoting $ when I tag complete is unusable for me, so I rewrite _filedir. Quoting it works great, thanks geirha!
[16:19:13] <jwakely> s/tag complete/tab complete/
[16:19:32] <Soliton> shopt -u progcomp  will turn bash-completion off.
[16:19:49] <jwakely> I don't want it off entirely
[16:19:57] <geirha> I don't use bash-completion, so it's not reproducable for me. It works fine both with and without direxpand
[16:20:14] <jwakely> geirha: which bug?
[16:20:36] *** Joins: ntwk (~ntwk@user/ntwk)
[16:20:55] <geirha> the redhat one, as well as completing  ls "$PWD/<TAB>
[16:21:13] <jwakely> geirha: on a tmpfs partition?
[16:21:22] <jwakely> it only happens if /tmp is tmpfs
[16:21:25] *** Joins: Guest56 (~Guest56@2a01cb0d04e290000a0027fffe32ed70.ipv6.abo.wanadoo.fr)
[16:21:40] <geirha> Hm. Let me log in to an ubuntu and check
[16:21:47] <jwakely> I still see it with bash 5.1.0
[16:23:09] <Soliton> what is supposed to happen?
[16:24:17] <jwakely> if you tab complete /foo/ab<TAB> and the dir contains /foo/a and /foo/abc what do you expect to happen?!?
[16:24:46] <jwakely> it's supposed to complete it to /foo/abc isn't it? that's why it's called COMPLETION not deletion
[16:24:53] <jwakely> it actually "completes" to /foo/a
[16:24:55] <geirha> it compeletes to /foo/abc/ both with and without direxpand
[16:25:07] <Soliton> same
[16:25:12] <jwakely> you need direxpand and dirspell on
[16:25:23] <jwakely> and the path has to be on a tmpfs partition
[16:25:52] *** Joins: carlos (~pum@user/carlos)
[16:25:52] <jwakely> I can reproduce with both 5.1.0 and 5.1.8
[16:26:08] <geirha> no change with dirspell
[16:26:12] <geirha> so the bug is solely with bash-completion, not bash
[16:26:22] <jwakely> no, because it happens with bash-completion uninstalled
[16:26:32] *** Joins: hyper_ch (~hyper_ch@user/hyper-ch/x-8215596)
[16:26:52] <Soliton> you'll have to give precise instructions then, i guess.
[16:27:06] <jwakely> https://bugzilla.redhat.com/show_bug.cgi?id=1782809#c5
[16:28:19] <kurahaupo> how can the type of filesystem affect direxpand
[16:28:37] <jwakely> https://bugzilla.redhat.com/show_bug.cgi?id=1782809#c6
[16:28:42] <geirha> Unable to reproduce it on ubuntu with bash-5.0.11 at least
[16:29:33] <jwakely> kurahaupo: read the bug: "My guess is that bash expects the items "." and ".." to always come first.". for tmpfs that assumption isn't true
[16:30:10] <Soliton> not reproducable on bash 5.0.3 here either.
[16:30:25] <geirha> aha, so a change in libc caused it then
[16:30:34] *** Quits: roadie (~user@2a02:8108:ec0:1427:a5a9:ea1f:1d2c:68cd) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[16:31:10] <jwakely> the fedora bash maintainer reproduced and confirmed the bug, so "works on my machine" is nice for you, but doesn't mean I don't see it
[16:31:37] <geirha> well it appears to be a corner case, which is why it's hard for us to reproduce it
[16:31:40] <jwakely> sure
[16:31:49] <jwakely> it still breaks direxpand for me though
[16:32:05] <jwakely> which is why I do the awful _filedir rewriting
[16:32:35] <Soliton> which has nothing to do with bash though.
[16:32:46] <jwakely> yes, I understand that, thank you
[16:32:56] <jwakely> I can to ask about the eval behaviour (and geirha solved that)
[16:33:00] <jwakely> s/can/came/
[16:36:12] *** Quits: aloo_shu (~aloo_shu@79.116.84.247) (Ping timeout: 252 seconds)
[16:36:43] <jwakely> geirha: as an aside, I'm pretty sure libc just returns the dirents in the order it finds them on disk, so it's the kernel that decides the order
[16:37:11] <Soliton> i assume comment 7 is supposed to be ignored?
[16:37:11] *** Joins: wstrnr (~wstrnr@user/wstrnr)
[16:37:19] *** Joins: aloo_shu_ (~aloo_shu@79.116.77.74)
[16:37:48] <geirha> yeah, it's a syscall, so kernel, not libc
[16:37:56] <kurahaupo> geirha: how does libc get involved in this case?
[16:38:21] <wstrnr> libc provides wrappers for most syscalls.
[16:38:40] *** Joins: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is)
[16:38:43] <kurahaupo> yes, and … ?
[16:38:44] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[16:38:55] *** aloo_shu_ is now known as aloo_shu
[16:39:52] <geirha> in this case they don't even bother to include a wrapper function for it; you apparently have to call it with syscall()
[16:40:05] <kurahaupo> I mean, what might have changed in libc to affect this? (when clearly the difference is that the syscall returns the entries in a different order)
[16:40:40] <geirha> yeah, I recanted the libc thing
[16:41:18] *** Joins: edlou (uid413273@id-413273.brockwell.irccloud.com)
[16:41:51] *** Quits: Guest56 (~Guest56@2a01cb0d04e290000a0027fffe32ed70.ipv6.abo.wanadoo.fr) (Quit: Client closed)
[16:41:59] <jwakely> oh yeah sorry, I missed that
[16:42:10] <osse> friday, innit
[16:42:21] <osse> time to recant the libc thing and decant the red wine thing
[16:42:27] <jwakely> agreed
[16:43:22] <jwakely> Soliton: comment 6 said "I don't see this in Fedora 34" and then comment 7 said "oh, my bad, yes I do"
[16:43:30] <jwakely> (paraphrased)
[16:43:38] <Soliton> thus the order is irrelevant, right?
[16:44:11] <Soliton> anyway, it seems someone on fedora needs to investigate this further.
[16:44:44] *** Joins: cdown (~cdown@89.32.122.5)
[16:45:02] *** Quits: YoungFrog (~youngfrog@2a02:a03f:c21b:f900:ad57:cbf9:ee4b:1cc8) (Remote host closed the connection)
[16:45:22] *** Joins: YoungFrog (~youngfrog@2a02:a03f:c21b:f900:6d52:8e54:ebf0:b3f1)
[16:46:14] <jwakely> Soliton: no. when the bug happened on f33 (using tmpfs) the . and .. entries didn't come first. on f34 (without tmpfs) they did come first, and the bug wasn't seen. and after retrying on f34 with tmpfs, the bug was seen
[16:46:17] * kurahaupo reads the lib C cleff and sings descant
[16:46:22] *** Joins: ApostleInTriumph (~ApostleIn@nat-clients.lix.polytechnique.fr)
[16:46:41] <jwakely> Soliton: so you can't conclude from that that the order is irrelevant
[16:46:58] <jwakely> the "unexpected" order still seems to correlate with the bug being seen
[16:47:06] *** Joins: bn_work (uid268505@id-268505.highgate.irccloud.com)
[16:47:10] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[16:47:32] <jwakely> the mistake in comment 6 was "it doesn't happen in f34" but actually that should have been "it doesn't happen without tmpfs" which I'd already stated in the original report
[16:48:31] <geirha> looking at bash's source though, where it iterates readdir to find a "best match" I don't see how the order of the returned entries would matter. It iterates through all of them regardless, unless it finds an exact match
[16:49:34] *** Joins: cdown_ (~cdown@163.114.131.1)
[16:49:56] *** Joins: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net)
[16:50:07] <jwakely> maybe that's a red herring then
[16:50:32] *** Quits: zeraphel (~daddy@5.29.37.93) (Ping timeout: 258 seconds)
[16:50:35] *** Quits: ntwk (~ntwk@user/ntwk) (Quit: ntwk)
[16:51:43] *** Joins: zeraphel (~daddy@5.29.37.93)
[16:52:05] *** Quits: cdown (~cdown@89.32.122.5) (Ping timeout: 250 seconds)
[16:52:32] <geirha> http://git.savannah.gnu.org/cgit/bash.git/tree/lib/sh/spell.c#n103
[16:53:01] <Soliton> dirspell seems to be more relevant.
[16:53:37] <Soliton> since i assume that could actually remove stuff.
[16:54:27] *** Joins: eldritchcookie (~eldritchc@2804:7f4:8180:8c7d:b0e6:924f:c0ee:a80a)
[16:54:39] <geirha> ah yes, "a" and "abc" have the same "distance", so it will pick whichever it finds first
[16:54:42] *** Quits: cdown_ (~cdown@163.114.131.1) (Ping timeout: 240 seconds)
[16:55:00] <jwakely> yes
[16:55:22] <jwakely> so the order of . and .. doesn't matter
[16:55:45] <Soliton> so works as intended. :-P
[16:55:45] <jwakely> it's the order of a and abc that matters (and that is also filesystem-dependent, and unspecified)
[16:56:05] <Soliton> i guess bash should sort first.
[16:56:09] <jwakely> mindist works as intended, by finding an entry with the minimum distance
[16:56:24] <geirha> or prefer added char over removed char
[16:56:28] <jwakely> but using that for completion is wrong, if the entry with minimum distance is shorter
[16:56:32] <jwakely> yeah
[16:56:47] <jwakely> there needs to be a tie-breaker
[16:57:22] <Bhavuk> !next
[16:57:22] <greybot> Another satisfied customer! Next please!
[16:57:24] <jwakely> I suppose you could argue that auto-correcting "ab" to "a" is reasonable, but it seems very unexpected to me
[16:57:39] <Soliton> in the end it's anyone's guess what was meant but presumably the longer one is more likely.
[16:57:51] <jwakely> if there wasn't an "abc" there it would be correct to assume "ab" was a spelling mistake
[16:58:10] <jwakely> but given the existence of "abc" don't assume I meant "a" and forgot to stop typing
[17:00:07] <Soliton> yes, actually if it's a valid prefix of another entry it shouldn't spell correct at all.
[17:00:25] <Soliton> it shouldn't go to a if the there is abcd either.
[17:00:28] <jwakely> yeah, completion should come before correction, right?
[17:00:32] <jwakely> true
[17:00:39] *** Quits: julius_c (~julius_c@174.red-83-57-76.dynamicip.rima-tde.net) (Quit: Leaving)
[17:00:48] <jwakely> even though the distance from ab to abcd is larger than ab to a
[17:01:22] <jwakely> I think I'll just disable dirspell, and then I can use direxpand to avoid the \$PWD silliness, and don't need to rewrite _filedir. phew.
[17:02:27] <Soliton> the a,abcd case should reproduce for anyone though.
[17:02:38] <Soliton> doesn't happen here.
[17:02:56] <Soliton> so still weird what system-dependent stuff comes into this.
[17:03:08] <jwakely> yeah doens't happen for me
[17:03:43] <jwakely> IIRC it took me a lot of head scratching to reproduce it using the paths /tmp/xxx/{a,abc}
[17:04:19] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 258 seconds)
[17:05:06] <jwakely> oh sorry, it does indeed happen for {a,abcd}
[17:06:09] <jwakely> but for {a,abcdefghi} it completes abc properly, only ab erases the last character
[17:06:24] <jwakely> so it's not just about distance
[17:06:27] *** Joins: zeden (~zeden@user/zeden)
[17:06:59] <jwakely> abc completes to abcdefghi even though the distance to a is less (I think ... my hamming might be wrong)
[17:07:29] <jwakely> but ab completes to a, for any combination of {a,abc} or {a,abcd} or {a,abcdefghi}
[17:07:31] <jwakely> weird
[17:07:42] *** Joins: Atque (~Atque@user/atque)
[17:09:57] <geirha> yeah, dirspell doesn't trigger for me at all
[17:10:06] *** Quits: carlos (~pum@user/carlos) (Remote host closed the connection)
[17:10:19] *** Joins: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431)
[17:10:29] *** Joins: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com)
[17:11:46] <Soliton> when i complete .../abcde it completes to .../abcd/ for me.
[17:12:09] <Soliton> and indeed there is a difference to relative paths.
[17:13:11] *** Quits: motherr (~motherr@user/motherr) (Quit: motherr)
[17:13:51] <Soliton> abcdef it doesn't change. i guess it just corrects single mistakes.
[17:14:22] <geirha> ah yes, when I have  ./a/ and ./ac/  ./ace<tab> completes to ./ac/, but ./ab<tab> is not corrected to neither a nor ac
[17:17:20] *** Quits: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (Quit: ZNC 1.8.2 - https://znc.in)
[17:17:55] <geirha> ah wait, it does, but it only does it when completing commands; that's why I failed to trigger it. I was completing argument to ls
[17:18:47] <geirha> and indeed, with tmpfs it then corrects ab to a instead of ac
[17:18:51] *** Joins: cdown (~cdown@163.114.131.1)
[17:18:57] <jwakely> yeah, in my bugzilla report I'm completing dirs, not as an argument
[17:19:12] *** Joins: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[17:19:32] <jwakely> i.e. dirs that might contain a command
[17:20:28] <jwakely> so it's significant that the reproduction steps use mkdir not touch
[17:20:44] <jwakely> I suppose touch + chmod would work too
[17:20:56] <geirha> $ compgen -c /mnt/tmp/xxx/ab
[17:20:58] <geirha> /mnt/tmp/xxx/ac
[17:21:00] <geirha> /mnt/tmp/xxx/a
[17:21:06] <geirha> that's tmpfs
[17:21:17] <geirha> $ compgen -c /tmp/xxx/ab
[17:21:18] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 256 seconds)
[17:21:20] <geirha> /tmp/xxx/ac
[17:21:31] <geirha> not tmpfs. Only returns ac
[17:21:40] <geirha> both those dirs only contain a and ac
[17:21:45] *** Joins: LiftLeft (~LiftLeft@191.96.227.138)
[17:22:13] <jwakely> yah, so I'm not imagining it ;-) and it's not specific to fedora and rhel
[17:23:08] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:23:53] <Soliton> yes, i can reproduce that as well.
[17:24:18] <mozgalom> Hi all! I have a string with one or more elements separated by tabs, similar to this: "id::070722:/root/02e23c id::070722:/root/87f067 id::070722:/root/fbf359". I'm trying to extract only the last portion of each element, after the last "/" character, so I would end up with a string like "02e23c 87f067 fbf359". I tried to use sed for this purpose (something like sed -e 's:.*/\(.*\)\t:\1:g') but that doesn't work as expected, of
[17:24:18] <mozgalom>  course. Can you suggest how would I do that?
[17:27:43] <jwakely> mozgalom: array=(id::070722:/root/02e23c id::070722:/root/87f067 id::070722:/root/fbf359) ; for i in ${array[@]} ; do echo ${i##*/} ; done
[17:28:49] <Soliton> "${array[@]}"
[17:28:51] <geirha> missing quotes. "${array[@]}" and "${i##*/}"
[17:28:59] <Soliton> where does the string come from?
[17:29:20] <Soliton> and do you really want an output string or a list/array?
[17:29:41] <mozgalom> jwakely ok that's helpful, i believe that array will come handy in the end!
[17:29:46] <mozgalom> Soliton you mean my original string?
[17:30:01] <Soliton> yes.
[17:30:18] <mozgalom> It's actually some list of AWS ARNs
[17:30:41] <Soliton> so it's the output of some command?
[17:30:47] <mozgalom> Correct
[17:30:57] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[17:31:31] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[17:31:33] <Soliton> sed 's:[^\t]*/\([^\t]*\)\t:\1 :g'
[17:31:35] <phy1729> mozgalom: have you considered cloudformation or terraform?
[17:31:36] <mozgalom> But I'm struggling to get a better output of that command... I always end up with single line string and values separated by tabs
[17:31:51] *** Quits: inkbottle[m] (~inkbottle@2001:470:69fc:105::2ff5) (Quit: You have been idle for 30+ days)
[17:31:53] *** Quits: anodae[m] (~anodaemat@2001:470:69fc:105::400a) (Quit: You have been idle for 30+ days)
[17:32:15] <mozgalom> phy1729 I am using Terraform in my everyday's job, but I'm trying to query AWS just for some simple information, nothing much...
[17:32:15] *** Joins: anodae[m] (~anodaemat@2001:470:69fc:105::400a)
[17:32:15] *** Joins: inkbottle[m] (~inkbottle@2001:470:69fc:105::2ff5)
[17:32:21] *** Parts: inkbottle[m] (~inkbottle@2001:470:69fc:105::2ff5) ()
[17:32:38] *** Joins: drd (~drd@93-39-151-19.ip76.fastwebnet.it)
[17:32:43] *** Parts: anodae[m] (~anodaemat@2001:470:69fc:105::400a) ()
[17:34:24] <geirha> is it really one line initially? or is it actually one such id thing per line?
[17:34:27] <mozgalom> Soliton that last sed will only replace tabs with spaces?
[17:35:14] <mozgalom> geirha It's just on line. I cannot get this command to output me multiline for some reason :(
[17:35:41] <mozgalom> Maybe worth of mentioning that I'm using --query and --output text params for AWS CLI command, would like to avoid JSON and jq
[17:35:59] <geirha> read -ra ids < <(aws-command thing); printf '%s\n' "${ids[@]##*/}"
[17:36:23] <mozgalom> Let me see what will that one do
[17:37:00] <mozgalom> read: bad option: -a
[17:37:05] <mozgalom> I'm on macOS ^^
[17:37:43] <mozgalom> If I omit "a", I end up with one ID only
[17:38:37] <Soliton> mozgalom: .* matches everything including tabs so i replaced it with [^\t]*.
[17:39:21] <geirha> ah, so you're not using bash
[17:39:25] *** Quits: n4dir (~user@i59F77C87.versanet.de) (Remote host closed the connection)
[17:39:31] <Soliton> can the aws thing output json?
[17:39:45] <mozgalom> geirha And yea, this is also zsh :/
[17:40:13] <mozgalom> Soliton it can output JSON, that's actually the default output, and in this case I get an array with x elements.
[17:40:21] <mozgalom> Just a simple array of strings...
[17:40:24] <Soliton> !jq
[17:40:24] <greybot> jq is a flexible and lightweight JSON processor: http://stedolan.github.com/jq/ . See #jq. Also, query JSON data with jshon: http://kmkeen.com/jshon/
[17:41:21] <mozgalom> > would like to avoid JSON and jq
[17:41:24] <geirha> jq -r '.[]|sub(".*/";"")'
[17:41:47] <phy1729> mozgalom: if you're on zsh, there's #zsh
[17:41:52] *** Quits: WinterStar (~IceLight@user/icelight) (Quit: WeeChat 3.2)
[17:42:01] *** Joins: WinterStar (~IceLight@user/icelight)
[17:42:21] <mozgalom> phy1729 Ah, of course, sorry for wrong channel
[17:42:57] <mozgalom> Looks like jwakely's first solution is actually the best so far, so you guys were helpful anyways. Thanks a lot!
[17:43:15] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[17:43:31] <jwakely> with the missing quotes
[17:43:35] <Soliton> but you don't have an array as input.
[17:43:54] <earnestly> You don't need to loop through it to run a PE on each element
[17:44:11] <phy1729> array=(${${(f)"$(aws ... )"}##*/}) for zsh
[17:44:14] <Soliton> presumably zsh can make one for you though.
[17:44:21] <mozgalom> jwakely Yea, it works even with missing quotes :)
[17:44:45] <earnestly> mozgalom: By luck, don't skip them in bash
[17:45:30] <phy1729> in zsh it's safe (aside from empty element elision) but that's why asking in the right channel is important
[17:45:42] <mozgalom> What I did now is this: array=($(aws-command thingie)) ; for i in "${array[@]}" ; do echo "${i##*/}" ; done
[17:45:58] <mozgalom> And this outputs all IDs separated by new line
[17:46:07] <mozgalom> s/all/only/
[17:46:27] <Soliton> do you care about correctness or it just has to work for your current test?
[17:46:31] <earnestly> We can't have nice things
[17:46:46] <earnestly> Well, I can, which is nice
[17:46:49] <mozgalom> phy1729 Yea, I'm aware of tiny differences and putting effort in vain just to realize we use different shells :)
[17:47:23] <mozgalom> Soliton Probably the latter, but why do you ask about "correctness"? Because of quotes? Or arrays in zsh? Or something else?
[17:47:42] *** Quits: aloo_shu (~aloo_shu@79.116.77.74) (Ping timeout: 252 seconds)
[17:47:54] <Soliton> it's ok, nevermind.
[17:48:06] <mozgalom> Oki :)
[17:48:36] *** Quits: WinterStar (~IceLight@user/icelight) (Quit: WeeChat 3.2)
[17:48:37] <Soliton> mindboggling attitude to me but it's not uncommon.
[17:48:56] <earnestly> Soliton: These are the people making your ecommerce systems and banking infrastructure
[17:49:38] <phy1729> Can't be banking; it's cloud and not mainframe
[17:49:51] <earnestly> phy1729: web side anyway
[17:50:43] <earnestly> Although I wonder just how many still use mainframes, I would assume that it's only present in the major examples
[17:51:08] <phogg> you can say it: in old companies
[17:51:17] <phy1729> I think it's still required if you want to interface with ACH
[17:51:32] <earnestly> It's still an assumption on my part, i.e. doxa
[17:52:07] <phogg> any idea what the ACH interface actually looks like? I've no idea, but I did once work on a financial-adjacent system which used FTP and flat text files with fixed records for shipping information
[17:52:13] <mozgalom> I am not a shell programmer and will never produce for public use, most likely not even to share it with others. This is just for private usage, and I find it easy to use shell for it. I do tend to use shellcheck whenever I write something tho ;)
[17:52:21] <mozgalom> While I'm here, let me ask you one more thing. 
[17:52:37] <mozgalom> In my "aws command thingie", the output doesn't show tabs, of course, and they look just like a single space. I accidentally figured out it's tab char because I piped it to "jq -R" which displayed the string with "\t" characters.
[17:52:41] <phy1729> phogg: https://www.chase.com/content/dam/chaseonline/en/demos/cbo/pdfs/cbo_achfile_helpguide.pdf
[17:52:49] <mozgalom> How would I figure out this without piping my output to jq?
[17:53:10] * mozgalom switching to bash before continuing conversation
[17:53:11] <phy1729> pipe to od -tx1a or so works
[17:53:14] <ormaaj> I think they've slightly obfuscated their naming of new systems to not mention mainframe... like whatever the modern system z stuff is doing these days. Ask greycat he prolly still uses that junk.
[17:54:11] <earnestly> phy1729: this pdf smells like cobol
[17:54:23] <phy1729> phogg: basically just search for   ach filetype: pdf  and all sorts of stuff pops up
[17:54:43] <mozgalom> man od
[17:54:47] <mozgalom> oops
[17:55:48] <mozgalom> thanks phy1729!
[17:56:07] *** Quits: jetchisel (jetchisel@user/jetchisel) (Quit: Unfortunately time is always against us -- [Morpheus])
[17:56:11] <phy1729> mozgalom: did you use the ${(f) version?
[17:56:37] <mozgalom> Hm, I'm sorry but I'm not sure what is that :(
[17:56:57] <phy1729> array=(${${(f)"$(aws ... )"}##*/})
[17:57:30] *** sandcat is now known as jess
[17:57:42] <geirha> zsh magic; the darkest kind
[17:57:53] <mozgalom> lol
[17:58:26] <mozgalom> phy1729 No, I didn't use that either
[17:58:34] <mozgalom> It's literally array=($(aws-command thingie)) ; for i in "${array[@]}" ; do echo "${i##*/}" ; done
[17:58:34] <phy1729> well if he's not gonna join the right channel
[17:58:43] <mozgalom> And it seems like it outputs what I need
[17:58:54] <earnestly> geirha: It would be nice if bash allowed ${$(cmd)PE} though
[17:58:55] <geirha> It's bad practice though
[17:59:00] <phy1729> sure, but that's not idiomatic zsh
[17:59:03] <earnestly> Or bash
[17:59:12] <mozgalom> Let's not talk about my zsh issues anymore =)
[17:59:35] <mozgalom> You did help, I'm very happy and will be able to continue with what I wanted
[18:00:53] *** Joins: aloo_shu (~aloo_shu@79.116.78.88)
[18:04:30] *** Joins: ozoned (~odoood@2601:c8:c003:a550::8)
[18:06:29] * earnestly was typing out a read -ra example and notices that geirha already did
[18:08:20] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 256 seconds)
[18:13:08] *** Joins: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net)
[18:13:19] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Ping timeout: 258 seconds)
[18:15:19] *** Joins: shabius (~shabius@2a0e:1c80:2:1022::1008)
[18:15:46] *** Quits: F00dMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 240 seconds)
[18:17:48] *** Joins: cer-0 (~cer-0@189.228.172.244)
[18:21:10] *** Joins: shad (~shad@user/shad)
[18:22:08] *** Quits: hyper_ch (~hyper_ch@user/hyper-ch/x-8215596) (Ping timeout: 258 seconds)
[18:26:06] *** Joins: Crescendo (~Crescendo@user/crescendo)
[18:26:28] *** Joins: Adoi (~Adoi@user/adoi)
[18:27:28] <wstrnr> about the ${$(cmd)PE} style... i think i've seen it in ./configure programs, where $_ was used as temporary variable to hold output of a command
[18:27:53] <wstrnr> # : "$(echo well, output of a program)";  echo "${_#*, }"
[18:27:54] <shbot> wstrnr: output of a program
[18:28:26] <wstrnr> things like that. maybe it wasn't a part of ./configure, but something similarly weird and hackerish
[18:29:09] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 250 seconds)
[18:29:16] *** Joins: sinaowolabi (~SinaOwola@102.134.114.17)
[18:29:29] *** Quits: ByteSlayer (~byteslaye@user/byteslayer) (Quit: That's about it, see ya)
[18:29:40] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[18:31:09] *** Quits: ApostleInTriumph (~ApostleIn@nat-clients.lix.polytechnique.fr) (Quit: Client closed)
[18:32:08] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[18:33:37] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[18:33:57] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[18:41:35] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[18:41:45] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[18:41:51] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Remote host closed the connection)
[18:42:15] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[18:42:42] *** Quits: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca) (Ping timeout: 252 seconds)
[18:44:42] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[18:45:48] *** Joins: lavaball (felix@31.204.155.215)
[18:46:24] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[18:47:41] *** Joins: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca)
[18:48:16] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Quit: Leaving.)
[18:49:11] *** Joins: hyper_ch (~hyper_ch@user/hyper-ch/x-8215596)
[18:50:10] *** Joins: pycurious (~Adium@user/pycurious)
[18:50:43] <pycurious> In a one or two liner, I'm trying to clone a git repo with the latest released version. I got till here so far: git ls-remote --tags --sort='version:refname' https://github.com/emscripten-core/emsdk.git | tail -1 | awk -F/ '{ print $3 }'
[18:54:32] <earnestly> wstrnr: Fairly reasonable, I forget about $_ because it's not posix
[18:54:42] <earnestly> (But this isn't about posix so it's fair play)
[18:54:56] <Patsie> tail -1 | awk -F/ '{ print $3 }' can be shortened to: awk -F/ 'END { print $3 }'
[18:55:10] <Patsie> END will only take the last record processed
[18:55:21] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[18:56:19] <Soliton> first clone then checkout the latest release tag.
[18:56:32] *** Quits: cer-0 (~cer-0@189.228.172.244) (Quit: leaving)
[18:58:58] <Soliton> or ask #git if there is a way to do it in one step.
[18:59:31] <alzgh> # az=(zero one two); echo ${az[*]}; echo ${az[@]};
[18:59:32] <shbot> alzgh: zero one two
[18:59:32] <shbot> alzgh: zero one two
[18:59:38] *** Quits: magla (~gelignite@55d4c44d.access.ecotel.net) (Quit: Stay safe!)
[18:59:51] <Soliton> !quotes
[18:59:51] <greybot> https://mywiki.wooledge.org/Quotes
[18:59:59] <alzgh> is there a difference between `@` method and `*` ?
[19:00:06] <Soliton> !$@
[19:00:06] <greybot> The difference between $@ and $*: "$@" (quoted) expands to each positional parameter as its own argument: "$1" "$2" ... while "$*" expands to the single argument "$1c$2c..." where c is the first character of IFS. You almost always want "$@". The same goes for arrays: "${array[@]}" or "${array[*]}". Unquoted $* and $@ are undefined; DO NOT use.
[19:00:27] <ormaaj> yes ^
[19:00:42] <pycurious> Patsie: That works
[19:01:17] *** Quits: pj (~pj@ghettoforge/pj) (Ping timeout: 252 seconds)
[19:02:01] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[19:03:18] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 256 seconds)
[19:05:32] <alzgh> this book I'm reading is shit
[19:05:45] <alzgh> I thought it's good
[19:05:51] <Nintendo> I told you Twilight was overrated.
[19:06:10] <Soliton> !books
[19:06:10] <greybot> Most of the published shell/bash books are relatively poor. They may have a few gems here and there, but they're few and far between. Try the BashGuide instead: http://mywiki.wooledge.org/BashGuide
[19:06:21] <djph> Nintendo: still a better love story than 50 shades of abuse... 
[19:07:10] <Nintendo> The first shade involves parsing ls.
[19:07:29] <djph> !ls > Nintendo 
[19:07:29] <greybot> Nintendo: DO NOT USE ls' output for anything. ls is a tool for interactively looking at directory metadata. Any attempts at parsing ls' output with code are broken. Globs are much more simple AND correct: ''for file in *.txt''. Read http://mywiki.wooledge.org/ParsingLs
[19:08:16] <Nintendo> But seriously, the O'Reilly turtle book was decent from what I remember--though it wasn't bash-specific.
[19:08:16] <wstrnr> also find(1)
[19:09:10] <Nintendo> Also “abuse”... in the dictionary, maybe ;)
[19:09:34] <alzgh> they are making a tv show out of The Wheel of Time.
[19:09:38] <djph> Nintendo: same.  I find most of their books to be passable, with good info here and there (and yes, some degree of garbage)
[19:09:51] <alzgh> hope they don't make it shit like most tv/movie versions
[19:10:06] <wstrnr> GNU find has some options which make its use safe for enumerating filenames and such, it also can ouput "file status" (what fstat is doing, getting "file status")
[19:11:06] <alzgh> this book I'm reading "Linux Command Line and Shell scripting Bible" teaches really wrong things and they are not few. at least if I take what I'm told here as the authority
[19:12:25] <djph> Hm, I don't know - never read that one.
[19:13:02] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[19:13:24] <Soliton> !crap
[19:13:24] <greybot> The overwhelming majority of bash scripts, code, tutorials, and guides on the Internet are crap. Sturgeon was an optimist.
[19:14:42] <djph> having fun, Soliton ? :)
[19:14:56] *** Joins: pj (~pj@ghettoforge/pj)
[19:15:40] *** Joins: sokle_68 (~sokle_68@ppp046177047088.access.hol.gr)
[19:18:02] <earnestly> alzgh: Also don't use google, stackoverflow, etc.
[19:19:46] <emanuele6> !google
[19:19:46] <greybot> Google is NOT a preferred source for learning bash, because almost all the "tutorials" and scripts out there are JUNK. Instead, ask a good question here or refer to the Guide and FAQ (see topic)
[19:19:49] <emanuele6> !so
[19:19:49] <greybot> Like virtually every other web site you find via Google, StackOverflow is chock full of wrong answers. Verify everything you read there before using it.
[19:20:30] *** Quits: elf_fortrez (~elf_fortr@adsl-72-50-4-118.prtc.net) (Quit: Client closed)
[19:20:42] *** Joins: sazawal (~sazawal@122.161.170.192)
[19:21:21] * Nintendo emphatically agrees with every factoid invoked in the past quarter-hour.
[19:21:39] <tirnanog> mypath=$(echo $PATH | sed 's/:/ /g'); count=0; for directory in $mypath; do check=$(ls $directory); for item in $check; do count=$[ $count + 1 ]; ...
[19:21:46] <tirnanog> yes. the book is crap.
[19:21:52] <earnestly> Incredible
[19:22:34] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 256 seconds)
[19:24:27] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[19:25:33] <earnestly> Even the use of sed when PATH can 'safely' be wordsplit over IFS=:
[19:25:39] *** Joins: mikeliuk (~mikeliuk@213.205.198.158)
[19:26:09] <earnestly> set is quite nice to get counts over $# but having to check for glob failure and files means checking everything which is sad
[19:28:37] <tirnanog> "The bash shell provides an alternative way of testing a condition without declaring the test command in an if-then statement [...]"
[19:28:39] <tirnanog> :(
[19:32:01] *** Joins: lavaball (felix@31.204.155.215)
[19:35:50] *** Joins: Hax0r (~Hax0r@87.101.193.195)
[19:36:50] *** Quits: eldritchcookie (~eldritchc@2804:7f4:8180:8c7d:b0e6:924f:c0ee:a80a) (Quit: Leaving)
[19:37:00] *** Joins: Adois (~Adoi@user/adoi)
[19:37:39] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 258 seconds)
[19:39:14] *** Joins: kurtthemaker (~kurt@S010644a56e3e0ee9.cn.shawcable.net)
[19:40:26] *** Joins: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net)
[19:41:44] *** Joins: nobody_ (~nobody@host-79-45-186-108.retail.telecomitalia.it)
[19:44:55] *** Quits: Hax0r (~Hax0r@87.101.193.195) (Read error: Connection reset by peer)
[19:45:28] *** Quits: enoq (~enoq@194-208-179-35.lampert.tv) (Read error: Connection reset by peer)
[19:45:45] <Nintendo> Please scan some of these pages.  I want them on the wiki.
[19:46:00] *** Joins: enoq (~enoq@194-208-179-35.lampert.tv)
[19:46:43] <wstrnr> it's not how wiki works. you cannot just scan pages of books and put it in public wiki, that is copyright infringement
[19:49:27] <earnestly> Oh no
[19:49:57] <geirha> tirnanog: which book is that?
[19:50:00] <earnestly> wstrnr: Does it count as fair use if it is the subject of criticism?
[19:51:26] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[19:51:36] <tirnanog> geirha: Linux Command Line and Shell scripting Bible
[19:53:08] *** Joins: zebrag (~chris@user/zebrag)
[19:53:41] *** Joins: Crescendo (~Crescendo@user/crescendo)
[19:54:11] <wstrnr> earnestly: it is impossible in any way at all; in the beginning of the book, probably on the first page you will always see a notice saying that content of the book must not be copied anywhere in any way for any purpose at all, probably except when written permission is given, which is a rare special case
[19:54:21] <wstrnr> earnestly: you know all of that
[19:54:49] *** Joins: apteryx (~maxim@dsl-151-109.b2b2c.ca)
[19:56:03] *** Quits: pj (~pj@ghettoforge/pj) (Ping timeout: 258 seconds)
[19:56:19] *** Quits: sinaowolabi (~SinaOwola@102.134.114.17) (Ping timeout: 268 seconds)
[19:56:28] <earnestly> wstrnr: I don't care what the book says
[19:56:36] *** Joins: frostwork (~frostwork@user/frostwork)
[19:57:18] <earnestly> You can certainly show the object of criticism/comment when it is the subject
[19:58:06] <Nintendo> Indeed.  https://en.wikipedia.org/wiki/Fair_use#U.S._fair_use_factors
[19:58:13] <ormaaj> subject to fair use criteria. of course.
[19:58:21] <earnestly> That is the criteria
[19:58:30] <earnestly> It being the subject and not incidental
[19:58:33] <ormaaj> there are several criteria
[19:59:10] <earnestly> Yes, there are
[20:03:47] <earnestly> (Amusingly memes aren't covered by fair use)
[20:03:58] *** Parts: sokle_68 (~sokle_68@ppp046177047088.access.hol.gr) ()
[20:04:52] <izabera> tried to look up the spec for how many spaces you can put after #! and google came up with this https://i.imgur.com/Afp2Usr.png
[20:05:44] <earnestly> ai is going to be hilarious
[20:05:54] *** Joins: rs (~rs@50.47.97.56)
[20:06:19] *** rs is now known as Guest3715
[20:07:26] <llua> gotta say, that was a bad query for what you were actually seeking
[20:07:36] <llua> a #bash level kinda question
[20:07:47] <peterrooney> i took a quick look at the book. i have seen "textbooks" that are poorly written before, but having "as you well know..." pass through both the writer and the editors had me cringing.
[20:08:06] *** Joins: sinaowolabi (~SinaOwola@160.152.83.14)
[20:08:14] <omegatron> you assume there was an editor at work ..  =D
[20:08:24] *** Joins: pj (~pj@ghettoforge/pj)
[20:08:27] <ormaaj> They could be. Fair use analysis is always context / situation dependent. Existing precedent never covers every possible scenario.
[20:08:44] *** Joins: richardm75 (~richardm7@2600:8801:c502:1000:3c03:fc01:4e02:dae9)
[20:08:47] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[20:08:49] <ormaaj> (regarding memes but that applies to anything)
[20:08:53] <izabera> llua: https://www.in-ulm.de/~mascheck/various/shebang/#blankrequired   closest thing i found
[20:09:10] <izabera> but it doesn't really say whether only one blank is allowed or not
[20:11:20] <izabera> for instance both my linux and freebsd machines seem to acccept more than one space
[20:11:25] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[20:12:13] *** Joins: Kruppt (~Kruppt@50.111.9.86)
[20:13:01] <peterrooney> izabera: the man page just says "the remainder of the first line"
[20:13:16] <izabera> what page is that?
[20:13:38] <peterrooney> izabera: bash 4.4.12
[20:13:51] *** Joins: YaoNai (~YaoNai@user/yaonai)
[20:13:51] *** Quits: YaoNai (~YaoNai@user/yaonai) (Client Quit)
[20:14:22] <izabera> thanks, this is good to know but not really what i was looking for either
[20:15:16] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[20:15:48] <peterrooney> what part of the OS parses the #! line? I would look at system's default shell
[20:16:35] <Soliton> !shebang
[20:16:35] <greybot> The top of a script MUST have a #! line, called 'shebang' or 'hashbang'. It tells the kernel what program to run your script with. We recommend `#!/usr/bin/env bash` (why: http://stackoverflow.com/a/733901/58803). http://mywiki.wooledge.org/BashGuide/CommandsAndArguments#Scripts http://www.in-ulm.de/~mascheck/various/shebang/
[20:16:35] <izabera> i suppose you could call it "shell" but it's not really what most people would think of
[20:16:55] <izabera> thanks Soliton i was aware of that, it's the link i posted here
[20:17:16] <Soliton> no worries but i didn't trigger it for you.
[20:17:29] *** Joins: magla (~gelignite@55d4c44d.access.ecotel.net)
[20:17:51] *** Joins: sinaowolabi_ (~SinaOwola@160.152.117.118)
[20:18:35] *** Joins: aloo_shu_ (~aloo_shu@79.116.87.23)
[20:19:10] *** Joins: TheHermann (~TheHerman@gateway/tor-sasl/thehermann)
[20:19:39] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[20:19:56] *** aloo_shu_ is now known as al00
[20:19:57] *** Joins: zebrag (~chris@user/zebrag)
[20:20:03] *** Quits: aloo_shu (~aloo_shu@79.116.78.88) (Ping timeout: 252 seconds)
[20:20:03] *** al00 is now known as aloo_shu
[20:20:23] *** Joins: Palll (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net)
[20:20:58] *** Quits: sinaowolabi (~SinaOwola@160.152.83.14) (Ping timeout: 240 seconds)
[20:23:30] *** Quits: Pall (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net) (Ping timeout: 240 seconds)
[20:25:34] *** Quits: Adois (~Adoi@user/adoi) (Ping timeout: 258 seconds)
[20:28:54] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Quit: bbl)
[20:29:01] *** Quits: makara (~sol@196.61.111.63) (Ping timeout: 258 seconds)
[20:29:51] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Read error: Connection reset by peer)
[20:32:14] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[20:35:46] *** Quits: terabyte (~terabyte@27.176-105-213.static.virginmediabusiness.co.uk) (Quit: Client closed)
[20:36:03] *** Joins: sinaowolabi__ (~SinaOwola@160.152.126.124)
[20:39:22] *** Quits: FoodMan (~FoodMan@cpc104776-belf12-2-0-cust417.2-1.cable.virginm.net) (Ping timeout: 240 seconds)
[20:39:22] *** Quits: sinaowolabi_ (~SinaOwola@160.152.117.118) (Ping timeout: 258 seconds)
[20:40:49] *** Joins: seninha (~seninha@user/seninha)
[20:52:19] *** Quits: wwalker (~wwalker@platinum.solid-constructs.com) (Quit: leaving)
[20:53:06] *** Joins: wwalker (~wwalker@platinum.solid-constructs.com)
[20:53:49] *** Quits: wwalker (~wwalker@platinum.solid-constructs.com) (Client Quit)
[20:54:15] *** Joins: wwalker (~wwalker@platinum.solid-constructs.com)
[20:55:47] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[21:04:24] *** Joins: dub_a (~dub_a@static-198-54-131-88.cust.tzulo.com)
[21:06:01] *** Quits: enoq (~enoq@194-208-179-35.lampert.tv) (Quit: enoq)
[21:06:02] *** Joins: MaximB (~MaximB@87.68.164.32)
[21:07:00] *** Quits: alzgh (~alzgh@216.155.158.214) (Quit: Client closed)
[21:08:11] <MaximB> Hello, I want to remove specific line (that has specific name) in a file: sed -i "/ba,/d" file.txt ,the issue is it also removes  baba inside the file.  file content is: name,number : baba,5 > want to delete line with 'ba' only
[21:08:17] <MaximB> *for example
[21:08:49] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Remote host closed the connection)
[21:09:12] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[21:09:18] <selckin> /^ba,/
[21:09:29] <MaximB> thanks
[21:09:47] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:11:17] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[21:11:31] *** Joins: gnoo (~gnoo@user/gnoo)
[21:12:49] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Remote host closed the connection)
[21:13:11] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[21:13:21] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[21:17:29] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 244 seconds)
[21:18:43] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[21:19:50] *** Quits: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is) (Ping timeout: 272 seconds)
[21:20:14] *** Joins: mozgalom (~mozgalom@194.144.47.113)
[21:22:09] *** Joins: ChmEarl (~chmearl@user/chmearl)
[21:22:45] *** Quits: kapil (~kapil@2a01:4f9:c010:c9c3::1) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[21:23:14] *** Joins: mozgalom_ (~mozgalom@IPnet-gw.157.157.97.111.simnet.is)
[21:23:19] *** Joins: kapil (~kapil@o-k.website)
[21:23:51] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 252 seconds)
[21:24:35] *** Quits: mozgalom (~mozgalom@194.144.47.113) (Read error: Connection reset by peer)
[21:25:59] *** Quits: uhu (~uhu@2a01:4f9:c010:1087::2) (Quit: ZNC 1.8.2 - https://znc.in)
[21:26:22] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[21:27:12] *** Joins: vegetux (~vegetux@user/vegetux)
[21:28:49] *** Quits: ozoned (~odoood@2601:c8:c003:a550::8) (Ping timeout: 258 seconds)
[21:29:07] *** Quits: mozgalom_ (~mozgalom@IPnet-gw.157.157.97.111.simnet.is) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:29:08] *** Quits: kapil (~kapil@o-k.website) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[21:29:11] *** Joins: Hax0r (~Hax0r@87.101.193.195)
[21:29:21] *** Joins: kapil (~kapil@2a01:4f9:c010:c9c3::1)
[21:31:05] *** Quits: a_west (~a_west@2a01:4f9:c010:5c49::1) (Quit: Bye!)
[21:31:22] <Helmholtz>  cat <<- EOF > ./postinst
[21:31:23] <Helmholtz>  #!$TERMUX_PREFIX/bin/sh
[21:31:24] <Helmholtz> Isn't the above wrong?
[21:31:31] <Helmholtz> I mean shouldn't that var be quoted?
[21:32:19] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[21:33:20] <phy1729> It is quoted
[21:33:21] *** Joins: LordRishav (~lordrisha@157.42.49.190)
[21:33:51] *** Joins: greycat (~greg@209.142.155.49)
[21:33:54] <Helmholtz> phy1729, how?
[21:34:03] <Helmholtz> that cat <<- EOF   EOF magic?
[21:34:11] *** Quits: Hax0r (~Hax0r@87.101.193.195) (Quit: Leaving)
[21:34:53] <phy1729> # touch a b c; a='*'; echo $a
[21:34:54] <shbot> phy1729: a b c
[21:34:58] <phy1729> # touch a b c; a='*'; eval $'cat <<EOF\n$a\nEOF'
[21:34:59] <shbot> phy1729: *
[21:35:01] <phy1729> !heredoc
[21:35:02] <greybot> Here documents. cat <<EOF followed by several lines of text, followed by the literal string EOF on a new line, NOT indented. The portion between the EOFs is passed to the command as standard input. If 'EOF' is 'quoted', substitutions WON'T be done; otherwise they are. See <<- for the indented variety.
[21:35:11] *** Joins: a_west (~a_west@2a01:4f9:c010:5c49::1)
[21:35:48] *** Joins: cdown_ (~cdown@89.32.122.5)
[21:36:59] *** Joins: uhu (~uhu@2a01:4f9:c010:1087::2)
[21:38:18] <Helmholtz> phy1729, thanks
[21:38:34] *** Quits: usrnamewastaken (~Delvien@212.102.39.202) (Ping timeout: 256 seconds)
[21:38:40] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[21:39:12] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 276 seconds)
[21:41:28] *** Quits: cdown_ (~cdown@89.32.122.5) (Ping timeout: 258 seconds)
[21:42:57] *** Joins: TP1 (~TP1@87.101.193.195)
[21:44:26] <wstrnr> good lord, a heredoc using eval. and even a cat is involved. that's animal abuse, man!
[21:44:51] <omegatron> where is the animal in this case? the user who reads the code??
[21:45:48] <wstrnr> it is abuse of all the nature. including all humans, plants, all the animals and microbes, and the whole space-time even
[21:46:21] <greycat> wstrnr: have you seen any of ormaaj's factoids?
[21:46:29] <omegatron> so ... does it at least work?
[21:47:58] <wstrnr> greycat: saw most of them, i believe. i downloaded #c's candide's factoids and always look things up in my local copy of factoids.html.
[21:48:14] <phy1729> greycat: have you seen that scp may be getting less sucky?  https://marc.info/?l=openbsd-tech&m=162820686228720&w=2
[21:48:15] <wstrnr> though that's not a precise representation of greybot's database, i know
[21:48:19] *** Quits: rendar (~rendar@user/rendar) ()
[21:48:30] <greycat> !searchkeys ormaaj
[21:48:30] <greybot> greycat: 36 matches found: ormaaj, ormaajarr, ormaajbin, ormaajbinhex, ormaajbomb, ormaajbomb1, ormaajbomb2, ormaajbomb3, ormaajbomb4, ormaajbomb5, ormaajbomb6, ormaajbomb7, ormaajbooks, ormaajbrace, ormaajbreak, ormaajcolors, ormaajdatatype, ormaajenv, ormaajfac, ormaajfib, ...
[21:49:11] <wstrnr> greycat: i know that ormaaj's snippets contain a lot of hard-to-comprehend hacks and such
[21:49:39] <greycat> so that eval $'cat heredoc' thing shouldn't frighten you at this point
[21:50:05] <wstrnr> well, yes, you are right
[21:50:51] *** Quits: Bhavuk (~BTaneja@122.173.24.168) (Quit: Leaving)
[21:51:31] <phy1729> plus how do you demonstrate a heredoc on irc without eval
[21:51:52] <wstrnr> herestring is as good as a heredoc in bash
[21:51:53] <greycat> printf > tempfile
[21:52:23] <phy1729> The question wasn't about herestrings though
[21:52:26] *** Quits: Kruppt (~Kruppt@50.111.9.86) (Quit: Leaving)
[21:52:40] <wstrnr> why do you even need to demonstrate a heredoc here.  just explain it in plain English, user will get the idea
[21:52:55] <wstrnr> convoluted one-liners will only confuse people
[21:52:57] <greycat> Optimistic.
[21:52:58] *** Quits: nobody_ (~nobody@host-79-45-186-108.retail.telecomitalia.it) (Ping timeout: 258 seconds)
[21:53:20] <wstrnr> well, ideally
[21:55:49] *** Joins: Sasazuka (~Sasazuka@user/sasazuka)
[21:57:36] <wstrnr> by the way, in latest versions of bash, 5 and higher, is horizontal-tab still the only character respected as indentation by <<- heredoc syntax?
[21:58:01] <greycat> Yes.  Of course.  Because this isn't a bash invention.
[21:58:07] *** Joins: Betal (~Betal@user/betal)
[21:58:19] <wstrnr> not very text-editing friendly.
[21:58:32] <greycat> It is if you use the text editor that the inventor of the Bourne shell used.
[21:59:26] <wstrnr> ok. thanks for clarification.
[21:59:27] *** Joins: makara (~sol@196.61.111.63)
[21:59:27] <omegatron> I assume both have already passed away !?
[22:02:55] *** Quits: mikeliuk (~mikeliuk@213.205.198.158) (Quit: Connection closed)
[22:06:45] <Nintendo> How could a feature that provides no functionality except text-editing friendliness not be text-editing friendly?  Do you mean to say it's not convenient for people who indent using space characters?
[22:07:38] <greycat> I think the complaint is that it's not "friendly" to people who use "editors" that take over your indentation completely and do not let you even SEE what is actually written to disk (*cough* visual something).
[22:08:01] *** Quits: TomyWork (~TomyLobo@p200300e80f06af00f862160e61be0137.dip0.t-ipconnect.de) (Quit: Leaving)
[22:08:16] <Nintendo> Ahh... yes, burn those.
[22:09:03] <Nintendo> You should be able to see tab characters as tab characters, wstrnr.  What's your $EDITOR?
[22:09:45] *** Joins: WinterStar (~IceLight@user/icelight)
[22:10:26] *** Joins: fdan (~fdan@192.146.154.3)
[22:12:05] *** Joins: mikeliuk (~mikeliuk@109.249.187.96)
[22:16:00] <wstrnr> are you trying to break into my computer by directing messages with $-preixed variable names in them at me?
[22:16:18] <greycat> ...
[22:16:38] <greycat> can't tell if that's the worst joke ever, or the most idiotic thing ever said
[22:17:23] <wstrnr> reminds me of the old Perl 4 era guestbook and/or discussion board cracking where "kewlhaxxors" could include something like $PASSWORD in a message, and when the message is displayed, the user will see the admin password of the whole guestbook
[22:17:50] <greycat> Either way it does't sound like you want help.
[22:18:36] <wstrnr> yes-yes, presently i don't need any help.
[22:19:17] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Ping timeout: 245 seconds)
[22:19:22] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 240 seconds)
[22:20:51] <earnestly> Actually not bad article: https://www.oilshell.org/blog/2021/08/history-trivia.html
[22:21:59] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[22:24:25] *** Quits: slackjeff (~slackjeff@191.177.172.134) (Remote host closed the connection)
[22:24:54] *** Joins: YaoNai (~YaoNai@user/yaonai)
[22:24:54] *** Quits: YaoNai (~YaoNai@user/yaonai) (Client Quit)
[22:26:11] *** Joins: H3dn1ng (~H3dn1ng@185.213.154.241)
[22:26:32] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[22:29:43] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Quit: = "")
[22:32:55] *** Joins: howdoi (uid224@id-224.tooting.irccloud.com)
[22:37:06] *** Quits: LordRishav (~lordrisha@157.42.49.190) (Quit: Konversation terminated!)
[22:37:16] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 268 seconds)
[22:38:39] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[22:45:06] *** Joins: usrnamewastaken (~Delvien@212.102.39.91)
[22:49:19] <ash_worksi> so, I am not supposed to do `cmd 2> >(tee log) 1> log` right? (SC2094: Make sure not to read and write the same file in the same pipeline.)
[22:49:46] <ash_worksi> test
[22:49:47] <greycat> What are you *trying* to do?
[22:49:52] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Quit: Reconnecting)
[22:50:07] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[22:50:11] <greycat> I cannot figure it out from that code.
[22:50:26] <ash_worksi> so, I am not supposed to do `cmd 2> >(tee log) 1> log` right? (SC2094: Make sure not to read and write the same file in the same pipeline.)
[22:50:30] <greycat> What are you *trying* to do?
[22:50:35] <ash_worksi> test
[22:50:41] <greycat> ...
[22:50:43] <ash_worksi> OH!!!
[22:50:53] <ash_worksi> I am not using my freaking client correctly
[22:52:01] <ash_worksi> sorry, greycat - I am trying to show stderr in my terminal and log stderr + stdout
[22:52:09] <greycat> !faq logging
[22:52:10] <greybot> https://mywiki.wooledge.org/BashFAQ/106 -- Logging! I want to send all of my script's output to a log file. But I want to do it from inside the script. And I want to see it on the terminal too!
[22:54:10] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[22:54:43] *** Quits: xx (~xx@user/xx) (Quit: xx)
[22:54:47] *** Quits: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com) (Ping timeout: 250 seconds)
[22:55:21] *** Joins: wwallace (~afernande@63.240.73.102)
[22:55:43] *** Quits: wwallace (~afernande@63.240.73.102) (Changing host)
[22:55:43] *** Joins: wwallace (~afernande@user/wwilliam)
[22:55:43] *** wwallace is now known as wwilliam
[22:58:38] *** Quits: usrnamewastaken (~Delvien@212.102.39.91) (Remote host closed the connection)
[23:05:31] <ash_worksi> greycat: for the "I want to tee my stdout to a logfile, as well as to the screen.", why is the first option not `... |& tee log` ?
[23:06:14] *** Joins: slackjeff (~slackjeff@191.177.172.134)
[23:06:52] *** Joins: austin987 (~null@100.42.98.196)
[23:07:21] *** Quits: slackjeff (~slackjeff@191.177.172.134) (Changing host)
[23:07:21] *** Joins: slackjeff (~slackjeff@user/slackjeff)
[23:07:27] <vegetux> inside the script: ...{all you want to log} 2>&1 | tee /home/userlogin/script.log
[23:07:37] <vegetux> the errors are logged too ^^
[23:07:43] *** Quits: slackjeff (~slackjeff@user/slackjeff) (Client Quit)
[23:07:50] *** Quits: OlCe (~user@amontpellier-658-1-232-244.w109-210.abo.wanadoo.fr) (Remote host closed the connection)
[23:08:05] *** Joins: slackjeff (~slackjeff@user/slackjeff)
[23:08:05] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[23:12:33] *** Joins: fuzzybear3965 (~fuzzybear@2a03:7380:2102:6c35:d957:314a:bf15:4458)
[23:12:45] <fuzzybear3965> When I use `less` what's happening?
[23:12:50] <fuzzybear3965> Like where is the output being displayed?
[23:13:05] <fuzzybear3965> It's not STDOUT, I guess, because I can scroll and have to exit using `q`.
[23:13:05] *** Quits: drd (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 258 seconds)
[23:13:08] *** Quits: kurtthemaker (~kurt@S010644a56e3e0ee9.cn.shawcable.net) (Remote host closed the connection)
[23:13:17] <Inline> less is a pager
[23:13:20] <greycat> are those backticks literal, not IRC markup?
[23:13:26] <Inline> i.e. it has it's own screen estate
[23:13:31] <fuzzybear3965> Ah, sorry. They're denoting a key press.
[23:13:39] <fuzzybear3965> Okay, X then Y problem.
[23:13:48] <greycat> if you're using $(less) the question is WHY are you doing that
[23:14:01] <fuzzybear3965> I'm using `aws lambda invoke` and it paginates the output.
[23:14:05] <fuzzybear3965> Just like `less`.
[23:14:16] <fuzzybear3965> This makes the bash script that calls it an interactive one.
[23:14:17] <greycat> *headdesk*
[23:14:19] <Inline> i suppose it uses curses/ncurses underneath to reserve X resources or some such....
[23:14:21] <fuzzybear3965> That's not what I want.
[23:14:33] <fuzzybear3965> How can I make sure the output isn't paginated?
[23:14:39] <Inline> ah
[23:14:41] <fuzzybear3965> I want the script to be non-interactive/automated.
[23:14:59] <fuzzybear3965> Do I need to send it to the background?
[23:15:02] <greycat> There is an ##aws channel.
[23:15:08] <fuzzybear3965> Ahh, sorry!
[23:15:10] <fuzzybear3965> Didn't know!
[23:15:13] <fuzzybear3965> Thanks!
[23:15:33] <geirha> if it's sane, it will only paginate if stdout is a tty
[23:15:56] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Read error: Connection reset by peer)
[23:16:02] <Inline> welp, why not paginate on a pty ?
[23:16:25] <fuzzybear3965> How can I make sure stdout is *not* a TTY.
[23:16:42] <greycat> usually by redirecting to a file
[23:16:47] <fuzzybear3965> Can I make stdout point to a file (not device file) for example?
[23:16:49] <fuzzybear3965> Ahhhhh
[23:17:05] <fuzzybear3965> Like `aws lambda invoke ..... > out.txt`.
[23:17:09] <fuzzybear3965> Word.
[23:17:09] <greycat> NO
[23:17:17] <fuzzybear3965> Oh, no?
[23:17:18] <greycat> Well, yes, if those backticks are NOT LITERAL.
[23:17:24] <fuzzybear3965> The backticks are not literal.
[23:17:26] <greycat> Fucking backticks.
[23:17:31] <fuzzybear3965> They're wrapped around the command.
[23:17:43] <llua> and also valid shell syntax
[23:18:03] <fuzzybear3965> ............. llua I feel attacked.
[23:18:18] <greycat> Backticks have actual meaning in bash, so we can never tell if you're actually putting them in the script, or if your IRC client is putting them in automatically, or if you are putting them in yourself but only in IRC.
[23:18:21] <fuzzybear3965> You guys are the best!
[23:18:37] <fuzzybear3965> I'm adding them manually. That's stupid/unnecessary/confusing - I understand.
[23:18:40] <fuzzybear3965> It works.
[23:18:42] <fuzzybear3965> Thanks, a lot!
[23:18:53] <fuzzybear3965> ##aws hasn't answered, yet.
[23:18:59] <fuzzybear3965> So, I appreciate you guys dealing with the off-top.
[23:19:03] *** Joins: DaNeenjah (~jake@21.sub-72-106-110.myvzw.com)
[23:19:54] <ash_worksi> do backticks have any meaning that can't/shouldn't be replaced by$() ?
[23:19:59] <ash_worksi> by $() ?
[23:20:04] <fuzzybear3965> $() is posix compliant.
[23:20:05] <fuzzybear3965> ` ` isn't.
[23:20:10] <fuzzybear3965> So, ` ` is not recommended
[23:20:17] <fuzzybear3965> They're equivalent, though.
[23:20:21] <ash_worksi> fuzzybear3965: so, "no"
[23:20:27] <greycat> !faq backtick
[23:20:27] <greybot> https://mywiki.wooledge.org/BashFAQ/082 -- Why is $(...) preferred over `...` (backticks)?
[23:20:39] <ash_worksi> so again, "no"
[23:20:50] <greycat> (they are not 100% equivalent)
[23:20:59] <fuzzybear3965> ash_worksi No.
[23:21:09] <fuzzybear3965> @greycat
[23:21:10] <fuzzybear3965> True.
[23:21:21] <fuzzybear3965> They're similar in usage, mostly.
[23:21:46] *** Quits: austin987 (~null@100.42.98.196) (Ping timeout: 240 seconds)
[23:21:47] <ash_worksi> okay, so there is some extremely rare situation where you might want to use '``' over '$()' but they only meaning remains creating a subshell?
[23:22:06] <ash_worksi> ^ is that correct?
[23:22:07] <greycat> the only time you want to use backticks is if you're writing code for the pre-POSIX Bourne shell
[23:22:18] <fuzzybear3965> What about with fish?
[23:23:09] <ash_worksi> okay. I was just checking to make sure that backticks have any other meaning
[23:23:31] <greycat> they're how you tried (had) to do a command substitution in the Stupid Olde Days
[23:23:38] <greycat> you just had to work around their brokenness
[23:23:43] <greycat> there was no other choice
[23:24:16] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Remote host closed the connection)
[23:24:37] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[23:25:01] *** Joins: Tabstar (~tabmow@user/tabmow)
[23:25:27] <ash_worksi> greycat: on the page you linked "as long as we don't care about destroying the separation between stdout and stderr on the terminal." -- what is the implication there? Would I not be able to filter screen contents down to stderr?
[23:25:32] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Client Quit)
[23:25:52] <greycat> I refuse to dive into this topic with you.  The FAQ page should be enough.
[23:25:52] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[23:25:52] *** Quits: Tabmow (~tabmow@user/tabmow) (Ping timeout: 272 seconds)
[23:25:59] <MaximB> why this doesn't seems to work? https://paste.debian.net/1206826/
[23:26:15] <greycat> Eventually you will just abandon the insanity that currently possesses you, but until then, I will not be dragged into it with you.
[23:26:30] <greycat> !check
[23:26:32] <checkbot> MaximB: Line 2: 'local' is only valid in functions. See https://shellcheck.net/?id=cb76191
[23:26:49] <MaximB> yeah, it's part of a function
[23:27:06] *** Tabstar is now known as Tabmow
[23:27:16] *** Quits: H3dn1ng (~H3dn1ng@185.213.154.241) (Quit: leaving)
[23:27:26] <llua> why are you using [ and not [[
[23:27:34] <ash_worksi> greycat: you could just say "yes" -- also, thank you for telling me that it's insane; I'd rather you tell me that then point me to an article that will attempt to allow me to do it
[23:28:04] <greycat> Saying yes or no would require me to dive so fucking goddamned DEEP into this POOL OF INSANITY that I could actually understand what you are asking.  I am not going to.
[23:28:09] *** Quits: slackjeff (~slackjeff@user/slackjeff) (Ping timeout: 252 seconds)
[23:28:16] <greycat> Read the FAQ page.
[23:28:47] <MaximB> this didn't fix the issue:   while [[ $new_amount -lt 1 ]] ;do
[23:29:07] <ash_worksi> yeah -- I was just attempting to clarify the FAQ page -- but w/e drop it. I have abandoned the idea entirely
[23:29:09] <greycat> if you're doing arithmetic, you could use  while ((new_amount < 1)); do
[23:30:22] <MaximB> still didn't work for some reason... while  (($new_amount < 1)) ;do
[23:30:58] <greycat> the $ is less than ideal here, but ... what is the error you get?
[23:31:26] *** Quits: mikeliuk (~mikeliuk@109.249.187.96) (Quit: Connection closed)
[23:31:33] <MaximB> I don't get error, it just uses the zero value
[23:31:56] <greycat> an empty value is treated as zero in a math context, e.g. if you omit the $ and use what I wrote
[23:32:19] <greycat> but since you used the $ an empty variable expands to an empty string and you get   (( < 1)) and that should give an error
[23:32:23] <MaximB> well I type 0 when i t asks me read -r new_amount
[23:32:42] *** Joins: slackjeff (~slackjeff@user/slackjeff)
[23:32:42] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[23:33:07] <greycat> so you're saying you have a logic error?  either post enough of the script that checkbot can actually parse it, or wait for someone who has the patience to actually read your code for you
[23:33:57] <a1fa> ;)
[23:33:59] <MaximB> if it's easier for you to look at the whole function... https://paste.debian.net/1206829/
[23:34:19] <greycat> !check
[23:34:21] <checkbot> MaximB: Line 2: rec_file is referenced but not assigned. Line 21: Declare and assign separately to avoid masking return values. Line 32: Double quote to prevent globbing and word splitting. See https://shellcheck.net/?id=cb76660 for all 10 issues.
[23:34:25] *** Joins: austin987 (~null@2607:fb90:20d0:ad0:e64c:e897:c32f:4abd)
[23:34:45] <smlavine> Is there any POSIX replacement for the -F option in GNU's stty command?
[23:35:02] <phy1729> https://pubs.opengroup.org/onlinepubs/9699919799/utilities/stty.html   says no
[23:35:06] <phy1729> oh replacement
[23:35:13] <greycat> stty < yourdevice
[23:35:13] *** Joins: artix_live_2 (~slackjeff@user/slackjeff)
[23:35:51] *** Quits: darkbit (~db@152.32.99.67) (Ping timeout: 252 seconds)
[23:36:13] <smlavine> greycat: Wow, thanks!
[23:37:04] <MaximB> this still didn't help with the function issue
[23:37:28] *** Joins: lorimark (~lorimark_@static-47-190-7-163.dlls.tx.frontiernet.net)
[23:37:37] *** Quits: slackjeff (~slackjeff@user/slackjeff) (Ping timeout: 258 seconds)
[23:37:54] <lorimark> I am wanting to write a script to remove *.dat files when there exists also a *.pdf file
[23:37:59] <greycat> I'm going to regret this, I can feel it...
[23:38:25] <lorimark> so if i have SOMETHING.pdf it is highly likely I'll also have a SOMETHING.dat - apparently left over after pdf generation
[23:38:28] <greycat> MaximB: the lack of quoting is *severe*
[23:38:34] <lorimark> i want to remove the .dat when the .pdf exists
[23:38:53] <lorimark> can I pipe a find to another find to a rm or something?
[23:38:53] <MaximB> maybe, but I doubt it cases this specific issue
[23:40:24] <greycat> MaximB: http://paste.wooledge.org/8714
[23:40:25] <phy1729> for f in *.dat; do [ -f "${f%.dat}.pdf" ] && rm -- "$f"; done
[23:42:43] <lorimark> phy1729, thank you :)
[23:43:22] <lorimark> got it, grab the .dat first and then see if there's a corresponding pdf - better approach
[23:43:34] <lorimark> but i have to strip the .dat out
[23:43:36] <lorimark> it's not there
[23:43:38] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[23:43:40] <lorimark> THIS.pdf and THIS.dat
[23:43:48] <lorimark> but, thank you!
[23:43:50] <greycat> read phy1729's command more closely
[23:44:12] <twkm> for f in ./*.pdf; do rm -f "${f%.pdf}.dat"; done
[23:44:54] <twkm> i.e., have x.pdf then nuke x.dat ignoring if it doesn't exist.
[23:45:19] <phy1729> could make it an array and do them all at once
[23:45:27] <twkm> yep.
[23:45:43] <twkm> ... provided there aren't too many.
[23:46:31] * greycat tosses a random printf %s\\0 "${a[@]}" | xargs -0 rm -- in the air
[23:46:53] <lorimark> lol geez you guys
[23:46:58] *** Parts: shush_ (sid21719@tinside.irccloud.com) ()
[23:47:04] <lorimark> (i knew i came to the right place)
[23:47:56] <obiwahn> // 2>/dev/null ; gorun "$0" "$@" ; exit $?
[23:48:04] <obiwahn> How does that work?
[23:48:28] <greycat> what's actually in the script where you wrote //
[23:48:42] <obiwahn> https://github.com/erning/gorun
[23:48:47] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[23:49:02] <obiwahn> oh actuall 3 / one got lost.
[23:49:17] <obiwahn> it seems to be an alternative `#!`
[23:49:18] <greycat> neither // nor /// is a valid bash command, so you'll have to figure it out
[23:49:27] <greycat> maybe this is not a bash program
[23:49:36] <twkm> could be a program, possibly a script.
[23:49:53] <emanuele6> i think it is just a way to make go not interpret that line as code
[23:49:54] <twkm> but it would play havoc with the filesystem.
[23:49:55] <greycat> maybe it's got something to do with the language named Go
[23:50:14] <obiwahn> i did not play with binfmt_misc, so i thought the shell is doing the magic.
[23:50:20] <twkm> ahh, go .... ewww, /me wanders off.
[23:50:36] *** Quits: artix_live_2 (~slackjeff@user/slackjeff) (Ping timeout: 256 seconds)
[23:50:46] <obiwahn> but i did not see it in the `man bash`
[23:50:49] *** Joins: LordRishav (~lordrisha@157.42.49.190)
[23:50:51] <greycat> because it isn't bash
[23:50:55] <greycat> we don't know what it is
[23:52:40] <emanuele6> it is an dirty hack to launch the program with gorun without using a shebang
[23:53:12] <emanuele6> # /// # this fails because /// is not a valid command and prints an error
[23:53:13] <shbot> emanuele6: bash: ///: Is a directory
[23:53:38] <emanuele6> # /// 2> /dev/null # the error is hidden
[23:53:39] <shbot> emanuele6: no output
[23:54:05] <emanuele6> # /// 2> /dev/null; echo hi; exit 0; echo not run # you can run sh commands
[23:54:06] <shbot> emanuele6: hi
[23:54:06] <shbot> emanuele6: logout
[23:54:06] <shbot> emanuele6: (shell exited with 0)
[23:54:09] <obiwahn> emanuele6: do you know where it is defined?
[23:54:11] *** Quits: TP1 (~TP1@87.101.193.195) (Quit: Leaving)
[23:54:20] <emanuele6> obiwahn: what do you mean? it is an hack
[23:54:27] <emanuele6> it is bad too
[23:54:30] <emanuele6> you should not use it
[23:54:39] <obiwahn> How does it work?
[23:54:40] <greycat> Oh, so this is one of those "if someone invokes us with a shell, do something non-destructive, and if they invoke us with Go, the first command will do nothing, and then the rest of the program will run" thing?
[23:55:19] <emanuele6> yeah, like the shebang suggested in the tcl(1) man page
[23:55:21] <greycat> I suppose I can see it now that you've mentioned it, but without knowing Go syntax, there's no way I would have figured that out.
[23:56:07] <emanuele6> but bad since the file does not actually have a shebang; it relies on the system executing text files without a shebang with sh 
[23:56:17] <greycat> obiwahn: ask the Go channel how the Go half of it works.  As for the bash half, the first command does nothing but spit an error to /dev/null, then the rest tries to re-invoke the program using the contents of $0 which is a shot in the dark.
[23:56:47] <Helmholtz> Where is the location of key-bindings.bash for a pacakge?
[23:57:00] <greycat> Does Go blow up if there's a shebang?  That would be a really bad design choice for something meant to live on Unix in the 21st century.
[23:57:02] <obiwahn> i was wondering how anything could be executed without #!
[23:57:34] <twkm> # //() { echo foo; }; //
[23:57:35] <shbot> twkm: foo
[23:57:35] <obiwahn> no it works but the suckers do not allow `#`in their code so all the tooling does not work.
[23:57:57] <lorimark> phy1729, thank you!  works great!
[23:58:11] <emanuele6> greycat: i read some time ago that they do not want to support shebangs intentionally even though the official compiler go(1) can run files directly as `go run filename.go`
[23:58:59] <emanuele6> link: https://groups.google.com/g/golang-nuts/c/iGHWoUQFHjg/m/_dbLKomrPmUJ
[23:59:28] <obiwahn> https://groups.google.com/g/golang-nuts/c/iGHWoUQFHjg/discussion
[23:59:42] <obiwahn> oh you have been quicker ...
