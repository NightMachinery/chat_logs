[00:03:22] *** Quits: tuskkk____ (uid18470@id-18470.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[00:05:37] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Ping timeout: 240 seconds)
[00:06:44] *** Joins: unop (~unop@195.91.14.193)
[00:07:50] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[00:08:06] *** Joins: jrua (~jrua@79.97.146.200)
[00:08:45] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[00:09:51] *** Joins: vandito (~vandito@131.0.224.113)
[00:09:55] *** Quits: unop (~unop@195.91.14.193) (Client Quit)
[00:12:40] *** Quits: tatarqa (~kli@ip-89-177-122-45.net.upcbroadband.cz) (Quit: Leaving)
[00:15:54] *** Quits: vandito (~vandito@131.0.224.113) (Quit: vandito)
[00:18:01] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[00:18:03] *** Joins: unop (~unop@195.91.14.193)
[00:18:37] *** Quits: capn (~capn@user/capn) (Remote host closed the connection)
[00:18:57] *** Joins: capn (~capn@user/capn)
[00:22:11] *** Quits: mrcoffee (~mago@user/mago) (Ping timeout: 250 seconds)
[00:25:47] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[00:27:37] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[00:30:46] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[00:31:55] *** Joins: thiras (~thiras@user/thiras)
[00:38:48] *** Joins: Masterphi (~Masterphi@user/masterphi)
[00:40:17] *** Joins: _mikey (~mikey@user/mikey/x-4335048)
[00:43:45] *** Quits: nyex (~Thunderbi@177.84.107.56) (Quit: nyex)
[00:44:13] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[00:44:23] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Ping timeout: 256 seconds)
[00:46:37] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 240 seconds)
[00:47:35] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[00:49:06] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:4db1:e3b:c0ba:c184) (Ping timeout: 245 seconds)
[00:50:06] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[00:51:27] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[00:53:37] *** Quits: loofy (~loofy@ip70-191-113-247.cl.ri.cox.net) (Quit: WeeChat 3.0)
[00:53:43] *** Joins: vandito (~vandito@131.0.224.113)
[00:53:47] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[00:53:58] *** Joins: museeee (~museee@user/museee)
[00:54:43] *** Joins: loofy (~loofy@ip70-191-113-247.cl.ri.cox.net)
[00:55:17] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Ping timeout: 240 seconds)
[00:55:28] *** Joins: bluedust (~bluedust@117.193.122.44)
[00:56:02] *** Quits: vandito (~vandito@131.0.224.113) (Client Quit)
[00:56:05] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[00:57:30] *** Joins: wiscii (~tct@user/wiscii)
[00:58:00] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[00:58:24] *** Joins: lavaball (~Melissa@31.204.155.215)
[00:58:54] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[01:00:15] *** Quits: luva (~luva@45.141.152.53) (Ping timeout: 256 seconds)
[01:01:13] *** Joins: luva (~luva@37.120.197.54)
[01:04:17] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 240 seconds)
[01:05:35] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Ping timeout: 256 seconds)
[01:06:49] *** Quits: H3dn1ng (~H3dn1ng@185.213.154.226) (Quit: leaving)
[01:07:50] <wiscii> hi, if i pass a string to a function and the string has known spaces in that i want it to be split on, what is the right way to do that ?
[01:08:26] *** Quits: vicecea (~vicecea@gateway/vpn/pia/vicecea) (Remote host closed the connection)
[01:08:44] *** Joins: vicecea (~vicecea@gateway/vpn/pia/vicecea)
[01:08:45] <wiscii> the only thing that seems to allow what i'm looking for is "$@" (not "$*")
[01:09:06] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[01:09:47] <wiscii> i would pre-split the string but the function i am passing it to is supposed to do that
[01:10:13] <larryv> what is this function going to do with the split words?
[01:10:54] <wiscii> the function assigns variables to each part of the string, the string is well defined
[01:11:11] <llua> "$string"
[01:11:55] <wiscii> if i quote it the string remains as one parameter
[01:12:08] <llua> yeah, for the function to split like you said
[01:12:15] <wiscii> so then i must manually do the splitting
[01:12:58] <wiscii> i want to use the built-in word splitting ? so my option seems to be not quote it ?
[01:13:24] <larryv> then what's this function supposed to do
[01:13:29] <larryv> are you implementing it?
[01:13:35] <llua> so you want to pass multiple strings, not a string to a function
[01:13:36] <wiscii> i think i'll just have to live with it and add a suitable comment
[01:13:36] *** Joins: mrcoffee (~mago@user/mago)
[01:14:29] <wiscii> the original string is a bunch of values which a spave delimited, i pass it as one $var unquoted
[01:14:37] <wiscii> space*
[01:15:04] <llua> you shouldn't
[01:15:26] <Earnestly> unquoted suffers more than just wordsplitting
[01:15:28] <wiscii> i was just curious if this is a recognised accepted or unacceptable way
[01:15:28] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[01:15:46] <wiscii> sounds unacceptable :(
[01:16:08] <wiscii> Earnestly: do you have an example ?
[01:16:13] <Earnestly> wiscii: globs
[01:16:19] <wiscii> ok
[01:16:19] <Earnestly> patterns, regex, depending on context
[01:16:21] *** Quits: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[01:16:47] *** Joins: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de)
[01:17:16] <wiscii> yes, i can see why .. and although a long shot, it is possible the string could be poluted at source
[01:17:52] <wiscii> btw, thanks for that tip (reminder) :)
[01:18:11] *** Joins: YaoNai (~YaoNai@user/yaonai)
[01:19:18] <OnlineCop> wiscii: I might go with a regex to split the "$@" apart, if you know that some spaces should be preserved while others should be delimiters.
[01:19:40] <wiscii> larryv: the function is only there to split and assign and then it returns
[01:19:52] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[01:20:22] <wiscii> OnlineCop: yeah, i could do that
[01:20:45] <llua> surgery with a chainsaw
[01:21:15] <wiscii> gas powered !
[01:21:40] <OnlineCop> wiscii: What do you mean by "the string has known spaces in that i want it to be split on" ? Do you mean that you have some kind of `key=value` or something where you know that "value" may contain spaces but will never have a "key=" within it?
[01:22:22] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[01:22:25] <larryv> just sounds like a space-delimited string
[01:23:01] <wiscii> OnlineCop: each value is stand alone, the interpretation comes from the script (the string is set at source by creating a key, it can never be changed from then on but it could be poluted at that point)
[01:23:50] <OnlineCop> Have you got an example? "This would be the input... and this is how I want it split up..."
[01:23:53] <wiscii> larryv: i think i have over complicated it .. re-scanning my code, it actually will not take much to take a single param quoted and deal with that instead
[01:24:03] <larryv> wiscii: from what you've been describing, it doesn't sound like the function has anything to do with the splitting. you're just passing it a bunch of arguments, and it's assigning them to some variables
[01:24:18] <larryv> this_function_doesnt_split_anything $string
[01:24:22] *** Joins: Tabstar (~tabmow@user/tabmow)
[01:24:51] *** Quits: Tabmow (~tabmow@user/tabmow) (Ping timeout: 256 seconds)
[01:24:52] <llua> which should be: this_function_doesnt_split_anything "${ary[@]}"
[01:24:55] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[01:24:55] <wiscii> by passing the $string i get parameters 1 through 9
[01:25:15] <wiscii> by passing the "$string" i get p1
[01:25:26] *** Joins: wurstwasser (~frank.hol@2001:a61:34a7:b001:a311:5938:a6d4:a83)
[01:25:29] <wiscii> but i can work with that :)
[01:26:07] <llua> the array creation was not shown, but implied.
[01:26:37] <wiscii> posix btw .. ;-)
[01:26:43] *** Tabstar is now known as Tabmow
[01:26:51] *** Joins: bluedust_ (~bluedust@86.106.136.217)
[01:27:19] <OnlineCop> Are egrep or perl considered POSIX?
[01:27:43] <larryv> grep -E is POSIX. perl is not POSIX.
[01:28:21] <emanuele6> POSIX is not a "consideration", it is a real thing that you can read
[01:28:32] <emanuele6> https://pubs.opengroup.org/onlinepubs/9699919799/
[01:28:38] * larryv waits for a monstrous grep+perl concoction to split a string on spaces
[01:28:55] * wiscii gets popcorn warmed up
[01:29:09] *** Joins: wwilliam (~afernande@63.240.73.102)
[01:29:09] *** Quits: wwilliam (~afernande@63.240.73.102) (Changing host)
[01:29:09] *** Joins: wwilliam (~afernande@user/wwilliam)
[01:29:11] <OnlineCop> I actually do that every day at work. I just need a sample string...
[01:29:16] <emanuele6> !coffee
[01:29:17] <greybot> c[_]
[01:29:20] <OnlineCop> *cough* https://regex101.com *cough*
[01:29:37] *** Quits: bluedust (~bluedust@117.193.122.44) (Ping timeout: 240 seconds)
[01:29:47] *** Joins: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk)
[01:29:51] <wiscii> hey, a regex tester :)
[01:29:51] <emanuele6> that website doesn't support egrep regexes
[01:30:05] <emanuele6> nor standard grep regex
[01:30:16] *** Quits: bn_work (uid268505@id-268505.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[01:30:26] <wiscii> boo!
[01:30:27] <OnlineCop> I might cheat and either user perl (PCRE) or `grep -P` (not POSIX, but I can fake ERE or BRE in many cases).
[01:30:30] *** Joins: bluedust (~bluedust@117.193.122.44)
[01:30:53] <OnlineCop> Is `sed -r` considered POSIX?
[01:31:04] <emanuele6> POSIX is a thing that you can read
[01:31:13] <emanuele6> https://pubs.opengroup.org/onlinepubs/9699919799/
[01:31:15] <emanuele6> err
[01:31:17] <larryv> https://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html
[01:31:22] <emanuele6> https://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html
[01:31:28] <emanuele6> no, sed-r is not POSIX
[01:31:38] <OnlineCop> Ah, sad-face.
[01:31:51] <emanuele6> why do you even need sed-r?
[01:32:11] <OnlineCop> It handles '(' and ')' capture groups without having to '\(' escape '\)' them first.
[01:32:12] <llua> to fumble into splitting the string
[01:33:04] <OnlineCop> Anyway, my original question still stands: to [attempt to] make a POSIX-compliant regex, I'd want to see some kind of example input with desired output.
[01:33:08] *** Quits: Minvera (~Minvera@user/Minvera) (Quit: Leaving)
[01:34:32] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[01:34:35] *** Quits: bluedust_ (~bluedust@86.106.136.217) (Ping timeout: 256 seconds)
[01:34:43] <wiscii> OnlineCop: is that a question for me ?
[01:34:49] *** Quits: luva (~luva@37.120.197.54) (Ping timeout: 256 seconds)
[01:34:50] <OnlineCop> wiscii: Yes.
[01:35:02] <wiscii> you want to see my data ?
[01:35:09] *** Quits: makara1 (~makara@196.214.171.83) (Ping timeout: 256 seconds)
[01:35:11] *** Joins: luva (~luva@45.141.152.54)
[01:35:20] <OnlineCop> I just use regex101 as a staging site so you could test that a regex is matching/splitting as you expect.
[01:35:32] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[01:35:36] *** Joins: makara (~makara@196.214.171.83)
[01:35:37] <OnlineCop> You can use anything, really. And it's usually best to obfuscate any IP.
[01:35:57] *** Quits: makara_ (~makara@196.214.171.83) (Ping timeout: 256 seconds)
[01:36:12] *** Joins: makara_ (~makara@196.214.171.83)
[01:36:29] <llua> getting the data back from data into posix shell sanely is the problem you are going to run into, no different than letting the unquoted pe happen.
[01:36:56] <llua> from grep*
[01:37:38] <OnlineCop> Especially since it looks like `grep -o` isn't in the POSIX list.
[01:37:56] <wiscii> OnlineCop: my script works fine .. but i know how much these guys hate unqoted strings in bash/sh and i agree with them, some what.  so i have this non-trivial piece of code that relies on an unquoted string and i don't like it, so i came here for some ideas and got some already :)
[01:39:21] *** Joins: neo (~Neo@user/neo)
[01:40:34] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[01:41:16] *** Quits: skapata (~Skapata@user/skapata) (Quit: Ĝis.)
[01:42:17] *** Joins: tofran (~tofran@bl15-47-228.dsl.telepac.pt)
[01:43:18] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[01:44:43] *** Quits: ccl (~ccl@user/ccl) (Quit: leaving)
[01:44:45] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Quit: WeeChat 3.4)
[01:45:14] *** Joins: emanuele6 (~emanuele6@net-93-66-69-137.cust.vodafonedsl.it)
[01:46:21] *** Joins: polardroid (~polardroi@user/polardroid)
[01:46:27] *** Quits: emanuele6 (~emanuele6@net-93-66-69-137.cust.vodafonedsl.it) (Changing host)
[01:46:27] *** Joins: emanuele6 (~emanuele6@user/emanuele6)
[01:48:39] *** Quits: OlCe (~user@amontsouris-156-1-23-81.w92-151.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[01:49:08] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[01:49:41] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[01:53:32] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Quit: No Ping reply in 180 seconds.)
[01:53:48] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:4455:76db:487:e9f8)
[01:54:26] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[01:54:37] *** Quits: polardroid (~polardroi@user/polardroid) (Ping timeout: 240 seconds)
[01:55:27] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[01:59:45] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Ping timeout: 256 seconds)
[01:59:57] *** Quits: zebrag (~chris@user/zebrag) (Ping timeout: 240 seconds)
[02:00:14] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[02:00:22] *** Joins: zebrag (~chris@user/zebrag)
[02:00:35] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:01:19] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Remote host closed the connection)
[02:01:39] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[02:01:44] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[02:02:10] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[02:06:04] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[02:06:19] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 256 seconds)
[02:07:42] *** Quits: ka80 (~ka80@111.60.138.34.bc.googleusercontent.com) (Quit: Leaving)
[02:08:48] *** Quits: kj- (~kj@beta.aerisnetwork.net) (Ping timeout: 250 seconds)
[02:10:22] *** Joins: ikwyl6 (~ikwyl6@5.254.48.58)
[02:11:12] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[02:11:37] *** Quits: luva (~luva@45.141.152.54) (Ping timeout: 240 seconds)
[02:12:47] *** Joins: luva (~luva@146.70.62.252)
[02:13:53] *** Joins: ka80 (~ka80@111.60.138.34.bc.googleusercontent.com)
[02:14:06] *** Joins: MadcapJake (~MadcapJak@047-012-202-057.res.spectrum.com)
[02:17:50] *** Joins: sinaowolabi (~SinaOwola@41.58.247.117)
[02:20:13] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:4455:76db:487:e9f8) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:23:26] *** Joins: ccl (ccl@user/ccl)
[02:25:20] *** Quits: bluedust (~bluedust@117.193.122.44) (Remote host closed the connection)
[02:26:29] *** Quits: museee (~museee@user/museee) (Quit: Leaving)
[02:26:59] *** Joins: igemnace (~ian@user/igemnace)
[02:27:27] *** Joins: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net)
[02:27:41] *** Joins: kj (~kj@kj.aerisnetwork.net)
[02:31:57] *** Quits: kj (~kj@kj.aerisnetwork.net) (Ping timeout: 240 seconds)
[02:33:41] *** Joins: wurstwasser_2 (~frank.hol@aftr-62-216-210-19.dynamic.mnet-online.de)
[02:34:16] *** Joins: kj (~kj@kj.aerisnetwork.net)
[02:36:06] *** Quits: wurstwasser (~frank.hol@2001:a61:34a7:b001:a311:5938:a6d4:a83) (Ping timeout: 250 seconds)
[02:38:51] *** Quits: kj (~kj@kj.aerisnetwork.net) (Ping timeout: 256 seconds)
[02:39:15] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[02:42:54] *** Joins: kj (~kj@kj.aerisnetwork.net)
[02:43:08] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Quit: Leaving)
[02:43:23] *** Quits: martinus__ (~martin@111.27.202.77.rev.sfr.net) (Ping timeout: 256 seconds)
[02:44:13] *** Joins: crashrep (~crashrep@user/crashrep)
[02:44:16] *** Quits: vysn (~vysn@user/vysn) (Remote host closed the connection)
[02:45:05] *** Quits: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net) (Ping timeout: 256 seconds)
[02:45:11] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Ping timeout (120 seconds))
[02:45:18] *** Quits: jrua (~jrua@79.97.146.200) (Remote host closed the connection)
[02:45:41] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[02:45:43] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[02:46:40] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[02:46:47] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Ping timeout: 256 seconds)
[02:48:47] *** Joins: epony (epony@user/epony)
[02:50:17] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[02:50:36] *** Joins: aod (~a@186-89-202-246.genericrev.cantv.net)
[02:54:55] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[02:55:59] *** Quits: zoe (~zoe@fsf/member/zoe) (Remote host closed the connection)
[02:56:27] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[02:59:20] *** Quits: neo (~Neo@user/neo) (Quit: Leaving)
[02:59:47] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[03:00:03] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 256 seconds)
[03:00:37] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[03:01:02] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[03:01:42] *** Quits: YaoNai (~YaoNai@user/yaonai) (Quit: leaving)
[03:01:47] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[03:02:38] *** Quits: tomboy64 (~tomboy64@user/tomboy64) (Quit: Off to see the wizard.)
[03:03:24] *** Joins: tomboy64 (~tomboy64@user/tomboy64)
[03:05:45] *** Quits: aod (~a@186-89-202-246.genericrev.cantv.net) (Quit: leaving)
[03:06:03] *** Joins: aod (~a@186-89-202-246.genericrev.cantv.net)
[03:06:24] *** Quits: mat001 (~mat001@72.28.108.216) ()
[03:07:29] *** Joins: impermanence (~impermane@c-75-73-193-204.hsd1.mn.comcast.net)
[03:08:05] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 256 seconds)
[03:09:34] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[03:09:54] *** Quits: drd (~drd@2001:b07:6468:1782:1e9c:163f:3faa:8058) (Ping timeout: 250 seconds)
[03:09:55] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[03:10:49] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[03:11:51] *** Quits: wurstwasser_2 (~frank.hol@aftr-62-216-210-19.dynamic.mnet-online.de) (Remote host closed the connection)
[03:12:14] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[03:12:32] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[03:12:39] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Client Quit)
[03:12:57] *** Quits: aod (~a@186-89-202-246.genericrev.cantv.net) (Quit: leaving)
[03:13:04] *** Joins: polardroid (~polardroi@user/polardroid)
[03:13:11] *** Quits: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[03:13:28] *** Joins: tangy (~tangy@user/tangy)
[03:14:09] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[03:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:15:30] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[03:15:38] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[03:17:21] *** Quits: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072) (Ping timeout: 276 seconds)
[03:18:43] *** Quits: museeee (~museee@user/museee) (Remote host closed the connection)
[03:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:20:38] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[03:21:51] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[03:21:57] *** Quits: NoelFlantier3 (~Hubert@195.201.244.189) (Remote host closed the connection)
[03:22:22] *** Joins: NoelFlantier3 (~Hubert@195.201.244.189)
[03:26:18] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[03:27:00] *** Joins: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net)
[03:29:25] *** Joins: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072)
[03:30:59] *** Quits: magla (~gelignite@d5361383.access.ecotel.net) (Quit: Stay safe!)
[03:35:16] *** Joins: N4buc0 (~N4buc0@2804:7f4:348a:fff2:3dbb:5d64:acec:a3f1)
[03:38:09] *** Quits: fedenix_ (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:39:12] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[03:39:37] *** Quits: MadcapJake (~MadcapJak@047-012-202-057.res.spectrum.com) (Ping timeout: 240 seconds)
[03:40:06] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 276 seconds)
[03:41:54] *** Quits: dextercd (~dexter@2a02-a450-f25d-1-76d4-35ff-fefe-34c.fixed6.kpn.net) (Quit: WeeChat 3.4)
[03:43:37] *** Quits: makara (~makara@196.214.171.83) (Ping timeout: 240 seconds)
[03:43:57] *** Quits: makara_ (~makara@196.214.171.83) (Ping timeout: 240 seconds)
[03:44:18] *** Quits: catern (~sbaugh@2604:2000:8fc0:b:a9c7:866a:bf36:3407) (Read error: Connection reset by peer)
[03:46:10] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[03:46:45] *** Joins: unop (~unop@195.91.14.193)
[03:47:39] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Ping timeout: 256 seconds)
[03:51:16] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[03:53:09] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[03:53:39] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:19e7:ade0:dc6f:5dab)
[03:53:39] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:19e7:ade0:dc6f:5dab) (Changing host)
[03:53:39] *** Joins: skapata (~Skapata@user/skapata)
[03:59:30] *** Joins: shep (~bob@bob.4kb.com)
[04:01:09] *** Quits: igemnace (~ian@user/igemnace) (Remote host closed the connection)
[04:02:02] *** Quits: stevenm (~stevenm@stevenm.keele.netcentral.co.uk) (Remote host closed the connection)
[04:02:15] *** shep is now known as bob4k
[04:02:43] *** Quits: yustin (~yustin@user/yustin) (Ping timeout: 256 seconds)
[04:04:01] *** Quits: freep (~freepppp@46.246.189.172.dsl.dyn.forthnet.gr) (Read error: Connection reset by peer)
[04:07:44] *** Joins: stevenm (~stevenm@stevenm.keele.netcentral.co.uk)
[04:16:19] *** Quits: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[04:19:13] *** Joins: rcernin (~rcernin@101.189.141.138)
[04:23:44] <emg> https://www.reddit.com/r/bash/comments/sktjug/latest_on_things_i_shouldnt_do_in_bash_but_did/
[04:24:14] *** Joins: seninha (~seninha@user/seninha)
[04:28:13] *** Joins: MadcapJake (~MadcapJak@047-012-202-057.res.spectrum.com)
[04:29:50] *** Quits: MadcapJake (~MadcapJak@047-012-202-057.res.spectrum.com) (Client Quit)
[04:31:07] *** Quits: jmew (~jmew@user/jmew) (Ping timeout: 250 seconds)
[04:31:08] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[04:32:34] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[04:32:48] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[04:32:50] *** Quits: rcernin (~rcernin@101.189.141.138) (Quit: WeeChat 3.4)
[04:33:32] *** Joins: volgrim (~Volgrim@156-155-224-214.ip.internet.co.za)
[04:38:23] <ezzieyguywuf> if I have 'some string in single quotes' can I put a tab character in it?
[04:38:26] *** Joins: chenqisu1 (~chenqisu1@183.217.200.249)
[04:39:07] <twkm> yes.
[04:39:29] *** Joins: zeden (~zeden@user/zeden)
[04:39:56] <ezzieyguywuf> when I do 'word\tword' I just see the literal "\t". Perhaps this is ripgrep's fault though and not bash's
[04:40:31] *** Quits: zeden (~zeden@user/zeden) (Client Quit)
[04:41:14] <twkm> easiest is probably a literal tab.
[04:41:15] *** Quits: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net) (Ping timeout: 256 seconds)
[04:41:18] *** Joins: rcernin (~rcernin@101.189.141.138)
[04:42:33] <twkm> so type ' w o r d lnext tab w o r d '
[04:45:09] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[04:47:51] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[04:50:30] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[04:53:53] *** Quits: N4buc0 (~N4buc0@2804:7f4:348a:fff2:3dbb:5d64:acec:a3f1) (Remote host closed the connection)
[04:54:16] *** Joins: N4buc0 (~N4buc0@2804:7f4:348a:fff2:3dbb:5d64:acec:a3f1)
[04:55:40] *** Joins: crashrep (~crashrep@user/crashrep)
[05:03:35] *** Quits: luva (~luva@146.70.62.252) (Ping timeout: 256 seconds)
[05:04:33] *** Joins: luva (~luva@146.70.62.252)
[05:09:20] <ezzieyguywuf> I'm not quite sure what you mean
[05:12:04] *** Quits: emg (~emg@cpe-70-93-247-186.natsow.res.rr.com) (Remote host closed the connection)
[05:12:22] <Blondie101010> frankly not obvious to me either
[05:12:57] <Blondie101010> # echo -e 'word\tword'; echo $'word\tword'
[05:12:58] <shbot> Blondie101010: word    word
[05:12:58] <shbot> Blondie101010: word    word
[05:13:51] *** Quits: dtux (~dtux@c-98-207-149-218.hsd1.ca.comcast.net) (Quit: dtux)
[05:16:18] *** Quits: sinaowolabi_ (~SinaOwola@102.134.114.1) (Read error: No route to host)
[05:18:05] *** Quits: liveacoustic (~adison@user/liveacoustic) (Ping timeout: 256 seconds)
[05:18:25] *** Quits: sinaowolabi (~SinaOwola@41.58.247.117) (Ping timeout: 256 seconds)
[05:18:46] *** Quits: koolazer (~koo@user/koolazer) (Remote host closed the connection)
[05:20:39] *** Quits: knstn (~knstn@ppp-94-66-57-191.home.otenet.gr) (Quit: leaving)
[05:25:56] *** Quits: seninha (~seninha@user/seninha) (Remote host closed the connection)
[05:26:15] *** Quits: overrider (~overrider@user/overrider) (Read error: Connection reset by peer)
[05:26:50] *** Joins: overrider (~overrider@user/overrider)
[05:27:07] <vancz> emanuele6: ah thanks
[05:27:36] *** Parts: polardroid (~polardroi@user/polardroid) ()
[05:27:38] *** Joins: totenkoph (~scythe@user/totenkoph)
[05:29:08] *** Quits: zro (~zro@user/zro) (Quit: WeeChat 3.4)
[05:29:59] *** Joins: herjazz (~herjazz@p10513117-ipngn24101marunouchi.tokyo.ocn.ne.jp)
[05:30:20] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:32:53] *** Joins: vlm (~vlm@user/vlm)
[05:35:08] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[05:35:37] *** Joins: luckiswithme (~luckiswit@149.167.139.151)
[05:35:40] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:38:31] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[05:40:17] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 240 seconds)
[05:46:05] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 256 seconds)
[05:47:33] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:d154:b93f:c8:b39)
[05:48:32] *** Joins: akoana (~ah@user/akoana)
[05:50:38] <ezzieyguywuf> hm, in which case probably ripgrep is the one messing up my \t
[05:51:16] <larryv> '\t' doesn't give you a tab. $'\t' does
[05:51:32] <larryv> (as far as bash is concerned)
[05:51:36] <ezzieyguywuf> in the example above it was just \t
[05:51:45] <larryv> echo -e interprets '\t' as a tab
[05:52:07] <ezzieyguywuf> hm, but I'm not using echo. I'm doing `ripgrep -r '$1\t$2'`
[05:52:15] <ezzieyguywuf> (among other flags)
[05:52:56] <ezzieyguywuf> the ripgrep docs specifically state to use single-quotes instead of double-quotes so that the $1/$2/etc... don't get misinterpreted
[05:53:14] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:54:53] <larryv> yes but ripgrep does not interpret backslash-t as a tab
[05:54:57] <larryv> so that's a nonstarter
[05:55:03] <larryv> $ doesn't mean anything in $'...' quoting. you can use $'...'
[05:55:36] <larryv> # var=foo; echo $'blah $var blah'
[05:55:37] <shbot> larryv: blah $var blah
[05:56:06] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:492b:bea1:e3dc:aaab)
[05:56:06] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:492b:bea1:e3dc:aaab) (Changing host)
[05:56:06] *** Joins: skapata (~Skapata@user/skapata)
[05:58:36] *** Joins: ferdna (~ferdna@user/ferdna)
[05:59:27] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 256 seconds)
[06:00:37] *** Joins: malina (~malina@user/malina)
[06:01:07] *** Joins: Pall (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net)
[06:03:25] <Blondie101010> I showed that 40 minutes ago :/
[06:04:53] *** Quits: chenqisu1 (~chenqisu1@183.217.200.249) (Ping timeout: 256 seconds)
[06:05:34] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[06:06:22] <Blondie101010> # variable=something; echo $"not a $variable\nbut a plain string" # follow regular quote rules
[06:06:23] <shbot> Blondie101010: not a something\nbut a plain string
[06:06:26] *** Joins: dtux (~dtux@c-98-207-149-218.hsd1.ca.comcast.net)
[06:06:32] <Blondie101010> ooh nooo :)
[06:06:42] <Blondie101010> I'm blind
[06:07:14] <Blondie101010> would have been nice
[06:07:33] <akoana> hmm, according to https://docs.rs/regex/1.5.4/regex/#syntax ripgrep uses Rust’s regex engine by default, which documents its syntax: https://docs.rs/regex/*/regex/#syntax, and there it says: "Escape sequences" \t  horizontal tab
[06:07:49] <Blondie101010> yes but that's not relevant to their question
[06:08:09] <Blondie101010> the question is about the parameter and if the shell changes what it passes, the program doesn't know
[06:08:40] <larryv> akoana: they're trying to get a tab into the argument to rg -r though
[06:10:17] *** Quits: zouhair (~zouhair@lnsm1-montreal02-142-119-49-188.internet.virginmobile.ca) (Quit: KVIrc 5.0.1 Aria http://www.kvirc.net/)
[06:13:28] *** Joins: Seirdy0 (~Seirdy@sourcehut/user/seirdy)
[06:13:50] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[06:13:57] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Ping timeout: 240 seconds)
[06:14:51] *** Quits: lotharn (~kvirc@ip70-162-36-238.ph.ph.cox.net) (Remote host closed the connection)
[06:15:37] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 240 seconds)
[06:17:21] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Ping timeout: 256 seconds)
[06:19:42] <Blondie101010> ezzieyguywuf:  you can also ^V<tab>
[06:19:57] *** Quits: mrcoffee (~mago@user/mago) (Ping timeout: 240 seconds)
[06:21:51] *** Joins: mannequin (uid453465@id-453465.helmsley.irccloud.com)
[06:22:08] <mannequin> i got this line of code
[06:22:10] <mannequin> if [ $md5sum_1 -eq $md5sum_2 ]; then
[06:22:24] <mannequin> and it wont execute because bash tells me "too many arguments"
[06:22:26] <mannequin> why
[06:22:57] <Blondie101010> because that is very slugish and will fail if any variable is unset
[06:23:16] <Blondie101010> use quotes
[06:23:25] <Blondie101010> and preferably use [[ instead
[06:23:42] <larryv> those variables are probably getting split into multiple words
[06:23:51] <larryv> what are their contents?
[06:24:13] *** Joins: rcernin (~rcernin@101.189.141.138)
[06:24:52] <mannequin> md5sums
[06:24:56] <mannequin> now i changed it to
[06:24:57] <mannequin> 	if [ "$md5sum_1" == "$md5sum_2" ]; then
[06:25:05] *** Quits: karabaja4 (~karabaja4@dh207-95-244.xnet.hr) (Remote host closed the connection)
[06:25:12] <Blondie101010> much better
[06:25:17] <phy1729> You can't use == in [
[06:25:23] <Blondie101010> right
[06:25:36] <Blondie101010> mannequin:  can't you use [[ ?
[06:25:51] <phy1729> Either you're targeting POSIX sh and must use [ and = or you're targeting bash and should use [[ and either = or == are acceptable
[06:26:27] *** Joins: seninha (~seninha@user/seninha)
[06:26:39] <mannequin> but the code afterwords does not exute
[06:26:52] <mannequin> i've put echo and it's giving me no output
[06:27:13] <larryv> "[21:53]  <larryv>	what are their contents?"
[06:27:47] *** Quits: xx (~xx@user/xx) (Ping timeout: 256 seconds)
[06:28:03] <mannequin> exactly the same numbers
[06:28:08] <mannequin> so the condition is treue
[06:28:16] <ezzieyguywuf> Blondie101010: nice tip! thank
[06:28:17] <ezzieyguywuf> s
[06:28:21] <mannequin> code in the if statement still does not execute
[06:28:32] <Blondie101010> mannequin:  = is not for numbers, -eq is
[06:28:41] <Blondie101010> please read: man test
[06:29:23] <larryv> what does ''declare -p md5sum_1 md5sum_2'' output?
[06:30:28] <mannequin> but wheinteger expression expected
[06:30:33] <mannequin> integer expression expected
[06:30:37] <mannequin> that's what i get now
[06:30:58] <mannequin> if i remove quotes i get too many arguments
[06:31:09] <larryv> jfc show us the contents of the variables
[06:31:12] <Blondie101010> never remove the quotes
[06:32:17] *** Quits: beco (~beco@2804:351c:dd01:b700:1b03:6b85:20d4:ad73) (Quit: Leaving)
[06:33:26] *** Joins: zebrag (~chris@user/zebrag)
[06:34:01] <mannequin> ok i know where the problem is i debugged it
[06:34:10] <mannequin> md5sum puts file name into the variable
[06:34:36] <larryv> "exactly the same numbers" huh
[06:37:09] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[06:37:20] *** Joins: Shungite (~u0_a327@c-24-99-76-58.hsd1.ga.comcast.net)
[06:38:00] *** Quits: millido (~millido@84.210.150.128) (Quit: ZNC 1.8.2 - https://znc.in)
[06:38:22] <mannequin> debugged it, thanks, works now
[06:38:35] <Shungite> #join #weechat
[06:39:28] <mannequin> tea to,e
[06:39:33] <mannequin> tea time
[06:40:37] <Shungite> is there a bot here
[06:40:59] <larryv> a bot for what
[06:41:20] <Shungite> like for google or duckduckgo or weather
[06:41:42] <larryv> not to my knowledge
[06:41:58] <Blondie101010> greybot
[06:42:23] <larryv> greybot does those things?
[06:42:27] <Blondie101010> !bot
[06:42:27] <greybot> I know I am, but what are you?
[06:42:46] *** Joins: N4buc0- (~N4buc0@189.58.131.84)
[06:43:00] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[06:43:05] <Shungite> hi how do you use this bot
[06:43:32] <larryv>   /msg greybot help
[06:44:17] *** Quits: N4buc0 (~N4buc0@2804:7f4:348a:fff2:3dbb:5d64:acec:a3f1) (Remote host closed the connection)
[06:44:48] <Blondie101010> larryv:  hint: /say /whatever
[06:44:48] <Shungite> ok i see
[06:44:55] <Shungite> thanks guys
[06:44:56] *** Joins: beco (~beco@2804:351c:dd01:b700:1b03:6b85:20d4:ad73)
[06:45:08] <Shungite> !date
[06:45:08] <greybot> Sat Feb  5 03:15:07 2022
[06:45:18] <Blondie101010> don't abuse it ;)
[06:45:26] <Blondie101010> you can PM it
[06:45:52] <Shungite> so i shouldnt play around with it here?
[06:46:06] <Shungite> ok
[06:46:11] <Blondie101010> it's mostly meant to provide applicable factoids
[06:46:28] <Blondie101010> so if you're making a point that's part of a factoid, you use it
[06:46:42] *** Joins: luva8 (~luva@146.70.62.244)
[06:46:55] <Shungite> ok
[06:47:00] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 250 seconds)
[06:47:02] *** Joins: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de)
[06:47:26] *** Quits: luva8 (~luva@146.70.62.244) (Client Quit)
[06:47:52] *** Joins: luva8 (~luva@146.70.62.244)
[06:49:47] *** Joins: sunny933 (~sunny93@wireguard/tunneler/sunny93)
[06:49:53] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[06:50:01] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[06:50:27] *** Quits: luva (~luva@146.70.62.252) (Ping timeout: 256 seconds)
[06:50:37] *** Quits: drewlander (~drewlande@74.196.20.3) (Ping timeout: 240 seconds)
[06:50:37] *** Quits: jos1 (~jos3@dyndsl-091-096-042-100.ewe-ip-backbone.de) (Ping timeout: 240 seconds)
[06:51:25] *** Quits: sunny93 (~sunny93@wireguard/tunneler/sunny93) (Ping timeout: 240 seconds)
[06:51:25] *** sunny933 is now known as sunny93
[06:51:43] *** Joins: drewlander (~drewlande@74.196.20.3)
[06:51:58] *** Joins: millido (~millido@84.210.150.128)
[06:52:17] *** Quits: luva8 (~luva@146.70.62.244) (Ping timeout: 240 seconds)
[06:53:39] *** Joins: luva8 (~luva@146.70.62.254)
[06:54:30] *** luva8 is now known as luva
[06:54:38] *** Joins: masoudd (~masoudd@user/masoudd)
[06:55:12] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[06:55:56] *** Joins: rcernin (~rcernin@101.189.141.138)
[06:56:12] <Shungite> hi
[06:58:40] *** Quits: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca) (Quit: Leaving)
[06:58:49] * Blondie101010 * * * * * *
[06:58:56] *** Joins: golfyado (~golfyado@texto-plano.xyz)
[06:59:10] *** Joins: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca)
[06:59:10] * phy1729 runs Blondie101010 every minute
[06:59:21] *** Quits: luckiswithme (~luckiswit@149.167.139.151) (Quit: Konversation terminated!)
[06:59:22] * Blondie101010 crashes
[06:59:38] * golfyado crashes
[06:59:53] * golfyado explode*
[07:00:33] *** Quits: beco (~beco@2804:351c:dd01:b700:1b03:6b85:20d4:ad73) (Quit: Leaving)
[07:00:57] *** Quits: ominionx (~ominionx@172.58.136.5) (Read error: Connection reset by peer)
[07:01:56] *** Joins: masoudd_ (~masoudd@user/masoudd)
[07:03:15] *** Parts: Shungite (~u0_a327@c-24-99-76-58.hsd1.ga.comcast.net) ()
[07:03:57] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 240 seconds)
[07:04:03] *** Joins: ominionx (~ominionx@172.58.136.5)
[07:04:10] *** Joins: jos1 (~jos3@host-091-097-190-061.ewe-ip-backbone.de)
[07:05:53] *** Parts: loofy (~loofy@ip70-191-113-247.cl.ri.cox.net) (WeeChat 3.0)
[07:06:03] *** Joins: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com)
[07:06:40] *** Quits: golfyado (~golfyado@texto-plano.xyz) (Quit: leaving)
[07:09:21] *** Quits: TenochSLB (~Tenochyy@108-216-74-215.lightspeed.wchtks.sbcglobal.net) (Quit: Leaving)
[07:11:42] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[07:14:19] *** Quits: ominionx (~ominionx@172.58.136.5) (Quit: Leaving)
[07:17:39] *** Quits: kurahaupo_ (~kurahaupo@115.69.27.211) (Ping timeout: 256 seconds)
[07:17:51] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-22-55.pa.qld.optusnet.com.au)
[07:21:17] *** Quits: clime (~clime@37-48-57-231.nat.epc.tmcz.cz) (Ping timeout: 240 seconds)
[07:28:45] *** Joins: bn_work (uid268505@id-268505.uxbridge.irccloud.com)
[07:30:50] <bn_work> hi, bash 4.4, invoking a launcher bash script (that execs java) from a primary one with sudo -E to preserve the environment, but getting spammed with export lines, etc. from it despite setting set +x (not set -x), why?
[07:31:43] *** Quits: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de) (Quit: WeeChat 3.4)
[07:32:37] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 240 seconds)
[07:34:05] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 256 seconds)
[07:34:43] <bn_work> when I don't use -E , it is quieter, but obviously current env doesn't get passed in
[07:35:03] <Blondie101010> do you know what you're running?
[07:35:30] <Blondie101010> it sounds like you almost haven't seen it
[07:36:27] <Blondie101010> the base of troubleshooting is breaking things down
[07:36:35] <Blondie101010> make a *much* simpler test case
[07:37:06] <Blondie101010> one thing you could eliminate is sudo
[07:37:10] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:37:13] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[07:37:42] <Blondie101010> can you then cause the issue?  maybe by setting or unsetting some variables
[07:38:04] <bn_work> Blondie101010:  not sure what you mean "know what you're running"?  I've looked at the launcher script code, it eventually runs java, but normally the output is quieter, I am wondering if some bash shopt is perhaps triggering more verbose output?
[07:38:32] <Blondie101010> what outputs those lines?  is it a single java instance?
[07:39:00] <Blondie101010> you need to find out what is causing the issue
[07:39:42] <Blondie101010> does that program use the environment directly or do you pass it through command line parameters?
[07:39:58] <Blondie101010> like -D$someflag
[07:39:59] *** Quits: mandanguita (~mandangui@139.47.119.61) (Ping timeout: 256 seconds)
[07:40:01] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Client Quit)
[07:41:00] <bn_work> one of the lines is an a simple `export JAVA_OPTS="...."` in the wrapper launcher script (but it isn't deliberately echo-ing them), the other is from the actual launcher script
[07:41:29] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:41:49] <bn_work> s/an a/a simple/
[07:43:05] <Blondie101010> show that script up to that line
[07:43:14] <Blondie101010> then I'll ask your exact command line
[07:44:21] <Blondie101010> my first guess is that you didn't put a shebang
[07:49:36] <bn_work> it has a shebang, here are the shopts that seem to be set in that env that it's running in though https://www.irccloud.com/pastebin/PkQ2w0jJ/
[07:50:07] <Blondie101010> so you can't copy paste?
[07:50:20] <Blondie101010> I asked for the script that causes what you observed
[07:50:25] *** Joins: mrcoffee (~mago@user/mago)
[07:51:36] *** Joins: igemnace (~ian@user/igemnace)
[07:54:00] *** masoudd_ is now known as masoudd
[07:56:33] <bn_work> it's not that sophisticated, basically the output from L8 gets echoed, and the classpath from what L14 launches (I didn't write that, but I suspect some environment var is telling it to echo) https://www.irccloud.com/pastebin/tpSTuERg/launcher_script_sanitized.bash
[07:57:29] <Blondie101010> can you show the output it gives, at least up to the part where it shows the export?
[07:57:53] <Blondie101010> and why did you say it had a shebang when it doesn't?
[08:02:00] *** Joins: XV8 (~XV8@2601:5cb:c001:50:ac6c:2622:9107:8299)
[08:02:31] <larryv> fwiw that shopt output is basically as default as it gets. comparison to a clean bash-5.1.16: https://paste.wooledge.org/11405
[08:04:08] *** Quits: XV9 (~XV8@2601:5cb:c001:50:4d1d:eb87:5761:ea2c) (Ping timeout: 250 seconds)
[08:04:22] <bn_work> what the heck, I can't copy out of the terminal, vim keeps trying to select in it vs allowing normal mouse select?  :/ but I think I found what's causing it... https://www.irccloud.com/pastebin/wPt4DkpG/launcher_script.bash
[08:06:16] <bn_work> Blondie101010: sorry, that was my copy and paste fault, I'm on two machines, it _does_ have a shebang (just updated it), [it doesn't have an -x, if that's what you were wondering]
[08:09:02] <bn_work> I think I was wrong about the export, it's coming all from the actual launcher script (I thought it was my wrapper above but it's actually just echoing what it got from it)
[08:09:44] <bn_work> it's getting triggered because it sees a var named `verbose` (even though I have it set to false)
[08:11:36] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[08:11:48] <bn_work> thanks for confirming larryv !
[08:12:06] *** Quits: FluffyMask (~masque@user/fluffymask) (Quit: WeeChat 3.4)
[08:14:31] <cim> filename.sh
[08:20:04] <Blondie101010> that's what I meant by breaking it down
[08:20:10] <Blondie101010> keep going
[08:21:36] <Blondie101010> the word 'verbose' is not in your script
[08:25:13] <Blondie101010> bn_work:  and you could try to replace the export by an echo
[08:25:38] *** Joins: mandanguita (~mandangui@139.47.119.61)
[08:25:39] *** Quits: lemonsnicks (~lemonsnic@cpc159519-perr18-2-0-cust114.19-1.cable.virginm.net) (Ping timeout: 256 seconds)
[08:25:41] <Blondie101010> exit after
[08:27:24] *** Quits: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072) (Ping timeout: 276 seconds)
[08:27:40] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[08:27:51] <Blondie101010> function die() { echo "$1"; exit; }
[08:28:09] <bn_work> I just unset it before calling the wrapper launcher script and it seems to have solved the problem.  It was just an unfortunate case of the same var having meaning in this java app's launcher script
[08:28:47] <bn_work> I guess that's to be expected with names like "verbose" or "debug"
[08:34:09] *** Quits: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz) (Ping timeout: 256 seconds)
[08:34:58] *** Joins: ario (~ario@159.65.220.102)
[08:36:31] <phy1729> !die
[08:36:31] <greybot> command -v foo >/dev/null || die "please install the foo command" # Using a custom 'die' function from http://mywiki.wooledge.org/BashFAQ/101
[08:36:43] <phy1729> Should go to stderr and echo is evil
[08:37:30] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 250 seconds)
[08:38:11] *** Quits: malina (~malina@user/malina) (Remote host closed the connection)
[08:45:37] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[08:45:43] <bn_work> interesting name
[08:46:10] *** Quits: _mikey (~mikey@user/mikey/x-4335048) (Remote host closed the connection)
[08:46:16] <bn_work> PERL etymology? :)
[08:47:16] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[08:48:26] <senoraraton> How do I set it so that my bash alias doesn't get exported and used in other aliases?
[08:48:53] *** Quits: volgrim (~Volgrim@156-155-224-214.ip.internet.co.za) (Ping timeout: 256 seconds)
[08:48:56] <senoraraton> I have an alias ls="sl"  but it breaks all my other ls aliases. I want it to ONLY match on ls.
[08:49:01] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[08:52:07] *** Joins: _mikey (~mikey@user/mikey/x-4335048)
[08:52:10] <emanuele6> ls () { command sl "$@" ;}
[08:52:51] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-22-55.pa.qld.optusnet.com.au) (Ping timeout: 256 seconds)
[08:54:18] <senoraraton> That did not work. ll which is bound to ls still outputs sl
[08:55:59] <emanuele6> convert your other aliases to functions.
[08:56:23] <emanuele6> or at least use "command ls" instead of "ls" in your aliases.
[08:57:29] *** Quits: Seirdy0 (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[08:57:46] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[08:58:20] *** Joins: kurahaupo_ (~kurahaupo@115.69.27.211)
[08:58:30] *** Joins: michigan (uid507982@id-507982.ilkley.irccloud.com)
[08:58:42] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[09:00:31] <jimgray> emanuele6: ls () { command ...}    what is this called in Bash?
[09:00:48] <jimgray> looks like a function
[09:01:01] <larryv> it's called a function
[09:01:18] <jimgray> but why "command" keyword?
[09:01:31] <emanuele6> # help command
[09:01:32] <shbot> emanuele6: command: command [-pVv] command [arg ...] -- http://ix.io/aPI
[09:01:43] <larryv> command is a ... command
[09:01:49] *** Joins: volgrim (~Volgrim@156-155-224-214.ip.internet.co.za)
[09:02:03] <emanuele6> # type command [[
[09:02:04] <shbot> emanuele6: command is a shell builtin
[09:02:04] <shbot> emanuele6: [[ is a shell keyword
[09:03:41] <jimgray> ok, "command": suppressing  shell function lookup
[09:04:01] <jimgray> seems to erase conflicts with command in the same name
[09:05:45] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[09:06:39] <emanuele6> # ls () { printf .; ls ;}; ls
[09:06:51] <shbot> emanuele6: ................................................................................................................................................................................................................................................................................................................................................................................................................\
[09:06:51] <shbot> emanuele6: ................................................................................................................................................................................................................................................................................................................................................................................................................\
[09:06:51] <shbot> emanuele6: etc... ( http://ix.io/3OHw )
[09:07:00] <emanuele6> # ls () { printf .; command ls ;}; ls
[09:07:02] <shbot> emanuele6: .
[09:10:11] *** Quits: _mikey (~mikey@user/mikey/x-4335048) (Remote host closed the connection)
[09:10:46] <emanuele6> # alias ls='hello'; eval 'somefunc () { ls "$@" ;}'; declare -f somefunc | paste -s
[09:10:47] <shbot> emanuele6: somefunc ()     {           hello "$@"  }
[09:10:54] <emanuele6> # alias ls='hello'; eval 'somefunc () { command ls "$@" ;}'; declare -f somefunc | paste -s
[09:10:55] <shbot> emanuele6: somefunc ()     {           command ls "$@"     }
[09:11:08] *** Joins: _mikey (~mikey@user/mikey/x-4335048)
[09:11:25] <emanuele6> ( i have to use eval on shbot because aliases are normally only expanded from the next line )
[09:13:05] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[09:13:49] <kurahaupo> emanuele6: that nicely illustrates how aliases affect parsing but functions affect execution. (Both of course only after the definition itself has been executed.)
[09:14:34] *** Quits: ano (~ano@user/ano) (Remote host closed the connection)
[09:15:08] <emanuele6> aliases expand so if you use them in a function and change them later, the change will not apply
[09:16:42] <emanuele6> # alias ls='printf .'; eval 'somefunc () { ls "$@" ;}'; eval 'somefunc; ls'; alias ls='printf ,'; eval 'somefunc; ls'
[09:16:44] <shbot> emanuele6: ...,
[09:17:18] <emanuele6> # ls () { printf . ;}; eval 'somefunc () { ls "$@" ;}'; eval 'somefunc; ls'; ls () { printf , ;}; eval 'somefunc; ls'
[09:17:20] <shbot> emanuele6: ..,,
[09:17:35] <emanuele6> aliases are not great, functions are much better for most things
[09:17:43] <emanuele6> !alias
[09:17:43] <greybot> An alias is a small in-line command name text replacement. They are not commands and cannot take arguments. Only use aliases for expanding things like default command switches: alias l='ls -l'. For everything else, use a function instead: del() { mv -i -- "$@" ~/.trash; }
[09:19:43] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[09:20:03] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[09:20:32] *** Joins: ano (~ano@user/ano)
[09:20:44] <emanuele6> !aliases
[09:20:44] <greybot> Aliases suck. They don't work in scripts. They can't take arguments. They have special evil magical powers that break all expectations. See http://mywiki.wooledge.org/BashFAQ/080 for starters.
[09:21:31] <cim> aliases do take arguments when you use $@
[09:21:50] <kurahaupo> alias '[['='! [[' ; eval ' if [[ x = y || x = x ]] ; then echo YES ; else echo NO ; fi '
[09:21:56] <kurahaupo> # alias '[['='! [[' ; eval ' if [[ x = y || x = x ]] ; then echo YES ; else echo NO ; fi '
[09:21:58] <shbot> kurahaupo: NO
[09:22:24] <kurahaupo> (How to mess with expectations grandly)
[09:22:32] *** Quits: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca) (Quit: Leaving)
[09:22:36] *** Joins: malina (~malina@user/malina)
[09:22:45] <cim> did that bot execute that line
[09:23:11] <kurahaupo> # alias '[['='! [[' ; eval ' if [[ x != y || x = x ]] ; then echo x != y or x = x ; else echo x = y and x != x ; fi '
[09:23:12] <shbot> kurahaupo: x = y and x != x
[09:23:26] <cim> # var=test; echo "$test"
[09:23:28] <shbot> cim: no output
[09:23:31] <kurahaupo> see how the precedence gets messed up
[09:23:35] <cim> lol smart bot
[09:23:44] <kurahaupo> !imabot
[09:23:44] <greybot> I am only a software bot, programmed to hand out information. Talk to the person who last said something beginning with "!" before I spoke; that's the person who asked me to say something.
[09:23:50] <kurahaupo> # version
[09:23:51] <shbot> kurahaupo: bash: version: command not found
[09:23:54] <kurahaupo> # info
[09:23:55] <shbot> kurahaupo: bash: info: command not found
[09:23:59] <emanuele6> !shbot
[09:23:59] <greybot> shbot runs each session in a new VM as root. Feel free to play with the bot in #shbot, or query it directly. | Original: http://www.vidarholen.net/contents/evalbot/ | geirha's fork: https://gitlab.com/geirha/shbot | current triggers: /msg shbot triggers
[09:24:47] <cim> # echo test > somefile; cat < somefile
[09:24:48] <shbot> cim: test
[09:25:32] <larryv> cim: aliases don't take arguments, $@ or not. don't know where you get that idea.
[09:26:16] *** Joins: Betal_ (~Betal@user/betal)
[09:26:30] <cim> larryv: i guess it must be a zsh thing?
[09:26:36] <emanuele6> they just expand.
[09:27:08] <emanuele6> e.g. alias a1=VAR1=VALUE1      a1 VAR2=VALUE2 cmd
[09:27:23] <emanuele6> that runs    VAR1=VALUE1 VAR2=VALUE2 cmd
[09:27:25] *** Quits: Betal (~Betal@user/betal) (Ping timeout: 256 seconds)
[09:27:30] <kurahaupo> cim: as I said before, aliases replace the text before the command is fully parsed. The replacement may or may not leave any arguments in a sensible location.
[09:27:49] <emanuele6> that is not at all the same as   a1 () { VAR1=VALUE1 cmd "$@" ;}
[09:27:56] <emanuele6> err
[09:27:59] *** Quits: timj (~timj@user/timj) (Ping timeout: 256 seconds)
[09:27:59] <emanuele6> that is not at all the same as   a1 () { VAR1=VALUE1 "$@" ;}
[09:28:00] <cim> # ls -al
[09:28:03] <shbot> cim: total 8
[09:28:03] <shbot> cim: drwxrwxr-x  2 root root   0 Mar 21  2021 .
[09:28:03] <shbot> cim: etc... ( http://ix.io/3GLA )
[09:28:17] <emanuele6> was the -l really necessary? :)
[09:28:19] <emanuele6> # ls -a
[09:28:21] <shbot> emanuele6: .  ..  .bashrc  .mkshrc
[09:28:22] <cim> # id
[09:28:23] <shbot> cim: uid=0(root) gid=0(root) groups=0(root)
[09:28:27] <cim> oof
[09:28:30] <cim> it's running root lol
[09:28:42] <cim> # ls /
[09:28:44] <shbot> cim: bin  dev  etc  init  lib  lib64  proc  root  tmp  usr  var
[09:28:47] <emanuele6> #shbot
[09:28:52] <cim> # cat < /etc/os-release
[09:28:53] <shbot> cim: bash: /etc/os-release: No such file or directory
[09:29:00] <emanuele6> !shbot > cim  :)
[09:29:00] <greybot> cim  :): shbot runs each session in a new VM as root. Feel free to play with the bot in #shbot, or query it directly. | Original: http://www.vidarholen.net/contents/evalbot/ | geirha's fork: https://gitlab.com/geirha/shbot | current triggers: /msg shbot triggers
[09:29:27] <cim> # cat < /etc/passwd
[09:29:29] <shbot> cim: root:x:0:0:root:/root:/bin/bash
[09:30:01] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:30:51] <cim> # ls /etc
[09:30:52] <shbot> cim: group    ld.so.cache  nsswitch.conf  profile  terminfo
[09:30:52] <shbot> cim: inputrc  ld.so.conf   passwd         termcap
[09:30:56] <larryv> it'd be great if you could take this to #shbot. the bot is there as well
[09:31:01] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[09:31:16] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:31:22] <emanuele6> you can also private message the bot if you want
[09:31:23] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Ping timeout: 256 seconds)
[09:31:34] <cim> nah i'm stopping now lol
[09:31:57] *** Quits: Andrew (andrew@andrewyu.org) (Ping timeout: 240 seconds)
[09:35:17] *** Quits: Church (~aleph@pool-98-116-232-112.nycmny.fios.verizon.net) (Quit: WeeChat info:version)
[09:36:27] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[09:38:46] *** Joins: Church (~aleph@pool-98-116-232-112.nycmny.fios.verizon.net)
[09:42:47] *** Joins: timj (~timj@user/timj)
[09:44:20] *** Quits: dtux (~dtux@c-98-207-149-218.hsd1.ca.comcast.net) (Quit: dtux)
[09:45:44] *** Joins: skraito (~skraito@user/skraito)
[09:45:57] *** Quits: skraito (~skraito@user/skraito) (K-Lined)
[09:46:18] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[09:47:14] *** Quits: mrkajetanp (~mrkajetan@88.98.245.28) (Ping timeout: 260 seconds)
[09:47:58] *** Joins: mrkajetanp (~mrkajetan@88.98.245.28)
[09:49:00] *** Quits: larryv (~larryv@zsh/patchmanager/larryv) (Quit: larryv)
[09:49:33] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:50:02] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[09:53:27] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Remote host closed the connection)
[09:54:34] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[09:54:44] <ormaaj> !ormaajloop
[09:54:44] <greybot> # alias alias='alias ' eval='eval ' n='let "(n += 1) >= max" && ' count='printf "$n "; n alias count="printf \$(( (n -= 1) + 1))\ ;" n=; eval count count'; n=0 max=15 eval count echo
[09:54:46] <shbot> greybot: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
[09:55:05] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[09:56:34] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[09:57:57] <ormaaj> i had an argument / word list building example but not on the bot. can't find that one :/
[09:58:46] *** Quits: A|an (~Alan@173.218.175.171) (Quit: A|an)
[10:00:36] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:00:47] *** Joins: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca)
[10:01:53] *** Joins: momonster (~mo@ip1f105454.dynamic.kabel-deutschland.de)
[10:02:02] *** Joins: Atque (~Atque@user/atque)
[10:02:50] *** Quits: Atque (~Atque@user/atque) (Client Quit)
[10:04:54] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[10:05:36] *** Quits: momonster (~mo@ip1f105454.dynamic.kabel-deutschland.de) (Client Quit)
[10:06:01] *** Quits: ChmEarl (~chmearl@user/chmearl) (Remote host closed the connection)
[10:07:27] *** Joins: totenkoph (~scythe@user/totenkoph)
[10:08:34] <tercaL> Good morning everyone
[10:09:54] *** Joins: Atque (~Atque@user/atque)
[10:10:20] <mannequin> https://github.com/vlepy/abstract.sh/blob/main/abstract.sh
[10:10:28] <mannequin> so this is what i coded today
[10:10:49] <mannequin> i'm starting to make it more and more complex
[10:11:01] <mannequin> i think i'm taking a hike today with coding
[10:12:06] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[10:12:22] *** Quits: ncrowl (~ncrowl@c-fda770d5.022-170-6c756e3.cust.ownit.se) (Read error: Connection reset by peer)
[10:15:43] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Remote host closed the connection)
[10:16:00] <llua> looks horrible
[10:17:33] *** Joins: ncrowl (~ncrowl@c-fda770d5.022-170-6c756e3.cust.ownit.se)
[10:19:26] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:19:55] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:20:18] <mannequin> <3 i knew i can alway count on your support
[10:20:26] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:21:41] <llua> anytime
[10:22:21] <ormaaj> Are you reinventing user-dirs.dir
[10:22:41] <mannequin> i'
[10:22:48] <Blondie101010> mannequin:  you're forcing bash, so you might as well use [[ as suggested
[10:22:58] <mannequin> i'm making a script for our community that appreciates my abstract artwork
[10:23:28] <Blondie101010> no one else here will use that
[10:23:30] <mannequin> so their wallpapers change as soon as i get them online
[10:23:41] <mannequin> you're not my community
[10:23:52] <mannequin> brb soup
[10:23:54] <Blondie101010> which community?
[10:24:03] <mannequin> a community of people
[10:24:12] <Blondie101010> very clear
[10:24:35] <llua> they only care about his art, clearly not their code
[10:24:53] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[10:25:22] <mannequin> wow so mean
[10:26:31] <llua> welcome to the internet.
[10:26:52] <llua> we have tea on tuesdays
[10:26:55] <ormaaj> have seen worse
[10:27:00] <mannequin> welcome to the real world, cannon fodder
[10:30:45] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:30:55] *** Quits: akoana (~ah@user/akoana) (Quit: leaving)
[10:31:13] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:31:19] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Quit: WeeChat 3.4)
[10:31:34] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:33:06] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:33:11] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[10:33:40] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:34:13] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:34:39] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:35:12] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:35:47] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:36:33] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:36:38] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:37:20] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:37:35] *** Joins: callq (~callq@2409:4062:2e9e:2081:816d:3026:9fb1:625b)
[10:37:55] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 256 seconds)
[10:39:03] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[10:41:39] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[10:43:45] *** Joins: keypusher (keypusher@user/keypusher)
[10:49:25] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[10:49:33] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:50:05] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:50:35] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[10:51:22] *** Joins: DaNeenjah (~jake@adsl-74-230-9-40.hsv.bellsouth.net)
[10:54:57] *** Quits: kurahaupo_ (~kurahaupo@115.69.27.211) (Ping timeout: 240 seconds)
[10:55:50] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[10:56:18] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[11:00:00] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[11:00:09] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:00:15] *** Joins: unop (~unop@195.91.14.193)
[11:00:39] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:00:57] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:01:49] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:03:24] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:03:31] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:04:01] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:04:24] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:04:42] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[11:04:59] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Quit: Leaving)
[11:04:59] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:05:01] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[11:05:21] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:06:07] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:07:46] *** Quits: michigan (uid507982@id-507982.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[11:09:50] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[11:10:53] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[11:13:25] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:14:15] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:d154:b93f:c8:b39) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:15:01] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[11:15:38] *** Joins: unop (~unop@195.91.14.193)
[11:19:41] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:20:18] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:21:42] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[11:22:06] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:22:43] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[11:22:55] *** Joins: bluedust (~bluedust@117.193.122.44)
[11:23:42] *** Quits: Night-Shade (~Tim@ip1f11e523.dynamic.kabel-deutschland.de) (Read error: Connection reset by peer)
[11:24:09] *** Joins: makara (~makara@196.214.171.83)
[11:24:36] *** Joins: makara1 (~makara@196.214.171.83)
[11:25:47] *** Quits: reset (~reset@user/reset) (Quit: reset)
[11:25:59] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:26:43] *** Joins: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de)
[11:27:33] *** Quits: dreamon (~dreamon@p54b14d36.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[11:30:09] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[11:30:27] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:30:58] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:31:27] *** Joins: freep (~freepppp@46.246.189.172.dsl.dyn.forthnet.gr)
[11:31:33] *** Quits: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66) (Remote host closed the connection)
[11:31:44] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:32:03] *** Joins: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66)
[11:32:48] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:32:50] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:32:59] *** Quits: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[11:33:28] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:33:49] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:34:23] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:35:00] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[11:35:27] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:36:17] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Ping timeout: 256 seconds)
[11:36:40] *** Joins: chenqisu1 (~chenqisu1@183.217.200.249)
[11:40:01] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[11:42:39] *** Joins: yustin (~yustin@user/yustin)
[11:42:51] *** Joins: Natch (~natch@c-4db8e255.014-297-73746f25.bbcust.telenor.se)
[11:44:45] *** Joins: kurahaupo_ (~kurahaupo@115.69.27.211)
[11:45:07] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[11:50:59] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[11:52:43] *** Joins: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de)
[11:53:08] *** Joins: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de)
[11:55:17] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 240 seconds)
[11:56:45] *** Joins: rcernin (~rcernin@101.189.141.138)
[12:00:59] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:00:59] *** Quits: mrcoffee (~mago@user/mago) (Read error: Connection reset by peer)
[12:01:18] *** Joins: rendar (~rendar@user/rendar)
[12:01:35] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[12:01:47] *** Quits: mandanguita (~mandangui@139.47.119.61) (Ping timeout: 256 seconds)
[12:01:53] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:02:33] *** Joins: Atque (~Atque@user/atque)
[12:03:33] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[12:03:55] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:04:00] *** Joins: Lebela (~Lebela@85.187.219.215)
[12:04:04] <Lebela> hi
[12:04:19] <Lebela> https://dpaste.org/UBfh
[12:04:34] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:04:35] <Lebela> could anyone please tell me, why this simple -gt  fails?
[12:04:54] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:04:54] <Lebela> besides that,  this is also failing:
[12:04:55] <Blondie101010> please clarify "fails"
[12:04:58] <Lebela> if [ -z "$1" ] || [ -z "$2" ] || [ -z "$3" ]
[12:05:07] <Lebela> Blondie101010, I get "bbb" but I expected "aaa"
[12:05:08] <Blondie101010> one thing at a time
[12:05:35] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:05:46] *** Joins: lavaball (felix@31.204.155.215)
[12:05:57] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[12:06:43] *** Joins: mrcoffee (~mago@user/mago)
[12:06:57] *** Quits: callq (~callq@2409:4062:2e9e:2081:816d:3026:9fb1:625b) (Ping timeout: 240 seconds)
[12:07:10] <Lebela> Blondie101010, the variable is set to 1 and I am checking got -gt  (greater than)
[12:07:26] <Lebela> 1 == 1   so it is _not_ greater than 1  so it should be returning "aaa"
[12:08:26] <emanuele6> it is not greater than 1.
[12:08:34] <emanuele6> so it should be printing "bbb".
[12:09:16] <Lebela> what the hell was I thinking?
[12:09:23] <Lebela> emanuele6, I am sorry for bothering you with this.
[12:09:37] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 240 seconds)
[12:09:40] <Lebela> sorry that I did not see that
[12:10:02] <emanuele6> if you want greater than or equal, use -ge
[12:10:15] <emanuele6> or simply use (( instead of [[ and just do   (( foo >= 1 ))
[12:10:17] <Lebela> -gt was right,  I just totally misunderstood what I wrote there
[12:10:28] <emanuele6> !((
[12:10:28] <greybot> ((...)) is an arithmetic command, which returns an exit status of 0 if the expression is nonzero, or 1 if the expression is zero. Also used as a synonym for "let", if side effects (assignments) are needed. See http://mywiki.wooledge.org/ArithmeticExpression
[12:10:29] <Lebela> Do you, by any chance, know why  if [ -z "$1" ] || [ -z "$2" ] || [ -z "$3" ]   is failing?
[12:10:43] <Lebela> I want to throw an error if one of these variables is _not_ set
[12:10:45] <emanuele6> i don't know what failing means.
[12:10:55] <emanuele6> Lebela: you are not checking not set.
[12:11:22] <Lebela> -z  is _not_ set,  right?
[12:11:42] <emanuele6> no, it checks if the length of the variable is greater than 0.
[12:12:12] <emanuele6> and you are checking if either  $1 or $2 or $3 is not set or empty, do something.
[12:12:14] <Lebela> that would also work for me
[12:12:29] <emanuele6> but if you want to check set, why don't you just do that.
[12:12:44] <emanuele6> or just check $#
[12:12:53] <emanuele6> like   (( $# < 3 ))
[12:13:00] <Lebela> what is that?
[12:13:01] <emanuele6> if the number of arguments is less than 3.
[12:13:05] <emanuele6> !$#
[12:13:05] <greybot> $# expands to the number of arguments, not counting $0.
[12:13:11] <Lebela> oh, that is nice
[12:13:27] <Lebela> can I do this without (( ))  and with [[ ]] instead?
[12:13:35] <emanuele6> you can also use   [[ $# -lt 3 ]] if you want, but using [[ for maths is kind of silly
[12:13:52] <Lebela> thank you for that.
[12:14:03] <emanuele6> eitherway, [ -z "$1" ] || [ -z "$2" ] || [ -z "$3" ]  IS NOT the same.
[12:14:06] <Lebela> I would still love to figure out what went wrong with my initial idea
[12:14:16] <Lebela> because I will need similar setups for defined variables in the future
[12:15:08] <emanuele6> # f () [[ -z $1 || -z $2 || -z $3 ]]; if f '' a b; then echo yes; else echo no; fi
[12:15:09] <shbot> emanuele6: yes
[12:15:24] <emanuele6> # f () (( $# < 3 )); if f '' a b; then echo yes; else echo no; fi
[12:15:25] <shbot> emanuele6: no
[12:15:57] *** Quits: kurahaupo_ (~kurahaupo@115.69.27.211) (Ping timeout: 240 seconds)
[12:16:00] <emanuele6> $1 equal to empty string makes [[ -z $1 ]] true even though $1 is set.
[12:16:06] <Lebela> thank you, emanuele6
[12:16:17] <emanuele6> you can check actual set-ness using
[12:16:26] <emanuele6> [[ ${1+is_set} ]]
[12:16:41] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[12:16:47] <emanuele6> [[ ${1+x} ]], it doesn't matter what you put after `+', just put something longer than 0
[12:17:10] <emanuele6> # f () [[ ${1+is_set} || ${2+is_set} || ${3+is_set} ]]; if f '' a b; then echo yes; else echo no; fi
[12:17:12] <shbot> emanuele6: yes
[12:17:18] <emanuele6> # f () [[ ${1+is_set} || ${2+is_set} || ${3+is_set} ]]; if f '' a; then echo yes; else echo no; fi
[12:17:19] <shbot> emanuele6: yes
[12:17:21] <Lebela> why doesn't the word matter?
[12:17:28] <Lebela> why is is_set  as good as  x  ?
[12:17:54] <emanuele6> err, -z before those
[12:18:00] <emanuele6> # f () [[ -z ${1+is_set} || -z ${2+is_set} || -z ${3+is_set} ]]; if f '' a; then echo yes; else echo no; fi
[12:18:01] <shbot> emanuele6: yes
[12:18:34] <emanuele6> Lebela: because [[ $var ]] checks the length of $var, if it is more than 0, it is true.
[12:19:00] <emanuele6> and ${var+something} expands to empty if var is not set and to something if var is set to anything
[12:19:25] <Lebela> that is amazing.
[12:19:37] <Lebela> now you got me hooked, I want to learn more about shell scripting :)
[12:19:40] <emanuele6> # echo "\${a+x} is ${a+x}"; a=; echo "\${a+x} is ${a+x}"; a=hehe; echo "\${a+x} is ${a+x}"
[12:19:41] <shbot> emanuele6: ${a+x} is
[12:19:41] <shbot> emanuele6: ${a+x} is x
[12:19:42] <shbot> emanuele6: ${a+x} is x
[12:19:49] <Lebela> I will start with the wiki pages linked in the channel's topic
[12:20:24] <emanuele6> eitherway, just check $# to make sure you have been passed the right number of arguments in a function, no need to check setness.
[12:20:27] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:20:29] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:20:35] <Lebela> sure, will do so.
[12:20:36] <Lebela> Thank you!
[12:20:55] <Lebela> An other thing just crossed my mind, maybe you know...
[12:20:59] <emanuele6> !pe
[12:20:59] <greybot> Parameter Expansion expands parameters: "$foo", "$1". You can use it to perform string or array operations: "${file%.mp3}", "${0##*/}", "${files[@]: -4}". They should *always* be quoted. See: http://mywiki.wooledge.org/BashFAQ/073 and "Parameter Expansion" in man bash. Also see http://wiki.bash-hackers.org/syntax/pe.
[12:21:07] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:21:13] <Lebela> I am running a lot of commands in a shell script,  and sometimes,  something goes wrong.
[12:21:27] <Lebela> it's hard for me to tell what went wrong, if I am not sure, what commands really ran
[12:21:30] <Lebela> for example:
[12:21:31] <Lebela> ffmpeg -i "$1" -ss $2 -to $3 -c copy $output
[12:21:51] <Lebela> is there any way,  to run every command but additionally also print the plain-text command into a text file?
[12:22:03] <emanuele6> set -v
[12:22:05] <Lebela> so that my sample command above would be written out the way it was run  in a text file
[12:22:20] <emanuele6> also set -x
[12:22:31] <Lebela> does this put it all into a text file?
[12:22:34] <Lebela> kind of like a log?
[12:22:51] *** Quits: polve (~polve@user/polve) (Ping timeout: 256 seconds)
[12:23:18] <Blondie101010> only if you redirect your output
[12:23:39] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Ping timeout: 256 seconds)
[12:23:56] <emanuele6> # set -x; cmd () { output=j; true -i "$1" -ss "$2" -to "$3" -c copy "$output" ;}; var=xd; cmd "$var" y "$var.moon"
[12:24:02] <shbot> emanuele6: + var=xd
[12:24:02] <shbot> emanuele6: + cmd xd y xd.moon
[12:24:02] <shbot> emanuele6: etc... ( http://ix.io/3OI5 )
[12:24:12] <emanuele6> Lebela: quote $output.
[12:24:14] <Lebela> the problem is,  that ffmpeg writes a _lot_ of stuff into the shell
[12:24:21] <Lebela> so I would have a hard time finding the commands
[12:25:02] <Lebela> set -x  is really nice,  but I would rather have all the commands in a log file
[12:25:09] *** Joins: masoudd_ (~masoudd@user/masoudd)
[12:25:25] <Lebela> it's hard to bugfix why ffmpeg did something weird,  without being sure,  if all my variables really worked the way I hoped
[12:25:27] <emanuele6> exec {BASH_XTRACE_FD}>/that/file
[12:25:41] <emanuele6> err
[12:25:44] <emanuele6> exec {BASH_XTRACEFD}>/that/file
[12:26:09] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 256 seconds)
[12:26:09] <Lebela> is that the way I should run the script?  Or does this go on top of the script inside the script?
[12:26:10] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:26:37] <emanuele6> !faq logging
[12:26:37] <greybot> https://mywiki.wooledge.org/BashFAQ/106 -- Logging! I want to send all of my script's output to a log file. But I want to do it from inside the script. And I want to see it on the terminal too!
[12:27:03] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[12:27:03] <Lebela> hahaha,  this FAQ text is _literally_ what I want :))
[12:27:12] <Lebela> I am not the first one asking this, I suppose ^.^
[12:27:15] <Lebela> thank you emanuele6
[12:27:42] <emanuele6> if you want to write everything to a file, see that. if you want to just redirect set-x, just exec {BASH_XTRACEFD}>/that/file' somewhere before running `set -x'
[12:28:05] <emanuele6> s/just/& put `/
[12:28:10] <Lebela> emanuele6, I am trying it now
[12:28:11] <Lebela> brb
[12:29:00] *** Joins: polve (~polve@user/polve)
[12:29:27] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[12:30:15] <Lebela> emanuele6, https://dpaste.org/BJnM
[12:30:22] <Lebela> it works for me.  Is this what you had in mind?
[12:30:27] *** Quits: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca) (Ping timeout: 256 seconds)
[12:30:48] <emanuele6> no.
[12:30:50] <emanuele6> that is not valid
[12:30:52] <Lebela> I only get a little bit too much output
[12:30:53] <Lebela> https://dpaste.org/Q6kf
[12:30:56] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[12:31:05] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:31:11] *** Quits: masoudd_ (~masoudd@user/masoudd) (Remote host closed the connection)
[12:31:19] <emanuele6> i guess it works because `{var}>file' redirections linger.
[12:31:32] <emanuele6> Lebela: put   exec {BASH_XTRACEFD}>'log'
[12:32:00] <Lebela> now it does not work any more
[12:32:14] <Lebela> https://dpaste.org/05hk
[12:32:14] <emanuele6> define work.
[12:32:22] <Lebela> no more debugging outpiut
[12:32:22] <emanuele6> now it writes to log.
[12:32:26] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:32:32] <Lebela> sorry, yes
[12:32:36] <emanuele6> it is writing to log, not the terminal
[12:32:37] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:32:41] *** Joins: masoudd (~masoudd@user/masoudd)
[12:32:44] <Lebela> can I get rid of the useless stuff?
[12:32:51] <emanuele6> what useless stuff?
[12:32:58] <Lebela> + '[' -z a ']'
[12:32:59] <Lebela> + '[' -z b ']'
[12:32:59] <Lebela> + '[' -z c ']'
[12:32:59] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:33:11] <emanuele6> !set-x
[12:33:11] <greybot> set -x (or ''bash -x myscript'') makes bash output the exact command that it will run after parsing and expansion. You can put ''set -x'' just before the code you want to debug (turn off with ''set +x''). To add more information, change PS4 first: eg. PS4='+($?) $BASH_SOURCE:$FUNCNAME:$LINENO:'
[12:33:26] <emanuele6> run set -x where you need it, then set +x to stop it.
[12:33:36] <emanuele6> and stop using [ -z "$1" ] etc.
[12:33:39] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:33:40] <Lebela> god, one just have to love bash
[12:33:44] <Lebela> *has
[12:33:51] <Lebela> that is amazing
[12:33:54] <Lebela> thank you so much emanuele6
[12:34:05] <Lebela> you made me very happy today
[12:34:12] <Lebela> thank you
[12:34:15] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:34:25] <emanuele6> you are welcome
[12:34:55] <Lebela> Good night! :)
[12:34:59] *** Quits: Lebela (~Lebela@85.187.219.215) (Quit: Leaving)
[12:35:40] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:35:47] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Ping timeout: 256 seconds)
[12:38:21] *** Joins: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz)
[12:38:36] *** Joins: rcernin (~rcernin@101.189.141.138)
[12:39:25] <emanuele6> good night?
[12:39:37] *** Quits: volgrim (~Volgrim@156-155-224-214.ip.internet.co.za) (Ping timeout: 240 seconds)
[12:40:19] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[12:40:34] *** Joins: jabster28 (~jabster28@81.111.217.63)
[12:42:35] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[12:45:31] *** Joins: mowotter (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[12:46:42] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[12:48:21] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[12:50:02] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:50:32] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:51:13] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:51:32] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[12:52:09] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[12:53:07] *** Quits: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com) (Ping timeout: 256 seconds)
[12:53:39] *** Joins: hqdruxn08_ (~hqdruxn08@user/hqdruxn08)
[12:54:52] *** Quits: Lantizia (~Lantizia@195.62.201.126) (Changing host)
[12:54:52] *** Joins: Lantizia (~Lantizia@user/lantizia)
[12:56:30] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[12:56:46] *** Joins: bluedust_ (~bluedust@194.37.96.121)
[12:56:57] *** Quits: hqdruxn08 (~hqdruxn08@user/hqdruxn08) (Ping timeout: 240 seconds)
[12:57:56] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 250 seconds)
[12:58:51] *** Joins: ErayArch (~ErayArch@31.223.81.188)
[12:59:57] <ErayArch> Hi there, I have an dotfiles from Arch Linux and trying to implement that on OSX. In my script, I used `return` in a function. (`test -d "$2" || return`) But its make error: "command not found: return". When I check `which return` its say shell built-in command. Are there any suggestion or replacement of 'return'?
[12:59:57] *** Quits: bluedust (~bluedust@117.193.122.44) (Ping timeout: 240 seconds)
[13:00:16] *** Joins: bluedust (~bluedust@117.193.122.44)
[13:00:26] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[13:00:29] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[13:00:30] *** Joins: Lebela (~Lebela@85.187.219.215)
[13:00:32] <Lebela> hi again
[13:00:43] <Lebela> emanuele6, your command was a real life saver, now I know,  why my script failed
[13:00:50] <Lebela> I am trying to run ffmpeg with 0*pts
[13:00:57] *** Quits: N4buc0- (~N4buc0@189.58.131.84) (Ping timeout: 240 seconds)
[13:01:12] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:01:24] <Lebela> setpts=$((1/DEFINEDVALUE))*PTS
[13:01:37] <Lebela> is there anything wrong with this?   (that's a part of the ffmpeg command)
[13:01:50] <Lebela> DEFINEDVALUE is a variable I set
[13:01:52] <emanuele6> 1/something will never work in bash.
[13:02:02] <Lebela> oh
[13:02:04] <emanuele6> it's always 0
[13:02:10] <Lebela> 0.25*PTS would be 4x speed
[13:02:14] <Lebela> that is why I need to divide
[13:02:27] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:02:37] <Lebela> how can I achieve this?
[13:02:56] <emanuele6> you can only have integers.
[13:03:06] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:03:08] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:03:16] <emanuele6> use something like  0.$((100/DEFINEDVALUE))*PTS
[13:03:33] *** Quits: bluedust_ (~bluedust@194.37.96.121) (Ping timeout: 256 seconds)
[13:03:47] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:03:49] <tirnanog> ErayArch: firstly, in which file does this code reside?
[13:03:51] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:04:09] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:04:24] <Lebela> thank you for your help, again! @ emanuele6
[13:04:43] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:04:43] <emanuele6> err, not 0.$((100/DEFINEDVALUE))
[13:04:57] <ErayArch> tirnanog its inside a function of ~/.local/etc/sh/profile which symlinked by ~/.local/etc/zsh/.zprofile
[13:05:14] <Lebela> emanuele6, I am all ears
[13:05:15] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:06:34] <emanuele6> for what?
[13:07:35] <ErayArch> when I added `echo $(which return)` above to `test -d "$2" || return` in the script, its say "shell built-in command + command not found: return"
[13:07:52] <Lebela> emanuele6, you said  "err, not 0.$((100/DEFINEDVALUE))"
[13:08:01] <Lebela> emanuele6, so I thought you wanted to correct something
[13:08:08] <ErayArch> I think this issue related with OSX because I have no error in Arch Linux
[13:08:10] <tirnanog> ErayArch: in the event that you are sourcing it from zsh, be aware that this isn't a zsh support channel (there is #zsh for that). otherwise, please convey the code to a pastebin (termbin.com is as good a choice as any).
[13:08:11] *** Quits: chenqisu1 (~chenqisu1@183.217.200.249) (Ping timeout: 256 seconds)
[13:10:07] <emanuele6> i just meant that that is wrong since it only works for DEFINEDVALUE from 2 to 11.
[13:10:18] <emanuele6> err 2 to 10
[13:10:53] <emanuele6> use something like awk or bc for math instead.
[13:11:21] <Lebela> oh, good that you told me !
[13:11:22] <Lebela> thank you
[13:11:32] <Lebela> I am googling bc and awk now
[13:11:45] <emanuele6> setpts=$(awk -v v="$value" 'BEGIN { printf 2 1/v}')
[13:11:47] <emanuele6> oops
[13:12:17] <emanuele6> # value=40; setpts=$(awk -v v="$value" 'BEGIN { printf "0.%02f\n", 1/v}'); declare -p setpts
[13:12:19] <shbot> emanuele6: declare -- setpts="0.0.025000"
[13:12:29] <emanuele6> oops
[13:13:09] <emanuele6> # value=40; setpts=$(awk -v v="$value" 'BEGIN { printf "%.02f\n", 1/v}'); declare -p setpts
[13:13:10] <shbot> emanuele6: declare -- setpts="0.03"
[13:13:17] <ErayArch> tirnanog Thanks for information. btw, It's interesting, its fixed when I use `if`. I think its related with using pipe.
[13:13:20] *** Quits: Pall (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net) (Quit: Leaving)
[13:13:23] <emanuele6> alternatively
[13:13:35] *** Joins: Pall (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net)
[13:13:42] <Lebela> "bc" also does not like commas
[13:13:50] <Lebela> foo=`echo "1/2" | bc`
[13:13:55] <emanuele6> !`
[13:13:55] <greybot> The backquote (`) is used in the old-style command substitution, e.g. foo=`command`. The foo=$(command) syntax is recommended instead. Backslash handling inside $() is less surprising, and $() is easier to nest. See http://mywiki.wooledge.org/BashFAQ/082
[13:14:10] <emanuele6> Lebela: bc -l
[13:14:16] <emanuele6> # echo "1/2" | bc -l
[13:14:18] <shbot> emanuele6: .50000000000000000000
[13:14:24] <emanuele6> or,
[13:14:30] <emanuele6> # echo "scale=2; 1/2" | bc
[13:14:32] <shbot> emanuele6: .50
[13:14:39] <Lebela> let me try:
[13:14:43] <emanuele6> just use awk
[13:14:46] <tirnanog> ErayArch: which return is nonsense anyway. return _has_ to be builtin, by virtue of what it does. you're not going to find it as a binary.
[13:14:58] <emanuele6> to be bc is not that script friendly.
[13:15:11] <Lebela> awk is so powerful yet so scary
[13:15:42] <emanuele6> s/to be//
[13:16:07] *** Quits: dre (~dre@2001:8003:c932:c301:a9ae:c59a:a85f:47a7) (Ping timeout: 256 seconds)
[13:16:10] <Lebela> emanuele6, ok, I will use awk,  just because I believe you.
[13:16:19] <Lebela> can I just use the command 1:1  like you wrote it?
[13:16:21] <Lebela> # value=40; setpts=$(awk -v v="$value" 'BEGIN { printf "%.02f\n", 1/v}'); declare -p setpts
[13:16:23] <shbot> Lebela: declare -- setpts="0.03"
[13:17:05] <Lebela> this command is so scary
[13:17:44] <emanuele6> # value=40; setpts=$(awk -v v="$value" 'BEGIN { print 1/v }'); declare -p setpts
[13:17:45] <shbot> emanuele6: declare -- setpts="0.025"
[13:18:00] <emanuele6> you can just use `print 1/v' if you don't care about rounding the value..
[13:18:28] <Lebela> the 02f part is not even scary
[13:18:39] <ErayArch> tirnanog yes, I just tested for zprofile "script can see built-in return command or not" because of "load order". Btw, I still curious about this: https://termbin.com/vbny
[13:18:42] <Lebela> the scary part is,  where the calculation gets into the quotes and appended to setpts
[13:18:45] <Lebela> that's pure magic
[13:19:03] <emanuele6> Lebela: that is just declare -p.
[13:19:15] <emanuele6> # value=40; setpts=$(awk -v v="$value" 'BEGIN { print 1/v }'); echo "$setpts"
[13:19:17] <shbot> emanuele6: 0.025
[13:19:26] <emanuele6> # declare -p PWD
[13:19:28] <shbot> emanuele6: declare -x PWD="/root"
[13:19:32] <emanuele6> # echo "$PWD"
[13:19:34] <shbot> emanuele6: /root
[13:19:46] <emanuele6> # help declare
[13:19:47] <shbot> emanuele6: declare: declare [-aAfFgilnrtux] [-p] [name[=value] ...] -- http://ix.io/aPN
[13:19:59] <emanuele6> >   -p display the attributes and value of each NAME
[13:20:13] *** Joins: pyzozord (pyzozord@user/pyzozord)
[13:20:17] <Lebela> emanuele6, thank you
[13:20:20] <Lebela> the last command is nice :)
[13:20:20] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:20:24] <pyzozord> hey, can you help me improve my bpaste script? http://bpa.st/4FLA
[13:20:35] <pyzozord> it mostly works, but for some inputs it doesn't
[13:20:38] <emanuele6> it was just to show that setpts was being set.
[13:20:41] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:20:55] <tirnanog> ErayArch: regarding the second issue, there should be a space before ]
[13:21:17] <tirnanog> ErayArch: as for the first, can you please feed the whole thing to termbin.com without any prior editing or redaction?
[13:21:24] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:21:26] <tirnanog> nc termbin.com 9999 < /path/to/file
[13:21:39] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:22:00] *** Joins: voltron (~Adium@ip4d158509.dynamic.kabel-deutschland.de)
[13:22:20] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:23:09] <pyzozord> my bpaste script doesn't work for this input https://bpa.st/LDGA I don't know why
[13:23:19] <tirnanog> ErayArch: that is, produce a file that demonstrates the error mentioned then provide it verbatim. no copying/pasting and no editing.
[13:25:11] *** Joins: Night-Shade (~Tim@ip1f11e523.dynamic.kabel-deutschland.de)
[13:25:33] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[13:26:35] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[13:26:41] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:27:00] *** Quits: Betal_ (~Betal@user/betal) (Quit: WeeChat 3.4)
[13:27:24] <ErayArch> tirnanog right, I shouldn't edit when asking code related question. I don't know why but now my approach `test -d "$2" || return` works without error. Probably I mistypo first time and asked question here with fixing typo. My issue fixed
[13:27:28] *** Quits: StathisA (~StathisA@178-147-62-94.haap.nym.cosmote.net) (Quit: bb)
[13:27:40] <tirnanog> ErayArch: I'm going to go out on a limb and guess that there was a non-breaking space.
[13:27:53] *** Joins: StathisA (~StathisA@178-147-62-94.haap.nym.cosmote.net)
[13:28:51] <tirnanog> it is especially important to convey the code accurately in such cases (though one should anyway).
[13:29:40] *** Parts: voltron (~Adium@ip4d158509.dynamic.kabel-deutschland.de) ()
[13:29:52] *** Joins: namkeleser (~namkelese@124.188.192.57)
[13:29:56] <ErayArch> this was lesson for me. I can't re-produce same "command not found: return" error and now I don't know what is the first issue
[13:30:32] <tirnanog> pyzozord: it worked for me with the given input. in scripts, curl -s without both -S and -f isn't very helpful, as is ignoring the exit status value.
[13:30:41] <tirnanog> so I would suggest attending to that first.
[13:31:06] *** Joins: clime (~clime@37-48-57-231.nat.epc.tmcz.cz)
[13:31:08] <tirnanog> never use -s without -S unless hiding errors is your idea of a good time.
[13:31:08] <Lebela> Thank you again, emanuele6
[13:31:11] <Lebela> see you later!
[13:31:13] *** Parts: Lebela (~Lebela@85.187.219.215) (Leaving)
[13:32:10] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:32:16] <pyzozord> tirnanog: it messes up the request body, the server responds with 400
[13:32:25] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:33:06] <tirnanog> I thought it would be a bad response but I can't reproduce it here for that input.
[13:33:08] <geirha> ErayArch: my bet is you managed to type a non-breaking-space between || and return. That would lead to a  " return: command not found error"
[13:33:18] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:33:56] <tirnanog> pyzozord: does curl support "code=@-" or similar? you might be better off conveying it via the standard input anyway.
[13:33:58] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:34:10] <pyzozord> I tried code=@- but it didn't seem to work for me
[13:34:14] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:34:15] <tirnanog> I mean, without using a command substitution.
[13:34:54] <tirnanog> geirha: yes. it's always the mac users.
[13:34:57] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:35:10] *** Joins: jmew (~jmew@host-78-147-81-209.as13285.net)
[13:35:10] *** Quits: jmew (~jmew@host-78-147-81-209.as13285.net) (Changing host)
[13:35:10] *** Joins: jmew (~jmew@user/jmew)
[13:35:11] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:35:27] <geirha> To be fair, I also manage that typo with a default ubuntu setup
[13:35:57] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:36:09] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:36:10] <hsv> Can a sed script be run in its own right directly from the bash command line?  What would the #! line look like?
[13:36:27] <pyzozord> tirnanog: hmm, when I download that input and use my script on it it works too
[13:36:44] <pyzozord> but when I use the original file it doesn't
[13:36:51] <geirha> #!/usr/bin/sed -f
[13:36:55] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:38:03] *** Joins: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e)
[13:38:21] <hsv> Thanks that works, is it possible to combine with the -i flag?
[13:38:42] <tirnanog> pyzozord: try --data-urlencode "code@-"
[13:38:52] <geirha> kindof, but then it will only work on GNU/linux
[13:38:54] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[13:39:14] *** Joins: drd (~drd@2001:b07:6468:1782:1e9c:163f:3faa:8058)
[13:39:18] <tirnanog> pyzozord: also, how did you invoke your script in the case that it fails?
[13:39:32] <geirha> Also, I'd recommend against it as sed won't give you any feedback if the changes failed
[13:39:35] *** Quits: wwilliam (~afernande@user/wwilliam) (Ping timeout: 256 seconds)
[13:40:33] <hsv> it's a bit of a hack.
[13:40:41] * hsv tried #!/usr/bin/sed -i -f
[13:40:59] <hsv> /usr/bin/sed: -e expression #1, char 1: unknown command: `.'
[13:41:02] <pyzozord> tirnanog: don't think it worked
[13:41:06] *** Joins: ekathva (~ekathva@2001:999:53:cee3:97a6:75f6:a877:3ffd)
[13:41:08] <geirha> #!/usr/bin/env -S sed -i -f    which reliese on the GNU speicfic env -S and GNU speicific sed -i
[13:41:09] <tirnanog> pyzozord: ok, but what didn't work?
[13:41:14] <tirnanog> how are you invoking it?
[13:41:15] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 250 seconds)
[13:41:31] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[13:41:37] *** Quits: marshmallow (~marshmall@user/marshmallow) (Remote host closed the connection)
[13:42:02] <pyzozord> tirnanog: https://termbin.com/8kvz
[13:42:03] <checkbot> pyzozord: I think the problem is on line 9. This flag is used as a command name. Bad line break or missing [ .. ]? See 5 issues on https://shellcheck.net/?id=cb55922
[13:42:28] *** Joins: marshmallow (~marshmall@94.177.224.11)
[13:42:32] <tirnanog> pyzozord: that shows me the script but not how you are invoking it.
[13:42:49] <tirnanog> also, "code@-" does work.
[13:42:59] <pyzozord> tirnanog: cat ~/.config/procps/toprc | bpaste
[13:43:09] <tirnanog> ok. let me try that with your payload.
[13:44:06] <pyzozord> data@- doesn't seem to be working for me
[13:44:18] <tirnanog> oh. you can't comment in that way.
[13:44:26] <pyzozord> even with echo "hi" | bpaste
[13:44:42] <pyzozord> oh ok
[13:44:42] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Remote host closed the connection)
[13:44:49] <tirnanog> move the original --data-urlencode parameter - the one that you attempted to comment - outside of the command substitution.
[13:44:53] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[13:44:54] <tirnanog> then you should get better results.
[13:45:06] <pyzozord> indeed data@- works
[13:45:15] <tirnanog> good.
[13:45:20] <pyzozord> it works for echo "hi" | bpaste
[13:45:25] <pyzozord> but it still doesn't work for cat ~/.config/procps/toprc | bpaste
[13:45:29] <tirnanog> how odd.
[13:45:51] <pyzozord> but it does work for cat -vet ~/.config/procps/toprc | bpaste
[13:45:51] <Earnestly> bpaste might think it binary
[13:46:13] <Earnestly> Right, -v will solve that
[13:46:24] <tirnanog> I can't reproduce it though.
[13:46:28] <hsv> geirha: thanks, i see.  In that case i'll just redirect it to a tmp file and then rename it back to the original filename.
[13:46:29] <tirnanog> I used the exact same payload and got: https://bpa.st/WODQ
[13:46:32] <tirnanog> which is fine.
[13:46:37] *** Joins: tercaL (~tercaL@user/tercal)
[13:46:40] *** Quits: chomwitt (~chomwitt@2a02:587:dc07:dd00:12c3:7bff:fe6d:d374) (Remote host closed the connection)
[13:46:44] <geirha> hsv: yes, that's what I would do
[13:46:55] <pyzozord> here is cat -vet version of my toprc, maybe you can unvet it somehow? http://bpa.st/YWFQ
[13:47:02] <tirnanog> at this point, I don't even think it's a bug in your script.
[13:47:11] <pyzozord> unvetted it will be the input that breaks it
[13:47:35] *** Quits: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e) (Ping timeout: 252 seconds)
[13:47:53] <pyzozord> hmm, let me check if I can upload this file over web ui
[13:47:54] <tirnanog> if you have reason to believe the original paste wasn't accurate, run "nc termbin.com 9999 < toprc"
[13:47:57] <tirnanog> and I'll try it
[13:48:00] <Earnestly> I love how cargo-cult "vet" must be, considering e adds v as does t, so all that's needed is -et
[13:48:50] <pyzozord> I just read man cat and i fount these flags and I liked vet because it's easy to remember
[13:48:56] <pyzozord> I haven't read about it anywhere on the internet
[13:49:04] *** Joins: iomari891 (~iomari891@105.112.138.38)
[13:49:04] <tirnanog> just use a pastebin known not to meddle with the payload.
[13:49:13] <Earnestly> This is the solution
[13:49:16] <tirnanog> and without any discrete copying/pasting stage.
[13:49:26] <tirnanog> if you do so, I'll try it.
[13:49:28] *** Quits: ekathva (~ekathva@2001:999:53:cee3:97a6:75f6:a877:3ffd) (Quit: Leaving)
[13:49:37] <Earnestly> Remember when imgur was positioned as 'lightweight, simple, image host'
[13:49:48] <tirnanog> good lord.
[13:49:54] <hsv> apt install pastebinit
[13:50:03] <tirnanog> Earnestly: I didn't but the mere notion is risible at this point.
[13:50:29] <pyzozord> right now I did cat ~/.config/procps/toprc | xclip -se c and then pasted it into the bpaste.net web ui and I get this https://bpa.st/4HWQ
[13:50:31] <Earnestly> It once was, a sane alternative that had simple upload api (could be done with curl)
[13:50:35] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Remote host closed the connection)
[13:50:49] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:50:49] <geirha> !ix
[13:50:49] <greybot> Upload to http://ix.io from your terminal: <command> | curl -n -F 'f:1=<-' http://ix.io # or add a function to your .bashrc: ix() { curl -n -F 'f:1=<-' http://ix.io; } # examples: ix < file; command | ix
[13:50:50] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:50:57] *** Joins: fef (~thedawn@user/thedawn)
[13:51:18] <tirnanog> yes, please just use one of these. or termbin as was suggested.
[13:51:27] <tirnanog> that one has never let me down.
[13:51:30] <Earnestly> Can sympathise with bpaste, people have used these paste services to host malwares and such
[13:51:46] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:51:48] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:51:50] <pyzozord> I like bpaste because it has line numbering, very useful when discussing snippets
[13:51:56] <Earnestly> Seems like they accept web upload, but not curl.  Might be possible to use user-agent tricks to get around whatever they're using
[13:52:08] <Earnestly> pyzozord: ix has that, and syntax highlighting
[13:52:08] *** Quits: mowotter (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Read error: Connection reset by peer)
[13:52:10] <tirnanog> it's not useful when trying to reproduce an issue that may entail the byte sequence being perfectly conveyed to the other party.
[13:52:17] <tirnanog> and I'm losing patience.
[13:52:18] <geirha> pyzozord: so does ix
[13:52:25] <hsv> pyzozord: which os are you using?
[13:52:34] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:52:41] *** Joins: mowotter (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[13:52:54] <pyzozord> ubuntu
[13:52:55] <geirha> # seq 4
[13:52:58] <shbot> geirha: one
[13:52:58] <shbot> geirha: two
[13:52:58] <shbot> geirha: etc... ( http://ix.io/2oGw )
[13:53:00] <tirnanog> (beside, the 4HWQ payload worked for me)
[13:53:20] <geirha> add a / at the end and you get line numbers.  http://ix.io/2oGw/
[13:53:22] <hsv> pyzozord: sudo apt install pastebinit
[13:54:09] <geirha> I hope it doesn't use pastebin.com or ubutun's pastebin
[13:54:23] <pyzozord> ok thanks guys
[13:54:49] <tirnanog> geirha: -b [pastebin url] (default is distro-specific with a fallback to pastebin.com)
[13:54:51] <tirnanog> great.
[13:54:58] <geirha> gah, I type so many typos. I wonder if it's my fingers or if my keyboard is acting up
[13:55:55] <hsv> dunno, i'm on debian and it uses paste.debian.net ;)
[13:56:51] <tirnanog> in other words, there's no way to reason in advance which pastebin it will use. and, if it can't reach the one it's primed to use in a given distro, it will use pastebin.com, which is not ideal for this channel.
[13:57:09] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[13:57:25] *** Joins: masoudd_ (~masoudd@user/masoudd)
[13:57:44] <hsv> it can be configured if you don't like the default.
[13:57:45] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[13:57:54] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[13:57:55] *** Joins: wurstwasser (~frank.hol@2001:a61:34a7:b001:51d:7eb5:5b88:4b45)
[13:57:56] *** Quits: masoudd (~masoudd@user/masoudd) (Killed (NickServ (GHOST command used by masoudd_)))
[13:58:02] *** masoudd_ is now known as masoudd
[13:58:23] <geirha>     elif release == 'ubuntu':
[13:58:25] <geirha>         defaultPB = "paste.ubuntu.com"
[13:58:30] <tirnanog> yes, but I don't want to care, when there are several services that are known to do the job and depend upon tools that may well be available (curl, nc).
[13:58:34] <geirha> so that's bad advice
[13:58:46] <hsv> tirnanog: then don't use it.
[13:58:58] <tirnanog> I _know_ that termbin.com will give me the byte sequence. at least, it's never let me down in all the years I've been using it.
[13:59:13] <tirnanog> you can rest assured that I won't.
[13:59:14] <geirha> while paste.ubuntu.com isn't ad-ridden like pastebin.com, it doesn't expose the raw paste ... without authentication
[13:59:41] <tirnanog> geirha: also, demands that people log in to see the raw content. or used to.
[13:59:52] <geirha> yes, still does
[13:59:56] <tirnanog> horrible.
[14:00:27] <hsv> like the os.
[14:01:03] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:b4e8:6f53:6fdf:55e6)
[14:01:06] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[14:01:44] *** Parts: pyzozord (pyzozord@user/pyzozord) ()
[14:02:19] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[14:02:21] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[14:03:17] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[14:03:20] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[14:03:33] *** Quits: bluedust (~bluedust@117.193.122.44) (Remote host closed the connection)
[14:04:18] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[14:04:20] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[14:05:21] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[14:05:24] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Read error: Connection reset by peer)
[14:08:10] <malina> and smelly socks
[14:09:43] *** ChanServ sets mode: +o geirha
[14:09:46] *** geirha sets mode: +b-o N0ZY*!*N0ZY*@*$##fix_your_connection geirha
[14:12:42] *** Joins: wurstwasser_2 (~frank.hol@aftr-62-216-210-19.dynamic.mnet-online.de)
[14:13:14] *** Quits: timj (~timj@user/timj) (Remote host closed the connection)
[14:15:37] *** Quits: wurstwasser (~frank.hol@2001:a61:34a7:b001:51d:7eb5:5b88:4b45) (Ping timeout: 256 seconds)
[14:16:33] *** Quits: skered (~dereks@user/skered) (Ping timeout: 250 seconds)
[14:20:38] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[14:20:57] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[14:23:19] *** Joins: rcernin (~rcernin@101.189.141.138)
[14:23:30] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[14:24:21] *** Joins: skered (~dereks@user/skered)
[14:24:32] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[14:25:05] *** Joins: rendar (~rendar@user/rendar)
[14:27:11] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 256 seconds)
[14:28:17] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[14:28:52] *** Quits: igemnace (~ian@user/igemnace) (Quit: WeeChat 3.4)
[14:29:27] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[14:31:23] *** Joins: rcernin (~rcernin@101.189.141.138)
[14:33:51] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[14:36:29] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[14:38:58] *** Joins: kilitary (~kilitary@188.242.187.4)
[14:42:51] *** Joins: askall (~askall@41.217.33.105)
[14:44:11] *** Quits: Jong (~Jong@163.114.132.5) (Ping timeout: 256 seconds)
[14:44:40] *** Joins: beco (~beco@2804:351c:dd01:b700:1b03:6b85:20d4:ad73)
[14:44:47] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[14:48:52] *** Quits: Night-Shade (~Tim@ip1f11e523.dynamic.kabel-deutschland.de) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:49:00] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[14:49:44] *** Joins: Night-Shade (~Tim@ip1f11e523.dynamic.kabel-deutschland.de)
[14:50:14] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:c493:7ae9:a6a2:840e)
[14:56:22] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[14:58:40] *** Joins: vishal (~vishal@fedora/vishal)
[15:06:15] *** Quits: askall (~askall@41.217.33.105) (Quit: leaving)
[15:13:06] *** Quits: jabster28 (~jabster28@81.111.217.63) (Quit: ZNC 1.8.2 - https://znc.in)
[15:13:52] *** Joins: lavaball (felix@31.204.155.215)
[15:14:13] *** Quits: mowotter (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 256 seconds)
[15:14:32] *** Joins: Rohambili (uid528665@id-528665.ilkley.irccloud.com)
[15:16:03] *** Joins: jabster28_ (~jabster28@81.111.217.63)
[15:16:10] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[15:17:57] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Ping timeout: 256 seconds)
[15:18:57] *** Joins: kurahaupo_ (~kurahaupo@115.69.27.211)
[15:20:55] *** Quits: yustin (~yustin@user/yustin) (Ping timeout: 250 seconds)
[15:22:57] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[15:23:01] *** Joins: sinaowolabi_ (~SinaOwola@41.58.206.48)
[15:26:11] *** Joins: rcernin_ (~rcernin@101.189.141.138)
[15:26:41] *** Quits: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[15:26:57] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[15:29:17] *** micronnn is now known as micronn
[15:29:21] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:c493:7ae9:a6a2:840e) (Ping timeout: 250 seconds)
[15:31:15] *** Joins: pushqrdx (~pushqrdx@102.45.31.87)
[15:31:57] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[15:33:14] *** Quits: mongy (~mongy@user/mongy) (Quit: WeeChat 3.4)
[15:34:23] *** Quits: rcernin_ (~rcernin@101.189.141.138) (Ping timeout: 256 seconds)
[15:37:42] *** Joins: seninha (~seninha@user/seninha)
[15:39:06] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[15:43:34] <ormaaj> I don't suppose there's a convenient utility that does similar to python os.path.join?
[15:43:56] <ormaaj> !meta abspath
[15:43:56] <greybot> izabera 1418429757(2014-12-13) learn # abspath()(p=$1/; [[ $p = /* ]] || p=$PWD/$p; while [[ $p = */@(..|.|)/* ]]; do p=${p//\/.\//\/} p=${p//\/\//\/} p=${p/#\/..\//\/} p=${p/\/+([!\/])\/..\//\/}; done; [[ $p = / ]] || p=${p%/}; printf %s\\n "$p"); abspath a/b//c/./d/../e
[15:44:10] <Dan39> wow haha that's a hell of a function
[15:44:11] <ormaaj> looks interesting. needs comment
[15:44:34] *** Joins: lemonsnicks (~lemonsnic@cpc159519-perr18-2-0-cust114.19-1.cable.virginm.net)
[15:45:12] <Dan39> ormaaj: could just use python ;)
[15:45:49] *** Joins: mowotter (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[15:46:20] <ormaaj> slash stripping is mostly what i'm looking for but I have a few shared functions that get used with e.g. cygwin that end up getting maybe passed to cygpath and have to take care of leading // or file URIs or whatever other edge cases I haven't thought of.
[15:46:57] *** Quits: gjvc (~gjvc@user/gjvc) (Quit: leaving)
[15:47:15] *** Joins: gjvc (~gjvc@user/gjvc)
[15:47:48] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Ping timeout: 250 seconds)
[15:47:57] *** Joins: cusion (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[15:48:17] *** Quits: mowotter (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[15:48:46] <geirha> !geirhadirname
[15:48:46] <greybot> dirname() { case $1 in (*[!/]*/[!/]*) set -- "${1%/[!/]*}"; while [ "$1" != "$2" ]; do set -- "${1%/}" "$1"; done ;; (/*) set -- / ;; (*) set -- . ;; esac; printf '%s\n' "$1"; }
[15:48:58] *** Quits: gjvc (~gjvc@user/gjvc) (Client Quit)
[15:49:15] <Dan39> ormaaj: i can think of some sloppy kludge like to cd then check pwd... lol
[15:49:31] <Dan39> geirha: wtf is that... do these crazy functions actually work well!? haha
[15:49:46] <geirha> # dirname() { case $1 in (*[!/]*/[!/]*) set -- "${1%/[!/]*}"; while [ "$1" != "$2" ]; do set -- "${1%/}" "$1"; done ;; (/*) set -- / ;; (*) set -- . ;; esac; printf '%s\n' "$1"; } ; dirname ///foo////bar///baz.txt
[15:49:47] <shbot> geirha: ///foo////bar
[15:50:04] *** Joins: gjvc (~gjvc@user/gjvc)
[15:50:14] <geirha> oh, thought I remembered it stripping slashes, ah well
[15:50:18] <Dan39> $ cd /etc///X11///xinit/
[15:50:26] <Dan39> $ echo $PWD
[15:50:28] <Dan39> /etc/X11/xinit
[15:50:28] <geirha> it's a pure posix sh implementation of dirname
[15:50:40] <geirha> # dirname ///foo////bar///baz.txt
[15:50:40] *** Quits: kilitary (~kilitary@188.242.187.4) (Read error: Connection reset by peer)
[15:50:41] <shbot> geirha: ///foo////bar
[15:51:20] <tirnanog> os.path.join doesn't seem to do much anyway
[15:51:51] <Enissay> `grep -q "$(hostname)" /etc/hosts && echo "yes" || { echo "no" && echo "no" }` could someone help fix this expression ?
[15:52:03] <Enissay> curly braces causing issue
[15:52:34] <ormaaj2> .NET's Path.Join is what I really had in mind but figure that's lesser known round here :)
[15:52:34] <izabera> I kind of want to delete that abspath thing
[15:52:38] <izabera> It's silly
[15:52:50] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[15:52:57] <Dan39> it looks fun though
[15:53:11] <geirha> yeah, doesn't really strip any slashes. os.path.join('////foo////bar///', 'baz.txt')  ->  '////foo////bar///baz.txt'
[15:53:56] <Enissay> darn, it works with parenthesis instead... pfew
[15:54:04] <ormaaj2> I always forget the rules for when the trailing slash affects utilities too... like ln in particular
[15:54:05] <tirnanog> Enissay: { ...; } is the correct form. however ...
[15:54:09] <tirnanog> !&&|| > Enissay
[15:54:09] <greybot> Enissay: foo && bar || baz is not equivalent to 'if foo; then bar; else baz; fi'. In the former case, baz will happen if *either* foo *or* bar return false. In the latter case, baz will only trigger if foo returns false, regardless of the exit code for bar. See http://mywiki.wooledge.org/BashPitfalls
[15:54:37] *** Quits: malina (~malina@user/malina) (Ping timeout: 240 seconds)
[15:54:46] <Dan39> and i guess my example is pretty useless if the directory doesn't exist already haha
[15:56:08] <Enissay> tirnanog: yess, while preparing my reading my code I thought of it and decided to ignore it... Maybe I shouldnt.. .Thanks :-)
[15:56:44] <tirnanog> at any rate, I would not suggest spawning a subshell unless there is good cause - as parentheses will.
[15:57:07] <Dan39> couldn't sed replace multiple /'s pretty easily? or is using system bins avoided in #bash ? :P
[15:57:22] <tirnanog> don't even need sed.
[15:57:44] <Dan39> i was about to say that next
[15:57:47] <Dan39> haha
[15:58:03] <Dan39> i know bash has some regex and i believe substitution built in now
[15:58:10] <tirnanog> # path=//foo//bar; echo "${path//+(\/)/\/}"
[15:58:12] <shbot> tirnanog: /foo/bar
[15:58:36] *** Joins: yustin (~yustin@user/yustin)
[15:58:38] <Dan39> so join strings by extra slashes first, then remove them?
[15:58:40] <tirnanog> that's taking advantage of shbot already having enabled extglob, mind.
[15:59:03] <Dan39> sounds like a decent and easy solution
[16:00:17] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[16:00:21] <ormaaj> e.g. my bashrc uses lots of relative base paths like... `for compfile in {"${XDG_CONFIG_HOME:-${HOME}/.config}","${fsRoot%+(/)}/usr/share/bash-completion"}/bash_completion "${fsRoot%+(/)}/etc/bash_completion.d"/**; do`
[16:00:47] <ormaaj> I just figured out I can apparently use `realpath --relative-base` there
[16:02:46] <ormaaj> or... --relative-to
[16:03:27] <ormaaj> such gnu
[16:04:11] *** Joins: bluedust (~bluedust@117.193.122.44)
[16:08:57] *** Quits: bluedust (~bluedust@117.193.122.44) (Ping timeout: 240 seconds)
[16:11:19] *** Quits: ErayArch (~ErayArch@31.223.81.188) (Quit: Client closed)
[16:13:22] *** Quits: mannequin (uid453465@id-453465.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[16:14:35] *** Joins: user1 (~user@95.0.240.62)
[16:15:48] *** Joins: wwilliam (~afernande@63.240.73.102)
[16:15:48] *** Quits: wwilliam (~afernande@63.240.73.102) (Changing host)
[16:15:48] *** Joins: wwilliam (~afernande@user/wwilliam)
[16:16:27] *** Parts: user1 (~user@95.0.240.62) ()
[16:17:50] *** Joins: hlauk (~hlauk@176.33.108.116)
[16:21:11] *** Joins: zouhair (~zouhair@lnsm1-montreal02-142-119-49-188.internet.virginmobile.ca)
[16:23:22] *** Joins: rcernin_ (~rcernin@2001:8003:6803:db00:a947:2457:841d:ace4)
[16:25:07] *** Quits: bodicceaII (~bodiccea@user/bodiccea) (Read error: Connection reset by peer)
[16:26:04] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[16:27:37] <ormaaj> Oh fun there's a winepath tool too. Does less stuff than cygpath though. Forgot about that one.
[16:28:37] *** Quits: rcernin_ (~rcernin@2001:8003:6803:db00:a947:2457:841d:ace4) (Ping timeout: 240 seconds)
[16:30:15] *** Joins: rcernin_ (~rcernin@2001:8003:6803:db00:a947:2457:841d:ace4)
[16:33:18] *** Quits: hlauk (~hlauk@176.33.108.116) (Quit: Leaving)
[16:33:35] *** Joins: shred00 (~brian@2001:470:b038:0:90cc:a629:cf42:5877)
[16:35:01] *** Quits: rcernin_ (~rcernin@2001:8003:6803:db00:a947:2457:841d:ace4) (Ping timeout: 256 seconds)
[16:37:53] <shred00> using "caller" i can get the line number, function name and file that each frame in the callstack is at.  but when the "file" is "environment" such as when running a script inside a bash -c '', is there any way to get the contents of that "environment", such that I could extract (like sed could on a file) selected lines from it?
[16:42:17] *** Quits: polve (~polve@user/polve) (Ping timeout: 240 seconds)
[16:43:03] *** Quits: Philonous (~Philonous@user/philonous) (Quit: ZNC - https://znc.in)
[16:43:33] *** Joins: Philonous (~Philonous@user/philonous)
[16:43:37] *** Quits: sinaowolabi_ (~SinaOwola@41.58.206.48) (Ping timeout: 240 seconds)
[16:44:21] *** Quits: pushqrdx (~pushqrdx@102.45.31.87) (Remote host closed the connection)
[16:45:11] *** Quits: marshmallow (~marshmall@94.177.224.11) (Changing host)
[16:45:11] *** Joins: marshmallow (~marshmall@user/marshmallow)
[16:45:27] *** Joins: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8)
[16:46:05] *** Joins: polve (~polve@user/polve)
[16:49:19] *** Quits: curvv (~quetzlcoa@user/curvv) (Ping timeout: 250 seconds)
[16:50:00] *** Joins: curvv (~quetzlcoa@192-143-56-188.ip.airmobile.co.za)
[16:50:00] *** Quits: curvv (~quetzlcoa@192-143-56-188.ip.airmobile.co.za) (Changing host)
[16:50:00] *** Joins: curvv (~quetzlcoa@user/curvv)
[16:50:41] <shred00> clearly i am trying to write a stacktrace generation tool but want to include the contents of the line each frame is at from the script running.  which works fine when the file is a file of course.
[16:54:17] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 256 seconds)
[16:59:24] <tirnanog> enable xtrace and customize PS4, I suppose.
[16:59:31] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:178:7edf:7ae2:b6e7)
[16:59:31] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:178:7edf:7ae2:b6e7) (Changing host)
[16:59:31] *** Joins: skapata (~Skapata@user/skapata)
[17:00:05] *** Joins: zeden (~zeden@user/zeden)
[17:00:23] <ormaaj> shred00: Not exactly. When you run a script without passing a real file to bash it modifies certain things such as FUNCNAME and BASH_SOURCE. You can tell bash to serialize the AST for a given function using `typeset -p` but cannot access any pre-parsed state.
[17:03:35] <ormaaj> !calldepth
[17:03:35] <greybot> https://gist.github.com/4159235
[17:04:47] <ormaaj> Sort of related. Tries to work around parts of that by guessing how bash was invoked based on the state of those vars. It is probably not perfect in newer bash versions.
[17:05:41] *** Joins: rcernin_ (~rcernin@2001:8003:6803:db00:e8bd:53c1:8d09:96b5)
[17:06:31] <shred00> ormaaj: still trying to parse it, but is callDepth.bash some sort of backtracing implementation using FUNCNAME and BASH_SOURCE rather than using "caller"?
[17:07:20] <tirnanog> # PS4='+$LINENO:$FUNCNAME:$BASH_SOURCE: ' bash -xc $'f() { true; }\nf\n'
[17:07:21] <shbot> tirnanog: + f
[17:07:21] <shbot> tirnanog: + true
[17:07:38] *** Joins: rcernin (~rcernin@101.189.141.138)
[17:07:42] <ormaaj> It's nothing fancy. It literally just counts the stack depth but tries to compensate for the fact that FUNCNAME and BASH_SOURCE change depending on how bash was invoked.
[17:07:43] <tirnanog> hmm. not sure what the bot is doing there.
[17:10:17] *** Quits: rcernin_ (~rcernin@2001:8003:6803:db00:e8bd:53c1:8d09:96b5) (Ping timeout: 240 seconds)
[17:10:47] *** Joins: bluedust (~bluedust@117.193.122.44)
[17:12:25] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[17:13:32] <ormaaj> !learn funcname.ksh https://gist.github.com/ormaaj/12874b68acd06ee98b59
[17:13:32] <greybot> OK, ormaaj
[17:13:33] <checkbot> ormaaj: I think the problem is on line 5. Parameter expansions can't start with .. Double check syntax. See 5 issues on https://shellcheck.net/?id=cb68613
[17:14:08] <ormaaj> thanx checkbot!
[17:15:08] <emanuele6> checkbot doesn't know ksh :S
[17:15:23] *** Joins: touch-face (~touch-fac@117.176.106.101)
[17:16:48] *** Joins: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de)
[17:17:15] *** Parts: ikwyl6 (~ikwyl6@5.254.48.58) (WeeChat 3.4)
[17:17:30] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 250 seconds)
[17:17:57] *** Joins: mongy (~mongy@user/mongy)
[17:20:28] *** Joins: pushqrdx (~pushqrdx@102.45.31.87)
[17:21:05] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Quit: = "")
[17:21:32] <gjvc> ormaaj: in https://gist.github.com/ormaaj/0e51bb9c55ac1d6cbf25e8ad3a94fe7c on line 31 you backquote all the brackets rather than single- or double-quote the find expression -- whyso?
[17:21:50] *** Joins: bluedust_ (~bluedust@185.248.85.26)
[17:22:21] *** Joins: kilitary (~kilitary@188.68.215.221)
[17:24:18] *** Quits: Rohambili (uid528665@id-528665.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[17:25:18] *** Quits: bluedust (~bluedust@117.193.122.44) (Ping timeout: 250 seconds)
[17:27:47] *** Quits: pushqrdx (~pushqrdx@102.45.31.87) (Remote host closed the connection)
[17:27:47] <ormaaj> The operators need to be passed to the find expression as individual arguments. That's perfectly normal. Find doesn't parse anything. It only accepts an expression assembled from its args.
[17:27:54] *** Quits: rcernin (~rcernin@101.189.141.138) (Ping timeout: 250 seconds)
[17:28:24] <gjvc> of course, thank you
[17:28:50] *** Joins: ALowther (~igloo@107.115.230.131)
[17:29:00] <gjvc> i don't normally bracket expressions to find, so it appeared unfamiliar :-)
[17:29:15] <gjvc> "normally need to bracket"
[17:29:21] *** Joins: pushqrdx (~pushqrdx@102.45.31.87)
[17:31:03] <ormaaj> An earlier version of that function had a bug in which I field split the contents of `${chownUserGroup:+arg arg...}`. I thought you were asking about that and I accidentally pasted the old bug.
[17:31:17] *** Quits: kilitary (~kilitary@188.68.215.221) (Ping timeout: 240 seconds)
[17:34:00] *** Joins: sinaowolabi (~SinaOwola@41.58.54.71)
[17:34:38] *** Joins: dreamon (~dreamon@p54b14d36.dip0.t-ipconnect.de)
[17:34:47] *** Quits: ALowther (~igloo@107.115.230.131) (Remote host closed the connection)
[17:35:23] *** Joins: ALowther (~igloo@107.115.230.131)
[17:36:10] *** Joins: xx (~xx@user/xx)
[17:37:18] *** Joins: csm3105 (~csm3105@static-107-54-230-77.ipcom.comunitel.net)
[17:38:06] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[17:38:22] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[17:38:24] *** Quits: mrcoffee (~mago@user/mago) (Quit: WeeChat 2.8)
[17:39:07] *** Quits: csm3105 (~csm3105@static-107-54-230-77.ipcom.comunitel.net) (Client Quit)
[17:41:39] *** Quits: ALowther (~igloo@107.115.230.131) (Remote host closed the connection)
[17:42:09] *** Joins: bluedust (~bluedust@117.193.122.44)
[17:43:29] *** Quits: sinaowolabi (~SinaOwola@41.58.54.71) (Ping timeout: 256 seconds)
[17:45:11] *** Quits: bluedust_ (~bluedust@185.248.85.26) (Ping timeout: 256 seconds)
[17:48:32] *** Joins: callq (~callq@92.119.19.230)
[17:50:16] *** Joins: Everything (~Everythin@37.115.210.35)
[17:50:56] *** Joins: kilitary (~kilitary@188.68.215.221)
[17:51:28] *** Joins: Kruppt (~Kruppt@50-111-49-4.drhm.nc.frontiernet.net)
[17:56:33] *** Joins: sinaowolabi (~SinaOwola@160.152.117.90)
[18:03:05] *** Quits: kilitary (~kilitary@188.68.215.221) (Ping timeout: 256 seconds)
[18:03:47] *** Joins: MrCollinsGA (~MrCollins@38.21.140.217)
[18:05:57] *** Quits: sinaowolabi (~SinaOwola@160.152.117.90) (Ping timeout: 240 seconds)
[18:10:34] *** Quits: herjazz (~herjazz@p10513117-ipngn24101marunouchi.tokyo.ocn.ne.jp) (Quit: leaving)
[18:10:44] *** Joins: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8)
[18:13:38] <HelloShitty> Hello. I need a very small help wit my simple script, but I stuck. I want to send the argument list (arguments passed into the script via comman line) into another function and then use it to show a help menu saaying how to use the script. However, this argument list is empty when I try to use it inside this function I pass it to
[18:13:49] <HelloShitty> tis is the script
[18:13:51] <HelloShitty> https://gitlab.com/PsySc0rpi0n/howto-lukscontainer/-/blob/main/cryptoLuks.sh
[18:14:18] *** Joins: goldfish (~goldfish@user/goldfish)
[18:14:19] <HelloShitty> line 72 I save the argument list into a variable
[18:14:25] *** Quits: polve (~polve@user/polve) (Ping timeout: 256 seconds)
[18:14:38] <HelloShitty> and then, at line 77, I try to pass that variable into the function
[18:15:08] <HelloShitty> but when I try to use 1st item in the arrayn inside the show_help function, it is empty
[18:16:19] *** Quits: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[18:16:30] <HelloShitty> I want it to show the name of the script itself (and I already tried ${args[0]}, but it comes out empty too
[18:16:35] *** Quits: zer0bitz (~zer0bitz@2001:2003:f74d:b800:b4e8:6f53:6fdf:55e6) (Read error: Connection reset by peer)
[18:16:51] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:90d6:f3c8:741b:677a)
[18:18:07] *** Joins: flous (~undervolt@2a02:a213:2901:5c00:74b2:7e47:3255:db78)
[18:18:11] *** Joins: sinaowolabi (~SinaOwola@160.152.117.90)
[18:18:24] *** Quits: flous (~undervolt@2a02:a213:2901:5c00:74b2:7e47:3255:db78) (Client Quit)
[18:18:34] <ormaaj> numerous missing quotes
[18:18:39] *** Joins: martinus__ (~martin@111.27.202.77.rev.sfr.net)
[18:19:00] *** Joins: polve (~polve@user/polve)
[18:19:07] <Earnestly> # set -- 'a b c'; f() { a=($@); declare -p a; }; f "$@" # whoops
[18:19:08] <shbot> Earnestly: declare -a a=([0]="a" [1]="b" [2]="c")
[18:19:22] <Earnestly> HelloShitty: Use shellcheck
[18:20:24] <Earnestly> HelloShitty: (args=($@) is very broken, and unnecessary.  "$@" already exists, no need to give it a different name)
[18:20:55] <ormaaj> that too ^^
[18:23:01] <Earnestly> HelloShitty: shellcheck ought to be able to fix most the problems with this script, which are numerous
[18:24:17] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 240 seconds)
[18:24:23] <HelloShitty> there were only 4 or 5 double quote suggesitons
[18:24:34] <HelloShitty> I added them all but the outcome is the same
[18:25:17] <Earnestly> !check args=($@)
[18:25:17] <checkbot> Earnestly: Line 1: Quote to prevent word splitting/globbing, or split robustly with mapfile or read -a. Line 1: args appears unused. Verify use (or export if used externally). See https://shellcheck.net/?id=cb72917
[18:25:29] *** Quits: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de) (Quit: WeeChat 3.4)
[18:26:04] <HelloShitty> I fixed all those
[18:26:16] <HelloShitty> I'll update the script in gitlab link
[18:26:19] *** Quits: cliluw (~cliluw@47.147.73.223) (Ping timeout: 256 seconds)
[18:26:43] *** Joins: cliluw (~cliluw@47.147.73.223)
[18:26:54] <ormaaj> i don't quite follow all the return status stuff
[18:27:14] <ormaaj> i guess you hardcoded status 3 for testing or something
[18:27:17] *** Joins: mandanguita (~mandangui@139.47.119.61)
[18:27:27] *** Quits: luva (~luva@146.70.62.254) (Ping timeout: 256 seconds)
[18:27:41] <Earnestly> HelloShitty: Is that show_help supposed to print the name of the program before 'image_file.img ...\n'?
[18:28:27] *** Joins: luva (~luva@45.141.152.53)
[18:28:37] <HelloShitty> ormaaj: those returns are used to kind know which commands were executed and to be able to undo them in the inverse order!
[18:28:43] <HelloShitty> Earnestly: yes
[18:28:50] <HelloShitty> the script is now updated
[18:29:01] <Earnestly> HelloShitty: hardcode the name in the usage string, don't try to change it like this
[18:29:03] <HelloShitty> please refresh the link to get the code as it is now
[18:29:41] <HelloShitty> What you mean "don't try to change it like this"?
[18:29:50] *** Joins: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca)
[18:30:03] <Earnestly> HelloShitty: "$@" doesn't include the name of the script/file.  But please, forget this idea, don't use $0, don't use $BASH_SOURCE, don't make the name of your program dynamic or contingent on first argument to execve(3).  Hardcode it
[18:30:10] *** Joins: flous (~undervolt@2a02:a213:2901:5c00:74b2:7e47:3255:db78)
[18:30:21] <Earnestly> I.e. printf 'progname image_file.img container_name\n'
[18:30:30] <HelloShitty> I was trying to send the parameter list into show_help, so that I can use the parameters in that function
[18:30:31] *** Quits: przemoc (~przemoc@89-72-24-4.dynamic.chello.pl) (Ping timeout: 256 seconds)
[18:30:47] <HelloShitty> Why you suggest not using $0, etc?
[18:31:21] <Earnestly> HelloShitty: This isn't sending 'parameter list' into show_help, I'm not sure what parameter list is here
[18:31:26] *** Quits: flous (~undervolt@2a02:a213:2901:5c00:74b2:7e47:3255:db78) (Client Quit)
[18:31:55] <Earnestly> !$0 > HelloShitty
[18:31:55] <greybot> HelloShitty: $0 is like argv[0] in C. It's whatever the caller decides to put there. You can't rely on it. See http://mywiki.wooledge.org/BashFAQ/028 and http://www.bash-hackers.org/wiki/doku.php/scripting/posparams#the_first_argument
[18:32:00] <HelloShitty> If I change the name of the script file, I'll have to change the message in that function, while if I use the parameter list or an array with the parameter list, I can have it whatever it is, no?
[18:32:16] <Earnestly> Yes, do that.  If you change the name of the script, change it in the message
[18:32:24] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[18:32:48] <Earnestly> If you're planning on changing its name frequently, make a variable at the top like: progname=flavour-of-the-month and then use $progname in the message
[18:33:10] <HelloShitty> ok, what about sending the parameter list to oter functions?
[18:33:19] <HelloShitty> wait, let me test something
[18:33:29] <Earnestly> HelloShitty: function "$@"
[18:33:32] <Earnestly> No problem
[18:33:38] <Earnestly> You already do this
[18:34:57] *** Joins: vindex10 (~vindex10@gateway/tor-sasl/vindex10)
[18:35:46] <Earnestly> You even use $0 already in another different usage statement, lol
[18:36:17] <Earnestly> I like the old unix stuff, if you use it wrong it just prints usage at you to stderr
[18:36:28] <HelloShitty> oki
[18:36:36] <HelloShitty> I think it is doing what I want it to do
[18:36:43] <Earnestly> Don't know why you mix echo and printf either
[18:37:23] *** Quits: fef (~thedawn@user/thedawn) (Remote host closed the connection)
[18:37:48] <Earnestly> HelloShitty: Slight aside, but as a rule I tend to use -- for commands if I'm passing any expansions just to guard against them being interpreted as flags
[18:39:00] *** Joins: liveacoustic (~adison@user/liveacoustic)
[18:40:17] *** Quits: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca) (Read error: Connection reset by peer)
[18:40:39] *** Joins: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca)
[18:40:49] <HelloShitty> Earnestly: I was using echo all the way, but then I was suggested to use printf in the places where I was having issues
[18:40:56] <HelloShitty> so I replaced only on those lines
[18:41:02] <HelloShitty> but yes, I'll use printf only
[18:41:04] <Earnestly> HelloShitty: Also !a || !b || !c == !(a && b && c)
[18:41:25] <HelloShitty> oki :)
[18:41:36] <Earnestly> if ! [[ $a && $b && $c ]]
[18:42:15] <Earnestly> HelloShitty: But -r implies -e
[18:42:41] <Earnestly> And -f implies -e
[18:43:10] <HelloShitty> so I don't need -e ?
[18:43:22] <Earnestly> If you need it to be writable and file, then test -r and -f (or ! -d)
[18:43:54] <Earnestly> HelloShitty: -r already tests for file existance
[18:44:39] <HelloShitty> ok, I'm confused now and I have to go trough the 3 flags again because I started this script some time ago and I don't remember anymore
[18:46:23] *** Quits: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[18:48:53] *** Quits: namkeleser (~namkelese@124.188.192.57) (Quit: Client closed)
[18:48:59] *** Joins: vysn (~vysn@user/vysn)
[18:50:00] *** Joins: przemoc (~przemoc@user/przemoc)
[18:55:36] *** Joins: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de)
[18:56:19] *** Quits: touch-face (~touch-fac@117.176.106.101) (Quit: Ping timeout (120 seconds))
[19:01:01] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[19:11:19] *** Joins: fef (~thedawn@user/thedawn)
[19:19:12] *** Quits: vindex10 (~vindex10@gateway/tor-sasl/vindex10) (Quit: vindex10)
[19:21:31] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[19:22:33] *** Joins: touch-face (~touch-fac@117.176.106.101)
[19:33:45] *** Quits: touch-face (~touch-fac@117.176.106.101) (Ping timeout: 256 seconds)
[19:34:06] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[19:36:05] *** Quits: ka80 (~ka80@111.60.138.34.bc.googleusercontent.com) (Quit: Leaving)
[19:38:07] *** Quits: bluedust (~bluedust@117.193.122.44) (Remote host closed the connection)
[19:39:20] *** Quits: MercilessDeth (~brad@136.49.59.177) (Quit: Konversation terminated!)
[19:45:17] *** Quits: cusion (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 240 seconds)
[19:45:21] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[19:45:43] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[19:46:12] *** Quits: Murray7501 (~Murray@89.109-247-180.customer.lyse.net) (Remote host closed the connection)
[19:46:27] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[19:48:29] *** Quits: sinaowolabi (~SinaOwola@160.152.117.90) (Ping timeout: 256 seconds)
[19:50:27] *** Joins: mannequin (uid453465@id-453465.helmsley.irccloud.com)
[19:52:10] *** Quits: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de) (Quit: WeeChat 3.4)
[19:52:34] *** Joins: MercilessDeth (~brad@136.49.59.177)
[19:52:38] *** Joins: Murray7501 (~Murray@89.109-247-180.customer.lyse.net)
[19:55:54] *** Joins: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de)
[19:55:58] *** Joins: cusion (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[19:56:21] *** Joins: transhumanist (~steven@2601:196:8800:35f0:ab85:4468:267e:686a)
[19:57:23] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[19:58:18] <transhumanist> can anyone point me to a script that does this : https://bpa.st/XGNA sort of thing I can adapt for this type of config change, help is appreciated, thanks
[19:58:35] <transhumanist> I want to automate the process and can't quite do that because of this process
[19:59:22] <transhumanist> also I want to reboot a machine in middle of execution of a script. Is the easiest method to include two scripts (before and after reboot) and include these scripts in a third script?
[20:00:39] *** Quits: Murray7501 (~Murray@89.109-247-180.customer.lyse.net) (Quit: leaving)
[20:01:22] *** Joins: Murray7501 (~Murray@89.109-247-180.customer.lyse.net)
[20:01:38] <transhumanist> * and then execute the third script over ssh or something?
[20:03:12] *** Joins: wurstwasser (~frank.hol@2001:a61:34a7:b001:ab8f:159f:194c:e7f9)
[20:03:17] *** Joins: knstn (~knstn@ppp-94-66-57-191.home.otenet.gr)
[20:06:03] *** Quits: wurstwasser_2 (~frank.hol@aftr-62-216-210-19.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[20:06:23] *** Quits: mandanguita (~mandangui@139.47.119.61) (Ping timeout: 256 seconds)
[20:06:26] <gnoo> something like: sed 's,^User.*,User asterisk,' file ; grep '^User ' file || { printf '%s\n' 'User asterisk' >> file ; } ?
[20:09:11] <emanuele6> what is the sed command for?
[20:09:40] <gnoo> if User notasterisk exists, replace that with user asterisk
[20:09:54] <emanuele6> sed prints to stdout
[20:09:58] <gnoo> i think that's what the end was referring to
[20:10:00] <gnoo> oh right
[20:10:03] <gnoo> sed -i
[20:10:16] <emanuele6> why not ed?
[20:10:38] <emanuele6> also if you are going to use sed-i, why not do the appending directly in sed?
[20:10:41] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[20:10:59] * gnoo doesn't know enough sed to do that
[20:11:07] * gnoo will read the wiki now
[20:12:16] <emanuele6> it is a terrible idea to reconfigure a server by editing a config file automatically.
[20:13:18] <koollman> not really.It just need to be done carefully
[20:13:21] <Blondie101010> use templates
[20:13:53] <ormaaj> "infrastructure as code" is all the rage
[20:14:19] <Earnestly> ormaaj: This looks delightful https://github.com/oddlama/fora
[20:14:19] <emanuele6> koollman: editing a config automatically, and restarting the server with the edited configuration file?
[20:14:39] <emanuele6> you think that is a good idea?
[20:14:47] <Earnestly> postfix comes with a tool to do this, it's nice
[20:14:57] <koollman> emanuele6: absolutely
[20:15:05] <Earnestly> It's nice when tools provide ways to interact with their custom config DSLs
[20:15:10] <Blondie101010> emanuele6:  that depends on the deployment strategy...  with VMs it is very normal
[20:15:11] <emanuele6> koollman: ok, just wanted to be sure.
[20:15:28] <gnoo> can you really do 'check if a line exists, if it does then substitute and if not, do something else' with ed?
[20:15:29] <koollman> emanuele6: ansible, puppet, cfengine, salt, chef ... many tools provide ways to do that in a more or less sane way
[20:15:47] <emanuele6> koollman: now you are just changing topic
[20:15:47] <koollman> and, sure, you can do it with bash. Just have to be careful :)
[20:15:50] <emanuele6> but whatever
[20:16:01] *** Quits: cusion (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 250 seconds)
[20:16:05] <emanuele6> i don't care
[20:16:07] <koollman> emanuele6: how ? Don't they count as automatic ?
[20:16:33] <Blondie101010> make sure your template tags are EASY to identify!
[20:16:46] <koollman> in shell I would go for something a bit easier, and make sure I keep the old config file around in case I mess up
[20:16:57] <Blondie101010> you don't change 192.168.2.1 to the new IP, you change a tag
[20:17:04] *** Quits: Feuermagier_ (~Feuermagi@84.17.48.173) (Remote host closed the connection)
[20:17:23] *** Joins: Feuermagier_ (~Feuermagi@84.17.48.173)
[20:18:06] <Blondie101010> sed "s/__IP__/$ip/g"
[20:18:10] <transhumanist> yes this is for VM's on a host for a testing environment
[20:18:14] *** Quits: Feuermagier_ (~Feuermagi@84.17.48.173) (Client Quit)
[20:18:24] <transhumanist> thanks for the help Its appreciated
[20:18:37] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 240 seconds)
[20:18:54] <transhumanist> I am trying to add custom features to asterisk, to see if an idea I have works
[20:21:41] *** Joins: bluedust (~bluedust@117.193.122.44)
[20:21:41] *** Quits: bluedust (~bluedust@117.193.122.44) (Read error: Connection reset by peer)
[20:21:57] *** Joins: bluedust (~bluedust@117.193.122.44)
[20:22:25] *** Joins: dextercd (~dexter@2a02-a450-f25d-1-76d4-35ff-fefe-34c.fixed6.kpn.net)
[20:25:37] <transhumanist> gnoo so your saying the command is actually sed -i User.*,User asterisk,' file ; grep '^User ' file || { printf '%s\n' 'User asterisk' >> file ; }         ... just to clarify?
[20:25:50] <koollman> transhumanist: here's a bash example: https://dpaste.org/S7kO . It's probably too simple for corner-cases, but it should be ok as a basis. Also, you should test the validity of the config file you've edited with apache2ctl -t, or equivalents
[20:26:23] <transhumanist> ok thanks kooollman
[20:26:31] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[20:27:15] *** Joins: bluedust_ (~bluedust@117.217.146.23)
[20:27:16] *** Joins: sinaowolabi (~SinaOwola@160.152.117.90)
[20:27:43] <emanuele6> koollman: modification and generation are not the same thing.
[20:27:55] <koollman> generation is much easier, really :)
[20:27:57] *** Quits: bluedust (~bluedust@117.193.122.44) (Ping timeout: 240 seconds)
[20:28:03] <emanuele6> yes, and is not the same thing.
[20:28:28] <koollman> I'm not sure what you mean. this is an example of modification
[20:29:00] <emanuele6> <koollman > emanuele6: ansible, puppet, cfengine, salt, chef ... many tools provide ways to do that in a more or less sane way
[20:29:12] <emanuele6> <koollman > emanuele6: how ? Don't they count as automatic
[20:29:28] <emanuele6> you started talking of something else
[20:29:52] *** Joins: mandanguita (~mandangui@139.47.119.61)
[20:29:58] <koollman> emanuele6: right. They provide tools for generation, but also for modification. like puppet's file_line, or ansible lineinfile
[20:30:24] <Blondie101010> koollman:  generating configs is more effort which is not required in most cases...  templates are much simpler
[20:30:28] <koollman> and I would definitely use them other sed for anything complex enough. But two lines edit, well, maybe
[20:31:11] <koollman> Blondie101010: I know that. I'm just wondering what we are arguing about. someone asked how to do something, I provided a sed example, but pointed out that many tools could also be used for similar automation
[20:32:59] <Blondie101010> not arguing...  complementing
[20:33:34] *** Joins: whatever (~whatever@node-1w7jr9pnydl4vsz4quh1bv9h7.ipv6.telus.net)
[20:33:48] *** Parts: whatever (~whatever@node-1w7jr9pnydl4vsz4quh1bv9h7.ipv6.telus.net) ()
[20:34:29] <koollman> then I don't understand why talking about tools to ease up such automation is 'talking of something else' (granted, it's 'not bash' but I wouldn't advise to do 'larger' config management work in pure bash)
[20:35:29] <Blondie101010> I'd agree that it's better with Ansible and other solutions, but that is not a requirement
[20:36:34] <transhumanist> so on the second question of handling reboots, is a script that calls two scripts the best way for this (assuming you are setting and configuring a VM on a KVM host or is there something better?
[20:37:18] <Blondie101010> transhumanist:  what's the problem?  ssh $host shutdown -r # ?
[20:37:37] <koollman> then wait until the machine is available, and continue
[20:37:44] <transhumanist> ah ok
[20:37:46] *** Joins: dtux (~dtux@c-98-207-149-218.hsd1.ca.comcast.net)
[20:37:47] <transhumanist> that makes sense
[20:37:47] <Blondie101010> small ping loop
[20:37:53] <transhumanist> gotcha ok
[20:37:54] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[20:38:07] <koollman> (but that's exactly the kind of follow up question that make me point to ansible or others as alternatives that may avoid some suffering :) )
[20:38:49] <transhumanist> ya i have been meaning to learn ansible, but it seems very difficult, and the older I get the worse my attention span for reading...lol
[20:39:31] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[20:39:35] <Blondie101010> the learning curve is a bit steep
[20:39:58] <Blondie101010> but it's a nice tool
[20:40:14] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[20:40:29] <transhumanist> ok thanks Blondie101010
[20:41:48] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[20:41:50] <koollman> not *that* steep. You don't have to do everything with it at first. maybe just automate calling bash scripts, then as you learn more, see what you can rewrite using only ansible if and when it makes sense
[20:42:08] *** Joins: bluedust (~bluedust@194.37.96.153)
[20:42:22] <transhumanist> ok thanks
[20:42:32] <koollman> but it (or any similar tool) really saves some time once you start managing many machines or have complex systems piling up :)
[20:42:59] <transhumanist> I will learn it then
[20:43:15] *** Quits: Everything (~Everythin@37.115.210.35) (Quit: leaving)
[20:43:56] *** Joins: FluffyMask (~masque@user/fluffymask)
[20:44:19] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[20:44:45] *** Joins: emad (~emad@156.214.198.176)
[20:45:23] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[20:45:43] *** Quits: bluedust_ (~bluedust@117.217.146.23) (Ping timeout: 256 seconds)
[20:46:37] *** Quits: martinus__ (~martin@111.27.202.77.rev.sfr.net) (Ping timeout: 256 seconds)
[20:49:26] *** Quits: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com) (Quit: Ping timeout (120 seconds))
[20:49:47] *** Joins: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com)
[20:52:00] <transhumanist> how does ansible work with amazon and azure and rackspace clouds if I can ask, I was thinking of taking courses to specialize in management of these platforms? Or do they have their own management software layers ?
[20:54:24] <Blondie101010> https://letmegooglethat.com/?q=ansible+aws+modules
[20:54:55] <transhumanist> right good point Blondie101010 thanks
[20:55:18] *** Joins: zebrag (~chris@user/zebrag)
[20:56:54] *** Joins: bluedust_ (~bluedust@117.217.146.23)
[20:59:20] *** Joins: enoq (~enoq@194-208-178-35.lampert.tv)
[21:00:27] *** Quits: bluedust (~bluedust@194.37.96.153) (Ping timeout: 256 seconds)
[21:06:17] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 250 seconds)
[21:08:06] *** Quits: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de) (Remote host closed the connection)
[21:08:42] *** Joins: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de)
[21:09:41] *** Joins: Betal (~Betal@user/betal)
[21:18:22] *** Quits: omegatron (~some@p5b056436.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[21:21:39] *** Joins: cusion (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[21:23:15] *** Joins: kilitary (~kilitary@188.68.215.221)
[21:27:44] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:d154:b93f:c8:b39)
[21:31:15] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[21:34:58] *** Joins: wurstwasser_2 (~frank.hol@aftr-62-216-210-19.dynamic.mnet-online.de)
[21:36:11] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 245 seconds)
[21:37:37] *** Quits: wurstwasser (~frank.hol@2001:a61:34a7:b001:ab8f:159f:194c:e7f9) (Ping timeout: 256 seconds)
[21:40:49] <vancz> https://guide.bash.academy/commands/# " It does NOT. It sends FD 2's output to the stream FD 1 is connected to, which at the time is probably the terminal and not the file, because FD 1 hasn't been redirected yet."
[21:40:58] <vancz> I see what this is trying to tell me but I don't actually get it
[21:41:39] *** Quits: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca) (Remote host closed the connection)
[21:41:46] <emanuele6> !fdasvar
[21:41:59] <emanuele6> !fd2var
[21:41:59] <greybot> Try thinking of FDs as variables. Change > into = and >& into =$. 0=keyboard; 1=terminal; 2=logfile; command 2>&1 1>otherlog; does 2=$1 (so 2=terminal) and 1=otherlog. At the end, command's 0=keyboard, 1=otherlog and 2=terminal
[21:42:05] *** Joins: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca)
[21:43:10] <emanuele6> you have   keyboard; 1=terminal; 2=terminal initially, so 2>&1 sets 2=terminal (since 1=terminal) so it basically does nothing and the>myfiles.ls sets 1=myfiles.ls
[21:43:40] <emanuele6> and in the end you have  0=keyboard; 1=my_files.ls; 2=terminal  so only stdout actually goes to the file
[21:43:48] *** Joins: H3dn1ng (~H3dn1ng@185.213.154.238)
[21:43:49] <twkm> ewww.  terrible factoid.
[21:44:41] <emanuele6> if you put 2>&1 after >my_files.ls, then fd2 is actually a duplicate of the fd to my_files.ls
[21:44:50] <emanuele6> but yeah, the factoid is a bit misleading
[21:45:07] <emanuele6> >my_files.ls 2>my_files.ls   and   >my_files.ls 2>&1   are not the same
[21:49:22] *** Quits: Lantizia (~Lantizia@user/lantizia) (Remote host closed the connection)
[21:49:39] *** Joins: Lantizia (~Lantizia@195.62.201.126)
[21:49:56] *** Quits: Lantizia (~Lantizia@195.62.201.126) (Changing host)
[21:49:56] *** Joins: Lantizia (~Lantizia@user/lantizia)
[21:49:58] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[21:50:38] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[21:51:07] *** Quits: kilitary (~kilitary@188.68.215.221) (Ping timeout: 256 seconds)
[21:54:53] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 252 seconds)
[21:57:25] *** Joins: ferdna (~ferdna@user/ferdna)
[21:59:46] <vancz> is this backwards " 2>&1 sets 2=terminal (since 1=terminal) "
[22:00:05] <vancz> oh wait hm
[22:00:41] <vancz> "redirect 2 into 1" would indeed be read as "something something 2 = something something 1"
[22:00:49] <e36freak> you're not "redirecting 2 into 1"
[22:00:54] <e36freak> you're duplicating the file descriptor
[22:01:05] *** Quits: sinaowolabi (~SinaOwola@160.152.117.90) (Ping timeout: 256 seconds)
[22:01:06] <vancz> yeah i need to stare at this for another 10 minutes
[22:01:08] <e36freak> i like to think of it as "point stderr to where stdout is currently going"
[22:01:18] <vancz> maybe the easiest way to understand this would be reading the source lol
[22:01:24] <vancz> right
[22:01:25] <e36freak> it's just a dup2 call
[22:01:45] <emanuele6> you would need to read the linux kernel source code :D
[22:01:47] <e36freak> 2>&1 >file, "point stderr to where stdout is currently going", so 2 points to the terminal. then you point stdout to "file"
[22:02:05] <e36freak> with >file 2>&1, point stdout to file, then point stderr to where stdout is going, which is also file
[22:02:49] <e36freak> think of it more like a scalar assignment than a pointer though. once 2>&1 happens, they're not tied together, when 1 changes 2 doesn't follow it
[22:03:05] <e36freak> !fdvars
[22:03:09] <e36freak> !fdvar
[22:03:11] <e36freak> hm
[22:03:25] <emanuele6> !fd2var
[22:03:25] <greybot> Try thinking of FDs as variables. Change > into = and >& into =$. 0=keyboard; 1=terminal; 2=logfile; command 2>&1 1>otherlog; does 2=$1 (so 2=terminal) and 1=otherlog. At the end, command's 0=keyboard, 1=otherlog and 2=terminal
[22:03:30] <e36freak> that's the one
[22:03:36] <vancz> is this really complicated at all? i imagine its literally just changing which fd number a stream is currently using or something
[22:03:38] <e36freak> !learn fdvar #redirect fd2var
[22:03:38] <greybot> OK, e36freak
[22:03:39] <CrtxReavr> There a good guide for parsing dates & times from log entries?
[22:04:10] <e36freak> oh it was already factoided
[22:04:14] <llua> "if you have gnu date, use it" - llua
[22:04:18] <e36freak> lol
[22:04:30] <e36freak> i appreciate the self quote
[22:04:52] <e36freak> CrtxReavr: hugely dependent on the specific format used
[22:04:58] <e36freak> not an umbrella thing
[22:05:24] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[22:05:39] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[22:05:43] <znf> And probably bash is not the greatest thing you might want to do that in
[22:05:50] <znf> Not saying you can't, but...
[22:06:22] *** Joins: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8)
[22:06:53] <e36freak> vancz: i mean you can man dup2, that's all that's going on behind the scenes
[22:06:53] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[22:07:05] <e36freak> not terribly helpful without a working description of file descriptors to start with though
[22:07:12] <e36freak> a working understanding, rather
[22:07:26] <CrtxReavr> So. . . python has a datetime module, where you can use this sorta syntax: https://strftime.org/
[22:07:32] <e36freak> znf: i mean passing them all to gnu date isn't a terrible solution
[22:07:42] <e36freak> and gnu date can take a stream of date strings from stdin
[22:07:47] <e36freak> so you don't have to call it for every line
[22:08:01] <vancz> ok well i think i get it now
[22:08:05] *** Joins: sathylias (~sysadmin@modemcable136.173-130-66.mc.videotron.ca)
[22:08:06] <vancz> test me?
[22:08:08] <CrtxReavr> To parse dates/times, create a datetime object, do $stuff, then write dates/times in a different format.
[22:08:26] <znf> yeah, but depending on what you want to do with it... it really might be easier to do it in something else :)
[22:08:31] <e36freak> CrtxReavr: yeah you're not gonna be able to do something like that with bash
[22:08:32] <znf> but if all you got is bash
[22:08:37] <CrtxReavr> Gnue date(1) is it, eh?
[22:08:39] <e36freak> if you want python functionality, use python
[22:09:04] <CrtxReavr> Not a choice, in my current scenario.
[22:09:06] <koollman> you definitely can use date for that. it's probably not the best idea though
[22:09:17] <koollman> CrtxReavr: in which scenario are you so limited ?
[22:09:34] <koollman> the only kind I can think of ... I would rather write C than bash, really :)
[22:09:47] <emanuele6> !speed
[22:09:47] <greybot> If speed or performance is an issue, try #c
[22:10:16] <e36freak> lol
[22:10:28] <sathylias> Hello, I'm having an issue with the following line in a bash script.. ${MARK_DATAFILE:=$HOME/.mark}. When I run the script, I get bash: /home/sysadmin/.mark: Permission denied..
[22:10:38] <sathylias> Any ideas, it might be really dumb, I'm tired lol
[22:10:58] <CrtxReavr> ls -ld ~
[22:11:05] <emanuele6> sathylias: that is a parameter expansion so it expands to either the value of MARK_DATAFILE or $HOME/.mark
[22:11:29] <emanuele6> if you want to use ${var:=} to make an assignment use `:' to ignore the expanded value
[22:11:37] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 256 seconds)
[22:11:38] <emanuele6>  : "${MARK_DATAFILE:=$HOME/.mark}"
[22:11:42] <emanuele6> !:
[22:11:42] <greybot> : is a builtin identical to the 'true' builtin; they do nothing and have an exit status of 0
[22:11:44] <koollman> sathylias: this evaluates to /home/sysadmin/.mark, then execute it, and can't because not executable
[22:11:51] <e36freak> vancz: { foo 1>&2 2>&3-; } 3>&1
[22:12:14] <e36freak> what does it do
[22:12:18] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[22:12:28] <vancz> hold on a bit
[22:12:50] <emanuele6> hint:  2>&3- is short for 2>&3 3>&-
[22:12:51] <vancz> eh, should i know this or do i have to worry about evaluation order
[22:12:59] <e36freak> order matters
[22:13:16] <vancz> the order for a simple command matters but i dont know if the outer redirection happens first or the inner one...
[22:13:18] <e36freak> the 3>&1 in the outer scope happens first and affects everything within the { ...; }
[22:13:21] <e36freak> i'll give you that hint
[22:13:30] <vancz> though i think the outer one might have to happen first
[22:13:43] <emanuele6> yes, the outer happens first
[22:13:50] <vancz> it wouldnt make sense for the inner ones to happen first, because their environment must be set up by the time they happen
[22:13:54] <vancz> ok
[22:14:25] <vancz> right, i was familiar with the latter part of this, which should imply the frmer <e36freak> the 3>&1 in the outer scope happens first and affects everything within the { ...; }
[22:15:09] <e36freak> if you can figure out what that does without googling it you should have a good enough grasp of redirections for almost anything you'll encounter
[22:15:37] <sathylias> koolman: Yeah, why is it executing though..
[22:16:20] *** Quits: Masklin (~joel@h-155-4-23-152.A230.priv.bahnhof.se) (Ping timeout: 252 seconds)
[22:17:36] <koollman> sathylias: because that's what putting that on a line in a shell script does :)
[22:18:11] <koollman> sathylias: think about it the other way. if you put /home/sysadmin/.mark on a single line, wouldn't you expect the shell to treat it as a command to run ?
[22:19:12] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[22:20:38] <sathylias> koolman: Yep I would!
[22:21:13] <koollman> sathylias: it's exactly what this line of yours do. so that's what happen. ;)
[22:21:37] <vancz> well I had to check what >&- does but apparently its closing an fd. and [n]<&digit- is described as moving an fd.
[22:21:40] <sathylias> koolman: So, how can I define a variable that if not set, gets a default value..
[22:21:41] <vancz> be back in 20 minutes or so
[22:23:31] <sathylias> Ah, nevermind, I was being dumb as usual, thanks koolman :)
[22:24:13] *** Joins: mixfix41 (~sdenyninn@user/mixfix41)
[22:25:33] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[22:25:33] <emanuele6> vancz: note that   2<&1 2>&1 2<>&1    2<&- 2>&- 2<>&-   and   2>&3- 2<&3- 2<>&3- do the exact same thing
[22:26:00] <emanuele6> the only difference is that < and <> default to 0 as lhs and > defaults to 1 as lhs
[22:26:23] <emanuele6> so >&2  is the same as 1>&2   and <&2 or <>&2 is the same as 0>&2
[22:27:12] <emanuele6> actually   2<>&1 and 2<>&- and 2<>&3- are not valid in bash, so nevermind that :)
[22:27:27] <emanuele6> but 2<&1 2>&1 etc are the same
[22:29:22] *** Quits: Lantizia (~Lantizia@user/lantizia) (Remote host closed the connection)
[22:29:39] *** Joins: Lantizia (~Lantizia@195.62.201.126)
[22:29:42] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[22:29:58] *** Joins: unop (~unop@195.91.14.193)
[22:30:19] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 256 seconds)
[22:31:39] *** Quits: lmat (~Lmat@c-68-58-60-231.hsd1.in.comcast.net) (Quit: leaving)
[22:31:58] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[22:34:06] *** Joins: kilitary (~kilitary@82.148.25.66)
[22:34:52] *** Quits: Lantizia (~Lantizia@195.62.201.126) (Remote host closed the connection)
[22:35:09] *** Joins: Lantizia (~Lantizia@195.62.201.126)
[22:36:57] *** Quits: sathylias (~sysadmin@modemcable136.173-130-66.mc.videotron.ca) (Ping timeout: 240 seconds)
[22:38:15] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 276 seconds)
[22:38:36] *** Joins: forgotmynick (uid24625@id-24625.hampstead.irccloud.com)
[22:40:40] *** Joins: ChmEarl (~chmearl@user/chmearl)
[22:42:02] *** Quits: vysn (~vysn@user/vysn) (Quit: WeeChat 3.3)
[22:43:06] *** Joins: junebug (~junebug@2600:1700:3db0:2540:4fb9:6e37:792b:8bf0)
[22:46:55] *** Joins: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de)
[22:52:10] *** Quits: dtux (~dtux@c-98-207-149-218.hsd1.ca.comcast.net) (Quit: dtux)
[22:52:25] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 256 seconds)
[22:53:12] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[22:54:33] *** Joins: larryv (~larryv@zsh/patchmanager/larryv)
[22:57:49] <vancz> Ill get back to answering the question in a sec
[22:57:57] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Ping timeout: 240 seconds)
[22:58:04] <vancz> meanwhile, I've done everything except read the bash manual, and I'm starting to think it's about time I did that.
[22:58:21] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[22:59:35] <vancz> Moving File Descriptors
[22:59:35] <vancz>   The redirection operator [n]<&digit- moves the file descriptor digit to file descriptor n, or the standard input (file descriptor 0) if n is not specified.  digit is closed after being duplicated to n.
[22:59:36] <vancz>   Similarly, the redirection operator [n]>&digit- moves the file descriptor digit to file descriptor n, or the standard output (file descriptor 1) if n is not specified.
[22:59:58] <vancz> why doesnt the second operator close it? Other than that they seem to do the same thing?
[23:00:49] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[23:01:09] <geirha> they both do
[23:01:47] <vancz> also im not clear on the difference between 2>&3 and 2<&3
[23:01:53] <geirha> none
[23:01:55] <geirha> the only difference between the two is which n it defaults to
[23:01:57] *** Quits: cusion (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 256 seconds)
[23:02:10] <vancz> geirha: oh this looks like a documentation inconsistency
[23:02:34] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Max SendQ exceeded)
[23:02:38] <e36freak> conventionally < would be used for input descriptors, ones that a command is reading from
[23:02:41] <e36freak> and > is for output
[23:02:43] <vancz> for "[n]>&word" -> "If word evaluates to -, file descriptor n is closed. "
[23:02:59] <e36freak> correct
[23:03:06] <vancz> its just not mentioned in both for the "moving file descriptors" sections
[23:03:20] <vancz> thats kinda funky
[23:03:25] <e36freak> fwiw i've never used 2<&3
[23:03:44] <vancz> hm well ok these are actually two different things
[23:03:58] <e36freak> what are?
[23:04:00] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[23:04:21] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[23:04:24] <vancz> for a second i thought the moving file descriptors was treated as a special case of the duplicating file descriptors but its not
[23:04:39] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[23:04:45] <e36freak> 2>&3- is equivalent to 2>&3 3>&-, just shorter
[23:05:51] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Read error: Connection reset by peer)
[23:07:13] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[23:07:22] <e36freak> you can omit the - in my example and it'll do the same thing, i just added it for completeness
[23:07:57] *** Quits: travisghansen (~travisgha@192.74.130.86) (Ping timeout: 256 seconds)
[23:11:24] *** Joins: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net)
[23:11:37] *** Joins: reset (~reset@user/reset)
[23:18:20] *** Joins: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e)
[23:20:46] *** Joins: travisghansen (~travisgha@192.74.130.86)
[23:21:02] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[23:24:12] <CrtxReavr> more of a grep question, but if a filename has a yyyy-mm-dd date embeded in it, how do I best capture year, month, & day to a variable?
[23:24:32] *** Joins: omegatron (~some@p5b056cb8.dip0.t-ipconnect.de)
[23:24:40] *** Joins: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com)
[23:28:39] *** Joins: crashrep (~crashrep@user/crashrep)
[23:28:49] <neshpion> you can try `thing=$(grep -o '[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}')`
[23:30:46] <twkm> [[ is easier.
[23:31:44] *** Joins: akoana (~ah@user/akoana)
[23:32:01] <CrtxReavr> Elaborate?
[23:32:05] <tangy> if the date code is delimited with some odd character then you can use a parameter expansion x=foo_2022-02-06 x="${x#*_}"
[23:32:17] <larryv> # file=whatever-2022-02-05; if [[ $file =~ ([0-9]{4})-([0-9]{2})-([0-9]{2}) ]]; then declare -p BASH_REMATCH; fi
[23:32:18] <shbot> larryv: declare -a BASH_REMATCH=([0]="2022-02-05" [1]="2022" [2]="02" [3]="05")
[23:32:37] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:d154:b93f:c8:b39) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:32:44] <larryv> (adjust to taste)
[23:34:21] *** Quits: roadie (~user@2a02:8108:5a40:1d87:4cf6:32a3:8212:d97e) (Remote host closed the connection)
[23:34:55] *** Quits: crashrep (~crashrep@user/crashrep) (Remote host closed the connection)
[23:35:16] *** Joins: crashrep (~crashrep@user/crashrep)
[23:35:33] *** Joins: rgrinberg (~textual@2806:101e:7:6bed:d154:b93f:c8:b39)
[23:36:11] *** Joins: aramtsamtsam (~Thunderbi@2001:861:388a:5600:1710:c3dc:c776:df35)
[23:37:16] *** Quits: aramtsamtsam (~Thunderbi@2001:861:388a:5600:1710:c3dc:c776:df35) (Client Quit)
[23:38:10] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[23:38:52] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[23:40:04] <CrtxReavr> larryv, I'm not familiar wtih this declare command, but it's doing all sorts of crazy shit.
[23:40:49] *** Quits: rwp (~invalid@havoc.proulx.com) (Ping timeout: 256 seconds)
[23:41:10] <CrtxReavr> https://bpa.st/FQTQ
[23:42:15] <larryv> "declare -p" is just printing the contents of the BASH_REMATCH array there. the array is populated by [[ x =~ re ]] presumably you actually intend to do something with its contents
[23:42:20] <CrtxReavr> But it appears to be dumping the entire environment: https://bpa.st/E52A
[23:42:36] *** Quits: iomari891 (~iomari891@105.112.138.38) (Quit: WeeChat 3.3)
[23:43:06] <emanuele6> !faq 1
[23:43:06] <greybot> https://mywiki.wooledge.org/BashFAQ/001 -- How can I read a file (data stream, variable) line-by-line (and/or field-by-field)?
[23:43:19] *** Quits: jabster28_ (~jabster28@81.111.217.63) (Ping timeout: 256 seconds)
[23:43:40] <larryv> CrtxReavr: okay well you can see BASH_REMATCH in that output, so you can just use it
[23:45:25] <CrtxReavr> Yes, I see: declare -ar BASH_REMATCH='([0]="2021-01-01" [1]="2021" [2]="01" [3]="01")'
[23:45:34] <larryv> !bash_rematch
[23:45:34] <greybot> The =~ operator of [[ evaluates the left hand string against the right hand ERE (see <ere>, <regex>). After a successful match, the BASH_REMATCH array contains the matched string and subexpressions (if any). Any quoted characters in the ERE become literal. Best to put the whole ERE in a variable: [[ $string =~ $regex ]]
[23:46:19] <CrtxReavr> But I'm unsure how boil it down to just that, then use the  specific year, month & day as a variable.
[23:47:15] <larryv> "${BASH_REMATCH[1]}" is the year, [2] is the month, [3] is the day
[23:47:37] <emanuele6> !faq array
[23:47:37] <greybot> https://mywiki.wooledge.org/BashFAQ/005 -- How can I use array variables?
[23:48:59] <CrtxReavr> I'm still lost on the step in between.
[23:49:07] <neshpion> which step?
[23:49:13] <emanuele6> what step in between?
[23:49:42] <emanuele6> # whatever-2022-02-05; if [[ $file =~ ([0-9]{4})-([0-9]{2})-([0-9]{2}) ]]; then printf 'year is %s\n' "${BASH_REMATCH[1]}"; fi
[23:49:44] <shbot> emanuele6: bash: whatever-2022-02-05: command not found
[23:49:46] <emanuele6> err
[23:49:50] <emanuele6> # file=whatever-2022-02-05; if [[ $file =~ ([0-9]{4})-([0-9]{2})-([0-9]{2}) ]]; then printf 'year is %s\n' "${BASH_REMATCH[1]}"; fi
[23:49:51] <shbot> emanuele6: year is 2022
[23:50:50] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[23:52:35] *** Quits: kilitary (~kilitary@82.148.25.66) (Ping timeout: 252 seconds)
[23:53:05] *** Quits: k8yun (~k8yun@198-48-158-40.cpe.pppoe.ca) (Quit: Leaving)
[23:53:48] *** Joins: Malin (~CIA@pirate.pt)
[23:53:52] *** Quits: Lantizia (~Lantizia@195.62.201.126) (Remote host closed the connection)
[23:54:09] *** Joins: Lantizia (~Lantizia@195.62.201.126)
[23:55:57] *** Joins: et_ (~et@user/et)
[23:56:26] *** Quits: et (~et@user/et) (Ping timeout: 252 seconds)
[23:56:28] *** et_ is now known as et
[23:56:53] <CrtxReavr> Okay. . . thanks larryv & emanuele6 - that got me there.
[23:57:44] *** Joins: rwp (~invalid@havoc.proulx.com)
[23:58:03] *** Quits: rgrinberg (~textual@2806:101e:7:6bed:d154:b93f:c8:b39) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:58:23] <vancz> my irc client craped out for a bit there
[23:58:59] * emanuele6 managed to not get called an asshole by CrtxReavr. yay :D
