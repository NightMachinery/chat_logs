[00:02:45] <FromDiscord> <leorize> you might have to write a custom serializer
[00:05:35] <FromDiscord> <Elegantbeef> leorize do you have an `unpackIt` equivlent?
[00:06:41] <FromDiscord> <Elegantbeef> Just curious as it'd help the Nim -\> json side
[00:06:55] <FromDiscord> <Elegantbeef> also assume you remember what my unpackit did
[00:06:55] <FromDiscord> <leorize> not atm
[00:07:07] <FromDiscord> <leorize> please pr one \:)
[00:07:33] <FromDiscord> <leorize> I'm crunching nim-sys so it will take a bit before I can get back to union
[00:07:47] <FromDiscord> <leorize> there's still a lot of ergonomics that has to be solved \:(
[00:08:11] <FromDiscord> <Elegantbeef> Yea i may make the PR, but idk still trying to get the nimVM to work in wasm
[00:51:01] <FromDiscord> <tandy> Dam
[01:13:53] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Ping timeout: 264 seconds)
[01:29:55] *** Joins: rockcavera (~rc@192.12.113.196)
[01:29:56] *** Quits: rockcavera (~rc@192.12.113.196) (Changing host)
[01:29:56] *** Joins: rockcavera (~rc@user/rockcavera)
[01:39:54] <nrds> <06Prestige99> Hey impbox, you around? Running into a weird issue with chipmunk's body userData property. I may have bound it incorrectly, or something. If you look here: https://git.einheit.tech/EinheitTechnologies/shade/src/branch/example/platformer/src/shadepkg/game/physicsbody.nim#L73
[01:40:34] <nrds> <06Prestige99> I'm assigning it to the object's address, and want to use it later, but it seems that's actually unsafe (I believe the address must change)
[01:40:56] <FromDiscord> <impbox [ftsf]> Are they ref objects?
[01:41:02] <nrds> <06Prestige99> Yes
[01:41:08] <FromDiscord> <impbox [ftsf]> refObj[].addr i think
[01:41:24] <nrds> <06Prestige99> the parent here https://git.einheit.tech/EinheitTechnologies/shade/src/branch/example/platformer/src/shadepkg/game/physicsbody.nim#L107 is not nil, but when I try to access it, I get an illegal store access error
[01:41:27] <FromDiscord> <impbox [ftsf]> But I'm not 100% sure
[01:41:27] <nrds> <06Prestige99> ok I'll try that
[01:41:57] <nrds> <06Prestige99> ah same issue, yeah
[01:45:05] <nrds> <06Prestige99> Wonder if this is a bug
[01:53:31] <FromDiscord> <Elegantbeef> Impbox i've found exactly where the NimVm feels like stop working!
[01:53:34] <FromDiscord> <Elegantbeef> Though it's fucking unclear how
[01:58:56] <FromDiscord> <impbox [ftsf]> \o/
[01:59:02] <FromDiscord> <impbox [ftsf]> Progress
[02:02:17] <nrds> <06Prestige99> Not sure why the addr of the result would be different than the final object. It shouldn't change, right?
[02:07:47] <nrds> <06Prestige99> Weird, even if I just take an instance of my ref object and echo repr myObj[].addr I get an illegal storage access error
[02:27:23] <nrds> <06Prestige99> Narrowed it down. https://git.einheit.tech/EinheitTechnologies/shade/src/branch/example/platformer/examples/platformer/king.nim#L82  Adding either of these children to the result, triggers the illegal storage access error when trying to echo the addr of the result
[02:27:31] <nrds> <06Prestige99> just not entirely sure why, yet
[02:47:28] *** Joins: mahlon (~mahlon@martini.nu)
[02:49:43] <FromDiscord> <Elegantbeef> So interestingly it seems it's just `gcSafe` causing an issue
[02:55:09] <FromDiscord> <Elegantbeef> @impbox [ftsf]\: ehhh https://streamable.com/bqsa3w
[02:56:35] <nrds> <06Prestige99> nice 
[02:56:58] <nrds> <06Prestige99> that's so cool
[02:57:36] <FromDiscord> <Elegantbeef> Indeed, some nice magic 🙂
[02:59:01] <FromDiscord> <impbox [ftsf]> Whee!
[02:59:20] <FromDiscord> <impbox [ftsf]> Afk atm but i take it it's working?
[02:59:26] <FromDiscord> <Elegantbeef> it oddly caused by annotating a proc with `closure`
[02:59:28] <FromDiscord> <Elegantbeef> Yep
[02:59:39] <FromDiscord> <impbox [ftsf]> In the nico code?
[02:59:48] <FromDiscord> <Elegantbeef> Nah in nimscripter
[02:59:54] <FromDiscord> <impbox [ftsf]> Interesting
[03:00:17] <FromDiscord> <impbox [ftsf]> So cool it works! Awesome work beef!
[03:00:21] <FromDiscord> <Elegantbeef> To be fair there isnt any reason to annotate it with closure but iirc it was annotated with closure in the VM
[03:00:35] <FromDiscord> <Elegantbeef> Thanks
[03:03:22] <FromDiscord> <Elegantbeef> Eventually i'll feel comfortable moving this to the master branch, but need to write tests and have the API solidified, personally I dont like having to do `isFile = false` so think i'm going to use a distinct for `NimScriptFile` and `NimScriptPath`
[04:15:45] <FromDiscord> <geekrelief> @ElegantBeef I'm checking out nimscripter again.  I haven't touched it since I started working on my TM binding.  But I went back after pulling nim devel and compiling your example for drawim https://play.nim-lang.org/#ix=3Az7, and I'm getting an error: `invalid pragma exportToScript: drawim`.  I pulled nimscripter and it looks like the pragma is gone (except for the readme and tests)?  Do you have an updated sample?
[04:16:05] <FromDiscord> <Elegantbeef> Yea i've decided the pragma was too invasive
[04:16:24] <FromDiscord> <geekrelief> ok
[04:16:30] <FromDiscord> <geekrelief> so what's the new plan?
[04:16:31] <FromDiscord> <geekrelief> 🙂
[04:16:46] <FromDiscord> <Elegantbeef> sent a code paste, see https://play.nim-lang.org/#ix=3BS8
[04:16:52] <FromDiscord> <Elegantbeef> I have update version somewhere
[04:16:54] <FromDiscord> <geekrelief> oh I see
[04:17:26] <FromDiscord> <geekrelief> btw, I just learned about `lienientops` today from the NimNuggets thread, I was wondering if that would help with the overloading issue.
[04:18:10] <FromDiscord> <Elegantbeef> https://play.nim-lang.org/#ix=3BS9
[04:18:41] <FromDiscord> <Elegantbeef> Well i solved some overloading
[04:19:19] <FromDiscord> <Elegantbeef> like `circle(a, b, c: float or int)` will emit `circle321321(a, b, c: float)` and `circle321322(a, b, c: int)`
[04:19:55] <FromDiscord> <geekrelief> cool, the example compiled except `time` was declared
[04:20:22] <FromDiscord> <geekrelief> I guess the warnings are expected too?
[04:22:18] <FromDiscord> <Elegantbeef> Yea i'll cast gcsafe eventually
[04:23:06] <FromDiscord> <geekrelief> nice, alright I'm going to see how this plays with TM 🙂 Here's my binding if you or anyone is interested https://github.com/geekrelief/tm-nim
[04:23:11] <FromDiscord> <Elegantbeef> So things like `time` emit a template on the nimscript side so you can do `time` instead of `time()` 🙂
[04:23:25] <FromDiscord> <Elegantbeef> `time` being a global variable
[04:25:56] <FromDiscord> <geekrelief> In reply to @Elegantbeef "So things like `time`": What's `time` on the nim side? When I compiled your example, I had to comment it out.
[04:30:13] <FromDiscord> <geekrelief> hmm so if I make `time` a `var` I can access it, but it's immutable.  Is there a way to export mutable values?
[04:30:43] <FromDiscord> <Elegantbeef> Not yet
[04:34:43] <FromDiscord> <Elegantbeef> It might be possible to do
[04:36:24] <FromDiscord> <geekrelief> no worries, using a 2 procs to set and get will do for now
[05:36:40] *** Quits: notchris (sid181145@id-181145.hampstead.irccloud.com) (Ping timeout: 252 seconds)
[05:38:46] *** Quits: robertmeta (sid514@user/robertmeta) (Ping timeout: 268 seconds)
[05:40:51] *** Joins: robertmeta (sid514@user/robertmeta)
[05:53:05] *** Joins: notchris (sid181145@hampstead.irccloud.com)
[05:54:30] <nrds> <06Prestige99> Elegantbeef: If you have a min or two, could you look at what I posted above? I'm curious if this is a bug, or if it's actually my fault...
[05:54:48] <FromDiscord> <Elegantbeef> Give me one moment and i will
[05:54:52] <nrds> <06Prestige99> I tried recreating it with a minimal example, but my examples all work 🤔
[05:54:55] <nrds> <06Prestige99> Thanks
[05:56:09] <FromDiscord> <Elegantbeef> Where is the add issue at?
[05:56:31] <nrds> <06Prestige99> the addchild part? 1 sec
[05:56:45] <nrds> <06Prestige99> https://git.einheit.tech/EinheitTechnologies/shade/src/branch/example/platformer/examples/platformer/king.nim#L82
[05:57:10] <nrds> <06Prestige99> If I comment out those two lines, I can echo repr player[].addr
[05:57:30] <nrds> <06Prestige99> in https://git.einheit.tech/EinheitTechnologies/shade/src/branch/example/platformer/examples/platformer/platformer_example.nim
[05:59:07] <FromDiscord> <Elegantbeef> Guess i should clone this to test it
[05:59:43] <nrds> <06Prestige99> There are some reqs - sdl, sdl_mixer, sdl_gpu, and chipmunk (v7)
[06:00:15] <nrds> <06Prestige99> If you're on arch they're all in the repos except sdl_gpu, iirc
[06:00:36] <nrds> <06Prestige99> https://git.einheit.tech/EinheitTechnologies/shade/src/branch/example/platformer#setting-up-sdl_gpu
[06:00:42] <FromDiscord> <Elegantbeef> look at this guy assuming everyone runs arch
[06:00:52] <nrds> <06Prestige99> I thought you did for some reason :P
[06:01:44] <FromDiscord> <Elegantbeef> Nah i'm an ubuntu derived heathen
[06:03:09] <nrds> <06Prestige99> good enough ;P
[06:04:22] <FromDiscord> <Elegantbeef> You dont have vmath in the deps
[06:04:45] <nrds> <06Prestige99> hmm oh right, I think that was with pixie but I stopped using pixie
[06:05:16] <FromDiscord> <Elegantbeef> Uhh `Error: type mismatch: got 'proc (this: Task, deltaTime: float){.closure.}' for 'onUpdate' but expected 'proc (this: Node, deltaTime: float){.closure.}`
[06:05:29] <FromDiscord> <Elegantbeef> Is that branch up to date?
[06:05:34] <nrds> <06Prestige99> Yep
[06:06:00] <nrds> <06Prestige99> If you just add `echo repr player[].addr` in platformer_example.nim you should see the error
[06:06:25] <FromDiscord> <Elegantbeef> Is this compiler error expected?
[06:07:03] <nrds> <06Prestige99> Which error are you seeing? I get a runtime error about illegal storage access
[06:07:22] <FromDiscord> <Elegantbeef> I pasted the error a couple messages ago
[06:07:39] <FromDiscord> <Elegantbeef> The type mismatch due to `Task` and `Node` not matching
[06:07:42] <nrds> <06Prestige99> oh - weird
[06:07:45] *** Quits: arkurious (~arkurious@user/arkurious) (Quit: Leaving)
[06:07:57] <FromDiscord> <Elegantbeef> Ah was due to being on devel apparently
[06:08:01] <FromDiscord> <Elegantbeef> Rather 1.6.0
[06:08:09] <nrds> <06Prestige99> oh ok
[06:08:13] <nrds> <06Prestige99> yeah I'm on stable
[06:08:27] <nrds> <06Prestige99> and the example/platformer branch
[06:09:05] <FromDiscord> <Elegantbeef> "failed to load image"
[06:09:42] <nrds> <06Prestige99> try `nimble platformer` from the project directory
[06:09:57] <FromDiscord> <Elegantbeef> Ah didnt realize you had that setup
[06:10:02] <FromDiscord> <Elegantbeef> Yea got the proper nil error
[06:10:12] <nrds> <06Prestige99> \o/
[06:10:25] <FromDiscord> <Elegantbeef> Now to see the culprit
[06:11:28] <nrds> <06Prestige99> It somehow has something to do with the node's children..
[06:25:18] <FromDiscord> <Elegantbeef> You're code is fine just the reprv1 impl that has an issue
[06:25:21] <FromDiscord> <Elegantbeef> your code even
[06:26:59] <FromDiscord> <Elegantbeef> The node is assumed to not be nil but somehow it's getting nil, line 195 in compiler/repr.nim
[06:27:40] <nrds> <06Prestige99> dang it
[06:27:46] <nrds> <06Prestige99> was hoping it was my fault
[06:27:47] <FromDiscord> <Elegantbeef> you dont even need to do the `player[].addr.repr` `repr(player)` hits the same bug
[06:28:02] <FromDiscord> <Elegantbeef> Well eitherway there isnt a big issue here
[06:32:27] <FromDiscord> <Elegantbeef> Ah somewhere the kind of a nimnode is invalidly set
[06:34:53] *** Quits: rockcavera (~rc@user/rockcavera) (Remote host closed the connection)
[06:36:00] <nrds> <06Prestige99> So need to patch the compiler eh?
[06:36:30] <FromDiscord> <Elegantbeef> Something is indeed off
[06:37:38] <FromDiscord> <Elegantbeef> Well it's not compiler since it's the system module
[06:38:19] <FromDiscord> <Elegantbeef> So you have two avenues to fix it either fix the bad generated code passed or fix the cause 😛
[06:40:21] <nrds> <06Prestige99> Not sure how to fix it other than fixing the system module
[06:41:40] <FromDiscord> <Elegantbeef> Something is really off though
[06:44:00] <nrds> <06Prestige99> Yeah..
[06:46:36] <FromDiscord> <Elegantbeef> Yea i tried to just change the stdlib and no cigar
[06:46:41] <FromDiscord> <Elegantbeef> So need to fix the compiler for repr
[06:46:57] <FromDiscord> <Elegantbeef> reprv2 didnt like your code
[06:52:21] <nrds> <06Prestige99> Hmm I wonder why
[07:27:09] <nrds> <06Prestige99> using --gc:arc or orc give a different error at least
[07:27:29] <nrds> <06Prestige99> expression cannot be cast to pointer
[07:36:01] *** Quits: supakeen (~user@python/site-packages/supakeen) (Quit: WeeChat 3.3)
[07:36:31] *** Joins: supakeen (~user@python/site-packages/supakeen)
[08:11:00] <FromDiscord> <retkid> is there a library for imperial measurements
[08:11:10] <FromDiscord> <retkid> 1 quart / 1 tablespoon
[08:11:18] <FromDiscord> <retkid> lol
[08:18:31] <nrds> <06Prestige99> @Elegantbeef if you have any idea of where I should look to repair this I'd appreciate it, could start looking into it tomorrow... if not, I'll start with repr_v2
[08:32:16] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[08:44:01] <FromDiscord> <ElegantBeef> Look at the VM's magic and see where it get stuff is what i'd suggest
[08:44:20] <FromDiscord> <ElegantBeef> For some reason the values got are incorrect for some values it gets some odd enum value
[08:45:35] <nrds> <06Prestige99> Hmm okay. I've never poked around in that code, but I'll see what I can find out
[08:46:50] *** Quits: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net) (Ping timeout: 265 seconds)
[08:47:45] <nrds> <06Prestige99> Hopefully it's an easy fix, and I can get back to my project
[08:48:30] <FromDiscord> <ElegantBeef> I couldnt get a repro to work so yea that makes it harder
[08:48:36] <FromDiscord> <ElegantBeef> Minimizing it is the key to resolving it imo
[08:49:07] <FromDiscord> <ElegantBeef> I think there is a chance it's having a proc named `children` and `children: seq[Node]`
[08:49:12] <nrds> <06Prestige99> I'll keep stripping down my code to make it as minimal as possible
[08:49:23] <nrds> <06Prestige99> Good thinking
[09:37:45] <nrds> <06Prestige99> Renaming it didn't seem to change any behavior
[09:45:22] <FromDiscord> <codic> is it at all possible to take the address of a rvalue? like `abc [5].unsafeAddr`,  I want to deal with C apis that take multi-item pointers for parameter packs and I don't want to hoist the parameters for each call into a separate array
[09:51:10] <FromDiscord> <codic> sent a code paste, see https://play.nim-lang.org/#ix=3BTa
[09:51:17] <FromDiscord> <codic> (edit) "https://play.nim-lang.org/#ix=3BTa" => "https://play.nim-lang.org/#ix=3BTb"
[10:08:15] <FromDiscord> <Elegantbeef> It works fine https://play.nim-lang.org/#ix=3BTd
[10:10:46] <FromDiscord> <Elegantbeef> https://play.nim-lang.org/#ix=3BTf for an "openarray" solution
[10:11:13] <FromDiscord> <Elegantbeef> @codic\: if i can guess your issue you arent converting to an open array and as such it'd need to convert to open array then to pointer
[10:12:31] <FromDiscord> <codic> ah, the conversion to openArray is not implicit in a converter here I guess
[10:12:37] <FromDiscord> <codic> sure, then I'll use that, thanks
[10:13:07] <FromDiscord> <Elegantbeef> openarray's conversions are often disappointing
[10:13:20] <FromDiscord> <Elegantbeef> Make a typeclass and you instantly lose auto converting
[10:22:41] <nrds> <06Prestige99> Aha, it has to do with c interop
[10:22:51] <nrds> <06Prestige99> I'll continue tomorrow
[10:24:54] <FromDiscord> <Elegantbeef> Ah i thought that might be an issue aswell
[10:41:29] *** Joins: max22- (~maxime@lfbn-ren-1-762-224.w81-53.abo.wanadoo.fr)
[11:20:06] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 245 seconds)
[11:22:42] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[11:54:44] *** Joins: Gustavo6046_ (~Gustavo60@user/gustavo6046)
[11:55:16] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Read error: Connection reset by peer)
[11:58:03] *** Gustavo6046_ is now known as Gustavo6046
[12:43:15] <FromDiscord> <retkid> is it possible to use floats in an enum
[12:44:19] <FromDiscord> <Elegantbeef> No but you can make an `array[yourEnum, float]`
[12:46:09] <FromDiscord> <retkid> welp then i might as well keep my table
[12:46:20] <FromDiscord> <Elegantbeef> I just gave you a cheaper/better alternative
[12:47:42] <FromDiscord> <Elegantbeef> https://play.nim-lang.org/#ix=3BTL
[12:50:14] <FromDiscord> <retkid> that is cleaner code
[12:50:15] <FromDiscord> <retkid> thank you.
[12:52:21] <FromDiscord> <retkid> actually
[12:52:29] <FromDiscord> <retkid> i dont think this fits for my problem
[12:54:34] <FromDiscord> <Rika> Well what is your problen
[12:54:38] <FromDiscord> <Rika> (edit) "problen" => "problem"
[12:57:47] <FromDiscord> <retkid> just converting strings to consts
[12:57:54] <FromDiscord> <retkid> (edit) "consts" => "consts, table keys work the best"
[12:58:15] <FromDiscord> <Rika> Okay yeah I guess
[13:13:47] <FromDiscord> <impbox [ftsf]> Or a case statement
[13:14:34] <FromDiscord> <impbox [ftsf]> Actually I forget if case support strings in nim
[13:17:39] <FromDiscord> <Rika> It does
[13:34:23] <FromDiscord> <el__maco> sent a code paste, see https://play.nim-lang.org/#ix=3BTY
[13:34:44] <FromDiscord> <el__maco> I know we have the union pragma, but I guess I'm not sure how to create that anonymous struct
[13:37:45] <FromDiscord> <el__maco> (the point is that you can set value quad using ``bitmap[0].value=0x11223344`` or one component at a time ``bitmap[0].r=255``)
[13:38:06] <FromDiscord> <haxscramper> you can use `tuple[r,g,b,a: uint8]`
[13:38:22] <FromDiscord> <haxscramper> For anonymous union
[13:38:29] <FromDiscord> <el__maco> right, I'll try that
[13:38:47] <FromDiscord> <el__maco> keep forgetting about tuples 😁
[14:32:22] *** Quits: xet7 (~xet7@user/xet7) (Remote host closed the connection)
[14:33:21] *** Joins: xet7 (~xet7@user/xet7)
[15:15:39] <FromDiscord> <el__maco> hmm, still not able to pull it off
[15:16:01] <FromDiscord> <el__maco> not only does it complain about the union, it also wants the tuple named
[15:16:38] <FromDiscord> <el__maco> sent a code paste, see https://play.nim-lang.org/#ix=3BUb
[15:16:54] <FromDiscord> <el__maco> >Warning: type pragmas follow the type name; this form of writing pragmas is deprecated [Deprecated]↵>Error: identifier expected, but got 'keyword tuple'
[15:17:01] <FromDiscord> <el__maco> (edit) ">Warning:" => "> Warning:" | "[Deprecated]↵>Error:" => "[Deprecated]↵> Error:"
[15:23:20] <FromDiscord> <Rika> Needs a name
[15:23:32] <FromDiscord> <impbox [ftsf]> You can use a cast instead of a union
[15:23:45] <FromDiscord> <Rika> I don't think you can do anonymous struts in an object
[15:24:23] <FromDiscord> <impbox [ftsf]> Just give it value and use procs with cast for the rgba
[15:24:25] <FromDiscord> <el__maco> sent a code paste, see https://play.nim-lang.org/#ix=3BUe
[15:24:40] <FromDiscord> <impbox [ftsf]> Yeah that should be fine too
[15:24:56] <FromDiscord> <impbox [ftsf]> Though i think someone had issues with the code generator using the name
[15:25:03] <FromDiscord> <impbox [ftsf]> Which doesn't exist in c
[15:25:18] <FromDiscord> <impbox [ftsf]> But yours isn't importc so it might be fine
[15:26:33] *** Quits: max22- (~maxime@lfbn-ren-1-762-224.w81-53.abo.wanadoo.fr) (Ping timeout: 265 seconds)
[15:36:01] *** Quits: supakeen (~user@python/site-packages/supakeen) (Quit: WeeChat 3.3)
[15:36:30] *** Joins: supakeen (~user@python/site-packages/supakeen)
[15:44:22] <FromDiscord> <el__maco> sent a code paste, see https://play.nim-lang.org/#ix=3BUm
[15:44:40] <FromDiscord> <Rika> mitems iterator
[15:44:53] <FromDiscord> <el__maco> what does that mean
[15:45:08] <FromDiscord> <Rika> Just put “.mitems” after data in the first line of your second block
[15:45:11] <FromDiscord> <Rika> And it will work
[15:45:15] <FromDiscord> <Rika> Mutable items
[15:45:19] <FromDiscord> <Rika> Oh wait it’s pairs
[15:45:23] <FromDiscord> <Rika> So it’s mpairs
[15:45:31] <FromDiscord> <el__maco> texture.data is a seq
[15:45:37] <FromDiscord> <Rika> I am aware
[15:45:51] <FromDiscord> <Rika> Try what I just said at least
[15:46:13] <FromDiscord> <Rika> sent a code paste, see https://play.nim-lang.org/#ix=3BUo
[15:46:37] <FromDiscord> <el__maco> ah yes, that works. Nice!
[15:47:00] <FromDiscord> <el__maco> not sure what is a "pair" here tho
[15:47:19] <FromDiscord> <Rika> Pair of values, in the case of a seq it is index and value
[15:47:24] <FromDiscord> <Rika> For a table it is key and value
[15:47:25] <FromDiscord> <Rika> Etc
[15:47:31] <FromDiscord> <el__maco> I see
[15:47:40] <FromDiscord> <el__maco> good to know
[15:47:41] <FromDiscord> <Rika> Only the second part is variable when it is an m type iterator
[15:47:56] <FromDiscord> <Rika> Cuz it kinda makes no sense to change a key or an index
[15:55:20] *** Joins: rockcavera (~rc@192.12.112.238)
[15:55:20] *** Quits: rockcavera (~rc@192.12.112.238) (Changing host)
[15:55:20] *** Joins: rockcavera (~rc@user/rockcavera)
[16:08:07] <FromDiscord> <el__maco> pardon me while I'm trying to learn the language 😅 it seems I can iterate over a slice of that seq like this ``for index,pixel in the_texture.data[0..31]:`` but if I do this then .mpairs no longer works
[16:10:09] <FromDiscord> <Rika> I don’t see why it wouldn’t work…
[16:10:57] <FromDiscord> <el__maco> sent a long message, see http://ix.io/3BUy
[16:11:58] <FromDiscord> <Rika> Ah because it’s not variable
[16:12:09] <FromDiscord> <Rika> Nim doesn’t have slicing in stable yet
[16:12:14] <FromDiscord> <Rika> It does in experimental
[16:14:45] *** Joins: arkurious (~arkurious@user/arkurious)
[16:30:11] <FromDiscord> <Smarc> Can you guys tell me why this is giving me an 'undeclared identifier' error? Both files are in the same directory https://media.discordapp.net/attachments/371759389889003532/898918241286639686/Screenshot_20211016_145604.png
[16:32:34] <FromDiscord> <Rika> Did you save
[16:33:12] <FromDiscord> <Rika> Never mind looks like you did
[16:33:26] <FromDiscord> <Rika> Honestly can’t tell you
[16:33:31] <FromDiscord> <Rika> Dunno what’s up
[16:35:08] <FromDiscord> <Smarc> I just don't get it .. Compiling actually gives me a SIGSEGV error if I try to output x[0]
[16:35:47] <FromDiscord> <Gumber> are your pawns ref objects?
[16:35:50] <FromDiscord> <Rika> Legitimately odd I would say
[16:36:02] <FromDiscord> <Smarc> Yes, Pawn is a ref object of Piece is a ref object of RootObj
[16:36:07] <FromDiscord> <Rika> Eh I wouldn’t think that would be an issue
[16:36:15] <FromDiscord> <Gumber> I'm just trying to understand what their definition is
[16:36:25] <FromDiscord> <Rika> Okay
[16:36:29] <FromDiscord> <Gumber> wait
[16:36:33] <FromDiscord> <Gumber> you're returning a seq of pawns
[16:36:42] <FromDiscord> <Gumber> but you're not assigning anything to the result...
[16:36:49] <FromDiscord> <Gumber> white pawns rather
[16:37:08] <FromDiscord> <Gumber> white pawns is a immutable seq
[16:37:13] <FromDiscord> <Rika> That’s wrong logic but it shouldn’t be causing segfaults
[16:37:30] <FromDiscord> <Gumber> @Smarc can you just create a gist or something of your code so we can try to compile it?
[16:37:45] <FromDiscord> <Gumber> or set up a `play.nim-lang.org` share for us?
[16:38:52] <FromDiscord> <Smarc> I just noticed it is working if I assign wPawn1 before creating the whitePawns seq .. So somehow the undeclared identifier error is on my vim side I guess?!
[16:39:15] <FromDiscord> <Rika> OH YEAH
[16:39:19] <FromDiscord> <Rika> That’s true
[16:39:29] <FromDiscord> <Rika> They’re all nil before you put anything in them
[16:39:38] <FromDiscord> <Rika> Which is why accessing them will segfault
[16:39:58] <FromDiscord> <Gumber> yeah ref objects need to be initialized
[16:39:59] <FromDiscord> <Smarc> I thought if I call createPawns() before accessing them the wPawn1 would update? :x What am I mixing up here?
[16:39:59] *** Joins: Guest77 (~Guest77@5.115.137.47)
[16:40:12] <FromDiscord> <Rika> Yes, wPawn1 will update, but not the sea
[16:40:13] <FromDiscord> <Rika> Seq
[16:40:32] <FromDiscord> <Gumber> the seq is storing references to uninitialized memory
[16:40:58] <FromDiscord> <Smarc> Hm, what is the Nim-way to do this then?
[16:40:59] <FromDiscord> <Gumber> because you haven't assigned anything to your pawn references yet
[16:41:10] <FromDiscord> <Gumber> it's the same way to do it as in C/C++
[16:41:25] <FromDiscord> <Gumber> you can't just store a nil pointer in a container
[16:41:55] <FromDiscord> <Gumber> because that's a copy
[16:42:06] <FromDiscord> <Gumber> then you update the original pointer to make it point at some intialized memory
[16:42:21] <FromDiscord> <Rika> You’re reassigning the pointer, not changing the data within the pointer
[16:42:26] <FromDiscord> <Smarc> Ahh
[16:42:27] <FromDiscord> <Gumber> the container still holds the copies that point to the unnitialized memory
[16:42:44] <FromDiscord> <Smarc> Pointers are .. confusing
[16:42:45] <FromDiscord> <retkid> so i got this compile thing here
[16:42:50] <FromDiscord> <Gumber> nah they're not bad
[16:42:54] <FromDiscord> <retkid> "  lastOrd(tyGenericParam)"
[16:42:55] <FromDiscord> <Rika> Not really once you got the hang of it
[16:42:57] <FromDiscord> <Gumber> think of a pointer as an address
[16:43:01] <FromDiscord> <Gumber> to some location in memory
[16:43:06] <FromDiscord> <Rika> In reply to @Gumber "think of a pointer": I mean… it is
[16:43:09] <FromDiscord> <Rika> 😛
[16:43:21] <FromDiscord> <Gumber> and the memory you allocate to store the data for objects
[16:43:23] <FromDiscord> <retkid> `there is a lot of code and i have no idea where that could be caused by and it isn't giving me any information, is there anyway i can get the compiler to give me any more info
[16:43:27] <FromDiscord> <Gumber> lives in these memory locations
[16:43:33] <FromDiscord> <Gumber> the pointer is just a layer of indirection
[16:43:47] <FromDiscord> <Smarc> Thank you both for clearing this up!
[16:43:48] <FromDiscord> <Gumber> things get a little confusing when you start dealing with double pointers and the fact that C lacks type safety
[16:43:54] <FromDiscord> <Rika> In reply to @retkid "`there is a lot": Not that I know of
[16:43:59] <FromDiscord> <Gumber> so like in C arrays are pointers
[16:44:04] <FromDiscord> <Rika> Maybe with Koch
[16:44:38] <FromDiscord> <Gumber> @retkid what do you mean `this compiler thing`?
[16:44:50] <FromDiscord> <Gumber> like is the compiler crashing when trying to compile your program?
[16:45:00] *** Quits: Guest77 (~Guest77@5.115.137.47) (Quit: Client closed)
[16:45:06] <FromDiscord> <Gumber> or is your program failing to compile because of some error in your code and that's something that's being logged?
[16:46:01] <FromDiscord> <Rika> Looks like a compiler crash
[16:46:13] <FromDiscord> <Rika> In reply to @retkid ""  lastOrd(tyGenericParam)"": See this
[16:46:17] <FromDiscord> <retkid> its a trackeback
[16:46:27] <FromDiscord> <retkid> so likely some kind of crash
[16:46:38] <FromDiscord> <retkid> I've had this happen before except I didn't compile for a whole and theres a lot of new code
[16:46:41] <FromDiscord> <retkid> so i dont know where to start
[16:47:00] <FromDiscord> <retkid> the only thing i got is just delete code randomly until something works
[16:47:25] <FromDiscord> <retkid> oh hey it worked
[16:47:39] <FromDiscord> <retkid> proc highestKey(input : OrderedTable[int, float] |  OrderedTable[string, float] ) : seq[int] | seq[string]=
[16:47:43] <FromDiscord> <retkid> (edit) "proc highestKey(input : OrderedTable[int, float] |  OrderedTable[string, float] ) : seq[int] | seq[string]=" => "sent a code paste, see https://play.nim-lang.org/#ix="
[16:48:19] <FromDiscord> <retkid> (edit) "https://play.nim-lang.org/#ix=" => "https://play.nim-lang.org/#ix=3BUK"
[16:48:23] <FromDiscord> <retkid> (edit) "https://play.nim-lang.org/#ix=3BUK" => "https://play.nim-lang.org/#ix=3BUL"
[16:53:25] *** Joins: max22- (~maxime@2a01cb0883359800eb44415b9b79cba1.ipv6.abo.wanadoo.fr)
[17:17:35] *** Quits: rockcavera (~rc@user/rockcavera) (Remote host closed the connection)
[18:00:22] <FromDiscord> <Fancy> Hi guys
[18:17:14] <FromDiscord> <Fancy> sent a long message, see http://ix.io/3BUW
[18:21:14] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[18:22:16] *** Quits: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net) (Client Quit)
[18:26:07] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[18:26:53] <FromDiscord> <Shoto> How do i make a Nim function that's usable with CFFI in other languages?
[18:27:31] <FromDiscord> <Shoto> And is there a way to actually use Nim functions that return and accept C types in C/C++/similar langs?
[18:27:45] <FromDiscord> <Shoto> Without using a .so file or something
[18:33:10] <FromDiscord> <Gumber> sent a long message, see http://ix.io/3BVb
[18:33:26] <FromDiscord> <Gumber> I tried `importcpp`ing the symbol into module A and aplying `nodecl` as well, but that didn't seem to help :/
[18:34:09] <FromDiscord> <Gumber> oh I have one idea... maybe the header pragma since it's complaining about the virtual interface not being found not the implementation....
[18:36:43] <FromDiscord> <Fancy> In reply to @Himiko Toga "And is there a": I am pretty sure I saw something about that in the Nim book they recommend on the Nim site
[18:36:59] *** Quits: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net) (Ping timeout: 264 seconds)
[18:37:12] <FromDiscord> <Rika> look into the types that start with `c`, `cstring cint` etc
[18:37:38] <FromDiscord> <Fancy> ahh yeah that was it
[18:38:50] <FromDiscord> <Fancy> I just realised I used it when I was doing the canvas api thing
[18:46:35] <FromDiscord> <Himiko> Ah okay, thanks 👍
[18:50:35] <FromDiscord> <Gumber> okay got my problem figured out - needed to put the header emit for the class in a separate module and include it everywhere
[18:50:41] <FromDiscord> <Gumber> just like in C++ xD
[18:52:24] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[19:13:56] <FromDiscord> <Fancy> Ahhh I hate those situations where you can't work it out and it turns out is a simple fix like that
[19:14:25] <FromDiscord> <Fancy> C++ never again. haha
[19:15:13] <FromDiscord> <Fancy> I never want to touch Cpp again, that was an absolute nightmare.
[19:24:05] <FromDiscord> <haxscramper> In reply to @Himiko Toga "How do i make": https://github.com/treeform/genny while main focus is generation of the `.so` files, it also automates creation of the procs that would actually be exported (in the dl), and you can use those
[19:25:22] <FromDiscord> <haxscramper> Actually no, it still goes through the dynamic library for this one
[19:40:05] <FromDiscord> <Himiko> Thanks aha
[19:41:55] <nrds> <06Prestige99> Wrapping a c function that has a const pointer to some data, is there anything special I have to write (other than ptr foo)?
[19:51:33] <FromDiscord> <dom96> In reply to @Fancy "I started playing around": Welcome to the Nim community 🙂
[19:52:58] <nrds> <06Prestige99> @Elegantbeef: I narrowed it down to https://git.einheit.tech/EinheitTechnologies/shade/src/branch/bug/reprv2/src/shadepkg/math/collision/collisionshape.nim#L114 which is creating an object via the chipmunk wrapper - curious if this means my wrapper is incorrect...
[19:53:15] <nrds> <06Prestige99> it was also happening with sdl_gpu as well, though
[19:54:56] <FromDiscord> <dom96> The hacktoberfest contributions I've been getting so far have been amazing 😄
[19:58:50] <nrds> <06Prestige99> specifically seems to be, storing an object created via a c wrapper inside a Nim type/ref object
[19:59:14] <nrds> <06Prestige99> If I have some object with an sdl_gpu.Image and try to echo the repr, it fails
[20:06:57] <nrds> <06Prestige99> https://play.nim-lang.org/#ix=3BVB here's the minimal example
[20:14:47] *** Quits: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net) (Ping timeout: 264 seconds)
[20:24:19] <FromDiscord> <Fancy> In reply to @dom96 "Welcome to the Nim": Thank you so much it is a pleasure to be here. 🙂
[20:26:45] <FromDiscord> <Fancy> So nim is a suitable alternative to cpp for making 2d game engines?
[20:28:49] <FromDiscord> <exelotl> yeah, very ^^
[20:29:40] <FromDiscord> <Fancy> Oh cool become quite fascinated in game engines recently
[20:31:18] <FromDiscord> <Fancy> (edit) "Oh cool ... becomea" 03added "I've" | "quite fascinated in" => "a bit obsessed with" | "recently" => "recently, so that suits me. I don't have to do everything in cpp yay. 🙂"
[20:32:34] <FromDiscord> <Gumber> In reply to @Fancy "Oh cool I've become": You're still going to be relying on C/C++ unless you want to want to write all the cross platform windowing / input stuff yourself
[20:32:40] <FromDiscord> <Gumber> and even then you'd be relying on C calls
[20:32:49] <FromDiscord> <Gumber> so knowing C/C++ will only benefit you
[20:33:05] <FromDiscord> <Gumber> depending on the complexity of your project, it could be a requirement
[20:33:18] <FromDiscord> <Gumber> also I wouldn't make 2d game engines - they're pretty pointless to a large degree
[20:33:36] <FromDiscord> <Gumber> unless you're trying to do something unique in terms of software rasterization like Nico does
[20:33:52] <FromDiscord> <Fancy> I have dabbled in C and Cpp before so that is alright. I just meant I am happy that I don't have to rely on it 100%
[20:35:06] <FromDiscord> <Gumber> you end up dealing with the warts either way
[20:35:06] <FromDiscord> <Fancy> I would be definitely beneficial to do a refresher tho that is for sure
[20:35:15] <FromDiscord> <Gumber> especially if you rely on the cpp backend
[20:35:48] <FromDiscord> <Gumber> I'd just advise not to write game engines - if you want to write your own tech pick a game you want to write and then figure out what tech you need to make it happen
[20:35:51] <FromDiscord> <Gumber> then R&D
[20:35:55] <FromDiscord> <Gumber> then build a prototyping sandbox
[20:35:57] <FromDiscord> <Gumber> then make your game
[20:35:59] <FromDiscord> <Fancy> The engine is more of a hobby project than anything else
[20:36:09] <FromDiscord> <Gumber> well hobby projects can have end goals / purposes
[20:36:14] <FromDiscord> <Gumber> hobby game engines tend not to
[20:36:14] <FromDiscord> <Fancy> I don't think I will be making anything too complex
[20:36:43] <FromDiscord> <Gumber> trust me - I've written several hobby game engines in Nim - I am now building a 3d RTS with networked physics in Nim
[20:37:18] *** Joins: neurocyte0132889 (~neurocyte@45.128.183.213)
[20:37:18] *** Quits: neurocyte0132889 (~neurocyte@45.128.183.213) (Changing host)
[20:37:18] *** Joins: neurocyte0132889 (~neurocyte@user/neurocyte)
[20:37:31] <FromDiscord> <Gumber> I'm using - https://github.com/jrouwe/JoltPhysics - (although eventually I'd like to rip the STL out and replace it with EASTL or something else)
[20:37:53] <FromDiscord> <Gumber> https://github.com/GameTechDev/GTS-GamesTaskScheduler
[20:37:55] <FromDiscord> <Fancy> So you would recommend focus on making a game opposed to making an engine, right?
[20:38:09] <FromDiscord> <Gumber> https://github.com/charles-lunarg/vk-bootstrap
[20:38:17] <FromDiscord> <Gumber> https://github.com/martty/vuk
[20:38:36] <FromDiscord> <Gumber> https://github.com/glfw/glfw
[20:38:40] <FromDiscord> <Fancy> Thanks for all the feedback 🙂
[20:38:43] <FromDiscord> <Gumber> etc...
[20:39:08] <FromDiscord> <Gumber> no problem - I've worked in the industry on game engines and done hobby game engine development for the past six or so years
[20:39:23] <FromDiscord> <Gumber> my advice is not to try to build an engine - it's a pointless goal
[20:39:49] <FromDiscord> <Gumber> pick a game you want to make and figure out what your requirements are and then figure out what you need to build it on a technical level
[20:40:30] <FromDiscord> <Gumber> do some upfront research to figure out how to make that happen - consult books, look at other github repos, read blogs / dev blogs, talk to other devs, etc....
[20:40:46] <FromDiscord> <Gumber> focus on data oriented design and don't get wrapped up in ECS at first
[20:40:58] <FromDiscord> <Gumber> avoid object oriented design and design patterns like the plague
[20:41:15] <FromDiscord> <Gumber> (edit) "avoid object oriented design and ... design" 03added "object oriented"
[20:41:31] <FromDiscord> <Gumber> really focus on data because your engine is just transforming a bunch of data
[20:41:47] <FromDiscord> <Gumber> (edit) "really focus on data because your engine is just transforming a bunch of data ... " 03added "at the end of the day"
[20:42:00] <FromDiscord> <Gumber> this is better in #gamedev btw so let's move there
[20:42:25] *** Quits: neurocyte0132889 (~neurocyte@user/neurocyte) (Ping timeout: 252 seconds)
[20:50:02] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[20:51:12] <FromDiscord> <Fancy> sent a long message, see http://ix.io/3BVR
[20:52:41] <FromDiscord> <Fancy> I will need to head off to bed, but I would be happy to continue this later when I am bit more well rested.
[21:10:25] *** Quits: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net) (Quit: Connection closed)
[21:11:11] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[21:19:30] <FromDiscord> <treeform> Is there a way to keep the normal `foo[3] foo.add()` but add a my own namespace for methods, some thing like `foo.u[3] foo.u.add()`  Can I create a zero cost object/namepsace `.u` that I can have my own extra methods on, but not actually create anything at run time? As its nearly just a namespace?
[21:20:58] <FromDiscord> <Gumber> In reply to @Fancy "Six years you know": have a good night! I doubt it - I don't watch many videos about Rust 🙂 I've known about data oriented design in game engines for quite some time, since before Unity or Godot
[21:34:58] <FromDiscord> <treeform> hmm I think a `type U = distinct ptr string` might work?
[21:36:10] *** Joins: neurocyte0132889 (~neurocyte@45.128.183.213)
[21:36:10] *** Quits: neurocyte0132889 (~neurocyte@45.128.183.213) (Changing host)
[21:36:10] *** Joins: neurocyte0132889 (~neurocyte@user/neurocyte)
[21:41:52] <NimEventer> New thread by Orlean: Documentation for Nim 1.6?, see https://forum.nim-lang.org/t/8508
[21:47:55] *** Quits: max22- (~maxime@2a01cb0883359800eb44415b9b79cba1.ipv6.abo.wanadoo.fr) (Ping timeout: 260 seconds)
[22:00:21] <FromDiscord> <haxscramper> https://forum.nim-lang.org/t/8508#55071> Please notice that the 1.6 release is officially scheduled for next Monday.
[22:02:14] <Pyautogui> Wow!
[22:20:27] *** Joins: max22- (~maxime@2a01cb0883359800a5cb7947071ee8e1.ipv6.abo.wanadoo.fr)
[22:34:16] <FromDiscord> <Rika> In reply to @treeform "hmm I think a": Distinct void I think works
[23:06:15] <NimEventer> New thread by Prestige: Repr a ref object with a property from a C library, see https://forum.nim-lang.org/t/8509
[23:08:00] *** Joins: oddish (~oddish@2a01:4f8:1c1c:a9da::1)
[23:13:15] *** Quits: neurocyte0132889 (~neurocyte@user/neurocyte) (Quit: The Lounge - https://thelounge.chat)
[23:15:59] *** Quits: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net) (Ping timeout: 264 seconds)
[23:21:09] *** Joins: neurocyte0132889 (~neurocyte@45.128.183.213)
[23:21:09] *** Quits: neurocyte0132889 (~neurocyte@45.128.183.213) (Changing host)
[23:21:09] *** Joins: neurocyte0132889 (~neurocyte@user/neurocyte)
[23:40:58] *** Quits: neurocyte0132889 (~neurocyte@user/neurocyte) (Quit: The Lounge - https://thelounge.chat)
[23:44:05] *** Joins: neurocyte0132889 (~neurocyte@45.128.183.213)
[23:44:05] *** Quits: neurocyte0132889 (~neurocyte@45.128.183.213) (Changing host)
[23:44:05] *** Joins: neurocyte0132889 (~neurocyte@user/neurocyte)
[23:56:27] *** Joins: Pyautogui (~Pyautogui@108-216-110-132.lightspeed.sndgca.sbcglobal.net)
[23:57:13] <FromDiscord> <Elegantbeef> Prestige you about, are any of the structs incomplete when you attempt to repr?
[23:57:32] <FromDiscord> <Elegantbeef> Cause like https://play.nim-lang.org/#ix=3BWG works fine
