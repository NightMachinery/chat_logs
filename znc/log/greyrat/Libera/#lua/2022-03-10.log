[00:02:39] *** Quits: netlynx (~jan@94-226-69-15.access.telenet.be) (Quit: Leaving)
[00:15:05] *** Joins: magla (~gelignite@d5367992.access.ecotel.net)
[00:27:46] *** Quits: Darkcoal (~user@user/Darkcoal) (Quit: Darkcoal)
[00:41:57] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[00:42:55] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Remote host closed the connection)
[00:43:14] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[00:56:02] *** Joins: gh00p (~gh00p@45.78.102.64)
[01:00:28] <gh00p> Hi. I'm kind of new to lua.. I have a file with a table in it -- it starts with "return {" on the first line, followed by about 40000 items. How do I load the contents of this file into a table in lua? I know I can `require "somefile.lua"`, but how do I access the contents of the table?
[01:00:40] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958)
[01:00:52] <technomancy> gh00p: local data = dofile("somefile.lua") is my recommendation
[01:01:34] <gh00p> Okay, so will the output of dofile() be the content of the file? As in, `tablename = dofile("somefile.lua")` ?
[01:01:39] <Elw3> T=require
[01:01:40] <furq> yes
[01:02:11] <gh00p> Hmm. That sounds too easy. :)
[01:03:06] <technomancy> gh00p: it's more complicated if the file comes from an untrustworthy source, but for known-good data there's no reason for it to be hard
[01:04:13] <gh00p> ah, I see. Yes, this is a trusted source. Thanks very much. I'll likely be back shortly with more simple questions.
[01:05:00] *** Quits: magla (~gelignite@d5367992.access.ecotel.net) (Quit: Stay safe!)
[01:14:51] *** Quits: gh00p (~gh00p@45.78.102.64) (Quit: Client closed)
[01:19:51] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:22:58] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958)
[01:36:20] *** Quits: bomb (~bomb@user/bomb) (Quit: ‎)
[01:42:32] *** Joins: gh00p (~gh00p@45.78.102.64)
[01:45:28] <gh00p> Okay, next question...  if I want to verify the format of a string looks like an IP address (not necessarily a valid one, just the pattern), I see that I can `string.match(foo,"%d.%d.%d.%d")`, but that just finds a matching substring. Is there a way to anchor it to the start and end of the string, like ^ and $ in regex?
[01:46:04] <gh00p> I would rather not rely on a regex library being present.
[01:46:24] <furq> ^ and $
[01:46:30] <ubq323> ^ and $ work in lua patterns
[01:46:37] <furq> also you want %d+%.
[01:46:53] <furq> or probably even something more precise
[01:47:20] <ubq323> pattern documentation is at https://www.lua.org/manual/5.3/manual.html#6.4.1 
[01:47:29] <ubq323> replace 5.3 with whatever version you are using
[01:48:05] <Elw3> And add more () if you need the numbers.
[01:48:15] <Elw3> like "(%d+)%p(%d+)%p(%d+)"
[01:48:50] <furq> please don't use %p
[01:49:29] <Elw3> :D
[01:49:38] <gh00p> I'm in 5.1.5. It doesn't seem to have that section.
[01:49:44] <Elw3> Find ALL the dots!
[01:50:19] <Elw3> match syntax should be the same still.
[01:51:22] <ubq323> it's section 5.4.1 in the 5.1 manual
[01:51:34] <ubq323> i found this by pressing ctrl+f and searching for "pattern"
[01:51:57] <gh00p> So.. I see that `.` represents "any character", but the documentation does not seem to mention `%.`. Is that magic?
[01:55:14] <furq> %x: (where x is any non-alphanumeric character) represents the character x. This is the standard way to escape the magic characters. 
[01:55:46] <gh00p> Ah, got it.
[01:56:06] <furq> the 5.1 pattern syntax is mostly identical 
[01:56:10] <gh00p> And DO I actually need parents, or is there an order of operations here similar to regex, where %d+ stands on its own?
[01:56:21] <gh00p> "^%d+%.%d+%.%d+%.%d+$" would seem to be sufficient?
[01:56:28] <furq> parens do the same thing they do in regex
[01:57:02] *** Quits: phryk (~totallyno@user/phryk) (Quit: ZNC 1.8.2 - https://znc.in)
[01:57:35] <gh00p> "^%d+%(.%d+){3}$"  :-)
[01:57:42] <gh00p> er
[01:58:02] <gh00p> "^%d+(%.%d+){3}$" .. but alas, no. :)
[01:58:39] *** Joins: phryk (~totallyno@user/phryk)
[02:08:33] <gh00p> Okay, and now .. how do I safely check for the existence of a key in a table? I tried `if data["name"] then ...` but I get an error, `attempt to index local 'data' (a number value)`. I guess I want something like awk's `if (name in data)`.
[02:09:03] <J_Darnley> data is a number not a table
[02:09:48] <ubq323> that is the correct way to check a key is in a table though
[02:09:55] <gh00p> Sorry, what is a number? In my input data["name"] is table within the data table.
[02:10:11] <J_Darnley> a type
[02:10:13] <ubq323> the error message is telling you that data is a number
[02:10:16] <ubq323> not a table
[02:11:33] <gh00p> ah. hmm.
[02:13:41] <gh00p> Er, just checking... Can I pass a table as an argument to a function?
[02:13:47] <J_Darnley> yes
[02:13:49] <gh00p> whew
[02:13:56] <J_Darnley> youy can pass any type
[02:15:18] <Elw3> print data, see wat it gives
[02:15:49] <technomancy> any type as long as it's not multivalues in a non-final arg
[02:19:33] *** Quits: Asgaroth (~Asgaroth@93.107.191.92) (Read error: Connection reset by peer)
[02:25:58] *** Quits: gh00p (~gh00p@45.78.102.64) (Quit: Client closed)
[02:26:01] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Quit: WeeChat 3.0)
[02:29:02] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958) (Ping timeout: 240 seconds)
[02:32:45] *** Quits: pizdets (~pizdets@183.182.110.6) (Ping timeout: 252 seconds)
[02:34:01] *** Joins: pizdets (~pizdets@183.182.114.253)
[02:35:49] *** Joins: pbone (~pbone@159.196.16.104)
[02:42:37] *** Quits: dreamer (~dreamer@user/dreamer) (Ping timeout: 240 seconds)
[02:45:06] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[02:46:10] *** Joins: dreamer (~dreamer@user/dreamer)
[02:50:17] *** Quits: password (~password@user/password2) (Ping timeout: 256 seconds)
[02:50:38] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Remote host closed the connection)
[02:50:59] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[03:37:27] *** Joins: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp)
[03:43:21] *** Quits: reset (~reset@user/reset) (Quit: reset)
[03:47:17] *** Quits: Hanii (~textual@2a00:23c5:c583:a300:41cb:43ff:7db5:d0eb) (Ping timeout: 240 seconds)
[03:48:31] *** Quits: ano (~ano@user/ano) (Write error: Connection reset by peer)
[03:48:31] *** Quits: vnogueira (~vnogueira@user/vnogueira) (Read error: Connection reset by peer)
[03:48:31] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Write error: Connection reset by peer)
[03:48:31] *** Quits: _ArRay_ (~ArRay_@user/array/x-1947090) (Remote host closed the connection)
[03:50:56] *** Joins: _ArRay_ (~ArRay_@user/array/x-1947090)
[03:51:01] *** Joins: vnogueira (~vnogueira@user/vnogueira)
[03:51:07] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[03:55:31] *** Joins: ano (~ano@user/ano)
[04:05:53] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Remote host closed the connection)
[04:06:14] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[04:07:38] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Remote host closed the connection)
[04:07:58] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[04:10:05] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Client Quit)
[04:12:50] *** Joins: gh00p (~gh00p@45.78.102.64)
[04:18:07] <gh00p> Hi folks!  Do tables have a limited length? I am using dofile() to load a table that is stored in a file. When I step through the table, I seem to get an error if it has 32769 items, but not if it has 32768.
[04:19:59] <technomancy> I have no idea but I wouldn't be surprised if that was a limitation of 5.1
[04:20:03] <technomancy> that version kinda sucks
[04:20:06] <Elw3> whats the error?
[04:22:27] *** Joins: walterwhip (~www@user/walterwhip)
[04:27:11] *** Joins: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98)
[04:43:27] <gh00p> Erm.. the error is: `attempt to index local 'data' (a number value)` .. but I am also seeing other weirdness..
[04:44:46] <Elw3> Stop turning your tables to numbers man.
[04:45:44] <gh00p> I just tested on another file that has only 15000 records, and got the same error. :-( I have not found any errors in an eyeball-based search.
[04:45:53] <gh00p> And `grep -c '"names"'` and `grep -c '[[]"names"[]] = {'` return the same counts.
[04:46:00] *** Joins: vnogueir- (~vnogueira@user/vnogueira)
[04:46:08] *** Quits: vnogueira (~vnogueira@user/vnogueira) (Remote host closed the connection)
[04:47:25] <gh00p> So... When I load the data file into vim, hitting % on the { on the first line does take me to the } on the last line of the file. But that } is red. Ruh roh?
[04:47:46] * gh00p laughs at the depth of his own analytical abilities
[04:48:08] <gh00p> And the file passes `luacheck`.
[04:50:54] *** Quits: gh00p (~gh00p@45.78.102.64) (Quit: Client closed)
[04:51:11] *** Quits: walterwhip (~www@user/walterwhip) (Quit: Textual IRC Client: www.textualapp.com)
[04:59:09] *** Joins: gh00p (~gh00p@45.78.102.64)
[04:59:15] <gh00p> argh. I need to get a real irc client.
[05:00:20] <technomancy> good thing there are hundreds, maybe thousands to choose from =)
[05:00:36] <gh00p> any of them written in lua? ;_
[05:00:44] <gh00p> s/_/)/
[05:00:56] <technomancy> I'm sure there are a few
[05:01:10] <technomancy> personally I've only done bots tho
[05:01:45] <Elw3> thousands might be a tad exagerated...
[05:02:59] *** Quits: gh00p (~gh00p@45.78.102.64) (Client Quit)
[05:03:02] <technomancy> it's been around since 1988
[05:03:12] *** Quits: ratchetfreak (~ratchetfr@ptr-82rtos4h1524bp3wd60.18120a2.ip6.access.telenet.be) (Ping timeout: 250 seconds)
[05:03:26] <technomancy> if you include clients that were written only for personal use I'd be shocked if it were under 4 digits
[05:03:27] *** Joins: gh00p (~gh00p@45.78.102.64)
[05:03:37] <technomancy> maybe not thousands that could still run today tho
[05:04:01] <Elw3> *cough* having two myself i see the point.
[05:06:02] <gh00p> I'm still trying to get tables to be readable, I'm a ways from implementing protocols over tcp. ;)
[05:06:26] <technomancy> https://github.com/therainingmonkey/lurk a here e we go
[05:06:37] <technomancy> gh00p: have you tried it in a newer lua version?
[05:07:00] <gh00p> I have not, I'll do that. But I will be limited to this version for the actual running of the tool.
[05:07:18] <technomancy> yeah I mean just as a form of debugging
[05:07:28] <Elw3> embeddet in something i guess?
[05:07:55] <technomancy> maybe you can use this as leverage to convince them to use a version that doesn't suck
[05:08:50] <gh00p> technomancy, have you *tried* talking to the minetest development community? :)
[05:09:27] <technomancy> gh00p: ohhhhh minetest! that uses luajit.
[05:09:35] <technomancy> that's kinda 5.1, but a much less sucky version of it
[05:09:51] <technomancy> I wouldn't be as concerned in that case
[05:09:55] <gh00p> yes... But I am writing a command line tool that reads files that are saved by luajit.
[05:10:26] <technomancy> you're not stuck using non-jit 5.1 for the command line tool are you?
[05:10:26] <gh00p> #!/usr/bin/env lua
[05:10:54] <Elw3> What is the content? Is it just a numerical list of strings?
[05:11:11] <technomancy> gh00p: the shebang doesn't tell us much if we don't know where it's running
[05:11:11] <gh00p> er, I see a few things I could be using in my shebang.. lua, lua5-1, lua-any, luac, luac5-1...
[05:11:18] <Elw3> Or a true hash- value thing.
[05:12:13] <gh00p> Elw3, it is an "xban.db" file. If you'd like to see a sample, I could pastebin some of it. The file is 8.4MB.
[05:13:42] <Elw3> hows that lua related?...
[05:14:28] <Elw3> doing a lua dofile on some db format doesnt sound smart.
[05:18:01] <Elw3> lol @ that lurk client.
[05:18:18] <Elw3> Require irc, hey look i wrote an irc client.
[05:19:27] *** Quits: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469) (Remote host closed the connection)
[05:19:51] <gh00p> Elw3, the xban.db file is pretty consistent in terms of format. I have been parsing it with awk previously, but I thought doing this the "right way" would be a useful exercise.
[05:20:24] <Elw3> Yes then show me a snippet of it.
[05:25:09] <gh00p> Elw3, here is a slightly anonymized and vastly shortened version: https://paste.debian.net/1233645/
[05:26:32] <Elw3> tableso in tables, i see
[05:28:17] <gh00p> yes. It is "names" I am looking at. My tool steps through each top-level record and searches for a given name in "names", then prints a report of alternate names.
[05:29:59] <Elw3> You havnt created this thing right?
[05:30:50] *** Joins: Gustavo6046_ (~Gustavo60@user/gustavo6046)
[05:31:37] *** Gustavo6046 is now known as Guest8247
[05:31:37] *** Quits: Guest8247 (~Gustavo60@user/gustavo6046) (Killed (tungsten.libera.chat (Nickname regained by services)))
[05:31:37] *** Gustavo6046_ is now known as Gustavo6046
[05:31:50] <gh00p> Elw3, here is what I've created so far. It works, but I still get the error.  https://paste.debian.net/hidden/ce9711fc/
[05:32:39] <gh00p> Proviso: this is the first standalone lua script I have ever written. Be gentle. :)
[05:33:30] <Elw3> Whatever works for you
[05:35:09] <Elw3> Judging from your error there might be cases where names is not a table but a number in that database
[05:37:25] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:5a9:1bfd:dfd5:df91)
[05:37:25] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:5a9:1bfd:dfd5:df91) (Changing host)
[05:37:25] *** Joins: skapata (~Skapata@user/skapata)
[05:38:37] <Elw3> So this thing should, given a name, return the ID matching that name?
[05:39:44] <gh00p> Well... As I mentioned before, `grep -c '"names"'` and `grep -c '[[]"names"[]] = {'` return the same count.
[05:40:15] <gh00p> The tool should, given a name, return all the IPs and all the names that are in the same "names" group as the one given.
[05:41:46] *** Quits: tumn (~tumn@user/tumn) (Quit: Leaving)
[05:41:57] <gh00p> The report() function gets handed "data" which is the single record of the full database, containing the embedded "names" table.
[05:43:02] *** Joins: tumn (~tumn@user/tumn)
[05:43:35] <Elw3> I would be a lassy ass here and just scar the file with string.match.
[05:44:39] <Elw3> First you tac it, that means reverse is, then find the first match of the name, and if found "	[(%d+)" for the id
[06:07:26] *** Quits: ratchet_freak (~ratchetfr@d8d8779d9.access.telenet.be) (Read error: Connection reset by peer)
[06:18:39] *** Quits: kst (~user@cpe-70-95-182-43.san.res.rr.com) (Remote host closed the connection)
[06:24:55] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353)
[06:46:24] *** Quits: Tricycle (~CGI273@lfbn-idf1-1-1376-196.w90-79.abo.wanadoo.fr) (Quit: bye)
[06:48:50] *** Quits: Elw3 (~Elw3@dynamic-002-247-241-136.2.247.pool.telefonica.de) (Quit: Leaving)
[06:50:50] *** Quits: skapata (~Skapata@user/skapata) (Read error: Connection reset by peer)
[06:55:02] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:59:03] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353)
[07:30:55] *** Quits: _ArRay_ (~ArRay_@user/array/x-1947090) (Ping timeout: 240 seconds)
[07:36:04] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 272 seconds)
[07:43:00] *** Joins: _ArRay_ (~ArRay_@user/array/x-1947090)
[07:52:38] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353) (Ping timeout: 250 seconds)
[07:56:39] *** Quits: s1b1 (~s1b1@user/s1b1) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[07:56:59] *** Joins: rgrinberg (~textual@187.223.141.66)
[07:57:18] *** Quits: rgrinberg (~textual@187.223.141.66) (Read error: Connection reset by peer)
[07:58:30] *** Joins: rgrinberg (~textual@187.223.141.66)
[07:58:53] *** Joins: nova (~novasenco@user/nova)
[08:00:48] <nova> hey. If I have a boolean - flag = true, for example - how can I concisely set a variable to nil if it is true and to something else otherwise. This does not work:  local cmd = isfun and nil or cmd  .. I guess the alternative is  local cmd = not isfun and cmd or nil  but I don't like that a lot
[08:02:24] <nova> I confusingly re-use cmd coming in from the arguments and store local cmd variable if isfun is false.
[08:05:18] <nova> meh I just do this to make it as readable as possible  if type(cmd) == 'function' then cb = cmd else ex = cmd end  ty for listening I guess
[08:05:48] <nova> and local ex, cb before that
[08:14:27] *** Joins: s1b1 (~s1b1@user/s1b1)
[08:15:09] <fcr> if flag == true then flag = nil else flag = something_else end
[08:16:15] *** Quits: gh00p (~gh00p@45.78.102.64) (Quit: Client closed)
[08:17:05] <fcr> <nova> meh I just do this to make it as readable as possible [..] <- probably by choosing a good name for ex, since by looking at just that it's not easy to know what "ex" is about
[08:17:19] <technomancy> if only if were an expression ¯\_(ツ)_/¯
[08:17:22] <fcr> I kind of guess that cb stands for callback
[08:18:04] <nova> I know. I wanted it to be a bit more concise. I got it looking nicer, though.
[08:20:30] <nova> I am now trying to merge two tables that just have numbered items. t1 = { 'a', 'b' }, t2 = { 'c', 'd' } -> t3 = { 'a', 'b', 'c', 'd' } for example. The only way I can find is for _,v in ipairs(t2) do table.insert(t1, v) end -- maybe I missed something, but that's the only way, right? There is no table function I missed?
[08:22:58] <nova> and it's okay to overwrite t1
[08:32:28] <fcr> well, if you're using lua>=5.3 there's table.move that you can use either to append or to create a new one, like in: table.move(t2,1,#t2,#t1+1,t able.move(t1,1,#t1,1,{}))
[08:33:26] <fcr> to append would be table.move(t2, 1, #t2, #t1+1, t1)
[08:35:57] <nova> huh. so I do have that. I actually found a cheeky way to avoid merging altogether. Thanks a lot for the pointer. I will remember that function
[08:48:10] *** Quits: colordro1 (~erahhal@69.53.245.255) (Ping timeout: 256 seconds)
[08:50:22] *** Joins: gh00p (~gh00p@45.78.102.64)
[08:55:57] *** Quits: vnogueir- (~vnogueira@user/vnogueira) (Remote host closed the connection)
[09:27:29] *** Joins: password (~password@user/password2)
[09:30:07] *** Joins: dvx (~dvx@5.181.92.64)
[09:32:38] *** Joins: blackbeard420_ (blackbeard@2600:3c03::f03c:91ff:fe92:3f2a)
[09:32:49] *** Quits: blackbeard420 (blackbeard@2600:3c03::f03c:91ff:fe92:3f2a) (Read error: Connection reset by peer)
[09:34:02] *** Quits: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98) (Ping timeout: 252 seconds)
[09:34:45] *** Joins: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98)
[09:35:00] *** Quits: gh00p (~gh00p@45.78.102.64) (Quit: Client closed)
[09:37:41] *** Quits: password (~password@user/password2) (Remote host closed the connection)
[09:37:54] *** Joins: gh00p (~gh00p@45.78.102.64)
[09:49:46] *** Quits: gh00p (~gh00p@45.78.102.64) (Quit: Client closed)
[09:55:24] *** Quits: ubq323 (~ubq323@user/ubq323) (Ping timeout: 240 seconds)
[10:03:42] *** Joins: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469)
[10:05:40] *** Joins: colordro1 (~erahhal@cpe-142-129-123-225.socal.res.rr.com)
[10:09:39] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[10:18:12] *** Quits: rgrinberg (~textual@187.223.141.66) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:28:53] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[10:33:04] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:a0ff:ed0f:a27c:5f4)
[10:48:14] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:a0ff:ed0f:a27c:5f4) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:14:00] *** Joins: password (~password@user/password2)
[11:18:54] *** Quits: Sauvin (~sauvin@about/linux/staff/sauvin) (Ping timeout: 256 seconds)
[11:29:21] *** Quits: fcr (~fran@r167-60-121-186.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[11:35:10] *** Joins: fcr (~fran@r167-56-79-97.dialup.adsl.anteldata.net.uy)
[11:41:26] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[11:48:13] <hsv> funcion f(i) local i = i or 0 ... end
[11:48:46] <hsv> Is 'local' superfluous here?
[11:49:23] <hsv> btw, if it matters, f() is recursive.
[12:06:43] *** Joins: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be)
[12:33:03] *** Quits: desolator (~desolator@140.238.242.25) (Read error: Connection reset by peer)
[12:33:22] *** Joins: desolator (~desolator@140.238.242.25)
[12:34:55] *** Joins: Gustavo6046_ (~Gustavo60@user/gustavo6046)
[12:36:31] *** Quits: Gustavo6046_ (~Gustavo60@user/gustavo6046) (Client Quit)
[12:36:50] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 260 seconds)
[12:57:13] <TsT> hsv no local is never superflous
[12:57:26] <TsT> oh wait
[12:58:47] <TsT> hsv yes in this case `i` is already local, then `local` is superflous ;)
[12:58:55] *** Quits: JanC (~janc@user/janc) (Remote host closed the connection)
[12:58:58] *** Joins: netlynx (~jan@94-226-69-15.access.telenet.be)
[12:59:09] *** Joins: JanC (~janc@user/janc)
[13:03:33] <TsT> hsv https://zerobin.net/?212368bd0b12c584#pscjgFPBQYGvs2c0C3YrRnSGDiMk13ZH2khCYUkQvno=
[13:03:48] <TsT> I wrote a f function with and without `local`
[13:04:19] <TsT> it produce the same bytecode
[13:04:38] <hsv> i see, thank you.
[13:05:11] <hsv> this is my code - http://codepad.org/J1RIrxkh
[13:05:27] <TsT> almost the same, there is TEST and TESTSET but it seems equal ;)
[13:06:18] <TsT> your `trace` variable is not local, it is wanted ?
[13:06:52] <TsT> or do you miss a *local* trace = trace or {} ?
[13:06:54] <hsv> i think local is superflous as you said.
[13:07:23] <TsT> with your current code the backtrace function will write trace in global env
[13:07:44] <TsT> local is superfluous ONLY because it is already the name used in the function argument
[13:07:48] <hsv> ok, this was my question.
[13:08:17] <TsT> f(i) is like a kind of f(local i)
[13:09:01] <TsT> but trace is nowhere then you trace = trace or {} is equal to
[13:09:08] <TsT> _G.trace = _G.trace or {}
[13:09:56] <TsT> conclusion local is needed for trace, local can be put or not for i
[13:10:10] <TsT> my opinion is "use `local` everywhere"
[13:11:57] *** Quits: Sauvin (~sauvin@about/linux/staff/sauvin) (Ping timeout: 240 seconds)
[13:13:55] <TsT> hsv I'm sorry ... I'm not totaly waked up, you have both trace and i f(trace, i) in your current code
[13:14:06] <TsT> then forget what I told ...
[13:14:25] <hsv> it's OK, i get it, thank you ;)
[13:14:26] <TsT> local trace and local i is superflous ... but you can put them
[13:14:35] <TsT> sorry :$
[13:14:40] <TsT> or not ;)
[13:14:49] <TsT> have a nice day !
[13:14:54] <TsT> I will take a big coffee !
[13:14:56] <TsT> :p
[13:15:51] <hsv> :D
[13:23:16] *** Quits: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98) (Ping timeout: 250 seconds)
[13:29:01] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[13:33:20] *** Quits: ano (~ano@user/ano) (Remote host closed the connection)
[13:35:26] *** Joins: Darkcoal (~user@user/Darkcoal)
[13:40:53] *** Joins: ano (~ano@user/ano)
[13:58:15] *** Quits: ano (~ano@user/ano) (Ping timeout: 240 seconds)
[14:00:44] *** Joins: ano (~ano@user/ano)
[14:03:21] *** Joins: Hanii (~textual@2a00:23c5:c583:a300:2158:8e7a:395f:b8f9)
[14:15:21] *** Joins: bomb (~bomb@user/bomb)
[14:20:20] *** Quits: Erutuon (~Erutuon@user/erutuon) (Quit: WeeChat 2.8)
[14:24:10] *** Joins: deadmarshal (deadmarsha@deadmarshal.nastycode.com)
[14:27:02] <deadmarshal> Hi. I want to make my table return 0 instead of nil when a non-existing field is accessed. what am i doing wrong? https://paste.c-net.org/PropanePressing
[14:31:26] <rjek> __newindex is for the creation of new keys, not for looking up
[14:31:28] <ratchetfreak> __newindex is used when assigning, you want __index
[14:31:32] <rjek> ^
[14:37:25] <deadmarshal> ok. with __index also says 'end' expected near '='. where does it need end it's weird. 
[14:41:40] <MattJ> deadmarshal, 'return t[k] = 0' is invalid syntax. t[k] = 0 does not return a value, so it's not something you can return. So it's expecting 'end' instead of '= 0'
[14:43:05] <MattJ> So just change it to return 0, and if you want to actually save it in the table do t[k] = 0 first
[14:45:49] <deadmarshal> MattJ: thanks 
[14:48:00] *** Quits: Darkcoal (~user@user/Darkcoal) (Ping timeout: 256 seconds)
[14:48:49] <kakolainen[m]> local tbl0 = setmetatable({},{__index=function() return 0 end}) --__index only gets called when that index is missing
[14:49:46] *** Joins: Darkcoal (~user@user/Darkcoal)
[14:50:51] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 256 seconds)
[14:50:55] <deadmarshal> kakolainen: thanks
[15:05:11] *** Quits: km (znc@user/km) (Quit: ZNC - https://znc.in)
[15:06:24] *** Quits: password (~password@user/password2) (Ping timeout: 250 seconds)
[15:10:22] *** Joins: km (znc@user/km)
[15:30:01] *** Quits: km (znc@user/km) (Quit: ZNC - https://znc.in)
[15:30:52] *** Joins: password (~password@user/password2)
[15:31:46] *** Joins: km (znc@user/km)
[15:41:05] *** Joins: ondrej008 (uid311009@id-311009.lymington.irccloud.com)
[15:42:37] *** Quits: Darkcoal (~user@user/Darkcoal) (Ping timeout: 240 seconds)
[15:42:46] *** Joins: Elw3 (~Elw3@dynamic-002-247-240-124.2.247.pool.telefonica.de)
[15:44:35] *** Joins: ubq323 (~ubq323@m-a07dtjhflz4j.it.manchester.ac.uk)
[15:44:35] *** Quits: ubq323 (~ubq323@m-a07dtjhflz4j.it.manchester.ac.uk) (Changing host)
[15:44:35] *** Joins: ubq323 (~ubq323@user/ubq323)
[15:44:55] *** Joins: Darkcoal (~user@user/Darkcoal)
[16:42:45] *** Joins: magla (~gelignite@55d4843f.access.ecotel.net)
[17:12:42] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Quit: Lost terminal)
[17:13:25] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[17:16:03] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:c42a:2dad:bcf1:880f)
[17:16:03] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:c42a:2dad:bcf1:880f) (Changing host)
[17:16:03] *** Joins: skapata (~Skapata@user/skapata)
[17:16:40] *** Quits: blackbeard420_ (blackbeard@2600:3c03::f03c:91ff:fe92:3f2a) (Quit: ZNC 1.8.2 - https://znc.in)
[17:16:51] *** Joins: blackbeard420 (blackbeard@2600:3c03::f03c:91ff:fe92:3f2a)
[17:23:27] *** Quits: Elw3 (~Elw3@dynamic-002-247-240-124.2.247.pool.telefonica.de) (Quit: Leaving)
[18:02:22] *** Quits: Hanii (~textual@2a00:23c5:c583:a300:2158:8e7a:395f:b8f9) (Remote host closed the connection)
[18:06:52] *** Joins: Hanii (~textual@2a00:23c5:c583:a300:9842:a336:7e0c:17e8)
[18:13:52] *** Joins: Tricycle (~CGI273@lfbn-idf1-1-1376-196.w90-79.abo.wanadoo.fr)
[18:15:40] *** Quits: dvx (~dvx@5.181.92.64) (Quit: dvx)
[18:30:05] *** Quits: toulene (~toulene@user/toulene) (Quit: The Lounge - https://thelounge.chat)
[18:37:43] *** Joins: parnikkapore (~parnikkap@user/parnikkapore)
[18:55:44] *** Quits: bomb (~bomb@user/bomb) (Quit: ‎)
[19:10:20] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[19:28:50] *** Quits: Hanii (~textual@2a00:23c5:c583:a300:9842:a336:7e0c:17e8) (Quit: My iMac has gone to sleep. ZZZzzz…)
[19:30:28] *** Quits: parnikkapore (~parnikkap@user/parnikkapore) (Remote host closed the connection)
[19:51:00] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 240 seconds)
[19:54:42] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[20:11:24] *** Joins: toulene (~toulene@user/toulene)
[20:17:08] *** Quits: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469) (Read error: Connection reset by peer)
[20:17:16] *** Quits: Kane (~Kane@vps-edf8dc99.vps.ovh.net) (Quit: quit)
[20:17:52] *** Joins: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469)
[20:17:58] *** Joins: Kane (~Kane@vps-edf8dc99.vps.ovh.net)
[20:19:43] *** Quits: Kane (~Kane@vps-edf8dc99.vps.ovh.net) (Client Quit)
[20:20:55] *** Joins: Kane (~Kane@vps-edf8dc99.vps.ovh.net)
[20:31:49] *** Quits: Kane (~Kane@vps-edf8dc99.vps.ovh.net) (Quit: quit)
[20:33:31] *** Joins: Kane (~Kane@vps-edf8dc99.vps.ovh.net)
[20:36:24] *** Quits: Kane (~Kane@vps-edf8dc99.vps.ovh.net) (Client Quit)
[20:37:06] *** Joins: Kane (~Kane@portal.yarg.fr)
[20:47:37] *** Joins: rgrinberg (~textual@187.223.141.66)
[21:10:40] *** Quits: Kane (~Kane@portal.yarg.fr) (Quit: quit)
[21:11:22] *** Joins: Kane (~Kane@portal.yarg.fr)
[21:13:16] *** Quits: rgrinberg (~textual@187.223.141.66) (Read error: Connection reset by peer)
[21:14:41] *** Joins: rgrinberg (~textual@187.223.141.66)
[21:36:45] *** Quits: magla (~gelignite@55d4843f.access.ecotel.net) (Quit: Stay safe!)
[21:37:57] *** Joins: Elw3 (~Elw3@dynamic-002-247-242-128.2.247.pool.telefonica.de)
[21:40:17] *** Quits: rgrinberg (~textual@187.223.141.66) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:50:10] *** Quits: colordro1 (~erahhal@cpe-142-129-123-225.socal.res.rr.com) (Ping timeout: 256 seconds)
[21:53:19] *** Joins: colordro1 (~erahhal@69.53.245.255)
[21:53:24] *** Joins: ik (uid540109@id-540109.uxbridge.irccloud.com)
[21:53:37] *** Quits: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp) (Ping timeout: 240 seconds)
[22:00:03] *** Joins: Hanii (~textual@2a00:23c5:c583:a300:a088:8a8f:b0d:82cf)
[22:03:03] *** Joins: ratchet_freak (~ratchetfr@ptr-82rtos4h1524bp3wd60.18120a2.ip6.access.telenet.be)
[22:59:12] *** Quits: Hanii (~textual@2a00:23c5:c583:a300:a088:8a8f:b0d:82cf) (Quit: Textual IRC Client: www.textualapp.com)
[23:10:52] *** Quits: ratchetfreak (~ratchetfr@d8D8779D9.access.telenet.be) (Ping timeout: 272 seconds)
[23:19:11] *** Joins: dre (~dre@2001:8003:c932:c301:403f:9f61:c28b:c314)
[23:25:03] *** Quits: colordro1 (~erahhal@69.53.245.255) (Ping timeout: 256 seconds)
[23:26:33] *** Joins: magla (~gelignite@55d4843f.access.ecotel.net)
[23:27:57] *** Joins: colordro1 (~erahhal@69.53.245.255)
[23:32:10] *** Quits: fcr (~fran@r167-56-79-97.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[23:38:11] *** Joins: fcr (~fran@r167-60-1-103.dialup.adsl.anteldata.net.uy)
[23:40:55] *** Quits: blackbeard420 (blackbeard@2600:3c03::f03c:91ff:fe92:3f2a) (Quit: ZNC 1.8.2 - https://znc.in)
[23:46:41] *** Joins: blackbeard420 (~blackbear@45.33.85.133)
[23:48:28] <nmz> I wonder why lua uses () for function calls, I think it would make more sense to use () for expressions and [] for parameters as well.
[23:48:39] <nmz> it would turn a[] be idiomatic no matter the type
[23:49:46] <nmz> just
[23:49:49] <nmz> thinking out loud
[23:49:51] <nmz> rubbish thoughts
[23:49:53] <nmz> sorry
[23:50:26] <nmz> (I also don't know what idiomatic means)
[23:57:43] <J_Darnley> () is for function calls because that is what all good languages use
[23:57:59] <J_Darnley> and woe to anyone who uses {} and "" shortcuts in Lua
