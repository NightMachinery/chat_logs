[00:06:28] *** Joins: arcatech (~arcatech@user/arcatech)
[00:08:11] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[00:12:23] *** Quits: Kodsama (~kodsama@84-217-46-206.customers.ownit.se) (Quit: The Lounge - https://thelounge.chat)
[00:13:10] *** Joins: lavaball (~Melissa@31.204.155.215)
[00:14:03] <lavaball> when i do -ss .. -t .. shoudl i also do copy:v or v:copy ... you know what i mean, to keep the quality preserved or can i just leave it and it cuts out the part i need without changing the quality?
[00:19:41] <BtbN> You can't do precise cutting without reencoding
[00:19:50] <BtbN> It'll always have to start at a keyframer
[00:19:52] <BtbN> -r
[00:20:39] *** Joins: Kodsama (~kodsama@84-217-46-206.customers.ownit.se)
[00:21:33] <kepstin> specifically, using "-c copy" with -ss and -t will work, but it won't necessarily cut at the points where you would like - instead it'll move to nearby spots where the cut can be performed.
[00:21:41] <kepstin> this might be ok for your use case, or might not.
[00:21:53] *** Quits: betelgeuse (~john2gb@94-225-47-8.access.telenet.be) (Quit: The Lounge - https://thelounge.chat)
[00:24:54] *** Joins: linjie (~linjie@58.247.210.251)
[00:24:58] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[00:25:32] *** Joins: linjie (~linjie@58.247.210.251)
[00:26:08] <lavaball> doesn't have to be exact. i always give another second front and back anyway.
[00:26:20] <lavaball> i'll cut it again in blender anyway, it's just for space conservation.
[00:26:31] <lavaball> also my question wasn't about the cutting, but about the quality.
[00:26:49] <lavaball> so will the quality stay the same without -c copy?
[00:30:05] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 258 seconds)
[00:31:21] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:35:26] <BtbN> no
[00:35:35] <BtbN> If you transcode, the quality will always get worse
[00:35:42] <BtbN> unless you encode to a lossless format, obviously
[00:36:14] *** Quits: admal (~admal@gateway/tor-sasl/admal) (Quit: leaving)
[00:36:52] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[00:37:44] *** Quits: Kodsama (~kodsama@84-217-46-206.customers.ownit.se) (Quit: The Lounge - https://thelounge.chat)
[00:45:42] *** Joins: Kodsama (~kodsama@84-217-46-206.customers.ownit.se)
[00:46:06] <lavaball> so -c copy it is.
[00:46:07] <lavaball> thanks.
[00:47:54] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[00:48:34] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[00:50:42] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[01:02:38] *** Joins: linjie (~linjie@58.247.210.251)
[01:03:18] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 252 seconds)
[01:03:41] *** Quits: lavaball (~Melissa@31.204.155.215) (Ping timeout: 252 seconds)
[01:03:57] <BtbN> keep in mind that the gop length can be almost anything
[01:04:10] <BtbN> from one second to a minute, though super long gops is rather rare
[01:04:18] <BtbN> can even be infinite
[01:05:07] *** Joins: lavaball (~Melissa@31.204.155.215)
[01:07:32] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[01:08:27] *** Quits: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com) (Quit: Leaving)
[01:11:50] <znf> Hmmm
[01:11:53] <znf> Why would this:
[01:11:57] <znf> ffmpeg -threads 1 -v verbose -nostats -vsync 1 -async 1 -init_hw_device cuda=cuda -filter_hw_device cuda -extra_hw_frames 1 -reinit_filter 1 -hwaccel nvdec -hwaccel_output_format cuda -i - -c:v h264_nvenc -aud 1 -preset 16 -b:v 5M -bufsize 10M -profile:v main -temporal-aq 1 -acodec copy -scodec copy -copy_unknown -f mpegts -
[01:12:07] <znf> cause issues like: Impossible to convert between the formats supported by the filter 'Parsed_null_0' and the filter 'auto_scaler_0'
[01:12:49] <znf> oh
[01:12:51] <znf> right, forgot
[01:13:04] <znf> need to patch the nvidia driver
[01:13:17] <furq> you're welcome
[01:15:04] <znf> you always figure it out after you ask someone else *sigh*
[01:15:23] <znf> actually, that's weird - it still fails
[01:15:27] <znf> even after patch
[01:23:28] <znf> Wonder if it's because I'm using the statically compiled ffmpeg with libnpp_static
[01:23:50] *** Quits: mikoto-chan (~mikoto-ch@ip-213-49-189-31.dsl.scarlet.be) (Ping timeout: 252 seconds)
[01:23:53] <BtbN> patch the nvidia driver? What?
[01:23:56] <BtbN> That does not sound right
[01:24:03] <znf> this: https://github.com/keylase/nvidia-patch
[01:24:19] <BtbN> That's entirely unrelated to ffmpeg filter negotiation
[01:25:34] <znf> yes, ofc, but I'm getting [h264 @ 0x5607254f5a40] No decoder surfaces left
[01:25:38] <znf> didn't see it 2 lines above
[01:25:51] <BtbN> That also seems unrelated to the nvenc restriction
[01:26:02] <BtbN> That's the decoder, which for all I know is not restricted
[01:26:24] <znf> exactly 2 video streams work
[01:26:26] <znf> a 3rd can't start
[01:26:36] <BtbN> For nvenc sessions, yes
[01:26:38] <BtbN> not for nvdec
[01:26:51] <BtbN> also, I don't think "-hwaccel nvdec" is a thing? It's cuda
[01:27:23] <znf> the command works on another machine tough
[01:27:37] <znf> but I'll try
[01:28:54] *** Joins: Fohsap (~Muimi@113.235.186.56)
[01:31:10] <lavaball> -c copy makes the video strip unpredictable somehow. like it doesn't know where exactly it beings or ends if i edit it in blender.
[01:31:35] <lavaball> not that i'm complaining. i'll just go back to encoding it again and losing some quality. it's not like i'm making indiana jones or something.
[01:31:48] <BtbN> Or just actually use a lossless format
[01:32:01] <BtbN> Quite common for intermediate files to use some lossless intra-only codec
[01:32:54] <lavaball> which would be?
[01:33:05] <lavaball> i only know flac for audio. or wav, i think.
[01:34:51] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[01:34:54] <BtbN> Whatever your video editor supports really
[01:34:58] <BtbN> most are picky as hell
[01:35:03] *** Quits: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[01:35:14] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[01:35:16] <BtbN> Apple uses Prores iirc, BlackMagic DNxHD or something
[01:36:07] <znf> I'm stumped on this, I keep getting "No decoder surfaces left", even tough I've tested this command and it worked fine on another machine
[01:36:33] <BtbN> Have you tried just increasing the amount of surfaces?
[01:36:47] <znf> not sure how do I do that?
[01:36:53] <BtbN> There's a flag for that
[01:36:56] *** Quits: Buster_ (~Buster@46.160.36.66) ()
[01:36:58] <BtbN> extra-hwframes or something
[01:38:02] <znf> ah, that one
[01:38:06] <znf> ok, it works. but... why
[01:38:31] <BtbN> Because your filter/encode chain seems to need more than the default
[01:38:37] <znf> to be fair - we've never used a 1050 Ti until now
[01:38:52] <znf> our other 2 machines use gtx 1060
[01:38:54] <BtbN> This is not hardware related.
[01:39:18] <BtbN> Purely a matter of your encode/filter chain buffering too many surfaces
[01:39:41] <znf> but the same command works on another machine, with a different gpu/driver, without any filter, I'm not sure why it would need more surfaces in this case
[01:40:13] <znf> and to be clear: even with the same dvb source
[01:40:15] <BtbN> Maybe you just happened to use a input sample without frame reordering there
[01:40:17] <znf> which is why I'm confused
[01:41:20] <znf> the only difference for the streams that are transcoding on the other machines is that they are using an old ffmpeg binary - before the nvidia bframes default thingie which you mentioned last time
[01:41:31] <znf> would bframes need more surfaces?
[01:43:16] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 252 seconds)
[01:43:19] *** Quits: omegatron (~some@p5b056bc7.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[01:44:27] *** Quits: elenril (~elenril@tutturu.red.khirnov.net) (Ping timeout: 244 seconds)
[01:44:45] *** Joins: elenril (~elenril@tutturu.red.khirnov.net)
[01:45:55] <znf> yup - that seems to be the case
[01:46:18] <znf> if I set -bf 0, I can run with -extra_hw_frames 3 like I used to do before
[01:47:10] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[01:48:01] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[01:48:50] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[01:49:13] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 252 seconds)
[01:52:09] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[01:53:06] *** Quits: Mavrik (~Mavrik@virag.si) (Remote host closed the connection)
[01:53:08] <BtbN> Yes, re-ordering will make the encoder buffer more frames. Naturally.
[01:53:21] *** Joins: Mavrik (~Mavrik@virag.si)
[01:54:31] <znf> now I'm also curious as to why leaving bframes on (and running with extra_hw_frames=60) dropped my vram usage from ~218MiB to ~162MiB
[01:54:48] *** Quits: chrysanthematic (~chrysanth@user/chrysanthematic) (Quit: chrysanthematic)
[01:55:04] <znf> I'd be inclined to think that needing more data in vram to analyze, would need more memory
[01:56:28] <znf> ...but for some reasons, now I'm using 40% CPU for this transcode
[01:57:43] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[01:58:50] <znf> oh right, forgot to specify h264_cuvid
[01:59:31] <znf> but I'm not sure why I have to specify it, the wiki doesn't mention in https://trac.ffmpeg.org/wiki/HWAccelIntro
[02:01:27] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[02:02:39] <BtbN> The hard limit on surfaces is also 32
[02:02:45] <BtbN> so 60 makes not a whole lot of sense
[02:03:09] <znf> oh, is there?
[02:03:19] <BtbN> It literally prints a fat warning if you exceed 32
[02:03:59] <znf> I'm spawning ffmpeg via tvheadend, so it's a bit hard to see all the stuff that gets printed :)
[02:04:29] <BtbN> And the last time I tried, it also even just straight up bailed
[02:04:35] <znf> I'm just very overwhelmed on how many switches affect the amount of VRAM used
[02:04:37] <BtbN> as in, the driver crashes
[02:04:56] <znf> didn't complain here with 60
[02:05:05] <znf> slow vs. fast preset is 208MiB vs. 355MiB
[02:05:11] <BtbN> Are you using the deprecated decoder?
[02:05:22] <BtbN> That one does not care about the extra surfaces thing. That's only for the proper one
[02:05:37] <znf> right now I'm using:
[02:05:38] <znf> ffmpeg -threads 2 -v verbose -nostats -init_hw_device cuda=cuda:0 -hwaccel_device cuda -filter_hw_device cuda -extra_hw_frames 5 -hwaccel cuda -hwaccel_output_format cuda -c:v h264_cuvid
[02:05:53] <znf> (but I used 60 earlier when I said)
[02:05:56] <BtbN> Yeah, h264_cuvid straight up does not have that issue, since it's always making a copy
[02:06:02] <BtbN> while the proper codec avoid the extra copy
[02:06:18] <BtbN> and extra hw frames does nothing for old cuvid
[02:06:36] <znf> which is the new one?
[02:06:46] <znf> -decoders | grep 264 only shows cuvid
[02:06:56] <BtbN> Just the hwaccel
[02:07:06] <BtbN> The old cuvid decoders are effectively deprecated
[02:07:40] <znf> when I remove -c:v h264_cuvid it uses 40% CPU, as if it's decoding in software
[02:07:41] <BtbN> http://git.videolan.org/?p=ffmpeg.git;a=blob;f=libavcodec/nvdec.c;h=251be039a833c30f5a6769febc4377b14340631c;hb=HEAD#l408 there's the warning, it'd definitely there
[02:08:20] *** Quits: finsternis (~Y@23.226.237.192) (Remote host closed the connection)
[02:08:26] <BtbN> Check the log for what it's doing
[02:08:49] <znf> let me use it outside of tvheadend, it's getting cumberstone to journalctl -f
[02:08:57] <BtbN> The proper hwaccel can fall back to software if hwaccel init fails
[02:09:06] <BtbN> like it likely would, if you request 60 more surfaces
[02:09:35] *** Quits: Hello72 (~Hello71@wireguard/contributor/hello71) (Quit: Hello72)
[02:09:53] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 265 seconds)
[02:10:56] <znf> yup
[02:11:21] <znf> you're right
[02:12:41] <znf> but now it won't start
[02:12:56] <znf> [h264 @ 0x55f0c46c4d80] Using more than 32 (45) decode surfaces might cause nvdec to fail.
[02:13:01] <znf> I passed 32
[02:13:32] <znf> what's params.ulNumDecodeSurfaces ?
[02:14:33] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[02:15:26] <BtbN> unsurprisingly, the number of decode surfaces
[02:15:40] <BtbN> You passed 32 as _extra_
[02:15:44] <znf> ok, so, if I pass -extra_hw_frames 20, it says:
[02:15:44] <BtbN> It does not start at 0
[02:15:45] <znf> [h264 @ 0x562a6e904d40] Using more than 32 (33) decode surfaces might cause nvdec to fail.
[02:15:45] <znf> [h264 @ 0x562a6e904d40] Try lowering the amount of threads. Using 1 right now.
[02:15:47] <znf> oh
[02:16:07] <znf> but if I pass "19", it complains about  decoding surfaces
[02:16:18] <znf> so..?!
[02:16:34] <BtbN> Might be impossible to do encoding without a copy then
[02:16:42] <BtbN> Throw some no-op scale filter in there and turn off passthrough
[02:17:12] <znf> like scale_cuda ?
[02:18:01] <BtbN> Yes, not many other options for cuda
[02:18:45] <BtbN> make sure to set the algorithm to nearest so it doesn't do any pointless work or messes with the frame
[02:20:59] <znf> Added -vf scale_cuda=interp_algo=nearest, but same issue with surfaces
[02:21:41] <BtbN> well, need to turn off passthrough, or that does literally nothing
[02:23:51] <znf> ok, that worked, but I'm not exactly happy with 359MiB VRAM usage to be fair
[02:24:17] <BtbN> well, it needs to make a copy of every frame
[02:24:24] <BtbN> the old cuvid decoder does the exact same thing
[02:24:29] <BtbN> in every case
[02:24:39] <znf> but somehow that doesn't use that much vram, so what gives?
[02:24:57] <BtbN> Are you still telling it to allocate a boatload of extra frames?
[02:25:04] <znf> no, I removed it
[02:25:18] <BtbN> Then I have no idea. 400MB for a 1080p transcode seems sensible enough to me though
[02:25:20] <znf> wait, I had profile=slow, let me see again
[02:25:33] <BtbN> profile=slow?
[02:25:37] <BtbN> You mean preset?
[02:25:39] <znf> sorry, -preset slow
[02:25:40] <znf> yes
[02:26:26] *** Joins: Hello71 (~Hello71@wireguard/contributor/hello71)
[02:26:43] <znf> ah, there we go, 210MiB
[02:27:16] *** Quits: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[02:28:36] *** Quits: lavaball (~Melissa@31.204.155.215) (Remote host closed the connection)
[02:29:33] *** Joins: chrysanthematic (~chrysanth@user/chrysanthematic)
[02:29:34] <znf> just 6% CPU because I'm transcoding audio, too
[02:30:04] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 258 seconds)
[02:31:29] *** Quits: chrysanthematic (~chrysanth@user/chrysanthematic) (Client Quit)
[02:31:45] <BtbN> the slow preset will enable a bunch of stuff that significantly improves quality though
[02:31:52] <BtbN> can also turn on rc-lookahead on top
[02:32:00] <BtbN> will buffer even more frames, for even more quality
[02:32:38] <znf> quality is not a big concern, due to this damn GPU shortage, I kind of need a trade-off between VRAM and number of streams
[02:33:25] <BtbN> Get a used pascal quadro or other server card
[02:34:24] <BtbN> Or Turing if you can get it, but that'll be expensive, cause still current gen
[02:34:37] <znf> those are damn expensive tough :)
[02:34:45] <BtbN> https://www.ebay.de/itm/124680174157?hash=item1d07847a4d:g:m9YAAOSw-URgXM8S something like this
[02:34:57] <BtbN> no limit on sessions, plenty of VRAM
[02:34:58] <znf> used Pascal Quadro's go for $2000 or so
[02:35:13] <znf> yeah, that's sexy, but that's... waaaaay outside of our budget
[02:36:09] <znf> The Mxxx quadros are maxwell, right?
[02:36:36] <znf> yes they are
[02:40:21] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:2132:cd52:1e4a:f46a) (Ping timeout: 272 seconds)
[02:41:16] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[02:41:42] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[02:43:22] <BtbN> nvenc seriously sucks before Pascal
[02:43:27] <BtbN> and got really good with Turing
[02:45:05] <BtbN> If you're doing this at all profesionally, i.e. there's income involved, you will need a Quadro card anyway
[02:45:15] <BtbN> cause that "driver patch" can get you in serious legal trouble
[02:45:33] *** Joins: arcatech (~arcatech@user/arcatech)
[02:45:36] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:2132:cd52:1e4a:f46a)
[02:50:38] <znf> oh, we're not doing it professionally, we're literally setting it up for friends and family, hence why our funds are limited
[02:51:00] <znf> we barely could find a used 1050 Ti among friends at this point
[02:53:44] <znf> We've set up some machines with access to DVB-C in some locations, but the area where my friend lives and hosts them has exactly 2 ISPs, and we've had days where either one or the other ISP went down for a whole day, like monday ISP 1 dropped, tuesday ISP 2 dropped... so now we've deployed a new machine in another location on a more stable connection, we basically have duplicate streams right now just for redundancy
[02:54:30] <znf> As long as we're not trying to make money directly from this, I'm hoping we'll be ok - it's mostly just for some buddies that are in/out of the country and they'd like to watch some local TV from time to time
[02:55:24] <znf> but not having any way to control how many people watch X stream from Y source, and tvheadend NOT reusing the transcode if 2 people watch the same channel, I'm trying to not run out of vram
[02:57:03] <znf> Follow-up question
[02:57:16] <znf> I'm using: -filter_complex "[0:s] format=yuva420p,hwupload_cuda [sub]; [0:v] scale_npp=format=yuv420p [main]; [main][sub] overlay_cuda [v]"
[02:57:54] <znf> But I'm getting complaints about the size:
[02:57:55] <znf> [graph 0 input from stream 0:2 @ 0x5610de0f3340] filter context - w: 704 h: 576 fmt: 28, incoming frame - w: 720 h: 576 fmt: 28 pts_time: 252.912
[02:57:59] <znf> spawn: [graph 0 input from stream 0:2 @ 0x5610de0f3340] Changing video frame properties on the fly is not supported by all filters.
[02:58:36] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Remote host closed the connection)
[02:58:43] <znf> What exactly is it complaining about? the dvb_sub track has no frame size set?
[02:59:29] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[03:08:41] <znf> Also, for MPEG2 streams (SD), it seems it's just much better (resource-wise) to just decode and overlay a subtitle directly on the software filters, rather than hwupload on the subtitle, then scale_npp, then overlay_cuda etc.
[03:10:23] <BtbN> decoding mpeg2 is so damn cheap that I can see the hwupload overhead being significant
[03:13:54] *** Joins: Vonter (~Vonter@user/vonter)
[03:14:22] <znf> yup
[03:19:20] *** Joins: ops (~ops@5.2.77.173)
[03:19:20] *** Quits: ops (~ops@5.2.77.173) (Changing host)
[03:19:20] *** Joins: ops (~ops@user/echelon)
[03:19:20] *** Quits: ops (~ops@user/echelon) (Excess Flood)
[03:21:06] *** Joins: ops (~ops@5.2.77.173)
[03:21:06] *** Quits: ops (~ops@5.2.77.173) (Excess Flood)
[03:22:13] *** Joins: ops (~ops@user/echelon)
[03:29:33] *** Joins: finsternis (~X@23.226.237.192)
[03:32:14] *** Joins: betelgeuse (~john2gb@94-225-47-8.access.telenet.be)
[03:33:14] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[03:46:52] *** Joins: jkl (~jkl@2600:1700:2420:6d10::3f1)
[03:55:30] *** Joins: tempora (~tempus@2a00:dcc0:dead:ba62:a1b2:c3d4:e5f6:cafe)
[04:05:20] *** Joins: omegatron (~some@p5b056bc7.dip0.t-ipconnect.de)
[04:05:46] *** Quits: tempora (~tempus@2a00:dcc0:dead:ba62:a1b2:c3d4:e5f6:cafe) (Quit: Bouncing away)
[04:07:50] *** Joins: tempora (~tempus@2a00:dcc0:dead:ba62:a1b2:c3d4:e5f6:cafe)
[04:19:58] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 244 seconds)
[04:21:51] *** Joins: waleee (~waleee@h-98-128-228-119.NA.cust.bahnhof.se)
[04:24:06] *** Joins: RougeR (~RougeR@user/rouger)
[04:25:40] *** Joins: der_richter1 (~Akemi@p2e580735.dip0.t-ipconnect.de)
[04:27:06] *** Quits: der_richter (~Akemi@p4fde494f.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[04:27:47] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[04:28:03] *** Joins: mickey (~user@user/mickey)
[04:43:33] *** Quits: jkl (~jkl@2600:1700:2420:6d10::3f1) (Ping timeout: 265 seconds)
[04:48:00] *** Quits: betelgeuse (~john2gb@94-225-47-8.access.telenet.be) (Quit: The Lounge - https://thelounge.chat)
[05:04:07] *** Joins: linjie (~linjie@58.247.210.251)
[05:08:13] *** Quits: llrcombs (rcombs@irc.rcombs.me) (Quit: ZNC - http://znc.in/ZNC)
[05:08:47] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 258 seconds)
[05:09:29] *** Quits: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net) (Ping timeout: 268 seconds)
[05:10:45] *** Joins: rcombs (rcombs@irc.rcombs.me)
[05:11:44] *** rcombs is now known as llrcombs
[05:13:11] *** llrcombs is now known as rcombs
[05:31:24] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:31:26] *** Quits: waleee (~waleee@h-98-128-228-119.NA.cust.bahnhof.se) (Ping timeout: 265 seconds)
[05:35:48] *** Joins: vlm (~vlm@user/vlm)
[05:40:05] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Remote host closed the connection)
[05:40:23] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[05:45:57] *** Joins: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net)
[05:54:42] *** Quits: RougeR (~RougeR@user/rouger) (Quit: Leaving)
[05:54:47] *** Quits: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net) (Quit: The Lounge - https://thelounge.chat)
[05:55:04] *** Joins: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net)
[06:05:09] *** Joins: pong (~loop@user/pong)
[06:17:32] *** Quits: pong (~loop@user/pong) (Quit: leaving)
[06:17:54] *** Quits: der_richter1 (~Akemi@p2e580735.dip0.t-ipconnect.de) (Quit: Leaving.)
[06:21:32] *** Joins: pong (~loop@user/pong)
[06:26:04] *** Quits: omegatron (~some@p5b056bc7.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[06:44:05] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[06:50:32] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 252 seconds)
[07:09:23] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[07:14:52] *** Joins: blue_penquin (~blue_penq@gateway/tor-sasl/bluepenquin/x-11613850)
[07:21:54] *** Joins: jos1 (~jos3@host-091-097-184-168.ewe-ip-backbone.de)
[07:24:25] *** Quits: jos2 (~jos3@dyndsl-091-096-036-192.ewe-ip-backbone.de) (Ping timeout: 244 seconds)
[07:24:43] *** Joins: aquijoule_ (~richbridg@213-225-10-42.nat.highway.a1.net)
[07:26:13] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[07:27:18] *** Quits: richbridger (~richbridg@213-225-3-25.nat.highway.a1.net) (Ping timeout: 264 seconds)
[07:56:28] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[07:57:43] *** Quits: blue_penquin (~blue_penq@gateway/tor-sasl/bluepenquin/x-11613850) (Remote host closed the connection)
[08:01:40] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Remote host closed the connection)
[08:02:01] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[08:16:12] *** Joins: Tsaukpaetra (~Tsaukpaet@2600:8800:1580:11e:b916:36a8:a711:cb14)
[08:18:10] <Tsaukpaetra> Hello, I'm having a hard time figuring out how to use the concat filter with the scale2ref filter. I'm trying to concat three videos, scaling the first and last video to the resolution of the second, but I end up with three video streams and... not what I want.
[08:18:38] <Tsaukpaetra> My filter string is: [0:v][1:v]scale2ref=oh*mdar:h=in_h:[v0];[2:v][1:v]scale2ref=oh*mdar:h=in_h:[v2]; [v0] [0:a] [1:v] [1:a] [v2] [2:a] concat=n=3:v=1:a=1 [v] [a]
[08:19:40] <Tsaukpaetra> Magic is happening and the scale2ref:ref outputs are being mapped to the output for some reason?
[08:22:17] <znf> I'm not an expert, but I'm not sure you can do that magic with the concat filter
[08:23:53] <znf> I'm too sleepy to figure out that filter_complex
[08:25:03] <Tsaukpaetra> Yeah, it was kinda-working before I had the second scale3ref, I think? But still had too many output streams. :/
[08:26:20] <Tsaukpaetra> Essentially, scale first video according to second video, output as [v0], scale third video according to second video, output as [v2], concatenate [v0], second video, [v2].
[08:26:27] <Tsaukpaetra> That's the intent anyways...
[08:27:35] <znf> I have no advice for you, but have you tried turning on verbose logging?
[08:28:12] <znf> you'd see some bits into the filter logic
[08:28:19] <znf> of the*
[08:29:10] <AMM> Tsaukpaetra: did you -map [v] -map [a]
[08:29:47] <Tsaukpaetra> Yeah, I did the two map commands, which is why I'm confused the ref outputs are appearing. XD
[08:30:07] <znf> wish you could build graph2dot directly into ffmpeg by default, without patching the code
[08:30:45] <AMM> Remove the trailing : in the scale2refs?
[08:30:58] <AMM> and yeah just verbose log to see what you're building
[08:31:25] <Tsaukpaetra> I'm thinking it's just adding the un-connected outputs?
[08:32:43] <AMM> Oh yeah s2r has two outputs
[08:33:34] <AMM> Just add in a label to hold onto the reference stream
[08:33:39] <Tsaukpaetra> Right, but I can't "drop" them.
[08:33:45] <AMM> and then pass it for the other s2r and then concat
[08:33:51] <Tsaukpaetra> If I have a label that nothing else wants it doesn't like it.
[08:33:58] <AMM> Yes, so you use it
[08:34:57] <AMM> [0v][1v]s2r[v0][v1]; [2v][v1]s2r[v2][v1]; ...
[08:35:30] <Tsaukpaetra> You can duplicate names?
[08:35:42] <AMM> You're not duplicating anything
[08:35:56] <AMM> You're just furthering the chain for the label
[08:36:17] <Tsaukpaetra> Ok.
[08:39:14] <Tsaukpaetra> That.... well at least the stream mapping summary looks correct. :thumbsup:
[08:39:36] <Tsaukpaetra> Now gotta wait half an hour to see what happens. :D
[08:39:58] <AMM> I mean you could stop it early too to check that it's valid
[08:40:00] <AMM> then do the rest
[08:40:51] <furq> Tsaukpaetra: scale2ref[v2][x];[x]nullsink;
[08:41:01] <furq> if you want to send a label nowhere
[08:41:17] <Tsaukpaetra> Well the third video is the end so I have to finish it. ;)
[08:41:39] <furq> idk where you're sending the second scale2ref output to but ok
[08:41:54] <furq> also yeah you can just pipe it to mpv or something if you want to check it's working
[08:42:00] <furq> generally a good idea with complex filterchains
[08:42:08] <furq> or complicated, rather
[08:43:24] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:43:55] <furq> oh never mind i see it now
[08:45:55] <znf> Am I reading this patch set wrong? https://patchwork.ffmpeg.org/project/ffmpeg/list/?series=1297
[08:46:02] <znf> Shouldn't it add a -dump_filtergraph option to ffmpeg?
[08:55:24] *** Quits: HarveyPwca (~HarveyPwc@2601:246:c180:a570:29df:3b00:ad0e:3a06) (Quit: Leaving)
[08:57:56] <Tsaukpaetra> It... looks like it all worked. Woot!
[08:58:00] <znf> Oh. It adds it.
[08:58:06] <znf> It just doesn't print it in -h
[08:59:49] *** Quits: pong (~loop@user/pong) (Remote host closed the connection)
[09:00:14] *** Joins: pong (~loop@user/pong)
[09:06:11] *** Joins: linjie (~linjie@58.247.210.251)
[09:10:36] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 252 seconds)
[09:22:38] *** Quits: Tsaukpaetra (~Tsaukpaet@2600:8800:1580:11e:b916:36a8:a711:cb14) (Quit: Leaving)
[09:49:45] *** Quits: Nact (~l@host-85-27-121-83.dynamic.voo.be) (Quit: Konversation terminated!)
[10:10:15] *** Joins: blue_penquin (uid505269@id-505269.brockwell.irccloud.com)
[10:23:41] *** Quits: arcatech (~arcatech@user/arcatech) (Remote host closed the connection)
[10:40:47] *** Quits: Asterisk (~asterisk@69.195.134.172) (Ping timeout: 252 seconds)
[10:43:51] *** Joins: Asterisk (~asterisk@69.195.134.172)
[10:49:18] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[11:28:00] *** Quits: metta (~Advanced@2a01:4f8:1c0c:49df::1) (Quit: metta)
[11:28:15] *** Joins: upekkha (~Advanced@2a01:4f8:1c0c:49df::1)
[11:44:52] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[11:45:41] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[11:47:49] *** Joins: linjie (~linjie@58.247.210.251)
[12:02:41] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[12:03:23] *** Joins: linjie (~linjie@58.247.210.251)
[12:08:13] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[12:17:17] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Quit: leaving)
[12:18:25] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[12:29:49] *** Joins: mikoto-chan (~mikoto-ch@ip-213-49-189-31.dsl.scarlet.be)
[12:34:08] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[12:36:50] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 252 seconds)
[12:38:29] *** Joins: mixfix41 (~homefame@c-98-240-233-64.hsd1.mn.comcast.net)
[12:40:22] <mickey> i concat some thousands of files at 10 fps into a single mp4, and then thousands more at 20 fps into another another mp4, and then i need to PIP them, and they desynced after a couple of minutes
[12:40:33] <mickey> i think the desync is because of the fps
[12:40:37] <mickey> like the fps difference
[12:41:14] <mickey> what can i do about it? i dont mind too much about quality (especially of the 20 fps file) it's just a teacher in a small pip window
[12:41:30] *** Joins: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl)
[12:42:42] <mickey> also, the 20 fps video has the audio for both files. is it likely that the audio is also desycned because of the fps difference?
[12:43:14] <mickey> or am i completely lost here because a second is a second regardless of the fps
[12:44:13] *** Joins: linjie (~linjie@58.247.210.251)
[12:46:38] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[12:48:51] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[12:57:38] *** Joins: Atsuko (~x@94.242.250.86)
[12:59:27] *** Joins: Atsuko_ (~x@94.242.250.86)
[13:01:07] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[13:03:38] *** Quits: mixfix41 (~homefame@c-98-240-233-64.hsd1.mn.comcast.net) (Changing host)
[13:03:38] *** Joins: mixfix41 (~homefame@user/mixfix41)
[13:04:49] <mickey> oof. i reencoded the 20fps on into 10fps but that didnt help much.
[13:05:38] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 252 seconds)
[13:37:22] *** Quits: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883) (Remote host closed the connection)
[13:44:23] *** Joins: jkl (~jkl@2600:1700:2420:6d10::3f1)
[13:58:00] *** Joins: linjie (~linjie@58.247.210.251)
[14:02:22] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 258 seconds)
[14:22:21] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (*.net *.split)
[14:22:21] *** Quits: pong (~loop@user/pong) (*.net *.split)
[14:22:21] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (*.net *.split)
[14:22:21] *** Quits: mickey (~user@user/mickey) (*.net *.split)
[14:22:22] *** Quits: Hello71 (~Hello71@wireguard/contributor/hello71) (*.net *.split)
[14:22:22] *** Quits: admal (~admal@gateway/tor-sasl/admal) (*.net *.split)
[14:22:48] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[14:22:49] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[14:22:49] *** Joins: Hello71 (~Hello71@wireguard/contributor/hello71)
[14:23:03] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[14:23:48] *** Joins: pong (~loop@user/pong)
[14:24:01] *** Joins: mickey (~user@user/mickey)
[14:40:59] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Ping timeout: 244 seconds)
[14:42:25] *** Quits: admal (~admal@gateway/tor-sasl/admal) (Remote host closed the connection)
[14:42:30] *** Joins: mickey2 (~user@user/mickey)
[14:42:32] *** Joins: admal_ (~admal@gateway/tor-sasl/admal)
[14:42:33] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[14:43:05] *** Quits: mickey (~user@user/mickey) (Remote host closed the connection)
[14:43:05] *** mickey2 is now known as mickey
[14:53:21] *** Quits: mikoto-chan (~mikoto-ch@ip-213-49-189-31.dsl.scarlet.be) (Ping timeout: 258 seconds)
[14:54:33] *** Joins: Flabb (~Flabb@89.169.84.117)
[14:55:42] *** Joins: der_richter (~Akemi@p2e580735.dip0.t-ipconnect.de)
[15:04:44] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Ping timeout: 244 seconds)
[15:04:44] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Ping timeout: 244 seconds)
[15:05:19] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[15:05:44] *** Joins: mickey (~user@user/mickey)
[15:05:46] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[15:05:58] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[15:07:25] *** Quits: Retr0id (~Retr0id@user/retr0id) (Quit: Ping timeout (120 seconds))
[15:07:57] *** Joins: Retr0id (~Retr0id@user/retr0id)
[15:09:41] *** Quits: Flabb (~Flabb@89.169.84.117) (Read error: Connection reset by peer)
[15:10:14] *** Joins: Flabb (~Flabb@89.169.84.117)
[15:11:56] *** Quits: mickey (~user@user/mickey) (Remote host closed the connection)
[15:12:23] *** Joins: mickey (~user@user/mickey)
[15:16:31] *** Quits: mickey (~user@user/mickey) (Client Quit)
[15:16:39] *** Joins: mickey (~user@user/mickey)
[15:23:33] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[15:24:05] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Quit: _)
[15:24:18] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[15:24:31] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[15:24:39] *** Joins: mickey (~user@user/mickey)
[15:24:55] *** Quits: jkl (~jkl@2600:1700:2420:6d10::3f1) (Ping timeout: 268 seconds)
[15:31:59] *** Quits: pong (~loop@user/pong) (Remote host closed the connection)
[15:33:07] *** Joins: pong (~loop@user/pong)
[15:40:01] *** Joins: omegatron (~some@p5b056bc7.dip0.t-ipconnect.de)
[15:48:59] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[15:49:39] <qwedfg> does x264 work ok on arm, how fast it is, I know this is stupid question
[15:49:48] <qwedfg> but I am gonna figure it now
[15:49:57] <qwedfg> I'll check arm spot instance
[15:50:28] <furq> it works
[15:50:37] <furq> impossible to answer whether it works fast enough for you
[15:51:23] *** Quits: Nex8192 (~Nex8192@user/nex8192) (Ping timeout: 272 seconds)
[15:51:43] <JEEB> qwedfg: if you have NEON it's relatively alright, and if you are on aarch64 it's even better
[15:52:09] <JEEB> although you might want to compare x264's fast presets versus openh264. at least at some point while the openh264 encoder is baseline only, it had some ARM optimizations
[15:53:06] <bencoh> last time I checked (~6y ago) it performed better than I expected on arm(32)
[15:53:38] <bencoh> I used to live transcode a stream on the imx6q
[15:53:48] <furq> it performed terribly for me on x86 (386sx)
[15:54:43] <bencoh> (iirc it was HD->SD, but I don't quite remember the details anymore)
[15:57:05] *** Joins: polichouz (~Yoann@2a01:cb19:8ece:3a00:f00c:4007:65ca:b542)
[15:58:22] *** Joins: Nex8192 (~Nex8192@user/nex8192)
[16:00:47] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[16:01:32] <polichouz> Hello. I've a problem with libvmaf and mp4 container. Score from distorded.mkv and reference.mkv = 99.000. Score from distorded.mp4 and reference.mkv = 84.000. I'm using a lossless video encoder from both distorded file. framehash from distorded files and reference file give me the same result. I can't figure out why the mp4 container get a such bad score.
[16:02:43] <JEEB> most likely you're enjoying the framesync logic in libavfilter
[16:02:55] <JEEB> at some point libavfilter stopped just taking in frames but instead based itself on timestamps
[16:03:02] <JEEB> so if the timestamps of frames are not exactly the same
[16:03:11] <JEEB> you can end up having unwanted differences
[16:04:03] <JEEB> and yes, those differences might just come from the fact that matroska has time base of like 1:1000 and mp4 has another one
[16:11:47] *** Quits: polichouz (~Yoann@2a01:cb19:8ece:3a00:f00c:4007:65ca:b542) (Ping timeout: 268 seconds)
[16:12:18] *** Joins: polichouz (~Yoann@2a01:cb19:8ece:3a00:f00c:4007:65ca:b542)
[16:13:18] <polichouz> JEEB, Thanks. I'll try out some filtering to fix this.
[16:13:44] <polichouz> More filter to fix libavfilter. Yeah, seems legit.
[16:18:41] <JEEB> polichouz: so basically I think settb/setpts might help, just to force the timestamps. the framesync logic is trying too hard to be useful for more complex cases which ends up with it actually doing things not as wanted for such simple cases where you just have two streams with the same amount of frames
[16:26:46] <polichouz> JEEB, Never played with settb filter. I'll try this. Thanks.
[16:35:45] *** Joins: testyes (uid258031@id-258031.brockwell.irccloud.com)
[16:35:49] *** Quits: pong (~loop@user/pong) (Quit: leaving)
[16:36:39] *** Joins: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883)
[16:37:15] <polichouz> It worked. Script : https://pastebin.com/PRmHwv00
[16:37:39] <polichouz> Thanks again.
[16:38:20] *** Joins: pong (~loop@user/pong)
[16:39:09] <JEEB> great
[16:43:09] <polichouz> The more I know about ffmpeg and popular encoders, the more I realize I know nothing about them. I play with them for almost 20 years!
[16:43:31] *** Quits: pong (~loop@user/pong) (Quit: leaving)
[16:44:10] *** Joins: pong (~loop@user/pong)
[16:47:35] *** Quits: blue_penquin (uid505269@id-505269.brockwell.irccloud.com) ()
[16:59:23] *** Joins: blaze (~blaze@user/blaze)
[17:00:42] *** Quits: blaze (~blaze@user/blaze) (Client Quit)
[17:00:49] *** Joins: mikoto-chan (~mikoto-ch@ip-213-49-189-31.dsl.scarlet.be)
[17:21:47] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[17:28:59] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[17:29:11] *** Quits: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[17:31:10] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[17:43:39] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 265 seconds)
[17:49:46] *** Joins: Trieste_ (T@user/pilgrim)
[17:50:27] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 272 seconds)
[17:56:03] *** Trieste_ is now known as Trieste
[17:59:44] *** Joins: linjie (~linjie@58.247.210.251)
[18:02:43] *** Quits: Fohsap (~Muimi@113.235.186.56) (Ping timeout: 258 seconds)
[18:04:06] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 252 seconds)
[18:07:39] <qwedfg> this c6g arm gravitron aws instance has 94% speed of epyc something 7r32 in x264
[18:08:00] <qwedfg> and you can request spot instance like quad core for 6 cents per hour in my area
[18:08:06] <qwedfg> in us should be cheaper
[18:08:48] <qwedfg> and epyc on-demand is $0.154 per hour and it's slightly faster
[18:09:05] <qwedfg> this would be good for some 4k footage
[18:09:20] <qwedfg> but I dont think in h265 because I'd bankrupt
[18:10:25] <BtbN> That's still like 50$ a month for a dual core machine
[18:10:26] *** Quits: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net) (Quit: The Lounge - https://thelounge.chat)
[18:10:29] <BtbN> seems like a bad deal to me
[18:16:32] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Read error: Connection reset by peer)
[18:20:46] <qwedfg> yeah but that's for occasional use
[18:22:07] <qwedfg> so when you have fo example only 5 days of transcoding per month
[18:33:14] *** Quits: budo (~budo@c-24-62-207-85.hsd1.ma.comcast.net) (Ping timeout: 252 seconds)
[18:44:04] *** Quits: witchcraft (~witch@user/witch) (Ping timeout: 252 seconds)
[19:04:25] *** Quits: testyes (uid258031@id-258031.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[19:04:33] *** Quits: NaviTheFairy (~Squirrel@user/navithefairy) (Ping timeout: 272 seconds)
[19:08:07] *** Joins: NaviTheFairy (~Squirrel@user/navithefairy)
[19:09:16] <polichouz> What's the point of a monthly rented server for occasional use ?
[19:14:00] <kepstin> AWS servers aren't monthy cost, they're per-minute.
[19:19:16] *** Quits: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[19:22:05] <znf> BtbN, I see you added mbedtls - this enables https:// support in ffmpeg?
[19:23:02] <BtbN> It's Linux-only though
[19:23:08] <BtbN> Windows has schannel
[19:23:38] <znf> silly question - I've already added openssl support for my own builds, this would conflict with it, right?
[19:23:49] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:24:00] <BtbN> You can't add openssl, it would violate the GPL
[19:24:03] <BtbN> hence mbedtls
[19:24:18] <BtbN> gnutls has a stupendous amount of dependencies, so I didn't want to deal with it
[19:25:07] <znf> what's the downside of mbedtls ?
[19:25:15] <BtbN> Downside?
[19:25:30] <znf> dunno, like, less features than openssl/gnutls?
[19:25:44] <BtbN> Probably not as intensely audited as openssl is
[19:25:51] <BtbN> but giv[19:27:41] <BtbN> Probably just an implementation details
[19:28:50] <znf> Any ideas why this patch-set doesn't addd dump_filtegraphs in ffmpeg -h? https://patchwork.ffmpeg.org/project/ffmpeg/patch/1590364226-11567-3-git-send-email-lance.lmwang@gmail.com/
[19:28:59] <znf> (the option does work, it's just not displayed)
[19:29:17] <BtbN> OPT_EXPERT
[19:30:11] <znf> ah, so only -h full
[19:31:09] <znf> and -dumpgraph only dumps to stderr, no file?
[19:59:19] <znf> Shouldn't this message be of "fatal" level? [h264_nvenc @ 0x561120e1b5c0] Driver does not support the required nvenc API version. Required: 11.0 Found: 10.0
[19:59:57] *** Joins: linjie (~linjie@58.247.210.251)
[20:00:02] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[20:00:32] *** Joins: arcatech (~arcatech@user/arcatech)
[20:00:35] *** Joins: linjie (~linjie@58.247.210.251)
[20:00:38] <BtbN> The message is fatal? Pretty sure it bails out after that.
[20:05:16] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[20:08:29] <znf> BtbN, it doesn't show up when using -v fatal
[20:09:01] <BtbN> It's probably just an error. The Fatal level is rarely used.
[20:09:03] <znf> so if you do -v fatal, it just bails out without any explanation
[20:09:43] <znf> ah :-/
[20:10:32] <BtbN> You'll probably find a lot of error logs that should be at the fatal level
[20:10:50] <BtbN> but it's always a bit questionable. Since what's fatal for the specific codec/filter might not be fatal for the overall process
[20:12:41] <znf> yeah, I was going to run with just -v fatal, exactly for that reason
[20:13:06] <znf> error catches way too many things that don't result in ffmpeg bailing, and I kind of wanted just those :)
[20:21:15] *** Quits: LuKaRo (~LuKaRo@p4fc322c8.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[20:29:15] *** Joins: rsx (~dummy@ppp-188-174-151-149.dynamic.mnet-online.de)
[20:51:13] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Ping timeout: 265 seconds)
[20:55:51] *** Joins: LuKaRo (~LuKaRo@p5deda7df.dip0.t-ipconnect.de)
[21:01:20] *** Quits: LuKaRo (~LuKaRo@p5deda7df.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[21:02:38] *** Joins: LuKaRo_ (~LuKaRo@p200300dfa70b18573403f4a957659168.dip0.t-ipconnect.de)
[21:02:47] *** Joins: linjie (~linjie@58.247.210.251)
[21:03:18] *** Quits: pong (~loop@user/pong) (Quit: /run/firejail/mnt/seccomp/seccomp (stat: No such file or directory) - restart)
[21:06:18] *** Quits: rsx (~dummy@ppp-188-174-151-149.dynamic.mnet-online.de) (Quit: rsx)
[21:07:39] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[21:08:04] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[21:21:35] *** Joins: pong (~loop@user/pong)
[21:36:15] *** Quits: finsternis (~X@23.226.237.192) (Remote host closed the connection)
[21:36:55] *** Quits: polichouz (~Yoann@2a01:cb19:8ece:3a00:f00c:4007:65ca:b542) (Quit: Leaving)
[21:37:03] *** Joins: finsternis (~X@23.226.237.192)
[21:38:32] *** Joins: budo (~budo@c-24-62-207-85.hsd1.ma.comcast.net)
[21:54:33] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 268 seconds)
[21:55:49] *** edman007_ is now known as edman007
[22:04:22] *** Joins: witchcraft (~witch@user/witch)
[22:05:01] <thebombzen> did ffmpeg ever have support for libdvdread / libdvdnav?
[22:05:29] <thebombzen> to read IFO files and the like, so you could, say, remux a dvd rip
[22:05:51] <thebombzen> something like, ffmpeg -i dvd:directory/ -map 0 -c copy remuxed-dvd.mkv
[22:06:07] <thebombzen> you can do that with blurays using bluray: (via libbluray) that's why I ask
[22:21:46] *** Joins: KombuchaKip (~kip@192.252.230.5)
[22:23:40] <nurupo> i have a weird issue with MTS files
[22:25:40] <nurupo> i can `ffmpeg -f concat -i mts_files.txt -c copy out.mp4` no problem as long as mts_files.txt lists only file names
[22:26:29] <nurupo> but if i specify inpoint and outpoint in the txt file, ffmpeg gets stuck using 100% cpu and processing 0 frames
[22:29:47] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[22:31:26] <nurupo> while it doesn't work with MTS files, it works if i convert the files into MP4. if for each mts file in mts_files.txt i do `ffmpeg -i in.mts -c copy out.mp4` to convert them into mp4 container and then `sed 's/mts/mp4/g' -i mts_files.txt` - the concat comamnd handles inpoint and outpoint just fine
[22:35:13] *** Joins: Narrat (~omnius@p200300df5f10627006ea56fffe2e7cdc.dip0.t-ipconnect.de)
[22:35:43] <nurupo> wish i didn't have to change the container to mp4 in order to make concat inpoint/outpoint work with mts, as i need to use twice as much disk space because of this - to store the mts files and the mp4
[22:35:50] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[22:38:20] *** Quits: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de) (Ping timeout: 258 seconds)
[22:40:00] *** Quits: admal_ (~admal@gateway/tor-sasl/admal) (Quit: leaving)
[22:45:58] *** Joins: Buster_ (~Buster@46.160.36.66)
[22:52:09] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[22:54:31] *** Quits: odrling (~odrling@korone.aidoru.agency) (Quit: see you space cowboy)
[22:55:02] *** Joins: odrling (~odrling@korone.aidoru.agency)
[23:04:42] *** Joins: linjie (~linjie@58.247.210.251)
[23:07:45] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[23:09:25] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[23:10:34] *** Joins: Vonter (~Vonter@user/vonter)
[23:23:27] *** Quits: LuKaRo_ (~LuKaRo@p200300dfa70b18573403f4a957659168.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[23:24:07] *** Quits: nurupo (~nurupo.ga@user/nurupo) (Quit: nurupo.ga)
[23:24:38] *** Joins: nurupo (~nurupo.ga@user/nurupo)
[23:26:25] *** Quits: someuser (~user@41.46.236.120) (Read error: Connection reset by peer)
[23:31:25] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[23:32:08] *** Quits: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[23:33:38] *** Joins: LuKaRo (~LuKaRo@p200300dfa710407ea7d6edf132d3efd1.dip0.t-ipconnect.de)
[23:39:38] *** Quits: Flabb (~Flabb@89.169.84.117) (Quit: Leaving)
[23:41:57] *** Joins: someuser (~user@41.46.236.120)
[23:47:54] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[23:51:57] *** Joins: Nact (~l@host-85-27-124-131.dynamic.voo.be)
[23:52:09] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[23:54:50] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Quit: WeeChat 3.2)
[23:55:43] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[23:55:49] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 265 seconds)
[23:56:47] *** Joins: dreamon (~dreamon@p54b140a6.dip0.t-ipconnect.de)
[23:59:33] <thebombzen> nurupo: seeking mpegts is always an inexact science, and the docs state this: Because of potential packets before the specified In point, packet timestamps may overlap between two concatenated files.
