[00:00:50] <Sammitch> hahah "Tokyo Gas" being their sponsor, and "Creators" the team name
[00:00:55] *** Joins: ttnb (~quassel@cpe-76-184-224-8.tx.res.rr.com)
[00:01:21] <Albright> Yep.
[00:02:25] <mactron> Morning
[00:08:37] <Sammitch> my google-fu is lacking. if I've got a stream with a lot of data behind it, what's the best way to dump it straight to stdout?
[00:11:00] <Sammitch> stream_copy_to_stream($mystream, STDOUT); ?
[00:11:17] <Albright> `while ($data = fread($stream, 1024)) { echo $data; }` won't suffice?
[00:12:08] <Byteflux> I was just about to suggest stream_copy_to_stream() with STDOUT, yeah
[00:12:19] <Byteflux> I looked at fpassthru() but that doesn't seem to work with just *any* stream.
[00:12:36] <Sammitch> Albright: it'd work, but I find that most times that I do my own buffering like that I wind up hamstringing the performance
[00:12:52] <Byteflux> For starters, 1024 is a bad buffer :P
[00:12:59] <Byteflux> 4096 *minimum*
[00:13:25] <Albright> Fair enough. I don't work with streams that much so just throwing something out there. :P
[00:13:41] <Byteflux> but yeah, better to not worry about it and let the underlying software do it, also something like stream_copy_to_stream() probably does something very similar but entirely in C
[00:14:29] <Sammitch> yeah generally if you mismatch the buffer size to whatever the underlying bufffer actually is the performance tanks more than you might expect. definitely more than I did.
[00:20:16] <Byteflux> Albright: btw fread() could return "0" too, not guaranteed to read $length bytes, might just read one byte which if it were "0" would evaluate to false
[00:20:59] <Albright> Ah, good ol' PHP type ambiguity, good point.
[00:21:03] <Sammitch> yadda yadda feof()
[00:21:30] <Sammitch> "but what if it's a socket?" and then we argue some more
[00:22:08] <Byteflux> a non blocking socket? i wonder if it just returns an empty string in that case, where it's not an error but there's nothing to read.
[00:22:12] <Albright> All something to worry about the next time I have to use streams which will hopefully be never
[00:22:56] <Sammitch> joke's on you, you're already using a bunch of stream wrappers!
[00:23:31] <Albright> Yes, yes, "um ackshually," you know what I mean. :P
[00:26:28] *** Quits: CyberCr33p (~chris@bnc.cretaforce.gr) (Read error: Connection reset by peer)
[00:27:11] <Sammitch> [pushes glasses up nose, puts on mansplaining voice] "uh, ACKshually..."
[00:27:43] <Albright> I prefer a nerdy nasally voice but yes
[00:27:54] *** Joins: CyberCr33p (~chris@bnc.cretaforce.gr)
[00:28:29] <Albright> I was in a Japanese class once in the States where one of the other students was this guy who had been in Kyoto for two weeks and would constantly do that TO THE TEACHER
[00:29:03] <Byteflux> Perfect opportunity for you to "Oh, you been to Japan? I watch anime. I know more than you"
[00:29:13] <Sammitch> nerd fight nerd fight
[00:30:19] <Sammitch> ask if it's "senpai" or "sempai" and watch them tear themselves apart
[00:30:31] <Byteflux> hahaha
[00:31:58] <Sammitch> the two reasons I haven't taken a japanese language class yes are: 1. the fear that I'll get stuck with an obnoxious weeb in the class
[00:32:05] <Sammitch> 2. that I might be that obnoxious weeb
[00:32:43] <Albright> 1. the obnoxious weebs are always the first to drop out of Japanese classes as they realize that learning a language with a whole new writing system is not as fun as watching cartoons
[00:32:58] <Albright> 2. if you drop out of the class before the end, well, I guess you got your answer
[00:34:26] <Albright> Jokes aside, I'd really recommend doing immersion classes in Japan (as I eventually did) if you can make it work. Most non-serious weebs can't do that level of commitment, and of course you'll learn a lot faster than you would otherwise.
[00:35:25] <Sammitch> well for various reasons I don't think that I'll be doing much discretionary international travel for the foreseeable future :P
[00:35:41] <Albright> Ah, yeah… me neither. :(
[00:37:02] <Sammitch> although someone recently posted an article about japanese zoning and real estate as a contrast to the bonkers local market, and if it weren't for the language barrier and karoshi I'd probably have moved there already
[00:39:39] <Byteflux> I'm used to living in real metropolitan cities like in Korea. I could see myself living in Japan. I hate the zoning in the US.
[00:39:58] <Byteflux> The reason everyone needs a stupid car is because zoning, mostly.
[00:41:49] <Sammitch> yeah, there's a real problem with density here, particularly because we're on a mountainous island, but every time someone applies to convert a plot of land to a more dense zoning type the surrounding landowners go full NIMBY
[00:41:51] <Byteflux> Everything is so far away, options are limited. Contrast with Korea or Japan, everything is nearby and available. Easy access to commerce, food delivery. Fast commutes.
[00:42:21] <Byteflux> Yeah, definitely had my fair share of the NIMBYism when I was living in California.
[00:42:46] <Albright> Yeah, I do miss the trains a whole lot. I would gladly trade my car for a Japan-like train system any day.
[00:43:17] <Sammitch> so the average condo is 700k, average home is 1m, and affordable housing is literally an hour away when the traffic is _good_
[00:43:58] <Byteflux> Can't have affordable housing near me, don't wanna devalue my property!
[00:44:26] <Sammitch> Byteflux: they don't even want luxury condos near them because they might be able to see the building from their back yard
[00:45:29] <Sammitch> they don't want _actual_ affordable housing anywhere near them because they might have to see "the poors" being not-affluent
[00:45:47] <Sammitch> s/anywhere near them/in the same postal code/
[00:46:21] <Sammitch> but I think that we're sufficiently digressed, and I've missed lunch... <_<;
[00:46:24] <Byteflux> Ouch, yeah. Don't know why people are so opposed to urban density. Suburbia is so isolated, dead and boring. Takes half an hour to go anywhere interesting. Why live in a place where the only interesting thing within 15 minutes of your home is a strip mall and a Walmart?
[00:46:55] <Albright> Because those places tend to be more affordable than the more interesting places.
[00:47:52] *** Quits: CyberCr33p (~chris@bnc.cretaforce.gr) (Ping timeout: 252 seconds)
[00:49:29] <Albright> But yeah, you got good transpo, that's not a huge problem. I couldn't afford to live near Shinjuku as a student only working part-time, but I could afford to live a twelve minutes' walk from a station that was one express-line stop away.
[00:50:01] <Blondie101010> ah come on...  are you planning to replace forests with shopping malls?
[00:51:10] <Albright> (Though to avoid any confusion, I am *not* advocating for California-style "high-speed rail" boondoggles that never get built…)
[00:51:58] <Albright> Anyway, PHP is pretty cool eh
[00:57:40] *** Joins: CyberCr33p (~chris@bnc.cretaforce.gr)
[01:01:56] <Byteflux> Blondie101010: Not quite like that, mostly I just advocate for less zoning restrictions that prevent mixing commercial and residential zones. Less suburban neighborhoods, more metropolitan growth.
[01:02:14] <Byteflux> Granted, places like Japan and Korea only are this way out of necessity, because there's not enough room to spread out.
[01:02:21] <Byteflux> I still prefer it.
[01:04:51] <Byteflux> If everyone lives and works in close proximity to each other, it also reduces the burden of developing a good public transportation system which is how you end up with top notch subway systems in Japan and Korea
[01:13:44] *** Quits: guido (~guido@host-79-55-253-241.retail.telecomitalia.it) (Quit: WeeChat 3.3)
[01:16:48] *** Quits: entropy_ (~ent@user/entropy/x-9891564) (Remote host closed the connection)
[01:21:02] *** Joins: entropy_ (~ent@user/entropy/x-9891564)
[01:24:59] *** Joins: DaNeenjah (~jake@adsl-74-230-6-204.hsv.bellsouth.net)
[01:53:48] *** Quits: genomc (uid245282@id-245282.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[01:55:27] *** Joins: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f)
[02:04:04] *** Quits: DrJ (~asdf@user/drj) ()
[02:06:21] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:07:25] *** Quits: pmercado (~pmercado@186.107.62.14) (Ping timeout: 265 seconds)
[02:43:49] <fakuve> We need more buildings definitely , here in the UK the issue is that everyone thought everyone would live in their own Victorian Houses , ended up with these houses been splitted into "self contained" units in which you rent a room, you get the noise of the whole house, and have common areas anyways
[02:44:16] *** Quits: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f) (Ping timeout: 245 seconds)
[02:45:11] <fakuve> Cities in here are quite larger than in continental Europe due to this fact , and logistically is just impossible to commute by bycicle if you dont live near the city center
[02:45:53] *** Joins: ferdna (~ferdna@user/ferdna)
[02:46:05] <fakuve> Now the urban planners they are realising on this fact and are starting building proper buildings . But there is no middle point
[02:46:57] <fakuve> Either skyscrappers ish , or houses , not classic 10 stories residential buildings ala Continental Europe and the mediterranean and eastern Europe
[02:47:41] <fakuve> But yeah we got great parks in here , and if you have time the walks are quite nice , sometimes you see foxes as well
[02:56:55] *** Joins: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f)
[02:58:51] *** Quits: tex (~super@user/dix) (Ping timeout: 245 seconds)
[03:04:10] *** Quits: bytestream (~bytestrea@user/bytestream) (Ping timeout: 260 seconds)
[03:07:43] *** Quits: ttnb (~quassel@cpe-76-184-224-8.tx.res.rr.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[03:19:39] <ms49434> fakuve, and squirrels everywhere
[03:58:43] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 252 seconds)
[04:05:51] *** Quits: onizu (uid373383@id-373383.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[04:11:02] *** Joins: semeion (~semeion@user/semeion)
[04:11:52] *** Joins: mactron_ (~mactron@apn-123-255-252-gprs.simobil.net)
[04:14:50] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[04:15:21] *** Quits: mactron (~mactron@APN-123-253-79-gprs.simobil.net) (Ping timeout: 265 seconds)
[04:20:40] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 265 seconds)
[04:21:58] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[04:30:28] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[04:32:23] *** Joins: lind{at}yahoo (uid486956@id-486956.tinside.irccloud.com)
[04:33:30] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[04:33:47] *** Joins: semeion (~semeion@user/semeion)
[04:36:14] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[05:31:08] *** Quits: Mr-Snick (mr-snick@gateway/vpn/protonvpn/mr-snick) (Remote host closed the connection)
[05:39:55] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[05:40:09] *** Joins: keypushe- (keypusher@user/keypusher)
[05:43:24] *** keypushe- is now known as keypusher
[05:58:37] *** DCTWD- is now known as DCTWD
[06:31:06] *** Quits: semeion (~semeion@user/semeion) (Quit: WeeChat 3.3)
[06:58:55] *** Joins: Hiccup (cHoy@user/hiccup)
[07:02:40] *** Joins: genomc (uid245282@id-245282.hampstead.irccloud.com)
[07:15:31] *** Quits: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f) (Ping timeout: 245 seconds)
[07:23:40] *** Quits: tuskkk____ (uid18470@id-18470.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[07:26:20] *** Joins: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f)
[07:27:36] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 245 seconds)
[07:34:26] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[07:38:41] *** Joins: gde33 (~gde33@84-106-154-98.cable.dynamic.v4.ziggo.nl)
[07:39:32] *** Joins: Rockwood (~Rocky@user/rocky)
[08:12:49] *** Quits: mactron_ (~mactron@apn-123-255-252-gprs.simobil.net) (Ping timeout: 252 seconds)
[08:37:39] *** Quits: bobdobbs (~user@14.137.23.74) (Read error: Connection reset by peer)
[08:58:48] *** Joins: tex (~super@user/dix)
[09:02:07] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[09:02:24] *** Joins: guido (~guido@host-95-239-188-224.retail.telecomitalia.it)
[09:04:45] *** Quits: DaNeenjah (~jake@adsl-74-230-6-204.hsv.bellsouth.net) (Quit: WeeChat 3.3)
[09:40:11] *** Quits: guido (~guido@host-95-239-188-224.retail.telecomitalia.it) (Quit: WeeChat 3.3)
[09:48:24] *** Quits: deksar (~deksar@user/deksar) (Remote host closed the connection)
[10:02:50] *** Joins: justHaunt1 (~justache@user/justache)
[10:03:30] *** Joins: Albright_ (~Albright@149.28.13.173)
[10:03:49] *** Joins: Beryllium_ (sid186414@id-186414.lymington.irccloud.com)
[10:04:03] *** Joins: refactor_ring_ (~refactor_@142.93.146.100)
[10:04:54] *** Quits: Beryllium (sid186414@lymington.irccloud.com) (Ping timeout: 245 seconds)
[10:04:54] *** Quits: refactor_ring (~refactor_@142.93.146.100) (Ping timeout: 245 seconds)
[10:04:54] *** Quits: Albright (~Albright@149.28.13.173) (Ping timeout: 245 seconds)
[10:04:54] *** Quits: justHaunt (~justache@user/justache) (Ping timeout: 245 seconds)
[10:04:54] *** Quits: simon816 (~simon816@ec2-35-178-246-72.eu-west-2.compute.amazonaws.com) (Ping timeout: 245 seconds)
[10:04:54] *** Beryllium_ is now known as Beryllium
[10:04:56] *** justHaunt1 is now known as justHaunt
[10:05:29] *** Joins: simon816 (~simon816@ec2-35-178-246-72.eu-west-2.compute.amazonaws.com)
[10:05:57] *** Joins: guido (~guido@93-40-193-148.ip40.fastwebnet.it)
[10:07:45] *** Joins: mactron (~mactron@APN-123-214-101-gprs.simobil.net)
[10:10:46] *** Quits: mactron (~mactron@APN-123-214-101-gprs.simobil.net) (Read error: Connection reset by peer)
[10:30:06] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 245 seconds)
[10:33:42] *** Joins: kerunaru (~Jmcb@199.red-79-146-102.dynamicip.rima-tde.net)
[10:38:26] *** Joins: deksar (~deksar@user/deksar)
[10:54:01] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[10:55:38] *** Joins: fahrradToken (~fahrradTo@212.7.190.34)
[11:15:03] <dag> how would you package a closure in a composer package? e.g. $fn = function() { return 42; };
[11:16:32] <Naktibalda> are you asking "how would you declare a global variable in a composer package?
[11:16:43] <Naktibalda> autoload: files
[11:18:03] <dag> yeah maybe.
[11:18:22] <Naktibalda> looks like bad idea
[11:18:40] *** Joins: ms49434 (~ms49434@user/ms49434)
[11:19:01] <dag> it's a reusable closure. how would you package it?
[11:19:13] *** Joins: stenno (~stenno@user/stenno)
[11:20:22] *** Joins: DevAntoine (~DevAntoin@2a01:e0a:2d5:42d0:a592:c157:4f4a:be7c)
[11:21:39] *** Joins: tuskkk____ (uid18470@id-18470.tinside.irccloud.com)
[11:24:17] *** Joins: onizu (uid373383@id-373383.uxbridge.irccloud.com)
[11:25:45] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[12:06:08] <Naktibalda> dag: create a factory class or function for creating it?
[12:07:36] <Naktibalda> class could implement Singleton, or, if you used function, it could use static variable in the local scope to ensure that the same value is returned.
[13:04:06] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[13:07:11] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 245 seconds)
[13:07:48] *** Joins: keypusher (keypusher@user/keypusher)
[13:51:37] *** Quits: deksar (~deksar@user/deksar) (Ping timeout: 252 seconds)
[13:57:52] *** Joins: sumthing1980 (~sumthing1@94.54.64.154)
[14:01:11] *** Joins: LucaTM (~LucaTM@user/lucatm)
[14:13:20] *** Joins: deksar (~deksar@user/deksar)
[14:24:52] <dag> Naktibalda: alright thanks
[14:28:50] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[14:41:40] *** Joins: nmee (~nmee@176.111.206.130)
[14:43:15] <nmee> Hi, I'm using a dockerized Apache+PHP combination in production, and it works very well. However, I'd like to tune configuration settings during runtime -- any recommended ways of doing this? Currently restarting the docker container with new env variables, but I'd like something without any downtime (however short).
[14:44:43] *** Joins: jgrim9 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[14:45:03] <Naktibalda> use Kubernetes :)
[14:46:27] *** Quits: jgrim (~jgrim@172.58.145.29) (Ping timeout: 250 seconds)
[14:46:27] *** jgrim9 is now known as jgrim
[14:47:54] <Naktibalda> when you apply some changes, Kubernetes starts new pods first and stop old pods afterwards, so there is no downtime.
[14:48:50] <nmee> @Naktibalda, thanks, but I'm afraid I'm creating a handful of _new_ challenges in the process :) I was thinking something like using .env from a mounted volume instead
[14:51:28] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[14:52:58] *** Quits: guido (~guido@93-40-193-148.ip40.fastwebnet.it) (Quit: WeeChat 3.3)
[14:53:57] *** Quits: jetchisel (jetchisel@user/jetchisel) (Quit: Unfortunately time is always against us -- [Morpheus])
[14:56:01] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Ping timeout: 252 seconds)
[15:03:31] *** Quits: Hiccup (cHoy@user/hiccup) (Remote host closed the connection)
[15:17:12] *** Joins: DaNeenjah (~jake@adsl-74-230-6-204.hsv.bellsouth.net)
[15:19:01] *** Joins: Warped (~Warped@user/warped)
[15:23:51] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[15:24:57] *** Joins: semeion (~semeion@user/semeion)
[15:30:06] *** Quits: sumthing1980 (~sumthing1@94.54.64.154) (Quit: Leaving)
[15:31:15] *** Joins: guido (~guido@host-95-239-188-224.retail.telecomitalia.it)
[15:33:12] *** Joins: pmercado (~pmercado@186.107.62.14)
[15:42:19] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[15:51:47] *** Quits: sagax (~sagax_nb@user/sagax) (Quit: Konversation terminated!)
[16:25:05] *** Quits: kerunaru (~Jmcb@199.red-79-146-102.dynamicip.rima-tde.net) (Ping timeout: 260 seconds)
[16:34:58] *** Joins: Anticom (~anticom@87.190.49.75)
[16:42:59] *** Joins: mnemonic (~semeion@user/semeion)
[16:44:22] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 252 seconds)
[16:48:33] *** Quits: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net) (Ping timeout: 268 seconds)
[16:49:07] *** Quits: nmee (~nmee@176.111.206.130) (Quit: leaving)
[16:52:45] *** Joins: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net)
[17:01:08] *** Joins: _9hs (~m9hs@user/9hs/x-2608218)
[17:10:41] *** Quits: Anticom (~anticom@87.190.49.75) (Remote host closed the connection)
[17:14:04] *** Quits: jgrim (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 252 seconds)
[17:17:46] *** Joins: Robotico (~101@111.red-80-39-243.dynamicip.rima-tde.net)
[17:17:56] *** Quits: Robotico (~101@111.red-80-39-243.dynamicip.rima-tde.net) (Remote host closed the connection)
[17:18:14] *** Joins: Anticom (~anticom@87.190.49.75)
[17:19:51] *** Quits: Slartiba1t (~user@c-d6ddd854.217486-0-69706f6e6c79.bbcust.telenor.se) (Ping timeout: 250 seconds)
[17:23:11] *** Quits: Anticom (~anticom@87.190.49.75) (Ping timeout: 265 seconds)
[17:23:42] *** Quits: Furai (~Furai@cookiehoster.furai.pl) (Ping timeout: 268 seconds)
[17:26:08] *** Quits: deksar (~deksar@user/deksar) (Quit: Going offline, see ya! (www.adiirc.com))
[17:26:56] *** Joins: magla (~gelignite@55d44e8b.access.ecotel.net)
[17:27:13] *** Quits: fahrradToken (~fahrradTo@212.7.190.34) (Ping timeout: 252 seconds)
[17:34:50] *** Joins: Furai (~Furai@cookiehoster.furai.pl)
[17:34:53] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 264 seconds)
[17:35:11] *** Joins: vlm (~vlm@user/vlm)
[17:41:07] *** Quits: Tempesta (~Tempesta@user/tempesta) (Quit: AdiIRC is updating to v4.2 Beta Build (2021/10/13 UTC) 64 Bit)
[17:46:16] *** Joins: Diego (~textual@user/diego)
[17:49:34] *** Joins: deksar (~deksar@user/deksar)
[17:51:55] *** Joins: Anticom (~anticom@87.190.49.75)
[17:54:31] *** Joins: Tempesta (~Tempesta@user/tempesta)
[18:12:10] *** Quits: guido (~guido@host-95-239-188-224.retail.telecomitalia.it) (Quit: WeeChat 3.3)
[18:12:20] *** Joins: guido (~guido@host-95-239-188-224.retail.telecomitalia.it)
[18:18:02] *** Joins: forgotmynick (uid24625@id-24625.hampstead.irccloud.com)
[18:24:08] *** Quits: _9hs (~m9hs@user/9hs/x-2608218) (Quit: Leaving)
[18:24:17] *** Quits: Anticom (~anticom@87.190.49.75) (Remote host closed the connection)
[18:27:24] *** Joins: stenno (~stenno@user/stenno)
[18:29:52] *** Joins: Anticom (~anticom@87.190.49.75)
[18:42:00] *** Joins: WishBoy (~WishBoy@user/wishboy)
[18:43:54] *** Quits: Blondie101010 (~Blondie10@user/blondie101010) (Ping timeout: 265 seconds)
[18:43:57] *** Joins: Rockwood (~Rocky@user/rocky)
[18:48:38] *** Quits: Anticom (~anticom@87.190.49.75) ()
[18:53:30] *** Joins: Blondie101010 (~Blondie10@user/blondie101010)
[18:57:34] <znf> I'm running a PHP script via CLI and for some reasons I'm getting: mmap(NULL, 17179873280, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1 ENOMEM (Cannot allocate memory)
[18:57:53] <znf> but I have plenty of available RAM on the system (>20GB available)
[18:58:17] <znf> any ideas why that would happen?
[18:58:43] *** Joins: genom (~g@37.214.34.163)
[18:59:09] <stenno> amount of memory allocated is augmented by the php.ini
[18:59:28] <stenno> allocated amount augmentation alliteration
[18:59:55] <stenno> znf: https://haydenjames.io/understanding-php-memory_limit/
[19:00:04] <stenno> default is '128M' afaik
[19:00:10] <znf> My limit is 2GB for CLI
[19:00:25] <znf> and I'm not getting "Out of Memory" error from PHP itself
[19:00:39] <stenno> wait this is actually the OS
[19:00:41] <stenno> right
[19:00:46] <znf> yeah
[19:00:55] <stenno> i'd say not an issue of php then..
[19:01:05] <Blondie101010> znf:  I may have missed the beginning...  what error are you getting normally (not with strace)?
[19:01:26] <znf> nmmap() failed: [12] Cannot allocate memory
[19:01:42] <Blondie101010> the php command gives you that?
[19:01:54] <znf> I can't reproduce it with anything else other than this PHP script, so I'm not sure wtf is going on
[19:01:55] <znf> Blondie101010, yeah
[19:02:20] <znf> and yes, I do realize it's something generated by the OS
[19:02:23] <stenno> is that from composer?
[19:02:25] <Blondie101010> does it use external libs, like for image manipulation?
[19:02:35] <znf> no and no
[19:02:41] <Blondie101010> what does it do?
[19:02:59] <znf> all it does is fetch some XMLTV (EPG data), walks over the lines and inserts them into the DB
[19:03:14] <stenno> btw 17179873280 bytes are 17 gb
[19:03:30] <znf> oh, hm
[19:03:33] <znf> the fuck
[19:03:38] <Blondie101010> znf:  what lib or extention is used for that?
[19:03:56] <stenno> actually out of 20 GB memory :P
[19:04:01] <Blondie101010> that's why it doesn't hit the 2GB limit
[19:04:28] <znf> SimpleXML from what I can see in the code
[19:04:44] <Blondie101010> memory_limit is only for in PHP use, not for external modules which the engine does not control
[19:05:13] <Blondie101010> so you'll need to use a different lib or break the file in parts first
[19:06:01] <stenno> also how large is size_t actually?
[19:06:19] <stenno> because 17179873280 is larger than 32bit signed
[19:06:34] <stenno> larger than unsigned*, for that matter
[19:06:38] <znf> by what I can see in the strace, it doesn't actually crash at parsing the XML, but rather *after*, which seems to select something from the DB and then crashes
[19:08:13] <Blondie101010> stenno:  he said he has 20GB available, so it's a 64 bit OS
[19:08:32] <stenno> so we should be fine here (nice deduction)
[19:08:43] <znf> yeah, sorry, I was looking at the current table
[19:08:47] <Blondie101010> and that number is a good proof that PHP is built on 64 bits
[19:08:57] <znf> last query that runs is only returning 198 rows
[19:09:11] <Blondie101010> znf:  rows of what?
[19:09:23] <Blondie101010> if each row has 1GB of data, it's normal
[19:09:42] <Blondie101010> actually much less
[19:09:46] <znf> nah, the whole DB is <600MiB
[19:10:11] <stenno> maybe an xml bomb? :P
[19:10:11] <Blondie101010> now you're converting the data in XML somehow and that takes too much memory
[19:10:38] <Blondie101010> this is not an uncommon problem, especially with simplexml crap!
[19:10:44] <znf> that specific table (the epg stuff) is barely ~180MB, so that shouldn't cause issue
[19:10:46] <stenno> https://en.wikipedia.org/wiki/Billion_laughs_attack
[19:10:54] <znf> I'll have a look at the files being downloaded
[19:11:28] <Blondie101010> znf:  please take the time to think
[19:11:46] <Blondie101010> your loading process failed and inserted 198 rows
[19:12:00] <Blondie101010> that doesn't mean it doesn't include 2M more rows
[19:12:14] <znf> Blondie101010, no, no -- sorry, let me explain again
[19:12:52] <znf> the script loads data from an external source, an XML file, it imports it, then it tries to look for duplicates to clear out: https://pastie.dev/xWoro5.n1ql
[19:13:22] <Blondie101010> how is that even related to XML?
[19:13:26] <Blondie101010> I asked you to think!
[19:13:36] <znf> It's not!
[19:14:00] <Blondie101010> exactly
[19:14:30] <Blondie101010> if you disable the DB inserts and updates, can you extract the XML contents?
[19:15:15] <znf> that's a bit hard to do, as it's a damn ioncube'd file
[19:17:00] <Blondie101010> ok no support for that script at all here then
[19:17:08] <Blondie101010> good luck though
[19:17:23] <stenno> must be malformed XML
[19:17:36] <Blondie101010> no that's a bad assumption
[19:18:00] <stenno> sorry not malformed
[19:18:08] <stenno> but in the type of a xml bomb
[19:18:12] <stenno> which is well-formed
[19:19:29] <Blondie101010> they should not be using simplexml, but they don't even have the real code
[19:19:32] <znf> stenno, xmllint returns nothing wrong with it
[19:19:59] <stenno> xml bombs are well-formed, i used the wrong expression above
[19:25:26] <Blondie101010> znf:  there are only 2 good options in your situation:  a) replace the bad locked down code; b) pay the author to get the real code
[19:26:03] <znf> I did mention in the past that the author is most likely in jail, so... that's probably not going to happen any time soon
[19:26:39] <Blondie101010> so you need to extract as much business logic from the process you can, and start rewriting
[19:26:50] <Blondie101010> (option a)
[19:27:34] <Blondie101010> if it seems not to be worth it, that means your project should go to trash
[19:27:46] <znf> I do have a "decoded" copy, it's just unfortunately not a "drop-in", so I'd have to rewrite the logic behind it
[19:28:49] <znf> I've added a 64GB swap file, to see what happens... and I'm currently at...
[19:29:05] <znf> 80G virrt
[19:29:13] <znf> quite impressive to be honest
[19:29:51] <znf> 29.5GB used memory for that script... impressive
[19:31:38] <Blondie101010> sounds like you'll waste a lot of time doing nothing instead of following my advice...  not sure if that means your script has a real value but that sounds to me like the trash option was sensible
[19:35:37] <NoiseEee> lol wot
[19:36:04] <znf> ok, so turns out there's 2 sources - one (the largest one, ~140MB file) works fine
[19:36:20] <znf> the other one, which is something like ~30MB, doesn't, and makes it use >30GB RAM
[19:36:49] <Blondie101010> go visit the author in jail to get help!
[19:37:00] <Blondie101010> I am not kidding!
[19:41:31] <znf> eh, screw it, spent enough time for this, just removed the offending source - Blondie101010 is right, I'd waste too much time on it, either by rewriting it or debugging further
[19:43:48] * Blondie101010 nods
[19:48:18] <znf> stenno is also on to something :P
[20:02:17] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: I was standing in the park wondering why frisbees got bigger as they get closer. Then it hit me.)
[20:03:12] *** Quits: magla (~gelignite@55d44e8b.access.ecotel.net) (Quit: Stay safe!)
[20:05:12] *** Quits: DevAntoine (~DevAntoin@2a01:e0a:2d5:42d0:a592:c157:4f4a:be7c) (Read error: Connection reset by peer)
[20:05:43] *** Joins: DevAntoine (~DevAntoin@2a01:e0a:2d5:42d0:a592:c157:4f4a:be7c)
[20:07:25] *** Joins: Rockwood_ (~Rocky@user/rocky)
[20:08:51] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 245 seconds)
[20:10:04] *** Quits: DevAntoine (~DevAntoin@2a01:e0a:2d5:42d0:a592:c157:4f4a:be7c) (Ping timeout: 252 seconds)
[20:17:03] *** Joins: jgrim (~jgrim@d60-65-99-197.col.wideopenwest.com)
[20:36:10] *** Rockwood_ is now known as Rockwood
[20:49:18] *** Quits: Diego (~textual@user/diego) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[20:49:27] *** Joins: Adie (cummy@adie.space)
[21:14:39] *** Joins: magla (~gelignite@55d44e8b.access.ecotel.net)
[21:16:11] *** Joins: konrados (~konrados@user-5-173-136-173.play-internet.pl)
[21:17:46] *** Quits: forgotmynick (uid24625@id-24625.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[21:22:00] <Sammitch> protip: if you run an online shop that permits unauthenticated users to enter credit card details and make purchases without so much as a CAPTCHA, you're going to get rolled into a big ol fraud investigation before long
[21:23:55] <Sammitch> 1. jerk buys list of stolen CCs. 2. jerk runs a script against your shop to attempt a small purchase to validate the card. 3. jerk takes the valid cards and make BIG purchases. 4. CC fraud depts notice that there's always a small charge from you before a big fraud 5. law enforcement show up at your office 6. bad times.
[21:27:35] <Blondie101010> that doesn't make them responsible, though there might be some liability
[21:29:25] *** Joins: dimi1947 (~dimi1947@2a02:1388:409d:fc86:ac7b:c476:e4ba:676f)
[21:29:53] <Sammitch> law enforcement is going to want records and be overbearing, and your payment gatreway is not going to be happy with you in the least
[21:30:20] *** Quits: dimi1947 (~dimi1947@2a02:1388:409d:fc86:ac7b:c476:e4ba:676f) (Client Quit)
[21:30:25] <Albright_> Sammitch: That's good to keep in mind, actually. Thanks for sharing.
[21:31:00] *** Joins: dimi1947 (~dimi1947@2a02:1388:409d:fc86:ac7b:c476:e4ba:676f)
[21:31:23] *** Quits: dimi1947 (~dimi1947@2a02:1388:409d:fc86:ac7b:c476:e4ba:676f) (Read error: Connection reset by peer)
[21:31:30] <Sammitch> yeah you'll never guess what flavor of dumpsterfire landed on my desk today
[21:31:43] <Sammitch> for the _second_ time
[21:33:18] *** Joins: dimi1947 (~dimi1947@2a02:1388:409d:fc86:ac7b:c476:e4ba:676f)
[21:33:36] *** Quits: dimi1947 (~dimi1947@2a02:1388:409d:fc86:ac7b:c476:e4ba:676f) (Read error: Connection reset by peer)
[21:35:16] *** Joins: bytestream (~bytestrea@user/bytestream)
[21:44:18] <__adrian> "Blondie101010> that doesn't make them responsible, though there might be some liability"  it's unlikely you'd be legally liable, but it's more likely than not your payment processor will blacklist you if you don't fix it
[21:46:43] <Sammitch> I have a friend in IT at a major american retailer that had this issue, and the FBI wound up setting up shop in their office since the activity touched an ongoing organized crime investigation.
[21:48:52] *** Quits: Furai (~Furai@cookiehoster.furai.pl) (Ping timeout: 268 seconds)
[21:49:09] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[22:03:09] <__adrian> yep
[22:03:11] *** Quits: noord (~noord@user/noord) (Remote host closed the connection)
[22:03:23] <__adrian> liability or not, plenty of folks will want to make your life a living hell.
[22:14:16] <Rockwood> __adrian, hi how are you sir?
[22:14:23] <Rockwood> good night cya
[22:14:51] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[22:19:21] *** Joins: The_Jag (~The_Jag@host-79-51-167-242.retail.telecomitalia.it)
[22:25:57] *** Hash is now known as LordOfThePings
[22:32:50] *** Joins: Furai (~Furai@cookiehoster.furai.pl)
[22:46:23] *** Quits: Furai (~Furai@cookiehoster.furai.pl) (Quit: WeeChat 3.3)
[22:50:28] *** Quits: entropy_ (~ent@user/entropy/x-9891564) (Remote host closed the connection)
[22:51:13] *** Joins: entropy_ (~ent@user/entropy/x-9891564)
[22:55:20] <CoJaBo_> So this is a new one. Client's shared hosting provider has base64_decode() disabled "for security reasons".
[22:56:39] <Blondie101010> well if you can't get them to enable it, you should look for a different provider
[22:56:52] <Blondie101010> but an immediate solution would be to code it in PHP
[22:57:20] <stenno> why would you consider that a security threat?
[22:57:24] <AllenJB> Find a new provider. I can see how they got there (a lot of PHP malware uses base64 to encode gzipped data and/or obfuscate what's going on), but it's dumb. base64 is used like everywhere.
[22:57:28] <Blondie101010> he doesn't
[22:57:30] <CoJaBo_> Yeh, they don't want to change to our own hosting, for the same price, because they don't want to
[22:57:54] <CoJaBo_> base64_encode is not disabled, which is hilarious
[22:57:57] <stenno>  Blondie101010 i mean the hoster
[22:57:59] <Blondie101010> same price?
[22:58:12] <Blondie101010> do they upsell per function?
[22:58:22] <Blondie101010> 10 pennies per function
[22:58:22] <stenno> lol
[22:58:24] <CoJaBo_> lol
[22:58:24] *** Joins: Furai (~Furai@cookiehoster.furai.pl)
[22:58:27] <stenno> new business model
[22:58:42] <stenno> (this probably already exist somewhere)
[22:58:55] <CoJaBo_> We're a better value then, because for the same price, you get base64_decode() included! At no extra cost!
[22:59:34] <CoJaBo_> They don't even disable eval() either, just exec()
[22:59:56] <CoJaBo_> I complain about our dumb configs, but man. The competition is wild.
[23:12:26] *** Quits: Furai (~Furai@cookiehoster.furai.pl) (Quit: WeeChat 3.3)
[23:15:21] *** Joins: Furai (~Furai@cookiehoster.furai.pl)
[23:15:55] <Blondie101010> eval() is not a security concern
[23:16:07] <Blondie101010> exec might be on a badly secured platform
[23:17:14] <Blondie101010> clarification note:  eval() can represent security concerns for the app owner if it runs bad input, but that won't put the host at risk
[23:19:23] <CoJaBo_> Blondie101010: Usually a shared host's security model is to disable eval and exec. I've just never seen one disable base64_decode =D
[23:21:40] <TinoDidriksen> base64_decode() is very often used for uploaded exploit scripts.
[23:22:21] <Blondie101010> yes, but that's not protection if it prevents you from doing good normal operations
[23:22:54] <TinoDidriksen> Agreed
[23:23:08] <Blondie101010> CoJaBo_:  but as I said, you can easily implement it in PHP
[23:23:23] <Blondie101010> it's a 20-30 line function
[23:24:30] <CoJaBo_> I most likely will, but it doesn't make it any less insane =D
[23:26:33] *** Quits: pcfreak30 (~pcfreak30@2603-6080-a506-22a9-0000-0000-0000-0c61.res6.spectrum.com) (Remote host closed the connection)
[23:28:09] <CoJaBo_> TinoDidriksen: They'll just have to use str_rot13 from now on, I guess =D
[23:32:17] <Blondie101010> that's not applicable
[23:32:41] <Blondie101010> the point is that base64 encoding is commonly used in these crappy injections
[23:32:52] <Blondie101010> but when it happens, it's already too late anyways
[23:34:00] <Blondie101010> protection after being compromised is like putting a face mask to protect yourself after you already caught covid
[23:44:56] <CoJaBo_> Blondie101010: Well the latter is still useful as it protects others; this is like the programmatic equivilent of putting the mask on your chin :P
[23:46:28] <Blondie101010> not invalid
