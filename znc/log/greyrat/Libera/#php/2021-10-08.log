[00:00:02] *** Joins: olle (~olle@i5E866664.versanet.de)
[00:00:22] <olle> Any tips for debugging session issues on a PHP server? CTO is on vacation... :d
[00:01:23] <olle> Checking errors logs, perhaps
[00:01:53] <Sammitch> yep
[00:01:58] <Sammitch> !+next
[00:01:58] <php-bot> another satisfied customer, NEXT!
[00:07:07] <olle> ^^
[00:08:50] <olle> Some instances work on that machine, some not. Grrr.
[00:09:04] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[00:09:24] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[00:10:45] <olle> chunked_transfer_encoding off; was suggested
[00:12:02] <Sammitch> did the suggestion also say what that does and why it was suggested? can you even reliably reproduce the issue so you can tell if it actually fixed it?
[00:12:40] <olle> My colleague did
[00:12:46] <olle> Error log pointed to http 1.0 vs 1.1, he said
[00:14:35] <Sammitch> oh did some users just suddenly switch to an ancient, obsolete version of HTTP today?
[00:17:13] <olle> Seems like the other way, HTTP 1.0 works, 1.1 doesn't (he said)
[00:17:30] <olle> One installation works now, but not sure how to test reliably :d
[00:17:40] <olle> Guess I could remove the fix and test again
[00:19:49] <Sammitch> really this is just poking the raw nerve that is seeing someone flip random switches until the problem stops, and also being super bitchy today in general for no reason <_<
[00:20:24] * Sammitch crawls back under the sysadmin rock
[00:23:11] *** Joins: ms49434 (~ms49434@user/ms49434)
[00:25:33] *** Joins: chao (~stenno@user/stenno)
[00:27:43] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[00:33:17] <olle> Yes, did not fix it
[00:33:37] <olle> Faulty hd partitioning, and 4 million concurrent sessions...
[00:34:02] <olle> Folder /home is allocation 14TB, and / 19 GB
[00:34:18] <olle> Lucky for my CTO he's on vacation, huh.
[00:37:14] *** Quits: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104) (Quit: Connection closed)
[00:43:46] <olle> Seems like PHP automatically cleaned up the sessions when it run out of HD space.
[00:44:43] <__adrian> ...that sounds more like "failed to write" than "oh php cleaned it up"
[00:44:47] <__adrian> but ok  ;)
[00:45:17] <olle> Yes, but space available changed from 0 to 900M
[00:45:19] <__adrian> if you don't see the write error logged, maybe you're out of disk space
[00:45:32] <olle> Yes, we noticed :D
[00:45:43] <olle> My boss must have messed up the partitioning.
[00:48:16] <olle> How crazy is it to re-partition live...??
[00:48:41] <__adrian> are YOU going on a long vacation once your cto gets back?
[00:48:52] <__adrian> """vacation"""
[00:50:49] <olle> Not long, only some days ^^
[00:51:01] <olle> This is always good for future salary discussions
[00:51:03] <olle> ...
[00:53:18] *** Quits: KnownSyntax (sid233169@user/knownsyntax) (Ping timeout: 268 seconds)
[00:53:18] *** Quits: sharpertool (sid80151@id-80151.hampstead.irccloud.com) (Ping timeout: 268 seconds)
[00:53:23] *** Quits: celphi (sid97751@user/celphi) (Ping timeout: 250 seconds)
[00:53:26] *** Quits: onizu (uid373383@id-373383.uxbridge.irccloud.com) (Ping timeout: 245 seconds)
[00:53:28] <olle> Anyway, changing php session location should fix it
[00:53:51] *** Quits: genomc (uid245282@id-245282.hampstead.irccloud.com) (Ping timeout: 245 seconds)
[00:54:05] *** Quits: fury (uid193779@id-193779.helmsley.irccloud.com) (Ping timeout: 264 seconds)
[00:54:08] *** Quits: MrTrick (uid181961@id-181961.uxbridge.irccloud.com) (Ping timeout: 250 seconds)
[00:54:08] *** Quits: DrowningElysium (sid190788@user/drowningelysium) (Ping timeout: 250 seconds)
[00:54:08] *** Quits: itok (sid418430@id-418430.ilkley.irccloud.com) (Ping timeout: 250 seconds)
[00:54:08] *** Quits: petris (sid19918@user/petris) (Ping timeout: 250 seconds)
[00:54:14] *** Quits: paladox (sid373195@wikimedia/paladox) (Ping timeout: 252 seconds)
[00:54:34] *** Quits: ramsey (sid508214@phpc/ramsey) (Ping timeout: 250 seconds)
[00:54:44] *** Quits: Beryllium (sid186414@id-186414.lymington.irccloud.com) (Ping timeout: 246 seconds)
[00:54:46] *** Quits: mikemike (sid13297@id-13297.lymington.irccloud.com) (Ping timeout: 252 seconds)
[00:55:25] *** Joins: DrowningElysium (sid190788@user/drowningelysium)
[00:55:33] *** Quits: nrr (sid20938@id-20938.lymington.irccloud.com) (Ping timeout: 268 seconds)
[00:55:33] *** Quits: NiKaN (sid385034@id-385034.helmsley.irccloud.com) (Ping timeout: 268 seconds)
[00:55:33] *** Quits: BlueShark (sid10311@user/blueshark) (Ping timeout: 268 seconds)
[00:55:44] *** Joins: MrTrick (uid181961@uxbridge.irccloud.com)
[00:55:55] *** Joins: onizu (uid373383@uxbridge.irccloud.com)
[00:56:31] *** Joins: genomc (uid245282@hampstead.irccloud.com)
[00:56:41] *** Joins: KnownSyntax (sid233169@user/knownsyntax)
[00:56:49] *** Joins: paladox (sid373195@wikimedia/paladox)
[00:56:52] *** Joins: nrr (sid20938@lymington.irccloud.com)
[00:57:11] *** Joins: NiKaN (sid385034@helmsley.irccloud.com)
[00:57:21] *** Joins: celphi (sid97751@user/celphi)
[00:59:02] *** Joins: BlueShark (sid10311@user/blueshark)
[00:59:48] *** Joins: sharpertool (sid80151@hampstead.irccloud.com)
[00:59:49] *** Joins: itok (sid418430@ilkley.irccloud.com)
[00:59:55] *** Joins: ramsey (sid508214@phpc/ramsey)
[00:59:57] *** Joins: mikemike (sid13297@lymington.irccloud.com)
[01:00:30] *** Joins: fury (uid193779@helmsley.irccloud.com)
[01:00:34] *** Joins: petris (sid19918@user/petris)
[01:01:19] <olle> Will changing the PHP session folder invalidate all sessions?
[01:01:36] *** Joins: Beryllium (sid186414@lymington.irccloud.com)
[01:01:55] <Sammitch> short answer: yes
[01:02:01] <olle> But I can copy them?
[01:02:03] <olle> 3 million files :|
[01:02:25] <__adrian> s/yes/no, but yes/
[01:02:49] <Sammitch> you can, but unless your disks are VERY fast that's going to take a WHILE
[01:03:00] <Sammitch> and chances are that most of those are dead sessions
[01:03:10] <Sammitch> and the live ones will invalidate themselves while you're copying
[01:03:24] <Sammitch> sounds like you have session gc issues
[01:03:34] <Sammitch> IMO just delete them all
[01:04:54] <olle> Sammitch: All session are from today when checking file date
[01:05:33] <olle> Sammitch: I can't delete them, because that would destroy peoples answers to surveys
[01:05:49] <olle> Or would it...
[01:05:49] <Sammitch> what on earth are you running?
[01:06:10] <olle> Legacy stuff :)
[01:06:13] *** Joins: WishBoy (~WishBoy@user/wishboy)
[01:06:48] <olle> But no, answers are saved in database each time a participant goes to next page.
[01:06:49] <Sammitch> and you have 3m+ unique users in a single day?
[01:06:59] <olle> 4m, PHP cleaned 1M just now
[01:07:10] <olle> Big survey in Canada, it seems.
[01:07:10] * __adrian supposes the problem might be with session creation, rather than cleanup
[01:07:31] <Sammitch> also yes. session count != user count
[01:08:03] <Sammitch> I'm going to wager that the FS that your session store is on ran out of inodes, yes?
[01:08:13] <olle> Oooooh
[01:08:22] <olle> It's an Ubuntu system, nothing special
[01:08:45] <Sammitch> yeah no, indoes are the _opposite_ of special
[01:09:16] <olle> I mean, we didn't configure the file system anything
[01:09:23] <olle> No btrfs or such
[01:09:54] <Sammitch> still not relevant
[01:10:17] <Sammitch> are you trying to move the session dir because the disk keeps saying "I'm full!" but there's still space available?
[01:10:57] <olle> No, the disk *was* full
[01:11:09] <olle> At least that partition that /var/lib/php/session is on
[01:11:26] <olle> And then sessions got removed, I assume by PHP
[01:11:39] <__adrian> why would you assume this?
[01:13:32] <olle> What else would it be...?
[01:15:10] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Ping timeout: 265 seconds)
[01:15:48] <olle> "Can't save session file, no memory, cleanup stuff"
[01:17:28] <Sammitch> did you look at the actual disk usage, or did you just trust that the error message meant what you think it did?
[01:19:13] <Sammitch> because there is a finite number of files that ytou can create on a partition that is set at the time you format it, otherwise known as "inode count", and once you run out the disk _acts_ like it's full
[01:19:33] <Sammitch> `df -i` will show you this usage
[01:19:51] <Sammitch> and is a wholly different and frequently ignored scaling factor
[01:21:03] <olle> Sammitch: I don't have access to our monitor system from home
[01:21:16] <olle> Sammitch: I used df a lot to track the usage
[01:21:18] <Sammitch> and even so, having 3 million session files for a single day is a powerful smell if you don't have a matching number of unique daily users
[01:21:33] <olle> Sammitch: No, it's not a smell, some surveys are really big
[01:21:52] <Sammitch> it doesn't matter how big the session is, having 3 million of them is the issue
[01:21:57] <__adrian> "some surveys are really big" is a smell that maybe you don't understand Sammitch's point above
[01:22:11] <olle> Big = reaches lots and lots of users
[01:22:23] <olle> Also, lots of session files are 11M, that is a smell, yes :)
[01:23:26] <olle> OK, didn't know about df -i, good tip
[01:23:36] <Sammitch> did literally 10% of the enitre population of canada visit your site today?
[01:24:06] <olle> I'd have to ask support, and they're sleeping, but we had some customer coming up with something...
[01:24:19] <olle> Some years ago we had a link in a French newspaper about daylight saving time
[01:25:00] <__adrian> only 3.3% of the US population. seems more plausible.
[01:26:34] <Sammitch> I got DDoSed once because a client's user banged a married reality TV star, but we're talking about YOUR site TODAY.
[01:27:09] <Sammitch> and if you're not interested in actually listening to the things we're saying I don't know why you're bothering to talk to us
[01:27:21] <olle> I'm trying, it's just a bit late here :)
[01:27:44] <olle> You think we got DOS?
[01:27:55] <__adrian> no, he was bringing up something irrelevant
[01:28:15] <__adrian> as daylight savings in france would seem to be
[01:28:56] <__adrian> personally, my bet is on session creation.
[01:29:24] <__adrian> if you legit have traffic like this, then you need to figure out scaling  :)
[01:30:34] <olle> It's rare. But yes, it's a good point, indeed.
[01:30:46] <olle> New guy already suggested redis for session
[01:31:00] <__adrian> that wouldn't solve anything
[01:32:49] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Ping timeout: 245 seconds)
[01:37:40] <olle> No?
[01:37:45] <olle> No better throughput?
[01:38:08] <__adrian> throughput? you ran out of disk space
[01:38:20] <__adrian> that's not a bandwidth problem
[01:38:38] <olle> If the issue is session creation tho?
[01:38:51] *** Quits: pmercado (~pmercado@186.107.35.198) (Quit: Konversation terminated!)
[01:39:22] <__adrian> but "switch to redis" just sounds like a baseless conclusion. you need to really figure out the problem first, and it doesn't sound like you have.
[01:40:10] <__adrian> no, if it's a session creation problem (i.e., creating too many sessions) then the solution would be to fix the sessions
[01:42:06] <__adrian> if you really do have so much traffic (that is, all 4m or whatever _really are_ unique-and-not-abandoned) then you need to figure out horizontal scaling. and sounds like you might be storing too much in your session, if 4m sessions ~> 14TB
[01:42:18] <Blondie101010> olle:  and if you think that calling an external service (like redis) is faster than reading a tiny file, then you should revise your IT knowledge as a whole
[01:42:21] <__adrian> (just using numbers i remember reading in the scrollback, ymmv)
[01:42:42] <Sammitch> for starters, if you can't fit your entire session store into memory redis is not going to help much
[01:43:21] <__adrian> mm. would go to disk anyways. though it might end up using fewer inodes.
[01:43:44] *** Quits: magla (~gelignite@55d40f0d.access.ecotel.net) (Quit: Stay safe!)
[01:44:04] <Blondie101010> that point would only be useful if RAM was cheaper than storage
[01:44:09] <Sammitch> stop trying to better accomodate the symptoms of the problem and fix the actual problem
[01:46:42] <olle> I guess redis would be part of horizontal scaling
[01:47:03] <Blondie101010> what√â
[01:47:08] <olle> No?
[01:47:11] <olle> No wait
[01:47:21] <olle> I'm thinking about centralized bla bla, but that's not needed
[01:47:24] <olle> I should go to bed...
[01:47:39] <__adrian> horizontal = spread out
[01:47:47] <Blondie101010> look at the junk you store in session files, and stop doing that
[01:47:49] <Blondie101010> that's it
[01:48:40] <Blondie101010> based on the size, I suspect you store result sets in it
[01:49:08] <Blondie101010> that is counter productive, and indicative of prior premature optimization
[01:49:20] <Sammitch> once you persist session data to a backend, eg: storing survey results, _remove them from the session_. maybe remove the entire session.
[01:49:37] <olle> We store sh*tloads of stuff in the session, yes. Known issue.
[01:49:44] <Blondie101010> so fix that
[01:49:48] <Blondie101010> nothing else to look at
[01:50:51] <Blondie101010> you're potentially duplicating your DB multiple times over that way
[01:51:54] <olle> Lots of different threads to pull in if we want to improve performance, caching being one. But yeah, so many users is rare... Will look into that tomorrow. :) Thanks for feedback, very nice!
[01:51:58] * olle zzz
[01:52:12] <Blondie101010> that is not caching
[01:52:19] <Blondie101010> caching is centralized
[01:53:10] <Blondie101010> that's a bad sluggish attempt to optimize something, but it can't work
[01:53:34] <Blondie101010> it might appear faster when you benchmark with a single user, but not with a real load
[01:58:38] *** Quits: jaykelly450 (~vagrant@c-73-82-49-38.hsd1.ga.comcast.net) (Quit: WeeChat 3.0)
[02:01:34] *** Quits: olle (~olle@i5E866664.versanet.de) (Ping timeout: 245 seconds)
[02:05:04] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-228.sw.biz.rr.com)
[02:18:55] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[02:24:18] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:34:41] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 245 seconds)
[02:39:52] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[02:40:31] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 245 seconds)
[02:44:37] *** Joins: semeion (~semeion@user/semeion)
[02:51:59] *** Quits: bytestream (~bytestrea@user/bytestream) (Ping timeout: 245 seconds)
[02:56:59] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Ping timeout: 245 seconds)
[02:57:15] *** Joins: Vision (~Vision@024-178-231-173.res.spectrum.com)
[03:04:39] *** Joins: ferdna (~ferdna@user/ferdna)
[03:05:59] *** Quits: fakuve (~fakuve@192.210.243.250) (Ping timeout: 250 seconds)
[03:17:24] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-228.sw.biz.rr.com) (Ping timeout: 245 seconds)
[03:21:49] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[03:42:55] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[03:55:42] *** Joins: Hiccup (cHoy@user/hiccup)
[04:00:27] *** Quits: NeoCron (~NeoCron@p200300c4cf18cd00433f901d5cf4f3d0.dip0.t-ipconnect.de) (Remote host closed the connection)
[04:07:23] *** Joins: keypushe- (keypusher@user/keypusher)
[04:07:49] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 245 seconds)
[04:10:40] *** keypushe- is now known as keypusher
[04:17:40] *** Quits: ArchNoob (~maotora@user/archnoob) (Ping timeout: 260 seconds)
[04:30:29] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[04:35:07] *** Joins: vlm (~vlm@user/vlm)
[05:27:18] *** Quits: jetchisel (jetchisel@user/jetchisel) (Quit: Unfortunately time is always against us -- [Morpheus])
[05:43:26] *** Quits: Bencraft (~Bencraft@111.227.187.81.in-addr.arpa) (Remote host closed the connection)
[05:43:36] *** Joins: Bencraft (~Bencraft@111.227.187.81.in-addr.arpa)
[05:45:29] *** Joins: ArchNoob (~maotora@user/archnoob)
[05:56:47] *** Joins: jetchisel (jetchisel@user/jetchisel)
[05:58:42] *** Quits: onizu (uid373383@uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[05:59:16] *** Joins: Rockwood (~Rocky@user/rocky)
[06:01:59] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[06:42:55] *** Quits: ArchNoob (~maotora@user/archnoob) (Ping timeout: 260 seconds)
[06:48:01] *** Quits: junktext (~junktext@77.247.181.212) (Ping timeout: 245 seconds)
[06:59:47] *** Quits: Rockwood (~Rocky@user/rocky) (Read error: Connection reset by peer)
[07:00:17] *** Joins: Rockwood (~Rocky@user/rocky)
[07:01:31] *** Joins: Rockwood_ (~Rocky@user/rocky)
[07:02:54] *** Joins: ___Rockwood__ (~Rocky@user/rocky)
[07:04:04] *** Joins: jetchisel (jetchisel@user/jetchisel)
[07:05:14] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 265 seconds)
[07:05:44] *** Quits: Rockwood_ (~Rocky@user/rocky) (Ping timeout: 245 seconds)
[07:15:07] *** ___Rockwood__ is now known as Rockwood
[07:26:23] *** Joins: naptastic (~naptastic@c-67-182-225-67.hsd1.ut.comcast.net)
[07:27:15] <naptastic> After the Apache panic update the other day, my websites stopped working and I only just noticed >_<
[07:27:35] <naptastic> I no longer get any error messages, but everything returns a blank page.
[07:28:12] <Rockwood> you should chk the logs
[07:28:13] <naptastic> oh... it's returning the source code instead of running it through PHP
[07:28:27] <naptastic> PHP logs?! HAHAHAHAHAHAHAHAHAHAHAHAHAHAHA
[07:28:37] <Rockwood> is PHP installed?
[07:29:12] <Rockwood> apache logs i was asking
[07:29:26] <Rockwood> you are missing PHP package i think
[07:29:38] <Rockwood> but i am not sure
[07:29:59] <naptastic> ...yes, PHP is installed... it was working fine until I updated the other day; I'm not sure if it's Apache's change or PHP's but it doesn't pull right now, so
[07:30:25] <naptastic> bit of a stab in the dark there, don't you think?
[07:30:53] <Rockwood> libapache2-mod-php chk this then
[07:31:32] <Rockwood> or install the sudo apt-get install libapache2-mod-php
[07:31:36] <naptastic> that would run Apache via prefork and PHP via DSO. I can't waste that much memory. I need to use mpm_event and FPM.
[07:34:01] <Rockwood> naptastic, what is your PHP version and apache version?
[07:35:22] <naptastic> Rockwood, Apache 2.4.50, PHP 7.4.21, as provided by Debian
[07:35:34] <Rockwood> ok
[07:36:28] <Rockwood> Debian 9?
[07:36:38] <Rockwood> or which?
[07:36:58] <naptastic> Bookworm (sid) which I think is... 11?
[07:39:12] <Rockwood> <IfModule mod_dir.c>
[07:39:12] <Rockwood>     DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm
[07:39:12] <Rockwood> </IfModule>
[07:39:16] <Rockwood> oops sorry
[07:39:25] <Rockwood> is similar there?
[07:40:22] <Rockwood> your module is missing there i think
[07:40:23] *** Joins: guido (~guido@host-79-23-84-132.retail.telecomitalia.it)
[07:40:48] <naptastic> yes, DirectoryIntex is set to index.php like it should be
[07:41:18] <naptastic> Hah, got it!
[07:41:28] <naptastic> It wasn't PHP at all, it was Apache... FilesMatch works differently now
[07:41:32] <Rockwood>  /etc/apache2/mods-enabled/dir.conf  <-- in
[07:42:37] <Rockwood> hope you got the correctly solved the issue
[07:42:59] <Rockwood> hope you solved correctly the issue
[07:43:17] <Rockwood> i have leave the computer now for today
[07:43:20] <Rockwood> cya tc
[07:43:36] *** Parts: naptastic (~naptastic@c-67-182-225-67.hsd1.ut.comcast.net) (Leaving)
[07:51:49] *** Joins: spronkey (~textual@2406:e000:6f28:ba01:6923:f19f:f460:296)
[07:59:50] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[08:04:35] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[08:05:43] *** Quits: refactor_ring (~refactor_@142.93.146.100) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[08:06:51] *** Joins: refactor_ring (~refactor_@142.93.146.100)
[08:19:54] *** Quits: semeion (~semeion@user/semeion) (Quit: WeeChat 3.3)
[08:34:59] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[09:03:14] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[09:33:33] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[09:38:48] *** Quits: guido (~guido@host-79-23-84-132.retail.telecomitalia.it) (Quit: WeeChat 3.3)
[09:54:49] *** Joins: fahrradToken (~fahrradTo@212.7.190.34)
[10:02:05] *** Joins: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[10:03:27] *** Quits: spronkey (~textual@2406:e000:6f28:ba01:6923:f19f:f460:296) (Quit: you are feeeling very sleeeeeepyy......)
[10:07:06] <Naktibalda> Is it a bug or a feature that namespace doesn't match directory? https://github.com/sebastianbergmann/phpunit/blob/master/src/Framework/Exception/Error.php
[10:12:20] <AllenJB> Could be a feature - create package private classes by using require instead of autoloading
[10:14:25] <Naktibalda> definitelly a feature then
[10:18:01] <AllenJB> May also stop it appearing in autocomplete in IDEs, which might be a desired feature for a class called Error
[10:18:10] <Naktibalda> but it isn't used that way, probably a side effect of classmap autoloading
[10:18:53] <Naktibalda> vendor/composer/autoload_static.php:  'PHPUnit\\Framework\\Error' => __DIR__ . '/..' . '/phpunit/phpunit/src/Framework/Exception/Error.php',
[10:22:35] <AllenJB> Sebastian is probably the only person who can definitively tell you why phpunit is doing that - you could file an issue on the tracker
[10:33:31] <WishBoy> AllenJB who is Sebastian?
[10:33:37] <WishBoy> >.<
[10:33:44] <AllenJB>  Seb Bergmann - maintainer of PHPUnit
[10:33:51] <WishBoy> oh
[10:33:57] <WishBoy> i know now
[10:39:18] *** Joins: ShArkZ (sharkz@user/sharkz)
[10:39:34] *** Parts: ShArkZ (sharkz@user/sharkz) ()
[11:25:55] *** Joins: jetchisel (jetchisel@user/jetchisel)
[11:30:31] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Ping timeout: 245 seconds)
[11:41:32] *** chao is now known as stenno
[11:42:45] *** Joins: daedeloth (~daedeloth@91.183.109.67)
[11:45:26] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 265 seconds)
[11:47:24] *** Joins: jetchisel (jetchisel@user/jetchisel)
[11:51:29] <daedeloth> what would be a good way to cache objects that are required all over the f'ing project, without resorting to static variables? I'm working on a legacy project and there are 7 'type' models that are used in sometimes hundreds of objects resulting in a select query for each object
[11:52:39] *** Joins: LucaTM (~LucaTM@user/lucatm)
[11:53:43] <daedeloth> perhaps a library with a singleton is slightly cleaner than a static method in the object itself
[11:55:59] <AllenJB> If you're using the Repository pattern (or similar) you could cache them at the Repository level - they're only actually retrieved the first time they're requested per script execution, then a (clone of the) cached instance is returned. The caching is invisible to the rest of the application.
[11:57:16] <daedeloth> that would indeed be my first choice but there is no repository layer
[11:59:14] <daedeloth> ExamModeLibrary::instance()->getFromTypeId($id) it is :)
[12:00:11] <daedeloth> hm i guess i could fit it in the applicaiton container
[12:07:45] *** Joins: tex (~super@user/dix)
[12:07:49] *** Joins: Hash (~weechat@thestonedapes.com)
[12:08:06] <Hash> https://bpa.st/446A I installed my code into a new server config and now I can't access the /admin section
[12:08:18] <Hash> nginx says this in the log when I go to /admin section. Rest of the site loads fine
[12:08:40] <Hash> I have php 8 and xdebug 3
[12:09:04] <Hash> https://bpa.st/IFQA xdebug config
[12:10:45] <Naktibalda>  that error shouldn't be fatal. What response do you get in the browser?
[12:11:00] <Hash> HTTP ERROR 500
[12:11:33] <Hash> https://bpa.st/QHJA
[12:11:42] <Hash> that is the admin controller I  am trying to go to
[12:11:45] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[12:12:10] <Hash> This is code igniter 3 framework. Trying to get familiar/remember the app again so I can port it to the latest version so I'm trying to get it up and running
[12:13:16] <Naktibalda> have you tried disabling xdebug.start_with_request ?
[12:13:24] <deksar> technically, should post_max_size be equal to upload_max_size, or it should be a bit bigger than upload_max_size, as it'd contain some extra data/headers?
[12:14:34] <Hash> I have not.
[12:14:51] <Hash> I'm curious why this is happening only on the /admin controller
[12:16:16] <Hash> xdebug.start_with_request = no
[12:16:17] <Naktibalda> deksar: are you worried that uploading the file of exact size to match upload_max_size will fail?
[12:17:15] <Hash> I disabled it, and not I don't get that xdebug error anymore, but I now still have error 5--
[12:17:17] <Hash> 500
[12:17:23] <Hash> and nothing shows up innginx error log
[12:17:41] <Naktibalda> find php-fpm log file
[12:17:42] <deksar> Naktibalda: Definitely. Just confused which one should be bigger, upload_max_size or post_max_size? If post_max_size is limited to 32M, and upload_max_size is: 64M, would uploading a file of 40MB fail?
[12:18:12] <Hash> I am doing tail -F on nginx error log and it was populating until I turned off the xdebug just now
[12:18:25] <Naktibalda> deksar: post_max_size must be bigger
[12:18:26] <Hash> Now I still get error 500, but tail -F doesn't report anything new in the error.log
[12:18:43] <Naktibalda> hash: what do you get in response body?
[12:19:16] <Hash> failed to laod reponse data
[12:19:24] <Hash> Status Code: 500 Internal Server Error
[12:19:31] <Hash> Request URL: http://localhost:9090/admin
[12:20:12] <Hash> got some response headers
[12:23:40] <Hash> I'm completely out of clues now
[12:24:54] <Naktibalda> have you checked the logs of your framework?
[12:25:07] <Hash> OLhhh
[12:25:12] <Hash> Hang on sec
[12:25:20] <Hash>  define('ENVIRONMENT', isset($_SERVER['CI_ENV']) ? $_SERVER['CI_ENV'] : 'development');
[12:25:27] <Hash> I just set that to development.
[12:25:31] <Hash> Message: Failed opening required '/var/www/social/application/third_party/rb.php' (include_path='.:/usr/share/php')
[12:25:39] <Hash> I forgot to include the redbean php lib
[12:26:00] <Hash> I don't use it, but somehow it's called in my code. I forgot what the heck I did. But I think that should do it.
[12:26:02] <Hash> brb
[12:27:13] <Hash> Ok it works now.
[12:27:35] <Hash> I think I switched everything over to code igniter DB class, instead of redbean orm (I used it only for fast prototyping)
[12:28:03] <Hash> Now I need to figure out whether to port this over to CI4 or to laravel
[12:28:05] <Hash> \o/
[12:29:29] <Hash> thanks
[12:30:40] <Hash> I wonder if composer2 made it into ubunt urepos
[12:45:31] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 245 seconds)
[12:50:24] *** Joins: ArchNoob (~maotora@user/archnoob)
[12:52:20] <kenoba> am I alone in not finding orm's like doctrine too useful?
[12:53:14] <TinoDidriksen> Nope, ORMs are generally regarded as pointless.
[12:53:49] <kenoba> lol
[12:54:32] <kenoba> I guess I can see the point when you work on a shippable product that users can choose sqlite vs mysql postgres and such.... that might be handy
[12:54:40] <TinoDidriksen> Nah
[12:54:45] <kenoba> nah?
[12:54:53] <kenoba> just pdo is enough?
[12:55:09] <daedeloth> in reality switching between databases is always a bit troublesome :)
[12:55:29] <Naktibalda> you could try to use doctrine/dbal directly
[12:55:56] <kenoba> daedeloth agreed - however some products are build like that where backedns are selectable - like mautic or even wordpress
[12:56:02] <daedeloth> but i do see value in ORMs, less boilerplate, more readable code
[12:56:30] <TinoDidriksen> But it's not less boilerplate, though. It's the same boilerplate, and it's equally readable.
[12:56:48] <TinoDidriksen> Long ORM invocations will read like SQL, only less debuggable.
[12:57:09] <daedeloth> well it's hard to beat Model::find($id); ;)
[12:57:26] <Hash> https://www.youtube.com/watch?v=2b0gnQELSFU
[12:57:31] <Hash> Check it out if you wanna
[12:57:41] <Hash> social network in php
[12:57:47] <daedeloth> like facebook?
[12:57:53] <Hash> nothing like FB
[12:57:56] <Hash> I'm not a dick! :D
[12:58:02] <kenoba> TinoDidriksen you know -  every time I had issues trying to come up with some comple xperformant sql qury id jump onto mysql channel and first question is always is - we need  a query or gtfo
[12:58:33] <kenoba> so its like  - yeh - i cannot rally walk in with my doctrine model
[12:58:40] <kenoba> lol
[12:58:48] <daedeloth> can't you get the parsed query somehow?
[12:59:19] <Naktibalda> I think that there is a ->getSql() method
[12:59:26] <TinoDidriksen> Even the query builder libraries - just why? It'll be more code than just writing out the query, and less debuggable again.
[13:00:19] <daedeloth> $bluePets = $store->pets()->where('color', '=', 'blue')->get();
[13:00:36] <daedeloth> i mean, that is clean.
[13:01:04] <daedeloth> true, there is a lot of black box going on
[13:01:34] <daedeloth> and you can easily generate millions of unnecessary queries
[13:01:50] <daedeloth> but if you know what is going on in the back, these are powerful tools
[13:01:57] <kenoba> daedeloth simple queries is where im kinda like yeah - ok - i guess thats simpler, but then if I have a dozen of databases - configuring entitity manager so many times maybe make it les worth it?
[13:03:04] <daedeloth> don't know about that, i hardly work on projects that require more than 2 databases
[13:07:21] <AllenJB> I just find it quicker and easier to write straight-up SQL rather than farting around trying to get something else to write the SQL I already know I want to write
[13:08:28] <daedeloth> well yea but ORM is more than just writing queries, once you have your results you still need to map them
[13:08:54] <kenoba> AllenJB any tips on dealing with whining coworkers that want orm though?
[13:09:26] <daedeloth> well make sure you have a repository layer so everyone can do whatever they want :P
[13:09:31] <AllenJB> Takes just as long to wire up an ORM as it does to write a simple hydrate method IMO
[13:09:34] <Naktibalda> when we get entities from ORM we map them to DTOs and then to models
[13:09:50] <daedeloth> hehe ok then that benefit is gone :P
[13:10:58] <kenoba> daedeloth repository layer? like $products->getAllByDate($date); and what happens in getAllByDate is either orm or raw sql?
[13:11:16] <daedeloth> yup
[13:11:43] <kenoba> daedeloth and the result format? plain php array?
[13:11:56] *** Hash is now known as stoned
[13:12:05] <daedeloth> i'd go for domain models, but even more clean is DTOs
[13:12:39] <daedeloth> but yea php models with a strict structure
[13:13:28] <daedeloth> (that's where i don't like laravel :) model structure is far too lose)
[13:17:31] *** Joins: PersonX (~PersonX@d66-183-55-27.bchsia.telus.net)
[13:17:37] *** stoned is now known as Hash
[13:20:38] *** Joins: fakuve (~fakuve@192.210.243.250)
[13:24:30] <PersonX> hello there, new to PHP, was in here a few days ago with some help regarding getting a mime-type. Curious if I can get some feedback on this class for handling uploading files (will handle errors better next, depending). Asking if this is "secure" or considered safe, or some helpful tips: https://pastebin.com/8wxJdCPG
[13:24:37] <fakuve> Hi peeps , what is the naming convention you use for creating `interfaces` `<ClassName>.interface` ? or `<ClassName>.contract` ?
[13:26:47] <Naktibalda> it is a bad practice to create an interface based on one class.
[13:28:50] <biberu> Naktibalda: that kinda depends on what it's for
[13:30:32] *** Joins: jetchisel (jetchisel@user/jetchisel)
[13:32:55] <Naktibalda> anyway, noone names their interfaces Contract
[13:34:26] <kenoba> PersonX mime type is manipulatable by the client - you cannot trust it at all
[13:35:31] <Blondie101010> what?
[13:35:41] <Naktibalda> kenoba: he doesn't trust mime type from $_FILES, but checks content
[13:36:10] <Blondie101010> ahh
[13:36:43] <kenoba> Naktibalda sure sure. one can embed php code into images: https://onestepcode.com/injecting-php-code-to-jpg/
[13:37:08] <kenoba> and then depending on ho good/bad your server is configured this may be an issue
[13:37:27] <Blondie101010> sure, and how stupid do you think they are to run a .jpg as a php script?
[13:37:40] <Blondie101010> they'd simply rename it or what?
[13:37:43] <kenoba> Blondie101010 people are pretty stupid
[13:38:04] <Blondie101010> so you check if it's a valid image, and then rename it to .php?
[13:38:08] <kenoba> Blondie101010 you can rename it sure - but php code will  still be there embedded
[13:38:14] <Blondie101010> that's not reasonable
[13:38:22] <Blondie101010> doesn't matter
[13:38:32] <Blondie101010> the image will be bad, but no one will run it
[13:38:50] <kenoba> it is possible your server is configured to pass jpegs to php interpeter - possible  .
[13:39:02] <kenoba> not sayign he's doing it  - but ive seen things happen
[13:39:12] <Blondie101010> only if you go out of your way to do it
[13:39:22] <Blondie101010> it can't even happen as a beginner mistake
[13:40:00] <kenoba> https://nealpoole.com/blog/2011/04/setting-up-php-fastcgi-and-nginx-dont-trust-the-tutorials-check-your-configuration/
[13:40:27] <PersonX> so if I check the mime via the actual $_FILE variable within the "upload_file" function, does that help with detecting valid mime type on top of what I have?
[13:40:48] <kenoba> there is plenty of folk copy-pasting ngingx configs without understanding, then there are those devs/ops teams working and not talking
[13:40:50] <fakuve> So I append .interface and thats it isnt it?
[13:41:29] <kenoba> PersonX id reencode the file - the only way to be sure
[13:41:47] <Naktibalda> fakuve: what exactly do you mean by .interface? can you show an example?
[13:42:18] <fakuve> I'm just following a tutorial
[13:42:36] <Blondie101010> kenoba:  you're giving bad advice
[13:42:41] <fakuve> Naktibalda: https://youtu.be/-AJic0FjuAA?t=99
[13:42:58] <Blondie101010> no one will be vulnerable to your crappy concerns, but your suggestions are much riskier
[13:44:15] *** Joins: nucc1 (~nucc1@user/nucc1)
[13:45:33] <Naktibalda> fakuve: so he doesn't use any suffix and that's fine. It is a nice example that CollectionAgency implements DebtCollector.
[13:46:05] <kenoba> Blondie101010 ü§∑‚Äç‚ôÇÔ∏èor make sure your  server configuration doesnt serve images as scripts... whichever
[13:46:47] <Blondie101010> definitely...  if you did that, you should turn off your computer and go spend the rest of your life in the jungle
[13:46:57] <kenoba> dont care either way friend
[13:47:58] <fakuve> Naktibalda: yeah but he mentioned something before about the naming convention , but is alright
[13:48:50] <PersonX> Blondie101010 - You've given me some sound advice and info before, do you have any tips or information on my current class? Is it secure? - Also, kenoba I appreciate your information too, thank you.
[13:52:46] <AllenJB> fakuve: It's not uncommon to add an Interface suffix to interface names - eg. 'DebtCollectorInterface'. But 'DebtCollector.interface' would not be a valid name ('.' is not allowed as part of a Class / Interface name)
[13:53:47] <fakuve> AllenJB: ok cheers
[13:55:48] <Blondie101010> AllenJB:  while true, and sometimes the easy way out, it does raise a small flag on the naming quality
[13:57:32] <Blondie101010> class Car extends Vehicle implements Motorized, Wheeled
[13:58:19] <AllenJB> True, but I wouldn't bet against the most common reason for doing it being because someone saw it used elsewhere, rather than actually considering context / reasoning
[14:01:21] <AllenJB> Naming things is not trivial and one of the Eternal Debates of programming =D
[14:01:30] <Blondie101010> for sure
[14:01:50] <Blondie101010> sometimes the easy option is acceptable
[14:09:31] <biberu> PersonX: unique_name isn't doing what it says
[14:10:37] <PersonX> biberu: Hmm, upon testing, it was generating a 10 character name.
[14:10:42] <PersonX> string*
[14:11:04] <biberu> PersonX: yeah, but says *unique*, and it could return the same name several times
[14:11:22] <PersonX> biberu: do you have a suggestion to making it more "unique"? thank you.
[14:12:15] <Blondie101010> PersonX:  as you were told before, you validate if it actually exists in the DB or on the FS
[14:12:39] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[14:12:53] <biberu> PersonX: it could also return filenames that aren't valid for your file system, is not checking the input for errors (what if length is < 1 or > the length of your alphabet), and since you're only shuffling the alphabet you're removing a lot of possible names
[14:13:33] <biberu> PersonX: consider "abc", if you shuffle it you could get "abc", "bac", "cba" etc., but you could never get "aab", "ccb"
[14:15:53] <PersonX> That makes sense. Is there a suggestion you have that does not shuffle only the "string" I have, but come up with combinations you suggested? Blondie101010, yes I recall. I am still learning, but thank you for the reminder. I will be checking the db and fs, and also remembering to check for what biberu suggested
[14:17:40] <biberu> PersonX: a simple way could be bin2hex(random_bytes($len)), then keep asking for names in a loop until you get one that hasn't been used yet, once you do attempt to move the file (note that you could get a race there)
[14:18:54] <Blondie101010> with a generated string with 10 ** 52, the likelyhood of hitting a race condition is much lesser than winning the lottery twice in a row
[14:19:12] <biberu> ofc, but you need to be aware of the idea
[14:19:13] <Blondie101010> 10 ** 52 possibilities
[14:19:20] <Blondie101010> yep
[14:19:25] <biberu> PersonX: another thing, since all those functions are private they become harder for you to test
[14:19:40] <Blondie101010> I'd use a lock file
[14:19:46] <biberu> and none of them are using any state on an instance, but they are still instance methods
[14:19:52] <biberu> Blondie101010: yeah
[14:19:54] *** Quits: LuKaRo (~LuKaRo@p4fc33c32.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[14:19:59] <biberu> there aren't any type hints either
[14:20:27] <biberu> PersonX: do you know what unit testing is?
[14:20:56] <PersonX> biberu: i do not, sorry.
[14:21:17] *** Joins: LuKaRo_ (~LuKaRo@p4fc32cd3.dip0.t-ipconnect.de)
[14:21:35] <biberu> PersonX: https://en.wikipedia.org/wiki/Unit_testing
[14:22:19] <biberu> what are people using to write tests in php these days? phpunit? Blondie101010?
[14:24:32] <Blondie101010> not sure about trends, but what matters is that it's easy to implement
[14:28:03] <biberu> PersonX: whatever tool is being used it's simply a way for you to write tests to automatically verify that your functions etc. are doing what's expected of them, that in itself is obviously valuable, but testable code also has a tendency to be better structured code
[14:28:07] <fakuve> Hi sorry , anyone can see in this tiny exercise why the class in line 64 ? https://hastebin.com/ohutunebuf
[14:29:50] <Blondie101010> fakuve:  your question is unclear
[14:30:05] <Blondie101010> but the filename doesn't match PSR-4
[14:30:35] <fakuve> Is it because of capitalization?
[14:30:52] <Blondie101010> that's the very obvious part
[14:31:28] <fakuve> So basically all the ./src/app/Classname.php
[14:31:33] <fakuve> ok
[14:32:31] <fakuve> The directory as well `/App` I guess
[14:32:32] <Blondie101010> but that still won't work with the namespace you used
[14:32:32] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[14:33:11] <Blondie101010> if App is in ./src, then you'd need another App level (not good)
[14:34:07] <fakuve> Why ? is it because psr-4 convention ?
[14:34:19] <Blondie101010> the way it works
[14:34:25] <Blondie101010> it has to point to the right place
[14:34:51] <fakuve> At the moment `composer.json` is looking to all the `/src` subdirectory
[14:34:56] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[14:35:03] <Blondie101010> I have to go, but your "public" doesn't belong there
[14:35:32] <fakuve> Ok thanks for the help Blondie101010 !
[14:35:47] <Blondie101010> np
[14:38:44] <Naktibalda> fakuve: in psr-4 autoload you don't need directory for the prefix
[14:39:24] <Naktibalda> App namespace matches src/ dir, so App\Invoice must be in src/Invoice.php
[14:41:01] *** Joins: ms49434 (~ms49434@user/ms49434)
[14:46:06] *** Quits: Hiccup (cHoy@user/hiccup) (Remote host closed the connection)
[14:55:14] *** Quits: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104) (Quit: Connection closed)
[15:02:41] *** Quits: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.3)
[15:03:39] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 245 seconds)
[15:05:10] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 260 seconds)
[15:11:03] *** Joins: fandre1986 (~fandre198@178-36-241-155.adsl.inetia.pl)
[15:11:49] *** Joins: fandre198689 (~fandre198@178-36-241-155.adsl.inetia.pl)
[15:11:54] *** Quits: fandre198689 (~fandre198@178-36-241-155.adsl.inetia.pl) (Client Quit)
[15:14:09] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[15:20:29] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[15:24:52] *** Quits: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104) (Client Quit)
[15:25:07] <fakuve> Naktibalda: ok so It basically structure the subdirectories it "scan" as children namespaces
[15:25:16] <fakuve> Naktibalda: thank you that was really needed
[15:27:52] <fakuve> So basicaly the subdirectories should be called using PascalCase , so it follows the `\<NamespaceName>(\<SubNamespaceNames>)*\<ClassName>` structure
[15:29:54] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[15:30:54] <fakuve> It is so weird , cause this chap is not really capitalizing his fileNames , yet he addresses them capitalized ... https://youtu.be/nCxnzj83poQ?t=69 . I bet it has something to do with `Windows` an case insensitiveness
[15:33:35] *** Joins: stenno (~stenno@user/stenno)
[15:35:32] <biberu> fakuve: he may just have set his autoloader to look for lowercase names
[15:35:42] <dag> fakuve: here is the standard for psr4√ò
[15:35:45] <dag> https://www.php-fig.org/psr/psr-4/
[15:35:56] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[15:36:45] <fakuve> oks
[15:36:52] <biberu> curious that he's running as root though...
[15:37:02] <dag> it's just some rules for mapping namespace to file. there isn't really any other connection between file location and namespace. they are separate concepts.
[15:37:42] *** Joins: guido (~guido@host-79-23-84-132.retail.telecomitalia.it)
[15:37:44] <fakuve> How do you guys debug namespaces issues ? do you add `echo __NAMESPACE__` in different places of the project?
[15:37:45] <dag> fakuve: in windows, file names are case-insensitive. might explain their hehaviour
[15:38:02] <biberu> the guy in the video isn't running windows
[15:38:10] <dag> fakuve: what does "debug namespace issue" mean?
[15:38:44] <fakuve> dag: well when you are not able to access to some classes cause you are not reaching certain namespace
[15:39:00] <fakuve> ` Uncaught Error: Class "App\Invoice" not found `
[15:39:46] <dag> well it means incomplete understanding of autoloading probably. if you are using psr4 you can inspect vendor/composer/autoload_psr4.php and verify if it looks okay
[15:41:01] <fakuve> I'm 'echo __NAMESPACE__ ;` at `./src/app/Invoice.php` and it says `App` (cause is placed right after the stament of `namespace App;` but I am not able to load the class from the other file `./src/public/index.php` as `$invoice = new App\Invoice();`
[15:41:29] <dag> are you using composer fakuve?
[15:41:34] <fakuve> I am yes
[15:42:18] <dag> your autoload property in composer.json should look something like "autoload": { "psr-4": { "App\\": "./src/app" } },
[15:42:30] <dag> also are you including `vendor/autoload.php`?
[15:42:42] <fakuve> yes , let me show you how its the project now
[15:43:20] <fakuve> https://hastebin.com/nakujocona
[15:43:22] *** Quits: PersonX (~PersonX@d66-183-55-27.bchsia.telus.net) (Ping timeout: 265 seconds)
[15:44:16] <fakuve> Line 66 is failing to load the Class
[15:44:28] *** Joins: Sal` (~Sal@151.27.48.61)
[15:45:39] <Sal`> I'm loading a class using a variable: $cls = new $class($arg1, $arg2)
[15:46:13] <dag> fakuve: the App namespace is rooted at ./src which is incorrect. it should be rooted at ./src/app
[15:46:55] <Sal`> how can I add a namespace to it? Do i need to add it inside the $class string or can I do something like: new $namespace.'\'.$calss(...)
[15:47:38] <fakuve> dag: it works now thanks!
[15:50:20] *** Quits: Sal` (~Sal@151.27.48.61) (Quit: Leaving)
[15:51:09] *** Quits: fahrradToken (~fahrradTo@212.7.190.34) (Ping timeout: 245 seconds)
[15:54:58] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[15:56:01] *** Joins: pmercado (~pmercado@186.107.35.198)
[15:57:08] *** Quits: Cork (~Cork@user/cork) (Quit: .)
[15:57:11] *** Joins: stenno (~stenno@user/stenno)
[15:57:40] *** Joins: Cork (~Cork@user/cork)
[16:02:20] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 260 seconds)
[16:04:35] *** Joins: omegatron (~some@p5b056a70.dip0.t-ipconnect.de)
[16:06:44] <__adrian> Sal`: the namespace is _part of_ the classname. e.g., if you have a class C in namespace A\B, then $class = "C" is NOT the classname; it's $class = "A\B\C".
[16:07:17] <__adrian> you can prepend either way, but the better solution is to use the complete classname from the start (e.g., $class = C::class;)
[16:08:51] *** Quits: ArchNoob (~maotora@user/archnoob) (Ping timeout: 265 seconds)
[16:18:35] *** Joins: sumthing1980 (~sumthing1@94.54.64.154)
[16:24:41] <fakuve> in `public function __isset(string $propertyName) : bool { //some more code` , how do you call the colon : bool . That is typing the return of the function is it?
[16:27:45] <dag> it's called return type hint
[16:29:27] <fakuve> oks thanks
[16:30:04] *** Joins: tester12 (~tester12@5.119.185.200)
[16:31:53] <tester12> hi freinds
[16:32:35] *** Quits: tester12 (~tester12@5.119.185.200) (Client Quit)
[16:32:50] *** Joins: tester12 (~tester12@5.119.185.200)
[16:33:50] *** Quits: pmercado (~pmercado@186.107.35.198) (Ping timeout: 260 seconds)
[16:35:47] *** Joins: semeion (~semeion@user/semeion)
[16:38:26] *** Quits: fandre1986 (~fandre198@178-36-241-155.adsl.inetia.pl) (Quit: Connection closed)
[16:47:35] <tester12> hi freinds
[16:48:00] <tester12> can I ask a question about debugging php code by phpstorm here??
[16:50:06] *** Quits: Creak[m] (~creak@2001:470:69fc:105::8af) (Write error: Connection reset by peer)
[16:50:07] *** Quits: wutzelputz (~wutzelput@2001:470:69fc:105::3117) (Read error: Connection reset by peer)
[16:50:09] *** Quits: kuhilas (~kuhilas@2001:470:69fc:105::3040) (Write error: Connection reset by peer)
[16:50:11] *** Quits: Rubin (~rubin@2001:470:69fc:105::17e) (Read error: Connection reset by peer)
[16:50:12] *** Quits: ramsey[m] (~ramsey@phpc/ramsey) (Read error: Connection reset by peer)
[16:52:39] <tester12> who is awake? =D
[16:52:47] *** Joins: ramsey[m] (~ramsey@phpc/ramsey)
[16:56:42] *** Joins: RonWhoCares (~ronpi@dhcp-108-170-129-12.cable.user.start.ca)
[16:57:14] <RonWhoCares> I've just upgraded php.  I am getting the error:     Warning: session_start(): Failed to read session data: user (path: /var/lib/php/sessions) in /vhosts/rons-home.net/public/index.php on line 26     What needs to be installed?
[16:57:32] *** Joins: Creak[m] (~creak@2001:470:69fc:105::8af)
[16:57:32] *** Joins: kuhilas (~kuhilas@2001:470:69fc:105::3040)
[16:57:32] *** Joins: wutzelputz (~wutzelput@2001:470:69fc:105::3117)
[16:57:32] *** Joins: Rubin (~rubin@2001:470:69fc:105::17e)
[16:59:47] *** Joins: stenno (~stenno@user/stenno)
[17:03:27] <tester12> RonWhoCares It seems guys are sleep =D X-P    maybe this can help you :
[17:03:28] <tester12> https://stackoverflow.com/questions/41540302/failed-to-read-session-data-on-php7-1/41540303
[17:04:17] <RonWhoCares> Thank you tester12
[17:04:44] <tester12> RonWhoCares Your Welcome
[17:07:15] <dag> RonWhoCares: the folder permission needs to be something like this: drwx-wx-wt 2 root root 4096 Oct  7 20:09 /var/lib/php/sessions
[17:08:10] <dag> the php process needs to have write permssion to the folder. (o+w). and it should be able to read its own files in there
[17:08:46] <dag> if an upgrade broke this it sounds like the php process user changed so that it e.g. www-data is no linger able to read http'filess
[17:10:40] <RonWhoCares> dag: drwx-wx-wt  2 root root 4096 Dec 17  2018 sessions
[17:13:07] <dag> RonWhoCares: well you can do ls -l /var/lib/php/sessions and see who the owners of the files are. they should match the php process user
[17:13:59] <dag> on debian the php-fpm user is www-data but might be different on other distros
[17:14:08] <RonWhoCares> It says "total 0"
[17:14:27] <RonWhoCares> I am using debian
[17:14:38] <fakuve> In one of these return hints , whats the difference between specifying it like ` function ($argument ) : array {//code ..` or `function ($argument ) : ?array {//code .. ` what is the question mark doing in here
[17:14:53] *** Joins: ArchNoob (~maotora@user/archnoob)
[17:16:45] <stenno> in C#, '?' means nullable
[17:16:52] <stenno> i assume its the same in php typehints
[17:16:54] <dag> fakuve: https://wiki.php.net/rfc/nullable_types
[17:16:58] <stenno> so, array or null
[17:17:23] *** Quits: Tempesta (~Tempesta@user/tempesta) (Quit: AdiIRC is updating to v4.1 Beta Build (2021/10/08 UTC) 64 Bit)
[17:17:37] *** Joins: Tempesta (~Tempesta@user/tempesta)
[17:18:16] <fakuve> ok thanks guys I see
[17:21:49] <RonWhoCares> dag: I now have:    drwx-wx-wt  2 root www-data 4096 Dec 17  2018 sessions
[17:22:03] <dag> RonWhoCares: did you write this app? does it have a custom session handler?
[17:22:21] <RonWhoCares> dag: That is a good question.  I will have to check
[17:22:30] <biberu> fakuve: in the case of array, consider if an empty array isn't better than null
[17:23:38] <RonWhoCares> dag: Yes I did write it.  That does remind me of my session handler.  I will have to see what I was thinking.
[17:24:02] <dag> RonWhoCares: https://www.php.net/manual/en/function.session-set-save-handler.php the read() callback probably returns something unexpected
[17:24:22] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Read error: Connection reset by peer)
[17:24:24] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[17:24:37] <RonWhoCares> Okay
[17:25:24] <RonWhoCares> I need some more rest.  I had a real rough day yesterday.  My pet hamster died.
[17:25:36] <tester12> can I ask a question about debugging php code by phpstorm here??
[17:25:55] <dag> just whatever you like tester12
[17:26:24] <tester12> really? ok
[17:26:26] <dag> ask whatever you like. you will be told if it's inappropriate
[17:26:38] <tester12> I use xdebug to debugging my php codes in phpstorm
[17:26:39] <tester12> when I start debugging frome line 23 for example, after some step into other line, how can I skip to other line for example from line 29 skip to line 1254
[17:26:39] <tester12> I want run codes between 29 and 1254 but needs quick go to line 1254
[17:26:40] <tester12> how can I do this?
[17:27:20] <dag> you set a break point at line 1254 and press "continue execution"
[17:27:30] <fakuve> biberu: cheers I got the concept :D
[17:29:16] <dag> tester12: the play button "Resume execution". can be invoke by pressing F9
[17:29:53] *** Joins: Diego (~textual@user/diego)
[17:30:09] <tester12> in real I want from line 29 go to or skip to 1252 without skipping processing and just dont stop on any line in debugging
[17:31:03] <Naktibalda> remove other breakpoints and you will get that
[17:31:27] <tester12> dag ok thanks , I ll try it
[17:32:49] *** Quits: ArchNoob (~maotora@user/archnoob) (Ping timeout: 245 seconds)
[17:33:09] <tester12> Naktibalda in debug step into goes to other line when debugging, I dont want goto line 1254 directly in simple way, I want go to 1254 after getting to line 29
[17:33:29] <tester12> in debug mode
[17:35:40] <tester12> dag thank you very much, it worked
[17:35:57] <tester12> but a question
[17:36:03] *** Joins: junktext (~junktext@77.247.181.218)
[17:36:29] <tester12> all line before 1254 was processed without any skipping ?
[17:36:38] <tester12> dag
[17:38:01] <dag> all lines must be executed/processed. you can stop wherever you like
[17:39:25] <tester12> dag OK ,thanks again goodboy/goodgirl=D  , good lucky
[17:41:05] *** Quits: tester12 (~tester12@5.119.185.200) (Quit: Client closed)
[18:19:26] *** Joins: ArchNoob (~maotora@user/archnoob)
[18:25:12] <fakuve> Isn't there a way to view in what namespace you are in (in any part of the code) , in respect with the global namespace ?
[18:25:26] <__adrian> there's no such thing as a "global namespace"
[18:25:40] <__adrian> and yes,  __NAMESPACE__  is the current namespace
[18:25:49] <fakuve> yes that is the current
[18:26:09] <fakuve> The global namespace as in the Top level one
[18:26:21] <fakuve> The one which doesn't have any parent to it
[18:26:22] <__adrian> assuming you mean  /
[18:26:27] <fakuve> Yeah
[18:26:28] <__adrian> just "root"
[18:26:33] <fakuve> root ok
[18:26:37] <stenno> namespace is not scope
[18:26:41] <__adrian> ^
[18:26:52] <fakuve> Ok sorry for the terminology
[18:27:27] <fakuve> ok let me show you what I mean with my example
[18:27:33] <__adrian> no problem - just making an important distinction. "global" is misleading as it refers to scope; namespaces have nothing to do with scope
[18:28:08] <fakuve> Thanks , is good to be corrected yeah
[18:28:42] <stenno> good attitude
[18:29:22] <fakuve> I am again with other exercise of the tutorials https://hastebin.com/fesoqeluku , when loading the class (line 80) It doesn't exists on the namespace
[18:30:02] <__adrian> > "App\\": "/src"
[18:30:03] <fakuve> I am aware that I don't fully understand psr-4 autoload of composer , but I'm trying to see if I can get some info by using some commands
[18:30:12] <__adrian> just glancing, but shouldn't this be  "/src/app"  ?
[18:30:32] <__adrian> that mapping is   <namespace part>: <diretcory>
[18:30:37] <__adrian> *directory
[18:30:39] <fakuve> It may , of course you are used to this
[18:31:10] <fakuve> But for me is tricky . So first of all . The reason of being of autoload is basically load all the classes
[18:31:14] <__adrian> no
[18:31:15] <fakuve> Automatically
[18:31:20] <__adrian> the point is to load only the classes you're using
[18:31:27] <__adrian> *actually using
[18:31:30] <fakuve> Ok , but automatically
[18:31:33] <__adrian> yes
[18:31:46] <__adrian> that mapping is   <namespace part>: <directory>
[18:31:51] <fakuve> So I would do something like `            "App\\": "/src"`
[18:32:07] <__adrian> BUT are those class files in the src/ directory?
[18:32:13] <fakuve> and then I completely forget about whatever happens on there , cause autoload is working in the background
[18:32:29] <fakuve> they are
[18:32:35] <fakuve> they are in /src/app
[18:32:36] <__adrian> your directory diagram there says they're in  src/app
[18:32:51] <fakuve> well they are in a children of it
[18:32:56] <__adrian> you told composer that  "App" means "look in src".
[18:33:00] <fakuve> doesn't autoload work recursively ?
[18:33:01] *** Joins: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:91dd:865c:ff98:51ed)
[18:33:09] <__adrian> so it's looking for a file at  src/CollectionAgency.php
[18:33:15] <fakuve> ok
[18:33:18] <__adrian> no, you _specify_
[18:33:31] <__adrian> because that way you can do what you actually want with no guessing
[18:33:36] <fakuve> Ok so I have to specify one namespace per sub-directory
[18:33:41] <freeman_h> Hi guys not sure if this the right chat but is the a way in linux server to see how many external request is going in and out of your server?
[18:33:43] <__adrian> you don't _have to_
[18:33:53] <__adrian> it's pretty common to do it that way
[18:34:14] <fakuve> But it doesn't work recursively at all
[18:34:46] <fakuve> Or better said , Providing `            "App\\": "/src"` in my current project
[18:35:09] <__adrian> but say i have classes  A\B\C  and A\B\C\X\Y\Z, and i want A\B\C to be at A/B/C.php and A\B\C\X\Y\Z to be at A/B/Y/Z.php
[18:35:13] <fakuve> I have no way to call `New CollectionAgency`
[18:35:48] <fakuve> ok
[18:35:54] <__adrian> that's fine - "A\\": "src/A/"  and "A\B\C\X\Y\\": "src/A/B/Y/"
[18:36:19] <__adrian> but most people keep it simple and match up the namespace:directory structure pretty closely
[18:36:46] <fakuve> ok I see
[18:37:51] <fakuve> So Right now , I should be able to use `New CollectionAgency` by just `$collector = new \App\app\CollectionAgency;`
[18:37:52] <__adrian> but yes, it's _instructions_, not "hints." if "App\\":"src/" meant "somewhere in src/" and you had two files with that name, how would you know which one you got?
[18:38:15] <__adrian> why  \App\app\CollectionAgency ?
[18:38:22] *** Quits: freeman_h (~freeman_h@2a02:c7f:fc54:ba00:91dd:865c:ff98:51ed) (Ping timeout: 252 seconds)
[18:38:32] <__adrian> in your example it's  \App\CollectionAgency
[18:39:14] <fakuve> Ok so providing that I have `            "App\\": "/src"` that means App\\ (we are in src)  so as the class is /src/app/ClassName.php
[18:39:33] <fakuve> I have to `\App\app\ClassName`
[18:39:53] <__adrian> <if this part of the namespace matches>: <look for the rest of the name in this directory>
[18:39:53] <fakuve> But I still have a namespace defined in `/src/app/ClassName.php`
[18:40:21] <__adrian> yes, should be  namespace App;
[18:40:29] <__adrian> is it not?
[18:40:52] <fakuve> Within the ClassName.php , the namespace is App
[18:41:02] <Naktibalda> fakuve: I told you this hours ago:  App namespace matches src/ dir, so App\Invoice must be in src/Invoice.php
[18:41:09] <__adrian> does it look like this?  <?php namespace App; class CollectionAgency { ... }
[18:41:10] <fakuve> yeah , but then I reckon it get nested by autoload
[18:41:25] <__adrian> don't "recon" things. just read the instructions  :)
[18:41:31] <__adrian> *reckon
[18:41:37] <__adrian> does it look like this?  <?php namespace App; class CollectionAgency { ... }
[18:41:57] <fakuve> Ok
[18:42:01] <__adrian> and the file is /src/app/ClassName.php  ?
[18:42:15] <fakuve> Yes
[18:42:16] <__adrian> er,  /src/app/CollectionAgency.php  ?
[18:42:33] <__adrian> and your psr-4 says   "App\\": "src/app/"   ?
[18:42:39] <fakuve> Thatone not
[18:42:54] <fakuve> My psr-4 then is wrong I guess
[18:43:27] <__adrian> when you use a classname  \App\CollectionAgency , then  "App\\": "src/app/"  would tell composer to start with  src/app/
[18:43:36] <__adrian> it would then find CollectionAgency.php
[18:43:37] <fakuve> Do you guys have examples of repos using psr-4 autoload?
[18:43:48] <__adrian> github is full of them
[18:44:00] <fakuve> I need to know how to find them though
[18:44:20] <fakuve> let me check cause the other day I ended up in a library , and is not the same example
[18:44:24] <__adrian> tell me what you don't understand about the explanation above
[18:44:41] <__adrian> libraries define autoloading the same way
[18:44:44] <fakuve> Ok let me parse this
[18:46:21] <__adrian> e.g., https://github.com/php-enspired/exceptable/blob/master/composer.json#L28-L31
[18:46:53] <fakuve> Ok so the causality is . When executing this projects . 1) \App\CollectionAgency  , will get to autoload-psr4 , which will take it to the subdirectory of "App\\": "src/app/"
[18:47:02] <__adrian> yes
[18:47:06] <fakuve> 2nd) It would find the file
[18:47:11] <__adrian> yes
[18:47:30] <fakuve> But in my case as I have defined wrongly in composer.json "App\\": "src/" It doesnt find anything
[18:47:38] <__adrian> yes
[18:47:43] <fakuve> Ok one question
[18:47:56] <__adrian> (aside: do you actually want/need that subdirectory  app/  for some reason?)
[18:47:58] <fakuve> Why then define  again a namespace within the class ?
[18:48:18] <__adrian> if you don't declare the namespace for the file, it will not be namespaced.
[18:48:24] <fakuve> __adrian: (Im just copying the tutorial , so not really a reason to do things this way)
[18:48:43] <fakuve> ok so those are the 3 conditions
[18:48:48] <fakuve> To get something autoloaded
[18:49:07] <__adrian> as i said above, namespacing IS NOT a directory structure. people just often make them line up, for convenience.
[18:49:11] <Naktibalda> __adrian: earlier I found old php-fig discussion about interface name, and one argument against -able was that it can be difficult to comeup with such name, so PHP ended up using Throwable because Exceptionable is not a word.
[18:49:37] <__adrian> it's like thinking a URL is the same thing as a filesystem path. apache macthes them against each other, but they're NOT the same thing at all.
[18:49:51] <fakuve> ok
[18:49:52] <__adrian> Naktibalda: lol
[18:50:00] *** Quits: daedeloth (~daedeloth@91.183.109.67) (Remote host closed the connection)
[18:50:04] <__adrian> also wth "Exceptionable" is a word
[18:50:05] <fakuve> I'm gonna be fiddeling with this now
[18:50:23] <fakuve> What I don't understand now
[18:50:30] <Naktibalda> fakuve: you can use classmap autoloading and stop worrying about directory structure
[18:50:42] <__adrian> ^ you _can_
[18:50:44] <fakuve> (the only thing ) is how to set up autoload to be recursive
[18:50:46] <__adrian> but i wouldn't
[18:50:52] <__adrian> you DON'T.
[18:50:58] <__adrian> "recursive" is not desirable.
[18:51:01] <fakuve> Ok
[18:51:17] <__adrian> you absolutely don't want the autoloader to try to guess which file you want.
[18:51:30] <fakuve> So basically for each subdirectory you should instruct the `composer.json` to parse it in a different namespace
[18:51:37] <__adrian> you want to _know_ which file should be loaded, without question.
[18:51:42] <__adrian> ?
[18:52:05] <__adrian> no, like i said, most people line up their directory structure with their namespaces, for this reason.
[18:52:25] <Naktibalda> fakuve: usually all code of the single repository is in one top level namespace, so you can set it at /src
[18:52:26] *** Quits: deksar (~deksar@user/deksar) (Quit: Going offline, see ya! (www.adiirc.com))
[18:52:26] <__adrian> psr-4 uses the classname to map to a directory path.
[18:53:09] <__adrian> e.g., "App\\":"src/"  will let it find  App\A  at src/A.php  or  App\X\Y\Z at src/X/Y/Z.php
[18:53:11] <fakuve> meaning If I have say `./src/app/ClassInHere.php` ./src/otherDir/OtherClassHere.php` , then I would have to "App\\": "src/app/" "OtherDir\\" : "src/otherDir"
[18:53:21] <__adrian> yes
[18:53:26] <__adrian> but that's a terrible structure  :)
[18:53:31] <fakuve> :D
[18:53:37] <fakuve> entry per subdirectory
[18:53:39] *** Joins: freeman_h (~freeman_h@94.5.86.162)
[18:53:42] <__adrian> tip:
[18:53:46] <freeman_h> Hi all anyone had this issue please
[18:54:14] <freeman_h> https://kopy.io/9rPoa getting this error
[18:54:17] <freeman_h>  FastCGI sent in stderr: "PHP message: PHP Deprecated:  Array and string offset access syntax with curly braces is deprecated
[18:54:23] <__adrian> USUALLY, make namespaces like  <Vendor>\<Project>\<optional group>\
[18:54:31] <freeman_h> after that my site goes down but the server is up
[18:54:36] <Naktibalda> freeman_h: replace {} with []
[18:54:43] <__adrian> and then use psr-4 like  "Vendor\\Project\\": "src/"
[18:54:59] <Naktibalda> freeman_h: is it some kind of exploit?
[18:55:03] <fakuve> __adrian: ok
[18:55:16] <fakuve> Thanks a lot , I will have this into consideration
[18:55:23] <Naktibalda> $O00O0O{1}.$O00O0O{20}.$O00O0O{25}
[18:55:27] <__adrian> e.g., Fakuve\ExampleProject\Classname  would be found at  src/Classname.php
[18:55:47] <fakuve> Btw , anytime you change composer.json , do you need to re-dump the `composer dump-autoload` ?
[18:55:58] <__adrian> and Fakuve\ExampleProject\Other\Classname  would be found at  src/Other/Classname.php
[18:56:08] <fakuve> ok
[18:56:43] <__adrian> you usually won't need to dumpautoload unless your new classes don't follow the psr-4 definition you alreday had
[18:57:10] <fakuve> ok I see
[18:57:42] <fakuve> Ok so thanks a lot again , I'm writting this down in my notes , I'm gonna fiddle now a little bit with this
[18:57:44] <freeman_h> Naktibalda, it's from wordpress. the whole file just make me feel ill
[18:58:38] <Naktibalda> wow, I have never seen s search result with some much exposed PHP code before: https://duckduckgo.com/?t=ffab&q=getattr+%24O00O0O%7B1%7D.%24O00O0O%7B20%7D.%24O00O0O%7B25%7D&atb=v185-1&ia=web
[18:58:47] <__adrian> if you add a new dependency or something, of course, you'll need to  composer install  again
[18:58:58] <__adrian> bbl, meeting.
[18:59:24] <Naktibalda> freeman_h: are you to try to fix backdoor installed to your site?
[18:59:32] <freeman_h> Naktibalda, https://kopy.io/jZgSG just look at this. read the comments is disturbing
[18:59:46] <freeman_h> Naktibalda, the site keeps going down every 20 mins
[18:59:59] <fakuve> thanks!!
[19:00:00] <freeman_h> i have to keep reboot the server and trying to find what is going on
[19:01:20] <freeman_h> define("MYDIR", "/ebayus210714-6/");
[19:01:29] <freeman_h> just makes me think its an ebay plugin
[19:06:08] <Naktibalda> I found the same code at http://assioctg.com/RV-Trailer-&-Camper-Interior-Parts/923866-Dometic-DuoTherm-Air-Conditioner/ :)
[19:13:08] <freeman_h> the link seems to try and download something
[19:15:27] <Naktibalda> freeman_h: look what that function generates: https://3v4l.org/1KUNv#v7.1.13
[19:16:39] *** Quits: nucc1 (~nucc1@user/nucc1) (Quit: Textual IRC Client: www.textualapp.com)
[19:17:20] <Naktibalda> the first search result with first domain name is a pastebin named "Against the bad guys"
[19:19:10] <Naktibalda> datecenter.com is for sale, so hopefully it can't do much harm now.
[19:19:15] <Naktibalda> anyway, delete it
[19:19:20] <freeman_h> which bad guys?
[19:20:41] <freeman_h> Naktibalda, you delete it and it gets recreated
[19:21:27] <Naktibalda> search "my wordpress site is hacked, help me!"
[19:22:34] *** Joins: WishBoy (~WishBoy@user/wishboy)
[19:23:50] <freeman_h> Naktibalda, thanks :)
[19:24:54] *** Quits: Diego (~textual@user/diego) (Quit: My MacBook Air has gone to sleep. ZZZzzz‚Ä¶)
[19:24:54] *** Quits: ArchNoob (~maotora@user/archnoob) (Ping timeout: 245 seconds)
[19:26:13] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 252 seconds)
[19:27:57] *** Joins: genom (~g@37.214.31.255)
[19:38:27] *** Quits: semeion (~semeion@user/semeion) (Read error: Connection reset by peer)
[19:41:25] <__adrian> fakuve: also just noticed your  DebCollector.interface.php  - don't include things like ".interface"
[19:41:34] <__adrian> just name this  DebCollector.php
[19:42:20] <__adrian> ".interface" is useless/obvious information, and will complicate your autoloading further
[19:42:28] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[19:48:06] <fakuve> Ok
[19:48:36] <fakuve> __adrian: I'm trying to do a template now of a project for the autoloader and leave everything neat
[19:50:29] <__adrian> that's why i brought it up  ;)  the extra part in the filename will make your autoloading needlessly difficult/complicated
[19:50:51] <__adrian> aside from also being needlessly difficult/complicated in every other respect
[19:54:37] *** Joins: semeion (~semeion@user/semeion)
[19:54:56] <fakuve> Ok
[19:57:43] <fakuve> __adrian: getting close hehem https://hastebin.com/iridalujik , its not finding the class yet but it looks decent
[19:58:33] <__adrian> (1)  namespace MyUser\MyProject\; ‚Üê no trailing \
[19:58:56] <__adrian> (2)  use MyUser\MyProject;  ‚Üê there's no point in using the namespace
[19:59:16] <__adrian> (3)  New MyClassOne;  ‚Üê this looks for \MyClassOne
[19:59:59] <__adrian> `use` makes an alias. so in order to do  New MyClassOne  you'd need to alias that classname (so we know about the namespace part).
[20:00:17] <__adrian> <?php  use MyUser\MyProject\MyClassOne; new MyClassOne();
[20:00:41] <fakuve> ahh
[20:01:04] <Naktibalda> alternatively you can do new MyProject\MyClassOne()  or use a fully quallified name   new \MyUser\MyProject\MyClassOne()
[20:01:24] <fakuve> So the alias cannot be used for the namespace it has to be done to an specific class (that kills the purpose of automating it)
[20:01:29] <__adrian> works, though i don't generally recommend either of those.
[20:01:38] <Naktibalda> you can't import all classes from namespace in PHP
[20:01:52] <__adrian> you _can_ alias a namespace (it doesn't work like you seem to expect)
[20:02:17] <fakuve> ok So let me amend this
[20:02:25] <__adrian> use MyUser\MyProject  ‚Üê makes an alias "MyProject" that resolves as "\MyUser\MyProject"
[20:02:42] *** Quits: sumthing1980 (~sumthing1@94.54.64.154) (Quit: Leaving)
[20:03:09] <__adrian> i always recommend aliasing every (non-built-in) classname used in a namespaced file.
[20:03:34] <__adrian> s/(non-built-in)//
[20:03:41] <__adrian> sorry was writing two sentences at once there  :[
[20:03:45] <Naktibalda> some people insist on aliasing builtin classes and functions too
[20:03:47] <fakuve> Ok so this is the project template now https://hastebin.com/yisocesira
[20:03:52] <fakuve> It is working
[20:04:42] <__adrian> now you can do    use MyUser\MyProject\ { MyClassOne, MyClassTwo, MyClassThree };
[20:04:52] <__adrian> but that's just preference
[20:05:49] <Sammitch> how recent is that?
[20:05:54] <__adrian> not very
[20:06:01] <fakuve> Ok thats quite cool
[20:06:02] <__adrian> i think it came that way
[20:07:02] <__adrian> https://php.net/namespaces.importing
[20:07:45] <Sammitch> well TIL
[20:07:51] *** Joins: freeworld (~vit@85.216.193.138)
[20:08:44] <fakuve> Ok so thats really cool . Thanks very much guys again
[20:08:49] <fakuve> I'm going to the pool
[20:08:54] <fakuve> This is the current template https://hastebin.com/osukeyewor
[20:09:00] <fakuve> We will be ready to set off soon :D
[20:09:44] <fakuve> end game greatings __adrian Naktibalda and some others on there hhehem
[20:09:47] <fakuve> see ya guys
[20:13:10] *** Joins: Rockwood (~Rocky@user/rocky)
[20:34:59] *** Quits: stan_man_can (~stanley@d66-183-88-69.bchsia.telus.net) (Quit: ZNC - https://znc.in)
[21:08:57] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[21:33:11] *** Joins: magla (~gelignite@55d4b3fc.access.ecotel.net)
[21:36:08] *** Quits: ReimuHakurei (~Reimu@raphi.vserver.alexingram.net) (Ping timeout: 252 seconds)
[21:37:03] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: ASCII a stupid question, get a stupid ANSI!)
[21:38:00] <Hash> Question frojm last night continues
[21:38:17] <Hash> define('ENVIRONMENT', isset($_SERVER['CI_ENV']) ? $_SERVER['CI_ENV'] : 'development');
[21:38:21] <Hash> Message: Failed opening required '/var/www/social/application/third_party/rb.php'
[21:38:35] <Hash> This message only shows up if I set the dev env to development.
[21:38:48] <Hash> Since it's a fatal error, shouldn't it show up reglardless of error reporting?
[21:39:04] <Hash> In code igniter, I don't see the message that a include file is missing in fatal php error/nginx error log
[21:39:15] <Hash> I only get this error in code igniter front end.
[21:39:32] <Hash> I had thought that if any dependency or require/include is missing, php will tell me.
[21:42:29] <__adrian> we have no idea what that const means or what decisions are based off of it. if it is indeed a `require` statement (not an `include` statement) then yes, it would error regardless of error reporting settings (though it may not be logged or displayed).
[21:42:49] <__adrian> more likely is that the value of that const causes the file to be required in one case and not the other.
[21:43:28] <__adrian> (e.g., similar to  if (ENVIRONMENT === 'development') { require "/var/www/social/application/third_party/rb.php"; }
[21:43:31] <__adrian> )
[21:46:42] <Hash> I see.
[21:48:37] <Hash> require errors but include is silent?
[21:49:18] <__adrian> https://php.net/include  both error. require is fatal; include is not
[21:49:39] <Hash> Oh ok
[21:51:25] <da_wunder> also for that "require "/var/www/social/application/third_party/rb.php";" - is there some reason that you don't use composer to install that 3rd party libaryy?
[21:53:39] <Hash> That's a good idea
[21:53:43] <Hash> Let me see if its available.
[21:54:18] <Hash> It is.
[21:54:31] <__adrian> also not great to keep source files under your document root (assuming /var/www) but i'll let you troubleshoot first
[21:54:32] <Hash> I have already using fakerphp to make fake accounts on site for testing
[21:55:26] <Hash> true
[21:55:42] <Hash> but document root is /public and everything code wise lives outside ../system and ../application etc.
[21:55:51] <Hash> code igniter 3, needing to update to 4 or maybe laravel. I dunno yet
[21:55:53] <da_wunder> yep, just expose eg. index.php to internet - rest of your application (at least php part) should live outside of that directory
[21:56:03] <Hash> that's how I have it.
[21:56:24] <__adrian> mm
[21:57:02] <Hash> I like code igniter as it gets out of you way mostly.
[21:57:10] <Hash> laravel is too much laravel.
[21:57:23] <Hash> https://packagist.org/packages/gabordemooij/redbean
[21:57:42] <da_wunder> personally I like to use Symfony
[21:57:56] <Hash> I use the code igniter 3 db classes mostly only
[21:58:08] <Hash> I used redbean for literally 1 admin controller function.
[21:58:42] <Hash> I CodeIgniter uses a modified version of the Active Record Database Pattern.
[21:59:21] <Hash> https://gitlab.com/hashborgir/social/-/blob/master/application/models/Profile_model.php for example
[22:01:14] <da_wunder> hmm, that query on line 21 - why to use left join there? I bet that each user has to have that profile - right?
[22:01:41] <Hash> sec
[22:01:56] <da_wunder> and same seems to be in search, and get_profile_by_id methods...
[22:02:00] <Hash> https://gitlab.com/hashborgir/social/-/blob/master/social.schema.sql here's the schemea
[22:02:04] <Hash> If you want to look
[22:02:26] <Hash> I'm not so great in development but learning
[22:02:30] <da_wunder> and the query seems to be same in those all - so refactor that to just one place instead of three
[22:02:58] <Hash> I don't quite understand what you mean.
[22:03:17] <Hash> LEFT JOIN
[22:03:19] <Hash>      user ON profile.userid = user.id
[22:03:21] <Hash> Is reapated thrice
[22:03:33] <Hash> I can't seem to imagien how I might factor that out 3(X) etc.
[22:03:49] <da_wunder> actually only that where part is changing - so wrap that to parameter and determine that query according to that parameter
[22:03:58] <Hash> Hmm.
[22:04:02] <Hash> I'm slow.
[22:04:19] <da_wunder> do you know difference between LEFT JOIN and INNER JOIN ?
[22:04:56] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[22:05:03] <da_wunder> but now sauna, back in ~1 hour ->
[22:05:31] <Hash> da_wunder: I don't. I will learn by the time you return, hopefully.
[22:05:33] <Hash> BRB
[22:07:16] <__adrian> Hash: https://dq-blog-files.s3.amazonaws.com/joins-tutorial/join_venn_diagram.svg
[22:10:09] *** Quits: gordonfish (~gordonfis@user/gordonfish) ()
[22:12:58] *** Quits: Oclair (~Oclair@nq3.aventia.pw) (Quit: %Cya%)
[22:15:40] *** Quits: magla (~gelignite@55d4b3fc.access.ecotel.net) (Quit: Stay safe!)
[22:23:06] *** Joins: stan_man_can (~stanley@d66-183-88-69.bchsia.telus.net)
[22:36:09] *** Hash is now known as RitaDivaj
[22:41:38] *** Quits: Furai (~Furai@cookiehoster.furai.pl) (Ping timeout: 246 seconds)
[22:47:08] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[22:47:55] <gordonfish> I'm fixing up some old code for someone to work with php7, and I've encountered this error that I'm not quite sure how to solve (it's a difficult one to search for)
[22:48:21] <gordonfish> "PHP Parse error: syntax error, unexpected '&' in", which is due to a line with &$this
[22:48:34] *** Quits: muley (~muley@76-245-68-99.lightspeed.iplsin.sbcglobal.net) (Remote host closed the connection)
[22:48:39] <gordonfish> I can't find what this should be in modern php versions.
[22:48:40] <__adrian> ...heh
[22:48:43] *** Quits: biberu (~biberu@user/biberu) (Read error: Connection reset by peer)
[22:48:44] <__adrian> remove the &
[22:48:54] <gordonfish> Oh... that's it?
[22:49:03] *** Joins: biberu (~biberu@user/biberu)
[22:49:18] <gordonfish> What did &$this do in previous versions of PHP?
[22:49:30] <gordonfish> A sort of take-address-of ?
[22:49:30] <Sammitch> functionally nothing
[22:49:44] <__adrian> it's a reference, yes
[22:49:52] <__adrian> but with objects, it's pointless
[22:49:53] <gordonfish> s/address-of/reference-to/
[22:49:58] <gordonfish> I see
[22:50:00] <Sammitch> references are not pointers, and objects are basically references anyways
[22:50:05] <__adrian> and with $this... i honestly didn't know it was ever valid
[22:50:06] <gordonfish> Thank you very much.
[22:50:07] <stenno> pointer-less
[22:50:59] <gordonfish> Sammitch: Yeah I would have figured an object instance would always be a reference
[22:52:14] <__adrian> conceptually, yes, it's a "reference"
[22:52:28] *** Quits: brentaarnold (~brentaarn@32.132.115.46) (Read error: Connection reset by peer)
[22:52:30] <__adrian> but in technical terms, "reference" doesn't mean the same thing in php as it does in other languages
[22:52:52] <__adrian> and with objects, it's not even a "reference" in php terms.
[22:53:11] *** Joins: brentaarnold (~brentaarn@32.132.115.46)
[22:54:19] *** Joins: ReimuHakurei (~Reimu@2607:5600:26d:4:de:ad:be:ef)
[22:54:40] *** Joins: Furai (~Furai@cookiehoster.furai.pl)
[22:56:14] <gordonfish> __adrian: Curious
[22:56:35] <__adrian> !+lies
[22:56:35] <php-bot> Objects are *not* references, read http://bit.ly/hpUAci and/or https://github.com/php/php-src/blob/master/Zend/RFCs/001.txt
[22:57:04] <__adrian> they're a lookup - it's very much how "resource" types are done
[22:57:26] *** RitaDivaj is now known as Hash
[23:00:15] <__adrian> and if you want to know what php means by "reference," https://php.net/language.references
[23:01:12] *** Joins: clarjon_1 (~clarjon1@user/clarjon1)
[23:01:13] *** Quits: FloridaMan (~FloridaMa@user/floridaman) (Read error: Connection reset by peer)
[23:01:31] *** Joins: FloridaMan (~FloridaMa@user/floridaman)
[23:02:19] *** Quits: clarjon1 (~clarjon1@user/clarjon1) (Ping timeout: 252 seconds)
[23:04:35] *** Quits: junktext (~junktext@77.247.181.218) (Remote host closed the connection)
[23:05:44] *** Joins: junktext (~junktext@109.201.152.171)
[23:09:07] *** Joins: ArchNoob (~maotora@user/archnoob)
[23:13:19] *** Quits: fkrauthan (~fkrauthan@user/fkrauthan) (Ping timeout: 252 seconds)
[23:13:53] *** Joins: fkrauthan (~fkrauthan@user/fkrauthan)
[23:23:39] *** Quits: guido (~guido@host-79-23-84-132.retail.telecomitalia.it) (Quit: WeeChat 3.3)
[23:24:26] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[23:24:41] <gordonfish> One more question if I may. I've encountered a couple instance where the original author used 'break' and 'continue' inside of fuctions sans any loops. Did they just return in some way in older PHPs ?
[23:25:18] *** Quits: ReimuHakurei (~Reimu@2607:5600:26d:4:de:ad:be:ef) (Ping timeout: 260 seconds)
[23:26:08] <gordonfish> (Just looking at it I'm rather surprised that usage was ever a thing but looks like it something in older versions, but I cannot test as I do not have php5 or older to test with.)
[23:26:42] <__adrian> https://3v4l.org/rlkHW   don't think that's ever been valid
[23:27:24] *** Joins: ReimuHakurei (~Reimu@216.126.195.252)
[23:27:31] <gordonfish> Well it was in a code base that used to run just fine in php5
[23:27:43] <__adrian> as you can see, it wasn't valid in php 5
[23:28:03] <gordonfish> Curious
[23:28:05] <__adrian> either it was never _actually_ run  ;)  or it's not how i understood you
[23:28:53] <AllenJB> The only case I can think of that break / continue applies to "without loops" is `switch`
[23:30:19] <gordonfish> AllenJB: break I can understand, but what would continue do in a switch?
[23:30:44] <gordonfish> (Assuming PHP switches drop through by default like in C/C++)
[23:31:01] <AllenJB> gordonfish: It behaves the same as break. PHP considers `switch` a looping structure: https://www.php.net/continue
[23:31:02] <__adrian> https://php.net/control-structures.continue
[23:31:08] *** Joins: AsenMx (~AsenMx@78.90.248.234)
[23:31:41] <__adrian> ^ a switch is a loop with only one iteration, so it's the same as a `break` (except dumb)
[23:32:09] <gordonfish> In the code I'm looking at, there's a fuction and some if/else statements, no loops or switch statements. They just put break and continue in certain if blocks
[23:32:30] <__adrian> if you want to share a specific example, there's probably an answer
[23:32:56] <gordonfish> __adrian: Wait, what? I would assume, if anything, continue would fall thru to the next case
[23:33:12] <gordonfish> (continue is usually the opposite of break)
[23:33:44] <__adrian> yeah, each `case` is not an iteration. the whole `switch` is an iteration. therefore, `continue`ing to the "next iteration" finishes the loop
[23:34:01] <biberu> wouldn't continue with an argument for an outer loop repeat that one? (so different from break in that case)
[23:34:30] *** Joins: deksar (~deksar@user/deksar)
[23:34:33] <__adrian> it's like  foreach (["one item"] as $item) { continue; }  // loop is over
[23:34:34] <gordonfish> __adrian: ah
[23:36:13] <__adrian> biberu: that sounds rather contrived  :p  iiuyc, no, it would "continue" (end) the switch and you'd still be in the same iteration of the outer loop
[23:36:20] <__adrian> unless you `continue 2`
[23:36:34] <__adrian> but really, just don't `continue` from a switch. it's dumb.
[23:36:38] <biberu> yeah, i mean e.g. continue 2
[23:38:19] <biberu> I feel like I'd have so many opinions about that in a PR ^^
[23:39:00] <__adrian> i would not discuss it to the lengths i've gone to here
[23:41:31] <biberu> the next day you'd simply have an opening on the team? ^^
[23:42:14] <__adrian> might depend on the employee and my expectations of them
[23:42:30] *** Quits: genom (~g@37.214.31.255) (Remote host closed the connection)
[23:47:28] *** clarjon_1 is now known as clarjon1
[23:49:27] *** Joins: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[23:52:20] *** Quits: stan_man_can (~stanley@d66-183-88-69.bchsia.telus.net) (Quit: ZNC - https://znc.in)
[23:52:36] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 245 seconds)
[23:53:31] *** Quits: freeworld (~vit@85.216.193.138) (Ping timeout: 252 seconds)
