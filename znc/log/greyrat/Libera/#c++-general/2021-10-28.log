[00:00:56] *** Quits: Serpent7776 (~Serpent77@90-156-31-193.internetia.net.pl) (Quit: leaving)
[00:06:45] *** Quits: soman (~Guest18@83.139.147.234) (Quit: Client closed)
[00:08:03] *** Quits: great_taste (~great_tas@190.32.235.20) (Quit: Client closed)
[00:08:15] *** Joins: great_taste (~great_tas@190.32.235.20)
[00:11:00] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Quit: The Lounge - https://thelounge.chat)
[00:11:19] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 258 seconds)
[00:16:32] *** Joins: zen_coder (~zen_coder@2a02:8109:a280:2d8d:f56e:630b:ae2e:6e55)
[00:17:50] *** Quits: Juliu (~Juliu@2a02:810b:c640:3ec0:717a:482d:a8bf:d606) (Quit: Quit)
[00:26:17] *** Joins: RabidToaster (~Thunderbi@bras-base-otwaon234vw-grc-25-65-93-17-96.dsl.bell.ca)
[00:30:24] *** Joins: markong (~kvirc@213.146.188.203)
[00:39:18] <johnny> on that note: i haven't yet had to spawn any processes in C++. is it reasonable to do with the stdlib (>=c++17) or should one find a library?
[00:39:19] *** Quits: great_taste (~great_tas@190.32.235.20) (Quit: Client closed)
[00:39:24] *** Quits: CodeMouse92 (~CodeMouse@user/codemouse92) (Quit: Oh freddled gruntbuggly | Thy micturations are to me | As plurdled gabbleblotchits | On a lurgid bee)
[00:40:00] <PJBoy> all stdlib provides you is `std::system`
[00:43:57] <johnny> oh thanks
[00:44:29] <Alipha> or if threads are sufficent, there's std::thread
[00:44:52] <Alipha> posix has fork()
[00:45:03] <johnny> sure.. std::thread seems perhaps usable by itself. although the only threads i got in a C++ app are in an embedded "os" that has it's own thread handling
[00:45:18] <RandomReader> yeah processes are left as an implementation concept, since they might not even exist .. even threading is optional
[00:45:20] <johnny> i haven't looked that closely
[00:46:12] <cq-work> Obligatory mention of Boost Process.
[00:46:39] <johnny> cq-work, yeah i figured i could find third party stuff to handle it. i just wanted to to know if i actually needed to go there
[00:47:02] <RandomReader> aside from the full app frameworks, I think boost process is the only generic library I've seen mentioned
[00:47:30] <johnny> that's kinda surprising in a way . seems like te kinda fun thing that attracts certain folks
[00:48:36] <RandomReader> for me it's the same grouping as filesystem stuff: if I need to know, I'm already platform-specific, and the "cross platform" libraries are an annoying bundle of the wrong compromises for what I want to do
[00:50:20] *** Quits: kylese (~kylese@p5dd8b9e7.dip0.t-ipconnect.de) (Quit: Leaving)
[00:50:20] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[00:50:48] <johnny> RandomReader, i can't remember if i ask this, but what else do you work with other than in the C++ (or maybe C) realm?
[00:51:24] <cq-work> What compromises would you making? Only thing I can think of is you can't also do an operation by handle so the path is basically always needed.
[00:51:29] <johnny> yeah
[00:52:05] <johnny> i'm trying to think of something i wanted to do ruby, python, php, or even bash that wasn't available to me in what i'd consider a base filesystem library
[00:52:25] <RandomReader> I lean towards system/backend related projects, so far most of my employment has been javascript/typescript
[00:52:26] <johnny> not that it should cover 100% of needs, but it does cover most of what is needed
[00:52:40] <RandomReader> compromises for processes or filesystems?
[00:52:45] <johnny> well both
[00:52:53] <RandomReader> oh
[00:53:16] <johnny> although i rarely ever have to spawn processes, so i could be forgetting things on that side
[00:53:24] <rpav> johnny: probably qt stuff is about as close to "does it all framework" as you'll find
[00:53:32] <RandomReader> so it boils down to "do the right thing for what a user will expect on the platform", whatever that may mean in terms of my project .. but they behave so differently on different systems
[00:53:51] <johnny> there's othing i've wanted to do so far that i couldn't do with python's subprocess or similiar library
[00:54:11] <RandomReader> e.g. posix defaults to shared access and anonymous files, which directly affects how you handle logical replacements or hot updates, in terms of naming/updating directory entries
[00:54:36] <RandomReader> windows defaults to unique access and doesn't allow anonymity
[00:54:45] <RandomReader> been a while since I needed to address macOS on that level
[00:54:54] <RandomReader> all 3 have very different notions of shortcuts / links / etc
[00:55:16] <johnny> i never thought about anonymity before, but i did know about unique access.
[00:55:18] <RandomReader> all 3 have extended permissions and inheritance hierarchy schemes that don't match each other, which is relevant whenever I'm doing something like moving a file to a user-location
[00:55:32] <RandomReader> *often* the default will be correct, but not always
[00:55:44] <johnny> so what do you do when you'e stuck with python/node/ruby/whatever.. i mean.. do ever have to use ctypes?
[00:56:20] <johnny> it just seems fine that that's mostly not covered in the default since i don't need to worry about it most of the time. it's usually handled by an installer when i do need to worry about it
[00:56:42] <RandomReader> an installer wouldn't be my program dealing with these things though, so no need for filesystem stuff in code :)
[00:56:48] <johnny> wehther that be something standalone/separate like rpm/deb or nsis or whatnot. or built in, via pip and things
[00:57:10] <johnny> to me they sound more like things you hvae to know, rahtre than things you have to write most of the time
[00:57:11] <RandomReader> if I'm writing code for these things, it's because my program is doing something on behalf of a user
[00:57:46] <johnny> lie most of the time i really just want a cross platform directory iterator or to be abl to create files in a place the user has access to and can write
[00:57:50] <RandomReader> if it's just basic "open user-specified file" or "create a new file in a user-specified location", that's all neutral, but I don't need something like std::filesystem for that anyway
[00:58:20] <cq-work> I mean, you'll end up creating your own utilities instead as a result if you don't.
[00:58:28] <RandomReader> even the directory iterator is touchy though: macOS and mobile systems have security modes where a sandboxed application can request access to individual files, or entire directories
[00:58:38] <cq-work> That's the point of using something like filesystem, so you don't have to create abstractions over open, creat, readdir, etc.
[00:58:51] <RandomReader> if I'm doing The Right Thing on those platforms, then a platform-generic "directory iterator" is probably not the right approach anyway
[00:58:54] <johnny> RandomReader, and it'll fail in the same way it'd fail as it the directory didn't exist right?
[00:59:03] <cq-work> I'm not sure I agree.
[00:59:15] <RandomReader> well if the goal was for my program not to work, sure
[00:59:17] <johnny> yeah i don't agree based on what you get with ruby and other languages
[00:59:22] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[00:59:32] <cq-work> I haven't had any issues with them so far, especially for general use.
[00:59:34] <RandomReader> if the goal was for my program to cooperate with the user's intent and get minimal access, it's the wrong API
[01:00:11] <cq-work> That I can probably agree on to an extent.
[01:00:20] <RandomReader> my overall point though is that I'm not doing these things without some user-oriented goal
[01:00:40] <johnny> well a lot of the times the files have nothing to do with the user goal.. it's just an implementation detail
[01:00:53] <RandomReader> I can't recall writing something that e.g. walked through a directory without user input of some form, or was meant to run in a specific self-contained server/service environment
[01:01:18] <RandomReader> both of those things are platform-specific, not platform-neutral
[01:01:42] <johnny> but what would you be doing in a language NOT c/c++ ?
[01:02:06] <cq-work> The exact same thing really.
[01:02:09] <RandomReader> in general, the same things
[01:02:26] <johnny> well you don't have easy access to the platform apis without something like ctypes
[01:02:31] <RandomReader> often those environments make themselves the platform in some way, so I program to that
[01:02:42] <RandomReader> because they only support a subset of real-world platforms anyway
[01:02:58] <johnny> but i'm trying to think how differently python's equivalent to std::filesystem is than std::filesystem
[01:03:01] <RandomReader> and it might just be a crappy UX, but it's what's there, so
[01:03:03] <johnny> is to*
[01:03:11] <cq-work> I mean, I'd probably use a hybrid, especially with how std::filesystem is designed. It does fine abstracting over a lot of the general stuff, which I rarely step out of myself anyways.
[01:03:50] <johnny> cq-work, now of course, that makes sense to me.. if i must have something it doesn't do reasonably, then i can in fact go outside of it
[01:03:59] <johnny> but i often don't need to
[01:04:25] <RandomReader> processes are annoying in a different sort of way, since if I'm spawning one I often intend to communicate with it in some form, and/or expect it to do something on my behalf
[01:04:57] <johnny> i've done that with python's subprocess and whatever they do it in node (amongst other things) and so far it's fine for my minimal needs
[01:05:08] <RandomReader> the posix model is the security-stupid share-everything-by-default fork approach, windows is don't-share-by-default, and they both have different native IPC with different security models
[01:05:10] <johnny> i mean the stdlib in most languages aren't supposd to cover 100% .. just the common
[01:05:38] <RandomReader> and again with macOS it's been ages since I looked at the native APIs
[01:05:38] <johnny> and even the nativeipc isn't even used by a lot of apps in the case of unix. i don't know if that happens on windows th
[01:06:22] <cq-work> I've used Boost Process as well but not for process spawning ironically. I have heard decent things out of it though.
[01:07:34] <johnny> RandomReader, what i'm getting from you is a simple reminder that everything in computers is garbage :)
[01:07:37] <RandomReader> plus on Windows there's the choice of console or not, which affects how you (want to) interact with it on behalf of the user
[01:07:43] *** Quits: Skyfire (~pyon@user/pyon) (Quit: WeeChat 3.3)
[01:07:47] <RandomReader> no, just that everything is not the same
[01:07:49] <johnny> yeah, that's about the main thing i know about that one
[01:08:17] <RandomReader> what I get irritated about most is programmers who don't bother to understand that concept, and try to pretend everything is the same
[01:08:20] <johnny> definitely set that one up in my build system. i can't remember how that option works for python
[01:08:41] <RandomReader> because then they all repeat the same mistakes we've seen over the last several decades and waste so much time and energy on utterly avoidable outcomes
[01:08:42] <johnny> RandomReader, i'm ok with a leaky abstraction though. i know i'm making that tradeoff. if it doesn't work, then i can drop down a bit
[01:08:55] <RandomReader> it irritates my engineer's sense of ongoing improvement through learning and taking pride in your craft :)
[01:09:24] <johnny> like the most simple difference is that creating processes in general is expensive on windows while it's much cheaper on posix systems
[01:09:29] <RandomReader> I'm ok with understanding the concept and making a *real* tradeoff decision based on what isn't necessary for the goal
[01:09:47] <johnny> so.. no biggy if you're only doing one spawn, but one shouldn't base a program around lots of cheap processes if you're building for windows
[01:10:31] <RandomReader> right, even just the high level ideas like that
[01:10:31] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[01:10:52] <RandomReader> if your goal is rapid multiple tasks, for example, that might have a significant effect on your design
[01:11:00] <johnny> indeed.. i do know those things
[01:11:18] <RandomReader> so just going "oh I need multiple processes" and reaching for a library is something I consider sloppy, and that's the sort of thing that bugs me
[01:11:20] <cq-work> johnny, spawning process/threads in general continuously is heavy.
[01:11:33] *** Quits: m_ben (~m_ben@user/m-ben/x-7429725) (Quit: WeeChat 3.3)
[01:11:37] <johnny> but it's much cheaper on some platforms than another
[01:11:46] <RandomReader> going "I need multiple processes because X Y Z and I can apply tuning to each of my platforms to make this work as well as I need to" is fine
[01:11:48] <cq-work> That's why pooling is and microservices are sort of big at the moment really.
[01:12:15] <johnny> i mean heck.. i wonder what erlang ports do windows do. do they treat them as threads?
[01:12:19] <RandomReader> and there are plenty of examples
[01:12:43] <cq-work> Well, one reason why microservices are big, on top of fault-tolerance, separation of concept, remote capabilities, scalability, etc. etc.
[01:12:49] <RandomReader> databases, webservers etc have classically needed to make these kinds of tradeoffs, in pretty widely discussed (at the time) ways
[01:12:54] <johnny> indeed
[01:13:22] <johnny> i feel like i'm familiar enough to know when i can make the compromise, or when the compromise doesn't actually matter because it's just something you're doing once, but you want it to be done safely(ish)
[01:13:51] <RandomReader> my understanding of Erlang is that it has its own semi-cooperative task engine, so the use of native constructs is minimal .. but it's been on my list to explore for a long tmie
[01:13:53] <johnny> so boost process would probably cover it for me
[01:14:10] <RandomReader> I'd actually expect it's a handful of threads on all systems with native threading, but I don't actually know
[01:14:21] <johnny> well it's really about the beam vm than it is erlang itself
[01:14:27] <RandomReader> someday I'll get around to trying a project in it
[01:14:40] <johnny> it's just that erlang is the only user of beam vm  that most people know about
[01:15:30] <RandomReader> well this intro is succinct: https://newbedev.com/what-kind-of-virtual-machine-is-beam-the-erlang-vm
[01:15:43] <johnny> RandomReader, so you work a lot with js/ts then?
[01:15:50] <RandomReader> dunno offhand if it's accurate, but it's what I understood of it
[01:15:55] *** Joins: Raziel (~Raziel@user/raziel)
[01:16:40] <johnny> i got back to working on my typescript setup last night, and it's always interesting to compare with C++'s typing
[01:17:02] <RandomReader> that's an interesting question to answer .. I'd say "yes" in the sense of being paid for it, "no" in the sense that I don't feel like I've spent sufficient time to be as thoroughly fluent as, say, I am with C++
[01:17:19] <RandomReader> there are still aspects of the TypeScript type system I haven't explored yet, for example
[01:17:45] <johnny> i don't know enough about C++ early history, but it would have been interesting if early C++ was more like how typescript works  in making generics available on top of C libraries via something like typescrpt's type declarations implemented via macros or some other code gen
[01:18:12] <cq-work> I remember finding the Typescript typing system a bit "fake". Like it acted more as a linter that can still let you do some really wonky stuff.
[01:18:15] <cbreak> C already had a type system
[01:18:19] <cbreak> it still has
[01:18:20] <johnny> but not generics
[01:18:27] <johnny> that's why i mentioned generics speicifically
[01:18:30] <cbreak> it's just that it's much less extensible than C++'s
[01:18:34] <johnny> believe me.. i know that C has types
[01:18:39] <imMute> cq-work: thats because the type system for TS only exists during the compile.  after that it's just JS and all the fun involved there.
[01:18:49] <cbreak> C++ added templates on top of that via annotations
[01:19:00] <RandomReader> yeah, it took a beat for me to treat TypeScript as annotations, rather than definitions
[01:19:21] <cq-work> Yeah, I remember the way stuff was setup, it would compile then translate through babel. It was a bit jarring.
[01:19:24] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[01:19:28] <RandomReader> it's stating what you believe the data is, not constraining what the data can be
[01:19:34] <cq-work> I won't say it's worse than raw Javascript though.
[01:19:41] <cbreak> early c++ was just compiled back to C
[01:19:53] <johnny> sure, but how were the first gneerics implemented
[01:20:02] <cbreak> extra syntax
[01:20:29] <johnny> the part i  found interesting in regards to typescript is that you could separate the types from the code itself that you're applying to the types to
[01:20:47] <johnny> or rather thayt they formalized how one does it
[01:21:04] <johnny> that wasn't something i had really seen before
[01:21:11] <cbreak> if you want, you can do that too in c++
[01:21:14] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[01:21:31] <cbreak> by writing only function templates, and then instantiating those templates
[01:21:34] <johnny> yeas, that's why i said that they formalized it.. since it's clearly provided and handled by the systme rahter than something you do yorusef
[01:22:05] <RandomReader> I don't think I'm following
[01:22:43] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[01:22:51] <johnny> i mean it's neat that i can just say npm install @types/whateverlib  and then the types are applied to whatever lib. it changes the experience
[01:23:15] <cbreak> how so?
[01:23:28] <cbreak> johnny: it's a pain in the ass, and even with npm it's still a pain in the ass
[01:23:31] <johnny> because it just works? i don't have to map
[01:23:54] <cbreak> it'd be much nicer if it'd just work, without having to install random junk
[01:23:58] <johnny> and the whole system is designed to do that mapping, even if i write that map itself in th tsconfig.json file
[01:24:40] <cq-work> Herm... I thought the @types stuff was like an older way of doing things.
[01:24:43] <johnny> well you're right about that. so instead they wrote it into ides.. like vscode's automatic type acquisition. i turn that off that.. i dun want my editor doing that
[01:24:53] <RandomReader> oh, if I'm following the original question correctly .. I think that only works *because* TS is an annotation system on a dynamically-typed implementation .. which is sort of the opposite of the C++ template arena
[01:25:07] <johnny> hmm? why does dynamically typed make a difference here?
[01:25:17] <RandomReader> because the implementation isn't changing
[01:25:37] <RandomReader> templates generate implementations, rather than annotate existing ones
[01:26:04] <johnny> sure, but they still oftne get applied to what could be an implementation don't they?
[01:26:30] <RandomReader> no, because in annotation form it still requires the implementation to be able to store all of the data
[01:26:41] <RandomReader> which only really works in a dynamically-typed language
[01:26:47] *** Quits: Tokamak (~Tokamak@107.127.10.65) (Ping timeout: 264 seconds)
[01:27:01] <cbreak> c++ templates don't need type annotations
[01:27:22] <cbreak> they will deduce all required types at compile time
[01:27:23] <johnny> sorry, i'm not usually used to talkinkg about this, so it's my fault for not having the right language
[01:27:40] <cbreak> typescript doesn't have that luxury, since it is not compiled
[01:27:42] <RandomReader> to translate it into hypothetical template terms, an existing C implementation would have to be void* with size params and everything malloc()
[01:27:56] <RandomReader> assuming I'm following the original thought correctly here
[01:28:03] <johnny> why would it.. couldn't you transform the signature?
[01:28:17] <cbreak> what signature?
[01:28:26] <johnny> the signature of the C function
[01:28:29] <cbreak> no
[01:28:32] <johnny> why not?
[01:28:35] <cbreak> it is fixed at compile time
[01:28:44] <johnny> i've never not been talking about compile time
[01:28:58] <cbreak> you can't change the signature without changing the code
[01:29:01] <johnny> sorry, did i imply somewhere i was talking abouy runtime?
[01:29:07] <johnny> i didn't mean to
[01:29:24] <johnny> i thought my mention of code generation made it clear i was talking about compile time only
[01:29:35] <RandomReader> but then it couldn't be separate
[01:29:37] <cbreak> no code generation is needed for C
[01:29:54] <cbreak> C works without it, unless you call macros "code generation"
[01:30:44] <RandomReader> so: if it's generating code before compiling, then it starts from some kind of generalized .. uh .. "template", but you'd need syntax to express that
[01:31:43] <RandomReader> if it's transforming existing code before compiling, you'd also need some way to express that in a unified way, since it can't logically be separate (otherwise the existing code runs the risk of being compiled as-is, which would be a problem) .. and runs into complications trying to error-check things
[01:32:58] *** Joins: Tobbi (~Tobbi@2a02:8108:1240:48ec:e5a5:e42c:9456:a788)
[01:33:24] <johnny> of course you'd need syntax to express it
[01:33:57] <RandomReader> TS doesn't have to do either of those things really, just attach annotations to existing code that isn't being generated or transformed
[01:34:00] <cbreak> like template<typename T> ? :)
[01:34:03] <RandomReader> for types, at least
[01:34:12] <johnny> cbreak, yes.. like that indeed. that's what i was talking about
[01:34:20] <cbreak> so... c++ added that
[01:34:28] <cbreak> and as I said above: early c++ compiled to c
[01:34:34] <johnny> i did not suggest changing any existing syntax
[01:34:37] <RandomReader> "cfront" was the name of the first one
[01:34:50] <johnny> or at least not a lot anyways
[01:34:54] <cbreak> that's ancient history, long before c++ was standardized
[01:35:11] *** Quits: PJBoy (~PJBoy@user/pjboy) (Ping timeout: 264 seconds)
[01:35:49] <RandomReader> maybe put another way, I view TS's approach as basically adding comments, that happen to be structured in a way that a static analyzer can do logic on
[01:35:50] <johnny> i guess i'd have to see how they wrote the first libraries that only called C stuff
[01:36:04] <johnny> RandomReader, 100% yes. i do too
[01:36:09] <RandomReader> is the question what templates started as, or...?
[01:36:53] <johnny> although i don't think it matters to what i was asking
[01:36:56] <cbreak> there are still many libraries that only call C stuff
[01:37:03] <cbreak> and not all of them involve templates
[01:37:09] <johnny> sure
[01:37:11] *** Quits: npaperbot (~npaperbot@dodecahedron.m-ou.se) (Remote host closed the connection)
[01:37:16] <RandomReader> I'm not really sure how to reconcile your first framing of generics and C
[01:37:18] *** Joins: npaperbot (~npaperbot@dodecahedron.m-ou.se)
[01:37:18] *** ChanServ sets mode: +v npaperbot
[01:37:19] <cbreak> most probably don't
[01:37:34] <cbreak> generics are unrelated to C, and mostly incompatible
[01:38:42] <johnny> now that's what i'd i need to think more on.. maybe it's more reasonable to do it via concepts only
[01:38:59] <RandomReader> C++ Concepts are still templates though
[01:39:06] <johnny> i know that
[01:39:11] <RandomReader> it's a different approach that what most languages call "generics"
[01:39:15] <RandomReader> than*
[01:39:39] <johnny> concepts seem to enable more structural typing... or at least htat's my understanding of it
[01:39:49] <cbreak> no
[01:40:17] <cbreak> concepts don't enable any new typing, they enable adding restrictions to it, explicitly writing it instead of just implying it in code
[01:40:20] <johnny> hmm? what else would you call being able to require something to have quiack()?
[01:40:21] <imMute> concepts are just templates + a better SFINAE
[01:40:27] <cbreak> it improves user friendlyness, not capabilities
[01:40:39] <cbreak> johnny: you can already require it with templates in c++98
[01:40:45] <imMute> anything you can do with concepts you can do with templates and std::enable_if (and lots more typing)
[01:40:47] <johnny> i didn't say you couldn't i guess
[01:40:54] <cbreak> for example, std::vector has always required its elements to be copyable, long before concepts
[01:40:59] *** Quits: kenanmarasli (~kenanmara@user/kenanmarasli) (Quit: Leaving)
[01:41:13] <cbreak> when move support was added, it extended that to be "copyable or movable"
[01:41:14] <johnny> it's just easier to think in terms of what's easier to express
[01:41:18] <cbreak> (it's more complex than this)
[01:41:43] <johnny> i guess i'd have to learn the jargon before talking anymore about this
[01:41:47] <RandomReader> hmm
[01:41:59] <johnny> i have an idea in my head that i can't properly express. so i'll come back it later
[01:42:26] <RandomReader> so in terms of expressing    func(MustBeIFoo param)   they're similar
[01:42:59] <RandomReader> but in terms of language-level effects, the TS and C++ approaches are nearly opposite
[01:44:37] <RandomReader> TS would boil down to    func(param)   as "compiled" code, with all of MustBeIFoo being related to annotations (comments) on other code, such as the calling stuff .. the code and annotation can be separate here, since one doesn't depend on the other
[01:46:08] <RandomReader> C++ would take every use of func and literally write all new    func(RealType param)     code to be compiled, since it generates everything all the time .. so it'd be difficult to separate these things, since there can't be any code without the usage
[01:46:28] <RandomReader> which is basically what cfront did when C++ was still just translated to C
[01:46:44] <johnny> i guessi 'd want to see some cfront code
[01:47:14] <cbreak> c++ allows: int foo(int) { return 3; } float foo(float) { return 3.14f; }
[01:47:54] <johnny> did cfront?
[01:48:01] <cbreak> c++ allows it.
[01:48:16] <cbreak> if a compiler compiles c++, then it obviously has to support c++
[01:48:24] <johnny> ok?
[01:48:34] <RandomReader> I can't find a more complete example at the moment, but this describes a compiler that did name mangling the same way cfront did: http://laplace.physics.ubc.ca/VN/pgi/doc/pgiws_ug/pgi31u14.htm
[01:49:50] *** Quits: RabidToaster (~Thunderbi@bras-base-otwaon234vw-grc-25-65-93-17-96.dsl.bell.ca) (Ping timeout: 260 seconds)
[01:50:08] <RandomReader> which hints at how things were generated, even if it's not direct
[01:52:16] <RandomReader> ...this claims to be the cfront code: http://www.softwarepreservation.org/projects/c_plus_plus/cfront
[01:52:31] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[01:52:35] <RandomReader> wikipedia notes it was written in C++ and had some bootstrapping process .. I've never actually looked at this before
[01:53:21] *** Quits: blackout69 (~blackout6@net-31-156-121-187.cust.vodafonedsl.it) (Remote host closed the connection)
[01:53:38] <johnny> that's an implemenation of cfront. i was hoping for or a codebase using it
[01:54:03] <johnny> but if i wanna see i'll look at it msyself though, so don't worry about it
[01:54:09] <johnny> i still have to do actual work :(
[01:54:09] <RandomReader> ah
[01:54:36] <johnny> musing about type systems is fun though
[01:55:22] <RandomReader> well, actually, cfront would be an example of a cfront codebase -- like I said, bootstrapped :)
[01:55:35] <johnny> yeah.. but i've never met a compiler whose code i can just read eaily
[01:55:37] <RandomReader> (I know what you meant thought)
[01:56:00] <johnny> well of an inuse language anyways
[01:56:17] <johnny> see i write all my code in chicken
[01:56:29] *** Joins: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au)
[01:56:30] <johnny> https://esolangs.org/wiki/chicken
[01:57:11] <RandomReader> lol: https://www.i-programmer.info/programming/cc/9212-finding-bugs-in-the-first-c-compiler-what-does-bjarne-think.html
[01:57:24] <RandomReader> (trying to static analyze cfront)
[01:58:42] <johnny> bjarne is a character.. some of these folks end up sticking around a long time huh
[01:58:58] <johnny> we still got guido, we still got larry wall. still got bjarne
[02:00:33] *** Joins: Skyfire (~pyon@user/pyon)
[02:00:44] <johnny> i have no idea if i'mever going to do to this, but i did get inspired by something
[02:04:05] <johnny> so there's this game that came out back in 2004 (and on pc a bit later). it (like many others i would imagine) uses some sort of inner scripting language that's compiled down to to some bespoke binary format.
[02:04:21] <johnny> or at last as far as anybody seems to know it is anyways
[02:04:58] *** Joins: great_taste (~great_tas@190.32.235.20)
[02:05:03] <johnny> some chinese devs wrote compiler and decompiler for that lnaguage using python as a way to express the custom language
[02:06:12] <johnny> uggh i'll have to ask about it later because i can't get a direct inner link to the google document describing it, and the source itself is currently impenetrable to me
[02:06:44] <johnny> there's not even a readme :(
[02:07:16] *** Quits: kraa (~kraa@107-190-7-216.cpe.teksavvy.com) (Ping timeout: 268 seconds)
[02:11:47] *** Joins: RabidToaster (~Thunderbi@bras-base-otwaon234vw-grc-25-65-93-17-96.dsl.bell.ca)
[02:12:51] <Alipha> Actually, concepts let's you do something that you couldn't do before: you can't enable_if-style partially specialize if you are unable to modify the non-specialized implementation in order to add the necessary "dummy template parameter". e.g., specialize std::hash to work with any type which has a toHash member function. You can't, because std::hash would have had to have been defined as
[02:12:52] <Alipha> `template<typename T, typename = void> struct hash {};` for you to do that. However, with concepts you can do: template<HasToHash T> struct hash<T> {};
[02:14:39] *** Quits: plastico (~plastico@neomutt/plastico) (Quit: WeeChat 3.3)
[02:16:32] <johnny> good to see an example there
[02:16:40] *** Quits: proller (~p@2a02:6b8:b081:6405::1:8) (Ping timeout: 258 seconds)
[02:18:12] *** Joins: emerent_ (~quassel@p200300cd574855b5ba27ebfffed28a59.dip0.t-ipconnect.de)
[02:18:12] *** emerent is now known as Guest3115
[02:18:12] *** emerent_ is now known as emerent
[02:18:15] *** Quits: Guest3115 (~quassel@p200300cd5748557eba27ebfffed28a59.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[02:29:53] *** Joins: proller (~p@80.240.216.69)
[02:35:05] *** Joins: lkor (~lionkor@200116b80fc68d007285c2fffea63d72.dip.versatel-1u1.de)
[02:35:38] *** Quits: lionkor (~lionkor@200116b80fa57c00dc443c0104f029d0.dip.versatel-1u1.de) (Ping timeout: 246 seconds)
[02:44:49] *** Joins: Tokamak (~Tokamak@107.117.203.178)
[02:47:11] *** Quits: Tobbi (~Tobbi@2a02:8108:1240:48ec:e5a5:e42c:9456:a788) (Ping timeout: 245 seconds)
[02:48:02] *** Joins: phoenix (phoenix@user/phoenix)
[02:51:46] *** Joins: manjaro-user (~manjaro-u@199.119.235.198)
[02:52:30] <manjaro-user> Items on the stack are stored in a lifo type of structure. I can emulate that using QStack.
[02:53:14] <manjaro-user> I was wondering if there was an equivelent parrallel for items stored on the heap
[02:53:53] <manjaro-user> Like, could you say that items on the heap are stored in a linked list? Or does it completely depend on the implimentation of the operating system?
[02:54:11] <manjaro-user> Or the compiler?
[02:54:53] <kalven> the "heap" isn't a sequence and there's no concept of ordering there
[02:56:27] <RandomReader> "stack" *is* a structure .. a stack :P
[02:57:03] <RandomReader> a "heap" is also the name of a structure but has nothing to do with what people commonly call the storage location of the ancient unix-type platforms
[02:59:19] *** Quits: dextercd (~dexter@2a02-a450-f25d-1-76d4-35ff-fefe-34c.fixed6.kpn.net) (Quit: WeeChat 3.3)
[02:59:56] <RandomReader> (so: no parallel, these are unrelated things)
[03:01:47] <RandomReader> if you're wanting to know about memory management in general, this wikipedia article might point in some useful directions: https://en.wikipedia.org/wiki/Memory_management
[03:01:48] <manjaro-user> Well when I create an object on the heap, is there no absolutely no underlying storage container or system for that?
[03:02:56] <RandomReader> no / it is the container?
[03:03:03] *** Quits: zen_coder (~zen_coder@2a02:8109:a280:2d8d:f56e:630b:ae2e:6e55) (Ping timeout: 258 seconds)
[03:03:12] <c4017w> Is it possible to give C linkage to a template function?
[03:03:17] <RandomReader> maybe skim the wiki link and see if it makes any more sense to you
[03:03:46] <RandomReader> if not maybe you'll have more specific questions afterward
[03:05:07] <manjaro-user> mmmm might as well. Like I know enough of how to prevent memory leaks and the like. I have just never done a deep dive on whether there is any sort of organization of heap memory. The way it was taught to me is that you are absolutely unable to retrieve it as soon as you lose its pointer, and its up to you to store the pointer somewhere
[03:06:43] <RandomReader> c4017w - well, it's a template, not a function, so there's nothing to give language linkage for .. templates are entirely a C++ concept
[03:10:56] <RandomReader> manjaro-user - ok, then on popular systems today, a running program can request fixed-size (relatively large) chunks of memory from the OS .. this is typically coordinated by some sort of basic "runtime", such as the C or C++ standard library, and used or divided up for various parts of the program, such as a stack for each thread and at least one arena for dynamically created objects of various sizes
[03:13:14] <RandomReader> the "various sizes" part will get some sort of organization, which is what the wiki link is mostly covering
[03:13:15] *** Quits: markong (~kvirc@213.146.188.203) (Ping timeout: 260 seconds)
[03:13:35] *** Quits: Tokamak (~Tokamak@107.117.203.178) (Ping timeout: 264 seconds)
[03:16:35] *** Quits: manjaro-user (~manjaro-u@199.119.235.198) (Ping timeout: 260 seconds)
[03:18:06] *** Quits: whupdup (~whupdup@pool-173-76-128-81.bstnma.fios.verizon.net) (Quit: Going offline, see ya! (www.adiirc.com))
[03:19:51] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:e876:dcb:76b1:818b) (Ping timeout: 260 seconds)
[03:20:33] *** Quits: mackal (~mackal@pool-96-237-249-63.bstnma.fios.verizon.net) (Remote host closed the connection)
[03:22:55] *** Joins: mackal (~mackal@pool-96-237-249-63.bstnma.fios.verizon.net)
[03:23:02] *** Quits: spaceangel (~spaceange@ip-89-176-181-220.net.upcbroadband.cz) (Remote host closed the connection)
[03:23:09] *** Joins: manjaro-user (~manjaro-u@199.119.235.198)
[03:23:25] <manjaro-user> ah sorry  I didnt realize my tethering went down
[03:24:35] *** Quits: Ivii (~Ivyy@2001:a61:1304:3a01:3314:9e67:36cd:cd32) (Remote host closed the connection)
[03:24:53] <RandomReader> oh .. well then, I just said:
[03:24:54] <manjaro-user> okay I've read through the wikipedia article. I am sort of beside myself, because I always thought that "Allocating to the heap" was a thing. `Foo foo * = new Foo();` I would have called, "Allocating Foo to the heap"
[03:25:17] <RandomReader> on popular systems today, a running program can request fixed-size (relatively large) chunks of memory from the OS .. this is typically coordinated by some sort of basic "runtime", such as the C or C++ standard library, and used or divided up for various parts of the program, such as a stack for each thread and at least one arena for dynamically created objects of various sizes
[03:25:21] <RandomReader> the "various sizes" part will get some sort of organization, which is what the wiki link is mostly covering
[03:25:36] *** Quits: mackal (~mackal@pool-96-237-249-63.bstnma.fios.verizon.net) (Client Quit)
[03:25:55] <manjaro-user> It is an interesting read.
[03:26:06] <RandomReader> but it's not a specific organization, often not even one area, etc .. way back in the old days of unix, programs effectively had two memory areas, stack and "data segment", and you'd adjust the size of the data segment to get more memory .. that area was known as "the heap"
[03:26:28] <RandomReader> today, it's not really a useful term, just often used as shorthand for "dynamically allocated"
[03:27:08] <manjaro-user> ah okay. Well lets do away with my useless terminology and be more specific.
[03:27:27] *** Joins: mackal (~mackal@pool-96-237-249-63.bstnma.fios.verizon.net)
[03:28:28] <manjaro-user> My underlying goal is to try and gamify the concept of dynamically allocated memory using cards which represent objects.
[03:31:10] <manjaro-user> I had a stack pile which was lifo, and I had a heap, which I hadn't really fleshed out the mechanics completely. It was basically a place on the table where certain cards could point to.
[03:31:58] <RandomReader> in those terms I'd probably come up with something like a map grid on the table, with the grid sized for individual cards
[03:32:20] <RandomReader> then you can write "C4" on a card to have it describe the location of another card -- aka a pointer
[03:32:59] <manjaro-user> Interesting. I'll play around with that.
[03:33:28] <RandomReader> if you want to get fancier with things like memory management, you can have different sized cards that occupy multiple grid segments
[03:33:30] *** Joins: lionkor (~lionkor@200116b80fac8c007285c2fffea63d72.dip.versatel-1u1.de)
[03:33:49] *** Quits: DSpider (DSpider@86.127.147.103) (Quit: Leaving)
[03:33:58] <RandomReader> although most analogies resort to a flat array at that point, rather than a 2D grid .. but either concept works
[03:34:13] *** Quits: lkor (~lionkor@200116b80fc68d007285c2fffea63d72.dip.versatel-1u1.de) (Ping timeout: 268 seconds)
[03:34:21] <manjaro-user> Tarot cards, lol. Well every card has a cost, so maybe I could use that.
[03:34:21] <RandomReader> (it becomes the same sort of problem: how to efficiently put cards in grids without too many holes)
[03:34:28] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[03:34:29] *** Joins: pulse (~pulse@user/pulse)
[03:34:35] <manjaro-user> ohhhhhh
[03:34:47] <manjaro-user> RandomReader: You are very creative.
[03:35:53] <manjaro-user> Huhmmmmmm And of course the stack doesnt have that issue, where as the heap.... hummm yes yes.
[03:36:02] <RandomReader> thanks :)  had a while to think about this stuff
[03:36:30] <RandomReader> right, since with a stack you always discard the most recent thing first .. holes become the "heap fragmentation" mentioned in the wiki links
[03:37:21] <RandomReader> and then you end up with, say, 20 free spaces of size 1, and nowhere to put a size 2
[03:37:28] <RandomReader> which actually sounds like a fun element to a game
[03:37:59] <c4017w> RandomReader, I guess that makes sense. Since a unique function is generated for each type, they can't possibly share the same symbol.
[03:39:19] <c4017w> In my case I only ever have one specialization of the template, so it should theoretically be possible I think
[03:39:27] <RandomReader> c4017w - right .. more generally, C++ limits language linkage specification to function types (usually for describing function pointers), functions themselves, and variables
[03:39:41] <RandomReader> if there's only one specialization, why is it a template at all?
[03:39:53] <manjaro-user> Thinking of the economics, there are three basic sizes to a card. Bridge Cards ( Small ), Poker Cards ( standard ), and Tarot Cards which are massive. Tsk.. I' am not sure I am ready to do something like that because that trades off having uniformity. Magic The Gathering and Pokemon for example don't have this.
[03:39:54] <RandomReader> but there isn't a way to express the language linkage on it, either way
[03:40:44] <c4017w> I'm using CRTF
[03:40:49] <RandomReader> manjaro-user - yeah depending on your game you might not want to go this route, it can get complicated .. but it's a possible future expansion if it's useful
[03:41:10] <c4017w> uh, CTRP
[03:41:47] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 264 seconds)
[03:42:23] <RandomReader> c4017w - but if there's only one, and it's meant to be externally exposed, all the naming information is available anyway .. there'd be no need for the abstraction
[03:43:10] <c4017w> Only one per build variant. Each build variant has a different implementation of the base class though
[03:43:40] <RandomReader> then you'd be trying to generate names for the other language, which doesn't really make sense here
[03:43:54] <RandomReader> if that's really the goal, I'd use actual code generation instead of templates
[03:44:07] *** Quits: RabidToaster (~Thunderbi@bras-base-otwaon234vw-grc-25-65-93-17-96.dsl.bell.ca) (Ping timeout: 260 seconds)
[03:44:33] <c4017w> Other language?
[03:44:42] <RandomReader> "C" in this case
[03:44:54] <RandomReader> (the concept is general, "C" is just required by the standard for certain cases)
[03:45:31] *** Quits: manjaro-user (~manjaro-u@199.119.235.198) (Ping timeout: 245 seconds)
[03:45:39] <RandomReader> (some compilers support extern "Pascal")
[03:45:41] <c4017w> Why doesn't it make sense in this case compared to another case?
[03:45:54] <RandomReader> I mean it doesn't make sense in general, that's the point I'm making
[03:45:55] <c4017w> let me whip up an example just to make it clear
[03:46:25] <RandomReader> if the goal is to interface with another language, then logically there needs to be coordination with it .. that's not going to happen by someone just using a template in C++
[03:46:50] <RandomReader> (that and C++ doesn't even support it, since it'd put restrictions on implementations)
[03:47:31] *** Joins: ferdna (~ferdna@user/ferdna)
[03:48:41] <c4017w> Right, I see. The reason I wanted C linkage was to override a weakly defined C function from another file. Maybe there's another way
[03:49:16] <computerquip> The way I always thought about it is the resulting symbols. C++ symbol mangling includes a lot of type data embedded. C symbols do not. Generally, it has the symbol name and the calling convention, and that's it.
[03:49:43] <c4017w> mhmm. Question is how do I get that symbol back into a C file...
[03:49:47] <RandomReader> in that case you have a specific function though, so you'd just use it..
[03:50:00] <RandomReader> I'm not understanding the "template" piece of this
[03:50:55] <c4017w> Well normally I'd don something like `class A{void some_func() __asm("some_func");};` to give `some_func` C linkage
[03:51:00] <computerquip> Well, it sounds like "exposing template functions to C". Which is just wrapping each template variant in a uniquely named function with C linkage.
[03:51:16] <RandomReader> that isn't C linkage
[03:51:42] <RandomReader> it's ok if you're doing something implementation specific, just don't confuse that with the "language linkage" concept with extern "foo"
[03:51:57] <c4017w> computerquip, that sounds like it could work
[03:52:11] <RandomReader> if it's just about binary compatibility on your target platform(s), there are certainly other options
[03:52:55] *** Quits: proller (~p@80.240.216.69) (Ping timeout: 260 seconds)
[03:53:49] <c4017w> would C linkage be wrapping some_func in extern "C"?
[03:54:00] <c4017w> I don't know the differene
[03:54:01] <RandomReader> yes
[03:54:10] <computerquip> At the least, I'm not sure what inline asm would do here for you.
[03:54:43] <RandomReader> language linkage bundles together whatever is necessary for the implementation to make things "just work"
[03:54:59] <c4017w> the asm would ensure some_func gets the symbol `some_func` rather than the C++ mangled version. I think extern "C" would do the same
[03:55:16] <RandomReader> in practical terms that includes things like name mangling, calling convention, as well as (for C++ and "C") some rules about duplicate identifiers
[03:55:45] <RandomReader> also sometimes some type restrictions or translations, depending on the implementation
[03:55:50] <RandomReader> but importantly for binary compatibility on platforms, calling convention is critical
[03:55:55] <RandomReader> and your asm tag doesn't address that at all
[03:56:47] <c4017w> I see. I guess I mostly got lucky that calling conventions matched
[04:01:39] <RandomReader> if that earlier suggestion to write the specific C-named function but use the particular template specialization inside works, that makes sense as an approach to me: it's the guts that are templated, not the external interface
[04:01:59] <RandomReader> or, rather, the guts are concrete but they use a particular template
[04:02:09] <RandomReader> ...that's still fuzzy language but you know what I mean
[04:02:41] <c4017w> I'm experimenting with a few different methods. I like that approach as well, so long as my compiler is smart enough to strip the inner function call
[04:04:23] *** Joins: frost (~frost@user/frost)
[04:05:16] *** Joins: proller (~p@2a02:6b8:b081:8812::1:3)
[04:07:00] <computerquip> Not sure what that means to "strip the inner function call".
[04:07:59] *** Joins: manjaro-user (~manjaro-u@199.119.235.198)
[04:08:10] <computerquip> Do you mean optimize it away? If so, because you've entered the World of Boundaries, it's going to have to call something. It's not going to optimize it away. The template code itself may be very minimal per function though I'd imagine but depends on the code.
[04:09:12] <computerquip> i.e. folding optimizations over a boundary are difficult.
[04:09:21] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[04:12:49] *** Joins: Yoofie (~yoofie@097-070-135-101.res.spectrum.com)
[04:15:23] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 260 seconds)
[04:16:02] *** Joins: lh_mouse (~lh_mouse@mingw-w64/developer/lhmouse)
[04:17:54] *** Quits: Yoofie (~yoofie@097-070-135-101.res.spectrum.com) (Quit: Leaving)
[04:31:50] *** Joins: CaCode_ (~CaCode@user/cacode)
[04:34:17] *** Quits: CaCode (~CaCode@user/cacode) (Ping timeout: 246 seconds)
[04:35:53] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[04:43:29] *** Joins: manjaro-user- (~manjaro-u@199.119.235.198)
[04:44:43] *** Quits: manjaro-user (~manjaro-u@199.119.235.198) (Read error: Connection reset by peer)
[04:47:39] *** Quits: manjaro-user- (~manjaro-u@199.119.235.198) (Client Quit)
[04:47:49] *** Joins: manjaro-user- (~manjaro-u@199.119.235.198)
[04:50:23] *** Quits: manjaro-user- (~manjaro-u@199.119.235.198) (Client Quit)
[04:50:39] *** Joins: manjaro-user- (~manjaro-u@199.119.235.198)
[04:52:17] *** Joins: kraa (~kraa@107-190-7-216.cpe.teksavvy.com)
[04:52:43] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 260 seconds)
[04:53:08] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[04:54:59] *** Joins: manjaro-user (~manjaro-u@199.119.235.198)
[04:55:16] *** Quits: manjaro-user- (~manjaro-u@199.119.235.198) (Client Quit)
[04:55:37] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[04:59:35] *** Quits: The_Jag_ (~The_Jag@host-87-11-42-170.retail.telecomitalia.it) (Ping timeout: 258 seconds)
[05:00:41] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 264 seconds)
[05:00:45] *** Joins: The_Jag (~The_Jag@host-95-252-5-94.retail.telecomitalia.it)
[05:07:17] *** Quits: manjaro-user (~manjaro-u@199.119.235.198) (Ping timeout: 264 seconds)
[05:07:22] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[05:12:23] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 264 seconds)
[05:24:13] *** Joins: Juliu (~Juliu@2a02:810b:c640:3ec0:89ae:7a91:7b8d:9618)
[05:26:51] *** Quits: gggpkm (~gggpkm@li2015-124.members.linode.com) (Read error: Connection reset by peer)
[05:37:11] *** Quits: npaperbot (~npaperbot@dodecahedron.m-ou.se) (Remote host closed the connection)
[05:37:20] *** Joins: npaperbot (~npaperbot@dodecahedron.m-ou.se)
[05:37:20] *** ChanServ sets mode: +v npaperbot
[05:46:54] *** Joins: Hokedli (~lasliedv@gateway/tor-sasl/hokedli)
[05:51:04] *** Quits: pulse (~pulse@user/pulse) (Quit: pulse)
[05:52:53] *** Quits: lionkor (~lionkor@200116b80fac8c007285c2fffea63d72.dip.versatel-1u1.de) (Ping timeout: 264 seconds)
[05:55:48] *** Joins: jkaye (~jkaye@2601:281:8300:7530:906c:9805:416e:fccf)
[06:13:32] *** Quits: malloy (~jimery@116.30.221.89) (Ping timeout: 250 seconds)
[06:14:55] *** Joins: gggpkm (~gggpkm@li2015-124.members.linode.com)
[06:16:07] *** Joins: malloy (~jimery@116.30.221.89)
[06:16:28] *** Quits: teepee (~teepee@openscad/teepee) (Remote host closed the connection)
[06:16:51] *** Joins: teepee (~teepee@openscad/teepee)
[06:31:33] *** Quits: Hokedli (~lasliedv@gateway/tor-sasl/hokedli) (Quit: Konversation terminated!)
[06:40:00] *** Quits: ShiftyLogic (~shiftylog@66.115.146.16) (Remote host closed the connection)
[06:40:35] *** Joins: ShiftyLogic (~shiftylog@66.115.146.16)
[06:45:35] *** Quits: ShiftyLogic (~shiftylog@66.115.146.16) (Ping timeout: 260 seconds)
[06:52:17] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 258 seconds)
[06:57:39] *** Quits: NiKaN (sid385034@helmsley.irccloud.com) (Ping timeout: 258 seconds)
[06:57:51] *** Joins: Tokamak (~Tokamak@107.117.203.17)
[06:57:53] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[06:58:25] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[06:58:53] *** Joins: NiKaN (sid385034@id-385034.helmsley.irccloud.com)
[07:00:05] *** Quits: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au) (Read error: Connection reset by peer)
[07:03:23] *** Joins: Fairy97 (~Fairy@2001:464a:4992:0:dd95:968b:982e:1ba9)
[07:07:37] *** Quits: Fairy (~Fairy@2001:464a:4992:0:9c0f:e957:8bda:88f) (Ping timeout: 258 seconds)
[07:13:35] *** Quits: proller (~p@2a02:6b8:b081:8812::1:3) (Ping timeout: 264 seconds)
[07:24:50] *** Joins: chozorho (~chozorho@2601:146:300:c30::9310)
[07:30:27] *** Quits: jkaye (~jkaye@2601:281:8300:7530:906c:9805:416e:fccf) (Ping timeout: 260 seconds)
[07:44:48] *** Quits: chozorho (~chozorho@2601:146:300:c30::9310) (Ping timeout: 268 seconds)
[07:46:07] *** Joins: chozorho (~chozorho@c-69-250-72-103.hsd1.md.comcast.net)
[07:50:44] <KombuchaKip> I have an integer. Is there a simple syntactic sugar or something in the STL to add metric comma separators to the value when displaying it?
[07:51:27] *** Quits: great_taste (~great_tas@190.32.235.20) (Ping timeout: 256 seconds)
[07:52:36] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[07:54:22] <kalven> what are metric comma separators?
[07:56:56] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[07:58:44] <Stryyker> thousands seperator?
[08:04:41] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 245 seconds)
[08:07:51] <KombuchaKip> Stryyker: Yup
[08:13:41] <Stryyker> Anything in locale?
[08:14:06] <Stryyker> Some parts of the world use . while others use , then in India they use a different pattern
[08:14:57] <KombuchaKip> Stryyker: Yup. Aware of that.
[08:17:23] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[08:18:43] <Stryyker> Checked <locale> docs?
[08:19:00] <Stryyker> I don't know if it is possible via the std library. Windows has APIs for handling it
[08:19:23] <kalven> here's the (fairly bananas) iostream solution: https://en.cppreference.com/w/cpp/locale/numpunct/grouping
[08:19:50] <InPhase> KombuchaKip: Sounds like a short function using size() and a modulo.
[08:20:32] <KombuchaKip> It looks like there's not really an elegant solution. I've seen the std::locale technique before, but maybe this will be something that eventually we'll see simplified in a future version of the language.
[08:21:59] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 264 seconds)
[08:26:22] <kalven> we can only hope, but I wouldn't hold my breath
[08:27:41] <InPhase> { cout.imbue(locale(cout.getloc(), new CommaNum)); cout << 1234567890; }  struct CommaNum : numpunct<char> { string do_grouping() const { return "\3"; } };
[08:27:42] <geordi> 1,234,567,890
[08:28:09] <InPhase> Well, ugly.  But I guess it's not "too" bad.
[08:28:12] <KombuchaKip> InPhase: I suppose that could be a one liner! lol
[08:28:43] <InPhase> { cout.imbue(locale(cout.getloc(), new CommaNum)); cout << 1234567890; cout << " " << 23423562; }  struct CommaNum : numpunct<char> { string do_grouping() const { return "\3"; } };
[08:28:43] <geordi> 1,234,567,890 23,423,562
[08:28:51] <InPhase> The problem is it's sticky on cout, which can be a real mess.
[08:29:53] <InPhase> So you might want to wrap that up on a stringstream in a function if you'll do it that way.
[08:30:09] <InPhase> And by that point, you might as well just write the for loop because I bet that's shorter.
[08:31:11] *** Joins: great_taste (~great_tas@190.32.235.20)
[08:32:43] <RandomReader> it *is* a locale concern though, in the general case
[08:33:00] <RandomReader> e.g. I get comma-separated values in the user locale on my machine
[08:34:05] <RandomReader> meaning if I just care about cout:  std::cout.imbue(std::locale(""));
[08:34:45] <RandomReader> if it's specific formatting that isn't about the user preferences, then it becomes just another serialization problem
[08:37:12] <InPhase> { cout << [](uint64_t N){string o, s = to_string(N); for (size_t i=0; i<s.size(); i++) { if (!((s.size()-i)%3)) {o += ',';} o += s[i]; } return o;}(1234567890); }
[08:37:13] <geordi> 1,234,567,890
[08:37:28] <InPhase> Yeah, slightly shorter for the one-liner of that.
[08:37:40] <InPhase> And I didn't even start code golfing.
[08:39:04] <InPhase> (Shorter because the other one requires stashing the old locale and restoring it.)
[08:48:58] <RandomReader> the locale option shown may not even use comma though
[08:49:28] <RandomReader> specifically using comma is a longer locale customization
[08:53:31] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 260 seconds)
[08:53:57] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[08:55:40] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[08:59:10] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[08:59:34] *** Joins: gggp (~gggp@li870-78.members.linode.com)
[08:59:47] *** Quits: Tokamak (~Tokamak@107.117.203.17) (Ping timeout: 264 seconds)
[09:05:30] *** Joins: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au)
[09:07:18] *** Quits: gggp (~gggp@li870-78.members.linode.com) (Remote host closed the connection)
[09:07:55] *** Joins: gggp (~gggp@li870-78.members.linode.com)
[09:14:32] *** Joins: sord937 (~sord937@gateway/tor-sasl/sord937)
[09:17:31] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[09:18:44] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[09:20:24] <johnny> is there really a lot of drama over this networking ts?
[09:21:23] *** Quits: CaCode_ (~CaCode@user/cacode) (Ping timeout: 264 seconds)
[09:21:59] *** Joins: dflj (~dflj@178.49.152.151)
[09:23:23] *** Joins: Serpent7776 (~Serpent77@90-156-31-193.internetia.net.pl)
[09:23:51] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 260 seconds)
[09:25:52] <TinoDidriksen> Sort of. Networking TS is ready to go, but some people want to delay it in order to rebase it on some speculative work.
[09:27:04] *** Quits: great_taste (~great_tas@190.32.235.20) (Quit: Client closed)
[09:30:53] *** Quits: gggp (~gggp@li870-78.members.linode.com) (Quit: My MacBook has gone to sleep. ZZZzzz)
[09:31:44] *** Joins: JohnMS_WORK (~kvirc@213.134.183.29)
[09:37:11] *** Quits: npaperbot (~npaperbot@dodecahedron.m-ou.se) (Remote host closed the connection)
[09:37:22] *** Joins: npaperbot (~npaperbot@dodecahedron.m-ou.se)
[09:37:22] *** ChanServ sets mode: +v npaperbot
[09:41:30] <vdamewood> I just tried to compile a Hello program on a pre-standard compiler... It was painful.
[09:41:58] *** Joins: CaCode (~CaCode@user/cacode)
[09:49:33] *** Joins: Inst__ (~Inst@2601:6c4:4080:3f80:7857:9ec8:a629:d6a8)
[09:50:59] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[09:52:32] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[09:53:26] *** Quits: Inst_ (~Inst@2601:6c4:4080:3f80:9ce5:6f05:3959:43f5) (Ping timeout: 245 seconds)
[09:53:32] <johnny> anybody publishing good notes from the cppcon talks?
[09:54:09] <johnny> hmm i just realized vince's csv writer has quite an important section commented out if you use clang
[09:54:18] <johnny> err iddefed out rather
[09:55:31] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 245 seconds)
[09:58:53] *** Quits: kraa (~kraa@107-190-7-216.cpe.teksavvy.com) (Ping timeout: 264 seconds)
[09:59:52] *** Joins: Guest15 (~Guest15@143.198.127.163)
[10:13:03] *** Joins: NovumDXW (~NovumDXW@183.12.239.113)
[10:14:19] *** Quits: NovumDXW (~NovumDXW@183.12.239.113) (Client Quit)
[10:15:09] *** Quits: Skyfire (~pyon@user/pyon) (Quit: brb)
[10:15:41] *** Joins: Skyfire (~pyon@user/pyon)
[10:17:10] *** Joins: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104)
[10:19:13] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[10:21:54] *** Quits: Ronalds_Mazitis_ (~Ronalds_M@46.109.76.104) (Client Quit)
[10:22:11] *** Quits: Inst__ (~Inst@2601:6c4:4080:3f80:7857:9ec8:a629:d6a8) (Ping timeout: 245 seconds)
[10:24:03] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 260 seconds)
[10:25:07] *** Joins: kenanmarasli (~kenanmara@user/kenanmarasli)
[10:26:56] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[10:28:06] *** Joins: Haohmaru (~Haohmaru@195.24.53.110)
[10:28:22] *** Joins: meator (~meator@user/meator)
[10:28:27] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[10:43:26] *** Joins: PJBoy (~PJBoy@user/pjboy)
[10:45:03] *** Quits: Skyfire (~pyon@user/pyon) (Quit: brb ffs, frickin configuration)
[10:45:28] *** Joins: Skyfire (~pyon@user/pyon)
[10:48:34] *** Quits: Guest15 (~Guest15@143.198.127.163) (Quit: Client closed)
[10:50:39] *** Quits: unixpro1970 (~unixpro19@c-73-181-185-205.hsd1.wa.comcast.net) (Ping timeout: 260 seconds)
[10:52:41] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[10:54:36] *** Joins: unixpro1970 (~unixpro19@c-73-181-185-205.hsd1.wa.comcast.net)
[10:54:40] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 260 seconds)
[10:55:07] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[10:55:47] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[10:57:41] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 264 seconds)
[10:59:52] *** Quits: meator (~meator@user/meator) (Quit: Leaving)
[11:00:31] *** Quits: unixpro1970 (~unixpro19@c-73-181-185-205.hsd1.wa.comcast.net) (Ping timeout: 245 seconds)
[11:00:45] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[11:00:50] *** Joins: unixpro1970 (~unixpro19@c-73-181-185-205.hsd1.wa.comcast.net)
[11:02:30] *** Joins: meator (~meator@user/meator)
[11:02:48] *** Quits: Skyfire (~pyon@user/pyon) (Quit: brb ffs frickin configuration)
[11:04:16] *** Joins: Skyfire (~pyon@user/pyon)
[11:08:16] *** Quits: gggpkm (~gggpkm@li2015-124.members.linode.com) (Remote host closed the connection)
[11:08:44] *** Quits: unixpro1970 (~unixpro19@c-73-181-185-205.hsd1.wa.comcast.net) (Ping timeout: 258 seconds)
[11:09:51] *** Joins: unixpro1970 (~unixpro19@c-73-181-185-205.hsd1.wa.comcast.net)
[11:14:02] *** Joins: ShiftyLogic (~shiftylog@66.115.146.16)
[11:14:49] *** Joins: RandomRead3r (~RandomRea@user/randomreader)
[11:16:15] *** Quits: dld (~dld@2601:197:600:1210:d10e:482c:eb89:99b9) (Ping timeout: 260 seconds)
[11:17:25] *** Quits: RandomReader (~RandomRea@user/randomreader) (Ping timeout: 260 seconds)
[11:17:34] *** RandomRead3r is now known as RandomReader
[11:19:28] *** Joins: dld (~dld@98.217.187.57)
[11:19:35] *** Quits: ShiftyLogic (~shiftylog@66.115.146.16) (Ping timeout: 264 seconds)
[11:22:46] *** Quits: Praise (~Fat@user/praise) (Ping timeout: 244 seconds)
[11:24:43] *** Joins: CaCode_ (~CaCode@user/cacode)
[11:25:03] <LordKalma> !rq
[11:25:03] <nolyc> LordKalma: <rpav> what about "Elder CMake Ontologies for Chthonic Enthusiasts and Expectant Mothers"
[11:26:09] *** Joins: CaCode- (~CaCode@user/cacode)
[11:27:31] *** Quits: CaCode (~CaCode@user/cacode) (Ping timeout: 260 seconds)
[11:29:23] *** Quits: CaCode_ (~CaCode@user/cacode) (Ping timeout: 260 seconds)
[11:34:25] *** Joins: zen_coder (~zen_coder@2a02:8109:a280:2d8d:102f:8750:b199:23e9)
[11:40:41] *** Joins: DSpider (~DSpider@82.79.237.129)
[11:51:09] *** Joins: interop_madness (~interop_m@user/interop-madness/x-0950004)
[11:52:36] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[11:56:11] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 264 seconds)
[11:56:27] *** Quits: chozorho (~chozorho@c-69-250-72-103.hsd1.md.comcast.net) (Ping timeout: 260 seconds)
[11:56:39] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[12:05:22] *** Joins: rond_ (~rond_@2a02:a31a:a23c:f480:2fd7:e087:5546:a438)
[12:08:39] *** Joins: plastico (~plastico@neomutt/plastico)
[12:11:07] *** Joins: Guest54 (~Guest54@83.139.147.234)
[12:11:11] *** Quits: Guest54 (~Guest54@83.139.147.234) (Client Quit)
[12:11:44] *** Joins: soman (~soman@83.139.147.234)
[12:16:41] <rond_> Let's have two classes, A and B, and I want to declare one as a friend of the other. Do I need to pute `friend class A` inside B's declaration in .hpp  , or can it be in .cpp? (from my point of view, it's an implementation detail - shouldn't be relevant for the end user...?)
[12:20:15] <cncr04s> it should be in the class definition, where ever file you have that.
[12:21:03] *** Joins: lpapp (~lpapp@ec2-15-161-137-233.eu-south-1.compute.amazonaws.com)
[12:21:12] <lpapp> hi, if I have a class on Windows dllexport'd
[12:21:16] <lpapp> template class
[12:21:39] <LordKalma> templates don't need to be exported nor does it make sense to
[12:21:52] <lpapp> there is a template method in it, not explicitly dllexport'd, but when another code includes this header, they cannot dllimport it, I guess?
[12:21:59] <lpapp> unless the implementation goes to the source?
[12:22:14] <lpapp> I am getting Vec2.h(420): error C2491: 'ndk::Vec2<T>::asVec2h': definition of dllimport function not allowed
[12:22:40] <lpapp> why do you say that
[12:22:50] <lpapp> how would you access the symbol from an app for example?
[12:22:53] <lpapp> if it is not exported?
[12:23:07] <LordKalma> templates do not yield compiled code until they are used
[12:23:12] <LordKalma> so there's no actual symbol to use in the dll
[12:23:25] *** Joins: lionkor (~lionkor@200116b80fac8c007285c2fffea63d72.dip.versatel-1u1.de)
[12:23:43] <lpapp> I am not sure I follow
[12:23:52] <lpapp> if I implement some template methods in a source file
[12:24:01] <lpapp> how would app know about it without exporting?
[12:24:01] <LordKalma> have you ever wondered why you have to write templates in header files?
[12:24:06] <LordKalma> they are not compiled to anything
[12:24:06] <cncr04s> those templates would be part of your include/header files
[12:24:06] <lpapp> the*
[12:24:11] <lpapp> No, I do not have to.
[12:24:15] <lpapp> In fact, I do not.
[12:24:20] <LordKalma> sure, you don't *have to*
[12:24:21] <lpapp> some implementations are in the C++
[12:24:26] <LordKalma> but you won't be using them anywhere ;)
[12:24:35] <LordKalma> (but for the file they are on)
[12:24:36] <lpapp> I will?
[12:24:40] <LordKalma> nope, you wont
[12:24:58] <lpapp> This is not a header-only template library
[12:25:04] <PJBoy> (obligatory mention of explicit instantiations)
[12:25:05] <lpapp> some implementations are in the source file
[12:25:21] <lpapp> for some reason, my colleague put some implementation in the header as he thought inline needs to be in the header
[12:25:27] <lpapp> whether that is true or not, another question
[12:25:42] <lpapp> I have a gut feeling that I should move these implementations into the source to fix the above msvc compilation error?
[12:25:43] <LordKalma> Unless you use explicit templates, which kinda void the point of templating, you NEED for your templated code to live in header files
[12:25:58] <PJBoy> !templates
[12:26:00] <nolyc> The compiler generates code not for templates but for their instantiations. If you do not know beforehand precisely with which arguments the template will be instantiated, this precludes separate compilation, and your only option is to place the template and everything belonging to it in a header, so that instantiations of it are compiled along with the translation units that spawn them.
[12:26:08] <LordKalma> no, simply remove dllspec attributes from template code
[12:26:23] <lpapp> yes, as discussed yesterday, we have explicit instantiation for compilation time speed up
[12:26:27] <lpapp> in our library in the source file
[12:26:44] <LordKalma> I'm sorry for not being omniscient then
[12:27:24] <lpapp> It is possible that we still do not need to export the templates themselves
[12:27:29] <lpapp> just the instantiations
[12:27:30] <lpapp> ?
[12:27:54] <lpapp> or maybe not even that
[12:28:02] <LordKalma> try adding the dllspec in the extern .... line
[12:28:14] <LordKalma> because on the original template it wont make sense, that's for sure
[12:28:25] <PJBoy> I don't think anyone here is well versed in explicit instantiations :D
[12:28:37] <LordKalma> yeah, I'l also speculating too
[12:28:59] <lpapp> Is that because it is a special case?
[12:29:05] <lpapp> As if templated was not though :D
[12:29:10] <lpapp> templates*
[12:29:34] <LordKalma> https://stackoverflow.com/questions/43208803/extern-keyword-with-explicit-template-instantiation
[12:29:39] <LordKalma> of course someone has asked it before
[12:29:41] <LordKalma> and no good answer
[12:29:42] <PJBoy> I mean I've used them for demo code before
[12:29:52] <lpapp> we do not have extern
[12:30:11] <lpapp> we just have stuff like this in the source file: template class Vec2<double>;
[12:30:13] <PJBoy> extern is for declaring the explicit instantiation
[12:30:14] <lpapp> Vec2.cpp
[12:30:21] <lpapp> yes
[12:30:25] <lpapp> I am not sure why they have not used it.
[12:30:27] <LordKalma> you either have extern or you don't have "compilation times speeding"
[12:30:33] <lpapp> Yeah
[12:30:37] <lpapp> I think this is a mistake
[12:30:40] <LordKalma> template class Vec2<double>; // this does shit for compilation times
[12:30:55] <PJBoy> are you sure about that?
[12:31:22] <LordKalma> it's included in every header
[12:31:27] <PJBoy> it sounds right, for sure
[12:31:34] <LordKalma> I'm pretty sure
[12:31:40] <PJBoy> yeah that must be the case
[12:31:53] <PJBoy> > mornings
[12:31:58] <lpapp> the above is export
[12:32:03] <lpapp> you also need a declaration, I think
[12:32:14] <LordKalma> template<typename> foo(); template<double> foo(); // It's basically this code, whatever it means, PJBoy
[12:32:15] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[12:32:26] <lpapp> LordKalma: no, it is not included in every header
[12:32:31] <PJBoy> do you attach the dllspec thing to declarations or definitions?
[12:32:33] <lpapp> since it is in the source file, as I mentioned.
[12:32:40] <PJBoy> I imagine declarations
[12:32:41] <LordKalma> definitions
[12:32:44] <lpapp> we do not seem to have declarations for some reason
[12:32:44] <PJBoy> damn
[12:32:55] <LordKalma> no wait
[12:32:57] <LordKalma> declarations
[12:32:59] <LordKalma> of course declaration
[12:33:00] <LordKalma> hahaha
[12:33:01] <lpapp> but it is the declaration
[12:33:03] <PJBoy> ok good haha
[12:33:07] <lpapp> not definition, no
[12:33:23] <PJBoy> so dllspec your extern explicit instantiation I guess
[12:33:24] *** Joins: cesello (~cesello@user/cesello)
[12:33:56] <LordKalma> The __declspec keywords should be placed at the beginning of a simple declaration. The compiler ignores, without warning, any __declspec keywords placed after * or & and in front of the variable identifier in a declaration.
[12:33:56] <LordKalma> A __declspec attribute specified in the beginning of a user-defined type declaration applies to the variable of that type. For example:
[12:34:56] <LordKalma> https://docs.microsoft.com/en-us/cpp/cpp/declspec?view=msvc-160
[12:35:14] <lpapp> #if FN_OS_LINUX #define EXPORT_TEMPLATE( TemplateInstance, ... )  template class             TemplateInstance;
[12:35:14] <LordKalma> PJBoy, the first paragraph kinda suggests extern and static are like alternatives to declspec
[12:35:17] <lpapp> #else #define EXPORT_TEMPLATE( TemplateInstance, ... )  template class __VA_ARGS__ TemplateInstance;
[12:35:20] <lpapp> #endif
[12:35:23] <LordKalma> as if declspec is an extension of static/extern
[12:35:25] <LordKalma> interesting
[12:35:42] <LordKalma> lpapp, if you use cmake, cmake has functionality to write export macros for you
[12:35:50] <lpapp> #if FN_OS_WINDOWS
[12:36:03] <PJBoy> the extern used for explicit instantiation isn't a storage class modifier though
[12:36:10] <LordKalma> ah yes, that's true
[12:36:11] <lpapp> #define DECLARE_TEMPLATE( TemplateInstance, ... )
[12:36:15] <lpapp> #else
[12:36:19] <lpapp> #define DECLARE_TEMPLATE( TemplateInstance, ... )  extern template class __VA_ARGS__ TemplateInstance;
[12:36:23] <lpapp> #endif
[12:36:23] <lpapp> maybe, this is all I need?
[12:36:36] <LordKalma> don't god damn paste code in chat
[12:36:45] <lpapp> huh?
[12:36:49] <lpapp> This _is_ C++ chat
[12:36:54] <PJBoy> !paste
[12:36:55] <nolyc> Paste your test case to https://wandbox.org/ or https://rextester.com/ or http://coliru.stacked-crooked.com/ or another pastebin that can compile code. Do _not_ paste to the channel. See the testcase checklist at http://eel.is/c++/testcase
[12:36:59] <lpapp> and I did not post, but wrote the second
[12:37:01] <lpapp> but it is not the point
[12:37:08] <lpapp> the main thing is that this is probably what people need
[12:37:11] <LordKalma> PJBoy, love cmake: https://github.com/ruilvo/aether_dsp/blob/master/aether_dsp/CMakeLists.txt#L11
[12:37:14] <lpapp> for a cross-platform template.
[12:37:29] <PJBoy> pasting code is only bad because IRC sucks
[12:37:35] <LordKalma> no, I doubt you'd need a DECLARE_TEMPLATE macro
[12:37:40] <PJBoy> if this were discord, we'd have fancy syntax highlighting and all that
[12:37:46] <LordKalma> PJBoy, or slack :p
[12:37:54] <PJBoy> or even facebook messenger
[12:38:00] <PJBoy> which supports LaTeX of all things
[12:38:03] <LordKalma> hahaha yes
[12:38:17] <LordKalma> someone was probably bored and decided to add mathjax to messenger
[12:38:25] <PJBoy> I fully respect it
[12:38:31] <PJBoy> I wish it made its way into discord
[12:38:52] <lpapp> I think you overreact a few lines
[12:39:07] <LordKalma> lpapp, it's just it's impossible to read
[12:39:12] <LordKalma> I admit, I won't even try
[12:39:17] <lpapp> but the main thing is, these macros would make the template exports and declarations cross-platform everywhere without having to write the same boiler plate again and again
[12:39:31] <lpapp> not a problem, not everyone is unable to read ascii :)
[12:39:51] <LordKalma> and my answer was that you very much unlikely need a macro to make "x.platform template declarations"
[12:40:07] <LordKalma> the question we're debating is how you dllspec explicit template instanciations
[12:40:13] <lpapp> well, you can replicate the macro everywhere if you like copy/pasta programming
[12:40:16] <lpapp> I would rather not.
[12:40:17] <LordKalma> which is only a matter of where you do put the export macro, if you can
[12:40:28] <lpapp> I told you how to do that some time ago :)
[12:40:36] <lpapp> these macros also implement that.
[12:40:49] <LordKalma> you do you then
[12:41:38] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[12:41:39] <lpapp> I would not rely on the buildsystem to write correct code for you.
[12:41:49] <lpapp> I do not think this is the buildsystem's responsibility
[12:42:00] <lpapp> and it makes the pretty locked to a buildsystem, not a good decision.
[12:42:05] <lpapp> code*
[12:42:33] <lpapp> In my opinion, cmake should not have taken this responsibility to work around bad code.
[12:44:32] <PJBoy> I'm confused
[12:44:45] <PJBoy> declspec docs say dllexport is applied to declarations
[12:44:58] <lpapp> correct
[12:45:02] <lpapp> what is confusing about it?
[12:45:19] <PJBoy> but that SO links to the compiler warning describing how it cannot be applied to extern explicit instantiation because it's merely a declaration
[12:45:31] <PJBoy> and that declspec is applied to definitions
[12:45:43] <lpapp> Maybe, SO is mistaken again?
[12:45:55] <PJBoy> SO mistakenly wrote MSDN docs?
[12:46:40] <LordKalma> it's in the declarations
[12:46:47] <PJBoy> https://docs.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-1-c4910 for reference
[12:46:48] <lpapp> I think it might need to be in both actually.
[12:47:00] <LordKalma> the usual way you do it is have a macro that automatically switches between export and import depending on a define
[12:47:03] <LordKalma> it's not in both, no
[12:47:20] <LordKalma> Example: https://github.com/pothosware/SoapySDR/blob/master/include/SoapySDR/Device.h#L42
[12:47:29] <lpapp> in template1.h, you have extern with the dllspec and then in template2.cpp the actual export with dllspec
[12:47:42] <lpapp> that is how it seems to work in one of the other projects we have here.
[12:47:51] <PJBoy> so then you're applying the declspec to the definition
[12:48:14] <LordKalma> https://github.com/pothosware/SoapySDR/blob/master/include/SoapySDR/Config.h
[12:48:27] <LordKalma> just opened that project in vscode (click . on your keyboard)
[12:48:32] <LordKalma> and it's only in the declaration s
[12:48:38] <PJBoy> yeah in general, sure
[12:48:52] <PJBoy> but for explicit instantiations, declspec seems to choose to not work
[12:49:23] <PJBoy> > The __declspec(dllexport) keyword means instantiate the template class, while the extern keyword means do not automatically instantiate the template class
[12:49:36] <PJBoy> it makes no sense for declspec to want to instantiate the template
[12:50:11] <lpapp> I cannot possibly believe this to be true of course
[12:50:17] <LordKalma> https://jeffpar.github.io/kbarchive/kb/168/Q168958/
[12:50:23] <lpapp> as it would defeat the purpose of explicit instantiation for compile-time optimisation.
[12:50:51] <LordKalma> well, I don't see msvc claiming the feature is available
[12:51:21] <PJBoy> if I'm reading this right then
[12:51:29] <PJBoy> using declspec instead of extern will imply extern
[12:52:02] <lpapp> this would be a big sucker for compilation time if it was true.
[12:52:04] <PJBoy> this would be a lot easier if I had some code to test :D
[12:52:09] <LordKalma> also, what sense does it make to say "it makes the code pretty locked to a buildsystem". I'm sorry, I didn't realize you write code 100% independent of build systems. I bet you only use relative imports.
[12:52:11] <lpapp> Should not  be hard to test.
[12:52:21] <lpapp> just add a simple template class
[12:52:25] <lpapp> it does not require anything fancy to test
[12:52:29] * PJBoy only uses relative imports
[12:52:40] *** Joins: manic_laughter (~manic_lau@2409:4072:60b:3696:1c24:2d65:c42b:a458)
[12:52:45] <LordKalma> I don't, sue me
[12:52:50] <PJBoy> yeah I might try it out after work
[12:52:58] <lpapp> This is a silly argument
[12:53:09] <PJBoy> when you say import, you mean #includes, right?
[12:53:16] <LordKalma> of course, yes, sorry
[12:53:17] <lpapp> there is a world of difference between INCLUDE_DIRS and buildsystem fixing up your exports.
[12:53:32] <PJBoy> right yeah, I like my `../../../util/xxx.h` :D
[12:53:41] <LordKalma> I don't see what difference it is. It generates a file that gets installed if you package the build library
[12:53:46] <LordKalma> so you don't depend on the build system for usage
[12:53:49] <LordKalma> just building
[12:53:53] <lpapp> that is pretty bad
[12:53:55] <LordKalma> and I don't like writing boilerplate
[12:54:04] *** Quits: manic_laughter (~manic_lau@2409:4072:60b:3696:1c24:2d65:c42b:a458) (Remote host closed the connection)
[12:54:04] <lpapp> if anyone wants to build the code with any other buildsystem, they are locked in
[12:54:12] <LordKalma> i just said they are not
[12:54:16] <LordKalma> are you even reading?
[12:54:17] <LordKalma> ffs
[12:54:20] <lpapp> essentially, a C++ codebase heavily relies on cmake, which should be downstream, not upstream to dictate.
[12:54:36] <LordKalma> "<LordKalma> so you don't depend on the build system for usage"
[12:54:40] <lpapp> you do!!
[12:54:41] <LordKalma> am I writing in korean or something?
[12:54:45] <LordKalma> you fucking don't
[12:54:46] <lpapp> You have to use cmake to build the code
[12:54:52] <lpapp> and the specific implementation of cmake rules you make
[12:54:56] <lpapp> so, it is wrong to say you do not rely.
[12:55:14] <LordKalma> I'm sorry, i didn't know you get your dependencies with one build system and build them with another
[12:55:14] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[12:55:22] <RandomReader> dllexport implies a definition because it's the entity that needs to be exposed in the symbol table
[12:55:29] <johnny> isn't that more like you have on certain commands run in sequence to build the code that just happens be done in cmake?
[12:55:39] <lpapp> hmm, yeah: Vec2.h(605): warning C4910: 'ndk::Vec2<double>': '__declspec(dllexport)' and 'extern' are incompatible on an explicit instantiation
[12:55:41] <PJBoy> but dllexport is applied to declarations, generally speaking
[12:55:43] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 260 seconds)
[12:55:44] <LordKalma> anyway
[12:55:45] <RandomReader> for template specializations, it also implies instantiation of the entire specialization (in order to meet the interface contract), not just used members
[12:55:48] <lpapp> however, it is just warning
[12:55:49] <LordKalma> I found the explanation
[12:55:52] <LordKalma> https://docs.microsoft.com/en-us/cpp/cpp/general-rules-and-limitations?view=msvc-160
[12:55:57] <LordKalma>  The problem with a specialization of a class template is where to place the __declspec(dllexport); you are not allowed to mark the class template. Instead, explicitly instantiate the class template and mark this explicit instantiation with dllexport.
[12:56:00] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[12:56:09] <RandomReader> the two combined make explicit instantiation of templates a bit weird, and they chose to support only the definitions
[12:56:16] <johnny> i wonder if i actually wrote the csv reader correctly..
[12:56:24] <RandomReader> dllexport is applied to definitions, it *can* be applied to declarations
[12:56:31] <RandomReader> (most of them, anyway)
[12:56:51] <RandomReader> its basic goal is to export functions, variables, or those contents of class types
[12:57:01] <LordKalma> that general rules and limitations page is amazing
[12:57:28] <PJBoy> actually of course it applies to definitions
[12:57:29] <lpapp> yep, we applied them to both
[12:57:33] <PJBoy> that's how you dllexport classes
[12:57:37] <lpapp> it seems to be only a warning on the declaration, so "this is fine"
[12:57:47] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[12:57:52] <LordKalma> but that's for specializations, not explicit template instanciations
[12:58:04] <RandomReader> an explicit template instantiation is a specialization
[12:58:15] <LordKalma> RandomReader, only putting them in source would make importing harder, I guess
[12:58:24] <LordKalma> is it?
[12:58:25] <RandomReader> dllexport is not dllimport
[12:58:32] <LordKalma> I know it's not
[12:58:32] <lpapp> C++ does not import, but include :)
[12:58:43] <lpapp> ah, you mean dll import this time
[12:58:45] <LordKalma> but you know the drill of the macro
[12:58:58] <LordKalma> #if SOME_MACRO export else import
[12:59:16] <LordKalma> which, evil me, uses cmake to write it for me :p
[12:59:18] <RandomReader> I've seen that, doesn't mean it's not silly, but people will be people
[12:59:42] <LordKalma> https://github.com/pothosware/SoapySDR/blob/master/include/SoapySDR/Config.h#L14
[12:59:43] <RandomReader> as for templates, yes .. a template is specialized to a concrete form, which is instantiated
[13:00:30] <lpapp> I guess if I only do the dllspec in the C++ for the definition, the warnings will go away for the declarations.
[13:00:39] <RandomReader> "partial specialization" and "explicit specialization" are the terms for the variants we make in code
[13:01:08] <PJBoy> specialisation is one of the more confusing words in the standard
[13:01:10] <RandomReader> but the loose english usage tends to drop the "explicit" part so people forget that the implicit usage is also specialization
[13:02:20] <RandomReader> anyway, that leads to what we get for instantiation: "A class, function, variable, or member template specialization can be explicitly instantiated from its template."
[13:02:41] <PJBoy> > A specialization is a class, variable, function, or class member that is either instantiated from a templated entity or is an explicit specialization of a templated entity
[13:03:34] <PJBoy> so partial specialisation isn't a specialisation, that makes sense I guess
[13:04:02] <PJBoy> and all instantiations are specialisations
[13:04:03] <RandomReader> the use case for a template instantiation across a dll boundary is fairly niche though
[13:04:17] <LordKalma> I can see why MS didn't bother
[13:04:24] <LordKalma> of course you have the compile time gains and all
[13:04:25] <LordKalma> but eh
[13:04:39] <RandomReader> it makes sense for things like stdlib, where you can do it for e.g. std::string to save a boatload of code, but otherwise
[13:04:41] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[13:04:47] <lpapp> what do you mean by "eh"?
[13:04:58] <lpapp> Maybe, you should spend your day on compiling uselessly to reconsider the importance of it :)
[13:05:00] <LordKalma> the gains are limited, if what I mean
[13:05:02] <PJBoy> you're not allowed to explicitly instantiate std::tsring
[13:05:09] <lpapp> no?
[13:05:14] <RandomReader> I mean stdlib does it, as an implementation technique
[13:05:24] <lpapp> If anything, babysitting compilations in a big project is a time-waster
[13:05:29] <PJBoy> I would hope that implementations do
[13:05:33] <RandomReader> because stdlib is a dll
[13:05:34] <RandomReader> not as something you'd do yourself
[13:05:36] <lpapp> It is quite freeing to have quicker turnaround times.
[13:05:40] <PJBoy> but I haven't checked
[13:05:52] <PJBoy> some of stdlib is a dll, most of it isn't
[13:06:00] <LordKalma> The STL isn't I guess
[13:06:07] <RandomReader> I actually don't remember if it's std::string itself or just some of the related traits specializations, but it's documented somewhere
[13:06:40] <PJBoy> but I do recall reading that users can't explicitly specialise stdlib templates unless they depend on a user defined type
[13:06:55] <RandomReader> the default for MS stdlib is dll, unless you choose to statically link
[13:07:02] <RandomReader> and since it's open source, you can go check :P
[13:07:03] <lpapp> I am not too bothered by MS's lack of optimisation, by teh way
[13:07:04] <PJBoy> which I guess is a blanket rule for allowing implementations to do so without causing ODR violation
[13:07:15] <lpapp> as it still makes sense to optimise this for Linux and Mac at least.
[13:07:17] <LordKalma> RandomReader, but the templates are just templates, no?
[13:07:18] <RandomReader> well, viewable source, I can't remember the actual license on it
[13:07:43] <RandomReader> some of the templates are explicitly instantiated to save on duplicate code
[13:07:48] *** Quits: malloy (~jimery@116.30.221.89) (Ping timeout: 250 seconds)
[13:07:49] <PJBoy> MS stdlib is apache
[13:08:08] <LordKalma> *most of it
[13:08:08] <LordKalma> iirc not all of it is on github
[13:08:10] <RandomReader> it's why there's still some bug somewhere about one of the char16_t types, since they can't instantiate it until the next ABI break
[13:08:19] <RandomReader> I don't remember the details, would have to dig
[13:09:04] <PJBoy> MS aren't huge on Abi breakage
[13:09:34] <RandomReader> I actually don't know why they've stuck with it so long currently, it hasn't been an issue in the past for the C++ runtime
[13:09:39] <RandomReader> they'd break every major version
[13:09:48] <RandomReader> this vs2015-vs2019 thing is unusual
[13:09:48] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[13:09:51] <PJBoy> AFAIK their /std:c++latest is their only ABI break
[13:09:57] <LordKalma> BREAK THE ABI
[13:10:01] <PJBoy> but /std:c++20 isn't broken
[13:10:14] *** Joins: malloy (~jimery@116.30.221.89)
[13:10:14] <RandomReader> it's the only break in the last 4 years, definitely not the only one before that
[13:10:23] <RandomReader> which is why it's unusual
[13:10:29] <PJBoy> yeah, lucky for me I never used MSVC 2015 or before
[13:10:36] <RandomReader> and IIRC it isn't their formal break, just "unstable"
[13:10:46] <LordKalma> I think we should tell people that use the "omg we ehave this old dll we don't have the source for" to just download gidhra and recompile it :p
[13:10:51] <LordKalma> *Gihdra
[13:10:59] <PJBoy> nearly
[13:11:13] <LordKalma> Ghidra hahaha ffs
[13:11:19] *** Quits: dflj (~dflj@178.49.152.151) (Quit: Client closed)
[13:12:50] <PJBoy> well
[13:12:57] <lpapp> would it be possible to design a simpler templating system in C++ if it could start over?
[13:13:04] <PJBoy> explicit instantiations aren't the easiest thing to search for
[13:13:11] <PJBoy> but I don't see any in the MS stdlib repo
[13:14:02] <lpapp> wonder if modern languages like Rust also has this complex beast to generalise things
[13:14:19] <LordKalma> you'd need a different compilation model
[13:14:31] <lpapp> yeah, that is fine if you can start over.
[13:15:14] <lpapp> so, just to be clear, template class Vec3<double>; in the c++ file
[13:15:18] <lpapp> and extern template class Vec3<double>; in the header
[13:15:19] <PJBoy> templates aren't too bad
[13:15:28] <lpapp> sorry, in the c++: template class foo_api Vec3<double>;
[13:15:29] <PJBoy> unless you make them bad
[13:15:40] <lpapp> this will still speed up the compilation on Linux and Mac?
[13:15:49] <PJBoy> if you just keep your templates in the header, everything's hunky dory
[13:15:56] *** Quits: LordKalma (~LordKalma@server.ruilvo.com) (Read error: Connection reset by peer)
[13:16:11] <PJBoy> I mean you've already wasted more time on this than you'll ever save on compilation time
[13:16:14] *** Joins: LordKalma (~LordKalma@server.ruilvo.com)
[13:16:17] <PJBoy> :p
[13:16:28] <lpapp> you are wrong
[13:16:36] <lpapp> this project is built by many devs many times a day
[13:16:47] <lpapp> it is a *critical* area to optimise
[13:17:25] <LordKalma> yes, it's optimized with CD/CIs
[13:17:33] <lpapp> no, header-only will slow down the compilation.
[13:17:34] <LordKalma> and build farms
[13:17:43] <lpapp> no, dev machines are not farms, definitely.
[13:18:44] <PJBoy> I doubt it takes much time to compile your template
[13:18:44] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[13:18:53] <lpapp> you can doubt as much as you like
[13:18:55] <PJBoy> how much time do you reckon you're saving with explicit instantiations?
[13:19:00] <PJBoy> less than a second for sure
[13:19:02] <LordKalma> did you benchmark your build?
[13:19:50] <PJBoy> so if you spend a whole day on this, it'll take you over 5 years of compiling 50 times a day to make up for lost time
[13:20:47] *** Joins: whupdup (~whupdup@pool-173-76-128-81.bstnma.fios.verizon.net)
[13:22:52] <PJBoy> I wonder if `__declspec(dllexport) export module M;` is possible
[13:22:56] <PJBoy> or will ever become possible
[13:23:05] <PJBoy> because that would really ease things
[13:23:29] <PJBoy> then you can just export everything using the actual `export` keyword
[13:26:57] <lpapp> yes, we have benchmarked the build and the smallest things, like iostream in a very common header slows down significantly.
[13:26:59] <JohnMS_WORK> Put in a ticket to the MSVC team and see.
[13:27:22] <PJBoy> well I should probably try it first
[13:27:25] <lpapp> It is not a whole day spent on it, but it is also not one developer as I repeatedly keep saying.
[13:28:06] <lpapp> I do not understand why I have to repeat myself, but it is frustrating.
[13:29:29] <lpapp> regarding buildsystem vs. export, I think it should be addressed centrally in the code rather than by each buildsystem instance for the code.
[13:29:49] <lpapp> But in any case, the build system has nothing to do with these issues here.
[13:30:51] <PJBoy> you only said that multiple devs will use your library once before actually
[13:30:59] <lpapp> no
[13:31:08] <lpapp> If you scroll back, I did say that many devs work on this project.
[13:31:14] <lpapp> Plus, yes, customers will build it, too.
[13:31:19] <PJBoy> once when you said "this project is built by many devs many times a day"
[13:31:22] <PJBoy> and never before
[13:31:50] *** Joins: fuck (~ittsya@95.67.115.93)
[13:31:53] <PJBoy> this isn't the first time you've assumed we know stuff you haven't said
[13:32:18] <lpapp> well, it might be a whole day spent on it if it is hijacked with unrelated issues, like buildsystem and what not.
[13:32:34] *** Joins: lh_cat (~lh_mouse@mingw-w64/developer/lhmouse)
[13:32:55] <PJBoy> I'm still unsure as to whether using declspec instead of extern will imply extern or not
[13:33:26] <LordKalma> this is probably worthy of discussion in the visual studio forum
[13:33:26] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[13:33:29] <lpapp> I am out, this is not productive if people do not read what I write.
[13:33:34] <PJBoy> because I would have thought you couldn't have explicit instantiation definitions in a header
[13:33:36] <LordKalma> ironic
[13:33:59] <PJBoy> lpapp, do you really want to have a conversation about the philosophy of build systems right now?
[13:34:07] <PJBoy> that's your idea of productive?
[13:34:33] <PJBoy> you just said that the build system was an unrelated issue
[13:34:35] <LordKalma> their idea of productive is only helping them and not have tangential discussions
[13:34:45] <LordKalma> because that's what this chat is for, of course
[13:34:51] <LordKalma> free support, no discussion
[13:35:01] *** Joins: stefanos82 (~stefanos8@62-169-104.netrun.cytanet.com.cy)
[13:35:31] *** Quits: lh_mouse (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 245 seconds)
[13:37:12] *** Quits: npaperbot (~npaperbot@dodecahedron.m-ou.se) (Remote host closed the connection)
[13:37:19] *** Joins: npaperbot (~npaperbot@dodecahedron.m-ou.se)
[13:37:19] *** ChanServ sets mode: +v npaperbot
[13:41:21] *** Joins: markong (~kvirc@213.146.188.203)
[13:41:47] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[13:50:20] *** Joins: m_ben (~m_ben@user/m-ben/x-7429725)
[13:52:32] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[13:53:34] *** Quits: fuck (~ittsya@95.67.115.93) (Quit: WeeChat 2.8)
[13:55:13] <ville> PJBoy: ...and standard library stands as a pretty good example of "bad templates"
[13:55:23] <PJBoy> why's that?
[13:55:36] <LordKalma> vector<bool>
[13:55:37] * LordKalma runs
[13:56:02] <ville> i don't know if you've ever moved from a no-templates code to templates code and observed the build times?
[13:56:29] <PJBoy> I have not
[13:56:38] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 258 seconds)
[13:56:39] <PJBoy> but stdlib stuff takes milliseconds to compile
[13:56:52] <ville> no it takes seconds just to include a header
[13:57:06] <PJBoy> the most expensive header in the library was less than a second IIRC some reddit thread
[13:57:37] <PJBoy> I mean my MSVC project I use for testing out code quickly includes every stdlib header
[13:57:40] <PJBoy> and it compiles instantly
[13:58:05] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[13:58:35] <PJBoy> (in debug configuration)
[13:58:51] <TinoDidriksen> What ancient C64 are you using where the stdlib takes seconds just to include?
[13:59:30] <ville> that was few years back an i7, ssd
[13:59:31] <LordKalma> pentium III
[14:00:31] <LordKalma> sidenote: I hate when people say "an i7". As if a 3700 is the same as a 11700F
[14:00:31] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[14:01:17] <ville> PJBoy: and templates have another bad side effect they can grow the overload sets rather large. as a fun hisotircal data point carruth said google's codebase spent 30% on operator << >> lookups
[14:01:27] <johnny> i definitely know about that one LordKalma .. here with i think 47xx
[14:01:38] <Raziel> LordKalma, I'm sure I still have my i7 920 somewhere around here
[14:01:39] <PJBoy> ville, that's because they didn't use hidden friends >_>
[14:01:55] <Raziel> wait, no I don't, I sold it. fuck.
[14:01:59] <LordKalma> It's just I hear all the time "oh this is a great computer, it has an i7"... Sure a 4700 from 2012
[14:02:00] <PJBoy> I reckon stdlib is gonna switch to hidden friends for operator<< in the not too distant future
[14:02:27] <PJBoy> I saw a paper about not allowing users to call `x.operator<<` for stdlib x recently
[14:03:07] <ville> that's just more of the "...but true templates don't suck"-rhetoric. if it's simple to miss-use them then they suck
[14:03:19] <PJBoy> [p1732]
[14:03:19] <npaperbot> P1732R4: [Library Evolution] Do not promise support for function syntax of operators <https://wg21.link/p1732r4> (by CJ Johnson) (2020-02-21) (Related: https://wg21.link/p1732r4/github)
[14:03:28] <PJBoy> well it's not templates that suck
[14:03:34] <PJBoy> it's global scope functions
[14:03:59] <ville> you'll think twice before you spam out that many global functions by hand
[14:04:15] <ville> you won't blink an eye generating zillion of them through some tmp
[14:04:15] *** Quits: JohnMS_WORK (~kvirc@213.134.183.29) (Ping timeout: 260 seconds)
[14:04:28] <PJBoy> yeah I guess
[14:04:33] <PJBoy> but it's also easier to fix
[14:04:47] <PJBoy> idk, the compiler doing work for me is always gonna be a good thing in my eyes
[14:05:44] <LordKalma> as long as it's not the build system
[14:05:51] <LordKalma> that's evil af I discovered today
[14:06:30] <ville> LordKalma: funnily the "i7"s sort of have been "the same" for a lot of time. for a long time we've seen single-digit performance increases in intel hardware for single thread performance
[14:06:46] <LordKalma> since like gen 6 or something
[14:06:55] <LordKalma> still 5 single digit increments is a different cpu
[14:07:08] <LordKalma> my point still stands though, I think
[14:07:26] <ville> for reference that was a i7 5xxx if i recall
[14:09:20] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[14:11:23] *** Joins: NiD27 (~nid27@49.205.148.101)
[14:11:41] <ville> ah can't find it. someone on github has a repo that benchmarks the standard library headers and some common others include times
[14:11:56] <ville> even had results over time if i recall
[14:13:19] <PJBoy> https://s9w.github.io/stl_explorer/explorer.html ?
[14:13:19] <TinoDidriksen> https://github.com/s9w/cpp-lit
[14:13:43] <LordKalma> damn, chrono and c_v
[14:14:27] <PJBoy> dude
[14:14:29] <PJBoy> look at that modules time
[14:14:32] <PJBoy> it's zero
[14:14:41] <TinoDidriksen> Yeah, modules are very fast.
[14:15:35] <PJBoy> too bad they're non-standard
[14:15:41] <TinoDidriksen> Here a .cpp file #including iostream, vector, string_view, and using all those, takes a total of 0.3 seconds to build at -O3. Drops to 0.2s with modules.
[14:15:59] <PJBoy> looks like the committee is going to be opting to make the stdlib module a single all-encompassing `import std;`
[14:16:24] <PJBoy> and based on those results, I don't see any reason to split them up
[14:16:24] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[14:16:37] <johnny> there aren't that many results tho
[14:16:54] <johnny> would have been nice to see a wider coverage, particularly of something like filesystem
[14:17:16] <PJBoy> there are still a few stdlib headers you might need to include with modules
[14:17:19] <TinoDidriksen> Bjarne showed a slide at CppCon showing 0.08s for "import std"
[14:17:22] <PJBoy> but they're all lightweight enough
[14:17:23] <johnny> filesystem, chrono, mutex, etc
[14:17:34] <PJBoy> those are all there
[14:17:53] <johnny> oh sorry, filesystem is there, but i don't see the others i mentioned
[14:18:06] <PJBoy> in the chart or in std modules?
[14:18:20] <johnny> in the cart as std.mutex
[14:18:20] <PJBoy> 'cause chrono stands out like a sore thumb in that chart
[14:18:26] <johnny> or std.chrono
[14:18:32] <PJBoy> those are included in std.core
[14:18:34] <johnny> oh
[14:18:36] <johnny> well then :)
[14:18:42] <PJBoy> except for std::time
[14:18:48] <PJBoy> which is mostly likely a bug
[14:18:53] <johnny> stop.. hammertime
[14:19:13] <johnny> that's super nice.. i didn't expect it to be so fast
[14:19:22] <PJBoy> bearing in mind this is an MSVC extension
[14:19:30] <PJBoy> and so code that uses those modules is subject to break
[14:19:36] <johnny> which is? the names themselves? or?
[14:19:40] <PJBoy> the names
[14:19:51] <johnny> well as long it's just the names it doesn't matter much
[14:19:59] <PJBoy> prospectively, it looks like you'll have to replace all the `import std.xxx;` with `import std;`
[14:20:19] <johnny> yeah.. no big deal i mean heck to do anything with gcc you have to map the modules yourself anyways
[14:21:08] <johnny> it looks like it might be worth it to use modules even if not fully integrated in the buildsystem just for the stdlib modules
[14:21:46] <johnny> oh, but i wonder if clang-tidy can handle it yet
[14:22:27] <PJBoy> I'll have to try it out on my modules project
[14:22:37] <ville> TinoDidriksen: yes that's the one. i think
[14:22:47] <PJBoy> I found out literally today that MSVC supports clang tidy
[14:23:07] <m_ben> I wish they included eigen3 in the table above
[14:23:26] *** Quits: whupdup (~whupdup@pool-173-76-128-81.bstnma.fios.verizon.net) (Quit: Going offline, see ya! (www.adiirc.com))
[14:23:32] <ville> PJBoy: for an apples-to-oranges look at vulkan.h vs vulkan.hpp
[14:23:56] <PJBoy> woah there
[14:24:03] <PJBoy> what's the difference between those two?
[14:24:49] <johnny> c api vs C++?
[14:24:51] <PJBoy> a distinct lack of respect to this page https://www.lunarg.com/vulkan-sdk/
[14:24:52] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[14:25:05] <johnny> i just let you super nerds handle that sort of thing
[14:25:23] <ville> the c++ bindings do try to be "safer" in a way, and adds bunch of c++-isms for largely no real benefit that i can observe
[14:25:55] <PJBoy> ah, more types and stuff
[14:26:04] <PJBoy> maybe some static_asserts if they're feeling frisky
[14:26:35] <ville> they used to have those at some point. asserting that their generated c++ classes had the same size as the c struct or some such
[14:26:56] <ville> cause at some point internally they would just reinterpret_cast to the c struct
[14:27:08] <ville> rather a pointer-to-c-struct
[14:27:21] <PJBoy> of course they do
[14:27:25] <ville> vk_c_interface_call(*this); sort of deal
[14:27:26] <PJBoy> >_<
[14:28:12] *** Quits: stefanos82 (~stefanos8@62-169-104.netrun.cytanet.com.cy) (Quit: Leaving)
[14:29:34] <ville> vk_c_interface(reinterpret_cast<VkSomething*>(this)); or so. that's what my generated wrapper does too. avoids unnecessary copies
[14:30:03] *** Joins: JohnMS_WORK (~kvirc@213.134.183.29)
[14:30:03] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[14:31:12] <cbreak> why reinterpret?
[14:31:27] <ville> they are different unrelated classes
[14:31:31] <cbreak> :(
[14:31:36] <cbreak> you can't inherit from it?
[14:31:52] <cbreak> or are those defined by someone else?
[14:31:55] <urdh> why not just hold it as a member?
[14:32:08] <ville> makes accessing fields awkward
[14:32:16] <urdh> fair
[14:32:26] *** Quits: meator (~meator@user/meator) (Quit: Leaving)
[14:37:03] *** Joins: spaceangel (~spaceange@ip-89-176-181-220.net.upcbroadband.cz)
[14:38:47] *** Quits: dld (~dld@98.217.187.57) (Ping timeout: 264 seconds)
[14:38:54] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[14:44:42] *** Quits: LiaoTao (~LiaoTao@gateway/tor-sasl/liaotao) (Ping timeout: 276 seconds)
[14:44:42] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[14:44:55] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[14:54:46] *** Quits: m_ben (~m_ben@user/m-ben/x-7429725) (Quit: WeeChat 3.3)
[14:55:24] *** Parts: lpapp (~lpapp@ec2-15-161-137-233.eu-south-1.compute.amazonaws.com) ()
[14:56:10] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[15:19:17] *** Joins: pulse (~pulse@user/pulse)
[15:35:45] *** Quits: Leone (~Leo@216.154.21.17) (Read error: Connection reset by peer)
[15:37:53] *** Quits: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi) (Ping timeout: 264 seconds)
[15:38:25] *** Joins: ShiftyLogic (~shiftylog@66.115.146.16)
[15:39:47] *** Joins: pull (~tcz@91.150.165.88)
[15:41:19] *** Quits: Serpent7776 (~Serpent77@90-156-31-193.internetia.net.pl) (Read error: Connection reset by peer)
[15:42:46] *** Joins: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi)
[15:44:00] *** Quits: ShiftyLogic (~shiftylog@66.115.146.16) (Ping timeout: 260 seconds)
[15:47:55] *** Quits: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi) (Ping timeout: 260 seconds)
[15:52:02] *** Joins: blackout69 (~blackout6@net-31-156-121-187.cust.vodafonedsl.it)
[15:52:32] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[15:55:05] *** Quits: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5) (Ping timeout: 258 seconds)
[15:55:32] *** Joins: quarterback (~quarterba@user/quarterback)
[15:55:47] *** Joins: sprout (~quassel@2a02:a467:ccd6:1:319c:b1d4:3651:39a5)
[15:57:00] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Ping timeout: 258 seconds)
[15:57:26] *** Joins: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse)
[15:58:09] *** Joins: joilerv_ (~joilerv@host86-191-93-41.range86-191.btcentralplus.com)
[15:58:09] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[16:00:22] *** Joins: proller (~p@2a02:6b8:0:40c:df76:d6be:1496:5ce)
[16:04:45] *** Joins: kylese (~kylese@p5dd8b668.dip0.t-ipconnect.de)
[16:06:08] *** Quits: pull (~tcz@91.150.165.88) (Quit: Czesc)
[16:06:34] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[16:06:55] *** Joins: whupdup (~whupdup@pool-173-76-128-81.bstnma.fios.verizon.net)
[16:09:26] *** Joins: lpapp (~lpapp@ec2-15-161-137-233.eu-south-1.compute.amazonaws.com)
[16:09:44] <lpapp> hmm, I am surprised about passing an integer to std::isnan being an on issue on Windows. It is a Windows bug, yeah? https://stackoverflow.com/questions/61646166/how-to-resolve-fpclassify-ambiguous-call-to-overloaded-function
[16:10:02] <lpapp> https://en.cppreference.com/w/cpp/numeric/math/isnan -> bool isnan( IntegralType arg );
[16:10:18] <lpapp> "A set of overloads or a function template accepting the arg argument of any integral type. Equivalent to (2) (the argument is cast to double)."
[16:10:36] <rpav> definitely sounds like a bug
[16:11:21] <lpapp> bool Mat4<T>::isValid() const { return std::isnan(a00) || std::isnan(a10) || std::isnan(a20) || std::isnan(a30) || ...; }
[16:11:37] <lpapp> it would be a shame to explicitly add static_cast<double>(a00) to all these.
[16:11:37] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[16:11:46] *** Parts: quarterback (~quarterba@user/quarterback) (Leaving)
[16:12:15] *** Joins: smallvil_ (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au)
[16:12:17] <rpav> auto my_isnan(double v) { return std::isnan(v); }
[16:13:04] <rpav> <Ts...> bool any_nans(Ts&&...vs) { .. .}
[16:13:24] <lpapp> maybe float v is better for a templated class
[16:13:37] <lpapp> otherwise floats would also cast to double
[16:14:01] <lpapp> ah, but then double to float.
[16:14:06] <lpapp> Shame on Windows. :)
[16:15:01] *** Quits: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au) (Ping timeout: 258 seconds)
[16:15:24] <lpapp> is it even safe to cast NaN to double?
[16:16:06] <TinoDidriksen> It's never a NaN when coming from an integer type.
[16:16:15] *** Quits: smallvil_ (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au) (Remote host closed the connection)
[16:16:28] *** Joins: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au)
[16:16:48] <lpapp> maybe is_same with early return true for integers?
[16:17:02] *** Quits: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au) (Remote host closed the connection)
[16:19:32] <lpapp> or simply just integer specialisation
[16:20:37] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[16:21:41] *** Joins: dld (~dld@192.91.235.243)
[16:22:25] <rpav> ints can't of course, but literal integers should cast/compile
[16:28:20] *** Joins: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi)
[16:29:42] *** Quits: NiD27 (~nid27@49.205.148.101) (Remote host closed the connection)
[16:30:01] *** Joins: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au)
[16:36:46] *** Quits: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi) (Ping timeout: 245 seconds)
[16:41:58] *** Joins: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi)
[16:42:02] *** Quits: lh_ideapad (~lh_mouse@mingw-w64/developer/lhmouse) (Remote host closed the connection)
[16:42:37] *** Joins: horribleprogram (~user@2607:fea8:7040:830:3000:acb9:1f72:c20d)
[16:42:50] *** Quits: horribleprogram (~user@2607:fea8:7040:830:3000:acb9:1f72:c20d) (Changing host)
[16:42:50] *** Joins: horribleprogram (~user@user/horribleprogram)
[16:45:34] <lpapp> do I also need to declspec std::ostream& operator << (std::ostream& o, const Foo&);?
[16:45:41] *** Quits: rond_ (~rond_@2a02:a31a:a23c:f480:2fd7:e087:5546:a438) (Quit: Client closed)
[16:50:00] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[16:52:58] *** Parts: blackout69 (~blackout6@net-31-156-121-187.cust.vodafonedsl.it) ()
[16:54:00] *** Quits: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 260 seconds)
[16:54:00] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[16:55:12] *** Joins: CodeMouse92 (~CodeMouse@user/codemouse92)
[16:55:19] *** Joins: chozorho (~chozorho@c-69-250-72-103.hsd1.md.comcast.net)
[16:55:35] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 246 seconds)
[16:56:33] *** Parts: lpapp (~lpapp@ec2-15-161-137-233.eu-south-1.compute.amazonaws.com) ()
[16:59:48] *** Quits: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au) (Remote host closed the connection)
[17:00:01] *** Joins: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au)
[17:00:35] *** Quits: smallville7123 (~smallvill@cpe-172-193-200-97.qld.foxtel.net.au) (Remote host closed the connection)
[17:03:11] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[17:19:30] *** Joins: quarterback (~quarterba@user/quarterback)
[17:21:25] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[17:22:40] *** Quits: lh_cat (~lh_mouse@mingw-w64/developer/lhmouse) (Read error: Connection reset by peer)
[17:28:50] *** Joins: gggp (~gggp@li870-78.members.linode.com)
[17:29:50] *** Quits: gggp (~gggp@li870-78.members.linode.com) (Client Quit)
[17:30:52] *** Joins: quarterback_ (~quarterba@user/quarterback)
[17:30:52] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[17:31:08] *** Quits: quarterback (~quarterba@user/quarterback) (Read error: Connection reset by peer)
[17:32:33] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:3447:7874:707f:1c0f)
[17:32:33] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:3447:7874:707f:1c0f) (Changing host)
[17:32:33] *** Joins: skapata (~Skapata@user/skapata)
[17:36:35] *** Quits: JohnMS_WORK (~kvirc@213.134.183.29) (Ping timeout: 260 seconds)
[17:37:12] *** Quits: npaperbot (~npaperbot@dodecahedron.m-ou.se) (Remote host closed the connection)
[17:37:20] *** Joins: npaperbot (~npaperbot@dodecahedron.m-ou.se)
[17:37:20] *** ChanServ sets mode: +v npaperbot
[17:38:02] *** Quits: proller (~p@2a02:6b8:0:40c:df76:d6be:1496:5ce) (Ping timeout: 268 seconds)
[17:38:22] *** Joins: kraa (~kraa@107-190-7-216.cpe.teksavvy.com)
[17:38:38] *** Quits: horribleprogram (~user@user/horribleprogram) (Remote host closed the connection)
[17:39:46] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[17:43:26] *** Joins: horribleprogram (~user@2607:fea8:7040:830:3000:acb9:1f72:c20d)
[17:43:45] *** Quits: horribleprogram (~user@2607:fea8:7040:830:3000:acb9:1f72:c20d) (Changing host)
[17:43:45] *** Joins: horribleprogram (~user@user/horribleprogram)
[17:47:57] *** Joins: NiD27 (~nid27@49.205.148.101)
[17:49:38] *** Joins: m_ben (~m_ben@user/m-ben/x-7429725)
[17:52:37] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[17:52:37] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[17:57:37] *** Joins: jkaye (~jkaye@2601:281:8300:7530:66b0:89cb:9eb6:ddde)
[18:01:19] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[18:05:20] *** Joins: RabidToaster (~Thunderbi@bras-base-otwaon234vw-grc-25-65-93-17-96.dsl.bell.ca)
[18:05:21] *** Joins: Tokamak (~Tokamak@107.117.203.2)
[18:06:12] *** Joins: LBV_User (~leonardo@45.183.248.98)
[18:06:35] *** Joins: LiaoTao (~LiaoTao@gateway/tor-sasl/liaotao)
[18:06:35] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[18:12:29] *** Joins: peeps[zen] (~peepsalot@openscad/peepsalot)
[18:12:45] <ezzieyguywuf> so I've read that a recursive function will tend to be more space inefficient than an equivallent iterative solution
[18:13:04] <ezzieyguywuf> but I'm a bit confused as to why - in either case, a stack of data must be maintained that could be as big as n
[18:13:27] <rpav> depends, though if it's not optimized-tail-recursive then you're much more limited as you'll blow the stack a lot quicker than your own heap accumulation
[18:13:51] *** Quits: peepsalot (~peepsalot@openscad/peepsalot) (Ping timeout: 245 seconds)
[18:14:24] *** Joins: ShiftyLogic (~shiftylog@66.115.146.16)
[18:15:07] <ezzieyguywuf> but if you're comparing tail-recursive (not sure what you mean by optimized here) vs iterative, they should be mostly the same yea/
[18:15:10] <ezzieyguywuf> ?
[18:15:15] <rpav> also the stack requires some overhead and i'm not sure how much you can skip on modern ABIs, e.g. return addresses are an extra 8 bytes per call
[18:15:21] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[18:15:24] <rpav> presumably but TCO isn't guaranteed
[18:15:26] <ezzieyguywuf> rpav: ah hah.
[18:15:31] <ezzieyguywuf> rpav: what is TCO?
[18:15:36] <rpav> tail call optimization
[18:15:56] <rpav> not to be confused with total cost of ownership, which might be relevant to having a lot of recursive functions
[18:16:00] <ezzieyguywuf> so by writing it out iteratively, I'm making the optimizers job easier
[18:16:06] *** Parts: quarterback_ (~quarterba@user/quarterback) (Leaving)
[18:16:16] <rpav> in C++ at least
[18:16:21] *** Joins: quarterback (~quarterba@user/quarterback)
[18:16:31] <ezzieyguywuf> but also the overhead of the stack you mentioned is probably key too
[18:16:36] <ezzieyguywuf> I remember reading something about that as well
[18:16:48] <rpav> i don't think most optimizers will vectorize recursion but i'm not very familiar
[18:17:06] <ezzieyguywuf> I'm just trying to be prepared in case this comes up in an interview: I want to be able to intelligently speak to why one may choose a recursive vs. an iterative approach
[18:17:19] <ezzieyguywuf> the recursive approach _does_ tend to be easier to read/logic about, which shouldn't be discounted
[18:17:47] *** Joins: proller (~p@2a02:6b8:0:40c:8151:6163:ab32:70c1)
[18:17:58] <rpav> well, of course, don't just memorize specific facts; learn about the underlying mechanisms and reason about them
[18:18:18] <ezzieyguywuf> precisely. that's why I'm asking :)
[18:18:31] *** Joins: m_ben_ (~m_ben@user/m-ben/x-7429725)
[18:18:59] *** Quits: ShiftyLogic (~shiftylog@66.115.146.16) (Ping timeout: 264 seconds)
[18:19:25] <rpav> well, go learn how the calling ABI actually works would be your best bet .. you should know some assembly at least
[18:19:34] <rpav> they differ by architecture but at some point you need common things
[18:22:11] *** Quits: m_ben (~m_ben@user/m-ben/x-7429725) (Ping timeout: 245 seconds)
[18:24:40] *** Joins: Mooncairn (~mooncairn@user/mooncairn)
[18:25:11] * ezzieyguywuf nods
[18:25:13] <ezzieyguywuf> thanks for the help
[18:26:19] *** Joins: joel135 (sid136450@hampstead.irccloud.com)
[18:26:29] *** Parts: joel135 (sid136450@hampstead.irccloud.com) ()
[18:26:43] *** Quits: lionkor (~lionkor@200116b80fac8c007285c2fffea63d72.dip.versatel-1u1.de) (Quit: quit)
[18:26:59] *** Joins: lionkor (~lionkor@200116b80fac8c005742ac9b15b9c555.dip.versatel-1u1.de)
[18:33:32] *** Quits: Skyfire (~pyon@user/pyon) (Quit: brb)
[18:36:18] *** Quits: eck (~root@user/eck) (Quit: PIRCH98:WIN 95/98/WIN NT:1.0 (build 1.0.1.1190))
[18:36:43] *** Joins: eck (~root@user/eck)
[18:36:47] *** Joins: ShiftyLogic (~shiftylog@66.115.146.16)
[18:40:07] <ezzieyguywuf> is a `const int*` the same as a `int const*`? I think so. but what is const here? the pointer itself or the value it points to?
[18:44:35] <imMute> ezzieyguywuf: yes they're the same.  the int is const, you can change the pointer to point at a different int
[18:46:12] <ezzieyguywuf> imMute: is it possible to make the pointer itself const?
[18:46:26] <imMute> ezzieyguywuf: const int * const  (or int const * const)
[18:46:38] <ezzieyguywuf> interesting
[18:46:49] <ezzieyguywuf> is int * const also valid? in which case I can modify the int but not the pointer?
[18:46:55] <imMute> correct.
[18:47:41] <ezzieyguywuf> can you think of any practical reasons why one might want the pointer itself to be constant?
[18:47:49] <ezzieyguywuf> can't say I've ever come across it
[18:47:57] <ezzieyguywuf> in fact, I haven't seen `int const*` either
[18:48:07] <ezzieyguywuf> usually it's just raw pointers, wild-west style
[18:48:09] *** Quits: soman (~soman@83.139.147.234) (Quit: Client closed)
[18:49:18] *** Joins: great_taste (~great_tas@190.32.235.20)
[18:49:18] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[18:49:59] <imMute> IDK about the pointer being const, other than "everything you don't change should be const".   const char * is definitely a thing (that should be used more than it is)
[18:51:19] <ezzieyguywuf> ahhh yea for sure
[18:51:42] <ezzieyguywuf> I always use std::string b/c I can never keep the syntax for const char * right in my head, lol
[18:51:50] <ezzieyguywuf> but I should spend some time to internalize it.
[18:52:09] <imMute> read it right to left.   int const * const  is a constant pointer to a constant int
[18:52:23] <imMute> const int * const   is a const pointer to an int that is const.
[18:52:47] <ezzieyguywuf> char[6] s = "hello\0"; // is this the same as char * s = "hello";?
[18:53:14] <ezzieyguywuf> imMute: "read right-to-left" nice tip!
[18:53:47] <imMute> not quite the same.  the former is an array (which stores the contents) while the latter is a pointer (and the data is stored elsewhere)
[18:54:05] <imMute> and char *s = "hello"   is some kind of bad, since the string that's being pointed to is likely in Read Only memory
[18:54:18] *** Joins: blackout69 (~blackout6@net-31-156-121-187.cust.vodafonedsl.it)
[18:54:53] <ezzieyguywuf> is there a reason it has to be `char const *` instead of `char *`? what if I want to change my string from "hello" to "hallo"?
[18:55:36] <imMute> because the string constant is probably stored in read only memory.  char *  implies you can change the contents, but you can't in that case.   I think most compilers warn about this.
[18:56:10] <imMute> { char * s = "hello"; s[1] = 'a'; cout << s; }
[18:56:10] <geordi> error: ISO C++ forbids converting a string constant to 'char*'
[18:56:21] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 268 seconds)
[18:56:34] <ezzieyguywuf> ahh
[18:56:48] <ezzieyguywuf> but with char[6] s = "hello\0"; I should be able to make the change
[18:57:08] <ezzieyguywuf> { char[6] s = "hello\0"; s[1] = 'a'; cout << s; }
[18:57:08] <geordi> error: expected identifier before numeric constant
[18:57:21] <ezzieyguywuf> { char s[6] = "hello\0"; s[1] = 'a'; cout << s; }
[18:57:21] <geordi> error: initializer-string for 'char [6]' is too long
[18:57:31] <ezzieyguywuf> dang
[18:57:46] <ezzieyguywuf> ohh the \0 gets inserted for me
[18:57:50] <ezzieyguywuf> { char s[6] = "hello"; s[1] = 'a'; cout << s; }
[18:57:51] <geordi> hallo
[18:57:56] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[19:00:30] <imMute> yep, in that case you're defining an array and initializing it's contents with a copy of the string literal.
[19:00:41] <imMute> where as with  char *   you're initializing the *pointer* to point at said string literal
[19:04:11] *** Quits: zen_coder (~zen_coder@2a02:8109:a280:2d8d:102f:8750:b199:23e9) (Quit: Konversation terminated!)
[19:06:07] *** Joins: TheGuestMovie (~TheGuestM@173.231.114.74)
[19:06:08] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[19:08:54] *** Quits: horribleprogram (~user@user/horribleprogram) (Remote host closed the connection)
[19:11:11] *** Joins: rond_ (~rond_@2a02:a31a:a23c:f480:2fd7:e087:5546:a438)
[19:11:57] <rond_> In Python, a convenient way to create strings is f"Constant part {and_here_comes_an_int} ... {and here comes float}"   what's the easiest way to create such strings in c++?
[19:12:30] <kalven> std::format
[19:13:42] *** Quits: interop_madness (~interop_m@user/interop-madness/x-0950004) (Read error: Connection reset by peer)
[19:14:58] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[19:16:05] <rond_> is it supported in gcc/clang?
[19:16:17] <rpav> not yet but there's always fmtlib
[19:16:34] <rond_> :(
[19:16:42] <rond_> sprintf then i guess
[19:17:13] <rpav> why
[19:17:40] <rpav> actually i may be looking i the wrong place for support too, it'd be libstdc++ not gcc/clang
[19:17:41] <rond_> I don't want another non-std dependency in my project for a one-line use
[19:18:05] <rpav> what, don't you have a common accessible set of libraries for any one-liners and quick tests you do?
[19:18:50] <rpav> std is a crap set of utilities, i'd hate to use vanilla C++ for anything
[19:19:50] <rond_> is there any supported non-third-party solution for my problem?
[19:19:50] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[19:19:54] <rond_> 'vanilla c++' ?
[19:20:49] <ezzieyguywuf> rond_: you could use stringstream if you don't have std::format
[19:21:05] <ezzieyguywuf> imMute: thanks for providing that clarification, it's truly very helpful
[19:24:17] <lionkor> 'vanilla c++' implies 'kinky c++'?
[19:24:33] * lionkor leaves
[19:24:34] *** Parts: kylese (~kylese@p5dd8b668.dip0.t-ipconnect.de) (Leaving)
[19:24:39] <rpav> obviously
[19:24:42] <rpav> ;)
[19:25:32] <rpav> but in seriousness i thought it was more or less a given that everyone developed utility libraries and had a standard set of handy things, as std has always been pretty limited
[19:25:56] *** Joins: canxiu (uid524910@id-524910.helmsley.irccloud.com)
[19:27:44] <rpav> qt became this for a lot of things, and QString has like .arg() now
[19:28:41] <InPhase> rpav: Not everyone does, but I find C++ challenging to use without doing this.
[19:28:52] <ezzieyguywuf> in python I can do `3 // 2` to force integer division - is there a similar syntax in c++?
[19:29:02] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[19:29:11] <InPhase> ezzieyguywuf: Yes, divide integers.
[19:29:25] <InPhase> ezzieyguywuf: C++ division is type sensitive.
[19:29:25] <ezzieyguywuf> so if one is a float, I have to cast it first?
[19:29:30] <InPhase> Correct.
[19:29:41] <ezzieyguywuf> or I guess I could explictly call std::floor on the result
[19:29:46] <ezzieyguywuf> or cast the result
[19:30:08] <InPhase> Integer division is also a little faster.
[19:30:14] <rpav> <T,S> auto intdiv(T a, S b) { return int(a) / int(b); }
[19:30:23] <rpav> InPhase: very possibly not the case
[19:30:38] <ezzieyguywuf> rpav: why the auto return type?
[19:31:09] <lionkor> consider why you even have a float, and if you dont know and/or don't care about the decimal stuff, just cast it before. Otherwise cast it after, as the decimal places can make an integer-difference obviously
[19:31:19] <rpav> or at least at some point fpu had seen more attention than the integer units iirc and you could see better float math performance than int
[19:31:45] <rpav> ezzieyguywuf: i was lazy typing; note you probably want a slightly more type-robust function and possibly one that returns the better of T or S, but also maybe not
[19:31:53] *** Quits: blackout69 (~blackout6@net-31-156-121-187.cust.vodafonedsl.it) (Quit: Leaving.)
[19:32:00] <rpav> also possibly an explicit int type to cast to
[19:34:33] <ezzieyguywuf> I often see folks using a char when they only need to store a single byte of data - is there a reason that a char might be chosen over a bool?
[19:34:33] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[19:35:27] <rpav> bool can be 0 or 1, otherwise it's UB
[19:35:34] <rpav> you _might_ however choose std::byte
[19:36:00] <rpav> probably preferable over char (or really, unsigned char is what you ought to have been using)
[19:36:21] * ezzieyguywuf nods
[19:36:35] <ezzieyguywuf> though if you're manipulating the bits directly, char vs unsigned char shouldn't really matter right?
[19:37:05] <lionkor> i find char to be a bad choice when you need an 8-bit type that isn't literally a character. std::uint8_t or uint8_t or std::byte are the correct things to use. A char isn't gonna always be 1 byte.
[19:38:59] <lionkor> and signed vs unsigned does matter when you compare them, whcih you likely won't do with bitwise operations afaik
[19:39:11] * lionkor goes to grab coffee
[19:39:37] <rpav> ezzieyguywuf: if char is signed, then some bitwise operations can be UB
[19:39:54] <rpav> then there's the whole matter of maybe it's unsigned
[19:41:08] <ezzieyguywuf> rpav: ah, good to know.
[19:41:25] *** Quits: Juliu (~Juliu@2a02:810b:c640:3ec0:89ae:7a91:7b8d:9618) (Ping timeout: 260 seconds)
[19:42:08] *** Quits: lionkor (~lionkor@200116b80fac8c005742ac9b15b9c555.dip.versatel-1u1.de) (Changing host)
[19:42:08] *** Joins: lionkor (~lionkor@beammp/staff/lionkor)
[19:43:05] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[19:44:40] <ezzieyguywuf> interesting: struct Foo{int a; char b;} and struct Bar{int a, int b;} both have the same sizeof, I guess b/c of alignment
[19:45:02] <ezzieyguywuf> would `Bar` be preferable to `Foo` then since you have access to the extra space that's being assigned anyway?
[19:48:05] <lionkor> I'd say it doesn't matter. If you need only a char, use a char - the memory is there and unused either way if all you need it 8 bits
[19:48:05] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[19:51:34] *** Quits: Haohmaru (~Haohmaru@195.24.53.110) ()
[19:52:36] <rpav> ^
[19:52:42] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[19:52:47] <rpav> plus you may need `char c;` later or something
[19:52:52] *** Quits: jkaye (~jkaye@2601:281:8300:7530:66b0:89cb:9eb6:ddde) (Ping timeout: 268 seconds)
[19:53:06] <rpav> the thing to avoid is like `struct { char a; int b; char c; };`
[19:53:52] *** Quits: lionkor (~lionkor@beammp/staff/lionkor) (Quit: quit)
[19:53:54] <rpav> the only time you need to worry up front is if you _can't_ change member order later for whatever reason, which is rare .. generally avoid having that restriction :P
[19:54:07] *** Joins: lionkor (~lionkor@beammp/staff/lionkor)
[19:54:35] <rpav> i.e. don't depend on relative addresses or walking a struct or storing binary blobs where possible
[19:57:08] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[19:57:10] <ezzieyguywuf> rpav: yea, I was just reading up on it and came to the same conclusion
[19:57:26] *** Joins: RoKenn (~RoKenn@2001:a61:3505:d101:4932:1a64:e30d:3e70)
[19:57:26] *** Quits: RoKenn (~RoKenn@2001:a61:3505:d101:4932:1a64:e30d:3e70) (Changing host)
[19:57:26] *** Joins: RoKenn (~RoKenn@user/rokenn)
[19:57:31] <ezzieyguywuf> but also, generally as a rule of thumb probably define my member variables in order of decreasing size
[19:57:43] <rpav> maybe
[19:57:52] <ezzieyguywuf> *rough rule of thumb then :-P
[19:58:09] <rpav> i wouldn't worry about it too much tbh, unless you notice something particularly dumb that particularly matters
[19:58:09] *** Quits: RoKenn (~RoKenn@user/rokenn) (Client Quit)
[19:58:16] <rpav> individual byte members are probably rare
[19:58:31] <ezzieyguywuf> yea I'm not _too_ worried about it
[19:58:42] *** Joins: Skyfire (~pyon@user/pyon)
[19:58:43] *** Quits: NiD27 (~nid27@49.205.148.101) (Quit: Leaving)
[19:58:43] <ezzieyguywuf> just making sure I understand the inner workings of the language
[19:58:59] <rpav> definitely doesn't hurt
[20:05:27] <TinoDidriksen> geordi --version
[20:05:28] <geordi> GCC 12.0.0 20211017 (experimental)
[20:05:53] <TinoDidriksen> geordi --version
[20:05:57] <geordi> GCC 12.0.0 20211028 (experimental)
[20:06:14] *** Joins: lpapp (~lpapp@ec2-15-161-137-233.eu-south-1.compute.amazonaws.com)
[20:06:40] <imMute> geordi --version
[20:06:41] <geordi> Same output.
[20:06:43] <lpapp> hi, if I have a class which has templated ctors, what do I need to declspec? I am declspec'ing the class now, but I am getting unresolved symbols for the ctor.
[20:06:48] <imMute> durn, I was hoping it would change again. lol
[20:09:05] <lpapp> template visibility is hard :)
[20:10:00] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Read error: Connection reset by peer)
[20:10:00] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[20:10:01] *** Quits: PamiPetteri (leet@user/pamipetteri) (Quit: leaving)
[20:10:35] <ville> lpapp: the template functions need to be defined in the header where the class is defined
[20:10:51] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[20:11:16] <lpapp> ville: oh, is it
[20:13:46] <InPhase> rpav: Yes, I reran some classic benchmarks.  Basic float/double multiplication and division is now reliably faster than integer of the same in cases where it can be vectorized.  Not by a huge amount, but by a respectable percentage in my tests.
[20:14:24] *** Parts: quarterback (~quarterba@user/quarterback) (Leaving)
[20:14:28] <lpapp> so, all the lines need moving from the cpp to the header like this, ville?
[20:14:33] <lpapp> template <> Value::Value(...) { ... }
[20:15:15] *** Quits: proller (~p@2a02:6b8:0:40c:8151:6163:ab32:70c1) (Ping timeout: 260 seconds)
[20:15:18] <lpapp> what is the reason for this, by the way?
[20:15:46] *** Quits: rond_ (~rond_@2a02:a31a:a23c:f480:2fd7:e087:5546:a438) (Quit: Client closed)
[20:16:04] <lpapp> the trick is that we use some other API in the implementations that should not go into the public header.
[20:16:14] <lpapp> is there a way not to move or move, but preserve the private implementation?
[20:17:04] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[20:17:20] <ville> !give lpapp template
[20:17:22] <nolyc> ville: Error: "template" is not a valid command.
[20:17:24] <ville> !give lpapp templates
[20:17:25] <nolyc> lpapp: The compiler generates code not for templates but for their instantiations. If you do not know beforehand precisely with which arguments the template will be instantiated, this precludes separate compilation, and your only option is to place the template and everything belonging to it in a header, so that instantiations of it are compiled along with the translation units that spawn them.
[20:18:16] <lpapp> extern in the header?
[20:18:20] <ville> no
[20:18:40] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[20:18:41] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[20:18:53] <lpapp> vi"If you do not know beforehand precisely with which arguments the template will be instantiated
[20:18:56] <lpapp> "
[20:18:59] <lpapp> ville, but I do know in this case
[20:19:02] <lpapp> hence the specialisations.
[20:19:30] <lpapp> I only support the templated constructors that I specialised in the C++.
[20:21:04] *** Joins: proller (~p@2a02:6b8:0:40c:49db:6322:67f4:1495)
[20:21:23] *** Quits: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi) (Ping timeout: 264 seconds)
[20:21:42] <InPhase> rpav: Notably when I intentionally break the vectorization with volatile storage, float ends up slower than integer multiplication and division again.  This appears to be the overhead of moving into and out of the vectorization.
[20:22:33] <ville> lpapp: then stick the explicit instantiation declaration in the header
[20:22:45] *** Joins: artok (~azo@mobile-access-bcee2b-18.dhcp.inet.fi)
[20:23:48] <InPhase> rpav: It's trickier to run a benchmark on isolated multiplications and divisions, but I interpret from these results that lone multiplications and divisions in the middle of other operations that cannot be vectorized in the same manner would end up slightly faster being integer operations.  But most of the cases where it really matters are candidates for vectorization, so this performance inversion
[20:23:48] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[20:23:54] <InPhase> now favoring floating points is worth noting.
[20:25:09] <ville> lpapp: perhaps of note is that an explicit specialization is a different thing from an explicit instantiation. explicit instantiation has two parts: the explicit instantiation declaration and the explicit instantiation definition
[20:25:16] <InPhase> rpav: Thanks for nudging me to rerun those tests.  :)
[20:25:27] <lpapp> ville: it is not explicit instantiation, but specialised implementation of the templated ctor...
[20:25:39] <lpapp> and we would not like to show the private implementation of each specialised type if possible...
[20:25:44] <lpapp> they should be pimpl...
[20:26:14] <ville> lpapp: do you actually do different things for the char-type or just want to instantiate it so it doesn't get compiled every tu?
[20:26:53] <ville> remembering things you've say in past few days it seems you'd want the latter
[20:26:55] *** Quits: lionkor (~lionkor@beammp/staff/lionkor) (Quit: quit)
[20:27:01] <ville> err said
[20:27:12] *** Joins: lionkor (~lionkor@beammp/staff/lionkor)
[20:27:46] <lpapp> ville: so...
[20:28:01] <lpapp> ville: we use a templated api, we have a mapping from our own types to their types
[20:28:20] <lpapp> so yeah, each specialised templates ctor calls into this templated third-party template...
[20:28:32] <lpapp> vector 2 -> "third party vector 2", etc.
[20:28:40] <lpapp> we really do not want to expose this to the public in the header
[20:28:48] <lpapp> it should be implementation detail how we implement this stuff
[20:29:07] <lpapp> but yes, practically each type has its own one-liner implementation.
[20:29:32] <lpapp> this is a different case to vec/mat/quat/etc classes which we templated
[20:29:37] <ville> lpapp: if your set of types is closed just write overloads your self? no need to mess about with templates
[20:29:38] <lpapp> and wanted to explicitly instantiate them
[20:29:50] <lpapp> here, the class is not templated. It is the constructor that is templated.
[20:30:46] <lpapp> that is a fair point, ville... will investigate...
[20:32:35] <lpapp> ville: if I get a response that that is not acceptable, what is the next thing to try?
[20:32:43] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[20:32:45] <lpapp> Ultimately, the one-liner implementation ought to remain private.
[20:32:53] <lpapp> otherwise we would lock our api to our implementation.
[20:37:56] *** Quits: great_taste (~great_tas@190.32.235.20) (Quit: Client closed)
[20:37:56] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[20:42:29] *** Joins: SuperNintendoSUX (~sjw@69.206.48.64)
[20:46:45] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[20:46:46] *** Quits: Tokamak (~Tokamak@107.117.203.2) (Ping timeout: 245 seconds)
[20:48:34] <ville> lpapp: so i don't quite get what the problem was when you did something similar to: template<typename T> void f(T); in a header and then an explicit specialization in a translation unit?
[20:49:25] <ville> lpapp: explicit specialization looking like: template<> void f<char>(char) {}
[20:51:03] *** Joins: Inst__ (~Inst@2601:6c4:4080:3f80:258f:7b54:f932:b719)
[20:53:35] *** Quits: AmR (~AmREiSa@156.199.244.83) (Ping timeout: 246 seconds)
[20:55:29] <lpapp> ville: no, it was not like that
[20:55:36] <lpapp> the explicit specialisation was for a class.
[20:55:45] <lpapp> like Vec2<float>; Vec2<double>, etc.
[20:55:49] <lpapp> different issue.
[20:55:55] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[20:55:57] <ville> it doesn't matter if it's a member of a class
[20:56:05] <lpapp> template class Vec2<float>;
[20:56:08] <ville> thought you said it was a templated ctor of a class?
[20:56:22] <lpapp> I feel that you are mixing up two different issues I had.
[20:56:54] <lpapp> One was with explicit instantiation of a templated class, the other is specialisation of templated method in a non-templated class.
[20:58:48] <ville> so what is it that you are having trouble with then?
[20:59:04] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[20:59:54] *** Joins: AmR (~AmREiSa@156.199.244.83)
[21:00:51] *** Quits: kurfen (~kurfen@45.152.181.134) (Quit: WeeChat 2.3)
[21:00:59] *** Joins: magla (~gelignite@55d48754.access.ecotel.net)
[21:01:40] *** Joins: kurfen (~kurfen@45.152.181.134)
[21:02:11] *** Quits: markong (~kvirc@213.146.188.203) (Ping timeout: 264 seconds)
[21:03:09] <lpapp> ville: this issue seems to cause unresolved symbols for the templated ctors
[21:03:24] <lpapp> the non-templated class in which this templated ctor is is declspec'd
[21:03:48] <lpapp> I agree with you that it is a misuse of templates in my opinion if only a set of types are supported
[21:03:53] <lpapp> since overrides are much simpler to deal with
[21:04:03] <lpapp> although perhaps performance overhead.
[21:04:11] <lpapp> runtime performance, not build time.
[21:05:45] <ville> this issue being a: explicit specialization or explicit instantation?
[21:06:12] <ville> umm, overload resolution is done at build time, and templates effectively generate an overload set when you instantiate them
[21:06:35] *** Joins: Tokamak (~Tokamak@107.117.203.178)
[21:07:21] <ville> anyway seems like i've lost the thread, can you clarify the actual situation in a paste of some sort. is this about explicit instantiations or explicit specializations?
[21:08:18] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[21:08:59] <lpapp> a:
[21:09:16] <lpapp> sorry, you are right, I said something rubbish.
[21:09:26] <lpapp> I was confusing overloads and overrides in my brain.
[21:09:34] *** Joins: great_taste (~great_tas@190.32.235.20)
[21:09:52] <lpapp> this issue now is specialisation, a:
[21:10:02] <lpapp> one argument I got is that the API will be cluttered a bit
[21:10:10] <lpapp> with all the overloads mentioned explicitly.
[21:10:27] <lpapp> but in my opinion, that is not a big issue.
[21:11:10] *** Quits: kurfen (~kurfen@45.152.181.134) (Quit: WeeChat 2.3)
[21:11:28] <ville> if it's explicit specializations then the header just has to have the generic template and even that doesn't have to have an implementation. so if someone tries to use it it will result in undefined error
[21:13:46] <lpapp> Yeah, we definitely want to link
[21:13:46] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[21:13:50] <lpapp> just compilation is not ok
[21:21:06] *** Quits: cesello (~cesello@user/cesello) (Quit: Cia')
[21:21:35] <ville> or i guess you need an empty definition at the least in the header for a class template?
[21:21:46] *** Joins: Tobbi (~Tobbi@2a02:8108:1240:48ec:2403:a3f7:8f00:c0d9)
[21:22:22] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[21:22:49] *** Quits: raphi_nw (~raphi@static.81.107.21.65.clients.your-server.de) (Remote host closed the connection)
[21:25:19] <lpapp> it is not a template class
[21:25:22] <lpapp> it is a template ctor
[21:25:43] <lpapp> but do you mean we still need an empty {} in the header?
[21:25:50] <lpapp> and that should fix the linker issues?
[21:28:22] *** Quits: RabidToaster (~Thunderbi@bras-base-otwaon234vw-grc-25-65-93-17-96.dsl.bell.ca) (Ping timeout: 265 seconds)
[21:28:51] <ville> if it's a function template then what i said above should do: "template<typename T> void f(T); in a header" and "template<> void f<char>(char) {}" in source
[21:29:52] <ville> if it was a class template, then i made a mistake above. you still need to stick the specialization in the header because otherwise the users of it won't know what members it has. a specialization doesn't "inherit" magically the members from the general template
[21:34:50] *** Quits: proller (~p@2a02:6b8:0:40c:49db:6322:67f4:1495) (Ping timeout: 268 seconds)
[21:37:13] *** Quits: npaperbot (~npaperbot@dodecahedron.m-ou.se) (Remote host closed the connection)
[21:37:20] *** Joins: npaperbot (~npaperbot@dodecahedron.m-ou.se)
[21:37:20] *** ChanServ sets mode: +v npaperbot
[21:41:03] <rpav> imagine if all your dependencies and definitions were handled primarily by simple textual substitution and cross-referencing arbitrary sequences of characters
[21:43:58] *** Quits: pulse (~pulse@user/pulse) (Read error: Connection reset by peer)
[21:44:35] <lpapp> ville: but that is what we already do causing unresoled symbols for the ctor specialisations.
[21:44:54] <lpapp> unresolved*
[21:45:32] <lpapp> the class (not template class), in which the function template is, is declspec'd for completeness.
[21:49:55] *** Joins: pulse (~pulse@user/pulse)
[21:50:56] <ville> lpapp: dunno: https://wandbox.org/permlink/BmNJyRK6zHPk5DzW
[21:52:33] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[21:59:05] <lpapp> ville: I was hoping what you were saying would fix it, like {} for the template function
[21:59:13] <lpapp> and then specific implementations in the specialisations
[21:59:20] <lpapp> but if that is not required, it does not look hopeful
[22:03:41] <ville> lpapp: did you look at my paste?
[22:03:41] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[22:04:09] <ville> lpapp: is that not representetive of what you're trying to do?
[22:05:06] <ville> i included the non-member function template there so you can see that it makes no difference whether the template function is a member of non-template class or not
[22:05:35] <lpapp> I do not get your paste.
[22:05:55] <TheGuestMovie> When debugging in Qt Creator, is there a way to view (or copy to clipboard) the value of a QString that's longer than 300 characters? That's what my 1500-char long string gets truncated to.
[22:06:02] <ville> lpapp: get? as in you don't see it or you don't understand it
[22:06:20] <TheGuestMovie> or do I have to go back to std::cout debugging like a caveman
[22:06:34] <ville> TheGuestMovie: right click..
[22:07:20] <TheGuestMovie> ville: I already tried "Copy Value to Clipboard" from the context menu. It's the truncated string.
[22:07:35] <ville> and the option to open it in an editor?
[22:08:27] <Alipha> lpapp: what about, in the header, put `template<typename T> void foo(T x) { fooImpl(x); }` and in the cpp, define `void fooImpl(int x) {...} void fooImpl(float x) {...}` etc?
[22:08:40] <TheGuestMovie> that works but it's a vertical string, one line per character, that makes it hard to read. My string is an XML document :/
[22:08:59] <TheGuestMovie> I'm not quite Neo from the Matrix yet
[22:10:11] <LordKalma> time for me to learn django and js
[22:10:54] <TheGuestMovie> LordKalma: ah, planning to actually become employable, I see
[22:10:59] <LordKalma> no
[22:11:02] <LordKalma> it's for a pet project
[22:11:11] <Alipha> lpapp: you could even not have to write out `void fooImpl(int x);` etc in the header because you could make a local function declaration, lol (but I'm not sure if it'll work with dllexport): template<typename T> void foo(T x) { void fooImpl(T); fooImpl(x); }
[22:11:15] <kalven> pet project today, work tomorrow
[22:11:15] <ville> then you've the wrong kind pet projects
[22:11:19] <LordKalma> I'm a telecom engineer in the daytime job
[22:11:28] <TheGuestMovie> right, your photon engineering thing
[22:11:30] <kalven> ville needs more web tech in his life
[22:11:33] <LordKalma> yap
[22:11:43] <rpav> ooh, what if we produced complicated sequences of specializations by abusing the preprocessor with self-#includes
[22:11:46] <LordKalma> I have some stuff I want to put in a database, have an API and etc, that sort of stuff
[22:11:58] <ville> kalven: i really don't. i am molested by web crap every day
[22:12:09] <TheGuestMovie> exposed to the web at large? user signups, etc?
[22:12:10] <LordKalma> strong wording
[22:12:27] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[22:12:29] <TheGuestMovie> cause in Python you can create an API in like 2 lines of flask. Django is a full-on framework.
[22:12:29] <kalven> ville: stockholm syndrome will set in eventually
[22:12:32] <PJBoy> molested bahahaha
[22:12:41] <ville> LordKalma: https://www.webtoolkit.eu/wt
[22:12:47] <LordKalma> I know about that, yes
[22:12:52] <LordKalma> but you can't beat django's ORM
[22:12:53] <ville> LordKalma: don't have to touch web crap directly
[22:13:21] <LordKalma> django has a better ORM than sqlalchemy
[22:13:41] <TheGuestMovie> there's also something called PostgREST. You create your tables in PG, it exposes them by REST API.
[22:13:45] <rpav> LordKalma: you really need minimal backend framework these days
[22:13:53] <LordKalma> rpav, how so?
[22:13:55] <TheGuestMovie> and it has auth and stuff
[22:14:17] <TheGuestMovie> I would use Django if I was building a real application, but for a quick API, it might be overkill
[22:14:42] <rpav> LordKalma: more or less along the lines of TheGuestMovie... query your backend directly, get json or similar output, and do everything else single-page-app style
[22:14:45] <LordKalma> I know python, but I don't know postgres syntax
[22:14:57] <rpav> you end up writing very little HTML or backend
[22:15:14] <rpav> well it doesn't have to be pgsql .. any of the nosql databases or similar for document store, if you need that
[22:15:40] <rpav> the syntaxes are mostly trivial
[22:15:50] <TheGuestMovie> https://postgrest.org/en/v8.0/tutorials/tut0.html  you dont need to learn SQL, just enough to create your tables. You do everything via HTTP/JSON
[22:16:11] <ville> LordKalma: using postgre doesn't need you to know much of postgre specifics really. any old sql you know will do
[22:16:20] <cbreak> what ever you do: don't try to create naked query strings for databases
[22:16:31] <LordKalma> I really don't know any database code really tbh
[22:16:31] <TheGuestMovie> scroll down to the curl examples
[22:16:37] <cbreak> use prepared statemens or parametrized queries
[22:16:55] <TheGuestMovie> you should learn the basics of SQL. It's one of the few programming-related skills that will always be handy.
[22:17:09] <TheGuestMovie> and I'm the most anti-learning person here
[22:17:21] <ville> LordKalma: i mean sure postgre has bunch of extensions you may choose to use, but to get off the ground you can go with very plain sql
[22:17:23] <LordKalma> DROP TABLE USERS
[22:17:24] <LordKalma> hahah
[22:17:41] <rpav> LordKalma: what kind of data and queries are you dealing with?
[22:17:56] <TheGuestMovie> just learn how to create a table, how to do CRUD (create, read, update, delete), and how to do a basic table join. You're now a successful backend developers.
[22:17:58] <rpav> this should be the #1 question because SQL may be overkill
[22:18:24] <rpav> like if you have fixed data you rarely update, you don't even need a database .. post some .json files
[22:18:33] <rpav> literally
[22:18:42] <rpav> generate a static index of stuff when it does change
[22:19:07] <LordKalma> yeah, no, I have an excel with hundreds of entries that'll need to be sorted, filtered, updated quite often, that sort of stuff
[22:19:13] <rpav> otoh if you need to not only update regularly but do it from the client, you probably want some intermediate service, though there may be fairly drop-in solutions there
[22:19:33] <cbreak> excel?
[22:19:38] <cbreak> why not a database?
[22:19:44] <rpav> well the sort/filter/etc is pretty easy without changing actual data
[22:19:45] <LordKalma> that's how I currently have the data haha
[22:19:48] <LordKalma> but it's bad
[22:19:58] <cbreak> back in the days there was Filemaker
[22:19:58] <rpav> excel is a good first whack at splatting down data
[22:20:05] <cbreak> or what ever microsoft's database is
[22:20:16] <rpav> filemaker is an apple atrocity
[22:20:16] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[22:20:36] <cbreak> it's probably not as bad at being a database as excel
[22:20:36] <rpav> Access is also pretty bad, but i mean it came out of a line of fairly crappy low-end dbs
[22:20:38] <cbreak> which is not a database
[22:20:57] <rpav> depends which gets the job done quickly
[22:21:17] <cbreak> if I'd think I'd need a database from c++, I'd probably look at sqlite first
[22:21:34] <LordKalma> https://i.gyazo.com/d55f523b7bbd72f8db5b7758c68aea71.png
[22:21:37] <LordKalma> something like this :D
[22:21:58] <ville> lpapp: ?
[22:21:58] <rpav> sqlite's kinda the excel of databases heh
[22:22:11] <cbreak> sqlite is embeddable
[22:22:38] <LordKalma> sqlite is nice for local work
[22:22:42] <rpav> LordKalma: ooh, geospatial stuff?
[22:22:49] <LordKalma> not quite
[22:22:52] <LordKalma> it included lat and long
[22:22:59] <cbreak> for spatial data, I think there are special databases
[22:23:03] <LordKalma> but it's not the bit that's important honestly
[22:23:05] <LordKalma> yes, postGIS
[22:23:14] <LordKalma> (which django supports, btw haha)
[22:23:14] <rpav> pgsql does spatial shit yea via postgis
[22:24:07] <rpav> but like unless you need special queries, sqlite might be a good first start
[22:24:33] <LordKalma> yes, I don't any of the fancy handling their 3423 different coordinate systems and stuff
[22:27:33] <ville> facebook is changing its name to "Meta". that'll sort it out
[22:27:37] <LordKalma> *don't need
[22:27:43] <LordKalma> ville, just the company, not the product, afaik
[22:27:55] <TheGuestMovie> ville: they want to become ungooglable?
[22:28:08] <LordKalma> so that like the other producs dont' say "From facebook"
[22:28:20] <LordKalma> from whatsapp to the VR googles
[22:28:29] <LordKalma> goggles* whatever
[22:28:59] <cbreak> so they're pulling an alphabet?
[22:29:04] <LordKalma> basically yes
[22:29:12] <cbreak> they still suck.
[22:29:13] <LordKalma> that's what I understood
[22:29:29] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[22:29:53] <rpav> "everyone hates facebook, but we're not facebook!"
[22:32:56] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[22:36:21] *** Joins: proller (~p@80.240.216.69)
[22:36:23] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Ping timeout: 264 seconds)
[22:41:47] *** Quits: proller (~p@80.240.216.69) (Ping timeout: 264 seconds)
[22:42:10] *** Joins: proller (~p@2a02:6b8:b081:a410::1:18)
[22:42:10] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[22:45:44] *** Joins: X-Scale` (~ARM@50.77.166.178.rev.vodafone.pt)
[22:46:47] *** Quits: X-Scale (~ARM@31.22.203.65) (Ping timeout: 258 seconds)
[22:47:02] *** Quits: TheGuestMovie (~TheGuestM@173.231.114.74) (Quit: Client closed)
[22:47:15] *** Joins: TheGuestMovie (~TheGuestM@173.231.114.74)
[22:47:20] <TheGuestMovie> LordKalma: what about js frontend, what do you intend to use
[22:47:53] <LordKalma> yeah, if I end up writing this the idea is probably a django-rest-framework backend and a React frontend or something
[22:47:54] *** X-Scale` is now known as X-Scale
[22:48:26] <TheGuestMovie> when I looked into web frontends a couple of years ago React was the king, but a few hipsters were swearing by something  called Vue.js
[22:48:43] <TheGuestMovie> (disclaimer: I've never written any frontend code)
[22:48:58] *** Quits: rdrg109 (~rdrg109@51.195.232.80) (Changing host)
[22:48:58] *** Joins: rdrg109 (~rdrg109@user/rdrg109)
[22:49:02] <LordKalma> yeah, React, Angular and Vue are the top 3 iirc
[22:49:06] <TheGuestMovie> there was also hipster hype for Mithril and Elixir but that seems to have died off
[22:49:23] <TheGuestMovie> I'm never using anything by Google and neither should you
[22:49:40] <TheGuestMovie> We used Angular 1 for our project in 2016. Literally within months, Angular 2 comes out which is completely different and nothing reusable.
[22:50:08] <LordKalma> Angular 1 is the Angular.js and Angular 2 is the Angular.io right?
[22:50:09] <TheGuestMovie> literally nothing in common except the name
[22:50:31] <TheGuestMovie> maybe that's the names now, idk. At the time it was just Angular and Angular 2
[22:51:01] <LordKalma> I think it's https://angularjs.org/ vs https://angular.io/
[22:51:03] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[22:51:59] *** Quits: Tokamak (~Tokamak@107.117.203.178) (Ping timeout: 264 seconds)
[22:52:04] <TheGuestMovie> who's still maintaining AngularJS? Surely not Google?
[22:52:09] <LordKalma> idk
[22:52:22] <LordKalma> google has the attention span of a goldfish
[22:53:08] *** Joins: dextercd (~dexter@2a02-a450-f25d-1-76d4-35ff-fefe-34c.fixed6.kpn.net)
[22:54:44] <rpav> i dunno, goldfish just sortof sit there and stare a lot don't they
[22:54:59] <LordKalma> https://twitter.com/killedbygoogle
[22:55:04] <rpav> watching you all day, silently and unobtrusively ... 
[22:55:05] <LordKalma> or https://killedbygoogle.com/
[22:55:14] <rpav> maybe an apt analogy
[22:56:51] <LordKalma> Killing Panoramio annoyed the fuck out of me
[22:56:51] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[22:56:56] <LordKalma> I loved the random google earth pics
[22:57:04] *** Joins: Kebianizao (~Kebianiza@188.127.161.90)
[22:57:08] <LordKalma> but nope, now it's just business/plaaces of interest
[22:57:20] <LordKalma> Also "MyTracks"
[22:57:27] <LordKalma> I liked recording gps stuff with it
[22:57:30] <rpav> i'll be happier when Stadia officially makes the list
[22:57:41] <rpav> it's already got like 3 feet in the grave, but
[22:58:20] <cq-work> Such a weird move that was...
[22:58:31] <LordKalma> which one?
[22:58:38] <cq-work> Stadia
[22:58:47] <cq-work> Like they had to have known that was going to flop the way it was.
[23:00:58] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[23:02:47] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[23:02:54] <TheGuestMovie> LordKalma: nice link, but I wish they hadnt included Google Nexus there. It's fine for hardware products to be discontinued. 99% of them are software though
[23:03:21] <LordKalma> they try to include as much as possible for the meme I guess
[23:03:27] <TheGuestMovie> CTRL+F stadia, no results (YET)
[23:04:20] <rpav> cq-work: i can only imagine there was either "well let's build it and the solution to make it work will present itself" or "EA paid us a lot of money"
[23:08:59] <cbreak> google gave up way too early
[23:09:06] <cbreak> creating a game takes several years
[23:09:27] <cbreak> shuttering their own stadia game studio without even trying to finish a single game was dumb.
[23:09:51] <LordKalma> google doesn't understand a business model that's not data mining
[23:09:51] <cq-work> I mean, there's also been other cloud services that have failed that didn't do much different.
[23:10:11] <cq-work> Only difference here is they slapped the google label on it
[23:10:27] <cq-work> Well... to be fair, that works for grpc and protobuf...
[23:16:09] <rpav> it's not really "not trying hard enough"
[23:16:47] <rpav> the economics just don't appear to be there
[23:16:57] <lpapp> ville: I do not see the definition for template<typename T> auto f(T) -> void;
[23:17:39] <cbreak> rpav: maybe not, but ... that should be known either before starting, or after releasing the first game, not half-way
[23:18:17] <cbreak> I can see a model like nvidia's work
[23:18:26] <lpapp> Alipha: I feel like something like an empty {} would be better to define the template function
[23:18:38] <lpapp> and then the specialisations to have concrete implementations in the source
[23:18:40] <cbreak> where you don't have to buy games, just pay for "remote gaming computers"
[23:18:49] <rpav> cbreak: yeah _that_ seems to add up
[23:18:53] <lpapp> but I am not sure if {} is supposed to help with avoiding unresolved symbols.
[23:18:54] <cbreak> and it's closer to google's cloud server offerings
[23:18:55] <rpav> and it's something absolutely acceptable
[23:18:57] *** Quits: magla (~gelignite@55d48754.access.ecotel.net) (Quit: Stay safe!)
[23:25:58] *** Quits: lionkor (~lionkor@beammp/staff/lionkor) (Quit: quit)
[23:28:51] *** Quits: dld (~dld@192.91.235.243) (Ping timeout: 245 seconds)
[23:34:35] <ville> lpapp: the example has 3 files the "main", a.hxx and a.cxx, the definition for both the member function template and the function template are in a.cxx
[23:35:09] <ville> lpapp: well, the explicit specialization that is. the general template is not defined
[23:35:29] <ville> lpapp: hence if you uncomment lines 7 or 10 would cause a linker error
[23:36:58] <ville> lpapp: this is a rather crude way to limit that the template can only be used with a closed set of types, those for which you've provided a specialization for
[23:40:30] <lpapp> but this is what I am doing already
[23:40:35] <lpapp> and we are getting linker errors on Windows
[23:40:43] <lpapp> also, I see no declspec in your code.
[23:41:32] <lpapp> ville: ^
[23:46:35] *** Quits: ahlk (~user@2600:1700:31c0:3a10::43) (Ping timeout: 264 seconds)
[23:47:24] <cq-work> What errors?
[23:48:36] <ville> lpapp: no idea what declspec has to do with it
[23:50:03] <ville> lpapp: if you're building a dso on windows then yeah you want to export the symbol as windows defaults to private visibility where as linux defaults to public
[23:50:13] <lpapp> yes
[23:50:25] <lpapp> ville: well, then you tell me why unresolved symbols, I cannot.
[23:50:53] <ville> i can't unless i see exact code and everything
[23:51:06] <lpapp> ville: error LNK2019: unresolved external symbol public: __cdecl ndk::Value::Value<class ndk::Vec2<double> >(class ndk::Vec2<double> const &) (??$?0V?$Vec2@N@ndk@@@Value@ndk@@QEAA@AEBV?$Vec2@N@1@@Z) referenced in function public: class ndk::Value __cdecl
[23:51:17] <lpapp> ah, no, I cannot show proprietary code as you know.
[23:51:25] <ville> but a good way to troubleshoot this is with a very minimal setup like i did. not your "big code base"
[23:51:56] <lpapp> unfortunately, it breaks in the big codebase
[23:52:01] <lpapp> so, it has to be addressed there.
[23:52:13] <lpapp> But honestly, that is what we already have, template specialisations in the source file
[23:52:16] <lpapp> for each particular type
[23:52:33] <lpapp> and then the header has one function template declaration without actual definition.
[23:52:34] <cq-work> He's saying making a small reproducible case that represents the larger code base makes it easier to recieve help if not solve the problem in the process of creating such a case.
[23:52:58] <lpapp> ville: your wandbox seems to use g++
[23:53:03] <lpapp> it does not look like it is msvc
[23:53:10] <lpapp> so not sure you are really testing the same thing
[23:53:16] <lpapp> it works fine on Mac with clang, etc.
[23:53:24] <lpapp> I think this is specific to msvc and Windows.
[23:54:19] <ville> lpapp: well there should be nothing magical it being a function template with an explicit specialization. if you're having problems with exporing identifiers from a dso on windows you'll have them with regular functions as well
[23:54:30] *** Joins: X-Scale` (~ARM@46.50.5.8)
[23:55:26] *** Quits: X-Scale (~ARM@50.77.166.178.rev.vodafone.pt) (Ping timeout: 268 seconds)
[23:55:44] <lpapp> not really, other methods do not complain in the class like this.
[23:55:48] <lpapp> only this template function
[23:55:56] *** Joins: Tokamak (~Tokamak@107.117.203.33)
[23:55:58] <lpapp> I still think the issue is that Windows wants to have {} implementation
[23:56:13] <lpapp> it is a common issue on Windows for example when you do not have an explicit default ctor implementation, etc.
[23:56:21] <lpapp> whereas Linux and Mac would not complain.
[23:56:32] <lpapp> I personally think your code would not work on Windows and with msvc
[23:56:32] *** Quits: Kebianizao (~Kebianiza@188.127.161.90) (Read error: Connection reset by peer)
[23:56:38] *** X-Scale` is now known as X-Scale
[23:56:48] <cq-work> You know, that could be proven.
[23:57:49] <ville> lpapp: yes it doesn't if you make a dso out of a.hxx/a.cxx because it does not export the identifiers, but should if you put the __declspec((dllexport)) on there
[23:58:00] *** Joins: Praise (~Fat@user/praise)
[23:58:19] <lpapp> what implementation would it export if you have none?
[23:58:39] <lpapp> you only have specialisation
[23:58:48] <lpapp> what is the non-specialised implementation to export?
