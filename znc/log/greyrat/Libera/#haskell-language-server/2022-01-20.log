[00:30:23] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[01:13:58] *** Joins: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net)
[01:36:45] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[01:36:58] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[02:02:19] *** Quits: fendor (~fendor@77.119.169.94.wireless.dyn.drei.com) (Remote host closed the connection)
[02:02:26] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[02:02:39] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[02:08:47] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[03:31:38] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[03:31:54] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[03:58:24] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[03:58:37] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[04:26:35] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[04:26:48] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[04:46:49] *** Quits: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net) (Ping timeout: 256 seconds)
[04:51:48] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[04:52:02] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[05:19:01] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[05:19:14] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[05:44:43] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[05:44:56] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[06:11:25] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[06:11:39] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[06:43:38] *** bgamari_ is now known as bgamari
[07:02:38] *** Joins: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net)
[07:49:37] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[07:49:51] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[08:15:20] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Remote host closed the connection)
[08:15:42] *** Joins: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b)
[09:51:57] *** Quits: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net) (Ping timeout: 240 seconds)
[10:19:17] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[10:41:43] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[10:42:04] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[11:11:27] *** Joins: fendor (~fendor@77.119.169.94.wireless.dyn.drei.com)
[11:47:57] *** Quits: shapr (~user@2601:7c0:c37c:46d0:d31:791c:8c24:e54b) (Ping timeout: 240 seconds)
[12:32:42] <fendor[m]> HLS crashes after typing, but no exception is printed to stderr. Do we have some form of logging when a thread dies unexpectedly?
[12:45:47] *** Joins: arrowd (~arr@2.94.236.140)
[12:51:24] <michaelpj[m]> jneira: can you approve https://github.com/haskell/lsp/pull/393? apparanetly I can't approve my own PRs any more :D
[12:52:16] <jneira[m]> done!
[12:55:04] <michaelpj[m]> ty
[13:34:13] <michaelpj[m]> jneira: a couple of the windows builds just seem to not start? https://github.com/haskell/lsp/runs/4879901613?check_suite_focus=true
[13:34:19] <michaelpj[m]> same happened the previous time
[13:34:24] <michaelpj[m]> weirdly it's only some of the windows builds?
[13:34:30] <michaelpj[m]> ugh
[13:35:45] <michaelpj[m]> can you just admin-merge that PR or something?
[13:36:26] <jneira[m]> hmm windows builds are still running: https://github.com/haskell/lsp/runs/4879901613?check_suite_focus=true
[13:36:43] <jneira[m]> but they ar stuck?
[13:37:05] <jneira[m]> gonna restart it just in case
[13:37:57] <jneira[m]> oh you already tried it it seems
[13:39:19] <jneira[m]> but htere are succesful runs after the ones from that pr (f.e. https://github.com/haskell/lsp/actions/runs/1720525393)
[13:39:43] <jneira[m]> that one is from bodigrim's pr
[13:40:14] <jneira[m]> jneira[m]: no there were cancelled by timeout
[13:41:23] <michaelpj[m]> yeah, because they just sat at that step and never did anything
[13:41:28] <michaelpj[m]> like they're doing now
[13:41:41] <michaelpj[m]> they don't even start producing build logs
[13:41:44] <jneira[m]> after cancelling it we can see the logs
[13:41:54] <jneira[m]> but no useful info :-(
[13:42:11] <jneira[m]> [52 of 52] Compiling Language.LSP.VFS ( src\Language\LSP\VFS.hs, D:\a\lsp\lsp\dist-newstyle\build\x86_64-windows\ghc-9.0.1\lsp-types-1.4.0.1\build\Language\LSP\VFS.o )
[13:42:11] <jneira[m]> Error: The operation was canceled.
[13:42:15] <michaelpj[m]> oh, you're right
[13:42:23] <michaelpj[m]> so it did theoretically make progress
[13:42:23] <jneira[m]> it reach the last module and then hangs
[13:42:25] <michaelpj[m]> it just stopped for some reason
[13:42:38] <jneira[m]> s/reach/reaches/
[13:42:45] <jneira[m]> ðŸ¤” 
[13:42:57] <jneira[m]> the pr looks totally innocent tbh
[13:43:09] <michaelpj[m]> the PR is clearly innocent
[13:43:16] <jneira[m]> he
[13:43:22] <michaelpj[m]> I think it's just the windows runners being stupid for some reaons
[13:43:24] <michaelpj[m]> bah
[13:43:38] <michaelpj[m]> well, we can see if it works this time
[13:43:38] <jneira[m]> well you can bypass the master protection rules
[13:44:28] <michaelpj[m]> you can, I'm not an admin ;)
[13:44:30] * jneira[m] uploaded an image: (87KiB) < https://libera.ems.host/_matrix/media/r0/download/matrix.org/CuxyWRywYOKfRhSYQfcdAazO/imagen.png >
[13:44:45] <jneira[m]> uncheck `include administrators` and voila
[13:45:00] <michaelpj[m]> oh
[13:45:01] <michaelpj[m]> right
[13:45:09] <jneira[m]> (please check it again after forcing the merge :-) )
[13:45:40] <michaelpj[m]> I am generally pro letting administrators force merge, but I do wish the Ci wasn't flaky regardless :)
[13:46:11] <jneira[m]> yeah but it allows do all the things, including force pushes to master, etc
[13:46:28] <jneira[m]> i wish it would be more fine grained
[13:46:38] <michaelpj[m]> yeah, fair
[13:46:45] <michaelpj[m]> anyway, let's see if this run completes okay
[13:46:51] <jneira[m]> yeah
[13:46:59] <jneira[m]> it is really weird
[13:47:43] <jneira[m]> have you got the chance to take a look to the integer-simple thing?
[13:47:49] <jneira[m]> mod package has no flag to switch the integer impl
[13:48:13] <jneira[m]> hope it would be possible
[13:48:19] <jneira[m]> s/would/will/
[13:48:26] <jneira[m]> without too much changes in the package
[13:48:45] <michaelpj[m]> we might need bodigrim to modify it :(
[13:48:53] <michaelpj[m]> it's annoying being forced to use integer-simple...
[13:49:01] <jneira[m]> it is indeed
[13:49:16] <michaelpj[m]> I guess that's new because of the alpine thing
[13:49:28] <jneira[m]> but get a ghc with integer-gmp will be harder i guess
[13:49:29] <michaelpj[m]> we should enforce that in the main workflows so we notice it earlier
[13:49:35] <jneira[m]> (a ghc for alpine linux)
[13:49:57] <jneira[m]> yeah, i proposed change the test workflow to be consistent with the build one
[13:50:18] <jneira[m]> but it seemed too cautious at the time :-P 
[13:50:43] <jneira[m]> inconsistency bites you sooner or later
[13:50:47] <michaelpj[m]> yeah
[13:50:50] <michaelpj[m]> gtg, will think about it later
[13:51:33] <jneira[m]> well several packages allows you choose the integer impl
[13:51:48] <jneira[m]> i guess alpine is not the unique env where it is needed or handy
[13:53:41] *** Quits: arrowd (~arr@2.94.236.140) ()
[14:44:01] <jneira[m]> michaelpj: the build on master after merging looks better: https://github.com/haskell/lsp/runs/4881163916?check_suite_focus=true ðŸ¤ž
[14:44:40] <michaelpj[m]> maybe, it was the only the 9.0.1 and the 8.8.4 ones where it happened last time? let's see
[14:44:42] <michaelpj[m]> sigh
[14:44:53] <michaelpj[m]> published the new version anyway
[14:45:21] <jneira[m]> yeah
[14:46:45] <jneira[m]> removing head.hackage was easier than i expected
[14:47:29] <michaelpj[m]> hooray
[14:47:29] <jneira[m]> too easier
[14:47:33] <jneira[m]> :-P 
[14:48:08] <jneira[m]> but if stack is able to build it without it i guess all needed changes has been downstreamed
[14:48:21] <michaelpj[m]> it's not that surprising, we'd expect the fixes to make it to Hackage eventually
[14:48:47] <jneira[m]> i expected it would take more time ðŸ¤·
[14:49:20] <jneira[m]> s/downstreamed/upstreamed/
[14:49:47] <jneira[m]> so... time to tackle the release i guess
[14:54:28] <michaelpj[m]> dunno how we're going to deal with the integer-simple issue though, tbh
[14:54:41] <michaelpj[m]> I guess the alpine->integer-simple dependency is unbreakable?
[14:57:40] <michaelpj[m]> I made https://github.com/Bodigrim/mod/issues/13 anyway
[14:58:43] <jneira[m]> michaelpj[m]: no no there are other ghc versions for alpine with integer-gmp but 8.10 series did not have it, not sure why (maybe maerwald knows)
[14:59:23] <maerwald> I used to build alpine dists myself, which all use integer-gmp, but the official ones didn't
[15:00:16] <maerwald> and the latest official ones also use integer-gmp
[15:00:38] <maerwald> https://downloads.haskell.org/~ghcup/unofficial-bindists/ghc/8.8.4/ghc-8.8.4-x86_64-alpine-linux.tar.xz
[15:01:14] <jneira[m]> hmm but we dont have unofficial ones for 8.10?
[15:01:25] <maerwald> I don't mind building 8.10.7 again
[15:01:29] <michaelpj[m]> so I think this is the offending line: https://github.com/haskell/haskell-language-server/blob/3f4685141c86ea960efdd240147937c2b6f7f9e7/.github/workflows/build.yml#L14
[15:01:42] <michaelpj[m]> can we just change that to a newer one and get one with integer-gmp?
[15:02:21] <maerwald> 9.0.2 upwards have official integer-gmp, everything below that not
[15:02:32] <maerwald> so would need to build 8.10.6, 8.10.7 and 9.0.1 again
[15:03:28] <maerwald> I'd suggest dropping 8.10.6 and 9.0.1
[15:03:58] <michaelpj[m]> that's against our deprecation policy :)
[15:04:24] <maerwald> right, but policy isn't law
[15:04:32] <maerwald> it's ok to break it from time to time
[15:05:00] <maerwald> my GHC builds take 30minutes I think, so 3 builds are 1.5 hours
[15:06:30] <michaelpj[m]> sure, but dropping versions has real costs for our users. we got quite a lot of flak last time we dropped GHC versions! But maybe the stuff that got written last time to support downloading old versions of HLS would save us...
[15:07:03] <michaelpj[m]> teaching `mod` to build with `integer-simple` might just be the path of least resistance
[15:07:52] <maerwald> Well, I certainly agree that ghcup mixing integer-simple and integer-gmp is awful
[15:26:18] <jneira[m]> when stackage reach 9.0.2 we will deprecate 8.10.6, i hope it will be soon
[15:26:54] <jneira[m]> 9.0.1 when next 9.0.x will be released
[15:35:09] <maerwald> not sure there will be another 9.0.x
[15:35:18] <maerwald> but since 9.0.1 is unsound it should be deprecated earlier
[15:35:58] <jneira[m]> ya, wil spend some time in find a bug in 9.0.2 in windows to force 9.0.3 :-D 
[15:36:38] <jneira[m]> well 9.0.2 support for mac m1 is not perfect, no?
[15:36:58] <jneira[m]> i've heard the llvm backend is not always working
[16:23:02] <maerwald> there are linker errors yeah
[16:23:17] <maerwald> https://gitlab.haskell.org/haskell/ghcup-hs/-/issues/301
[16:40:37] *** Joins: fendor_ (~fendor@178.165.192.6.wireless.dyn.drei.com)
[16:43:16] *** Quits: fendor (~fendor@77.119.169.94.wireless.dyn.drei.com) (Ping timeout: 256 seconds)
[16:56:49] <maerwald> https://github.com/haskell/ghcup-metadata/issues/14
[18:51:36] *** Joins: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net)
[19:05:20] <maerwald> jneira[m]: https://github.com/haskell/ghcup-metadata/pull/15
[19:09:33] <maerwald> I can imagine this might however break CIs
[19:10:06] <maerwald> life is not perfect I guess
[19:13:17] *** Quits: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net) (Ping timeout: 240 seconds)
[19:42:48] <maerwald> pushed
[19:47:51] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Quit: coot)
[19:48:44] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[19:52:57] *** Quits: coot (~coot@89-64-85-93.dynamic.chello.pl) (Ping timeout: 240 seconds)
[20:18:51] *** Joins: myShoggoth (~myShoggot@97-120-67-120.ptld.qwest.net)
[20:32:16] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[20:52:58] *** Quits: fendor_ (~fendor@178.165.192.6.wireless.dyn.drei.com) (Ping timeout: 250 seconds)
[20:54:30] <jneira[m]> nice, thanks, will give a try asap
[21:05:47] *** Joins: coot (~coot@89-64-85-93.dynamic.chello.pl)
[21:42:44] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[21:42:58] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[22:08:26] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[22:08:40] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[22:34:39] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[22:35:03] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[23:01:31] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[23:01:44] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[23:27:02] *** Joins: fendor (~fendor@178.165.192.6.wireless.dyn.drei.com)
[23:28:42] *** Quits: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881) (Remote host closed the connection)
[23:28:55] *** Joins: shapr (~user@2601:7c0:c37c:46d0:2da1:8e76:2324:a881)
[23:35:14] *** Quits: juhp (~juhp@128.106.188.82) (Ping timeout: 256 seconds)
[23:36:25] *** Quits: fendor (~fendor@178.165.192.6.wireless.dyn.drei.com) (Remote host closed the connection)
[23:37:19] *** Joins: juhp (~juhp@128.106.188.82)
