[00:06:00] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 250 seconds)
[00:06:18] *** Quits: DefiantN (~DefiantN@user/defiantn) (Remote host closed the connection)
[00:07:10] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[00:07:43] *** Joins: rpthms (~rpthms@user/rpthms)
[00:17:08] *** Joins: pvdp (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au)
[00:24:59] *** Joins: DefiantN (~DefiantN@user/defiantn)
[00:27:17] *** Joins: liefer (~liefer@user/liefer)
[00:32:56] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 256 seconds)
[00:33:25] *** Joins: Enitin (~Enitin@82.102.22.85)
[00:33:52] *** Joins: farmstatejake (~farmstate@user/farmstatejake)
[00:39:28] *** Quits: weedmic (~weedmic@89-139-109-7.bb.netvision.net.il) (Quit: Konversation terminated!)
[00:45:08] *** Quits: Haxxa (~Haxxa@122.199.45.213) (Quit: Haxxa flies away.)
[00:49:07] *** Joins: Haxxa (~Haxxa@122.199.45.213)
[00:49:29] *** Joins: ksynwa (~ksynwa@5.45.111.57)
[00:51:34] <ksynwa> Is there a mode where a docker container can only write to mounted volumes and nothing else? Someone told me there is but I can't find anything about it. The motivation here is to make sure that any data that the container writes is stored in volumes so that it can be backed up easily.
[00:57:22] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 252 seconds)
[00:58:19] *** Joins: Enitin (~Enitin@82.102.22.84)
[00:59:40] *** Quits: farmstatejake (~farmstate@user/farmstatejake) (Ping timeout: 240 seconds)
[01:04:17] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[01:04:38] *** Joins: flynn (~mcbloch@user/flynn)
[01:04:48] *** Quits: ada_ (uid242135@user/ada/x-9065485) (Quit: Connection closed for inactivity)
[01:18:49] <geirha> don't know about making it read-only, but you can at least tell if the container has written anything to a non-volume with   docker diff
[01:33:28] *** Quits: jmartin (~jmartin@user/jmartin) (Remote host closed the connection)
[01:33:52] *** Joins: jmartin (~jmartin@user/jmartin)
[01:43:31] *** Quits: andypandy (~andypandy@h-178-174-148-234.a163.priv.bahnhof.se) (Ping timeout: 252 seconds)
[01:54:37] *** Joins: lilgopher (~textual@c-73-51-174-246.hsd1.il.comcast.net)
[02:02:16] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[02:02:55] *** Joins: Enitin (~Enitin@82.102.22.85)
[02:15:28] *** Quits: Ivii (~Ivyy@2001:a61:13eb:f801:e004:51a6:2a21:ea07) (Quit: Leaving)
[02:15:41] *** Joins: Ivii (~Ivyy@2001:a61:13eb:f801:e004:51a6:2a21:ea07)
[02:26:26] *** Joins: Stanley (~stanley@d162-156-50-3.bchsia.telus.net)
[02:26:43] <Stanley> Hey all. I just installed docker on Ubuntu and now when I try to start an instance it says "Docker is not running"
[02:27:06] <Stanley> (not a big linux user, setting this up in a VM on my server because it wasn't running great on my macbook)
[02:27:19] <Stanley> I don't see anything in the docs though about "starting" docker so I'm not sure
[02:34:12] <Stanley> figured it out
[02:34:42] *** Quits: metah4ck3r (~meta@user/metah4ck3r) (Ping timeout: 245 seconds)
[02:34:43] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 252 seconds)
[02:34:51] <Stanley> the error wasn't coming from docker directly it was coming from Laravel Sail which runs it's own scripts and wasn't appending the docker command with sudo so I followed the instructions in the docs and added my user to the docker group and voila
[02:37:28] *** Quits: theoceaniscool (~theoceani@119.12.232.133) (Ping timeout: 252 seconds)
[02:37:47] <BtbN> Keep in mind that doing that effectively makes your user root
[02:37:50] <BtbN> so be careful
[02:43:29] <Stanley> kk thanks
[02:44:15] <Stanley> Lots to figure out here, I've gone from a super simple dev environment to one that's more complicated BUT more reliable (nothing worse than going to work on an old project that uses different PHP versions and having to mess around to get it working)
[02:44:58] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[02:58:17] *** Quits: syntaxman (~wade@li227-215.members.linode.com) (Quit: Lost terminal)
[03:02:21] *** Quits: kyshoc (~kyshoc@user/kyshoc) (Quit: ZNC 1.8.2 - https://znc.in)
[03:02:53] *** Joins: kyshoc (~kyshoc@user/kyshoc)
[03:07:47] *** Joins: syntaxman (~wade@li227-215.members.linode.com)
[03:11:51] <Stanley> if I change my dockerfile or docker-compose, how do I rebuild it all from scratch? do I have to manually remove the containers and volumes?
[03:20:47] <jmartin> docker-compose up -d --build
[03:21:36] <jmartin> to clean absolutely everything: docker-compose down; docker system prune -a -f; docker-compose up -d
[03:22:02] <jmartin> you will need to remove all the files outside of the containers too
[03:36:32] *** Quits: jmartin (~jmartin@user/jmartin) (Remote host closed the connection)
[03:36:56] *** Joins: jmartin (~jmartin@user/jmartin)
[03:39:35] *** Quits: jmartin (~jmartin@user/jmartin) (Remote host closed the connection)
[03:53:02] *** Joins: doran (~doran@user/doran)
[03:53:12] *** Joins: lalitmee_ (~lalitmee@180.94.33.132)
[03:59:57] *** Quits: flynn (~mcbloch@user/flynn) (Remote host closed the connection)
[04:00:20] *** Joins: flynn (~mcbloch@user/flynn)
[04:05:44] *** Quits: doran (~doran@user/doran) (Quit: Client closed)
[04:06:27] *** Quits: Ivii (~Ivyy@2001:a61:13eb:f801:e004:51a6:2a21:ea07) (Remote host closed the connection)
[04:25:31] *** Joins: LiENUS (~quake@108-242-135-2.lightspeed.btrgla.sbcglobal.net)
[04:34:18] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[04:35:10] *** Quits: DefiantN (~DefiantN@user/defiantn) (Ping timeout: 252 seconds)
[04:40:49] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[04:43:35] *** Joins: DefiantN (~DefiantN@user/defiantn)
[04:49:10] *** Quits: DefiantN (~DefiantN@user/defiantn) (Ping timeout: 240 seconds)
[04:52:24] *** Joins: DefiantN (~DefiantN@user/defiantn)
[05:00:28] *** Quits: DefiantN (~DefiantN@user/defiantn) (Ping timeout: 252 seconds)
[05:02:56] *** Joins: DefiantN (~DefiantN@user/defiantn)
[05:12:34] *** Quits: DefiantN (~DefiantN@user/defiantn) (Ping timeout: 252 seconds)
[05:30:19] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:56:29] *** Joins: junktext (~junktext@77.247.181.219)
[06:20:13] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[06:21:00] *** Joins: keypusher (keypusher@user/keypusher)
[06:42:15] *** Joins: lalitmee__ (~lalitmee@180.94.33.77)
[06:44:40] *** Quits: lalitmee_ (~lalitmee@180.94.33.132) (Ping timeout: 240 seconds)
[06:53:48] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[06:57:15] *** Joins: keypusher (keypusher@user/keypusher)
[07:03:39] *** Joins: oxum (~oxum@106.203.195.217)
[07:04:37] *** Quits: oxum (~oxum@106.203.195.217) (Remote host closed the connection)
[07:31:12] *** Joins: Zelec (~Zelec@user/zelec)
[07:34:56] *** Quits: Shaun (~shaun@user/shaun) (Ping timeout: 250 seconds)
[07:37:11] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[07:37:27] *** Joins: mickey (~user@user/mickey)
[07:41:28] <pstn> I have a container with 3 volumes that map locations inside the container to directories outside on the host machine.
[07:42:22] <pstn> All 3 locations in the container have data and 2 of the volumes work as expected - the data is accessible both inside and outside of the container...
[07:43:10] *** Quits: Zelec (~Zelec@user/zelec) (Ping timeout: 240 seconds)
[07:43:35] <pstn> The 3rd is the issue - when I comment out the mapping and rebuild the container, the data is there when I am exec'd into the container.  But if I re-enable the mapping and restart the container, the data is gone...
[07:44:46] <pstn> I dug around and it seems that in some cases, the mapping will essentially overlay any existing data that was already there - very much like mounting a volume in xNIX.  But then why do 2 of the volume mappings not behave that way?
[07:55:22] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[07:58:15] *** Joins: keypusher (keypusher@user/keypusher)
[08:00:22] *** Joins: minimal (~minimal@user/minimal)
[08:01:10] *** Joins: Zelec (~Zelec@user/zelec)
[08:03:26] *** Joins: Shaun (~shaun@user/shaun)
[08:21:29] *** Quits: Brainium (~brainium@user/brainium) (Quit: Konversation terminated!)
[08:27:17] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[08:28:31] *** Quits: gschanuel9 (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[08:28:47] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[08:59:02] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[09:17:59] *** Quits: beencubed (~beencubed@209.131.238.248) (Quit: Leaving)
[09:22:07] *** Joins: beencubed (~beencubed@209.131.238.248)
[09:26:51] <ksynwa> geirha: Thanks
[09:27:05] *** Quits: winstonsmith (~winstonsm@109.201.152.164) (Remote host closed the connection)
[09:27:52] *** Joins: winstonsmith (~winstonsm@109.201.152.176)
[09:29:15] *** Joins: dasbootmir (~dasbootmi@user/dasbootmir)
[09:31:12] *** Joins: Enitin (~Enitin@82.102.22.86)
[09:39:43] *** Quits: Zelec (~Zelec@user/zelec) (Quit: The Lounge - https://thelounge.chat)
[09:43:56] *** Joins: Zelec (~Zelec@user/zelec)
[09:59:43] *** Quits: lalitmee__ (~lalitmee@180.94.33.77) (Remote host closed the connection)
[10:00:21] *** Joins: lalitmee__ (~lalitmee@180.94.33.77)
[10:05:31] *** Joins: TheBigK (~quassel@user/thebigk)
[10:09:12] *** Quits: lalitmee__ (~lalitmee@180.94.33.77) (Remote host closed the connection)
[10:10:37] *** Joins: lalitmee (~lalitmee@180.94.33.77)
[10:11:41] *** Joins: djapo (~archangel@user/djapo)
[10:17:44] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 256 seconds)
[10:18:12] *** Joins: Enitin (~Enitin@82.102.22.84)
[10:22:50] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[10:23:41] *** Joins: Enitin (~Enitin@82.102.22.86)
[10:28:42] *** Joins: AnapodoPsalidaki (~AnapodoPs@2a02:587:292a:1375:da97:8970:47e1:5542)
[10:30:10] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 240 seconds)
[10:30:53] *** Joins: Enitin (~Enitin@82.102.22.86)
[10:32:38] *** Joins: TomTom (uid45892@id-45892.ilkley.irccloud.com)
[10:41:09] *** Quits: Mark_Pinecone (~Mark_Pine@gateway/tor-sasl/markpinecone/x-88286818) (Ping timeout: 276 seconds)
[10:47:42] *** Quits: dasbootmir (~dasbootmi@user/dasbootmir) (Quit: dasbootmir)
[11:00:06] *** Joins: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl)
[11:00:09] *** Quits: syntaxman (~wade@li227-215.members.linode.com) (Quit: leaving)
[11:04:40] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Ping timeout: 250 seconds)
[11:06:26] *** Joins: syntaxman (~wade@li227-215.members.linode.com)
[11:11:10] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 240 seconds)
[11:11:59] *** Joins: Enitin (~Enitin@82.102.22.84)
[11:15:04] *** Joins: oxum (~oxum@106.203.195.217)
[11:18:57] *** Quits: oxum (~oxum@106.203.195.217) (Remote host closed the connection)
[11:30:37] *** Joins: TomyWork (~TomyLobo@p200300e80f06af009d43cfc9b65d1797.dip0.t-ipconnect.de)
[11:32:57] *** Quits: notsponsible (~notsponsi@45.144.113.89) (Quit: notsponsible)
[11:33:49] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Quit: My computer has gone to sleep.)
[11:43:04] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[11:43:24] *** Joins: Enitin (~Enitin@82.102.22.85)
[11:44:43] *** Joins: manin (~X@185.242.190.95)
[11:48:54] *** Joins: oxum (~oxum@106.203.195.217)
[11:49:12] *** Parts: Stanley (~stanley@d162-156-50-3.bchsia.telus.net) (Textual IRC Client: www.textualapp.com)
[11:49:47] *** Joins: notsponsible (~notsponsi@45.144.113.89)
[11:53:35] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[11:54:04] *** Quits: oxum (~oxum@106.203.195.217) (Ping timeout: 252 seconds)
[11:58:39] *** Joins: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se)
[12:01:41] *** Joins: lalitmee_ (~lalitmee@180.94.33.183)
[12:04:02] *** Quits: lalitmee (~lalitmee@180.94.33.77) (Ping timeout: 252 seconds)
[12:07:20] *** Quits: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se) (Ping timeout: 252 seconds)
[12:07:49] *** Quits: liefer (~liefer@user/liefer) (Ping timeout: 252 seconds)
[12:07:57] *** Joins: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se)
[12:12:16] *** Quits: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se) (Ping timeout: 250 seconds)
[12:15:14] *** Joins: liefer (~liefer@user/liefer)
[12:24:33] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Read error: Connection reset by peer)
[12:25:58] *** Quits: manin (~X@185.242.190.95) (Ping timeout: 252 seconds)
[12:32:42] *** Joins: Mark_Pinecone (~Mark_Pine@84.237.231.8)
[12:37:18] *** Joins: Proxysna (~Proxysna@185.251.89.199)
[12:39:24] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 256 seconds)
[12:40:28] *** Joins: Proxysna_ (~Proxysna@62.119.254.142)
[12:43:02] *** Quits: Proxysna (~Proxysna@185.251.89.199) (Ping timeout: 245 seconds)
[12:45:13] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 252 seconds)
[12:46:01] *** Joins: Enitin (~Enitin@82.102.22.84)
[12:46:52] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[12:47:08] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[12:47:34] *** Joins: flynn (~mcbloch@user/flynn)
[12:52:35] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[13:03:46] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 256 seconds)
[13:04:01] *** Joins: Enitin (~Enitin@82.102.22.85)
[13:04:51] <Mark_Pinecone> Can any1 explain what comunication happens between container and host. Kernel;  Network anything else? 
[13:04:53] *** Joins: keypusher (keypusher@user/keypusher)
[13:05:22] <Mark_Pinecone> Forgot persistent volumes
[13:05:53] <Mark_Pinecone> Trying to figure docker out .. in depth
[13:06:03] *** Joins: onizu (uid373383@id-373383.highgate.irccloud.com)
[13:09:55] *** Joins: goldfish (~goldfish@user/goldfish)
[13:13:47] *** Joins: zer0bitz_ (~zer0bitz@dsl-hkibng31-58c384-213.dhcp.inet.fi)
[13:16:50] *** Quits: zer0bitz (~zer0bitz@dsl-hkibng31-58c384-213.dhcp.inet.fi) (Ping timeout: 250 seconds)
[13:30:54] <bailsman> Mark_Pinecone: I wonder if most of us know Docker in such detail. I'm just a user myself, for example.
[13:31:21] <bailsman> Mark_Pinecone: I wonder if you're interested in that level of detail, if it would be helpful to study the source? Or can you be a bit more specific in what you want to know?
[13:33:26] <bailsman> I think most of docker is built in namespacing infrastructure provided by the Linux kernel - they're just "ordinary" processes, but with separate namespaces for example for process identifiers etc. They communicate with the kernel as other processes would - with syscalls.
[13:34:10] *** Quits: goldfish (~goldfish@user/goldfish) (Read error: Connection reset by peer)
[13:34:29] *** Joins: goldfish (~goldfish@user/goldfish)
[13:34:57] <Proxysna_>  there is a really good article explaining networking in quite a lot of detail : https://iximiuz.com/en/posts/container-networking-is-simple/
[13:35:17] <Mark_Pinecone> Company to which I work for is planning to start using docker instead VM and I'm as docker user for private project want to understand docker more than regular user before looking into kubernetes etc.
[13:35:24] <bailsman> In terms of networking, I think there are a few options - for example a bridging interface (like a virtual switch, that both host OS and container are plugged into)
[13:35:46] <Mark_Pinecone> bailsman yeah I already researched how namespacing and cgroups work
[13:36:06] <bailsman> It's likely you know more than me then! And maybe more than most people in the channel.
[13:36:38] <Mark_Pinecone> overlay FS is interesting topik too :D
[13:38:12] *** Joins: lalitmee__ (~lalitmee@180.94.32.179)
[13:40:36] *** Quits: lalitmee_ (~lalitmee@180.94.33.183) (Ping timeout: 256 seconds)
[13:40:43] <Mark_Pinecone> I have one more question for regular users :)  How you manage FW on host os. I tried wrote iptables rules myself but it seemed messy
[13:40:57] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 245 seconds)
[13:43:02] <Mark_Pinecone> And to make those rules persistent scares me 
[13:43:35] <Proxysna_> UFW or firehol works great. 
[13:44:00] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 256 seconds)
[13:44:06] <Mark_Pinecone> So u meant I should use UFW on top of iptables
[13:44:35] <Mark_Pinecone> or run docker daemon without iptables
[13:44:37] *** Joins: Ivii (~Ivyy@2001:a61:13eb:f801:c96f:e059:653f:9d68)
[13:44:40] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 240 seconds)
[13:44:52] <Proxysna_> These are both wrappers around iptables.
[13:44:57] *** Joins: Enitin (~Enitin@82.102.22.84)
[13:45:45] <Mark_Pinecone> Ah I see :)  I noticed this with firewalld too
[13:46:28] <Mark_Pinecone> Thx m8 
[13:48:22] *** Joins: goldfish (~goldfish@user/goldfish)
[13:52:37] *** Joins: thc202 (~thc202@user/thc202)
[14:00:26] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 256 seconds)
[14:00:51] *** Joins: goldfish (~goldfish@user/goldfish)
[14:12:25] *** Joins: NGen15 (~NGen15@ns397065.ip-178-32-220.eu)
[14:13:17] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[14:17:58] *** Quits: Mark_Pinecone (~Mark_Pine@84.237.231.8) (Quit: Client closed)
[14:21:07] *** Joins: Enitin (~Enitin@82.102.22.84)
[14:29:46] *** Joins: Mark_Pinecone (~Mark_Pine@84.237.231.8)
[14:35:39] *** Joins: BenjiProd (~BenjiProd@user/benjiprod)
[14:35:42] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 250 seconds)
[14:50:10] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 240 seconds)
[14:55:10] *** Joins: Enitin (~Enitin@82.102.22.84)
[15:01:38] *** Quits: Alina-malina (~Alina-mal@user/alina-malina) (Ping timeout: 256 seconds)
[15:01:41] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[15:08:18] *** Joins: hbjy (~hbjy@rockylinux/web/hbjy)
[15:13:29] *** Joins: Alina-malina (~Alina-mal@user/alina-malina)
[15:13:30] *** Joins: Enitin (~Enitin@82.102.22.86)
[15:23:20] *** Joins: molt (~molt@178-223-40-94.dynamic.isp.telekom.rs)
[15:29:58] *** Joins: fdan (~fdan@103.215.168.1)
[15:34:34] *** Quits: liefer (~liefer@user/liefer) (Ping timeout: 240 seconds)
[15:35:53] *** Joins: liefer (~liefer@user/liefer)
[15:36:47] *** Quits: fdan (~fdan@103.215.168.1) (Quit: Client closed)
[15:37:47] *** Quits: Mark_Pinecone (~Mark_Pine@84.237.231.8) (Quit: Client closed)
[15:46:41] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[15:47:03] *** Joins: flynn (~mcbloch@user/flynn)
[16:01:08] *** Quits: junktext (~junktext@77.247.181.219) (Ping timeout: 256 seconds)
[16:01:41] *** Joins: lalitmee_ (~lalitmee@180.94.32.164)
[16:04:19] *** Quits: lalitmee__ (~lalitmee@180.94.32.179) (Ping timeout: 252 seconds)
[16:21:01] *** Joins: Atque (~Atque@user/atque)
[16:22:34] *** Quits: Enitin (~Enitin@82.102.22.86) (Remote host closed the connection)
[16:23:19] *** Joins: Enitin (~Enitin@82.102.22.86)
[16:27:29] <luva> I have a question regarding firewall and port forwarding in docker. I seem to not understand one thing: In my knowledge, docker containers are shut off from all the things of the host systems. The only to speak to them is to make ports available to the host. That I can do by mapping an external port of the host to the containers exposed port. In
[16:27:29] <luva> doing so, I make the internal containers port available to the host so that I can now access the container from the host system. So now, with this, I should be able to connect via localhost:<externalport>.. and if I have no firewall setup also via Docker-Host-IP:externalport.Alright. To secure the host system from public access, I set up a iptables
[16:27:29] <luva> rule to block all incoming traffic except for the external port of the container..., but apparently this isnt needed, even without such a rule, the container is publicly accessible. How can I make it so that its only accessible to the host system and not to the public?
[16:28:22] *** Quits: liefer (~liefer@user/liefer) (Ping timeout: 250 seconds)
[16:29:48] *** Joins: liefer (~liefer@user/liefer)
[16:31:05] *** Quits: dreamer (~dreamer@user/dreamer) (Ping timeout: 248 seconds)
[16:31:32] *** Joins: Repox (~Repox@31.3.78.226)
[16:31:38] <Repox> Hello. Looking at https://docs.docker.com/develop/develop-images/multistage-build/#use-an-external-image-as-a-stage I was wondering if it would be possible to split multistage builds into multiple dockerfiles without running multiple build commands? As in, would it be possible to reference a local Dockerfile and target in FROM?
[16:32:22] <tabakhase> Repox no :/
[16:32:58] <Repox> tabakhase That was a simple and easily understable answer. Thank you, though.
[16:32:59] <tabakhase> (especially "no" cause your "local dockerfile" may be far away from your docker-daemon youre talking to)
[16:33:18] <Repox> That makes sense.
[16:36:40] <tabakhase> luva iptables&docker is a little complicated, as its forwarding, not input chains that matter - and docker injects its own stuff where to mangle with that you need to target specifically the DOCKER-USER chain or such ---- the much simpler, for "to you only" is to just setup the port-forwarding to be limited from the start, "-p 80:80" becomes "0.0.0.0:80:80" whats 'all ips your host has' - for 
[16:36:41] <tabakhase> localish things/dev one may use "127.0.0.1:80:80"
[16:37:08] *** Joins: dreamer (~dreamer@user/dreamer)
[16:38:18] *** Quits: kenoba (~kenoba@user/kenoba) (Quit: The Lounge - https://thelounge.chat)
[16:38:20] <luva> Okay, so thats why... So this is the best practice for security in docker containers?
[16:38:45] *** Joins: kenoba (~kenoba@user/kenoba)
[16:43:22] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 252 seconds)
[16:44:34] *** Joins: Enitin (~Enitin@82.102.22.85)
[16:52:14] *** Quits: shutnoshut (~shutnoshu@ec2-52-29-68-122.eu-central-1.compute.amazonaws.com) (Ping timeout: 252 seconds)
[16:53:57] *** Joins: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch)
[16:57:12] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[17:01:22] *** Joins: inviz (~user@user/inviz)
[17:01:24] *** Joins: goldfish (~goldfish@user/goldfish)
[17:01:35] <inviz> hi all, where can I find the configuration that docker-compose created?
[17:02:23] <inviz> I have trouble with some containers, they keep starting after host restart, and I cannot stop them. Maybe I can disable this somewhere on the host?
[17:03:53] *** Joins: shutnoshut (~shutnoshu@ec2-52-29-68-122.eu-central-1.compute.amazonaws.com)
[17:07:55] <inviz> that's ok I solved it.
[17:18:09] *** Joins: thiras (~thiras@user/thiras)
[17:18:42] *** Joins: lalitmee__ (~lalitmee@180.94.33.161)
[17:21:10] *** Quits: lalitmee_ (~lalitmee@180.94.32.164) (Ping timeout: 240 seconds)
[17:21:30] *** Quits: thc202 (~thc202@user/thc202) (Quit: thc202)
[17:21:49] *** Joins: thc202 (~thc202@user/thc202)
[17:25:11] *** Joins: Mark_Pinecone (~Mark_Pine@84.237.231.8)
[17:34:47] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[17:36:38] *** Quits: Enitin (~Enitin@82.102.22.85) (Remote host closed the connection)
[17:37:21] *** Joins: minimal (~minimal@user/minimal)
[17:38:20] *** Joins: Enitin (~Enitin@82.102.22.85)
[17:39:26] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Ping timeout: 250 seconds)
[17:48:58] *** Quits: molt (~molt@178-223-40-94.dynamic.isp.telekom.rs) (Ping timeout: 240 seconds)
[17:51:25] *** Quits: vxrx (~vxrx@proxy01.autarkic.org) (Quit: ¯\_(ツ)_/¯)
[17:56:00] *** Quits: Atque (~Atque@user/atque) (Ping timeout: 276 seconds)
[17:58:09] *** Quits: thc202 (~thc202@user/thc202) ()
[17:58:50] *** Joins: thc202 (~thc202@user/thc202)
[18:06:13] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[18:07:44] *** Joins: gebbione (~gebbione@cpc152037-finc21-2-0-cust213.4-2.cable.virginm.net)
[18:09:17] <gebbione> hi all, does anyone have a good and stable way to mount S3 buckets inside docker? i tried https://rexray.readthedocs.io/en/v0.9.1/user-guide/docker-plugins/#simple-storage-service but even if i see the volumes on my machine after installing the plugin i am still unable to work with the files, buckets/volumes are not mounting and working well
[18:09:59] <dreamer> s3 is not a block device, so "mounting" doesn't really exist
[18:10:08] <dreamer> it's basically an http service
[18:15:09] *** Quits: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr) (Quit: WeeChat 3.2)
[18:15:25] *** Joins: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr)
[18:18:41] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[18:22:24] <gebbione> dreamer thank you for the statement but although the "mounting" wording might not be exact do you know how to consume it in docker? the plugin I pointed to is not maintained and I am looking for a way to load configuration files that then i can use as part of traefik and portainer
[18:22:52] <dreamer> if you want a block device then don't use S3
[18:22:56] <dreamer> it's not meant to be used as such
[18:24:15] <gebbione> so for this what would you use?
[18:24:41] <akik> gebbione: restic could probably work https://restic.readthedocs.io/en/v0.7.3/tutorials.html#setting-up-restic-with-amazon-s3 they don't show mounting but restic has that sub-command
[18:24:49] <dreamer> maybe specify what it is you want to do :)
[18:24:52] <akik> gebbione: although it needs the fuse kernel module
[18:26:12] <gebbione> dreamer, as i wrote above " I am looking for a way to load configuration files that then i can use as part of traefik and portainer" . Ideally i can provision the files externally and review them like i would for files in S3 or from my file system and load them with terraform/ansible. open to suggestions
[18:26:36] <akik> gebbione: restic also supports restore sub-command which pulls data from your restic repository
[18:29:02] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 256 seconds)
[18:29:32] *** Joins: Enitin (~Enitin@82.102.22.86)
[18:31:50] <gebbione> akik, restic looks great for some of its aimed usage ie backup/restore but I am looking for a simple way to just "mount" a set of files or folders and make them act as a docker volume and restic does not look like a native docker solution  
[18:32:24] <minimal> gebbione: (a) have you container at the start HTTP pull (i.e. wget/curl) the files from somewhere, or (b) mount a host directory containing the files into the container when you start it?
[18:32:44] <gebbione> i can already provision the bucket with terraform and install the docker plugin with ansible but i am not able to see the files when mounting the volumes 
[18:34:25] <gebbione> minimal a) i guess i could extend the traefik images to mount the config files but i would prefer an image building agnostic solution b) isnt mounting host files a kinda of a bad practice? 
[18:35:33] <minimal> why extend the traefik image? you can "docker run --mount" to map a file on the host to a particular file inside the container
[18:35:57] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 245 seconds)
[18:36:47] *** Joins: nezach (~nezach@p200300c31f1e22000b739ca3025c4bc2.dip0.t-ipconnect.de)
[18:36:55] *** Joins: Enitin (~Enitin@82.102.22.84)
[18:37:15] <minimal> as to bad practice - not sure what "practice" you are referring to. For example if you are running something like a Docker Swarm where the continer could run on any of multiple nodes then yes you'ld have to ensure the file was on each file. If you're just running the container on one host that's not a concern
[18:38:02] *** Joins: benni (~benni@ipbcc2cdf9.dynamic.kabel-deutschland.de)
[18:39:17] *** Joins: junktext (~junktext@109.201.152.166)
[18:41:20] <gebbione> swarm is indeed the target here
[18:44:22] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 252 seconds)
[18:45:07] <minimal> does swarm support CSI? if so then look for a S3 plugin for CSI
[18:45:19] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[18:48:51] <gebbione> What is CSI ?
[18:49:27] <minimal> Container Storage Interface - its the "standard" API for using different types of storage with Docker/Kubernetes/Nomad
[18:49:47] <minimal> Rexray sort of predated that by using Docker Plugins
[18:50:17] <minimal> also why the focus on S3? can you not use HTTP/HTTPs or NFS or something else?
[18:51:57] *** Quits: Repox (~Repox@31.3.78.226) (Quit: Textual IRC Client: www.textualapp.com)
[18:54:54] <gebbione> I could, I am currently using NFS inside a rancher cluster but it is not working great and requires specific knowledge. I am loading simple configuration at the moment and not files that need a lot of files operations. In the past I did similar things with S3 using Fuse apparently -> https://github.com/bizmate/s3_mount/blob/master/provision/bootstrap.sh#L50 but that assumed not use or presence of a cluster. I though 
[18:54:54] <gebbione> of trying a plugin so that something would be handled potentially in a more elegant way
[18:55:37] <gebbione> i think i ll try fuse again
[18:57:45] <minimal> well the rexray stuff you mentioned earlier for S3 was basically using Fuse in some fashion - anything that makes a S3 bucket look like a directory of files tends to use Fuse behind the scenes
[18:58:09] <minimal> there are similar things like s3fs
[18:58:09] *** Quits: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net) (Read error: Connection reset by peer)
[18:58:29] *** Joins: nvmd (~nvmd@user/nvmd)
[18:59:22] *** Joins: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net)
[18:59:56] <minimal> automate the create of a docker volume where the volume contents are loaded from somewhere (via S3/HTTP) and then use the volume from your Traefik container?
[19:00:10] *** Joins: Eclipse2212 (~Eclipse22@user/eclipse2212)
[19:03:21] <gebbione> minimal, yes that is the idea but that plugin is not working or i am not configuring it well and it looks like it is not maintained. After installing the plugin i see all my volumes in my S3 account but when I mount one i dont see the files inside it 
[19:04:40] <minimal> yes the rexray stuff is unmaintained as they and everyone else tends to look at CSI-based stuff these days
[19:06:14] <gebbione> ok so i just googled CSI with S3 -> https://github.com/ctrox/csi-s3
[19:06:39] <gebbione> "This is still very experimental and should not be used in any production environment" :<
[19:09:23] <minimal> actually it seems Swarm may not yet have CSI support: https://github.com/moby/moby/issues/39624 and https://searchitoperations.techtarget.com/news/252489220/Mirantis-rethinks-Docker-Swarm-vs-Kubernetes
[19:12:20] <gebbione> thanks i ll revert to fuse for now
[19:15:59] *** Quits: inviz (~user@user/inviz) (Quit: Leaving)
[19:17:50] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[19:17:53] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[19:18:09] *** Joins: mickey (~user@user/mickey)
[19:18:11] *** Joins: flynn (~mcbloch@user/flynn)
[19:22:22] *** Quits: mickey (~user@user/mickey) (Client Quit)
[19:22:36] *** Joins: mickey (~user@user/mickey)
[19:31:56] *** Quits: flynn (~mcbloch@user/flynn) (Ping timeout: 256 seconds)
[19:32:13] *** Quits: benni (~benni@ipbcc2cdf9.dynamic.kabel-deutschland.de) (Quit: Client closed)
[19:32:23] *** Joins: flynn (~mcbloch@user/flynn)
[19:38:47] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Quit: My computer has gone to sleep.)
[19:38:49] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 252 seconds)
[19:39:15] *** Joins: Enitin (~Enitin@82.102.22.85)
[19:47:21] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[19:47:45] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Read error: Connection reset by peer)
[19:48:08] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[19:49:11] *** Joins: lalitmee_ (~lalitmee@180.94.33.38)
[19:49:37] *** Quits: Enitin (~Enitin@82.102.22.85) (Remote host closed the connection)
[19:51:32] *** Quits: lalitmee__ (~lalitmee@180.94.33.161) (Ping timeout: 252 seconds)
[19:51:39] *** Joins: n1ceaf (~Mark_Pine@gateway/tor-sasl/markpinecone/x-88286818)
[19:51:49] *** Joins: ada_ (uid242135@user/ada/x-9065485)
[19:51:49] *** ChanServ sets mode: +o ada_
[19:52:55] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[19:53:07] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Ping timeout: 252 seconds)
[19:55:19] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[19:57:00] *** Quits: n1ceaf (~Mark_Pine@gateway/tor-sasl/markpinecone/x-88286818) (Quit: Leaving)
[19:58:08] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Client Quit)
[19:58:44] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[20:03:02] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Ping timeout: 245 seconds)
[20:05:31] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[20:09:14] *** Quits: eldritch_ (~eldritch@user/eldritch/x-9272577) (Quit: bye)
[20:09:17] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Remote host closed the connection)
[20:09:39] *** Joins: eldritch_ (~eldritch@user/eldritch/x-9272577)
[20:09:55] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Ping timeout: 250 seconds)
[20:13:37] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[20:14:51] *** Joins: metah4ck3r (~meta@user/metah4ck3r)
[20:24:09] *** Quits: alicef (~none@gentoo/developer/alicef) (Quit: install gentoo)
[20:24:55] *** Joins: alicef (~none@gentoo/developer/alicef)
[20:27:23] *** Joins: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se)
[20:28:19] *** Quits: junktext (~junktext@109.201.152.166) (Ping timeout: 252 seconds)
[20:36:38] *** Quits: winstonsmith (~winstonsm@109.201.152.176) (Remote host closed the connection)
[20:36:53] *** Joins: winstonsmith (~winstonsm@109.201.152.162)
[20:46:19] *** Quits: nezach (~nezach@p200300c31f1e22000b739ca3025c4bc2.dip0.t-ipconnect.de) (Quit: Ciao)
[20:47:40] *** Quits: lalitmee_ (~lalitmee@180.94.33.38) (Ping timeout: 240 seconds)
[21:01:57] *** Joins: Brainium (~brainium@user/brainium)
[21:02:04] *** Joins: alicef_ (~none@gentoo/developer/alicef)
[21:03:27] *** Quits: alicef (~none@gentoo/developer/alicef) (Ping timeout: 245 seconds)
[21:08:32] *** Quits: Nightah (~Nightah@user/nightah) (Quit: ZNC - https://znc.in)
[21:09:20] *** Joins: Nightah (~Nightah@user/nightah)
[21:12:07] *** Quits: lilgopher (~textual@c-73-51-174-246.hsd1.il.comcast.net) (Read error: Connection reset by peer)
[21:12:59] *** Joins: lilgopher (~textual@c-73-51-174-246.hsd1.il.comcast.net)
[21:13:48] *** Quits: TomyWork (~TomyLobo@p200300e80f06af009d43cfc9b65d1797.dip0.t-ipconnect.de) (Remote host closed the connection)
[21:19:57] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[21:29:32] *** Joins: m1n10n (~r41d1n@cpe-76-184-204-251.tx.res.rr.com)
[21:32:32] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[21:32:53] *** Joins: flynn (~mcbloch@user/flynn)
[21:33:24] *** Joins: CactiChameleon9 (~cacticham@user/cactichameleon9)
[21:34:13] <CactiChameleon9> Hello. I am a bit new to docker, but I have a quite specific requirement. I need to edit the launch command of a docker image from linuxserver.io. Does anyone know how to do that?
[21:34:37] <DoofusCanadensis> dockerfile from the linuxserver image with your own CMD
[21:34:46] <CactiChameleon9> (I am trying to enable an init system inside linuxserver.io's alpine webtop)
[21:36:15] <akik> CactiChameleon9: red hat has written a blog post about it here https://developers.redhat.com/blog/2016/09/13/running-systemd-in-a-non-privileged-container
[21:36:41] <CactiChameleon9> Say if I wanted openrc?
[21:37:03] <akik> CactiChameleon9: you can probably replace what you put as CMD
[21:37:10] <CactiChameleon9> ok
[21:38:08] <CactiChameleon9> I just use ghcr.io/linuxserver/webtop:alpine-kde for the image in my dockerfile then?
[21:40:31] <akik> CactiChameleon9: sorry i don't know. but you'll end up experimenting 
[21:40:39] <CactiChameleon9> k
[21:40:43] <CactiChameleon9> thx for the help
[21:43:29] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[21:43:50] *** Joins: flynn (~mcbloch@user/flynn)
[21:46:36] <luva> Am I correct that with this rule implemented by docker in nat table " -A PREROUTING -m addrtype --dst-type LOCAL -j DOCKER", it goes around the input table completely, therefore, if I want to change that, I could edit this rule to  " -A PREROUTING -m addrtype --dst-type LOCAL -j "DOCKER_INPUT" and have inside there rules that drop connections as I
[21:46:36] <luva> would in input, before giving it to DOCKER chain ?
[21:52:28] *** Quits: ztx (~ztx@user/ztx) (Quit: ztx)
[21:59:36] <minimal> CactiChameleon9: the linuxserver containers in general tend to use s6-overlay as their init
[21:59:57] <CactiChameleon9> oh... 
[22:00:29] <CactiChameleon9> yep, they do
[22:01:32] <CactiChameleon9> but they don't seem to run /sbin/init on start
[22:02:21] *** Quits: TomTom (uid45892@id-45892.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[22:05:32] <minimal> its normally /init for s6-overlay
[22:06:22] <CactiChameleon9> ^ that then
[22:06:53] <minimal> so assuming there is an init system then why replace it?
[22:08:21] <CactiChameleon9> I don't need to replace it then.
[22:08:58] <CactiChameleon9> But I think I need it to run on boot (/init)
[22:09:32] <minimal> s6-overlay is a bit different that the typical init system plus its not really maintained anymore (no active development for many months)
[22:12:12] <DoofusCanadensis> you need the container to run on boot?
[22:12:28] <DoofusCanadensis> that's not something you control within the container
[22:12:56] <minimal> CactiChameleon9: don't understand what the problem is - if its already using s6-overlay then it will be configured to start various thing when the container is run
[22:13:14] <CactiChameleon9> *sigh. Nvm
[22:13:29] <CactiChameleon9> I will figure out the dockerfile stuff
[22:13:37] <minimal> what are you trying to achieve?
[22:14:20] <CactiChameleon9> I am running a program that hijacks the init system to perform modifications on boot 
[22:14:41] <CactiChameleon9> except its a container, so I was wondering if I could get it working there
[22:14:42] <DoofusCanadensis> doesn't sound like a container friendly program
[22:14:46] <CactiChameleon9> (probably a vm usecase)
[22:14:54] <CactiChameleon9> Its not designed for containers
[22:15:02] <DoofusCanadensis> yeah, containers aren't for everything
[22:15:10] <minimal> why not just add configuration to the webtop container to do whatever you need?
[22:15:15] <DoofusCanadensis> is it modifying itself at system boot?
[22:16:23] <CactiChameleon9> minimal: Trust me, I can't.
[22:16:31] <minimal> s6-overlay is designed so that you can drop files in certain config directories to control what it does
[22:18:08] <minimal> CactiChameleon9: I used to be the Alpine package maintainer for s6-overlay, unfortunately as upstream s6-overlay has basically stopped and this caused some dependancy issues I removed the packages from Alpine repos.
[22:18:18] <CactiChameleon9> I am just wasting your peoples time. Sorry. I will so a bit of self experimentation. Thx for your help
[22:18:36] *** Joins: jmartin (~jmartin@user/jmartin)
[22:19:06] *** Quits: BenjiProd (~BenjiProd@user/benjiprod) (Remote host closed the connection)
[22:20:12] <CactiChameleon9> DoofusCanadensis: Its modifying the system on boot
[22:20:29] <DoofusCanadensis> yeah, that's not going to work well inside a container
[22:20:38] <CactiChameleon9> (In a way that would break if the system had booted)
[22:20:45] <minimal> I'm not even sure how this mysterious hijack program is supposed to work - it is design to hijack systemd? or openrc? or one of the other myriad of init systems out there - they each behave differently
[22:21:04] <DoofusCanadensis> a container is supposed to be isolated from the rest of the system
[22:21:22] <CactiChameleon9> By system, I meant container
[22:21:27] <CactiChameleon9> (the system of the container)
[22:21:30] <DoofusCanadensis> and any init inside the container is for the container itself, not the host
[22:21:35] <DoofusCanadensis> oh well
[22:22:04] <DoofusCanadensis> how does the program running differ from the system booting?
[22:22:05] *** Quits: Eclipse2212 (~Eclipse22@user/eclipse2212) (Quit: Leaving)
[22:22:23] <DoofusCanadensis> because starting a container isn't really going to be doing a 'boot' per-se
[22:22:30] <DoofusCanadensis> it's going to be starting the application
[22:23:16] <CactiChameleon9> I am using vm-y terms. I mean on boot as in boot of the container - which doesn't really happen, but I am kinda trying to make it to?
[22:23:41] <minimal> CactiChameleon9: so which init system does this 'hijack' program support? I doubt it supports s6-overlay
[22:24:00] <CactiChameleon9> s6, openrc, systemd, maybe others?
[22:24:25] <DoofusCanadensis> out of curiosity, what application is this?
[22:24:27] <minimal> ok, so s6, but not s6-overlay?
[22:24:40] <minimal> s6-overlay is s6 init modified for containers
[22:24:46] <CactiChameleon9> Sorry for not mentioning the program, I don't want to attract loads of attention to it - its a single dev maintaining and support is low
[22:24:49] <DoofusCanadensis> yeah, coming from a VM environment was the hardest thing on me... 
[22:25:00] <CactiChameleon9> OK, so s6-overlay and s6 are quite different
[22:25:12] <DoofusCanadensis> trying to focus on the application and keep bringing vm ideas into play
[22:25:15] <CactiChameleon9> DoofusCanadensis: I might be able to dm u the program if u want
[22:25:20] <DoofusCanadensis> I do not
[22:25:26] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 250 seconds)
[22:25:29] <DoofusCanadensis> I'm just curious as to what kind of app it is
[22:25:38] <DoofusCanadensis> oh dm the name? sure
[22:25:47] <minimal> well as I said its the difference between an init designed for systems (physical & VMs) and an init designed for containers (s6-overlay)
[22:26:16] * CactiChameleon9 nods
[22:26:25] *** Joins: noarb (~noarb@user/noarb)
[22:26:35] <minimal> that's one reason why s6 and s60-overlay are maintained by different people
[22:26:57] <minimal> different functionality focus
[22:27:05] <CactiChameleon9> Gotcha. Interesting stuff
[22:28:01] <minimal> for example a container init does not typically run getty processes whereas a system init does
[22:29:17] <minimal> so if you want to use "webtop" with a different init then you're better off starting from scratch rather than trying to retrofit a different init into the container image
[22:29:35] <CactiChameleon9> You are probably right there
[22:29:41] <CactiChameleon9> Thx for ur help
[22:30:16] <minimal> as that webtop is layered on several other containers from linuxserver which start with their alpine base image using s6-overlay
[22:30:44] * CactiChameleon9 nods
[22:31:28] <minimal> but then you'd have to figure out how to do whatever the image is doing using s6-overlay is a slightly different way for whatever init you pick
[22:32:16] <CactiChameleon9> Maybe something like https://github.com/dockage/alpine alpine-openrc
[22:32:23] <minimal> that 'hijack' problem sounds like a horrible hack approach to whatever its trying to achieve
[22:34:33] <minimal> so yeah, https://github.com/dockage/alpine/blob/master/3.11/openrc/Dockerfile is using OpenRC as its init (same as Alpine-for-hosts does). Though that repo hasn't be updated for a couple of years - 3.14 is the current Alpine release
[22:35:38] <minimal> also is this 'hajack' program modifying/adding binaries to containers? if is is then unless they are compiled against musl (rather than glibc) then they won't work anyway
[22:36:03] <CactiChameleon9> It uses busybox
[22:37:09] <minimal> busybox will already be present in the Alpine image. So its actually a shell script then that runs busybox commands? Can't you just look at what its doing then?
[22:38:02] <CactiChameleon9> not quite. Nvm, as I've said - I will figure something out. Also - I can dm u the name if u want because that may make this past conversation less annoying
[22:38:12] <minimal> ok
[22:38:41] *** Joins: junktext (~junktext@109.201.152.179)
[22:39:04] *** Joins: Ryu945 (Ryu945@gateway/vpn/protonvpn/ryu945)
[22:39:06] *** Joins: alxgomz (~alxgomz@2a01:e0a:a3f:d240:e814:5af5:50f0:4960)
[22:39:11] <alxgomz> Is there a way I can set an ENV (that will survive across images ) from a variable set using export in a RUN directive?
[22:45:15] *** Joins: ryu__ (Ryu945@gateway/vpn/protonvpn/ryu945)
[22:45:20] <jmartin> alxgomz, dont understand, what do you mea by survive across images?
[22:46:24] <DoofusCanadensis> ENV is for containers, no? instead of images.
[22:47:04] *** Joins: olbat (~olbat@user/olbat)
[22:47:21] *** Quits: ryu__ (Ryu945@gateway/vpn/protonvpn/ryu945) (Client Quit)
[22:48:01] *** Quits: Ryu945 (Ryu945@gateway/vpn/protonvpn/ryu945) (Ping timeout: 252 seconds)
[22:49:35] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Quit: My computer has gone to sleep.)
[22:50:12] *** Parts: olbat (~olbat@user/olbat) ()
[22:51:07] <alxgomz> I mean, I set an ENV for containers inside a dockerfile to create a base image. Then this image is reused by other image using FROM. subsequents containers need to be,efit from the ENV set in base image. this works nicely when ENV is staticly defined using ENV directive in the dockerfile but I need to set it based on the output of a command run at build time
[22:53:00] *** Joins: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net)
[22:53:12] <jmartin> sorry, never face a similar situation
[22:53:32] <jmartin> maybe you can save in a config file and read later
[22:54:13] <jmartin> like whatever.sh > /etc/myvar
[22:55:40] <jmartin> and then set VAR=`cat /etc/myvar`
[22:56:34] *** Joins: cebor (~cebor@user/cebor)
[23:01:43] <jmartin> have you ever used certbot in a docker container?
[23:02:15] <alxgomz> ok thanks anyway
[23:02:21] *** Joins: vxrx (~vxrx@209.141.36.56)
[23:07:04] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[23:07:25] *** Joins: flynn (~mcbloch@user/flynn)
[23:07:55] <minimal> alxgomz: docker build --build-arg
[23:09:05] *** Quits: liquidity (~liquidity@71.212.129.44) (Quit: The Lounge - https://thelounge.chat)
[23:10:00] <alxgomz> minimal: that doesn't work for me as the var dynamic value would not be evaluated inside the container but on the biulding host instead
[23:10:48] <minimal> when you are building a container image there is no container, only an image which is currently being built - the container only exists once you run the image
[23:11:22] <alxgomz> yes sorry. I'm missusing terms here
[23:11:48] <minimal> well ok, there is sort of a temporary container
[23:12:02] <minimal> so what happened when you specify whatever command in a RUN in the Dockerfile?
[23:13:27] <alxgomz> what I mean is if I use --build-arg=$(ls -l somelink) that will evaluate to the link on the building host not the link I want my container created fro mthat image
[23:14:15] <minimal> in Dockerfile "RUN xyz=$(ls -l somelink) && whatever next"
[23:14:18] <alxgomz> gosh... I'm reading my own message and care barely understand them :)
[23:14:49] <alxgomz> let me be more concret with examples:
[23:15:14] <minimal> remembering that each RUN command is independantand so you can't pass stuff on to the next RUN command, that's why you'd do multiple dependant commands in the same RUN with "&&" between them
[23:16:01] <alxgomz> well that's my problem... I want to define an ENV at the end of the dockerfile that depends on the RUN directive
[23:16:42] <alxgomz> here is what I have in the RUN directive: JAVA_BIN_PATH=$(dpkg -L openjdk-${JAVA_MAJOR}-jre-headless | grep '\/bin\/java$'); export JAVA_HOME=${JAVA_BIN_PATH%*/bin/java}; 
[23:17:07] <alxgomz> I then want to do something like ENV JAVA_HOME=$JAVA_HOME
[23:17:19] <alxgomz> does that make more sense now?
[23:17:52] <jmartin> i think it is simpler to do a ln -s to a fixed path
[23:18:03] <jmartin> and then use the fix path
[23:18:19] <alxgomz> yeah I'm afrais I4ll hace to do that
[23:18:40] <jmartin> like if i have /app/apache-tomcat-9.0.x and a ln -s /app/apache-tomcat-9.0.x /app/tomcat
[23:18:49] *** Quits: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch) (Remote host closed the connection)
[23:18:54] <jmartin> so i know no matter what version is always in /app/tomcat
[23:18:55] <minimal> alxgomz: create a file with the name=values that the container RUN command then sources at runtime?
[23:19:41] <jmartin> i can even mount to see the logs independently of the tomcat version, for example
[23:19:51] <alxgomz> I don't have full control on the CMD / ENTRYPOINT. That image can be reused by people I don't even know
[23:20:28] <jmartin> that's a huge responsability then :)
[23:21:33] <alxgomz> as I said ... that's base image. It needs to be self contained and ready to use
[23:21:57] <alxgomz> well thank you gents
[23:38:28] *** Joins: ztx (~ztx@user/ztx)
[23:40:08] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[23:40:14] *** Quits: momomo (~momomo@user/momomo) (Quit: Textual IRC Client: www.textualapp.com)
[23:40:29] *** Joins: flynn (~mcbloch@user/flynn)
[23:52:42] *** Quits: halprin (~halprin@45-16-213-131.lightspeed.elpstx.sbcglobal.net) (Quit: My computer has gone to sleep.)
[23:52:55] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[23:53:16] *** Joins: flynn (~mcbloch@user/flynn)
