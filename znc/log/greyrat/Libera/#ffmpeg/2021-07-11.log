[00:06:32] *** Joins: linjie (~linjie@58.247.210.251)
[00:11:13] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[00:12:10] *** Joins: linjie (~linjie@58.247.210.251)
[00:12:14] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[00:12:47] *** Joins: linjie (~linjie@58.247.210.251)
[00:17:26] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 255 seconds)
[00:18:36] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 258 seconds)
[00:24:17] *** Joins: blerd (blerd@71.182.169.24)
[00:37:29] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[00:38:15] *** Quits: Fohsap (~Muimi@119.112.254.166) (Quit: Going offline, see ya! (www.adiirc.com))
[00:41:56] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[00:41:59] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[00:45:52] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[00:46:25] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[00:46:56] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Ping timeout: 272 seconds)
[00:47:01] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[00:49:40] <blerd> So I think I figured out one of the issues.. It seems the timebase is changed to 1/1,000,000 when I add the concat filter. So I actually need to convert from that time base instead of the original files timebase. Not sure if that will fix the problem where I'm only getting 1 file but maybe
[00:50:50] <furq> there's a settb filter
[00:53:51] *** Quits: Flabb (~Flabb@89.169.84.117) (Quit: Leaving)
[00:54:28] <Terrence> @furq do you happen to be familiar with the encoding and muxing process using ffmpeg api?
[00:56:26] <furq> not any more than the examples are
[00:56:26] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[00:57:11] <furq> actually not at all i've only ever needed to use the api for decoding to pcm
[00:57:42] <Terrence> Darn, yeah I've been looking through transcode_aac, muxing, and decoding for creating a new wav file but I can't seem to solve the issue I'm having
[00:58:13] <Terrence> I'm not sure whether it's my logic or not because I've included a majority of their own code and changed it to match what I'm trying to do
[00:58:25] <furq> your paste was already deleted
[00:58:54] <Terrence> https://pastebin.com/LRcSVv3A
[00:58:57] <Terrence> furq
[00:59:34] <Terrence> If you look in the while loop, I have a flag in place to tell me wheter or not to encode a frame to a packet and write it to the output file
[01:00:11] <Terrence> For some reason it copies every frame even though after stepping through the code, the flag is doing as expected
[01:02:50] <Terrence> I really doubt the problem is the EncodeAndWrite function because that was copied as well
[01:03:57] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Quit: WeeChat 3.2)
[01:04:03] <blerd> so settb worked for me. Not sure why I would have to do that though. That allowed me to realize I'm getting the second clips audio just not the video. So probably fundamentally wrong somewhere.. to make matter worse I'm using C# bindings to the C++ Api. A lot of my problems over the last few months is because C# has some half ass pointer support still. =/
[01:08:47] <blerd> Also I wonder if doing things in a fitler section is slower than doing it "manually". I imagine there is some overhead with using filters
[01:10:42] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[01:10:46] <Terrence> https://pastebin.com/x7cpAZr6
[01:11:17] *** Joins: Buster_ (~Buster@buster-net.ru)
[01:11:18] <Terrence> This is the Encode and Write Function by the way, I'm not sure if this is where the issue could be coming from
[01:16:12] <blerd> just looking at it from a logic point of view.. Maybe neither of those if are true. and flag is false by default
[01:16:35] <blerd> should be able to step through and see whats going through if you are using a IDE though
[01:16:42] *** Joins: darkapex (~darkapex@user/darkapex)
[01:17:40] <Terrence> I did
[01:17:51] <Terrence> One second allow me to show you
[01:19:10] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/f71ff6c1b0f8b2d09e9e46b08ce8ca7d/pasted.txt
[01:19:29] <Terrence> I've just added this line to the code above
[01:21:39] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/77bf05f642eb998c4d05229ec31c2b6a/image.png
[01:22:05] <Terrence> Notice how it says
[01:22:28] <Terrence> "Not Writing To File" and doesn't perform the EncodeAndWrite() function
[01:22:52] <Terrence> When I open the output file, it's still the exact same length as the original and includes the frames that I do not want
[01:23:22] *** Joins: schweby (~schweby@user/schweby)
[01:23:48] <Terrence> You see my confusion now? blerd
[01:24:28] *** Joins: linjie (~linjie@58.247.210.251)
[01:25:03] <blerd> yeah that kinda proves my point that those ifs arent working and changing the flag value
[01:25:41] <Terrence> Hmm
[01:25:46] <blerd> just add a break point on if (entry = av_dict_get(filt_frame->metadata, "lavfi.silence_start", entry, AV_DICT_IGNORE_SUFFIX)) { and see wha that evaluates to
[01:25:52] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 246 seconds)
[01:28:20] <Terrence> flag is equal to 1
[01:28:46] <Terrence> Entry is a AVDictionaryEntry*
[01:28:59] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 255 seconds)
[01:29:25] <Terrence> and when I step through to (!flag) , it evaluates as false and goes to the else statement
[01:31:36] *** Joins: Kacper_ (~kasper93@89-74-110-199.dynamic.chello.pl)
[01:32:10] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 246 seconds)
[01:32:11] *** Kacper_ is now known as kasper93
[01:35:38] <blerd> I'm not a C/C++ gut but I think flag = 1 is true. 	if (!flag) says if flag is false so when flag is equal to 0.
[01:36:28] <Terrence> yeah exactly
[01:36:40] <Terrence> int flag = 0;
[01:36:40] <Terrence> / 0 indicates a frame that I WANT TO KEEP
[01:36:41] <Terrence> / 1 indiciates a frame that I DONT WANT TO KEEEP
[01:37:20] <Terrence> So (!flag) would mean if it's 0 (silence end) , I want to encode and write those frames
[01:39:44] <blerd> so I think you need to have to separate ifs if I'm understanding correctly..
[01:40:05] <blerd> instead of else if just if
[01:40:10] <blerd> but I think both will evalute to true
[01:40:24] <blerd> so its not a really condition in that if statement
[01:41:05] <blerd> but that is just a guess.. you really gotta step through with Visual Studio
[01:43:20] <Terrence> yeah I think I did pretty well but I guess it's back to the drawing board, I only included that else as just a reference to see what the output was going to be, it was originally just one if statement
[01:43:35] <Terrence> if(!flag){ encode}
[01:43:40] <Terrence> and then back into the loop
[01:43:46] <Terrence> But i'll keep trying
[01:45:54] <blerd> best thing to do is to step through break it down one by one and then you can indentify the problem... I cant really step through it without the full code and everything.
[01:47:27] <blerd> but I would say its more of a C/C++ problem than a ffmepg problem
[01:52:14] <Terrence> Yeah I feel you
[01:52:37] <Terrence> So just to clarify, the creation of the output file isn't wrong you think? With my EncodeAndWrite function() ?
[01:52:48] <Terrence> It's just the logic of choosing which frames to write?
[01:53:07] <Terrence> blerd
[01:54:00] <blerd> I couldn't say on that part, but one problem at a time.. one line at a time..
[01:54:15] <Terrence> Yeah true
[01:54:20] <Terrence> I'll keep working on it
[01:54:59] <Terrence> I think I'm just going to step through and number and idenitfy which frames are written and which arent
[02:06:20] <Terrence> I think it actually is an FFMPEG issue
[02:06:58] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/b21faff496da628010db85c244a95f13/image.png
[02:09:49] *** beaver is now known as pong
[02:11:50] *** Quits: fructose (~fructose@user/fructose) (Quit: fructose)
[02:13:30] <blerd> Not sure what that is suppose to show but I'm guessing the logic of when frames are written is still not right
[02:14:13] <Terrence> it's supposed to show which frames were passed to EncodeAndWrite()
[02:16:05] <blerd> do you have updated pastebin with the updated logic you got going? If I had to guess maybe flag is set then its not able to set it back after that
[02:16:23] <Terrence> Oh yeah one second
[02:17:12] <Terrence> And I changed the placing of flag it was causing it to always be 0 like you said but now flag changes between 1 and 0, however, it's still encoding every frame from the input
[02:17:18] <Terrence> Let me paste it really quick
[02:18:59] *** Joins: fructose (~fructose@user/fructose)
[02:19:08] <Terrence> https://pastebin.com/5Mq5yZkc
[02:19:12] <Terrence> blerd
[02:19:17] <Terrence> appreciate the help by the way
[02:19:35] <Terrence> Just been working on this for so long its really getting frustrating
[02:26:03] *** Joins: michael_harmon_a (~michael_h@2605:a601:a91a:4000:cbe0:cb49:1a43:ad49)
[02:33:31] <blerd> okay looking at that code.. I would expect the output you gave to happen.. Question is what do you want to happen exactly? It seems like there is a silence interval and all the frames in the interval need to not be written?
[02:34:09] <Terrence> I want to only write a frame if it is not silent
[02:34:24] <Terrence> And it starts at 0 assuming that the beginning of the audio file is not silent
[02:34:36] *** Quits: blaze (~blaze@user/blaze) (Ping timeout: 272 seconds)
[02:34:46] <Terrence> and if entry = filt_frame->metadata, "lavfi.silence_start", entry, AV_DICT_IGNORE_SUFFIX
[02:34:50] <Terrence> evaluates to true
[02:34:54] <blerd> and that isnt what it is doing? the Console write lines look okay
[02:35:04] <blerd> but I dont know what is happening in the actual file
[02:35:06] <blerd> is that correct?
[02:35:43] <Terrence> That's what I wouldve thought to
[02:35:50] <Terrence> But the output file is exactly the same as the input
[02:36:16] <Terrence> I'm using a 40 second input
[02:36:20] <Terrence> with 4 seconds of silence
[02:36:28] <Terrence> and I'm expecting an output of 36 seconds
[02:36:36] <Terrence> However, the output is still 40 seconds
[02:37:01] <michael_harmon_a> hey sorry to interject, I have a quick question: Is there a way to "crop" bitmap based subtitles? Specifically I have some hdmv/pgs subs that I'd like to crop along with the video they go with, and while I can use a complex filtergraph to crop them, they encode as video, I need them to encode as dvb_subs or something similar.
[02:37:57] <blerd> can I see your encode and write again function? the pastebin is expired
[02:39:08] <Terrence> Yeah no problem
[02:40:25] <Terrence> https://pastebin.com/HR3aSkJz
[02:40:28] <Terrence> blerd
[02:42:06] *** Joins: arcatech (~arcatech@user/arcatech)
[02:45:00] <blerd> I dont see any code that adjusts the PTS (Presentation Time Stamp). So I would think the frames will play at the same time as original... I would think you would need to move the PTS
[02:46:35] *** Quits: schweby (~schweby@user/schweby) (Quit: schwups und weg.)
[02:46:55] *** Joins: schweby (~schweby@user/schweby)
[02:47:26] <blerd> hmm it may be there but I dont see it.     /* Set a timestamp based on the sample rate for the container. */
[02:47:26] <blerd>     if (frame) {
[02:47:26] <blerd>         frame->pts = pts;
[02:47:26] <blerd>         pts += frame->nb_samples;
[02:47:26] <blerd>     }
[02:47:44] <blerd> idk where that pts variable is so hard to say.. but that could work
[02:47:57] <Terrence> in encode_audio_fram
[02:48:22] <Terrence> oh whoops
[02:48:31] <Terrence> I didnt add it to the paste bin
[02:49:20] <Terrence> https://pastebin.com/pk96xm9W
[02:52:11] <blerd> We can assume the Encode is being called the write number of times since the ConsoleWrite is being during the right times correct?
[02:52:45] <Terrence> yes
[02:53:09] <blerd> I could not be seeing it but I dont see that pts value still
[02:53:34] <blerd> only in that section I pasted earlier
[02:53:42] *** Joins: MichaelHarmon[m] (~michaelh_@2001:470:69fc:105::bb72)
[02:53:42] <MichaelHarmon[m]> Is there a way to "crop" bitmap based subtitles? Specifically I have some hdmv/pgs subs that I'd like to crop along with the video they go with, and while I can use a complex filtergraph to crop them, they encode as video, I need them to encode as dvb_subs or something similar.
[02:54:47] <Terrence> ok
[02:54:53] <Terrence> I'll check it out
[02:55:01] <Terrence> https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c
[02:55:22] <Terrence> This is the code I've been using as reference
[02:55:37] <blerd> oh okay so its a global variable
[02:55:49] <MichaelHarmon[m]> and sorry about the duplicate message, I think the matrix bridge was having issues, so I tried the libera.chat web client
[02:57:06] <blerd> yeah I think you need to use the nb_sample value from the frames that you are removing... So that logic isnt going to work for you
[02:57:21] <Terrence> Damn
[02:57:25] *** Quits: michael_harmon_a (~michael_h@2605:a601:a91a:4000:cbe0:cb49:1a43:ad49) (Quit: Client closed)
[02:57:31] <Terrence> thanks for the help though
[02:57:43] <Terrence> I guess I need to find another example
[02:58:41] <blerd> I mean it is just a math problem have to think about it for a bit
[03:00:27] <Terrence> oh okay
[03:01:04] <Terrence> Wait just so i can understand, what exactly is the issue that you've described and do you know why it's copying each of the same frames
[03:05:13] <blerd> hmm actually that logic should work assuming nb_samples is consistent. it is basically increasing by nb_samples each time. So it is something else... let me continue reading the code
[03:07:39] <Terrence> thank you
[03:08:09] <blerd> so going back to that orginal while loop
[03:09:49] <Terrence> yes
[03:11:24] *** Joins: Nact (~l@host-85-27-127-131.dynamic.voo.be)
[03:13:28] <blerd> Lets back up a bit.. Lets confirm that the Encode function isnt being called for the silent frames? I would think based off the console writes you showed. So I guess the next question would be how you are determing the duration of the file. You might want to run ffprobe and confirm what is written in the file
[03:15:04] <Terrence> Okay
[03:15:08] <Terrence> let me check it out
[03:19:16] <Terrence> Okay I just ran it again
[03:19:23] <Terrence> and the input file is 40 seconds
[03:19:27] <Terrence> Output is 38 seconds
[03:19:36] <Terrence> let me run ffprobe on it now
[03:21:37] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/1c6fa9502dc71d12911b0b3f2b82fad4/image.png
[03:21:45] <Terrence> Looks like they may be using different encoders
[03:22:23] <blerd> yeah something is wrong there for sure
[03:23:47] <blerd> ffprobe has a -show_frames flag that will split out info on each frame. output that to a file and then that will give you more info than you ever wanted about every frame. Assuming the stream is right... I guess run ffprobe on the original file and then check your encoding settings match
[03:26:12] <Terrence> ah awesome
[03:30:54] *** Joins: fannagoganna (uid110488@id-110488.tinside.irccloud.com)
[03:37:47] *** Quits: Buster_ (~Buster@buster-net.ru) ()
[03:39:58] *** Quits: bencc1_ (~bencc1@2a00:a040:197:3af:1bb0:1690:89bc:54d5) (Remote host closed the connection)
[03:40:16] *** Joins: bencc1_ (~bencc1@2a00:a040:197:3af:2ed:9169:9bea:4d04)
[04:06:58] *** Joins: Fohsap (~Muimi@2001:19f0:5001:2bf8:5400:3ff:fe30:8554)
[04:08:49] <Guest6> BtbN thanks for that input about hls.js
[04:14:08] *** Joins: ReedK0_ (~Muimi@119.112.254.166)
[04:14:15] *** Quits: ReedK0_ (~Muimi@119.112.254.166) (Client Quit)
[04:15:42] *** Joins: linjie (~linjie@58.247.210.251)
[04:17:17] *** Quits: Fohsap (~Muimi@2001:19f0:5001:2bf8:5400:3ff:fe30:8554) (Ping timeout: 255 seconds)
[04:18:40] *** Quits: jess (~jess@libera/staff/jess) ()
[04:23:59] *** Quits: Terrence (~Terrence@097-085-185-009.biz.spectrum.com) (Ping timeout: 252 seconds)
[04:26:49] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 246 seconds)
[04:31:14] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 255 seconds)
[04:32:59] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[04:32:59] *** Parts: MichaelHarmon[m] (~michaelh_@2001:470:69fc:105::bb72) ()
[04:42:32] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 272 seconds)
[04:50:27] *** Joins: Terrence (~Terrence@097-085-185-009.biz.spectrum.com)
[05:15:49] *** Quits: sadjhflj333 (~sadjhflj3@097-088-119-211.res.spectrum.com) (Quit: Konversation terminated!)
[05:18:05] *** Quits: blerd (blerd@71.182.169.24) (Quit: Going offline, see ya! (www.adiirc.com))
[05:19:54] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 272 seconds)
[05:31:21] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:32:21] *** Joins: michael_harmon_a (~michael_h@2605:a601:a91a:4000:cbe0:cb49:1a43:ad49)
[05:32:29] *** Quits: michael_harmon_a (~michael_h@2605:a601:a91a:4000:cbe0:cb49:1a43:ad49) (Client Quit)
[05:40:09] *** Quits: rcombs (rcombs@irc.rcombs.me) (Read error: Connection reset by peer)
[05:40:42] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:41:55] <Terrence> Is it possible to encode frames and write the output packet to a file without using an AVFifo Struct?
[05:44:53] *** Quits: fannagoganna (uid110488@id-110488.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[05:46:48] *** Joins: rcombs (rcombs@irc.rcombs.me)
[06:00:51] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[06:06:58] *** Quits: der_richter1 (~Akemi@p4fde4320.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[06:07:16] *** Joins: der_richter (~Akemi@p4fde4320.dip0.t-ipconnect.de)
[06:10:33] *** Quits: der_richter (~Akemi@p4fde4320.dip0.t-ipconnect.de) (Client Quit)
[06:15:00] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 272 seconds)
[06:15:12] *** Joins: keypushe- (keypusher@user/keypusher)
[06:17:28] <Terrence> Or does anyone where I can find the AVCodec ID for a specific encoder? I am trying to encode the frames of one input to write to another using the Lavf58.76.100 encoder but I just cant seem to find it's AVCodec ID online or in any FFmpeg documentation
[06:18:30] *** keypushe- is now known as keypusher
[06:23:20] *** Quits: MrZeus_ (~MrZeus@185.195.232.146) (Ping timeout: 252 seconds)
[06:25:05] <DeHackEd> Lavf58.76.100 is a version code, usually written to the metadata of the file format. it is not an encoder
[06:25:49] <DeHackEd> also, the Codec ID is for the codec, not the specific encoder. eg: a codec ID for H264 might reference libx264 or nvidia's nvenc encoder or openh264
[06:39:23] <Terrence> Oh hmm
[06:40:51] <Terrence> Because I'm trying to create an encoder for a new WAV file based on the input but when I use formatContext->streams[audioStreamIndex]->codecpar->codec_id
[06:40:59] <Terrence> It appears they are different for some reason
[06:41:57] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/24db9178f9f7af81b7a301298ebc4213/image.png
[06:43:23] <Terrence> The one highlighted is the encoder of the input
[06:51:11] <DeHackEd> that's metadata. a text field in the file being displayed
[06:57:15] <furq> the encoder is pcm_s16le
[06:57:50] *** Joins: jos2 (~jos3@dyndsl-091-096-041-232.ewe-ip-backbone.de)
[06:58:05] <furq> lavf is libavformat. that tag just indicates the version of libavformat the file was encoded with
[07:01:17] *** Quits: jos1 (~jos3@host-091-097-185-111.ewe-ip-backbone.de) (Ping timeout: 252 seconds)
[07:06:22] <Terrence> Oh okay let me try that
[07:08:07] <Terrence> Quick question, how did you know the encoder was pcm_s16e just from looking at it?
[07:08:13] <Terrence> furq
[07:08:57] <Terrence> Because that fixed it
[07:09:25] <furq> because it says
[07:09:36] <furq> also because that's the default encoder for wav
[07:10:13] <Terrence> Nice
[07:10:22] <Terrence> So here's one question that confuses me
[07:12:12] <Terrence> When running fprobe on the input file and output file, the input has 1 channel and the output has 2 channels
[07:12:46] <Terrence> I'm assuming that's why even though the input file is longer in the duration than the output file, the output file double the size of the input
[07:14:25] <Terrence> To change the number of channel to 1, do I just have to set AVCodecContext* avctx channels equal to 1?
[07:27:06] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 268 seconds)
[07:30:07] *** Quits: Arwalk (~Arwalk@lfbn-dij-1-263-107.w86-235.abo.wanadoo.fr) (Quit: The Lounge - https://thelounge.chat)
[07:30:47] *** Joins: Arwalk (~Arwalk@lfbn-dij-1-263-107.w86-235.abo.wanadoo.fr)
[07:50:56] *** Joins: Exuma (~Exuma@75-111-26-18.erkacmtk05.res.dyn.suddenlink.net)
[07:52:20] *** Quits: Exuma (~Exuma@75-111-26-18.erkacmtk05.res.dyn.suddenlink.net) (Client Quit)
[07:52:41] *** Joins: Exuma (~Exuma@75-111-26-18.erkacmtk05.res.dyn.suddenlink.net)
[07:53:09] *** Quits: Exuma (~Exuma@75-111-26-18.erkacmtk05.res.dyn.suddenlink.net) (Client Quit)
[07:59:04] <Terrence> Or is there a certain sample format that I need in order to make the output mono just like how the input is?
[08:04:08] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[08:07:57] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:13:43] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[09:16:38] *** Joins: linjie (~linjie@58.247.210.251)
[09:20:58] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 240 seconds)
[09:30:19] *** Quits: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260) (*.net *.split)
[09:30:19] *** Quits: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a) (*.net *.split)
[09:30:19] *** Quits: meklu (~meklu@holmes.meklu.org) (*.net *.split)
[09:30:19] *** Quits: t4nk_fn (~Go@user/t4nk) (*.net *.split)
[09:30:19] *** Quits: whitekidney (~wk@188.126.218.103) (*.net *.split)
[09:30:19] *** Quits: smashgrab (~smashgrab@bare.metal.computer) (*.net *.split)
[09:30:19] *** Quits: ParkerR (ParkerR@znc.withg.org) (*.net *.split)
[09:30:19] *** Quits: Fusl (fusl@1.0.0.127.in-addr.arpa.li) (*.net *.split)
[09:30:19] *** Quits: vulpine (xfnw@tilde.team) (*.net *.split)
[09:30:19] *** Quits: nickster (~nickster@67.207.91.6) (*.net *.split)
[09:30:26] *** Joins: ParkerR (~ParkerR@znc.withg.org)
[09:30:28] *** Joins: whitekidney (~wk@188.126.218.103)
[09:30:34] *** Joins: Fusl (fusl@1.0.0.127.in-addr.arpa.li)
[09:30:51] *** Joins: smashgrab (~smashgrab@bare.metal.computer)
[09:30:56] *** Joins: nickster (~nickster@67.207.91.6)
[09:31:01] *** Joins: meklu (~meklu@holmes.meklu.org)
[09:31:10] *** Joins: t4nk_freenode (~Go@user/t4nk)
[09:31:12] *** Joins: vulpine (xfnw@tilde.team)
[10:04:04] *** Quits: Nact (~l@host-85-27-127-131.dynamic.voo.be) (Quit: Konversation terminated!)
[10:19:21] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[10:28:57] *** Quits: schweby (~schweby@user/schweby) (Quit: schwups und weg.)
[10:31:45] *** Joins: schweby (~schweby@user/schweby)
[10:37:21] *** Joins: gnoo (~gnoo@user/gnoo)
[10:42:03] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[11:06:35] *** Quits: arcatech (~arcatech@user/arcatech) (Ping timeout: 252 seconds)
[11:14:23] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[11:24:08] *** Quits: HarveyPwca (~HarveyPwc@2601:246:c180:a570:29df:3b00:ad0e:3a06) (Quit: Leaving)
[11:29:35] *** Quits: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883) (Ping timeout: 252 seconds)
[11:35:11] *** Quits: lexano (~lexano@2607:fea8:5bc0:12:12c3:7bff:fe95:9fc1) (Ping timeout: 256 seconds)
[11:35:37] *** Joins: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883)
[11:39:14] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Remote host closed the connection)
[11:39:33] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[11:42:11] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[11:49:35] *** Joins: lexano (~lexano@2607:fea8:5bc0:12:12c3:7bff:fe95:9fc1)
[11:54:54] *** Joins: Flabb (~Flabb@89.169.84.117)
[12:13:54] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[12:19:10] *** Quits: rpthms (~rpthms@user/rpthms) (Ping timeout: 272 seconds)
[12:32:00] *** Quits: Nex8192 (~Nex8192@user/nex8192) (Quit: Don't watch me die)
[12:32:16] *** Joins: Nex8192 (~Nex8192@user/nex8192)
[12:43:24] *** Joins: rpthms (~rpthms@user/rpthms)
[12:44:18] *** Joins: racccc (~chatzilla@95.72.197.46)
[12:55:41] *** Quits: Terrence (~Terrence@097-085-185-009.biz.spectrum.com) (Ping timeout: 255 seconds)
[12:55:41] *** Quits: sixecho (~sixecho@2001:470:69fc:105::32) (Quit: Bridge terminating on SIGTERM)
[12:55:41] *** Quits: kepstin (~kepstin@user/kepstin) (Quit: Bridge terminating on SIGTERM)
[12:55:41] *** Quits: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2) (Quit: Bridge terminating on SIGTERM)
[12:55:43] *** Quits: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce) (Quit: Bridge terminating on SIGTERM)
[12:55:43] *** Quits: YakoYoku (~yakoyoku@2001:470:69fc:105::780) (Quit: Bridge terminating on SIGTERM)
[12:55:43] *** Quits: memst[m] (~memst@2001:470:69fc:105::716) (Quit: Bridge terminating on SIGTERM)
[12:55:44] *** Quits: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b) (Quit: Bridge terminating on SIGTERM)
[12:55:44] *** Quits: luc65r (~luc65r@2001:470:69fc:105::ee1) (Quit: Bridge terminating on SIGTERM)
[12:55:44] *** Quits: alienpinecone[m] (~alienpine@2001:470:69fc:105::35bd) (Quit: Bridge terminating on SIGTERM)
[12:55:47] *** Quits: dittid[m] (~dittidmat@2001:470:69fc:105::789d) (Quit: Bridge terminating on SIGTERM)
[12:58:13] *** Joins: kepstin (~kepstin@user/kepstin)
[13:00:02] *** Joins: YakoYoku (~yakoyoku@2001:470:69fc:105::780)
[13:00:02] *** Joins: sixecho (~sixecho@2001:470:69fc:105::32)
[13:00:02] *** Joins: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2)
[13:00:02] *** Joins: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260)
[13:00:02] *** Joins: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b)
[13:00:13] *** Joins: memst[m] (~memst@2001:470:69fc:105::716)
[13:00:13] *** Joins: luc65r (~luc65r@2001:470:69fc:105::ee1)
[13:00:14] *** Joins: dittid[m] (~dittidmat@2001:470:69fc:105::789d)
[13:00:14] *** Joins: alienpinecone[m] (~alienpine@2001:470:69fc:105::35bd)
[13:00:14] *** Joins: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce)
[13:00:16] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[13:16:07] *** Joins: anotheruser (~user@45.252.191.33)
[13:18:13] *** Joins: linjie (~linjie@58.247.210.251)
[13:19:27] *** Quits: demon__ (~user@41.238.161.8) (Ping timeout: 258 seconds)
[13:22:40] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 246 seconds)
[13:42:25] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[13:53:08] *** Quits: anotheruser (~user@45.252.191.33) (Ping timeout: 268 seconds)
[13:55:01] *** Joins: rindolf (~rindolf@87.68.241.247.adsl.012.net.il)
[14:11:18] *** Quits: mickey (~user@user/mickey) (Remote host closed the connection)
[14:19:50] *** Joins: mickey (~user@user/mickey)
[14:19:57] *** Quits: Flabb (~Flabb@89.169.84.117) (Quit: Leaving)
[14:20:52] *** Quits: mickey (~user@user/mickey) (Remote host closed the connection)
[14:21:05] *** Joins: mickey (~user@user/mickey)
[14:28:07] *** Parts: racccc (~chatzilla@95.72.197.46) ()
[15:05:47] *** Joins: der_richter (~Akemi@p4fde4320.dip0.t-ipconnect.de)
[15:07:02] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[15:11:12] *** Joins: someuser (~user@41.44.100.201)
[15:26:33] *** Joins: emcodem (uid483343@id-483343.brockwell.irccloud.com)
[15:26:33] <emcodem> good morning everyone! :-)
[15:27:02] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[15:27:06] <emcodem> so when encoding to 50Mbit/s MPEG2 with IBBP GOP, fixed size of 12...
[15:27:34] <emcodem> is there a chance to influence the bitrate/bandwidth distribution between i-b and p frames?
[15:28:07] <emcodem> e.g. i want the encoder to put less bitrate on the i-frames and make the saved space available for B or P frames
[15:28:54] <emcodem> -b_qfactor does not seem to influence the I-frames but only B and P frames...
[15:41:12] *** Quits: someuser (~user@41.44.100.201) (Ping timeout: 272 seconds)
[15:41:18] *** Joins: anotheruser (~user@41.44.109.117)
[15:56:11] *** Joins: Fohsap (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b)
[16:16:38] *** Joins: darkapex (~darkapex@user/darkapex)
[16:19:31] *** Joins: rsx (~dummy@ppp-188-174-157-224.dynamic.mnet-online.de)
[16:22:20] <emcodem> qmin did the trick for me :D
[16:38:19] *** Quits: Ruxnor (kevin@user/kddlb) (Quit: Ping timeout (120 seconds))
[16:38:46] *** Joins: Ruxnor (kevin@user/kddlb)
[16:40:37] *** Quits: BUSY (~BUSY@user/busy) (Ping timeout: 256 seconds)
[16:41:58] *** Joins: BUSY (~BUSY@user/busy)
[16:52:20] *** Joins: dreamon (~dreamon@pd95038fb.dip0.t-ipconnect.de)
[16:56:54] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[17:19:22] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 272 seconds)
[17:20:05] *** Joins: linjie (~linjie@58.247.210.251)
[17:20:30] *** Quits: brontosaurusrex (~woot@user/brontosaurusrex) (Read error: Connection reset by peer)
[17:24:55] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 268 seconds)
[17:28:14] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 272 seconds)
[17:29:01] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[17:29:25] *** Joins: MrZeus_ (~MrZeus@185.195.232.146)
[17:30:09] *** Quits: MrZeus_ (~MrZeus@185.195.232.146) (Read error: Connection reset by peer)
[17:33:52] *** Joins: MrZeus (~MrZeus@2a02:c7f:a0aa:4400:91e9:10e1:d588:7b17)
[17:34:59] *** Joins: Buster_ (~Buster@46.160.36.66)
[17:35:30] *** Quits: MrZeus (~MrZeus@2a02:c7f:a0aa:4400:91e9:10e1:d588:7b17) (Read error: Connection reset by peer)
[17:36:21] *** Joins: MrZeus (~MrZeus@5ec2d429.skybroadband.com)
[17:40:28] *** Joins: darkapex (~darkapex@user/darkapex)
[17:51:02] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[17:54:35] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Remote host closed the connection)
[18:15:29] *** Quits: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883) (Ping timeout: 252 seconds)
[18:19:46] *** Quits: Buster_ (~Buster@46.160.36.66) ()
[18:20:01] *** Joins: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883)
[18:46:04] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[18:46:26] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 258 seconds)
[19:31:48] *** Joins: jess (~jess@libera/staff/jess)
[19:49:01] *** Joins: ffmct (~ffmct@108.62.52.235)
[19:49:30] *** Quits: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883) (Ping timeout: 240 seconds)
[19:49:48] *** Quits: ffmct (~ffmct@108.62.52.235) (Client Quit)
[19:53:37] *** Joins: someuser (~user@102.43.167.124)
[19:53:54] *** Joins: arcatech (~arcatech@user/arcatech)
[19:55:26] *** Quits: anotheruser (~user@41.44.109.117) (Ping timeout: 258 seconds)
[19:58:16] *** Joins: tpw_rules (~tpw_rules@li1059-135.members.linode.com)
[19:59:07] *** Joins: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883)
[19:59:37] <tpw_rules> is there any way to use ffmpeg to losslessly optimize h264 video? i have video generated by a crappy encoder and re-encoding it reduces the size by 8-10x but i'm hoping for a way to get some of the savings in less time and without actually re-encoding the video and losing any quality. tools like pngcrush and jpegoptim can do this for other formats
[20:00:09] <BtbN> That's not a thing, no.
[20:05:35] <danergo> guys! please help me with this: I have configured a h264 encoder to create frequent keyframes. I can validate it, because frametype&0x1F == 0x05, which is as per h264 docs, is a keyframe. however during reception of such frame, (by using av_read_frame), pkt.flags & AV_PKT_FLAG_KEY sometimes not true!
[20:05:48] <danergo> what can go wrong in this case?
[20:06:07] <danergo> validation happens on encoder side.
[20:06:17] <BtbN> Are you confuing I and IDR frames?
[20:06:23] <danergo> (encoder is live555)
[20:06:34] <danergo> I can request IDR only
[20:06:36] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[20:06:38] <BtbN> live555 is not a h264 encoder oO
[20:06:56] <danergo> yes, live555 uses a h264 encoder
[20:07:18] <danergo> and I can request this h264 encoder to create an IDR
[20:07:22] <BtbN> Isn't live555 an rtsp library?
[20:07:45] <danergo> and withing live555, when publishing to rtsp, I can validate that indeed, there is an IDR frame created
[20:08:00] <danergo> however, ffmpeg doesn't see that as a keyframe, at least 4.4
[20:08:54] <danergo> yes, live555 is an rtsp library, and ffmpeg is opening the rtsp stream, which encapsulates the h264 stream
[20:09:43] <BtbN> So set your desired gop length, force x264 to produce IDR frames?
[20:09:45] <danergo> there is however a probesize limitation (to minimal 32), to faster speedup (sloooow CPU)
[20:09:48] <BtbN> Don't really see the issue
[20:09:58] <danergo> yepp, I set GOP to 8
[20:10:06] <danergo> maxgop == 8
[20:10:37] <BtbN> That's incredibly short and will severely kill quality
[20:10:45] <danergo> therefore, x264 creates IDRs approximately at each 1.5s
[20:10:58] <BtbN> Huh, is that ultra low fps?
[20:11:13] <danergo> and I'm checking (pkt.flags & AV_PKT_FLAG_KEY)
[20:11:29] <danergo> and it's usually have to wait 10-15s to make it true
[20:11:37] *** Joins: anotheruser (~user@41.46.227.139)
[20:11:38] <danergo> yes, fps is 10fps
[20:11:49] <danergo> it's actually supposed to be 10fps
[20:11:57] <BtbN> a gop of 8 is 4/5 seconds then
[20:12:34] <BtbN> And like I said, twice now, you need to tell x264 to force an IDR frame every I frame. Otherwise it will only occasionally produce IDR frames, if ever.
[20:12:41] *** Quits: someuser (~user@102.43.167.124) (Ping timeout: 258 seconds)
[20:14:38] *** Joins: Guest1 (~Guest1@188.241.179.151)
[20:14:54] *** Guest1 is now known as tqylorchu
[20:14:57] <danergo> actually, at encoder side (live555 custom source): I can see loglines like this:
[20:15:07] <danergo> stream.h264RefType=0 seq=40550
[20:15:32] <danergo> with maxgop=8 IDR is created at every 50th seq
[20:15:49] <danergo> seq I believe is somekind of sequence parameter of the stream
[20:16:08] <danergo> so IDR is created at seq=50, seq=100, seq=150, etc
[20:17:01] <danergo> and, when reftype == 0, both SPS, PPS, and IDR are coming
[20:18:13] <danergo> and from a document: "In short, every IDR frame is an I-frame, but not vice versa; so there can be I-frames that aren’t IDR frames."
[20:18:13] <tqylorchu> hello, I have a command that looks like this: ffmpeg -i https://someurl/video.mp4 -filter_complex "[0:v]scale=640:360:force_original_aspect_ratio=decrease,pad=w=640:h=360,setsar=1,fps=30,format=rgb24[cam];[0:a]acopy[mic]"  -map "[cam]"" -f v4l2 /dev/video0 -map "[mic]" -f pulse -device virtual_mic_input PlayAudio
[20:18:28] <danergo> IDR seems stronger than "normal" I
[20:18:35] <tqylorchu> it tries to play a mp4 to a virtual camera and a mic.
[20:19:09] <tqylorchu> but periodically, the audio will drop. I think it is waiting for video.
[20:19:29] <tqylorchu> do you guys have a way to work around this?
[20:20:00] <tqylorchu> I can see that audio becomes too ahead of the video, and then the audio drops.
[20:20:30] <tqylorchu> after 1-2s, they are in sync, and then the audio plays again. this repeats during playback.
[20:20:33] <BtbN> danergo, live555 is not the encoder. So I'm somewhat confused what you're talking about.
[20:24:56] <danergo> encoder lives in the camera, and I have created a custom v4l device source to live555. this custom v4ldevicesource can interact with the cam's x264 with their (not-too-open)-API, and can change parameters like max GOP, and request IDR among others
[20:25:27] <BtbN> And how is ffmpeg involved with that?
[20:25:28] <danergo> currently I'm not requesting and IDRs at all, I just have changed maxgop to 8
[20:25:47] <danergo> and then I want to remux this to fmp4, here comes ffmpeg
[20:25:59] *** Joins: MrZeus_ (~MrZeus@5ec2d429.skybroadband.com)
[20:26:06] <danergo> I'm using movenc, with +frag_keyframe
[20:26:17] <BtbN> You will have to consult with the manual and support of that camera to get it to produce proper keyframes then
[20:26:18] <danergo> but it seems ffmpeg doesn't see the keyframes :(
[20:26:22] <BtbN> ffmpeg can't fix that without re-encoding
[20:26:48] <danergo> how is a proper I-frame differs from a proper IDR? :)
[20:26:49] *** Joins: finsternis (~X@23.226.237.192)
[20:27:05] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[20:27:08] <BtbN> An I frame does not contain all info to start decoding there
[20:27:12] <BtbN> that's what an IDR frame is for
[20:27:38] <danergo> yes, and IDRs are seem to be created actually (at least by only investigation of frame types)
[20:27:55] <danergo> so it must be enough to start the decoding
[20:28:08] <danergo> (and actually, VLC just plays it nice and smooth)
[20:28:17] <BtbN> Well, it must be doing something that makes ffmpeg not recognize them as key frames
[20:28:47] *** Quits: MrZeus (~MrZeus@5ec2d429.skybroadband.com) (Ping timeout: 258 seconds)
[20:28:55] <danergo> can you point me where ffmpeg decides a packet if it's a keyframe or not?
[20:29:10] <danergo> I can find it for myself if you don't know by head don't worry :)
[20:29:33] *** Joins: ReedK0_ (~Muimi@119.112.254.166)
[20:33:20] *** Quits: Fohsap (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b) (Ping timeout: 255 seconds)
[20:33:26] *** Quits: ReedK0_ (~Muimi@119.112.254.166) (Remote host closed the connection)
[20:34:49] *** Joins: pulec (~pulec@user/pulec)
[20:35:36] <pulec> hi, is there some tool using ffmpeg or maybe function in ffmpeg that can determine some kind of "ratio" for video's bitrate/size/overall_quality?
[20:36:37] <pulec> in other words, I'm going through my videos and doing '-c:v hevc_vaapi -qp 28' convert, sometimes -qp 32 or so
[20:36:51] <pulec> then comparing the new sizes compared to the old codec and bitrate
[20:37:01] <pulec> as well as screenshoting few frames and comparing them
[20:38:13] <pulec> I'm thinking about script going through few files, determining that "ratio" and if it's not satisfactory try some encoding samples with -qp [23-32] to determine optimal -qp for the type of video
[20:39:11] <pulec> some videos are static scenes (e.g. indie strategies like Mini Metro, Rebels/Plague Inc.) , some are dynamic action like Hades
[20:39:34] * pulec is recording most of the playthroughs, converting 20gb's to 5gb and uploading through glorious 2mbit
[20:48:04] *** Quits: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu) (Ping timeout: 265 seconds)
[20:48:52] <danergo> hm. it seems ffmpeg can detect the keyframes correctly. but my customIO libav with `av_read_frame` doesn't do that :O
[20:53:31] *** Joins: linjie (~linjie@58.247.210.251)
[20:56:12] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[21:01:20] *** Joins: keypusher (~keypusher@user/keypusher)
[21:04:42] *** Joins: keypushe- (keypusher@user/keypusher)
[21:05:57] *** Quits: keypusher (~keypusher@user/keypusher) (Ping timeout: 265 seconds)
[21:07:58] *** keypushe- is now known as keypusher
[21:09:06] *** Joins: thebombzen_ (~thebombze@rrcs-98-102-40-30.central.biz.rr.com)
[21:09:17] *** Parts: thebombzen_ (~thebombze@rrcs-98-102-40-30.central.biz.rr.com) ()
[21:10:03] *** Joins: thebombzen_ (~thebombze@rrcs-98-102-40-30.central.biz.rr.com)
[21:15:58] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[21:16:30] *** Joins: linjie (~linjie@58.247.210.251)
[21:18:17] *** Joins: rocktop (~rocktop@105.155.77.75)
[21:25:25] *** Joins: KombuchaKip (~kip@192.252.230.5)
[21:28:00] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[21:28:39] *** Quits: rsx (~dummy@ppp-188-174-157-224.dynamic.mnet-online.de) (Quit: rsx)
[21:30:17] *** Joins: MrZeus__ (~MrZeus@37.120.156.249)
[21:33:57] *** Quits: MrZeus_ (~MrZeus@5ec2d429.skybroadband.com) (Ping timeout: 258 seconds)
[21:34:25] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[21:34:57] *** Joins: linjie (~linjie@58.247.210.251)
[21:38:55] *** Quits: jos2 (~jos3@dyndsl-091-096-041-232.ewe-ip-backbone.de) ()
[21:39:47] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[21:40:10] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Ping timeout: 252 seconds)
[21:46:23] *** Parts: tpw_rules (~tpw_rules@li1059-135.members.linode.com) (Textual IRC Client: www.textualapp.com)
[22:02:43] *** Quits: jschwart (~quassel@2001:985:2c6e:0:b00b:32ff:fe28:5567) (Read error: Connection reset by peer)
[22:03:00] *** Joins: jschwart (~quassel@2001:985:2c6e:0:b00b:32ff:fe28:5567)
[22:03:59] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[22:05:23] *** Joins: imuo (~imuo@cpe-174-100-53-99.neo.res.rr.com)
[22:10:31] *** Joins: linjie (~linjie@58.247.210.251)
[22:12:40] <tqylorchu> how do you solve filter_complex video audio desync issue?
[22:15:06] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 268 seconds)
[22:16:18] *** Parts: Polochon_street (~polochon@2001:41d0:a:64a5::1) (Leaving)
[22:17:23] <wyatt8740> depends on how it's desyncing, as useless as that reply may sound
[22:19:31] <tqylorchu> for me, play mp4 with select audio is fine. but playing with filter + video + audio results in periodically dropped audio until video and audio are synced again.
[22:22:11] *** Quits: thebombzen_ (~thebombze@rrcs-98-102-40-30.central.biz.rr.com) (Quit: attack.c:4: main: Assertion `I_can_beat_that_monster' failed. Aborted (core dumped))
[22:29:18] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[22:29:26] *** Joins: Harzilein (harzi@user/harzilein)
[22:29:27] <Harzilein> hi
[22:29:48] <Harzilein> completely fictional example ;), but, should it work?:
[22:30:07] <Harzilein> ffmpeg -i https://zdf-hls-15.akamaized.net/hls/live/2016498/de/veryhigh/master.m3u8 -acodec libopus -vcodec libvpx icecast://user-pc:hackmemore[b1rdy]@harzilein.eu.org:8000/my-complex.webm
[22:30:20] <Harzilein> oops
[22:30:22] <Harzilein> :D
[22:30:35] <Harzilein> insert <redacted> instead of the password please :D
[22:31:36] *** Joins: vlm (~vlm@user/vlm)
[22:32:44] <Harzilein> passwords changed in config to protect the guilty
[22:35:12] * APic grins magically.
[22:46:01] *** Joins: shibboleth (~shibbolet@gateway/tor-sasl/shibboleth)
[22:49:05] *** Joins: Kacper_ (~kasper93@89-74-110-199.dynamic.chello.pl)
[22:50:14] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 258 seconds)
[22:50:14] *** Kacper_ is now known as kasper93
[22:50:25] *** Quits: rocktop (~rocktop@105.155.77.75) (Quit: Leaving)
[22:51:32] *** Joins: Kacper_ (~kasper93@89-74-110-199.dynamic.chello.pl)
[22:54:42] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 265 seconds)
[22:54:42] *** Kacper_ is now known as kasper93
[22:55:36] *** Joins: jos1 (~jos3@dyndsl-091-096-041-232.ewe-ip-backbone.de)
[23:03:07] *** Quits: tqylorchu (~Guest1@188.241.179.151) (Quit: Client closed)
[23:10:12] *** Joins: zmt00 (~zmt00@user/zmt00)
[23:12:45] *** Quits: zmt01 (~zmt00@user/zmt00) (Ping timeout: 256 seconds)
[23:21:20] *** Joins: linjie (~linjie@58.247.210.251)
[23:23:30] *** Joins: klepz (~klepz@2804:7f1:ea80:a859:15d8:7359:d823:baa4)
[23:26:04] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 272 seconds)
[23:28:02] *** Joins: Terrence (~Terrence@097-085-185-009.biz.spectrum.com)
[23:33:33] <Terrence> Does anyone think they can help me understand something I may be doing wrong with encoding an audio file? I'm trying to encode EVERY frame from an audio file that's about 40 seconds long. I've set the number of samples, number of channels, channel layout, sample rate, and sample format of the output the same as the input but after running the loop
[23:33:34] <Terrence> on every frame the output file is for some reason only 38 seconds? Anyone happen to know why this might be the case?
[23:39:19] <kepstin> possibly you're not flushing the decoder or encoder?
[23:39:57] <kepstin> after feeding all the packets or frames to an encoder or decoder, you have to send a "NULL" packet or frame to tell the codec that the file's done, and it should flush any buffered data.
[23:40:39] <Terrence> Yeah I did flush the encoder
[23:40:51] <Terrence> One second I'll show you my program
[23:41:17] <Terrence> Can't seem to find why this is happening unless I'm not reading every frame somehow
[23:43:22] <Terrence> https://pastebin.com/kKP2jhm7
[23:44:17] <Terrence> In this snippet of the code, you can see that it receives every frame from the input, filters it, but still should be encoding every frame
[23:44:37] <Terrence> At the completion of the loop, I flush the encoder
[23:45:18] <kepstin> it doesn't look like you're flushing the decoder
[23:45:33] <kepstin> I'm also not sure if the filter chain might need flushing too?
[23:45:48] <kepstin> (i don't program using filters much, so i don't know how you'd do that)
[23:46:45] <Terrence> I am flushing the encoder
[23:46:48] <Terrence> "EncodeAndWrite(NULL, outputFormatContext, outputCodecContext);"
[23:46:52] <Terrence> on the very last line
[23:47:08] <Terrence> https://pastebin.com/duKEGkHh
[23:47:25] <Terrence> These are the helper functions I'm using to encode and write the packets to the output file
[23:47:40] <Terrence> And no I dont believe the filter chain needs to be flushed
[23:47:52] <Terrence> All I do is free the filtergraph
[23:48:08] <Terrence> kepstin
[23:48:33] *** Joins: blerd (blerd@71.182.169.24)
[23:48:39] <kepstin> filters in a filterchain can internally buffer frames and add delay, so i think it does need to be flushed
[23:49:06] <Terrence> Oh interesting
[23:56:35] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 252 seconds)
[23:57:21] *** Joins: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu)
[23:58:21] <Terrence> https://ffmpeg.org/doxygen/trunk/transcoding_8c_source.html
[23:58:31] <Terrence> Flushing the filter takes place on line 581 correct?
