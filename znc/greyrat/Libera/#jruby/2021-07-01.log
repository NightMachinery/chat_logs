[00:04:29] <headius> https://github.com/jruby/jruby/pull/6731
[00:04:31] <headius> that seems to work ok
[00:04:42] <headius> similar change will be needed in launcher so I will look into that too ðŸ™„
[00:06:57] <byteit101[m]> > looks like byteit101 identified a problem but not sure if any moves have been made to fix it
[00:06:57] <byteit101[m]> No moves, I wasn't sure how to fix. The super search algorithm was very confusing to me when implementing my changes, and I am surprised I got it working as much as I did
[00:07:05] <byteit101[m]> > and who uses java without JAVA_HOME I mean come on seriously
[00:07:05] <byteit101[m]> _raises hand_
[00:07:49] <headius> hah but you are on Linux no?
[00:08:03] <headius> it is mostly just annoying that MacOS does not set a default JAVA_HOME for the default JDK
[00:08:06] <byteit101[m]> yes, debian
[00:08:24] <headius> yeah on linux at least we can traverse the java symlink to find JDK
[00:10:18] <byteit101[m]> Probably a good idea to add a test for 6718 once fixed. easy enough with my minimal repro
[00:10:20] <byteit101[m]> 6718
[00:21:21] <headius> for sure
[00:37:28] <headius> ahh it is a symlink but to another useless location
[00:37:29] <headius> $ ls -l /usr/bin/java
[00:37:29] <headius> lrwxr-xr-x  1 root  wheel  74 Sep 24  2019 /usr/bin/java -> /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java
[00:37:45] <headius> so we end up with JAVA_HOME = something weird in that path
[00:41:27] <headius> byteit101: do you have a java_home command anywhere?
[00:41:35] <headius> I thought I remembered something like that under debian java alternatives
[00:59:58] <headius> https://github.com/jruby/jruby-launcher/pull/38
[01:28:21] <headius> weird failure in the jruby PR, not sure how my  change could have caused this
[01:28:26] <headius> https://github.com/jruby/jruby/pull/6731
[01:28:46] <headius> only travis so I have to wonder if it is just travis
[01:32:12] <headius> works fine locally... something with linux maybe
[01:52:59] <byteit101[m]> headius: no
[01:53:00] * byteit101[m]  < https://libera.ems.host/_matrix/media/r0/download/libera.chat/00280b4df3c2cbd72d24e154c3d9efa24a463e18/message.txt >
[01:54:20] <headius> hmmm I do not know why this change breaks CI
[01:56:19] <headius> byteit101: thanks
[01:56:27] <headius> something wrong with my bash logic here
[02:16:29] <basshelal[m]> headius: Don't forget to let me know which projects you want to be upgraded to JUnit5
[02:38:19] *** Quits: TimGitter[m] (~gittertir@2001:470:69fc:105::314f) (Remote host closed the connection)
[02:38:19] *** Quits: liamwhiteGitter[ (~gitterlia@2001:470:69fc:105::312d) (Remote host closed the connection)
[02:38:19] *** Quits: byteit101[m] (~byteit101@2001:470:69fc:105::30ec) (Remote host closed the connection)
[02:38:20] *** Quits: lopex[m] (~lopexm]@2001:470:69fc:105::3158) (Read error: Connection reset by peer)
[02:38:21] *** Quits: Hao[m] (~huhao1987@2001:470:69fc:105::3f8a) (Remote host closed the connection)
[02:38:21] *** Quits: CharlesOliverNut (~gitterhea@2001:470:69fc:105::311e) (Remote host closed the connection)
[02:38:21] *** Quits: onghu[m] (~onghumatr@2001:470:69fc:105::3db3) (Remote host closed the connection)
[02:38:21] *** Quits: OlleJonssonGitte (~gitteroll@2001:470:69fc:105::313b) (Remote host closed the connection)
[02:38:21] *** Quits: KarolBucekGitter (~gitterkar@2001:470:69fc:105::3127) (Remote host closed the connection)
[02:38:21] *** Quits: enick_958 (~appservic@2001:470:69fc:105::93) (Write error: Connection reset by peer)
[02:38:23] *** Quits: BlaneDabneyGitte (~gitterrae@2001:470:69fc:105::3140) (Remote host closed the connection)
[02:38:23] *** Quits: fzakaria[m] (~fzakariam@2001:470:69fc:105::30f6) (Remote host closed the connection)
[02:38:23] *** Quits: olleolleolle[m] (~olleolleo@2001:470:69fc:105::3170) (Remote host closed the connection)
[02:38:23] *** Quits: kares[m] (~karesmatr@2001:470:69fc:105::30d1) (Remote host closed the connection)
[02:38:23] *** Quits: RomainManni-Buca (~gitterrma@2001:470:69fc:105::3146) (Remote host closed the connection)
[02:38:23] *** Quits: donv[m] (~donvmatri@2001:470:69fc:105::3d93) (Remote host closed the connection)
[02:38:23] *** Quits: JulesIvanicGitte (~gittergui@2001:470:69fc:105::3118) (Remote host closed the connection)
[02:38:23] *** Quits: MattPattersonGit (~gitterfid@2001:470:69fc:105::3105) (Remote host closed the connection)
[02:38:23] *** Quits: rtyler[m] (~rtylermat@2001:470:69fc:105::30d5) (Remote host closed the connection)
[02:38:23] *** Quits: kalenp[m] (~kalenpmat@2001:470:69fc:105::3153) (Remote host closed the connection)
[02:38:23] *** Quits: TimGitter[m]1 (~gittertim@2001:470:69fc:105::314b) (Remote host closed the connection)
[02:38:23] *** Quits: mattpatt[m] (~mattpattm@2001:470:69fc:105::315d) (Remote host closed the connection)
[02:38:23] *** Quits: MarcinMielyskiGi (~gitterlop@2001:470:69fc:105::3134) (Remote host closed the connection)
[02:38:23] *** Quits: XavierNoriaGitte (~gitterfxn@2001:470:69fc:105::3111) (Remote host closed the connection)
[02:38:23] *** Quits: UweKuboschGitter (~gitterdon@2001:470:69fc:105::3100) (Remote host closed the connection)
[02:38:23] *** Quits: basshelal[m] (~basshelal@2001:470:69fc:105::30e7) (Remote host closed the connection)
[02:38:23] *** Quits: kai[m]1 (~kaikdeorg@2001:470:69fc:105::c43) (Remote host closed the connection)
[02:38:24] *** Quits: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22) (Read error: Connection reset by peer)
[02:38:24] *** Quits: FlorianDoubletGi (~gitterflo@2001:470:69fc:105::310c) (Remote host closed the connection)
[02:38:24] *** Quits: headius (~headius@2001:470:69fc:105::3027) (Remote host closed the connection)
[02:38:24] *** Quits: dan64[m] (~dan64matr@2001:470:69fc:105::407e) (Remote host closed the connection)
[02:38:24] *** Quits: RobertNicholas[m (~nicholasr@2001:470:69fc:105::3167) (Remote host closed the connection)
[02:38:24] *** Quits: TestAccount[m] (~testaccep@2001:470:69fc:105::30da) (Remote host closed the connection)
[02:38:25] *** Quits: ChrisSeatonGitte (~gitterchr@2001:470:69fc:105::30fb) (Remote host closed the connection)
[02:38:25] *** Quits: ahorek[m] (~ahorekmat@2001:470:69fc:105::30e2) (Remote host closed the connection)
[02:38:25] *** Quits: mrtommy[m] (~mrtommyma@2001:470:69fc:105::3161) (Remote host closed the connection)
[02:38:25] *** Quits: JesseChavezGitte (~gitterjes@2001:470:69fc:105::3122) (Remote host closed the connection)
[02:38:25] *** Quits: worldnamer[m] (~worldname@2001:470:69fc:105::381f) (Remote host closed the connection)
[02:38:25] *** Quits: edipofederle[m] (~edipofede@2001:470:69fc:105::30f1) (Remote host closed the connection)
[02:38:26] *** Quits: enebo[m] (~enebo@2001:470:69fc:105::e6) (Remote host closed the connection)
[02:38:26] *** Quits: AdamGordonBell[m (~adamgordo@2001:470:69fc:105::30de) (Remote host closed the connection)
[02:40:04] *** Joins: AdamGordonBell[m (~adamgordo@2001:470:69fc:105::30de)
[02:45:06] *** Joins: headius (~headius@2001:470:69fc:105::3027)
[02:45:07] <headius> https://github.com/jruby/jruby/pull/6731
[02:45:07] <headius> ugh I can't see a problem with this... anyone on Linux can reproduce the failures in this travis job using my PR?
[02:45:30] <headius> the patch should be simple to apply locally... apply, rebuild or copy bin/jruby.bash to bin/jruby
[02:45:38] <headius> it bundle installs ok and rspec installs but then it doesn't seem to be available for rake tasks
[02:45:46] <headius> https://travis-ci.com/github/jruby/jruby/jobs/520635013
[02:45:47] <headius> like that one
[02:46:11] <headius> basshelal: I can handle JRuby and others but if you want to go through the jnr projects that would be great
[02:46:45] <headius> I will look at your changes later and try to apply the same to non-JNR projects (I hate the current test output because it is useless on remote CI)
[02:47:17] *** Joins: RobertNicholas[m (~nicholasr@2001:470:69fc:105::3167)
[02:47:18] <RobertNicholas[m> you can always add `gem list` in after it installs them
[02:47:36] <RobertNicholas[m> the only thing I can think is the gems are being installed in a different ruby than the one it's using
[02:48:01] <headius> yeah I can't repro on a local ubuntu VM which should be pretty close to travis... it works fine
[02:48:16] <headius> commenting out those lines makes it work, but why would they affect anything
[02:48:29] <headius> there is no /usr/libexec/java_home on my u
[02:48:31] <headius> ubuntu env
[02:49:26] <RobertNicholas[m> I'd put `gem env` into the pipeline and `GEM_PATH=/home/travis/.gem/jruby/2.5.0:/home/travis/build/jruby/jruby/lib/ruby/gems/shared gem list`
[02:49:52] <RobertNicholas[m> more than likely the gems are being installed in a system ruby instead of at `/home/travis/.gem/jruby/2.5.0:/home/travis/build/jruby/jruby/lib/ruby/gems/shared`
[02:50:32] <headius> it's not a bad theory, I just don't know how my patch could cause that
[02:51:57] <headius> UGH ok maybe it was a travis problem
[02:52:02] <headius> it is green with latest push
[02:52:05] <headius> enebo: TRAVIS
[02:52:19] <RobertNicholas[m> switch to gitlab ðŸ˜†
[02:52:40] <headius> we need to get off travis... this happens almost weekly
[02:52:55] <headius> unexplainable failures
[02:53:03] <RobertNicholas[m> gitlab is super easy to setup
[02:53:31] <RobertNicholas[m> moved all our stuff to it 6 months ago and have never looked back, just wish the company I work for would do the same ðŸ¤£
[02:53:38] *** Joins: enebo[m] (~enebo@2001:470:69fc:105::e6)
[02:53:38] *** Joins: kai[m]1 (~kaikdeorg@2001:470:69fc:105::c43)
[02:53:39] *** Joins: lopex[m] (~lopexm]@2001:470:69fc:105::3158)
[02:53:39] *** Joins: MatrixTravelerbo (~voyagert2@2001:470:69fc:105::22)
[02:53:39] *** Joins: enick_654 (~appservic@2001:470:69fc:105::93)
[02:53:50] *** Joins: edipofederle[m] (~edipofede@2001:470:69fc:105::30f1)
[02:53:50] *** Joins: XavierNoriaGitte (~gitterfxn@2001:470:69fc:105::3111)
[02:53:50] *** Joins: CharlesOliverNut (~gitterhea@2001:470:69fc:105::311e)
[02:53:50] *** Joins: UweKuboschGitter (~gitterdon@2001:470:69fc:105::3100)
[02:53:50] *** Joins: JulesIvanicGitte (~gittergui@2001:470:69fc:105::3118)
[02:53:50] *** Joins: JesseChavezGitte (~gitterjes@2001:470:69fc:105::3122)
[02:53:50] *** Joins: KarolBucekGitter (~gitterkar@2001:470:69fc:105::3127)
[02:53:50] *** Joins: ahorek[m] (~ahorekmat@2001:470:69fc:105::30e2)
[02:53:50] *** Joins: basshelal[m] (~basshelal@2001:470:69fc:105::30e7)
[02:53:50] *** Joins: fzakaria[m] (~fzakariam@2001:470:69fc:105::30f6)
[02:53:50] *** Joins: FlorianDoubletGi (~gitterflo@2001:470:69fc:105::310c)
[02:53:50] *** Joins: MarcinMielyskiGi (~gitterlop@2001:470:69fc:105::3134)
[02:53:50] *** Joins: OlleJonssonGitte (~gitteroll@2001:470:69fc:105::313b)
[02:53:50] *** Joins: TimGitter[m] (~gittertim@2001:470:69fc:105::314b)
[02:53:50] *** Joins: byteit101[m] (~byteit101@2001:470:69fc:105::30ec)
[02:53:50] *** Joins: MattPattersonGit (~gitterfid@2001:470:69fc:105::3105)
[02:53:50] *** Joins: BlaneDabneyGitte (~gitterrae@2001:470:69fc:105::3140)
[02:53:50] *** Joins: TimGitter[m]1 (~gittertir@2001:470:69fc:105::314f)
[02:53:50] *** Joins: ChrisSeatonGitte (~gitterchr@2001:470:69fc:105::30fb)
[02:53:50] *** Joins: liamwhiteGitter[ (~gitterlia@2001:470:69fc:105::312d)
[02:53:50] *** Joins: RomainManni-Buca (~gitterrma@2001:470:69fc:105::3146)
[02:53:50] *** Joins: kares[m] (~karesmatr@2001:470:69fc:105::30d1)
[02:53:51] *** Joins: kalenp[m] (~kalenpmat@2001:470:69fc:105::3153)
[02:53:51] *** Joins: mattpatt[m] (~mattpattm@2001:470:69fc:105::315d)
[02:53:51] *** Joins: dan64[m] (~dan64matr@2001:470:69fc:105::407e)
[02:53:51] *** Joins: Hao[m] (~huhao1987@2001:470:69fc:105::3f8a)
[02:53:51] <headius> yeah moving away from github is probably not feasible right now but I should start doing my other projects at gitlab
[02:53:51] *** Joins: olleolleolle[m] (~olleolleo@2001:470:69fc:105::3170)
[02:53:51] *** Joins: TestAccount[m] (~testaccep@2001:470:69fc:105::30da)
[02:53:51] *** Joins: onghu[m] (~onghumatr@2001:470:69fc:105::3db3)
[02:53:51] *** Joins: mrtommy[m] (~mrtommyma@2001:470:69fc:105::3161)
[02:53:52] *** Joins: rtyler[m] (~rtylermat@2001:470:69fc:105::30d5)
[02:53:52] *** Joins: worldnamer[m] (~worldname@2001:470:69fc:105::381f)
[02:53:52] *** Joins: donv[m] (~donvmatri@2001:470:69fc:105::3d93)
[02:54:51] <RobertNicholas[m> you can always mirror the repository, though I suppose for outsiders working on jruby that might complicate things
[02:55:20] <RobertNicholas[m> that's what I do with rubycore, it's mirrored from gitlab > github https://github.com/nicholasrobertm/RubyCore
[02:55:56] <RobertNicholas[m> but whatever you do don't use github actions, if you think travis is bad ðŸ˜†
[03:05:30] <headius> why do you say that?
[03:05:39] <headius> we have used some GHA so far and it is at least more reliable than Travis
[03:10:54] <RobertNicholas[m> we use it heavily at work, have had 6 outages (longer than an hour) in the past 2 months, it doesn't have a way to add non-secret values to your projects as variables, you can't modify secrets after they've been created, having proper manual triggered pipelines is hidden behind a only half working beta feature. You can self-host their runners but the runners don't work when actions goes down anyway, there's a ton more lmao
[03:14:38] <headius> hmm yeah that does sound unpleasant
[03:18:44] <headius> ok well I merged in the fix for jruby.bash and pushed a new jruby-launcher gem with that fix
[03:18:51] <headius> doesn't feel like a productive day
[03:18:55] <headius> bbl
[07:01:00] *** Quits: lucf117 (~lucf117@user/lucf117) (Remote host closed the connection)
[13:14:26] *** Quits: AdamGordonBell[m (~adamgordo@2001:470:69fc:105::30de) (Quit: node-irc says goodbye)
[19:55:10] <headius> good morning!
[20:04:52] <basshelal[m]> good morning
[20:05:39] <headius> taking a moment to check our pass rates on JDK16 since that release made illegal access "deny" by default
[20:05:41] <headius> so far looks fine
[20:07:03] <basshelal[m]> I tried to move JFFI to JUnit5 but that was embarrassing, might be hard for me but might not even be as useful since it's more C than Java anyway
[20:07:03] <basshelal[m]> JNR-POSIX is tricky too I think but I'm a little exhausted for it
[20:07:30] <headius> yeah the jffi stuff is a little more involved
[20:32:16] <basshelal[m]> I posted a new issue on JNR-FFI regarding a benchmarking suite, let me know what you think
[21:00:44] <basshelal[m]> https://github.com/jnr/jnr-ffi/issues/253
[21:01:35] <headius> ok
[21:02:01] <headius> enebo: are you able to run our rake tasks on master?
[21:02:18] <headius> I am getting a weird error from the ant stuff, ant.path does not exist so the build doesn't load
[21:02:47] <enebo[m]> Did anything change since yesterday?
[21:03:06] <headius> I don't think so but I had not run anything since back from vacay
[21:03:28] <headius> it appears to be green on travis so I assume it is just my env
[21:03:41] <enebo[m]> I had run spec:ruby:fast yesterday afternoon and it was a branch I just made
[21:03:58] <enebo[m]> there were some commits during the day yesterday so I am rebuilding
[21:04:03] <enebo[m]> I am using Java 8 too
[21:04:06] <headius> hmm ok
[21:04:18] <headius> NoMethodError: undefined method `path' for nil:NilClass
[21:04:18] <headius> Did you mean?  mkpath
[21:04:18] <headius> /Users/headius/projects/jruby/rakelib/commands.rake:10:in `initialize_paths'
[21:04:20] <enebo[m]> any particular one you want?
[21:04:26] <enebo[m]> any at all
[21:04:28] <headius> NoMethodError: undefined method `path' for nil:NilClass
[21:04:28] <headius> Did you mean?  mkpath
[21:04:28] <headius> /Users/headius/projects/jruby/rakelib/commands.rake:10:in `initialize_paths'
[21:04:38] <headius> any at all really but I was running spec"ruby"fast
[21:04:41] <headius> ::
[21:05:05] <enebo[m]> yeah.  running now
[21:05:17] <headius> ok something is screwed up here then
[21:05:44] <enebo[m]> I thought someone said something about later Javas and ant not working but this would not appear to be that
[21:06:08] <headius> I think I found it
[21:06:20] <headius> I had a rogue ant.jar in lib/ probably from my experiments trying to fully modularize
[21:06:23] <headius> so it was loading that instead of the ext
[21:06:36] <headius> might need to scrub this env soon
[21:07:13] <headius> I wanted to push a PR that enables some suites on JDK16 since that one denies all illegal access by default
[21:07:32] <headius> good to know before release that things pass the same on 16 as they do currently on 14
[21:15:03] <headius> I pushed 14 to 16 move for travis which should be basically a no-op, but I will also add JDK16 runs to GHA
[21:15:42] <enebo[m]> cool
[21:17:05] <headius> there were a couple other tweaks for that MacOS no-JAVA_HOME thing last night but it should be fixed everywhere now
[21:17:10] <headius> pushed a new launcher with the change
[21:17:29] <headius> windows could use a new exe but it did not touch any windows code paths
[21:31:16] <headius> hmmm the GHA builds will be a problem because the Ruby plugins still run with an old version of JRuby that does not behave well
[21:31:31] <headius> seems to be failing booting up some of the dist testing stuff
[21:35:08] <headius> I think I will punt on the GHA builds until 9.3 is out, so we can move the plugins to that release
[21:35:25] <headius> not sure how else to make it work other than running maven with a bunch of module flags that might taint results
[21:42:07] <headius> enebo: we should start talking about what remaining items to push to 9.3.1 so we can get this thing 9.3 out by end of July
[21:42:38] <headius> like getting down to just critical items: autoload regression, memory/stack problems in JI
[21:42:52] <headius> or rather perhaps we should be talking about minimum remaining work to get 9.3 out
[21:43:09] <headius> we know it will require many update releases once people actually start testing it anywa
[21:53:30] <headius> enebo: I told that DirkMahler to do the JarCache improvements on 9.2 since that will be the one asciidoctor and other key embedders use for quite a while still
[21:53:51] <headius> in service of that I backported a commit from last year that fixed the weak/soft cache issue: https://github.com/jruby/jruby/pull/6734
[22:10:44] *** Joins: architecture[m] (~architect@2001:470:69fc:105::6936)
[22:12:45] <enebo[m]> headius: yeah looking through the last 54 issues most of them seem puntable to me.  I will fix the case/when logic.  There is some coverageish stuff we are really lacking on but that is partially a problem since 2.5
[22:21:15] <headius> yeah punt away
[22:21:22] <headius> 9.3.1 or 9.4 for stretch goals
[22:21:42] <headius> coverage would be a good 9.3.1 job
[22:21:44] <headius> or 9.3.x
[22:22:00] <headius> we have only gotten a few reports about it so I am not sure how heavily it is used
[22:23:21] <enebo[m]> You opened a lot of it would be nice bugs like https://github.com/jruby/jruby/issues/5862
[22:23:46] <enebo[m]> You may want to take a pass over these and mark milestones on this class of issues that you opened
[22:28:16] <headius> ok
[22:28:26] <headius> pretty much all of my would be nice will be 9.4
[22:57:39] <headius> enebo: I did a first pass for 9.4 moves, down to 43 open
[22:57:57] <headius> we need to review PRs also... there are some nice to haves and a bunch of stale red PRs
[22:58:07] <headius> you have one for nanosecond time for example that is green
[23:01:40] <headius> enebo: I will punt all coverage related stuff to 9.3.1
[23:02:11] <headius> that requires work from both your end and mine so it clearly won't happen for .0 but we might be able to get it working before 9.4
[23:02:43] <enebo[m]> sure I think 9.4 is fine for it since I barely even remember what it is and I have had doubts about it ever since :)
[23:03:01] <headius> mostly things like branch and code block coverage etc
[23:03:14] <headius> just finer-grained tracking, not sure what is different in CRuby to support that tracking
[23:03:28] <enebo[m]> those for sure I don't think are needed we can put in notes we plan on working on them later
[23:03:40] <enebo[m]> release notes on what is not there
[23:04:31] <enebo[m]> When I started looking at those two issues I could see we may need more metadata about code than what we are capturing to know it is in a method or a block or whatnot
[23:04:52] <enebo[m]> branching I did not even think about
[23:07:08] <headius> down to 33 open I want to review in detail
[23:07:09] <headius> 14 PRs
