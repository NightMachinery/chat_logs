[00:13:26] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[00:40:59] <Joel> Cl0udNinja ansible?
[00:41:47] <Joel> though, if it's the 'snapshotting' piece you're having trouble with, it won't help, not clear where you're struggling
[00:50:44] <Cl0udNinja> the problem is that there are no packer builders (save for aws-ebssurrogate) that support this kind of chroot-like install method, where the image is made from the second disk, and not the OS disk
[00:52:07] *** Joins: justsomeguy (~justsomeg@user/justsomeguy)
[01:15:11] *** Joins: X-Scale` (~ARM@165.201.137.78.rev.vodafone.pt)
[01:16:51] *** Quits: X-Scale (~ARM@31.22.202.54) (Ping timeout: 250 seconds)
[01:18:24] *** X-Scale` is now known as X-Scale
[01:24:46] <justsomeguy> If you had the opportunity to have a conversation with your past self about the best way to learn devops, what would you say? ... I'm thinking of carving out a considerable amount of time to learn this stuff, and I don't have much background. (A little python and basic linux sysadmin stuff. I have a Linux+ and RHCSA, set up a home backup server, no work experience.)
[01:24:52] <kwilczynski> Cl0udNinja: There are some community builders, such as https://github.com/summerwind/packer-builder-qemu-chroot
[01:25:29] <Cl0udNinja> yeah, but not for the big providers and such unfortunately
[01:26:13] <kwilczynski> Cl0udNinja: Perhaps there is also a way to leverage Null builder, which could run scripts/things to carry out the build on the second volume, but it does not start any VMs and so in itself.
[01:28:46] *** Quits: justsomeguy (~justsomeg@user/justsomeguy) (Quit: WeeChat 3.3)
[01:32:41] <kwilczynski> Cl0udNinja: If you plan to use this long-term, then you can write a custom Builder. It's quite easy to do so.
[01:43:46] <kwilczynski> Cl0udNinja: What cloud/system is it? If you can share this.
[01:44:08] <kwilczynski> Cl0udNinja: I wonder whether re-using a lot of what ebssurrogate offers would be possible.
[01:46:48] <Cl0udNinja> gcp and azure
[01:46:55] <Cl0udNinja> eventually more too I would guess
[01:59:33] <kwilczynski> And the azure-chroot is not good?
[02:00:58] *** Quits: menace (~someone@user/menace) (Quit: menace)
[02:04:55] *** Quits: voices- (~voices_@84.238.197.28) (Remote host closed the connection)
[02:05:48] <Cl0udNinja> nope, it doesnt work the way you'd think it works
[02:05:59] <Cl0udNinja> or doesnt operate like aws-ebssurrogate anyway
[02:06:17] <Cl0udNinja> it assumes you have an instance already running vs creating an instance, and discarding it
[02:09:43] <kwilczynski> I see.
[02:10:05] <kwilczynski> Bummer they didn't think of making a different one that can do imaging end-to-end.
[02:11:09] <kwilczynski> Cl0udNinja: It seems like one has to combine AzureRM code with the EBS surrogate/Azure chroot code.
[02:11:09] <kwilczynski> :)
[02:24:03] <Cl0udNinja> yeah... you mentioned its not terrible to write a builder, like, what would you say on a scale of 1-10 for a mediocre python scripter
[02:26:34] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:858f:f39:62d8:4ca7) (Quit: smeeagle)
[02:44:29] <kwilczynski> Cl0udNinja: Not sure. It would be in Go, so depends on how comfortable you are with it.
[02:45:02] <Cl0udNinja> oh..
[02:45:11] <Cl0udNinja> well. thats a whole other game.. I've never touched go
[02:50:28] <kwilczynski> Cl0udNinja: Good time to learn!
[02:52:07] <Cl0udNinja> if I do that I dont know what I'll forget
[03:24:31] *** Quits: phost (~phost@112.84.37.188.rev.vodafone.pt) (Ping timeout: 245 seconds)
[03:39:45] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:858f:f39:62d8:4ca7)
[03:44:50] <kwilczynski> ?
[03:45:01] <rawtaz> !
[04:42:42] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:858f:f39:62d8:4ca7) (Quit: smeeagle)
[04:46:02] *** Quits: predmijat (~predmijat@mail.strogopro.com) (Quit: bye)
[04:47:37] *** Joins: predmijat (~predmijat@mail.strogopro.com)
[05:42:45] <kwilczynski> rawtaz: I raise you!
[05:42:51] <kwilczynski> rawtaz: Take this!!!
[05:42:52] <kwilczynski> ...
[05:42:58] <kwilczynski> AN ELLIPSIS!  
[05:43:02] <kwilczynski> You are done for.
[05:43:03] <kwilczynski> :>
[05:43:47] <kwilczynski> Cl0udNinja: I am happy to accept a short term contract to write your company a Packer Builder :)
[05:45:26] <rawtaz> :D
[05:45:36] * rawtaz admits defeat
[05:58:48] * rawtaz &
[06:00:38] *** Quits: Brainium (~brainium@user/brainium) (Quit: Konversation terminated!)
[06:09:21] <kwilczynski> Haha.
[06:09:35] <kwilczynski> rawtaz: Sleep tight
[06:57:14] *** Joins: JoelJoel (~jjshoe@user/joel)
[06:57:55] *** Quits: Joel (~jjshoe@user/joel) (Ping timeout: 268 seconds)
[07:40:07] *** JoelJoel is now known as Joel
[07:58:41] *** Quits: kubblai (sid478659@fedora/kubblai) (Ping timeout: 245 seconds)
[08:01:53] *** Joins: kubblai (sid478659@fedora/kubblai)
[08:39:54] *** Joins: givemeyourpies (givemeyour@c-66-235-2-202.sea.wa.customer.broadstripe.net)
[10:46:14] *** Parts: Cl0udNinja (~Accidenta@user/cableninja) (Leaving)
[11:16:29] *** Joins: voices- (~voices_@84.238.197.28)
[11:40:39] *** Quits: _0x1d3 (sid43116@tinside.irccloud.com) (Ping timeout: 264 seconds)
[11:43:53] *** Joins: _0x1d3 (sid43116@id-43116.tinside.irccloud.com)
[12:38:51] *** Quits: aphelion7 (aphelion@user/aphelion) (Quit: the lounge - https://webirc.envs.net)
[12:39:01] *** Joins: aphelion7 (aphelion@user/aphelion)
[12:48:20] *** Quits: givemeyourpies (givemeyour@c-66-235-2-202.sea.wa.customer.broadstripe.net) (Quit: Going offline, see ya! (www.adiirc.com))
[12:54:34] *** Joins: phost (~phost@112.84.37.188.rev.vodafone.pt)
[13:19:58] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:e825:d8ae:9f6e:237c)
[13:26:08] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Quit: Leaving)
[13:40:42] *** Joins: shad (~shad@user/shad)
[13:40:54] <shad> anyone been using hashicorp vault here ?
[13:45:45] <kwilczynski> shad: Probably some people do. Ask the question away.
[13:51:42] <shad> can I use vault to keep my ssh keys safe and is it ergonomic to use ?
[13:52:32] <shad> I have maybe 12 ec2 instance to maintain, each with its own SSH key. Having them in my computer is unsafe for various reasons, and i'd like it to be different, but i don't know if vault is the right tool for that
[13:53:14] <kwilczynski> shad: Vault can leverage SSH CA, so perhaps yes.
[13:53:33] <shad> I sometime have to ssh to servers to troubleshoot, or drop files, but don't want to keep all the ssh keys in my laptop. Is vault the right tool to use ? Also, is it hard to deploy, maintain ?
[13:53:47] <kwilczynski> Did you ever looked at Vault before?
[13:54:25] <shad> Yes, I did read a bit of its documentation and how to install, but alas i don't have much time to look deeply into it, that's why i'm looking for insights from people that might already be using it
[13:54:50] <shad> y'know the drill, everything is an emergency and nothing ever gets done
[13:55:26] <kwilczynski> For 12 compute instances deploying Vault might be an overkill.
[13:55:55] <kwilczynski> Read on how to use SSH CA and generate SSH keys signed by this CA.
[13:56:03] <kwilczynski> And then distribute things securely.
[13:57:42] <kwilczynski> There are some SSO, on-demand, break-the-glass, etc., type solutions too, which grant temporary access on-demand, but some (if not most?) are paid for.
[13:58:02] <kwilczynski> If you are on AWS and such, then you could leverage SSM agent to do some of things.
[13:58:06] <kwilczynski> this*
[14:01:10] <kwilczynski> Hmm.
[14:02:09] <kwilczynski> shad: Make sure that your subnets for private/management network are protected (perimeter security) or your private networks are only accessible through a VPN connection. This can help reinforce SSH access, if you want to keep it. 
[14:03:18] <shad> yes, we do use security groups that allow any connection from our office or our wireguard vpn, but exclude anything else from internet. Still, there's the issue of having ssh keys being shared and it's not great to keep track of
[14:03:31] <kwilczynski> Alternative is to lock SSH out completely, and use an agent providing RPC-like semtantic/functionality (see MCollective, Choria, SaltStack [for the RPC bit]) to then either carry-out work through it, or for it to open SSH (start sshd or open firewall locally).
[14:03:58] <kwilczynski> shad: With Vault you would need to share access key.
[14:04:12] <kwilczynski> shad: There is always something somewhere that you need to store securely and share. :)
[14:04:35] <shad> doesn't vault have something like user management ? That way i could create and revoke users right ?
[14:04:45] <kwilczynski> shad: Emply something like git-crypt, 1Password, BitWarden, etc. to perhaps share this.
[14:05:01] <kwilczynski> shad: You can create and remove SSH keys based on a CA.
[14:05:12] <kwilczynski> I don't understand why you need Vault for?
[14:05:20] <shad> I don't know anything about SSH CA, i'll have to dig into that
[14:05:28] <kwilczynski> You seem to be dead set on having it. :) So go ahead and deploy it.
[14:05:36] <kwilczynski> Then better read up as Vault uses SSH CA too.
[14:06:33] <shad> The idea i had behind vault was having every secret we ever generate, SSH keys, API keys, db password etc.. in the Vault, having users registered into vault and selecting who needs to access what, whenever an user leaves the company revoke its access to Vault
[14:07:12] <shad> something like that, that would be kinda future proof. The 12 servers is a new thing here I introduced. Before that we had big servers managing multiple clients, and that wasn't efficient
[14:07:56] <kwilczynski> For that wide usage it makes more sense.
[14:08:18] <kwilczynski> https://blog.octo.com/en/gardez-les-cles-de-votre-infrastructure-a-labri-avec-vault/
[14:08:35] <kwilczynski> https://www.hashicorp.com/resources/manage-ssh-with-hashicorp-vault
[14:08:50] <kwilczynski> https://crypt.codemancers.com/posts/2020-04-28-ssh-access-management-part-1/
[14:09:24] <kwilczynski> You might want to check: https://www.boundaryproject.io/
[14:09:27] <kwilczynski> Too.
[14:10:42] <shad> thanks, plenty of links to dig in when i'll have time !
[14:14:38] <kwilczynski> shad: Boundary might be better for remote access provisioning and management.
[14:15:06] <kwilczynski> shad: Vault, if you plan other use-cases, makes a lot more sense to invest time to deploy and learn how to use it (and secure it).
[14:16:09] <kwilczynski> shad: If you are only concerned with management of 12+ compute instances, then a lot of solutions might be an overkill, so start "small" and look into SSH CA and keys signing, plus perhaps if you are in AWS then at SSM agent and/or even pulling SSH keys from IAM and deploying on-demand, etc.
[14:16:44] <kwilczynski> shad: If you have the money, then you could go with managed Vault, and also get benefits of some of the paid-for only features.
[14:17:41] <shad> yes, but i'm looking for something that wouldn't much change my workflow either. I try to avoid ssh as much as possible and replace anything ssh with automated solutions (ansible+awx, mostly), but I still sometimes need to ssh in to check for stuff
[14:18:28] <shad> i thought with vault i'd get something like a `vault login` one time, then a `vault ssh foo@bar.com` and have vault manage everything ssh related on my behalf 
[14:19:31] <shad> for now, the workflow on server creation is to create a dedicated ssh key in aws keys pairs, then share with the other devops said key so that I don't lose it. that ain't efficient enough
[14:20:07] <shad> there's a lot of work to be done here, and yet so little hours in any given day
[14:20:53] <kwilczynski> Yeah...
[14:20:55] <kwilczynski> :/
[14:21:02] <kwilczynski> Hang in there.
[14:32:42] <egy> facebook uses (used ?) ssh CA as well (a good read): https://engineering.fb.com/2016/09/12/security/scalable-and-secure-access-with-ssh/
[14:33:00] <egy> of course, coupled with internal tools and whatnot
[14:33:27] <egy> kwilczynski: thanks for the links you shared. i'll have a look
[14:34:04] <kwilczynski> :)
[14:34:26] <kwilczynski> Just a cursory search in Google. I sure there is more on the subject.
[14:35:06] <egy> do you speak French btw ? because that octo.com link is in French :)
[14:35:44] <egy> oh wait, the title was misleading, my bad
[14:37:23] *** Quits: voices- (~voices_@84.238.197.28) ()
[15:29:56] *** Quits: shad (~shad@user/shad) (Ping timeout: 245 seconds)
[15:32:05] <kwilczynski> egy: I don't, sadly. :)
[15:32:22] <egy> :)
[15:33:49] <rawtaz> if someone were to threaten your family with a 72 hour leekspin.com im pretty sure you'd speak french kwilczynski
[15:34:47] <kwilczynski> :)
[15:35:08] <kwilczynski> It's a special dialect of 
[15:35:15] <kwilczynski> French.
[15:35:48] <kwilczynski> And I don't mean French in Canada. :P
[15:36:33] <rawtaz> thats fine, noone understands french anyway, so which dialect of nonsense it is doesnt matter :D
[15:39:41] <egy> hahaha
[15:42:33] <kwilczynski> https://www.youtube.com/watch?v=0MUsVcYhERY
[15:42:44] <kwilczynski> (not French, though)
[15:46:03] <kwilczynski> Now the German speakers here will hate me, of course. :)
[15:57:18] *** Joins: shad (~shad@user/shad)
[16:01:20] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:e825:d8ae:9f6e:237c) (Quit: smeeagle)
[16:02:03] *** Joins: menace (~someone@ppp-93-104-164-149.dynamic.mnet-online.de)
[16:02:13] *** Quits: menace (~someone@ppp-93-104-164-149.dynamic.mnet-online.de) (Changing host)
[16:02:13] *** Joins: menace (~someone@user/menace)
[16:36:43] <egy> kwilczynski: hahahha :D
[17:17:16] <kwilczynski> :)
[17:17:19] <kwilczynski> Folks.
[17:17:37] <kwilczynski> What would you expect a hourly rate to be in Germany for an senior SRE role?
[17:17:44] <kwilczynski> I don't know the market at all.
[17:19:40] <rawtaz> i really have no idea either :< im in sweden.
[17:20:03] <rawtaz> are you talking about employed or as a consultant?
[17:21:17] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:23:30] <kwilczynski> A startup from Germany just called me and we had a chat and such.
[17:23:43] <kwilczynski> And they asked me for the hourly rate.
[17:23:53] <kwilczynski> :)
[17:25:50] <rawtaz> yeah
[17:26:27] <rawtaz> does it matter though. of course if it's higher than your usual one it's a chance to raise it, but in general it is what you charge normally or consider that youre worth
[17:26:42] <shad> hourly ? shouldn't it be yearly for a salary ?
[17:27:41] <shad> On Malt a popular french platform for freelances, DevOps charge up to 1000€/day. 
[17:28:37] <rawtaz> kwilczynski: you enver answered the question, employed or consultant?
[17:28:43] <rawtaz> i find that the rates differ a lot depending on that
[17:29:12] <kwilczynski> Well.
[17:29:35] <kwilczynski> I sad €60/h so 480 a day.
[17:29:39] <kwilczynski> And he went numb.
[17:30:16] <shad> everyone wants devops at the price of interns
[17:30:32] <kwilczynski> Senior SRE in this case who can write Go.
[17:30:37] <kwilczynski> So two people really.
[17:30:44] <kwilczynski> I suppose this is a red flag?
[17:30:45] <kwilczynski> ;)
[17:30:51] <rawtaz> kwilczynski: is your impression that he felt that was expensive? and again, are you talking employed or consultant?
[17:31:00] <kwilczynski> Contractor.
[17:31:09] <shad> guys we didn't dedicate our life to learn IT to be paid in peanuts 
[17:31:37] <kwilczynski> :)
[17:31:44] <kwilczynski> Hear hear!
[17:31:46] <shad> kwilczynski: check https://www.malt.de/ for devops rates around you
[17:32:01] <kwilczynski> I am in Poland...
[17:32:03] <rawtaz> if he wants an SRE regardless of if they know Go in particular (naturally an SRE should be able to write code regardless) i think 60/hr isnt that much at all. thats around the lower third of the normal hourly rates in sweden i think
[17:32:17] <kwilczynski> I suppose his expectation was I will be have with 15-20 EUR /h.
[17:32:24] <kwilczynski> Given my location
[17:32:30] <rawtaz> it's usually around 60-90 but can be downt o like 50 for government or other cheap contracts
[17:32:55] <rawtaz> he cant be at a serious company lol.
[17:33:34] <rawtaz> you may be in poland, god be with you on that, but you actually do know one or two things despite that location issue :-)
[17:34:34] <kwilczynski> https://www.malt.de/s?q=devops+engineer&location=Berlin%2C+Deutschland&lon=13.3889&lat=52.517&countryCode=DE&country=Deutschland&administrativeAreaLevel2Code=10115&city=Berlin&as=t
[17:34:37] <kwilczynski> Oh my.
[17:34:43] <kwilczynski> 1500 a day?
[17:34:46] <kwilczynski> Blimey
[17:35:06] <rawtaz> tell him that you gave him the best price you possibly can, e.g. that it's what your most long-term clients pay you because you havent raised the prices as much for them as you have for new clients over the years, and kindly tell him that if he can find someone better suited to do the job he should of course go with them, but that you can do what they need and are happy to continue discussions if theyre interested :)
[17:35:27] <rawtaz> (oh and that the longer he thinks about it, the more the price goes up xD)
[17:36:03] <shad> kwilczynski: if you a skilled enough engineer that gets stuff done quickly for big corps that can go up quickly
[17:36:30] <shad> 1500 a day for a 1 month mission for a bank or something is peanuts for the client
[17:37:30] <kwilczynski> Good thing I don't have any skills :)
[17:38:39] <rawtaz> kwilczynski: you and i should team up - i dont know Go (even though im writing an application in it) and you dont even know what SRE means
[17:38:51] <rawtaz> he couldnt possible get a better deal for just 60 EUR/hr
[17:38:54] <rawtaz> possibly*
[17:39:22] <kwilczynski> :(
[17:39:35] <kwilczynski> I've been doing something for a decade not knowing what I've been doing
[17:39:40] <rawtaz> lol
[17:39:41] * kwilczynski cries
[17:42:51] <rawtaz> :)
[17:52:07] <shad> i've been using Github actions for my personal project, and never had to use Gitlab CI at my cie because it had already be done by the guy before me
[17:52:23] <shad> the arcane of "the old stuff you don't touch"
[17:52:44] <shad> and now i've made a project and have to write gitlab ci and omg it sucks
[18:00:18] <kwilczynski> You don't like it?
[18:03:02] <shad> welp never mind
[18:03:29] <shad> the ol' "i hate programming i hate programming i hate programming i hate programming i hate programming oh it works i love programming"
[18:04:48] <shad> my pipeline works so it's great. I'm a bit sad at how we're supposed to docker build images in gitlab ci
[18:05:20] <shad> There's a whole docker-in-docker topic, or exposing your runners Docker socket which is really not great
[18:06:37] <shad> At Github action that whole problem is abstracted away. You "uses: docker/build-push-action" boom done 
[18:09:57] <rawtaz> 41
[18:10:00] <rawtaz> oj då
[18:19:07] <kwilczynski> Isn't it... Azure DevOps > GitLab CI > GitHub Actions > Nuking things from the orbit > Jenkins
[18:24:50] *** Joins: smeeagle (~smeeagle@2a00:23c8:9611:e600:e825:d8ae:9f6e:237c)
[19:04:42] *** Joins: Eloygn (~Eloygn@109.77.103.212)
[19:27:59] *** Quits: _0x1d3 (sid43116@id-43116.tinside.irccloud.com) (Ping timeout: 265 seconds)
[19:28:36] *** Joins: _0x1d3 (sid43116@id-43116.tinside.irccloud.com)
[19:55:21] *** Quits: shad (~shad@user/shad) (Ping timeout: 245 seconds)
[19:57:59] *** Joins: shad (~shad@user/shad)
[20:13:47] <Joel> shad dind on gitlab is the worst
[20:14:02] <Joel> shad also, can we revisit how you'
[20:14:06] <Joel> re managing ssh keys?
[20:14:12] <Joel> do you even need to ssh? can you make use of ssm?
[20:14:22] *** Quits: shad (~shad@user/shad) (Ping timeout: 250 seconds)
[20:14:28] <Joel> No open ports. Ever.
[20:21:27] *** Quits: PublicWiFi (~PublicWiF@user/publicwifi) (Ping timeout: 264 seconds)
[20:34:25] *** Joins: PublicWiFi (~PublicWiF@user/publicwifi)
[21:10:18] *** Joins: DerpGusta (~quassel@user/derpgusta)
[21:14:46] *** Joins: X-Scale` (~ARM@92.250.97.112)
[21:14:56] *** Quits: X-Scale (~ARM@165.201.137.78.rev.vodafone.pt) (Ping timeout: 245 seconds)
[21:17:42] *** X-Scale` is now known as X-Scale
[21:23:16] *** Quits: phost (~phost@112.84.37.188.rev.vodafone.pt) (Ping timeout: 245 seconds)
[21:30:05] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[21:30:44] *** Joins: givemeyourpies (givemeyour@c-66-235-2-202.sea.wa.customer.broadstripe.net)
[21:31:38] <menace> container in container will be a shit thing for a while
[21:31:46] <menace> tools have to adapt for it
[21:34:45] <slaughter> It's horribly annoying but once it's setup it's basically invisble
[21:35:08] <slaughter> We've done a Github Actions self-hosted DIND config and outside of the initial setup we haven't had to touch it
[21:45:17] *** Quits: menace (~someone@user/menace) (Quit: menace)
[21:48:35] *** Quits: lofiguy (~lofiguy@87-207-104-205.dynamic.chello.pl) (Remote host closed the connection)
[22:50:46] *** Quits: smeeagle (~smeeagle@2a00:23c8:9611:e600:e825:d8ae:9f6e:237c) (Quit: smeeagle)
[23:36:16] <egy> it's interesting how it works inside
[23:36:55] <egy> like, some namespaces are shared between the outer and inner container engines
[23:38:02] <egy> do you have any in-depth knowledge of how this work? 
[23:56:32] *** Joins: lofiguy (~lofiguy@87-207-104-205.dynamic.chello.pl)
[23:59:21] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Read error: Connection reset by peer)
