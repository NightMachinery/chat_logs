[00:19:01] *** Quits: Hanii (~textual@2a00:23c5:c587:6d00:2199:36df:aa1:f55) (Quit: Textual IRC Client: www.textualapp.com)
[00:26:59] *** Quits: eight (~eight@user/eight) (Quit: leaving)
[00:28:32] *** Joins: no-n (~ed@101.53.216.63)
[00:31:19] *** Joins: lalitmee (~lalitmee@180.94.33.244)
[00:33:12] *** Quits: zutt (~zutt@user/zutt) (Quit: nein)
[00:34:02] *** Joins: magla (~gelignite@55d4fe02.access.ecotel.net)
[00:35:57] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[00:36:12] *** Joins: zutt (~zutt@user/zutt)
[00:52:57] *** Joins: guidoc (~guido@151.43.182.252)
[01:08:10] *** Quits: mgocobachi (~m@ancrae.com) (Ping timeout: 240 seconds)
[01:08:34] *** Quits: jaawerth (~jaawerth@104.131.115.202) (Ping timeout: 240 seconds)
[01:08:36] *** Quits: veltas (~veltas@104.236.34.215) (Ping timeout: 258 seconds)
[01:09:18] *** Quits: losinggeneration (~quassel@64.225.54.254) (Ping timeout: 250 seconds)
[01:17:00] *** Joins: losinggeneration (~quassel@64.225.54.254)
[01:17:22] *** Joins: mgocobachi (~m@ancrae.com)
[01:17:46] *** Joins: jaawerth (~jaawerth@104.131.115.202)
[01:20:14] *** Joins: veltas (~veltas@104.236.34.215)
[01:24:32] *** Joins: Moosadee (~Moosadee@136.32.155.193)
[01:25:58] *** Quits: netlynx (~me@94-226-69-15.access.telenet.be) (Quit: Ex-Chat)
[01:26:50] *** Quits: lalitmee (~lalitmee@180.94.33.244) (Quit: Konversation terminated!)
[01:50:29] *** Quits: magla (~gelignite@55d4fe02.access.ecotel.net) (Quit: Stay safe!)
[02:21:07] *** Joins: vnogueir- (~vnogueira@user/vnogueira)
[02:22:29] *** Quits: vnogueira (~vnogueira@user/vnogueira) (Ping timeout: 244 seconds)
[02:31:57] *** Joins: fcr_ (~fran@r167-60-81-147.dialup.adsl.anteldata.net.uy)
[02:34:17] *** Quits: fcr (~fran@r186-48-125-232.dialup.adsl.anteldata.net.uy) (Ping timeout: 248 seconds)
[02:34:17] *** fcr_ is now known as fcr
[02:46:37] *** Joins: Elw3 (~Elw3@x59cc9b61.dyn.telefonica.de)
[03:05:42] *** Quits: Vornicus (~Vornicus@2603-8000-5d07-7ef0-6860-c946-993e-2148.res6.spectrum.com) (Read error: Connection reset by peer)
[03:49:57] *** Joins: strungout (znc@mutant.penguin.fyi)
[03:50:47] *** Quits: suffer (znc@mutant.penguin.fyi) (Quit: ZNC - https://znc.in seek the truth or pay the price)
[04:13:53] *** Quits: ^-^hi (~hi^-^@user/-hi/x-1729478) (Ping timeout: 252 seconds)
[04:23:34] *** Joins: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net)
[04:29:50] *** Quits: Moosadee (~Moosadee@136.32.155.193) (Ping timeout: 252 seconds)
[04:44:43] *** Quits: Tricycle (~CGI273@lfbn-idf1-1-1830-41.w90-91.abo.wanadoo.fr) (Quit: bye)
[04:49:45] *** Quits: guidoc (~guido@151.43.182.252) (Ping timeout: 248 seconds)
[05:09:38] *** Quits: no-n (~ed@101.53.216.63) (Quit: WeeChat 2.8)
[05:12:52] *** Quits: ano (~weechat@user/ano) (Remote host closed the connection)
[05:40:46] *** Quits: Elw3 (~Elw3@x59cc9b61.dyn.telefonica.de) (Quit: Leaving)
[05:43:45] *** Joins: guidoc (~guido@151.43.138.117)
[05:54:27] *** Joins: monkey_ (~user@190.104.116.134)
[05:56:54] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[05:57:36] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[06:10:41] *** Quits: kiril (~kiril@85.91.153.163) (Quit: ZNC - https://znc.in)
[06:10:54] *** Joins: kiril (~kiril@85.91.153.163)
[06:11:40] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[06:14:57] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[06:23:15] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Ping timeout: 244 seconds)
[06:24:36] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[06:30:33] *** Quits: entuland (~entuland@user/entuland) (Ping timeout: 248 seconds)
[06:37:54] *** Quits: ratchet_freak (~ratchetfr@ptr-82rtos4cktuwinja88p.18120a2.ip6.access.telenet.be) (Ping timeout: 256 seconds)
[06:47:57] *** Joins: penguino (~mrpenguin@user/mrpenguin)
[07:01:04] *** Joins: miasuji (~miasuji@174-16-97-157.hlrn.qwest.net)
[07:18:33] *** Quits: ratchetfreak (~ratchetfr@ptr-82rtos4ad7d6eh7lhxd.18120a2.ip6.access.telenet.be) (Read error: Connection reset by peer)
[07:26:50] *** Joins: no-n (~ed@101.53.216.63)
[07:29:44] *** Quits: monkey_ (~user@190.104.116.134) (Remote host closed the connection)
[07:32:02] <no-n> hi
[07:34:33] *** Quits: no-n (~ed@101.53.216.63) (Quit: WeeChat 2.8)
[07:34:49] *** Joins: no-n (~ed@101.53.216.63)
[07:55:09] *** Quits: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net) (Ping timeout: 268 seconds)
[08:32:47] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Remote host closed the connection)
[08:33:10] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[08:43:39] *** Quits: miasuji (~miasuji@174-16-97-157.hlrn.qwest.net) (Quit: Leaving)
[09:31:34] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Quit: WeeChat 3.2)
[09:31:50] *** Quits: penguino (~mrpenguin@user/mrpenguin) (Ping timeout: 244 seconds)
[09:32:31] *** Joins: emanuele6 (~emanuele6@user/emanuele6)
[09:33:02] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 245 seconds)
[09:39:40] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:5490:ac06:9bf6:a5de)
[09:39:40] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:5490:ac06:9bf6:a5de) (Changing host)
[09:39:40] *** Joins: skapata (~Skapata@user/skapata)
[09:39:57] *** Quits: guidoc (~guido@151.43.138.117) (Read error: Connection reset by peer)
[09:45:18] <tumn> no-n
[09:45:34] *** Joins: guidoc (~guido@151.57.220.117)
[09:49:52] <no-n> tumn
[09:59:08] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Quit: neshpion)
[10:00:59] <no-n> how are you my friend
[10:32:40] *** Joins: Hanii (~textual@host86-138-112-34.range86-138.btcentralplus.com)
[10:33:17] *** Quits: no-n (~ed@101.53.216.63) (Remote host closed the connection)
[10:37:11] *** Joins: no-n (~ed@101.53.216.63)
[10:44:03] *** Joins: ^-^hi (~hi^-^@user/-hi/x-1729478)
[11:52:00] *** Joins: szutt (~szutt@116.37.2.145)
[12:13:06] *** Quits: szutt (~szutt@116.37.2.145) (Quit: Client closed)
[12:15:05] *** Quits: sm2n (~sm2n@user/sm2n) (Ping timeout: 248 seconds)
[12:22:28] *** Quits: milosz__ (~milosz@user/milosz) (Ping timeout: 272 seconds)
[12:54:30] *** Joins: elf_fortrez (~elf_fortr@adsl-72-50-6-221.prtc.net)
[13:01:14] *** vnogueir- is now known as vnogueira
[13:34:27] *** Joins: besnn (~besnn@user/besnn)
[13:42:38] *** Quits: guidoc (~guido@151.57.220.117) (Read error: Connection reset by peer)
[13:47:22] *** Joins: guidoc (~guido@151.43.196.85)
[13:50:39] *** Joins: sm2n (~sm2n@user/sm2n)
[13:52:24] <barpthewire> Geys, I am dipping my toes into Lua bindings. But since I have no experience in C++ I am kinda stuck with this: https://pastebin.com/iiDPxmBL
[13:52:32] <barpthewire> When I compile this via: gcc -Wall -fPIC -shared -o test.so -I/usr/include/lua5.3 test.cpp
[13:53:07] <barpthewire> I get a test.so but requiring it from inside Lua results in: error loading module 'test' from file './test.so':
[13:53:07] <barpthewire> ./test.so: undefined symbol: luaopen_tes
[13:54:13] <barpthewire> What am I missing?
[13:56:31] <barpthewire> Second line of error message is: ./test.so: undefined symbol: luaopen_test
[14:03:41] *** Joins: entuland (~entuland@user/entuland)
[14:36:10] *** Quits: fcr (~fran@r167-60-81-147.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[14:37:34] *** Joins: fcr (~fran@r167-60-2-48.dialup.adsl.anteldata.net.uy)
[14:46:01] *** Quits: ^-^hi (~hi^-^@user/-hi/x-1729478) (Ping timeout: 248 seconds)
[14:47:06] *** Quits: ard (~ard@2001:984:74c7:1:21e:6ff:feff:ff03) (Ping timeout: 240 seconds)
[14:48:56] *** Joins: ard (~ard@2001:984:74c7:1:21e:6ff:feff:ff03)
[15:07:07] *** Joins: jmg71 (~root@static-3-122-61-95.ipcom.comunitel.net)
[15:11:50] *** Quits: jmg71 (~root@static-3-122-61-95.ipcom.comunitel.net) (Quit: leaving)
[15:22:37] *** Quits: kvik (~kvik@80.240.23.8) (Ping timeout: 245 seconds)
[15:22:52] *** Joins: kvik (~kvik@80.240.23.8)
[15:34:33] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 248 seconds)
[15:41:34] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[15:46:21] *** Joins: besnn (~besnn@user/besnn)
[16:09:35] *** Joins: ratchetfreak (~ratchetfr@ptr-82rtos348d5tt368jdd.18120a2.ip6.access.telenet.be)
[16:26:06] *** Joins: roadt_ (~roadt@36.7.132.7)
[16:29:29] *** Quits: roadt (~roadt@114.100.129.141) (Ping timeout: 248 seconds)
[16:54:36] *** Quits: no-n (~ed@101.53.216.63) (Quit: WeeChat 2.8)
[17:01:33] *** Joins: ratchet_freak (~ratchetfr@ptr-82rtos4cktuwinja88p.18120a2.ip6.access.telenet.be)
[17:12:30] *** Joins: ^-^hi (~hi^-^@user/-hi/x-1729478)
[17:20:08] <tumn> I can't explain the error at a glance, but I can't help but notice you're using gcc instead of g++
[17:20:28] <tumn> it's better to compile c++ using g++ because it's smarter at compiling with the right libraries
[17:21:27] <tumn> I can't imagine it mattering here but you never know
[17:22:28] <tumn> probably someone good with gcc can help since it sounds like a linker/compiler problem rather than a lua problem
[17:26:16] <tumn> the fact it's a dynamic library (.so) might suggest that lua doesn't know where to find the definitoins
[17:26:36] <tumn> I would try static linking
[17:26:59] <barpthewire> I just tried g++, same error
[17:27:41] <barpthewire> How do I do static linking? This is my first try at low level programming so everything is brand new^^
[17:30:27] <tumn> just eliminate -shared and change extension of the output file to .a, and include the lua source code files as compiler input (excluding the ones that define a 'main' function, there is 1 or 2 of them in the source by default, I dont remember which ones)
[17:31:11] <tumn> though I feel like that shouldn't be necessary for creating a lua-compatible module
[17:31:20] <tumn> that includes lua as a dependency in the executable itself
[17:32:29] <tumn> I'm not sure lua C modules were designed to be statically linked, I don't know much about them
[17:32:50] <tumn> there are other ways to create lua bindings
[17:32:57] *** Quits: ^-^hi (~hi^-^@user/-hi/x-1729478) (Ping timeout: 248 seconds)
[17:34:12] <tumn> for example you include lua (like described above) and compile it as an executable, create the bindings within the program, and invoke lua from it
[17:36:11] <tumn> using require() to load a C module that itself uses the lua api is technically possible, but it makes a lot of assumptions about the device the resulting script will be running on, since you'll want the script and the C module to be using the same distribution of lua
[17:38:00] <tumn> I might be misunderstanding how lua loads compiled libraries, if so someone else can correct me, but if all you want is to create bindings, I would recommend the traditional way
[17:39:52] <tumn> via including lua as a dependency in your program, defining the bindings in that program, and loading your script from within the program
[17:39:55] <barpthewire> Pardon me if I misunderstand but what you describe is creating a C++ program with embedded Lua?
[17:40:06] <tumn> yes
[17:40:25] <tumn> that's essentially what you're doing in your example, just without the step of loading the script from within the program
[17:40:48] <barpthewire> But what I want is a module that can be loaded via require from inside Lua like i.e. luasqlite
[17:41:02] <barpthewire> Or luasocket
[17:42:07] <barpthewire> Maybe I did not understand the examples online, there are a lot of mixed informations when it comes to this it seems. And most posts are about people embedding Lua in their game engine and such
[17:42:35] <tumn> I think you had it right the first time
[17:42:39] <tumn> with the dynamic library
[17:43:15] <barpthewire> What is confusing to me is that the resulting .so file does not show any function luaopen_test when I check it with "nm -g test.so"
[17:43:24] <tumn> btw not sure about luasqlite, but luasocket is a mixture of .lua scripts and a compiled library written in C
[17:44:05] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 268 seconds)
[17:45:19] <tumn> is gcc optimizing out the function or something?
[17:45:26] *** Quits: guidoc (~guido@151.43.196.85) (Ping timeout: 256 seconds)
[17:46:03] <barpthewire> I don't know, the only mention of that function name is this: 00000000000011ac T _Z12luaopen_testP9lua_State
[17:47:20] *** Joins: guidoc (~guido@151.57.136.123)
[17:47:40] <barpthewire> http://codepad.org/gWvWrTuz
[17:51:39] <tumn> I think I figured out the problem
[17:51:46] <tumn> you just have to extern the function
[17:51:53] <tumn> that's what the LUALIB_API macro does
[17:52:05] <tumn> int luaopen_test(lua_State *L)
[17:52:08] <tumn> changes to
[17:52:12] <tumn> LUALIB_API int luaopen_test(lua_State *L) {
[17:52:25] <tumn> or if you don't have the right headers
[17:52:30] <tumn> extern int luaopen_test(lua_State *L) {
[17:53:20] <tumn> I've never dealt with requiring C modules from lua but I can't think of any other reason why it wouldn't work
[17:53:52] *** Joins: Elw3 (~Elw3@dynamic-046-114-167-228.46.114.pool.telefonica.de)
[17:58:16] <barpthewire> I stumbeld upon LUALIB_API and was suspecting that this might have to do with it but neither "extern" nor LUALIB_API does the trick unfortunately.
[17:58:27] <tumn> shame
[17:58:32] <barpthewire> Well, I might try my luck at the maling list
[17:58:42] <tumn> stick around here, someone else will fix it
[17:58:48] <tumn> it's just over my head
[17:58:50] <barpthewire> But thank you so much for your effort, I highly appreciate it
[17:58:57] <tumn> np good luck!
[17:58:57] <barpthewire> I will for sure :)
[18:21:49] *** Joins: ^-^hi (~hi^-^@user/-hi/x-1729478)
[18:23:22] <barpthewire> @tumn In case you are interested, I asked at the mailing list and got pointed in the right direction: I had to replace "int luaopen_test(lua_State *L)" with "extern "C" __attribute__((visibility("default"))) int luaopen_test(lua_State *L)".
[18:23:40] <tumn> huh
[18:24:10] <barpthewire> Today is a good day, I learned something new^^
[18:24:22] *** Joins: Vornicus (~Vornicus@2603-8000-5d07-7ef0-6860-c946-993e-2148.res6.spectrum.com)
[18:24:45] <tumn> woo!
[18:25:05] <tumn> not sure why that's necessary, must be a gcc quirk, or sometimes to do with optimization
[18:25:12] <tumn> it's pretty ugly looking
[18:25:42] <tumn> something*
[18:25:48] <tumn> anyway congrats
[18:26:27] <barpthewire> Indeed it is, most stuff I find defines some macro (is it?) and use this instead. Like i.e. EXPORT int foo()
[18:29:09] *** Joins: besnn (~besnn@user/besnn)
[18:31:20] *** Joins: aquanight (~aquanight@174-126-159-166.cpe.sparklight.net)
[18:32:03] *** Quits: besnn (~besnn@user/besnn) (Read error: Connection reset by peer)
[18:35:56] *** Joins: monkey_ (~user@190.104.116.134)
[18:53:50] *** Joins: aead (~aead@pool-96-232-187-142.nycmny.fios.verizon.net)
[18:55:00] *** Quits: aeadio (~aead@ec2-52-2-178-231.compute-1.amazonaws.com) (Ping timeout: 268 seconds)
[18:57:58] *** Quits: elf_fortrez (~elf_fortr@adsl-72-50-6-221.prtc.net) (Ping timeout: 246 seconds)
[19:20:43] *** Joins: besnn (~besnn@user/besnn)
[19:37:32] *** Quits: entuland (~entuland@user/entuland) (Ping timeout: 268 seconds)
[19:43:55] *** Joins: entuland (~entuland@user/entuland)
[19:45:38] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[20:02:44] *** Quits: besnn (~besnn@user/besnn) (Read error: Connection reset by peer)
[20:09:49] *** Quits: monkey_ (~user@190.104.116.134) (Remote host closed the connection)
[20:18:02] *** Quits: roadt_ (~roadt@36.7.132.7) (Ping timeout: 245 seconds)
[20:18:25] *** Joins: roadt_ (~roadt@36.7.132.7)
[20:39:53] *** Joins: dcompoze (~dcompoze@5E98D6D9.static.tld.pl)
[20:54:08] *** Quits: ^-^hi (~hi^-^@user/-hi/x-1729478) (Ping timeout: 272 seconds)
[20:59:26] *** Joins: dcompoze_ (~dcompoze@cpc97624-walt24-2-0-cust75.13-2.cable.virginm.net)
[21:02:12] *** Quits: dcompoze (~dcompoze@5E98D6D9.static.tld.pl) (Ping timeout: 245 seconds)
[21:47:52] *** Joins: besnn (~besnn@user/besnn)
[21:47:59] *** Joins: netlynx (~me@94-226-69-15.access.telenet.be)
[21:49:29] *** Quits: guidoc (~guido@151.57.136.123) (Ping timeout: 248 seconds)
[21:51:12] *** Quits: besnn (~besnn@user/besnn) (Read error: Connection reset by peer)
[21:51:15] *** Joins: guidoc (~guido@151.43.178.254)
[22:11:08] *** Quits: hexology (~hexology@user/hexology) (Quit: hex on you ...)
[22:14:41] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Quit: WeeChat 3.2)
[22:17:10] *** Quits: entuland (~entuland@user/entuland) (Ping timeout: 272 seconds)
[22:18:53] *** Joins: entuland (~entuland@user/entuland)
[22:37:33] *** Joins: no-n (~ed@101.53.216.63)
[22:45:36] *** Quits: entuland (~entuland@user/entuland) (Ping timeout: 272 seconds)
[22:56:55] *** Joins: penguino (~mrpenguin@user/mrpenguin)
[23:03:44] *** Joins: magla (~gelignite@55d4fb74.access.ecotel.net)
[23:04:09] *** Joins: entuland (~entuland@user/entuland)
[23:11:01] *** Quits: entuland (~entuland@user/entuland) (Read error: Connection reset by peer)
[23:17:01] *** Quits: dcompoze_ (~dcompoze@cpc97624-walt24-2-0-cust75.13-2.cable.virginm.net) (Quit: WeeChat 3.2)
[23:17:16] *** Joins: dcompoze (~dcompoze@cpc97624-walt24-2-0-cust75.13-2.cable.virginm.net)
[23:18:57] *** Joins: besnn (~besnn@user/besnn)
[23:26:18] *** Quits: hogarius (hogarius@id-222644.highgate.irccloud.com) (Ping timeout: 240 seconds)
[23:28:32] *** Joins: hogarius (hogarius@highgate.irccloud.com)
[23:40:28] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[23:41:11] *** Quits: dcompoze (~dcompoze@cpc97624-walt24-2-0-cust75.13-2.cable.virginm.net) (Quit: WeeChat 3.2)
[23:43:29] *** Joins: dcompoze (~dcompoze@cpc97624-walt24-2-0-cust75.13-2.cable.virginm.net)
[23:48:39] *** Joins: ano (~weechat@user/ano)
[23:49:15] *** Quits: netlynx (~me@94-226-69-15.access.telenet.be) (Quit: Ex-Chat)
[23:55:53] *** Quits: besnn (~besnn@user/besnn) (Ping timeout: 248 seconds)
[23:59:54] *** Quits: guidoc (~guido@151.43.178.254) (Quit: WeeChat 3.2)
