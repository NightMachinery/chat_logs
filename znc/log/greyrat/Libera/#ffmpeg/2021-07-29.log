[00:00:29] *** Joins: blaze (~blaze@user/blaze)
[00:00:52] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[00:01:06] *** Quits: Hello71 (~Hello71@wireguard/contributor/hello71) (Remote host closed the connection)
[00:04:15] *** Joins: Hello71 (~Hello71@wireguard/contributor/hello71)
[00:13:25] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Quit: Konversation terminated!)
[00:27:00] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:27:51] *** Joins: Pepe_vulgaris (~sph@user/sph)
[00:30:23] <Pepe_vulgaris> I did manage to set up nginx for hls, however it does not seem to output any files in the rtmp root directory, but logs the PUBLISH requests
[00:30:32] <Pepe_vulgaris> ffmpeg -i http://flac.audio.source/stream -c:a alac -hls_time 3 -hls_playlist_type event -hls_segment_type fmp4 -f hls rtmp://localhost:9001/my_transcoded_audio/stream
[00:30:51] <Pepe_vulgaris> any idea what am I doing wrong?
[00:35:42] *** Joins: sr55 (~s55@cpc115138-livi7-2-0-cust15.18-2.cable.virginm.net)
[00:41:17] <kepstin> er, hls and rtmp are two completely different thinks
[00:41:58] <kepstin> if you're using the nginx rtmp rtmp module, then nginx is responsible for turning it into hls later
[00:43:08] <kepstin> rtmp is actually the flash streaming protocol, and i'm pretty sure it doesn't do alac :)
[00:44:37] <kepstin> maybe you meant to have ffmpeg output hls directly? in that case the output filename should be the path to where you want the m3u8 file on the local filesystem, i think. And you don't use the nginx rtmp module - instead you just configure nginx to serve static files from a directory.
[00:45:23] <Pepe_vulgaris> ah damn it, I see it, idk why was I fixated on rtmp/mod-rtmp
[00:50:54] <DeHackEd> I use the static files method. no nginx mods required
[00:50:58] <DeHackEd> works very nicely
[01:04:42] *** Quits: blaze (~blaze@user/blaze) (Ping timeout: 245 seconds)
[01:06:00] *** Joins: bestbotdev9 (~bestbotde@ip68-231-85-199.ph.ph.cox.net)
[01:06:00] <bestbotdev9> Hello
[01:06:40] <bestbotdev9> Is this the place to get support with ffmpeg related issues?
[01:07:41] <sfan5> yes
[01:09:07] <bestbotdev9> Aweseome.. I have been attempting to use ffmpeg to create thumbnails from a buffer or stream and not getting expected results
[01:09:31] *** Joins: anotheruser (~user@45.130.86.11)
[01:09:55] <bestbotdev9> https://stackoverflow.com/questions/68553257/creating-video-thumbnail-with-ffmpeg-from-buffer
[01:09:58] <bestbotdev9> See here for error output
[01:10:15] <bestbotdev9> I have tried many different ways to do this but ffmpeg is not liking the input I am giving it for some reason
[01:11:58] <bestbotdev9> Note that in production I would not be reading from a file, as the data would be being directly uploaded to express server in memory multer or downloaded as a stream from filebase
[01:12:53] *** Quits: someuser (~user@41.35.146.158) (Ping timeout: 258 seconds)
[01:19:55] *** Joins: lvving (~lvving@pool-173-75-137-19.pitbpa.fios.verizon.net)
[01:30:31] *** Quits: luni-4 (uid453292@id-453292.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[01:32:03] *** Joins: jess (~jess@libera/staff/jess)
[01:34:17] *** Quits: dreamon (~dreamon@p54b145b4.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[01:38:53] <kepstin> bestbotdev9: mp4 files are not necessarily streamable - in many cases they have data at the end of the file which is needed in order to start decoding
[01:39:04] <kepstin> to read those files, ffmpeg needs a seekable input
[01:40:12] <kepstin> I'd recommend buffering the file to disk - or at least giving ffmpeg a seekable remote input (ffmpeg can read directly from http, for example)
[01:47:49] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Remote host closed the connection)
[01:49:36] <bestbotdev9> Hm I just tried using an http link and still got hte same error
[01:50:00] <bestbotdev9> The goal is speed here, if possible I'd like to not have to save to disk. Is this the only way to use ffmpeg with large video files?
[01:57:42] *** Joins: sr555 (~s55@cpc115138-livi7-2-0-cust15.18-2.cable.virginm.net)
[01:57:45] *** Joins: s55- (~s55@cpc115138-livi7-2-0-cust15.18-2.cable.virginm.net)
[01:59:54] *** Quits: s55 (~s55@user/s55) (Ping timeout: 240 seconds)
[02:00:17] *** sr555 is now known as s55
[02:00:18] *** Quits: sr55 (~s55@cpc115138-livi7-2-0-cust15.18-2.cable.virginm.net) (Ping timeout: 252 seconds)
[02:00:28] *** Quits: s55 (~s55@cpc115138-livi7-2-0-cust15.18-2.cable.virginm.net) (Client Quit)
[02:05:30] *** Quits: s55- (~s55@cpc115138-livi7-2-0-cust15.18-2.cable.virginm.net) (Read error: Connection reset by peer)
[02:06:17] *** Joins: s55 (~s55@user/s55)
[02:11:31] <DeHackEd> you may be able to use a ramdisk if the physical disks are a problem. there are obvious downsides though
[02:12:19] <DeHackEd> buffering temporarily on a ramdisk can be okay, but delete the file at the earliest opportunity from RAM
[02:24:03] *** Joins: nullheroes (~nullheroe@168.235.66.22)
[02:29:04] <kepstin> bestbotdev9: it's not an issue because of large video files, but rather just because the mp4 file format specifically isn't streamable without special preparation :/
[02:31:30] <bestbotdev9> My goal is to allow a user to upload a file to an express server where we use ffmpeg to create the thumbnail. The goal is to complete this process as quickly as possible. What do you suggest is the quickest way of doing this? I would like to use buffer and limit the use of disk as much as possible.. Would it be quickest just to save to disk? I try
[02:31:31] <bestbotdev9> using ramdisk but I am on windows and the library I tried isn't compatible apparently.
[02:31:40] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[02:32:04] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[02:33:03] <kepstin> if you accept mp4 input, you have to buffer the entire file somewhere that ffmpeg can read from it with seeking.
[02:39:09] *** Quits: Volgaar (~volgaar@2a01:cb1d:8151:9600:3dd9:4b02:6c50:a34b) (Ping timeout: 276 seconds)
[02:41:09] *** Joins: Volgaar (~volgaar@2a01:cb1d:8151:9600:3dd9:4b02:6c50:a34b)
[02:51:53] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 265 seconds)
[02:55:31] *** Quits: mickey (~user@user/mickey) (Remote host closed the connection)
[02:56:55] *** Quits: der_richter (~Akemi@p4fde4f4e.dip0.t-ipconnect.de) (Quit: Leaving.)
[03:18:12] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:333e:266e:357c:e752)
[03:30:08] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[03:34:43] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[03:41:28] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[04:07:09] *** Quits: kurosu (uid342582@id-342582.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[04:25:58] *** Joins: jab416171 (~jab416171@c-174-52-59-101.hsd1.ut.comcast.net)
[04:26:32] <jab416171> how can I concat 4 videos (all the same resolution) so one is on top (maybe larger) and the other 3 are horizontally stacked along the bottom
[04:27:21] <jab416171> will this do it? I had a 3, just changed it to a 1 -filter_complex "[0:v]hstack=inputs=1[top]; [1:v][2:v][3:v]hstack=inputs=3[bottom]; [top][bottom]vstack=inputs=2[v]" -map "[v]"
[04:27:26] <BtbN> That specific layout could be a bit problematic to do, while keeping aspect ratio
[04:27:26] <jab416171> ah nope it doesn't like that
[04:27:39] <jab416171> need at least 2 for a stack, makes sense
[04:27:42] <BtbN> But you can probably build something with xstack/hstack/...
[04:27:50] <jab416171> what is xstack?
[04:27:58] <BtbN> a stacking filter.
[04:29:04] <jab416171> maybe this? xstack=inputs=4:layout=0_0|0_h0|0_h0+h1|0_h0+h1
[04:32:27] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[04:32:41] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[04:35:52] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[04:36:55] *** Quits: bestbotdev9 (~bestbotde@ip68-231-85-199.ph.ph.cox.net) (Quit: Connection closed)
[04:40:10] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[04:40:54] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[04:44:16] <jab416171> I wonder if 2 passes would be better
[04:46:10] *** Joins: fructose (~fructose@user/fructose)
[04:47:16] <BtbN> unlikely, and pointless quality loss
[04:47:19] <BtbN> Just chain the filters
[04:49:13] *** Quits: jess (~jess@libera/staff/jess) ()
[04:56:10] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[05:07:44] <jab416171> ok I got it working but I want to center the top video
[05:08:16] <jab416171> "xstack=inputs=4:layout=0_0|0_h0|w0_h0|w0+w1_h0"
[05:13:23] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Read error: Connection reset by peer)
[05:14:29] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[05:18:14] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 268 seconds)
[05:23:27] *** Quits: Pall (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net) (Quit: Leaving)
[05:30:26] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:33:33] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[05:34:16] *** Joins: vlm (~vlm@user/vlm)
[05:38:23] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[05:38:35] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[05:40:54] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[05:44:09] *** Quits: Volgaar (~volgaar@2a01:cb1d:8151:9600:3dd9:4b02:6c50:a34b) (Ping timeout: 252 seconds)
[05:47:21] *** Joins: zenloading (~zenloadin@user/zenloading)
[05:55:13] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[05:55:53] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[05:58:33] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[06:00:16] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[06:20:39] *** Quits: linetrace (~linetrace@c-76-19-81-84.hsd1.vt.comcast.net) (Read error: Connection reset by peer)
[06:25:12] *** Quits: lvving (~lvving@pool-173-75-137-19.pitbpa.fios.verizon.net) (Quit: Connection closed)
[06:25:18] *** Joins: linetrace (~linetrace@c-76-19-81-84.hsd1.vt.comcast.net)
[06:43:05] *** Joins: gnoo (~gnoo@user/gnoo)
[06:49:21] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[06:53:30] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[06:56:55] *** Joins: houlei (uid497843@id-497843.stonehaven.irccloud.com)
[07:18:58] *** Joins: jos1 (~jos3@dyndsl-178-142-068-198.ewe-ip-backbone.de)
[07:22:00] *** Quits: jos2 (~jos3@dyndsl-091-248-050-137.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
[07:33:30] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 240 seconds)
[07:39:08] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:10:03] *** Quits: Jerrk (~Jerrk@45.83.220.192) (Remote host closed the connection)
[08:18:50] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[08:42:42] *** Quits: mateo` (~mateo@ffmpeg/developer/mateo) (Ping timeout: 240 seconds)
[08:56:59] *** Joins: mateo` (~mateo@ffmpeg/developer/mateo)
[09:42:05] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[09:57:38] *** Quits: zenloading (~zenloadin@user/zenloading) (Quit: Leaving)
[09:57:58] *** Joins: Atsuko (~x@94.242.250.86)
[10:04:14] *** Joins: Flabb (~Flabb@89.169.84.117)
[10:07:21] *** Joins: der_richter (~Akemi@p4fde4f4e.dip0.t-ipconnect.de)
[10:08:48] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[10:08:50] *** Joins: gnoo (~gnoo@user/gnoo)
[10:31:30] *** Joins: gnooooo (~gnoo@user/gnoo)
[10:35:09] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[10:36:22] *** gnooooo is now known as gnoo
[10:53:52] *** Quits: beaver (~beaver@user/pong) (Quit:  )
[10:57:45] *** Joins: beaver (~beaver@user/pong)
[10:58:36] *** Quits: treefrob (~robx@p57a969ef.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[10:59:10] *** Joins: dreamon (~dreamon@p54b148db.dip0.t-ipconnect.de)
[11:04:42] *** Quits: Flabb (~Flabb@89.169.84.117) (Ping timeout: 256 seconds)
[11:12:38] *** Joins: treefrob (~robx@p57a969ef.dip0.t-ipconnect.de)
[11:14:33] *** Quits: haihao (~haihao@192.55.46.52) (Ping timeout: 265 seconds)
[11:14:49] *** Joins: gnooooo (~gnoo@user/gnoo)
[11:14:56] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[11:14:57] *** Joins: haihao (~haihao@192.55.46.52)
[11:15:29] *** Quits: dreamon (~dreamon@p54b148db.dip0.t-ipconnect.de) (Ping timeout: 258 seconds)
[11:25:06] *** Joins: Flabb (~Flabb@89.169.84.117)
[11:25:11] *** Joins: kurosu (uid342582@id-342582.stonehaven.irccloud.com)
[11:25:45] *** Joins: Helmholtz (~leibnizma@2001:470:69fc:105::3124)
[11:42:29] *** Joins: furrymcgee (~devuan@31.179.186.66)
[12:16:23] *** Joins: dreamon (~dreamon@ppp-88-217-93-68.dynamic.mnet-online.de)
[12:16:27] *** gnooooo is now known as gnoo
[12:31:10] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[12:31:42] *** Joins: beaver (~beaver@user/pong)
[12:58:16] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Excess Flood)
[12:58:36] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[13:03:43] *** Quits: furrymcgee (~devuan@31.179.186.66) (Quit: leaving)
[13:17:46] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[13:43:31] *** Joins: gian (~gian@host-95-244-51-113.retail.telecomitalia.it)
[13:55:19] <gian> Hi guys, I am having a strange (?) problem while trying to play a mpeg file from an application that use ffmpeg: the blue and red color seems switched.
[13:56:28] <gian> For context, I am porting an old application from ffmpeg 0.6 (32 bit) to ffmpeg 4.3.2 (64 bit). On the 0.6 version the file is rendered correctly but on the 4.3.2 version the colors seems switched.
[13:57:25] <gian> I tried to download a sample file from sample.ffmeg.org and I got the same result. Any hints about a possible cause ? Or a pointer to some documentation ?
[13:57:30] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 240 seconds)
[14:00:37] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[14:01:10] <gian> Also, I and not getting any errors or warning in the log about possible problems/missing initialization steps or similar
[14:11:00] *** Joins: beaver (~beaver@user/pong)
[14:15:22] *** Joins: mickey (~user@user/mickey)
[14:22:49] *** Joins: furrymcgee (~devuan@31.179.186.66)
[14:37:36] *** Quits: beaver (~beaver@user/pong) (Remote host closed the connection)
[14:42:31] *** Joins: beaver (~beaver@user/pong)
[14:43:42] *** Joins: darkapex (~darkapex@user/darkapex)
[14:46:15] *** Quits: haihao (~haihao@192.55.46.52) (Ping timeout: 265 seconds)
[14:46:38] *** Joins: haihao (~haihao@192.102.204.51)
[15:03:35] *** Joins: Volgaar (~volgaar@2a01:cb1d:8151:9600:3dd9:4b02:6c50:a34b)
[15:06:40] *** Quits: sixecho (~sixecho@2001:470:69fc:105::32) (Quit: Bridge terminating on SIGTERM)
[15:06:41] *** Quits: kepstin (~kepstin@user/kepstin) (Quit: Bridge terminating on SIGTERM)
[15:06:41] *** Quits: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b) (Quit: Bridge terminating on SIGTERM)
[15:06:41] *** Quits: Helmholtz (~leibnizma@2001:470:69fc:105::3124) (Quit: Bridge terminating on SIGTERM)
[15:06:41] *** Quits: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: dittid[m] (~dittidmat@2001:470:69fc:105::789d) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: YakoYoku (~yakoyoku@2001:470:69fc:105::780) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: alienpinecone[m] (~alienpine@2001:470:69fc:105::35bd) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: gnurou (~gnurou@2001:470:69fc:105::c23b) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: luc65r (~luc65r@2001:470:69fc:105::ee1) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc) (Quit: Bridge terminating on SIGTERM)
[15:06:42] *** Quits: memst[m] (~memst@2001:470:69fc:105::716) (Quit: Bridge terminating on SIGTERM)
[15:06:45] *** Quits: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce) (Quit: Bridge terminating on SIGTERM)
[15:06:46] *** Quits: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a) (Quit: Bridge terminating on SIGTERM)
[15:09:14] *** Joins: kepstin (~kepstin@user/kepstin)
[15:10:12] *** Quits: Volgaar (~volgaar@2a01:cb1d:8151:9600:3dd9:4b02:6c50:a34b) (Ping timeout: 272 seconds)
[15:11:06] *** Joins: idesmi[m] (~idesmitch@2001:470:69fc:105::f2b)
[15:11:06] *** Joins: sixecho (~sixecho@2001:470:69fc:105::32)
[15:11:06] *** Joins: singlerider[m] (~singlerid@2001:470:69fc:105::2fd2)
[15:11:06] *** Joins: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260)
[15:11:06] *** Joins: Helmholtz (~leibnizma@2001:470:69fc:105::3124)
[15:11:09] *** Joins: YakoYoku (~yakoyoku@2001:470:69fc:105::780)
[15:11:09] *** Joins: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc)
[15:11:12] *** Joins: luc65r (~luc65r@2001:470:69fc:105::ee1)
[15:11:13] *** Joins: memst[m] (~memst@2001:470:69fc:105::716)
[15:11:18] *** Joins: alienpinecone[m] (~alienpine@2001:470:69fc:105::35bd)
[15:11:18] *** Joins: igh4st[m] (~igh4stmat@2001:470:69fc:105::35ce)
[15:11:18] *** Joins: spanwysm[m] (~spanwysm@2001:470:69fc:105::e0a)
[15:11:19] *** Joins: dittid[m] (~dittidmat@2001:470:69fc:105::789d)
[15:11:21] *** Joins: gnurou (~gnurou@2001:470:69fc:105::c23b)
[15:12:42] *** Quits: nd (~nd@user/nd) (Ping timeout: 268 seconds)
[15:13:59] *** Quits: gnoo (~gnoo@user/gnoo) (Remote host closed the connection)
[15:14:20] *** Joins: gnoo (~gnoo@user/gnoo)
[15:14:27] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Quit: The Lounge - https://thelounge.chat)
[15:35:08] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[15:39:07] *** Joins: nd (~nd@user/nd)
[15:46:23] *** Quits: houlei (uid497843@id-497843.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[16:28:16] *** Joins: larkfisherman (~pasko@217.75.204.126)
[16:28:18] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Remote host closed the connection)
[16:28:37] *** Joins: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733)
[16:28:44] *** Quits: larkfisherman (~pasko@217.75.204.126) (Client Quit)
[16:35:40] *** Joins: Fohsap (~Muimi@119.112.253.151)
[17:45:12] *** Quits: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net) (Ping timeout: 252 seconds)
[17:49:46] *** Quits: ripdog (~quassel@user/ripdog) (Ping timeout: 240 seconds)
[18:00:29] *** Joins: ripdog (~quassel@user/ripdog)
[18:10:19] *** Joins: dbal_ (~dbal@2603:300c:b04:b100:e50b:420b:dd82:f52d)
[18:22:29] *** Joins: arcatech (~arcatech@user/arcatech)
[18:25:08] *** Joins: WhistlerTV (~hunter@c-174-51-151-157.hsd1.co.comcast.net)
[18:26:02] <WhistlerTV> hi friends. i have some MKVs that i'm piping to an RTMP server. x264 -> FLV
[18:26:18] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[18:26:36] <WhistlerTV> question though.. how do I select the subtitles channel and overlay it on the stream? I think they're bitmap subs..
[18:27:53] <JEEB> bitmap stuff should work through the horribleness that is sub2video in ffmpeg.c; so if you just utilize the scale2ref and overlay filters in a filter chain, it should JustWork
[18:33:38] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[18:37:11] <WhistlerTV> JEEB: ok. let me see what I can whip up command-wise..
[18:39:46] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[18:53:48] <WhistlerTV> JEEB: ffmpeg -i "{in}.mkv" -map 0:0 -c:v copy -map 0:2 -c:a copy -filter_complex "[0:4]scale2ref[b]" -map "[b]" -vcodec libx264 -vprofile baseline -g 30 -acodec aac -strict -2 -f flv rtmp://10.0.0.74/show/stream
[18:54:01] <WhistlerTV> I got this error..
[18:54:05] <WhistlerTV> [flv @ 00000174aa2045c0] at most one video stream is supported in flv"
[18:55:16] <JEEB> https://ffmpeg.org/ffmpeg-filters.html#Examples-103
[18:56:02] <JEEB> doesn't have explicit inputs in the example for some reason
[18:56:11] *** Quits: darkapex (~darkapex@user/darkapex) (Read error: Connection reset by peer)
[18:56:20] <JEEB> but the first example does do both scale2ref and then overlaying
[18:58:37] <WhistlerTV> oh got it.. I think I understand
[19:05:04] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[19:12:34] *** Joins: Guest82 (~Guest82@39.red-80-32-129.staticip.rima-tde.net)
[19:13:22] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:20:06] <Guest82> hey, i'm on windows, trying to make a video thats just a random color for each pixel, like video static
[19:20:38] *** Quits: simoneb (~simone@static.39.20.203.116.clients.your-server.de) (Changing host)
[19:20:38] *** Joins: simoneb (~simone@user/simoneb)
[19:21:14] <Guest82> using the command "./ffmpeg.exe -i black.mp4 -pix_fmt yuv420p -filter_complex "geq=r=random(1)*255:g=random(1)*255:b=random(1)*255" -y -t 1 output.mp4" just gives black-and-white static
[19:21:37] <Guest82> im assuming this is because the seed is the same for each color but changing the numbers in random(X) doesn't seem to affect the output at all. any ideas?
[19:30:47] *** Joins: darkapex (~darkapex@user/darkapex)
[19:52:20] <kepstin> Guest82: you want to use a different number inside the random(x) for each colour component
[19:52:56] <kepstin> so r=random(1)*255:g=random(2)*255:b=random(3)*255
[19:52:58] <kepstin> i think
[19:53:06] <DeHackEd> that doesn't seem right. using the same number seems like it SHOULD produce a random image, whereas using a different number would produce truly identical outputs
[19:53:12] <kepstin> (i'm not actually sure how seeding works, but that's how you get each one to use separate state)
[19:53:24] <kepstin> hmm.
[19:53:41] <DeHackEd> it looks like the start state of the RNG is constant, and the parameter selects an instance of the RNG
[19:53:58] <DeHackEd> however... wouldn't 4:2:0 compression statistically cancel out most colour information?
[19:54:33] <Guest82> lets pretend i dont know anything about what 4:2:0 compression is
[19:54:53] <Guest82> i can say that using you know, random(1) vs random(2) vs random(3) definitely doesnt work
[19:55:51] <DeHackEd> ffplay -f lavfi "nullsrc=1280x720,geq=r=random(1)*255:g=random(1)*255:b=random(1)*255"   # this seems to output what you want...
[19:56:59] <Guest82> on my computer im afraid its still black and white
[19:58:52] <Guest82> i'll try using things other than yuv420p
[19:59:19] <Guest82> is there any documentation for the supported values of pix_fmt?
[19:59:36] <DeHackEd> ffmpeg -pix_fmts   # but the question is, what does your encoder accept?
[19:59:49] <kepstin> well, the selected output pix fmt has nothing to do with what the geq filter runs in
[20:00:08] <DeHackEd> ffmpeg -h encoder=libx264 | fgrep pixel   # or whatever encoder you're using
[20:00:11] <kepstin> you're using the r=, g=, and b= options so geq is running in rgb without subsampling
[20:00:39] <kepstin> I'm not entirely sure how the random function works, but it indeed appears to be returning the same value for each color component :/
[20:01:32] <Guest82> i really only need like, red green blue 8 bits for each
[20:01:46] <DeHackEd> interesting... the version of ffplay I have installed does colour, but is from 2018. a more modern build is indeed B&W
[20:02:18] <Guest82> thats really weird
[20:02:19] <kepstin> there must have been a change in how the random seeding is done
[20:03:07] <Guest82> i guess i should also try to figure out which encoder i'm using
[20:03:41] <kepstin> if unspecified with mp4 output, you get libx264 in most ffmpeg builds. but it's always best to explicitly request the encoder you want.
[20:03:43] <Guest82> i've tried yuv444p and gbrp but both produce broken output so i assume the encoder doesnt like them
[20:04:10] <DeHackEd> I'm trying to bisect while doing other stuff in the background...
[20:04:17] <kepstin> x264 can do 444 and rgb (although you need special options to get rgb with ffmpeg), you might have a player issue?
[20:05:07] <DeHackEd> it's not a 420/444 issue. something's changed in ffmpeg itself
[20:05:31] <Guest82> woe. perdition
[20:05:55] <DeHackEd> that's okay. git as good at this
[20:06:02] <kepstin> so as far as i can tell, there's no explicit seeding of the vars used for the random() function, so maybe the change is that the vars array got initialized to 0s or something in new ffmpeg, and was uninitialized before?
[20:06:08] <Guest82> at this point i might just install virtualbox and get a linux version running so i can use the solution from https://stackoverflow.com/questions/15792105/simulating-tv-noise
[20:08:21] <DeHackEd> Bisecting: 6205 revisions left to test after this (roughly 13 steps)
[20:09:57] <Guest82> also if theres an easier way to do this im very open to suggestions
[20:13:18] <DeHackEd> if you can find a version of ffmpeg from mid 2018 it should work
[20:13:33] <DeHackEd> however I will say the video file is horrifically large. 720p at 30fps was nearly 200 megabits/second
[20:14:51] <Guest82> oh i can make that shit as small as necessary
[20:15:07] <Guest82> well ill try finding the 2018 versions. thanks
[20:15:14] <DeHackEd> yeah, 720p was a bit over the top but it worked
[20:15:34] <DeHackEd> I'm bisecting, trying to find when it broke. New Years 2020 is looking good
[20:16:48] *** Quits: gian (~gian@host-95-244-51-113.retail.telecomitalia.it) (Quit: Connection closed)
[20:17:12] <DeHackEd> so it happened in January of 2020
[20:20:54] <kepstin> well, noise doesn't compress, by definition. if you reduce the size by lowering bitrate it'll just turn into a mess of compression blocking :)
[20:22:40] <DeHackEd> bisect not complete yet, but of the remaining commits I have a suspect: c044ac2071fd1ba2b184a35427c98fc5338a9d27
[20:23:12] *** Joins: KombuchaKip (~kip@192.252.230.5)
[20:24:47] <Guest82> man i thought this would be like a "oh youre using -f lavfi instead of -f lbvfi" type error
[20:24:56] <Guest82> oh well. thats how it goes
[20:25:24] <DeHackEd> you have drawn the attention of bug hunters...
[20:27:22] <DeHackEd> you could try adding -filter_complex_threads 1 ?
[20:28:16] <kepstin> even before that it was already using separate expression contexts per plane
[20:28:44] <kepstin> which would explain why random is returning the same value on all planes, instead of state from one affecting the others
[20:29:04] *** Quits: Fohsap (~Muimi@119.112.253.151) (Read error: Connection reset by peer)
[20:29:18] <Guest82> setting threads to 1 still results in b&w noise. tried with same and with different parameters for random()
[20:29:39] <DeHackEd> I did a full bisect. this was the result
[20:30:03] <Guest82> oh yeah i saw that thing about threads in the geq documentation
[20:31:01] <Guest82> but limiting doesnt appear to have any effect
[20:31:31] *** Joins: Volgaar (~volgaar@2a01:cb1d:8151:9600:3dd9:4b02:6c50:a34b)
[20:38:13] *** Quits: dreamon (~dreamon@ppp-88-217-93-68.dynamic.mnet-online.de) (Ping timeout: 258 seconds)
[20:39:02] <DeHackEd> unfortunately this is as far as I can take it right now. Jan 30th 2020 is when the issue was introduced. if you can find an older version you should be good.
[20:39:21] <Guest82> thats alright thanks man
[20:40:27] <kepstin> anyways, you should probably just use the 'noise' filter instead, heh
[20:42:55] *** Quits: Guest82 (~Guest82@39.red-80-32-129.staticip.rima-tde.net) (Quit: Connection closed)
[21:06:03] *** Joins: rsx (~dummy@ppp-188-174-145-96.dynamic.mnet-online.de)
[21:06:07] *** Joins: demon__ (~user@41.35.146.158)
[21:08:28] *** Quits: rainmanjam (~rainmanja@216.161.85.62) (Quit: Leaving...)
[21:09:39] *** Quits: anotheruser (~user@45.130.86.11) (Ping timeout: 258 seconds)
[21:10:47] *** Quits: demon__ (~user@41.35.146.158) (Ping timeout: 252 seconds)
[21:30:45] <aphysically> kepstin: that reminds me I've been getting some weird results from loudnorm on some files lately that seem obviously wrong
[21:31:13] <aphysically> I hadn't had a chance to look into what is going on yet; I'll do that now
[21:31:56] *** Joins: someuser (~user@41.35.146.158)
[21:32:00] <aphysically> like for example this is a loudnorm analysis run on a audio file from a DTS-HD bluray that was analyzed *after* a downmix to stereo: https://dpaste.com/4XR5NURLQ
[21:32:47] <aphysically> letting loudnorm run with dynamic results in super distorted audio with normal settings, presumably because it's analyzing it so wrong ("input_i" : "-2.17" can't be right?)
[21:33:06] <aphysically> I'm running an analysis on the audio without a downmix now
[21:38:30] *** Joins: Narrat (~omnius@p200300df5f15d87906ea56fffe2e7cdc.dip0.t-ipconnect.de)
[21:43:14] <aphysically> looks normal without the downmix first I'm not sure what's happening
[21:43:50] *** Quits: rsx (~dummy@ppp-188-174-145-96.dynamic.mnet-online.de) (Quit: rsx)
[21:52:23] <aphysically> huh, it's selecting the shibata shaping for soxr that does it it seems
[21:55:15] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[21:57:44] *** Joins: dreamon (~dreamon@p54b148db.dip0.t-ipconnect.de)
[22:09:06] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 240 seconds)
[22:25:25] *** Quits: aphysically (~aphysical@user/aphysically) (Ping timeout: 265 seconds)
[22:30:15] *** Quits: WhistlerTV (~hunter@c-174-51-151-157.hsd1.co.comcast.net) (Quit: Lost terminal)
[22:52:36] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[23:08:11] *** Joins: Buster_ (~Buster@46.160.36.66)
[23:16:34] *** Quits: microchip_ (~neutrino@user/microchip/x-0766185) (Quit: There is no spoon!)
[23:25:28] *** Quits: furrymcgee (~devuan@31.179.186.66) (Quit: leaving)
[23:42:51] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Quit: WeeChat 3.2)
[23:44:53] *** Joins: microchip_ (~neutrino@user/microchip/x-0766185)
[23:47:26] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[23:48:38] *** Quits: finsternis (~X@23.226.237.192) (Remote host closed the connection)
[23:51:21] *** Quits: microchip_ (~neutrino@user/microchip/x-0766185) (Quit: There is no spoon!)
[23:53:27] *** Quits: Helmholtz (~leibnizma@2001:470:69fc:105::3124) (Quit: Reconnecting)
[23:53:42] *** Joins: Helmholtz (~leibnizma@2001:470:69fc:105::3124)
[23:54:14] *** Quits: Helmholtz (~leibnizma@2001:470:69fc:105::3124) (Changing host)
[23:54:14] *** Joins: Helmholtz (~leibnizma@user/helmholtz)
