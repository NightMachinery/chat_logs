[00:00:35] <beastDivision> none of the running queries seem to have anything to do with the migration
[00:05:17] *** Quits: bambanxx (~bambanx@2800:150:106:1061:28fb:f530:cd33:1bdd) (Quit: Textual IRC Client: www.textualapp.com)
[00:08:12] *** Joins: Haudegen (~quassel@91.114.49.10)
[00:08:27] *** Quits: Haudegen (~quassel@91.114.49.10) (Remote host closed the connection)
[00:20:17] *** Quits: jmd (~user@de.cellform.com) (Ping timeout: 240 seconds)
[00:30:18] <ktosiek> beastDivision: check again? You might have checked between steps. Do you have any RunPython steps in the migration?
[00:30:28] <ktosiek> Do you know which migration is currently running?
[00:30:58] <beastDivision> I do know which one is running, but honestly I don't understand 90% of what this migration is doing
[00:31:06] <beastDivision> it's just an auto migration
[00:32:58] <beastDivision> there are a dozen or so of these in the file
[00:32:59] <beastDivision> https://dpaste.org/vnVb
[00:33:48] <ktosiek> Ohhh, and are all/most of them about ID fields? Have you upgraded Django recently?
[00:33:57] <beastDivision> yes
[00:34:04] <beastDivision> I'm upgrading from 3.1 to 4.0
[00:34:51] <beastDivision> and I don't know what the row count is. probably 100's of billions of rows
[00:36:04] <ktosiek> Anyway, this will take some time on a big table. You can cancel this migration, remove it, and read this: https://docs.djangoproject.com/en/3.2/releases/3.2/#customizing-type-of-auto-created-primary-keys
[00:36:56] <ktosiek> Django changed the default type of the primary key in 4.0. There's a warning in 3.2, but you've missed it by going straight to 4.0 :-)
[00:37:13] <beastDivision> when you say some time, are we talking hours? days?
[00:37:27] <ktosiek> (cancelling a migration is safe in PostgreSQL, no idea about other dbs)
[00:37:59] <beastDivision> also what does canceling look like? cause I thought it was stuck I tried to ctrl-c a bunch of times and it didn't respond after a few mins so I just killed the SSH session
[00:38:08] <beastDivision> and yeah it's on postgres
[00:39:18] <ktosiek> You'd have to kill the manage.py process, or connect to the db and use (IIRC) pg_terminate_backend
[00:42:00] <beastDivision> sorry, but how do i know which pid is the manage.py process, theres a lot, not sure what to grep for here
[00:42:04] <beastDivision> thank you for all the help by the way
[00:43:15] <ktosiek> I'd do something like: ps -A f | grep manage.py
[00:43:36] <beastDivision> aight. thanks. I'm just gonna let the  new one run for however long it takes
[00:43:44] *** Quits: manwhowouldbekin (~manwhowou@37-145-208-90.broadband.corbina.ru) (Ping timeout: 250 seconds)
[00:46:43] <ktosiek> Ok, but it might be hours - and it will lock all affected tables before finishing. I think PostgreSQL can't do a schema-only migration when changing int -> bigint
[00:47:09] <ktosiek> So it pretty much updates all the rows, under a very heavy lock :-(
[00:48:38] *** Quits: zBeeble42 (~zBeeble@repeat.dclg.ca) (Remote host closed the connection)
[00:50:21] *** Joins: zBeeble42 (~zBeeble@repeat.dclg.ca)
[00:53:54] *** Quits: dor (~erg@188.147.33.108.nat.umts.dynamic.t-mobile.pl) (Remote host closed the connection)
[01:00:06] <beastDivision> that's alright
[01:00:27] <beastDivision> is what is, my only concern is there might be two of the same migration running at once
[01:05:12] <beastDivision> i don't know if that original process is actually dead or not
[01:24:31] *** Joins: henbruas_ (~henbruas@ti0003a400-4203.bb.online.no)
[01:24:43] *** Quits: henbruas (~henbruas@ti0003a400-4203.bb.online.no) (Ping timeout: 256 seconds)
[01:25:11] *** henbruas_ is now known as henbruas
[01:26:41] *** Joins: jtiai (~jtiai@81-197-45-202.elisa-laajakaista.fi)
[01:29:00] <ktosiek> Worst case scenario: it will run twice. The second one will wait for the first one, and then only do some of the changes (it probably recreates FKs, which can take some time too). It shouldn't result in a broken database, just more waiting.
[01:31:45] <ktosiek> If you have other migrations, then it depends: for example adding a column will succeed in the one that does it first, and fail (and stop the whole process) in the other.
[01:35:41] *** Joins: gopar (~gopar@199.36.94.212)
[01:39:38] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 250 seconds)
[01:41:37] *** Joins: fikran (~fikran@user/fikran)
[01:49:22] <beastDivision> alright, I've got backups, but that would suck, so I'll be fine either way I suppose
[01:49:49] <beastDivision> would it be possible to add a progress bar to the applying migration output? is that a feature people would even want?
[01:49:55] <beastDivision> cause I want it now lol
[01:51:03] *** Joins: pmcnabb (~pmcnabb@user/pmcnabb)
[01:51:27] *** Quits: gopar (~gopar@199.36.94.212) (Remote host closed the connection)
[01:54:15] <ktosiek> I don't think PostgreSQL reports progress of ALTER TABLE, but you can see which column is being worked on in pg_stat_activity
[01:54:16] *** Joins: GinFuyou (~GinFuyou@reya.cloud.tilaa.com)
[02:01:56] <beastDivision> so none of the queries in pg_stat_activity have anything to do with the migration at all, no matter how many times i run it
[02:02:12] <beastDivision> how do I check that the migration is actually working or dooing anythign?
[02:02:40] <beastDivision> (run a select on pg_stat_activity that is)
[02:34:34] *** Quits: cebor (~cebor@user/cebor) (Quit: bye!)
[02:35:15] *** Joins: cebor (~cebor@user/cebor)
[02:39:52] *** Joins: gopar (~gopar@199.36.94.212)
[02:48:55] *** Quits: audiobirb (~audio@user/audio) (Remote host closed the connection)
[02:49:13] *** Joins: audiobirb (~audio@user/audio)
[02:54:09] *** Parts: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it) ()
[02:54:46] *** Quits: withered_dragon (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Quit: WeeChat 3.3)
[03:03:15] *** Quits: gopar (~gopar@199.36.94.212) ()
[03:07:15] *** Joins: dkliban_ (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net)
[03:10:07] *** Quits: dkliban (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net) (Ping timeout: 256 seconds)
[03:10:12] *** Quits: rje (~textual@65.141.156.170) (Ping timeout: 250 seconds)
[03:35:46] *** Quits: dkliban_ (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net) (Ping timeout: 250 seconds)
[03:48:45] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[03:49:03] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 256 seconds)
[03:50:58] *** Joins: fikran (~fikran@user/fikran)
[03:56:40] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[03:58:28] *** Joins: rje (~textual@50.35.241.164)
[04:03:13] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 256 seconds)
[04:13:55] *** Quits: brsc2909 (~Thunderbi@109.255.244.60) (Quit: brsc2909)
[04:43:37] *** Quits: audiobirb (~audio@user/audio) (Remote host closed the connection)
[04:43:55] *** Joins: audiobirb (~audio@user/audio)
[04:50:14] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[04:56:13] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[04:59:36] *** Joins: dkliban_ (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net)
[05:04:04] *** Quits: FakeMage (~analog_fr@c-71-238-180-183.hsd1.ar.comcast.net) (Remote host closed the connection)
[05:12:31] *** Quits: dkliban_ (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net) (Ping timeout: 256 seconds)
[05:30:35] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[05:38:13] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[05:56:19] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[05:58:25] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 256 seconds)
[06:00:12] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[06:00:19] *** Joins: fikran (~fikran@user/fikran)
[06:17:42] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Quit: back later)
[06:19:34] *** Quits: pmcnabb (~pmcnabb@user/pmcnabb) (Quit: The Lounge - https://thelounge.chat)
[06:47:33] *** Quits: sreve (~quassel@p549d7096.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[06:47:55] *** Joins: sreve (~quassel@p549d739c.dip0.t-ipconnect.de)
[06:52:35] *** Joins: Atque (~Atque@user/atque)
[07:00:45] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[07:02:08] *** Joins: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:c851:b3f:6686:979)
[07:02:13] <PaulWay[w]> Hi all!
[07:03:01] <PaulWay[w]> I've got a complicated problem - trying to delete duplicate rows (we have a null field in a unique-together constraint and we're removing that field).
[07:04:26] <PaulWay[w]> I've got a query which uses a PARTITION ON and the RowNumber function, which would identify IDs that have a RowNumber > 1.
[07:04:48] <PaulWay[w]> Except for: `django.db.utils.NotSupportedError: Window is disallowed in the filter clause.`
[07:05:16] <PaulWay[w]> I kind of need to wrap that query in another which _does_ allow me to filter on row number gt 1.
[07:07:35] <PaulWay[w]> Any ideas how to do that?
[07:07:53] <PaulWay[w]> Or a better way to find and delete duplicates by a particular partition?
[07:26:15] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[07:31:46] *** Quits: kurfen (~kurfen@176.119.195.10) (Ping timeout: 260 seconds)
[07:31:55] *** Joins: kurfen_ (~kurfen@176.119.195.10)
[07:36:04] *** Joins: djapo (~archangel@user/djapo)
[07:47:17] *** Quits: sreve (~quassel@p549d739c.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[07:47:36] *** Joins: sreve (~quassel@p4ff44df5.dip0.t-ipconnect.de)
[07:48:37] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[07:50:51] *** Quits: yuesbeez (uid458354@id-458354.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[07:51:01] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 256 seconds)
[08:14:42] *** Quits: henbruas (~henbruas@ti0003a400-4203.bb.online.no) (Quit: ZNC 1.8.2 - https://znc.in)
[08:15:01] *** Joins: henbruas (~henbruas@ti0003a400-4203.bb.online.no)
[08:47:17] *** Quits: audiobirb (~audio@user/audio) (Ping timeout: 240 seconds)
[08:52:12] *** Joins: dor (~erg@188.147.33.108.nat.umts.dynamic.t-mobile.pl)
[08:54:06] *** Quits: dor (~erg@188.147.33.108.nat.umts.dynamic.t-mobile.pl) (Remote host closed the connection)
[09:16:01] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 256 seconds)
[09:16:38] *** Joins: manwhowouldbekin (~manwhowou@37-145-208-211.broadband.corbina.ru)
[09:25:00] *** Quits: pembo13_ (~pembo13@47.196.95.206) (Quit: Leaving)
[09:27:05] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[09:51:44] *** Joins: sisyph0s (~sisyph0s@ip5f5abff4.dynamic.kabel-deutschland.de)
[09:52:25] *** Quits: sisyph0s (~sisyph0s@ip5f5abff4.dynamic.kabel-deutschland.de) (Client Quit)
[10:06:36] <foo> I'm trying to get autocomplete working in django 3.2. It broke with dal, I'm looking into https://github.com/farhan0581/django-admin-autocomplete-filter - this works for a filter. But I'm wanting this within adding a content type within the django admin. I think that's possible with this?
[10:06:54] *** Quits: daniel-k (~daniel-k@fsf/emeritus/daniel-k) (Read error: Connection reset by peer)
[10:07:07] *** Joins: daniel-k (~daniel-k@fsf/emeritus/daniel-k)
[10:12:35] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Remote host closed the connection)
[10:13:26] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[10:17:50] *** Quits: henbruas (~henbruas@ti0003a400-4203.bb.online.no) (Quit: ZNC 1.8.2 - https://znc.in)
[10:18:09] *** Joins: henbruas (~henbruas@ti0003a400-4203.bb.online.no)
[10:18:55] <foo> I wonder if I want Django-Select2
[10:26:40] <foo> yeah, pretty sure that's what I want.
[10:26:47] <foo> Still open to any suggestions here in case someone else is familiar with that.
[10:29:08] <foo> Hmm, I don't have root access on this box, I wonder if I can have django look in my local user path for a specific plugin?
[10:38:38] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[10:40:28] <foo> Is there a way to get django to look for plugins here? ~/.local/lib/python3.8/site-packages/django_select2/
[10:41:35] *** Joins: mrwick (~mrwick@user/mrwick)
[10:44:51] *** Quits: pmb (~pmb@89-64-79-51.dynamic.chello.pl) (Read error: Connection reset by peer)
[10:45:14] *** Joins: pmb (~pmb@89-64-79-51.dynamic.chello.pl)
[10:58:43] <foo> FunkyBob: do you happen to be familiar with dal?
[11:05:30] <foo> Gah, I'm so confused. Our normal django guy is out. I was told dal is broke on python 3.9. I need to get autocomplete working on a widget field within django admin. I've looked into django-admin-autocomplete-filter (which is only for a filter on the model, not used in a widget while adding items), Django-Select2 (which requires redis which we don't have), which leaves me with django-autocomplete-light ...
[11:05:36] <foo> which says in the set up to include dal and dal_select2 ( https://django-autocomplete-light.readthedocs.io/en/master/install.html ) ... but I was told dal is broke on python 3.8 and hasn't been maintained since 2006 ... would appreciate any help. I've previously spent several hours on it and thought I'd give it another shot tonight but I feel like I'm running in circles.
[11:09:31] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[11:10:25] *** Quits: wyre (~wyre@user/wyre) (Quit: ZNC 1.8.2 - https://znc.in)
[11:11:27] *** Joins: wyre (~wyre@user/wyre)
[11:11:36] <foo> Ah, dal and dal_select2 is IN django-autocomplete-light
[11:11:36] <foo> heh
[11:32:54] <foo> Ok, I'm making progress. Getting this: TypeError: view must be a callable or a list/tuple in the case of include(). -> I don't have a string being called, though
[11:33:07] <foo> I have this: url(r'^groups-autocomplete/', GroupAutocomplete.as_view(model=StoreGroup), name="groups-autocomplete"),
[11:34:18] <foo> Ah, got it.
[11:34:18] <foo> Heh
[11:42:44] *** Quits: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:c851:b3f:6686:979) (Ping timeout: 252 seconds)
[11:56:55] *** Quits: pmb (~pmb@89-64-79-51.dynamic.chello.pl) (Quit: pmb)
[12:04:40] <foo> Ok, this was actually very simple. All I needed was django-autocomplete-light and it was a drop in for the old dal functionality. Bah, took long enough.
[12:07:49] *** Joins: pycode (~pycode3@2001:b07:5d28:551:315c:bebc:98b4:e90a)
[12:08:12] *** Joins: pmb (~pmb@89-64-79-51.dynamic.chello.pl)
[12:12:36] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Ping timeout: 276 seconds)
[12:42:09] <FunkyBob> foo: dal... t he DB layer from web2py?
[12:43:58] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[12:44:40] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[12:57:50] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0d8-5.dhcp.inet.fi)
[13:05:31] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[13:14:16] *** Joins: mattil (~mattil@helsinki.portalify.com)
[13:25:55] <ktosiek> I'm guessing dal as in Django Autocomplete Light :-)
[13:29:54] *** Joins: bmispelon (~bmispelon@204.79-160-183.customer.lyse.net)
[13:30:53] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[13:31:27] <FunkyBob> ah
[13:35:09] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[13:36:57] *** Joins: Ergo^ (~ergo@91.238.59.144)
[13:48:17] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0d8-5.dhcp.inet.fi) (Read error: Connection reset by peer)
[13:49:42] *** Joins: DnzAtWrk (~DnzAtWrk@1408.pc.puv.fi)
[13:57:49] *** Quits: DnzAtWrk (~DnzAtWrk@1408.pc.puv.fi) (Ping timeout: 256 seconds)
[14:41:11] *** Joins: mad_moses (~ps@2a02:810b:f3f:f0d0:d250:99ff:fe86:b052)
[14:47:55] *** Joins: kostkon_ (~androirc@2.142.66.94.static.otenet.gr)
[14:54:37] *** Joins: NathanTophatch (~NKH@2a01:4b00:f417:fe00:8d4:e68c:208d:6ba5)
[14:55:12] <NathanTophatch> Hey there.  I have updated some libs today and it appears maxminds geoip2 libs no longer accept the dbip database.  I am getting the error Exception: Unable to recognize database edition: DBIP-Country-Lite
[14:55:27] <NathanTophatch> are there any plans to move away from the maxmind libs to support the free dbip database?
[14:57:09] <NathanTophatch> something doesn't quite feel right only supporting a lib that requires the purchase of a commercial database when a free alternative is available
[15:02:44] *** Quits: Byteflux (~byte@byteflux.net) (Read error: Connection reset by peer)
[15:03:01] *** Joins: Byteflux (~byte@byteflux.net)
[15:06:04] <NathanTophatch> ah, some more digging shows this message is actually coming from Django gis contrib lib and has already been updated
[15:06:06] *** Quits: NathanTophatch (~NKH@2a01:4b00:f417:fe00:8d4:e68c:208d:6ba5) (Quit: Client closed)
[15:07:23] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[15:08:15] *** Joins: chris_99 (uid26561@id-26561.lymington.irccloud.com)
[15:13:28] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[15:16:54] *** Quits: pycode (~pycode3@2001:b07:5d28:551:315c:bebc:98b4:e90a) (Ping timeout: 250 seconds)
[15:36:05] <mad_moses> Hi, I use django-rest-framework with token auth which works great for my android app. Now I want to use a webview to display some pages which needs authentication. Token auth is not working for those pages. I would like to build a "rest method" which returns a session cookie. I am not sure where to look
[15:36:59] <mad_moses> Where is the magic happening during the default django login which return the session cookie? I would like to copy this code and add it to my rest method "get sessionid"
[15:38:36] *** Joins: simme (uid33727@id-33727.lymington.irccloud.com)
[15:42:02] *** Quits: lucascastro (~lucascast@192-140-51-251.static.oncabo.net.br) (Remote host closed the connection)
[15:43:30] *** Joins: lucascastro (~lucascast@192-140-51-251.static.oncabo.net.br)
[15:52:26] *** Quits: sreve (~quassel@p4ff44df5.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[15:53:46] *** Joins: sreve (~quassel@p4ff44df5.dip0.t-ipconnect.de)
[15:58:40] <moldy> mad_moses: without looking into the code, my guess would be SessionMiddleware
[15:59:19] <moldy> mad_moses: you shouldn't need to copy the code though, you can probably just read the session via the official API?
[16:00:14] *** Joins: Atque (~Atque@user/atque)
[16:05:37] <mad_moses> moldy: thank you. I was looking at the wrong place. https://docs.djangoproject.com/en/2.2/topics/http/sessions/#using-sessions-out-of-views I think s.session_key is what I am looking for?
[16:05:57] <moldy> something like that, yup
[16:11:02] *** Joins: iomari891 (~iomari891@197.210.71.84)
[16:11:07] <mad_moses> moldy: just wandering what is happening if no session_key exists because I login via token authentication.
[16:11:16] <mad_moses> I will write a test and tell you in a bit :D
[16:13:52] *** Joins: gandalf100 (~gandalf10@084035201147.static.ipv4.infopact.nl)
[16:14:53] <gandalf100> hello , how do i view the detailed history of permissions given to users in django admin? i can only see that an "permission was edited" in history, is there a way to see which particular one was modified?
[16:15:27] <gandalf100> or would i have to depend on 3rd party libraries to do this, like django-simple-history
[16:18:16] <GinFuyou> Yes, there is no detailed history built-n
[16:22:24] *** Joins: withered_dragon (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[16:31:34] <gandalf100> ah okay, thank you!
[16:44:51] *** Joins: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[16:47:49] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[16:47:57] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[16:51:13] *** Quits: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[16:53:44] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[16:56:16] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[17:01:36] *** Joins: dor (~erg@188.146.32.10.nat.umts.dynamic.t-mobile.pl)
[17:03:45] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[17:04:51] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[17:09:23] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[17:19:37] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[17:21:26] *** Joins: Hokedli (~lasliedv@gateway/tor-sasl/hokedli)
[17:21:56] *** Joins: chl (~Guest81@user/chl)
[17:23:07] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[17:24:27] <chl> In a django template, how do make an if with the value from a choicefield? https://dpaste.org/Rd8M
[17:25:21] <chl> Not the human-readable value, but the model value
[17:26:30] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[17:26:32] *** Quits: gandalf100 (~gandalf10@084035201147.static.ipv4.infopact.nl) (Quit: Client closed)
[17:27:42] *** Joins: dkliban_ (~dkliban@99-3-68-61.lightspeed.rlghnc.sbcglobal.net)
[17:29:00] *** Joins: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it)
[17:30:14] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Client Quit)
[17:33:56] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[17:36:32] *** Joins: Chillie (~Chillie@109-252-109-77.nat.spd-mgts.ru)
[17:37:07] <Chillie> Hello, everyone! Lots of people here. Is it ok to ask specific questions here?
[17:40:28] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[17:40:47] *** Joins: pycode (~pycode3@2001:b07:5d28:551:a34d:392f:89f5:ba2f)
[17:43:05] *** Joins: fikran (~fikran@user/fikran)
[17:43:44] <Chillie> is it expected that when (on django 3.2 with mysql ) I do query_one.union(query_two).order_by(Length('name')) I get a RuntimeError: generator raised StopIteration?
[17:47:09] *** Quits: manwhowouldbekin (~manwhowou@37-145-208-211.broadband.corbina.ru) (Ping timeout: 256 seconds)
[17:53:44] *** Quits: dor (~erg@188.146.32.10.nat.umts.dynamic.t-mobile.pl) (Read error: Connection reset by peer)
[17:54:37] <moldy> Chillie: not sure. the whole traceback would be useful.
[17:59:46] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[18:02:28] *** Quits: Chillie (~Chillie@109-252-109-77.nat.spd-mgts.ru) (Ping timeout: 256 seconds)
[18:05:58] *** Quits: simme (uid33727@id-33727.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[18:08:17] *** Quits: jtiai (~jtiai@81-197-45-202.elisa-laajakaista.fi) (Ping timeout: 256 seconds)
[18:08:39] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[18:08:41] *** Quits: stdout (~stdout@2605:ab80:b000:7202:3e12:af82:936c:2ff6) (Quit: Leaving)
[18:10:14] *** Quits: iomari891 (~iomari891@197.210.71.84) (Ping timeout: 250 seconds)
[18:10:39] *** Joins: Chillie (~Chillie@109-252-109-77.nat.spd-mgts.ru)
[18:11:04] <Chillie> sorry, http://dpaste.de/ is not available What would be an alternative to that?
[18:12:40] *** Quits: chl (~Guest81@user/chl) (Ping timeout: 256 seconds)
[18:13:00] <Chillie> here's the traceback: https://dpaste.org/EfDm
[18:16:43] <Chillie> (small type in startswith)
[18:16:47] <Chillie> *typo
[18:20:24] *** Joins: xkuru (~xkuru@user/xkuru)
[18:23:50] <b-rex> https://django-filter.readthedocs.io/en/stable/guide/usage.html#customize-filtering-with-filter-method
[18:24:39] <b-rex> in this example, how does queryset(**{name: value}) work? does that ** expand it to become queryset(something=value) if name = 'something' ?
[18:25:25] <b-rex> if so, how can i achieve queryset(something__iexact=value) from name and value?
[18:25:42] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[18:31:50] *** Joins: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec)
[18:31:51] <Chillie> b-rex, it's keyword argument unpacking. It unpacks a supplied dictionary. https://softwareengineering.stackexchange.com/a/131415
[18:34:53] <b-rex> Chillie: thanks. i understand it now but my new question is, is it possible to "concatenate" that somehow to achieve something__iexact where something is the unpacked name variable?
[18:35:53] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[18:35:59] <Chillie> are you asking if it's possible to get a models field name dynamically and use it?
[18:36:42] *** Joins: Guest07 (~Guest07@pool-96-253-74-73.rcmdva.fios.verizon.net)
[18:37:17] <Guest07> Hi I am trying to figure out how to solve this error with a url reverse match for an activation url with a token/uid https://dpaste.org/vssL
[18:38:35] *** Parts: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it) ()
[18:39:03] *** Quits: dez (uid92154@user/dez) (Quit: Connection closed for inactivity)
[18:39:52] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[18:39:59] <b-rex> Chillie: yes i'll paste an example of what i'm trying to achieve
[18:40:04] <b-rex> (not in the channel)
[18:41:28] <b-rex> https://dpaste.org/QUJM
[18:41:34] *** Quits: Guest07 (~Guest07@pool-96-253-74-73.rcmdva.fios.verizon.net) (Quit: Client closed)
[18:46:45] <Chillie> b-rex, do you prefer f-strings or format()?
[18:47:20] *** Joins: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it)
[18:48:03] <b-rex> Chillie: i like f strings
[18:49:13] *** Joins: Guest07 (~Guest07@pool-96-253-74-73.rcmdva.fios.verizon.net)
[18:49:25] <Guest07> Sorry got disconnected not sure if anyone responded to me
[18:50:45] *** Quits: Hokedli (~lasliedv@gateway/tor-sasl/hokedli) (Quit: Konversation terminated!)
[18:51:10] <Chillie> if name is a sting, does queryset.filter(**{f'{name}__iexact':value}) do what you want?
[18:51:11] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 256 seconds)
[18:51:33] * b-rex tries
[18:54:11] *** Joins: jmd (~user@de.cellform.com)
[18:57:46] *** Quits: jmd (~user@de.cellform.com) (Remote host closed the connection)
[18:57:51] *** Quits: kostkon_ (~androirc@2.142.66.94.static.otenet.gr) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[18:58:26] *** Joins: jmd (~user@de.cellform.com)
[18:58:48] <Guest07> If I do {{uidb64}} and {{ token }} in the template I am getting results but {% url 'activate uidb64 token' %} does not seem to work...
[18:59:50] <b-rex> Chillie: yes that did it :) thank you
[18:59:54] <mad_moses> moldy: I think the session_key is something else. It is not working. I guess I have to sign it somehow. Do you have any idea?
[19:00:12] <b-rex> Chillie: now i learned a thing i didn't know i can do with variables unpacking
[19:01:17] <Guest07> nevermind i think i got it.. the quotes were my problem
[19:01:21] <moldy> mad_moses: what do you want to achieve?
[19:01:46] <Guest07> But my only other question is in that github link do I use decode() or not for the uidb64 or token?
[19:01:54] <mad_moses> moldy: I want to return in my rest endpoint a sessionid.
[19:01:55] <Guest07> https://github.com/sibtc/simple-signup/issues/6
[19:02:03] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[19:02:40] <mad_moses> moldy: So my Android app use basically token auth. But now i want to load a page in a webview on my website. And for this i need a session cookie
[19:02:42] <Chillie> Guest07 what's the difference between  {% url 'activate uidb64 token' %} and  {% url 'activate' uidb64 token %} ? =)
[19:03:45] <Guest07> the second one was correct
[19:03:49] <Guest07> first one was not
[19:04:52] <Chillie> yeah, didn't see you already solved it.
[19:05:02] <Guest07> yea but do i use .decode() at all?
[19:05:15] <Guest07> I am not using it but is that a best practice like the last person's comment in github?
[19:08:42] <moldy> mad_moses: hmm, IIRC basically the default django config should work fine for that? as long as SessionMiddleware is active etc., the client should get the cookie?
[19:09:06] <mad_moses> moldy: if I call my rest endpoint I do not get any cookies returned
[19:10:39] <moldy> hmm i see, the client is not logged in via the session cookie... in that case you'll probably have to send it manually (and be very careful not to mess up security)
[19:12:09] <mad_moses> moldy: yes. I am not sure how to return it manually => this is not working: https://dpaste.org/7s3z
[19:20:18] <mad_moses> moldy: I have to leave now. I will inform you if I was able to find a way :) I think I have to read the django source code to solve this
[19:20:23] *** Quits: mad_moses (~ps@2a02:810b:f3f:f0d0:d250:99ff:fe86:b052) (Quit: Leaving)
[19:22:38] *** Quits: jmd (~user@de.cellform.com) (Remote host closed the connection)
[19:41:09] <Guest07> wow so now i have a new problem
[19:41:37] <Guest07> {action: "{% url 'activate' uidb64=uid token=token %}"} produces /activate/MjM/az90sy-72629094c709e4163cc87edca3059ecf/
[19:41:56] <Guest07> And recaptcha is complaining about it -> Invalid action name, may only include "A-Za-z/_". Do not include user-specific information.
[19:42:28] <Guest07> I don't think there is a way to fix this if I absolutely need to have the - in there?
[19:42:47] <Guest07> would it be safe to replace it but I think that would mess up the activation
[19:48:22] <Guest07> https://dpaste.org/ckbP
[19:48:25] *** Quits: Ergo^ (~ergo@91.238.59.144) (Ping timeout: 256 seconds)
[19:48:36] <Guest07> This is how the token gets generated with the - in it
[19:49:59] *** Joins: csm3105 (~csm3105@2a02:2e02:3e4:d00:d0e5:fa85:7af4:c26a)
[19:50:02] *** Joins: Csm319_ (~csm3105@2a02:2e02:3e4:d00:d0e5:fa85:7af4:c26a)
[19:50:20] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 250 seconds)
[19:52:26] *** Joins: fikran (~fikran@user/fikran)
[19:57:02] <Guest07> Doing something like this in my view did not work - it makes the token invalid 'token': str(account_activation_token.make_token(user)).replace('-',''),
[20:01:57] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 240 seconds)
[20:08:47] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:10:05] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[20:10:05] *** ChanServ sets mode: +v EvilDMP
[20:10:16] *** Quits: pycode (~pycode3@2001:b07:5d28:551:a34d:392f:89f5:ba2f) (Ping timeout: 250 seconds)
[20:36:47] *** Joins: markcerv (~markcerv3@52-119-125-204.PUBLIC.monkeybrains.net)
[20:44:13] <fizzizist> What do you guys think of having a `progress` flag on the bulk_create function that could indicate progress for long batched insert operations?
[20:53:01] *** Quits: ST47 (~ST47@wikimedia/st47) (Ping timeout: 256 seconds)
[20:55:26] <ktosiek> fizzizist: how would it indicate progress?
[21:00:17] *** Joins: beastDiv1 (~beastDivi@user/beastdivision)
[21:02:21] *** Quits: beastDivision (~beastDivi@user/beastdivision) (Ping timeout: 276 seconds)
[21:03:13] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[21:05:19] *** Joins: ST47 (~ST47@wikimedia/st47)
[21:06:31] *** Quits: markcerv (~markcerv3@52-119-125-204.PUBLIC.monkeybrains.net) (Quit: Leaving)
[21:06:48] *** Joins: markcerv (~markcerv3@52-119-125-204.PUBLIC.monkeybrains.net)
[21:07:15] *** Quits: chowmeined (~chowmeine@user/chowmeined) (Read error: Connection reset by peer)
[21:07:54] *** Quits: django-ticketbot (~django-ti@django/ops/ticketbot) (Remote host closed the connection)
[21:08:10] *** Joins: django-ticketbot (~django-ti@django/ops/ticketbot)
[21:19:47] <fizzizist> ktosiek: maybe with a progress bar such as tqdm or an internal django one?
[21:23:37] *** Joins: explore (uid233125@id-233125.hampstead.irccloud.com)
[21:27:11] *** Quits: rje (~textual@50.35.241.164) (Ping timeout: 256 seconds)
[21:27:35] <ktosiek> That might be handy, but sounds hard to do right: you'll need different feedback mechanisms for web request, management commands, and background tasks. I'd rather see a `batched(number, iterable)` function in django.utils, that would allow you to use whatever you need in a given context.
[21:28:54] <ktosiek> Like: for batch in tqdm(batched(1000, my_iterator)): ....bulk_create(batch)
[21:31:09] <fizzizist> ktosiek: Yeah that `batched` function is how I currently implement it on my own, and it works great. I just thought if it were easy enough to implement, it might be nice to be able to just pass a bool to the bulk_create function and let it handle that itself
[21:31:39] <fizzizist> but it seems it wouldn't be that simple is what you are saying
[21:35:08] <ktosiek> With current implementation of bulk_create it wouldn't be too hard to add tqdm, but I'm not sure if it's a good idea because: it's a new dependency, and it only makes sense for management commands (if at all). Also, I've written some version of that `batched` function so many times I wouldn't mind having it in the framework :-)
[21:37:30] *** Quits: beastDiv1 (~beastDivi@user/beastdivision) (Quit: beastDiv1)
[21:38:12] *** Quits: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it) (Quit: Leaving.)
[21:38:29] <fizzizist> yeah in the codebase I work in, we have a function called `simple_batcher` and we use it all the time. I've been looking for a good first PR, maybe I can put in that batched function
[21:38:39] <ktosiek> (and IIRC the current implementation of batch_create first turns the argument into a list and only then splits it into batches, so you might want to do your own batching earlier anyway)
[21:42:13] *** Quits: Csm319_ (~csm3105@2a02:2e02:3e4:d00:d0e5:fa85:7af4:c26a) (Ping timeout: 268 seconds)
[21:42:13] *** Quits: csm3105 (~csm3105@2a02:2e02:3e4:d00:d0e5:fa85:7af4:c26a) (Ping timeout: 268 seconds)
[21:45:47] *** Joins: rje (~textual@65.141.156.170)
[21:47:59] <Guest07> If you open a password reset link before it expires but then you still have it open in your browser and it expires and refresh the browser should it still work or will it be invalid?
[21:48:47] *** Joins: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it)
[21:51:23] <Guest07> It seems that if you have it open before expiration then it expires while still in the browser it never expires...
[21:51:42] *** Joins: slav0nic (slav0nic@python.su)
[21:57:20] *** Parts: chris_99 (uid26561@id-26561.lymington.irccloud.com) ()
[21:58:03] <Guest07> nevermind found the problem - I had 2 PASSWORD_RESET_TIMEOUT settings
[22:00:03] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 256 seconds)
[22:01:47] *** Joins: fikran (~fikran@user/fikran)
[22:04:05] *** Joins: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net)
[22:08:11] *** justIrresolute is now known as justJustache
[22:12:14] *** Joins: manwhowouldbekin (~manwhowou@37-145-208-211.broadband.corbina.ru)
[22:21:32] *** Quits: Chillie (~Chillie@109-252-109-77.nat.spd-mgts.ru) (Quit: Client closed)
[22:25:38] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Quit: If dreams are like movies, then memories are films about ghosts.)
[22:26:58] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[22:33:39] *** Quits: markcerv (~markcerv3@52-119-125-204.PUBLIC.monkeybrains.net) (Read error: Connection reset by peer)
[22:39:45] *** Quits: withered_dragon (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Quit: WeeChat 3.3)
[22:42:09] *** Joins: george91 (~george91@103.137.204.24)
[22:46:54] *** Joins: withered_dragon (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[22:48:08] *** Quits: Donitz (~Donitz@88-115-149-215.elisa-laajakaista.fi) (Read error: No route to host)
[22:49:57] *** Joins: csm3105 (~csm3105@static-90-220-24-46.ipcom.comunitel.net)
[22:49:58] *** Joins: Csm319_ (~csm3105@static-90-220-24-46.ipcom.comunitel.net)
[22:54:34] *** Joins: Donitz (~Donitz@88-115-149-215.elisa-laajakaista.fi)
[22:56:34] *** Parts: george91 (~george91@103.137.204.24) (Leaving...)
[22:56:46] *** Joins: george91 (~george91@103.137.204.24)
[23:04:21] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[23:06:09] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Quit: Thanks, see you later.)
[23:08:23] *** Joins: iamkarlson (~iamkarlso@80-61-94-238.fixed.kpn.net)
[23:15:30] *** Quits: iamkarlson (~iamkarlso@80-61-94-238.fixed.kpn.net) (Read error: Connection reset by peer)
[23:17:32] *** Joins: danimal4 (~dflesner@47-208-183-44.trckcmtc01.res.dyn.suddenlink.net)
[23:18:57] *** Quits: csm3105 (~csm3105@static-90-220-24-46.ipcom.comunitel.net) (Quit: Leaving)
[23:27:34] *** Joins: markcerv (~markcerv3@52-119-125-204.PUBLIC.monkeybrains.net)
[23:29:29] *** Parts: blackout69 (~blackout6@net-109-117-245-237.cust.vodafonedsl.it) ()
[23:29:57] *** Quits: manwhowouldbekin (~manwhowou@37-145-208-211.broadband.corbina.ru) (Ping timeout: 240 seconds)
