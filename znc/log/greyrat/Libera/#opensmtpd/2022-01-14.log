[01:41:49] *** Joins: gnoMii (~gnoMii@zorve-amanvilliers.pck.nerim.net)
[01:55:01] <opv> Hi all. I'm trying to set up basic mail filtering by src as described in smtpd.conf. I have it set up so that it *technically* works, however when a request is denied a 421 internal is logged, so things aren't what they're supposed to be. Can you tell me what I'm doing wrong? This is my config: https://pastebin.com/rDtvmifs - the referenced "denied" file contains a single IP per line
[02:31:08] *** Quits: seninha (~seninha@user/seninha) (Remote host closed the connection)
[03:01:58] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Ping timeout: 250 seconds)
[03:08:40] <lhynes> (Don't think it would cause an internal error, but smtpd.conf(5) says "Decisions that involve a message require that the message be RFC valid, meaning that they should either start with a 4xx or 5xx status code.")
[03:09:30] <lhynes> As in, 'filter "test" phase connect match src <denied> disconnect "550 denied"'
[03:13:16] <lhynes> You might also try running smtpd in the foreground with trace and / or verbose options. Might show exactly what's going on.
[03:46:05] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[03:52:58] <PyR3X> is the check for rdns redundant for fcrdns or is it required?
[04:43:08] *** Joins: SOLARIS_s (~SOLARIS_s@cpe7c9a54459fea-cm7c9a54459fe8.cpe.net.cable.rogers.com)
[06:07:57] *** Joins: gnoMii_ (~gnoMii@zorve-amanvilliers.pck.nerim.net)
[06:10:19] *** Quits: gnoMii (~gnoMii@zorve-amanvilliers.pck.nerim.net) (Ping timeout: 256 seconds)
[08:37:40] *** Quits: hovr (~nobody@user/hovr) (Ping timeout: 265 seconds)
[09:05:13] *** Joins: hovr (~nobody@user/hovr)
[10:10:44] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Quit: Say What?)
[10:58:06] <opv> thank you lhynes , i'll check things out after work
[12:09:07] *** Joins: gustik (~gustik@2a01:c844:2436:6920:9e9:f97c:41d1:634c)
[12:36:29] <opv> PyR3X: from my understanding fcrdns checks if the rdns matches the A, while rdns only checks if a rdns is present
[12:36:39] <opv> sm pls correct me if mistaken
[14:11:47] *** Quits: gustik (~gustik@2a01:c844:2436:6920:9e9:f97c:41d1:634c) (Quit: Leaving)
[16:14:44] *** Joins: Lucas6023 (~Lucas6023@gateway/tor-sasl/lucas6023)
[16:17:02] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[17:50:46] *** Quits: Izorkin (~Izorkin@smtp.elven.pw) (Ping timeout: 245 seconds)
[17:51:15] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Ping timeout: 276 seconds)
[17:51:16] *** Joins: Izorkin (~Izorkin@2600:70ff:b1c5:0:cd5:a24e:d8c1:5fa2)
[17:59:35] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[18:14:05] *** Quits: Izorkin (~Izorkin@2600:70ff:b1c5:0:cd5:a24e:d8c1:5fa2) (Quit: ZNC 1.8.2 - https://znc.in)
[18:14:23] *** Joins: Izorkin (~Izorkin@smtp.elven.pw)
[18:59:19] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[19:42:58] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Ping timeout: 250 seconds)
[20:35:24] *** Quits: Izorkin (~Izorkin@smtp.elven.pw) (Ping timeout: 250 seconds)
[20:49:44] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[21:10:15] *** Joins: Izorkin (~Izorkin@2600:70ff:b1c5:0:cd5:a24e:d8c1:5fa2)
[21:33:19] *** Joins: val (~val@limnoria/val)
[21:37:48] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Ping timeout: 250 seconds)
[21:44:06] <val> Hi, I am trying to make opensmtpd write mails to maildirs using virtual users, but %{dest} in the maildir path seems to be expanded to the original RCPT instead of the one after expansion: https://paste.debian.net/plain/1227142
[21:44:38] <val> In this example, it writes to /srv/main-maildir/val@aperio.fr/, but I would expect it to write to /srv/main-maildir/val_aperio/
[21:49:42] <val> I use opensmtpd 6.8.0p2, installed from Debian's repository
[21:54:21] *** Quits: chiselfuse (~chiselfus@user/chiselfuse) (Ping timeout: 276 seconds)
[21:55:12] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[21:55:54] *** Joins: chiselfuse (~chiselfus@user/chiselfuse)
[21:59:33] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Ping timeout: 276 seconds)
[22:03:31] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[22:07:54] *** Joins: vit (~vit@chello085216193138.chello.sk)
[22:08:18] *** vit is now known as Guest9014
[22:27:12] *** Quits: Noisytoot (~noisytoot@sourcehut/user/noisytoot) (Quit: ZNC 1.8.2 - https://znc.in)
[22:40:51] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Ping timeout: 256 seconds)
[23:29:11] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Remote host closed the connection)
[23:29:59] *** Quits: gnoMii_ (~gnoMii@zorve-amanvilliers.pck.nerim.net) (Ping timeout: 256 seconds)
[23:29:59] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[23:31:01] *** Joins: Noisytoot (~noisytoot@sourcehut/user/noisytoot)
[23:34:25] *** Joins: gnoMii (~gnoMii@zorve-amanvilliers.pck.nerim.net)
[23:47:27] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Ping timeout: 276 seconds)
[23:50:33] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[23:57:41] *** Joins: bsd4me (~IceChat95@user/bsd4me)
