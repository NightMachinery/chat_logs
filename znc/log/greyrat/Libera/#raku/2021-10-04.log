[00:34:23] <Geth> ¦ ecosystem: e9117985c0 | (Jonathan Stowe)++ | META.list
[00:34:23] <Geth> ¦ ecosystem: Audio::PortAudio, Audio::PortMIDI gone to CPAN
[00:34:23] <Geth> ¦ ecosystem: review: https://github.com/Raku/ecosystem/commit/e9117985c0
[00:34:47] *** Quits: linkable6 (lin-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[00:34:47] *** Quits: evalable6 (eva-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[00:35:10] *** Joins: linkable6 (lin-able@2001:41d0:2:5eb5::)
[01:35:10] *** Quits: linkable6 (lin-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[01:36:13] *** Quits: Manifest0 (~Manifest0@cst2-65-109.cust.vodafone.cz) (Quit: WeeChat 3.2.1)
[01:36:22] *** Tirifto_ is now known as Tirifto
[01:36:36] *** Joins: linkable6 (lin-able@2001:41d0:2:5eb5::)
[01:37:20] *** Joins: evalable6 (eva-able@2001:41d0:2:5eb5::)
[01:40:15] <Tirifto> Is there some way I can split a program into multiple files without worrying about modules too much, specially with regard to variable definitions?
[01:40:25] *** Joins: monkey_ (~user@190.104.116.134)
[01:43:12] <Tirifto> I guess declaring a variable with ‘our’ and then importing the file it’s in with ‘use’ is the most straightforward way?
[01:44:06] <MasterDuke> depending on how "clean" you want to be, and/or your usecase, EVALFILE might be useful
[01:51:51] <Tirifto> MasterDuke: For my use case, that might actually feel ‘cleaner’. :-) I suppose EVALFILE only works at runtime, though?
[01:52:49] <MasterDuke> dunno, don't believe i've ever used it, just know of its existence
[01:53:01] <timo> evalfile is a run-time thing, yes
[01:53:15] <timo> it can not give you local variables or subs, since those are fixed at compile time
[01:54:47] <timo> you can run EVALFILE at compile time with BEGIN, but that won't just return stuff into your scope either
[02:01:35] <Tirifto> Thank you, timo and MasterDuke.
[02:03:57] *** Quits: monkey_ (~user@190.104.116.134) (Remote host closed the connection)
[02:18:52] <Tirifto> Passing thought: Intuitively, I expected a Set to be like an orderless List, but it feels more like a valueless Map.
[02:26:25] <lizmat> a Set is an object Map with only True / False as possible values
[02:37:14] <timo> you could implement a set based on just a list, but it will have implications on performance that you usually don't want
[02:40:23] *** Guest95 is now known as berber44
[03:10:52] <discord-raku-bot> <Nemokosch#9980> Yes, I don't think this was a particularly Raku thing
[03:13:40] *** Quits: berber44 (~Guest95@78.107.92.161) (Quit: Client closed)
[03:27:58] *** Quits: squashable6_ (squ-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[03:29:54] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[03:32:47] *** Quits: reportable6 (rep-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[03:34:30] *** Joins: reportable6 (rep-able@2001:41d0:2:5eb5::)
[03:56:01] *** Quits: squashable6 (squ-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[04:06:59] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[04:08:03] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[04:16:19] *** Quits: squashable6 (squ-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[04:19:04] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[05:19:05] *** Quits: greppable6 (gre-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[05:19:05] *** Quits: evalable6 (eva-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[05:19:05] *** Quits: quotable6 (quo-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: tellable6 (tel-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: squashable6 (squ-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: bloatable6_ (blo-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: releasable6 (rel-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[05:19:05] *** Quits: coverable6 (cov-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: notable6 (not-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: reportable6 (rep-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[05:19:05] *** Quits: linkable6 (lin-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[05:19:05] *** Quits: nativecallable6 (nat-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[05:19:05] *** Quits: bisectable6_ (bis-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: statisfiable6 (sta-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: shareable6_ (sha-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: unicodable6_ (uni-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: committable6_ (com-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: benchable6 (ben-able@2001:41d0:2:5eb5::) (Read error: Connection reset by peer)
[05:19:05] *** Quits: sourceable6_ (sou-able@2001:41d0:2:5eb5::) (Write error: Connection reset by peer)
[05:19:46] *** Joins: evalable6 (eva-able@2001:41d0:2:5eb5::)
[05:19:52] *** Joins: shareable6 (sha-able@2001:41d0:2:5eb5::)
[05:20:04] *** Joins: quotable6 (quo-able@2001:41d0:2:5eb5::)
[05:20:24] *** Joins: nativecallable6 (nat-able@2001:41d0:2:5eb5::)
[05:21:39] *** Joins: reportable6 (rep-able@2001:41d0:2:5eb5::)
[05:21:57] *** Joins: statisfiable6 (sta-able@2001:41d0:2:5eb5::)
[05:22:16] *** Joins: committable6 (com-able@2001:41d0:2:5eb5::)
[06:19:27] *** Joins: greppable6 (gre-able@2001:41d0:2:5eb5::)
[06:19:33] *** Joins: bloatable6 (blo-able@2001:41d0:2:5eb5::)
[06:19:53] *** Joins: linkable6 (lin-able@2001:41d0:2:5eb5::)
[06:20:21] *** Joins: unicodable6 (uni-able@2001:41d0:2:5eb5::)
[06:20:26] *** Joins: tellable6 (tel-able@2001:41d0:2:5eb5::)
[06:20:57] *** Joins: bisectable6 (bis-able@2001:41d0:2:5eb5::)
[06:21:02] *** Joins: sourceable6 (sou-able@2001:41d0:2:5eb5::)
[06:21:58] *** Joins: benchable6 (ben-able@2001:41d0:2:5eb5::)
[06:22:11] *** Joins: notable6 (not-able@2001:41d0:2:5eb5::)
[06:22:20] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[07:19:31] *** Joins: releasable6 (rel-able@2001:41d0:2:5eb5::)
[07:21:06] *** Joins: coverable6 (cov-able@2001:41d0:2:5eb5::)
[07:30:06] *** pierrot_ is now known as pierrot
[07:37:27] <Geth> ¦ doc: 924afafd02 | (Stoned Elipot)++ | doc/Language/subscripts.pod6
[07:37:27] <Geth> ¦ doc: whitespace fix
[07:37:27] <Geth> ¦ doc: review: https://github.com/Raku/doc/commit/924afafd02
[07:37:30] <linkable6> Link: https://docs.raku.org/language/subscripts
[07:47:44] *** Quits: squashable6 (squ-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[07:49:17] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[07:50:31] *** Quits: squashable6 (squ-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[07:52:29] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[07:52:49] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 245 seconds)
[07:54:48] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[08:07:12] *** Joins: gordonfish- (~gordonfis@user/gordonfish)
[08:07:19] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 252 seconds)
[08:11:59] *** Quits: gordonfish- (~gordonfis@user/gordonfish) (Ping timeout: 245 seconds)
[08:21:47] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[08:25:17] *** Quits: squashable6 (squ-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[08:32:07] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 252 seconds)
[09:03:36] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[09:23:50] *** Joins: anser (~anser@mm-177-49-120-178.brest.dynamic.pppoe.byfly.by)
[09:27:57] *** Joins: squashable6 (squ-able@2001:41d0:2:5eb5::)
[09:32:47] *** Quits: reportable6 (rep-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[09:43:55] *** Joins: abraxxa (~ahartmai@smtp.hartmaier.priv.at)
[09:49:29] *** Quits: abraxxa (~ahartmai@smtp.hartmaier.priv.at) (Ping timeout: 245 seconds)
[09:50:07] *** Joins: abraxxa (~ahartmai@tsa-tc-flod-1.t-systems.at)
[10:07:11] *** Joins: Manifest0 (~Manifest0@cst2-65-109.cust.vodafone.cz)
[10:14:00] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[10:15:58] *** Quits: Sgeo (~Sgeo@user/sgeo) (Read error: Connection reset by peer)
[10:49:27] *** Joins: ufobat (~martin@dynamic-077-002-105-103.77.2.pool.telefonica.de)
[10:59:24] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[11:14:28] *** Quits: moon-child (~moon-chil@cardinal.elronnd.net) (Read error: Connection reset by peer)
[11:14:38] *** Joins: moon-child (~moon-chil@cardinal.elronnd.net)
[11:21:55] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[11:35:17] *** Joins: dakkar (~dakkar@home.thenautilus.net)
[12:02:35] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[12:27:06] <lizmat> PSA: the Rakudo Weekly News will be published on Tuesday this week due to circumstances
[12:33:36] *** Joins: reportable6 (rep-able@2001:41d0:2:5eb5::)
[12:38:17] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[12:48:18] <sjn> happy circumstances, I hope
[12:48:44] <lizmat> indeed  :-)
[12:57:41] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[13:03:25] <sjn> good to know :)
[13:05:54] <samebchase9> How do I ensure that a command that has colorized output, does the same when called inside a qqx{} block? 
[13:08:20] *** Quits: eseyman (~manu@lfbn-idf1-1-2271-214.w92-151.abo.wanadoo.fr) (Ping timeout: 250 seconds)
[13:09:27] *** samebchase9 is now known as samebchase
[13:15:41] <dakkar> samebchase: it depends on the command
[13:16:19] <dakkar> some commands (e.g. `ls`) accept options to force colours (`ls --color=always`)
[13:16:49] <dakkar> some only produce colour output when their stdout is a tty (`qqx` sets the sub-process's stdout to a pipe)
[13:17:33] <dakkar> (I haven't seen a raku module to set up a tty/pty)
[13:17:52] <dakkar> oh, of course it also depends if you're on windows or not (as usual, windows is different)
[13:18:40] <samebchase> dakkar: okay, I was trying to get `git show` to force colorized output
[13:19:11] <samebchase> let me try with `ls --color=always` and see if that has any impact
[13:19:22] <samebchase> or perhaps if there is some env variable that could be set
[13:21:13] <dakkar> `git show --color=always` should work, according to the man page
[13:21:32] <dakkar> remember that there's no general standard, every command is different
[13:24:23] <samebchase> thanks so much dakkar!
[13:24:55] <samebchase> I was searching for 'escape' in the `git show` man page, I guess I should have searched for `--color=always`
[14:07:09] *** Joins: sena_kun (~sena_kun_@static-84-42-198-52.net.upcbroadband.cz)
[14:55:16] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[14:55:19] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Client Quit)
[15:09:41] *** Quits: KotH (~attila@erica.kinali.ch) (Ping timeout: 264 seconds)
[15:09:50] *** Joins: KotH (~attila@erica.kinali.ch)
[15:33:02] *** Quits: reportable6 (rep-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[15:36:01] *** Joins: reportable6 (rep-able@2001:41d0:2:5eb5::)
[15:47:43] <discord-raku-bot> <Anton Antonov#7232> "PSA: the Rakudo Weekly News will be published on Tuesday this week due to circumstances" -- FYI : it is usually published on Monday. (Well, the last dozen times at least...)
[15:50:52] <lizmat> yeah... doing other stuff today
[15:55:53] <discord-raku-bot> <Anton Antonov#7232> @lizmat Good luck!
[16:22:24] *** Quits: ufobat (~martin@dynamic-077-002-105-103.77.2.pool.telefonica.de) (Ping timeout: 245 seconds)
[16:51:33] <Tirifto> Is there a way I can have code or variables interpolated into a string dynamically (at runtime) that does not involve EVAL?
[16:52:06] <Altreus> What are you trying to do that "{ this }" doesn't do?
[16:58:17] <[Coke]> m: say "{3**2}"
[16:58:17] <camelia> rakudo-moar 21271aa5f: OUTPUT: «9␤»
[17:09:38] <Tirifto> I found a way that sort of allows me to do what I want, with caveats… I’ll try and explain my intent as well as I can.
[17:16:00] *** Joins: Sgeo (~Sgeo@user/sgeo)
[17:20:44] *** Quits: anser (~anser@mm-177-49-120-178.brest.dynamic.pppoe.byfly.by) (Quit: Konversation terminated!)
[17:23:48] *** Joins: DuckBill (~DuckBill@cpe-66-65-94-118.nyc.res.rr.com)
[17:24:42] <Tirifto> I have a class, and I want every one of its object to return a custom string with custom variations based on the object’s state. In other words, when the object is asked for the string, I want it to be able to read its own attributes and decide what string to build based on that; but what attributes it checks and how they affect the string should be customisable for every object. The most elegant (hypothetical) way to do this tha
[17:24:43] <Tirifto> t I thought of was giving each object a custom block which returns a string that holds interpolated pieces of code which check for the object’s internal state. (E.g. { $!money > 10 ?? “This person is also rich.” !! “” }.) But it seems I can’t access those or ‘self’ directly outside of the class declaration. I can refer to the variable that holds the object instead, which works provided the variable doesn’t change, bu
[17:24:43] <Tirifto> t doesn’t feel nearly as neat.
[17:26:38] <Tirifto> What also works (and feels neater) is mixing an anonymous role into each object that overrides the appropriate method with one that builds a custom string for the given object. The role’s method can’t access attributes directly, but can refer to ‘self’ and call methods on it, which is good enough. But it doesn’t feel as elegant as just passing a string (or a block with a string) to &new would, when creating new objects.
[17:26:53] *** Quits: DuckBill (~DuckBill@cpe-66-65-94-118.nyc.res.rr.com) (Client Quit)
[17:27:22] *** Joins: DuckBill (~DuckBill@cpe-66-65-94-118.nyc.res.rr.com)
[17:33:13] *** Quits: DuckBill (~DuckBill@cpe-66-65-94-118.nyc.res.rr.com) (Quit: Connection closed)
[17:34:12] <Tirifto> To summarise, $!attribute and self.attribute both work in class declaration, but I want to do something different for every object. Giving the class a code block attribute and passing different code blocks to every object doesn’t work because I can use neither $!attribute nor self.attribute in those blocks. (I can do $object.attribute, though.) Role mixins work because I can do self.attribute in them.
[17:35:49] <Tirifto> So really I guess my question should be: Is there any way I can make a string with {$!attribute} outside of a class declaration, but have it interpolated later, inside of that class’s object?
[17:36:19] <Altreus> Tirifto: are you running that code block like $code()?
[17:36:32] <Altreus> Tirifto: You can do self.$code and now it's got a self inside it
[17:37:26] <Altreus> m: class B { has $.cat = "cat"; has $!format = { "{ .cat }" }; method format { self.$!format } }; my B $b .= new; $b.format
[17:37:26] <camelia> rakudo-moar 21271aa5f: ( no output )
[17:37:39] <Altreus> er that worked for me!
[17:38:07] <Altreus> m: class B { has $.cat = "cat"; has $!format = { "{ .cat }" }; method format { self.$!format } }; my B $b .= new; say $b.format
[17:38:08] <camelia> rakudo-moar 21271aa5f: OUTPUT: «cat␤»
[17:38:16] <Altreus> the REPL auto-says :)
[17:38:41] <Altreus> Tirifto: does that fit your situation?
[17:41:23] *** Joins: ufobat (~martin@dynamic-077-002-105-103.77.2.pool.telefonica.de)
[17:41:24] <Tirifto> Mmm… I don’t think so; I’ll try to write a representative example.
[17:51:14] <Tirifto> Altreus: All right, here is an example that does not work (as stated above), but should illustrate the use case.
[17:51:19] <Tirifto> m: class Cat { has $.flea is rw; has $!description; }; my Cat $felix .=new(description => “This is Felix, a handsome bicolor cat. {$!flea ~~ “Amelia” ?? “He is now carrying Amelia, his best friend.” !! “”}”);
[17:51:19] <camelia> rakudo-moar 21271aa5f: OUTPUT: «5===SORRY!5=== Error while compiling <tmp>␤Variable $!flea used where no 'self' is available␤at <tmp>:1␤------> 3s Felix, a handsome bicolor cat. {$!flea7⏏5 ~~ “Amelia” ?? “He is now carrying Amel␤»
[17:52:39] <Tirifto> Err, in this case, it should have been $.description (read allowed), because it’s a string.
[17:54:05] <Altreus> Ah!
[17:54:31] <Altreus> Well, what you could do is accept a code for description, and in TWEAK, if description is a code, run it on self and set the real value to that
[17:55:25] <Tirifto> Making $!description code was my next step, but I haven’t messed around with TWEAK!
[17:56:37] <Tirifto> That said, what I really want is for the description to be dynamic: for the string to be rebuilt/re-interpolated every time it’s being asked for.
[17:56:48] <Altreus> hrm it won't let me
[17:57:14] <Altreus> it complains about $!flea even though it's in a block and isn't being run yet
[17:57:22] <Tirifto> In this example, Felix could be carrying Amelia at one moment, but later on, Amelia might hop off. So the description should always reflect the actual state of the cat.
[17:57:48] <Altreus> ah, in that case you should definitely have method description, and has Callable $!describer
[17:59:01] <Altreus> seems like the simplest way
[17:59:16] <Altreus> basically a format method, and a formatter property, just like DateTime
[17:59:21] <Altreus> (ish
[17:59:23] <Altreus> )
[18:02:29] <Tirifto> Hmm… how would that work in practice? The method &description gets its string $!describer, which holds the actual logic?
[18:03:16] <Altreus> yeah basically ... method description { $!describer ~~ Callable ?? self.$!describer !! $!describer }
[18:03:43] <Altreus> This way you don't have to wrap a static string in a block :)
[18:04:16] <Altreus> I guess the other way is to have « has Callable $!describer » and in TWEAK (or something) turn a raw string into a callable
[18:04:27] <Altreus> oh it would probably have to be BUILD cos it'll already be wrong by TWEAK time
[18:06:53] <Tirifto> Hmm… but will that stop Raku from interpolating the string when I pass it to &new?
[18:08:00] <Tirifto> For the record, here is an example showing the anonymous role solution:
[18:08:06] <Tirifto> m: class Cat { has $.flea is rw; }; my Cat $felix = Cat.new() but role { method description() {“This is Felix, a handsome bicolor cat. {self.flea ~~ “Amelia” ?? “He is now carrying Amelia, his best friend.” !! “”}”} }; $felix.description.say;
[18:08:06] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. ␤»
[18:10:45] <Tirifto> Or better yet, showing the dynamic side:
[18:10:48] <Altreus> m: role Describable { has Callable $!describer; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => -> { "This is Felix, a handsome bicolor cat. {self.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); $c.description
[18:10:48] <Tirifto> m: class Cat { has $.flea is rw; }; my Cat $felix = Cat.new() but role { method description() {“This is Felix, a handsome bicolor cat. {self.flea ~~ “Amelia” ?? “He is now carrying Amelia, his best friend.” !! “”}”} }; $felix.description.say; $felix.flea = “Amelia”; $felix.description.say;
[18:10:49] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. ␤This is Felix, a handsome bicolor cat. He is now carrying Amelia, his best friend.␤»
[18:10:49] <camelia> rakudo-moar 21271aa5f: OUTPUT: «5===SORRY!5=== Error while compiling <tmp>␤'self' used where no object is available␤at <tmp>:1␤------> 3This is Felix, a handsome bicolor cat. {7⏏5self.flea ~~ "Amelia" ?? "He is now carr␤    expecting any of:␤        term␤»
[18:10:59] <Altreus> again
[18:11:03] <Altreus> I need a grownup
[18:11:10] <Altreus> oh wait
[18:11:23] <Altreus> m: role Describable { has Callable $!describer; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => -> { "This is Felix, a handsome bicolor cat. { .flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! "" }" }); $c.description
[18:11:24] <camelia> rakudo-moar 21271aa5f: OUTPUT: «Impossible coercion from 'Cat' into 'Callable': no acceptable coercion method found␤  in method description at <tmp> line 1␤  in block <unit> at <tmp> line 1␤␤»
[18:12:01] <Altreus> m: role Describable { has Callable $!describer; method description { self.$!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => -> { "This is Felix, a handsome bicolor cat. { .flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! "" }" }); $c.description
[18:12:02] <camelia> rakudo-moar 21271aa5f: OUTPUT: «Impossible coercion from 'Cat' into 'Callable': no acceptable coercion method found␤  in method description at <tmp> line 1␤  in block <unit> at <tmp> line 1␤␤»
[18:14:08] <Tirifto> # Maybe we should have used a Dog; they usually respond to calls a bit better. :-)
[18:14:21] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[18:18:08] <Altreus> why did this work? class B { has $.cat = "cat"; has $!format = { "{ .cat }" }; method format { self.$!format } };
[18:19:47] <Altreus> oh!
[18:19:56] <Altreus> private properties need 'is built' :D
[18:20:49] <Tirifto> Ohh!
[18:21:19] <Altreus> yeah it works if you do that xD
[18:21:43] <Altreus> role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => -> { "This is Felix, a handsome bicolor cat. {self.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); $c.description;
[18:21:53] <Altreus> oh I need a say I think
[18:21:58] <Altreus> role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => -> { "This is Felix, a handsome bicolor cat. {self.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[18:22:08] <Altreus> and an m ... sorry for spam :(
[18:22:13] <Altreus> m: role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => -> { "This is Felix, a handsome bicolor cat. {self.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[18:22:13] <camelia> rakudo-moar 21271aa5f: OUTPUT: «5===SORRY!5=== Error while compiling <tmp>␤'self' used where no object is available␤at <tmp>:1␤------> 3This is Felix, a handsome bicolor cat. {7⏏5self.flea ~~ "Amelia" ?? "He is now carr␤    expecting any of:␤        term␤»
[18:22:25] <Altreus> m: role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Bono", describer => { "This is Felix, a handsome bicolor cat. {.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[18:22:26] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. ␤»
[18:22:42] <Altreus> m: role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Amelia", describer => { "This is Felix, a handsome bicolor cat. {.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[18:22:42] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. He is now carrying Amelia, his best friend.␤»
[18:23:06] <Altreus> these things were needed: 1. is built; 2. don't use ->
[18:23:18] <Altreus> 3. use .flea not self.flea nor $!flea
[18:26:15] <Tirifto> Altreus: Seems to work! Now I just need to read it over more carefully to grasp it. xP
[18:33:02] <Altreus> self.&code is a useful trick that works in Perl5 too :)
[18:33:14] *** Joins: gordonfish- (~gordonfis@user/gordonfish)
[18:34:04] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 245 seconds)
[18:40:38] <Tirifto> Altreus: Okay, so I’m still far from wrapping my head around all of this, but this has definitely answered my question and taught me something new; thanks a lot!
[18:44:22] <Tirifto> The way this works is that the code (describer) gets called on the object as a method, so the object becomes an argument and implicitly falls into $_, so the .flea gets called on it… did I get that right?
[18:47:32] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[18:49:10] *** Quits: gordonfish- (~gordonfis@user/gordonfish) (Ping timeout: 252 seconds)
[18:52:28] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 252 seconds)
[18:52:35] <Altreus> Ah that's where it's unclear to me, because I can't tell whether it goes into $_ or what
[18:53:06] <Altreus> But yes, however it ends up there, it basically acts as a pseudo-method
[18:58:49] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[19:01:49] *** Quits: Kaipi (~Kaiepi@156.34.44.192) (Ping timeout: 252 seconds)
[19:10:04] *** Quits: gordonfish (~gordonfis@user/gordonfish) (Ping timeout: 252 seconds)
[19:21:36] <SmokeMachine> yes, that's it... `$obj.&func` is the same as calling `func($obj)` the same for `self.&!describer` being the same as `&!describer(self)`
[19:21:58] <SmokeMachine> m: role Describable { has &!describer is built; method description { &!describer(self) } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Amelia", describer => { "This is Felix, a handsome bicolor cat. {"He is now carrying Amelia, his best friend." if .flea ~~ "Amelia"}" }); say $c.description; # for example
[19:21:58] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. He is now carrying Amelia, his best friend.␤»
[19:23:02] <Altreus> SmokeMachine: but that means it's passed as the first argument, and not that special `self` that normal methods get?
[19:23:26] <Altreus> SmokeMachine: that is to say, it looks like code($_) rather than code(Any:)
[19:23:58] <Altreus> that explains why -> broke it; it needs to be -> $obj for that to work
[19:28:00] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[19:29:56] <SmokeMachine> that's not self, that's `$_`
[19:30:31] <SmokeMachine> m: sub bla($_) { .say }; 42.&bla
[19:30:31] <camelia> rakudo-moar 21271aa5f: OUTPUT: «42␤»
[19:32:55] <SmokeMachine> m: &bla = { .say }; 42.&bla; bla(42)
[19:32:56] <camelia> rakudo-moar 21271aa5f: OUTPUT: «5===SORRY!5=== Error while compiling <tmp>␤Undeclared routine:␤    bla used at line 1␤␤»
[19:33:11] <SmokeMachine> m: my &bla = { .say }; 42.&bla; bla(42)
[19:33:11] <camelia> rakudo-moar 21271aa5f: OUTPUT: «42␤42␤»
[19:34:18] *** Joins: Kaiepi (~Kaiepi@156.34.44.192)
[19:34:33] <SmokeMachine> m: my &bla = { MY::.say }; 42.bla
[19:34:34] <camelia> rakudo-moar 21271aa5f: OUTPUT: «No such method 'bla' for invocant of type 'Int'␤  in block <unit> at <tmp> line 1␤␤»
[19:34:37] <SmokeMachine> m: my &bla = { MY::.say }; 42.&bla
[19:34:37] <camelia> rakudo-moar 21271aa5f: OUTPUT: «PseudoStash.new(($_ => 42))␤»
[19:35:03] <SmokeMachine> Altreus: ^^
[19:36:48] *** Joins: melezhik (~melezhik@c-73-32-143-85.hsd1.tx.comcast.net)
[19:36:48] <melezhik> .
[19:36:51] <SmokeMachine> m: my &bla = { MY::.say }; bla; sub ble { MY::.say }; my &bli = -> { MY::.say }; bli
[19:36:51] <camelia> rakudo-moar 21271aa5f: OUTPUT: «PseudoStash.new(($_ => (Any)))␤PseudoStash.new(($_ => (Any)))␤»
[19:37:16] <SmokeMachine> m: my &bla = { MY::.say }; bla; sub ble { MY::.say }; ble; my &bli = -> { MY::.say }; bli
[19:37:17] <camelia> rakudo-moar 21271aa5f: OUTPUT: «PseudoStash.new(($_ => (Any)))␤PseudoStash.new(($! => Nil, $/ => Nil, $_ => (Any), $¢ => Nil))␤PseudoStash.new(($_ => (Any)))␤»
[19:37:41] <SmokeMachine> m: my &bla = { MY::.say }; bla 42; sub ble { MY::.say }; ble 42; my &bli = -> { MY::.say }; bli 42
[19:37:41] <camelia> rakudo-moar 21271aa5f: OUTPUT: «5===SORRY!5=== Error while compiling <tmp>␤Calling ble(Int) will never work with declared signature ()␤at <tmp>:1␤------> 3::.say }; bla 42; sub ble { MY::.say }; 7⏏5ble 42; my &bli = -> { MY::.say }; bli 4␤»
[19:37:51] <SmokeMachine> m: my &bla = { MY::.say }; bla 42; sub ble { MY::.say }; ble; my &bli = -> { MY::.say }; bli 42
[19:37:52] <camelia> rakudo-moar 21271aa5f: OUTPUT: «PseudoStash.new(($_ => 42))␤Too many positionals passed; expected 0 arguments but got 1␤  in block <unit> at <tmp> line 1␤␤PseudoStash.new(($! => Nil, $/ => Nil, $_ => (Any), $¢ => Nil))␤»
[19:37:57] <SmokeMachine> m: my &bla = { MY::.say }; bla 42; sub ble { MY::.say }; ble; my &bli = -> { MY::.say }; bli
[19:37:57] <camelia> rakudo-moar 21271aa5f: OUTPUT: «PseudoStash.new(($_ => 42))␤PseudoStash.new(($! => Nil, $/ => Nil, $_ => (Any), $¢ => Nil))␤PseudoStash.new(($_ => (Any)))␤»
[19:46:15] *** Quits: melezhik (~melezhik@c-73-32-143-85.hsd1.tx.comcast.net) (Quit: Ping timeout (120 seconds))
[20:05:19] <raydiak> note that self does work if you use a method as the callable:
[20:05:23] <raydiak> m: role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Amelia", describer => method { "This is Felix, a handsome bicolor cat. {self.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[20:05:23] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. He is now carrying Amelia, his best friend.␤»
[20:07:24] *** Quits: dakkar (~dakkar@home.thenautilus.net) (Ping timeout: 245 seconds)
[20:18:36] <Tirifto> Thank you, SmokeMachine & raydiak;
[20:19:35] <Altreus> raydiak: oh that's neat, I wondered how to do that!
[20:21:27] <Tirifto> I guess that also makes intuitive sense, since you can have an attribute (that you can set) that literally is a method. :-)
[20:23:04] <raydiak> we have first-class anonymous methods, detached from any class. you can pass them around, put them into a my variable or whatever just like anonymous subs
[20:23:28] <raydiak> m: my &m = method { .say }; 42.&m
[20:23:28] <camelia> rakudo-moar 21271aa5f: OUTPUT: «(Any)␤»
[20:23:37] <raydiak> m: my &m = method { self.say }; 42.&m
[20:23:37] <camelia> rakudo-moar 21271aa5f: OUTPUT: «42␤»
[20:25:28] <Tirifto> Raku is like the wings of Camelia: beautiful and elaborate.
[20:26:00] <raydiak> glad you like it :)
[20:26:21] *** synthmeat1 is now known as synthmeat
[20:26:48] <raydiak> personally I think the block how you had it was a bit more readable than an anonymous method, but just wanted to throw it out there for educational purposes
[20:27:13] <SmokeMachine> m: my &m = method { self.say }; m 42
[20:27:13] <camelia> rakudo-moar 21271aa5f: OUTPUT: «42␤»
[20:27:15] <Altreus> I did play with sub x(Any:) but it complained - now I know why
[20:27:30] <SmokeMachine> It also works the same way ^^
[20:28:03] <raydiak> heh nice SmokeMachine, I never thought to try that
[20:32:59] <Tirifto> So the reason I can’t use $!attribute or self.attribute in an ordinary block is not that Raku is trying to interpolate them on sight (it apparently doesn’t), but rather that self and the $! twigil are special and it only allows them to appear in the appropriate context (e.g. class definition or method)?
[20:34:46] <Tirifto> (Or evaluate, rather. I was thinking of blocks in strings in blocks, but I guess it goes for any block.)
[20:38:37] <raydiak> correct
[20:39:18] <Tirifto> Thanks again! ^ ^
[20:39:50] <raydiak> you're welcome of course, happy to help :)
[20:41:46] <SmokeMachine> 17:35 <raydiak> m: role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Amelia", describer => method { "This is Felix, a handsome bicolor cat. {$.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[20:42:07] <SmokeMachine> m: role Describable { has Callable $!describer is built; method description { $!describer ~~ Callable ?? self.$!describer !! $!describer } }; class Cat does Describable { has $.flea is rw }; my Cat $c .= new( flea => "Amelia", describer => method { "This is Felix, a handsome bicolor cat. {$.flea ~~ "Amelia" ?? "He is now carrying Amelia, his best friend." !! ""}" }); say $c.description;
[20:42:07] <camelia> rakudo-moar 21271aa5f: OUTPUT: «This is Felix, a handsome bicolor cat. He is now carrying Amelia, his best friend.␤»
[20:42:59] <SmokeMachine> You can use $.attr instead of self.attr
[20:45:39] <Tirifto> Ah right, that also works with the method method. Can ‘$.attr’ be regarded as a (perhaps a slightly more descriptive) alias for ‘self.attr’?
[20:47:58] *** Quits: jdv (~jdv79@jdv.devuyst.com) (Ping timeout: 252 seconds)
[20:48:09] *** Joins: jdv (~jdv79@jdv.devuyst.com)
[20:56:34] *** Quits: sena_kun (~sena_kun_@static-84-42-198-52.net.upcbroadband.cz) (Quit: Leaving)
[21:06:21] <raydiak> I believe that's correct. technically it doesn't even have to be an attribute:
[21:06:24] <raydiak> m: class { method a { 42 }; method m { say $.a } }.m
[21:06:25] <camelia> rakudo-moar 21271aa5f: OUTPUT: «42␤»
[21:07:53] *** Joins: gordonfish (~gordonfis@user/gordonfish)
[21:14:25] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[21:21:10] *** Quits: linkable6 (lin-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[21:23:45] *** Joins: linkable6 (lin-able@2001:41d0:2:5eb5::)
[21:31:00] *** Joins: vrurg_ (~vrurg@45.74.95.181)
[21:32:52] *** Quits: reportable6 (rep-able@2001:41d0:2:5eb5::) (Remote host closed the connection)
[21:32:55] *** Quits: vrurg (~vrurg@45.74.95.181) (Ping timeout: 268 seconds)
[22:01:25] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[22:12:02] *** vrurg_ is now known as vrurg
[22:14:58] *** Quits: synthmeat (~synthmeat@user/synthmeat) (Quit: WeeChat 3.2)
[22:22:13] <casaca> CIAvash: thanks for `Curry`! 
[22:22:37] *** Quits: ufobat (~martin@dynamic-077-002-105-103.77.2.pool.telefonica.de) (Ping timeout: 252 seconds)
[22:30:37] *** Joins: patrickb (~quassel@55d40c1c.access.ecotel.net)
[22:32:55] <CIAvash> casaca: you're welcome!
[22:35:57] *** Joins: synthmeat (~synthmeat@user/synthmeat)
[22:37:20] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[22:38:26] <casaca> hope it's included in core someday
[22:42:49] *** Quits: discord-raku-bot (~RakuIRC@ip5f5ab722.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[22:44:03] *** Joins: discord-raku-bot (~RakuIRC@ip5f5ab722.dynamic.kabel-deutschland.de)
[22:50:18] *** Quits: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[22:58:28] *** Joins: childlikempress (~moon-chil@cardinal.elronnd.net)
[22:58:49] *** Quits: moon-child (~moon-chil@cardinal.elronnd.net) (Read error: Connection reset by peer)
[23:03:23] *** Joins: cbk (~cbk@47.150.27.47)
[23:07:37] *** Quits: Xliff_ (~Cliff@pool-71-255-227-73.washdc.east.verizon.net) (Remote host closed the connection)
[23:33:12] *** Joins: jjido (~Denis@2a02:c7f:5c91:e700:851b:fda3:c3ae:2b90)
[23:35:44] *** Joins: reportable6 (rep-able@2001:41d0:2:5eb5::)
[23:37:51] *** Quits: vasko (~vasko@137.220.91.123) (Read error: Connection reset by peer)
[23:39:43] *** Joins: monochromec (~monochrom@pd95e1518.dip0.t-ipconnect.de)
[23:39:56] *** Joins: vasko (~vasko@137.220.91.123)
[23:40:05] *** Quits: monochromec (~monochrom@pd95e1518.dip0.t-ipconnect.de) (Client Quit)
