[00:50:02] <companion_cube> be thankful you don't write java
[00:57:55] <d_bot_> <VPhantom> ðŸ˜±
[01:11:55] *** Quits: wyrd (~wyrd@gateway/tor-sasl/wyrd) (Ping timeout: 240 seconds)
[01:18:59] *** Joins: wyrd (~wyrd@gateway/tor-sasl/wyrd)
[01:26:28] *** Joins: oriba (~oriba@dynamic-077-011-005-242.77.11.pool.telefonica.de)
[01:57:32] *** Quits: Serpent7776 (~Serpent77@90-156-31-193.internetia.net.pl) (Quit: leaving)
[02:07:46] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: No Ping reply in 180 seconds.)
[02:09:10] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[02:22:57] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: No Ping reply in 180 seconds.)
[02:24:19] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[02:32:53] *** Quits: bartholin (~bartholin@158.110.71.61) (Quit: Leaving)
[02:53:44] <companion_cube> (not dissing java, just the stacktraces :D)
[04:02:22] *** Quits: omegatron (~some@p5b056cb8.dip0.t-ipconnect.de) (Quit: Power is a curious thing.It can be contained, hidden, locked away,and yet it always breaks free.)
[04:14:38] *** Quits: Tuplanolla (~Tuplanoll@91-159-69-98.elisa-laajakaista.fi) (Ping timeout: 272 seconds)
[04:27:35] *** Quits: oriba (~oriba@dynamic-077-011-005-242.77.11.pool.telefonica.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[04:34:38] <d_bot_> <mbacarella> what's the grpc story these days?
[04:35:15] <d_bot_> <mbacarella> is proxying through envoy the least suffering involved solution still?
[04:56:07] <sleepydog> it seems like grpc is possible, but not well paved yet. using some unmerged PRs to ocaml-protoc-plugin
[05:03:06] *** Quits: gjvc (~gjvc@user/gjvc) (Quit: leaving)
[05:05:21] *** Quits: bobo (~bobo@37.166.17.178) (Ping timeout: 252 seconds)
[05:05:27] *** Joins: spip (~bobo@37.166.17.178)
[05:17:27] *** Joins: namkeleser (~namkelese@101.175.104.107)
[05:36:20] *** Quits: hackhorn (~hackingho@user/hackinghorn) (Quit: Leaving)
[05:41:59] <companion_cube> oh?
[05:47:55] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 256 seconds)
[05:55:58] *** Quits: wyrd (~wyrd@gateway/tor-sasl/wyrd) (Remote host closed the connection)
[05:56:11] *** Joins: wyrd (~wyrd@gateway/tor-sasl/wyrd)
[07:13:49] *** Quits: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1) (Quit: The Lounge - https://thelounge.chat)
[07:15:50] *** Joins: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1)
[07:18:23] *** Quits: namkeleser (~namkelese@101.175.104.107) (Quit: Client closed)
[07:37:42] *** Quits: spip (~bobo@37.166.17.178) (Ping timeout: 252 seconds)
[07:37:51] *** Joins: spip (~bobo@37.173.44.58)
[07:49:57] *** Joins: mbuf (~Shakthi@182.77.107.139)
[08:15:17] *** Joins: bobo (~bobo@37.173.44.58)
[08:15:30] *** Quits: spip (~bobo@37.173.44.58) (Ping timeout: 250 seconds)
[08:27:48] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[08:38:06] *** hackingh- is now known as hackinghorn
[08:38:13] *** Quits: hackinghorn (hackinghor@2607:5300:203:3f52::18) (Changing host)
[08:38:13] *** Joins: hackinghorn (hackinghor@user/hackinghorn)
[08:48:16] *** Quits: mbuf (~Shakthi@182.77.107.139) (Quit: Leaving)
[08:54:57] *** Quits: waleee (~waleee@2001:9b0:213:7200:cc36:a556:b1e8:b340) (Ping timeout: 240 seconds)
[09:22:38] *** Joins: gravicappa (~gravicapp@145.255.0.191)
[09:26:17] *** Quits: sagax (~sagax_nb@user/sagax) (Quit: Konversation terminated!)
[09:35:16] *** Joins: zebrag (~chris@user/zebrag)
[09:39:37] *** Quits: zebrag (~chris@user/zebrag) (Client Quit)
[10:29:33] *** Quits: chrisz (b0zlh8krvx@55d48865.access.ecotel.net) (Ping timeout: 256 seconds)
[10:31:20] *** Joins: chrisz (tf170tzds8@55d4078d.access.ecotel.net)
[11:47:00] <d_bot_> <quernd> It may be the easiest but note that the Envoy setup doesn't allow streaming. It's possible in pure OCaml though. We've been using this fork of jeffa5's `ocaml-grpc`: https://github.com/dialohq/ocaml-grpc/tree/bugfixes for both server and client bidirectional streaming and so far it's working out well. The `ocaml-protoc-plugin` changes are not strictly necessary, it's a quality of life enhancement.
[11:58:17] *** Joins: Serpent7776 (~Serpent77@90-156-31-193.internetia.net.pl)
[11:59:41] *** Joins: spip (~bobo@37.173.44.58)
[12:00:03] *** Quits: bobo (~bobo@37.173.44.58) (Ping timeout: 252 seconds)
[12:03:25] *** Joins: namkeleser (~namkelese@101.175.104.107)
[12:10:33] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[12:19:55] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[12:53:19] *** Joins: Tuplanolla (~Tuplanoll@91-159-69-98.elisa-laajakaista.fi)
[12:55:03] *** Quits: spip (~bobo@37.173.44.58) (Ping timeout: 252 seconds)
[12:55:06] *** Joins: bobo (~bobo@37.173.44.58)
[13:03:22] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[13:03:28] *** Quits: gravicappa (~gravicapp@145.255.0.191) (Ping timeout: 272 seconds)
[13:10:31] *** Joins: spip (~bobo@37.173.44.58)
[13:10:36] *** Quits: bobo (~bobo@37.173.44.58) (Ping timeout: 250 seconds)
[13:18:43] *** Joins: mro (~mro@2002:5cc3:d560:0:2945:255b:c5a9:e568)
[13:32:55] *** Joins: Anarchos (~Anarchos@88.168.112.216)
[13:39:10] *** Quits: Anarchos (~Anarchos@88.168.112.216) (Quit: Vision[]: i've been blurred!)
[13:41:35] *** Joins: gravicappa (~gravicapp@145.255.0.191)
[13:42:30] *** Joins: Anarchos (~Anarchos@88.168.112.216)
[13:49:21] *** Quits: namkeleser (~namkelese@101.175.104.107) (Quit: Client closed)
[14:04:41] *** Quits: mro (~mro@2002:5cc3:d560:0:2945:255b:c5a9:e568) (Remote host closed the connection)
[14:05:06] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[14:20:10] *** Joins: bartholin (~bartholin@109.53.3.57)
[14:31:55] *** Quits: azimut (~azimut@gateway/tor-sasl/azimut) (Remote host closed the connection)
[14:32:23] *** Joins: azimut (~azimut@gateway/tor-sasl/azimut)
[14:38:27] *** Quits: bartholin (~bartholin@109.53.3.57) (Ping timeout: 252 seconds)
[14:40:12] *** Joins: namkeleser (~namkelese@101.175.104.107)
[14:43:22] *** Quits: Anarchos (~Anarchos@88.168.112.216) (Quit: Vision[]: i've been blurred!)
[14:51:00] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[14:52:04] *** Joins: bartholin (~bartholin@109.53.6.132)
[14:53:51] *** Quits: gravicappa (~gravicapp@145.255.0.191) (Ping timeout: 252 seconds)
[15:36:06] *** Quits: chrisz (tf170tzds8@55d4078d.access.ecotel.net) (Ping timeout: 272 seconds)
[15:37:42] *** Joins: chrisz (qgjvmq0et8@55d460ec.access.ecotel.net)
[15:45:36] *** Quits: chrisz (qgjvmq0et8@55d460ec.access.ecotel.net) (Ping timeout: 272 seconds)
[15:47:10] *** Joins: chrisz (idn8ps0bs5@d5361408.access.ecotel.net)
[16:00:14] *** Joins: gravicappa (~gravicapp@145.255.0.191)
[16:20:05] *** farn_ is now known as farn
[16:38:27] *** Quits: bartholin (~bartholin@109.53.6.132) (Ping timeout: 256 seconds)
[16:46:17] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[16:51:34] *** Joins: bartholin (~bartholin@109.53.0.38)
[16:52:01] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[17:57:58] *** Quits: bartholin (~bartholin@109.53.0.38) (Ping timeout: 272 seconds)
[18:11:40] *** Joins: bartholin (~bartholin@109.53.3.12)
[18:28:19] *** Joins: zebrag (~chris@user/zebrag)
[18:42:47] <d_bot_> <mbacarella> seems workable. is there an analog to secure_channel? https://grpc.github.io/grpc/python/grpc.html#grpc.secure_channel
[19:13:13] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[19:13:55] *** Joins: Everything (~Everythin@37.115.210.35)
[19:32:19] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[19:38:05] *** Joins: bobo (~bobo@37.164.129.244)
[19:38:12] *** Quits: spip (~bobo@37.173.44.58) (Ping timeout: 252 seconds)
[19:45:52] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[19:57:56] *** Quits: bartholin (~bartholin@109.53.3.12) (Ping timeout: 250 seconds)
[19:58:39] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[20:01:37] <d_bot_> <quernd> You can use `H2_lwt_unix.Client.TLS` or `SSL` to create a secure connection, if that's what you mean.
[20:04:22] <d_bot_> <mbacarella> i'm not really sure what i mean. grpc is pretty mystifying to me still
[20:04:41] *** adrien_ is now known as adrien
[20:04:54] <d_bot_> <quernd> Typically, you'd create one connection and keep it open to do all the RPC requests over it
[20:05:37] <d_bot_> <mbacarella> will try it though
[20:06:51] <d_bot_> <Anurag> Is GRPC mandatory for your project? You might want to start with a simpler rpc option ðŸ™ƒ
[20:09:25] <d_bot_> <mbacarella> sadly yes
[20:09:32] <d_bot_> <mbacarella> i would very much like to not be using grpc
[20:09:58] <d_bot_> <Anurag> ðŸ˜… Goodluck!
[20:10:25] <d_bot_> <quernd> Good luck, shout if you run into issues ðŸ™‚
[20:10:26] *** Joins: bartholin (~bartholin@109.53.5.192)
[20:10:42] <d_bot_> <mbacarella> > INTERNAL_ERROR (0x2), Failure("Tls not available")
[20:10:43] <d_bot_> <mbacarella> I assume I need to opam install tls
[20:13:02] <d_bot_> <Anurag> I believe so. I think the error originates in the underlying `gluten` library that probes the system to check whether `ocaml-tls` is installed or not, and fails if you attempt to use the tls transport without installing ocaml-tls
[20:13:38] <sleepydog> I don't know what a secure_channel is. It doesn't seem to be part of GRPC, but rather a name chosen for the python api
[20:14:20] <sleepydog> http/2 all but requires TLS, so every "channel" (I assume that refers to an http2 stream) should be secure
[20:17:12] <d_bot_> <quernd> "channel" is more like a connection, not a stream
[20:18:33] <sleepydog> ah, ok. and i guess i was wrong about http2 requiring encryption. sorry for the confusion
[20:19:47] <d_bot_> <quernd> It's not required, but browsers enforce it, apparently
[20:27:44] *** Joins: waleee (~waleee@2001:9b0:213:7200:cc36:a556:b1e8:b340)
[20:32:18] <d_bot_> <mbacarella> hmm, when i try Client.TLS instead of just Client instead of getting a read error it just hangs
[20:32:45] <d_bot_> <mbacarella> tcpdump does show a connection opens
[20:33:38] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[20:36:26] <sleepydog> is there an ssl handshake?
[20:36:56] <d_bot_> <mbacarella> there is back and forth
[20:37:02] <d_bot_> <mbacarella> might be time for mitmproxy
[20:39:02] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[20:44:30] <d_bot_> <mbacarella> oh maybe i shouldn't use ~error_handler:ignore
[20:44:37] <d_bot_> <mbacarella> protocol error: PROTOCOL_ERROR (0x1),
[20:44:39] <d_bot_> <mbacarella> there we go
[20:44:58] <sleepydog> :)
[20:47:00] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[20:48:17] <d_bot_> <quernd> That one is very unspecific, unfortunately. I ran into it e.g. when my headers weren't all lowercase
[20:52:49] <d_bot_> <mbacarella> am i wrong to be mad at google here
[20:53:29] <d_bot_> <mbacarella> anyway. guess i'll have another coffee and start adding prints up and down the stack
[20:54:33] <sleepydog> mad over GRPC? or are you talking to a googleapi
[20:54:54] <d_bot_> <mbacarella> mad that they kinda threw their weight behind pushing grpc
[20:55:02] <d_bot_> <mbacarella> but also coupled it with h2
[20:55:41] <sleepydog> i work at google and just resolved a weeks-long customer issue that ended up being caused by contention over the 1 connection Go's GRPC client uses by default. so i'm mad at google too :)
[20:57:19] <d_bot_> <mbacarella> right. also go ðŸ˜ 
[20:57:59] <d_bot_> <quernd> My guess is it's wrong/missing headers but that's just from experience.
[20:58:30] <sleepydog> i think it was a mistake to push a stubby-like protocol without also bringing along its transport (quic)
[20:59:34] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[21:00:43] <d_bot_> <mbacarella> yeah, fortunately i have a python implementation that works that i can run through mitm proxy and will compare what the ocaml one is doing
[21:00:53] <d_bot_> <mbacarella> just, you know, caffeine
[21:01:06] <d_bot_> <mbacarella> thanks for the hand-holding. together we'll defeat grpc
[21:01:53] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[21:05:53] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[21:17:16] *** Joins: jlrnick (~josephler@2a01cb040a159400d5f1734ba665bbe6.ipv6.abo.wanadoo.fr)
[21:32:13] *** Joins: _whitelogger_ (~whitelogg@uruz.whitequark.org)
[21:32:41] *** Quits: _whitelogger (~whitelogg@uruz.whitequark.org) (Read error: Connection reset by peer)
[21:36:21] <d_bot_> <quernd> Just to elaborate on my previous remark about headers, I have this minimal example of a secure call to grpc-test.sandbox.googleapis.com:443 where it fails with this non-descript `PROTOCOL_ERROR (0x1)` as  soon as I leave out a required header or use uppercase. Case in point, for the Google test API you need the `:authority"`  header even though generally it's optional
[21:43:31] *** Quits: namkeleser (~namkelese@101.175.104.107) (Quit: Client closed)
[21:50:59] *** Parts: mrvn (~mrvn@ip-046-005-255-082.um12.pools.vodafone-ip.de) ()
[21:57:49] *** Quits: bartholin (~bartholin@109.53.5.192) (Ping timeout: 256 seconds)
[21:58:15] *** hannes_ is now known as hannes
[22:03:11] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[22:04:51] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[22:08:19] *** Joins: zebrag (~chris@user/zebrag)
[22:11:01] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[22:11:43] *** Joins: bartholin (~bartholin@109.53.1.186)
[22:22:49] *** Joins: mro (~mro@2002:5cc3:d560:1:a455:ed5e:52c0:3fbe)
[22:27:00] *** Quits: mro (~mro@2002:5cc3:d560:1:a455:ed5e:52c0:3fbe) (Ping timeout: 250 seconds)
[22:28:46] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[22:34:12] *** Joins: oriba (~oriba@dynamic-089-014-025-098.89.14.pool.telefonica.de)
[22:35:37] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Remote host closed the connection)
[22:43:27] *** Quits: bartholin (~bartholin@109.53.1.186) (Quit: Leaving)
[22:53:22] *** Quits: kaph_ (~kaph@net-109-116-124-149.cust.vodafonedsl.it) (Read error: Connection reset by peer)
[23:07:26] *** Quits: Everything (~Everythin@37.115.210.35) (Quit: leaving)
[23:12:04] *** Quits: haesbaert (~haesbaert@195.95.187.184) (Ping timeout: 250 seconds)
[23:25:15] *** Joins: kaph (~kaph@net-109-116-124-149.cust.vodafonedsl.it)
[23:37:46] <companion_cube> I've never used it, but twirp seems a lot more reasonable
[23:37:54] <companion_cube> just need to modify ocaml-protoc to produce it :p
[23:39:34] *** Joins: mro (~mro@2002:5cc3:d560:1:c5ae:b461:e5db:35b)
[23:43:49] *** Quits: gravicappa (~gravicapp@145.255.0.191) (Ping timeout: 240 seconds)
[23:49:30] *** Quits: mro (~mro@2002:5cc3:d560:1:c5ae:b461:e5db:35b) (Remote host closed the connection)
[23:50:18] <d_bot_> <anmonteiro> Just to add here that the h2 API is fairly lowlevel and expects you to do the right thing. If the right thing is not obvious open an issue and Iâ€™ll see what we can improve
[23:53:03] *** Joins: mro (~mro@port-92-195-213-96.dynamic.as20676.net)
[23:53:59] <d_bot_> <quernd> Not blaming h2 at all for this, that would be shooting the messenger ðŸ˜‰
[23:54:16] *** Joins: mro_ (~mro@2002:5cc3:d560:0:9e5:d69:be85:198e)
[23:55:24] <companion_cube> isn't also grpc this thing google does NOT use internally
[23:58:11] *** Quits: mro (~mro@port-92-195-213-96.dynamic.as20676.net) (Ping timeout: 256 seconds)
