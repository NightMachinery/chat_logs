[00:00:57] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.4)
[00:02:58] *** Quits: sgn_ (~sgn@user/sgn) (Read error: Connection reset by peer)
[00:03:08] *** Joins: sgn (~sgn@user/sgn)
[00:03:10] *** Quits: shabius (~shabius@2a0e:1c80:1:1042::1003) (Quit: Leaving)
[00:04:17] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[00:05:01] *** Quits: djph (~dpurgert@cpe-107-10-235-152.neo.res.rr.com) (Ping timeout: 256 seconds)
[00:05:05] *** Joins: djph_ (~dpurgert@cpe-107-10-235-152.neo.res.rr.com)
[00:05:45] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[00:06:01] *** Joins: sgn (~sgn@user/sgn)
[00:06:21] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[00:06:24] *** Quits: Leonard (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[00:06:29] *** djph_ is now known as djph
[00:09:44] *** Joins: rgrinberg (~textual@187.223.183.192)
[00:10:41] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Ping timeout: 256 seconds)
[00:13:45] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[00:15:21] *** Joins: Leonard (~Administr@114.55.127.80)
[00:16:21] *** Joins: somlis (~somlis@user/somlis)
[00:17:29] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[00:18:45] *** Quits: sdu (~sidu@185.44.146.61) (Remote host closed the connection)
[00:23:45] *** Joins: ano (~ano@user/ano)
[00:24:01] *** Joins: MrCollinsGA (~MrCollins@199.231.255.146)
[00:24:07] *** Quits: robertross (~robertros@104.254.8.73) (Quit: robertross)
[00:24:59] *** Joins: robertross (~robertros@104.254.8.73)
[00:25:45] *** Quits: ano (~ano@user/ano) (Client Quit)
[00:26:46] *** Joins: ano (~ano@user/ano)
[00:26:50] *** Quits: konsolebox (~konsolebo@37.120.210.110) (Quit: Leaving)
[00:28:18] *** Joins: kurahaupo (~kurahaupo@pa49-182-47-103.pa.qld.optusnet.com.au)
[00:30:21] *** Quits: H3dn1ng (~H3dn1ng@185.213.154.231) (Quit: leaving)
[00:30:21] *** Joins: Betal (~Betal@user/betal)
[00:31:30] *** Quits: yuesbeez (uid458354@id-458354.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[00:32:06] *** Quits: jensen (~jensen@65.78.100.184) (Quit: WeeChat 3.4)
[00:33:39] *** Quits: ano (~ano@user/ano) (Quit: ano)
[00:33:55] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 256 seconds)
[00:34:50] *** Joins: ano (~ano@user/ano)
[00:35:54] *** Quits: unixman_home (~unixman2@62-199-137-216.mtaonline.net) (Remote host closed the connection)
[00:35:56] *** Quits: N0ZYC_ (~N0ZYC@173-16-166-245.client.mchsi.com) (Read error: Connection reset by peer)
[00:36:12] *** Joins: unixman_home (~unixman2@62-199-137-216.mtaonline.net)
[00:36:28] *** Joins: N0ZYC (~N0ZYC@173-16-166-245.client.mchsi.com)
[00:36:52] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[00:38:10] *** Quits: zoe (~zoe@fsf/member/zoe) (Remote host closed the connection)
[00:38:36] *** Joins: zoe (~zoe@fsf/member/zoe)
[00:39:53] *** Joins: superboot (~agentgasm@user/superboot)
[00:39:57] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[00:40:14] *** Quits: rufito (~phil@186.11.112.244) (Quit: Leaving)
[00:41:57] *** Quits: rgrinberg (~textual@187.223.183.192) (Ping timeout: 240 seconds)
[00:42:57] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[00:43:06] *** Quits: robertross (~robertros@104.254.8.73) (Quit: robertross)
[00:43:16] *** Joins: sgn (~sgn@user/sgn)
[00:43:25] *** Quits: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net) (Ping timeout: 256 seconds)
[00:43:25] *** Joins: uc50ic4more (~uc50ic4mo@104.254.8.73)
[00:45:44] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 252 seconds)
[00:46:30] *** Joins: MrBlue_ (~MrBlue@146.70.75.22)
[00:46:38] *** Joins: rgrinberg (~textual@187.223.183.192)
[00:46:46] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[00:47:37] *** Quits: Inline__ (~Inline@aftr-37-201-240-204.unity-media.net) (Ping timeout: 240 seconds)
[00:48:37] *** Quits: MrBlue (~MrBlue@86.106.90.249) (Ping timeout: 240 seconds)
[00:51:21] *** Quits: medard__ (~mithrin@stip-static-62.213-81-207.telecom.sk) (Read error: Connection reset by peer)
[00:51:46] *** Joins: medard (~mithrin@stip-static-62.213-81-207.telecom.sk)
[00:52:32] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[00:53:00] *** kj- is now known as kj
[00:53:03] *** Quits: superboot (~agentgasm@user/superboot) (Ping timeout: 256 seconds)
[00:54:17] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[00:55:14] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Client Quit)
[00:55:39] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[00:55:47] *** Quits: taupiqueur_ (~taupiqueu@61.144.204.77.rev.sfr.net) (Quit: taupiqueur_)
[00:56:11] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 252 seconds)
[00:56:28] <Henry151> howdy #bash. I'm working on this: https://bpa.st/E5LQ which i copied from https://github.com/Gandi/api-examples/blob/master/bash/livedns/mywanip.sh this
[00:56:40] *** Joins: taupiqueur (~taupiqueu@61.144.204.77.rev.sfr.net)
[00:57:50] *** Joins: samgranieri (~samgranie@user/samgranieri)
[00:58:52] <Henry151> i modified it first to make it add a www record as well as the main A record.. then looking here: https://api.gandi.net/docs/domains/#v5-domain-domains-domain-dnskeys-id i was trying to add a last thing, to delete the www CNAME record
[01:00:33] *** Quits: rgrinberg (~textual@187.223.183.192) (Ping timeout: 256 seconds)
[01:00:36] *** Joins: samgranieri_ (~samgranie@user/samgranieri)
[01:00:36] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:01:17] *** Quits: miique (~miique@181.46.139.166) (Ping timeout: 240 seconds)
[01:01:23] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[01:01:44] <Henry151> the issue I'm having is bash-related i swear :) I can't figure out why, but my curl request is being malformed the way I have it there -- it's adding an additional "/" between $API and domains .. i can't understand why, since the examples above which DO work, seem to be using the same pattern to form the curl .. when they do "$API/domains/.." it seems to be translated as
[01:01:49] <Henry151> "https://gandi.net/etc/api/url/domains" where when i do it it seems to give me "https://gandi.net/etc/api/url//domains" instead
[01:02:08] *** Joins: rgrinberg (~textual@187.223.183.192)
[01:03:27] *** Joins: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net)
[01:03:57] *** Quits: samgranieri (~samgranie@user/samgranieri) (Ping timeout: 240 seconds)
[01:05:07] <phy1729> API ends in a /
[01:05:12] *** Quits: samgranieri_ (~samgranie@user/samgranieri) (Client Quit)
[01:05:13] <din0> Remove the trailing API="https://dns.api.gandi.net/api/v5/" ?
[01:06:44] *** Quits: Jong (~Jong@2620:10d:c090:400::5:f0a6) (Read error: Connection reset by peer)
[01:06:55] *** Quits: rgrinberg (~textual@187.223.183.192) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:08:22] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Ping timeout: 256 seconds)
[01:08:40] *** Joins: Leonard (~Administr@114.55.127.80)
[01:09:15] <Henry151> yeah but... why do the other ones work, and mine doesn't?
[01:09:41] <Henry151> like the example script had the trailing / and when i use the example script it works fine
[01:11:19] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[01:11:44] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[01:12:01] *** Joins: sgn (~sgn@user/sgn)
[01:14:34] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[01:17:06] *** Joins: miique (~miique@181.46.139.166)
[01:19:01] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[01:20:16] *** Joins: samgranieri (~samgranie@user/samgranieri)
[01:20:24] *** Joins: irl25519 (~irl25519@2a02:c7f:1ec1:4000:933e:30a0:d661:505)
[01:21:40] *** Quits: Marbug (~Marbug@94-226-144-213.access.telenet.be) (Quit: Ping timeout (120 seconds))
[01:21:45] *** Quits: samgranieri (~samgranie@user/samgranieri) (Client Quit)
[01:21:56] *** Joins: Marbug (~Marbug@94-226-144-213.access.telenet.be)
[01:22:02] *** Quits: lopid (~lopid@user/lopid) (Ping timeout: 240 seconds)
[01:22:34] *** Quits: magla (~gelignite@55d4ca9b.access.ecotel.net) (Quit: Stay safe!)
[01:22:52] *** Joins: samgranieri (~samgranie@user/samgranieri)
[01:24:21] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[01:25:01] *** Quits: martinus__ (~martin@171.25.202.77.rev.sfr.net) (Ping timeout: 240 seconds)
[01:25:02] *** Joins: n4dir (~user@i5e8666ee.versanet.de)
[01:25:34] *** Joins: lopid (~lopid@user/lopid)
[01:25:58] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[01:26:16] *** Joins: sgn (~sgn@user/sgn)
[01:26:29] <phy1729> Put set -x in the script; it's sending with two slashes too
[01:27:17] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[01:27:22] *** Quits: samgranieri (~samgranie@user/samgranieri) (Client Quit)
[01:27:47] *** Joins: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net)
[01:28:37] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[01:30:20] *** Joins: Leonard (~Administr@114.55.127.80)
[01:32:17] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[01:32:32] *** Joins: Quaack (~Quack@185.21.216.169)
[01:33:01] *** Quits: Quack (~Quack@185.21.216.169) (Ping timeout: 240 seconds)
[01:33:38] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[01:33:45] *** Joins: natewrench123456 (~joshu@cpe-72-228-153-194.buffalo.res.rr.com)
[01:33:50] <Henry151> i see
[01:33:50] *** Joins: sgn (~sgn@user/sgn)
[01:34:04] <Henry151> there was a different issue, i guess the double slash was not causing any problem
[01:34:06] <Henry151> i solved it
[01:34:09] <Henry151> thanks for your help
[01:34:20] *** Quits: natewrench123456 (~joshu@cpe-72-228-153-194.buffalo.res.rr.com) (Max SendQ exceeded)
[01:35:31] <CrtxReavr> You can add -x to your shabang line, or enable it globally, or to ``set -x`` & ``set +x`` to enable & disable for a specific script sectoin.
[01:35:51] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[01:36:12] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[01:36:36] *** Joins: sgn (~sgn@user/sgn)
[01:37:53] <phy1729> careful with that; it doesn't work with /usr/bin/env shebangs because some kernels don't support more than one argument
[01:38:50] <CrtxReavr> Some platforms have their own syntax for shabangs with env(1).
[01:38:57] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[01:39:40] <CrtxReavr> And actually, for a lot of scripts, env searching the path for your shell handler will be the slowest part of the script.
[01:42:06] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Ping timeout (120 seconds))
[01:42:11] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[01:42:15] *** Quits: nyex (~Thunderbi@177.84.107.54) (Quit: nyex)
[01:42:22] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[01:44:48] *** Quits: mtk_ (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Read error: Connection reset by peer)
[01:45:01] <welder> where to set -x in shebang?
[01:45:08] <welder> #!/bin/bash -x ?
[01:45:10] <welder> does not work
[01:45:15] <ormaaj> I have never needed options in the shebang for any reason. They're pointless.
[01:45:32] <welder> huh
[01:45:38] <welder> it works when invoking via ./ and not bash
[01:45:47] <welder> ./foo.sh works, bash foo.sh does not
[01:46:28] <earnest> welder: bash foo.sh doesn't honour shebangs, obviously
[01:46:49] <welder> i see
[01:46:49] <earnest> Just as bash foo.py wouldn't, nor foo.rb
[01:47:26] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:48:53] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[01:49:13] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[01:49:53] *** Joins: Night-Shade (~Tim@31.17.75.61)
[01:51:32] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[01:52:07] *** Quits: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net) (Ping timeout: 256 seconds)
[01:54:20] *** Quits: zro (~zro@user/zro) (Quit: WeeChat 3.4)
[01:54:57] *** Quits: Night-Shade (~Tim@31.17.75.61) (Ping timeout: 256 seconds)
[01:55:03] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[01:57:33] <ormaaj> env (and any execvp) should be easy to optimize by hash table for local paths.
[01:57:47] *** Quits: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net) (Ping timeout: 256 seconds)
[01:57:51] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Ping timeout (120 seconds))
[01:59:55] *** Quits: drd (~drd@93.55.10.158) (Ping timeout: 256 seconds)
[02:02:23] *** Joins: PapaChub (~PapaChub@vzw-54.parabon.com)
[02:04:45] *** Quits: hqdruxn08_ (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com) (Read error: Connection reset by peer)
[02:04:45] *** Quits: jkwnki (~jkwnki@p2e5794ba.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[02:04:46] *** Quits: justIrresolute5 (~justache@user/justache) (Quit: Ping timeout (120 seconds))
[02:04:46] *** Quits: horner (~horner@host86-131-44-95.range86-131.btcentralplus.com) (Ping timeout: 240 seconds)
[02:04:46] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[02:04:50] *** Joins: horner (~horner@host86-131-44-95.range86-131.btcentralplus.com)
[02:04:57] *** Joins: sgn_ (~sgn@user/sgn)
[02:05:23] *** Joins: Leonard (~Administr@114.55.127.80)
[02:05:25] *** Quits: Guest36 (~textual@103.104.171.53) (Ping timeout: 240 seconds)
[02:06:12] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[02:06:51] *** Joins: drd (~drd@93.55.10.158)
[02:07:25] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[02:09:51] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[02:11:12] *** Joins: Night-Shade (~Tim@ip1f114b3d.dynamic.kabel-deutschland.de)
[02:13:31] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[02:14:31] *** Joins: MrBlue__ (~MrBlue@146.70.75.20)
[02:15:31] *** Quits: EerdAppel (~eerdappel@84-24-184-139.cable.dynamic.v4.ziggo.nl) (Quit: Ping timeout (120 seconds))
[02:15:49] *** Joins: EerdAppel (~eerdappel@84-24-184-139.cable.dynamic.v4.ziggo.nl)
[02:16:29] <bn_work> hi, what would cause bash to error with "Address family not supported by protocol" when using TCP redirection?  Is this because IPv6 may be disabled on a machine? ex:
[02:16:32] <bn_work> # echo test > /dev/tcp/localhost/1234
[02:16:33] <shbot> bn_work: bash: localhost: System error
[02:16:33] <shbot> bn_work: bash: /dev/tcp/localhost/1234: Invalid argument
[02:16:55] *** Quits: MrBlue_ (~MrBlue@146.70.75.22) (Ping timeout: 256 seconds)
[02:17:13] <bn_work> or IPv4?
[02:17:31] *** Joins: sgn (~sgn@user/sgn)
[02:17:33] *** Quits: sgn_ (~sgn@user/sgn) (Read error: Connection reset by peer)
[02:17:59] *** Joins: netpipe (~netpipe@user/netpipe)
[02:19:30] <sunyibo> I'm cleaning up my backups. I'd like to delete everything in a directory except the home directory and its contents. How do I proceed?
[02:20:49] *** Joins: treble (~treble@user/treble)
[02:22:38] *** Quits: Swahili_ (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Remote host closed the connection)
[02:22:40] <Blondie101010> bn_work:  does it work when contacting something reachable, like possibly: echo test > /dev/tcp/localhost/22
[02:23:26] <Blondie101010> if not, try with the IP 127.0.0.1
[02:23:26] *** Joins: loganlee (~Thunderbi@user/loganlee)
[02:24:29] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[02:25:54] <bn_work> Blondie101010: unfortunately I am not able to reproduce the error, I am just trying to assist someone else that is & trying to figure out the cause of the message.  In their case it is supposed to be a different host than localhost, in their case it was (mistakenly) being redirected to it, but if was closed, on my system it says "Connection refused"
[02:26:12] <bn_work> s/if was/if it was/
[02:26:59] <Blondie101010> well ask them to do what I told you
[02:27:08] <Blondie101010> and preferably show them how to use IRC
[02:28:27] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[02:28:43] *** Joins: hqdruxn08 (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com)
[02:28:53] *** Joins: sgn (~sgn@user/sgn)
[02:29:21] *** Joins: Leonard (~Administr@114.55.127.80)
[02:31:46] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[02:31:47] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[02:34:37] *** Quits: taupiqueur (~taupiqueu@61.144.204.77.rev.sfr.net) (Quit: taupiqueur)
[02:35:17] *** Quits: miique (~miique@181.46.139.166) (Ping timeout: 240 seconds)
[02:36:21] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[02:39:43] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[02:40:11] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[02:42:08] *** Quits: Kruppt (~Kruppt@50.111.20.28) (Quit: Leaving)
[02:42:35] *** Joins: rgrinberg (~textual@2806:101e:7:78bb:7d7b:4bec:a56d:43d9)
[02:43:02] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[02:43:49] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[02:44:32] *** Joins: quazimodo (~quazimodo@n1-41-223-188.bla2.nsw.optusnet.com.au)
[02:45:37] *** Quits: uc50ic4more (~uc50ic4mo@104.254.8.73) (Quit: uc50ic4more)
[02:45:59] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[02:46:29] *** Joins: justIrresolute (~justache@user/justache)
[02:47:09] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[02:47:33] *** Joins: sgn (~sgn@user/sgn)
[02:49:25] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[02:51:24] *** Quits: mithrin (~mithrin@188-167-233-152.dynamic.chello.sk) (Quit: Leaving)
[02:51:52] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[02:52:06] *** Quits: marlinc (~marlinc@user/marlinc) (Ping timeout: 260 seconds)
[02:52:16] *** Joins: sgn (~sgn@user/sgn)
[02:53:46] *** Quits: DaNeenjah (~jake@adsl-74-230-4-35.hsv.bellsouth.net) (Quit: WeeChat 3.4)
[02:57:24] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[02:57:46] *** Joins: sgn (~sgn@user/sgn)
[02:59:25] *** Quits: Night-Shade (~Tim@ip1f114b3d.dynamic.kabel-deutschland.de) (Ping timeout: 256 seconds)
[03:00:47] *** Quits: drd (~drd@93.55.10.158) (Quit: ZNC 1.8.2 - https://znc.in)
[03:02:06] *** Joins: drd (~drd@93.55.10.158)
[03:02:47] *** Quits: rgrinberg (~textual@2806:101e:7:78bb:7d7b:4bec:a56d:43d9) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:02:57] *** Quits: quazimodo (~quazimodo@n1-41-223-188.bla2.nsw.optusnet.com.au) (Ping timeout: 240 seconds)
[03:03:02] *** Quits: drd (~drd@93.55.10.158) (Client Quit)
[03:03:48] *** Joins: marlinc (~marlinc@user/marlinc)
[03:05:10] *** Quits: kyr (~kyr@167.71.50.12) (Quit: Lost terminal)
[03:05:30] *** Joins: kyr (~kyr@167.71.50.12)
[03:06:40] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[03:07:04] *** Joins: sgn (~sgn@user/sgn)
[03:09:35] *** Joins: Leonard (~Administr@114.55.127.80)
[03:10:57] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[03:11:35] *** Joins: Inline (~Inline@aftr-37-201-240-204.unity-media.net)
[03:11:39] *** Quits: irl25519 (~irl25519@2a02:c7f:1ec1:4000:933e:30a0:d661:505) (Quit: irl25519)
[03:11:53] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[03:14:06] *** Joins: ElPresidente (~ElPreside@172-125-150-28.lightspeed.tukrga.sbcglobal.net)
[03:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:15:38] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[03:19:11] *** Quits: ElPresidente (~ElPreside@172-125-150-28.lightspeed.tukrga.sbcglobal.net) (Quit: Leaving)
[03:19:57] *** Joins: skraito (~skraito@user/skraito)
[03:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:20:05] *** Quits: skraito (~skraito@user/skraito) (K-Lined)
[03:20:38] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[03:21:30] *** Quits: dextercd (~dexter@2a02-a450-f25d-1-76d4-35ff-fefe-34c.fixed6.kpn.net) (Quit: WeeChat 3.4)
[03:23:54] <loganlee> i did `sort sortme.txt | split -n 2 -` where sortme.txt contains six lines of string and i get error: split: -: cannot determine file size
[03:23:54] <loganlee> `sort sortme.txt | split -l 3 -` works though
[03:26:30] <emanuele6> `split -n2' means to split the file into two equal sized files. `-' is a pipe in that case, not a file, so it does not have a size.
[03:27:12] <loganlee> emanuele6: thx!
[03:27:21] <loganlee> that's what i thought
[03:27:27] <emanuele6> `-l3' has a completely different meaning.
[03:27:56] <emanuele6> `-l3' divides the input into multiple files with 3 lines each.
[03:28:10] <loganlee> yep so it still works with stream
[03:29:09] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[03:29:24] *** Joins: sgn (~sgn@user/sgn)
[03:30:07] *** Quits: Atque (~Atque@user/atque) (Remote host closed the connection)
[03:31:31] *** Joins: Atque (~Atque@user/atque)
[03:34:44] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[03:34:51] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[03:38:05] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[03:39:02] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[03:39:14] *** Joins: sgn (~sgn@user/sgn)
[03:40:01] *** Joins: Leonard (~Administr@114.55.127.80)
[03:40:05] *** Joins: quazimodo (~quazimodo@n1-41-223-188.bla2.nsw.optusnet.com.au)
[03:41:57] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[03:42:58] *** Quits: gabriele (~gabriele@user/gabriele) (Quit: Leaving)
[03:52:55] *** MrBlue__ is now known as MrBlue
[03:55:57] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[03:56:20] *** Joins: sgn (~sgn@user/sgn)
[03:56:21] *** Quits: jwash (~jwash@c-73-254-46-148.hsd1.wa.comcast.net) (Read error: Connection reset by peer)
[03:58:45] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[03:59:06] *** Quits: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr) (Read error: Connection reset by peer)
[03:59:14] *** Joins: jwash (~jwash@c-73-254-46-148.hsd1.wa.comcast.net)
[03:59:33] *** Joins: chenqisu1 (~bhca7d@183.217.201.21)
[04:00:48] *** Hash is now known as EnchanterTim
[04:01:17] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Quit: Leaving)
[04:05:21] *** Quits: Leonard (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[04:05:26] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[04:06:44] *** Joins: roadt_ (~roadt@36.5.93.21)
[04:06:45] *** Joins: rgrinberg (~textual@2806:101e:7:78bb:7d7b:4bec:a56d:43d9)
[04:09:49] *** Quits: roadt (~roadt@60.166.72.94) (Ping timeout: 256 seconds)
[04:13:31] *** Quits: Betal (~Betal@user/betal) (Remote host closed the connection)
[04:13:47] *** Joins: Betal (~Betal@user/betal)
[04:14:35] *** Quits: Circuitsoft (uid393878@id-393878.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[04:17:30] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[04:20:52] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[04:21:10] *** Joins: sgn (~sgn@user/sgn)
[04:26:17] *** Quits: MrBlue (~MrBlue@146.70.75.20) (Ping timeout: 240 seconds)
[04:26:21] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[04:26:48] *** Joins: sgn (~sgn@user/sgn)
[04:30:00] *** Quits: bertptrs (~quassel@user/bertptrs) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[04:30:33] *** Joins: bertptrs (~quassel@user/bertptrs)
[04:35:45] *** Quits: netpipe (~netpipe@user/netpipe) (Ping timeout: 256 seconds)
[04:38:07] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.3)
[04:39:45] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[04:40:00] *** Joins: sgn (~sgn@user/sgn)
[04:40:15] *** Quits: rgrinberg (~textual@2806:101e:7:78bb:7d7b:4bec:a56d:43d9) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:43:04] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[04:44:12] *** Quits: n4dir (~user@i5e8666ee.versanet.de) (Remote host closed the connection)
[04:48:16] <tm512> can I count on crashing applications to pretty much always have a nonzero exit code? just thought of a potential problem with my game server supervisor script. currently the supervisor runs in a subshell, and restarts the game server every time it exits, regardless of why, until the supervisor subshell itself is killed
[04:48:24] *** Joins: uc50ic4more (~uc50ic4mo@104.254.8.73)
[04:49:00] <tm512> realized that this could potentially result in a perpetual failure loop, if the server crashes for some reason
[04:50:17] <tm512> seems like maybe it'd be a good idea for the loop to recognize when it's time to just give up, thinking of checking the exit code of wait and incrementing a counter every time it's nonzero
[04:51:59] *** Joins: igemnace (~ian@user/igemnace)
[04:55:26] *** Quits: FluffyMask (~masque@user/fluffymask) (Quit: WeeChat 3.4)
[04:55:54] <tirnanog> usually. even if the application does not exit normally, the bits representing the signal are synthesized in $?. in the case of bash, 128 + n where n is the signal number.
[04:56:07] *** Joins: xcm_ (~xcm@static.90.45.69.159.clients.your-server.de)
[04:57:33] <tirnanog> I wouldn't go so far as to say always, but generally speaking, yes.
[04:57:44] *** Joins: Penguin666 (~Penguin66@217.138.205.135)
[04:57:44] *** Quits: docmax_ (~docmax@dynamic-077-006-169-110.77.6.pool.telefonica.de) (Remote host closed the connection)
[04:57:44] *** Quits: pflanze (~pflanze@5-168-208-80.dyn.fiber.qlnet.ch) (Remote host closed the connection)
[04:57:44] *** Quits: lsrtl (~lsrtl@user/lsrtl) (Remote host closed the connection)
[04:57:44] *** Joins: pflanze (~pflanze@5-168-208-80.dyn.fiber.qlnet.ch)
[04:57:44] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[04:57:44] *** Quits: compuguy (ahall@user/compuguy) (Quit: Ping timeout (120 seconds))
[04:57:44] *** Quits: luva (~luva@37.120.197.53) (Quit: Ping timeout (120 seconds))
[04:57:44] *** Quits: xcm (~xcm@user/xcm) (Read error: Connection reset by peer)
[04:57:49] *** Joins: docmax (~docmax@dynamic-077-006-169-110.77.6.pool.telefonica.de)
[04:57:53] *** Joins: compuguy1 (ahall@user/compuguy)
[04:57:53] *** Joins: luva0 (~luva@37.120.197.53)
[04:57:54] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[04:59:01] *** Quits: Penguin666x (~Penguin66@217.138.205.135) (Ping timeout: 240 seconds)
[05:01:04] <tm512> hmm, in this case SIGTERM is a normal exit, sent to the game server from a signal trap when I want to signal a restart of the server
[05:01:26] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[05:01:40] <tm512> SIGTERM is also sent to the game server when the subshell gets SIGTERM, but since the subshell exits right afterwards, that terminates the loop and I don't need to account for it
[05:03:05] *** Quits: quazimodo (~quazimodo@n1-41-223-188.bla2.nsw.optusnet.com.au) (Ping timeout: 256 seconds)
[05:03:56] *** Joins: Codaraxis (~Codaraxis@user/codaraxis)
[05:07:19] <tm512> guess one thing I could do is track loop iterations unconditionally, and reset that variable in the restart trap, that way restarting the server 5-10 times or whatever won't cause the supervisor to quit thinking the server is in a crash loop, but the number will continually tick upwards if the server keeps exiting on its own
[05:07:31] <tirnanog> for a supervisor to blindly restart in the case that WIFEXITED is effectively true can, indeed, be troublesome. the idea you describe has been implemented in various forms before, such as in the case of systemd units that are set to restart (StartLimitIntervalSec, StartLimitBurst). upstart had something similar and, no doubt, various other supervisors.
[05:07:57] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[05:07:59] <tirnanog> although that's going one step further by implementing rate limiting.
[05:08:21] *** Joins: sgn (~sgn@user/sgn)
[05:09:32] <tm512> if I can count on SIGTERM causing exit code 143 like it's doing on this ubuntu system, I could check against that. I'm wary of adding magic numbers to code that I want to be cross-platform
[05:10:36] <tm512> also note that this script is running under dash and not bash, just seems like this is the most populated shell channel and regular bourne shell code is a subset of bash anyway
[05:10:42] <tirnanog> if that's a concern, using bash a supervisor might not be for the best.
[05:12:57] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[05:13:08] <tirnanog> or dash, for that matter.
[05:13:11] *** Joins: sgn (~sgn@user/sgn)
[05:14:06] *** Joins: paulgrmn__ (~paulgrmn@user/paulgrmn)
[05:15:36] <tm512> this is basically an edge case that I'm trying to account for, the main consequence of not adding a limiter like this would be an annoying amount of identical log files being generated if the server isn't configured correctly and can't find necessary files
[05:15:59] <tirnanog> you can't compare against SIGTERM without using magic numbers in sh, and I don't think the spec even guarantees that it's 128 + n.
[05:16:09] <tirnanog> there are pletny of other languages that don't have these limitations.
[05:16:52] <tirnanog> the specification states only that "the exit status of a command that terminated because it received a signal shall be reported as greater than 128."
[05:17:00] <tirnanog> bash makes a more concrete guarantee, however.
[05:17:19] <tirnanog> but still, magic numbers.
[05:20:27] <tm512> well I could just go the route of counting iterations of the loop, resetting the counter when the server is intentionally reset. for the specific instance of the server failing to start up due to not finding files, it seems like it's hardcoded to return 255, so I could check for that
[05:21:30] <tm512> I could perhaps make a function that returns the exit code that SIGTERM gives on the current system, as long as there are guarantees it'll be consistent on a given system
[05:24:55] <tirnanog> posix kill(1) doesn't list the numbers, which is somewhat annoying.
[05:25:21] <tm512> for that option I'm thinking of doing something like cat /dev/urandom > /dev/null & then killing it and printing its exit code
[05:25:57] *** Quits: paulgrmn__ (~paulgrmn@user/paulgrmn) (Ping timeout: 240 seconds)
[05:26:12] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[05:26:24] *** Joins: sgn (~sgn@user/sgn)
[05:26:25] <tm512> just trying to think of how to order things to not get the exit code from kill
[05:30:18] <tirnanog> that sounds like a very bad idea to me. consider making bash a requirement. it appears you can do:
[05:30:18] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:30:24] <tirnanog> # kill -l TERM
[05:30:26] <shbot> tirnanog: 15
[05:30:52] <tirnanog> which would always work with bash's kill builtin.
[05:31:20] <tirnanog> besides, you need the 128 + n guarantee anyway, surely.
[05:31:27] <tirnanog> sh makes no such guarantee.
[05:31:55] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[05:32:43] <tirnanog> a specific implementation of sh might but, then, that's hardly portable.
[05:34:41] <tm512> eh, I'd probably rather just count iterations regardless of exit code to keep it portable, gonna see what I can do though
[05:39:07] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:41:29] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Read error: Connection reset by peer)
[05:42:28] *** Quits: igemnace (~ian@user/igemnace) (Quit: WeeChat 3.4)
[05:47:27] <Strykar_> How do I reduce the number of lines in the script to check if these 5 binaries exist - https://bpa.st/DTRQ
[05:48:34] <Blondie101010> you could reduce it by having a single requirement for all 5, or you could do a loop
[05:48:35] <tirnanog> for bin in jq sed tar curl grep; do ...
[05:50:25] <Strykar_> use hash instead of command?
[05:51:58] <tirnanog> hash should be ok.
[05:53:48] <Strykar_> Something like https://bpa.st/JP7Q ?
[05:54:25] *** Joins: luva00 (~luva@146.70.62.253)
[05:54:33] <tirnanog> the benefit of hash would be that you don't have to produce your own error messages. hash foo bar baz || exit
[05:55:33] <tirnanog> or, at least, you can round it off with one generic error rather than taking each and every utility into consideration.
[05:56:55] *** Quits: luva0 (~luva@37.120.197.53) (Ping timeout: 256 seconds)
[05:56:56] *** luva00 is now known as luva0
[05:59:23] <Strykar_> is this better? https://bpa.st/6LJQ
[06:01:00] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[06:01:06] <kurahaupo> tm512:  Why only SIGTERM? If you don't care which signal causes the server to die, you can simply test whether the exit code is between 129 & 191. If you do care, you can use « trap -l | tr -s '\t( ' '\n\t' » to get a list of the numeric values of all signals on the current system
[06:01:18] *** Joins: loganlee (~Thunderbi@user/loganlee)
[06:01:27] *** Quits: luva0 (~luva@146.70.62.253) (Ping timeout: 256 seconds)
[06:01:53] <tirnanog> Strykar_: I mean, you could just do if ! hash ...; then echo "One ore more required utilities are missing. Aborting." >&2; exit 1; fi. the hash errors will speak for themselves.
[06:02:10] *** Joins: sublim20 (~sublim20@user/sublim20)
[06:02:35] *** Joins: jihema (~jma@2404:440c:17da:2f00:8ec:4eec:8f39:12c7)
[06:03:11] <tirnanog> kurahaupo: bash isn't being used so, no, trap -l won't necessarily work.
[06:03:17] *** Joins: luva0 (~luva@45.141.152.45)
[06:03:27] <tirnanog> at least, it's not being used yet. I did recommend it.
[06:04:21] <kurahaupo> tirnanog: ah, I missed that, thanks
[06:04:35] <tm512> kurahaupo: SIGTERM is the only return code above 128 that I want to ignore, because that's what gets sent intentionally when restarting the server
[06:05:07] <tirnanog> ok, but then you're back to the vaguaries of the shell command language.
[06:05:10] *** Joins: hsv (~unknown@user/hsv)
[06:05:17] <tm512> any other exit code should be considered a server failure and count towards the number of attempts before giving up
[06:05:49] <tirnanog> I've pointed out twice that it only guarantees that the status is above 128 in that case.
[06:05:57] <tirnanog> it doesn't guarantee that it's 128 + signo.
[06:06:09] <tirnanog> bash doesn't have this problem.
[06:06:43] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[06:06:59] <kurahaupo> tm512: What about SIGABRT & SIGSEGV when the server encounters an internal bug, or SIGPWR when the system is shutting down, or … in fact any time the server dies unexpectedly
[06:07:02] <tm512> fwiw, it seems like almquist sh also always does 128 + n
[06:07:11] <Blondie101010> isn't the return code unsigned?
[06:07:18] <Blondie101010> signed
[06:07:24] <Blondie101010> so -1
[06:07:58] <Blondie101010> hmmm
[06:08:16] *** Joins: vysn (~vysn@user/vysn)
[06:08:20] <tm512> kurahaupo: it's fine if crashes count towards the number of attempts, if a crash causes the server to be reset like 10-15 times or whatever, it's gonna need attention anyway
[06:08:21] <kurahaupo> Blondie101010: Yes, posix exit codes are unsigned char / uint8_r
[06:08:32] *** Quits: fcser (~fcser@booty.farted.net) (Read error: Connection reset by peer)
[06:08:53] <kurahaupo> Blondie101010:  / uint8_t
[06:09:19] <hsv> How do you print the char for a given decimal ascii code?
[06:09:23] <hsv> # c=65; printf _%b_ "\x$(printf %x $c)"
[06:09:24] <shbot> hsv: _A_
[06:09:36] <hsv> is there a better way?
[06:10:08] <kurahaupo> hsv: Sadly no, the %c directive in the printf command is quite broken
[06:10:47] <kurahaupo> compared with the printf C function
[06:10:55] <hsv> kurahaupo: ok, thanks.
[06:10:57] *** Joins: fcser (~fcser@booty.farted.net)
[06:11:06] *** Quits: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66) (Quit: Leaving)
[06:11:09] <ormaaj> why ascii? just use $'\uxx'
[06:11:27] <ormaaj> %b works too
[06:12:50] <tm512> tirnanog: it seems like kill -l $? is going to be reliable. I just tested this on ksh93 which uses 256 + sig rather than 128 + sig, and kill -l 271 returns TERM
[06:12:57] <hsv> ormaaj: can you give an example?
[06:13:01] <kurahaupo> For reasons that escape me, the printf command defines %c as an alias for %.1s instead of taking a number and giving its corresponding character
[06:14:14] <Blondie101010> yeah that's ridiculous
[06:14:22] <tirnanog> tm512: yes, that seems portable.
[06:15:00] <kurahaupo> k# kill -l 1 257
[06:15:02] <shbot> kurahaupo: HUP
[06:15:02] <shbot> kurahaupo: HUP
[06:15:15] <kurahaupo> k# kill -l -255
[06:15:18] <shbot> kurahaupo: HUP
[06:15:18] <shbot> kurahaupo: INT
[06:15:18] <shbot> kurahaupo: etc... ( http://ix.io/fjS )
[06:15:24] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[06:15:27] *** Quits: fcser (~fcser@booty.farted.net) (Client Quit)
[06:15:33] <kurahaupo> k# kill -l 513
[06:15:34] <shbot> kurahaupo: HUP
[06:15:44] *** Joins: fcser (~fcser@booty.farted.net)
[06:16:06] <kurahaupo> k# kill -l $((0x12345601))
[06:16:08] <shbot> kurahaupo: HUP
[06:16:10] <tirnanog> ok, but so what? it's designed to accept the value of the ? special parameter.
[06:16:18] <tm512> not sure if there's anyway to tell whether I'm invoking a builtin. `which kill` returns /bin/kill regardless of the shell I use, but I'm guessing a lot of these shells have a builtin kill that knows what exit codes it associates with a given signal
[06:16:27] <ormaaj> hsv: %b is only useful if you for some reason have stored a code point as data and need to convert. If you're hardcoding it as a string litteral and want to use the escaped numeric representation you can either use %b or `printf %s $'\u'`
[06:16:42] <Blondie101010> tm512:  no, kill is not a shell utility
[06:16:46] <kurahaupo> !which
[06:16:46] <greybot> which(1) is an external program used to search PATH for an executable. It behaves differently on different systems and you can't rely on a useful exit code; use (from most to least portable) ''command -v'' or ''type -P'' (to find the path) or ''hash'' (to check) instead. See http://mywiki.wooledge.org/BashFAQ/081
[06:16:48] <tirnanog> $? will never be -255, for example.
[06:16:54] <yitz> # type -a kill
[06:16:55] <shbot> yitz: kill is a shell builtin
[06:16:55] <shbot> yitz: kill is /bin/kill
[06:17:01] <Blondie101010> what
[06:17:09] <yitz> What?
[06:17:13] *** ryo_ is now known as ryo
[06:17:14] *** Quits: ryo (foobar@athena.nocsrv.de) (Changing host)
[06:17:14] *** Joins: ryo (foobar@user/ryo)
[06:17:21] <kurahaupo> the point is that kill -l is simply ignoring the upper bits of that given number
[06:17:22] <hsv> ormaaj: yes that's the question...
[06:17:24] <Blondie101010> it is 0.0
[06:17:31] <hsv> ormaaj: How do you print the char for a given decimal ascii code?
[06:17:38] *** Quits: uc50ic4more (~uc50ic4mo@104.254.8.73) (Quit: uc50ic4more)
[06:17:47] <yitz> !faq hex
[06:17:47] <greybot> https://mywiki.wooledge.org/BashFAQ/071 -- How do I convert an ASCII character to its decimal (or hexadecimal) value and back? How do I do URL encoding or URL decoding?
[06:18:02] *** Quits: horner (~horner@host86-131-44-95.range86-131.btcentralplus.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:18:02] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[06:18:14] <hsv> ormaaj: i suppose i should say arbritrary decimal value held in a variable.
[06:18:19] <tm512> well /bin/kill -l 271 on my dragonflyBSD system returns unknown signal, kill -l 271 on both ksh93 and zsh returns TERM
[06:18:57] <yitz> hsv: See faq 71
[06:19:11] <kurahaupo> hsv: If you need to do a lot of them, you could simply have a string containing the bytes 1 through 255, and index it by the number
[06:19:56] *** Joins: libc (~weechat@user/tessio)
[06:20:09] <kurahaupo> hsv: You can't put byte 0 in a variable, because that's the C string terminator
[06:20:23] <hsv> kurahaupo: actually that's neat, it would save having to check if the char is printable.
[06:20:25] <ormaaj> hsv: which one you'd choose depends on whether you need to do it programmatically. Because $'\x' and $'\u' are litterals (technically a type of quoting)
[06:20:29] *** Joins: ztx (~ztx@user/ztx)
[06:21:06] <ormaaj> hsv: yeah then %b is the way to go.
[06:21:22] <hsv> it needs to be programmatic, the decimal values are read from input.
[06:22:07] *** Quits: pj (~pj@ghettoforge/pj) (Remote host closed the connection)
[06:22:12] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[06:22:30] <tm512> so yeah, I think in my server supervisor loop, I'll compare the output of kill -l $? against TERM, and if they're not equal, count it towards the number of run attempts
[06:22:35] *** Joins: sgn (~sgn@user/sgn)
[06:22:50] <hsv> # c=65; printf "\\$(printf %o "$c")"
[06:22:52] <shbot> hsv: A
[06:23:10] <kurahaupo> printf -v map '\x%02x' {1..255} ; printf -v map ".$map" ; printf 'char %u is %s\n' "$i" "${map:i:1}"
[06:23:13] <tm512> assuming this is run on a system where kill -l wouldn't work for this, I don't think it would have a disastrous outcome or anything
[06:23:31] <tm512> the loop would just bomb out after a certain number of restarts
[06:23:33] *** Quits: Inline (~Inline@aftr-37-201-240-204.unity-media.net) (Ping timeout: 256 seconds)
[06:23:50] <kurahaupo> # printf -v map '\x%02x' {1..255} ; printf -v map ".$map" ; for i in 33 65 99 ; do printf 'char %u is %s\n' "$i" "${map:i:1}" ; done
[06:23:53] <shbot> kurahaupo: bash: printf: missing hex digit for \x
[06:23:53] <shbot> kurahaupo: bash: printf: missing hex digit for \x
[06:23:53] <shbot> kurahaupo: etc... ( http://ix.io/18OF )
[06:24:21] <kurahaupo> # printf -v map '\\x%02x' {1..255} ; printf -v map ".$map" ; for i in 33 65 99 ; do printf 'char %u is %s\n' "$i" "${map:i:1}" ; done
[06:24:22] <shbot> kurahaupo: char 33 is !
[06:24:22] <shbot> kurahaupo: char 65 is A
[06:24:22] <shbot> kurahaupo: char 99 is c
[06:25:26] <Blondie101010> interesting
[06:25:55] <tirnanog> tm512: I suppose that both kill and sh would have to be of a conforming system, with $? coming from said sh implementation. potentially a stretch for linux in particular but, if you can live with that, it might be serviceable.
[06:26:02] <ormaaj> %b is when you've already stored the escaped format ofc. You can kinda construct it or use %x / %c
[06:28:10] *** Joins: yac (~user@user/yac)
[06:29:03] <tm512> every shell I've tested so far returns TERM when I input that shell's SIGTERM exit code to kill -l, including ash, bash, zsh, ksh93, oksh. I'm fairly satisfied with this level of portability
[06:29:26] <tm512> zsh even returns TERM when I give its kill builtin the ksh93 exit code
[06:30:13] <tm512> even though its TERM exit code is 143 like bash and ash
[06:30:13] *** Joins: pj (~pj@ghettoforge/pj)
[06:30:15] <tirnanog> specifically, where kill is a builtin, it should be fine.
[06:31:10] <hsv> # c=65; printf "$(printf \\%o "$c")"
[06:31:11] <shbot> hsv: A
[06:31:13] <hsv> # c=65; printf "\\$(printf %o "$c")"
[06:31:14] <shbot> hsv: A
[06:31:18] <hsv> same?
[06:31:57] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[06:32:23] <hsv> # vals=(65 66 67); printf "$(printf "\\%o " "${vals[@]}")"
[06:32:24] <shbot> hsv: A B C
[06:33:46] *** Quits: cisco87 (~quassel@static.134.4.251.148.clients.your-server.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[06:34:30] <tm512> tirnanog: if it ends up invoking /bin/kill, it *may* still work, but /bin/kill on ubuntu doesn't want to deal with exit codes at all, /bin/kill on dragonflyBSD (and presumably FreeBSD) is fine with bourne shell exit codes but not the exit codes from ksh93 that are >256
[06:35:37] *** Joins: cisco87 (~quassel@static.134.4.251.148.clients.your-server.de)
[06:36:41] <tm512> worst case scenario is that the supervisor thinks an intentional restart is actually a crash and stops restarting the server after a certain number of times doing that, but that seems like a highly unlikely situation, not sure what shells are actually in use that don't have a kill builtin that works this way
[06:37:57] *** Quits: jos1 (~jos3@host-091-097-188-030.ewe-ip-backbone.de) (Ping timeout: 240 seconds)
[06:38:21] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[06:38:22] <tm512> I'm thinking of adding a cooldown time anyway, so that actual crashes that are infrequent enough won't end up bringing the server down, the main intent of this code is to halt a rapid loop of starting the server up if it keeps failing
[06:38:23] <kurahaupo1> Unlike most built-ins, kill isn't for performance, but rather a nod to the sysadmin recovering a system where fork() fails because the process table is full.
[06:39:07] <Strykar_> tirnanog: I see what you mean "if ! hash jq sed tar curl grep; then echo "Install them" >&2; exit 1; fi"
[06:39:16] <tirnanog> Strykar_: yeah.
[06:40:15] *** Joins: igemnace (~ian@user/igemnace)
[06:40:35] <tm512> not sure how I could implement a cooldown, like, I have an idea, but I'm not sure whether shell integers are reliably 32-bit
[06:40:35] *** Quits: libc (~weechat@user/tessio) (Quit: WeeChat 3.2)
[06:40:52] <Strykar_> # if ! hash jqq sedd; then echo "Install them" >&2; fi
[06:40:53] *** Joins: skraito (~skraito@user/skraito)
[06:40:53] <shbot> Strykar_: bash: hash: jqq: not found
[06:40:53] <shbot> Strykar_: bash: hash: sedd: not found
[06:40:53] <shbot> Strykar_: Install them
[06:41:05] *** Quits: skraito (~skraito@user/skraito) (K-Lined)
[06:41:15] <hsv> # hash jq sed tar curl grep || exit
[06:41:21] <shbot> hsv: bash: hash: tar: not found
[06:41:21] <shbot> hsv: bash: hash: curl: not found
[06:41:21] <shbot> hsv: etc... ( http://ix.io/3Lbc )
[06:41:31] <tm512> thinking of taking the timestamp in seconds since the unix epoch, then when the server is gonna restart, see if the current time is within a certain range of the last restart, and if it is, tick up the attempt counter
[06:43:10] <tm512> like if [ $((now - lastRestart)) -lt 60 ]; then ((startAttempts++)); fi
[06:44:50] <tirnanog> note: ((startAttempts++)) isn't sh.
[06:46:47] <kurahaupo1> either ((now < lastRestart+60 && ++startAttempts)) or [ $((now - lastRestart - 60)) -lt 0 ] && startAttempts=$((1+startAttempts))
[06:47:21] <kurahaupo1> k# let "4 < 5" ; echo $?
[06:47:22] <shbot> kurahaupo1: 0
[06:47:29] <kurahaupo1> k# let "4 == 5" ; echo $?
[06:47:30] <shbot> kurahaupo1: 1
[06:47:43] <tirnanog> or : $((startAttempts += 1))
[06:47:52] *** Quits: uuidNuni1 (~weechat@193.123.227.17) (Quit: WeeChat 3.3)
[06:48:08] <kurahaupo1> I suspect the comparison operators aren't mandated by POSIX but are available in practice.
[06:48:10] <tm512> kurahaupo1: what's wrong with $((now - lastRestart)) -lt 60 for testing how long ago the last restart was?
[06:48:44] <tm512> kurahaupo1: -lt and -gt are both in man 1p test
[06:48:51] <kurahaupo1> I didn't say there was a problem with that fragment; rather the overall command
[06:48:55] <ormaaj> Comparisons? Yeah those are required
[06:49:08] <kurahaupo1> I mean the "<" inside 'let'
[06:49:42] <ormaaj> can easily define let too of course if needed.
[06:49:52] <tm512> ah. I don't think I've ever actually used let for anything
[06:50:00] <ormaaj> !posixlet
[06:50:00] <greybot> case $(command -v let) in let) ;; *) let() { while ${2+\:} return "$((! ( ${1:-0} )))"; do shift; done; }; esac
[06:50:42] <tirnanog> tm512: good.
[06:51:16] <kurahaupo1> OK, I mean, does POSIX require $(( 1 < 2 )) to evaluate to 1 ?
[06:51:32] <ormaaj> yes
[06:51:33] <tirnanog> yes.
[06:51:38] *** Joins: jos1 (~jos3@dyndsl-091-096-041-160.ewe-ip-backbone.de)
[06:53:32] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[06:53:47] *** Joins: uuidNuniq (~weechat@193.123.227.17)
[06:55:14] <tirnanog> in particlar, "the evaluation of arithmetic expressions shall be equivalent to that described in Section 6.5, Expressions, of the ISO C standard."
[06:55:27] <tm512> after I'm finished writing this script maybe I should try running it under a selection of various shells to ensure that I haven't mistakenly added any incompatibilities
[06:55:52] <kurahaupo1> tirnanog: got a link for that? I'd like to read the surrounding text
[06:55:55] <tirnanog> shellcheck.net would save you a considerable amount of effort in that regard.
[06:56:29] <tirnanog> kurahaupo1: https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_04 and https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap01.html#tag_17_01_02_01.
[06:56:43] <kurahaupo1> thanks
[06:56:51] *** Quits: ntz (~dpecka@static-84-42-228-122.net.upcbroadband.cz) (Ping timeout: 256 seconds)
[06:57:00] <tm512> hmm I'm just now remembering that POSIX date doesn't have +"%s" :|
[06:57:20] *** Joins: ntz (~dpecka@static-84-42-228-122.net.upcbroadband.cz)
[06:57:36] <tirnanog> bash is yearning for you. heh heh.
[06:58:17] *** Quits: ih8wndz (~ih8wndz@alpha.trunkmasters.com) (Ping timeout: 240 seconds)
[06:58:27] <tm512> I recall someone mentioning they excluded %s because you can get the unix epoch time with some awkward awk command
[06:58:33] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 256 seconds)
[06:58:40] <ormaaj> POSIX is crap at describing arithmetic evaluation. Don't read too deeply into the text. POSIX goofed by defering to C for too much.
[06:59:23] <tirnanog> worst case in bash would be that you run printf -v epoch '%(%s)T' -1
[06:59:42] *** Joins: horner (~horner@host86-131-44-95.range86-131.btcentralplus.com)
[06:59:48] <tirnanog> but nowadays, there's also EPOCHSECONDS.
[07:01:00] <kurahaupo1> I'm wondering whether they actually include "<" and "==" etc in the definition of "arithmetic operators". I would, but then I'm a C programmer from waaay back; I've heard other people take "arithmetic" in a strict mathematical sense and exclude comparison operators, as justification for using [[ $a -lt $b ]] instead of (( a < b ))
[07:01:37] *** Quits: karakedi (~eAC53C340@user/karakedi) (Ping timeout: 240 seconds)
[07:02:33] <kurahaupo1> tirnanog: I wouldn't use "epoch" for that variable name: %s doesn't produce an epoch, it produces a count of seconds SINCE the start of the UNIX epoch.
[07:03:39] <tm512> tirnanog: doesn't seem like date is a builtin, and both GNU and BSD date commands provide %s, this may be a deviation from POSIX that I can accept, and if I do, the main question is whether I can rely on arithmetic stuff always working with 32-bit integers like this
[07:03:46] <kurahaupo1> An epoch is a (very long) timespan, particularly identified by its start. e.g. "A.D." is an epoch, where year numbers start at 1
[07:04:41] <kurahaupo1> tm512: elsewhere (not the command shell) POSIX requires "int" to be at least 32 bits, so yes you can rely on $(( ... )) to perform at least 32-bit arithmetic.
[07:05:04] <ormaaj> "The sizeof() operator and the prefix and postfix "++" and "--" operators arenot required."
[07:05:25] <kurahaupo1> If you need exactly 32 bits, you need to mask out unwanted bits.
[07:05:36] <kurahaupo1> ormaaj: what about the [] array indexing operator?
[07:05:42] <tirnanog> that's why I mentioned : $(( n += 1 )) earlier.
[07:05:49] *** Joins: karakedi (~eAC53C340@user/karakedi)
[07:05:53] <kurahaupo1> or the * indirection operator?
[07:06:16] <kurahaupo1> It seems there are wide gaps in this definition
[07:06:17] <tm512> I don't need exactly 32 bits, I just wanna make sure that integers in shell aren't gonna be automatically modulo some smaller power of two
[07:06:32] <tirnanog> kurahaupo1: alright. epochseconds then. what's good for the goose is good for the gander. or something.
[07:06:53] <kurahaupo1> tirnanog: *yay!*
[07:06:56] <hsv> # map=({0..31} \'' '\'); map+=($(printf "$(printf \'\\%o\'' ' {33..126})")); map+=({127..255}); for c in 0 {31..35} {65..67} 255; do printf '%s ' "${map[c]}"; done
[07:06:57] <shbot> hsv: 0 31 ' ' '!' '"' '#' 'A' 'B' 'C' 255
[07:08:00] <hsv> # map=({0..31} \'' '\' $(printf "$(printf \'\\%o\'' ' {33..126})") {127..255}); for c in 0 {31..35} {65..67} 255; do printf '%s ' "${map[c]}"; done
[07:08:02] <shbot> hsv: 0 31 ' ' '!' '"' '#' 'A' 'B' 'C' 255
[07:09:19] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 256 seconds)
[07:09:43] <tm512> I wonder which, if any, OSes don't provide %s in their date utility, mainly I'm targeting Linux and BSD, fbsd date seems to provide %s but if nbsd or obsd don't, that could make this a problem
[07:10:01] *** luva0 is now known as luva
[07:10:11] <ormaaj> kurahaupo1: section 1.1.2.1 basically says all C syntax is allowed except the , operator isn't required. And [] is not mentioned.
[07:10:45] *** Joins: keypusher (keypusher@user/keypusher)
[07:10:56] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[07:11:33] <kurahaupo1> ormaaj: The "all except" language would appear to mean that POSIX requires $(( ... )) to support arrays even when the rest of the shell doesn't. I doubt that was their intention.
[07:12:00] <tm512> but if linux, BSD, and SysV utilities all provide %s then that basically covers everything I'd want to cover, and SysV is iffy, only really matters if I ever end up running illumos on something
[07:12:06] <kurahaupo1> 'scuse me, rebooting
[07:12:13] *** Quits: kurahaupo1 (~martin@115.69.27.211) (Quit: Leaving.)
[07:13:03] *** Joins: n4dir (~user@mue-88-130-56-143.dsl.tropolys.de)
[07:13:49] <tirnanog> tm512: netbsd and openbsd do.
[07:14:15] *** Quits: maxzor_ (~maxzor@2a01cb04054faa00d0dc83116065976d.ipv6.abo.wanadoo.fr) (Remote host closed the connection)
[07:14:25] *** Joins: kurahaupo1 (~martin@115.69.27.211)
[07:15:05] *** kurahaupo1 is now known as kurahaupo_
[07:18:25] *** Joins: ih8wndz (~ih8wndz@alpha.trunkmasters.com)
[07:20:26] <tm512> tirnanog: illumos date seems to as well, the online man page for date points to strftime for its format specifiers https://illumos.org/man/3C/strftime
[07:21:00] <tm512> so it seems like %s is safe enough
[07:21:57] <tirnanog> yes, I wouldn't lose any sleep over it.
[07:23:30] *** Joins: oarion7 (anonymous@user/oarion7)
[07:23:43] <kurahaupo_> hsv: If you just want to see the symbols, I suggest using \u2400 thru \u2421 for the control codes 0 through 32 and 127 respectively.
[07:24:30] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[07:24:31] <tm512> not sure what a POSIX compliant date would return for unrecognized format specifiers, but with this test using GNU date and putting an incorrect specifier, in this case %Q, it just printed out "Q"
[07:24:54] *** Joins: sgn (~sgn@user/sgn)
[07:25:09] <hsv> kurahaupo_: thanks.  that's useful to know.
[07:25:18] <tm512> which makes it seem like I could test by seeing if the output of date +"%s" is greater than 0
[07:25:52] <tm512> seems like ((a > 0)) returns false if a is not a number
[07:27:06] <kurahaupo_> tm512: "a" can contain an expression that's evaluated. If it's empty or unset, that's treated as 0
[07:27:22] <tirnanog> also, not sh.
[07:27:52] <tirnanog> though it can still be used in $((
[07:28:50] <kurahaupo_> # printf -v map '\\u%04x' {9216..9248} {33..126} 9249 {128..255} ; printf -v map "$map" ; for c in 65 90 0 9 10 13 27 127 ; do printf '%u:%s, ' "$c" "${map[c]}" ; done
[07:28:52] <shbot> kurahaupo_: 65:, 90:, 0:\u2400\u2401\u2402\u2403\u2404\u2405\u2406\u2407\u2408\u2409\u240A\u240B\u240C\u240D\u240E\u240F\u2410\u2411\u2412\u2413\u2414\u2415\u2416\u2417\u2418\u2419\u241A\u241B\u241C\u241D\u241E\u241F\u2420!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2421\u0080\u0081\u0082\u0083\u0084\u0085\u0086\u0087\u0088\u0089\u008A\u008B\u008C\u008D\u008E\
[07:28:52] <shbot> kurahaupo_: \u008F\u0090\u0091\u0092\u0093\u0094\u0095\u0096\u0097\u0098\u0099\u009A\u009B\u009C\u009D\u009E\u009F\u00A0\u00A1\u00A2\u00A3\u00A4\u00A5\u00A6\u00A7\u00A8\u00A9\u00AA\u00AB\u00AC\u00AD\u00AE\u00AF\u00B0\u00B1\u00B2\u00B3\u00B4\u00B5\u00B6\u00B7\u00B8\u00B9\u00BA\u00BB\u00BC\u00BD\u00BE\u00BF\u00C0\u00C1\u00C2\u00C3\u00C4\u00C5\u00C6\u00C7\u00C8\u00C9\u00CA\u00CB\u00CC\u00CD\u00CE\u00CF\u00D0\u00\
[07:28:52] <shbot> kurahaupo_: D1\u00D2\u00D3\u00D4\u00D5\u00D6\u00D7\u00D8\u00D9\u00DA\u00DB\u00DC\u00DD\u00DE\u00DF\u00E0\u00E1\u00E2\u00E3\u00E4\u00E5\u00E6\u00E7\u00E8\u00E9\u00EA\u00EB\u00EC\u00ED\u00EE\u00EF\u00F0\u00F1\u00F2\u00F3\u00F4\u00F5\u00F6\u00F7\u00F8\u00F9\u00FA\u00FB\u00FC\u00FD\u00FE\u00FF, 9:, 10:, 13:, 27:, 127:,
[07:29:06] <kurahaupo_> # printf -v map '\\u%04x' {9216..9248} {33..126} 9249 {128..255} ; printf -v map "$map" ; for c in 65 90 0 9 10 13 27 127 ; do printf '%u:%s, ' "$c" "${map:c:1}" ; done
[07:29:07] <shbot> kurahaupo_: 65:A, 90:\, 0:\, 9:4, 10:0, 13:u, 27:4, 127:u,
[07:29:37] *** Joins: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e)
[07:29:58] <kurahaupo_> # printf '\u0041 is A'
[07:29:59] <shbot> kurahaupo_: A is A
[07:30:39] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[07:33:25] <kurahaupo_> # LC_ALL=C.UTF-8 ; printf -v map '\\u%04x' {9216..9248} {33..126} 9249 {128..255} ; printf -v map "$map" ; for c in 65 90 0 9 10 13 27 127 ; do printf '%u:%s, ' "$c" "${map[c]}" ; done
[07:33:26] <shbot> kurahaupo_: bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8): No such file or directory
[07:33:26] <shbot> kurahaupo_: 65:, 90:, 0:␀␁␂␃␄␅␆␇␈␉␊␋␌␍␎␏␐␑␒␓␔␕␖␗␘␙␚␛␜␝␞␟␠!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~␡ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúû
[07:33:32] <tm512> kurahaupo_: this is what I did to test:
[07:33:49] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 256 seconds)
[07:33:53] <tm512> # (("a" > 0)); echo $?
[07:33:53] <shbot> tm512: 1
[07:33:55] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[07:34:18] <kurahaupo_> # for a in -1 0 1 ; do (("a" > 0)); echo $a $? ; done
[07:34:19] <shbot> kurahaupo_: -1 1
[07:34:19] <shbot> kurahaupo_: 0 1
[07:34:19] <shbot> kurahaupo_: 1 0
[07:34:52] <tm512> oh
[07:35:12] <tm512> I thought it was using the string "a"
[07:35:18] <e36freak> nope
[07:35:21] <e36freak> good old ((
[07:35:22] <tm512> maybe I should use test instead
[07:35:45] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[07:35:47] <Strykar_> # hash jq sed tar curl grep 2>/dev/null || { echo >&2 "Some required utilities are not installed.  **Aborting.**"; exit 20; }
[07:35:48] <shbot> Strykar_: Some required utilities are not installed.  **Aborting.**
[07:35:48] <shbot> Strykar_: logout
[07:35:48] <shbot> Strykar_: (shell exited with 20)
[07:35:59] *** Joins: sgn (~sgn@user/sgn)
[07:37:20] <tm512> # for a in -1 0 1 ; do [ "a" -gt 0 ]; echo $a $? ; done
[07:37:25] <shbot> tm512: bash: [: a: integer expression expected
[07:37:25] <shbot> tm512: -1 2
[07:37:25] <shbot> tm512: etc... ( http://ix.io/3Lbq )
[07:40:01] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Quit: WeeChat 3.4)
[07:40:18] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:40:25] <tm512> doesn't really seem like there's a way to test whether a variable is an integer in the first place?
[07:42:21] *** Quits: zeraphel (~zeraphel@2a00:a040:1a0:fa5::1) (Ping timeout: 268 seconds)
[07:42:24] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[07:43:26] <tirnanog> sh# is_uint() { case $1 in ''|*[!0-9]*) false ;; *) true ;; esac; }; a=foo; is_uint "$a" || echo "nope"
[07:43:27] <shbot> tirnanog: nope
[07:44:09] <tm512> kinda wish I had access to a strictly POSIX compliant date utility, if date +"%s" in POSIX outputs a lone s, I could just use a string comparison, but the chances of this running on something without this extension is so slim it's probably not worth the effort
[07:44:35] *** Joins: zeraphel (~zeraphel@5.29.10.197)
[07:44:36] <tm512> though it'd still be preferable to just not run in the first place on a system like that, rather than run incorrectly
[07:46:47] <tm512> tirnanog: instead of that one liner I might as well just use grep -q
[07:47:25] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[07:47:39] <tirnanog> doing so is a lot more expensive, but sure.
[07:48:44] *** Quits: uuidNuniq (~weechat@193.123.227.17) (Remote host closed the connection)
[07:48:44] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Remote host closed the connection)
[07:49:04] <tirnanog> although, grep -q wouldn't be equivalent.
[07:49:09] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[07:49:16] <tm512> not a huge deal, it wouldn't be run in a loop or anything, just at script startup to ensure the system's date utility has %s, exiting if it doesn't
[07:49:53] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[07:51:09] <tirnanog> # a=$'garbage\n123\n'; printf %s "$a" | grep -qE '^[0-9]+$' && echo "this is just fine"
[07:51:10] <shbot> tirnanog: this is just fine
[07:53:08] <tirnanog> I'm just saying, if you're going to do it, you might as well do it right.
[07:53:55] *** Quits: eht (~eht@user/eht) (Remote host closed the connection)
[07:54:28] *** Quits: zaden_ (~maddx@c-73-92-207-228.hsd1.ca.comcast.net) (Quit: WeeChat 3.5-dev)
[07:55:10] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[07:56:22] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[07:56:57] <tm512> it's exclusively gonna be passed the output of date +"%s" and won't be used as a general "is this a number?" function. might not even need it anyway, if I can just do [ $(date +"%s") = "s" ]
[07:56:57] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Ping timeout: 240 seconds)
[07:57:23] <tm512> gonna see if sbase has a date utility, iirc they're pretty stringent about POSIX compliance
[07:57:24] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[07:57:49] *** Joins: sgn (~sgn@user/sgn)
[07:59:41] <tm512> eh well they use strftime()
[07:59:47] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[08:00:43] <tm512> struggling this much to find a date implementation that doesn't support %s is probably a good enough reason to assume it's supported
[08:04:11] *** Joins: zaden (~maddx@c-73-92-207-228.hsd1.ca.comcast.net)
[08:04:25] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Ping timeout: 256 seconds)
[08:07:32] <tirnanog> yes. in any case, that last test is wrong. the command substitution should be quoted (use shellcheck). also, assuming that it's "s" instead of "%s" is an assumption that might not hold up in practice.
[08:09:22] <tirnanog> put another way, if you do test, don't try to be too clever about it. the goal would be to determine whether the output resembles a seconds-since-epoch value.
[08:11:37] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[08:12:39] <tirnanog> personally, I just use date +%s with a mind to the platforms I intend to support and don't worry about it. I've yet to encounter a platform where it's a problem, though never say never, I suppose.
[08:13:11] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[08:13:55] *** Quits: earnest (~earnest@user/earnestly) (Ping timeout: 256 seconds)
[08:15:41] *** Quits: Gerula (~Gerula@user/gerula) (Read error: Connection reset by peer)
[08:15:44] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[08:16:07] *** Joins: sgn (~sgn@user/sgn)
[08:30:31] *** Joins: Gerula (~Gerula@user/gerula)
[08:31:06] <tm512> date +%s should support basically every platform this game server supports and more, so yeah I should just go with it
[08:33:27] *** Quits: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e) (Remote host closed the connection)
[08:34:36] *** Joins: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e)
[08:39:09] *** Quits: kj (~kj@207-253-44-101.mc.derytele.com) (Read error: Connection reset by peer)
[08:39:25] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[08:40:09] *** Joins: kj (~kj@207-253-44-101.mc.derytele.com)
[08:51:47] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[08:51:47] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[08:52:03] *** Joins: sgn (~sgn@user/sgn)
[08:52:32] *** Quits: skapate (~Skapata@user/skapata) (Remote host closed the connection)
[08:53:16] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[08:53:37] *** Joins: sgn (~sgn@user/sgn)
[08:58:57] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 240 seconds)
[08:59:36] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[09:05:32] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[09:06:01] *** Joins: bluedust (~bluedust@117.241.185.116)
[09:06:37] *** Quits: jihema (~jma@2404:440c:17da:2f00:8ec:4eec:8f39:12c7) (Ping timeout: 240 seconds)
[09:07:21] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[09:07:25] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[09:07:52] *** Joins: sgn (~sgn@user/sgn)
[09:07:59] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[09:08:37] *** Quits: timj (~timj@user/timj) (Ping timeout: 240 seconds)
[09:15:40] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[09:15:54] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[09:16:43] *** Quits: Church (~aleph@pool-98-116-232-112.nycmny.fios.verizon.net) (Ping timeout: 268 seconds)
[09:18:36] *** Joins: Church (~aleph@pool-98-116-232-112.nycmny.fios.verizon.net)
[09:19:51] *** Quits: semigloss (~semigloss@d14-69-6-230.try.wideopenwest.com) (Quit: leaving)
[09:19:58] *** Quits: horner (~horner@host86-131-44-95.range86-131.btcentralplus.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:24:22] *** Joins: timj (~timj@user/timj)
[09:26:07] *** Joins: frostwork (~frostwork@user/frostwork)
[09:26:14] *** Quits: xx (~xx@user/xx) (Remote host closed the connection)
[09:26:58] *** Quits: daniel-k (~daniel-k@fsf/emeritus/daniel-k) (Remote host closed the connection)
[09:27:10] *** Joins: daniel-k (~daniel-k@fsf/emeritus/daniel-k)
[09:28:26] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[09:28:32] *** Joins: sgn_ (~sgn@user/sgn)
[09:29:02] *** Quits: iliv (~iliv@user/iliv) (Ping timeout: 240 seconds)
[09:29:45] *** Joins: xx (~xx@user/xx)
[09:30:01] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:30:25] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[09:31:02] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[09:31:16] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:35:49] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[09:38:29] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Ping timeout: 256 seconds)
[09:39:06] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[09:39:12] *** Joins: slbtty (~slbtty@2607:fea8:1d40:800::f7a7)
[09:39:22] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[09:39:57] *** Quits: chenqisu1 (~bhca7d@183.217.201.21) (Ping timeout: 240 seconds)
[09:39:58] *** Quits: sgn_ (~sgn@user/sgn) (Read error: Connection reset by peer)
[09:40:24] *** Joins: sgn (~sgn@user/sgn)
[09:42:12] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[09:45:38] *** Joins: bluedust_ (~bluedust@81.92.206.10)
[09:49:17] *** Quits: bluedust (~bluedust@117.241.185.116) (Ping timeout: 240 seconds)
[09:53:08] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[09:59:14] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[09:59:37] *** Joins: sgn (~sgn@user/sgn)
[09:59:42] *** Joins: bluedust (~bluedust@117.241.185.116)
[10:00:13] *** Joins: TomyWork (~TomyLobo@p200300e80f0067005896fca49d464985.dip0.t-ipconnect.de)
[10:01:11] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[10:01:17] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[10:01:42] *** Joins: sgn (~sgn@user/sgn)
[10:02:57] *** Quits: bluedust_ (~bluedust@81.92.206.10) (Ping timeout: 240 seconds)
[10:05:33] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Remote host closed the connection)
[10:05:55] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[10:07:48] *** Quits: n4dir (~user@mue-88-130-56-143.dsl.tropolys.de) (Remote host closed the connection)
[10:08:04] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[10:08:20] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[10:09:39] *** Joins: jonthesnow (~xizhendu@36.112.179.225)
[10:09:40] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[10:12:17] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[10:13:21] *** Quits: oarion7 (anonymous@user/oarion7) (Quit: Running IRC on a charmed medieval abacus.)
[10:13:28] *** Quits: mknod (~mknod@user/mknod) (Quit: mknod)
[10:18:57] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[10:19:23] *** Joins: sgn (~sgn@user/sgn)
[10:21:31] *** Quits: mixfix41 (~homefame@user/mixfix41) (Quit: quittin')
[10:22:18] *** Joins: maxzor (~maxzor@2a01cb04054faa00d560f53416b9f260.ipv6.abo.wanadoo.fr)
[10:22:18] *** Quits: xcm_ (~xcm@static.90.45.69.159.clients.your-server.de) (Remote host closed the connection)
[10:22:35] *** Joins: xcm_ (~xcm@user/xcm)
[10:28:05] *** Quits: NoelFlantier3 (~Hubert@static.238.157.9.5.clients.your-server.de) (Remote host closed the connection)
[10:28:25] *** Joins: NoelFlantier3 (~Hubert@static.238.157.9.5.clients.your-server.de)
[10:30:00] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[10:38:17] *** Joins: sublim20 (~sublim20@user/sublim20)
[10:40:07] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[10:41:39] *** Quits: Atque (~Atque@user/atque) (Ping timeout: 276 seconds)
[10:47:32] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[10:47:49] *** Quits: sinaowolabi__ (~SinaOwola@102.134.114.1) (Ping timeout: 240 seconds)
[10:47:52] *** Joins: sgn (~sgn@user/sgn)
[10:47:55] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[10:48:11] *** Quits: sinaowolabi (~SinaOwola@169.159.67.85) (Ping timeout: 256 seconds)
[10:48:21] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[10:48:23] *** Quits: maxzor (~maxzor@2a01cb04054faa00d560f53416b9f260.ipv6.abo.wanadoo.fr) (Remote host closed the connection)
[10:49:00] *** Joins: Atque (~Atque@user/atque)
[10:49:37] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[10:50:03] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[10:50:30] *** Joins: sgn (~sgn@user/sgn)
[10:55:36] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[10:55:51] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[10:57:58] *** Joins: rendar (~rendar@user/rendar)
[10:59:59] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[11:00:05] *** Quits: jonthesnow (~xizhendu@36.112.179.225) (Ping timeout: 256 seconds)
[11:00:14] *** Joins: unop (~unop@194.154.249.71)
[11:00:17] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Ping timeout: 240 seconds)
[11:04:29] *** Quits: A|an (~Alan@173.218.175.171) (Ping timeout: 256 seconds)
[11:04:36] *** Quits: fluter (~fluter@user/fluter) (Read error: Connection reset by peer)
[11:06:33] *** Joins: fluter (~fluter@user/fluter)
[11:06:50] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[11:07:12] *** Joins: sgn (~sgn@user/sgn)
[11:07:45] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[11:09:19] *** Joins: dsrt^ (~dsrt@207.5.21.20)
[11:10:15] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[11:10:30] *** Joins: sgn (~sgn@user/sgn)
[11:15:00] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[11:15:37] *** Joins: unop (~unop@194.154.249.71)
[11:16:05] *** Joins: martinus__ (~martin@171.25.202.77.rev.sfr.net)
[11:16:51] *** Joins: tobybl (~tobybl@237.202.200.146.dyn.plus.net)
[11:17:24] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[11:22:37] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Ping timeout: 240 seconds)
[11:30:55] *** Joins: uuidNuni1 (~weechat@193.123.227.17)
[11:35:20] *** Joins: han-solo (~hanish@user/han-solo)
[11:36:36] *** Joins: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr)
[11:36:51] *** Joins: n4dir (~user@mue-88-130-56-143.dsl.tropolys.de)
[11:37:50] *** Quits: pj (~pj@ghettoforge/pj) (Remote host closed the connection)
[11:38:19] *** Quits: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e) (Remote host closed the connection)
[11:38:51] *** Joins: pj (~pj@ghettoforge/pj)
[11:39:21] *** Joins: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e)
[11:39:56] *** Quits: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr) (Remote host closed the connection)
[11:40:43] *** Joins: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr)
[11:44:02] *** Joins: Guest36_ (~textual@103.104.171.53)
[11:44:19] *** Quits: jinsun (~quassel@user/jinsun) (Read error: Connection reset by peer)
[11:45:29] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[11:45:39] *** Joins: jinsun (~quassel@user/jinsun)
[11:45:53] *** Joins: sgn (~sgn@user/sgn)
[11:47:53] *** Joins: MajorBiscuit (~MajorBisc@c-001-007-050.client.tudelft.eduvpn.nl)
[11:49:39] *** ElChayo[m] is now known as ElChayo[m]1
[11:53:42] *** Joins: iliv (~iliv@93-77-147-152.lvv.volia.net)
[11:53:42] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[11:53:42] *** Joins: iliv (~iliv@user/iliv)
[11:59:29] *** Quits: EnchanterTim (~Hash@hashsecurity.org) (Quit: https://hashsecurity.org)
[12:00:35] *** Joins: Hash (~Hash@hashsecurity.org)
[12:01:33] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:01:58] *** Joins: sgn (~sgn@user/sgn)
[12:03:47] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:04:13] *** Joins: sgn (~sgn@user/sgn)
[12:04:20] *** Quits: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:05:35] *** Quits: Hash (~Hash@hashsecurity.org) (Max SendQ exceeded)
[12:06:14] *** Joins: Hash (~Hash@hashsecurity.org)
[12:08:04] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:08:24] *** Joins: sgn (~sgn@user/sgn)
[12:09:27] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[12:10:17] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:10:40] *** Joins: sgn (~sgn@user/sgn)
[12:10:57] *** Quits: dermoth (~dermoth@user/dermoth) (Ping timeout: 240 seconds)
[12:11:42] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[12:11:43] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:11:56] *** Joins: sgn (~sgn@user/sgn)
[12:14:17] *** Joins: Dima[m] (~reddima10@2001:470:69fc:105::366)
[12:15:53] *** Joins: docmax_ (~docmax@dynamic-077-006-156-198.77.6.pool.telefonica.de)
[12:17:36] *** Joins: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e)
[12:18:43] *** Quits: docmax (~docmax@dynamic-077-006-169-110.77.6.pool.telefonica.de) (Ping timeout: 256 seconds)
[12:19:33] *** Joins: chenqisu1 (~bhca7d@183.217.201.21)
[12:21:36] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:21:42] *** Quits: OlCe (~user@lfbn-nic-1-122-111.w2-15.abo.wanadoo.fr) (Read error: Connection reset by peer)
[12:21:42] *** Quits: MajorBiscuit (~MajorBisc@c-001-007-050.client.tudelft.eduvpn.nl) (Ping timeout: 268 seconds)
[12:22:02] *** Joins: sgn (~sgn@user/sgn)
[12:22:37] *** Joins: MajorBiscuit (~MajorBisc@c-001-007-050.client.tudelft.eduvpn.nl)
[12:22:41] <sunyibo> I'm using cp -r to copy a directory. But the copy is incomplete, as in not all files and directories are copied. What can I do?
[12:23:35] *** Joins: dermoth (~dermoth@user/dermoth)
[12:24:01] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:24:26] *** Joins: sgn (~sgn@user/sgn)
[12:27:58] *** Joins: tex (~super@user/dix)
[12:31:11] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Ping timeout: 256 seconds)
[12:32:04] *** Joins: carl- (~carl-@185.103.188.130)
[12:33:17] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:33:35] *** Joins: sgn (~sgn@user/sgn)
[12:33:48] *** Quits: jaskal (~jaskal@user/jaskal) (Quit: leaving)
[12:34:16] *** Quits: Strom (strom@fedora/strom) ()
[12:35:20] *** Joins: jaskal (~jaskal@user/jaskal)
[12:36:19] *** Joins: Strom (strom@fedora/strom)
[12:36:31] *** Joins: sdu (~sidu@185.44.146.61)
[12:36:34] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[12:37:02] *** MrA is now known as Ders
[12:37:09] *** Quits: Ders (MrA@2602:ff75:7:3ccc::20) (Changing host)
[12:37:09] *** Joins: Ders (MrA@user/ders)
[12:37:14] *** Joins: stonkey (~stonkey@user/stonkey)
[12:39:38] *** Quits: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:43:44] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.4)
[12:44:15] <tm512> anyone know if gzip can read from a pipe and stream compressed data to a file? specifically, I want gzip and the pipe to stay open and not close after a single echo or cat to the pipe, in the past I've used something like tail -f inpipe > tailout &
[12:44:20] <tm512> where tailout is another pipe
[12:45:07] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:45:18] <tm512> and then I use tailout as the input to whatever application. I used something like this for a simple shell IRC bot years ago
[12:45:20] *** Joins: sgn (~sgn@user/sgn)
[12:45:35] <tm512> but with gzip, it doesn't seem like it actually writes compressed data
[12:45:39] *** Quits: n4dir (~user@mue-88-130-56-143.dsl.tropolys.de) (Remote host closed the connection)
[12:46:03] <tm512> sunyibo: you could use rsync to copy files. not sure what would be going on with cp -r though
[12:46:31] <tirnanog> an example of what appears to be missing might be useful.
[12:47:42] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[12:48:05] *** Joins: sgn (~sgn@user/sgn)
[12:50:32] *** Joins: iomari891 (~iomari891@105.112.138.38)
[12:52:18] <tm512> it seems like this tail -f inpipe | gzip -c > out.gz only ends up writing data after a certain amount gets compressed :/ not sure if I can change that behavior
[12:52:34] <tm512> if it doesn't get that certain amount of data, it doesn't seem to write anything even upon closing
[12:52:59] *** Joins: mozgalom (~mozgalom@194.144.47.113)
[12:53:00] <tm512> also I made the mistake of doing head -n4096 /dev/zero to pull test data for the compression
[12:53:10] *** Joins: tobybl_ (~tobybl@237.202.200.146.dyn.plus.net)
[12:53:30] *** Joins: OlCe (~user@lfbn-nic-1-122-111.w2-15.abo.wanadoo.fr)
[12:53:55] <tm512> head -c4096 /dev/zero was what I wanted, wouldn't have caused my computer to slow to a crawl because of swapping, lol
[12:54:57] *** Quits: tobybl (~tobybl@237.202.200.146.dyn.plus.net) (Ping timeout: 240 seconds)
[12:56:17] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Quit: = "")
[12:57:03] <tm512> basically the idea I had was to tell this server to use this named pipe as its log file, and I wanted to have gzip reading from that named pipe and writing out the compressed log. doesn't really seem possible though
[12:57:29] *** Joins: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net)
[13:01:35] *** Joins: sgn_ (~sgn@user/sgn)
[13:01:36] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[13:02:00] <tm512> after I accrue a decent amount of log data, maybe I'll build a Zstd dictionary out of it and write a script that goes through and compresses all log files written since the last compression pass. it's not like there will be enough log data to really warrant it but with utilities like zless or in this case zstdless, seems like the compression will be fairly transparent so it's a case of "why not?"
[13:02:55] *** Quits: sgn_ (~sgn@user/sgn) (Read error: Connection reset by peer)
[13:03:08] *** Joins: sgn (~sgn@user/sgn)
[13:03:13] *** Joins: seninha (~seninha@user/seninha)
[13:08:41] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[13:10:59] *** Parts: Delf (Delf@user/delf) ()
[13:12:13] *** Parts: Dima[m] (~reddima10@2001:470:69fc:105::366) ()
[13:13:05] *** Joins: kspalaiologos (~kspalaiol@user/kspalaiologos)
[13:14:48] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[13:15:02] *** Joins: sgn (~sgn@user/sgn)
[13:17:23] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[13:21:47] *** Joins: situ (~situ@ip-89-176-145-74.net.upcbroadband.cz)
[13:24:08] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[13:25:49] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Remote host closed the connection)
[13:26:11] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[13:26:37] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Remote host closed the connection)
[13:27:13] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[13:31:24] *** Quits: unixman_home (~unixman2@62-199-137-216.mtaonline.net) (Remote host closed the connection)
[13:32:47] *** Joins: unixman_home (~unixman2@62-199-137-216.mtaonline.net)
[13:38:20] *** Joins: mihaiadrian (~Thunderbi@82.76.223.244)
[13:38:21] *** Joins: Rue_ (~rue@61-231-132-126.dynamic-ip.hinet.net)
[13:40:54] <mihaiadrian> i have a file that always start with a hashtag
[13:40:57] <mihaiadrian> like
[13:41:03] <mihaiadrian> #asd
[13:41:03] <mihaiadrian> b
[13:41:03] <mihaiadrian> c
[13:41:03] <mihaiadrian> d
[13:41:24] <mihaiadrian> i want to add another hashtag after #asd, how can i do that?
[13:41:30] <mihaiadrian> like #asd #added_hasthag
[13:43:15] *** Quits: kyr (~kyr@167.71.50.12) (Quit: Lost terminal)
[13:43:38] *** Joins: kyr (~kyr@167.71.50.12)
[13:45:04] *** Joins: taupiqueur (~taupiqueu@63.144.204.77.rev.sfr.net)
[13:50:09] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Ping timeout: 276 seconds)
[13:51:01] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[13:51:14] *** Joins: sgn (~sgn@user/sgn)
[13:51:23] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[13:52:01] *** Joins: legola (~legola@46.235.100.54)
[13:54:07] <tm512> mihaiadrian: you can rename a file using the mv command
[13:54:40] <lopid> with a… with a "hashtag"?
[13:55:44] <tm512> kinda scary how many people pretty much exclusively know # as a "hashtag", heh
[13:56:43] <grawity> well
[13:56:57] <grawity> it sounds like they were referring to the whole '#asd' as the "hashtag"
[13:57:16] <tm512> ah true
[13:57:16] <grawity> which makes a lot of sense given that's what "hashtag" means
[13:57:21] *** Joins: shad (~shad@user/shad)
[13:58:39] <tm512> hmm so in POSIX shell does anyone know whether or not arithmetic statements/commands can exist on their own?, like the equivalent to:
[13:58:39] <grawity> I'd probably do something like `head=${name%% *}; tail=${name#* }; mv "$name" "$head #added_hashtag $tail"`
[13:58:51] <tm512> # test=0; ((test+=1); echo $test
[13:58:58] <shbot> tm512: Missing terminating quote, bracket or keyword
[13:59:04] <tm512> # test=0; ((test+=1)); echo $test
[13:59:05] <shbot> tm512: 1
[13:59:15] *** Joins: earnest (~earnest@user/earnestly)
[13:59:16] *** Joins: drd (~drd@host-79-53-116-35.retail.telecomitalia.it)
[13:59:28] <tm512> almquist shell gives sh: test+=1: not found
[14:00:29] <Soliton> (( is not posix if that's the question.
[14:00:33] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[14:00:47] <grawity> hmm dash does not have `let` either
[14:00:52] <Soliton> test=$((test + 1))
[14:01:10] <grawity> : $((test+=1))
[14:01:26] <Soliton> i don't think that is posix either.
[14:01:36] <tm512> Soliton: well yeah that's one way to do it, was wondering if there's anything more concise, but if not no biggie
[14:02:08] *** Joins: Lord_of_Life_ (~Lord@user/lord-of-life/x-2819915)
[14:02:37] <tm512> : exists in ash at least
[14:02:44] <tm512> lemme try ksh as well
[14:02:45] <Soliton> if conciseness is your worry in posix sh you're quite lucky.
[14:02:48] <emanuele6> printf '%s\n' '1s/^#.*/& #added_hashtag/' wq | ed -s file 2>/dev/null
[14:02:54] <emanuele6> s/2//
[14:03:33] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 256 seconds)
[14:03:33] *** Lord_of_Life_ is now known as Lord_of_Life
[14:03:45] <grawity> I've seen : used as a placeholder dummy command to evaluate parameters like `: ${foo:=default}`
[14:04:10] <tm512> : is basically the same thing as "true" isn't it? I've only ever seen it used as while :; do ... done
[14:04:21] <grawity> yes
[14:04:28] <Soliton> !:
[14:04:28] <greybot> : is a builtin identical to the 'true' builtin; they do nothing and have an exit status of 0
[14:04:55] <tm512> even if it's not posix, it exists in both ash and ksh
[14:05:10] <Soliton> https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_04  looks like += is posix.
[14:05:11] <grawity> I *think* I remember reading that it was used to implement goto-labels in pre-bourne shells
[14:05:14] <emanuele6> : "$((i += 1))"  is not posix
[14:05:27] <emanuele6> : "$((i = i + 1))"   is posix
[14:06:11] <Soliton> i see no exception for += mentioned in the above link.
[14:06:34] <emanuele6> i am wrong then
[14:07:06] <emanuele6> POSIX does not allow `++i', but it does allow `i += 1'
[14:07:16] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[14:08:44] <Soliton> s/allow/require/
[14:09:09] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[14:09:32] *** Joins: sgn (~sgn@user/sgn)
[14:12:22] <tm512> and fwiw it seems like : is POSIX
[14:12:51] <Soliton> yes.
[14:13:54] <Soliton> i don't find that : use more readable personally. maybe if you have insanely long variable names.
[14:17:38] <tm512> I mean, ((var += 1)) would be perfectly readable, I don't think adding a : $ before it makes it less readable really
[14:17:55] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[14:18:37] *** Quits: jinsun (~quassel@user/jinsun) (Ping timeout: 240 seconds)
[14:19:44] *** Joins: horner (~horner@host86-131-44-95.range86-131.btcentralplus.com)
[14:20:10] *** Joins: jinsun (~quassel@user/jinsun)
[14:21:39] <earnest> tm512: : is POSIX indeed, was apparently used for adding comments prior to #
[14:21:55] <earnest> tm512: (# used to be erase characters and such, before backspace would make visible changes)
[14:22:05] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[14:22:20] *** Joins: unop (~unop@194.154.249.71)
[14:23:15] <earnest> tm512: (( isn't POSIX though, so the more readable approach is var=$((var + 1)).  Be careful with $((/(( under bash as it allows for arbitrary code evaluation, and so user input can be a problem
[14:24:55] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[14:25:20] *** Joins: sgn (~sgn@user/sgn)
[14:25:54] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[14:26:09] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[14:26:10] *** Quits: bluedust (~bluedust@117.241.185.116) (Remote host closed the connection)
[14:26:37] *** Joins: x88x88x (~x88x88x@2001:19f0:5:39a8:5400:3ff:feb6:73cb)
[14:27:44] <tm512> this is what I have, afaik it's POSIX and I think it's readable enough https://www.toptal.com/developers/hastebin/raw/gikiwaqoxu
[14:28:37] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[14:28:52] <earnest> tm512: -a is not short-circuiting, if you want that use [ .. ] && [ .. ] ..
[14:28:55] <Soliton> !test-a
[14:28:55] <greybot> The classic test command's -a and -o operators, as well as controlling precedence using ( and ) cause many problems and ambiguities, are not portable, and are unsafe with user input. They are all marked as obsolescent by POSIX. If coding for Bash, Ksh, or Zsh, [[ is *highly* preferred over [. See: http://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html#tag_20_128_16
[14:29:09] *** Quits: chenqisu1 (~bhca7d@183.217.201.21) (Read error: Connection reset by peer)
[14:30:00] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[14:30:01] <earnest> tm512: Under POSIX sh you still have to think about quoting inside [ (the quoting of "TERM" isn't necessary, TERM is already a string).  Tricks involving : seem to gain you little but is fine
[14:30:15] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[14:30:51] *** Joins: chenqisu1 (~bhca7d@183.217.201.21)
[14:31:27] <earnest> But otherwise this is all valid posix, do quote expansions though, even if you think it's not needed
[14:31:34] *** Joins: n4dir (~user@mue-88-130-56-143.dsl.tropolys.de)
[14:31:38] <earnest> shellcheck should warn you about this
[14:32:58] <tm512> it doesn't really matter if the second statement after the -a is evaluated, there's no state being modified or anything, and this should be infrequent enough that there's not like a CPU usage advantage of ensuring the statement short-circuits
[14:33:07] *** Quits: tejr (~tejr@user/tejr) (Remote host closed the connection)
[14:33:39] <earnest> tm512: It's just unnecessary work
[14:33:40] *** Joins: tejr (~tejr@user/tejr)
[14:33:55] <earnest> (And a logic pitfall waiting to be forgotten)
[14:34:33] <tm512> but yeah I should definitely quote the output of kill, in case it errors on some system and returns nothing on stdin
[14:34:57] <tm512> or something like that
[14:36:09] *** Joins: bluedust (~bluedust@117.241.185.116)
[14:36:16] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[14:36:25] <earnest> tm512: Remember that everything is already a string, quoting (") is just a mechanism to group discrete strings into a single string and suppress both wordsplitting and glob expansion (in contexts where such things occur)
[14:36:48] <tm512> as for quoting "TERM", stuff like that is just a habit, less concise but it makes it clear exactly what it is at a glance
[14:36:51] <earnest> (' and \ are the same but also suppress shell syntax)
[14:37:19] <earnest> tm512: I think this is just a mindset left over from programming language use.  I used to do the same thing and it is harmless
[14:38:37] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[14:38:37] *** Quits: chenqisu1 (~bhca7d@183.217.201.21) (Remote host closed the connection)
[14:38:38] <earnest> But if you want to program via habit, then a good habit is to quote expansions regardless of what they are
[14:39:01] *** Joins: chenqisu1 (~bhca7d@183.217.201.21)
[14:39:17] *** Joins: unop (~unop@194.154.249.71)
[14:39:24] *** Quits: chenqisu1 (~bhca7d@183.217.201.21) (Max SendQ exceeded)
[14:39:52] *** Joins: chenqisu1 (~bhca7d@183.217.201.21)
[14:41:06] *** Joins: thiras (~thiras@user/thiras)
[14:45:24] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[14:50:17] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[14:52:19] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[14:57:45] *** Joins: razend (~razend@94.200.42.14)
[14:57:49] <razend> Do you guys use any tools like Termius to manage SSH connections for multiple hosts?
[14:58:13] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[14:58:37] *** Quits: MajorBiscuit (~MajorBisc@c-001-007-050.client.tudelft.eduvpn.nl) (Ping timeout: 240 seconds)
[14:59:39] *** Quits: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net) (Ping timeout: 256 seconds)
[15:04:10] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[15:04:11] *** Quits: bluedust (~bluedust@117.241.185.116) (Remote host closed the connection)
[15:04:33] *** Joins: sgn (~sgn@user/sgn)
[15:06:51] *** Joins: puchu (~puchu@user/puchu)
[15:06:55] *** Quits: slbtty (~slbtty@2607:fea8:1d40:800::f7a7) (Quit: Konversation terminated!)
[15:06:56] <puchu> hi
[15:07:20] <puchu> i'd like to execute a command in a bash array but some options have space
[15:07:23] <puchu> my_array=(script  -o 'output path' url)
[15:07:32] <puchu> like the 'output path'
[15:08:02] <puchu> how can i make sure that the 'output path' is forwarded in the right way to the command when i run it with
[15:08:12] <puchu> ${my_array[@]}
[15:09:30] <puchu> in the current way it will get started with - script -o output path url - which is not correct is output path should be in "" or ''
[15:10:18] *** Joins: zeden (~zeden@user/zeden)
[15:12:01] <Soliton> "${my_array[@]}"
[15:12:13] <Soliton> !quotes
[15:12:13] <greybot> https://mywiki.wooledge.org/Quotes
[15:13:17] *** Quits: carl- (~carl-@185.103.188.130) (Ping timeout: 240 seconds)
[15:13:45] <puchu> Soliton thank you very much
[15:14:45] *** Joins: sublim20 (~sublim20@user/sublim20)
[15:17:01] *** Quits: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823) (Ping timeout: 240 seconds)
[15:17:47] *** Joins: flipchan (~filip@user/flipchan)
[15:18:46] <flipchan> does anyone have any good way to check versions like "1.x.x" format in bash>
[15:18:50] <flipchan> ?'
[15:20:03] <Soliton> [[ $version = 1.*.* ]]
[15:20:24] *** Quits: unixman_home (~unixman2@62-199-137-216.mtaonline.net) (Remote host closed the connection)
[15:21:08] *** Joins: unixman_home (~unixman2@62-199-137-216.mtaonline.net)
[15:21:18] <heiner_> flipchan: check for syntactical correctness, or compare versions?
[15:21:24] *** Joins: cdown (~cdown@188.214.11.14)
[15:23:08] *** Quits: igemnace (~ian@user/igemnace) (Remote host closed the connection)
[15:23:27] *** Joins: MajorBiscuit (~MajorBisc@c-001-007-050.client.tudelft.eduvpn.nl)
[15:25:27] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[15:25:32] *** Quits: geirha (~geirha@user/geirha) (Quit: WeeChat 2.8)
[15:25:50] *** Joins: sgn (~sgn@user/sgn)
[15:26:49] *** Joins: geirha (~geirha@user/geirha)
[15:27:06] *** Quits: kspalaiologos (~kspalaiol@user/kspalaiologos) (Quit: Leaving)
[15:29:28] *** Joins: igemnace (~ian@user/igemnace)
[15:33:40] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[15:36:53] *** Joins: roadie (~user@2a02:8108:ec0:1427:818d:b4d3:fe79:3823)
[15:37:13] *** Joins: rufito (~phil@186.11.112.244)
[15:38:34] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[15:38:57] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 240 seconds)
[15:39:20] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[15:39:41] *** Joins: sgn (~sgn@user/sgn)
[15:42:50] *** Quits: _val__ (~valentin@82-169-14-137.biz.kpn.net) (Quit: leaving)
[15:43:36] *** Joins: _val_ (~valentin@82-169-14-137.biz.kpn.net)
[15:43:44] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[15:44:08] *** Joins: sgn (~sgn@user/sgn)
[15:46:09] *** Quits: _val_ (~valentin@82-169-14-137.biz.kpn.net) (Client Quit)
[15:48:35] *** Joins: _val_ (~valentin@82-169-14-137.biz.kpn.net)
[15:48:53] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[15:50:46] *** Quits: tejr (~tejr@user/tejr) (Remote host closed the connection)
[15:51:02] *** Joins: tejr (~tejr@user/tejr)
[15:51:24] *** Joins: betuxy (~betuxy@p579ad46c.dip0.t-ipconnect.de)
[15:54:54] *** Quits: obvs (~peteh@140.238.195.238) (Changing host)
[15:54:54] *** Joins: obvs (~peteh@user/PeteH)
[15:55:10] *** Joins: skraito (~skraito@user/skraito)
[15:55:26] *** Quits: skraito (~skraito@user/skraito) (K-Lined)
[15:55:35] <betuxy> Hey guys i have a very long list i want to format. there are list items (marked by the dash) but they're not all seperated by a newline how would i do this? my attempt:  sed 's/^.+$\\n  - servername/^$\\n  - servername/'  example: https://termbin.com/h3wi
[15:56:02] <betuxy> whoops paste got lost: https://termbin.com/uwos
[15:57:04] <earnest> betuxy: You want to double space the input?
[15:57:28] <earnest> (All of them are separated by a newline in your paste)
[15:58:23] <betuxy> yeah, to look like this: https://termbin.com/qtjc
[16:02:01] <earnest> betuxy: Is it really just a file full of '- servername' or is there additional data?
[16:02:27] <earnest> Because the literal answer is very trivial, in fact quite famous, but I don't think it'll help you
[16:02:37] <betuxy> theres additional data in it, its a yaml file
[16:02:56] <earnest> Use a yaml parser
[16:03:06] <earnest> (and formatter)
[16:04:23] <earnest> I'm sure there exists yaml pretty printers and the such, don't try to do this with sed, awk, etc.
[16:04:26] *** Joins: MrBlue (~MrBlue@24.114.87.158)
[16:04:54] *** Joins: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net)
[16:05:23] <betuxy> but, just out of curiosity, shouldnt it be possible to for (eg.) sed to check if the line above is clear and if not insert a newline?
[16:05:34] *** Joins: MrBlue_ (~MrBlue@37.120.205.253)
[16:05:58] *** Quits: igemnace (~ian@user/igemnace) (Quit: WeeChat 3.4)
[16:09:21] *** Quits: MrBlue (~MrBlue@24.114.87.158) (Ping timeout: 256 seconds)
[16:10:16] <earnest> Sure, but not using the same logic
[16:10:21] *** Joins: sinaowolabi (~SinaOwola@169.159.67.85)
[16:10:45] *** Quits: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr) (Remote host closed the connection)
[16:11:45] <earnest> betuxy: If you want to learn more about sed, see https://www.grymoire.com/Unix/Sed.html
[16:13:02] *** Joins: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr)
[16:15:25] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 240 seconds)
[16:15:38] *** MrBlue_ is now known as MrBlue
[16:16:01] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:e050:482e:d5a8:4b1b)
[16:16:02] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:e050:482e:d5a8:4b1b) (Changing host)
[16:16:02] *** Joins: skapata (~Skapata@user/skapata)
[16:19:46] *** Joins: Trieste (~T@user/pilgrim)
[16:20:05] *** Joins: cdown_ (~cdown@163.114.131.1)
[16:21:06] *** Joins: uuidNuni2 (~weechat@146.56.136.247)
[16:22:23] <Soliton> sed is a stream editor. unless you told it to store the previous line it's gone.
[16:22:37] *** Quits: cdown (~cdown@188.214.11.14) (Ping timeout: 240 seconds)
[16:22:40] *** cdown_ is now known as cdown
[16:23:24] *** Joins: DaNeenjah (~jake@adsl-74-230-4-35.hsv.bellsouth.net)
[16:23:39] <Soliton> if you're actually working with a file you could use a file editor. but something that understands yaml is certainly preferable.
[16:24:05] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Ping timeout: 256 seconds)
[16:24:32] *** Joins: Trieste_ (T@user/pilgrim)
[16:25:17] *** Quits: Trieste (~T@user/pilgrim) (Ping timeout: 240 seconds)
[16:26:55] *** Joins: sinaowolabi__ (~SinaOwola@102.134.114.1)
[16:27:56] *** Trieste_ is now known as Trieste
[16:27:58] *** Joins: bluedust (~bluedust@117.241.185.116)
[16:28:02] <betuxy> alright ill keep looking
[16:28:11] *** Quits: chenqisu1 (~bhca7d@183.217.201.21) (Ping timeout: 256 seconds)
[16:28:51] *** Quits: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp) (Quit: leaving)
[16:28:56] <Soliton> there's yq
[16:29:11] *** Quits: taupiqueur (~taupiqueu@63.144.204.77.rev.sfr.net) (Ping timeout: 256 seconds)
[16:30:30] *** Joins: carl- (~carl-@185.103.188.130)
[16:34:01] *** Quits: n4dir (~user@mue-88-130-56-143.dsl.tropolys.de) (Remote host closed the connection)
[16:44:02] *** Quits: sinaowolabi__ (~SinaOwola@102.134.114.1) (Read error: No route to host)
[16:45:20] *** Joins: sinaowolabi__ (~SinaOwola@102.134.114.1)
[16:47:42] *** Joins: Intelo (~Intelo@88.246.79.32)
[16:47:44] <Intelo> HI
[16:47:45] <Intelo> I want to replace `const CAbc` with `const Cabc`. ie, the 'A' is the second char after 'C' and I want to make it lowerCase. How can I do it project wide for all files?  `A` and remaining chars can by any dynamic ones (changing) but `const C` part will not change
[16:54:33] *** Joins: gabriele (~gabriele@user/gabriele)
[16:56:52] *** Quits: a_west (~a_west@2a01:4f9:c010:5c49::1) (Quit: Bye!)
[16:58:20] *** Joins: a_west (~a_west@2a01:4f9:c010:5c49::1)
[16:58:26] *** Quits: chiselfuse (~chiselfus@user/chiselfuse) (Remote host closed the connection)
[16:58:39] *** Joins: chiselfuse (~chiselfus@user/chiselfuse)
[16:59:03] *** Joins: sokle_68 (~sokle_68@ppp046176026218.access.hol.gr)
[16:59:33] *** Joins: furrymcgee (~devuan@cgn-89-1-208-247.nc.de)
[17:00:15] *** Joins: MrBlue_ (~MrBlue@37.120.205.254)
[17:00:17] *** Quits: MrBlue (~MrBlue@37.120.205.253) (Ping timeout: 240 seconds)
[17:01:29] *** Quits: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net) (Ping timeout: 256 seconds)
[17:02:41] <clemens3> find, pipes, while read file do, sed or perl
[17:02:59] *** Quits: puchu (~puchu@user/puchu) (Quit: leaving)
[17:03:08] <emanuele6> i'd use something like:  find -name CMakeLists.txt -type f -exec vim -E -s -c 'argdo g/if/s//SAS/g | x' -- {} +
[17:04:40] *** Quits: betuxy (~betuxy@p579ad46c.dip0.t-ipconnect.de) (Quit: Connection closed)
[17:05:17] *** Quits: Tabmow (~tabmow@user/tabmow) (Ping timeout: 240 seconds)
[17:06:44] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[17:06:50] <emanuele6> in your case something like: g/\(const\s*\)\([[:upper:]]\)\([[:upper:]]\)/s//\1\2\l\3/g
[17:07:51] *** Quits: sahilister (~sahiliste@user/sahilister) (Quit: The Lounge - https://thelounge.chat)
[17:08:07] *** Joins: Blank_ (~Blank@95-29-167-197.broadband.corbina.ru)
[17:08:15] *** Quits: potamides (~amnifiliu@2003:a:270f:c400:28d8:e046:7d92:3970) (Quit: WeeChat 3.4)
[17:08:41] <Blank_> hello
[17:08:49] <Blank_> can someone tell me whats wrong with this PS12
[17:08:52] <Blank_> PS1
[17:08:53] <Blank_> PS1='\[\033[01;31m\]\u@$THEIP1\[\033[00m\]:\[\033[01;34m\]\w\[\033[01;34m\]#\033[00m\] '
[17:09:48] *** Joins: sahilister (~sahiliste@static.62.225.203.116.clients.your-server.de)
[17:11:32] <Blank_> it starts to look broken when there's more than 1 line of input
[17:11:41] <Soliton> !faq fancy
[17:11:41] <greybot> https://mywiki.wooledge.org/BashFAQ/053 -- I have a fancy prompt with colors, and now bash doesn't seem to know how wide my terminal is.  Lines wrap around incorrectly.
[17:13:02] <Blank_> thank
[17:13:06] <Soliton> perhaps PS1='\[\033[01;31m\]\u@$THEIP1\[\033[00m\]:\[\033[01;34m\]\w\[\033[01;34m\]#\[\033[00m\] '
[17:14:49] <Soliton> you can use \e instead of \033, btw.
[17:18:42] <CrtxReavr> This is my prompt setup - semi-fancy, but visually assistive.: https://bpa.st/5R2Q
[17:18:59] <Blank_> Soliton, that 1 works, thk
[17:19:11] <Blank_> so something like PS1='\[\e[01;31m\]\u@$THEIP1\[\e[00m\]:\[\e[01;34m\]\w\[\e[01;34m\]#\[\e[00m\] '
[17:19:12] <emanuele6> (correction: \s\+ instead of just \s* in my previous vim command; just in case)
[17:20:01] *** Joins: UrsoBranco (~UrsoBranc@200-244-170-200.moratec.net.br)
[17:20:05] *** Joins: bluedust_ (~bluedust@117.241.191.1)
[17:20:34] <Soliton> !$" > CrtxReavr
[17:20:34] <greybot> CrtxReavr: Bash supports $"..." quoting syntax for locale-specific translation. If the current locale is C or POSIX, the dollar sign is ignored. If the string is translated and replaced, the replacement is double-quoted. See http://mywiki.wooledge.org/BashFAQ/098
[17:20:47] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[17:21:05] <Soliton> you probably meant to use $''.
[17:21:06] *** Parts: sokle_68 (~sokle_68@ppp046176026218.access.hol.gr) ()
[17:22:14] *** Joins: Hackerpcs (~user@user/hackerpcs)
[17:22:27] *** Quits: bluedust (~bluedust@117.241.185.116) (Ping timeout: 256 seconds)
[17:23:06] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[17:23:54] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[17:25:21] *** Quits: stevenm_ (~stevenm@stevenm.keele.netcentral.co.uk) (Changing host)
[17:25:21] *** Joins: stevenm_ (~stevenm@user/stevenm)
[17:26:08] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Remote host closed the connection)
[17:28:29] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[17:29:58] *** Joins: katsuragi (katsuragi@tilde.institute)
[17:31:14] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Remote host closed the connection)
[17:31:39] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[17:33:22] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Remote host closed the connection)
[17:34:08] *** Quits: bluedust_ (~bluedust@117.241.191.1) (Remote host closed the connection)
[17:34:15] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[17:34:55] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Remote host closed the connection)
[17:35:33] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:36:14] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[17:37:45] *** Quits: roadt_ (~roadt@36.5.93.21) (Ping timeout: 256 seconds)
[17:40:23] *** Joins: semigloss (~semigloss@d14-69-6-230.try.wideopenwest.com)
[17:40:30] <kurahaupo> Blank: One can also omit the leading 0's within each ECMA-48 sequence; \[\e[1;34m\] or \[\e[m\]. The \[\e[01;34m\] immediately after \w is pointless because it doesn't change anything.
[17:40:58] *** Joins: Tabmow (~tabmow@user/tabmow)
[17:50:55] *** Quits: TomyWork (~TomyLobo@p200300e80f0067005896fca49d464985.dip0.t-ipconnect.de) (Remote host closed the connection)
[17:50:56] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[17:51:02] *** Joins: roadt_ (~roadt@36.5.93.21)
[17:51:27] *** Joins: tsujp (~tsujp@sourcehut/user/tsujp)
[17:52:00] *** Joins: bluedust (~bluedust@117.241.191.1)
[17:53:23] *** Joins: vlm (~vlm@user/vlm)
[17:55:56] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Remote host closed the connection)
[17:56:21] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[18:00:54] *** Joins: Filohuhum (~dante@gateway/tor-sasl/filohuhum)
[18:03:59] *** Joins: cuppajoe (~joe@ip70-171-93-122.no.no.cox.net)
[18:06:29] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[18:07:11] *** Joins: amber[m] (~amberamba@2001:470:69fc:105::1:59c0)
[18:07:58] *** Joins: Leonard (~Administr@114.55.127.80)
[18:08:09] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[18:10:11] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[18:10:56] *** Quits: sahilister (~sahiliste@static.62.225.203.116.clients.your-server.de) (Changing host)
[18:10:56] *** Joins: sahilister (~sahiliste@user/sahilister)
[18:14:13] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[18:16:30] *** Joins: vysn (~vysn@user/vysn)
[18:19:50] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[18:25:43] *** Joins: ChmEarl (~chmearl@user/chmearl)
[18:26:33] *** Joins: Inline (~Inline@aftr-37-201-240-204.unity-media.net)
[18:31:37] *** Quits: MrBlue_ (~MrBlue@37.120.205.254) (Ping timeout: 240 seconds)
[18:31:49] *** Joins: Pddy (~SmplyPddy@user/SmplyPddy)
[18:32:03] <Pddy> hello bashendoors
[18:32:13] *** Quits: derpadmin (~Anonymous@homebase.200013.net) (Quit: Lost terminal)
[18:32:30] <Pddy> is there a way to enable some kind of "dry-run" to sed?
[18:33:18] <phy1729> sed operates on streams, so just run it again
[18:33:35] <Pddy> what do you mean, run it again?
[18:33:38] <tarzeau> like dropping -i ?
[18:33:47] <djph> phy1729: but he over-wrote the file and now it's wrong :)
[18:33:48] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[18:34:05] <djph> err, plot twist
[18:34:27] <Pddy> a clown must have entered the channel right before i joined
[18:34:31] <djph> Pddy: like sed -e 's/pattern/new text/' < original > updated
[18:34:47] <djph> just change "pattern" or "new text" as appropriate
[18:35:36] <Pddy> kind of like substitude A to B and then when its wrong subsittude B to A
[18:35:43] <Pddy> hey, thats nice
[18:36:02] <Pddy> (now that i understand it)
[18:36:45] <djph> and don't use the '-i' option, ever :)
[18:37:42] <uuidNuni2> djph: why not?
[18:37:47] <uuidNuni2> what is wrong with -i
[18:37:56] <phy1729> !sed-i
[18:37:56] <greybot> sed -i isn't portable; standard sed doesn't have it at all, GNU sed -i has an optional argument, and BSD sed -i has a mandatory argument. See !editing and <https://wooledge.org/mywiki/BashFAQ/021> for advice on modifying files.
[18:38:04] <uuidNuni2> i can even use -i to modify the script itself
[18:38:12] <phy1729> oh dear cthulhu no
[18:38:41] <phy1729> you don't know how far the parser has read, so that's undefined behavior
[18:38:48] *** Quits: cuppajoe (~joe@ip70-171-93-122.no.no.cox.net) (Quit: WeeChat 3.3)
[18:39:06] *** Joins: magla (~gelignite@55d42ff9.access.ecotel.net)
[18:39:08] <uuidNuni2> so, check-kernel script, define an empty kernel_ver="", check-kernel and sed -i to modify that kernel_ver. and next time check again ...
[18:39:47] <phy1729> Or save the value in a file you read in next run
[18:39:55] <uuidNuni2> phy1729: when script is run, it is copied to ram ... i believe so, because script can delete itself and it's parent dir
[18:40:12] <phy1729> That's different and changes still show up
[18:40:14] *** Quits: mongy (~mongy@user/mongy) (Quit: WeeChat 3.4)
[18:40:35] <phy1729> The script can be deleted because the shell will still have an open file descriptor for it
[18:41:16] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[18:41:57] <uuidNuni2> phy1729: don't like the idea of file... one file is enough. that is, the script itself.
[18:42:03] <uuidNuni2> so, is there better idea?
[18:42:56] <phy1729> one file means you get undefined behavior (if the number of bytes replaced isn't the same then all future reads after that point will be off)
[18:43:22] <uuidNuni2> You probably want to go to http://mywiki.wooledge.org/ instead.
[18:43:36] <uuidNuni2> link is broken
[18:43:42] *** Joins: cuppajoe (~joe@ip70-171-93-122.no.no.cox.net)
[18:44:22] <uuidNuni2> phy1729: bytes ? script is a text file ... not a binary.
[18:44:37] <uuidNuni2> !sh
[18:44:37] <greybot> sh is NOT bash; it is a POSIX or Bourne shell. To run bash code, your script MUST use a bash shebang, and it MUST be executed directly or with bash (NOT sh myscript). Sometimes /bin/sh symlinks to bash, but you can't rely on this and it will disable many bash features. <http://mywiki.wooledge.org/BashGuide/Practices#Choose_Your_Shell>
[18:44:45] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[18:44:52] <phy1729> uuidNuni2: everything is bytes
[18:45:01] *** Quits: Trieste (T@user/pilgrim) (Quit: Be well!)
[18:45:06] <uuidNuni2> ^^^ this one is fine, but the sed-i link is broken
[18:45:29] <izabera> !forget sed-i
[18:45:29] <greybot> OK, izabera
[18:45:49] *** Quits: sinaowolabi (~SinaOwola@169.159.67.85) (Read error: No route to host)
[18:46:01] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Remote host closed the connection)
[18:46:02] <izabera> !learn sed-i sed -i isn't portable; standard sed doesn't have it at all, GNU sed -i has an optional argument, and BSD sed -i has a mandatory argument. See !editing and <https://mywiki.wooledge.org/mywiki/BashFAQ/021> for advice on modifying files.
[18:46:02] <greybot> OK, izabera
[18:46:09] <izabera> fuq
[18:46:15] *** Joins: dextercd (~dexter@2a02-a450-f25d-1-76d4-35ff-fefe-34c.fixed6.kpn.net)
[18:46:23] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[18:46:24] *** Joins: sinaowolabi (~SinaOwola@169.159.67.85)
[18:46:36] <izabera> why is greycat serving this from a toaster
[18:46:40] <izabera> !forget sed-i
[18:46:40] <greybot> OK, izabera
[18:46:52] *** Quits: sinaowolabi__ (~SinaOwola@102.134.114.1) (Read error: No route to host)
[18:47:42] <izabera> !learn sed-i sed -i isn't portable; standard sed doesn't have it at all, GNU sed -i has an optional argument, and BSD sed -i has a mandatory argument. See !editing and <https://mywiki.wooledge.org/BashFAQ/021> for advice
[18:47:43] <greybot> OK, izabera
[18:49:31] *** Joins: MrBlue (~MrBlue@108.62.107.206)
[18:51:25] *** Quits: Tabmow (~tabmow@user/tabmow) (Ping timeout: 256 seconds)
[18:51:59] *** Quits: carl- (~carl-@185.103.188.130) (Ping timeout: 256 seconds)
[18:52:01] <kurahaupo> izabera: Thanks, you beat me to it
[18:52:27] *** Quits: cuppajoe (~joe@ip70-171-93-122.no.no.cox.net) (Quit: WeeChat 3.3)
[18:52:47] *** Joins: Tabmow (~tabmow@user/tabmow)
[18:53:47] <izabera> !forget sed-i
[18:53:47] <greybot> OK, izabera
[18:53:49] <izabera> kurahaupo: pls fix
[18:54:16] *** Quits: mihaiadrian (~Thunderbi@82.76.223.244) (Quit: mihaiadrian)
[18:57:56] *** Quits: noarb (~noarb@user/noarb) (Read error: Connection reset by peer)
[18:58:35] *** Joins: noarb (~noarb@user/noarb)
[18:58:45] *** Quits: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66) (Quit: Leaving)
[18:58:47] *** Quits: sinaowolabi (~SinaOwola@169.159.67.85) (Ping timeout: 256 seconds)
[18:59:02] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[19:00:03] *** Joins: Trieste (T@user/pilgrim)
[19:00:14] *** Joins: sinaowolabi__ (~SinaOwola@169.159.67.85)
[19:01:02] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[19:01:45] <uuidNuni2> izabera: fixed
[19:02:57] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[19:03:30] *** Quits: lux0r (~lux0r@65.56.68.34.bc.googleusercontent.com) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[19:03:58] *** Joins: malina (~malina@user/malina)
[19:04:03] <kurahaupo> !sed-i
[19:04:28] <kurahaupo> izabera: I meant you had already corrected it
[19:04:45] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[19:04:50] *** Quits: MrCollinsGA (~MrCollins@199.231.255.146) (Quit: Leaving)
[19:05:00] *** Quits: mozgalom (~mozgalom@194.144.47.113) (Quit: SO LONG SUCKERS!)
[19:05:20] <kurahaupo> !learn sed-i sed -i isn't portable; standard sed doesn't have it at all, GNU sed -i has an optional argument, and BSD sed -i has a mandatory argument. See !editing and <https://mywiki.wooledge.org/BashFAQ/021> for advice
[19:05:20] <greybot> OK, kurahaupo
[19:06:42] *** Joins: lux0r (~lux0r@65.56.68.34.bc.googleusercontent.com)
[19:06:43] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[19:06:49] *** Joins: taupiqueur_ (~taupiqueu@43.245.204.77.rev.sfr.net)
[19:07:13] *** Quits: PapaChub (~PapaChub@vzw-54.parabon.com) (Quit: Leaving)
[19:07:53] *** Joins: Leonard (~Administr@114.55.127.80)
[19:08:59] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[19:11:11] <relipse> i have a txt file of file paths, how do i iterate over them all and cat all the files with the filepath at the top?
[19:11:28] <relipse> myscript --infile foo.txt
[19:12:49] <phy1729> !faq 1
[19:12:49] <greybot> https://mywiki.wooledge.org/BashFAQ/001 -- How can I read a file (data stream, variable) line-by-line (and/or field-by-field)?
[19:13:20] <geirha> mapfile -t files < foo.txt ; tail -n+1 "${files[@]}"
[19:13:30] <geirha> non-standard usage of tail though
[19:14:17] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[19:14:39] *** Quits: karakedi (~eAC53C340@user/karakedi) (Ping timeout: 256 seconds)
[19:15:30] *** Joins: karakedi (~eAC53C340@user/karakedi)
[19:17:03] <relipse> gave me a tail: cannot open ‘’ for reading: No such file or directory
[19:17:11] <relipse> but it seemed to print them before that
[19:17:15] <relipse> thank you
[19:17:22] *** Joins: dhrv (~dhrv@user/dhrv)
[19:17:37] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[19:18:09] *** Joins: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net)
[19:19:35] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Remote host closed the connection)
[19:20:06] <phy1729> do you have empty lines?
[19:22:49] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[19:24:40] *** Joins: Leonard (~Administr@114.55.127.80)
[19:24:56] *** Quits: han-solo (~hanish@user/han-solo) (Quit: leaving)
[19:27:27] <relipse> yep one empty lin
[19:27:41] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[19:28:16] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[19:28:20] <e36freak> that would do it
[19:30:10] *** Quits: MeowcatWoofWoofF (~rosefoxma@2001:470:69fc:105::c74e) (Quit: You have been kicked for being idle)
[19:30:10] *** Quits: jkssodhxu[m] (~barzarian@2001:470:69fc:105::1:3a12) (Quit: You have been kicked for being idle)
[19:30:32] <relipse> I was taught to always have an empty newline at the end of my files in linux so that if you cat multiple files you will have a newline between each one
[19:30:32] *** Joins: MeowcatWoofWoofF (~rosefoxma@2001:470:69fc:105::c74e)
[19:30:32] *** Joins: jkssodhxu[m] (~barzarian@2001:470:69fc:105::1:3a12)
[19:30:50] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[19:30:50] *** Parts: jkssodhxu[m] (~barzarian@2001:470:69fc:105::1:3a12) ()
[19:30:55] *** Parts: MeowcatWoofWoofF (~rosefoxma@2001:470:69fc:105::c74e) ()
[19:30:59] *** Quits: Leonard (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[19:31:12] <phy1729> text files are made up of lines and lines are 0 or more non-newline characters followed by a newline
[19:31:45] <phy1729> some editors are dumb and think newlines are line separators not line terminators and in those editors you need a "blank line at the end", but only because they're broken
[19:31:45] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[19:32:15] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[19:32:15] <geirha> a text file should end with \n, but yours end with \n\n which is one more \n than necessary
[19:33:29] <relipse> what is your source for "a text file should end with \n"
[19:33:46] *** Quits: dhrv (~dhrv@user/dhrv) (Remote host closed the connection)
[19:34:54] <phy1729> line: https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_206  text file: https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_403
[19:35:36] <phy1729> Also decades of UNIX history and precedent.
[19:35:49] *** Joins: carl- (~carl-@185.103.188.130)
[19:36:26] <relipse>  I doubt there are any text editors that force you to have a \n at the end
[19:36:37] <relipse> seems like a silly rule
[19:37:13] <phy1729> It's not a text file without the terminating \n
[19:37:19] *** Quits: dsrt^ (~dsrt@207.5.21.20) (Ping timeout: 256 seconds)
[19:37:29] <phy1729> (unless empty)
[19:38:44] <relipse> according to unix?
[19:38:49] *** Joins: Leonard (~Administr@114.55.127.80)
[19:38:51] <relipse> what does windows have to say about thisA?
[19:38:58] <Soliton> it'd be weird to leave the final newline out. why make the last line special.
[19:39:12] <relipse> i have thousands of files that leave a \n out
[19:39:16] <relipse> they still work fine
[19:39:27] <relipse> although I try to add one if i see it without one
[19:39:29] <Soliton> how files are handled is up to the program using them.
[19:39:32] <phy1729> not with cat or read or anything that uses getline
[19:39:49] <emanuele6> a line is a sequence of characters that are not \n terminated by a \n.
[19:39:52] <Soliton> like your cat example will work the same on linux or windows.
[19:40:08] <relipse> cat works it just looks ugly
[19:40:29] <phy1729> if it merged the last line of one file with the first line of the next; it didn't work
[19:40:37] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[19:41:00] <relipse> yeah but to say that all text files must have a trailing \n according to some divine law
[19:41:05] <relipse> the divine unix law
[19:41:18] <phy1729> it was always that way until about a decade ago
[19:41:22] <emanuele6> a\nb  only contains one line
[19:41:35] <phy1729> I think VSCode was the first popular editor that got it wrong
[19:41:41] <geirha> if you open a file with ed and run w to save the file, it automatically adds a newline at the end if one is missing
[19:41:48] <emanuele6> a\n is a line with text "a"; "b" is not a line so tools are not guaranteed to read it
[19:41:53] <phy1729> as does vim
[19:42:17] <relipse> is there a definition that is agreed upon by windows/unix/mac?
[19:42:33] <phy1729> This is #bash, so POSIX is sufficient here
[19:43:03] *** Joins: MrCollinsGA (~MrCollins@199.231.255.146)
[19:43:08] <phy1729> fwiw git will also warn on missing final newlines
[19:44:02] <emanuele6> microsoft windows defines a line as a sequence of characters terminated by \r\n iirc so "b" in "a\r\nb" would still not count as a line.
[19:44:07] <geirha> I think vscode is the only editor I've encountered that doesn't add a terminating newline
[19:44:19] <geirha> by default, that is. It can be configured to do so
[19:46:03] *** Joins: frostwork (~frostwork@user/frostwork)
[19:47:14] <relipse> a\nb is only a one line file, but it is still a text file right?
[19:47:25] <phy1729> no
[19:47:32] <relipse> weir
[19:47:39] <relipse> weird
[19:47:56] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[19:49:22] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[19:49:44] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[19:50:07] *** Joins: libc (~weechat@user/tessio)
[19:51:15] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[19:51:15] <OMGOMG> # printf 'a\nb\n' > file; file file
[19:51:16] <shbot> OMGOMG: file: ASCII text
[19:51:42] <relipse> # printf 'a\nb' > file; file file
[19:51:43] <shbot> relipse: file: ASCII text
[19:51:48] <relipse> boo yeah
[19:51:51] <relipse> better fix your bots
[19:52:41] <Soliton> seems spot on.
[19:53:54] <relipse> phy1729: just said that a\nb is NOT a text file
[19:53:59] <relipse> according to file it is
[19:54:53] <relipse> # printf 'a\nb' > file; wc -l file
[19:54:54] <shbot> relipse: 1 file
[19:55:08] *** Joins: mongy (~mongy@user/mongy)
[19:55:33] <phy1729> # printf 'a\nb' > file; while IFS= read -r line; do printf '%s\n' "$line"; done
[19:55:40] <shbot> phy1729: no output within the time limit
[19:55:54] <phy1729> # printf 'a\nb' > file; while IFS= read -r line; do printf '%s\n' "$line"; done <file
[19:55:55] <shbot> phy1729: a
[19:56:07] <relipse> yeah so it is a one line text file
[19:56:12] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[19:56:13] <relipse> with trailing ascii chars
[19:57:45] *** Joins: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e)
[19:58:18] *** Quits: furrymcgee (~devuan@cgn-89-1-208-247.nc.de) (Quit: leaving)
[20:00:26] *** Quits: Leonard (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[20:00:38] *** Quits: frostwork (~frostwork@user/frostwork) (Quit: Leaving)
[20:00:50] *** Joins: Leonard (~Administr@114.55.127.80)
[20:02:51] <merpnderp> Anyone know why this isn't updating my file? `sed -i 's/GRUB_CMDLINE_LINUX\=\"\"/GRUB_CMDLINE_LINUX="apparmor=1 security=apparmor"/' /etc/default/grub`
[20:03:11] <merpnderp> grub has `GRUB_CMDLINE_LINUX=""` on a line
[20:03:47] <merpnderp> Is something wrong with that regex?
[20:04:02] <Soliton> you have random backslashes in there.
[20:04:20] <djph> !sed-i > merpnderp
[20:04:20] <greybot> merpnderp: sed -i isn't portable; standard sed doesn't have it at all, GNU sed -i has an optional argument, and BSD sed -i has a mandatory argument. See !editing and <https://mywiki.wooledge.org/BashFAQ/021> for advice
[20:04:31] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 256 seconds)
[20:04:54] <Soliton> might still work. depends on sed version.
[20:05:03] <merpnderp> It did work
[20:05:07] <merpnderp> I just ran it without the -i
[20:05:12] <merpnderp> So something else is up.
[20:05:13] <merpnderp> Thanks.
[20:05:24] <emanuele6> \= \" are undefined
[20:05:46] <merpnderp> Apparently not. escaping = should just be =
[20:05:47] <emanuele6> in GNU sed they are equivalent to = and " , but that could vary on other sed versions
[20:06:12] <merpnderp> I couldn't remember if = and " had special meaning in sed regex
[20:06:14] <merpnderp> SO I escaped them
[20:06:23] <emanuele6> that is not how it works.
[20:06:32] <Soliton> you could escape all characters for consistency.
[20:06:36] <e36freak> heh
[20:06:44] <e36freak> nevermind that escaping gives a lot of characters special meaninng
[20:06:47] <merpnderp> But it did work. I just ran it without -I and it worked
[20:07:21] <emanuele6> \char where char is not {, }, [, (, ), \ is undefined
[20:07:30] <emanuele6> and may have special meaning
[20:07:41] <merpnderp> I removed the escapes
[20:07:57] *** Joins: touraine (~igloo@44.229-131-109.adsl-dyn.isp.belgacom.be)
[20:08:20] <merpnderp> But that's not why it failed. Weird, that line is in like 77 and the rest ran. Wonder what else I had wrong there.
[20:08:30] <emanuele6> e.g. in GNU sed on GNU/Linux systems, \s is equivalent to [[:space:]], \+ is equivalent to ERE's +, \| is equivalent to ERE's |, \< matches the start of a word, \b matches the start or end of a word, etc
[20:08:48] <merpnderp> Right. But \= is nothing and \" is nothing
[20:08:52] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[20:08:59] <merpnderp> well, they're = and "
[20:09:16] <emanuele6> merpnderp: it is unspecified so it could be anything depending on the version.
[20:09:27] <merpnderp> good point
[20:09:32] <emanuele6> that is the point.
[20:10:22] <emanuele6> \b is not defined either, but it has a special meaning in GNU sed, not in other sed implementations.
[20:10:41] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[20:11:21] <emanuele6> (also \* and \. are defined and \/ or \regexdelimiter in general)
[20:11:37] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[20:11:48] <emanuele6> escaping if you don't know if you need to escape is a terrible technique in sed
[20:12:01] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[20:12:19] <merpnderp> Yeah I should have just looked it up.
[20:12:28] <merpnderp> But I'm buried under a ton of work
[20:14:23] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[20:14:23] <emanuele6> also i would say that `\=' -> `=' is special
[20:14:49] <emanuele6> one could expect `\=' -> `\='
[20:15:35] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[20:16:37] *** Quits: Intelo (~Intelo@88.246.79.32) (Quit: Client closed)
[20:17:07] *** Joins: shad (~shad@user/shad)
[20:17:51] *** Quits: magla (~gelignite@55d42ff9.access.ecotel.net) (Quit: Stay safe!)
[20:19:50] *** Quits: uuidNuni2 (~weechat@146.56.136.247) (Remote host closed the connection)
[20:19:52] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[20:20:08] *** Joins: uuidNuni2 (~weechat@146.56.136.247)
[20:22:13] *** Quits: touraine (~igloo@44.229-131-109.adsl-dyn.isp.belgacom.be) (Ping timeout: 256 seconds)
[20:25:59] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Remote host closed the connection)
[20:26:24] *** Joins: blyat-73 (~hjgkjhgkj@46.235.96.249)
[20:28:06] <emanuele6> merpnderp: anyhow are you using GNU sed? are you running the command as root? what are /etc/default/grub's permissions?
[20:28:38] <merpnderp> emanuele6: emanuele6 yes, yes, and that line matches in grub
[20:28:45] <merpnderp> it defaults to =""
[20:30:28] <emanuele6> merpnderp: i meant `stat -c%A /etc/default/grub' but it does not matter if you are running as root
[20:31:02] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[20:31:24] <merpnderp> Thanks for the help :)
[20:31:41] <emanuele6> so your  sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX="apparmor=1 security=apparmor"/' /etc/default/grub  works now?
[20:32:12] *** Joins: kZel (~kZel@2.122.231.92)
[20:33:25] *** Quits: shailangsa_ (~shailangs@host86-162-150-202.range86-162.btcentralplus.com) (Ping timeout: 240 seconds)
[20:34:23] <merpnderp> emanuele6: well, it works when I try it without the -i
[20:34:36] <merpnderp> But I'm not running it for real until the rest of the script is ready.
[20:34:48] <merpnderp> It takes the sys admins too long to revert from backup to run each one at a time.
[20:34:59] <merpnderp> Then when I get this script done, we can quickly update all new instances.
[20:36:36] *** Quits: tobybl_ (~tobybl@237.202.200.146.dyn.plus.net) (Remote host closed the connection)
[20:37:09] <emanuele6> i thought you asked your question because your command was not working.
[20:37:57] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Ping timeout: 240 seconds)
[20:39:39] *** Quits: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net) (Ping timeout: 256 seconds)
[20:39:41] *** Joins: Leonard (~Administr@114.55.127.80)
[20:40:55] *** Quits: blyat-73 (~hjgkjhgkj@46.235.96.249) (Quit: Leaving)
[20:41:37] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[20:41:45] *** Joins: shailangsa (~shailangs@host86-162-150-202.range86-162.btcentralplus.com)
[20:42:13] *** Quits: uuidNuni2 (~weechat@146.56.136.247) (Remote host closed the connection)
[20:42:29] *** Quits: shad (~shad@user/shad) (Ping timeout: 256 seconds)
[20:42:29] *** Joins: uuidNuni2 (~weechat@146.56.136.247)
[20:42:47] *** Joins: touraine (~igloo@109.131.229.44)
[20:42:58] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Read error: Connection reset by peer)
[20:43:51] *** Quits: touraine (~igloo@109.131.229.44) (Remote host closed the connection)
[20:44:04] *** Quits: rgrinberg (~textual@2806:265:5401:8cd:bcc9:1408:f826:5e8e) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:44:24] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[20:44:51] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[20:47:32] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[20:49:32] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[20:49:48] *** Joins: unop (~unop@194.154.249.71)
[20:50:01] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[20:50:36] *** Quits: shailangsa (~shailangs@host86-162-150-202.range86-162.btcentralplus.com) ()
[20:50:44] *** Joins: furrymcgee (~devuan@cgn-89-1-208-247.nc.de)
[20:54:14] *** Joins: potamides (~amnifiliu@2003:a:270f:c400:28d8:e046:7d92:3970)
[20:55:19] *** Quits: MercilessDeth (~brad@136.49.59.177) (Quit: Konversation terminated!)
[20:58:37] *** Joins: shailangsa (~shailangs@host86-162-150-202.range86-162.btcentralplus.com)
[21:02:58] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[21:04:31] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[21:08:09] *** Quits: ano (~ano@user/ano) (Quit: ano)
[21:09:10] *** Quits: kZel (~kZel@2.122.231.92) (Read error: Connection reset by peer)
[21:09:32] *** Quits: jab416171 (~jab416171@c-174-52-177-39.hsd1.ut.comcast.net) (Ping timeout: 240 seconds)
[21:10:49] *** Quits: Codaraxis (~Codaraxis@user/codaraxis) (Ping timeout: 256 seconds)
[21:11:36] *** Joins: ano (~ano@user/ano)
[21:12:40] *** Joins: kZel (~kZel@2.122.231.92)
[21:12:50] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[21:14:06] *** Joins: vysn (~vysn@user/vysn)
[21:14:21] *** Joins: miique (~miique@181.46.139.166)
[21:14:50] *** Joins: jab416171 (~jab416171@c-174-52-177-39.hsd1.ut.comcast.net)
[21:15:03] *** Joins: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net)
[21:15:37] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[21:16:37] *** Quits: stonkey (~stonkey@user/stonkey) (Remote host closed the connection)
[21:17:37] *** Quits: legola (~legola@46.235.100.54) (Remote host closed the connection)
[21:18:54] *** Joins: legola (~legola@46.235.100.54)
[21:20:25] *** Joins: Leonard (~Administr@114.55.127.80)
[21:20:37] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Ping timeout: 240 seconds)
[21:22:43] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[21:23:17] *** Quits: legola (~legola@46.235.100.54) (Ping timeout: 256 seconds)
[21:25:29] *** Joins: mr-red (~drd@host-79-53-116-35.retail.telecomitalia.it)
[21:26:41] *** Quits: drd (~drd@host-79-53-116-35.retail.telecomitalia.it) (Ping timeout: 256 seconds)
[21:30:01] <moviuro> Hi all, I have a short script where ~ doesn't get expanded correctly, and the ffmpeg(1) call fails to find the '~' folder. Is there a clean way to do that? https://x0.at/i27K.txt
[21:30:51] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[21:30:52] <Soliton> move the tilde outside the quotes or use $HOME instead.
[21:31:28] <moviuro> sounds good to me, thanks
[21:31:48] *** Joins: Feuermagier (~Feuermagi@user/feuermagier)
[21:32:00] *** Joins: Feuermagier_ (~Feuermagi@213.178.26.41)
[21:32:16] *** Quits: Feuermagier_ (~Feuermagi@213.178.26.41) (Remote host closed the connection)
[21:32:16] <OMGOMG> what's TMDIR?
[21:32:19] *** Quits: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr) (Read error: Connection reset by peer)
[21:32:44] *** Joins: freep (~freepppp@188.4.150.192.dsl.dyn.forthnet.gr)
[21:32:44] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[21:33:02] <NRK[m]> probably typo for $TMPDIR
[21:33:38] <moviuro> that's it, yes, I noticed after sending to the pastebin
[21:34:11] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[21:34:17] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Ping timeout: 240 seconds)
[21:37:05] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[21:37:23] *** Quits: uuidNuni1 (~weechat@193.123.227.17) (Read error: Connection reset by peer)
[21:41:48] *** Quits: iomari891 (~iomari891@105.112.138.38) (Quit: WeeChat 3.3)
[21:42:23] *** Joins: Leonard (~Administr@114.55.127.80)
[21:43:24] *** Quits: ano (~ano@user/ano) (Quit: ano)
[21:43:45] *** Joins: ano (~ano@user/ano)
[21:44:23] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[21:44:48] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[21:46:03] *** Joins: rgrinberg (~textual@2806:101e:7:c237:5574:bcf4:5aed:9e20)
[21:46:32] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[21:47:06] *** Joins: MercilessDeth (~brad@136.49.59.177)
[21:50:38] *** Joins: epony (epony@user/epony)
[21:51:12] *** Quits: Leonard (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[21:51:20] *** Joins: Leonard (~Administr@114.55.127.80)
[21:51:36] *** Quits: uuidNuni2 (~weechat@146.56.136.247) (Remote host closed the connection)
[21:51:54] *** Joins: uuidNuni2 (~weechat@146.56.136.247)
[21:52:21] *** Quits: razend (~razend@94.200.42.14) (Quit: Client closed)
[21:53:08] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[21:53:24] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[21:54:27] *** Quits: Rue_ (~rue@61-231-132-126.dynamic-ip.hinet.net) (Quit: WeeChat 3.4)
[21:55:06] *** Quits: ano (~ano@user/ano) (Quit: ano)
[21:55:33] *** Joins: ano (~ano@user/ano)
[21:55:37] *** Quits: MrBlue (~MrBlue@108.62.107.206) (Quit: Leaving)
[21:57:04] *** Joins: dsrt^ (~dsrt@207.5.21.20)
[21:58:33] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[21:59:18] *** Joins: unop (~unop@194.154.249.71)
[22:00:45] *** Quits: ano (~ano@user/ano) (Quit: ano)
[22:02:52] *** Quits: kZel (~kZel@2.122.231.92) (Read error: Connection reset by peer)
[22:04:03] *** Joins: ano (~ano@user/ano)
[22:05:37] *** Quits: Adbray (~Adbray@2600:6c48:6f7f:d764:7519:9a93:e2a0:319a) (Quit: Ah! By Brain!)
[22:06:09] *** Joins: kZel (~kZel@2.122.231.92)
[22:08:43] *** Quits: bluedust (~bluedust@117.241.191.1) (Remote host closed the connection)
[22:09:37] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[22:10:18] *** Quits: kZel (~kZel@2.122.231.92) (Client Quit)
[22:12:12] *** Joins: wenijinew (~wenijinew@c83-248-21-105.bredband.tele2.se)
[22:12:19] *** Joins: FluffyMask (~masque@user/fluffymask)
[22:12:38] *** Joins: joesse (~stephan@dslb-094-217-211-247.094.217.pools.vodafone-ip.de)
[22:13:32] *** Quits: MajorBiscuit (~MajorBisc@c-001-007-050.client.tudelft.eduvpn.nl) (Ping timeout: 240 seconds)
[22:14:24] *** Parts: joesse (~stephan@dslb-094-217-211-247.094.217.pools.vodafone-ip.de) ()
[22:15:21] *** Quits: rgrinberg (~textual@2806:101e:7:c237:5574:bcf4:5aed:9e20) (Read error: Connection reset by peer)
[22:16:13] *** Joins: rgrinberg (~textual@2806:101e:7:c237:5574:bcf4:5aed:9e20)
[22:16:20] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[22:17:53] *** Joins: akoana (~ah@user/akoana)
[22:18:49] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[22:19:31] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[22:27:24] *** Joins: magla (~gelignite@55d42ff9.access.ecotel.net)
[22:30:13] *** Joins: Leonard (~Administr@114.55.127.80)
[22:30:51] *** Quits: malina (~malina@user/malina) (Ping timeout: 256 seconds)
[22:32:25] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[22:33:25] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[22:33:31] *** Joins: goldfish (~goldfish@user/goldfish)
[22:35:33] *** Quits: Pddy (~SmplyPddy@user/SmplyPddy) (Quit: bye)
[22:36:57] *** Quits: ntz (~dpecka@static-84-42-228-122.net.upcbroadband.cz) (Ping timeout: 240 seconds)
[22:37:01] *** Joins: Pddy (~SmplyPddy@user/SmplyPddy)
[22:37:08] *** Joins: shad (~shad@user/shad)
[22:37:55] *** Joins: ntz (~dpecka@static-84-42-228-122.net.upcbroadband.cz)
[22:37:59] *** Quits: shad (~shad@user/shad) (Client Quit)
[22:38:26] *** Quits: tsujp (~tsujp@sourcehut/user/tsujp) (Quit: Client closed)
[22:38:39] *** Quits: kurahaupo_ (~martin@115.69.27.211) (Ping timeout: 256 seconds)
[22:38:50] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[22:41:04] *** Quits: taupiqueur_ (~taupiqueu@43.245.204.77.rev.sfr.net) (Remote host closed the connection)
[22:41:36] *** Quits: mat001 (~mat001@c-69-181-155-247.hsd1.ca.comcast.net) (Remote host closed the connection)
[22:41:46] *** Joins: taupiqueur (~taupiqueu@43.245.204.77.rev.sfr.net)
[22:41:49] *** Quits: Leonard (~Administr@114.55.127.80) (Ping timeout: 240 seconds)
[22:46:25] *** Joins: Codaraxis (~Codaraxis@user/codaraxis)
[22:48:31] *** Quits: Sauvin (~sauvin@about/linux/staff/sauvin) (Read error: Connection reset by peer)
[22:48:32] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[22:48:54] *** Quits: Gerula (~Gerula@user/gerula) (Quit: Leaving)
[22:49:27] *** Quits: tejr (~tejr@user/tejr) (Remote host closed the connection)
[22:49:45] *** Joins: tejr (~tejr@user/tejr)
[22:50:57] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 276 seconds)
[22:51:27] *** Quits: ano (~ano@user/ano) (Quit: ano)
[22:51:58] *** Joins: ano (~ano@user/ano)
[22:52:11] *** Quits: rgrinberg (~textual@2806:101e:7:c237:5574:bcf4:5aed:9e20) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:53:16] *** Joins: Itaru (~Itaru@ro2.flokinet.is)
[22:54:31] *** Joins: zro (~zro@user/zro)
[22:55:05] *** Joins: mat001 (~mat001@c-69-181-155-247.hsd1.ca.comcast.net)
[22:55:47] *** Quits: daniel-k (~daniel-k@fsf/emeritus/daniel-k) (Remote host closed the connection)
[22:55:58] *** Joins: daniel-k (~daniel-k@fsf/emeritus/daniel-k)
[22:56:51] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[22:57:17] <ash_worksi> is there a way to default to a username like "anonymous" instead of "I have no name" for PS1 ?
[22:57:50] <Soliton> change whatever puts "I have no name" there.
[22:59:01] <ash_worksi> ag shows that such a string has a binary match in '/bin/bash'
[22:59:39] <emanuele6> shell.c:1881:     current_user.user_name = _("I have no name!");
[22:59:41] <emanuele6> indeed
[22:59:48] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[23:00:01] <ash_worksi> I could make it explicit, but I just thought there might be some PS1 trickery to it default to something else when \u has no name
[23:00:04] *** Joins: Betal (~Betal@user/betal)
[23:00:16] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[23:00:42] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[23:01:21] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[23:01:32] <ash_worksi> like, I feel like some default-ness is happening with the ubuntu default prompt... there's this \${debian_chroot:+(\$debian_chroot)} thing happening
[23:01:56] <ash_worksi> but I wouldn't know how to do that with \u and "I have no name!"
[23:02:22] <emanuele6> it can be localised with a .po file
[23:02:27] *** Quits: carl- (~carl-@185.103.188.130) (Ping timeout: 256 seconds)
[23:02:50] <ash_worksi> or maybe there's a \ character that just uses the UID instead of the username
[23:03:57] *** Quits: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net) (Ping timeout: 240 seconds)
[23:04:05] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Client Quit)
[23:04:55] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[23:05:59] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[23:07:57] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Ping timeout: 240 seconds)
[23:09:43] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[23:10:25] *** Quits: wenijinew (~wenijinew@c83-248-21-105.bredband.tele2.se) (Quit: Lost terminal)
[23:10:44] <geirha> there's $UID
[23:11:33] <geirha> e.g. PS1='${USER-$UID}@\h:\w\$ '
[23:15:08] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[23:16:54] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[23:17:06] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[23:17:33] *** Joins: Leonard (~Administr@114.55.127.80)
[23:19:16] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[23:19:27] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[23:19:55] <libc> ${USER-$UID} == $USER
[23:20:01] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[23:20:15] <libc> it's a wrong syntax geirha
[23:20:21] *** Joins: mat001_ (~mat001@c-69-181-155-247.hsd1.ca.comcast.net)
[23:20:57] <geirha> no it isn't
[23:21:36] <Soliton> !:-
[23:21:36] <greybot> ${parameter:-word} Use Default Values. If parameter is unset or null, the expansion of word is substituted. Otherwise, the value of parameter is substituted.
[23:21:57] <libc> where's te : ?
[23:21:58] <geirha> !pe:
[23:21:58] <greybot> When using the default value parameter expansion (${var:-default}), the test checks if var is not set (unset -v var) or empty (var=''). If you omit the colon (${var-default}) it only checks if the var is not set. Same applies for :=, :?, and :+
[23:22:00] <libc> the
[23:22:25] *** Quits: mat001 (~mat001@c-69-181-155-247.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[23:22:45] <libc> geirha | e.g. PS1='${USER-$UID}@\h:\w\$ '
[23:22:56] <libc> ${USER:-$UID}
[23:23:10] <Soliton> read the factoid a couple more times.
[23:23:33] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[23:24:16] <geirha> # unset -v USER; printf '%s\n' "${USER-$UID}"
[23:24:17] <shbot> geirha: 0
[23:25:07] <libc> is there a difference where var == '' or is unset ?
[23:25:28] *** Joins: KillerWasp (~KillerWas@user/killerwasp)
[23:25:36] <KillerWasp> hello, is sh different to bash?
[23:25:38] <geirha> yes
[23:25:42] <Soliton> !sh
[23:25:42] <greybot> sh is NOT bash; it is a POSIX or Bourne shell. To run bash code, your script MUST use a bash shebang, and it MUST be executed directly or with bash (NOT sh myscript). Sometimes /bin/sh symlinks to bash, but you can't rely on this and it will disable many bash features. <http://mywiki.wooledge.org/BashGuide/Practices#Choose_Your_Shell>
[23:26:13] *** Joins: Oleg (~Oleg@ool-45745511.dyn.optonline.net)
[23:26:15] <geirha> It's about time to remove the Bourne reference of that factoid
[23:26:23] <libc> geirha: yes it makes a difference or sh is different than bash ?
[23:26:30] <geirha> libc: yes to both
[23:26:41] <libc> ok thanks
[23:26:58] *** Joins: john_johnk (~Thunderbi@1.59.140.77.rev.sfr.net)
[23:27:21] *** Joins: rgrinberg (~textual@187.223.202.115)
[23:27:54] *** Joins: malina (~malina@user/malina)
[23:28:05] <KillerWasp> But why are they pointing to the same program? Doesn't it act the same? Or are you telling me that bash is specifically designed to detect $0 and intentionally act differently depending on whether it's sh or bash?
[23:28:57] <geirha> !forget sh
[23:28:58] <greybot> OK, geirha
[23:29:03] <geirha> !learn sh sh is NOT bash; it is a POSIX shell. To run bash code, your script MUST use a bash shebang, and it MUST be executed directly or with bash (NOT sh myscript). Sometimes /bin/sh symlinks to bash, but you can't rely on this and it will disable many bash features. <http://mywiki.wooledge.org/BashGuide/Practices#Choose_Your_Shell>
[23:29:04] <greybot> OK, geirha
[23:29:22] <geirha> KillerWasp: yes, it does do that
[23:29:56] <geirha> when argv[0] is sh, bash enableds posix mode; same as running bash -o posix
[23:30:03] <geirha> -d
[23:30:08] <KillerWasp> i see...
[23:31:43] <geirha> # ln -sf bash4 /bin/sh; ls -l /bin/sh; sh -c 'echo <(:)'
[23:31:44] <shbot> geirha: lrwxrwxrwx 1 root root 5 Jan  6 20:01 /bin/sh -> bash4
[23:31:44] <shbot> geirha: sh: -c: line 0: syntax error near unexpected token `('
[23:31:44] <shbot> geirha: sh: -c: line 0: `echo <(:)'
[23:31:49] <geirha> # ln -sf bash5 /bin/sh; ls -l /bin/sh; sh -c 'echo <(:)'
[23:31:50] <shbot> geirha: lrwxrwxrwx 1 root root 5 Jan  6 20:01 /bin/sh -> bash5
[23:31:50] <shbot> geirha: /dev/fd/63
[23:32:15] <geirha> it no longer disables process substitution now apparently
[23:32:20] *** Joins: Leonardzzz (~Administr@114.55.127.80)
[23:32:22] *** Quits: Leonard (~Administr@114.55.127.80) (Read error: Connection reset by peer)
[23:33:05] <geirha> but that's not the only thing that changes, so it's still a bad idea to run a bash script with sh, or run an sh script with bash
[23:35:09] <KillerWasp> i always use scripts in bash. I just found out about the difference between sh and bash. Elsewhere they told me that it is better to use sh because it is more portable and safe.
[23:35:54] <geirha> depends on what the script is for. If you can use bash, use bash. Writing portable scripts is a pita
[23:36:11] <Soliton> safety doesn't really come into this.
[23:36:12] <din0> Especially if you rely on bashisms in the script like conditional formatting
[23:37:30] *** Joins: floch_forster (~Floch@2a02:8070:181:4a80:ef80:7b0a:81db:edba)
[23:38:05] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[23:38:51] <floch_forster> Is there a way to synchronize folder where all folders/files that are present in the folder B are removed from folder A?
[23:39:41] <geirha> sounds like a job for rsync
[23:40:50] <ljharb> rsync is for syncing tho, the question seems more like they want a sync where things are `mv`d
[23:41:04] <ljharb> unless there's an rsync option for that
[23:41:12] <jelly> floch_forster, do you want to synchronize deletions?
[23:41:12] <geirha> oh wait, yeah, just noticed I misread. I assumed all files NOT present in B should be removed from A
[23:41:19] <floch_forster> ljharb, Yes, but only the duplicates.
[23:41:23] <din0> Like antirsync
[23:42:36] <ljharb> floch_forster: if you can assume that filenames matching are sufficient to imply that the contents match, i suppose you could get every relative file path in B, and for each one, `mv` it to A, and then `mv` it back to B
[23:42:36] *** Joins: Leonard (~Administr@114.55.127.80)
[23:44:04] <Soliton> could just remove it from A.
[23:45:05] *** Quits: Leonardzzz (~Administr@114.55.127.80) (Ping timeout: 256 seconds)
[23:45:08] *** Joins: nitrowheels (~nitrowhee@151.95.83.100)
[23:45:13] <floch_forster> ljharb, You mean pipe ls of both folders into a text file, pipe it to sort, then to uniq -d, then feed  the result to xargs rm -fr? Isn't there a program that does all that automatically?
[23:45:31] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[23:45:39] <floch_forster> Soliton, By hand? That's too much of a bother.
[23:45:40] <ljharb> floch_forster: yes, but without any need for a text file, because pipes
[23:45:45] <ljharb> Soliton: oh right
[23:45:51] <geirha> and no ls
[23:46:06] <ljharb> floch_forster: so then yeah, get all the relative filenames from B, no need for sorting or uniquifying - just `rm A/$relative`
[23:46:09] <ljharb> for each one
[23:46:44] <geirha> { cd /path/to/B && find . -depth -type f -print0 ; } | while IFS= read -rd '' file ; do echo rm -f "/path/to/A/$file" ; done
[23:46:56] <floch_forster> geirha, No ls? How would I get a list of all files in a directory otherwise?
[23:47:04] <geirha> !ls
[23:47:04] <greybot> DO NOT USE ls' output for anything. ls is a tool for interactively looking at directory metadata. Any attempts at parsing ls' output with code are broken. Globs are much more simple AND correct: ''for file in *.txt''. Read http://mywiki.wooledge.org/ParsingLs
[23:47:11] <jelly> floch_forster, I can't be bothered to figure out precisely what you're really trying to do, so... rsync has several options to delete files that don't exist one one end but still exist on the other. try rsync B/ A/ with -n (--dry-run) and --delete and -v or -P (verbosity) and see if it does what you want it to do
[23:47:45] <jelly> add options for recursion to liking
[23:48:08] <geirha> echo is there as a dry-run. And it only removes files, not directories. You could do a second pass to remove empty dirs, or add more complex logic to handle both in one pass
[23:48:35] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[23:49:27] * jelly goes away to do yet another P2V migration with rsync as the main tool in the box
[23:49:38] *** Joins: natewrench123456 (~joshu@cpe-72-228-153-194.buffalo.res.rr.com)
[23:49:59] *** Quits: natewrench123456 (~joshu@cpe-72-228-153-194.buffalo.res.rr.com) (Max SendQ exceeded)
[23:50:01] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Max SendQ exceeded)
[23:50:24] *** Joins: natewrench123456 (~joshu@cpe-72-228-153-194.buffalo.res.rr.com)
[23:50:24] *** Joins: drd (~drd@host-79-53-116-35.retail.telecomitalia.it)
[23:50:37] *** Quits: mr-red (~drd@host-79-53-116-35.retail.telecomitalia.it) (Ping timeout: 256 seconds)
[23:50:38] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[23:51:53] <floch_forster> geirha, The folders and files I'm working with have no "exotic" characters, I saw to that when I configured the download tool I use. The most "exotic" characters they have would be spaces.
[23:53:50] <Soliton> with the idea that you can write bad shell code? or how is that relevant?
[23:53:52] <KillerWasp> geirha: greybot, shbot, thanks.
[23:54:26] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[23:54:30] *** Quits: robobo7 (~robobo@c-e52c524e.015-74-6762675.bbcust.telenor.se) (Quit: The Lounge - https://thelounge.chat)
[23:54:59] *** Quits: unop (~unop@194.154.249.71) (Remote host closed the connection)
[23:55:16] *** Joins: unop (~unop@194.154.249.71)
[23:55:54] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.4)
[23:56:59] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[23:57:20] <geirha> it's also harder with ls
[23:57:44] *** Joins: jkwnki (~jkwnki@p2e5794ba.dip0.t-ipconnect.de)
[23:59:40] <floch_forster> jelly, What I'd like to do is the "opposite" of rsync --delete (it'd delete the folders/files in folder B instead of folder A).
