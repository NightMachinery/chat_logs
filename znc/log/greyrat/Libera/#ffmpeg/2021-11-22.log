[00:01:15] <emcodem> yeah i should have added you found out how they correlate for the one clip you are testing with
[00:01:40] *** Joins: dreamon (~dreamon@pd95032c6.dip0.t-ipconnect.de)
[00:06:50] *** Joins: CruxOfTheB (~CruxOfThe@192.222.196.53)
[00:11:07] *** Quits: VarunAgw (~VarunAgw@103.158.148.26) (Ping timeout: 256 seconds)
[00:12:19] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[00:12:38] *** Quits: gucky-chat-laden (~gucky-cha@46.41.28.214) (Ping timeout: 260 seconds)
[00:15:39] *** Quits: mateo` (~mateo@ffmpeg/developer/mateo) (Ping timeout: 256 seconds)
[00:17:18] *** Quits: Amoz (~alex@h-155-4-73-184.A192.priv.bahnhof.se) (Ping timeout: 260 seconds)
[00:26:26] *** Quits: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Remote host closed the connection)
[00:26:40] *** Joins: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3)
[00:28:18] *** Joins: noarb (~noarb@user/noarb)
[00:29:15] *** Joins: mateo` (~mateo@ffmpeg/developer/mateo)
[00:31:01] *** Joins: vqueiroz (uid340368@id-340368.hampstead.irccloud.com)
[00:42:56] *** Quits: luni-4 (uid453292@id-453292.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[00:48:57] *** Quits: jcelerier (~jcelerier@2a01:cb1d:8b98:6a00:2e56:dcff:fe39:5547) (Quit: WeeChat 3.3)
[00:52:03] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[01:03:31] *** Joins: lavaball (felix@31.204.155.215)
[01:07:13] *** Quits: Guest9482 (~Buster@46.160.36.66) (Ping timeout: 256 seconds)
[01:15:12] <tuxd3v> yeah, -qp has some relation with -crf, but I still don't find the nice values for it..
[01:16:11] <tuxd3v> for example, I tried -qp 20,18,24, what I realised is that bigger values and you should have lower quality video..
[01:17:05] <tuxd3v> but changing from 18 to 24, the diference in quality isn't perceivable, also the bitrate is very close for that range..
[01:18:41] <tuxd3v> What change.. very little, around 5 MB or a bit less, in file size, in a ~11:40 minutes video of around 143MB size..
[01:18:50] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[01:19:10] <tuxd3v> so, my next test videos will be wild :D
[01:20:01] <tuxd3v> yeah I am positive in testing -qp like 28 , 30, and check if the quality is nice, just looking at the video produced..
[01:20:31] <tuxd3v> ffmpeg documentation speaks about medium quality for -qp 18
[01:21:07] <tuxd3v> I tested 24 and its unnoticeable.. so I need to go with a higher value
[01:22:39] <tuxd3v> there are also a -compress_level, which I think works like some sort of -preset in libx264, and it goes from 1-7, being 7 lower quality one..
[01:23:45] <tuxd3v> they say "higher values are faster / lower stream quality"
[01:24:27] <tuxd3v> but I need yet to find a good value for -qp :)
[01:26:26] *** Quits: dreamon (~dreamon@pd95032c6.dip0.t-ipconnect.de) (Remote host closed the connection)
[01:31:39] *** Quits: arbitercoin (~Rheanna@218.78.109.69) (Remote host closed the connection)
[01:32:26] *** Quits: Volgaar (~volgaar@193.137.116.78.rev.sfr.net) (Quit: WeeChat 3.3)
[01:34:09] *** Joins: arbitercoin (~Rheanna@61.171.38.68)
[01:35:55] *** Joins: dreamon (~dreamon@pd95032c6.dip0.t-ipconnect.de)
[01:37:49] <emcodem> @tuxd3v might i ask why you are so stuck on using hardware encoders for such a low bitrate?
[01:38:08] <emcodem> it's not like you will come anywhere near with it compared to using x264
[01:38:34] <tuxd3v> my problem is that my CPU is not very fast
[01:38:40] <furq> also 143MB is pretty small for that much video at that resolution
[01:39:02] <tuxd3v> and working on it, and at same time encoding via CPU, it starts to be a limiting thing..
[01:39:36] <tuxd3v> furq, x264 do the same in less than 80MB :)
[01:39:39] <emcodem> hmmm you could give the process low priority
[01:39:50] <tuxd3v> I already tested and I was without words..
[01:39:55] <furq> well yeah x264 is much better than vce 2
[01:40:01] <tuxd3v> x264 is really really good :)
[01:40:05] <furq> right
[01:40:33] <furq> but are you that starved of disk space you can't afford 1GB per 90 minutes of video
[01:43:31] <tuxd3v> furq, I can afford the space, yes, but I would love to get the maximum compression out of the hw device..
[01:43:54] <tuxd3v> well.. it could even be that I am already at its maximum compression and it cannot do more..
[01:43:58] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:44:33] <emcodem> by the way @tuxd3v, you mention "the difference is not noticeable"... well it really depends on the scene, do you look at blue heavens or something like a bird swarm? or some action scene with lots of details?
[01:45:19] <tuxd3v> yeah you right is very dificult to compare diferent things  :(
[01:45:41] <emcodem> yup, you wouldn't believe how much time most of us spent on that :D
[01:45:55] *** Joins: conr (~conr@user/conr)
[01:46:13] *** Quits: durandal_1707 (~computer@95.168.118.16) (Read error: No route to host)
[01:46:25] <emcodem> the more you get into it, the more you recognize that what you are asking cannot be easily answered
[01:46:28] *** Joins: durandal_1707 (~computer@95.168.120.94)
[01:46:29] <conr> does ffmpeg have a success flag on convert?
[01:46:41] <furq> it'll return non-zero on error
[01:46:50] <emcodem> that was fast @furq :D
[01:47:19] <emcodem> also, it will depend on what exactly you consider as success ;-)
[01:48:00] <tuxd3v> emcodem, I agree with you :)
[01:48:33] <furq> honestly you're probably missing some settings somewhere
[01:48:57] <furq> the problem is nobody will know what they are unless they also use a vce2 device through vaapi
[01:49:25] <tuxd3v> agree :)
[01:49:36] <furq> hwenc stuff is generally badly documented and vaapi is probably the worst for it
[01:51:08] <emcodem> also, most hw encoders are tuned for "live" encoding usecase, e.g. streaming what you currently see to twich ;-) what you want is the "archive" usecase, it is totally different
[01:51:23] <conr> i'm just doing a simple `convert file.heic to file.jpg` but if it fails then i want to kill the script or break it to the next loop
[01:51:49] <emcodem> @conr on what OS?
[01:51:53] <conr> macos
[01:51:59] <conr> well archlinux too
[01:52:15] <emcodem> and you use ffmpeg, right? no other software that underneath might use ffmpeg?
[01:52:37] <conr> i don't know. convert just works with ffmeg
[01:52:58] <conr> oops, shoot i'm using imagemagik sorry
[01:53:37] <furq> conr: set -e
[01:54:05] <conr> furq?
[01:54:17] <furq> http://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#The-Set-Builtin
[01:55:30] <furq> if you want to continue instead of quitting then `[ $? -eq 0 ] && continue` after running ffmpeg
[01:55:42] <conr> thx
[01:57:12] <furq> i would normally complain about imagemagick but i guess you're stuck with it if you want to use heic
[01:59:40] <emcodem> oh thats interesting? what makes imagemagick bad @furq?
[02:00:28] *** Parts: oliv3 (~olivier@2001:bc8:6005:129:208:a2ff:fe0c:46bc) (WeeChat 2.3)
[02:01:37] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[02:09:56] <intrac> BtbN: thanks - I got distracted earlier on other things
[02:10:02] <intrac> will try the pan filter
[02:10:02] *** Quits: c7s (~c7s@user/c7s) (Ping timeout: 240 seconds)
[02:10:12] <tuxd3v> with -qp 30, file size 112.1MB, a bit less than 145MB for -qp 18
[02:10:53] <tuxd3v> what changes, a litle bit  detail, and the colors.. they are a lot less vivid, but still very perceptible..
[02:11:38] <tuxd3v> I think I will setle in -qp 24 :)
[02:11:54] <tuxd3v> it has vivid colors, at least more vivid..
[02:12:07] <tuxd3v> this took a long road for me, but its done!
[02:12:24] <tuxd3v> many thanks guys, for the support :)
[02:12:50] *** Quits: auth (~auth@user/auth) (Ping timeout: 265 seconds)
[02:16:41] *** Joins: Colt (~Colt@user/colt)
[02:21:54] *** Quits: dreamon (~dreamon@pd95032c6.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[02:21:54] *** Quits: arbitercoin (~Rheanna@61.171.38.68) (Remote host closed the connection)
[02:22:34] *** Joins: arbitercoin (~Rheanna@218.78.53.13)
[02:23:52] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[02:35:51] *** Joins: ePirat (~ePirat@user/epirat)
[02:36:52] <ePirat> Do I understand correctly that with AVIOContext I still need to copy to its buffer in the read_packet callback and there is no way to give it an existing buffer?
[02:37:17] <ePirat> (currently looking at the avio_reading example)
[02:47:07] *** Quits: Narrat (~omnius@p200300df5f15684606ea56fffe2e7cdc.dip0.t-ipconnect.de) (Quit: They say a little knowledge is a dangerous thing, but it's not one half so bad as a lot of ignorance.)
[03:03:55] *** Quits: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Ping timeout: 250 seconds)
[03:17:39] <znf> hmm, in the past few months there were extra things added to libnpp, it seems?
[03:18:06] <znf> doesn't build with my patch anymore
[03:18:07] <znf> libavfilter/libavfilter.a(vf_sharpen_npp.o): In function `nppsharpen_filter_frame':
[03:18:07] <znf> vf_sharpen_npp.c:(.text+0x31e): undefined reference to `nppiFilterSharpenBorder_8u_C1R'
[03:19:45] <znf> yup: https://github.com/FFmpeg/FFmpeg/commit/08a501946f95f3a998000ee923aa7fcb35ec0d4e#diff-90d08e583c4c9c6f391b2ae90f819f600a6326928ea9512c9e0c6d98e9f29ac2
[03:20:16] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Read error: Connection reset by peer)
[03:22:56] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.3)
[03:26:23] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[03:29:54] <znf> Would anyone have a look at https://pastie.dev/sqff7E.yaml -- I must be missing something to my patch, and I'm not sure what exactly; Context: I'm building my own static binaries with libnpp built-in, so I don't have to spread the cuda libs all across the machines I manage
[03:29:55] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:32:08] <znf> normally I'd be looking trough all libs for the specific things complaining about and add that to my patch, but that's kind of generic missing things :-/
[03:35:38] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[03:42:51] <znf> Linker invocation: https://pastie.dev/6txpuH.yaml
[03:50:03] *** Joins: bradh (~bradh@ppp115-205.static.internode.on.net)
[03:54:02] *** Quits: jess (~jess@libera/staff/jess) ()
[03:59:06] *** Joins: HumanG33k (~HumanG33k@2a01:e0a:95:5d90:215:c5ff:fe68:fb04)
[04:02:53] *** Quits: arbitercoin (~Rheanna@218.78.53.13) (Remote host closed the connection)
[04:11:04] *** Joins: meinside (uid24933@id-24933.helmsley.irccloud.com)
[04:11:14] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.3)
[04:11:47] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[04:51:32] *** Quits: Nact (~l@host-85-27-120-251.dynamic.voo.be) (Ping timeout: 240 seconds)
[04:51:44] *** Joins: Nact (~l@host-85-27-124-83.dynamic.voo.be)
[04:55:54] *** Quits: Nact (~l@host-85-27-124-83.dynamic.voo.be) (Client Quit)
[05:01:02] *** Joins: arbitercoin (~Rheanna@218.78.109.69)
[05:30:22] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:41:53] *** Quits: arbitercoin (~Rheanna@218.78.109.69) (Remote host closed the connection)
[05:43:41] *** Joins: arbitercoin (~Rheanna@218.78.94.61)
[06:15:14] *** Quits: omegatron (~some@p5484903d.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[06:16:03] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 256 seconds)
[06:20:32] *** Quits: bradh (~bradh@ppp115-205.static.internode.on.net) (Ping timeout: 240 seconds)
[06:31:08] *** Joins: realies7 (~realies@user/realies)
[06:31:21] *** Quits: realies (~realies@user/realies) (Ping timeout: 256 seconds)
[06:31:21] *** realies7 is now known as realies
[06:32:19] *** Quits: arbitercoin (~Rheanna@218.78.94.61) (Remote host closed the connection)
[06:34:02] *** Joins: arbitercoin (~Rheanna@61.171.38.68)
[06:46:23] *** Quits: tuxd3v (~tuxd3v@93.102.33.166.rev.optimus.pt) (Quit: Leaving)
[06:50:21] *** Joins: tuxd3v (~tuxd3v@93.102.33.166.rev.optimus.pt)
[06:53:04] *** Joins: Vonter (~Vonter@user/vonter)
[06:54:45] <youmustrust> Guys, is there a way to play the latest segment on hls?
[06:56:15] <youmustrust> I mean with ffplay. =)
[06:59:46] <tuxd3v> Only to say that in debian stable ( 11 ), h264_vaapi acelerated video...is a mess, it consumes the same cpu as in unstable, but the quality improvement of latest version of ffmpeg/vaapi/Radeon drivers .. is amazing..
[07:00:10] <tuxd3v> So on debian stable, only solution is to do x264 :)
[07:16:30] *** Quits: jos1 (~jos3@dyndsl-091-096-043-110.ewe-ip-backbone.de) (Ping timeout: 268 seconds)
[07:21:54] *** Quits: arbitercoin (~Rheanna@61.171.38.68) (Remote host closed the connection)
[07:24:37] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 256 seconds)
[07:24:57] *** Joins: darkapex (~darkapex@user/darkapex)
[07:29:18] *** Joins: jos1 (~jos3@host-091-097-187-198.ewe-ip-backbone.de)
[07:34:07] *** Joins: Colt2 (~Colt@ptr-1w23zewqpabrx5264q3.18120a2.ip6.access.telenet.be)
[07:34:07] *** Quits: Colt2 (~Colt@ptr-1w23zewqpabrx5264q3.18120a2.ip6.access.telenet.be) (Changing host)
[07:34:07] *** Joins: Colt2 (~Colt@user/colt)
[07:35:01] *** Quits: Colt (~Colt@user/colt) (Ping timeout: 268 seconds)
[07:36:12] *** Quits: Colt2 (~Colt@user/colt) (Client Quit)
[07:37:01] *** Joins: Colt (~Colt@user/colt)
[08:03:54] *** Quits: waleee (~waleee@h-82-196-111-63.NA.cust.bahnhof.se) (Quit: WeeChat 3.3)
[08:16:32] *** Joins: arbitercoin (~Rheanna@61.171.38.68)
[08:29:08] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:32:58] *** Quits: Jerrk (~Jerrk@193.138.218.225) (Ping timeout: 268 seconds)
[08:33:30] *** Joins: Jerrk (~Jerrk@193.138.218.213)
[09:02:24] *** Quits: arbitercoin (~Rheanna@61.171.38.68) (Remote host closed the connection)
[09:03:02] *** Joins: arbitercoin (~Rheanna@218.78.99.237)
[09:09:13] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[09:10:47] *** Quits: aphysically (~aphysical@user/aphysically) (Quit: aphysically)
[09:12:25] *** Joins: aphysically (~aphysical@user/aphysically)
[09:14:18] *** Joins: sagax (~sagax_nb@user/sagax)
[09:18:48] *** Quits: Fenrir (~Fenrir@user/fenrir) (*.net *.split)
[09:18:48] *** Quits: qwedfg_ (~qwedfg@user/qwedfg) (*.net *.split)
[09:18:48] *** Quits: nickster (~nickster@67.207.91.6) (*.net *.split)
[09:18:48] *** Quits: timothy (~timothy@redhat/timothy) (*.net *.split)
[09:18:48] *** Quits: moviuro (~moviuro@car.popho.be) (*.net *.split)
[09:19:06] *** Joins: moviuro (~moviuro@znc.popho.be)
[09:19:11] *** Joins: Fenrir (~Fenrir@wpsql219764.wpsql219764.dreamhostps.com)
[09:19:19] *** Joins: nickster (~nickster@67.207.91.6)
[09:19:21] *** Quits: Fenrir (~Fenrir@wpsql219764.wpsql219764.dreamhostps.com) (Changing host)
[09:19:21] *** Joins: Fenrir (~Fenrir@user/fenrir)
[09:19:31] *** Joins: qwedfg (~qwedfg@user/qwedfg)
[09:19:41] *** Joins: bradh (~bradh@ppp115-205.static.internode.on.net)
[09:20:09] *** Joins: reynaldo (~reynaldo@ec2-34-200-7-37.compute-1.amazonaws.com)
[09:20:30] *** Joins: timothy (~timothy@redhat/timothy)
[09:22:29] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[09:24:09] *** Joins: Vonter (~Vonter@user/vonter)
[09:24:59] *** Quits: fructose (~fructose@user/fructose) (*.net *.split)
[09:24:59] *** Quits: ParkerR (~ParkerR@znc.withg.org) (*.net *.split)
[09:24:59] *** Quits: xerox (~edi@user/edi) (*.net *.split)
[09:25:00] *** Quits: michaelni (~michael@213-47-68-29.cable.dynamic.surfer.at) (*.net *.split)
[09:25:00] *** Quits: roxlu (~roxlu@2a01:7c8:aac0:286:8c3a:b01c:3830:245b) (*.net *.split)
[09:25:00] *** Quits: nullheroes (~nullheroe@168.235.66.22) (*.net *.split)
[09:25:00] *** Quits: Ekho (~Ekho@user/ekho) (*.net *.split)
[09:25:00] *** Quits: bertieb (~bertieb@217.155.39.147) (*.net *.split)
[09:25:00] *** Quits: fatalis (~fatalis@user/fatalis) (*.net *.split)
[09:25:00] *** Quits: dustinm`_ (~dustinm@static.38.6.217.95.clients.your-server.de) (*.net *.split)
[09:25:00] *** Quits: garfvl_ (~root@ns530260.ip-149-56-24.net) (*.net *.split)
[09:25:00] *** Quits: samhza (sam@2600:3c03::f03c:92ff:fe40:814c) (*.net *.split)
[09:25:00] *** Quits: user282069 (user@2a01:7e00::f03c:92ff:fe7f:456d) (*.net *.split)
[09:25:00] *** Quits: edenist (~edenist@rdns.robotprofessor.net) (*.net *.split)
[09:25:00] *** Quits: TSaari (~tsaari@user/tsaari) (*.net *.split)
[09:25:00] *** Quits: markvandenborre (~mark@static.88.183.119.168.clients.your-server.de) (*.net *.split)
[09:25:00] *** Quits: murb (~murb@an.der.schoenen.blauen.danu.be) (*.net *.split)
[09:25:00] *** Quits: Retr0id (~Retr0id@user/retr0id) (*.net *.split)
[09:25:00] *** Quits: Silicium_ (~Silicium@95.216.156.84) (*.net *.split)
[09:25:00] *** Quits: woky_ (~woky@li1651-31.members.linode.com) (*.net *.split)
[09:25:00] *** Quits: ocrete (~ocrete@gyros.collabora.co.uk) (*.net *.split)
[09:25:00] *** Quits: upekkha (~Advanced@2a01:4f8:1c0c:49df::1) (*.net *.split)
[09:25:06] *** Joins: Silicium (~Silicium@95.216.156.84)
[09:25:07] *** Joins: markvandenborre (~mark@static.88.183.119.168.clients.your-server.de)
[09:25:10] *** Joins: ParkerR (ParkerR@znc.withg.org)
[09:25:12] *** Joins: murb (~murb@an.der.schoenen.blauen.danu.be)
[09:25:12] *** Joins: xerox (~edi@user/edi)
[09:25:13] *** Joins: samhza (sam@2600:3c03::f03c:92ff:fe40:814c)
[09:25:15] *** Joins: roxlu (~roxlu@2a01:7c8:aac0:286:8c3a:b01c:3830:245b)
[09:25:16] *** Joins: edenist (edenist@rdns.robotprofessor.net)
[09:25:19] *** Joins: TSaari (~tsaari@user/tsaari)
[09:25:22] *** Joins: fatalis (~fatalis@104.128.62.36)
[09:25:32] *** Joins: upekkha (~Advanced@2a01:4f8:1c0c:49df::1)
[09:25:36] *** Joins: garfvl_ (~root@ns530260.ip-149-56-24.net)
[09:25:41] *** Joins: user282069 (user@2a01:7e00::f03c:92ff:fe7f:456d)
[09:26:07] *** Joins: ocrete (~ocrete@gyros.collabora.co.uk)
[09:26:13] *** Joins: nullheroes (~nullheroe@168.235.66.22)
[09:26:15] *** Quits: fatalis (~fatalis@104.128.62.36) (Changing host)
[09:26:15] *** Joins: fatalis (~fatalis@user/fatalis)
[09:26:30] *** Joins: michaelni (~michael@213-47-68-29.cable.dynamic.surfer.at)
[09:26:36] *** Joins: bertieb (~bertieb@217.155.39.147)
[09:26:43] *** Joins: woky (~woky@li1651-31.members.linode.com)
[09:27:17] *** Joins: dustinm` (~dustinm@static.38.6.217.95.clients.your-server.de)
[09:29:05] *** Joins: Ekho (~Ekho@user/ekho)
[09:33:10] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:41:08] *** Joins: auth (~auth@user/auth)
[09:46:39] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[09:50:02] *** Quits: MightyBOB (~MightyBOB@c-76-99-21-35.hsd1.pa.comcast.net) (Ping timeout: 240 seconds)
[09:51:32] *** haihao_ is now known as haihao
[09:51:33] *** Quits: arbitercoin (~Rheanna@218.78.99.237) (Remote host closed the connection)
[09:53:20] *** Joins: arbitercoin (~Rheanna@61.171.69.141)
[09:53:34] *** Quits: Jerrk (~Jerrk@193.138.218.213) (Ping timeout: 260 seconds)
[09:55:21] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[10:06:38] *** Joins: Vonter (~Vonter@user/vonter)
[10:26:20] *** Joins: MightyBOB (~MightyBOB@c-76-99-21-35.hsd1.pa.comcast.net)
[10:28:50] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:8e8d:951c:50b8:5400)
[10:29:14] *** Parts: bencc1 (~bencc1@2a00:a040:197:3af:8e8d:951c:50b8:5400) ()
[10:37:57] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 276 seconds)
[10:39:54] *** Joins: mixfix41 (~homefame@user/mixfix41)
[10:41:52] *** Joins: System_Error (~SystemErr@user/systemerror)
[10:41:53] *** Quits: arbitercoin (~Rheanna@61.171.69.141) (Remote host closed the connection)
[10:44:21] *** Joins: arbitercoin (~Rheanna@61.171.69.141)
[10:45:57] *** Joins: VarunAgw (~VarunAgw@103.158.148.26)
[10:57:54] *** Quits: bradh (~bradh@ppp115-205.static.internode.on.net) (Ping timeout: 268 seconds)
[11:02:29] *** Quits: vqueiroz (uid340368@id-340368.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[11:15:39] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 276 seconds)
[11:21:25] *** Joins: System_Error (~SystemErr@user/systemerror)
[11:22:32] *** Quits: meinside (uid24933@id-24933.helmsley.irccloud.com) (Ping timeout: 240 seconds)
[11:24:16] *** Joins: lavaball (felix@31.204.155.215)
[11:24:17] *** Joins: meinside (uid24933@id-24933.helmsley.irccloud.com)
[11:24:30] *** Quits: Flat (~flat@35.137.99.241) (Quit: Rip internet)
[11:32:38] *** Joins: dreamon (~dreamon@ppp-88-217-64-242.dynamic.mnet-online.de)
[11:35:11] *** Quits: el_segundo (~coinbird@62.159.119.178) (Ping timeout: 264 seconds)
[11:38:09] *** Joins: bradh (~bradh@ppp115-205.static.internode.on.net)
[11:38:28] *** Joins: c7s (~c7s@user/c7s)
[11:39:08] *** Joins: palasso (~palasso@user/palasso)
[11:40:58] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[11:43:27] *** Joins: Flat (~flat@35.137.99.241)
[11:44:49] *** garfvl_ is now known as garfvl
[11:49:02] *** Quits: System_Error (~SystemErr@user/systemerror) (Remote host closed the connection)
[11:49:33] *** Joins: System_Error (~SystemErr@user/systemerror)
[11:55:07] *** Joins: Volgaar (~volgaar@193.137.116.78.rev.sfr.net)
[12:00:30] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 276 seconds)
[12:00:48] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[12:07:08] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[12:13:27] *** Joins: durandal11707 (~computer@95.168.121.37)
[12:16:02] *** Quits: durandal_1707 (~computer@95.168.120.94) (Ping timeout: 240 seconds)
[12:17:43] *** Joins: cmp (~cmp@lfbn-ren-1-1468-31.w90-27.abo.wanadoo.fr)
[12:21:43] *** Quits: arbitercoin (~Rheanna@61.171.69.141) (Remote host closed the connection)
[12:23:16] *** Joins: arbitercoin (~Rheanna@101.89.150.168)
[12:24:06] *** Quits: feiw (~Fei.Wang@192.55.46.52) (Quit: Leaving)
[12:34:33] *** Joins: lavaball (felix@31.204.155.215)
[12:35:15] *** Quits: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37) (Quit: ZNC 1.9.x-git-111-f2cdc3db - https://znc.in)
[12:35:35] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[12:57:40] *** Quits: Naleksuh (sid454423@wikimedia/naleksuh) (Ping timeout: 260 seconds)
[12:57:40] *** Quits: itok_ (sid418430@id-418430.ilkley.irccloud.com) (Ping timeout: 260 seconds)
[12:57:59] *** Quits: video2go (sid515994@id-515994.lymington.irccloud.com) (Ping timeout: 264 seconds)
[12:58:28] *** Quits: termos (sid18647@id-18647.helmsley.irccloud.com) (Ping timeout: 250 seconds)
[12:58:28] *** Quits: Tips|Cloud (sid62231@id-62231.ilkley.irccloud.com) (Ping timeout: 250 seconds)
[12:58:28] *** Quits: ullbeking_ (sid5364@id-5364.ilkley.irccloud.com) (Ping timeout: 250 seconds)
[12:59:11] *** Quits: Manouchehri (sid384576@id-384576.hampstead.irccloud.com) (Ping timeout: 264 seconds)
[12:59:22] *** Quits: kurosu (uid342582@id-342582.hampstead.irccloud.com) (Ping timeout: 268 seconds)
[12:59:22] *** Quits: mindfreeze (uid250931@user/mindfreeze) (Ping timeout: 268 seconds)
[12:59:22] *** Quits: buhman (sid411355@user/buhman) (Ping timeout: 268 seconds)
[12:59:22] *** Quits: englishm (sid6629@id-6629.tinside.irccloud.com) (Ping timeout: 268 seconds)
[12:59:47] *** Quits: emcodem (uid483343@id-483343.helmsley.irccloud.com) (Ping timeout: 264 seconds)
[12:59:51] *** Quits: meinside (uid24933@id-24933.helmsley.irccloud.com) (Ping timeout: 264 seconds)
[12:59:59] *** Quits: tmatth (sid143283@videolan/developer/tmatth) (Ping timeout: 268 seconds)
[12:59:59] *** Quits: raytiley (sid13397@id-13397.hampstead.irccloud.com) (Ping timeout: 268 seconds)
[13:00:00] *** Quits: Nick_d0gb0y (sid467444@id-467444.lymington.irccloud.com) (Ping timeout: 268 seconds)
[13:00:01] *** Quits: linjie (sid455360@id-455360.helmsley.irccloud.com) (Ping timeout: 265 seconds)
[13:00:06] *** Joins: kurosu (uid342582@hampstead.irccloud.com)
[13:00:18] *** Joins: linjie (sid455360@helmsley.irccloud.com)
[13:00:39] *** Joins: Nick_d0gb0y (sid467444@lymington.irccloud.com)
[13:01:22] *** Joins: termos (sid18647@helmsley.irccloud.com)
[13:01:33] *** Joins: englishm (sid6629@tinside.irccloud.com)
[13:01:36] *** Joins: buhman (sid411355@user/buhman)
[13:01:39] *** Joins: video2go (sid515994@lymington.irccloud.com)
[13:01:49] *** Joins: meinside (uid24933@helmsley.irccloud.com)
[13:01:56] *** Joins: ullbeking_ (sid5364@ilkley.irccloud.com)
[13:02:46] *** Joins: raytiley (sid13397@hampstead.irccloud.com)
[13:02:49] *** Joins: Manouchehri (sid384576@hampstead.irccloud.com)
[13:03:16] *** Joins: mindfreeze (uid250931@user/mindfreeze)
[13:03:18] *** Joins: tmatth (sid143283@videolan/developer/tmatth)
[13:03:31] *** Joins: Tips|Cloud (sid62231@ilkley.irccloud.com)
[13:04:27] *** Quits: moviuro (~moviuro@znc.popho.be) (Quit: Reboot? Or did my jail(8) just die?)
[13:04:38] *** Joins: emcodem (uid483343@helmsley.irccloud.com)
[13:04:42] *** Joins: moviuro (~moviuro@car.popho.be)
[13:05:11] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 264 seconds)
[13:07:12] *** Quits: Tips|Cloud (sid62231@ilkley.irccloud.com) (Max SendQ exceeded)
[13:07:42] *** Joins: Tips|Cloud (sid62231@id-62231.ilkley.irccloud.com)
[13:11:31] *** Quits: arbitercoin (~Rheanna@101.89.150.168) (Remote host closed the connection)
[13:12:41] *** Joins: arbitercoin (~Rheanna@218.78.104.50)
[13:12:43] *** Joins: Naleksuh (sid454423@wikimedia/naleksuh)
[13:12:47] *** Joins: itok_ (sid418430@id-418430.ilkley.irccloud.com)
[13:32:31] *** Joins: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3)
[13:54:30] *** Joins: Fohsap (~Muimi@2401:c080:1c02:ed3:5400:3ff:feb1:90a2)
[13:56:18] *** Quits: Volgaar (~volgaar@193.137.116.78.rev.sfr.net) (Quit: WeeChat 3.3)
[13:56:38] *** Joins: Volgaar (~volgaar@193.137.116.78.rev.sfr.net)
[14:03:46] *** Quits: sagax (~sagax_nb@user/sagax) (Excess Flood)
[14:11:36] *** Quits: bradh (~bradh@ppp115-205.static.internode.on.net) (Quit: Konversation terminated!)
[14:13:11] *** Joins: luni-4 (uid453292@id-453292.ilkley.irccloud.com)
[14:16:13] *** Joins: keypusher (keypusher@user/keypusher)
[14:23:25] *** Quits: odrling (~odrling@korone.aidoru.agency) (Quit: see you space cowboy)
[14:23:46] *** Joins: odrling (~odrling@korone.aidoru.agency)
[14:30:29] *** Joins: sagax (~sagax_nb@user/sagax)
[14:31:41] <roxlu> Hi!
[14:33:06] <roxlu> Last week I've been looking into potential optimizations of a transcoder I'm working on. One particular part of the code might be something I can optimize but I'm not 100% sure.
[14:33:29] <roxlu> I've pasted a flame graph of one encode/filter here: https://imgur.com/a/bZo5zYG
[14:33:49] <roxlu> The call to `av_buffersink_get_frame` is the red block "get-frame".
[14:35:08] <roxlu> I'm not 100% sure here but would it make sense to e.g. create a thread where I read all the frames that `av_buffersink_get_frame()` gives me and store them in a buffer that is then used seperately from the encoder steps (the green blocks, pass-to-encoder, encoder-video)"
[14:35:26] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[14:35:53] <durandal11707> roxlu: you are deeply confused
[14:36:55] *** Joins: Fohsap_ (~Muimi@113.235.183.182)
[14:37:07] <durandal11707> better look why is (if it is at all) filtering slow
[14:40:17] *** Quits: Fohsap (~Muimi@2401:c080:1c02:ed3:5400:3ff:feb1:90a2) (Ping timeout: 250 seconds)
[14:41:02] <roxlu> durandal11707:  filter is ~15ms which is acceptable; encoding is also around 15ms. as my cpus are not yet 100% utilized it might be an option to move the filter to it's own thread to prevent the encoder waiting for the filter.
[14:41:45] <roxlu> durandal11707: I've added the `bench` element to the filter graph which gives me some info, but yeah I agree that I would love to know which element takes up most of the time.
[14:43:21] <durandal11707> roxlu: can same be observed with ffmpeg alone?
[14:43:34] <durandal11707> ffmpeg doing same thing
[14:43:43] <durandal11707> like your transcoder
[14:43:54] <roxlu> durandal11707: do you mean that timings of the filter graph? (yes they are similar)
[14:44:15] <roxlu> durandal11707: btw, this was just a thought, maybe this can't be optimized any more
[14:44:38] <durandal11707> what takes most of time? use perf record
[14:44:49] <roxlu> good point!
[14:47:55] <JEEB> depending on things moving filtering onto its own thing can make sense... but you gain the usual issue. each such separate work queue might fill up its output|input thing (f.ex. filtering going much faster than encoding, you start having a queue - and if input isn't going fast enough, your encoder will be waiting for work anyways. plus extra debug complexity).
[14:48:09] <roxlu> durandal11707: would it make sense to put the call to `av_buffersink_get_frame()` in it's own thread and then fill a queue with frames that I feed into encoders? I'm thinking that it could potentially read frames as fast as possible form the queue w/o waiting for the encoders to finish
[14:49:36] <roxlu> ah thanks JEEB
[14:51:11] <durandal11707> roxlu: is ffmpeg using single thread for filtering and encoding?
[14:51:15] <durandal11707> i doubt that
[14:51:31] <durandal11707> filters that support multithreading certainly not
[14:51:47] *** Quits: arbitercoin (~Rheanna@218.78.104.50) (Remote host closed the connection)
[14:52:29] <roxlu> I'm using the scale and crop filter (but not passing any croppiung settings atm)
[14:52:34] <JEEB> durandal11707: I think ffmpeg.c only has input reading in a separate thread
[14:52:47] <JEEB> I /think/ everything else goes through one thread
[14:53:04] <JEEB> the only check for HAVE_THREADS seems to be around input_thread
[14:53:05] <durandal11707> not multithreaded stuff
[14:53:32] <JEEB> well yes, the decoders, encoders and filters can have their own threading
[14:53:35] <roxlu> I've to get a bit more experience with perf, but this is what I'm seeing: https://gist.github.com/roxlu/f7c981a324f977217454eeedab9be927
[14:53:41] *** Joins: arbitercoin (~Rheanna@61.171.69.141)
[14:56:09] <durandal11707> roxlu: what ffmpeg version you use?
[14:56:28] <durandal11707> scale filter got thread support recently
[14:56:40] <durandal11707> but it still have some edge bugs
[14:57:16] <durandal11707> for crop filter - it does not do much work to be relevant for slowness
[14:57:22] <roxlu> durandal11707: ah ok, this is based on 4.4
[14:58:39] <roxlu> I'm now running a test where I still use the scale filter but I've set all scales to the same size of the input stream
[15:00:48] <roxlu> https://imgur.com/BT5zNeq the call to `av_buffersink_get_frame()` still takes ~16ms
[15:01:44] <roxlu> so my thinking was that it just needs time to get a frame; maybe because of memory copying or some transfer. if that could be done on a separate thread then the encoder could continue working a bit sooner
[15:04:20] <JEEB> but the main thing is, since everything is on a single loop, if one spot has hick-ups for some reason, the whole thing can slow down. network writes is one of the common things I've seen in ffmpeg.c. another is encoding for multiple things at the same time, where you'd probably want the filter chain outputs to be queried from multiple threads instead of one-by-one filter -> encoder -> check for output etc
[15:04:42] <JEEB> there was some not-really-great patch for more threading in ffmpeg.c, alas not a simple thing :P
[15:06:58] <realies> can this include multiple start/end regions? enable='between(t,10,60)',
[15:08:46] <durandal11707> roxlu: frameas are refcounted, so it really should not take that much
[15:09:08] <realies> also, could it be a negation of enable? so specify where the filter would be off?
[15:09:48] <JEEB> refcounting seems most useful right now when you have filters that read the image and don't need a writable one. also, do we build a ready rack of AVFrames of a specific size|pix_fmt if we think those are needed?
[15:10:10] <JEEB> because I am not sure if we recycle refcount-zero buffers
[15:10:31] <JEEB> so that if someone else then requests an AVFrame with buffer of some size, we grab it from the ready rack
[15:10:36] <JEEB> as opposed to allocating anew
[15:10:51] <JEEB> on linux of  course alloc is faster, but IIRC on windows this could give nice benefits
[15:12:17] *** Joins: a0z (~a0z@90.244.184.28)
[15:14:10] <durandal11707> i just can state that here with ffmpeg, 0.00%  ffmpeg  libavfilter.so.8.17.100  [.] av_buffersink_get_frame_flags takes almost no cycles to execute
[15:14:26] <durandal11707> with null filter
[15:14:27] <realies> seems like there's nothing native that inverts the enable timeline filter property
[15:14:53] <durandal11707> realies: you are deeply confused
[15:14:55] <JEEB> durandal11707: yea null filter I'd expect that :)
[15:15:09] <realies> durandal11707, I wouldn't be surprised
[15:15:35] <durandal11707> enable='between(t,10,60)+between(t,50,tea_time)'
[15:16:41] <realies> I'm going to try this, but I think I might have issues figuring out the end of the file
[15:17:07] <durandal11707> enable='not(between(t,10,60)+between(t,150,500))'
[15:17:12] <realies> lol
[15:17:21] <realies> 🙇
[15:17:36] <realies> thank you so much
[15:19:51] <roxlu> ok thanks again! currently it seems that my decode buffer is basically filled complety; so the filter/encoders have enough work to do. atm I would say it would make sense to split up the `[filter] -> [ encoders: { encode(filtered_frame }`]` loop into threads
[15:24:41] <durandal11707> if you know how to send frames to other thread, why not...
[15:25:18] <roxlu> ok thank so much JEEB and durandal11707 for taking time to share you thoughts!
[15:26:20] <roxlu> the only thing I'm not 100% sure of... is if calling `av_buffersink_get_frame()` would actually give me frames faster then atm. I would expect so though
[15:39:55] *** Joins: minimal (~minimal@user/minimal)
[15:40:57] *** Quits: blinky42 (~quassel@user/blinky42) (Ping timeout: 268 seconds)
[15:41:24] *** Quits: odrling (~odrling@korone.aidoru.agency) (Quit: see you space cowboy)
[15:41:45] *** Joins: odrling (~odrling@korone.aidoru.agency)
[15:41:45] *** Quits: arbitercoin (~Rheanna@61.171.69.141) (Remote host closed the connection)
[15:43:28] *** Joins: arbitercoin (~Rheanna@101.91.232.166)
[16:04:44] *** Quits: pntaylor (~quassel@2405:6e00:10da:8700::9) (Quit: No Ping reply in 180 seconds.)
[16:05:57] *** Joins: pntaylor (~quassel@2405:6e00:10da:8700::9)
[16:19:20] *** Joins: nillyhan (~00000000@user/nillyhan)
[16:29:24] *** Quits: odrling (~odrling@korone.aidoru.agency) (Quit: see you space cowboy)
[16:29:45] *** Joins: odrling (~odrling@korone.aidoru.agency)
[17:04:11] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 268 seconds)
[17:12:17] *** Quits: Nex8192 (~Nex8192@user/nex8192) (Quit: Don't watch me die)
[17:12:39] *** Joins: Nex8192 (~Nex8192@user/nex8192)
[17:21:38] *** Quits: arbitercoin (~Rheanna@101.91.232.166) (Remote host closed the connection)
[17:22:23] *** Quits: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net) (Quit: The Lounge - https://thelounge.chat)
[17:23:44] *** Joins: arbitercoin (~Rheanna@101.91.232.166)
[17:36:29] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[17:37:22] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[17:40:15] *** Joins: omegatron (~some@p54bd5e02.dip0.t-ipconnect.de)
[17:43:14] *** Quits: bitblit (~bitblit@gateway/tor-sasl/bitblit) (Remote host closed the connection)
[17:51:00] *** Quits: auth (~auth@user/auth) (Quit: Leaving)
[17:52:10] <znf> Would anyone have a look at https://pastie.dev/sqff7E.yaml -- I must be missing something to my patch, and I'm not sure what exactly; Context: I'm building my own static binaries with libnpp built-in, so I don't have to spread the cuda libs all across the machines I manage; Linker invocation: https://pastie.dev/6txpuH.yaml
[17:52:52] <znf> can't tell where: undefined reference to `Event' and undefined reference to `Stream' should be picked up from
[17:53:06] <znf> wonder if I'm missing some standard C++ headers or something in the libnpp files
[17:54:56] <BtbN> You need to manually resolve all dependencies of static libs. They have no system for that like shared libs do.
[17:55:37] <BtbN> If the documentation or pkg-config file does not tell you... you're probably out of luck
[17:58:03] *** Joins: bitblit (~bitblit@gateway/tor-sasl/bitblit)
[18:11:33] <znf> this worked until November 3 when you guys added libnppif to the mix
[18:11:42] *** Quits: arbitercoin (~Rheanna@101.91.232.166) (Remote host closed the connection)
[18:12:01] <znf> guess I'll just have to remove it with my patch if I can't figure out the depedency
[18:13:36] <znf> sadly Google is not helping at all, 'Stream' and 'Event' are too generic
[18:13:53] *** Joins: arbitercoin (~Rheanna@61.171.38.68)
[18:17:13] <znf> does the order of the libs matter? I think I asked this before but I can never remember
[18:30:15] *** Joins: SuRGeoNix (~SuRGeoNix@athedsl-4416395.home.otenet.gr)
[18:31:35] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 256 seconds)
[18:32:21] *** Joins: darkapex (~darkapex@user/darkapex)
[18:33:11] <SuRGeoNix> Hi, guys I'm using ffmpeg API to decode frames and I was wondering if possible to reverse decode and what is the best performance wise way to do it. As ffmpeg uses an internal buffer / caching, is it possible to request to decode a previously already decode packet/frame within the same keyframes (but not a keyframe). Or it requires to do all the
[18:33:11] <SuRGeoNix> decoding again (from the prev keyframe)?
[18:36:36] *** Joins: darkapex_ (~darkapex@user/darkapex)
[18:37:52] *** Quits: darkapex (~darkapex@user/darkapex) (Ping timeout: 265 seconds)
[18:40:21] <DHE> trying to make a video run backwards?
[18:43:17] <DHE> submitting packets out of order is a recipe for disaster. I would strongly advise not doing it. if playing in reverse is important to you, maybe you want an intra-only codec, very short keyframe intervals, and/or a fast decode preset for the encoder?
[18:43:46] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 260 seconds)
[18:46:22] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[18:46:33] *** Quits: Fohsap_ (~Muimi@113.235.183.182) (Ping timeout: 268 seconds)
[18:48:53] <SuRGeoNix> @DHE I'm not working with specific videos/codecs. I'm developing a media player and sometimes I just want to go one frame back or implement generally reverse playback. Trying to finger out what would be the best approach.
[18:51:02] *** Quits: Colt (~Colt@user/colt) (Ping timeout: 240 seconds)
[18:54:14] <DHE> ah.... that problem is that doing so generically could be such a pain. especially with good modern(ish) codecs (eg: h264), low keyframe intervals aren't necessary for image quality and so there really isn't a guarantee of how often they will show up
[18:55:25] *** Joins: mixfix41 (~homefame@user/mixfix41)
[18:57:15] <SuRGeoNix> @DHE There is an old discussion about this here https://stackoverflow.com/questions/9392152/mpeg-backwards-frame-decoding-using-ffmpeg and it's interesting what they say about "This is done by on the fly conversion of P frames into I frames"
[18:58:16] <znf> the nVidia developer forum is absolute trash, been trying to log on for the last 5 minutes
[18:59:47] *** Joins: auth (~auth@user/auth)
[19:05:49] *** Joins: System_Error (~SystemErr@user/systemerror)
[19:05:56] *** Quits: auth (~auth@user/auth) (Quit: Leaving)
[19:10:11] <BtbN> The only way to play any modern codec backwards is to decode the whole thing, cache it somewhere (potentially HUGE amounts of data), and then play that back in reverse
[19:10:41] <BtbN> Alternatively you can keep decoding/skipping over the whole file until you reach your frame, play it, and then start over
[19:10:51] <BtbN> Can optimize the later a bit to do it in blocks you can reasonably cache
[19:10:57] <BtbN> other than that... nope, can't play backwards
[19:11:57] <kepstin> SuRGeoNix: for what it's worth, mpv's backwards framestep just seeks to the previous keyframe and decodes to the desired frame *every time*, which means that in videos with long gops it'll vary wildly in speed depending on where in the gop you are.
[19:12:31] <BtbN> znf, look at what the shared lib links against?
[19:12:54] <BtbN> But in any case, statically linking libnpp is very much against the GPL, so... please don't.
[19:13:15] <znf> I'm not redistributing it, it just makes my own management easier
[19:13:35] <BtbN> Just ship the libs along it.
[19:13:52] <BtbN> A lot simpler to manage than dealing with static linking without a .pc file
[19:14:04] <znf> I did look at the dynamic lib, but other than gcc_s nothing stands out
[19:14:11] <BtbN> And yes, order very much matters.
[19:14:27] <znf> Nothing seems particular to just nppif
[19:15:42] <SuRGeoNix> Thanks guys, I guess it doesn't worth performance wise then to implement it!
[19:15:48] <DHE> SuRGeoNix: that basically suggests re-compressing the video frames. that's not a bad idea. but for size reasons, it might even make sense to downscale them as well?
[19:16:00] <BtbN> Stream and Event both are CUDA Things
[19:16:06] <BtbN> so probably some CUDA C++ library
[19:16:17] <BtbN> just dump the symbol table of everything and grep
[19:17:22] <SuRGeoNix> @DHE It doesn't sound like a solution then, except the difficulty to implement it you will loose also the quality
[19:18:03] <znf> Oh, how do I do that? My approach was to unarchive all .a's but that didn't go too well
[19:19:03] <BtbN> I doubt there's a static lib for that
[19:19:08] <BtbN> it's probably some cuda C++ lib
[19:20:35] <BtbN> With how insanely generic those symbol names are, there's also a good chance it's just Nvidia having forgotten a "static" somewhere
[19:20:57] <DHE> SuRGeoNix: no it's not a great solution, but the point is playing backwards is not an intended feature of most typical codecs and you're trying to shoehorn it in. something has to give
[19:22:04] <SuRGeoNix> DHE, I would not bother believe me. Some users of my library requested :)
[19:22:48] <BtbN> Skipping back a few frames is rather simple, at the expense of some RAM
[19:23:10] <BtbN> (Thought even that could be a lot of RAM, if it's 4K or something)
[19:23:55] <DHE> even at 1080p you're looking at ~3 MB of RAM per frame (yuv420)... which doesn't sound like a lot, but could add up quickly
[19:24:18] <SuRGeoNix> BtbN You mean keeping all the decoded frames in the RAM (which is VRAM in my case) ... That could be really a lot between keyframes, which make it impossible to keep it in VRAM
[19:24:32] <BtbN> Well, just a handful
[19:24:40] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[19:24:49] <BtbN> The most common usecase is probably a user wanting a specific freeze frame, but missing it by a little bit when pausing
[19:25:11] <BtbN> keyframes are entirely irrelevant for that approach
[19:25:28] <SuRGeoNix> Yea, I have already implement the accurate seeking to specific time/frame. and getting next/prev frames
[19:26:45] <SuRGeoNix> However, even there might having issues. You can't say for sure how many total frames a video has. And you can't guess the timestamp of X frame (in case of variable frame rate)
[19:43:49] *** Quits: Stalker (~Stalker@89.201.5.246) (Quit: ZNC 1.8.2 - https://znc.in)
[19:44:02] *** Joins: Stalker (~Stalker@89.201.5.246)
[19:51:34] *** Joins: rsx (~dummy@ppp-188-174-130-113.dynamic.mnet-online.de)
[19:51:36] *** Quits: arbitercoin (~Rheanna@61.171.38.68) (Remote host closed the connection)
[19:51:53] *** Quits: N77 (~N77@075-112-092-167.res.spectrum.com) (Quit: Connection closed)
[19:53:16] *** Joins: arbitercoin (~Rheanna@218.78.105.67)
[19:56:20] <emcodem> @SuRGeoNix  one method that i know from others is that they track the "play duration" and whenever it changes, they fill a little buffer with a small amount of frames, e.g. next or last second.
[19:56:46] <emcodem> Of course if the user is too fast on the timeline it goes boom, "please wait while decoding" :D
[19:59:35] *** Joins: vlm (~vlm@user/vlm)
[19:59:37] <emcodem> but i have never seen anything that is able to work frame accurate and with great performance with "any type of codec/format"...
[20:02:19] <emcodem> u can check out how it works (it's a portable application for windows):
[20:02:19] <emcodem> https://xdreamgroup-my.sharepoint.com/:u:/g/personal/harald_jordan_x-dream-media_com/ESEJE13ZBs1FojN1RYxKPOMB1OEX76S1SlWoXFc8LYfnRA?e=raSSsp
[20:03:54] *** Quits: rsx (~dummy@ppp-188-174-130-113.dynamic.mnet-online.de) (Quit: rsx)
[20:04:26] <JEEB> mpv has an insane feature of having backwards playback
[20:04:36] <JEEB> I have no idea how well it works, but it's a thing
[20:04:56] <JEEB> but yes, it buffers a GOP's worth
[20:05:43] <JEEB> but yea, if you want to do it with containers that have no index you'll have to do some indexing yourself (a la ffms2)
[20:29:29] *** Joins: auth (~auth@user/auth)
[20:41:22] *** Quits: dreamon (~dreamon@ppp-88-217-64-242.dynamic.mnet-online.de) (Ping timeout: 260 seconds)
[20:41:35] *** Quits: cmp (~cmp@lfbn-ren-1-1468-31.w90-27.abo.wanadoo.fr) (Quit: Connection closed)
[20:41:44] *** Quits: arbitercoin (~Rheanna@218.78.105.67) (Remote host closed the connection)
[20:42:54] *** Joins: neverfindme (~hayden@158.123.160.43)
[20:44:07] *** Joins: arbitercoin (~Rheanna@61.171.21.169)
[20:55:06] *** Joins: Narrat (~omnius@p200300df5f0df13d06ea56fffe2e7cdc.dip0.t-ipconnect.de)
[21:00:09] *** Joins: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net)
[21:07:07] <SuRGeoNix> Thanks for you advices guys
[21:07:36] *** Quits: SuRGeoNix (~SuRGeoNix@athedsl-4416395.home.otenet.gr) (Quit: Connection closed)
[21:09:17] *** Quits: neverfindme (~hayden@158.123.160.43) (Quit: Leaving)
[21:21:11] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[21:22:51] *** Quits: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Ping timeout: 245 seconds)
[21:24:31] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 245 seconds)
[21:26:44] *** Joins: waleee (~waleee@h-82-196-111-63.NA.cust.bahnhof.se)
[21:26:46] *** Joins: dreamon (~dreamon@pd9503f0b.dip0.t-ipconnect.de)
[21:29:13] *** Joins: AbleBacon_ (~AbleBacon@user/AbleBacon)
[21:32:24] *** Quits: arbitercoin (~Rheanna@61.171.21.169) (Remote host closed the connection)
[21:32:48] *** Joins: arbitercoin (~Rheanna@61.171.38.68)
[21:37:52] *** Joins: kib (~kib@user/kib)
[21:41:36] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 276 seconds)
[21:43:05] *** Quits: Vonter (~Vonter@user/vonter) (Quit: WeeChat 3.3)
[21:45:37] *** Joins: System_Error (~SystemErr@user/systemerror)
[21:45:51] *** Joins: Guest9482 (~Buster@46.160.36.66)
[21:46:30] *** Joins: xkuru (~xkuru@user/xkuru)
[21:55:38] *** Joins: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3)
[22:02:29] *** Quits: pong (~beaver@user/pong) (Remote host closed the connection)
[22:03:21] *** Joins: pong (~beaver@user/pong)
[22:09:55] *** Joins: cosimone` (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3)
[22:11:42] *** Quits: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Read error: Connection reset by peer)
[22:18:59] *** Joins: nillyhan (~c0a80070@user/nillyhan)
[22:19:00] *** Quits: AbleBacon_ (~AbleBacon@user/AbleBacon) (Quit: I am like MacArthur; I shall return.)
[22:21:36] *** Quits: cosimone` (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Ping timeout: 245 seconds)
[22:29:45] <znf> BtbN, I'm guessing libnppc.so contains Stream and Event, right? https://pastie.dev/hNKnXn.yaml
[22:30:20] <BtbN> Yeah, looks like it
[22:30:23] <BtbN> what a horrible symbol name
[22:30:28] <znf> indeed
[22:30:45] <BtbN> so, just fix your library order then
[22:30:57] <znf> but it's already: -lnppicc_static -lnppc_static -lnppidei_static -lcudart_static -lnppif_static
[22:31:14] <znf> do I need nppif *before*? that sounds counter-intuitive
[22:31:38] <BtbN> You need nppc after nppif if nppif uses symbols from nppc.
[22:31:49] <znf> oh
[22:32:53] *** Quits: kib (~kib@user/kib) (Quit: WeeChat 3.3)
[22:35:25] *** Joins: GuiToris (~GuiToris@user/guitoris)
[22:35:26] <znf> think I broke something else, doing a make clean and trying again
[22:36:14] <znf> yay, worked, thanks BtbN
[22:36:48] <GuiToris> hello, I have many videos to transcode. I think I would use 'ffmpeg' with 'nice', so my computer would be still usable. I was wondering if I leave it as it is, will the overall encoding be slower, even if I'm not using the computer?
[22:37:00] <GuiToris> should I renice everytime I finished using the computer?
[22:37:30] <znf> I mean you *could* do that, if time is of no essence
[22:37:33] <znf> or limit just to 1 thread
[22:38:08] <znf> although quality might suffer with some encoders
[22:38:12] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 260 seconds)
[22:40:17] <GuiToris> wait what
[22:40:33] <GuiToris> znf, if I use nice, will the quality be worse?
[22:40:59] <znf> no, if you limit -threads *some* encoders might produce a lower quality encode
[22:41:55] <znf> you can use nice, sure, but it's a weird way to handle it
[22:43:00] <furq> uh
[22:43:24] <furq> what encoders are you thinking of there
[22:43:53] <znf> didn't someone mention that *some* encoders might produce lower quality if using -threads 1 ?
[22:44:04] <znf> I recall it being a discussion a few months ago
[22:44:17] <furq> it should be the opposite
[22:44:25] <GuiToris> znf, what would you suggest?
[22:44:56] <znf> I don't know enough about your task to suggest anything
[22:48:23] <GuiToris> nothing special, firefox, libreoffice, file copies
[22:48:38] <GuiToris> encoding really eats up our resources
[22:48:55] <GuiToris> but you said it was a weird way to handle it
[22:49:38] <znf> Schedule it at night? Use the GPU? Use a dedicated machine for it?
[22:49:48] *** Quits: durandal11707 (~computer@95.168.121.37) (Quit: Reconnecting)
[22:49:59] *** Joins: mixfix41 (~homefame@user/mixfix41)
[22:51:38] *** Joins: durandal_1707 (~computer@95.168.121.37)
[22:56:07] <GuiToris> at night, haha, it'll take 50 hours to encode only this one
[23:02:30] <emcodem> @GuiToris it depends a lot on what your pc does in the backgroud. I could just leave it on low prio because as soon as i leave, it will mostly get it's 95% at least
[23:03:14] <GuiToris> got it, thank you :)
[23:09:25] *** Joins: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com)
[23:10:29] *** Quits: blb (~blb@user/blb) (Ping timeout: 268 seconds)
[23:11:09] *** Joins: blb (~blb@user/blb)
[23:12:05] *** Quits: arbitercoin (~Rheanna@61.171.38.68) (Remote host closed the connection)
[23:14:08] *** Joins: arbitercoin (~Rheanna@101.89.150.168)
[23:21:31] <znf> ...wtf are you encoding for 50 hours
[23:22:01] *** Quits: colona (~colona@grunt.ycc.fr) (*.net *.split)
[23:22:07] <znf> you encoding VP9?
[23:22:31] *** Joins: colona (~colona@grunt.ycc.fr)
[23:23:23] *** Quits: GuiToris (~GuiToris@user/guitoris) (Remote host closed the connection)
[23:45:19] *** Joins: LorenDB[m] (~lorendbma@2001:470:69fc:105::785)
[23:45:55] <LorenDB[m]> I'm on openSUSE Tumbleweed, and my Opera browser won't open. It just prints `/usr/lib64/opera/opera: symbol lookup error: /usr/lib64/opera/opera: undefined symbol: av_stream_get_first_dts` when I try to run it. Is `av_stream_get_first_dts` something from FFmpeg or not?
[23:45:56] <LorenDB[m]> I'm trying to track down what package might be the problem.
[23:45:57] <LorenDB[m]> (I had installed some packages from other repos; now Opera doesn't work.)
[23:48:58] *** Quits: VarunAgw (~VarunAgw@103.158.148.26) (Ping timeout: 260 seconds)
