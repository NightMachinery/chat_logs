[00:19:16] *** Joins: pedalo (~pedalo@2a01:cb10:83bc:c700:e432:de81:632f:e70d)
[00:27:41] *** Joins: betelgeuse (~john2gb@94-225-47-8.access.telenet.be)
[00:28:17] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:30:20] *** Joins: GuestOnAQuest (~GuestOnAQ@pool-100-15-137-31.washdc.fios.verizon.net)
[00:30:55] *** Quits: GuestOnAQuest (~GuestOnAQ@pool-100-15-137-31.washdc.fios.verizon.net) (Client Quit)
[00:33:51] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Quit: WeeChat 3.2)
[00:55:02] *** Joins: Buster_ (~Buster@buster-net.ru)
[01:20:37] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[01:21:13] *** Quits: pedalo (~pedalo@2a01:cb10:83bc:c700:e432:de81:632f:e70d) (Quit: Leaving)
[01:46:46] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[01:47:00] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[01:50:53] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[01:52:02] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[02:10:58] *** beaver is now known as pong
[02:16:21] *** Joins: pedalo (~pedalo@2a01:cb10:83bc:c700:e432:de81:632f:e70d)
[02:16:40] *** Quits: pedalo (~pedalo@2a01:cb10:83bc:c700:e432:de81:632f:e70d) (Remote host closed the connection)
[02:23:48] *** Quits: jokoon (~eio@2a01:e0a:542:e160:a9b0:960e:c8b7:a6f1) (Read error: Connection reset by peer)
[02:24:37] *** Quits: finsternis (~X@23.226.237.192) (Remote host closed the connection)
[02:44:00] *** Quits: Buster_ (~Buster@buster-net.ru) ()
[02:56:12] *** Quits: woohoiV5 (~woohoiV5@89-139-19-40.bb.netvision.net.il) (Ping timeout: 272 seconds)
[02:57:26] *** Joins: woohoiV5 (~woohoiV5@89-139-14-81.bb.netvision.net.il)
[03:21:21] *** Quits: betelgeuse (~john2gb@94-225-47-8.access.telenet.be) (Quit: The Lounge - https://thelounge.chat)
[03:24:15] *** Joins: woohoiV5_ (~woohoiV5@46-117-154-242.bb.netvision.net.il)
[03:24:58] *** Quits: woohoiV5 (~woohoiV5@89-139-14-81.bb.netvision.net.il) (Ping timeout: 265 seconds)
[03:28:02] *** Joins: cmdrmoozy (~ajr@c-73-15-53-187.hsd1.ca.comcast.net)
[03:34:27] <cmdrmoozy> Hi, I'm trying to build a thing where I use ffmpeg (4.4) to from a webcam -> ldash stream -> embed it in a webpage. I'm having trouble getting encoding to happen in realtime. I think I have to use vp9, since it sems browsers don't (widely?) support h264, I guess due to patent nonsense. Here's my ffmepg command, which I think is setup properly for honestly pretty low quality, but nonetheless speed isn't
[03:34:33] <cmdrmoozy> consistently 1.0 even on a fairly modern Ryzen. Any suggestions? https://dpaste.org/pMFv
[03:44:56] *** Joins: Nact (~l@host-85-27-120-179.dynamic.voo.be)
[03:47:36] <furq> all browsers support h264
[03:48:21] <furq> at least all the ones you need to care about supporting
[03:50:17] *** Joins: orzo (joe@lasker.childrenofmay.org)
[03:50:41] <orzo> Hello.  I want to do a screen capture with soundcard audio capture.
[03:50:50] <orzo> My system is using pulse audio
[03:51:05] <orzo> I tried the suggestion at https://trac.ffmpeg.org/wiki/Capture/Desktop
[03:51:27] <cmdrmoozy> so for example, this ffmpeg command yields a stream which dashjs refuses to play (in firefox): https://dpaste.org/9j0X
[03:51:51] <cmdrmoozy> maybe I'm doing it wrong and this isn't really h264 in some sense or another?
[03:52:30] <cmdrmoozy> orzo: what about it isn't working?
[03:54:34] <orzo> it captures the display, but no audio
[03:54:48] <orzo> i tried the alsa and the pulse variations
[03:55:04] <orzo> i'm using festival speech synth to make noise
[03:55:18] <orzo> i need that noise to be captured
[03:55:57] <orzo> i want to make a video showing the user experience for some speech-enabled ui i'm developing
[03:56:09] <cmdrmoozy> ah so the example there like "-f pulse -ac 2 -i default" is capturing from the default *input* device e.g. microphone
[03:56:19] <orzo> oh
[03:56:21] <cmdrmoozy> I'm not too familiar how to capture your *output*
[03:56:24] <orzo> yeah, i want the output
[03:56:40] <orzo> adding in the mic would be useful too
[03:56:54] <orzo> but i want the output audio
[03:57:31] <orzo> mic will let me add comentary about the UI i'm trying to showcase
[03:58:11] <furq> cmdrmoozy: only 4:2:0 h264 is widely supported
[03:58:18] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 258 seconds)
[03:58:20] <furq> but i think the same is true for vp9
[03:58:21] <cmdrmoozy> this has some suggestion, I guess pulseaudio hass this "monitor" device that does what you want? https://askubuntu.com/questions/682144/capturing-only-desktop-audio-with-ffmpeg
[03:58:41] <furq> i know chrome does 4:4:4 and maybe rgb but i don't think much else does
[03:59:05] <cmdrmoozy> so that's, -profile:v main?
[03:59:14] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[03:59:16] <furq> high
[03:59:18] <furq> or don't set it at all
[03:59:30] <cmdrmoozy> ah instead of high422
[03:59:52] <furq> it'll be baseline profile by default since you're using ultrafast and zerolatency
[04:00:16] <furq> so probably just don't set it and let x264 pick the most appropriate one
[04:00:51] <orzo> did the trick, thanks cmdrmoozy
[04:01:19] <furq> you might also need -pix_fmt yuv420p if your webcam is outputting 4:2:2
[04:01:20] <orzo> im not sure it was synced properly though
[04:01:35] <orzo> audio seemed delayed
[04:01:57] <cmdrmoozy> it seems to pick 4:2:2 by default, I guess because (it thinks?) the input stream is 4:2:2?
[04:02:14] <furq> yeah it won't convert by default
[04:02:27] *** Quits: MrZeus__ (~MrZeus@2a02:c7f:a0aa:4400:ece3:18f2:d4ff:30c6) (Ping timeout: 256 seconds)
[04:04:08] <cmdrmoozy> aha yeah a "-pix_fmt yuv420p" before the "-c:v" does the trick, cool thanks furq
[04:04:59] <cmdrmoozy> one dumb question, I have this device that has a hardware h264 encoder, but it outputs high422 as well as far as I can tell... is it just as CPU expensive to encode mjpeg -> h264 high, as it would be to transcode the high422 output to high?
[04:05:25] <cmdrmoozy> I think it would have to decode and then reencode right, or is there some cheaper implementation
[04:06:08] <furq> you can use hardware decoding if the box has a gpu that'll do it
[04:06:22] <furq> also i think the h264 decoder is multithreaded and the mjpeg decoder isn't
[04:06:23] *** Quits: thebombzen (~thebombze@71.73.92.220) (Quit: attack.c:4: main: Assertion `I_can_beat_that_monster' failed. Aborted (core dumped))
[04:06:44] *** Joins: thebombzen (~thebombze@71.73.92.220)
[04:06:53] <furq> but the encoding will be much more resource intensive anyway
[04:06:56] *** Quits: thebombzen (~thebombze@71.73.92.220) (Client Quit)
[04:13:05] *** Joins: Fohsap (~Muimi@113.235.191.112)
[04:24:59] *** Joins: ban (25aacc3f@ircip1.mibbit.com)
[05:02:09] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:11:39] <cmdrmoozy> hmm okay it seems unclear to me the hardware encoder actually emits unplayable (by browsers) data... I think the problem might just be that the dash muxer puts 'codecs="avc1.42c028"' in the manifest in the software encoding case, whereas with the hardware encoder it's simply 'avc1' (no suffix)
[05:12:31] <furq> the bit after the dot is the profile and level
[05:13:03] <cmdrmoozy> right, so I think the problem is ffmpeg has no idea what profile/level the hardware thing is using, so it just omits it
[05:13:05] <furq> so i guess the hardware encoder is outputting something the muxer doesn't know about
[05:18:23] *** Quits: shibboleth (~shibbolet@gateway/tor-sasl/shibboleth) (Quit: shibboleth)
[05:22:40] <cmdrmoozy> so if I just write the hardware encoder's output to a .mp4 file, and then ffprobe it, I get this: https://dpaste.org/Zt2r -- since it's got profile=High and pix_fmt=yuv420p, I think it should be 42c028 as well
[05:22:57] <cmdrmoozy> but since that isn't a thing the h264_v4l2m2m codec takes as an argument, ffmepg doesn't know it
[05:23:13] <ban> hey guys, is this irc also around libav or mostly just ffmpeg cli usage?
[05:29:02] *** Quits: Nact (~l@host-85-27-120-179.dynamic.voo.be) (Quit: Konversation terminated!)
[05:29:28] *** Joins: zmt01 (~zmt00@user/zmt00)
[05:30:25] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:30:42] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[05:37:32] *** Quits: omegatron (~some@p5b056bc7.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[05:43:05] *** Joins: meinside (uid24933@id-24933.brockwell.irccloud.com)
[05:51:53] *** Joins: linjie (~linjie@58.247.210.251)
[05:54:43] *** Joins: Nact (~l@host-85-27-120-179.dynamic.voo.be)
[05:57:47] *** Joins: vlm (~vlm@user/vlm)
[06:09:20] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[06:10:15] *** Joins: linjie (~linjie@58.247.210.251)
[06:14:22] <Fohsap> do you guys know if there is any kind of free tool that tries to fill frames between frames in animation?
[06:15:04] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 272 seconds)
[06:18:20] <Fohsap> Would anyone know a good way to reduce audio quality with the least damage possible with a target filesize (48 mb)
[06:24:53] <klaxa> first question, there is https://www.svp-team.com/ second question: you could use constant bitrate and just make sure that length * bitrate equals target filesize
[06:45:38] <Fohsap> The length being 3908 seconds....  target filesize being 48000000 bytes (I think) so 48000/3908.... hmm 12828.497 bitrate?
[06:45:55] <Fohsap> klaxa sorry to ask.  I've never done this equation before
[06:52:22] *** Joins: therobin_ (~UserNick@69-165-144-254.dsl.teksavvy.com)
[06:52:23] *** Quits: ban (25aacc3f@ircip1.mibbit.com) (Quit: https://mibbit.com Online IRC Client)
[06:54:43] *** Quits: therobin (~UserNick@216.154.35.64) (Ping timeout: 256 seconds)
[06:54:48] *** therobin_ is now known as therobin
[06:59:49] *** Joins: linjie (~linjie@58.247.210.251)
[07:03:12] *** Joins: jos2 (~jos3@dyndsl-095-033-175-106.ewe-ip-backbone.de)
[07:04:13] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 258 seconds)
[07:06:54] *** Quits: jos1 (~jos3@dyndsl-091-248-052-111.ewe-ip-backbone.de) (Ping timeout: 258 seconds)
[07:13:25] *** Quits: der_richter (~Akemi@p4fde4fad.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:19:02] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 272 seconds)
[08:16:56] <klaxa> well it's bytes so you gotta multiply by 8, you'd end up at ~98 kbps so 96 kbps is a nice number to try? should theoretically come in slightly under 48 mb
[08:29:56] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 256 seconds)
[08:30:25] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:31:28] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[08:34:15] *** \ is now known as |
[08:34:19] *** | is now known as \
[09:10:46] *** Quits: arcatech (~arcatech@user/arcatech) (Remote host closed the connection)
[09:31:55] *** Quits: metta (~Advanced@2a01:4f8:1c0c:49df::1) (*.net *.split)
[09:31:55] *** Quits: genius3000 (g3k@user/genius3000) (*.net *.split)
[09:31:55] *** Quits: reynaldo (~reynaldo@ec2-34-200-7-37.compute-1.amazonaws.com) (*.net *.split)
[09:31:55] *** Quits: olspookishmagus (~pookie@snf-137798.vm.okeanos.grnet.gr) (*.net *.split)
[09:31:55] *** Quits: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com) (*.net *.split)
[09:31:55] *** Quits: znf (~ibm86@toaster.linge-ma.ro) (*.net *.split)
[09:31:55] *** Quits: Zouppen_ (~joell@jkl.hacklab.fi) (*.net *.split)
[09:31:55] *** Quits: ullbeking (sid5364@id-5364.charlton.irccloud.com) (*.net *.split)
[09:31:55] *** Quits: garfvl (~root@ns530260.ip-149-56-24.net) (*.net *.split)
[09:31:55] *** Quits: KyleSiefring (~quassel@ec2-35-174-255-234.compute-1.amazonaws.com) (*.net *.split)
[09:31:55] *** Quits: Polochon_street (~polochon@2001:41d0:a:64a5::1) (*.net *.split)
[09:32:01] *** Joins: pookie (~pookie@snf-137798.vm.okeanos.grnet.gr)
[09:32:01] *** Joins: Zouppen (~joell@jkl.hacklab.fi)
[09:32:11] *** Joins: genius3000 (g3k@user/genius3000)
[09:32:16] *** Joins: reynaldo (~reynaldo@ec2-34-200-7-37.compute-1.amazonaws.com)
[09:32:23] *** Joins: ullbeking (sid5364@id-5364.charlton.irccloud.com)
[09:32:23] *** Joins: upekkha (~Advanced@2a01:4f8:1c0c:49df::1)
[09:32:30] *** Joins: garfvl (~root@ns530260.ip-149-56-24.net)
[09:33:06] *** Joins: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com)
[09:33:58] *** Quits: brb (~brb@user/brb) (*.net *.split)
[09:33:58] *** Quits: haasn (~nand@haasn.dev) (*.net *.split)
[09:33:58] *** Quits: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37) (*.net *.split)
[09:33:58] *** Quits: Riviera (Riviera@user/riviera) (*.net *.split)
[09:33:58] *** Quits: Stalker (~Stalker@89.201.5.246) (*.net *.split)
[09:33:58] *** Quits: meepmeep (~meepmeep@end.of.cylind.re) (*.net *.split)
[09:33:58] *** Quits: tmatth (sid143283@videolan/developer/tmatth) (*.net *.split)
[09:33:58] *** Quits: APic (apic@apic.name) (*.net *.split)
[09:33:58] *** Quits: occivink (~occivink@2001:41d0:8:bbf::1) (*.net *.split)
[09:34:07] *** Joins: Stalker (~Stalker@89.201.5.246)
[09:34:07] *** Joins: meepmeep_ (~meepmeep@end.of.cylind.re)
[09:34:17] *** Joins: EPic_ (apic@apic.name)
[09:34:22] *** Joins: tmatth (sid143283@id-143283.tooting.irccloud.com)
[09:34:29] *** Joins: occivink (~occivink@2001:41d0:8:bbf::1)
[09:35:16] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (*.net *.split)
[09:35:16] *** Quits: wacko (~wacko@wireguard/tunneler/wacko) (*.net *.split)
[09:35:16] *** Quits: hendry (~hendry@210.23.22.2) (*.net *.split)
[09:35:16] *** Quits: pyre (~pyre@crimeboss.nillas-power.com) (*.net *.split)
[09:35:16] *** Quits: jkqxz (~mrt@jkqxz.net) (*.net *.split)
[09:35:17] *** Quits: benbrown (~benbrown@user/benbrown) (*.net *.split)
[09:35:17] *** Quits: edenist (~edenist@rdns.robotprofessor.net) (*.net *.split)
[09:35:17] *** Quits: Naleksuh (sid454423@user/naleksuh) (*.net *.split)
[09:35:17] *** Quits: irwiss (~irwiss@user/irwiss) (*.net *.split)
[09:35:26] *** Joins: jkqxz_ (~mrt@jkqxz.net)
[09:35:27] *** Joins: wacko_ (~wacko@mc3.data.slu.se)
[09:35:30] *** Joins: edenist (edenist@rdns.robotprofessor.net)
[09:35:54] *** Joins: hendry (~hendry@210.23.22.2)
[09:35:58] *** Joins: Naleksuh (sid454423@id-454423.charlton.irccloud.com)
[09:36:17] *** Quits: roxlu (~roxlu@2a01:7c8:aac0:286:8c3a:b01c:3830:245b) (*.net *.split)
[09:36:17] *** Quits: flowy1 (~flowy@2a01:4f8:c0c:1a8f::1) (*.net *.split)
[09:36:17] *** Quits: brontosaurusrex (~woot@user/brontosaurusrex) (*.net *.split)
[09:36:17] *** Quits: w1kl4s (~w1kl4s@user/w1kl4s) (*.net *.split)
[09:36:17] *** Quits: GTAXL (~gtaxlnetw@user/gtaxl) (*.net *.split)
[09:36:17] *** Quits: berndj (~berndj@ns1.linksynergy.co.za) (*.net *.split)
[09:36:17] *** Quits: TimothyGu (sid27994@id-27994.brockwell.irccloud.com) (*.net *.split)
[09:36:17] *** Quits: tofran (~tofran@37.189.158.134) (*.net *.split)
[09:36:18] *** Quits: hwm4rgs (~hwm4rgs@user/hwm4rgs) (*.net *.split)
[09:36:18] *** Quits: orzo (joe@lasker.childrenofmay.org) (*.net *.split)
[09:36:18] *** Quits: Syrup (uid10029@user/maple) (*.net *.split)
[09:36:18] *** Quits: q66 (~q66@q66.moe) (*.net *.split)
[09:36:18] *** Quits: reda (~reda@user/reda) (*.net *.split)
[09:36:18] *** Quits: termos (sid18647@id-18647.brockwell.irccloud.com) (*.net *.split)
[09:36:18] *** Quits: lullerhaus_ (SAI@aws.imelik.info) (*.net *.split)
[09:36:23] *** Joins: orzo_ (joe@lasker.childrenofmay.org)
[09:36:23] *** Joins: q66_ (~q66@q66.moe)
[09:36:32] *** Joins: roxlu (~roxlu@2a01:7c8:aac0:286:8c3a:b01c:3830:245b)
[09:36:33] *** Joins: flowy1 (~flowy@2a01:4f8:c0c:1a8f::1)
[09:36:39] *** Joins: TimothyGu (sid27994@id-27994.brockwell.irccloud.com)
[09:36:49] *** Joins: termos (sid18647@2001:67c:2f08:5::48d7)
[09:36:56] *** Joins: brontosaurusrex (~woot@2a00:ee2:90a:df00:36d4:e0be:19f3:9ed1)
[09:37:05] *** Joins: Syrup (uid10029@2001:67c:2f08:4::272d)
[09:40:35] *** Quits: ChanServ (ChanServ@services.libera.chat) (*.net *.split)
[09:40:44] *** Joins: benbrown (~benbrown@quassel.demerara.io)
[09:41:17] *** Joins: ChanServ (ChanServ@services.libera.chat)
[09:41:17] *** tin.libera.chat sets mode: +o ChanServ
[09:41:31] *** Quits: tmatth (sid143283@id-143283.tooting.irccloud.com) (Changing host)
[09:41:31] *** Joins: tmatth (sid143283@videolan/developer/tmatth)
[09:41:36] *** Syrup is now known as Guest9726
[09:41:36] *** wacko_ is now known as Guest9436
[09:41:36] *** Quits: Naleksuh (sid454423@id-454423.charlton.irccloud.com) (Changing host)
[09:41:36] *** Joins: Naleksuh (sid454423@user/naleksuh)
[09:41:38] *** Quits: Guest9726 (uid10029@2001:67c:2f08:4::272d) (Changing host)
[09:41:38] *** Joins: Guest9726 (uid10029@user/maple)
[09:41:54] *** Quits: Guest9436 (~wacko@mc3.data.slu.se) (Changing host)
[09:41:54] *** Joins: Guest9436 (~wacko@wireguard/tunneler/wacko)
[09:42:03] *** Quits: benbrown (~benbrown@quassel.demerara.io) (Changing host)
[09:42:03] *** Joins: benbrown (~benbrown@user/benbrown)
[09:42:36] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[09:42:52] *** Joins: pyre (~pyre@crimeboss.nillas-power.com)
[09:43:03] *** Joins: lullerhaus (SAI@aws.imelik.info)
[09:43:20] *** Joins: KyleSiefring (~quassel@ec2-35-174-255-234.compute-1.amazonaws.com)
[09:43:31] *** Joins: Polochon_street (~polochon@2001:41d0:a:64a5::1)
[09:43:35] *** Joins: galad (~galad@2605:6400:30:fb0b:56b5:20c1:fdb5:df37)
[09:43:35] *** Joins: GTAXL (~gtaxlnetw@user/gtaxl)
[09:43:47] *** Joins: haasn (~nand@haasn.dev)
[09:43:53] *** Joins: znf (~ibm86@toaster.linge-ma.ro)
[09:43:56] *** Joins: berndj (~berndj@ns2.linksynergy.co.za)
[09:45:43] *** Joins: darkapex (uid360049@user/darkapex)
[09:46:29] *** Joins: brb (~brb@user/brb)
[09:46:31] *** Joins: reda (~reda@user/reda)
[09:55:06] *** Quits: cmdrmoozy (~ajr@c-73-15-53-187.hsd1.ca.comcast.net) (Quit: leaving)
[09:58:00] *** Joins: Flabb (~Flabb@89.169.84.117)
[10:41:56] *** Quits: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net) (Quit: The Lounge - https://thelounge.chat)
[10:44:36] *** Quits: Arwalk (~Arwalk@lfbn-dij-1-263-107.w86-235.abo.wanadoo.fr) (Quit: The Lounge - https://thelounge.chat)
[10:51:40] *** pong is now known as beaver
[10:53:51] *** Joins: calamari (~calamari@ip72-217-21-192.ph.ph.cox.net)
[10:57:17] *** Joins: Arwalk (~Arwalk@lfbn-dij-1-263-107.w86-235.abo.wanadoo.fr)
[18:14:01] *** Joins: greyrat (~greyrat@ip202.ip-51-178-215.eu)
[18:15:04] *** Server sets mode: +Ccnt 
[18:31:06] *** Quits: Atsuko (~x@94.242.250.86) (Ping timeout: 240 seconds)
[18:33:46] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 240 seconds)
[18:39:55] *** Quits: pookie (~pookie@snf-137798.vm.okeanos.grnet.gr) (Quit: All for nothing)
[18:41:29] *** Joins: olspookishmagus (~pookie@snf-137798.vm.okeanos.grnet.gr)
[18:46:32] *** Quits: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com) (Remote host closed the connection)
[18:51:05] *** Quits: someuser (~user@41.44.143.71) (Ping timeout: 258 seconds)
[18:51:47] *** Joins: someuser (~user@41.238.161.8)
[19:03:25] *** Quits: a0z (~a0z@90.244.140.171) (Quit: Leaving)
[19:35:26] *** Quits: thebombzen (~thebombze@71.73.92.220) (Quit: attack.c:4: main: Assertion `I_can_beat_that_monster' failed. Aborted (core dumped))
[19:36:37] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[19:43:03] *** Joins: danergo (~danergo@catv-176-63-201-22.catv.broadband.hu)
[19:43:17] <danergo> \o/
[19:46:09] <danergo> People, I need some help with libav custom IO
[19:46:18] <danergo> is this the right place the ask and discuss?
[19:46:25] <JEEB> sure
[19:46:31] <JEEB> there's an example I think on doc/examples
[19:46:51] <danergo> I have a working code, so I just need some tips on finetunes
[19:46:53] <JEEB> and ages ago I made a really crappy wrapper for Windows IStreams https://github.com/jeeb/matroska_thumbnails/blob/master/src/istream_wrapper.c
[19:47:06] <danergo> thanks! :)
[19:48:17] <danergo> so, just to quickly summarize: I have my customIO setup. I open a standard H264 stream over RTSP, and put into fragmented mp4 container. output is my custom IO, input is standard (not custom IO).
[19:49:01] <danergo> I have my "writeOutput(void *opaque, uint8_t *buffer, int buffer_size)" function, which prints a line into log.
[19:49:23] <danergo> it seems my "writeOutput" is called only (and really only) at IDR frames
[19:49:45] <danergo> so if I set my encoder to create IDR at every second, writeOutput is called at every second
[19:49:59] <danergo> if IDRs are every 10 seconds, writeOutput is called at every 10s
[19:50:42] <danergo> I'm using "av_write_frame", and also tried "av_interleaved_write_frame", both produces the same result
[19:51:28] <danergo> oh, and I also put a log in front of "av_write_frame", and I can see it's called a lot of times (I guess for non-IDR frames)
[19:52:03] <danergo> I think I need to set some flags, to ask "av_write_frame" to really "write" the frame, don't care if it's not an IDR frame.
[19:52:40] <danergo> it seems, when an IDR comes, my "writeOutput" is called, and all the frames are written into it which happened before the current IDR and last IDR.
[19:52:59] <danergo> so:
[19:53:40] <danergo> Encoder: I0-nI1-nI2-nI3-I4-nI5-nI6-nl7-I8
[19:54:10] <danergo> av_write_frame(I0...I8) //all packets
[19:54:27] <danergo> and writeOutput is only called at I0, I4 and I8.
[19:54:40] <danergo> for I0: writes I0
[19:55:04] <danergo> for I4: writes nI1-nI2-nI3-I4
[19:55:17] <danergo> for I8: writes nI5-nI6-nI7-I8
[19:55:19] *** Joins: arcatech (~arcatech@user/arcatech)
[19:55:56] <danergo> I'd like my writeOutput to be called whatever frequent it can be called. How can I ask this from libav?
[19:56:34] <danergo> any help or idea would be great, thanks so much if you read my lines :)
[19:59:18] *** Joins: Emil (emil@emil.fi)
[19:59:19] <Emil> Hey
[20:00:19] <Emil> I'm cutting some videos, but the audio is out of sync. What's the correct way to fix this without a re-encode of the audio?
[20:00:41] <Emil> I also heard that -ss twice can be beneficial, is this the case?
[20:01:35] <Emil> And did -to work as expected nowadays?
[20:04:40] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[20:13:52] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[20:24:22] *** Quits: rcombs (rcombs@irc.rcombs.me) (Ping timeout: 272 seconds)
[20:25:05] *** Joins: rcombs (rcombs@irc.rcombs.me)
[20:38:21] *** Joins: AnK63 (~AnK@pool-173-72-4-103.cmdnnj.fios.verizon.net)
[20:38:42] *** Quits: AnK63 (~AnK@pool-173-72-4-103.cmdnnj.fios.verizon.net) (Client Quit)
[20:44:55] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[20:47:00] <kepstin> Emil: how are you cutting the videos? most methods using ffmpeg will preserve a/v sync
[20:48:01] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Client Quit)
[20:48:05] <Emil> kepstin: -ss startTime -to stopTime
[20:48:15] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[20:48:28] *** Quits: Plops (~d@vps-2a68554c.vps.ovh.net) (Ping timeout: 246 seconds)
[20:48:31] <kepstin> where in the command line? and are you transcoding or using -c copy?
[20:48:40] <Emil> -i video -ss ... -to ... -c copy out
[20:49:02] <Emil> kepstin: I'm very much trying to avoid re-encoding
[20:49:41] <kepstin> so that should work fine, but it's possible that the audio and video won't have matching start times because it has to round video to nearest keyframe and audio to a frame boundary. that said, the timestamps in the output video will be correct, and players should play the result in sync.
[20:49:43] <Emil> if transcoding means something different from re-encoding, I dont know the meaning
[20:50:50] <Emil> hmm well on my phone it doesn't play them in sunc :(
[20:50:51] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[20:50:57] <Emil> what are my optiond?
[20:51:01] <Emil> options*
[20:51:09] <kepstin> what output container format?
[20:51:15] <Emil> mp4
[20:51:39] <kepstin> but yeah, if the player can't handle the audio and video tracks not starting at the same time, i don't think you have any option other than to re-encode (the video, at least)
[20:51:59] <Emil> input is video from a phone, mp4, output should also be mp4
[20:52:12] <Emil> kepstin: I'm okay with iframe boundary cuts
[20:52:17] *** Quits: ripdog_ (~quassel@user/ripdog) (Quit: ripdog_)
[20:52:34] <Emil> How do I tell ffmpeg to take the closest keyframe and sync both off that?
[20:53:05] <kepstin> no way to do that - but you could do something like play around with the -ss value - possibly use ffprobe to find the timestamps of keyframes and pick one of those.
[20:54:06] <kepstin> (note that cell phone camera video is notoriously poorly encoded, because they use low power hardware encoders - you can probably make the video a lot smaller with minimal quality loss by re-encoding)
[20:54:33] *** Joins: ripdog (~quassel@user/ripdog)
[21:10:41] *** orzo_ is now known as orzo
[21:17:02] *** Joins: cmdrmoozy (~ajr@c-73-15-53-187.hsd1.ca.comcast.net)
[21:17:24] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[21:19:25] <cmdrmoozy> anyone familiar with h264_v4l2m2m? I'm wondering if there's a way to encode in two steps: mjpeg (source) -> raw yuv420p -> h264_v4l2m2m
[21:19:55] <cmdrmoozy> the problem is, h264_v4l2m2m only accepts raw input, but reading raw off a webcam sucks because it only supports low resolution or low framerate vs. mjpeg
[21:20:03] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[21:20:27] <furq> ffmpeg decodes the input before sending it to the encoder anyway
[21:20:38] <furq> makes no difference what the input codec is
[21:22:47] *** Joins: Manni__ (~Flole@ip4d169d3a.dynamic.kabel-deutschland.de)
[21:26:20] *** Quits: Flole_ (~Flole@ip4d169d3a.dynamic.kabel-deutschland.de) (Ping timeout: 258 seconds)
[21:27:36] *** Joins: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net)
[21:29:36] <cmdrmoozy> huh it does indeed "just work", I could have sworn at some point I got an error message about mjpeg being unsupported
[21:37:29] <cmdrmoozy> well that just leave me with one more issue... when I encode this way: https://dpaste.org/aXXz somehow the timestamps are being messed up?
[21:37:45] <cmdrmoozy> I get "Application provided duration: -5 / timestamp: 264238 is out of range for mov/mp4 format" and "pts has no value" every few seconds
[21:38:14] <cmdrmoozy> some of the stuff in this command is stuff I've found online trying to solve this (e.g. use_wallclock_as_timestamps), but no luck so far
[21:48:12] <cmdrmoozy> oh, I think it's just a side effect of the speed being like 0.2x... is it just that decoding mjpeg is really expensive and so it can't keep up?
[21:57:17] <cmdrmoozy> ah no it's the AAC encoding that's bottlenecking everything, hmm...
[21:58:21] *** Joins: EmanuelLoos[m] (~emanuel-l@2001:470:69fc:105::6260)
[22:00:30] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[22:03:00] *** Joins: dreamon (~dreamon@p57a4c571.dip0.t-ipconnect.de)
[22:17:44] *** Joins: linjie (~linjie@58.247.210.251)
[22:17:44] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[22:17:56] *** Joins: linjie (~linjie@58.247.210.251)
[22:18:51] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[22:20:10] *** Joins: linjie (~linjie@58.247.210.251)
[22:23:42] *** Joins: MrZeus (~MrZeus@2a02:c7f:a0aa:4400:157d:87b1:5a35:37b2)
[22:24:34] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 240 seconds)
[22:24:43] *** Quits: rsx (~dummy@ppp-188-174-152-231.dynamic.mnet-online.de) (Quit: rsx)
[22:43:56] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Ping timeout: 252 seconds)
[22:51:44] *** Joins: Trieste (~T@user/pilgrim)
[22:53:03] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[22:56:10] *** Quits: Trieste (~T@user/pilgrim) (Ping timeout: 240 seconds)
[22:59:44] *** Joins: Trieste (T@user/pilgrim)
[23:05:36] *** Quits: Stalker (~Stalker@89.201.5.246) (*.net *.split)
[23:05:36] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (*.net *.split)
[23:05:37] *** Quits: Maple (~Maple@user/maple) (*.net *.split)
[23:05:37] *** Quits: ocrete (~ocrete@halloumi.collabora.co.uk) (*.net *.split)
[23:05:37] *** Quits: DarkTrick (~DarkTrick@pl-768-132.bunbun.ne.jp) (*.net *.split)
[23:05:37] *** Quits: xlei (znc@pool-68-129-84-118.nycmny.fios.verizon.net) (*.net *.split)
[23:05:37] *** Quits: richbridger (~richbridg@213-225-32-103.nat.highway.a1.net) (*.net *.split)
[23:05:37] *** Quits: DarkG (~DarkG@user/darkg) (*.net *.split)
[23:05:37] *** Quits: synapt (NBishop@o.apocaleaps.com) (*.net *.split)
[23:05:37] *** Quits: zeromind (~zeromind@a.eroforce.one) (*.net *.split)
[23:05:37] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (*.net *.split)
[23:05:37] *** Quits: cryptic (~cryptic@142-196-139-017.res.spectrum.com) (*.net *.split)
[23:05:37] *** Quits: haihao (~haihao@192.102.204.38) (*.net *.split)
[23:05:37] *** Quits: Retr0id (~Retr0id@user/retr0id) (*.net *.split)
[23:05:37] *** Quits: meepmeep_ (~meepmeep@end.of.cylind.re) (*.net *.split)
[23:05:37] *** Quits: woohoiV5_ (~woohoiV5@46-117-154-242.bb.netvision.net.il) (*.net *.split)
[23:05:37] *** Quits: Vonter (~Vonter@user/vonter) (*.net *.split)
[23:05:37] *** Quits: foonix (1004@ip-86-49-65-192.net.upcbroadband.cz) (*.net *.split)
[23:05:37] *** Quits: MightyBOB (~MightyBOB@76.99.21.35) (*.net *.split)
[23:05:37] *** Quits: Zucca (~Zucca@user/zucca) (*.net *.split)
[23:05:37] *** Quits: odrling (~odrling@korone.aidoru.agency) (*.net *.split)
[23:05:37] *** Quits: kpuc- (1011@46-97-229-216.sr2.pon.net) (*.net *.split)
[23:05:37] *** Quits: Arokh (~MoveAlong@ip-88-153-211-132.hsi04.unitymediagroup.de) (*.net *.split)
[23:05:37] *** Quits: Rodn3y (~rodney@user/rodn3y) (*.net *.split)
[23:05:37] *** Quits: Mysteria (~Mysteria@v2202101139540140656.hotsrv.de) (*.net *.split)
[23:05:37] *** Quits: nrg (~NRG@user/nrg) (*.net *.split)
[23:05:37] *** Quits: jimby (~jimby@user/jpb) (*.net *.split)
[23:06:43] *** beaver is now known as pong
[23:10:00] *** Joins: meepmeep_ (~meepmeep@end.of.cylind.re)
[23:10:00] *** Joins: Stalker (~Stalker@89.201.5.246)
[23:10:00] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[23:10:00] *** Joins: woohoiV5_ (~woohoiV5@46-117-154-242.bb.netvision.net.il)
[23:10:00] *** Joins: Maple (~Maple@user/maple)
[23:10:00] *** Joins: ocrete (~ocrete@halloumi.collabora.co.uk)
[23:10:00] *** Joins: Vonter (~Vonter@user/vonter)
[23:10:00] *** Joins: foonix (1004@ip-86-49-65-192.net.upcbroadband.cz)
[23:10:00] *** Joins: MightyBOB (~MightyBOB@76.99.21.35)
[23:10:00] *** Joins: DarkTrick (~DarkTrick@pl-768-132.bunbun.ne.jp)
[23:10:00] *** Joins: xlei (znc@pool-68-129-84-118.nycmny.fios.verizon.net)
[23:10:00] *** Joins: richbridger (~richbridg@213-225-32-103.nat.highway.a1.net)
[23:10:00] *** Joins: Zucca (~Zucca@user/zucca)
[23:10:00] *** Joins: odrling (~odrling@korone.aidoru.agency)
[23:10:00] *** Joins: kpuc- (1011@46-97-229-216.sr2.pon.net)
[23:10:00] *** Joins: jimby (~jimby@user/jpb)
[23:10:00] *** Joins: DarkG (~DarkG@user/darkg)
[23:10:00] *** Joins: synapt (NBishop@o.apocaleaps.com)
[23:10:00] *** Joins: zeromind (~zeromind@a.eroforce.one)
[23:10:00] *** Joins: Arokh (~MoveAlong@ip-88-153-211-132.hsi04.unitymediagroup.de)
[23:10:00] *** Joins: Rodn3y (~rodney@user/rodn3y)
[23:10:00] *** Joins: Mysteria (~Mysteria@v2202101139540140656.hotsrv.de)
[23:10:00] *** Joins: nrg (~NRG@user/nrg)
[23:10:00] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[23:10:00] *** Joins: cryptic (~cryptic@142-196-139-017.res.spectrum.com)
[23:10:00] *** Joins: haihao (~haihao@192.102.204.38)
[23:10:00] *** Joins: Retr0id (~Retr0id@user/retr0id)
[23:10:33] *** Quits: xlei (znc@pool-68-129-84-118.nycmny.fios.verizon.net) (Max SendQ exceeded)
[23:10:33] *** Quits: richbridger (~richbridg@213-225-32-103.nat.highway.a1.net) (Max SendQ exceeded)
[23:10:58] *** Joins: richbridger (~richbridg@213-225-32-103.nat.highway.a1.net)
[23:11:20] <stumped> is there a trick to getting a video converted to something an iphone can play? all I get is a black screen with sound.
[23:11:42] <stumped> command line I used is ffmpeg -i input.mov -c:v libx265 -crf 28 -c:a aac -b:a 128k -tag:v hvc1 output.mp4
[23:12:02] *** Joins: arcatech (~arcatech@user/arcatech)
[23:12:17] *** Joins: shibboleth (~shibbolet@gateway/tor-sasl/shibboleth)
[23:14:49] *** Quits: arcatech (~arcatech@user/arcatech) (Client Quit)
[23:15:45] *** Joins: xlei (znc@pool-68-129-84-118.nycmny.fios.verizon.net)
[23:17:19] <furq> stumped: if you just want anything an iphone can play then use x264
[23:18:16] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 246 seconds)
[23:19:06] <stumped> thanks furq: do you have a good commandline for that? I have an h264 (Main) (avc1), yuv420p file I am trying to make work on an iPhone.
[23:20:51] <furq> that should already work on an iphone
[23:21:06] <furq> unless it's a really ancient one
[23:23:11] <stumped> let me check what it is
[23:23:15] <stumped> iphone 12
[23:23:58] <furq> yeah that should definitely work
[23:24:07] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Quit: WeeChat 3.2)
[23:25:10] <EmanuelLoos[m]> I know nothing about Apple, but I think this should work:
[23:25:10] <EmanuelLoos[m]> `ffmpeg -i input.mov -codec:v h264 -codec:a aac output.mp4`
[23:25:58] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[23:26:45] <EmanuelLoos[m]> If you would like a newer codec:
[23:26:45] <EmanuelLoos[m]> `ffmpeg -i input.mov -codec:v hevc -codec:a aac output.mp4`
[23:31:54] <EmanuelLoos[m]> These are both non-free codecs (patents) though.
[23:31:55] <EmanuelLoos[m]> I don't know if Google/On2s free codecs VP8 and VP9 or Google/AOMedias AV1 wold work.
[23:31:55] <EmanuelLoos[m]> Opus would be a free audio codec, don't know if that works.
[23:32:30] <stumped> if I add  -tag:v hvc1 to the hevc onje and airdrop it, it plays
[23:32:36] <stumped> if I copy it, it doesn't play.
[23:32:40] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[23:32:44] <stumped> I think something is broken here.
[23:32:44] *** Parts: rojin[m] (~rojinroyp@2001:470:69fc:105::89b) ()
[23:33:06] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[23:33:31] *** Joins: linjie (~linjie@58.247.210.251)
[23:35:53] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[23:37:37] <EmanuelLoos[m]> You can also try your luck with the free codecs I listed. YouTube uses them. VP8 might work (oldest). (Apple doesn't like freye codecs)
[23:37:56] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 252 seconds)
[23:37:58] <EmanuelLoos[m]>  * You can also try your luck with the free codecs I listed. YouTube uses them. VP8 might work (oldest). (Apple doesn't like freye codecs)
[23:38:10] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[23:38:14] *** Joins: Atsuko (~x@94.242.250.86)
[23:38:16] <EmanuelLoos[m]>  * You can also try your luck with the free codecs I listed. YouTube uses them. VP8 might work (oldest). (Apple doesn't like free codecs)
[23:39:52] <EmanuelLoos[m]>  * You can also try your luck with the free codecs I listed. YouTube uses them. VP8 might work (oldest).
[23:41:06] <furq> vp8 isn't supported on ios outside of webkit
[23:41:27] <furq> if avc1 h264 in mov isn't working then you have bigger problems
[23:41:43] <furq> webrtc, not webkit
[23:41:53] <stumped> does the extension make a difference .mov or .mp4 for ffmpeg
[23:42:03] <furq> they're basically the same
[23:42:07] <furq> ios supports both anyway
[23:42:11] <stumped> ok
[23:42:50] <stumped> use_metadata_tags is stripping creation_time (creation_date?). is this normal?
[23:42:56] <iive> i think there was some mp4 profile specifically for (old) iphone models
[23:43:25] <furq> this is an iphone 12 presumably on ios 11
[23:43:45] <furq> i'm not really an apple guy but i figure that supports anything mpeg
[23:43:59] <stumped> it's what the latest is let me check
[23:44:25] <stumped> 14.6
[23:44:29] *** Joins: anotheruser (~user@45.130.86.2)
[23:45:55] <EmanuelLoos[m]> > <@emanuel-loos:emanuel-loos.eu> I know nothing about Apple, but I think this should work:
[23:45:55] <EmanuelLoos[m]> > `ffmpeg -i input.mov -codec:v h264 -codec:a aac output.mp4`
[23:45:55] <EmanuelLoos[m]> How about h264?
[23:46:36] <stumped> same
[23:46:43] *** Quits: dreamon (~dreamon@p57a4c571.dip0.t-ipconnect.de) (Remote host closed the connection)
[23:46:59] <furq> pastebin the output of ffprobe input.mov
[23:47:22] *** Quits: someuser (~user@41.238.161.8) (Ping timeout: 240 seconds)
[23:47:32] <furq> also creation_time is never copied, i don't really know why
[23:47:44] <furq> you can set it with -metadata creation_time if you really need to keep it
[23:47:58] <furq> it shouldn't make any difference though
[23:48:50] *** Joins: arcatech (~arcatech@user/arcatech)
[23:50:27] <stumped> https://pastebin.com/VmeStkcy
[23:51:07] <furq> that looks fine and also appears to have been created by an iphone in the first place
[23:51:18] <furq> so something else is going wrong i guess
[23:51:29] <iive> in `man ffmpeg-formats` i can see only '-movflags disable_chpl' that removes some nero chapters that might confuse quicktime if file is reprocessed. should not be mandatory for playback.
[23:51:56] <stumped> it plays on quicktime. once it syncs elsewhere it doesn't play on the iphone or ipad.
[23:52:43] <furq> something going wrong during syncing maybe
[23:52:46] *** Joins: dreamon (~dreamon@p57a4c571.dip0.t-ipconnect.de)
[23:53:47] <iive> if you suspect sync problems, make video only file.
[23:53:57] <iive> just to make sure video is decoded.
[23:54:03] <stumped> I will try it out
[23:54:10] <stumped> thanks for the help
