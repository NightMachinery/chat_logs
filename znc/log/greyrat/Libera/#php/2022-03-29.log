[00:19:46] *** Joins: on3pk (~on3pk@cpe-74-65-0-247.rochester.res.rr.com)
[00:26:34] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[00:30:11] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Ping timeout: 250 seconds)
[00:30:52] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[00:40:16] *** Joins: Hash (~Hash@hey.howstoned.ru)
[00:48:46] *** Joins: guido (~weechat@host-79-23-252-83.retail.telecomitalia.it)
[00:51:56] *** Joins: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[00:56:54] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[01:02:08] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:38d4:e5f6:5964:8016) (Remote host closed the connection)
[01:02:59] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:eda1:a934:7001:ca07)
[01:07:17] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:eda1:a934:7001:ca07) (Ping timeout: 252 seconds)
[01:20:42] *** Quits: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:24:42] *** Quits: guido (~weechat@host-79-23-252-83.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[01:35:30] *** Joins: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[01:46:46] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[01:50:54] *** Quits: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:53:29] <entropy_> how do i sql injection proof the $_GET without a database query?
[01:53:38] <entropy_> say i have $_GET["seaarch"]
[01:54:04] <entropy_> i don't want to check a database
[01:54:08] *** Joins: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[01:58:43] <NoiseEee> not the way it works entropy_
[01:59:00] <NoiseEee> you use prepared statements for database queries, which prevents SQL injection
[01:59:04] <NoiseEee> $_GET plays no part
[02:00:47] <entropy_> so there is no worries about sql injection with $_GET?
[02:01:48] <entropy_> i basically want to take a $_GET and query a SQL database
[02:02:01] <entropy_> hmm
[02:02:13] <entropy_> i use $search ($_GET["search"])
[02:02:28] <entropy_> what's a good way to prevent SQL injection"?
[02:05:33] <NoiseEee> it comes down to your SQL statement
[02:05:38] <NoiseEee> use prepared statements
[02:05:41] <NoiseEee> done and done
[02:06:36] <entropy_> $search_html = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_SPECIAL_CHARS);
[02:06:40] <entropy_> is this good?
[02:06:40] <NoiseEee> no
[02:06:54] <NoiseEee> are you using PDO for your database connection?
[02:06:57] <entropy_> yes
[02:07:48] <entropy_> i use prepare for everything
[02:07:52] <entropy_> and execute
[02:07:57] <NoiseEee> https://phpdelusions.net/pdo
[02:08:11] <NoiseEee> so prepared statements and named placeholders are the way to go
[02:08:22] <NoiseEee> don't change/alter what people query
[02:09:24] <entropy_> ok
[02:09:27] <entropy_> thank you
[02:10:01] <entropy_> alright i use: pastes.php?search=SOMETHING
[02:10:01] <NoiseEee> no prob good luck
[02:10:08] <entropy_> as is
[02:10:13] <entropy_> is this vulnerable?
[02:10:21] <NoiseEee> it all depends on your DB statement
[02:10:33] <entropy_> well i use it to query a db
[02:10:39] <entropy_> is this vulnerable?
[02:10:43] <NoiseEee> it all depends on your DB statement
[02:10:47] <NoiseEee> thats a URL
[02:11:01] <entropy_> example...
[02:11:04] <entropy_> SELECT * FROM pastes WHERE `$cat` LIKE '$do_search'
[02:11:17] <entropy_> $do_search is basically $_GET["search"]
[02:11:38] <entropy_> is this vulnerable?
[02:11:41] <NoiseEee> why is your column name a variable?
[02:12:13] <entropy_> well $cat can be: description,author etc
[02:12:24] <NoiseEee> who's supplying that?
[02:12:42] <NoiseEee> first off, make sure $cat can only be real columns in your DB
[02:12:53] <entropy_> i have that
[02:12:57] <NoiseEee> don't accept it as a user variable / if so, replace it with a system variable
[02:13:29] <entropy_> well there is a check if it is NOT description/author/paste
[02:13:36] <entropy_> set it to description
[02:13:49] <NoiseEee> $sql = 'SELECT * FROM pastes WHERE $approvedColumn LIKE :searchQuery';
[02:14:00] <NoiseEee> $stmt = $dbConn->prepare($sql)
[02:14:16] <entropy_> ohh
[02:14:39] *** Joins: newwebdev13 (~newwebdev@78.135.92.89)
[02:14:53] <NoiseEee> if(!$stmt->execute([':searchQuery' => '%'.$_GET['search'].'%'])) { // throw exception }
[02:15:03] <NoiseEee> $rowsOfResults = $stmt->fetchAll()
[02:15:30] *** Quits: mmk2410 (~mmk2410@user/mmk2410) (Quit: ZNC - https://znc.in)
[02:15:47] *** Joins: mmk2410 (~mmk2410@user/mmk2410)
[02:16:18] <NoiseEee> the main takeaway is, always use prepared statement / never put variables in a query.
[02:16:45] <NoiseEee> though i suppose with $columnName you tentative pass as long as YOU define it, based on user input
[02:17:03] <entropy_> can you put it all in a pastebin?
[02:17:06] <entropy_> please?
[02:17:34] <NoiseEee> i'm sure you can copy it from here
[02:17:39] <NoiseEee> either way, don't copy
[02:17:44] <NoiseEee> re-write yours to look like mine
[02:17:48] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[02:17:49] <NoiseEee> that's how people LEARN
[02:17:52] <entropy_> ok
[02:19:45] <entropy_> https://mypastebin.com/nHxGs73r5O
[02:19:52] <entropy_> how do you enter more than one :item
[02:19:53] <entropy_> ?
[02:20:17] <TML> what do you mean "more than one :item"?
[02:20:19] *** Quits: nwulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 246 seconds)
[02:20:32] <entropy_> like say i have this
[02:20:52] <entropy_> SELECT * FROM pastes WHERE `$cat` LIKE '$do_search' AND ip = '$ip' AND `public` = 'yes' ORDER BY $sort $order
[02:21:04] <entropy_> how do i make it to use more than one variable?
[02:21:36] <NoiseEee> use placeholders for all the values in the SQL statement, and bind them in the execute()
[02:21:38] *** Quits: DaNeenjah (~jake@adsl-74-230-4-23.hsv.bellsouth.net) (Quit: WeeChat 3.5)
[02:21:49] <TML> select * from pastes where column1 like :value1 and ip = :ip …
[02:21:53] <ash_worksi> entropy_: are you using dynamic column identifiers?
[02:22:07] <TML> entropy_: I find your use of $cat troublesome
[02:22:16] <NoiseEee> entropy_: take a break, read the link I sent you, then get back to work
[02:22:21] <NoiseEee> entropy_: same concept
[02:22:33] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[02:22:36] <entropy_> sec
[02:22:57] <NoiseEee> (nobody likes your variable for a column name - its super dangerous unless YOU are supplying the value, full-stop)
[02:23:06] <ash_worksi> this is kind of a poll question; I have seen 2 ways of approaching the concept of verification links for different things
[02:23:30] <ash_worksi> but is there a common approach to updating a user's email? ...
[02:23:51] <NoiseEee> ash_worksi: not sure how it is for yours, but in general we do not allow a user to update/change their email
[02:23:56] <NoiseEee> too easy to steal/move accounts
[02:23:58] <entropy_> https://mypastebin.com/nHxGs73r5O
[02:24:05] <ash_worksi> I see
[02:24:08] <TML> entropy_: No
[02:24:10] <entropy_> how do i specify all the ":" items in the SELECT?
[02:24:14] <ash_worksi> that's the second time I have gotten that response
[02:24:44] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[02:24:46] <TML> entropy_: You can't do "WHERE 1 WHERE 2" in SQL
[02:24:53] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[02:24:55] <entropy_> oh i mean AND
[02:25:01] <NoiseEee> ash_worksi: it depends on the app/site/function, etc... but in general, people don't "change their email" after the account has been verified (by them clicking a link you sent to their email)
[02:25:03] <Mr-Snick> ash_worksi: Sending verification links to the current and new email help, sometimes. this is providing attackers don't have access to the current.
[02:25:30] <ash_worksi> Mr-Snick: yes
[02:25:37] <NoiseEee> Mr-Snick: we do that every 5 months to ensure they are still at their employer / using the company email address, and if not confirmed, the account is disabled
[02:25:39] <TML> ash_worksi: What kind of account is this? What's the use-case for allowing people to change their email address?
[02:26:13] <Mr-Snick> In some cases even applying phone verification.
[02:26:15] <TML> entropy_: php.net/pdostatement.execute
[02:26:45] <TML> Mr-Snick: Ugh - there are very few services in this world I care enough about to be willing to give them my phone number.
[02:26:52] <ash_worksi> TML: my only impetus for this is that it is currently allowed in the application I'm working on and that we would really like to keep in contact with them (even if they change their email)
[02:27:13] <Mr-Snick> I agree, but sometimes we're limited.
[02:27:18] <TML> ash_worksi: Allow them to have any number of "Secondary Email Addresses"
[02:27:26] <NoiseEee> ^^ what TML just wrote
[02:27:28] <entropy_> TML what about this? https://mypastebin.com/nHxGs73r5O is this right?
[02:27:33] <ash_worksi> I see
[02:27:34] <TML> ash_worksi: Just make sure you require validation
[02:27:54] <TML> entropy_: Why would you have %'s around an IP address?
[02:28:01] <TML> seems highly suspect
[02:28:04] <entropy_> ok
[02:28:05] <entropy_> sec
[02:28:11] <ash_worksi> entropy_ is LIKE happy
[02:28:45] <entropy_> heh
[02:28:46] <entropy_> https://mypastebin.com/nHxGs73r5O
[02:28:48] <entropy_> like this?
[02:28:55] * ash_worksi wonders if mysql uses tsvectors
[02:29:10] <TML> Sure, other than your use of $approvedColumn, that looks fine
[02:29:34] <ash_worksi> entropy_: don't use dynamic columns
[02:29:39] <TML> also, you have to check whether your RDBMS even allows LIMIT to be a bound parameter
[02:29:41] <ash_worksi> entropy_: are you trying to do a fuzzy text search?
[02:30:00] <entropy_> i don't know what fuzzy is
[02:30:11] <TML> non-exact
[02:30:37] <Sammitch> furry matching uses the YIFF operator
[02:30:39] <ash_worksi> although I don't think it's fuzzy, you may want to start with this: https://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html
[02:30:56] <ash_worksi> depending on the database you're using
[02:30:58] <TML> entropy_: It seems you're making a pastebin site, in which case I don't understand why you: 1) need a variable column name; 2) need wildcard matching on the GET parameter
[02:31:27] <TML> Sammitch: YIFF?
[02:31:48] <ash_worksi> I want to know what YIFF is too
[02:31:49] <TML> lexical iff?
[02:33:50] <entropy_> TML https://mypastebin.com/nHxGs73r5O like this?
[02:34:00] <TML> entropy_: I also find it unlikely that you only want to serve someone's paste if their requesting IP matches exactly the IP it was submitted from, but YMMV
[02:34:16] <entropy_> ok
[02:34:24] <TML> entropy_: No - that doesn't account for any of the feedback I just gave you
[02:34:28] <ash_worksi> entropy_: I would appreciate it personally if you would close the quote on the first line
[02:34:38] <TML> and it has a syntax error
[02:35:43] <entropy_> this has an error? https://mypastebin.com/nHxGs73r5O
[02:36:20] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 272 seconds)
[02:37:05] <entropy_> wait
[02:37:06] <entropy_> sec
[02:37:41] <ash_worksi> TML: is the idea behind multiple emails that, if an attacker somehow subverts someone's account such that there is an email for a user "abuseme@malicious.net", the original user can still log in and change that with their original email address?
[02:37:46] <entropy_> https://mypastebin.com/nHxGs73r5O
[02:37:49] <entropy_> how's this?
[02:38:36] <TML> entropy_: I don't see how that's any better than any of your previous pastes
[02:38:50] <ash_worksi> entropy_: you're not taking anyone's advice
[02:38:53] <ash_worksi> w/e
[02:39:03] <entropy_> i am confused is all
[02:39:13] <entropy_> sorry
[02:39:33] <ash_worksi> entropy_: what database will you be using?
[02:39:41] <ash_worksi> entropy_: postgresql? mysql? something else?
[02:39:47] <entropy_> mysql
[02:40:07] <ash_worksi> entropy_: WHY must "$cat" be a variable?
[02:40:08] <TML> ash_worksi: Well, again, it's hard to say without understanding more about your system, but I suggested that simply as a way to solve your "I want to contact them after they've changed their email address" problem statement without opening the "Someone hacked my account and changed my email address, and now I can't recover the account" bag-of-worms
[02:40:51] <ash_worksi> hmm
[02:40:54] <entropy_> ash_worksi because the category can be either: author/paste/description etc
[02:41:05] <ash_worksi> so use OR
[02:41:13] <entropy_> example?
[02:41:25] <ash_worksi> `WHERE author = ? OR paste = ? OR description = ?`
[02:42:00] <ash_worksi> these seem like different concepts though
[02:42:07] <ash_worksi> if it were me, I would make them different statements
[02:42:20] <TML> entropy_: What version of PHP are you using?
[02:44:33] <TML> ash_worksi: I mean, the first question I'd ask in most cases is "Why is my login tied to my email address?" Unless you're an email provider, it might not be the most stable choice.
[02:46:25] <entropy_> i can't find the version number in phpinfo()
[02:46:52] <TML> it's right at the top
[02:46:54] <entropy_> oh duh
[02:46:55] <TML> next to the PHP logo
[02:46:56] <entropy_> yeah
[02:46:59] <entropy_> foudn it
[02:47:06] <entropy_> PHP Version 7.0.33
[02:47:16] *** Joins: Poboy (~Poboy@user/poboy)
[02:47:22] <TML> 😬
[02:47:41] <TML> entropy_: Step 1: Upgrade to a supported release of PHP
[02:48:11] <entropy_> alright
[02:48:50] <entropy_> in the mean time can you help me fix this?
[02:48:50] <entropy_> https://mypastebin.com/nHxGs73r5O
[02:49:23] <TML> If you're able to go to PHP8, you might try using a match expression here.
[02:49:36] <entropy_> ok
[02:49:42] <entropy_> but untill then?
[02:49:58] <TML> Until then, stop what you're doing
[02:50:18] <TML> When I said "Step 1" I meant "do not pass go, do not collect $200, do not try to solve other problems yet"
[02:50:35] <ash_worksi> hah
[02:50:55] *** Joins: stenno (~stenno@user/stenno)
[02:51:07] <TML> this should be your #1 focus right now - getting to a supported PHP release
[02:51:53] <entropy_> it will propogate by morning
[02:52:08] <entropy_> can you answer my question though... will that link work?
[02:52:16] <entropy_> to the pastebin?
[02:52:20] <TML> entropy_: What version of PHP will you be moving to?
[02:52:27] <entropy_> 8 or higher
[02:52:45] <entropy_> what version should i use?
[02:52:49] <entropy_> recommended?
[02:53:29] <entropy_> Current Stable PHP 8.1.4 <- this?
[02:53:33] <__adrian> 8.0, or most recent if practical
[02:53:51] <entropy_> ok
[02:54:08] <__adrian> though maybe i should phrase that the opposite way. latest, or 8.0 at a minimum if that's not  practical
[02:54:42] <TML> entropy_: https://bpa.st/HTEQ
[02:55:26] <TML> except you need to look at the 'description' case of the match expression
[02:55:34] <TML> I don't know what your column name is in that case
[02:56:11] <TML> oh, and it should be :search instead of :pasteid in the execute()
[02:56:14] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[02:56:28] <TML> I switched halfway through based on your answers, and forgot to change the last case
[02:57:21] <entropy_> TML how about making one for $seach and not only $cat?
[02:57:26] <entropy_> $search*
[02:57:50] <TML> entropy_: I don't understand your question
[02:58:02] <entropy_> i have many variables in my SELECT line.. NOT only $cat
[02:58:07] <TML> Why
[02:58:33] <entropy_> uses LIMIT and other things
[02:58:46] <entropy_> here let me repaste my select line....
[02:58:59] <TML> I don't believe MySQL allows you to bind limit
[02:59:05] <TML> but I could be wrong there, I never touch the thing
[02:59:15] <entropy_> SELECT * FROM pastes WHERE `$cat` LIKE '$do_search' ORDER BY $sort $order
[02:59:20] <entropy_> etc
[02:59:41] <__adrian> entropy_: parameters
[02:59:56] <entropy_> here is the full select....
[03:00:01] <TML> entropy_: I find your design here deeply suspect
[03:00:26] <entropy_> hmm
[03:00:32] <entropy_> advice would be appreciated
[03:00:41] <entropy_> SELECT * FROM pastes WHERE `$cat` LIKE '$do_search' AND `public` = 'yes' ORDER BY $sort $order LIMIT $o, $limit
[03:00:47] <entropy_> ^ full SELECT LINE
[03:01:31] <TML> Why does ORDER BY take user-supplied parameters?
[03:02:04] <TML> sounds like a YAGNI problem to me
[03:02:13] <TML> do the ordering in the client
[03:02:29] <entropy_> $sort = $_GET["sort"] ?? $_COOKIE["sort"] ?? "added";
[03:02:29] <entropy_> $order = $_GET["order"] ?? $_COOKIE["order"] ?? "DESC";
[03:02:41] <TML> entropy_: That's HOW, it doesn't answer WHY
[03:03:01] <TML> I don't think you need to do this - just use a decent client-side library to sort the data
[03:03:21] <TML> then you don't have to run another SQL query every time someone wants to change the column they're ordering by
[03:04:21] <TML> the odds that a random pastebin site is going to need to do server-side sorting of a user's pastes seems really, really low to me
[03:04:41] <entropy_> ok
[03:04:49] <entropy_> i don't know WHY other than the values can change
[03:06:27] <entropy_> so this will NOT work? https://mypastebin.com/nHxGs73r5O
[03:06:34] <TML> You can probably also get rid of the pagination the same way - so we've removed the need to specify ORDER BY or LIMIT values in your SQL Query. All that's left is the $cat - assuming you're using php8, I'd suggest the match expression, but you could also do it with a switch, a bunch of if/else, etc.
[03:07:05] <TML> entropy_: I don't believe so, but again - I'm no expert in your RDBMS of choice
[03:08:51] <TML> it's something I dimly remember hearing, once upon a time, that you can't bind LIMIT expressions in MySQL
[03:09:10] <TML> maybe someone who actually uses MySQL can provide a more concrete answer, though
[03:10:50] <entropy_> yeah LIMIT uses 2 parameters
[03:10:53] <entropy_> sometimes
[03:11:04] <entropy_> so how would you do it for both?
[03:11:10] <entropy_> hmmm
[03:11:20] <TML> Like I said, I don't believe you CAN do that in mysql
[03:11:57] <TML> My suggestion is to move both the ORDER BY and the LIMIT/pagination logic into the browser
[03:12:39] <TML> Have PHP return a JSON response that is all of the pastes which match the search expression and use a good client-side library to sort and paginate the JSON
[03:14:09] <entropy_> sounds like a lot of work
[03:14:13] <entropy_> :(
[03:14:38] <TML> Not really
[03:14:47] <ash_worksi> entropy_: from a PHP standpoint, it's easier
[03:14:50] <TML> Which part of that sounds like a lot of work to you?
[03:15:00] <entropy_> could you give me an example?
[03:15:18] <TML> entropy_: https://datatables.net/
[03:16:01] <TML> NB: I'm not much of a front-end engineer, I'm sure there are newer, sexier libraries for this
[03:16:14] <TML> That's just the one I used to lean on back when I had to do the odd bit of front-end work
[03:19:37] <entropy_> what about this? https://mypastebin.com/nHxGs73r5O
[03:19:45] <entropy_> would this work?
[03:19:54] <ash_worksi> entropy_: at the very least parse $cat first
[03:19:58] <TML> No
[03:20:04] <entropy_> damn
[03:20:06] <entropy_> ok
[03:20:10] <TML> That continues to have the problems I've already pointed out
[03:20:31] <entropy_> ash_worksi i changed $cat to :cat
[03:20:37] <ash_worksi> no
[03:20:40] <TML> plus now you've tried to make the column name a bound parameter, which won't work in _any_ RDBMS I know of
[03:21:22] <entropy_> oh ok
[03:22:21] <entropy_> WHERE author = ? OR paste = ? OR description = ?
[03:22:30] <entropy_> what is the "?"
[03:22:39] <entropy_> i'm not understanding
[03:22:54] <TML> entropy_: https://bpa.st/HTEQ
[03:23:17] *** Joins: w_lehinsun__ (~lehinsun@188.113.178.220)
[03:23:28] <TML> Here, I'll fix the issues I already called out
[03:23:30] <TML> https://bpa.st/NVGA
[03:24:03] <entropy_> ok
[03:24:23] <entropy_> but you said it won't work on PHP 7?
[03:24:35] <TML> That's correct, the "match" expression was added in PHP 8
[03:24:50] <entropy_> ok
[03:24:53] <entropy_> hmmm
[03:24:54] <TML> You can do a similar thing using if/else or switch/case in PHP7
[03:25:03] <TML> it's just not as syntactically nice
[03:25:09] <entropy_> ok
[03:25:18] <entropy_> example of if/else ?
[03:25:45] <entropy_> sorry guys about my noobness... i'm learning though
[03:26:03] *** Quits: w_lehinsun (~lehinsun@188.113.178.220) (Ping timeout: 260 seconds)
[03:26:51] <TML> You need an example of how to use an if statement?
[03:26:57] <entropy_> no i mean in this context
[03:27:02] <ash_worksi> entropy_: something like this: https://3v4l.org/Bv4m1
[03:27:27] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 260 seconds)
[03:27:32] <TML> ash_worksi: I probably would go with if/else, here - just so you can use ===
[03:27:36] <TML> but sure
[03:27:38] <ash_worksi> oh yeah ===
[03:27:53] <entropy_> echo getPasteSql('author'); <- can i replace 'author' with $cat ?
[03:27:53] <ash_worksi> TML: I am getting too used to match
[03:28:01] <ash_worksi> yes
[03:28:08] <entropy_> cool
[03:28:09] <ash_worksi> (what is the facination with $cat?)
[03:28:17] <ash_worksi> but use if/else instead of match
[03:28:19] <entropy_> i don't know
[03:28:20] <entropy_> ok
[03:29:53] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[03:30:03] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[03:30:21] <entropy_> ok i'm totally confused about the ending SELECT LINE
[03:30:26] <entropy_> i want to add parameters to it
[03:30:30] <entropy_> more thna just cat?
[03:30:33] <entropy_> than*
[03:31:03] <TML> entropy_: In contrast to ash_worksi, my solution would probably look a bit more like this: https://bpa.st/BIKQ
[03:31:22] <TML> entropy_: I'm not sure what your question is, sorry
[03:31:28] *** Quits: magla (~gelignite@d53668d6.access.ecotel.net) (Quit: Stay safe!)
[03:31:37] <TML> You need to name the paramaters and then bind them
[03:31:49] <entropy_> SELECT * FROM pastes WHERE `$cat` LIKE '$do_search' AND `public` = 'yes' ORDER BY $sort $order LIMIT $o, $limit
[03:32:01] <entropy_> i need these values met
[03:32:05] <TML> Again, don't do that in SQL
[03:32:21] <TML> I'm 99% sure you cannot safely bind those as parameters
[03:32:30] <entropy_> ok
[03:32:35] <TML> Well, I'm 100% certain you can't bind the column name
[03:32:45] <TML> I'm only 99% certain on the LIMIT and ORDER BY clauses
[03:32:45] <entropy_> hmmm
[03:32:56] <entropy_> what do i do then to meet those variables in a select line?
[03:33:15] <entropy_> well limit and sort and order
[03:33:42] <TML> Again, I really don't think you: 1) need to; 2) even really WANT to
[03:34:00] <entropy_> well the $sort (for instance) can be either added/edited etc
[03:34:10] <entropy_> and the $order can eithe rbe ASC or DESC
[03:34:20] <TML> Right - you want a client-side library to handle that for you
[03:34:21] <entropy_> and the LIMIT is a set thing too
[03:34:23] <TML> Don't do it in SQL
[03:34:35] <entropy_> ok
[03:34:40] *** Joins: w_lehinsun (~lehinsun@188.113.178.220)
[03:34:54] <TML> if you do it in SQL, it means you need to run another SQL query every time someone changes how they're sorting or paginating the data
[03:35:11] <ash_worksi> entropy_: https://3v4l.org/lkWBZ
[03:35:15] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[03:35:23] <TML> unless you really think you're going to be presenting hundreds of millions of pastes as the same time, you really should find a good client-side library for this
[03:36:13] <Albright> What's the best, most-correct way to have a file be a response under PSR-7 Responses?
[03:37:12] <ash_worksi> Albright: there is preprocessing done on the file?
[03:37:12] <Albright> In other words, is there a better way other than reading the file into memory and then using setBody()?
[03:37:23] *** Quits: w_lehinsun__ (~lehinsun@188.113.178.220) (Ping timeout: 256 seconds)
[03:37:25] <Albright> *getBody
[03:38:12] <ash_worksi> Albright: wait are you fetching a file or serving it?
[03:38:24] <Albright> ash_worksi: Serving
[03:38:54] <ash_worksi> okay, then I don't undrestand why you used 'getBody' but w/e. Anyway, is the file being processed before served?
[03:39:22] <TML> Albright: Why not bypass PHP entirely? EnableSendfile (or your httpd's equivalent)
[03:39:35] <ash_worksi> TML: I was going to suggest that
[03:39:41] <Albright> Depends on what you mean by "processed." I am doing some routing, error checking and adding some HTTP headers but not opening the file itself.
[03:39:50] <ash_worksi> then what TML said
[03:40:13] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 256 seconds)
[03:40:28] *** Quits: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:40:29] <Albright> Well, there still needs to be some PHP logic here.
[03:40:49] <ash_worksi> but in lieu of that, I think there's a standard for file streams you can set a file pointer and read from it
[03:41:04] <ash_worksi> I mean StreamedResponse or something
[03:41:51] <TML> Well, then I'd say readfile(), but I have no idea what "PSR-7 Responses" includes, so I can't begin to guess at an actual answer to your question
[03:42:26] <ash_worksi> Albright: perhaps https://github.com/php-fig/http-message/blob/master/src/StreamInterface.php
[03:43:09] <Albright> Right, but when I have a $response object, how do I say "use this stream as the body?"
[03:43:40] <ash_worksi> I mean, PSR-7 is just a standard; and fig gives you interfaces; are you using a lib to create the response?
[03:43:56] *** Joins: stenno (~stenno@user/stenno)
[03:43:57] <Albright> Laminas Diactoros
[03:44:15] <ash_worksi> then they probably have a streaming response you can pull out of a factory
[03:44:20] <Albright> I did find https://docs.laminas.dev/laminas-diactoros/v2/api/#response-message - so apparently I can specify the stream when creating the response… trying that now.
[03:45:28] <entropy_> ash_worksi https://mypastebin.com/ynXdn <- i have MANY parameters not just CAT
[03:45:48] <entropy_> how would i do it for others without there being huge lines of code?
[03:47:11] <ash_worksi> entropy_: it depends on what you want to allow
[03:47:33] <entropy_> SELECT * FROM pastes WHERE `$cat` LIKE '$do_search' AND `public` = 'yes' ORDER BY $sort $order LIMIT $o, $limit
[03:47:39] <entropy_> is the FULL line
[03:47:51] <ash_worksi> Why are you using LIKE?
[03:48:04] <entropy_> to check if search exists?
[03:48:23] <entropy_> at the very least, it is: "%"
[03:49:05] <ash_worksi> what do you mean, "if the search exists" ?
[03:49:24] <entropy_> if that variable is set
[03:49:30] <TML> entropy_: LIKE seems like the wrong thing there, you should almost certainly be using =
[03:49:43] <entropy_> ok
[03:49:49] <TML> and not adding wildcards
[03:49:52] <ash_worksi> entropy_: LIKE is for a _part_ of a string
[03:50:45] <ash_worksi> like "WHERE description LIKE '%quick fox'" would match 'the quick brown fox'
[03:50:58] <TML> entropy_: I don't understand why you're rejecting the answers you've already been given.
[03:51:18] <entropy_> i can't seem to find any solutions for all my select parameter
[03:51:19] <entropy_> s
[03:51:52] <TML> stop doing ORDER BY and LIMIT in your SQL query
[03:51:55] <TML> it's wasteful
[03:52:02] <TML> and you can't do it safely
[03:52:12] <entropy_> ok
[03:52:25] <entropy_> can you link me to something that is similar?
[03:52:37] <TML> Again? Sure. https://datatables.net/
[03:53:08] <TML> https://flatlogic.com/blog/top-19-remarkable-javascript-table-libraries-and-plugins/
[03:53:19] <TML> http://tabulator.info/
[03:53:27] <TML> https://hackernoon.com/10-data-table-libraries-for-javascript-5g263vdm
[03:53:42] <ash_worksi> anyway, you can add stuff to your sql like so: https://3v4l.org/tIoOLE
[03:53:57] <TML> if you applied yourself to a brief google search, you'd find thousands of similar links for yourself
[03:54:22] <Albright> I've used Datatables. It works fairly well.
[03:55:17] <TML> DataTables isn't particularly hip, as it's a jQuery plugin - but I've used it to build sites that loaded hundreds of thousands of table rows and gave very responsive UIs
[03:55:30] *** Quits: Cork (~Cork@user/cork) (Ping timeout: 272 seconds)
[03:55:32] <entropy_> ash_worksi will it work for $sort and $order and LIMIT?
[03:55:39] <entropy_> with "?"
[03:55:43] <ash_worksi> NO
[03:55:47] <ash_worksi> :P
[03:55:47] <TML> LOL - I give up
[03:56:01] <entropy_> TML i would have to recode hundreds of lines
[03:56:03] <TML> I'll get you next time, Gadget
[03:56:21] <entropy_> sorry
[03:56:22] <TML> entropy_: You mean you'd get to DELETE hundreds of lines?
[03:56:25] <TML> That's great!
[03:56:29] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[03:56:37] <TML> Code that has been deleted is code that doesn't have bugs
[03:57:20] <TML> that's a reason to be EAGER to follow the advice, not a reason to be RELUCTANT to follow it
[03:57:24] <entropy_> TML then.. can you show me an example of https://datatables.net/ ? with the SELECT line?
[03:57:37] <entropy_> i don't even see a SQL line in this
[03:57:49] <TML> entropy_: Right, that's the whole point
[03:57:55] <TML> you stop. doing. it. in. sql.
[03:58:02] *** Quits: AnrDaemon (~ZNC@darkdragon-nln.starlink.ru) (Ping timeout: 272 seconds)
[03:58:15] <entropy_> how would it know what table to query then?
[03:58:27] <TML> entropy_: You return ALL the results in a <table> to the browser
[03:58:36] <ash_worksi> but if you're going to kill yourself over it: https://3v4l.org/5AqFJ
[03:58:38] <TML> entropy_: You tell the DataTables library which table has your data
[03:58:47] <ash_worksi> TML: it's not sticking
[03:58:48] <entropy_> TML ok how
[03:58:54] <TML> entropy_: How what?
[03:59:02] <TML> entropy_: The DataTables library automagically adds sorting and pagination to that table
[03:59:03] <ash_worksi> oh, wow, there was progress mayb
[03:59:22] *** Quits: junktext_ (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 246 seconds)
[03:59:37] <ash_worksi> entropy_: you know you use $stmt->fetchAll() and you get a bunch of data as an array?
[03:59:46] <entropy_> yes
[03:59:50] *** Joins: Cork (~Cork@user/cork)
[03:59:57] <ash_worksi> okay, imagine that array, except without a limit
[04:00:03] <entropy_> ok
[04:00:47] <ash_worksi> you return that data to your browser and javascript will sort and paginate it for you
[04:00:54] <ash_worksi> tada
[04:01:37] <entropy_> what is line 17 about?
[04:02:14] <entropy_> $limit can only be: 20 40 60 80 100 all
[04:02:31] <ash_worksi> that's good news I guess
[04:02:40] <entropy_> yeah
[04:03:14] <ash_worksi> I was showing how a crazy line like `20; DELETE FROM pastes;` could be attempted, but at least it's cohersed to a number
[04:03:23] <entropy_> true
[04:03:32] <ash_worksi> but if there is a static array of numbers then just whitelist the numbers
[04:03:48] <ash_worksi> also, you can just use DBAL and have it do it for you
[04:04:27] <entropy_> ash_worksi thanks for your patience (you too TML)
[04:04:28] <ash_worksi> $qb->setMaxResults(20);
[04:04:57] <entropy_> ash_worksi what does this represent? %%s = ?
[04:05:02] <entropy_> $search ?
[04:05:48] <entropy_> <- confused again sorry
[04:08:29] <TML> entropy_: https://bpa.st/JZKQ
[04:08:37] <TML> entropy_: Your PHP code would look something akin to that
[04:08:49] <TML> You might want to add more, like a <thead> and column headers, etc.
[04:09:02] *** Joins: harpia (~harpia@2804:2aec:205:4600:b62e:99ff:fee9:cc51)
[04:09:02] <TML> But that's all your PHP code has to do - output the rows as table data
[04:09:36] *** Joins: Dan39 (~dan@user/dan39)
[04:09:44] <TML> entropy_: Then you load the DataTable library into the JS and add $(document).ready( function () { $('#datatable').DataTable(); } );
[04:10:00] <ash_worksi> entropy_: https://3v4l.org/VRoUa
[04:10:02] <TML> entropy_: Everything else is just magically done by the library - the pagination, the column-sorting, etc.
[04:11:06] <TML> entropy_: That's why you want to remove this from the SQL - client-side libraries do it better, they remove possible code injection points, and they'll give your users more power with better performance
[04:11:50] <TML> writing PHP code to handle all of this would just be insane except in the most extreme of edge-cases
[04:12:21] <TML> powerful, high-performance client-side solutions have existed for decades now
[04:12:34] <ash_worksi> entropy_: if you are too afraid to do what TML is suggesting (for some reason), this would become bloated enough to need a class; and at that point you should just move to Doctrine: https://www.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/query-builder.html#sql-query-builder
[04:12:46] <entropy_> nice TML
[04:12:50] <entropy_> i'm testing it locallt
[04:12:52] <entropy_> locally*
[04:12:53] <TML> 😬
[04:13:03] <TML> I don't know that I'd recommend Doctrine
[04:13:05] <ash_worksi> but if you're willing to use PHP libraries, I don't know why you'd not want to use a client lib
[04:13:06] <TML> but YMMV :)
[04:13:16] <ash_worksi> TML: it's just the DBAL
[04:13:24] <ash_worksi> not full Doctrine with DQL
[04:13:26] <entropy_> i'm testing this: https://datatables.net/
[04:13:36] <ash_worksi> TML: how did you convert this person?
[04:13:56] <TML> logic?
[04:14:12] <ash_worksi> ah, no I know what did it
[04:14:19] <ash_worksi> your paste bin
[04:14:53] <TML> isn't that the same thing as logic? :)
[04:15:06] <entropy_> https://mypastebin.com/r8f
[04:15:14] <entropy_> is that right?
[04:15:19] <ash_worksi> well, yes, but if 'logic' where the answer you've been done with this long ago
[04:15:27] <TML> entropy_: You have to load JQuery as well
[04:15:35] <TML> entropy_: DataTables is a JQuery plugin
[04:15:36] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[04:16:00] <ash_worksi> and you have to have some PHP in there
[04:16:03] <TML> entropy_: <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script> <-- before you load datatables
[04:16:17] <TML> No, that example will work to show them how DataTables works
[04:16:41] <ash_worksi> yeah, well, I guess I interpreted "is that right?" differently
[04:16:51] <TML> entropy_: once you've seen how DataTables works, you replace the hardcoded table with your PHP loop
[04:17:03] <ash_worksi> ^
[04:17:41] <entropy_> TML https://mypastebin.com/r8f ?
[04:18:19] <entropy_> ok TML got it
[04:18:25] <ash_worksi> TML: you have become a 3v4l
[04:18:39] <TML> or in this case more like a codepen.io
[04:18:42] <TML> but *shrug*
[04:19:39] <ash_worksi> codesandbox.io has an oauth glitch, to anyone who cares
[04:19:52] <entropy_> TML is that code right?
[04:20:01] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 246 seconds)
[04:20:10] <entropy_> where do i put the SQL table name?
[04:20:25] <ash_worksi> TML: hah! I was right ;)
[04:20:36] <ash_worksi> entropy_: see TMLs earlier link
[04:20:42] <TML> entropy_: You use PHP to build a <table> like the bpa.st link I gave you
[04:21:31] <TML> 17:38:29          +TML | entropy_: https://bpa.st/JZKQ
[04:21:33] <TML> 17:38:37          +TML | entropy_: Your PHP code would look something akin to that
[04:21:56] <TML> entropy_: instead of directly typing your <table>, you have PHP generate it
[04:22:13] <TML> there's one method of doing that, via nested foreach loops
[04:22:16] <TML> there are certainly others
[04:22:37] <TML> oh - typo on line 6, though - should be "as" instead of "a"
[04:23:17] *** Joins: AnrDaemon (~ZNC@darkdragon-nln.starlink.ru)
[04:23:33] <TML> entropy_: So PHP makes a <table> with all the data in it, and DataTables decorates that table with the filtering and sorting tools
[04:24:33] <entropy_> ok
[04:24:55] <entropy_> Notice: Undefined variable: query in F:\xampp3\htdocs\beta\data.php on line 19
[04:25:07] <TML> entropy_: You still need to define your query
[04:25:23] <entropy_> SELECT * FROM pastes ?
[04:25:34] <entropy_> is that it?
[04:26:17] <TML> it's up to you what you want to do here - my code above assumes that you're using my match expression code provided earlier
[04:26:23] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[04:27:40] <entropy_> ok what about without?
[04:27:49] <TML> without what
[04:28:00] <entropy_> without match
[04:28:13] <entropy_> here is what i got..
[04:28:26] <TML> We've already had that discussion, I encourage you to go back and read the many lines of text already said on the matter
[04:28:43] <TML> ash_worksi and I both provided several examples of alternatives
[04:28:47] <entropy_> https://mypastebin.com/HMvIBBOxWT9F
[04:29:12] <entropy_> it echos a mess of RED background items
[04:29:28] <ash_worksi> TML: I feel icky seeing $_GET in an execute() without any data validation
[04:29:30] <TML> Why are you doing a bind when your query takes no bound parameters?
[04:30:26] <ash_worksi> TML: they probably miswrote the sql
[04:30:37] <TML> entropy_: You need to decide whether you want the table named datatable or table_id
[04:30:52] <TML> You've done one thing in the PHP code and the other in the javascript code
[04:31:12] <TML> Also, stop using () on your include statements
[04:31:49] <ash_worksi> entropy_: imo, you could benefit from some code separation at this point
[04:31:58] <TML> addtionally, your markup habits are pretty terrible
[04:32:47] <ash_worksi> entropy_: as a precursor to making an actual library, you could start by moving your logic into a handler and call that at the top of your view
[04:35:01] <TML> ash_worksi: You'll find I'm less into proscriptive habits like that than most people - if it's obvious the code is doing the right things, I don't mind
[04:35:11] *** Quits: harpia (~harpia@2804:2aec:205:4600:b62e:99ff:fee9:cc51) (Quit: harpia)
[04:35:18] <entropy_> all i see is a mess of red background
[04:35:38] <entropy_> sec
[04:35:47] <TML> entropy_: I can't help you there, but we gave a bunch of pointers above
[04:36:11] <TML> ash_worksi: And if it's NOT obvious the code is doing the right thing, I'd rather focus on making the code obvious than jumping through some stylistic hoop :)
[04:36:17] <entropy_> https://mypastebin.com/HMvIBBOxWT9F
[04:37:48] <entropy_> the css isnt working
[04:39:09] <ash_worksi> entropy_: something like this:
[04:39:10] <ash_worksi> https://glot.io/snippets/g8ck7hhes4
[04:40:04] <entropy_> ash_worksi where do i get handler.php?
[04:40:08] <TML> entropy_: You'll have to look at the HTML and debug why - as I noted above, your markup habits are pretty terrible, and that may be stuffing things up
[04:42:50] <ash_worksi> entropy_: see the tabs above
[04:43:12] *** Joins: w_lehinsun__ (~lehinsun@188.113.178.220)
[04:43:21] *** Quits: w_lehinsun (~lehinsun@188.113.178.220) (Read error: Connection reset by peer)
[04:43:48] *** Quits: SirLouen (~SirLouen@user/sirlouen) (Quit: Ping timeout (120 seconds))
[04:43:58] *** Joins: DoubleJ2 (~DoubleJ@user/doublej)
[04:44:11] *** Joins: SirLouen (~SirLouen@user/sirlouen)
[04:44:30] <entropy_> Warning: Invalid argument supplied for foreach() in F:\xampp3\htdocs\beta\data.php on line 20
[04:44:44] *** Quits: luva (~luva@185.168.9.235) (Read error: Connection reset by peer)
[04:44:46] <entropy_> 20 is: <?php foreach ($results as $result): ?>
[04:45:08] *** Joins: luva (~luva@185.168.9.235)
[04:45:20] <deltab> $results doesn't have a suitable value
[04:46:11] *** Quits: DoubleJ (~DoubleJ@user/doublej) (Ping timeout: 245 seconds)
[04:46:11] *** DoubleJ2 is now known as DoubleJ
[04:47:50] *** Joins: Koopz7 (~Koopz@koopz.rocks)
[04:48:49] *** Quits: BlackIkeEagle (~BlackIkeE@archlinux/trusteduser/blackikeeagle) (Quit: No Ping reply in 180 seconds.)
[04:50:08] <entropy_> ok
[04:50:08] <entropy_> i am assuming i need to edit the handler.php
[04:50:09] <entropy_> ash_worksi so i need an array?
[04:50:09] *** Quits: Koopz (~Koopz@koopz.rocks) (Quit: Ping timeout (120 seconds))
[04:50:09] *** Koopz7 is now known as Koopz
[04:50:18] *** Joins: BlackIkeEagle_ (~BlackIkeE@archlinux/trusteduser/blackikeeagle)
[04:51:00] *** Quits: newwebdev13 (~newwebdev@78.135.92.89) (Quit: Leaving)
[04:52:11] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 256 seconds)
[04:52:51] <entropy_> hello ash_worksi?
[04:53:17] <TML> entropy_: I would encourage you to STOP, take some time and THINK ABOUT the code you're being asked to run, and ASK QUESTIONS about things you don't understand - this idea of randomly pasting snippets of PHP and then wondering why they don't work isn't going to help you get any better at php
[04:53:35] <entropy_> ok
[04:53:54] <entropy_> but the table layout is not working with the given example
[04:54:38] <entropy_> there is no SQL query, no output (that is the same as the example on https://datatables.net/
[04:54:48] <entropy_> )
[04:55:01] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[04:55:43] *** Quits: pmercado (~pmercado@186.107.57.83) (Ping timeout: 246 seconds)
[04:59:13] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Ping timeout: 246 seconds)
[04:59:37] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[05:00:43] <TML> entropy_: https://examples.joeysmith.com/datatable.php
[05:00:48] <TML> There's an example for you
[05:01:36] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:02:49] <entropy_> and source?
[05:02:53] <entropy_> looks good
[05:03:18] <entropy_> thanks
[05:04:07] <TML> the source is basically the source I have given you earlier, with the addition of some lines to connect to the PDO source, create a table, and insert some rows
[05:04:43] <entropy_> sorry can you tell me the link again?
[05:05:00] <entropy_> i appoligize and thank you guys for pointing me in the right direction
[05:07:35] <TML> I *could* give you the link again, but I don't think it's going to help, as I don't give answers that are conducive to copying and pasting - I prefer to give small snippets scattered over multiple pastes that require some original thought by the reader to collect and build into something meaningful
[05:07:42] <ash_worksi> entropy_: finally: https://glot.io/snippets/g8ck7hhes4
[05:07:59] <TML> ash_worksi: line 15 is wrong
[05:08:03] <TML> :)
[05:08:33] <ash_worksi> well, that's what I get from copy pasting
[05:08:39] <TML> indeed
[05:08:47] <ash_worksi> updated
[05:09:06] <ash_worksi> dunno why the output has wonky spacing
[05:09:17] <TML> entropy_:   $stmt = $pdo->prepare("select distinct * from pastes"); $stmt->execute(); foreach ($stmt->fetchAll(PDO::FETCH_ASSOC) as $row) {echo '<tr>'; foreach($row as $col) { echo '<td>', $col, '</td>'; } echo '</tr>'; }
[05:09:23] <TML> entropy_: That's the relevant bit of my PHP
[05:09:56] <TML> (I added the "distinct" because I was too lazy to do a primary key on my in-memory SQLite database for this example)
[05:10:23] <deltab> html($col)
[05:10:32] <ash_worksi> deltab: pardon?
[05:10:52] <TML> deltab: Sure - again, this isn't intended to be a working solution, just an example
[05:10:56] <deltab> the values should be html-encoded
[05:11:14] <TML> I am confident none of my data has HTML entities in it, since I controlled all input
[05:11:30] <ash_worksi> does PHP eat a trailing\n after ?> ?
[05:12:02] *** Joins: vlm (~vlm@user/vlm)
[05:12:14] <TML> it might in the template style you're using, I never write PHP that way, so I don't know
[05:12:44] <TML> also, line 22 is wrong
[05:12:56] <TML> you almost certainly meant $result instead of $results
[05:13:01] <ash_worksi> I guess it does
[05:13:07] <deltab> ash_worksi: hmm, seems that it does
[05:13:23] <ash_worksi> TML: line?
[05:13:25] <deltab> I didn't expect that
[05:13:34] <TML> > also, line 22 is wrong
[05:13:49] <entropy_> TML what about only showing certain columns?
[05:13:58] <TML> entropy_: What about it?
[05:14:28] <TML> you're just asking for my permission, or what?
[05:14:36] *** Joins: freeworld (~freeworld@chello085216193138.chello.sk)
[05:14:38] <deltab> you can tell datatables which columns you want it to show
[05:14:57] <TML> or you could simply not select columns you're not going to use
[05:14:59] <ash_worksi> TML, I guess the paste is not updated?
[05:15:02] <entropy_> example deltab?
[05:15:10] <deltab> or you can make your html generation conditional
[05:15:30] <ash_worksi> TML: try in-private
[05:15:34] <TML> entropy_: Go read the datatables documentation for more, we're not a documentation substitute
[05:16:01] <TML> ash_worksi: I'm looking at https://glot.io/snippets/g8ck7hhes4 - if you gave a newer paste, I missed it
[05:16:09] <TML>  <?php foreach ($results as $column): ?>
[05:16:17] <TML> That should almost certainly be $result
[05:16:21] *** Quits: freeworld (~freeworld@chello085216193138.chello.sk) (Client Quit)
[05:16:23] <ash_worksi> TML: *that* link should be updated
[05:16:34] <ash_worksi> TML: which leads to believe you have a cached version
[05:17:01] <TML> ash_worksi: It's still wrong even if I curl the page
[05:17:10] <TML> &lt;?php foreach ($results as $column): ?&gt;
[05:17:17] <ash_worksi> dunno why, but here: https://glot.io/snippets/g8cl99j2nz
[05:17:26] <ash_worksi> TML: I fixed that a long time ago, I'm saying
[05:17:33] <TML> ash_worksi: *shrug*
[05:17:48] <TML> some goofiness on glot.io, I guess
[05:18:13] <ash_worksi> I mean, I fixed that before you pointed it out :P
[05:18:21] <ash_worksi> even before you pointed out my table_id
[05:18:33] <ash_worksi> (I wasn't about to paste a broken glot ^ ^)
[05:18:37] <TML> note sure you want to <td>colname</td><td>value</td> here, but *shrug*
[05:18:48] <ash_worksi> me neither
[05:18:54] <TML> s/note/not/
[05:18:54] <ash_worksi> but I am over it
[05:19:08] <TML> that may lead to datatables being confused about what you want
[05:19:52] <ash_worksi> it prints some data in a table and there's a link to some javascript. Afaiac, mission accomplished
[05:20:03] <TML> fair enough :)
[05:20:27] *** Joins: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[05:20:57] <ash_worksi> it also gets my point across about separating logic from a view, but I think that horse was dead before I beat
[05:20:58] <entropy_> TML i can't get it to work
[05:21:00] <ash_worksi> it
[05:21:05] *** Joins: l__q (~modinfo@user/modinfo)
[05:21:07] <entropy_> i think there is a problem with the jquery
[05:21:14] <entropy_> here let me pastebin it...
[05:21:18] <ash_worksi> entropy_: see my magnificent paste
[05:21:25] <TML> entropy_: I showed you a working page, I invite you to compare your HTML to mine
[05:21:33] <ash_worksi> marvel at my amazing code splitting skillz
[05:22:11] <ash_worksi> gasp and awe at how I return static data from a fake PDO instance
[05:22:16] <entropy_> https://mypastebin.com/HMvIBBOxWT9F
[05:22:30] <entropy_> ash_worksi the last url you typed?
[05:22:32] <ash_worksi> which, btw, forced me to use namespaces which I was going to be too lazy to do
[05:23:02] <ash_worksi> entropy_: considering other people had problems with it, try this: https://glot.io/snippets/g8cl99j2nz
[05:23:20] <ash_worksi> I like the phrase "goint to be too lazy"
[05:23:24] <ash_worksi> going*
[05:23:52] <TML> entropy_: I'd invite you to compare your HTML to the working page I gave you and see if you can identify for yourself what's different
[05:24:03] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[05:25:53] <entropy_> ash_worksi
[05:25:54] <entropy_> Notice: Undefined offset: 0 in F:\xampp3\htdocs\beta\handler.php on line 21
[05:25:54] <entropy_> Notice: Undefined offset: 1 in F:\xampp3\htdocs\beta\handler.php on line 22
[05:26:07] <entropy_> TML sure.
[05:26:46] <ash_worksi> entropy_: you can't just copy my code down, you have to adapt it
[05:26:53] <entropy_> oh
[05:26:55] <TML> I provided a fully working example, which is far more than I would usually do for an IRC question of this nature. You're going to have to troubleshoot yourself from here.
[05:26:58] <ash_worksi> (mine uses an input file)
[05:27:24] <ash_worksi> I am already many hours behind on my work --- I only have myself to blame for this
[05:28:10] <entropy_> TML (+TML) entropy_: That's the relevant bit of my PHP
[05:28:19] <entropy_> how aboyt the whole code?
[05:28:21] <entropy_> please?
[05:28:23] <entropy_> about*
[05:28:48] <entropy_> there is a 'red' background and it displays all the columns
[05:28:51] <entropy_> and no header
[05:28:58] <entropy_> that's why i think i got an error of some kind
[05:29:01] <TML> entropy_: I gave you the whole code
[05:29:50] <TML> entropy_: Did you do the exercise yet?
[05:30:01] <entropy_> sorry
[05:30:06] <entropy_> i didn't see code on that examplel
[05:30:10] <entropy_> but i viewed source
[05:30:17] <entropy_> now i'm going to use your php
[05:30:48] <TML> 18:39:17          +TML | entropy_:   $stmt = $pdo->prepare("select distinct * from pastes"); $stmt->execute(); foreach ($stmt->fetchAll(PDO::FETCH_ASSOC) as $row) {echo '<tr>'; foreach($row as $col) { echo '<td>', $col, '</td>'; } echo '</tr>'; }
[05:30:55] <entropy_> got it
[05:30:59] <TML> entropy_: Your problem is not a PHP problem
[05:31:02] <TML> it's an HTML problem
[05:31:04] <TML> entropy_: I'd invite you to compare your HTML to the working page I gave you and see if you can identify for yourself what's different
[05:31:20] <TML> It's a pretty obvious HTML problem if you stop and read the differences
[05:31:32] *** Quits: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:31:35] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 260 seconds)
[05:31:42] <TML> took me about 2 seconds of reading your HTML to see what you were doing wrong
[05:34:41] <deltab> entropy_: try typing it out instead of copying and pasting. It'll make more of your brain learn and make it easier to spot errors
[05:35:51] <entropy_> TML how about only getting certain column names?
[05:36:10] *** Quits: de-facto (~de-facto@user/de-facto) (Remote host closed the connection)
[05:36:17] <deltab> list the columns you want
[05:36:20] <entropy_> i want: #	Author	Desc	▼Added	Edited	Hits	Exp
[05:36:26] <deltab> instead of *
[05:36:34] <entropy_> oh neat
[05:36:36] *** Parts: Dan39 (~dan@user/dan39) (WeeChat 3.4.1)
[05:36:47] <ash_worksi> that was fairly painless
[05:37:56] <ash_worksi> I am having trouble conceptualizing docker secrets in a symfony container
[05:38:12] *** Joins: phlixi_ (~phlixi@aftr-62-216-206-148.dynamic.mnet-online.de)
[05:39:05] <ash_worksi> my thought was I could just `docker create secret pg_pass -` and then use them in the containers like `DSN=postgres://user:$pg_pass@host:5432/db`
[05:39:12] *** Joins: de-facto (~de-facto@user/de-facto)
[05:39:14] <ash_worksi> but that doesn't seem to be the case
[05:39:14] *** Joins: arieh8 (~51062cbb@user/jewllama)
[05:39:43] <entropy_> WOOT!
[05:39:44] <entropy_> TML works like a charm
[05:39:47] *** Quits: phlixi (~phlixi@aftr-62-216-206-148.dynamic.mnet-online.de) (Ping timeout: 250 seconds)
[05:41:17] *** Quits: arieh (~51062cbb@user/jewllama) (Ping timeout: 240 seconds)
[05:41:17] *** arieh8 is now known as arieh
[05:42:22] <deltab> ash_worksi: looks like it creates a file under /run/secrets/
[05:43:06] <ash_worksi> yes
[05:43:13] <entropy_> TML last question...
[05:43:29] <ash_worksi> deltab: but how am I supposed to get that into environment variables?
[05:43:30] <entropy_> how do i test if each column is "expired" or "added"?
[05:43:39] <entropy_> in the echo line?
[05:43:59] <ash_worksi> entropy_: code?
[05:44:13] <ash_worksi> I mean, show me the code, pls
[05:44:26] <deltab> ash_worksi: export ps_pass=$(< /run/secrets/pg_pass)
[05:44:52] <ash_worksi> oh you know what
[05:44:55] <entropy_> ash_worksi
[05:44:56] <entropy_> https://mypastebin.com/6sAYvf34AH0C
[05:45:06] <ash_worksi> I bet I can do it with env_file=
[05:45:10] <ash_worksi> I wonder if that takes an array
[05:46:12] <deltab> https://earthly.dev/blog/docker-secrets/
[05:46:45] <ash_worksi> entropy_: are you looking for `<?php echo $result['exp'] ? 'expired' : 'added'; ?>` ?
[05:47:07] <ash_worksi> deltab: they don't give an example using an app though
[05:47:33] <ash_worksi> oh they do!
[05:47:49] <ash_worksi> but wordpress has such an envvar
[05:48:00] <ash_worksi> a standard PHP container does not
[05:48:13] <ash_worksi> which would me I would additionally need to parse it
[05:48:38] <deltab> parse what?
[05:49:14] <ash_worksi> the file, (ie, export ... )
[05:50:00] <ash_worksi> and I am not about to write an entrypoint script for this if `{ env_file: [...] }` will work
[05:50:07] <ash_worksi> testing...
[05:51:21] <ash_worksi> hmmmmmmm
[05:51:47] <ash_worksi> I am just now realizing that env_file's take NAME=value in the content of the file
[05:51:52] <ash_worksi> which is not how secrets are designed
[05:57:05] <deltab> how do you want to use the secret within the container?
[05:58:56] <entropy_> ash_worksi https://mypastebin.com/6sAYvf34AH0C -> what's wrong here?
[06:00:25] <deltab> entropy_: what's telling you there's something wrong?
[06:01:37] <entropy_> sorry
[06:01:37] <entropy_> https://mypastebin.com/6sAYvf34AH0C
[06:01:43] <entropy_> ^ the 0 is not Never
[06:02:50] <entropy_> i need to check if the column is "added"
[06:02:54] <entropy_> not working though
[06:03:02] <deltab> how so?
[06:03:34] <entropy_> if ($row["expires"]) {
[06:03:36] <entropy_> not working
[06:03:49] <deltab> there are lots of ways something can be not working: which one are you seeing?
[06:04:58] <entropy_> oh i think it's fixed now
[06:05:03] <entropy_> if ($row == "expires") {}
[06:05:06] <entropy_> works
[06:05:07] <entropy_> but
[06:05:18] <ash_worksi> deltab: usage: `getenv('PG_PASS');`
[06:05:19] <entropy_> if it's "0" i want to display Never
[06:06:16] <deltab> ash_worksi: can you change that to file_get_contents?
[06:06:28] <ash_worksi> deltab: not without hacking symfony core
[06:09:54] <entropy_> deltab?
[06:10:16] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 246 seconds)
[06:11:23] <deltab> entropy_: what happens instead?
[06:13:06] <entropy_> deltab it does nothing
[06:13:20] *** Joins: l__q (~modinfo@user/modinfo)
[06:14:20] <deltab> the script stops?
[06:14:33] <entropy_> no
[06:14:38] <entropy_> it just ignores the line completly
[06:14:48] <entropy_> also wondering why the CSS is not working?
[06:15:18] *** Joins: mixfix41 (~homefame@user/mixfix41)
[06:15:27] <deltab> view source: is the css there?
[06:15:58] <entropy_> <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css" />
[06:16:05] <entropy_> doesn't load
[06:16:21] <deltab> ash_worksi: use $( ) in a .env file?
[06:16:59] <deltab> entropy_: check in the developer tool, network panel: is it trying to load it? is there an error?
[06:18:57] <ash_worksi> deltab: was that a suggestion?
[06:19:12] <entropy_> no l oading no error deltab
[06:19:40] <deltab> ash_worksi: yes, unless oyu're using Windows
[06:20:16] <deltab> https://symfony.com/doc/current/configuration.html#env-file-syntax
[06:21:18] <deltab> $(cat /run/secrets/pg_pass)
[06:24:10] <ash_worksi> deltab: so you're proposing I commit a file which cats a secret?
[06:24:19] <ash_worksi> (commit an .env file)
[06:25:15] *** Quits: Phil-Work (~phil@62.3.100.20) (Ping timeout: 260 seconds)
[06:25:21] <ash_worksi> deltab: ftr, I'm not criticizing, I just want to be clear so that I know, "people would do this"
[06:28:32] <entropy_> deltab hello?
[06:31:31] <ash_worksi> dang it
[06:31:49] <ash_worksi> I was optimistic about using FOO: secret; and sigh
[06:36:13] <deltab> ash_worksi: yes, unless there's some more convenient way to read a file, but I can't see one
[06:37:07] <ash_worksi> deltab: well, I guess I will go with an entrypoint
[06:37:08] <ash_worksi> boo
[06:37:19] <deltab> uh, why?
[06:37:39] <ash_worksi> because I don't want to commit a prod .env
[06:38:05] <deltab> uh, would you need to commit it?
[06:38:27] *** Quits: justOkay (~justache@user/justache) (Quit: The Lounge - https://thelounge.chat)
[06:38:36] <deltab> I don't use .env files, so I don't know the best practices
[06:42:17] <Blondie101010> it usually includes passwords - good reason not to commit it
[06:42:35] *** Joins: justOkay (~justache@user/justache)
[06:44:41] <ash_worksi> deltab: oh I see
[06:45:04] <ash_worksi> i am sort of confusing myself because of the different formats
[06:45:09] *** Joins: chao (~stenno@user/stenno)
[06:45:17] <ash_worksi> symfony is expecting DATABASE_URL=...
[06:45:25] <ash_worksi> and postgresql is expecting POSTGRES_PASSWORD
[06:45:47] <ash_worksi> it would be nice to just have DATABASE_URL=...${POSTGRES_PASSWORD}...
[06:46:05] <deltab> yeah, I get that
[06:46:46] <deltab> I preferred it the way it was before, with separate values instead of DSNs
[06:47:33] <deltab> avoid parsing problems by storing values separately
[06:49:47] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 250 seconds)
[06:50:30] <deltab> taken to the extreme, one setting per file: https://pypi.org/project/envdir/
[06:50:48] <ash_worksi> deltab: 1 setting per file *was* the direction I was going
[06:52:07] <deltab> glad to hear it
[06:52:33] <deltab> so you just need a way to load the values, then?
[06:52:55] <deltab> I expect it's possible to add a config loader to symfony
[07:02:46] <entropy_> deltab "select distinct id,author,description,added,edited,hits,expires from pastes WHERE public = 'yes' "
[07:02:48] <entropy_> what's wrong there?
[07:06:10] <deltab> is there something wrong there?
[07:06:40] <deltab> ash_worksi: aha, https://symfony.com/doc/current/configuration/env_var_processors.html
[07:07:10] <deltab> ash_worksi: notice env(file:FOO)
[07:11:06] <entropy_> question
[07:20:04] <entropy_> https://mypastebin.com/st6WytH3B
[07:20:07] <entropy_> is not working right
[07:20:39] *** Joins: chao (~stenno@user/stenno)
[07:23:11] <entropy_> it's only showing 230 of 247
[07:23:18] <entropy_> on the select line
[07:25:28] <deltab> are there 17 without public = 'yes'?
[07:26:02] <entropy_> 236
[07:26:25] <entropy_> er
[07:26:40] <entropy_> all of them is 247
[07:30:52] <entropy_> nevedrmind
[07:30:56] <entropy_> i figured it out
[07:30:58] <entropy_> sorry
[07:33:26] <entropy_> another question
[07:33:34] <entropy_> how do i get the active column
[07:33:39] <entropy_> from that loop?
[07:35:10] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[07:37:44] *** Joins: Buggys (~Buggys@185.149.90.52)
[07:39:55] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 260 seconds)
[07:55:50] <deltab> that's your loop variable
[07:56:42] <chao> are you just telling them what to write lol
[07:58:13] <deltab> trying not to
[08:04:04] <entropy_> question how do i get the duration of 1583103892
[08:04:11] <entropy_> a time() number
[08:06:53] <deltab> what do you mean by duration?
[08:07:27] <deltab> "1583103892 seconds" is a duration
[08:07:43] <entropy_> i want to get the duration in weeks/days/hours/mins/secs
[08:07:56] <entropy_> duration(1648524755)
[08:07:59] <entropy_> will return
[08:08:03] <entropy_> 2w3d
[08:08:06] <entropy_> etc
[08:09:32] <Blondie101010> !+DateTime
[08:09:33] <php-bot> Representation of date and time. http://php.net/manual/en/class.datetime.php
[08:09:53] <Blondie101010> DateInterval
[08:10:21] <Blondie101010> DateInterval would be relevant
[08:11:13] <deltab> https://www.php.net/manual/en/class.dateinterval.php
[08:13:21] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 256 seconds)
[08:13:58] <entropy_> it's not showing me a way to proccess a time() value
[08:15:16] <Blondie101010> many ways
[08:15:32] <deltab> what will it accept?
[08:15:49] <deltab> and how can you make what you have into what it will accept?
[08:17:24] <Blondie101010> $date = DateTime::createFromFormat('U', time());
[08:17:49] *** Quits: sreve (~quassel@p549d70fc.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[08:18:14] *** Joins: sreve (~quassel@p4ff44dd2.dip0.t-ipconnect.de)
[08:18:46] <entropy_> Blondie101010 Fatal error: Uncaught Error: Object of class DateTime could not be converted to string
[08:19:27] <Blondie101010> what the heck
[08:19:31] <Blondie101010> it doesn't
[08:19:44] <Blondie101010> show *your* code
[08:20:26] <Blondie101010> https://3v4l.org/G9mEa
[08:20:53] <deltab> that's not a DateInterval though
[08:20:54] <Blondie101010> the error is on line 5, not before
[08:21:31] <Blondie101010> you make the interval based on the two dates
[08:21:32] <deltab> entropy_: what will the DateInterval constructor accept?
[08:22:07] <deltab> Blondie101010: ah, okay, so a different way to get a DateInterval
[08:22:49] <entropy_> i don't know
[08:23:00] <deltab> entropy_: look at the documentation
[08:23:05] <Blondie101010> not sure why I'd *wonder* about anything if I got a plain timestamp
[08:23:22] <Blondie101010> $interval = $ts2 - $ts1
[08:23:36] <Blondie101010> but he wanted the formatting
[08:23:47] <Blondie101010> could be done that way
[08:23:50] <entropy_> 2days 6hours etc
[08:24:08] <deltab> you'd need the other timestamp though. I think it's simplere to go from the number of seconds directly to DateInterval
[08:24:46] <Blondie101010> that seems to fit with the data
[08:25:12] <Blondie101010> so it's a duration in seconds
[08:25:24] <Blondie101010> entropy_:  how do you get that duration?
[08:25:33] <deltab> ah, I see
[08:25:52] <deltab> probably don't want 50 years as output
[08:26:28] *** Joins: pmercado (~pmercado@186.107.57.83)
[08:26:44] <Blondie101010> 49 years, 3 months, 4 days, 7 hours, 21 minutes, and 52 seconds
[08:27:07] <entropy_> https://mypastebin.com/Tr3GU
[08:27:14] <entropy_> but it's horribly inneficiant
[08:27:25] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 240 seconds)
[08:31:58] <Blondie101010> I can see a lot of things that deserve improvement, but don't get the point on its efficiency
[08:32:17] <Blondie101010> do you have to run batches of millions of records?
[08:32:23] <entropy_> no
[08:32:30] <Blondie101010> how slow can it be?
[08:33:48] <Blondie101010> if your function works, then I give your script the passing grade (barely)
[08:33:59] <__adrian> it doesn't
[08:34:03] <Blondie101010> !+@
[08:34:04] <php-bot> [@] The PHP error control operator that suppresses errors (@foo()), see: http://php.net/operators.errorcontrol - Don't use it. See http://derickrethans.nl/five-reasons-why-the-shutop-operator-should-be-avoided.html for some reasons why not
[08:34:33] <entropy_> __adrian yeah it's not working
[08:34:34] <__adrian> it gives substantially wrong answers on the scale of your example
[08:34:37] <entropy_> give -52y
[08:34:38] <entropy_> etc
[08:34:45] <entropy_> gives*
[08:35:03] <Blondie101010> entropy_:  the trick to break it down like you want is to remove the larger units first
[08:35:47] *** Joins: bobdobbs (~user@2406:5a00:4456:db00:6044:fd9a:1b3c:5456)
[08:35:50] <Blondie101010> maybe I'm missing something
[08:35:54] <entropy_> no idea how to do that
[08:36:50] <TML> entropy_: time() doesn't represent an interval, a represents a specific moment in time
[08:37:50] <TML> s/a represents/it represents/
[08:38:07] <TML> entropy_: Are you trying to get the distance from your stored time() and now?
[08:39:02] <TML> _THAT_ can be represented as an interval
[08:39:21] <entropy_> yes
[08:39:24] <entropy_> TOML
[08:39:26] <entropy_> TML*
[08:39:50] <entropy_> thanks again for directing me to that table thing
[08:40:18] <entropy_> saves SO much time and energy
[08:40:23] <TML> entropy_: If you want to present intervals in a human-friendly way to users of your website, I'd suggest using moment.js
[08:40:26] <TML> https://momentjscom.readthedocs.io/en/latest/moment/08-durations/03-humanize/
[08:41:07] *** Joins: chao (~stenno@user/stenno)
[08:43:01] <TML> if you're doing it for back-end reasons, I'd argue you really shouldn't be "humanizing" it
[08:43:57] <entropy_> 		$t = moment("20111031", "YYYYMMDD").fromNow();
[08:43:57] <entropy_> die($t);
[08:44:02] <entropy_> error
[08:44:20] <TML> I have no idea WTF you're doing there
[08:44:40] <TML> Please stop trying to copy and paste code without reading and understanding first
[08:44:56] <TML> moment.js is a Javascript library
[08:45:39] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 256 seconds)
[08:46:17] <entropy_> ok
[08:46:51] <entropy_> i have the script loaded
[08:46:59] <TML> OK, now go read the docs on how to use it
[08:48:23] <entropy_> ok still says moment call to undefined function
[08:48:33] <entropy_> using any example
[08:48:50] <TML> what says that?
[08:53:06] <deltab> "Call to undefined function" is a php error message, which suggests you're trying to call a javascript function from php, which won't work
[08:53:45] <TML> deltab, giving away the plot again
[08:53:50] <TML> :)
[08:56:28] *** Joins: ViktorasCNC (~sinvet@user/sinvet)
[08:57:01] *** Quits: DerekTheRed (~portra400@peso.subtitled.com) (Quit: +++NO CARRIER)
[08:57:18] *** Joins: DerekTheRed (~portra400@peso.subtitled.com)
[08:57:32] *** Joins: ViktorasCAM (~sinvet@user/sinvet)
[08:57:32] *** Quits: ViktorasCAM (~sinvet@user/sinvet) (Client Quit)
[08:57:39] *** ViktorasCNC is now known as sinvet
[09:05:48] *** Quits: Hiccup (~cHoy@user/hiccup) (Ping timeout: 265 seconds)
[09:17:34] <entropy_> ok TML.. how would i use moment in javascript on my page?
[09:17:50] <TML> entropy_: By reading its documentation
[09:24:10] *** Quits: w_lehinsun__ (~lehinsun@188.113.178.220) (Ping timeout: 246 seconds)
[09:24:25] *** Joins: w_lehinsun (~lehinsun@188.113.178.220)
[09:30:04] *** Joins: Hiccup (~cHoy@user/hiccup)
[09:32:21] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Ping timeout: 256 seconds)
[09:33:43] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[09:41:11] *** Quits: chozorho (~chozorho@c-69-250-72-103.hsd1.md.comcast.net) (Quit: WeeChat 3.0)
[09:48:07] <entropy_> TML question
[09:48:25] <entropy_> i need the table thing to goto 800px
[09:48:30] <entropy_> or smaller
[09:48:46] <entropy_> only thing that i can see is 100% width
[09:48:53] <TML> Did you google?
[09:50:14] *** synapt is now known as nate
[09:58:07] *** Quits: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net) (Quit: bah, bbiab)
[10:04:55] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[10:12:11] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[10:16:40] *** Quits: pmercado (~pmercado@186.107.57.83) (Ping timeout: 246 seconds)
[10:21:24] *** Joins: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it)
[10:24:22] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[10:30:27] *** Joins: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:2438:cfba:5f61:22d0)
[10:37:42] *** Joins: tercaL (~tercaL@user/tercal)
[10:46:08] *** Quits: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:2438:cfba:5f61:22d0) (Remote host closed the connection)
[10:46:28] *** Quits: mintoyatsu (~mint@user/mintoyatsu) (Remote host closed the connection)
[10:47:21] *** Joins: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:2438:cfba:5f61:22d0)
[10:47:39] *** Joins: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net)
[10:49:10] *** Quits: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[10:49:58] *** nate is now known as Guest5365
[10:49:58] *** Quits: Guest5365 (NBishop@o.apocaleaps.com) (Killed (calcium.libera.chat (Nickname regained by services)))
[10:50:10] *** Joins: synapt (NBishop@o.apocaleaps.com)
[10:52:01] *** Quits: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:2438:cfba:5f61:22d0) (Ping timeout: 256 seconds)
[10:54:33] *** Joins: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:3c15:c3a:9d1f:e61)
[10:54:53] *** Quits: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:3c15:c3a:9d1f:e61) (Read error: Connection reset by peer)
[10:57:11] *** Joins: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd)
[11:00:22] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[11:06:09] <entropy_> TML i can't figure out how to get the results of moment.js
[11:06:22] <entropy_> like <body onload=""> ?
[11:19:02] *** Joins: luigibu (~luigi@93.176.153.88)
[11:19:26] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:30:27] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[11:31:46] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928)
[11:35:04] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 246 seconds)
[11:38:14] *** Joins: fef (~thedawn@user/thedawn)
[11:39:29] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[11:43:53] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Remote host closed the connection)
[11:46:35] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[11:48:10] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[11:48:26] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[11:48:58] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Client Quit)
[11:51:40] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[11:53:12] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Client Quit)
[11:53:27] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[11:53:59] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Client Quit)
[12:03:55] *** Joins: l__q (~modinfo@user/modinfo)
[12:07:13] *** Joins: richardjh (~Thunderbi@51.219.41.0)
[12:10:57] *** Joins: chao (~stenno@user/stenno)
[12:15:48] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 260 seconds)
[12:27:09] <jargon> How do I use an address instead of a get command?
[12:27:59] <AllenJB> I think you're going to need to rephrase and/or provide additional context to that question. It doesn't make much sense to me.
[12:28:35] <jargon> http://puzzlum.org/repo/
[12:29:38] <jargon> Yes, I need to shave down the unused source.
[12:29:55] <jargon> Is there a way to test for unused PHP code?
[12:30:57] <Naktibalda> wtf
[12:31:39] *** Joins: opeerateur_ (~My_user_n@91.143.220.230)
[12:32:07] <jargon> Naktibalda?
[12:32:32] <Naktibalda> it looks super ugly on Firefox and I see a big block of javascript code at the top
[12:32:42] <Naktibalda> I thought that you asked about that code
[12:33:11] *** Joins: GvJordan (~Jordan@y.gvnet.me)
[12:33:11] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928) (Ping timeout: 250 seconds)
[12:33:14] <Naktibalda> it looks the same on Chrome
[12:34:07] <jargon> That better? ;) http://puzzlum.org/repo/
[12:35:04] <Naktibalda> how it relates to PHP?
[12:36:07] <jargon> That better? ;) http://puzzlum.org/repo/?prj=Dungeon&sect=mostrecent
[12:36:32] <Naktibalda> what's your PHP question?
[12:36:32] <jargon> How do I use /foo/bar instead of ?foo=bar
[12:37:30] <jargon> Or did I get bad advice?
[12:37:38] <Naktibalda> that thing is called URL rewriting
[12:38:09] <jargon> :)
[12:38:21] <Naktibalda> you have to add some rewriting rules to your webserver configuration to handle requests that don't point to existing files.
[12:39:11] <jargon> Wow, this reminds me of the webserver I made myself in the past using visual basic!
[12:39:53] *** Joins: chao (~stenno@user/stenno)
[12:42:47] <jargon> .__>
[12:42:49] <jargon> .__.
[12:42:55] <jargon> >__<
[12:43:23] <jargon> Naktibalda, does my page look better now that I disabled tracing?
[12:48:11] *** Joins: LucaTM (~LucaTM@user/lucatm)
[12:55:27] *** Joins: qqqhhh861 (~qqqhhh@45.83.220.205)
[13:01:46] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[13:04:23] <teresko> jargon: you just need to search for somethiong like "nginx url rewriting"
[13:04:29] <teresko> and that should solve it
[13:04:38] *** Joins: alien_lappy (~alien@user/alien)
[13:04:48] <alien_lappy> hey, i have some trouble with FormData post on $.ajax() to a PHP page, my $_POST is not populated, even though i'm following: https://stackoverflow.com/questions/37672531/post-is-not-working-in-ajax-form-submit
[13:05:19] <teresko> jargon: on php side you would need to looks up "single point of entry" and "php url routing"
[13:05:56] <teresko> alien_lappy: is there any particular reason you are using jquery instead for the new Fetch API ?
[13:05:58] <Naktibalda> alien_lappy: check using developer tools in your browser what content-type header and request body it sends
[13:06:45] <alien_lappy> i think it was appl www-form-data
[13:06:48] <teresko> you might find this useful https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#body
[13:07:27] <Naktibalda> alien_lappy: was it really a POST request?
[13:07:40] <alien_lappy> teresko: thanks for the info, but this is an older project, i can't justify redoing all of it
[13:07:45] <alien_lappy> Naktibalda: yes
[13:08:13] <entropy_> anyone here can help me with a php function that gets the time() and sees how an old a new time is like duration?
[13:08:27] <Naktibalda> alien_lappy: did request body look properly url encoded?
[13:08:59] <Naktibalda> entropy_: $start = time();  doWork();  $duration = time() - $start;
[13:09:01] <alien_lappy> response header is: application/json
[13:09:06] <teresko> you do not need to rewrite everything - you just need to stop using that terrible JQ wrapper for ajax
[13:09:08] <Naktibalda> microtime(true) would give more accuracy
[13:09:18] <alien_lappy> the body looks like a mime content
[13:09:28] *** Joins: phpn00b (~phpn00b@dynamic-002-244-106-179.2.244.pool.telefonica.de)
[13:09:33] <Naktibalda> alien_lappy: boundaries and headers?
[13:09:36] <teresko> look at the network tab in developer tool
[13:09:55] <alien_lappy> Naktibalda: that is the problem, there is no boundary in the response header
[13:09:58] <teresko> make sure that request and respons are ACTUALLY corectly formated
[13:10:18] <Naktibalda> alien_lappy: lets focus on request first
[13:10:23] <teresko> why would resonse need boundary header?
[13:10:29] <teresko> *response
[13:10:31] <phpn00b> PostgreSQL PDO with "PDO::ATTR_STRINGIFY_FETCHES => false" still stringlifies numeric and float values. Do I have to use something like PDO::FALSE ?
[13:10:51] <entropy_> Naktibalda doWork() is undefined
[13:10:53] <alien_lappy> Naktibalda: the link on stackoverflow has this issue, and the accepted answer is what i followed, processData false, contentType false: dataType json, and type POST en data: a FormData object
[13:11:03] <Naktibalda> phpn00b: IIRC that setting only makes a difference if you set it to TRUE
[13:11:20] <Naktibalda> entropy_: that was a placeholder for the code that you want to measure
[13:11:40] <phpn00b> Naktibalda: But his, strings were by default (I've tried with float and numeric columns) :(
[13:11:41] <teresko> phpn00b: why would you trust the types from SQL?
[13:11:53] <alien_lappy> of course, sorry, request Header is: Content-Typeapplication/x-www-form-urlencoded; charset=UTF-8
[13:11:55] <phpn00b> teresko: Because I created them :D
[13:12:00] <Naktibalda> phpn00b: do you use old version of PHP?
[13:12:03] <alien_lappy> but the body looks mime encoded
[13:12:08] <phpn00b> Naktibalda: 8.1
[13:12:09] <Naktibalda> alien_lappy: pastebin it
[13:12:13] <teresko> phpn00b: you should enfoire the types in the setters of your Entity objects
[13:12:19] <teresko> *enforce
[13:12:53] <phpn00b> teresko: Sorry, does this mean I should cast all the results from the DB ?
[13:13:33] <teresko> phpn00b: via setter typehints
[13:13:43] * phpn00b googles
[13:14:20] <teresko> class User { public function setId(int $id) { ....
[13:15:03] <alien_lappy> Naktibalda: it is a mime thing, it starts with ---------stuff and next line has content-disposition: form-data
[13:15:21] <alien_lappy> i have difficulty copy pasting from javascript console
[13:15:46] <phpn00b> teresko: OKay, need to rewrite some stuff then. Thanks
[13:15:55] <teresko> alien_lappy: you are barking up the wrong tree
[13:16:49] <alien_lappy> see https://imgur.com/a/uOvZx8N
[13:17:23] <teresko> phpn00b: ideally you would have two groups of objects - Entities (basically 'domain objects" for "things" in your system) and Data Mappers (for containing the SQL code)
[13:17:34] <alien_lappy> teresko: i don't understand what you mean...?
[13:17:40] <teresko> phpn00b: here is a very simple example from a "interview exercise I did: https://github.com/teresko/orange-exercise/blob/master/src/Model/Mapper/Equation.php
[13:17:55] <phpn00b> teresko: I'll have a look. thanks!
[13:20:05] <teresko> alien_lappy: whatever the problem is, it is NOT related to boundaries (neither on browser nor php side) because that part is handled automatically by the client and SAPI when you have form-date content type
[13:20:07] <alien_lappy> Naktibalda: now, i realize that this is not a php bug or something, it's a jquery thing, cause, to use FormData , i need to set contentType to false, en processData to false, so, the request content-type is not correct for the body; but i donno how i can use FormData in jquery otherwise; the post on stackoverflow seems to suggest that it works, but well, even if it does, if the request contentType header is wrong, that's kinda useless
[13:20:31] <teresko> just rewrite taht part to  Fetch and be done with it
[13:22:37] <alien_lappy> teresko: that's not easily justifiable for this project, really
[13:24:02] <entropy_> i can't find anywhere a function to test two time() values and return seconds elapsed? anyone?
[13:24:11] <entropy_> i get liek 52y
[13:24:15] <entropy_> and other nonsense
[13:24:47] <TinoDidriksen> time() returns seconds, so just subtract.
[13:24:53] <teresko> alien_lappy: what is not justifiable? chaning 6 lines of code?
[13:24:59] <teresko> FetchAPI is not a library
[13:25:06] <teresko> it is core feature
[13:25:18] <entropy_> TinoDidriksen it's not working on here
[13:26:39] <TinoDidriksen> entropy_, why are you formatting it as a timestamp at all? If you just want seconds, then $newtime - $oldtime is all you need. time() returns seconds as an integer - no years, no days, etc.
[13:26:42] <teresko> entropy_: you nean $start = time); /* some other stuff */ var_dump(time() - $start); is magically not working?
[13:26:54] <teresko> maybe you are not using php
[13:27:43] <teresko> ... or maybe you should be using microtime(true);
[13:29:14] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 252 seconds)
[13:31:35] *** Joins: olle (~olle@h-217-31-188-54.NA.cust.bahnhof.se)
[13:32:19] *** Quits: Tempesta (~Tempesta@user/tempesta) (Quit: See ya!)
[13:39:15] <entropy_> echo time() - $row["added"];
[13:39:17] <entropy_> returns
[13:39:24] <Naktibalda> entropy_: if you get 52 years, it means that one of your values is not integer
[13:39:30] <entropy_> 65440850
[13:39:35] <entropy_> not seconds
[13:39:48] <Naktibalda> not 52 years either
[13:40:14] <teresko> entropy_: what does the "added" actually contain?
[13:40:26] <Naktibalda> this is about 2 years
[13:40:53] <entropy_> $row["added"] is: 1647144056
[13:42:02] <Naktibalda> so 16 days old, right?
[13:42:19] <entropy_> no
[13:42:23] <entropy_> 3hours old
[13:42:26] <teresko> entropy_: have you actually checked the current time on the server?
[13:42:37] <Naktibalda> I got that this timestamp is of March 13
[13:42:43] <teresko> ^ that
[13:43:54] <Naktibalda> https://3v4l.org/0h3bZ#v8.1.4
[13:46:05] <entropy_> hmm
[13:46:08] <entropy_> that's weird
[13:46:32] *** Joins: tuskkk____ (uid18470@id-18470.tinside.irccloud.com)
[13:46:32] <entropy_> i don't know what to do guys
[13:46:36] <entropy_> nothing is working
[13:46:40] <Naktibalda> well, it comes from database, it shouldn't be a surprise that you have some old data
[13:47:15] <entropy_> i know but the latest paste was 3hours ago
[13:47:23] <entropy_> and it's not working
[13:47:32] <teresko> what is NOT WORKING
[13:47:42] <entropy_> echo time() - $row["added"];
[13:47:52] <entropy_> should return secs right?
[13:47:52] <teresko> do a var_dump()
[13:47:57] <Naktibalda> well, this code is working
[13:48:07] <Naktibalda> the source of your data is not what you are expecting
[13:48:35] <teresko> do a var_dump() on the two pieces of data, that you are attempting to subtract
[13:48:54] <entropy_> int(1401264)
[13:49:52] <teresko> and that's the correct ansert
[13:49:55] <teresko> *answer
[13:50:17] <entropy_> int(1648545390) string(10) "1648532224"
[13:50:34] <teresko> everything is working
[13:50:34] *** Quits: jargon (~jargon@184.101.173.186) (Remote host closed the connection)
[13:50:57] <Naktibalda> these 2 numbers seem closer
[13:51:20] <Naktibalda> 13166s apart
[13:51:40] <Naktibalda> yep, that's 3 hours and some minutes
[13:52:29] <Naktibalda> https://3v4l.org/dJckU#v8.1.4
[13:53:41] <Naktibalda> if you subtract different numbers, you may get different results :)
[13:53:43] *** Joins: chao (~stenno@user/stenno)
[13:54:00] <teresko> I would also like to not that this does not watch what you originally claimed was the content of $row["added"]
[13:54:35] <entropy_> thenwhy does time() and $row["added"] not work?
[13:55:02] <Naktibalda> it does work, it seems that have lots of different numbers going around
[13:55:03] <teresko> it works as expected
[13:55:34] <entropy_> not here
[13:55:38] <Naktibalda> so me are 52 years apart, some 2 years, some 13 hours and some 3 hours. this is not a programming question
[13:55:50] <Naktibalda> entropy_: please reproduce your issue on that site
[13:55:55] <teresko> entropy_: can you explain to us, why every time you tell us the value of $row["added"] it happens to be *A COMPLETELY DIFFERENT VALUE** ?
[13:57:27] <entropy_> https://3v4l.org/ZhVWp#v8.1.4
[13:57:45] <entropy_> the second number is WAY bigger
[13:57:45] <Naktibalda> same problem :)
[13:58:00] <teresko> entropy_: what do you think the 1583103892 timestamp is ?
[13:59:25] <Naktibalda> current time is 1648318277 so that number is way off
[13:59:30] <entropy_> do you think it could be cause of the $row["added"]?
[13:59:41] <entropy_> https://3v4l.org/FQ3rP#v8.1.4
[13:59:44] <Naktibalda> you should give up on programming
[14:00:03] <teresko> ^ that
[14:00:07] <entropy_> why?
[14:00:21] <entropy_> that's not very helpfull
[14:00:26] <teresko> because you do not undederstand what variables arfe
[14:00:28] <teresko> *are
[14:01:05] <Naktibalda> entropy_: alright, what's wrong  with your last example?
[14:01:31] <entropy_> it works good there
[14:03:16] <Naktibalda> great, there is no bug in subtraction operator
[14:03:44] <chao> omg
[14:03:49] *** chao is now known as stenno
[14:04:27] <entropy_> PHP Version 7.4.27
[14:04:29] <teresko> Naktibalda: also we have observerd that time still moves forward
[14:04:30] <entropy_> is what i'm using
[14:08:02] *** Joins: widelec-BB (~widelec@cpe-109-207-144-181.docsis.tczew.net.pl)
[14:14:03] *** Parts: widelec-BB (~widelec@cpe-109-207-144-181.docsis.tczew.net.pl) ( )
[14:18:12] *** Joins: Tempesta (~Tempesta@user/tempesta)
[14:27:01] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[14:36:14] *** Quits: phpn00b (~phpn00b@dynamic-002-244-106-179.2.244.pool.telefonica.de) (Quit: Client closed)
[14:37:03] *** Quits: on3pk (~on3pk@cpe-74-65-0-247.rochester.res.rr.com) (Quit: Client closed)
[14:51:00] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Ping timeout: 272 seconds)
[14:54:56] *** Quits: skyfall (~skyfall@user/skyfall) (Quit: Ping timeout (120 seconds))
[14:55:02] *** Quits: viv0 (~viv0@user/viv0) (Quit: Ping timeout (120 seconds))
[15:02:15] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928)
[15:03:48] <entropy_> how do i get the column name from this SQL select line:
[15:04:01] <entropy_> select distinct password,public,id,author,description,added,edited,hits,expires from pastes
[15:08:02] <AllenJB> What do you mean by "get the column name"? (What are you trying to achieve?) That SQL query contains multiple columns
[15:11:00] <entropy_> but i want to grab the active column name from this query
[15:11:29] <AllenJB> What do you mean by "active column"?
[15:12:07] <entropy_> foreach ($stmt->fetchAll(PDO::FETCH_COLUMN) as $row) {
[15:12:10] <entropy_> i tried that
[15:12:16] <entropy_> but it gives an error
[15:12:17] <entropy_> here...
[15:12:20] <entropy_> my old line is:
[15:12:31] <entropy_> foreach ($stmt->fetchAll(PDO::FETCH_ASSOC) as $row) {
[15:12:43] <entropy_> is there a way i can grab the column name?
[15:13:47] <AllenJB> FETCH_COLUMN is designed to return results from queries with only 1 column. I would expect it to only return the first column from the resultset (or error).
[15:14:36] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[15:14:40] <AllenJB> FETCH_ASSOC will return each result as an assoc. array - it will contain all the columns from each row. There's no "active" column. You could loop over each column with a further foreach ($row as $colName => $value) { ... }
[15:15:07] <teresko> why do you think you need to know the column name>
[15:15:09] <teresko> ?
[15:15:30] <teresko> ... a column name that you have already specified couple lines above
[15:15:45] <AllenJB> Or, as with other assoc arrays, you can pull out a specific column with (for the id column, for example) $row["id"]
[15:15:51] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 260 seconds)
[15:16:25] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[15:17:56] <entropy_> i want to make some if's like if: if ($column == "id") { }
[15:18:00] <TinoDidriksen> You don't get the column names. You can fetch all rows and then infer them from the first row.
[15:18:37] <TinoDidriksen> Results are fetched by rows, not columns, so that if() would never make sense.
[15:19:35] <entropy_> can i share my code?
[15:19:36] <teresko> entropy_: swhat is the problem that you are trying to solve ?
[15:19:51] <teresko> and yes, jsut share it it via some pastebin
[15:22:35] <entropy_> https://mypastebin.com/4tlApDpyGvk
[15:22:57] <entropy_> if you know of any easier way to do this, i'm open to suggestions
[15:23:01] <teresko> 1. you are using prepare() wrong
[15:23:55] <teresko> 2. oh god, you have managed to mix sql, php, js, css and html in a single file
[15:24:14] <teresko> (I have not seen anything like that since 2005
[15:24:25] <entropy_> ok can you help me make it better?
[15:25:10] <teresko> you do not need the second loop there
[15:25:58] <entropy_> foreach($row as $col) { ?
[15:26:34] <teresko> yes, it has no purpose
[15:27:09] <entropy_> then what do you put?
[15:28:06] <teresko> ok, lemme check if I get what this actually is supposed to do:
[15:28:45] <TinoDidriksen> You just output the column when you want it output. There's no need to loop over columns.
[15:28:48] <teresko> you are trying to post entries from `Pastes` table
[15:29:01] <teresko> right?
[15:29:03] <TinoDidriksen> You KNOW $row['id'] exists. Output it when you feel like it.
[15:29:31] <entropy_> yes teresko
[15:30:31] <teresko> then you just look through rows and echo the entire `<tr>` entries
[15:32:27] *** Joins: stenno (~stenno@user/stenno)
[15:32:45] *** Quits: fef (~thedawn@user/thedawn) (Remote host closed the connection)
[15:33:18] *** Joins: fef (~thedawn@user/thedawn)
[15:34:03] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.4.1)
[15:37:46] <entropy_> example?
[15:38:56] <TinoDidriksen> echo "<tr><td>{$row['id']}</td><td>{$row['other']}</td>...etc"
[15:48:54] *** Joins: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861)
[15:52:51] <entropy_> https://mypastebin.com/NXwT
[15:52:56] <entropy_> it's not working
[15:53:43] <teresko> what is "not working"
[15:54:00] <entropy_> it's not showing all the table contents
[15:54:09] <entropy_> form the SQL Query
[15:54:21] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[15:58:51] <TinoDidriksen> I don't believe you. All matching rows will be output from that code.
[15:59:19] <teresko> well, depends what `$call` contains
[15:59:31] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[15:59:32] <TinoDidriksen> Hence "matching"
[16:01:19] <entropy_> $call = "WHERE `public` = 'yes' ";
[16:02:57] *** Joins: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it)
[16:03:50] *** Joins: newwebdev13 (~newwebdev@78.135.92.89)
[16:04:05] <teresko> well, then it means that only public pastes are listed
[16:04:39] <teresko> which means that OF COURSE it will not show all of the table content
[16:05:14] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[16:07:04] <TinoDidriksen> Also, you should htmlspecialchars() all the values before echo'ing them.
[16:07:37] *** Joins: ms49434 (~ms49434@user/ms49434)
[16:12:29] <entropy_> also
[16:12:30] <entropy_> 	$test = time() - $row["added"];
[16:12:30] <entropy_> 	var_dump($test);
[16:12:41] <entropy_> returns a time() value not the seconds
[16:13:27] <Blondie101010> what is the value of $row["added"]
[16:13:57] <entropy_> 1583103892
[16:14:16] <teresko> because THAT IS WHAT YOU TOLD IT TO DO
[16:14:28] <Blondie101010> then why do you say "<entropy_> returns a time() value not the seconds"?
[16:14:37] <Blondie101010> do you know what time() returns?
[16:14:47] <entropy_> time elapsed since 1970
[16:14:52] <Blondie101010> in seconds
[16:15:05] <entropy_> yeah
[16:15:09] <Naktibalda> lol, he is back to it
[16:15:35] <Naktibalda> there is no bug in subtraction
[16:15:52] <TinoDidriksen> You are getting the age in seconds, as you wanted.
[16:15:56] <Blondie101010> so $test should be fairly small
[16:16:35] <entropy_> i want seconds elapsed since $row["added"]
[16:16:36] <Naktibalda> earlier he had values that were 2 years, 16 days and 3 hours old respectively
[16:16:54] <Naktibalda> 3 different values, asked about different one every time
[16:16:59] <TinoDidriksen> Yes, time() - $row['added'] gives you seconds elapsed since then.
[16:17:56] *** Joins: phpn00b (~phpn00b@dynamic-002-244-106-179.2.244.pool.telefonica.de)
[16:19:27] <phpn00b> Let's say, my project structure is like this: /var/www/example.org/{htdocs,app}. app contains {api,config} and others. How should I call the directory, which contains the composer files? just "composer"?
[16:19:57] <TinoDidriksen> Usually composer.json is in the root, and it will create a vendor/ folder for you.
[16:20:03] <teresko> composer automatically generated that folder
[16:20:08] <teresko> *generates
[16:20:12] <phpn00b> yeah, but the directory "vendor" doesn't look that nice ;)
[16:20:16] <phpn00b> vendor for what?
[16:20:24] <Naktibalda> it is standard, get used to it
[16:20:34] <TinoDidriksen> Provided by vendor, not vendor for/of.
[16:20:35] <phpn00b> Naktibalda: why not composer/vendor?
[16:20:35] <Blondie101010> as composer does it
[16:20:58] <Blondie101010> vendor includes composer
[16:21:14] <AllenJB> Because someone might write a rival, but compatible package manager, that's not called "composer"
[16:21:50] <phpn00b> So, inside app/ I'll have api,config,...,vendor ?
[16:24:02] <AllenJB> vendor is usually outside of app, in the project root. app should generally only contain files specifically for your app.
[16:24:46] <teresko> please do not confuse "application root" and webserver's "document root"
[16:25:32] <phpn00b> AllenJB: But this doesn't make sense, since only the code in "app/" makes use of vendor.
[16:25:42] <phpn00b> AllenJB: Why should I place it outside this?
[16:25:54] <TinoDidriksen> Because you don't commit it.
[16:26:27] <phpn00b> TinoDidriksen: ?! Of course I commit composer.json. I've excluded vendor/
[16:26:36] <TinoDidriksen> composer.json, but not vendor/
[16:27:07] <phpn00b> yeah, but why should I place composer.json outside the APPROOT? My APPROOT is /var/www/example.org/app/ and composer.json lives in app/
[16:27:16] <TinoDidriksen> So you have root folder with: composer.json, vendor/ src/ config/
[16:27:19] <phpn00b> So all the backend stuff is in app/
[16:27:47] <phpn00b> so I have to move app/ into src/ ?
[16:27:50] <TinoDidriksen> Application root != project root.
[16:27:53] <TinoDidriksen> No
[16:28:05] <TinoDidriksen> I just use src/ for source, instead of app/
[16:28:05] <phpn00b> erm typo sorry.
[16:28:10] <phpn00b> api/ into src/
[16:28:14] <AllenJB> In some projects, "app" might only contain the user (web / cli / crons) interface code, while some or all of the business domain code in stored in another folder.
[16:28:30] <entropy_> i only need one thing and i'm good to go.. can someone help me?
[16:28:31] <entropy_> https://3v4l.org/W2vUI#v7.4.28
[16:28:34] <entropy_> i tried this
[16:28:43] <entropy_> and it works as expected
[16:29:00] <teresko> entropy_: yes, PHP can subtrat two numbers
[16:29:07] <Naktibalda> entropy_: the current time keeps goint up
[16:29:10] <entropy_> but then i use: $r = time() - $row["expires"];
[16:30:16] <TinoDidriksen> entropy_, if it doesn't work for you for some reason, then the value in 'expires' is not what you expect. Usually expires is in the future, so you should invert the operation and subtract $expires - time()
[16:30:17] <Naktibalda> if you get unexpected result, it means that you parameter had unexpected value
[16:31:16] <Blondie101010> TinoDidriksen:  be sure to expect negative durations soon :)
[16:31:25] <TinoDidriksen> Print the raw value as-is and check that it is what you expect.
[16:31:31] <phpn00b> TinoDidriksen & AllenJB: So like this? https://bpa.st/raw/G72Q
[16:32:12] <teresko> where is document_root for the webserver ?
[16:32:13] <TinoDidriksen> phpn00b, you don't need a src/ intermediary folder if api/ contains your source. I just use src/ for source.
[16:32:35] <Naktibalda> phpn00b: most php developers consider static files part of the application, not equal to application
[16:32:37] <TinoDidriksen> The folder names are all up to you, except vendor/
[16:32:53] <teresko> also, what exactly is the purpose of /htdocs folder taht you keep repeatedly mentioning ?
[16:32:55] <phpn00b> Naktibalda: I'm open for suggestions ;)
[16:33:29] <phpn00b> teresko: There's static HTML stuff. No PHP at all.
[16:38:31] *** Joins: pmercado (~pmercado@186.11.44.225)
[16:41:08] <Blondie101010> api/ refers to the URL component...  since it's in the public part, it shouldn't contain much code at all
[16:43:03] <phpn00b> Blondie101010: Okay, so I rename api/ to src?
[16:44:07] <Blondie101010> only if it's for the public call / URL
[16:44:15] <Blondie101010> not where the code goes
[16:44:24] <Blondie101010> that's UI stuff
[16:44:31] <Blondie101010> so N/A
[16:44:39] <Blondie101010> only a calling script
[16:45:02] <teresko> waht the hell are you talking about, Blondie101010  ?!?!
[16:45:08] <phpn00b> Blondie101010: Sorry, I don't get what you want me to explain.
[16:45:29] <Blondie101010> http://myapp.com/api/countries/Canada
[16:45:30] <phpn00b> phpn00b: UI? N/A?
[16:45:35] <phpn00b> erm typo :D
[16:45:38] <Blondie101010> that calls /api/index.php
[16:45:40] <phpn00b> Blondie101010: UI? N/A?
[16:45:43] <Blondie101010> for example
[16:45:45] <phpn00b> Blondie101010: I've set apache to route "example.org/api/ to "app/api/api.php".
[16:45:50] <teresko> Blondie101010: that would be idiotic
[16:45:54] <Blondie101010> yes
[16:45:58] <Blondie101010> no
[16:46:04] <phpn00b> null
[16:46:21] <teresko> Blondie101010: please stop giving harmful advice to newbies
[16:46:29] <Blondie101010> what are you talking about?
[16:46:44] <Blondie101010> do not place your code in the public space
[16:46:52] <phpn00b> I do not?!
[16:46:56] <Blondie101010> fine then
[16:47:02] <phpn00b> htdocs is the webroot.
[16:47:06] <Blondie101010> that was my point, which teresko misunderstood
[16:47:12] <Blondie101010> hmmm
[16:47:18] <phpn00b> apache cannot serve app/
[16:47:19] <Blondie101010> how does the API get called then?
[16:47:22] <phpn00b> I've set apache to route "example.org/api/ to "app/api/api.php".
[16:47:32] <TinoDidriksen> Personally, I've never seen the point in separating code that strictly. A protected subfolder is fine, imo, and it's not like hitting the library files would do anything anyway as they only contain functions and classes and nothing will actually execute.
[16:47:36] <phpn00b> but it can't serve it directly. php-fpm processes it.
[16:48:12] <Blondie101010> TinoDidriksen:  it's just good practice (not a hard requirement) because many people are not careful enough with their server environment
[16:50:43] *** Joins: thiras (~thiras@user/thiras)
[16:51:50] <phpn00b> That's how others do it: https://cdn.tutsplus.com/net/uploads/legacy/385_projectSetup/1.png
[16:52:27] <Blondie101010> where's the api there?
[16:52:47] <Blondie101010> (where the URL points to)
[16:52:50] <phpn00b> I guess inside resource.
[16:52:59] <Blondie101010> not in public_html
[16:53:20] <Blondie101010> it is a publicly accessible script
[16:53:46] <phpn00b> This is not my directory structure, how should I know?
[16:53:55] <Blondie101010> you showed it as an example
[16:54:04] <phpn00b> Blondie101010: Can't you describe, how you would it it? Not the negative way, the positive way.
[16:54:07] <Blondie101010> but either way, you could make your point
[16:54:23] <phpn00b> Blondie101010: Right now, you're only explaining, how NOT to do it. That doesn't help pretty much :-)
[16:54:35] <Blondie101010> php scripts that are directly exposed should be very short
[16:54:58] <Blondie101010> please stop complaining and discuss instead
[16:54:58] <phpn00b> Blondie101010: Toxic liquids shall not be drunk.
[16:55:36] <Blondie101010> api.php should only have a few includes and call one function
[16:56:08] <phpn00b> Blondie101010: Erm. I think you didn't get the point of my question. I asked for a sane directory structure.
[16:56:25] <Blondie101010> yes, and that is exactly what I'm describing
[16:56:33] <TinoDidriksen> It is?
[16:56:35] <phpn00b> No, you're explaining that api.php should only have a few includes and call one function
[16:56:39] <Blondie101010> don't put all your API code in the public part, but you need to launcher
[16:57:12] <Blondie101010> how you organize it in your source code should not depend on the fact that it is API code
[16:57:13] <phpn00b> Blondie101010: You didn't answer the question, since you never said, where you'd actually place this file.
[16:57:22] <Blondie101010> that would lead to a rather bad structure
[16:57:41] <Blondie101010> code should be organized by functionality, not usage
[16:59:19] <TinoDidriksen> If you want a separation, I would have root: app/ lib/ vendor/ and inside app/ I would have the entrypoint api.php and all the static HTML+JS. That way only 1 folder is public, but there's no complex mapping for PHP vs. non-PHP.
[16:59:46] *** Quits: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[17:00:19] <Blondie101010> I suppose it is a bit paranoid to isolate the code outside the public root, but still a good target
[17:00:28] *** Quits: newwebdev13 (~newwebdev@78.135.92.89) (Read error: Connection reset by peer)
[17:00:42] *** Joins: newwebdev13 (~newwebdev@78.135.92.89)
[17:20:20] *** Quits: sinvet (~sinvet@user/sinvet) (Quit: Leaving)
[17:22:47] *** Quits: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861) (Quit: Client closed)
[17:26:56] *** Joins: Poboy (~Poboy@user/poboy)
[17:27:16] *** Joins: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861)
[17:34:44] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[17:36:05] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 250 seconds)
[17:38:05] *** Joins: chao (~stenno@user/stenno)
[17:41:06] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 260 seconds)
[17:46:20] * ash_worksi reads backlog
[17:46:44] * ash_worksi felt like Blondie101010 was misunderstood / miscommunicated their point
[17:53:10] *** Joins: d[-_-]b (~stenno@user/stenno)
[17:53:35] *** Quits: chao (~stenno@user/stenno) (Ping timeout: 260 seconds)
[17:55:04] *** Joins: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it)
[17:56:10] <olle> Any recommendations for API secrets to be used with UUID for API auth?
[17:56:15] <olle> Or any random string is good?
[17:56:20] *** Quits: richardjh (~Thunderbi@51.219.41.0) (Remote host closed the connection)
[17:56:33] <TinoDidriksen> Any truly random string is fine.
[17:56:52] <teresko> UUID is not always truely random thing
[17:57:28] *** Quits: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it) (Client Quit)
[17:58:05] <olle> psudorandom would be enough
[17:58:09] <olle> pseudo*
[18:00:39] <teresko> no, it would not
[18:01:37] <Naktibalda> it is not good enough if it helps to guess API Key
[18:01:50] <olle> Can modern CPUs generate true random things now?
[18:02:15] <TinoDidriksen> OSs can, from a variety of sources.
[18:02:25] <TinoDidriksen> random_bytes() will do what you need.
[18:02:27] <olle> That's news to me
[18:02:40] <teresko> olle: stop trying to be smartass
[18:02:47] <teresko> it is very annoying
[18:03:19] <olle> xD
[18:03:25] <olle> No ad hominem, please
[18:03:30] <olle> https://en.wikipedia.org/wiki/Hardware_random_number_generator
[18:03:51] <olle> https://en.wikipedia.org/wiki/Hardware_random_number_generator
[18:03:52] <teresko> when people say pseudo-random in FUCKING PROGRAMMING, they mean seed-able sequences
[18:03:54] <olle> Oops
[18:03:56] <olle> https://en.wikipedia.org/wiki/Cryptographically-secure_pseudorandom_number_generator
[18:04:13] <ash_worksi> dude
[18:04:27] <teresko> ash_worksi: he is pissing me off
[18:04:35] <teresko> ha been for MONTHS
[18:04:57] <olle> So?
[18:04:57] <ash_worksi> yeah, "dude" was at 2 things XD
[18:05:01] <olle> ^^
[18:06:08] <Robdgreat> and here I thought pseudorandom just meant not truly random, as the name states
[18:06:40] <Robdgreat> but your outburst has persuaded me otherwise.
[18:06:50] <Robdgreat> just kidding
[18:08:19] <TinoDidriksen> random_bytes() is indistinguishable from true random. It'll use whatever best source is available, including hardware.
[18:08:35] *** Joins: richardjh (~Thunderbi@51.219.41.0)
[18:10:18] <Robdgreat> that's what I was getting at
[18:11:13] <olle> TinoDidriksen: That's bold :) But good enough for me.
[18:12:59] <TinoDidriksen> That's not bold at all. That's literally the definition of the sources it uses.
[18:16:19] <olle> What does it mean to be indistinguishable from true random?
[18:17:10] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[18:17:20] <ProfSimm> Has anyone used this syntax:   func(...)
[18:17:29] <ProfSimm> Do you find it intuitive
[18:17:32] <TinoDidriksen> That there is no way to prove the output from random_bytes() is not from a hardware source.
[18:17:53] <olle> https://crypto.stackexchange.com/questions/29586/why-do-we-require-a-csprngs-output-to-be-indistinguishable-from-true-random
[18:17:56] <olle> TinoDidriksen: k
[18:19:32] <teresko> ProfSimm: I honestly doubt if anyone actually uses them
[18:21:13] <olle> First-class callable?
[18:21:37] <olle> I always preferred the ::fn syntax, to mimic ::class, but but
[18:23:01] <teresko> then you have no idea what ::class actually does
[18:23:44] *** Quits: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861) (Ping timeout: 250 seconds)
[18:23:46] <teresko> ProfSimm: I assume you actually meant https://www.php.net/manual/en/functions.arrow.php
[18:26:41] <ProfSimm> olle: yes
[18:26:47] <ProfSimm> teresko: nah I mean literall ellipsis
[18:26:58] <ProfSimm> tercaL:         $foo = bar()  <-- calls bar
[18:27:16] <ProfSimm> teresko:       $foo = bar(...);  /// grabs closure to bar
[18:27:24] *** Joins: version (~stenno@user/stenno)
[18:27:37] <ProfSimm> it's a new thing, but helps with closures
[18:27:55] <teresko> that is something nobody sane is using
[18:28:38] <olle> Better than passing around "bar" string tho
[18:30:05] *** Quits: d[-_-]b (~stenno@user/stenno) (Ping timeout: 252 seconds)
[18:32:21] <teresko> olle: I take it back: I though you were talking about fn() arrof functions
[18:32:42] <teresko> yes,::fn or ::function would have been a lot better way
[18:33:21] *** Joins: sfields (~sfields@2605:a601:adea:7a00:b060:ab7f:958c:df55)
[18:33:48] *** Joins: stenno (~stenno@user/stenno)
[18:34:43] *** Quits: version (~stenno@user/stenno) (Ping timeout: 246 seconds)
[18:34:46] <olle> Ah, no, I think fn() => ... is fine. :)
[18:36:27] *** Quits: luigibu (~luigi@93.176.153.88) (Quit: WeeChat 3.5)
[18:36:54] <stenno> good day, this is about file encoding: We are getting 'import' files from a third party. Other customers have sent us latin-1 encoded files in the past, so in our import routine, we called `utf8_encode($dataStringFromFile)`. However, now we have a situation that a customer wants to sent utf-8 encoded files to us. How would you handle that? I am assuming that its impossible to deduce the encoding of
[18:36:56] <stenno> the file from the file data alone.
[18:37:30] <stenno> my idea is to just set an environment or config variable, and communicating to the customer which encoding we expect. and during that import phase, we would just check that config value
[18:37:45] <Naktibalda> !+mb_detect_encoding
[18:37:45] <php-bot> string mb_detect_encoding(string str [, mixed encoding_list [, bool strict]]) - Encodings of the given string is returned (as a string) - http://php.net/mb_detect_encoding
[18:37:49] <stenno> oooh
[18:38:03] <teresko> can you just add a dropdown next to file upload dialog?
[18:39:04] <stenno> Naktibalda: what is this wizardry? thanks for that, i didn't expect it to be possible
[18:39:57] <stenno> i see its not 100% reliable but it will do just fine in my usecase
[18:40:45] *** Quits: miklcct (~quassel@vps.miklcct.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[18:40:59] *** Joins: miklcct (quasselcor@vps.miklcct.com)
[18:40:59] <teresko> I would add a select-box wich lets the user choose the import file encoding (with "make a guess" left as the default choice)
[18:41:07] <teresko> *which
[18:41:15] <stenno> i assume the reliability is the same as file type detection by scanning for magic numbers
[18:49:41] *** Joins: skyfall (~skyfall@user/skyfall)
[18:50:31] *** Joins: JohnBeales (~JohnBeale@dsl-173-206-92-57.tor.primus.ca)
[18:51:38] <TinoDidriksen> You can check whether it's valid UTF-8, and if it's not then fall back to ISO-8859-1.
[18:54:04] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[18:54:15] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 260 seconds)
[19:00:20] *** Joins: Urawa (Awaru@gateway/vpn/airvpn/awaru)
[19:00:47] *** Quits: Tempesta (~Tempesta@user/tempesta) (Ping timeout: 265 seconds)
[19:03:38] *** Quits: Awaru (Awaru@gateway/vpn/airvpn/awaru) (Ping timeout: 252 seconds)
[19:05:43] <stenno> teresko: sorry i just realized that you were replying to me: there is no upload dialog, the files are copied to the server directly by the third party
[19:06:40] <teresko> you could add some file-extension system
[19:07:04] <stenno> nah, mb_detect_encoding as suggested by Naktibalda is just fine for my use case
[19:10:13] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928) (Ping timeout: 240 seconds)
[19:10:20] <AllenJB> Note that (as per the description in the manual) mb_detect_encoding (and any other method that claims to "detect" encoding on arbitrary (text) data) is much more guessing than detection. It can (and probably will at some point) get it wrong.
[19:11:01] <stenno> yes, i talked about it above already and its fine
[19:18:22] <stenno> blep, third param of mb_detect_encoding defaults to false
[19:18:44] <stenno> oh lol there is an ini config for it
[19:18:48] <stenno> thats a bit bizarre
[19:18:58] <stenno> mbstring.strict_detection
[19:22:14] *** Quits: olle (~olle@h-217-31-188-54.NA.cust.bahnhof.se) (Quit: Lost terminal)
[19:26:34] *** Quits: Poboy (~Poboy@user/poboy) (Ping timeout: 250 seconds)
[19:29:39] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[19:30:02] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[19:33:02] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Remote host closed the connection)
[19:33:22] *** Joins: l__q (~modinfo@user/modinfo)
[19:36:29] *** Joins: dimi1947 (~dimi1947@46.198.247.237)
[19:38:17] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[19:41:03] *** Joins: Tempesta (~Tempesta@user/tempesta)
[19:44:03] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928)
[19:47:29] <ProfSimm> Why is optional in PHP ?foo and not foo?
[19:48:27] <teresko> because that how it was programmed to be
[19:48:41] <ProfSimm> Why was it programmed this way
[19:50:11] <teresko> https://wiki.php.net/rfc/mixed_type_v2#nullability
[19:50:41] <teresko> wait, wrong link
[19:51:17] <teresko> https://wiki.php.net/rfc/nullable_types
[19:55:31] <ProfSimm> Why was the RFC written this way?
[19:59:28] *** Parts: alien_lappy (~alien@user/alien) ()
[19:59:38] <ProfSimm> Or should I ask...
[19:59:44] <ProfSimm> ?why was the RFC written this way
[20:01:52] <ProfSimm> What kind of a parser does PHP use/
[20:01:57] <ProfSimm> Maybe we should rewrite it
[20:02:10] <ProfSimm> Can't do this, can't do thatr.
[20:02:15] <ProfSimm> It's a bit embarassing
[20:05:24] <teresko> yes, you definetly should rewrite is ... get to it
[20:05:28] <Naktibalda> ProfSimm: it seems that position was discussed and removed from RFC
[20:05:54] *** Joins: stenno (~stenno@user/stenno)
[20:06:07] <Naktibalda> you can spend more time than me browsing internals: https://news-web.php.net/php.internals/92276
[20:08:05] <TML> ProfSimm: Lex/Yacc, as with most C-based programming languages
[20:09:18] <TML> ProfSimm: But by all means, write a new parser. Others have tried, but their efforts have never resulted in anything really usable.
[20:10:37] <TML> I know I'm not the only one who thinks it's a dangerous monoculture that there's only one implementation of PHP, we'd love you to write a competing implementation
[20:10:38] *** Quits: opeerateur_ (~My_user_n@91.143.220.230) (Ping timeout: 260 seconds)
[20:11:30] <Naktibalda>  If the ? came after the type, as in Foo?, then we'd have an issue if we ever supported generics; <Foo?> would conflict with a closing ?>.
[20:11:44] <Naktibalda> and previous link says that HHVM decided first
[20:15:27] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 260 seconds)
[20:18:00] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[20:21:29] *** Joins: Poboy (~Poboy@user/poboy)
[20:28:02] *** Quits: dimi1947 (~dimi1947@46.198.247.237) (Quit: Leaving)
[20:28:42] <ProfSimm> TML, it's not motivated to write another implementation if we can't fix what's wrong in the main one
[20:28:54] <ProfSimm> TML, see what happened with Facebook
[20:29:34] <TML> ProfSimm: I don't know what you mean by that
[20:29:42] <TML> what happened with Facebook?
[20:29:59] <ProfSimm> TML well their fork tried to push PHP to add new things, then gave up and forked off
[20:30:58] <TML> Well, you'd have to continue to support all existing PHP, for sure - but you can do an additive approach.
[20:31:38] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928) (Remote host closed the connection)
[20:31:46] <teresko> you can always make you own programming language, with blackjack and hookers
[20:31:47] <Naktibalda> ProfSimm: is position of questionmark the worst issue you want to fix?
[20:32:46] <Naktibalda> we have some female members of staff now, so team building will be with blackjack and burgers
[20:33:41] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 245 seconds)
[20:38:19] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 260 seconds)
[20:39:34] *** Joins: stenno (~stenno@user/stenno)
[20:40:07] *** Quits: stenno (~stenno@user/stenno) (Client Quit)
[20:43:50] *** Joins: l__q (~modinfo@user/modinfo)
[20:46:45] *** Quits: richardjh (~Thunderbi@51.219.41.0) (Quit: richardjh)
[20:48:11] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: Few women admit their age.  Few men act theirs.)
[20:50:53] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[20:51:38] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[20:55:16] *** Joins: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861)
[20:59:38] *** Quits: phpn00b (~phpn00b@dynamic-002-244-106-179.2.244.pool.telefonica.de) (Quit: Client closed)
[21:01:37] *** Quits: fkrauthan (~fkrauthan@user/fkrauthan) (Quit: ZNC - https://znc.in)
[21:02:24] *** Joins: fkrauthan (~fkrauthan@user/fkrauthan)
[21:12:26] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 245 seconds)
[21:23:39] *** Joins: l__q (~modinfo@user/modinfo)
[21:27:00] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[21:27:49] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 240 seconds)
[21:32:40] *** Joins: guido (~weechat@host-95-247-248-192.retail.telecomitalia.it)
[21:39:52] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 246 seconds)
[21:43:26] *** Quits: Urawa (Awaru@gateway/vpn/airvpn/awaru) (Quit: Urawa)
[21:43:47] *** Joins: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:9586:ce9f:b6ec:92ff)
[21:51:36] *** Joins: Awaru (Awaru@gateway/vpn/airvpn/awaru)
[22:06:37] *** Joins: mintoyatsu (~mint@user/mintoyatsu)
[22:13:14] *** Joins: l__q (~modinfo@user/modinfo)
[22:25:43] *** Quits: JohnBeales (~JohnBeale@dsl-173-206-92-57.tor.primus.ca) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[22:25:58] *** Quits: w_lehinsun (~lehinsun@188.113.178.220) (Ping timeout: 260 seconds)
[22:26:50] *** Joins: JohnBeales (~JohnBeale@dsl-173-206-92-57.tor.primus.ca)
[22:30:12] *** Quits: entropy_ (~ent@user/entropy/x-9891564) (Ping timeout: 240 seconds)
[22:34:18] *** Quits: shailangsa (~shailangs@host86-162-150-212.range86-162.btcentralplus.com) (Ping timeout: 252 seconds)
[22:35:34] *** Quits: Awaru (Awaru@gateway/vpn/airvpn/awaru) (Quit: Awaru)
[22:42:28] *** Joins: w_lehinsun (~lehinsun@188.244.142.69)
[22:43:41] *** Joins: w_lehinsun__ (~lehinsun@188.113.178.220)
[22:44:24] *** Joins: Awaru (Awaru@gateway/vpn/airvpn/awaru)
[22:46:58] *** Quits: w_lehinsun (~lehinsun@188.244.142.69) (Ping timeout: 260 seconds)
[22:50:17] *** Quits: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:9586:ce9f:b6ec:92ff) (Read error: Connection reset by peer)
[22:52:12] *** Joins: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:9586:ce9f:b6ec:92ff)
[22:57:02] *** Quits: DevAntoine (~DevAntoin@2a01:cb16:2011:5dff:9586:ce9f:b6ec:92ff) (Ping timeout: 260 seconds)
[22:58:19] *** Joins: hh (~g@37.214.57.161)
[22:59:41] *** Quits: pmercado (~pmercado@186.11.44.225) (Read error: Connection reset by peer)
[23:02:35] *** Quits: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861) (Quit: Client closed)
[23:02:44] *** Quits: anomander (~anomander@vps-e9abfd3d.vps.ovh.net) (Quit: Caesar si viveret, ad remum dareris)
[23:02:51] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[23:03:04] *** Joins: pmercado (~pmercado@190.22.73.57)
[23:05:15] *** Quits: tuskkk____ (uid18470@id-18470.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[23:09:40] *** Joins: anomander (~anomander@static.176.201.216.95.clients.your-server.de)
[23:13:55] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 240 seconds)
[23:26:06] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[23:35:59] <mattf> Hey guys i opened an issue about this weird password hashing this guy is using: https://github.com/WWBN/AVideo/blob/8a416c4eacca26229e0d5191119a9cf88ade8bb0/objects/functions.php#L2654
[23:36:04] <mattf> md5(hash("whirlpool", sha1($password)));
[23:36:22] <mattf> and he said something like: the algorithm is unusual but we do it for security reasons
[23:36:46] <mattf> "this is uncoventional for security reasons"
[23:37:01] <mattf> what should i say to him? :P
[23:40:27] <AllenJB> Inventing your own (compound) algorithms is a terrible idea. Use proven, standard algorithms. See PHP's password extension (password_hash / password_verify)
[23:41:13] <TinoDidriksen> As custom algorithms go, it's not awful. It's even salted.
[23:44:41] <mattf> AllenJB: well i already talked about password_hash
[23:44:50] <mattf> then he replied "for security reasons"
[23:45:13] <mattf> i just wanted good arguments if you guys think it is good then i wont mention it
[23:45:31] <TinoDidriksen> password_hash() essentially does the same as that custom algorithm, only it's proven by far more competent authors.
[23:45:32] <mattf> my biggest complain was that this isn't compatible with anything else and makes migrations hard
[23:45:41] <mattf> i see
[23:46:01] <mattf> really?
[23:46:27] <mattf> where how can i see password_hash algorithm or what is it called or how can it be described
[23:46:28] <TinoDidriksen> password_hash() salts and runs the hash N times, and of course outputs something that includes said salt and algorithm used so it's reusable.
[23:53:55] <__adrian> mmmm
[23:54:30] <__adrian> while it's architecturally similar, it's _VERY misleading_ to say "essentially does the same"
[23:55:21] <__adrian> he uses md5 and whirlpool and sha1. he doesn't know what he's doing, full stop.
[23:55:45] <__adrian> mattf: is it important to you that this is fixed? i.e., is it something you actually use, and can't afford to not use it?
[23:55:59] *** Joins: WishBoy (~WishBoy@user/wishboy)
[23:56:01] <AllenJB> If you want a more indepth critique of that particular algorithm, you might want to try asking in a channel specific to cryptography (or a forum / site such as the cryptography StackExchange). What I know is people smarter than me have spent more time than I even could to design algorithms secure against a range of attacks.
[23:56:07] <__adrian> ^
[23:56:19] <__adrian> you'll get lots of feedback
[23:56:47] <__adrian> also $global["salt"]
[23:57:14] <ash_worksi> mattf: perhaps #security
[23:57:16] <ash_worksi> ¯\_(ツ)_/¯
[23:58:49] *** Quits: kristijonas (~kristijon@cl-78-158-23-234.fastlink.lt) (Remote host closed the connection)
[23:58:49] <__adrian> "mattf> my biggest complain was that this isn't compatible with anything else and makes migrations hard"  your complaint ought to be that it's brute-forceable
[23:59:13] *** Joins: kristijonas (~kristijon@cl-78-158-23-234.fastlink.lt)
