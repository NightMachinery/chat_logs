[00:11:30] *** Quits: weyhmueller (~weyhmuell@blofeld.nc.w9r.de) (Quit: ZNC 1.8.2 - https://znc.in)
[00:12:16] *** Joins: keypusher (keypusher@user/keypusher)
[00:12:30] *** Joins: weyhmueller (~weyhmuell@blofeld.nc.w9r.de)
[00:17:02] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 240 seconds)
[00:17:18] *** Joins: kdudka (~kdudka@83-208-198-11.rcc.o2.cz)
[00:18:43] *** Joins: keypusher (keypusher@user/keypusher)
[00:31:55] *** Quits: TheAssassin (~TheAssass@newpipe/theassassin) (Ping timeout: 240 seconds)
[00:32:40] *** Joins: TheAssassin (~TheAssass@newpipe/theassassin)
[01:08:51] <bagder> we have functions available for converting the date if we want to
[01:09:03] <bagder> that's just not part of what I'm working on now
[01:09:56] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[01:15:06] <bagder> here's how my current approach looks: https://gist.github.com/bagder/f3a08811112acbd7a3f0c9c8265b99c4
[01:17:32] <Piru> how does it handle duplicate headers? merge?
[01:17:50] <Piru> or is that stuff already merged at this stage?
[01:18:01] <bagder> ah yes they will break json
[01:18:08] <bagder> they can't merge
[01:18:12] <bagder> Set-Cookie for example
[01:18:15] <Piru> right.
[01:18:25] <bagder> I'll have to think about that
[01:19:26] <Piru> not easy to do that in a way that won't lead to some odd issues when the differences between http headers and json are not considered
[01:20:26] <Piru> would it work to have arrays for the header values instead?
[01:20:56] <bagder> that's probably decent json wise
[01:21:14] <Piru> order is lost then of course
[01:21:28] <Piru> but it should not matter I think
[01:21:39] <Piru> since header1 vs header2 order should not matter
[01:22:40] *** Quits: magla (~gelignite@d5364d83.access.ecotel.net) (Quit: Stay safe!)
[01:23:58] *** Joins: rgrinberg (~textual@177.241.245.222)
[01:42:55] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[01:43:02] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 240 seconds)
[01:47:27] <moparisthebest> bagder, gevaerts: here we say they "made a mountain out of a mole-hill"
[01:47:43] <moparisthebest> Someone should make a list of such sayings :)
[01:48:34] <bagder> I bet there are many good ones
[01:50:33] <moparisthebest> I'm stealing yours to increase my vocabulary
[01:58:09] <bagder> "Set-Cookie":["firstcookie=want; path=/","2cookie=want; path=/","cookie3=want; path=/"],
[01:58:27] <bagder> Piru: ^
[02:02:43] <bagder> Apple friend says he's "told the right team" about the wrong CVE  number
[02:06:01] <Earnest> Seems reasonable to use arrays like this, but is it going to be a string for a single value or an array of a one?
[02:06:38] <bagder> I think strings for single values, or is that going to be complicated?
[02:06:49] <bagder> I'm not really that into json...
[02:07:09] <Earnest> It does complicate things, because now the type would have to be checked if it were a string or an array to determine how to proceed
[02:07:25] <bagder> so does a list for all values make it better?
[02:08:27] <Earnest> That's the rub really
[02:09:40] <Earnest> Either the code is: if type == "string" then . else if type == "array" then .[]; end for each key that can be repeated (all of them?) or each value is a list, but that doesn't look very nice
[02:13:15] <Earnest> bagder: Am I wrong or can duplicate headers be combined into a CSV in HTTP?
[02:14:24] <Earnest> (Iff that header/field is defined to take a CSV)
[02:14:55] <bagder> some headers cannot, like Set-Cookie, which probably is the most commonly duplicated header
[02:15:28] <Earnest> It seems set-cookie might be the only one which does that
[02:15:53] <bagder> still, I want to provide the headers as received
[02:17:14] <Earnest> Oh no, what I was getting at it is that fields which are defined to take csv can be lists while everything else can be strings
[02:17:24] <bagder> ah
[02:17:50] <Earnest> With set-cookie being special cased into "pretending it's a csv and turning it into a list" as you've done ^
[02:18:06] <Earnest> (order preserved as array indicies)
[02:19:17] <bagder> the downside with that is that we need to add special knowledge for specific headers
[02:19:18] <Piru> bagder: yep. that should work (TM)
[02:19:49] <bagder> I think it is better if we either go with lists for multi-headers or we go with lists for all
[02:19:55] <Piru> I think always using array is the only sensible thing to do
[02:20:21] <bagder> I can show you how it looks
[02:20:59] <Earnest> Isn't the list-of-csv-headers defined per RFC?
[02:22:01] <Piru> well at least when there can be multiple entries, but there is only one, it should IMHO still use a list
[02:22:29] <Earnest> E.g. Accept: is defined as #( ... ) which would make it a list
[02:22:30] <Piru> "Set-Cookie":["singlecookie=want; path=/"],
[02:23:18] <bagder> https://gist.githubusercontent.com/bagder/fd0c3bedaef8528aff43699e69a2a8e9/raw/3bc3c229f81ba0f66c3d5e900cc75e6c2fbbcdc8/headers.json
[02:23:24] <bagder> pretty-printed with jq
[02:23:51] <Earnest> I mean it'd work, but it might be surprising
[02:23:54] <Piru> yeah. this is how I'd do it personally
[02:24:10] <Earnest> I thought a middle ground would be to only make multi-valued headers as per the rfc lists
[02:24:16] <Piru> at least it's less suprising than suddently having a list instead of a string :P
[02:24:16] <Earnest> (And always make them lists even for one item)
[02:24:35] <bagder> I don't want a list with special treated header names
[02:24:51] <Earnest> Yeah I don't mind, I often just use arrays to make the code work uniformly but I'm not sure if it's the nicest thing to do
[02:24:54] <Piru> that would mean "fixing" the headers there
[02:25:49] <Piru> if new "multi"headers would be introduced it would not be clear if they could use the list mode or not
[02:26:10] <Piru> or at least it would be difficult to know what to expect
[02:26:19] <Piru> would it change vs old and new curl for example?
[02:26:37] <bagder> right, and someone just experimenting with their own multi-header set
[02:26:44] <Piru> yep.
[02:27:44] <Piru> so while it might seem "odd" for headers that aren't normally "multi" (such as Host), it at least gives better chance of representing the "real" headers
[02:28:04] <Piru> it does lose order information though
[02:28:11] <Piru> between headers that is
[02:28:20] <Piru> but there is little that can be done about that
[02:28:22] <bagder> yes it does
[02:28:33] <bagder> but *usually* multi-headers are kept together
[02:28:41] <bagder> so it's going to be rare
[02:30:18] <Earnest> Hm, well all lists works for me, was original suggestion but I don't know the json 'etiquette' when doing something like that
[02:30:47] <bagder> I bet someone will soon tell us what httpie does =)
[02:31:43] <Piru> hm
[02:32:02] <Piru> set-cookie: x=1\nhost: foo.com\nset-cookie: x=2
[02:33:06] <Piru> so yeah order would be lost there but anything depending on that is kind of broken I believe
[02:33:08] <bagder> that set will now first show set-cookie as two values and then host
[02:33:44] <Piru> I guess this needs to be documented to avoid surprises
[02:33:50] <bagder> yeah
[02:39:07] <bagder> this was also a pretty nice test case for using the new header API
[02:39:19] <bagder> worked excellently I think
[03:05:05] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[03:18:42] *** Joins: crashrep (~crashrep@user/crashrep)
[03:33:43] *** Joins: alpha_one_x86 (~alpha_one@2803:1920::2:10)
[03:34:29] <alpha_one_x86> Hi, I try for curl to use i2p via socks proxy, include CURLPROXY_SOCKS5_HOSTNAME, it say the error: Couldn't resolve host name
[03:35:15] <alpha_one_x86> any idea where look?
[03:40:23] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[04:04:58] <alpha_one_x86> I use curl_multi
[04:16:19] *** Quits: zmt01 (~zmt00@user/zmt00) (Ping timeout: 250 seconds)
[04:20:21] *** Joins: zmt00 (~zmt00@user/zmt00)
[04:35:50] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[04:41:15] <alpha_one_x86> strange, tested minimal example: https://pastebin.com/NmGZGKnQ
[04:56:04] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:28:28] *** hendry1 is now known as hendry
[06:18:39] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[06:46:48] *** Quits: rgrinberg (~textual@177.241.245.222) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:30:45] *** Joins: WishBoy (~WishBoy@user/wishboy)
[07:51:30] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[08:03:33] *** Joins: rgrinberg (~textual@177.241.245.222)
[08:07:34] *** Quits: p-i- (~Ohmu@2403:6200:8978:d82d:89c0:e177:c2f7:c9a9) (Remote host closed the connection)
[08:08:06] *** Joins: p-i- (~Ohmu@2403:6200:8978:d82d:540d:8c68:2946:51e0)
[08:26:26] *** Quits: yitz (~yitz@exercism/yitz) (Ping timeout: 272 seconds)
[09:08:13] *** Quits: weyhmueller (~weyhmuell@blofeld.nc.w9r.de) (Quit: ZNC 1.8.2 - https://znc.in)
[09:38:07] *** Joins: weyhmueller (~weyhmuell@blofeld.nc.w9r.de)
[09:43:39] *** Quits: rgrinberg (~textual@177.241.245.222) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:05:11] *** Quits: kdudka (~kdudka@83-208-198-11.rcc.o2.cz) (Quit: Leaving)
[10:09:14] *** Quits: BlackIkeEagle (~BlackIkeE@archlinux/trusteduser/blackikeeagle) (*.net *.split)
[10:14:34] *** Joins: BlackIkeEagle (~BlackIkeE@archlinux/trusteduser/blackikeeagle)
[10:15:37] <bagder> alpha_one_x86: which libcurl version?
[10:20:06] <bagder> "A numerical IPv6 address must be written within [brackets]." says the docs, and you didn't do that
[10:20:18] <bagder> for CURLOPT_PROXY
[10:38:15] *** Joins: kdudka (kdudka@nat-pool-brq-t.redhat.com)
[10:57:06] *** Quits: vicecea (~vicecea@gateway/vpn/pia/vicecea) (Remote host closed the connection)
[10:57:24] *** Joins: vicecea (~vicecea@gateway/vpn/pia/vicecea)
[10:57:34] <alpha_one_x86> curl 7.81.0
[10:57:53] <alpha_one_x86> include with brack
[10:58:34] <alpha_one_x86> include with bracker, it fix my simple example but not my multi/async version
[10:58:43] <alpha_one_x86> I have to make a minimal example
[11:00:24] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[11:01:21] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[11:01:45] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[11:10:53] *** Joins: dege (~dege@user/dege)
[11:17:28] *** Joins: lehmrob (~rd7@business-176-095-223-081.static.arcor-ip.net)
[11:19:29] *** Joins: yitz (~yitz@exercism/yitz)
[11:28:07] *** Quits: keypusher (keypusher@user/keypusher) (Quit: bye)
[11:31:18] *** Joins: keypusher (keypusher@user/keypusher)
[11:50:25] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[11:50:39] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 256 seconds)
[11:55:01] *** Joins: Guest4156 (~martiert@ti0185q160-2775.bb.online.no)
[11:55:19] *** Guest4156 is now known as martiert
[11:58:04] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Ping timeout: 250 seconds)
[12:03:22] <dch> bagder: thanks for the intro webinar yesterday. I had to leave after 45m because the kids were getting hangry. was it recorded for posterity? 
[12:03:37] <bagder> it was!
[12:03:51] <bagder> should be made available within a few days I hope
[12:04:03] <dch> awesome!
[12:10:45] *** Joins: mattil (~mattil@helsinki.portalify.com)
[12:11:31] *** Joins: peetee (c0ce52d876@198.108.77.17)
[12:18:00] *** Quits: Everything (~Everythin@37.115.210.35) (Quit: leaving)
[12:21:41] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[12:41:16] *** Joins: icing (~stefan@2001:16b8:f35b:e800:798e:2193:221d:a22)
[12:41:16] *** Quits: icing (~stefan@2001:16b8:f35b:e800:798e:2193:221d:a22) (Changing host)
[12:41:16] *** Joins: icing (~stefan@user/icing)
[12:41:29] <icing> bagder: how was it yesterday?
[12:41:57] <bagder> you mean the webinar thing?
[12:42:07] <icing> yes
[12:42:40] <bagder> it went rather well I think. I got fewer questions than I expected, but I hope that didn't mean everyone had fallen asleep
[12:43:27] <icing> I have not seen anyone falling asleep while you lecture - ok, maybe on the curl user survey report later parts...
[12:43:33] <bagder> haha
[12:45:19] <peetee> hahahahaha
[12:46:22] <icing> on to other things: the new header API has its first user in curl itself?
[12:46:41] <bagder> yes! turned out a really nice test of the API and to work with it
[12:46:47] <bagder> I think it did really well
[12:46:48] <icing> +1
[12:48:46] <bagder> adding those cmdline options didn't even take me an hour of work thanks to the API
[12:50:40] <icing> that feeling when things "snap into place" is nice.
[12:54:35] <bagder> very!
[12:57:52] <gevaerts> Oh yes
[13:03:36] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[13:29:02] *** peetee is now known as tel2
[13:31:45] *** tel2 is now known as peetee
[14:35:03] *** Joins: NeoCron (~NeoCron@p200300e47f277d00ff410b6acd6256a7.dip0.t-ipconnect.de)
[14:56:25] *** Quits: dege (~dege@user/dege) (Quit: Textual IRC Client: www.textualapp.com)
[15:05:57] <alpha_one_x86> cette semain je passe plus de temps a corrigé/repporté les bugs dans le code des autres qu'autre chose...
[15:10:49] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[15:38:16] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[15:38:50] <grosjean> ca arrive :)
[15:40:26] <bagder> "pandoc -f man docs/libcurl/curl_easy_nextheader.3 -t markdown" worked very well!
[15:41:02] * bagder pasted it here => https://github.com/curl/curl/discussions/8496#discussioncomment-2387309
[15:48:19] <grosjean> nice one!
[15:49:12] <bagder> really nifty, so I could make markdown from my man page drafts and then update the wiki page for the API with them => https://github.com/curl/curl/wiki/get-headers-v2
[15:52:42] *** Joins: crashrep (~crashrep@user/crashrep)
[16:24:41] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 256 seconds)
[16:31:30] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[16:32:26] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[16:32:51] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[16:54:37] *** Quits: irf21k (~irf21k@2401:4900:32b5:d3e1::122e:9ae9) (Ping timeout: 240 seconds)
[17:04:27] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[17:11:43] *** Quits: martiert (~martiert@ti0185q160-2775.bb.online.no) (Ping timeout: 256 seconds)
[17:14:29] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[17:19:43] *** Joins: Guest2581 (~martiert@ti0185q160-2775.bb.online.no)
[17:19:49] *** Guest2581 is now known as martiert
[17:32:57] *** Joins: crashrep (~crashrep@user/crashrep)
[17:55:21] *** Quits: zajdee (sid398046@id-398046.lymington.irccloud.com) (Read error: Connection reset by peer)
[17:55:30] *** Joins: zajdee (sid398046@id-398046.lymington.irccloud.com)
[17:55:59] *** Quits: nirojan (sid365686@user/nirojan) (Ping timeout: 250 seconds)
[17:56:25] *** Quits: davic (sid473656@user/davic) (Ping timeout: 250 seconds)
[17:56:34] *** Joins: davic (sid473656@user/davic)
[17:56:37] *** Joins: nirojan (sid365686@user/nirojan)
[18:13:54] *** Quits: pvp (~pvp@p4ff13916.dip0.t-ipconnect.de) (Quit: The Lounge - https://thelounge.chat)
[18:19:03] *** Joins: pvp (~pvp@p4ff13916.dip0.t-ipconnect.de)
[18:23:55] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[18:30:48] *** Joins: crashrep (~crashrep@user/crashrep)
[19:19:46] *** Joins: rgrinberg (~textual@177.241.245.222)
[19:20:07] *** Quits: rgrinberg (~textual@177.241.245.222) (Client Quit)
[19:25:11] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[19:27:16] *** Quits: icing (~stefan@user/icing) (Quit: Leaving...)
[19:28:27] *** Parts: alpha_one_x86 (~alpha_one@2803:1920::2:10) (No boundaries on the net!)
[19:29:14] *** Joins: Artea (~Lufia@artea.com.pt)
[19:29:41] *** Quits: lehmrob (~rd7@business-176-095-223-081.static.arcor-ip.net) (Quit: Konversation terminated!)
[19:33:48] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[19:38:41] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[19:40:59] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 256 seconds)
[20:05:02] *** Joins: p-i-_ (~Ohmu@2403:6200:8978:d82d:89c0:e177:c2f7:c9a9)
[20:08:17] *** Quits: p-i- (~Ohmu@2403:6200:8978:d82d:540d:8c68:2946:51e0) (Ping timeout: 240 seconds)
[20:12:25] *** Joins: cdman (~dcm@user/dmc/x-4369397)
[20:19:21] *** Quits: kdudka (kdudka@nat-pool-brq-t.redhat.com) (Quit: Leaving)
[20:23:14] *** Parts: cdman (~dcm@user/dmc/x-4369397) (Leaving)
[20:24:50] *** Joins: magla (~gelignite@55d49742.access.ecotel.net)
[20:56:14] *** Joins: kdudka (~kdudka@83-208-198-11.rcc.o2.cz)
[21:23:14] *** Joins: rgrinberg (~textual@177.241.245.222)
[21:35:36] *** Quits: weyhmueller (~weyhmuell@blofeld.nc.w9r.de) (Quit: ZNC 1.8.2 - https://znc.in)
[21:50:19] *** Joins: weyhmueller (~weyhmuell@blofeld.nc.w9r.de)
[21:52:10] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 250 seconds)
[21:52:51] *** Joins: cliluw (~cliluw@47.147.77.43)
[21:53:00] <BSaboia> Why curl is returning %{time_connect} a big number? In my case, 242008
[21:53:18] <BSaboia> I thought that this number was in seconds
[21:53:28] <BSaboia> Something like 0.024
[21:54:21] <BSaboia> curl 7.74.0 
[22:14:48] *** Quits: kdudka (~kdudka@83-208-198-11.rcc.o2.cz) (Quit: Leaving)
[22:18:01] *** Joins: hans (uid529825@id-529825.helmsley.irccloud.com)
[22:20:23] <bagder> BSaboia: that's a bug in your curl version
[22:20:34] <bagder> fixed since long
[22:31:39] *** Quits: peetee (c0ce52d876@198.108.77.17) (Changing host)
[22:31:39] *** Joins: peetee (c0ce52d876@user/peetee)
[22:34:36] <BSaboia> badger, thanks
[22:47:49] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 250 seconds)
[22:48:28] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[23:41:46] *** Quits: rgrinberg (~textual@177.241.245.222) (Quit: My MacBook has gone to sleep. ZZZzzz…)
