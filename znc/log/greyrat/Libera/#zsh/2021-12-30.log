[00:00:02] *** Quits: markmcb (~markmcb@89.45.90.135) (Ping timeout: 240 seconds)
[00:02:31] *** Quits: guido (~weechat@host-79-33-255-142.retail.telecomitalia.it) (Read error: Connection reset by peer)
[00:03:13] *** Joins: guido (~weechat@host-79-33-255-142.retail.telecomitalia.it)
[00:12:27] *** Joins: markmcb (~markmcb@86.106.143.239)
[00:22:37] <llua> in fact, the user can't even use matching control since -U is used by _describe and compadd
[00:22:58] <llua> it assumes the completer is doing all of the matching
[00:27:10] *** Quits: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com) (Read error: Connection reset by peer)
[00:31:49] *** Quits: bdju (~bard@user/bdju) (Ping timeout: 240 seconds)
[00:36:16] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[00:39:14] *** Joins: bdju (~bard@user/bdju)
[00:42:35] *** Quits: bartholin (~bartholin@2a01:cb11:1ef:d800:4fc6:aec1:8fb8:a2e1) (Quit: Leaving)
[00:42:55] *** Joins: ztx (~ztx@user/ztx)
[00:47:18] *** Quits: alephalpha0 (~alephalph@035-135-169-134.res.spectrum.com) (Quit: Mors certa; Vita incerta.)
[00:57:05] *** Joins: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com)
[00:57:10] *** Quits: panke (~panke@40.119.158.205) (Quit: WeeChat 2.8)
[00:58:15] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[01:02:25] *** Quits: guido (~weechat@host-79-33-255-142.retail.telecomitalia.it) (Ping timeout: 250 seconds)
[01:04:26] *** Joins: guido (~weechat@host-79-33-11-245.retail.telecomitalia.it)
[01:05:26] *** Quits: sdu (~doo@185.44.146.214) (Quit: leaving)
[01:06:12] *** Joins: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9)
[01:08:21] *** Quits: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9) (Read error: Connection reset by peer)
[01:08:47] *** Joins: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9)
[01:09:54] *** Quits: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9) (Read error: Connection reset by peer)
[01:10:16] *** Joins: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9)
[01:10:21] *** Joins: Palaver (~Palaver@cpe-24-193-154-106.nyc.res.rr.com)
[01:11:07] *** Parts: Palaver (~Palaver@cpe-24-193-154-106.nyc.res.rr.com) ()
[01:11:20] *** Quits: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9) (Read error: Connection reset by peer)
[01:11:47] *** Joins: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9)
[01:12:51] *** Quits: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9) (Read error: Connection reset by peer)
[01:13:16] *** Joins: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9)
[01:13:44] *** Joins: rex4539 (~rex4539@gateway/tor-sasl/rex4539)
[01:15:53] *** Quits: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9) (Read error: Connection reset by peer)
[01:16:16] *** Joins: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9)
[01:17:41] *** Quits: bdju (~bard@user/bdju) (Ping timeout: 256 seconds)
[01:19:08] *** Quits: alephalpha0 (~alephalph@2600:6c56:207f:f35e:f9df:6091:48ea:34e9) (Read error: Connection reset by peer)
[01:24:24] *** Joins: bdju (~bard@user/bdju)
[01:27:39] *** Quits: rex4539 (~rex4539@gateway/tor-sasl/rex4539) (Ping timeout: 276 seconds)
[01:28:19] *** Quits: JamminUnit (~JU@gentoofan.org) (Quit: leaving)
[01:33:30] *** Joins: JamminUnit (~JU@gentoofan.org)
[01:35:49] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[01:37:09] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[01:37:46] *** Joins: rex4539 (~rex4539@gateway/tor-sasl/rex4539)
[01:41:19] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:46:29] *** Joins: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net)
[01:48:30] *** Quits: hellstabber (~hellstabb@178.233.16.12) (Quit: Cy@)
[01:56:34] *** Quits: bdju (~bard@user/bdju) (Ping timeout: 260 seconds)
[02:03:26] *** Joins: bdju (~bard@user/bdju)
[02:07:19] *** Quits: agonhajdari (~textual@user/agonhajdari) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[02:21:04] *** Joins: Torr (~Torr@user/torr)
[02:24:55] *** Quits: rex4539 (~rex4539@gateway/tor-sasl/rex4539) (Remote host closed the connection)
[02:25:14] *** Joins: rex4539 (~rex4539@gateway/tor-sasl/rex4539)
[02:27:55] *** Quits: rex4539 (~rex4539@gateway/tor-sasl/rex4539) (Client Quit)
[02:28:36] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: ZzzZ)
[02:30:34] *** Joins: rex4539 (~rex4539@gateway/tor-sasl/rex4539)
[02:45:14] *** Quits: Galladite (~Galladite@host-92-24-75-159.as13285.net) (Remote host closed the connection)
[02:49:23] *** Quits: guido (~weechat@host-79-33-11-245.retail.telecomitalia.it) (Quit: WeeChat 3.4)
[02:57:36] *** Joins: TudbuT (~TudbuT@2001:16b8:66c7:a701:461c:a8ff:fe5e:10a3)
[03:02:58] *** Quits: TudbuT (~TudbuT@2001:16b8:66c7:a701:461c:a8ff:fe5e:10a3) (Ping timeout: 268 seconds)
[03:14:43] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Reconnecting)
[03:15:29] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[03:17:10] *** Quits: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com) (Ping timeout: 268 seconds)
[03:22:39] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[03:39:09] *** Joins: okapi (~okapi@ip-88-153-48-38.hsi04.unitymediagroup.de)
[03:39:09] *** Quits: okapi (~okapi@ip-88-153-48-38.hsi04.unitymediagroup.de) (Changing host)
[03:39:09] *** Joins: okapi (~okapi@zsh/developer/okapi)
[03:42:51] *** Quits: rex4539 (~rex4539@gateway/tor-sasl/rex4539) (Ping timeout: 276 seconds)
[03:42:58] *** Joins: rex4539_ (~rex4539@gateway/tor-sasl/rex4539)
[03:44:20] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f036300f147b383cad9442b.dip0.t-ipconnect.de)
[03:55:24] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:810:101f:cf82:e73c:f52b)
[04:06:37] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:810:101f:cf82:e73c:f52b) (Ping timeout: 240 seconds)
[04:17:18] *** ormaaj is now known as jaamro
[04:40:16] *** Quits: markmcb (~markmcb@86.106.143.239) (Quit: WeeChat 3.0.1)
[04:41:25] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f036300f147b383cad9442b.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[04:44:09] *** Joins: markmcb (~markmcb@193.27.13.133)
[05:12:26] *** Joins: TudbuT2624 (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3)
[05:13:27] *** Quits: TudbuT2624 (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3) (Client Quit)
[05:14:03] *** Joins: TudbuT2624 (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3)
[05:14:03] *** TudbuT2624 is now known as TudbuT
[05:14:26] *** TudbuT is now known as Guest2815
[05:14:26] *** Quits: Guest2815 (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3) (Killed (strontium.libera.chat (Nickname regained by services)))
[05:14:56] *** Joins: Guest2815 (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3)
[05:14:56] *** Guest2815 is now known as TudbuT
[05:16:39] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f03630091c59bced6da119a.dip0.t-ipconnect.de)
[05:26:02] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f03630091c59bced6da119a.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[05:30:37] *** Quits: andril (~andril@c-66-229-99-96.hsd1.fl.comcast.net) (Ping timeout: 240 seconds)
[05:33:17] *** Quits: maetthew (~maetthew@user/maetthew) (Quit: ZNC 1.8.2 - https://znc.in)
[05:35:54] *** Joins: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se)
[05:35:54] *** Quits: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se) (Changing host)
[05:35:54] *** Joins: maetthew (~maetthew@user/maetthew)
[05:40:27] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[05:40:52] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: ZzzZ)
[05:41:00] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[05:48:44] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[05:52:38] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[05:57:22] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[06:02:30] *** Joins: zhongdragunov (~zhong@2401:3c00:13:bc6b:d07b:4c6c:d3a7:a491)
[06:03:52] *** Parts: zhongdragunov (~zhong@2401:3c00:13:bc6b:d07b:4c6c:d3a7:a491) ()
[06:12:06] *** Joins: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com)
[06:23:36] *** Joins: beastDivision (~beastDivi@user/beastdivision)
[06:34:53] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[06:36:17] *** Quits: skylite (~skylite@2E6B2CD6.catv.pool.telekom.hu) (Ping timeout: 240 seconds)
[07:29:46] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: ZzzZ)
[07:47:01] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[07:47:53] *** Joins: Szadek_ (~Szadek@185.254.75.42)
[07:48:07] *** Quits: Szadek (~Szadek@185.209.196.138) (Ping timeout: 256 seconds)
[07:51:32] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[08:08:17] *** jaamro is now known as ormaaj
[08:12:15] *** Joins: cdown_ (~cdown@137.220.72.66)
[08:15:10] *** Joins: cdown__ (~cdown@188.214.11.14)
[08:15:53] *** Quits: cdown (~cdown@188.214.11.14) (Ping timeout: 256 seconds)
[08:15:56] *** cdown__ is now known as cdown
[08:17:50] *** Quits: xx (~xx@user/xx) (Ping timeout: 260 seconds)
[08:18:09] *** Quits: cdown_ (~cdown@137.220.72.66) (Ping timeout: 256 seconds)
[08:27:03] *** Quits: trace987 (~trace@ip5b42963a.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[08:29:31] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[08:29:39] *** Joins: trace987 (~trace@ip5b42963a.dynamic.kabel-deutschland.de)
[08:33:15] *** Quits: trace987 (~trace@ip5b42963a.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[08:34:18] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[08:40:57] *** Quits: cdown (~cdown@188.214.11.14) (Ping timeout: 240 seconds)
[08:56:55] <phy1729> comments on this completer? It's being automatically generated from click get_info_dict https://gist.github.com/phy1729/d117daef9a3fde471b0fa50150e8c8d7
[08:57:35] <phy1729> should probably special case quoting simple strings to just not add quotes
[09:16:27] <llua> better than what was shown earlier. should update curcontext with the subcommand like https://github.com/llua/homelab-states/blob/main/zsh/functions/_bectl#L26
[09:16:43] <llua> the quoting of line 28 seems wrong
[09:16:51] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[09:17:09] <phy1729> Indeed had = instead of += in the generator
[09:18:21] <phy1729> Is the trailing : there  intentional?
[09:20:57] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[09:21:58] <llua> pretty sure there is a difference between having a trailing : on a description and not that i ran into early into writing them that opk corrected me on; i just don't remember what
[09:22:02] *** Quits: TudbuT (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3) (Quit: Disconnecting)
[09:22:31] <phy1729> Other completers seem to do it too
[09:22:45] *** Joins: TudbuT (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3)
[09:23:09] <llua> i am sure i have old stuff that does it too
[09:24:21] <llua> but i could be miss remembering that
[09:24:27] <phy1729> gist updated
[09:24:57] <phy1729> Also pulled the docstring/help for the subcommands
[09:26:51] <llua> https://github.com/llua/homelab-states/blob/main/zsh/functions/_bectl#L4-L5 you want those two lines since the -> action is used
[09:27:08] <phy1729> ah right
[09:27:41] <llua> opk prefers descriptions to start lowercase. non-zsh completers commonly have Titlecase descriptions
[09:27:54] <llua> i don't feel strongly about either but use the former
[09:28:52] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[09:30:03] <llua> i don't know why *:::message:action is being used over *::message:action is being used either. i can't remember ever needing the three colon one
[09:30:57] <phy1729> bah that means the words[1] thing isn't gonna work
[09:31:14] <phy1729> click is wonky and can have arguments before a subcommand for some reason
[09:31:25] <phy1729> so I was using ::: to kill those, but that kills the subcommand too
[09:31:58] <llua> `subcommand' parsing is a wildwest
[09:32:33] <phy1729> I guess I can use :: and then count the number of args prior to the subcommand
[09:34:11] <llua> if it does subcommands of subcommands like btrfs; gl;hf
[09:34:34] <llua> i remember regretting trying to do that
[09:34:37] <phy1729> of course it does, but I think I already handle that through recursion
[09:35:18] <Mikachu> there should be some kind of course you have to take before you're allowed to design a command line interface
[09:37:26] <phy1729> Updated again
[09:38:48] <phy1729> Still need to quote properly and handle on/off flag combos
[09:39:20] <phy1729> Since I change curcontext I guess I should local that too
[09:40:07] <llua> so kinda/very are subcommands aren't the second set of subcommands bar and foo going to depend on which of the first two was chosen?
[09:40:26] <phy1729> kinda/very is just an argument
[09:40:33] <llua> lol
[09:40:46] <llua> that looks just like a subcommand
[09:41:42] <phy1729> so maybe you have   relative_git <path_to_repo> <git stuff>   (more or less foo() { git -C $1 ${@[2,]; } )
[09:42:12] <phy1729> I didn't write the library, I'm just reading the API docs and handling what it does.
[09:42:19] <Mikachu> at least you're not dealing with imagemagick, you have to symlink files to simple names to pass to it reliably
[09:42:32] <llua> ah, ok
[09:42:59] <llua> in that case; you may be able to get away with what i was doing with python -m the past few days
[09:43:22] <phy1729> That seems harder to automate
[09:43:26] <llua> for the :subcommand: description with the second opt spec doing the ->action
[09:43:36] <phy1729> Custom types are gonna be fun too
[09:46:38] <llua> http://ix.io/3K0J diff -u of _foo() { _arguments : '-a[foo]:foo:' '-b[bar]:bar' }; compdef _foo foo
[09:47:01] <llua> some checks of automenu and menu seem to be the difference
[09:47:31] <llua> what that does exactly i don't know
[09:48:33] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[09:50:47] <llua> http://ix.io/3K0K a better one with just an -a spec with and without the :
[09:53:02] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[09:55:27] <phy1729> Seems harmless enough
[10:07:31] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 256 seconds)
[10:09:50] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[10:11:07] *** Joins: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it)
[10:12:20] *** Joins: trace987 (~trace@ip5b42963a.dynamic.kabel-deutschland.de)
[10:30:13] *** Quits: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com) (Ping timeout: 240 seconds)
[10:38:41] *** Quits: japh_ (~scp1@user/japh) (Ping timeout: 256 seconds)
[10:39:00] *** Joins: japh (~scp1@user/japh)
[10:43:35] *** Joins: TudbuT2624 (~TudbuT@i577BC9F4.versanet.de)
[10:43:35] *** Quits: TudbuT (~TudbuT@2001:16b8:6638:9701:461c:a8ff:fe5e:10a3) (Killed (zirconium.libera.chat (Nickname regained by services)))
[10:43:35] *** TudbuT2624 is now known as TudbuT
[10:49:07] *** Quits: kolla (~kolla@cloudsmurf.kolla.no) (Quit: %fog relay%)
[10:49:47] *** Joins: kolla (~kolla@cloudsmurf.kolla.no)
[10:51:51] *** Quits: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it) (Quit: WeeChat 3.4)
[11:01:11] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[11:02:32] *** Joins: sdu (~doo@185.44.146.214)
[11:05:37] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[11:12:32] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:12:37] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[11:29:01] *** Quits: Szadek_ (~Szadek@185.254.75.42) (Ping timeout: 240 seconds)
[11:34:58] *** Joins: Szadek_ (~Szadek@185.254.75.42)
[11:39:44] *** Quits: Szadek_ (~Szadek@185.254.75.42) (Ping timeout: 268 seconds)
[11:48:32] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[11:49:42] *** Quits: beastDivision (~beastDivi@user/beastdivision) (Ping timeout: 276 seconds)
[11:51:56] *** Quits: foul_owl (~kerry@212.102.47.57) (Ping timeout: 252 seconds)
[11:52:51] *** Joins: bartholin (~bartholin@2a01:cb11:1ef:d800:4fc6:aec1:8fb8:a2e1)
[11:56:50] *** Joins: foul_owl (~kerry@212.102.47.57)
[12:12:37] *** Joins: beastDivision (~beastDivi@user/beastdivision)
[12:18:18] *** Quits: beastDivision (~beastDivi@user/beastdivision) (Ping timeout: 276 seconds)
[12:27:24] *** Quits: rex4539_ (~rex4539@gateway/tor-sasl/rex4539) (Ping timeout: 276 seconds)
[12:28:43] *** Quits: uuidNuniq (~weechat@146.56.136.247) (Remote host closed the connection)
[12:29:03] *** Joins: uuidNuniq (~weechat@146.56.136.247)
[12:35:39] *** Joins: beastDivision (~beastDivi@user/beastdivision)
[12:37:08] *** Joins: amir__ (~amir__@198.244.150.26)
[12:38:05] <okapi> phy1729: _arguments just needs the words array to contain one element for the command and whatever it cares about after that. Add debug to see what you have. doing shift or prepends to words can solve it. When subcommands are in 1:, you can use the *:: form. With the :dumb: stuff in the first arg, it might be easier to handle subcommands as part of a *::: state.
[12:39:55] *** Joins: Szadek_ (~Szadek@185.254.75.42)
[12:42:54] <okapi> llua: "opk" cares about consistency rather than preferring lowercase per se. I followed whatever coventions Sven used before me. Unfortunately, Titlecase is slightly more common in --help descriptions.
[12:44:04] <llua> :x
[12:45:06] <okapi> one advantage lowercase has is that it makes people less inclined to add a fullstop at the end.
[12:46:30] *** Joins: mozgalom (~mozgalom@194.144.47.113)
[12:48:26] <okapi> more important is actually putting thought into how the descriptions scan when browsed vertically: starting with verbs, putting important parts first, avoiding unnecessary fluff. There are also benefits to using --help descriptions verbatim but having looked at many of them critically, they are sometimes quite bad.
[12:48:32] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:51:20] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[12:56:20] *** Joins: agonhajdari (~textual@user/agonhajdari)
[12:58:38] <okapi> phy1729: also note, -sS to _arguments can't be clumped. curcontext should be local and you probably want to pass -C to _arguments and drop $context. The default case allows for multiple possible states.
[13:01:27] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[13:14:37] *** Quits: TudbuT (~TudbuT@i577BC9F4.versanet.de) (Ping timeout: 240 seconds)
[13:24:04] *** Joins: rex4539 (~rex4539@gateway/tor-sasl/rex4539)
[13:31:39] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[13:34:19] *** Joins: Julian (~tos9@python/site-packages/Julian)
[13:35:49] *** Quits: rex4539 (~rex4539@gateway/tor-sasl/rex4539) ()
[13:36:29] *** Quits: amir__ (~amir__@198.244.150.26) (Ping timeout: 256 seconds)
[13:37:11] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 256 seconds)
[13:44:24] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[13:47:48] *** Quits: Julian (~tos9@python/site-packages/Julian) (Quit: leaving)
[13:55:16] *** Quits: haise01 (~haise01@user/haise01) (Quit: ZNC 1.8.2 - https://znc.in)
[13:56:13] *** Joins: haise01 (~haise01@user/haise01)
[13:59:25] *** Quits: haise01 (~haise01@user/haise01) (Remote host closed the connection)
[14:26:14] *** Quits: Echoz (~chris@user/echoz) (Ping timeout: 268 seconds)
[14:30:27] *** Joins: Echoz (~chris@user/echoz)
[14:37:11] *** Quits: w0ng (~w0ng@103.212.227.117) (Ping timeout: 250 seconds)
[14:41:06] *** Joins: w0ng (~w0ng@185.218.127.28)
[14:42:36] *** Joins: Ischwitch (~Ingvix@user/ingvix)
[14:43:47] *** Quits: Ingvix (~Ingvix@user/ingvix) (Ping timeout: 250 seconds)
[14:43:48] *** Ischwitch is now known as Ingvix
[14:47:51] *** Quits: greenly (~el@bl8-67-202.dsl.telepac.pt) (Read error: Connection reset by peer)
[14:53:31] *** Joins: greenly (~el@bl8-67-202.dsl.telepac.pt)
[15:03:31] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[15:05:37] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[15:10:33] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:14:25] *** Joins: stblaha (~stblaha@user/stblaha)
[15:15:23] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[15:16:53] *** Parts: stblaha (~stblaha@user/stblaha) ()
[15:17:25] *** Quits: foul_owl (~kerry@212.102.47.57) (Ping timeout: 240 seconds)
[15:23:44] *** Quits: w0ng (~w0ng@185.218.127.28) (Ping timeout: 260 seconds)
[15:24:03] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.4)
[15:28:45] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[15:30:48] *** Joins: foul_owl (~kerry@94.140.8.106)
[15:33:27] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 268 seconds)
[15:45:23] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:51:09] *** Joins: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it)
[15:54:05] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[15:58:14] *** Joins: cdown (~cdown@188.214.11.14)
[16:03:06] <henk> I have a dir with subdirs *.git/. I only want the names of the subdirs without the .git/ part. any better way than to use »${${i:t}%.git}«?
[16:04:23] <henk> oh, nvm: ${i:t:r}
[16:06:08] *** Joins: zeden (~zeden@user/zeden)
[16:10:57] *** Quits: henry40408 (~henry4040@123-204-10-70.dynamic.seed.net.tw) (Ping timeout: 240 seconds)
[16:14:52] *** Joins: Galladite (~Galladite@host-92-24-75-159.as13285.net)
[16:15:37] *** Joins: w0ng (~w0ng@ec2-13-211-241-147.ap-southeast-2.compute.amazonaws.com)
[16:18:57] *** Joins: henry40408 (~henry4040@123-204-10-70.dynamic.seed.net.tw)
[16:19:13] *** Quits: w0ng (~w0ng@ec2-13-211-241-147.ap-southeast-2.compute.amazonaws.com) (Client Quit)
[16:19:54] *** Joins: w0ng (~w0ng@103.1.212.77)
[16:23:56] <henk> can I dump the actual code of an autoloaded function? 'functions myfunc', 'type myfunc' only tell me that it’s autoloaded
[16:27:08] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[16:31:50] *** Quits: mozgalom (~mozgalom@194.144.47.113) (Quit: SO LONG SUCKERS!)
[16:36:53] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 250 seconds)
[16:43:56] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[16:54:34] *** jlc_ is now known as jlc
[16:59:31] *** Quits: henry40408 (~henry4040@123-204-10-70.dynamic.seed.net.tw) (Read error: Connection reset by peer)
[17:00:33] *** Quits: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com) (Quit: leaving)
[17:09:03] *** Quits: agonhajdari (~textual@user/agonhajdari) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[17:12:39] *** Joins: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com)
[17:13:44] *** Quits: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com) (Client Quit)
[17:13:59] *** Joins: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com)
[17:14:47] *** Quits: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com) (Client Quit)
[17:15:10] *** Joins: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com)
[17:17:20] *** Joins: xx (~xx@user/xx)
[17:17:34] *** Quits: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com) (Client Quit)
[17:17:56] *** Joins: jlc (~jlc@cpe-107-15-173-212.nc.res.rr.com)
[17:21:39] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: ZzzZ)
[17:23:46] *** Joins: agonhajdari (~textual@user/agonhajdari)
[17:29:48] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[17:34:02] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[17:43:39] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:45:08] *** Joins: samgranieri (~samgranie@user/samgranieri)
[17:50:37] *** Quits: ravan (~ravan@user/ravan) (Ping timeout: 240 seconds)
[17:52:45] *** Quits: japh (~scp1@user/japh) (Ping timeout: 256 seconds)
[17:53:17] *** Quits: samgranieri (~samgranie@user/samgranieri) (Read error: Connection reset by peer)
[17:54:02] *** Joins: samgranieri (~samgranie@user/samgranieri)
[17:54:47] *** Joins: japh (~scp1@user/japh)
[17:58:04] *** Quits: samgranieri (~samgranie@user/samgranieri) (Client Quit)
[17:58:10] <phy1729> you have to load it first; for completers    foo <tab>   will do
[18:00:04] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[18:11:44] *** Quits: japh (~scp1@user/japh) (Read error: Connection reset by peer)
[18:15:49] *** Joins: japh (~scp1@user/japh)
[18:16:08] <phy1729> okapi: is the -C flag really wanted since the -> action is more a placeholder value than actually meaningful?
[18:16:16] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:17:16] *** Joins: cdown_ (~cdown@163.114.131.1)
[18:20:14] *** Quits: cdown (~cdown@188.214.11.14) (Ping timeout: 252 seconds)
[18:20:19] *** cdown_ is now known as cdown
[18:20:53] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[18:21:22] <okapi> You can leave it out. But you do need to declare curcontext local (and copy the value) as you're modifying it to add the subcommand. I tend to include it so context doesn't need to be local and further states may be added later.
[18:24:14] <henk> phy1729: oh, right, thanks
[18:24:52] <phy1729> so like this? http://ix.io/3K2X
[18:25:08] <phy1729> I'll try to get the python cleaned up tonight and post the actual generation code
[18:26:02] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 240 seconds)
[18:26:11] *** Joins: keypushe- (~keypusher@user/keypusher)
[18:26:17] <phy1729> And this is the preferred direction for third parties to take right? Generate a completer at compile/make time and install into fpath?
[18:28:37] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[18:29:29] *** keypushe- is now known as keypusher
[18:30:09] *** Quits: japh (~scp1@user/japh) (Ping timeout: 256 seconds)
[18:31:31] *** Joins: hellstabber (~hellstabb@178.233.16.12)
[18:31:38] *** Joins: japh (~scp1@user/japh)
[18:36:37] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 240 seconds)
[18:41:01] *** Quits: japh (~scp1@user/japh) (Read error: Connection reset by peer)
[18:45:32] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[18:46:26] *** Joins: japh (~scp1@user/japh)
[18:46:39] <okapi> Install to $PREFIX/share/zsh/site-functions even if their install prefix is weird and unlikely to be in fpath.
[18:47:16] <okapi> Static completers tend to be better but I can see the advantages of generating from the parsing code because it keeps it in line with option changes.
[18:48:00] <okapi> You need local curcontext="$curcontext" to copy the previous value in. Otherwise it is empty
[18:49:23] *** Quits: keypusher (~keypusher@user/keypusher) (Ping timeout: 252 seconds)
[18:49:25] <okapi> If the description for --help is hardcoded, it can be good to change it to not refer to "this message" because that makes no sense in a completer.
[18:50:37] <okapi> _files :filepos: makes no sense and if it did, you'd need \ quoting for the colons.
[18:50:46] <phy1729> I'm trying to keep the autogenerated code as close to as a human would do it, so it can be used as a base and hand edited if one choses.
[18:51:01] <phy1729> --filepos takes two arguments
[18:51:55] *** Quits: hellstabber (~hellstabb@178.233.16.12) (Quit: Textual IRC Client: www.textualapp.com)
[18:52:13] <okapi> ok, fair enough. I tend not the leave trailing colons for the message only cases but they have no effect.
[18:52:42] *** Joins: keypusher (keypusher@user/keypusher)
[18:52:44] <phy1729> The trouble with removing them is then I have to track if this is the last argument for an option or not
[18:54:03] <okapi> state state_descr and line are arrays really. I try to declare them with local -a these days but it makes no difference.
[18:54:24] <phy1729> Docs should be updated then
[18:54:48] <okapi> The use of typeset rather than local for opt_args is an odd historical quirk that has perpetuated through force of habit.
[18:55:02] <phy1729> also in zshcompsys
[18:55:23] <phy1729> I had local, but figured matching the docs was better
[18:55:26] <Mikachu> the only difference between typeset and local is that local errors on -g
[18:57:35] <okapi> Should probably be corrected there. typeset is a stupid name because typesetting is something different. declare is better really.
[18:58:06] <Mikachu> i don't think i've ever used declare on purpose
[18:59:39] <Mikachu> somewhat unexpected that export also forbids +g
[19:01:23] <okapi> I think there's an actual limitation in the parameter code internals that makes exported locals problematic but would have to look to be sure.
[19:02:16] <Mikachu> local -x works fine
[19:02:58] <okapi> phy1729: your function is still getting words wrong for the second call to _arguments. I assume you know about the missing trailing backslashes, ;; and esacs that cause parse errors.
[19:03:17] <phy1729> oh wow was I tired last night
[19:06:44] <okapi> Easiest way if it needs to work for a variety of possibilities because of autogenerating might be to use '*::: := ->subcmds'  Then you need to use $line[2] to get the subcommand.
[19:06:57] <phy1729> but ::: kills the subcommand
[19:07:30] <okapi> Only from $words, not from $line
[19:07:51] <phy1729> line will have options though won't it?
[19:08:45] *** Joins: malina (~malina@user/malina)
[19:09:55] <okapi> No. $line is normal args only. It is $words that usually includes the options.
[19:10:28] <phy1729> ah ok
[19:10:35] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Read error: Connection timed out)
[19:12:27] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[19:13:50] <phy1729> http://ix.io/3K3J  now actually tested interactively
[19:14:56] <phy1729> Oddly   cli kinda foo --d<tab>  still offers dest as an option (and more oddly not src). Does _arguments not allow :argspecs after *:argspecs?
[19:17:46] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[19:18:08] <okapi> This is what _guard is normally used for. --d<something> could be a valid "dest".
[19:20:57] <okapi> A very pedantic point but my own style preference is one level less indentation on ;; I consider them to be a closing tag on the <pattern>) so indent to their level. In C, you have break; statements which are clearly statements rather than tags.
[19:21:40] <phy1729> Done re deindent ;;
[19:22:11] <phy1729> I doubt adding _guard for all arguments not otherwise handled is a good idea
[19:22:25] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[19:22:34] <okapi> :dest: is short for 1:dest so dest comes before src from *:src. Order of args to _arguments is completely irrelevant.
[19:22:57] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:23:12] <phy1729> Is it possible to say something comes after *: then?
[19:25:13] <okapi> The *: are the "rest" arguments. They are last. It is usually best to put them last to reflect that but they don't need to be. There's no _arguments syntax for indicating some sort of termination condition.
[19:25:55] <phy1729> I was hoping for *:src :dest to just offer both
[19:26:34] <okapi> If dest is optional, ::dest
[19:28:26] <phy1729> That's grabbed from their docs and it's explicitly set nargs=1 there, so required
[19:28:38] <phy1729> https://click.palletsprojects.com/en/8.0.x/arguments/#variadic-arguments
[19:30:58] *** Quits: agonhajdari (~textual@user/agonhajdari) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[19:31:02] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[19:33:15] <okapi> Unlike a command-line parser, completion by definition has to deal with incomplete lines. so can't count back from the end.
[19:33:41] <phy1729> right
[19:33:52] <okapi> What does this do if you give it zero src arguments?
[19:33:53] <phy1729> but can offer both if in the last position
[19:34:06] <phy1729> Probably hand back an empty array
[19:34:39] *** Joins: agonhajdari (~textual@user/agonhajdari)
[19:35:16] <okapi> Then you have '*: : _alternative src… dest…'. If it needs 1 src then you start with '1:src'
[19:35:23] *** Quits: sdu (~doo@185.44.146.214) (Quit: leaving)
[19:35:39] <phy1729> hrm that may be doable
[19:36:46] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[19:37:45] <phy1729> Aside: is there a way to get _values to do arguments in a new word? Asking mostly for _ifconfig which uses -S ' ', but that seems to require a quoted space not a new word.
[19:39:02] <okapi> _values -w
[19:39:38] <okapi> That type of situation and ifconfig would be better handled with _regex_arguments.
[19:40:06] <phy1729> oh no, I wanted to improve ifconfig for OpenBSD, but have yet to wade into _regex_arguments
[19:41:02] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[19:43:45] <phy1729> Have this diff in my tree http://ix.io/3K4l
[19:43:50] *** Joins: greedom (~greedom@p200300de670b8300a6d3275d0253eda7.dip0.t-ipconnect.de)
[19:45:58] <okapi> That looks fairly good. ifconfig is less order dependent than e.g. ipfw so _values may work well enough.
[19:48:20] *** Joins: sdu (~doo@185.44.146.214)
[19:48:22] *** Quits: greedom (~greedom@p200300de670b8300a6d3275d0253eda7.dip0.t-ipconnect.de) (Remote host closed the connection)
[19:48:46] *** Joins: greedom (~greedom@p200300de670b8300a6d3275d0253eda7.dip0.t-ipconnect.de)
[19:51:30] *** Joins: hellstabber (~hellstabb@178.233.16.12)
[19:56:51] *** Quits: agonhajdari (~textual@user/agonhajdari) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[20:04:44] *** Quits: hellstabber (~hellstabb@178.233.16.12) (Quit: Cy@)
[20:05:30] *** Quits: japh (~scp1@user/japh) (Read error: Connection reset by peer)
[20:09:51] *** Quits: greedom (~greedom@p200300de670b8300a6d3275d0253eda7.dip0.t-ipconnect.de) (Remote host closed the connection)
[20:10:27] *** Joins: japh (~scp1@user/japh)
[20:17:16] *** Quits: av6 (~av6@kdm.dwimlabs.net) (Quit: ZNC - http://znc.in)
[20:17:38] *** Joins: av6 (~av6@kdm.dwimlabs.net)
[20:18:09] *** Joins: samgranieri (~samgranie@user/samgranieri)
[20:33:33] *** Quits: Torr (~Torr@user/torr) ()
[20:33:44] *** Joins: Torr (~Torr@user/torr)
[20:33:56] *** Quits: Torr (~Torr@user/torr) (Client Quit)
[20:34:10] *** Joins: Torr (~Torr@user/torr)
[20:34:23] *** Quits: samgranieri (~samgranie@user/samgranieri) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:38:44] *** Quits: Torr (~Torr@user/torr) (Remote host closed the connection)
[20:41:29] *** Quits: ztx (~ztx@user/ztx) (Quit: ztx)
[20:44:42] *** Quits: xx (~xx@user/xx) (Excess Flood)
[20:45:32] *** Joins: xx (~xx@user/xx)
[20:47:15] *** Joins: Torr (~Torr@user/torr)
[20:51:37] *** Joins: samgranieri (~samgranie@user/samgranieri)
[20:52:16] *** Quits: samgranieri (~samgranie@user/samgranieri) (Client Quit)
[20:56:47] *** Quits: malina (~malina@user/malina) (Remote host closed the connection)
[20:57:42] *** Quits: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it) (Quit: WeeChat 3.4)
[20:58:01] *** Joins: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it)
[21:02:50] *** Quits: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it) (Client Quit)
[21:03:29] *** Joins: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it)
[21:08:20] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:21:06] *** Joins: agonhajdari (~textual@user/agonhajdari)
[21:37:36] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de)
[21:41:57] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f0517003df52d56b8d78ea8.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[21:50:58] *** Joins: guido_ (~weechat@host-79-26-255-182.retail.telecomitalia.it)
[21:51:03] *** Quits: guido (~weechat@host-79-26-255-182.retail.telecomitalia.it) (Read error: Connection reset by peer)
[22:11:47] *** Joins: ahmedelgabri (~ahmedelga@p200300fb8f051700d8363972964b4fff.dip0.t-ipconnect.de)
[22:17:17] *** Quits: ahmedelgabri (~ahmedelga@p200300fb8f051700d8363972964b4fff.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[22:28:45] *** Quits: agonhajdari (~textual@user/agonhajdari) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[22:41:41] *** Joins: agonhajdari (~textual@user/agonhajdari)
[22:42:50] *** Joins: sa02irc (~mbax@155-079-043-212.ip-addr.inexio.net)
[23:09:51] *** Joins: skylite (~skylite@2E6B2CD6.catv.pool.telekom.hu)
[23:10:05] *** greenly is now known as greenel
[23:32:49] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[23:37:00] *** Quits: agonhajdari (~textual@user/agonhajdari) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[23:37:40] *** Quits: mexen (uid495612@user/mexen) (Quit: Connection closed for inactivity)
[23:45:50] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[23:46:54] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:810:101f:cf82:e73c:f52b)
[23:56:46] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:810:101f:cf82:e73c:f52b) (Remote host closed the connection)
[23:57:03] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:810:101f:cf82:e73c:f52b)
