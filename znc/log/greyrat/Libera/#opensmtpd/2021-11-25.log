[00:01:50] *** Quits: mononote (~mononote@user/mononote) (Ping timeout: 260 seconds)
[00:20:18] *** Quits: gustik (~gustik@2a01:c844:240a:de20:3606:7339:bc88:b5f5) (Quit: Leaving)
[00:23:51] *** Quits: Izorkin (~Izorkin@2600:70ff:b1c5:0:36f9:d76:f7f2:ef15) (Ping timeout: 264 seconds)
[00:25:39] *** Joins: Izorkin (~Izorkin@2600:70ff:b1c5:0:7a06:5f71:ed6e:ef5d)
[00:42:37] *** Quits: Izorkin (~Izorkin@2600:70ff:b1c5:0:7a06:5f71:ed6e:ef5d) (Quit: ZNC 1.8.2 - https://znc.in)
[00:43:23] *** Joins: Izorkin (~Izorkin@smtp.elven.pw)
[00:45:03] *** Quits: Izorkin (~Izorkin@smtp.elven.pw) (Client Quit)
[00:47:26] *** Joins: Izorkin (~Izorkin@2600:70ff:b1c5:0:5d19:454d:fc13:f435)
[01:23:32] *** Quits: _inky (~inky_@46.36.119.66) (Ping timeout: 240 seconds)
[01:30:47] *** Joins: _inky (~inky_@46.36.112.24)
[01:39:47] *** Quits: vit (~vit@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[01:45:15] <_inky> people, i have switched from postfix to opensmtpd. on gentoo.
[01:45:18] <_inky> for several days.
[01:45:28] <_inky> i was able to configure dkim for every domain.
[01:45:46] <_inky> i was able to configure sending emails via the relay server of my friend.
[01:45:51] <_inky> i have dmarc, i have spf.
[01:46:10] <_inky> i can send and receive emails. everything is good.
[01:46:21] <_inky> the only problem i get now is that i have a django application on the same server
[01:46:38] <_inky> and it sends the emails by using user, port, password.
[01:46:48] <_inky> and those emails get rejected
[01:46:49] <_inky> with
[01:47:19] <_inky> smtp failed-command command="AUTH PLAIN AG1hc3RvZG9uAEFlamFoTDRVT292ZWkwUmFhSzdpTTJpZQ==" result="503 5.5.1 Invalid command: Command not supported"
[01:47:19] <_inky> or
[01:47:34] <_inky> Nov 25 02:15:13 arnet smtpd[8193]: 338bca18519aea0d smtp failed-command command="AUTH LOGIN" result="503 5.5.1 Invalid command: Command not supported"
[01:47:51] <_inky> depending on how do i connect.
[01:47:55] <_inky> i have three listeners
[01:48:54] <_inky> right now:
[01:48:54] <_inky> listen on localhost port 25
[01:48:54] <_inky> listen on localhost port 10028 tag DKIM_OUT
[01:48:54] <_inky> listen on eth0 port 25 tls pki mail.mydomain.tld
[01:48:54] <_inky> listen on eth0 port submission tls-require pki mail.mydomain.tld auth hostname mail.mydomain.tld mask-src
[01:59:38] <satanist> which port does your django app connect? errors look like it connects to port 25 (where you have no auth configured)
[02:03:10] <satanist> btw you should change your password, because the auth plain log line contains your password
[02:03:23] <satanist> _inky: ^
[02:03:39] <_inky> i point it to
[02:03:52] <_inky> 25 localhost, or 25 domain.tld, or 587
[02:04:00] <_inky> with different results, but never successfully.
[02:04:09] <_inky> oh.
[02:04:31] <satanist> the port 587 should not create this error with your config
[02:04:40] <_inky> that's the password, i was thinking it's something like temporary message id.
[02:04:55] <_inky> let me check again what 587 does.
[02:05:33] <_inky> tls should be true, right?
[02:05:41] <_inky> i have that config in django too.
[02:05:57] <_inky> i also tried disablind and enabling tls, last time disabled by connecting to 25 localhost.
[02:06:15] <_inky> yes submission port is tls-require
[02:07:42] <_inky> i get:
[02:07:44] <_inky> only
[02:07:55] *** Joins: mononote (~mononote@user/mononote)
[02:08:00] <_inky> Nov 24 22:37:17 arnet smtpd[8193]: 338bca230a335c05 smtp connected address=[::1] host=arnet.am
[02:08:00] <_inky> Nov 24 22:37:17 arnet smtpd[8193]: 338bca230a335c05 smtp disconnected reason=disconnect
[02:08:24] <_inky> by this. but the email doesn't get sent.
[02:09:13] <_inky> oh i also exposed the host. but that's ok i think.
[02:11:25] <_inky> pw chandeg, thank you for the hint.
[02:11:30] <_inky> changed*
[02:13:24] <_inky> brb
[02:15:34] <satanist> is it possible that your chango app uses smtps (direct tls session) and not starttls?
[02:18:37] <_inky> i have tls or ssl
[02:18:41] <_inky> that kind of config.
[02:18:59] <_inky> i also tried same with ssl
[02:19:01] <_inky> let me try again now.
[02:19:49] <satanist> if I understand the doc correct you should set EMAIL_USE_TLS
[02:20:29] <_inky> in django log i see
[02:20:30] <_inky> SMTP AUTH extension not supported by server.
[02:20:42] <_inky> smtplib.SMTPNotSupportedError: SMTP AUTH extension not supported by server.
[02:21:04] <_inky> yes, it was EMAIL_USE_TLS last time
[02:21:09] <_inky> now tried EMAIL_USE_SSL
[02:21:16] <_inky> minute will try with TLS again.
[02:28:34] <_inky> looks like the same: "SMTP AUTH extension not supported by server."
[02:29:52] <_inky> and in smtpd log i see
[02:30:12] <_inky> auth plain error again. i didn't manage to make sure, but it's the last, so probably it's related.
[02:30:13] <_inky> :/
[02:30:29] <_inky> i tried all combinations, i think, cannot make it work.
[02:31:01] <satanist> so simple way would be remove the username and connect to localhost port 25
[02:31:56] <satanist> or add an auth-optional to the listen on lo
[02:32:43] <satanist> for the general problem it looks like your django app tries to auth before the starttls
[02:33:52] <_inky> let me try both ways.
[02:33:54] <_inky> thank you!
[02:34:24] <_inky> remove the username or remove the password?
[02:34:49] <satanist> both
[02:36:51] <_inky> ok trying with auth-optional now. it also required tls.
[02:38:34] <_inky> SMTP AUTH extension not supported by server.
[02:38:42] <_inky> it required me to enable tls.
[02:38:46] <_inky> that's why probably.
[02:38:53] <_inky> when i added auth-optional.
[02:39:07] <_inky> trying without username/pw
[02:39:34] <_inky> and without auth-optional
[02:39:35] <satanist> on lo with port 25 you don't have tls
[02:40:22] <_inky> right now disabled again.
[02:40:40] <_inky> when i added auth-optional, it didn't restart.
[02:40:48] <_inky> smtpd required me to use tls or smtps.
[02:56:20] <_inky> i don't understand. i point it to localhost, i point it to 127.0.0.1, i only have one listener on 25 now, disabled the other.
[02:56:29] <_inky> and again SMTP AUTH extension not supported by server.
[02:56:49] <_inky> may be i have to build the server myself? i installed it via gentoo package manager.
[02:56:50] <satanist> without a username?
[02:56:55] <_inky> without yes.
[02:57:09] <_inky> i only have listen on localhost port 25
[02:57:16] <_inky> and listen on submission.
[02:57:28] <_inky> the other listen on eth0 port 25 is commented, server restarted.
[02:57:39] <satanist> acording to the django doc then there should no auth used https://docs.djangoproject.com/en/3.2/ref/settings/#std:setting-EMAIL_HOST_USER
[02:58:31] <_inky> i have defined the variables, but assigned them ""
[02:58:37] <_inky> may be i need to not even define those.
[02:58:43] <_inky> minute.
[03:01:40] <_inky> so now in django log i see this "SMTP AUTH extension not supported by server."
[03:01:44] <_inky> but in smtpd log
[03:01:53] <_inky> i just see connect and disconnect, reason=disconnect.
[03:02:05] <_inky> previously i had errors from smtpd, when i was trying tls, 587.
[03:02:24] <_inky> smtplib.SMTPNotSupportedError: SMTP AUTH extension not supported by server.
[03:02:28] <_inky> hmmmmmmm.
[03:02:40] <_inky> with my user and alpine i can send/receive emails.
[03:06:51] <satanist> can you past the output of folloing command: openssl s_client -brief -starttls smtp -connect mail.mydomain.tld:587 ?
[03:09:47] <_inky> minute
[03:12:59] <_inky> i did not notice that the domain's cert has expired, because i don't use it as web... may it be that the certificate expiration is an issue?
[03:13:02] <_inky> https://dpaste.com/5UYLAK32B
[03:17:16] <_inky> updating cert
[03:23:47] <satanist> possible
[03:29:43] *** Quits: demsh (i04yyf87t5@hermod.demsh.org) (Quit: nyaa~)
[03:29:58] <_inky> updated via zerossl: https://dpaste.com/A2T8HUPTW
[03:30:00] <_inky> now retrying.
[03:30:08] *** Joins: demsh (safdyts89g@hermod.demsh.org)
[03:30:21] *** Quits: demsh (safdyts89g@hermod.demsh.org) (Client Quit)
[03:30:23] <_inky> but i have disabled tls right now, when i did not use username and password. and i have no 'tls' in localhost port25 listen directive.
[03:30:28] <_inky> is it ok to try like that?
[03:30:40] *** Joins: demsh (swoz8jwwqe@hermod.demsh.org)
[03:32:53] <_inky> now i get AUTH PLAIN not supported by  smtpd and same SMTP AUTH extension not supported by server.
[03:32:57] <_inky> will try with password and tls.
[03:36:17] <_inky> same.
[03:36:24] <_inky> my smtpd version is opensmtpd-6.8.0_p2
[03:36:52] <_inky> but the website lists only 6.7.1p1
[03:36:56] <_inky> is it normal?
[04:53:16] *** Quits: riposte (~finalripo@2403-5802-74-2--16c3.ip6.aussiebb.net) (Ping timeout: 245 seconds)
[05:46:17] *** Quits: af (~af@awalgarg.me) (Ping timeout: 256 seconds)
[05:53:30] *** Joins: af (~af@awalgarg.me)
[06:26:47] *** Quits: jab (~jab@12.235.91.74) (Quit: Client closed)
[06:27:03] *** Joins: riposte (~finalripo@2403-5802-74-2--16c3.ip6.aussiebb.net)
[06:53:24] *** Quits: seninha_ (~seninha@user/seninha) (Quit: Leaving)
[06:53:32] *** Quits: chiselfuse (~chiselfus@user/chiselfuse) (Remote host closed the connection)
[06:53:51] *** Joins: chiselfuse (~chiselfus@user/chiselfuse)
[09:40:30] *** Joins: vit (~vit@chello085216193138.chello.sk)
[09:49:46] *** Quits: bsd4me (~bsduser@user/bsd4me) (Quit: leaving)
[12:00:40] *** Quits: mononote (~mononote@user/mononote) (Ping timeout: 260 seconds)
[13:23:01] *** Quits: fluffy (~quassel@user/fluffy) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[14:08:33] *** Joins: mononote (~mononote@user/mononote)
[15:23:56] *** Joins: seninha (~seninha@user/seninha)
[15:35:43] *** Joins: letoo (~letoo@80-167-97-210-cable.dk.customer.tdc.net)
[15:52:46] *** Quits: letoo (~letoo@80-167-97-210-cable.dk.customer.tdc.net) (Quit: letoo)
[16:07:03] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Remote host closed the connection)
[16:12:42] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[17:15:02] *** Quits: mononote (~mononote@user/mononote) (Ping timeout: 260 seconds)
[18:47:37] <_inky> ok i see, it's on github.
[18:47:40] <_inky> and has these versions.
[19:22:28] *** Joins: mononote (~mononote@user/mononote)
[19:48:55] *** Joins: LohanG_ (LohanG@LohanG.jujube.ircnow.org)
[19:49:11] *** Quits: LohanG_ (LohanG@LohanG.jujube.ircnow.org) (Remote host closed the connection)
[20:03:51] *** Joins: bsd4me (~bsduser@user/bsd4me)
[20:25:18] *** Joins: km (znc@user/km)
[21:04:33] *** dam64k is now known as dam64
[23:29:16] *** Quits: km (znc@user/km) (Remote host closed the connection)
[23:30:41] *** Joins: km (znc@user/km)
[23:43:05] *** Quits: nathanael (~nathanael@user/nathanael) (Quit: connection reset by purr)
[23:43:41] *** Joins: nathanael (~nathanael@user/nathanael)
[23:48:02] *** Quits: umaxx (~umaxx@user/umaxx) (Ping timeout: 265 seconds)
[23:49:50] *** Joins: umaxx (~umaxx@user/umaxx)
