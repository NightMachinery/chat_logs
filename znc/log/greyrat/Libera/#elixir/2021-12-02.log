[00:03:15] *** Quits: thiagoramos (~thiagoram@2804:14d:1288:9a7c:90a1:6d14:987:fc0d) ()
[00:12:02] *** Joins: srfsh (~srfsh@user/srfsh)
[00:29:58] *** Quits: phaleth (~phaleth@user/phaleth) (Quit: phaleth)
[00:40:00] *** Joins: chgr (~ek@nat-91-137-30-14.net.encoline.de)
[00:47:36] <serafeim> hello friends
[00:48:10] <serafeim> is there a way to have a good iex on windows (without using the --werl) ? 
[00:51:15] *** Quits: odoood (~odoood@pool-71-251-227-104.rcmdva.fios.verizon.net) (Ping timeout: 252 seconds)
[00:54:01] <benwilson512> serafeim: not a windows user, sorry?
[00:54:10] <benwilson512> er that should be just "sorry." lol
[01:04:46] <serafeim>  lol
[01:10:15] *** Quits: chgr (~ek@nat-91-137-30-14.net.encoline.de) (Quit: WeeChat 3.3)
[01:17:09] <OliverMT> serafeim: the answer is use WSL
[01:17:09] <OliverMT> :D
[01:17:18] <OliverMT> although the wsl tty is not very good either
[01:17:24] <OliverMT> but you can use mobaxterm or similar
[01:20:22] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[01:24:36] <rawtaz> josevalim: gotcha, thanks for clarifying. and huge kudos for taking the time to do that AoC streaming. after all it takes a lot of your time.
[01:24:53] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[01:41:06] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) ()
[01:41:25] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[01:41:29] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[01:42:02] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[01:43:52] <nickjj> i'm super looking forward to watching them too
[01:46:25] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[01:51:03] <hoppity> I am experiencing an issue with esbuild where my npm packages are not working.. such as jquery, select2 etc. My imports worked fine on webpack. Anyone knows what I might be doing wrong?
[02:09:35] <rawtaz> nickjj: are you going to do the code challenges first or just watching the stream for pleasure? :)
[02:10:04] <rawtaz> i'd like to (and need to) do them but i dont think i have time. but then thats when its so aaaaaaaaaaaawesome~~ that theyll be available afterwards too :3
[02:12:17] *** Quits: duane_ (~duane@172.58.59.213) (Ping timeout: 252 seconds)
[02:13:23] *** Quits: brauliobz (~manjaro-u@user/brauliobz) (Ping timeout: 252 seconds)
[02:22:10] *** Quits: mahmutov (~mahmutov@5.176.7.214) (Ping timeout: 256 seconds)
[02:25:49] <hoppity> I had to manually drop select2.css into my priv/static directory to get things to work. For some reason @import in my app.css does not work on esbuild as it did with webpack
[02:26:28] <hoppity> I found someone having the same issue as me and his solution helped me on the Javascript side but not on CSS:  https://elixirforum.com/t/select2-cannot-be-imported-with-phoenix-1-6/43841/4
[02:32:47] <nickjj> rawtaz, i'll 2x speed the recorded versions to passively pick up best practices and tips from the master himself
[02:33:27] <nickjj> i hope they make their way onto youtube, i don't know what twitch's policies are but i've seen VODs disappear in the past
[02:33:46] <rawtaz> lol :#
[02:35:21] <nickjj> https://help.twitch.tv/s/article/video-on-demand -- looks like non-partners have their videos deleted in 14 days and partners retain them for 60 days
[02:35:48] <rawtaz> hm. but i think the 2020 AoC videos by jose is still there on his twitch profile
[02:37:05] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[02:42:31] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[02:55:39] *** Quits: w1ntermute (~w1ntermut@dslb-002-201-217-078.002.201.pools.vodafone-ip.de) (Quit: Konversation terminated!)
[03:01:03] *** Quits: wormwood (~wormwood@142-196-016-171.res.spectrum.com) (Ping timeout: 252 seconds)
[03:10:51] *** Joins: duane_ (~duane@172.58.62.175)
[03:15:57] *** Quits: duane_ (~duane@172.58.62.175) (Ping timeout: 256 seconds)
[03:18:54] *** Joins: wormwood (~wormwood@142-196-016-171.res.spectrum.com)
[03:34:38] *** Quits: livoreno (~livoreno@user/notzmv) (Read error: Connection reset by peer)
[03:40:22] <dch> benwilson512: what do you see when running :erlang.system_info(:schedulers_online) from a fresh iex session, and can you trying bumping it upwards at runtime?
[03:41:58] <dch> benwilson512: `:erlang.system_flags(:schedulers_online, 4)` for example. this should be the same as the erts flag `+S 4` (or whatever # of cores is appropriate)
[03:42:02] *** Joins: odoood (~odoood@pool-71-251-227-104.rcmdva.fios.verizon.net)
[03:45:34] *** pflanze_ is now known as pflanze
[03:45:54] *** Quits: odoood (~odoood@pool-71-251-227-104.rcmdva.fios.verizon.net) (Client Quit)
[03:45:54] *** Quits: natrys (~natrys@user/natrys) (Quit: natrys)
[03:46:31] *** pflanze is now known as pflanze_
[03:47:01] <dch> I have a 6-core cpu where android kernel will offline 4 processors to save power, I wonder what the emulator is doing when that happens
[03:47:19] *** pflanze_ is now known as pflanze
[03:55:00] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[04:00:12] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[04:20:52] <Poeticode> hm yeah seems like I can't move to esbuild til I figure out how to do webpack's alias equivalent for it. I'll take a crack at that this weekend.
[04:21:12] <Poeticode> err esbuild's equivalent for webpack's alias
[04:22:15] *** Joins: Guest67 (~Guest67@ec2-3-235-92-145.compute-1.amazonaws.com)
[04:22:26] <nickjj> does anyone know how to get the user agent from a liveview socket in cases where the client doesn't use websockets? for example if i curl my server then the connect_info for the user agent is empty
[04:25:04] *** Quits: Guest67 (~Guest67@ec2-3-235-92-145.compute-1.amazonaws.com) (Client Quit)
[05:33:23] *** Joins: brauliobz (~manjaro-u@user/brauliobz)
[05:48:15] *** Quits: gitgood (~gitgood@85.210.185.0) (Ping timeout: 252 seconds)
[06:09:29] *** Quits: hoppity (~user@user/hoppity) (Remote host closed the connection)
[06:35:42] *** Joins: yauhsien (~yauhsien@2402:7500:5e7:7cb:2978:bff0:cda7:8559)
[07:03:03] *** Quits: wormwood (~wormwood@142-196-016-171.res.spectrum.com) (Ping timeout: 252 seconds)
[07:09:52] *** Joins: livoreno (~livoreno@user/notzmv)
[07:25:31] <benwilson512> dch: 10
[07:26:19] <benwilson512> I can bump it up but given that I seem to have difficulty keeping more than ~2 cores busy I'm not sure that setting more than 10 is gonna matter
[07:59:25] *** Quits: yauhsien (~yauhsien@2402:7500:5e7:7cb:2978:bff0:cda7:8559) (Remote host closed the connection)
[08:07:13] *** Joins: yauhsien (~yauhsien@2402:7500:5e7:7cb:b0e6:1646:3027:d258)
[08:25:45] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (Ping timeout: 265 seconds)
[08:32:31] *** Quits: yauhsien (~yauhsien@2402:7500:5e7:7cb:b0e6:1646:3027:d258) (Ping timeout: 252 seconds)
[08:35:26] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[08:43:46] *** Joins: yauhsien (~yauhsien@2402:7500:5e7:7cb:e5c8:bb31:7afd:efa5)
[08:54:04] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[08:58:47] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[09:02:41] *** Quits: dbohdan (~dbohdan@user/dbohdan) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[09:05:44] *** Joins: dbohdan (~dbohdan@user/dbohdan)
[09:11:45] *** Quits: brauliobz (~manjaro-u@user/brauliobz) (Ping timeout: 252 seconds)
[09:12:08] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[09:17:29] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[09:35:41] *** Quits: yauhsien (~yauhsien@2402:7500:5e7:7cb:e5c8:bb31:7afd:efa5) (Remote host closed the connection)
[09:48:11] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[09:55:24] *** Quits: dbohdan (~dbohdan@user/dbohdan) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[09:56:39] *** Joins: dbohdan (~dbohdan@user/dbohdan)
[10:00:36] *** Quits: dbohdan (~dbohdan@user/dbohdan) (Client Quit)
[10:00:48] *** Joins: dbohdan (~dbohdan@user/dbohdan)
[10:10:09] *** Joins: voltone (~voltone@2a02:14c:8a60:2a:2480:e9a7:75f6:5658)
[10:15:39] *** Joins: andrhua (~andrhua@31.134.187.8)
[10:18:06] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Remote host closed the connection)
[10:18:40] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[10:23:15] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[10:25:43] *** Joins: zakora (~zakora@dzd6d6yhqy025k7ptt0dt-3.rev.dnainternet.fi)
[10:36:09] *** Quits: zakora (~zakora@dzd6d6yhqy025k7ptt0dt-3.rev.dnainternet.fi) (Quit: Konversation terminated!)
[10:36:30] *** Joins: zakora (~zakora@dzd6d6yhqy025k7ptt0dt-3.rev.dnainternet.fi)
[10:56:57] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[11:01:49] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[11:08:44] *** Joins: chgr (~ek@nat-91-137-30-14.net.encoline.de)
[11:17:03] <serafeim> hello friends
[11:17:13] <serafeim> no i hate wsl
[11:17:23] <serafeim> i am really happy with my beloved cmd
[11:46:47] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[11:51:37] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[11:52:40] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[11:58:21] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[12:03:35] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[12:30:16] *** Joins: davidv7 (~davidv7@user/videogameenjoyer)
[12:31:28] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[12:32:00] <davidv7> hello, i was considering doing advent of code for the first time ever, as my first ever thing I do with elixir. Is elixir at all suitable for the kind of problems (of data transformation) in AOC? 
[12:32:02] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[12:33:01] <davidv7> functional language tells me yes, but these problems don't have much parallelism (which im told is the killer feature of elixir)
[12:36:23] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[12:37:42] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[12:37:44] *** Joins: natrys (~natrys@user/natrys)
[12:40:17] <Norrland> Yeah, Elixir is most suitable for the AoC puzzles. But no, the puzzles probably won't make use of all the strengths that elixir can offer :)
[12:41:56] <davidv7> thanks, i did some googling, and as long as I can read a file, do arithmetic operations, and loops, i'll probably be fine for most of them
[12:42:25] *** Quits: dbohdan (~dbohdan@user/dbohdan) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[12:42:52] *** Joins: dbohdan (~dbohdan@user/dbohdan)
[12:53:04] *** Quits: srfsh (~srfsh@user/srfsh) (Remote host closed the connection)
[12:54:38] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[12:59:05] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[13:04:32] <Nicd> davidv7: José is streaming AoC in Elixir, if you're interested
[13:05:06] <Nicd> https://www.twitch.tv/josevalim (though I don't know his schedule)
[13:13:17] *** Joins: srfsh (~srfsh@user/srfsh)
[13:19:54] *** Joins: wormwood (~wormwood@142-196-016-171.res.spectrum.com)
[13:25:12] *** Joins: Guest22 (~Guest22@113.190.232.80)
[13:25:36] <Guest22> hello, this is test msg
[13:25:44] <Nicd> test successful
[13:27:58] *** Quits: Guest22 (~Guest22@113.190.232.80) (Client Quit)
[13:28:10] *** Joins: Guest22 (~Guest22@27.72.104.208)
[13:28:17] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[13:28:45] <Nicd> davidv7: also the Elixir forum has threads dedicated to AoC
[13:29:01] *** Quits: Guest22 (~Guest22@27.72.104.208) (Client Quit)
[13:33:03] *** Quits: zakora (~zakora@dzd6d6yhqy025k7ptt0dt-3.rev.dnainternet.fi) (Quit: Konversation terminated!)
[13:33:07] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[13:37:00] <josevalim> nickjj: you need to list user_agent as a value in your socket specification in the endpoint
[13:37:20] <josevalim> connect_info: [:user_agent] then it should work
[13:37:44] <josevalim> davidv7: it is going to be around 16:00 / 17:00 CET, i need to figure out my agenda
[13:38:06] <josevalim> i will announce on my twitter (twitter.com/josevalim) but i can drop a message here too
[13:38:27] <josevalim> i think if you create a twitch account you can also receive notifications or something
[13:41:38] <serafeim> hey josevalim how did you decided to do the twich thing? increase elixir awareness to the public ?
[13:42:02] *** Joins: brauliobz (~manjaro-u@user/brauliobz)
[13:42:34] <serafeim> also i don't know if you've done AOC before but after some day it gets really problematic and you'll need *may* need many hours to find the solutions
[13:42:41] <josevalim> a bunch of small factors really: having fun, people said it was helpful in the past, talking about livebook, etc
[13:42:42] <serafeim> this may look bad on a live twich session
[13:42:53] <serafeim> just my 2 cents
[13:42:57] <josevalim> i did in 2018
[13:43:02] <serafeim> you did it all ? 
[13:44:02] <serafeim> i have done various years and observed that it's easy to fall upon some really hard roadblocks sometimes that can only be passed if you get external help (i.e it's either you get the idea or you can't solve it at all)
[13:44:18] <josevalim> if it is too hard, i just won't solve it, there is no shame in that
[13:44:35] <serafeim> yes i guess you're right people should understand that probably
[13:44:57] <josevalim> in 2018 i didn't do them all, but i did days 18, 20, and 25
[13:45:02] <josevalim> which are likely on the harder end
[13:45:20] <serafeim> it's not that it may be too hard, it just may be too ... how can i say it ? you either get it or you don't. like a trick querstion
[13:46:01] <josevalim> yeah, i did them in the past, but if i get stuck and no one can help, then that's life
[13:46:15] <serafeim> ah i've done half of 2018 but didn't reach these days
[13:46:47] <serafeim> yes i guess with the twich thing you may get hints from the viewers
[13:47:02] <serafeim> definitely it's a great thing for elixir community thank you!
[13:48:04] <serafeim> i tried doing 2018 in clojure and stuck on day 13 (https://github.com/spapas/aoc2018-clj/blob/master/src/aoc2018/day13.clj) ; was too difficult to do without mutations i guess
[14:14:52] <v0idpwn> chat can help, there will even be people who solved it already
[14:25:15] *** Quits: wormwood (~wormwood@142-196-016-171.res.spectrum.com) (Ping timeout: 256 seconds)
[14:40:56] <nickjj> josevalim, this is what i have and it works for a websocket connection but when i curl the server the agent comes up as empty
[14:41:38] <josevalim> weird. what happens when you set the user agent explicitly via curl?
[14:45:28] <nickjj> josevalim, connect_info is an empty map
[14:45:44] <josevalim> nickjj: so it works through the browser but not through curl?
[14:46:11] <nickjj> yes and inside of mount() i'm inspecting the socket (for debugging purposes)
[14:47:07] <nickjj> https://gist.github.com/nickjj/85106a69808da52c3ea35c341bbb40d3 , here's the "private" bits of the socket after converting the struct to a map
[14:47:52] <nickjj> and this is the result of running: curl localhost:8000/about -H "User-agent:testing"
[14:55:36] *** Joins: wormwood (~wormwood@142-196-016-171.res.spectrum.com)
[15:05:04] *** Joins: jess (~jess@libera/staff/jess)
[15:32:33] <josevalim> nickjj: weird, i cannot reproduce it here. the user agent arrived just fine
[15:32:36] <josevalim>  can you try verbose mode on curl so it posts the full headers?
[15:42:48] *** Quits: nullheroes (~nullheroe@168.235.66.22) (Quit: WeeChat 2.3)
[15:43:22] *** Quits: chgr (~ek@nat-91-137-30-14.net.encoline.de) (Quit: WeeChat 3.3)
[15:44:07] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[15:44:44] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[15:46:12] *** Joins: nullheroes (~nullheroe@168.235.66.22)
[15:52:40] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[15:57:33] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[15:59:36] <nickjj> josevalim, https://gist.github.com/nickjj/700c44379d668d2aff2f98a62681ee7a -- here's the headers
[16:00:07] <nickjj> i'm on phoenix 1.6.2 and LV 0.17.5 
[16:00:58] <nickjj> and for the Endpoint in socket /live i have: websocket: [connect_info: [:user_agent, session: @session_options]]
[16:03:08] <josevalim> nickjj: I wonder if the lack of space after : is messing it up? otherwise everything looks sane
[16:04:29] <josevalim> "zero or more request header fields (at least 1 or more headers in case of HTTP/1.1), each consisting of the case-insensitive field name, a colon, optional leading whitespace, the field value, an optional trailing whitespace and ending with a carriage return and a line feed"
[16:04:50] <josevalim> it shouldn't, the leading whitespace is optional
[16:05:03] <josevalim> curling is fine here :'(
[16:05:14] <josevalim> what is your curl version?
[16:05:44] <nickjj> i added the whitespace and it was the same result -- curl version is: curl 7.68.0 (x86_64-pc-linux-gnu) libcurl/7.68.0 OpenSSL/1.1.1f zlib/1.2.11 brotli/1.0.7 libidn2/2.2.0 libpsl/0.21.0 (+libidn2/2.2.0) libssh/0.9.3/openssl/zlib nghttp2/1.40.0 librtmp/2.3
[16:05:44] <josevalim> wait a second
[16:05:50] <josevalim> i know what is happening
[16:06:12] <josevalim> nickjj: connect_info() altogether is returning nil, right?
[16:06:52] <josevalim> that's because curl only does the dead render, get_connect_info() is documented to return something only inside websockets
[16:07:09] <josevalim> i.e. only on the live render
[16:07:20] <nickjj> i can't tell if it's empty because if i try to IO.inspect(socket, limit: :infinity) it still truncates it with ...
[16:07:42] <josevalim> IO.inspect(get_connect_info(socket))
[16:08:12] <nickjj> it's nil
[16:08:24] <josevalim> the truncation happens because the remaining fields are private, not because of the limit
[16:08:53] <josevalim> https://hexdocs.pm/phoenix_live_view/Phoenix.LiveView.html#get_connect_info/1
[16:09:07] <josevalim> "nil is returned when called in a disconnected state"
[16:10:26] <nickjj> ah, is there a path forward where i can get the user agent of a request coming from clients without websockets?
[16:10:58] <nickjj> this would be in the context of a liveview module
[16:11:57] <nickjj> the use case here was for a demo project i was logging the LV module name and user agent for each mount() call and i realized i wasn't getting any user agent for requests made with curl
[16:12:54] <nickjj> i haven't gotten to using the new on_mount and live_session things yet but a rough plan was to do this page view tracking there in 1 spot so it applies to all LV modules
[16:15:50] <josevalim> nickjj: yeah, so the reason why it was working for me is because i was running bytepack, lol
[16:16:07] <josevalim> and in bytepack we wrote this instrumentation code for plug and liveview
[16:16:53] <josevalim> https://github.com/dashbitco/bytepack_archive/blob/main/apps/bytepack_web/lib/bytepack_web/request_context.ex
[16:17:38] <josevalim> so both the connection and the socket would have a @audit_context in them, getting the information from their respective places
[16:18:56] <josevalim> perhaps there is a way to unify this but the LiveView does not know the socket it connects, so it doesn't know which connect_info it should be made available on dead render
[16:19:04] <josevalim> one option is to make all connect_info available
[16:19:34] *** Joins: zakora (~zakora@dzd6d6ydx05jj4m87rg1t-3.rev.dnainternet.fi)
[16:19:49] <nickjj> hmm
[16:20:56] <serafeim> ok let's suppose i've got an ecto schema with a string field containing a number and i want to add another integer field that will "track" the string field data. i.e when the string field gets "1" i'd like my schema to also have 1
[16:21:02] <josevalim> the other idea is for us to hide it under `get_connect_info(socket, :user_agent)`, then we can compute it based if the request is a live or a dead one
[16:21:08] <serafeim> or if my string field is nil i'd lime my int field to be nil
[16:21:31] <serafeim> i presume i should be doing this using my schema changeset. my question is how ? 
[16:22:32] <nickjj> josevalim, from an end user's POV it would be really nice if both live and dead things worked very similarly for common http attributes (all headers, etc.)
[16:23:07] <josevalim> serafeim: what did you try? :)
[16:23:24] <nickjj> but i think it may have been you in a PR or the docs that said loading up the socket with the deluxe version of connect_info is questionable because it contains a lot of information that will be sent over the socket
[16:23:49] <josevalim> nickjj: i mean, that's why we prune it. the info is only available on mount
[16:23:56] <josevalim> the concern about making this consistent is two:
[16:24:11] <josevalim> ohhhhhhh, ignore me. yes, i see what you mean
[16:24:16] <josevalim> yes, you can't have all information available on socket
[16:24:24] <serafeim> i tried data |> cast (attrs, fields) |> put_change() but then i was lost because i didn't know how to get the current change from the changeset
[16:24:38] <josevalim> otherwise people can use it to DDoS you faster
[16:24:47] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[16:24:52] <josevalim> serafeim: get_change/get_field in Ecto.Changeset!
[16:25:12] <josevalim> nickjj: so the challenge is exactly that in the dead render you will have all information but in the live render some information
[16:25:23] <josevalim> but i think that's better than having zero information and then some information
[16:25:42] <nickjj> and the dead render info is only provided to you once on mount?
[16:25:52] <josevalim> yes, but dead render only calls mount anyway
[16:25:57] <serafeim> so i'll first build the changeset and then i'll do `changeset |> put_change(:int_value, get_change(changeset, :str_value)`  ?
[16:26:14] <serafeim> i'm missing one parenthesis
[16:26:16] <josevalim> cast the changeset and assign it to var, then get+put  accordingly, yes
[16:26:22] <serafeim> ah all right thank you
[16:26:28] <josevalim> yw :)
[16:26:35] <josevalim> nickjj: definitely easy to tackle
[16:26:40] <nickjj> is what your describing a potential new feature of LV that builds in something similar to what you did with bytepack?
[16:27:05] <josevalim> not really, i am just thinking about having all information in get_connect_info, even on dead render
[16:27:27] <josevalim> but if you have any plug pages, then you want the connection specific code too
[16:27:39] <nickjj> would it be something that's opt-in with a config option and possibly even overridable for each LV mount?
[16:27:41] <josevalim> unless we indeed provide a set of functions that work on both conn and socket equally
[16:27:46] *** Quits: zakora (~zakora@dzd6d6ydx05jj4m87rg1t-3.rev.dnainternet.fi) (Quit: Konversation terminated!)
[16:28:57] <nickjj> i don't know what it would be like to build a large LV yet but i was estimating having a bunch of different live view modules and then moving between them with live_redirect
[16:29:08] <nickjj> which i think means mount will get called on every transition then?
[16:29:11] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[16:29:56] <josevalim> yes
[16:30:02] <josevalim> but that should not be a problem
[16:30:11] <josevalim> do you have a concern?
[16:30:40] <josevalim> and I would say you would want to instrument/log each of those mounts as if they were a regular page load
[16:30:47] <nickjj> nope, no concern
[16:31:05] <josevalim> and you have the tools to do that, the only thing that is missing is instrumenting the dead render, your live renders will always get instrumented via connect_info
[16:31:26] <nickjj> i was just thinking of a case where a bunch of those mounts wouldn't be accessible without being authenticated and likely using a websocket compatible client
[16:32:03] <josevalim> right, the connect_info chunk wouldn't be logged unless we unify or you do the bytepack code, agreed.
[16:32:20] *** Joins: Ilyu (~quassel@78.202.228.230)
[16:32:24] <josevalim> at the same time, if it is any comfort, whatever you are using above you (paas, web server, etc) is likely logging those anyway
[16:32:30] <josevalim> but having it unified would be a +1
[16:33:18] <josevalim> those = dead renders
[16:33:27] <nickjj> user agent and a referrer header are interesting because those tend to be things you might log into your db
[16:33:50] <nickjj> for application level features
[16:35:04] <nickjj> the page view tracking thing is honestly something i would outsource to a tool like plausible or at the load balancer level -- i only built it into this demo app because i wanted to demo presence and tracking page views, along with a few other LV features of broadcasting events
[16:35:19] <josevalim> i can see user agent, but what would do with referrer?
[16:36:14] <nickjj> for ecommerce it might be nice to see at a glance how someone arrived at your product's landing page -- i know it's not super dependable and shouldn't be used for anything important (like payouts), but it works most of the time just to see where someone came from
[16:38:45] <nickjj> another app level feature that would be really important is X headers, but i think this works already?
[16:39:07] <nickjj> for example your web server or load balancer might do country code detection and your app would read from that header to maybe show a better price for folks in brazil
[16:40:37] *** Quits: andrhua (~andrhua@31.134.187.8) (Ping timeout: 256 seconds)
[16:40:47] <serafeim> hello related to my problem before here's my chagneset: https://dpaste.org/OUVL
[16:42:54] <serafeim> the thing is that if I do something like `Data.changeset(a, %{limit: "22"}) |> Repo.update` it will update both my limit and limit_int values (works nice)
[16:43:35] <serafeim> however if i do `Data.changeset(a, %{test: "22"}) |> Repo.update` it will updat *both* `test` (to 22) and the `limit_int` value (to 0)
[16:43:37] <serafeim> why ? 
[16:44:31] <serafeim> it seems that the get_change(changeset, :limit) != nil returns always true even if i don't add a change for limit
[16:44:36] <Nicd> did you look at what `get_change` returns in that case?
[16:45:20] <serafeim> no but shouldnt' it return nil ? 
[16:45:43] <Nicd> maybe checking it could give you a hint
[16:46:05] <serafeim> and yes it actually returns nil !!!
[16:46:54] <Nicd> then it's not going to your if clause
[16:47:13] <serafeim> i can't understand really
[16:49:31] *** Joins: gitgood (~gitgood@85.210.185.0)
[16:51:22] <serafeim> oh nos
[16:51:27] <serafeim> i found out what happend
[16:51:28] <serafeim> and it was all me
[16:51:33] *** Quits: brauliobz (~manjaro-u@user/brauliobz) (Ping timeout: 252 seconds)
[16:52:03] <serafeim> i was running `Data.changeset(a, %{limit: "22"}) |> Repo.update` from iex. and then `Data.changeset(a, %{test: "22"}) |> Repo.update` ... and then again `Data.changeset(a, %{limit: "22"}) |> Repo.update`
[16:52:15] <serafeim> the thing is that a *was never updated* so it always had the same old values
[16:52:30] <serafeim> when i run {:ok, a } =Data.changeset(a, %{limit: "22"}) |> Repo.update it magically worked :|
[16:54:44] *** Joins: trafficjam (~trafficja@2001:ac8:28:91::a13e)
[17:01:11] *** Joins: Bounga (~nico@82-65-32-175.subs.proxad.net)
[17:07:00] *** Joins: brauliobz (~manjaro-u@user/brauliobz)
[17:10:23] <v0idpwn> Strange behaviour for Elixir in hexdocs: side menu shows normally for 1.13.0-rc.0, but doesn't work for 1.13.0-rc.1: https://hexdocs.pm/elixir/1.13.0-rc.1/
[17:10:57] <v0idpwn> is this expected? o.O
[17:16:35] *** Joins: chgr (~ek@nat-91-137-30-14.net.encoline.de)
[17:39:40] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:b4e0:9d38:46ba:cc41)
[17:41:46] <DNH> I have an umbrella app with the following apps: [core, fixture]. Now in fixture I define some models etc for tests while core contains the core logic. It does not depend on anything, in fact I defined `xref` in the `mix.exs` of `fixture` as it will always be used with other apps and hence the deps will exist. Core depends on fixture and contains all the schemas. 
[17:42:06] <DNH> If I compile from the root everything works fine, then I can go into apps/core and run mix test 
[17:43:03] <DNH> but if I compile from within core I get an error saying that some modules are not defined in fixture (which are defined in core) and gives me a warning about circular imports. 
[17:43:28] <DNH> Any idea why it would work compiling from root but doesn't when I compile from within the apps after I changed something in fixture?
[17:45:31] *** Quits: trafficjam (~trafficja@2001:ac8:28:91::a13e) (Quit: Client closed)
[17:46:25] <DNH> Hmm actually now after running mix clean from root I get the same warning in root as well, interesting
[17:49:54] <DNH> Oh I think I found the issue
[17:51:07] <DNH> Doing %User{} |> struct!(attributes) is causing this but if I do  struct(User, m) where m is the map with the fields it works fine 
[17:53:48] <v0idpwn> DNH: `%Foo{}` is a compile-time dependency on module `Foo`. `Foo` is not
[17:54:22] <DNH> Yeah thought so now as well, thanks for confirming! :) 
[18:01:13] <josevalim> v0idpwn: deifnitely a bug
[18:02:08] <josevalim> v0idpwn: main is good, so most likely a hiccup somewhere
[18:07:37] <rawtaz> josevalim: did you settle on 5 PM as per the poll result?
[18:07:45] <josevalim> yes, announcing now
[18:07:50] <rawtaz> cheers
[18:10:24] *** Joins: vancha112[m] (~vancha@2001:470:69fc:105::3473)
[18:27:37] <josevalim> v0idpwn: to clarify, %Foo{} is an export dependency on foo. it is recompiled only if the Foo API changes
[18:28:19] <v0idpwn> oh, is this why it works if compilation isn't clean?
[18:29:19] *** Quits: chgr (~ek@nat-91-137-30-14.net.encoline.de) (Quit: WeeChat 3.3)
[18:45:30] <vancha112[m]> anyone that's not working on the advent of code mind helping me out with this little snippet? :) I tried to loop through a list recursively using the following code but for some reason i can't figure out how to do a simple if statement inside a function definition:
[18:45:49] * vancha112[m] sent a code block: https://libera.ems.host/_matrix/media/r0/download/libera.chat/0aac06bd4ea7cd02475485fa4bf8083198c69ffd
[18:46:13] <vancha112[m]>  * ```defmodule Length do... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/41012ab08c5ca3351f10b552c5be855c59d1cb9d)
[18:46:57] <vancha112[m]> there's a "when" inside there, that i would really like to turn into an "if" with an "else" in case the condition doesn't match. 
[18:47:53] <vancha112[m]>  * ```... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/50e4907394362c94a9b59eecd6db804f397d2311)
[18:48:12] <vancha112[m]>  * ```... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/9c0fc09a809a431bd49eaff5182f7506591b4952)
[18:53:39] <vancha112[m]> I hope the code is behind a spoiler warning otherwise something went wrong with my message..
[19:01:06] *** Joins: phaleth (~phaleth@user/phaleth)
[19:05:04] <benwilson512> vancha112[m]: yeah that didn't come through super well
[19:05:35] <vancha112[m]> Did i mess up the formatting too?
[19:05:45] <benwilson512> uh in my client this is what I see
[19:06:04] <benwilson512> https://usercontent.irccloud-cdn.com/file/Ai2pBFC1/image.png
[19:06:20] <benwilson512> maybe make a gist of what you intended to send?
[19:07:44] <vancha112[m]> oh i see.. it's the matrix bridge being annoying.
[19:07:49] <vancha112[m]> I'll try that
[19:08:26] <vancha112[m]> would a pastebin link work? or is a gist something different
[19:09:21] <vancha112[m]> https://pastebin.com/SgVt6Lhy otherwise this is what i meant to send :)
[19:12:52] <benwilson512> sweet
[19:13:12] <benwilson512> so where are you trying to do the if?
[19:13:38] <vancha112[m]> i replaced the when with if, but if i do, it's not longer a valid program
[19:13:54] *** Joins: duane_ (~duane@172.58.59.58)
[19:14:38] <vancha112[m]> basically what i wanted to do is instead of `when a < b do `, I wanted `if a < b do '. 
[19:15:41] <benwilson512> gotcha
[19:15:46] <benwilson512> can you show what you tried with the `if` ?
[19:16:07] <benwilson512> also, what should happen if `a` is not less than `b` ?
[19:16:17] <benwilson512> the current pastebin will just error
[19:16:25] <vancha112[m]> sure i'll send a complete but broken version :)
[19:17:11] <vancha112[m]> this is what i actually wanted but doesn't work: https://pastebin.com/kUJaDanV
[19:17:34] <benwilson512> https://www.irccloud.com/pastebin/PuRshQIe/
[19:17:44] <benwilson512> you're very close, you just gotta move the `if` inside the actual function block
[19:18:26] <vancha112[m]> so should i insert a line break before the word "if"
[19:18:35] <benwilson512> more than that
[19:18:41] <benwilson512> notice how `def of([a, b | tail]) do` is a full `def do` pair
[19:18:59] <benwilson512> `when` is special in that it defines what is called a "guard clause" and actually belongs between `def` and `do`
[19:19:22] <benwilson512> `if` however is just like your regular code it belongs between the `do` and `end` part of a function
[19:23:20] <vancha112[m]> i have a lot of trouble grasping the syntax for this. I interpret this as that if does need to be prepended with a do, when i try that however, i keep getting a response that says i have an "end" too many that doesn't have a matching do.
[19:25:06] <vancha112[m]> https://pastebin.com/x0gCHwWH this keeps telling me `HINT: it looks like the "end" on line 9 does not have a matching "do" defined before it
[19:25:06] <vancha112[m]> `
[19:59:39] *** Quits: livoreno (~livoreno@user/notzmv) (Ping timeout: 252 seconds)
[20:01:32] *** Joins: notapenguin (~ryu@2804:14d:5680:8a2c:75cf:7f59:516a:b801)
[20:02:41] *** Quits: notapenguin (~ryu@2804:14d:5680:8a2c:75cf:7f59:516a:b801) (Client Quit)
[20:02:57] *** Quits: Ilyu (~quassel@78.202.228.230) (Ping timeout: 252 seconds)
[20:05:06] *** Joins: Ilyu (~quassel@78.202.228.230)
[20:08:29] *** Joins: Guest41 (~Guest41@163.5.2.51)
[20:08:33] <Guest41> Salut
[20:09:14] <rawtaz> loo
[20:09:23] *** Quits: Guest41 (~Guest41@163.5.2.51) (Client Quit)
[20:09:34] <benwilson512> vancha112[m]: you've added `, do:`
[20:09:39] <benwilson512> I'm not sure I understand why
[20:10:00] <benwilson512> let's take a quick step back
[20:10:20] <benwilson512> the `def of([a]), do: 0` form is really only used if you can express the full function as a single line. if you need mulitple lines, instead use this form
[20:10:32] <benwilson512> https://www.irccloud.com/pastebin/DXgZ0B6m/
[20:10:39] <benwilson512> notice how there is no `,` and it's `do` instead of `do:
[20:11:06] <benwilson512> `do end` supports multiple internal lines
[20:11:08] <benwilson512> https://www.irccloud.com/pastebin/MKRs0rEX/
[20:11:34] <benwilson512> there is a form of `if` that supports `do:` and `else:` but if you're getting confused just forget about that and use the regular multi line forms in each case
[20:11:34] <benwilson512> eg
[20:12:02] <benwilson512> https://www.irccloud.com/pastebin/LtuoWeKo/
[20:13:07] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[20:15:42] *** Joins: livoreno (~livoreno@user/notzmv)
[20:19:12] <vancha112[m]> Thank you, I'll try that!
[20:26:52] *** Quits: Ilyu (~quassel@78.202.228.230) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[20:32:32] *** Joins: mahmutov (~mahmutov@5.176.7.214)
[20:37:32] *** Joins: andrhua (~andrhua@31.134.187.8)
[20:38:34] *** Quits: DNH (~DNH@2a02:8108:1100:16d8:b4e0:9d38:46ba:cc41) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:45:26] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[20:56:22] *** Joins: DNH (~DNH@2a02:8108:1100:16d8:b4e0:9d38:46ba:cc41)
[21:05:55] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[21:06:28] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[21:07:30] *** Joins: mgibowsk_ (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[21:07:30] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Read error: Connection reset by peer)
[21:08:12] *** Quits: mgibowsk_ (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Remote host closed the connection)
[21:08:45] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[21:13:11] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[21:39:18] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[21:44:31] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[21:45:35] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Read error: Connection reset by peer)
[21:50:58] <davidv7> I hate to be the beginner being annoying on IRC, but I really am struggling with the fact that IO.puts() seems to not be outputting anything unless I'm in iex. Everything beginner oriented seems to be invested heavily into the iex, so I can't find the solution
[21:51:37] <davidv7> nvm got it working
[21:53:59] *** Quits: Bounga (~nico@82-65-32-175.subs.proxad.net) (Ping timeout: 256 seconds)
[21:54:40] <phaleth> davidv7: in cases where puts() doesn't work then try inspect()
[21:56:41] <rawtaz> dont worry mate
[21:57:04] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[21:57:47] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Remote host closed the connection)
[21:58:21] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[22:00:08] *** Quits: hwrd (aa272caead@2604:bf00:561:2000::137) (Remote host closed the connection)
[22:01:14] *** Joins: hwrd (aa272caead@2604:bf00:561:2000::137)
[22:02:29] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[22:02:51] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[22:03:37] <benwilson512> davidv7: what was the issue?
[22:03:53] <davidv7> no idea, it just randomly started working
[22:04:02] <vancha112[m]> benwilson512:  Thanks a lot, that helped me get the if statement working ^ ^  I still have an error that it skips over every other character but i hope to be able to solve that ^ ^ 
[22:04:18] <benwilson512> vancha112[m]: you're welcome! I do have a theory about that bug
[22:04:24] <davidv7> i am just gluing functions based on docs for now, but this is pretty fun
[22:04:42] <benwilson512> I don't know what the challenge is, but it's important to note that when you do `[a, b | tail]` `of(tail)` that `tail` is missing BOTH a and b
[22:04:47] <vancha112[m]> benwilson512: I take two, and then use the tail for the next iteration :)
[22:04:59] <benwilson512> maybe you should be doing ` [a, b | tail]` `of([b | tail])` ?
[22:05:18] <vancha112[m]> thanks ;)
[22:08:28] <vancha112[m]> works like a charm. 
[22:08:51] <benwilson512> woot!
[22:16:25] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:21:49] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[22:26:17] <davidv7> can i include modules from lib/test.ex without using a build tool such as mix?
[22:34:37] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:37:44] *** Joins: hwrd-test (~hahuang65@104-50-0-249.lightspeed.sntcca.sbcglobal.net)
[22:39:53] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[22:40:59] *** Quits: hwrd-test (~hahuang65@104-50-0-249.lightspeed.sntcca.sbcglobal.net) (Quit: WeeChat 3.3)
[22:41:14] *** Joins: hwrd-test (~hahuang65@104-50-0-249.lightspeed.sntcca.sbcglobal.net)
[22:52:48] *** Joins: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net)
[22:54:36] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[22:56:58] *** Joins: notapenguin (~ryu@179.222.254.137)
[22:58:13] *** Quits: mgibowski (~mgibowski@50.red-83-63-128.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[22:59:09] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 256 seconds)
[23:12:29] *** Quits: hwrd-test (~hahuang65@104-50-0-249.lightspeed.sntcca.sbcglobal.net) (Quit: WeeChat 3.3)
[23:24:12] <davidv7> first AOC done!
[23:30:11] <rawtaz> nice!
[23:30:16] <rawtaz> now you're an elixir prooo
[23:31:33] *** Quits: notapenguin (~ryu@179.222.254.137) (Quit: WeeChat 3.3)
[23:35:49] *** Joins: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net)
[23:40:18] <serafeim> what's `of` ? i haven't ever heard of that
[23:40:23] *** Quits: yauhsien (~yauhsien@61-231-22-20.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[23:52:03] <rawtaz> context?
[23:55:00] <serafeim> oh well
[23:59:06] <benwilson512> serafeim: it's the function he wrote
