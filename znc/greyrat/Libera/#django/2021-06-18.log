[00:01:57] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[00:06:40] <zamba> do i need to use forms.py if i want to make a small adjustment to one of the form fields?
[00:06:43] <zamba> i'm using CBV
[00:06:54] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 264 seconds)
[00:07:37] *** Quits: gillzon (~gillzon@2-249-139-174-no288.tbcn.telia.com) (Quit: Leaving)
[00:07:45] <zamba> right now i've gotten away with just using createview and model and fields
[00:12:46] <rpkilby> zamba, you could override CreateView.get_form_class or CreateView.get_form to make minor modifications, but at a certain point it would be more straight forward to declare the form class directly
[00:14:49] <zamba> rpkilby: ah, ok :)
[00:15:17] <zamba> i have a select box to select different users from a database.. this works fine.. but if i want to quickly add a new entry to the database..?
[00:15:23] <zamba> what is the django way of doing that?
[00:15:32] <zamba> as quick and simple as possible?
[00:16:20] <rpkilby> quickly add a new entry? A new user.. or whatever this model is?
[00:18:26] <rpkilby> and quick how? e.g., the most direct way would be to run the django shell, import your model, then create the instance directly. If you mean via some kind of web UI, then possibly the fasted approach might be to hook up the django admin site, stub out an admin for your model, and create an object that way.
[00:21:53] *** Quits: moonwhisper (~tyler.lub@99-152-114-229.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 272 seconds)
[00:22:50] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[00:23:04] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[00:24:33] *** Joins: LuxuryMode (uid91005@id-91005.charlton.irccloud.com)
[00:24:51] <zamba> rpkilby: no, i mean for the web user.. the user can select a user from a select box.. but if the name is not present, then they need to add that to the database
[00:25:02] <LuxuryMode> I've seen people add context processors in order to expose certain env vars so they can be used in templates. Is this necessary? Is there not a way to access settings in a template, perhaps by adding it to the context?
[00:25:35] *** Joins: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:5642:78c3:490c:d48)
[00:25:38] *** Quits: rowbots (~dirgeable@h69-129-115-197.arvdco.broadband.dynamic.tds.net) (Remote host closed the connection)
[00:25:41] <LuxuryMode> I simply want to access `settings.ENVIRONMENT` in a template.
[00:26:01] *** Joins: rowbots (~dirgeable@h69-129-115-197.arvdco.broadband.dynamic.tds.net)
[00:26:47] <rpkilby> LuxuryMode, if you want it accessible in all templates, than a context processor is probably the most straightforward way. Otherwise, your View class would have to add it to its context explicitly
[00:27:17] <LuxuryMode> Right and I thought adding to context explicitly was more Django-esque and cleaner, but I don't have any basis for thinking that
[00:28:52] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[00:31:39] <zamba> how can i pass a variable into a modelform in forms.py?
[00:32:01] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[00:32:15] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[00:34:04] <rpkilby> zamba, I don't think there is an easy solution here to do the select or create workflow. The django admin has this feature, but the way it works is that it would open the user create form in a pop up window, then on successful submit, add that user to the dropdown
[00:34:08] <rpkilby> but this is all using a bit of JS
[00:34:46] <zamba> ah, ok
[00:35:48] <rpkilby> re: variable passing, look for examples on stack overflow, but the short version is that your form would need to add the variable as an argument in its __init__ method. Then the view's get_form_kwargs would need to include that variable
[00:35:49] <rpkilby> http://ccbv.co.uk/projects/Django/3.1/django.views.generic.edit/FormView/#get_form_kwargs
[00:36:20] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[00:36:20] <rpkilby> also, ccbv.co.uk is a really great resource for all the builtin CBVs
[00:36:35] <moldy> zamba: you can override the form's __init__()
[00:36:36] *** Joins: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net)
[00:36:45] <moldy> zamba: what do you want to achieve?
[00:36:46] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Ping timeout: 250 seconds)
[00:37:06] <zamba> moldy: i need to get an id from the url into the form
[00:37:19] <zamba> basically limiting the queryset for a select
[00:37:41] <rannnn8888> What is less heavy to load on a data site via AJAX and JSoN BAKEND or HTMX?
[00:37:50] <moldy> zamba: if i understand your case correctly, the easiest thing might be to generate the form dynamically
[00:38:01] <zamba> moldy: what do you mean?
[00:38:06] <moldy> zamba: is this for a ModelChoiceField?
[00:38:27] <zamba> moldy: well, it's a CBV, so most of the stuff is generated automatically for me
[00:38:41] <moldy> zamba: that doesn't matter probably
[00:38:59] <zamba> so right now i only have class Meta: model = Registration ; fields = ("run", "runner", "startnumber")
[00:39:13] <moldy> show us the form and tell us where / why you need the id / queryset
[00:39:15] <zamba> and then i have overridden __init__ to then try and modify the run field
[00:39:35] <zamba> https://dpaste.org/wdYq
[00:39:44] <zamba> the problem is line 11
[00:39:52] <zamba> since i'm not able to access self.event
[00:40:56] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 252 seconds)
[00:42:50] <teut>    <button class="btn btn-dark" formaction="{% url 'adminuser:print-report' 'general' %}?page={{ page_obj.next_page_number }}">next</button>
[00:42:51] <teut>          https://dpaste.org/NYcV   https://dpaste.com/7ZPG893EG
[00:42:54] <moldy> zamba: something like this: https://dpaste.org/8KOr
[00:42:59] <rpkilby> zamba, you should add `event` as an argument to your `__init__` method's signature, then use CreateView.get_form_kwargs to pass the event to the form
[00:43:06] <teut> I m getting noreverse matched, can someone help?
[00:43:35] *** Quits: zcheng3 (~zcheng3@d198-53-38-251.abhsia.telus.net) (Ping timeout: 244 seconds)
[00:43:56] <teut> oops mb
[00:44:06] <zamba> rpkilby: i'm sure that is the best way of doing it, but what you're saying isn't making much sense :)
[00:44:13] <zamba> moldy: is this all inside forms.py?
[00:44:24] <moldy> zamba: no, that would be in views.py
[00:45:16] <moldy> but you can put the code from get_form_class() into a function, put that in forms.py, and call it from the view
[00:45:33] <teut> https://dpaste.com/FAHH489XD   now it should have been correct
[00:45:41] <teut> but it gave error agai
[00:45:43] <teut> n
[00:45:59] <zamba> moldy: hm.. i prefer to have the form stuff inside forms.py, yeah
[00:46:20] *** Quits: Crovax31 (~quassel@2a01:e0a:85:33d0:d86b:82fc:cfdd:e54a) (Ping timeout: 268 seconds)
[00:46:24] <zamba> but there's no way of doing it with less code and just relying on the CBV to do its magic?
[00:48:12] <moldy> the CBV still does its magic :)
[00:48:21] <moldy> i don't think there is a solution with significantly less code
[00:48:44] <rpkilby> zamba, something like...
[00:48:44] <rpkilby> https://dpaste.org/Aait/slim
[00:49:26] <moldy> zamba: it's 3 lines more than your paste ;)
[00:50:01] <moldy> rpkilby: the problem with that is that you have to be sure that patching .queryset on the field at that point in time does what you need
[00:50:14] <moldy> (that may or may not be the case, i don't know)
[00:50:53] <moldy> it's in principle possible that the field does something with `queryset` on __init__() and your code comes too late
[00:50:59] <zamba> https://dpaste.org/EMV5
[00:51:01] <zamba> i solved it like this
[00:51:23] <moldy> zamba: huh, looks dangerous
[00:51:34] <moldy> you're ignoring all kwargs except event
[00:51:44] <rpkilby> Yeah, that wouldn't work
[00:52:04] <moldy> you could do this with kwargs.pop()
[00:52:15] <rpkilby> zamba, don't pass via kwargs - add an explicit argument to the signature
[00:52:16] <moldy> but, for the reason i mentioned above, i recommend the approach from my paste
[00:52:57] <rpkilby> moldy, I'm pretty sure passing via init args is the preferred method, no? otherwise you're creating a new form class on every single reques.
[00:53:05] <rpkilby> which is probably not that expensive, but seemingly unnecessary
[00:54:09] <rannnn8888> hi some one can help how i can add more db to django :D  ?
[00:54:29] <zamba> rpkilby: ah! that works
[00:54:39] <zamba> rpkilby: thanks!
[00:55:10] <rpkilby> np. Just sitting around twiddling my thumbs while this code runs :)
[00:56:06] <teut> Uploaded file: https://uploads.kiwiirc.com/files/0a2eaae92b29e8a7e1c00bcaeea8c5db/pasted.txt
[00:56:10] <moldy> rpkilby: creating a new form class on each request is no problem, afaict
[00:56:21] <teut> how to clean up this get method ?
[00:56:26] <moldy> rpkilby: i mentioned above why your approach is problematic, IMO
[00:56:35] <teut> by moving these if else check in dispatch maybe?
[00:56:50] <moldy> rpkilby: you're making an assumption about ModelChoiceField that may not hold.
[00:57:13] <moldy> the documentation for ModelChoiceField does not say that you are allowed to modify the .queryset attribute and expect it to work
[00:57:14] <rpkilby> iirc, it's not an issue with the builtin fields. the queryset/choices are written to accept updates
[00:57:34] <moldy> i remember that i ran into problems with this, but i don't remember the exact situation
[00:58:00] <rpkilby> although you're correct that a custom field could behave incorrectly. but we know that they're using the default field types
[00:58:26] <rpkilby> idk, maybe older versions of Django didn't handle this correctly? I haven't had an issue with it for a while.
[00:58:41] <moldy> in the case of ModelChoiceField, this will work, as far as i can tell from a quick look at the code
[00:58:58] <moldy> but i'd consider it an implementation detail and not part of the documented API
[00:59:01] <rpkilby> yep, and we know they are using that field, since they were previously just using modelform defaults
[00:59:14] <moldy> so in principle it could break on the next django update ;)
[00:59:41] <rpkilby> https://docs.djangoproject.com/en/3.2/topics/forms/modelforms/#changing-the-queryset
[00:59:53] <rpkilby> oops, formset
[01:03:01] <rpkilby> idk, I highly doubt they would ever break this without an exceptionally good reason. If you search for this quesion, there are a plethora of answers that use exactly this solution.
[01:04:50] <moldy> you're probably right that django wouldn't break this without a good reason
[01:05:05] *** Quits: schinckel (uid38120@id-38120.charlton.irccloud.com) (*.net *.split)
[01:05:16] <moldy> i also consider my version more readable, but that's arguably a matter of taste
[01:06:59] <rpkilby> ¯\_(ツ)_/¯
[01:07:00] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[01:07:07] <rpkilby> :)
[01:07:37] <moldy> i vaguely remember that there are some cases where you have to customize before super().__init__() and some where you have to do it afterwards, but i forgot the details
[01:07:53] <rannnn8888> i try use multi db i need add this like this ? https://dpaste.org/vxff
[01:08:36] <teut> does django has a Null pattern of model object?
[01:08:36] <moldy> rannnn8888: that part looks ok to me. you probably also want to use a database router
[01:08:47] <moldy> teut: what's a Null pattern?
[01:09:00] <teut> its an object which does nothing
[01:09:25] <moldy> what does "do nothing" mean for a model?
[01:10:20] <teut> do nothing means that I won't   have to perform  checks for existence of properties
[01:11:02] <rannnn8888> moldy what the  database router make ?
[01:11:22] <moldy> rannnn8888: https://docs.djangoproject.com/en/3.2/topics/db/multi-db/#automatic-database-routing
[01:12:04] <moldy> teut: sorry, i don't understand what you want to achieve here. maybe an example would help.
[01:12:34] <teut> https://en.wikipedia.org/wiki/Null_object_pattern
[01:13:38] <teut> Uploaded file: https://uploads.kiwiirc.com/files/cf86d2154c10e05a76829094af054e4a/pasted.txt
[01:13:50] <teut> like I have the following function on my User model
[01:14:07] <teut> now I would have to perform Null checks everywhere
[01:15:40] *** Quits: wattux (~wattux@2a02:810a:1140:4b6c::f428) (Quit: Client closed)
[01:16:19] <moldy> there's nothing in django that helps you here, afaik
[01:17:27] <moldy> it looks like you're implementing polymorphic models, or something close to them
[01:17:57] <teut> ya, I m trying to make my code cleaner
[01:18:09] <rpkilby> teut: maybe look at https://django-model-utils.readthedocs.io/en/latest/managers.html#inheritancemanager
[01:18:44] <rpkilby> The InheritanceManager allows you to downcast your queryset whenever you have a multitable inheritance setup
[01:19:21] <teut> wow, thats great
[01:19:36] <rpkilby> e.g., if you had a FooUser(User) and a BarUser(User), User.objects.select_subclasses() would get you a queryset of FooUsers and BarUsers
[01:19:48] <rpkilby> note that this adds additional queries
[01:19:53] <rpkilby> so you should limit use w/ pagination
[01:20:01] <teut> where do you get references about these packages from , pycon?
[01:20:13] <rpkilby> a decade of Django
[01:20:28] <rpkilby> pycon, googling, irc
[01:20:44] <teut> '=D   , then  I require another 8 years
[01:20:51] <teut> to learn all this
[01:21:50] <teut> thanks for the resource
[01:21:56] <rpkilby> keep in mind that it can still be a pain to use that manager. e.g., a queryset of multiple types would be incompatible with a lot of code. especially the more those two types diverge
[01:22:39] <rpkilby> you can also discover a lot of packages on https://djangopackages.org/, although idk how current it is
[01:23:26] <teut> sure I can discover packages but some  well defined keywords are required to search which I dont have sorry
[01:23:53] <rpkilby> true, it can be hard to figure out what question to even ask
[01:24:20] <teut> yes , its very hard to convert mental image to words
[01:24:46] <moldy> a snowball approach can work
[01:25:00] <moldy> google your problem, pick up terms related to it, google them :)
[01:26:00] <teut> yes , thats we can only do, works most of the time
[01:26:11] <teut> thats only we can do*
[01:27:39] *** Joins: GinFuyou (~GinFuyou@reya.cloud.tilaa.com)
[01:28:16] <rannnn8888> moldy its k like this ? setting.py  : https://dpaste.org/f5bE database_router.py : https://dpaste.org/rNhq
[01:33:02] <teut> Uploaded file: https://uploads.kiwiirc.com/files/4a517e5117eab212a2012b4329160c9b/pasted.txt
[01:33:15] <teut> rpkilby  , what to do in such situation?
[01:35:56] *** Joins: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it)
[01:43:39] *** Joins: elena (~elena@202-153-212-80.ca99d4.syd.static.aussiebb.net)
[01:43:41] <rpkilby> teut: what's the problem/situation? In this case, there is no multi table inheritance
[01:44:03] <rpkilby> your User class is inheriting from an abstract user model, which does not have a table. It's intended to be extended into a concrete model
[01:44:37] <teut> Admin(User) , Employee(User)  is there
[01:46:01] <teut> so I m using an  AbstractUser with personal Manager and  then there is multi-table inheritance
[01:46:16] <teut> also
[01:46:22] <rpkilby> teut: I think you sent the wrong paste. There is no Admin or Employee in that upload
[01:46:54] <teut> Uploaded file: https://uploads.kiwiirc.com/files/c60a888ceafcf28fc3cc381b318a2384/pasted.txt
[01:47:09] <rpkilby> rannnn8888: your router looks incorrect. it would disable all relations/FKs
[01:47:19] <teut> no I sent the right paste, I was just teeling you that I cant overwrite my manager
[01:47:33] <rpkilby> ah
[01:47:47] <rpkilby> teut: why can't use subclass?
[01:48:02] <rpkilby> e.g., MyManager(UserManager, InheritanceManager): pass
[01:48:11] <teut> is that ok?
[01:48:20] <teut> will that be ok?*
[01:48:28] <rannnn8888> rpkilby mybe You have a link to basic :d ?
[01:48:30] <teut> I mean I dont know the aftermaths
[01:49:13] <rpkilby> teut: you should look at the source for both managers to ensure there aren't conflicts, but they should safe to combine via a subclass.
[01:49:32] <rpkilby> you would get the methods/attributes of both, per normal Python class inheritance
[01:49:40] <teut> yes, I was expecting that to be told to me
[01:50:09] <teut> I m not so good at understanding django source code yet
[01:50:35] <teut> there are python constructs that I have never used
[01:50:54] <teut> and use  of type()  with three arguments , I have never used that
[01:51:09] <rpkilby> right, you wouldn't necessarily need to completely understand, but just... check that methods or attributes don't overwrite each other, or that a method correctly calls super()
[01:51:23] <teut> ok , I can check that much
[01:52:03] <rpkilby> yeah, this is more like a basic Python sanity check of "are these two things safe to subclass together" and less anything specific to do with django/the ORM
[01:52:26] <teut> to be true ,  I have rarely used classes in Python
[01:52:38] <teut> its only here in django that I used classes
[01:52:45] <teut> or in kivy or pyqt
[01:52:47] *** Joins: bambanxx (~bambanx@181-163-44-167.baf.movistar.cl)
[01:53:06] <rpkilby> rannnn8888 there are some examples in https://docs.djangoproject.com/en/3.2/topics/db/multi-db/#an-example
[01:53:20] <rpkilby> but anything is going to be specific to your setup, which I can't really help you with.
[01:53:55] *** Parts: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it) ()
[01:58:22] *** Joins: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it)
[02:01:03] <rannnn8888> rpkilby its k :D ? setting : https://dpaste.org/zA3a and https://dpaste.org/KRZJ ?
[02:03:35] <rpkilby> rannnn8888 I think so
[02:04:26] <rpkilby> The router is only making decisions for the `tweet_data` app, and only allowing relations between two models in that app
[02:04:39] *** Quits: elena (~elena@202-153-212-80.ca99d4.syd.static.aussiebb.net) (Quit: Client closed)
[02:08:48] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[02:09:52] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[02:09:53] *** Joins: PantelicGR (~PantelicG@user/pantelicgr)
[02:10:05] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[02:12:05] *** Quits: Rikem (~mike@user/rikem) (Ping timeout: 272 seconds)
[02:13:29] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 244 seconds)
[02:14:36] <rannnn8888> rpkilby here its the name the class in the database_router.py ? DATABASE_ROUTERS = ['articles.DatabaseAppsRouter']
[02:15:57] <rpkilby> it should be the full class path. most likely `"articles.router.DatabaseAppsRoutr"`
[02:20:34] *** Quits: especial (~especial@cm-84.214.207.74.getinternet.no) (Remote host closed the connection)
[02:30:50] <rannnn8888> rpkilby ok now i add in my modlle ? its That there is already data inside, the class name need be same to the table in my db i have ?  https://dpaste.org/wsgB
[02:31:49] <rpkilby> rannnn8888: are you writing to an existing table? or are you creating the table through Django's builtin migrations?
[02:33:38] <rannnn8888> rpkilby sorry my english no perfect i no need write for this table i only want take data to from this db
[02:34:09] *** Quits: slav0nic (slav0nic@python.su) (Ping timeout: 244 seconds)
[02:34:15] *** Quits: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl) (Ping timeout: 268 seconds)
[02:34:45] <rannnn8888> i only want take data from this add db, this db Contains the data already
[02:34:52] <rpkilby> if it's an existing table, then you should specify the Meta.db_table. You should also set Meta.managed to False
[02:36:28] <rpkilby> by default, django expects a table name of <app_label>_<model name>, which might look like `tweet_data_tweets`
[02:37:06] <rpkilby> or from your paste, it would be `tweet_data_dsad`
[02:37:08] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[02:38:41] <rannnn8888> rpkilby in my db its tweet.db the table name its 'news' so you mean here its need look like this ?  https://dpaste.org/s6JZ
[02:39:43] <rpkilby> no, you just need to set table_name
[02:40:06] <rpkilby> I'm confused by your last comment. Is the table name `tweet.db`?
[02:40:21] *** Quits: brownan (~brownan@136.56.137.143) (Ping timeout: 244 seconds)
[02:40:21] <rpkilby> or is it just `news`?
[02:40:40] <rpkilby> if the table name is just `news` then set db_table = 'news'
[02:41:11] <rpkilby> when you provide the db_table option it should be the exact name of the table.
[02:41:25] <rannnn8888> rpkilby rpkilby my file its tweet.db and the table in the db its 'news' , Sorry for the mess I do not have much experience
[02:42:16] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 268 seconds)
[02:43:41] <rpkilby> No worries - I was just a bit confused by your wording and like you said, English isn't your first language  :)
[02:43:42] <rannnn8888> rpkilby i start this again the setting need look like this https://dpaste.org/M9ee
[02:43:47] <rpkilby> It should be something liek https://dpaste.org/nOQj/slim
[02:45:29] <rpkilby> the DATABASE_ROUTERS setting looks incorrect. It should be the full class path. e.g., "package.submodule.ClassName" or "articles.router.DatabasAppsRouter"
[02:46:10] <rannnn8888> rpkilby and setting and ruther need be still like here ?
[02:46:26] <rannnn8888> rpkilby yep i fix this before i forget send here
[02:46:36] <rannnn8888> DATABASE_ROUTERS = ['articles.database_router.DatabaseAppsRouter']
[02:46:46] <rpkilby> Looks correct
[02:46:52] <rannnn8888> but i still not get the data
[02:47:05] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[02:47:18] <rpkilby> It's possible your database is in the wrong location
[02:47:18] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[02:47:40] <rpkilby> is the tweet.db file in the base directory?
[02:47:47] <rpkilby> it might be somewhere else
[02:47:57] *** Joins: audiocat (~audio@2603-8081-1800-0062-58f8-e9e7-7a3e-e9cc.res6.spectrum.com)
[02:48:02] <rpkilby> and it's possible that Django created an empty tweet.db file there
[02:48:05] <rannnn8888> https://dpaste.org/HjLn this the mdel and views py
[02:48:32] <rannnn8888> rpkilby the tweet in same folder project where dbsqlite
[02:48:54] <rpkilby> You set the app_label, which is incorrect. You need to set the db_table
[02:49:02] <rannnn8888> and if its read the db.sqlite its need read the tweet.db
[02:49:07] <rpkilby> https://dpaste.org/dGS9#L
[02:51:43] <rannnn8888> rpkilby write this two ? https://dpaste.org/KraW
[02:52:32] *** Quits: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it) (Remote host closed the connection)
[02:53:34] *** Joins: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it)
[02:55:10] <rpkilby> app_label = 'news' shouldn't matter
[02:55:15] <rpkilby> but it should work I think
[02:55:39] <rannnn8888> Exception Value:	
[02:55:39] <rannnn8888> no such table: news
[02:55:41] <rannnn8888> same :X
[02:56:32] <rpkilby> hmm... try opening the db and see what's in the table
[02:56:56] <rpkilby> python manage.py dbshell --database=twitter_db
[02:58:01] <rpkilby> this will open the sqlite prompt with a connection to your tweet.db established
[02:58:19] <rpkilby> then try... SELECT COUNT(*) FROM news;
[02:59:12] *** Quits: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net) (Quit: Client closed)
[02:59:25] *** Joins: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net)
[02:59:49] <rannnn8888> rpkilby i dont get the count my records in tweet.db
[03:00:44] <rannnn8888> its connection to tweet.db ?
[03:01:18] <rpkilby> rannnn8888 did you get an error or a count of 0
[03:01:37] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Remote host closed the connection)
[03:02:07] <rannnn8888> rpkilby i dont get error but it no need return me the count ?
[03:04:47] <rpkilby> I'm not following?
[03:04:54] <rpkilby> Can you paste the output?
[03:06:30] <rannnn8888> rpkilby sure thxx https://dpaste.org/SY3H
[03:07:17] *** Joins: sed (~sed@pool-100-7-53-231.rcmdva.fios.verizon.net)
[03:10:41] <rannnn8888> rpkilby and sure have records in my db table news this example from db browser https://ibb.co/yfBCGfB
[03:11:09] *** Quits: teut (~teut@182.69.85.39) (Quit: Connection closed)
[03:12:08] <rannnn8888> i paste again the setting https://dpaste.org/zvnR#L13 and the ruther maybe its here https://dpaste.org/4c3L ?
[03:12:54] <rannnn8888> this ruther sorry *https://dpaste.org/MNY3
[03:21:03] <rpkilby> rannnn8888 make sure your SQL statements end with a semicolon
[03:21:04] <rpkilby> SELECT COUNT(*) FROM news;
[03:22:02] <rannnn8888> rpkilby k here i get the data so my problem its maybe in my model ?
[03:22:15] <rannnn8888> and how i connect from the db.shell
[03:22:21] <rannnn8888> dbshell
[03:22:32] <rannnn8888> Disconnects*
[03:22:54] <rpkilby> .help will tell you the commands
[03:22:58] <rpkilby> but I think it's .quit
[03:23:18] <rpkilby> it's different for every database
[03:23:39] *** Quits: explore (uid233125@id-233125.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[03:23:45] *** Quits: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it) (Quit: Leaving.)
[03:24:16] <rannnn8888> rpkilby k so what i need cheack now i dont get the data to the views ?
[03:24:47] <rpkilby> well, check if your model is working
[03:24:58] <rpkilby> python manage.py shell
[03:25:06] <rpkilby> and then...
[03:25:40] <rpkilby> from articles.models import news44
[03:25:46] <rpkilby> news44.objects.count()
[03:26:03] <rpkilby> if that gives you the correct count, then your model should be configured correctly
[03:27:57] <rannnn8888> django.db.utils.OperationalError: no such table: news
[03:28:18] <rannnn8888> rpkilby this my statement in my table tweet.db news : CREATE TABLE news ("timestamp","ID","Symbol","Text","Fllll", stats, team)  and this my mdel https://dpaste.org/SVvd
[03:29:27] <rpkilby> did you add "articles" to your INSTALLED_APPS setting?
[03:30:48] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[03:31:30] *** Quits: bambanxx (~bambanx@181-163-44-167.baf.movistar.cl) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[03:33:19] <rannnn8888> rpkilby you mean here ? https://dpaste.org/AOAJ
[03:33:33] <rannnn8888> sure....
[03:35:41] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 272 seconds)
[03:35:42] *** Joins: GiLgAmEzH (~gilgamezh@186.19.69.139)
[03:36:00] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[03:36:54] *** Quits: diverdude (~undodre@216.201.150.178) (Ping timeout: 264 seconds)
[03:38:47] *** Joins: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it)
[03:39:19] *** Parts: blackout69 (~blackout6@net-109-117-245-193.cust.vodafonedsl.it) ()
[03:41:18] *** Joins: bambanxx (~bambanx@181-163-44-167.baf.movistar.cl)
[03:41:23] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 272 seconds)
[03:44:38] *** Quits: oblikoamorale (~n@user/oblikoamorale) (Ping timeout: 252 seconds)
[03:45:03] *** Joins: oblikoamorale (~n@user/oblikoamorale)
[03:45:48] <rpkilby> rannnn8888 oh, your router is wrong. Your news44 model exists in the `articles` app, but the router is for an app_label of `tweet_data`
[03:46:11] <rpkilby> either change "tweet_data" to "articles" in your router, or rename your articles app to "tweet_data"
[03:47:14] <rpkilby> because of the mismatch, django is attempting to read the news table from your default db.sqlite3 database instead of tweet.db
[03:48:53] <rannnn8888> DATABASE_APPS_MAPPING = {'tweet_data': 'tweet_db'}
[03:49:10] <rannnn8888> here i need same changes yep ? DATABASE_APPS_MAPPING = {'articles': 'tweet_db'}
[03:50:43] *** Quits: clemente (~Daniel@balticom-142-72-136.balticom.lv) (Ping timeout: 268 seconds)
[03:51:04] *** Quits: bambanxx (~bambanx@181-163-44-167.baf.movistar.cl) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[03:52:37] <rannnn8888> rpkilby and my bad i write the in the name here mistake twitter_db    ----->  'twitter_db ': {
[03:52:37] <rannnn8888>         'NAME': BASE_DIR / 'tweet.db',
[03:52:38] <rannnn8888>         'ENGINE': 'django.db.backends.sqlite3',
[03:54:36] <rpkilby> I don't think DATABASE_APPS_MAPPING matters, since the values are hardcoded in your router.
[03:54:56] <rpkilby> My guess is that was used in some example that you pulled from, but your router code isn't using that mapping.
[03:55:24] <rpkilby> DATABASE_APPS_MAPPING is not a standard Django setting, so if your code isn't using it, then it does nothing
[03:57:20] *** Joins: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892)
[03:58:37] *** Quits: oblikoamorale (~n@user/oblikoamorale) (Ping timeout: 268 seconds)
[04:02:56] *** Quits: GiLgAmEzH (~gilgamezh@186.19.69.139) (Ping timeout: 268 seconds)
[04:05:44] *** Joins: oblikoamorale (~n@user/oblikoamorale)
[04:07:52] *** Quits: argento (~argent0@168-227-96-53.ptr.westnet.com.ar) (Ping timeout: 268 seconds)
[04:09:03] *** Quits: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892) (Remote host closed the connection)
[04:09:54] *** Joins: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892)
[04:10:45] *** Quits: jgee (~jgee@186.80.49.20) (Read error: Connection reset by peer)
[04:11:03] *** Joins: jgee (~jgee@186.80.49.20)
[04:14:19] *** Quits: jgee (~jgee@186.80.49.20) (Read error: Connection reset by peer)
[04:14:43] *** Joins: jgee (~jgee@186.80.49.20)
[04:16:50] *** Quits: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892) (Remote host closed the connection)
[04:19:06] *** Joins: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892)
[04:22:45] <wallbroken> FunkyBob: here?
[04:22:45] <rannnn8888> rpkilby i get the count in the shell now but in my site i dont get the write data why ?
[04:23:01] <rpkilby> what's your view again?
[04:23:27] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[04:25:30] <rpkilby> rannnn8888 can you paste the view code again?
[04:27:49] *** Quits: GinFuyou (~GinFuyou@reya.cloud.tilaa.com) (Ping timeout: 244 seconds)
[04:35:39] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[04:35:53] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[04:37:48] *** Quits: Kalov (~Thunderbi@179.56.117.154) (Quit: Kalov)
[04:44:27] *** Quits: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net) (Quit: Client closed)
[04:45:12] *** Joins: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net)
[04:46:22] <rannnn8888> rpkilby sorry my computer its down its think its work :D i try get this make my quris i have before my old site no django :x https://dpaste.org/8gLg
[04:52:17] <rpkilby> rannnn8888 try to start simple and add complexity. In your view, just try to return a simple set of results to ensure that everything is hooked up, and that you can at least return some data. Then work on implementing the query that you want.
[04:52:36] <rpkilby> best of luck, I have to head out.
[05:02:48] *** Joins: argento (~argent0@168-227-96-53.ptr.westnet.com.ar)
[05:08:27] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[05:09:26] *** Quits: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892) (Remote host closed the connection)
[05:10:10] *** Quits: PantelicGR (~PantelicG@user/pantelicgr) (Quit: Leaving)
[05:14:03] *** Joins: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892)
[05:17:09] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[05:18:01] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[05:18:12] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[05:18:42] *** Quits: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892) (Remote host closed the connection)
[05:19:27] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[05:19:35] *** Joins: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892)
[05:19:37] *** Quits: withered_wolf (~withered_@2600:1008:b151:56a5:3cd5:42e6:4414:2892) (Remote host closed the connection)
[05:20:06] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[05:20:22] *** Quits: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net) (Quit: Client closed)
[05:21:48] <bparker> wallbroken: other people can answer questions too
[05:22:22] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[05:22:35] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[05:33:55] *** Quits: argento (~argent0@168-227-96-53.ptr.westnet.com.ar) (Quit: leaving)
[05:35:56] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[05:36:34] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[05:36:52] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[05:41:11] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 244 seconds)
[05:41:14] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 252 seconds)
[05:51:58] *** Joins: cliluw (~cliluw@47.147.80.149)
[06:07:31] *** Joins: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net)
[06:18:57] *** Joins: nbao (~nbao@2804:14c:5bb8:9720:ae9e:17ff:fedf:3e09)
[06:19:18] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[06:20:07] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[06:20:41] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[06:24:16] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 268 seconds)
[06:24:53] *** Quits: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 268 seconds)
[06:25:16] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[06:28:45] *** Quits: nbao (~nbao@2804:14c:5bb8:9720:ae9e:17ff:fedf:3e09) (Quit: WeeChat 3.1)
[06:36:15] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[06:44:20] <wallbroken> well, i want to login via email instead of username
[06:44:51] <FunkyBob> BWAHAHAHAHAHAHAHAHAHAHAHAHA
[06:45:16] <wallbroken> because it could happen that the user forgets its username
[06:45:20] <wallbroken> how to recover that?
[06:46:03] <wallbroken> and there is not an username recovery procedure
[06:46:29] <FunkyBob> oh but that's simple... all the sites do it... don't you know anything??   {no, I'm not serious... just parodying what you've said many times}
[06:46:49] <FunkyBob> simple -- they add a password recovery procedure
[06:46:56] <FunkyBob> and a username recovery procedure
[06:47:23] <wallbroken> well, for password recovery is simple
[06:47:23] <FunkyBob> it's even simpler than the password recovery, because it just needs to email you your username... no token, no verificaiton
[06:47:45] <FunkyBob> this really is implemented on many sites
[06:47:48] <wallbroken> password_reset/ is a django system form
[06:48:06] <FunkyBob> you mean there's as built feature
[06:48:09] <FunkyBob> it's not a "system form"
[06:49:05] <wallbroken> FunkyBob: https://docs.djangoproject.com/en/3.2/topics/auth/default/
[06:49:11] <wallbroken> it's under Authentication Views
[06:49:14] <FunkyBob> yes
[06:49:19] <wallbroken> django.contrib.auth.urls
[06:49:22] <FunkyBob> it's not a "system form"... whatever one of those might be
[06:49:26] <wallbroken> ok
[06:49:28] <FunkyBob> it is a provided feature
[06:49:38] <wallbroken> whatever it is, there is not any for username recover?
[06:49:55] <wallbroken> well, not really "recover"
[06:50:12] <wallbroken> just a way to send a mail which tells: "your username is xxx"
[06:50:19] <FunkyBob> no, there's not one for username
[06:50:35] <wallbroken> well, i guess it should be simple to make that
[06:50:48] <wallbroken> I just need  a view, a form and a url
[06:50:48] <FunkyBob> that is what I said.
[06:50:57] <FunkyBob> certainly a LOT simpler than password reset
[06:51:00] <wallbroken> an urel triggers the view
[06:51:12] <wallbroken> the view gets the request
[06:51:27] <wallbroken> triggers dispatch() to forward the request to the right method
[06:55:13] <FunkyBob> only if it's a class-based view
[06:57:45] <wallbroken> https://dpaste.org/3W9M
[06:57:51] <wallbroken> i'm creating it
[06:57:54] <wallbroken> can you help me?
[06:58:01] <wallbroken> i created this in accounts app
[06:58:04] <bparker> I think your favors are all used up
[06:58:13] <FunkyBob> i recommend you use a plain view function
[06:58:55] <wallbroken> https://dpaste.org/Kfgw
[06:59:22] <FunkyBob> hahaha... no.
[07:00:09] <wallbroken> https://dpaste.org/6wwA
[07:01:30] <wallbroken> https://dpaste.org/RgJA
[07:04:12] *** Quits: KramerC (kramer@user/kramerc) (Quit: Leaving)
[07:06:43] *** Joins: KramerC (kramer@user/kramerc)
[07:09:35] <wallbroken> are you alive?
[07:19:17] *** Joins: dodobrain_ (~dodobrain@user/dodobrain)
[07:22:58] *** Quits: dodobrain__ (~dodobrain@user/dodobrain) (Ping timeout: 244 seconds)
[07:23:35] <FunkyBob> yes. just went for a walk
[07:23:44] <FunkyBob> you don't need me to comment on every single line, do you?
[07:23:56] <FunkyBob> none of this is new to you... you'v done it all before
[07:24:26] <wallbroken> yes
[07:24:32] <wallbroken> in fact i did that and i posted to you
[07:24:41] <wallbroken> and i want you to confirm if it's right
[07:25:05] <wallbroken> i created a form, and url, and a view
[07:25:47] <FunkyBob> did you try it? did it work?
[07:26:33] *** Quits: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:5642:78c3:490c:d48) (Ping timeout: 268 seconds)
[07:28:05] <wallbroken> https://dpaste.org/uXSt
[07:28:08] <wallbroken> this is my template
[07:28:14] *** Joins: dodobrain__ (~dodobrain@user/dodobrain)
[07:28:14] *** dodobrain__ is now known as dodobrain
[07:28:20] <wallbroken> the rendered page doesn't show the textbox
[07:28:25] <wallbroken> just the "submit" button
[07:28:41] <wallbroken> what do you think the problem is?
[07:29:30] <wallbroken> well, and it could not work, because my view can't sent and email
[07:29:54] <FunkyBob> did you not include the form in the template context?
[07:31:14] *** Quits: dodobrain_ (~dodobrain@user/dodobrain) (Ping timeout: 244 seconds)
[07:32:13] <wallbroken> where the "template context" is?
[07:33:32] <FunkyBob> see? this is why I kept telling you to do the tutorial.. get a grounding in the fundamentals
[07:33:44] <FunkyBob> look at your other view functions... where are you passing form to the template context?
[07:33:53] <FunkyBob> note -- view functions, not classes
[07:35:05] <wallbroken> https://dpaste.org/2p64
[07:35:14] <wallbroken> i wrote the view for sending mail
[07:35:54] <wallbroken> are you thinking "what a mess"
[07:35:55] <wallbroken> right?
[07:36:24] <wallbroken> this view checks if it's a POST method and gets it
[07:36:38] <wallbroken> then saves the Form in a form variable
[07:36:47] <wallbroken> then check that the form is valied
[07:36:50] <wallbroken> and compoeses the email
[07:36:56] <wallbroken> using a template
[07:42:55] <FunkyBob> well, you're not making the form class when it's not a POST... and you're not passing it to the template via its context...
[07:43:02] <FunkyBob> otehrwise looks about right
[07:43:31] <FunkyBob> https://docs.djangoproject.com/en/3.2/topics/forms/#the-view
[07:44:45] *** Quits: jasonbraganza (jasonbraga@user/jasonbraganza) (Quit: Au revoir …)
[07:44:58] <wallbroken> FunkyBob: https://dpaste.org/27bk
[07:45:51] <FunkyBob> much better
[07:46:44] *** Quits: manfre (~manfre@136.56.132.116) (Ping timeout: 244 seconds)
[07:46:45] <wallbroken> well, but IDK why i still don't see the textox area in the template
[07:46:46] <wallbroken> https://dpaste.org/iOYo
[07:47:52] *** Joins: jasonbraganza (jasonbraga@user/jasonbraganza)
[07:48:25] <FunkyBob> where's your form class?
[07:48:30] <FunkyBob> and template
[07:48:35] <wallbroken> i posted to you
[07:48:47] <wallbroken> 4:58:05 AM - wallbroken: https://dpaste.org/uXSt
[07:48:47] <wallbroken> 4:58:08 AM - wallbroken: this is my template
[07:48:58] <wallbroken> also the form class
[07:49:03] <FunkyBob> yeah, but I have a life... I don't stick around with all your tabs open
[07:49:18] <FunkyBob> and I have no idea if you've changed them since
[07:49:24] <wallbroken> sorry
[07:49:29] <wallbroken> this is the form class: https://dpaste.org/fs3S
[07:49:53] <FunkyBob> line 5 needs a comma, otherwise it's not a tuple
[07:50:01] <FunkyBob> it's a gotcha in python syntax...
[07:50:04] <wallbroken> in which paste?
[07:50:16] <FunkyBob> https://dpaste.org/fs3S#L5
[07:50:17] <FunkyBob> the form
[07:50:20] <wallbroken> fields = ('email',)
[07:50:24] <wallbroken> this way?
[07:50:27] <FunkyBob> yes
[07:50:30] <wallbroken> ok
[07:50:35] <FunkyBob> the comma maketh the tuple
[07:50:38] <wallbroken> you see other problems?
[07:51:54] <FunkyBob> does it work?
[07:52:23] <wallbroken> no
[07:52:36] <FunkyBob> what does it do that makes you say it doesn't work?
[07:52:54] <FunkyBob> oh, wait.. your form class isn't a form class
[07:53:02] <FunkyBob> it doesn't inherit from Form or ModelForm
[07:53:26] <wallbroken> it inherit from UserCreationForm
[07:53:29] <wallbroken> it should not?
[07:53:47] <FunkyBob> the one you pasted does not
[07:53:54] <FunkyBob> class UserFromMailForm():
[07:55:01] <FunkyBob> you really don't need a ModelForm or to extend UserCreationForm
[07:55:08] <FunkyBob> a plain form with an email field would suffice
[07:56:18] *** Joins: schinckel (uid38120@id-38120.charlton.irccloud.com)
[07:56:19] <wallbroken> https://dpaste.org/Fw1x
[07:56:20] <wallbroken> good?
[07:57:41] <FunkyBob> no
[07:57:56] <FunkyBob> the Meta is not needed... you just need to declare a field called email
[07:58:13] <FunkyBob> time to take a step back, and read the form docs -- https://docs.djangoproject.com/en/3.2/topics/forms/
[07:58:27] <wallbroken> there is a problem in the view
[07:58:28] <wallbroken> 'user': user,
[07:58:29] <wallbroken> here
[07:58:38] <wallbroken> name 'user' is not defined
[07:59:57] <wallbroken> and also, now i have an error in the form
[07:59:58] <wallbroken> class UserFromMailForm(forms.ModelForm):
[07:59:58] <wallbroken>         fields = ('email',)
[08:00:04] <wallbroken> ModelForm has no model class specified.
[08:00:04] <FunkyBob> do not paste into channel, wallbroken
[08:00:14] <FunkyBob> yes... GO READ THE DOCS
[08:00:19] <FunkyBob> instead of randomly making shit up
[08:00:28] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[08:02:45] <wallbroken> https://dpaste.org/PZGU
[08:02:46] <wallbroken> ok?
[08:03:44] <FunkyBob> does it work?
[08:03:47] <wallbroken> yes
[08:03:52] <wallbroken> but now the problem is in the view
[08:03:58] <wallbroken> user is not defined
[08:03:59] <wallbroken> why?
[08:04:55] <wallbroken> https://dpaste.org/0V7m#L11
[08:05:33] *** schinckel is now known as schinckel_
[08:05:35] <FunkyBob> because... this view is for people who _can't_ log in
[08:05:45] <FunkyBob> user isn't defined because you never defined user
[08:05:50] *** schinckel_ is now known as schinckel
[08:05:53] <FunkyBob> basic programming, that.
[08:06:22] <FunkyBob> what you should probably do is look up any users who match that email. and email them
[08:06:55] <wallbroken> yes
[08:07:20] <wallbroken> i should do something "give me the user corresponding to this email"
[08:07:47] <FunkyBob> and then there's this helpful method on the default User class : https://docs.djangoproject.com/en/3.2/ref/contrib/auth/#django.contrib.auth.models.User.email_user
[08:07:49] <wallbroken> so, first step is to save the email
[08:07:54] <FunkyBob> save?
[08:08:09] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[08:08:23] <wallbroken> well, we already saved it
[08:08:23] <wallbroken> to_email = form.cleaned_data.get('email')
[08:09:24] <wallbroken> email_user(subject, message, from_email=None, **kwargs)¶
[08:09:30] <wallbroken> are you pointing me to that?
[08:09:52] <FunkyBob> I'm pointing you to the email_user method of the User model class.
[08:10:32] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[08:12:25] <wallbroken> and should i remove my piece of code for sending the email?
[08:14:47] <FunkyBob> if you feel the other solution is sufficient
[08:15:09] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 244 seconds)
[08:15:14] <wallbroken> well, now i'm a little confused
[08:15:27] <wallbroken> email_user does it all?
[08:16:48] <FunkyBob> does it?
[08:16:50] <FunkyBob> what do the docs say/
[08:17:23] <FunkyBob> you still need to give it the subject and message body
[08:18:33] <wallbroken> https://dpaste.org/AfaK
[08:18:40] <wallbroken> i'm not sure i implemented it in the right way
[08:18:57] <wallbroken> well, it's not a request.user
[08:19:01] <FunkyBob> there will be no request.user
[08:19:02] <wallbroken> because the user is not logged in
[08:19:05] <wallbroken> in fact
[08:19:06] <FunkyBob> right
[08:19:16] <FunkyBob> as I mentioned before, you will need to look them up by t heir email address
[08:19:19] <wallbroken> but the form gives to me only the email
[08:19:31] <FunkyBob> because that's all you need
[08:19:42] <FunkyBob> to look them up by their email
[08:19:53] <FunkyBob> or did you think django would magically know to turn that into a User instance?
[08:20:09] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[08:20:15] <wallbroken> if it was SQL it was: select uesr from model where email = 'from_email'
[08:20:58] <FunkyBob> and that's pretty much what tyhe ORM will generate for you
[08:21:15] <FunkyBob> but you learned in the tutorial how to do simple ORM lookups
[08:23:23] <wallbroken> FunkyBob: queryset
[08:25:11] <wallbroken> maybe there is something like: getUserByEmail(email)
[08:25:16] <wallbroken> it should be perfect
[08:25:29] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 244 seconds)
[08:27:30] *** Joins: explore (uid233125@id-233125.stonehaven.irccloud.com)
[08:28:37] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[08:33:14] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 244 seconds)
[08:37:48] <wallbroken> FunkyBob: still here?
[08:38:01] <wallbroken> i'm stuck on this problem
[08:38:16] <wallbroken> i don't really know how to fetch the username from the email
[08:38:24] *** Quits: JordiGH (~jordi@user/jordigh) (Ping timeout: 244 seconds)
[08:42:10] <FunkyBob> you don't need to fetch the username
[08:42:14] <FunkyBob> you want the whole user record
[08:46:11] <wallbroken> FunkyBob: do you agree with me that the goal is pulling the username bounded to the specific email?
[08:48:30] *** Quits: Adamantike (~adamantik@201.254.79.28) (Quit: The Lounge - https://thelounge.chat)
[08:48:59] <FunkyBob> no
[08:49:07] <FunkyBob> I just said that's not what you need to do
[08:49:13] <FunkyBob> once again you shouw you're not reading what I tell you
[08:49:28] <wallbroken> or maybe i'm not understanding, right?
[08:49:43] <wallbroken> there is no reason why i'm not going to read
[08:50:06] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 264 seconds)
[08:50:19] <FunkyBob> you need to get the User record, not the username field.
[08:51:18] *** Joins: cliluw (~cliluw@47.147.80.149)
[08:51:20] <wallbroken> starting from the email
[08:52:55] <FunkyBob> yes
[08:54:40] <wallbroken> and how to get that?
[08:54:43] <wallbroken> that's the question
[08:54:57] <FunkyBob> you look it up on the model... just like any other model
[08:55:10] <wallbroken> with queryset?
[08:55:18] <FunkyBob> like you learned in the tutoria... our would have, if you hadn't stubbornly refused to do it
[08:55:24] <wallbroken> how tell the model: point to that specific user?
[08:57:07] *** Joins: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:5642:78c3:490c:d48)
[08:57:56] <FunkyBob> so much pain and frustration because you refused to get grounded in the fundamentals from the tutorial.
[08:58:19] <FunkyBob> you don't tell the model to "point at a user"
[08:58:25] <FunkyBob> you query the model for the record  you want
[08:59:20] *** Quits: KramerC (kramer@user/kramerc) (Quit: Leaving)
[09:00:52] <wallbroken> FunkyBob: i asked you "with queryset" ?
[09:01:00] <wallbroken> you never answered me
[09:02:43] <FunkyBob> no, I didn't.
[09:02:49] <FunkyBob> it's not really a meaningful statement
[09:03:18] <FunkyBob> https://docs.djangoproject.com/en/3.2/topics/db/models/
[09:04:57] <wallbroken> well, i don't have to dfine a model
[09:05:05] <wallbroken> i just want to find a record in the user model
[09:05:53] <FunkyBob> https://docs.djangoproject.com/en/3.2/topics/db/queries/
[09:07:24] <wallbroken> https://docs.djangoproject.com/en/3.2/topics/db/queries/#retrieving-objects
[09:07:30] <wallbroken> it's what do i need to point to?
[09:08:37] *** Joins: KramerC (kramer@user/kramerc)
[09:08:53] <FunkyBob> keep reading
[09:09:16] <wallbroken> A QuerySet represents a collection of objects from your database. It can have zero, one or many filters. Filters narrow down the query results based on the given parameters. In SQL terms, a QuerySet equates to a SELECT statement, and a filter is a limiting clause such as WHERE or LIMIT.
[09:09:21] <wallbroken> this is what i need of
[09:09:31] <FunkyBob> keep reading
[09:09:40] <FunkyBob> again, this is basic stuff you would have learned in the tutorial
[09:10:11] <wallbroken> one_entry = Entry.objects.get(pk=1)
[09:10:19] <wallbroken> i could use this
[09:12:48] <wallbroken> hello?
[09:14:04] <FunkyBob> yes,
[09:14:12] <FunkyBob> stop asking for confirmation... and just TRY it
[09:14:20] <FunkyBob> it's not like the universe will implode if you get it wrong
[09:21:41] <wallbroken> https://dpaste.org/uBQz#L8,9
[09:21:51] <wallbroken> in my mind the logic would be something like this
[09:21:58] <wallbroken> User is the user model
[09:22:10] <FunkyBob> so close... but... why '.username'?
[09:22:39] <wez> And the saga continues :)
[09:22:42] <wallbroken> i don't want to get a subset of it?
[09:22:43] * wez grabs some popcorn
[09:23:02] <wallbroken> wez: every night, starting from 12:00 AM european timezone
[09:23:10] <FunkyBob> wallbroken: ... no... and... what in what you read made you think that was how you'd do that anyway?
[09:23:32] <wez> wallbroken: EU is a big place and has several timezoners
[09:23:58] <wallbroken> FunkyBob: well, nothing specifically, but using a basic logic, why should i want to extract the entire user model?
[09:24:25] <FunkyBob> wallbroken: because you want a User model instance to get access to the send email method
[09:24:33] <FunkyBob> either way
[09:24:55] <FunkyBob> you just made something up... didn't try it.. then asked if it was right
[09:24:59] <wallbroken> ok
[09:25:11] <FunkyBob> if you'd tried it, you'd know immediately it's not right
[09:25:31] <wallbroken> FunkyBob: in fact i never tried because i already know it would not work
[09:25:37] <FunkyBob> then why write it?
[09:25:39] <FunkyBob> why show it to us?
[09:25:50] <FunkyBob> read the docs
[09:25:53] <wallbroken> to give an idea in my mind of what the logic wold be
[09:25:53] <FunkyBob> follow the docs
[09:25:55] <wallbroken> *would
[09:27:38] <wallbroken> user = User.get(mail=to_email)
[09:27:45] <FunkyBob> no
[09:27:45] <wallbroken> User doesn' have the attribute get
[09:28:01] <FunkyBob> that is not what you read in the docs
[09:28:08] <FunkyBob> so it's no surprise it doesn't work
[09:28:31] <FunkyBob> you seem intent on taking shortcuts... but every time you try, it just slows you down
[09:28:38] <wallbroken> where does .get() is placed?
[09:28:44] <FunkyBob> "I won't read all the docs... I'll just glance at examples and make shit up"
[09:28:51] <FunkyBob> wallbroken: it's in the docs I linked
[09:29:22] <wallbroken> If you know there is only one object that matches your query, you can use the get() method on a Manager which returns the object directly:
[09:29:27] <wallbroken> and that's what i did
[09:29:33] <FunkyBob> on the Manager
[09:29:35] <wallbroken> so, maybe i don't know the english language
[09:29:37] <FunkyBob> no, it's not what you did
[09:29:48] <wallbroken> and Manager is inheirted from User model
[09:29:55] *** Joins: greenhood (~sharan@122.171.192.160)
[09:30:01] <FunkyBob> where on earth did you see that?
[09:30:01] <wallbroken> so i should have .get() inside of it
[09:30:05] <wez> wallbroken: The manager is objects by default
[09:30:38] <FunkyBob> I'm not even expecting you to read all the text... even THE EXAMPLES PROVIDED show what to do... but you haven't done that either
[09:33:25] <wallbroken> https://docs.djangoproject.com/en/3.2/topics/db/queries/#retrieving-a-single-object-with-get
[09:33:38] <wallbroken> the example here it s just one line
[09:34:37] <FunkyBob> yes it is
[09:34:48] <FunkyBob> and that's all it needs to be
[09:35:25] <wallbroken> user = UserModel._default_manager.get(pk=uid)
[09:35:32] <wallbroken> here it's somewhere in my code
[09:35:34] <FunkyBob> so close
[09:35:41] <wallbroken> manager is inside of the UserModel
[09:35:47] <wallbroken> so why you told me not?
[09:36:02] <FunkyBob> that will actually work... except 1) ou should use objects like in the example... and 2) you don't want to look up by pk
[09:38:07] <FunkyBob> the only place I can think you would have used a custom manager would be the custom user model... which you removed
[09:38:23] <wallbroken> 	
[09:38:23] <wallbroken> get() returned more than one User -- it returned 3!
[09:38:33] <wallbroken> user = UserModel._default_manager.get(email=to_email)
[09:38:40] <wallbroken> why 3?
[09:38:49] <FunkyBob> you must have 3 users with the same email address
[09:44:16] <wallbroken>  message = render_to_string('username_from_email.html', user, {
[09:44:22] <wallbroken> context must be a dict rather than User.
[09:44:45] <FunkyBob> YES
[09:44:47] <FunkyBob> oops
[09:44:48] <FunkyBob> yes
[09:44:57] <wallbroken> what does in mean?
[09:45:03] <FunkyBob> it means exactly what it says
[09:45:10] <wallbroken> a dict is field : value
[09:45:13] <FunkyBob> you put 'user' as the second argument... which is the context
[09:45:27] <FunkyBob> yes.. { key: value } is a dict literal
[09:45:37] <FunkyBob> but you just put user instead
[09:45:47] <FunkyBob> it's right there in the line you pasted
[09:46:03] <wallbroken> yes, and i'm thinking how it should be
[09:46:33] <wallbroken> 'user': self.object,
[09:46:37] <wallbroken> dould be good?
[09:47:12] <wallbroken> 'user': user,
[09:47:20] <wallbroken> i hope it will work
[09:47:49] <wallbroken> user.email_user(mail_subject, message, from_email=None, **kwargs)
[09:47:55] <wallbroken> name 'kwargs' is not defined
[09:49:21] <FunkyBob> did... did you just cut'n'paste the definition from the docs?
[09:49:45] <FunkyBob> why did you put **kwargs there?
[09:49:49] <FunkyBob> what was your reasoning?
[09:49:55] <wallbroken> i just removed
[09:50:03] <wallbroken> now i need to create the template
[09:50:38] <FunkyBob> see, we can't fix anything if we don't explore your mistakes
[09:50:46] <FunkyBob> like... why you put **kwargs there
[09:52:01] <wallbroken> what should i put into the email message template?
[09:52:40] <FunkyBob> whatever you need to tell the user
[09:52:50] <bparker> you guys are still at it?
[09:53:10] <wallbroken> { % 'user' % }
[09:53:17] <FunkyBob> bparker: nah... i'm givbing up
[09:53:27] <FunkyBob> so much effort, but so little compehension
[09:53:29] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:53:40] <bparker> I presume English is not their first language
[09:53:41] <FunkyBob> they seem intent on just cut'n'pasting rather than understanding
[09:53:50] <FunkyBob> no, apparently it's Italian
[09:55:21] <wallbroken> you're more lucky than me. computer science's language is your native language
[09:55:50] <FunkyBob> wallbroken: in our discussions here there's little evidence you don't have enough English skills to (a) read, (b) try, (c) ask questions
[09:57:10] <wallbroken> understanding things in a foreign language takes harder because your brain thinks in its own native language
[09:57:38] <FunkyBob> sure, I get that... but you came in here refusing to try the tutorial, instead demanding people give you solutions
[09:57:55] <FunkyBob> and repeatedly copied code without trying to understand it
[09:58:03] <FunkyBob> repeatedly did nonsense thing in your code
[09:58:16] <FunkyBob> and consistently did not ask for help understanding things
[09:58:32] <FunkyBob> even after being repeatedly told not to copy without understanding... and to ask more questions
[09:58:47] <FunkyBob> like yesterday... when you started trying to understand class-based views... that was good!
[09:59:01] <FunkyBob> ytou seemed to really try to pick it apart
[09:59:14] <FunkyBob> and we identified a lot of places your mental model was not right...
[10:00:45] <wallbroken> in that case i was thinking that my project was ended and i stared trying something just for my personal pride
[10:00:47] <FunkyBob> and hey... there's even an italian translation of the t utorial now- https://docs.djangoproject.com/it/3.2/intro/tutorial01/
[10:01:35] <wallbroken> it's done by an human? or by some software?
[10:02:00] <FunkyBob> humans
[10:02:07] <bparker> asking questions before even clicking
[10:02:45] <wallbroken> well, "writing your first django application" is not what we want
[10:02:55] <wallbroken> the first step is to understand how django is designed
[10:03:16] <bparker> ...
[10:03:22] <FunkyBob> you plonker
[10:03:38] <bparker> I need to buy a car, but first I must understand exactly how it works
[10:03:43] <FunkyBob> your excuse for not doing the tutorial was it was in english... I fixed that, so now your excuse is... what?
[10:03:49] <FunkyBob> bparker: heh
[10:03:59] <wallbroken> this is not an excuse
[10:04:03] <wallbroken> just a statement
[10:04:06] <wez> FunkyBob: It's nearly beer time anyway
[10:04:30] <wez> Knocking off sounds like a good idea.
[10:04:47] <FunkyBob> yah... well, it's 3:30
[10:04:50] <bparker> had enough fun for one day myself
[10:05:29] <PaulWay[w]> LOL.
[10:05:36] <bparker> ah bob must be in upside down land
[10:05:36] <PaulWay[w]> wallbroken: it's an excuse.
[10:06:03] <FunkyBob> wallbroken: you still need to learn the basics. you do that by doing the tutorial.
[10:06:19] <PaulWay[w]> You're trying to say "I can't read the tutorial, but I want to understand Django".
[10:06:58] <FunkyBob> you don't start learning maths with trigonometry...
[10:07:26] *** Quits: sed (~sed@pool-100-7-53-231.rcmdva.fios.verizon.net) (Ping timeout: 252 seconds)
[10:10:48] <wallbroken> and now i need to start with my daily job debugging a broken class
[10:10:49] <wallbroken> https://www.dropbox.com/s/yep46y3hocjrxiz/provider.txt?dl=0
[10:12:04] <PaulWay[w]> wallbroken: I have this suspicion here that your view on how Django should work is heavily influenced by your C++ coding experience.
[10:12:34] <wallbroken> that's C#
[10:12:38] <PaulWay[w]> So you're expecting Django to be as complicated and over-elaborate as the frameworks you seem to be working on.
[10:12:51] <PaulWay[w]> I don't really care because it's all C++-based.
[10:13:11] <PaulWay[w]> And the Sun King dictates that C++ must be written as if everything is a noun, and there are no verbs.
[10:13:43] <PaulWay[w]> So I think you need to do the tutorial to see how simple, elegant and concise Django, and Python, can be.
[10:19:45] *** Quits: henbruas (~henbruas@ti0003a400-3211.bb.online.no) (Ping timeout: 272 seconds)
[10:20:47] *** Joins: henbruas (~henbruas@ti0003a400-3211.bb.online.no)
[10:29:29] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[10:34:30] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 264 seconds)
[10:38:38] *** Joins: elena (~elena@202-153-212-80.ca99d4.syd.static.aussiebb.net)
[10:42:45] *** Joins: wattux (~wattux@212.51.23.106)
[10:43:02] *** Quits: wattux (~wattux@212.51.23.106) (Client Quit)
[10:43:11] *** Quits: greenhood (~sharan@122.171.192.160) (Ping timeout: 252 seconds)
[10:43:35] *** Joins: wattux (~wattux@212.51.23.106)
[10:44:54] <jasonbraganza> FunkyBob, PaulWay[w], as another beginner, any resources for ‘what next after the tutorial?’
[10:45:26] <PaulWay[w]> jasonbraganza: my opinion = just start making a simple site.
[10:45:36] <jasonbraganza> am working my way through the tutorial right now
[10:45:49] <jasonbraganza> PaulWay[w], thank you. so will just start practicing then.
[10:45:58] <PaulWay[w]> Start adding features, and assume at every point that if there's something that you need, and you think other people will have probably needed that too, then Django will have a solution for it.
[10:46:20] * jasonbraganza hastily scribbles notes
[10:47:41] <jasonbraganza> PaulWay[w], thank you.
[10:47:44] <jasonbraganza> :)
[10:50:03] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[10:52:40] *** Joins: RealGecko (~RealGecko@67.209.130.250)
[10:52:50] *** Quits: RealGecko (~RealGecko@67.209.130.250) (Client Quit)
[10:53:09] *** Joins: RealGecko (~RealGecko@67.209.130.250)
[10:55:13] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 272 seconds)
[10:57:09] <RealGecko> Hello there! I have a project with two apps. App1 is ordinary app just Django specific app, while app2 has some Celery tasks. I've created test cases for both of them, app1 test case inherits from TestCase and app2 test case inherits from TransactionTestCase. If I run app2 test case separately like `python manage.py test app2` everything is fine,
[10:57:10] <RealGecko> but if I run them together like `python manage.py test`, then I get a bunch of errors `django.db.utils.OperationalError: database table is locked: table_name`. Tested with PostgreSQL and SQLite. Is there a way to mix TestCase and TransactionTestCase in single run without interference?
[10:59:59] *** Joins: noobsec (~user@user/noobsec)
[11:00:02] <noobsec> hi
[11:00:05] <RealGecko> Django 3.2.3, Celery 5.1.0, Python 3.8.10
[11:07:17] *** Joins: sadg (~odd@45.83.220.210)
[11:07:22] <jasonbraganza> as a fellow learner wallbroken, i would suggest that you really do the tutorial. I am learning Django using Dr Chuck’s free course at https://www.dj4e.com/ and even there the exercises are basically working through the official Django tutorial.
[11:15:25] *** Joins: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef)
[11:17:05] *** Quits: explore (uid233125@id-233125.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[11:17:54] *** Joins: chrysanthematic (~chrysanth@82.2.21.4)
[11:34:27] *** Quits: mxp (~mxp@82.98.30.69) (Quit: leaving)
[11:37:05] *** Quits: chrysanthematic (~chrysanth@82.2.21.4) (Quit: chrysanthematic)
[11:46:46] *** Joins: Crovax31 (~quassel@91-167-5-217.subs.proxad.net)
[11:46:54] *** Joins: Rikem (~mike@user/rikem)
[11:53:39] *** Joins: mxp (~mxp@82.98.30.69)
[11:58:55] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi)
[12:12:20] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[12:16:42] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 240 seconds)
[12:21:35] *** Joins: especial (~especial@cm-84.214.207.74.getinternet.no)
[12:22:59] *** Joins: something (~kf@user/kfiven)
[12:23:37] *** Quits: henbruas (~henbruas@ti0003a400-3211.bb.online.no) (Quit: ZNC 1.8.2 - https://znc.in)
[12:23:57] *** Joins: henbruas (~henbruas@ti0003a400-3211.bb.online.no)
[12:25:08] *** Joins: greenhood (~sharan@122.172.182.167)
[12:25:46] *** Joins: blackout69 (~blackout6@net-2-38-155-178.cust.vodafonedsl.it)
[12:26:43] *** Joins: browniebroke (uid501792@id-501792.tinside.irccloud.com)
[12:28:08] *** Quits: blackout69 (~blackout6@net-2-38-155-178.cust.vodafonedsl.it) (Client Quit)
[12:37:21] *** Joins: seed0 (~seed0@user/seed0)
[12:39:57] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[12:40:25] *** Joins: GiLgAmEzH (~gilgamezh@186.19.69.139)
[12:40:46] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi) (Read error: Connection reset by peer)
[12:51:51] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi)
[12:55:12] *** Quits: vdamewood (~vdamewood@fedora/vdamewood) (Remote host closed the connection)
[12:55:54] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[12:58:06] *** Joins: n00bn00b (~N00b@79.184.114.71.ipv4.supernova.orange.pl)
[12:58:20] <n00bn00b> hey, long time no see
[13:02:06] <n00bn00b> how to disallow anonymous users to access any django urlpattern, without manually monkeypatching (antipattern?), or adding @login_required everywhere?
[13:02:21] <n00bn00b> *anyy other than login ofc
[13:03:57] *** Joins: GinFuyou (~GinFuyou@reya.cloud.tilaa.com)
[13:05:11] *** Parts: something (~kf@user/kfiven) (Leaving)
[13:09:29] *** Quits: felixx (felixx@django/moderator/felixx) (Quit: ZNC - https://znc.in)
[13:09:29] *** Quits: apollo13 (apollo13@django/moderator/apollo13) (Quit: ZNC - http://znc.in)
[13:11:40] *** Joins: apollo13 (apollo13@django/moderator/apollo13)
[13:11:40] *** ChanServ sets mode: +v apollo13
[13:14:45] <apollo13> n00bn00b: a middleware could do
[13:15:09] *** Quits: noobsec (~user@user/noobsec) (Remote host closed the connection)
[13:21:01] *** Quits: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:5642:78c3:490c:d48) (Ping timeout: 244 seconds)
[13:27:00] <wattux> n00bn00b setting a default AuthenticationClass should do the trick: https://www.django-rest-framework.org/api-guide/permissions/#setting-the-permission-policy
[13:29:02] <wattux> oh frick sorry, you probably dont use the django-rest-framework :D  sorry I'm so used to it by now
[13:32:28] <n00bn00b> apollo13: what middleware could do?
[13:32:45] <apollo13> n00bn00b: the middleware could disallow access for anonymous users
[13:33:04] <apollo13> you will have to write it yourself though, although there is probably a package on pypi as well
[13:37:20] <n00bn00b> apollo13: nice thanks, but want not to delegate this to another system; if django cant do it I would not be suprised because there is many things I dont understand in that architecture :) I would probably not fix issues of one system by setting another (or I clearly not understand You)
[13:37:34] <apollo13> n00bn00b: middlewares are a django thing
[13:37:42] <n00bn00b> wattux: idk if it was to me but I must fix and support legacy code
[13:39:40] <n00bn00b> not the way I could decide to move to DRF tbh
[13:40:47] <wattux> n00bn00b I see :/ .. try the middleware approach apollo13 mentioned, I guess
[13:41:47] <n00bn00b> thanks then apollo13 and wattux cheers
[13:42:38] <n00bn00b> PS wattux I really like DRF and understand it better (decisions etc.)
[13:42:52] <wattux> DRF is awesome <3
[13:43:10] <wattux> but legacy code is legacy code, as well as corporate decisions
[13:43:11] <n00bn00b> as I know, they start to be agnostic, unrelated to django afairk
[13:45:30] *** Quits: GinFuyou (~GinFuyou@reya.cloud.tilaa.com) (Ping timeout: 240 seconds)
[13:46:20] *** Joins: Kalov (~Thunderbi@179.56.117.154)
[13:47:42] *** Quits: sadg (~odd@45.83.220.210) (Ping timeout: 264 seconds)
[13:57:37] *** Quits: audiocat (~audio@2603-8081-1800-0062-58f8-e9e7-7a3e-e9cc.res6.spectrum.com) (Ping timeout: 272 seconds)
[13:57:41] <n00bn00b> There are any middleware downsides?
[13:58:34] <n00bn00b> why we cant make such thingy like in DRF? Would that middleware be just request processor, which could higly crash the app?
[14:03:06] <apollo13> n00bn00b: why would it crash the app?
[14:03:52] <apollo13> n00bn00b: and it is a little bit harder for django than for DRF because you probably want to exclude the login views etc from that permission etc…
[14:04:39] <apollo13> there also is https://pypi.org/project/django-require-login/#description
[14:15:04] *** Joins: thiras (~thiras@user/thiras)
[14:20:59] <n00bn00b> hmm this looks actually great, I think I would contribute in project because there is some cov issue
[14:21:05] <n00bn00b> thank You again apollo13
[14:26:02] *** Quits: TakinOver (~TakinOver@47.150.206.35) (Remote host closed the connection)
[14:30:49] *** Quits: oblikoamorale (~n@user/oblikoamorale) (Ping timeout: 268 seconds)
[14:31:09] *** Joins: pbgc (~textual@a89-152-234-147.cpe.netcabo.pt)
[14:33:39] *** Joins: oblikoamorale (~n@user/oblikoamorale)
[14:36:33] *** Joins: ras_manny (~ras_manny@196.24.141.56)
[14:47:05] <n00bn00b> btw. I analyzed this project briefly (django-require-login forked from django-stronghold)
[14:47:25] <n00bn00b> and it looks like it is not maintained much imho
[14:48:11] <n00bn00b> also other thing - what do You think about testing regression of project assumptions
[14:49:07] <enkrypt> hello! I'm battling a confusing issue, where a seemingly random set of tests fail with: django.db.utils.InternalError: (167, "Out of range value for column 'id' at row 1")
[14:49:09] <n00bn00b> because ppl seen regressions on the project, and we defensively (imho) *should* test the feature like this (requre login) on our side too
[14:49:12] <enkrypt> I'm running pytest -n4 and I'm using pytest-django.
[14:49:20] <enkrypt> when I then re-run with pytest -n4 --lf often a part of the tests are resolved, and then I run again and usually the remaining ones are solved as well
[14:49:23] <n00bn00b> what you think apollo13 wattux
[14:49:28] <enkrypt> the error is triggered by calling a factory (I'm using factoryboy)
[14:49:34] <enkrypt> running everything without -n4 doesn't solve the problem, so it doesn't seem related to pytest-xdist
[14:49:34] <ras_manny> How do I mock responses to a particular user in my database? I want to create a user account, let's say user A. This account should have access to all views in my app. The app is a matching app so I want the user to automatically have a match once they fill in the required data. The problem is, I don't know what to google to even find a suitable solution
[14:50:27] <n00bn00b> enkrypt: dekrypt :P this is internal error value for column 'id' at row - so does You use lambdas sequence for that?
[14:50:52] <n00bn00b> or are You sure you could create additional objects? (what is the backend and field type?)
[14:51:15] <n00bn00b> ras_manny: responses or data in database? that are different things
[14:51:58] *** Parts: greenhood (~sharan@122.172.182.167) (WeeChat 3.1)
[14:52:27] <wattux> n00bn00b I'm a big fan of writing things yourself (if the task is not heavily out of scope). And something like denying AnonymousUser for all views except one sounds very possible to write it your self, in my eyes. No need for an external package. Did you read through Django docs regarding permissions?
[14:52:27] <wattux> https://docs.djangoproject.com/en/3.2/topics/auth/default/  maybe there's something that comes in handy for you. Middleware is still legit, though
[14:53:22] <wattux> from django.contrib.auth.decorators import login_required
[14:53:56] <enkrypt> n00bn00b: backend field type is BigAutoField, and I'm using mariadb
[14:54:24] <n00bn00b> enkrypt: could You show factory?
[14:54:27] <enkrypt> n00bn00b: I'm not using lambdas I assume the DB handles the auto increment field ?
[14:54:31] <n00bn00b> and the part of test
[14:54:40] <ras_manny> n00bn00b: while the account information of user A will be stored in the db, I want an auto-response to all their activities. Let's take tinder. Usually, two users will have to match each other to be paired. If my user is on tinder, I want them to automatically get a pair when they get to the view that displays the matches
[14:54:52] <enkrypt> n00bn00b: yes. weird thing is, I have different object classes that are almost identical, with identical factory, and they don't exhibit this problem :(
[14:54:55] <n00bn00b> until You do some subfactories - see docs enkrypt or Sequences
[14:55:10] <n00bn00b> afair because I seen sth like that in past I think...
[14:55:30] <enkrypt> maybe I should try to manage the id field on my own with sequences
[14:55:40] <n00bn00b> wattux: that would be nice but there is 2 points to cover
[14:56:30] <enkrypt> n00bn00b: https://dpaste.org/wWUi
[14:56:38] <enkrypt> that's my factory
[14:56:53] <n00bn00b> 1) regression avoidance - I want to test if all the views are login_required, 2) futher changes - wont add login required to each new
[14:56:55] <enkrypt> and it goes wrong on the id column, which is a BigAutoField, and I'm using mariadb.
[14:57:46] <ras_manny> @n00bn00b: do you get what I am describing?
[14:58:20] <n00bn00b> ras_manny: uno momento ;)
[14:58:23] <enkrypt> n00bn00b: this is part of the tests where it goes wrong: https://dpaste.org/P2Ta (there are old django tests, not yet converted to pytest, but you get the idea. the traceback hits whenever I try to use WatcherFactory
[15:01:02] *** Quits: Trieste (~T@user/pilgrim) (Ping timeout: 268 seconds)
[15:01:05] *** Joins: Trieste_ (T@user/pilgrim)
[15:01:31] <n00bn00b> enkrypt: You testing autoincrement?
[15:01:59] <n00bn00b> with the id is "next" \
[15:02:06] <n00bn00b> this is not true for many backends
[15:02:06] *** Joins: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl)
[15:02:27] <enkrypt> it's just an example, a rather dumb and old one
[15:02:31] <n00bn00b> maybe save the date? and make model manager order by that
[15:02:50] <n00bn00b> yeah, but it is sometimes hard to understand dumb things
[15:03:03] <n00bn00b> so rather than fixing remove it and try to write simple test
[15:03:21] <n00bn00b> You should i.e. divide that def test_custom_id_autoincrement_models
[15:03:44] <n00bn00b> because it is about being unittest
[15:04:03] <n00bn00b> why You use
[15:04:10] <n00bn00b> _generate in Factory?
[15:04:21] <n00bn00b> does Your app reaally need that
[15:04:30] <n00bn00b> try to simplify it
[15:04:54] <enkrypt> n00bn00b: yeah that's legacy stuff :( I tried removing the generate() but doesn't help
[15:05:25] <n00bn00b> wattux this was for the requirements, and I have problem with both and dont like that architecture decision how you decide to do or not do sth there:
[15:05:29] <wattux> n00bn00b ok, I guess Middleware will be your best bet then. regarding regression: you can write a test for one view which requires login. if it passes, your middleware functions properly. but you shouldn't need a test per view ^^
[15:05:44] <n00bn00b> wattux: 1) regression avoidance - I want to test if all the views are login_required, 2) futher changes - wont add login required to each new
[15:06:09] <n00bn00b> ok You got it sorry I mentioned to not miss it by You, because I wanted to help Guys
[15:06:18] <n00bn00b> and nobody is seeing no mention while scroling ;)
[15:06:26] <wattux> I know :)  wanted to give you guys some time to settle
[15:08:18] <n00bn00b> enkrypt: see that, try to rewrite model and write 3 lines only simple unittest
[15:08:19] <n00bn00b> https://factoryboy.readthedocs.io/en/stable/recipes.html
[15:08:20] <ras_manny> n00bn00b: ok
[15:09:06] <n00bn00b> ras_manny: so, if there are activities in app, WHY you want to store it in db?
[15:09:16] <n00bn00b> this is conception problem imho
[15:09:37] <ras_manny> i don't want to store it in the database
[15:09:38] <n00bn00b> you could react on the actions from app not from other place
[15:09:59] <n00bn00b> so, if the view would see action do it or spawn the task in some queue
[15:10:03] <n00bn00b> simpliest
[15:10:28] <ras_manny> Yes I can but it will mean that I have to go through each and every one of my views and add a conditional for just that one single user
[15:10:41] <ras_manny> I am looking for an optimal way to avoid doing this
[15:10:55] <n00bn00b> avoid doing... ?
[15:11:51] <ras_manny> Avoid going to each and every single view and simulating a fixed response to just that single user.
[15:12:23] <n00bn00b> what is done for all views? maybe try to settle down and see concept
[15:12:28] <n00bn00b> why it should be everywhere
[15:12:41] *** Quits: emiel (~emiel@2001:981:f73:1:f1b3:24d8:fe26:a3ef) (Ping timeout: 252 seconds)
[15:12:44] <n00bn00b> if should - could You decorate something
[15:12:51] <n00bn00b> to avoid rewriting things
[15:13:39] <ras_manny> ok
[15:14:04] <n00bn00b> or, prepare some example (that could be costly for You but easier to get idea right throug)
[15:14:23] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[15:14:38] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[15:16:41] <ras_manny> Alright, I'll do that
[15:17:43] *** Quits: especial (~especial@cm-84.214.207.74.getinternet.no) (Read error: Connection reset by peer)
[15:18:26] *** Joins: especial (~especial@cm-84.214.207.74.getinternet.no)
[15:20:23] <n00bn00b> wattux: hmm, probably must do it like that... still writing one light "middleware" for new 3.2 django and refactoring only on version raise is better than efing with that problem
[15:20:27] <n00bn00b> cheers
[15:22:02] <n00bn00b> enkrypt: so, check this also https://stackoverflow.com/questions/44262721/mysql-error-167-out-of-range-value-for-column-even-when-it-is-autoincremented#comment75538653_44262805
[15:22:28] *** Joins: MapMan (mapman@user/mapman)
[15:22:39] <n00bn00b> enkrypt: fun that Your test db are not stashing - why?
[15:23:32] <n00bn00b> you should purge all data, pull fixture (x)or make use of factories You had already written, and there have the low IDs
[15:25:23] <enkrypt> n00bn00b: I've put a sequence counter in the factory for the id field, according to the recipe, and that seems to fix the issue. but of course, why don't I need to do that for my other models which are practically identical?
[15:26:21] *** Joins: emiel (~emiel@2001:981:f73:1:9cae:d26f:441d:541e)
[15:27:46] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Quit: = "")
[15:27:53] *** Joins: dodobrain_ (~dodobrain@user/dodobrain)
[15:28:29] <MapMan> Hi! I have a very weird situation where sometimes a foreign relation is not persisted. Here's slimmed down version of my relevant code. https://dpaste.org/1coQ/slim - I'm out of ideas
[15:31:13] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Ping timeout: 244 seconds)
[15:35:25] <n00bn00b> hmm so that was sequence...
[15:35:52] <n00bn00b> enkrypt: I think, because You don't masivelly create them - not yet see the bug
[15:36:14] <n00bn00b> but that waas a while and not see actual code but afaik You cant show more and sorry for not helping more
[15:39:13] <enkrypt> n00bn00b: thanks a lot! :)
[15:40:18] *** Quits: n00bn00b (~N00b@79.184.114.71.ipv4.supernova.orange.pl) (Ping timeout: 240 seconds)
[15:47:47] *** Quits: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl) (Ping timeout: 268 seconds)
[15:57:25] *** Joins: pathos (~pathos@169-1-247-122.ip.afrihost.co.za)
[16:03:47] *** Trieste_ is now known as Trieste
[16:09:11] *** Quits: rannnn8888 (~rannnn888@bzq-79-181-172-10.red.bezeqint.net) (Quit: Client closed)
[16:14:15] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[16:18:20] *** Joins: Adamantike (~adamantik@201.254.79.28)
[16:18:41] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 252 seconds)
[16:22:44] *** Joins: edigiacomo (~edg@host-95-246-58-191.retail.telecomitalia.it)
[16:23:35] *** Quits: edigiacomo (~edg@host-95-246-58-191.retail.telecomitalia.it) (Client Quit)
[16:23:49] *** Joins: edigiacomo (~edg@host-95-246-58-191.retail.telecomitalia.it)
[16:23:51] *** Quits: edigiacomo (~edg@host-95-246-58-191.retail.telecomitalia.it) (Client Quit)
[16:29:26] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi) (Read error: Connection reset by peer)
[16:31:59] *** Quits: ops (~ops@user/echelon) (Ping timeout: 244 seconds)
[16:32:53] *** Joins: brownan (~brownan@136.56.137.143)
[16:35:41] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi)
[16:41:33] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 268 seconds)
[16:42:07] *** Joins: cliluw (~cliluw@47.147.80.149)
[16:48:13] *** Quits: dodobrain_ (~dodobrain@user/dodobrain) (Ping timeout: 268 seconds)
[16:51:37] *** Quits: elena (~elena@202-153-212-80.ca99d4.syd.static.aussiebb.net) (Quit: Client closed)
[16:53:58] *** Quits: pbgc (~textual@a89-152-234-147.cpe.netcabo.pt) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:06:22] *** Joins: explore (uid233125@id-233125.stonehaven.irccloud.com)
[17:10:25] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 244 seconds)
[17:10:49] *** Joins: cliluw (~cliluw@47.147.80.149)
[17:22:54] *** Joins: blackout69 (~blackout6@net-2-38-155-178.cust.vodafonedsl.it)
[17:28:59] *** Joins: pbgc (~textual@a89-152-234-147.cpe.netcabo.pt)
[17:29:40] *** Quits: especial (~especial@cm-84.214.207.74.getinternet.no) (Remote host closed the connection)
[17:30:49] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Quit: Client closed)
[17:31:01] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[17:32:03] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 268 seconds)
[17:32:16] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Client Quit)
[17:32:53] <MapMan> Hi! transaction.on_commit seems to be invoked on a savepoint, not on an outer transaction. Is this normal behaviour?
[17:34:04] <apollo13> MapMan: define "normal" :D might be that noone thought about it
[17:35:13] <apollo13> MapMan: I think it depends on __where__ you register it
[17:35:31] <apollo13> if you register it inside a savepoint it might execute inside that, at least if I understand the code correctly
[17:36:49] <apollo13> ah no I missread, it should only execute at the end
[17:36:59] <apollo13> there is even code to remove on commit hooks when a savepoint rolls back
[17:40:38] <apollo13> MapMan: there is even a testcase to verify that it only commits on the outer transaction https://gist.github.com/apollo13/b533430d004470b5f5ed87a98235cdad
[17:40:49] <apollo13> in tests/transaction_hooks/tests.py
[17:42:28] *** Quits: blackout69 (~blackout6@net-2-38-155-178.cust.vodafonedsl.it) (Quit: Leaving.)
[17:46:18] *** Joins: zcheng3 (~zcheng3@d198-53-38-251.abhsia.telus.net)
[17:46:35] <MapMan> apollo13: hmm, thanks
[17:47:05] <MapMan> I need to scheduled celery task and to me it seems like the on_commit is called on a save point, causing the celery task to start too quickly
[17:51:47] <MapMan> apollo13: https://dpaste.org/L1Mt
[17:51:53] <MapMan> this is the behaviour I'm seeing
[17:52:05] *** Joins: szymon (~ugh@staticline-31-183-187-232.toya.net.pl)
[17:52:27] <apollo13> print('outer committed') <-- that evaluates immediatelly
[17:52:36] <apollo13> you need to submit a callable function
[17:52:52] <apollo13> currently you are submitting None (ie the result of the print call)
[17:53:06] <apollo13> I am surprised that doesn't throw an error
[17:53:30] <apollo13> MapMan: replace your print("asd") with functools.partial(print, "asd") and retry
[17:55:17] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi) (Read error: Connection reset by peer)
[17:56:21] *** Joins: cliluw (~cliluw@47.147.80.149)
[17:56:27] <MapMan> Ok, makes sense about the immediate evaluation (although I think it should raise an error for non callable tbh)
[17:58:46] <MapMan> apollo13: ok thanks, in my original code, I was also passing a function result instead of a callable, that's why I was seeing odd behaviour
[17:59:00] <MapMan> extrelemy confusing tbh
[17:59:10] <apollo13> patches wellcome I guess :)
[17:59:48] <MapMan> should be easy to do it, but who the hell knows what kind of side effects throwing on a non-callable might have
[17:59:52] <apollo13> mhm at least on master it checks for it
[17:59:57] <apollo13> ie
[17:59:57] <apollo13>     def on_commit(self, func):
[17:59:57] <apollo13>         if not callable(func):
[17:59:57] <apollo13>             raise TypeError("on_commit()'s callback must be a callable.")
[18:00:00] <MapMan> (well, django maintainers might know :P)
[18:00:09] <MapMan> oh!
[18:00:17] <MapMan> I'm on 2.2
[18:00:22] <MapMan> will check later when it was added
[18:00:36] <MapMan> gotta run for a meeting now, anyhow, thanks apollo13 you helped me solve my issue
[18:00:51] <apollo13> yeah 2.2 misses that
[18:00:55] <apollo13> and will never get it ;)
[18:00:59] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 252 seconds)
[18:01:12] <apollo13> is not a "critical" bug after all
[18:01:42] <MapMan> > will never get it
[18:01:49] <MapMan> you didn't have to rub it in my face like that
[18:02:01] <MapMan> I wanted to upgrade, I swear!
[18:02:03] <apollo13> oh that was just to answer your next question ;)
[18:09:29] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi)
[18:13:11] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[18:14:36] *** Joins: Guddu (~Guddu@117.222.86.252)
[18:19:26] *** Quits: pbgc (~textual@a89-152-234-147.cpe.netcabo.pt) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:19:44] *** Quits: wattux (~wattux@212.51.23.106) (Ping timeout: 250 seconds)
[18:19:44] *** Joins: pbgc (~textual@a89-152-234-147.cpe.netcabo.pt)
[18:23:12] *** Quits: RealGecko (~RealGecko@67.209.130.250) (Ping timeout: 250 seconds)
[18:26:27] *** Quits: jess (~jess@libera/staff/jess) ()
[18:31:01] *** Quits: emiel (~emiel@2001:981:f73:1:9cae:d26f:441d:541e) (Ping timeout: 244 seconds)
[18:33:23] *** Joins: emiel (~emiel@2001:981:f73:1:9cae:d26f:441d:541e)
[18:33:44] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[18:35:06] *** Quits: henbruas (~henbruas@ti0003a400-3211.bb.online.no) (Ping timeout: 240 seconds)
[18:37:35] *** Joins: henbruas (~henbruas@ti0003a400-3211.bb.online.no)
[18:37:54] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 240 seconds)
[18:39:04] *** Joins: bambanxx (~bambanx@181-163-44-167.baf.movistar.cl)
[18:40:00] *** Joins: gillzon (~oscar@2-249-139-174-no288.tbcn.telia.com)
[18:41:44] *** Quits: mbryant (~mbryantms@1612740-v109.1116-static.plfdilaa.metronetinc.net) (Quit: Leaving)
[18:42:08] <gillzon> Is there any option to add temporary data to model when importing via excel? Currently I'm importing Users first to generate a ID from the database but then I need to somehow store the old ID from the excel but only temporary to know which user data in the excel belongs to the user.
[18:43:05] <fleabag> you can always add a field to the model and remove it later
[18:43:07] <gillzon> And after that I bulk insert all the users but if I add a field that does not exist on the model I got error that it does not expect that temporary value
[18:43:40] *** Quits: emiel (~emiel@2001:981:f73:1:9cae:d26f:441d:541e) (Quit: WeeChat 3.2)
[18:44:02] <gillzon> fleabaq, This is for migrate from another system so it will happen frequently
[18:48:24] <jor> add a table/model that stores that through a (reverse) relation
[18:57:38] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[19:09:07] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[19:17:40] *** Joins: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1)
[19:18:14] *** Joins: slav0nic (slav0nic@python.su)
[19:20:29] *** Joins: teut (~teut@182.69.85.39)
[19:21:18] *** Quits: zcheng3 (~zcheng3@d198-53-38-251.abhsia.telus.net) (Ping timeout: 264 seconds)
[19:21:26] <teut> https://bpa.st/PT2Q
[19:21:39] <teut> well I used copy()  still Iget that error
[19:22:32] <teut> any way to resolve the error?
[19:25:26] <mihael> Man, the 400 error I'm receiving when retrieving static resources on my Django app deployed on AWS Elastic Beanstalk is still not resolved, it has been a day. :(
[19:29:35] *** Quits: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1) (Quit: Client closed)
[19:30:00] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[19:30:12] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[19:31:32] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[19:33:26] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[19:37:46] *** Quits: Batzy (~Batzy12@user/batzy) (Quit: lata)
[19:38:20] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 252 seconds)
[19:41:47] *** Joins: hoppity (~hoppity@user/hoppity)
[19:41:57] *** Joins: DnzAtWrkV2 (~DnzAtWrk@mobile-access-6df0bd-162.dhcp.inet.fi)
[19:42:23] <hoppity> Hi guys, I have two dictrionaries with the same keys but different values. Is there a way to iterate over both on a template?
[19:45:19] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0ec-147.dhcp.inet.fi) (Ping timeout: 272 seconds)
[19:45:56] *** Joins: dundermph (~dundermph@dynamic-acs-24-144-159-194.zoominternet.net)
[19:50:53] *** Joins: andreas303 (andreas303@ip227.orange.bnc4free.com)
[20:01:23] <dundermph> Anybody have experience with a Max Recursion error when using defer?
[20:02:01] <dundermph> https://dpaste.org/1o8W -- This code will work as-is, I've ran into a Max Recursion error when __init__ has TWO fields it's trying to access
[20:03:14] <dundermph> https://dpaste.org/bdXc -- here is the code that errors, I've removed the comment in Person.__init__ and now there are TWO fields it's trying to access vs ONE
[20:04:16] *** Quits: bambanxx (~bambanx@181-163-44-167.baf.movistar.cl) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[20:04:48] <dundermph> I guess I'm more asking to help understand why ONE vs TWO fields causes the recursion error. I see refresh_from_db getting called and from the docs I've read it makes sense because it does that for the field that it doesn't have (first_name), then in the __init__ it looks like it is calling "only" with the field "has_siblings"
[20:05:21] *** Joins: especial (~especial@cm-84.214.207.74.getinternet.no)
[20:05:22] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[20:05:53] <dundermph> Then looks like it's trying to call refresh_from_db on the second field in the __init__ "suffix" with deferred fields having "has_siblings"
[20:06:54] <dundermph> If anybody could confirm that analysis and if this is intended behavior and just poor performance OR if this appears to be an actual bug and I should open a ticket for it?
[20:06:55] <dundermph> Thanks!
[20:07:33] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[20:07:45] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[20:09:03] *** Joins: Ergo^ (~ergo@91.238.59.144)
[20:09:05] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[20:09:26] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[20:10:35] *** Joins: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1)
[20:10:37] *** Joins: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl)
[20:10:42] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[20:11:27] *** Joins: darxun (sid504814@id-504814.tinside.irccloud.com)
[20:11:42] *** Joins: nbao (~nbao@2804:14c:5bb8:9720:ae9e:17ff:fedf:3e09)
[20:13:19] *** Joins: andreas31 (~andreas@gateway/tor-sasl/andreas303)
[20:13:46] *** Quits: Ergo^ (~ergo@91.238.59.144) (Client Quit)
[20:16:33] *** Quits: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1) (Quit: Client closed)
[20:17:50] *** Quits: andreas31 (~andreas@gateway/tor-sasl/andreas303) (Client Quit)
[20:18:20] *** Joins: andreas31 (~andreas@gateway/tor-sasl/andreas303)
[20:19:33] *** Quits: andreas31 (~andreas@gateway/tor-sasl/andreas303) (Client Quit)
[20:23:50] *** Quits: nbao (~nbao@2804:14c:5bb8:9720:ae9e:17ff:fedf:3e09) (Quit: WeeChat 3.1)
[20:25:01] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[20:25:09] <dundermph> Here is a profiler of what's happening query-wise https://dpaste.org/Sq1d
[20:26:10] *** Quits: explore (uid233125@id-233125.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[20:31:32] *** Joins: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1)
[20:32:38] *** Joins: RealGecko (~RealGecko@37.99.33.2)
[20:32:58] *** Quits: RealGecko (~RealGecko@37.99.33.2) (Client Quit)
[20:34:39] *** Quits: andreas303 (andreas303@ip227.orange.bnc4free.com) (Remote host closed the connection)
[20:35:08] *** Joins: andreas3- (andreas303@ip227.orange.bnc4free.com)
[20:36:00] *** Joins: GinFuyou (~GinFuyou@reya.cloud.tilaa.com)
[20:38:06] <mihael> Anyone tried dpeloying Django app on Elastic Beanstalk and getting 400 error when site is retrieving the static files from the S3 bucket? How did you resolve it?
[20:43:17] *** Quits: henbruas (~henbruas@ti0003a400-3211.bb.online.no) (Ping timeout: 268 seconds)
[20:44:23] *** Quits: django-ticketbot (~django-ti@django/ops/ticketbot) (Remote host closed the connection)
[20:44:40] *** Joins: django-ticketbot (~django-ti@django/ops/ticketbot)
[20:45:59] *** Quits: pathos (~pathos@169-1-247-122.ip.afrihost.co.za) (Ping timeout: 252 seconds)
[20:48:09] *** Quits: dundermph (~dundermph@dynamic-acs-24-144-159-194.zoominternet.net) (Remote host closed the connection)
[20:49:03] *** Joins: pathos (~pathos@169-1-247-122.ip.afrihost.co.za)
[20:52:39] *** Quits: andreas3- (andreas303@ip227.orange.bnc4free.com) (Remote host closed the connection)
[20:52:51] *** Joins: andreas303 (andreas303@ip227.orange.bnc4free.com)
[20:55:44] *** Quits: gillzon (~oscar@2-249-139-174-no288.tbcn.telia.com) (Quit: Leaving)
[21:00:08] *** Quits: DnzAtWrkV2 (~DnzAtWrk@mobile-access-6df0bd-162.dhcp.inet.fi) (Read error: Connection reset by peer)
[21:01:22] *** Joins: DnzAtWrkV2 (~DnzAtWrk@mobile-access-6df0bd-162.dhcp.inet.fi)
[21:02:45] *** Quits: DnzAtWrkV2 (~DnzAtWrk@mobile-access-6df0bd-162.dhcp.inet.fi) (Read error: Connection reset by peer)
[21:03:49] *** Quits: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1) (Quit: Client closed)
[21:07:30] *** Quits: GiLgAmEzH (~gilgamezh@186.19.69.139) (Ping timeout: 264 seconds)
[21:18:19] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[21:23:17] *** Quits: theorangeone (~quassel@host86-191-183-30.range86-191.btcentralplus.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[21:23:30] *** Joins: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1)
[21:28:09] *** Quits: andreas303 (andreas303@ip227.orange.bnc4free.com) (Remote host closed the connection)
[21:28:32] *** Joins: andreas303 (andreas303@ip227.orange.bnc4free.com)
[21:31:05] *** Quits: Crovax31 (~quassel@91-167-5-217.subs.proxad.net) (Ping timeout: 272 seconds)
[21:31:39] *** Quits: andreas303 (andreas303@ip227.orange.bnc4free.com) (Remote host closed the connection)
[21:32:02] *** Joins: andreas303 (andreas303@ip227.orange.bnc4free.com)
[21:32:15] *** Joins: theorangeone (~quassel@host86-191-183-30.range86-191.btcentralplus.com)
[21:33:44] <teut> https://pypi.org/project/django-pandas/   can someone help with this?
[21:34:26] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[21:34:53] *** Joins: Thanatos (~Thanatos@197.210.44.249)
[21:36:49] *** Joins: sed (~sed@pool-100-7-53-231.rcmdva.fios.verizon.net)
[21:40:40] <teut> https://bpa.st/2ROA#1L93   this is the error I m getting
[21:41:12] *** Joins: dudek (~dudek@185.150.236.112)
[21:41:19] *** Joins: stabler (~stabler@87-50-3-146-cable.dk.customer.tdc.net)
[21:41:34] *** Quits: dudek (~dudek@185.150.236.112) (Remote host closed the connection)
[21:42:15] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[21:43:18] <sed> anyone here use kubernetes for their django app?
[21:44:33] *** Joins: ST47 (~ST47@user/st47)
[21:45:58] *** Joins: cliluw (~cliluw@47.147.80.149)
[21:47:41] *** Joins: blackout69 (~blackout6@net-2-38-155-178.cust.vodafonedsl.it)
[22:00:12] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Remote host closed the connection)
[22:03:51] *** Joins: Batzy (~Batzy@user/batzy)
[22:13:12] *** Quits: blackout69 (~blackout6@net-2-38-155-178.cust.vodafonedsl.it) (Ping timeout: 268 seconds)
[22:13:19] *** Quits: szymon (~ugh@staticline-31-183-187-232.toya.net.pl) (Ping timeout: 268 seconds)
[22:14:30] *** Joins: szymon (~ugh@staticline-31-183-187-232.toya.net.pl)
[22:14:51] *** Quits: szymon (~ugh@staticline-31-183-187-232.toya.net.pl) (Remote host closed the connection)
[22:18:45] *** Quits: stabler (~stabler@87-50-3-146-cable.dk.customer.tdc.net) (Ping timeout: 268 seconds)
[22:22:22] *** Joins: explore (uid233125@id-233125.stonehaven.irccloud.com)
[22:25:45] *** Quits: Catatonic (~Catatonic@ariel.whatbox.ca) (Quit: Quit)
[22:25:53] *** Quits: mihael (~mihael@2001:4454:29d:cb00:eddd:71ee:957c:b0a1) (Quit: Client closed)
[22:25:59] *** Joins: Catatonic (~Catatonic@ariel.whatbox.ca)
[22:28:16] *** Joins: daveb (~daveb@2603-7081-4f43-6c00-2d03-0a7e-6fbc-5ad7.res6.spectrum.com)
[22:29:25] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[22:33:03] *** Quits: slavfox (~slavfox@ipv4-93-158-232-111.net.internetunion.pl) (Quit: ZNC 1.8.2 - https://znc.in)
[22:33:22] *** Quits: especial (~especial@cm-84.214.207.74.getinternet.no) (Remote host closed the connection)
[22:33:39] *** Quits: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912) (Ping timeout: 244 seconds)
[22:36:23] *** Joins: slavfox (~slavfox@93.158.232.111)
[22:40:40] *** Joins: diek (~diek@2804:14d:7681:82bd:7183:d2c9:d4f8:912)
[22:52:00] *** Joins: zBeeble42 (~zBeeble@207.136.105.200)
[22:54:53] *** Quits: zBeeble (~zBeeble@2001:1928:1::35) (Ping timeout: 272 seconds)
[23:00:41] *** Quits: pbgc (~textual@a89-152-234-147.cpe.netcabo.pt) (Ping timeout: 268 seconds)
[23:02:17] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[23:04:13] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Client Quit)
[23:04:26] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[23:08:46] *** Quits: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net) (Ping timeout: 250 seconds)
[23:13:40] *** Joins: blackleitus (~blackleit@189.195.192.244)
[23:14:01] <blackleitus> let's say I have the following function, but I want to update the field has_exploit at the same time , I perform the import if the vulnerability_id matches with the current dataset update the field only not the row
[23:14:01] <blackleitus>  https://dpaste.org/6UHj
[23:17:11] <GinFuyou> blackleitus, what part are we talking about and what is the problem at hand?
[23:18:49] *** Quits: zBeeble42 (~zBeeble@207.136.105.200) (Read error: Connection reset by peer)
[23:19:12] *** Quits: browniebroke (uid501792@id-501792.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[23:19:30] *** Joins: zBeeble42 (~zBeeble@2001:1928:1::35)
[23:19:56] *** Joins: Crovax31 (~quassel@2a01:e0a:85:33d0:eb5a:d3b5:1e1a:9de9)
[23:30:06] <blackleitus> I want to perform a bulk create about all `data` varible being ingested to database, but also if the vulnerability is linked to a `html_url` which means it contains a exploit then update vulnerability data as has_exploit or something like that
[23:30:10] <blackleitus> GinFuyou,
[23:32:01] <GinFuyou> And the problem is ...?
[23:33:47] <blackleitus> how do I merge both in a single query?
[23:34:10] <blackleitus> I dont have to have a get_or_Create then get_or_update then bulk_create
[23:34:22] <GinFuyou> You can't
[23:34:59] <GinFuyou> At least in orm. I doubt about sql, but I'm not good with it.
[23:35:20] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 244 seconds)
[23:38:08] <wallbroken> is there a way to show in the template the current logged user?
[23:38:32] <blackleitus> GinFuyou, do I Have to create 3 orm instances? create , update then bulk?
[23:38:34] <wallbroken> i want to add in the top bar: "welcome, <username>"
[23:39:33] <GinFuyou> blackleitus, orm instances? what is that? not sure why you need create\update\bulk, you already seem to have a vulnerability, no?
[23:39:51] <GinFuyou> wallbroken, yes, 'user' is already in context
[23:40:01] *** Joins: DillonB07 (~DillonB07@cpc123410-leic20-2-0-cust892.8-1.cable.virginm.net)
[23:40:09] *** Quits: Thanatos (~Thanatos@197.210.44.249) (Ping timeout: 268 seconds)
[23:40:18] <wallbroken> GinFuyou: so, i just need to add { user } ?
[23:40:22] <GinFuyou> you may want to check if user is authenticated
[23:41:03] <blackleitus> I have exploit table where it pushes data from a current dataset if matches `vulnerability_id` , but I also want to update a has_exploit field from `vulnerability` table if html_url is not empty
[23:41:53] <GinFuyou> so which object has to be updated? That one you have as vulnerability_id? Or other?
[23:42:40] <GinFuyou> anyway I don't see why you'd need more than 2 ORM actions for it, most likely a single one
[23:42:42] <blackleitus> vulnerability_id is just a identifier relationship of exploit to vulnerability , but I want to flag as has_exploit=true when `exploit_url` is not empty
[23:42:49] <wallbroken> FunkyBob: <a { 'user' }></a>
[23:42:53] <wallbroken> something like this?
[23:43:02] <wallbroken> <a> { 'user' }</a>
[23:44:04] *** Joins: Thanatos (~Thanatos@197.210.44.249)
[23:44:19] <GinFuyou> blackleitus, so is it yes or no? I still not seeing what object(s) has to be updated
[23:44:39] <GinFuyou> wallbroken, well, "like" except check syntax again
[23:44:59] <wallbroken> what?
[23:45:32] *** Quits: daveb (~daveb@2603-7081-4f43-6c00-2d03-0a7e-6fbc-5ad7.res6.spectrum.com) (Quit: Client closed)
[23:45:42] <blackleitus> `has_exploit` in a object from vulnerability table which I want to update at the same time is done exploit pushes
[23:45:56] *** Joins: chrysanthematic (~chrysanth@109.70.150.245)
[23:45:59] <GinFuyou> which object?
[23:46:22] <blackleitus> `has_exploit`
[23:46:24] <wallbroken> GinFuyou: it's not really clar
[23:46:49] <blackleitus> `has_exploit` is a field in the database which is false by default
[23:47:06] <GinFuyou> blackleitus, field on what row?
[23:47:17] <GinFuyou> You have an object in the code? That one?
[23:47:39] <GinFuyou> wallbroken, it's not correct template language syntax
[23:47:44] <blackleitus> no yet , but I told you in vulnerability table
[23:48:23] <GinFuyou> I got that part. So you want get_or_create() it?
[23:49:03] <wallbroken> GinFuyou: https://dpaste.org/xhZB
[23:49:08] <wallbroken> that's right?
[23:49:20] <blackleitus> I want to update to true if `html_url` contains data
[23:49:25] <GinFuyou> or update_or_create()  rather
[23:49:57] <blackleitus> is possible to merge this two queries in one? https://dpaste.org/1Mrz
[23:50:12] <GinFuyou> wallbroken, yes that looks rigt
[23:51:12] *** Quits: Crovax31 (~quassel@2a01:e0a:85:33d0:eb5a:d3b5:1e1a:9de9) (Remote host closed the connection)
[23:51:19] <GinFuyou> blackleitus, I don't see 2 queries, only 1?
[23:52:10] <GinFuyou> If you mean with Vulnerability object, no, as I said, I don't think it's fundamentally possible
[23:53:26] <blackleitus> so I will need first to push exploit data linked to a vuln and then update if has or no exploit?
[23:53:37] <blackleitus> or reverse
[23:54:37] <hylje> you can't insert into two tables in one query, HOWEVER, you can wrap them in a transaction so they behave as if it was just one query
[23:54:42] <GinFuyou> Yes, what is problem doing it in 2 queries?
[23:55:25] <GinFuyou> Right, if it's what you are after, you can wrap it in an transaction.atomic()
[23:55:54] <blackleitus> hylje, how can I do this?
