[01:01:31] *** Joins: raptelan (~raptelan@208.127.242.46)
[01:02:41] *** Quits: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[01:02:46] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[01:04:42] *** Quits: lechner (~lechner@debian/lechner) (Ping timeout: 252 seconds)
[01:04:56] *** Joins: kid (~kid@0.80-203-56.customer.lyse.net)
[01:04:56] *** Quits: kid (~kid@0.80-203-56.customer.lyse.net) (Changing host)
[01:04:56] *** Joins: kid (~kid@user/kid)
[01:05:49] *** Quits: wyre (~wyre@user/wyre) (Quit: ZNC 1.8.2 - https://znc.in)
[01:06:04] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[01:06:35] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[01:07:40] *** Joins: wyre (~wyre@user/wyre)
[01:08:37] *** Quits: foul_owl (~kerry@23.82.193.87) (Ping timeout: 240 seconds)
[01:08:38] *** Quits: kid (~kid@user/kid) (Read error: Connection reset by peer)
[01:09:12] *** Joins: Exuma (~Exuma@47-208-155-156.erkacmtk03.res.dyn.suddenlink.net)
[01:09:35] <Exuma> I'm trying to make a cohort query, the problem is i want to turn it into a materialized view which has the data required for every (source, company_id) which are the 2 input variables that dictate what leads show in the cohort
[01:09:49] <Exuma> if i hardcode them into my VERY large query, it makes sense in my head the problem is i cant put that into a materalized view
[01:10:10] <Exuma> liekwise i could use a regular view and pass the values in dynamically in code but that will run the live query every time, which would be too slow
[01:10:33] <Exuma> i guess my mind just gets lost trying to think of hw i would make a matview of timeframes which is also broken out by source and company id
[01:10:37] <Exuma> it is very mind warping
[01:10:59] *** Joins: Slade (uid128877@user/slade)
[01:11:01] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:12:43] *** Joins: mlu (~mlu@user/mlu)
[01:13:24] <mlu> so I need to quickly setup an web admin type interface for some people: what's cool these days? (i.e. any better options than PhpPgAdmin?)
[01:14:38] <Myon> omnidb
[01:16:10] * mlu looks
[01:21:32] *** Quits: gambl0re (~gambl0re@45.72.228.31) (Ping timeout: 240 seconds)
[01:23:23] *** Joins: maciek__ (~maciek@2600:1700:a412:1c00:6156:f568:69b8:b018)
[01:23:46] *** Joins: foul_owl (~kerry@174-21-69-110.tukw.qwest.net)
[01:25:48] *** Quits: harrycs (~hcs@ool-457199f2.dyn.optonline.net) (Ping timeout: 240 seconds)
[01:25:49] *** Joins: Tenchi (~Tenchi@user/tenchi)
[01:27:59] *** Quits: fcr (~fran@r186-48-169-85.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[01:31:24] *** Quits: darkbit (~db@152.32.100.99) (Ping timeout: 240 seconds)
[01:32:51] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 245 seconds)
[01:34:39] *** Joins: fcr (~fran@r167-56-97-52.dialup.adsl.anteldata.net.uy)
[01:34:50] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[01:34:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[01:35:02] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[01:36:36] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[01:37:42] *** Joins: gambl0re (~gambl0re@45.72.228.31)
[01:38:51] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[01:38:54] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[01:38:55] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[01:39:56] *** Joins: held (~heldchen@user/held)
[01:40:18] *** Quits: andyewen (~andyewen@91.110.2.87) (Quit: Leaving)
[01:41:02] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[01:41:39] *** Quits: Exuma (~Exuma@47-208-155-156.erkacmtk03.res.dyn.suddenlink.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:43:41] *** Quits: heldchen (~heldchen@user/held) (Ping timeout: 245 seconds)
[01:48:01] *** Quits: seabre_ (~seabre@user/seabre) (Quit: ZNC 1.8.2 - https://znc.in)
[01:49:28] *** Joins: seabre (~seabre@user/seabre)
[01:50:21] *** Quits: gambl0re (~gambl0re@45.72.228.31) (Ping timeout: 252 seconds)
[01:50:38] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[01:50:55] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[01:51:57] <raptelan> phpPgAdmin is a great UI IMHO, just unfortunately written in messy PHP and not well-maintained.  I once modified it to work properly with EnterpriseDB, years ago, and that exercise made me really want to rewrite the whole thing in another language. :P
[01:53:10] <teresko> raptelan: hell, it would be nice enough if it was rewritten in PHP that is **not** from 2003
[01:53:21] <raptelan> I still use it when I want to provide people with a web UI, though I fortunately no longer have to mess with EDB.  My main gripe is the configuration being done in a PHP file rather than something like YAML which would be easier to automate.
[01:53:28] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[01:53:58] <raptelan> teresko: Probably so.  I haven't used PHP much at all since around that time myself though, so not sure how it's come along as a language.
[01:54:26] <raptelan> But even in 2003, one could write more elegant PHP. ;)
[01:54:58] <teresko> for sense of scale, phpphadmin's code is basically worse than your awerage wordpress code
[01:55:55] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:57:02] *** Quits: magla (~gelignite@d5363125.access.ecotel.net) (Quit: Stay safe!)
[01:57:41] <teresko> I might need to pick it up as a project ... but I am very likely to drop it a week later
[02:00:04] <nbjoerg> pgadmin is a webapp nowadays
[02:00:19] <nbjoerg> no idea how difficult it is to set it up on a server
[02:01:14] <teresko> pgadmin seems to have a but different focus
[02:03:41] *** Joins: Tenchi (~Tenchi@user/tenchi)
[02:03:46] <raptelan> I hate pgAdmin. :(
[02:04:15] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[02:05:00] <bomb> why do you hate pgAdmin?
[02:05:33] <raptelan> Because of the UI/UX, especially since v4.
[02:05:59] <teresko> it does look like arse
[02:07:57] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[02:09:22] *** Joins: schinckel (uid38120@user/schinckel)
[02:12:10] *** Joins: kid (~kid@0.80-203-56.customer.lyse.net)
[02:12:10] *** Quits: kid (~kid@0.80-203-56.customer.lyse.net) (Changing host)
[02:12:10] *** Joins: kid (~kid@user/kid)
[02:12:21] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 252 seconds)
[02:12:49] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[02:15:18] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[02:16:34] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[02:17:11] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[02:17:13] *** Joins: Melamo (~Melamo@2601:1c0:7000:7300:9903:90b:c74e:236d)
[02:18:21] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[02:18:51] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[02:19:17] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[02:19:42] <Melamo> It appears `CREATE SUBSCRIPTION` cannot be executed from a plpgsql function. Is there a common strategy for conditionally creating a subscription in PG?
[02:20:41] *** Quits: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca) (Ping timeout: 256 seconds)
[02:21:39] <Melamo> The larger idea here is there is a migration file that looks at the envrionment, and either creates a subscription or a publication.
[02:25:13] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:27:09] *** Joins: maxzor (~maxzor@2a01cb04054faa00996bd0b5db51ef1b.ipv6.abo.wanadoo.fr)
[02:28:50] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 252 seconds)
[02:32:26] *** Joins: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca)
[02:32:36] *** Joins: Tenchi (~Tenchi@user/tenchi)
[02:33:05] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Read error: Connection reset by peer)
[02:33:06] *** Joins: dionysus70 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[02:34:03] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[02:34:20] *** Joins: concrete-houses (~g@209.6.150.53)
[02:34:23] *** Quits: JanC (~janc@user/janc) (Read error: Connection reset by peer)
[02:34:37] *** Joins: JanC (~janc@user/janc)
[02:34:42] <concrete-houses> how can I see what queries are runnning?  I have a script but it shows someold queries as idle
[02:34:55] <concrete-houses> a db is overlaoded and I cant figure out what queries
[02:34:58] <concrete-houses> are dogging it
[02:35:25] *** dionysus70 is now known as dionysus69
[02:35:36] <concrete-houses> How do i say what queries are runnning?
[02:35:43] <concrete-houses> at sql command line
[02:35:55] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Ping timeout: 240 seconds)
[02:36:36] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 240 seconds)
[02:36:46] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[02:37:05] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[02:37:47] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:38:15] *** Joins: Tenchi (~Tenchi@user/tenchi)
[02:38:31] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.4)
[02:39:56] *** Joins: cliluw (~cliluw@47.147.77.43)
[02:40:51] *** Quits: Auron (Auron956@user/auron) (Remote host closed the connection)
[02:42:18] *** Quits: maxzor (~maxzor@2a01cb04054faa00996bd0b5db51ef1b.ipv6.abo.wanadoo.fr) (Quit: Leaving)
[02:43:08] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[02:43:20] *** Joins: dre (~dre@2001:8003:c932:c301:70ee:1824:1d7e:5401)
[02:48:15] <cliluw> After I pg_dump and pg_restore a database, I notice that it seems to take up more space. What are some possible reasons for this?
[02:49:37] *** Quits: ferz (~ferz@93-39-142-165.ip76.fastwebnet.it) (Ping timeout: 240 seconds)
[02:50:47] <nbjoerg> concrete-houses: see pg_stat_activity
[02:51:06] *** Joins: Atque (~Atque@user/atque)
[02:51:06] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[02:51:17] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[02:54:09] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[02:55:35] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 256 seconds)
[02:55:44] <concrete-houses> if those are all idel
[02:55:53] <concrete-houses> what is running on the db?
[02:57:18] *** demonspork_ is now known as demonspork
[02:58:08] <ilmari_> Then nothing was running at that moment. If you want to know which queries are taking time over time, look at the pg_stat_statements extension
[03:02:33] <concrete-houses> I can do that
[03:02:46] <concrete-houses> but this programmer on the meeting is liek the db box si 100% cpu
[03:02:58] <concrete-houses> why cant you show me the active query
[03:03:08] <concrete-houses> I am struggling
[03:03:33] <nbjoerg> well, is it pg that is keeping the box loaded?
[03:03:47] <concrete-houses> SELECT pid, now() - pg_stat_activity.query_start AS duration, query, state
[03:03:47] <concrete-houses> FROM pg_stat_activity
[03:03:48] <concrete-houses> WHERE (now() - pg_stat_activity.query_start) > interval '5 minutes';
[03:04:09] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[03:05:35] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[03:07:01] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 240 seconds)
[03:10:03] *** Quits: michalz (~michalz@185.246.204.40) (Remote host closed the connection)
[03:11:16] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:12:16] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[03:12:59] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 268 seconds)
[03:13:34] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[03:14:24] *** Joins: lechner (~lechner@debian/lechner)
[03:15:16] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb)
[03:17:15] *** Joins: Tenchi (~Tenchi@user/tenchi)
[03:20:46] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[03:22:27] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[03:22:38] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:23:25] <concrete-houses> yes I thik so
[03:23:57] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb) (Ping timeout: 240 seconds)
[03:25:06] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb)
[03:26:32] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[03:29:54] *** Quits: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636) (Ping timeout: 260 seconds)
[03:30:56] <concrete-houses> If all the queries are idle...... yet AWS panel shows box under load
[03:31:09] <concrete-houses> I mean how do I see what queries are hitting the db?
[03:31:36] <concrete-houses> If that pg_stat_activity query shows all idle........ what is going on?
[03:32:05] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb) (Ping timeout: 252 seconds)
[03:34:03] *** Joins: dsrt^ (~dsrt@96-67-120-105-static.hfc.comcastbusiness.net)
[03:34:50] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb)
[03:36:17] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Ping timeout: 240 seconds)
[03:37:20] *** Joins: cs (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec)
[03:37:32] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 240 seconds)
[03:40:37] *** Quits: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Ping timeout: 240 seconds)
[03:44:14] *** Quits: Melamo (~Melamo@2601:1c0:7000:7300:9903:90b:c74e:236d) (Quit: Client closed)
[03:44:16] <concrete-houses> i must be missing something
[03:44:23] <concrete-houses> or thinking incorrectly
[03:44:40] *** Joins: Tenchi (~Tenchi@user/tenchi)
[03:51:51] <buu> concrete-houses: it's a non database process?
[03:52:12] *** Quits: TomTom (uid45892@id-45892.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[03:53:00] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 252 seconds)
[03:55:35] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:59:06] *** Joins: Tenchi (~Tenchi@user/tenchi)
[04:00:46] *** Quits: pedja_hpmini (~pedja_hpm@109-93-189-123.dynamic.isp.telekom.rs) (Quit: Leaving)
[04:03:08] *** Joins: Xgc (~Xgc@user/xgc)
[04:07:17] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb) (Ping timeout: 252 seconds)
[04:08:33] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb)
[04:10:41] <concrete-houses> cloud really is not fun
[04:11:28] <concrete-houses> so any running query will show in pg_stat_activity and if they are all idle then how can a db vm be under load?  are the queries executing so fast they dont show?
[04:14:35] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 256 seconds)
[04:15:49] *** Quits: dre (~dre@2001:8003:c932:c301:70ee:1824:1d7e:5401) (Ping timeout: 240 seconds)
[04:18:53] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb) (Ping timeout: 256 seconds)
[04:19:54] *** Joins: gambl0re (~gambl0re@cpe688f2e1852a3-cm688f2e1852a0.cpe.net.cable.rogers.com)
[04:20:34] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[04:20:58] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:21:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[04:25:21] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 256 seconds)
[04:25:41] *** Quits: gambl0re (~gambl0re@cpe688f2e1852a3-cm688f2e1852a0.cpe.net.cable.rogers.com) (Ping timeout: 256 seconds)
[04:27:39] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[04:27:48] *** Quits: Reiner_Unsinn (~quassel@p5dd47daa.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[04:28:18] *** Joins: ConfusedFrog (~ConfusedF@186.4.23.199)
[04:28:43] *** Joins: Tenchi (~Tenchi@user/tenchi)
[04:29:18] <ConfusedFrog> I have a very confusing deadlock detected error.  A transaction updates a single row 2 times, and on the *second* time it's giving a deadlock error
[04:29:34] <ConfusedFrog> I would have thought this is impossible? When you update a row, don't you have a sharedlock on the row until the end of the transaction?
[04:30:09] <ConfusedFrog> Or does postgres ever release the row level  lock  mid transaction?
[04:33:37] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:33:50] *** Quits: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br) (Ping timeout: 260 seconds)
[04:34:11] <johto> the two cases where those can happen are either foreign key checks or an upgrade from a "NO KEY UPDATE" to a full row lock
[04:34:23] *** Joins: Tenchi (~Tenchi@user/tenchi)
[04:35:57] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[04:39:15] <ConfusedFrog> I am doing  UPDATE tbl SET random_column = $1 WHERE  foreign_key = $2; ...  But I never actually modify the foreign key
[04:39:34] <ConfusedFrog> I assume that query doesn't take any foreign key locks?
[04:40:26] *** Joins: z_lehinsun (~lehinsun@188.113.178.220)
[04:40:44] *** Quits: z_lehinsun (~lehinsun@188.113.178.220) (Remote host closed the connection)
[04:41:52] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[04:42:10] <johto> it will actually on the second UPDATE
[04:43:37] <ConfusedFrog> Interesting. Could you explain a bit more?
[04:43:39] <ConfusedFrog> i don't get it
[04:44:24] *** Quits: ivii (~ivan@user/ivii) (Remote host closed the connection)
[04:45:06] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[04:45:10] <johto> https://github.com/postgres/postgres/blob/315ae75e9b6da72456eaa44e55ace9ab1b95ef74/src/backend/utils/adt/ri_triggers.c#L1322
[04:48:28] <ConfusedFrog> So imagine my (single) transaction looks like this:
[04:48:29] <ConfusedFrog> UPDATE tbl SET random_column = random_column+1 WHERE  foreign_key = $2 RETURNING id; -- NOTE: foreign-key is unique, so this only returns 1 row
[04:48:29] <ConfusedFrog> UPDATE tbl SET random_column = random_column+1 WHERE id = $1; -- id from previous query
[04:48:40] <ConfusedFrog> The 2nd query is going to cause a lock on the foreign key?
[04:48:56] *** Joins: funhouse (~funhouse@user/funhouse)
[04:48:59] <ConfusedFrog> Also `id` is the primary key of this table
[04:49:01] <funhouse> I have this weird process
[04:49:05] <johto> ConfusedFrog; yes
[04:49:11] <funhouse>    6699 postgres  20   0 2438780   2.3g      4 S 199.0  59.7   7772:46 ub0r2ayc
[04:49:15] <funhouse> Anyone know what that is?
[04:49:19] <funhouse> 200% cpu
[04:49:36] <johto> funhouse; I would guess someone hacked your postgres
[04:49:51] <funhouse> johto i have the port closed off
[04:50:07] <ConfusedFrog> johto thanks very much, you're a genius =)
[04:51:13] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:51:58] <funhouse> ??paste
[04:51:58] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[04:51:59] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[04:53:19] <funhouse> Heres the processes
[04:53:20] <funhouse> https://paste.depesz.com/s/esU
[04:54:42] <funhouse> Is there a way to check connections to my server?
[04:55:14] *** Joins: Tenchi (~Tenchi@user/tenchi)
[04:55:25] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[04:58:24] *** Joins: ur5us_ (~ur5us@2406:e002:6888:2f01:d8fb:5ff2:7baf:1c2c)
[05:01:32] *** Quits: ConfusedFrog (~ConfusedF@186.4.23.199) (Quit: Connection closed)
[05:03:31] *** Joins: karabaja4 (~karabaja4@dh207-94-81.xnet.hr)
[05:03:37] *** Quits: foul_owl (~kerry@174-21-69-110.tukw.qwest.net) (Ping timeout: 240 seconds)
[05:04:39] <raptelan> concrete-houses: The problem is that you're filtering out any queries executing in less than 5 minutes, and that's an extremely long time.  Take that filter out, and add `where state = 'active'` instead.
[05:05:51] <raptelan> Something like this will show the longest-runners first without hiding any active queries:  select * from pg_stat_activity where state = 'active' order by now() - query_start desc;
[05:06:11] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[05:07:22] <raptelan> funhouse: netstat
[05:07:35] <funhouse> raptelan i mean like in psql
[05:07:58] <raptelan> postgres connections?  sure, pg_stat_activity.
[05:09:12] <raptelan> That process probably has nothing to do with the database though other than it's being run as that user.  Perhaps that system account has some ssh key trust or weak password or something.
[05:09:41] <concrete-houses> raptelan thank you
[05:10:07] *** Joins: w_lehinsun (~lehinsun@188.113.178.220)
[05:10:08] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Read error: Connection reset by peer)
[05:12:17] <concrete-houses> If I have 10 databases in a cluster, how do I setup a role so someone can only login and use 1 of the databases?
[05:12:27] <concrete-houses> roles seem to be cluster wide
[05:12:33] *** Joins: jazzy2 (~jaziz@user/jaziz)
[05:12:54] <concrete-houses> then when I restore from prod cluster to staging how do I have it not fail due to missing roles?
[05:13:04] *** Quits: rufito (~phil@186-79-24-4.baf.movistar.cl) (Quit: Leaving)
[05:14:27] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 250 seconds)
[05:15:27] *** Quits: mp4 (misha@user/mp3) (Quit: ircII EPIC5-2.1.6 -- Are we there yet?)
[05:15:27] *** Quits: Tenchi (~Tenchi@user/tenchi) (Read error: Connection reset by peer)
[05:18:38] *** Joins: Tenchi (~Tenchi@user/tenchi)
[05:18:53] *** Joins: foul_owl (~kerry@23.82.193.88)
[05:19:54] *** Quits: n0fun_ (~jack@mue-88-130-48-098.dsl.tropolys.de) (Ping timeout: 252 seconds)
[05:19:55] *** Quits: monstar (~monstar@gateway/tor-sasl/monstar) (Ping timeout: 240 seconds)
[05:24:06] <raptelan> concrete-houses: correct, roles are cluster-wide.  But you only would grant each role connect privilege to the appropriate database(s).
[05:24:24] <raptelan> ...and revoke connect from public (everyone) if you have that granted.
[05:27:00] <raptelan> I was thinking about this today actually - I seem to remember that at some point PostgreSQL had a configuration or initdb option or something to make roles per-database instead of global, but I couldn't confirm that so I am probably mixed up with something else.
[05:35:38] <raptelan> Must have been something else, but/because there's this:  https://wiki.postgresql.org/wiki/Database-specific_role_memberships_proposal
[05:38:02] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[05:39:01] *** Quits: Bebef (sbreit@phobos.bebef.de) (Quit: bye)
[05:42:58] *** Quits: tozhu (~tozhu@221.237.139.15) (Quit: tozhu)
[05:43:38] *** Joins: Bebef (sbreit@phobos.bebef.de)
[05:45:15] *** Quits: blaklistd (~blaklistd@user/blaklistd) (Quit: au revoir)
[05:45:45] *** Joins: blaklistd (~blaklistd@user/blaklistd)
[05:48:40] *** Quits: RonWhoCares_ (~ronpi@104.158.0.91) (Quit: Konversation terminated!)
[05:48:58] *** Joins: RonWhoCares_ (~ronpi@104.158.0.91)
[05:49:24] *** Quits: MrZeus_ (~MrZeus@81.92.205.23) (Ping timeout: 240 seconds)
[05:49:27] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Read error: Connection reset by peer)
[05:49:41] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[05:50:11] *** Joins: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[05:50:42] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[05:55:06] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[05:55:11] <dfg> any tips on how i might improve this query plan? https://explain.dalibo.com/plan/TBD#plan  i can provide schema if interested
[05:59:08] *** Quits: Tenchi (~Tenchi@user/tenchi) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:59:09] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[05:59:30] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb)
[06:00:36] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[06:02:35] <raptelan> dfg: "Execution time : 0.216 ms" - what's wrong with it?
[06:04:01] <dfg> i only have a really tiny data set right now, but i was looking at the analysis from the site where it says "cost is high" "bad estimation for rows" and such and wondered what i could improve
[06:04:41] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[06:05:14] <dfg> i should probably make a bunch of dummy data to really stress test...
[06:07:13] <raptelan> Unless there's a pretty wild difference like expected 3 rows but there were actually 146,693 I wouldn't worry about it.  But unless you have a lot of data you have no idea how your query will perform (or what plan it will use) when you do.
[06:08:21] <raptelan> Unless something is slow enough to be a problem, it's not a problem.  #PrematureOptimization :P   It is good to test with actual expected data volume if possible though.
[06:08:37] *** Joins: rednul_ (~rednul@098-127-226-233.biz.spectrum.com)
[06:09:23] <raptelan> row count expected 3 but actual 0 doesn't matter one iota.
[06:09:49] <raptelan> The only time it matters is when the difference is so large that the planner ends up choosing a plan based on the wrong estimate that makes it perform really terrible with the actual data.
[06:11:09] <raptelan> It's a good idea to increase default_statistics_target from the default to help avoid bad estimates.
[06:11:59] *** Joins: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br)
[06:12:27] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[06:13:47] <raptelan> also you should analyze the underlying tables before running the query.  Autoanalyze will only run when a certain volume of data in the table has changed, and depending on your configuration, might take a bit to catch up..
[06:14:42] *** Quits: w_lehinsun (~lehinsun@188.113.178.220) (Read error: Connection reset by peer)
[06:19:28] *** Quits: sgen (~sgen@2607:fea8:7ce1:c8e0:a992:a734:d5e:8b54) (Remote host closed the connection)
[06:21:07] <dfg> thanks, this is very helpful
[06:21:50] *** Quits: giok (~WildRose@2001:470:6881:c0ff:ee::1) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[06:23:02] *** Quits: cs (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Ping timeout: 240 seconds)
[06:23:41] *** Quits: kakashiAL (~kakashi@41.251.24.2) (Ping timeout: 245 seconds)
[06:23:48] *** Quits: bomb (~bomb@user/bomb) (Quit: ‎)
[06:24:11] *** Quits: evdubs_ (~evdubs@user/evdubs) (Read error: Connection reset by peer)
[06:24:39] *** Joins: giok (~WildRose@2001:470:6881:c0ff:ee::1)
[06:24:51] *** Joins: evdubs_ (~evdubs@user/evdubs)
[06:25:22] *** Joins: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec)
[06:25:44] *** Quits: DarkG (~DarkG@user/darkg) (Excess Flood)
[06:25:56] *** Joins: DarkG (~DarkG@user/darkg)
[06:26:22] *** Joins: tozhu (~tozhu@171.92.69.204)
[06:26:52] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[06:29:47] *** Quits: evdubs_ (~evdubs@user/evdubs) (Ping timeout: 256 seconds)
[06:31:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[06:32:53] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[06:39:06] *** Quits: schinckel (uid38120@user/schinckel) (Quit: Connection closed for inactivity)
[06:40:13] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[06:40:39] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: ncwbqcfe)
[06:41:45] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[06:41:45] <raptelan> ??case
[06:41:45] <pg_docbot> https://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-CASE :: https://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#PLPGSQL-CONDITIONALS
[06:43:37] *** Quits: Su-Shee (~Susanne@202-109-142-46.pool.kielnet.net) (Ping timeout: 256 seconds)
[06:43:37] *** Joins: dre (~dre@2001:8003:c932:c301:c38d:68f8:7c3:7e20)
[06:43:37] *** Quits: tozhu (~tozhu@171.92.69.204) (Read error: Connection reset by peer)
[06:45:07] *** Joins: Su-Shee (~Susanne@98-125-142-46.pool.kielnet.net)
[06:46:02] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 240 seconds)
[06:46:51] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[06:47:25] *** Joins: asymmentric (~asymmentr@157.45.99.11)
[06:56:23] <concrete-houses> is it dangerous to set scale factor to zero and threshold 2,000 for many tables
[06:56:32] <concrete-houses> what about globally
[06:56:49] <concrete-houses> how do I handle 122mil line table? partition?
[06:56:58] <concrete-houses> index by dates surely?
[06:57:45] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[06:58:21] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[06:59:32] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 240 seconds)
[07:04:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[07:07:17] *** Quits: maciek__ (~maciek@2600:1700:a412:1c00:6156:f568:69b8:b018) (Ping timeout: 240 seconds)
[07:10:50] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:14:06] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb) (Ping timeout: 268 seconds)
[07:14:56] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[07:15:27] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[07:15:56] *** Quits: f3f3lix (~weechat@55d4da2c.access.ecotel.net) (Ping timeout: 252 seconds)
[07:16:15] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[07:17:23] *** Quits: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net) (Quit: WeeChat 2.8)
[07:17:56] *** Joins: f3f3lix (~weechat@55d4c321.access.ecotel.net)
[07:21:25] *** Joins: gslin (~gslin@114-34-121-114.hinet-ip.hinet.net)
[07:22:46] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[07:40:50] *** Joins: maiko_ (~mmahut@209.250.249.245)
[07:40:51] *** Joins: Zertrin_ (~zertrin@user/zertrin)
[07:40:51] *** Joins: jo__ (jo@2a02:180:a:62::fefe:d00f)
[07:40:52] *** Joins: Method_ (~Method@securityblog.org)
[07:40:53] *** Joins: videl_ (~videl@user/videl)
[07:40:55] *** Joins: c2main (~quassel@82.66.25.238)
[07:40:55] *** Joins: jant_ (~jant@pavlov.tiddo.net)
[07:40:56] *** Joins: merpader1 (~ircuser@89.111.36.243)
[07:40:58] *** Quits: c2main (~quassel@82.66.25.238) (Changing host)
[07:40:58] *** Joins: c2main (~quassel@user/c2main)
[07:40:59] *** Joins: kshockey (~kyshoc@adsl-99-93-208-248.dsl.mtry01.sbcglobal.net)
[07:40:59] *** Joins: hackdashcom (h@2600:3c01::f03c:91ff:feae:9e7b)
[07:41:02] *** Joins: buu_ (~buu@70-142-48-147.lightspeed.austtx.sbcglobal.net)
[07:41:04] *** Joins: demonspork_ (~demonspor@2604:2d80:e003:a701:42:aff:fe6f:6fec)
[07:41:05] *** Quits: kshockey (~kyshoc@adsl-99-93-208-248.dsl.mtry01.sbcglobal.net) (Changing host)
[07:41:05] *** Joins: kshockey (~kyshoc@user/kyshoc)
[07:41:05] *** Joins: dante4431 (~dante443@2600:1702:7a0:9a40:6e62:6dff:fe5d:c340)
[07:41:08] *** Joins: sonOfRa_ (sonOfRa@user/sonofra)
[07:41:09] *** Joins: mike-kfed (~htd@095129203062.t4.akis.net)
[07:41:10] *** Joins: earthbre- (earthbreak@2600:3c03::f03c:91ff:fece:9070)
[07:41:11] *** Joins: jindraj_ (~jindraj@neomutt/jindraj)
[07:41:15] *** Joins: burakcan- (~burakcank@has.arrived.and.is.ready-to.party)
[07:41:29] *** Quits: c2main_ (~quassel@82.66.25.238) (*.net *.split)
[07:41:29] *** Quits: htd (~htd@095129203062.t4.akis.net) (*.net *.split)
[07:41:29] *** Quits: demonspork (~demonspor@2604:2d80:e003:a701:42:aff:fe6f:6fec) (*.net *.split)
[07:41:29] *** Quits: videl (~videl@user/videl) (*.net *.split)
[07:41:29] *** Quits: veegee (~veegee@ipagstaticip-469c2903-2b07-6dc3-3bc2-98748da5ca77.sdsl.bell.ca) (*.net *.split)
[07:41:29] *** Quits: sonOfRa (sonOfRa@user/sonofra) (*.net *.split)
[07:41:29] *** Quits: kyshoc (~kyshoc@user/kyshoc) (*.net *.split)
[07:41:29] *** Quits: jrjsmrtn (~jrjsmrtn@ip-83-134-41-224.dsl.scarlet.be) (*.net *.split)
[07:41:29] *** Quits: Zertrin (~zertrin@user/zertrin) (*.net *.split)
[07:41:29] *** Quits: merpaderp (~ircuser@89.111.36.243) (*.net *.split)
[07:41:29] *** Quits: thc202 (~thc202@user/thc202) (*.net *.split)
[07:41:29] *** Quits: dante443 (~dante443@2600:1702:7a0:9a40:6e62:6dff:fe5d:c340) (*.net *.split)
[07:41:29] *** Quits: jant (~jant@pavlov.tiddo.net) (*.net *.split)
[07:41:29] *** Quits: burakcank (~burakcank@has.arrived.and.is.ready-to.party) (*.net *.split)
[07:41:29] *** Quits: Tuju (~tuju@214-204-50-195.sta.estpak.ee) (*.net *.split)
[07:41:29] *** Quits: buu (~buu@70-142-48-147.lightspeed.austtx.sbcglobal.net) (*.net *.split)
[07:41:29] *** Quits: maiko (~mmahut@209.250.249.245) (*.net *.split)
[07:41:29] *** Quits: jindraj (~jindraj@neomutt/jindraj) (*.net *.split)
[07:41:29] *** Quits: jo_ (jo@2a02:180:a:62::fefe:d00f) (*.net *.split)
[07:41:29] *** Quits: Method (~Method@securityblog.org) (*.net *.split)
[07:41:29] *** Quits: tm604 (~tom@perlsite.default.entitypark.uk0.bigv.io) (*.net *.split)
[07:41:29] *** Quits: earthbreaker (earthbreak@2600:3c03::f03c:91ff:fece:9070) (*.net *.split)
[07:41:29] *** Quits: hackdash (h@user/hackdash) (*.net *.split)
[07:41:32] *** Joins: thc202|2 (~thc202@user/thc202)
[07:41:58] *** Joins: jrjsmrtn (~jrjsmrtn@ip-83-134-41-224.dsl.scarlet.be)
[07:42:03] *** Joins: veegee_ (~veegee@ipagstaticip-469c2903-2b07-6dc3-3bc2-98748da5ca77.sdsl.bell.ca)
[07:42:24] *** burakcan- is now known as burakcank
[07:45:23] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 256 seconds)
[07:47:20] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[07:47:57] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[07:52:18] <sobel> it's hard to answer such vague questions
[07:58:01] *** Quits: relight (~relight@user/relight) (Quit: Konversation terminated!)
[08:02:04] *** Quits: concrete-houses (~g@209.6.150.53) (Remote host closed the connection)
[08:03:52] *** Quits: asymmentric (~asymmentr@157.45.99.11) (Quit: Connection closed)
[08:04:51] *** Joins: Fairy (~Fairy@2001:464a:4992:0:5813:fe5c:3e8c:63aa)
[08:04:51] *** Joins: relight (~relight@user/relight)
[08:07:25] *** Quits: Fairy97 (~Fairy@2001:464a:4992:0:f470:9081:bd76:4326) (Ping timeout: 240 seconds)
[08:09:03] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[08:09:28] *** carwash is now known as jwash
[08:11:22] <raptelan> connor_goodwolf: 122 million rows is really not that many.
[08:11:37] <raptelan> oops, wrong person.
[08:13:38] *** Quits: Vacuity (~Vacuity@user/vovo) (Ping timeout: 260 seconds)
[08:13:41] *** Quits: relight (~relight@user/relight) (Quit: Konversation terminated!)
[08:14:17] *** Joins: Tuju (~tuju@214-204-50-195.sta.estpak.ee)
[08:15:24] *** Joins: Vacuity (~Vacuity@user/vovo)
[08:16:48] *** Quits: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br) (Quit: leaving)
[08:16:59] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 252 seconds)
[08:22:28] *** Joins: maciek__ (~maciek@2600:1700:a412:1c00:9aa1:b201:b2f4:4f5a)
[08:24:22] *** Joins: relight (~relight@user/relight)
[08:30:32] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[08:39:15] *** Joins: tm604 (~tom@perlsite.default.entitypark.uk0.bigv.io)
[08:41:30] *** Quits: bmomjian (~bruce@62.237.32.196) (Quit: Leaving.)
[08:41:41] *** Joins: bmomjian (~bruce@62.237.32.196)
[08:59:06] *** Joins: k8yun (~k8yun@user/k8yun)
[09:00:45] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Ping timeout: 256 seconds)
[09:07:02] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[09:10:21] *** Quits: raptelan (~raptelan@208.127.242.46) (Ping timeout: 252 seconds)
[09:10:32] *** Quits: ur5us_ (~ur5us@2406:e002:6888:2f01:d8fb:5ff2:7baf:1c2c) (Ping timeout: 240 seconds)
[09:17:41] *** Quits: dre (~dre@2001:8003:c932:c301:c38d:68f8:7c3:7e20) (Quit: Leaving)
[09:20:02] *** Quits: maciek__ (~maciek@2600:1700:a412:1c00:9aa1:b201:b2f4:4f5a) (Ping timeout: 240 seconds)
[09:20:14] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 252 seconds)
[09:24:41] *** Quits: TheyCallMePaul (~TheyCallM@ip72-207-167-97.lv.lv.cox.net) (Quit: Leaving)
[09:24:58] <funhouse> ok this is really weird
[09:25:01] <funhouse> i keep killing this
[09:25:03] <funhouse>  481101 postgres  20   0 2438780   2.3g      4 S 199.3  59.7 164:18.92 6h5VpJs5
[09:25:06] <funhouse> and it keeps coming back
[09:25:17] *** Quits: dirigible (~dirigible@c-66-41-40-51.hsd1.mn.comcast.net) (Quit: Leaving)
[09:25:21] *** Quits: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[09:25:29] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[09:26:00] *** Joins: sreve (~quassel@p4ff44c40.dip0.t-ipconnect.de)
[09:28:23] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Remote host closed the connection)
[09:28:47] *** Joins: raptelan (~raptelan@208.127.242.46)
[09:33:03] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 256 seconds)
[09:33:13] *** Joins: dre (~dre@2001:8003:c932:c301:c38d:68f8:7c3:7e20)
[09:33:42] *** Quits: dre (~dre@2001:8003:c932:c301:c38d:68f8:7c3:7e20) (Remote host closed the connection)
[09:34:37] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 240 seconds)
[09:38:17] *** Quits: k8yun (~k8yun@user/k8yun) (Read error: Connection reset by peer)
[09:40:04] *** Quits: erry (~erry@errietta.me) (Quit: WeeChat 2.5)
[09:41:18] *** Joins: erry (~erry@errietta.me)
[09:43:37] *** Joins: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[09:46:44] *** Joins: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se)
[09:47:14] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[09:47:20] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[09:47:58] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[09:48:07] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[09:49:01] *** Quits: nivag_2c (~gavin@103-76-144-176.ip.cis.gen.nz) (Quit: Disappears in a blinding flash of gravitational waves)
[09:49:32] *** Joins: nivag (~gavin@103-76-144-176.ip.cis.gen.nz)
[09:52:53] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Ping timeout: 256 seconds)
[09:55:32] *** Quits: lechner (~lechner@debian/lechner) (Ping timeout: 240 seconds)
[09:56:43] *** Joins: SamM (335d953107@2604:bf00:561:2000::401)
[09:57:15] *** buu_ is now known as buu
[09:58:27] *** Joins: TomTom (uid45892@id-45892.ilkley.irccloud.com)
[10:07:01] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[10:08:36] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[10:08:53] *** Joins: sagax (~sagax_nb@user/sagax)
[10:10:28] *** Quits: mjf_ (~mjf@cst-prg-87-3.cust.vodafone.cz) (Quit: Good bye...)
[10:10:41] *** Joins: mjf_ (~mjf@cst-prg-87-3.cust.vodafone.cz)
[10:12:41] *** Joins: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636)
[10:13:03] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[10:21:21] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[10:23:26] *** Joins: ba|ch (~user@p200300f3a7089cfb7ed4c00510feed99.dip0.t-ipconnect.de)
[10:27:54] *** Joins: cerill (~cerill@h-155-4-198-153.A785.priv.bahnhof.se)
[10:33:56] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Ping timeout: 252 seconds)
[10:35:42] *** Joins: ferz (~ferz@93-39-141-215.ip76.fastwebnet.it)
[10:36:23] *** Quits: bird8 (~bird@136-25-143-83.cab.webpass.net) (Quit: bird8)
[10:36:32] *** Joins: ekathva (~ekathva@2001:999:50:7590:b428:f6a6:94c7:d128)
[10:37:39] *** Quits: mjf_ (~mjf@cst-prg-87-3.cust.vodafone.cz) (Ping timeout: 256 seconds)
[10:37:41] *** Joins: bird8 (~bird@136-25-143-83.cab.webpass.net)
[10:38:22] *** Joins: mjf_ (~mjf@2001:1528:1:fffd:287a:f050:f744:97dd)
[10:39:01] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[10:39:40] *** Joins: xocolatl_ (~xocolatl@14.149.88.79.rev.sfr.net)
[10:40:46] *** Quits: xocolatl (~xocolatl@138.199.15.151) (Ping timeout: 245 seconds)
[10:43:18] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[10:44:16] *** Joins: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi)
[10:45:22] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Ping timeout: 240 seconds)
[10:45:32] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[10:47:42] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 252 seconds)
[10:50:41] *** Quits: cerill (~cerill@h-155-4-198-153.A785.priv.bahnhof.se) (Ping timeout: 256 seconds)
[10:51:27] <raptelan> ugh, psql doesn't know about procedures.  To show them you have to use \df, the output of which is a table with "functions" in the name.  drop function doesn't work on procedures...  Seems like an oversight.
[10:54:55] *** Quits: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi) (Remote host closed the connection)
[10:54:56] *** Joins: maciek__ (~maciek@2600:1700:a412:1c00:d0e5:e054:9e7:5e86)
[10:55:22] *** Joins: Reiner_Unsinn_ (~quassel@p5dd47daa.dip0.t-ipconnect.de)
[10:56:05] *** Joins: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi)
[10:56:15] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[10:56:23] *** Joins: darutoko (~darutoko@37.21.204.113)
[10:57:48] *** Joins: manti7 (~manti7@176.10.104.94)
[10:58:20] *** Quits: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi) (Remote host closed the connection)
[10:58:46] *** Joins: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi)
[10:59:02] *** Quits: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi) (Remote host closed the connection)
[10:59:15] *** Joins: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi)
[11:02:06] *** Joins: rek (~rek@adsl-d6.84-47-56.t-com.sk)
[11:05:37] *** Quits: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi) (Remote host closed the connection)
[11:06:03] *** Joins: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi)
[11:08:08] *** Quits: ekathva (~ekathva@2001:999:50:7590:b428:f6a6:94c7:d128) (Remote host closed the connection)
[11:08:26] *** Joins: ekathva (~ekathva@2001:999:50:7590:3e0c:28bd:f451:9781)
[11:08:46] *** Joins: shiranaihito (~textual@219.85.1.85)
[11:11:40] *** Joins: zz1 (~Thunderbi@p8016092-ipngn39401marunouchi.tokyo.ocn.ne.jp)
[11:11:53] *** Quits: mattil (~mattil@d5z9twsjm3l1r8pnczt-4.rev.dnainternet.fi) (Ping timeout: 252 seconds)
[11:18:52] *** Joins: mattil (~mattil@d5z9txtqvzmxc523x2y-4.rev.dnainternet.fi)
[11:19:30] <raptelan> ...and attempting to create a procedure that already exists causes Pg to throw an error that says the *function* already exists. :(
[11:19:35] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[11:20:47] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[11:21:18] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[11:22:08] <Zr40> I agree about the error message, but the behavior is likely mandated by the standard
[11:22:21] *** Quits: zz1 (~Thunderbi@p8016092-ipngn39401marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 252 seconds)
[11:22:48] <Zr40> funhouse: that sounds like your server is compromised
[11:23:14] <funhouse> Zr40 how do i find out
[11:23:19] *** Quits: mattil (~mattil@d5z9txtqvzmxc523x2y-4.rev.dnainternet.fi) (Ping timeout: 256 seconds)
[11:23:28] *** jazzy2 is now known as jazzy
[11:23:38] <Zr40> you already did, by seeing such processes
[11:23:53] <funhouse> well theres no way they got in via ssh
[11:24:10] <Zr40> they likely got in as a superuser with weak or no authentication
[11:24:14] <funhouse> i may have left my postgres server open for a few hours at one point
[11:24:48] <funhouse> is there a way in postgres to check anything
[11:27:44] <funhouse> Zr40 postgres super user?
[11:28:31] <Zr40> yes. superusers can do anything, including writing files and executing programs
[11:29:27] <Zr40> it's like ssh that permits root login with a weak password; but at least here only the OS user running postgres was compromised, not the entire system
[11:29:48] <funhouse> using amazon instace with a pem key
[11:30:09] <funhouse> ok
[11:30:56] <funhouse> Zr40 i kill the process but it keeps coming back
[11:31:13] <Zr40> sure, that's typical of exploits. They make sure they keep running in some way
[11:31:32] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Remote host closed the connection)
[11:31:37] *** Joins: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[11:31:46] <Zr40> I can't help you solve this but if this is a test/dev instance I'd just throw it away entirely and start over with a clean instance
[11:31:49] *** Joins: xocolatl (~xocolatl@138.199.15.167)
[11:31:52] <funhouse> so they were able to get in via postgres and do this?
[11:31:57] <funhouse> Zr40 yes
[11:32:24] <Zr40> if you permitted superuser login with weak or no authentication, then yes
[11:34:02] *** Joins: veesh (~veesh@5.28.156.164)
[11:34:53] *** Quits: xocolatl_ (~xocolatl@14.149.88.79.rev.sfr.net) (Ping timeout: 256 seconds)
[11:35:01] *** Quits: rek (~rek@adsl-d6.84-47-56.t-com.sk) (Remote host closed the connection)
[11:35:33] *** Quits: Su-Shee (~Susanne@98-125-142-46.pool.kielnet.net) (Ping timeout: 252 seconds)
[11:37:06] *** Joins: Su-Shee (~Susanne@204-108-142-46.pool.kielnet.net)
[11:47:33] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[11:49:22] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[11:49:22] *** Joins: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:a412:7f00:bf5a:cc2e)
[11:50:10] *** Quits: stark__ (~stark@192.222.248.88) (Ping timeout: 260 seconds)
[11:50:55] <funhouse> ??paste
[11:50:55] <pg_docbot> https://explain.depesz.com/ :: https://www.db-fiddle.com/
[11:50:55] <pg_docbot> https://paste.depesz.com/ :: https://dpaste.org
[11:51:19] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[11:51:37] <funhouse> Heres the contents of my /var/lib/postgresql
[11:51:38] <funhouse> https://paste.depesz.com/s/LW
[11:51:48] <funhouse> does that 13 folder seem weird?
[11:52:30] <funhouse> nvm
[11:53:47] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 250 seconds)
[11:54:35] <funhouse> .systemd-private-4mlgIlDaONfko6m11nSuqrBjwtg.sh
[11:54:39] <funhouse> Does that file seem weord?
[11:57:33] <funhouse> weird
[11:58:37] *** Quits: maciek__ (~maciek@2600:1700:a412:1c00:d0e5:e054:9e7:5e86) (Ping timeout: 240 seconds)
[11:58:40] *** Quits: shiranaihito (~textual@219.85.1.85) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[11:59:06] <funhouse> Zr40 i think i found it
[11:59:09] <funhouse> check this file
[12:00:34] <funhouse> https://pastebin.com/gkafqXBA
[12:01:35] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[12:04:04] *** Joins: gleu (~guillaume@2a01cb0c0e54b8007e39e75cb4390e1c.ipv6.abo.wanadoo.fr)
[12:04:31] *** sonOfRa_ is now known as sonOfRa
[12:04:40] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[12:06:05] *** Quits: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:a412:7f00:bf5a:cc2e) (Quit: Leaving)
[12:06:28] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[12:06:44] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[12:08:55] *** Joins: shiranaihito (~textual@125-228-188-231.hinet-ip.hinet.net)
[12:09:40] <funhouse> Zr40 yep looks like that was it
[12:09:47] <funhouse> i removed the file and the process isnt coming back
[12:14:09] *** Joins: [sep] (~sep@2a05:6d40:0:340:ec:24ff:fe65:d91c)
[12:14:32] *** Joins: maret (~maret@195.12.158.102)
[12:16:18] *** Joins: zelest (~jesper@81-233-184-27-no13.tbcn.telia.com)
[12:17:53] *** Joins: Ergo^ (~ergo@91.238.59.144)
[12:19:28] *** Joins: shka (~herr@109.231.3.55)
[12:23:26] *** Joins: palasso (~palasso@user/palasso)
[12:23:29] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[12:25:37] *** Joins: shkurata (~shkurata@ptr-8riebugy003l5s1zlrj.18120a2.ip6.access.telenet.be)
[12:28:01] *** Joins: fef (~thedawn@user/thedawn)
[12:30:40] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Remote host closed the connection)
[12:32:25] *** Joins: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de)
[12:33:30] *** Joins: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[12:35:01] *** Quits: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de) (Client Quit)
[12:36:47] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Remote host closed the connection)
[12:37:21] *** Joins: jnnnnnnnnn (~jnnnnnnnn@65.99.151.178)
[12:37:55] *** Joins: mexen_wfh (uid495612@id-495612.ilkley.irccloud.com)
[12:39:06] *** Joins: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c)
[12:39:16] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[12:40:56] *** Quits: shored1 (~shored@user/shored) (Ping timeout: 268 seconds)
[12:42:21] *** Joins: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de)
[12:42:36] *** Quits: SAS (~SAS@mail.loxodata.com) (Quit: ZNC - http://znc.sourceforge.net)
[12:44:57] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[12:50:24] *** Quits: ba|ch (~user@p200300f3a7089cfb7ed4c00510feed99.dip0.t-ipconnect.de) (Remote host closed the connection)
[12:50:38] *** Joins: ba|ch (~user@p200300f3a7089cfb9f5ceaecdb021956.dip0.t-ipconnect.de)
[12:51:25] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 268 seconds)
[12:52:18] *** Joins: ekathva_ (~ekathva@2001:999:50:a96:4ee5:c816:f561:d86f)
[12:53:05] *** Quits: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636) (Ping timeout: 252 seconds)
[12:54:44] *** Quits: ekathva (~ekathva@2001:999:50:7590:3e0c:28bd:f451:9781) (Ping timeout: 252 seconds)
[12:54:55] *** Joins: shored (~shored@user/shored)
[12:58:36] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 252 seconds)
[13:03:03] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[13:05:36] *** Quits: shored (~shored@user/shored) (Ping timeout: 268 seconds)
[13:08:19] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[13:08:51] *** Joins: n0fun_ (~jack@mue-88-130-48-222.dsl.tropolys.de)
[13:10:28] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[13:10:39] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Ping timeout: 256 seconds)
[13:12:28] *** Joins: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[13:12:45] *** Joins: rendar (~rendar@user/rendar)
[13:13:12] *** Quits: daspork (~jesus@user/daspork) (Quit: ZNC 1.7.1 - https://znc.in)
[13:13:28] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[13:16:28] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[13:16:51] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[13:20:53] *** Joins: daspork (~JEsus~~~~@user/daspork)
[13:21:09] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Ping timeout: 252 seconds)
[13:21:18] *** Quits: xocolatl (~xocolatl@138.199.15.167) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:22:45] <aLeSD[m]> hi al
[13:22:47] <aLeSD[m]>  * hi all
[13:23:39] <aLeSD[m]> I have some queries that are very very slow because of explicit locking .... how could I analize the state of the database and find out my locking problems... Is there any tool or procedure to reach the best possible state ?
[13:24:37] *** Joins: vladoski (~vladoski@2001:b07:add:d406:6b4d:394e:5161:d4b0)
[13:25:49] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Ping timeout: 240 seconds)
[13:26:16] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Remote host closed the connection)
[13:26:21] *** Joins: odnes (~odnes@5-203-166-158.pat.nym.cosmote.net)
[13:26:22] *** Quits: fcr (~fran@r167-56-97-52.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[13:27:06] *** Joins: fordfrog_ (~fordfrog@gentoo/developer/fordfrog)
[13:28:36] *** Joins: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[13:30:15] *** Quits: AndreasKarlsson[ (~kandreasm@2001:470:69fc:105::707) (Quit: You have been kicked for being idle)
[13:31:11] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[13:32:49] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[13:33:55] *** Joins: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[13:34:27] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[13:36:24] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Remote host closed the connection)
[13:36:38] *** Joins: fcr (~fran@r167-56-26-186.dialup.adsl.anteldata.net.uy)
[13:37:03] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[13:38:03] *** Joins: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[13:38:24] *** Quits: odnes (~odnes@5-203-166-158.pat.nym.cosmote.net) (Read error: Connection reset by peer)
[13:38:42] *** Joins: odnes (~odnes@5-203-166-158.pat.nym.cosmote.net)
[13:39:17] *** Joins: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr)
[13:40:42] *** Joins: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636)
[13:43:51] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Ping timeout: 256 seconds)
[13:46:51] *** Joins: chrit (~cloehr@user/chrit)
[13:47:16] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[13:47:47] *** Joins: maxzor (~maxzor@2a01cb04054faa007972c534aff021b8.ipv6.abo.wanadoo.fr)
[13:48:12] <mage> aLeSD[m]: select * from pg_stat_activity?
[13:53:34] *** Joins: mav`rik (~unknown@ec2-54-171-126-99.eu-west-1.compute.amazonaws.com)
[13:53:53] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[13:54:05] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[13:54:56] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[13:56:16] *** Joins: michalz (~michalz@185.246.204.62)
[13:58:30] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[14:00:59] *** Joins: randir (~randir@93.159.239.42)
[14:01:29] *** Joins: shored (~shored@user/shored)
[14:02:56] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 252 seconds)
[14:10:05] *** Quits: vladoski (~vladoski@2001:b07:add:d406:6b4d:394e:5161:d4b0) (Ping timeout: 252 seconds)
[14:12:45] *** Quits: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636) (Ping timeout: 256 seconds)
[14:16:53] <strk> dragons: the *same* query, run trought explain analyze
[14:17:05] <strk> first time uses index scan, second time (shortly after, 5 secs after?) uses seq scan
[14:17:13] <strk> what could this be due to ? autovacuum ?
[14:18:59] <capitol> or better / worse statistics maybe
[14:19:25] <capitol> https://www.postgresql.org/docs/current/planner-stats.html
[14:21:35] <strk> right, but aren't stats collected by autovacuum ?
[14:21:53] <strk> as I'm the only user of this database, so I dont' see how else would stats change across my two statements
[14:26:13] *** Quits: uncleyear (~ian@178.176.76.244) (Ping timeout: 240 seconds)
[14:28:07] *** Joins: uncleyear (~ian@178.176.73.125)
[14:29:46] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 260 seconds)
[14:30:22] *** Quits: op2 (~op2@user/op2) (Read error: Connection reset by peer)
[14:30:38] *** Joins: op2 (~op2@user/op2)
[14:32:36] <strk> set enable_seqscan to off; -- gives better execution time
[14:32:44] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[14:32:49] <strk> anyway, we're talking very very little time in general so not indicative
[14:33:03] <strk> Planning Time: 0.302 ms - Execution Time: 0.076 ms -- with seqscan disabled
[14:33:13] <strk> Planning Time: 0.160 ms - Execution Time: 0.115 ms -- with seqscan enabeld
[14:33:17] *** Joins: asymmentric (~asymmentr@118.151.210.82)
[14:33:35] <strk> overall faster to keep it enabled
[14:34:17] *** Quits: raptelan (~raptelan@208.127.242.46) (Ping timeout: 256 seconds)
[14:37:21] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Ping timeout: 256 seconds)
[14:39:38] <maret> I am playing with WITH recursive and i have organisation and branches  tables. The query works on 1 depth (line 17) but when I change condition so it goes one level deeper query seems never stop?  might be because of slow server but I think I made a mistake somewhere -> query https://www.pastiebin.com/6239a009b3309
[14:41:52] *** Quits: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c) (Remote host closed the connection)
[14:41:53] *** Joins: monstar (~monstar@gateway/tor-sasl/monstar)
[14:45:17] *** Joins: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c)
[14:49:25] *** Quits: veesh (~veesh@5.28.156.164) (Remote host closed the connection)
[14:49:35] *** Quits: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[14:50:50] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[14:51:00] *** Joins: veesh (~veesh@5.28.156.164)
[14:51:04] *** Quits: asymmentric (~asymmentr@118.151.210.82) (Quit: Connection closed)
[14:53:55] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[14:54:45] *** Quits: held (~heldchen@user/held) (Ping timeout: 268 seconds)
[14:57:03] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[14:57:16] *** Joins: ivii (~ivan@user/ivii)
[14:58:04] <Zr40> strk: I really wouldn't worry about sub-millisecond total time
[14:59:16] <strk> yeah
[14:59:30] <strk> I was just trying to understand multicolumn indexes
[15:01:02] <strk> in postgis topology we have a table on which no index is created explicitly, but one is implicitly created due to a unique constraint
[15:02:11] <strk> the unique constraint lists field names in an arbitrary order, but it looks like it was a bad choice, and ordering fields by selectivity might have been a better choice
[15:03:16] *** Joins: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[15:08:37] *** Joins: Klinda (~superleag@user/klinda)
[15:13:48] *** Joins: held (~heldchen@user/held)
[15:15:19] *** Joins: asymmentric (~asymmentr@118.151.210.82)
[15:17:08] *** Quits: asymmentric (~asymmentr@118.151.210.82) (Client Quit)
[15:17:18] *** Joins: asymmentric (~asymmentr@118.151.210.82)
[15:20:43] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[15:22:11] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[15:24:21] *** Quits: asymmentric (~asymmentr@118.151.210.82) (Ping timeout: 268 seconds)
[15:26:05] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[15:27:02] *** Quits: f3f3lix (~weechat@55d4c321.access.ecotel.net) (Ping timeout: 240 seconds)
[15:29:10] *** Joins: nillyhan0 (~7f000001@user/nillyhan)
[15:30:11] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[15:31:00] *** Quits: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[15:31:48] *** Joins: merzo1 (~Thunderbi@192.162.238.196)
[15:34:08] *** merzo1 is now known as merzo
[15:34:16] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Read error: Connection reset by peer)
[15:34:41] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[15:40:37] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[15:40:49] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[15:41:53] <maret> I am playing with WITH recursive and i have organisation and branches  tables. The query works on 1 depth (line 17) but when I change condition so it goes one level deeper query seems never stop?  might be because of slow server but I think I made a mistake somewhere -> query https://www.pastiebin.com/6239a009b3309
[15:42:23] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[15:44:24] *** Joins: the_lanetly_052 (~the_lanet@194.135.167.45)
[15:48:37] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[15:48:37] *** Quits: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net) (Ping timeout: 240 seconds)
[15:49:46] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[15:52:02] *** Joins: nillyhan01 (~7f000001@user/nillyhan)
[15:52:43] *** Quits: nillyhan0 (~7f000001@user/nillyhan) (Quit: Ping timeout (120 seconds))
[15:52:44] *** nillyhan01 is now known as nillyhan0
[15:52:51] *** Quits: maret (~maret@195.12.158.102) (Quit: maret)
[15:57:25] *** thc202|2 is now known as thc202
[16:02:17] *** Quits: nillyhan0 (~7f000001@user/nillyhan) (Ping timeout: 240 seconds)
[16:04:36] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 240 seconds)
[16:06:30] *** Joins: nyov (~nyov@user/nyov)
[16:08:28] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[16:08:55] *** Quits: electron^-892402 (~electron^@212.66.122.116) (Quit: Ping timeout (120 seconds))
[16:14:17] *** Quits: antlarr (~quassel@180.red-2-137-49.dynamicip.rima-tde.net) (Ping timeout: 240 seconds)
[16:14:49] *** Joins: antlarr (~quassel@227.red-79-144-189.dynamicip.rima-tde.net)
[16:15:01] *** Joins: electron^-892402 (~electron^@212.66.122.116)
[16:15:59] *** Quits: Slade (uid128877@user/slade) (Quit: Connection closed for inactivity)
[16:18:47] *** Joins: asymmentric (~asymmentr@118.151.210.82)
[16:19:28] *** jant_ is now known as jant
[16:21:02] *** Joins: zeden (~zeden@user/zeden)
[16:21:03] <Xgc> Not valid. Has an error.  Not recursive.  Depth isn't handled correctly.
[16:21:07] *** Joins: f3f3lix (~weechat@86.56.40.231)
[16:22:36] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[16:25:44] *** Joins: DevAntoi_ (~DevAntoin@2a01:e34:ec18:50c0:a509:c488:a716:5b9e)
[16:26:57] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 240 seconds)
[16:27:42] *** Joins: maret (~maret@195.12.158.102)
[16:36:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[16:46:50] *** Quits: maxzor (~maxzor@2a01cb04054faa007972c534aff021b8.ipv6.abo.wanadoo.fr) (Ping timeout: 252 seconds)
[16:47:24] *** Quits: asymmentric (~asymmentr@118.151.210.82) (Quit: Connection closed)
[16:48:24] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[16:50:45] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[16:53:44] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[16:54:20] *** Quits: dsrt^ (~dsrt@96-67-120-105-static.hfc.comcastbusiness.net) (Remote host closed the connection)
[16:54:41] *** Joins: TheyCallMePaul (~TheyCallM@ip72-207-167-97.lv.lv.cox.net)
[16:59:53] *** Quits: held (~heldchen@user/held) ()
[17:01:51] *** Joins: held (~heldchen@user/held)
[17:05:12] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[17:08:08] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[17:10:25] *** Joins: Shells (~michelle@203.206.128.220)
[17:11:48] *** Quits: Michelle (~michelle@2407:8800:bc20:200a:1915:6f25:36fc:6013) (Ping timeout: 240 seconds)
[17:16:03] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Remote host closed the connection)
[17:18:57] *** Joins: jkavalik_ (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[17:19:49] *** Quits: merzo (~Thunderbi@192.162.238.196) (Quit: merzo)
[17:20:03] *** Joins: merzo1 (~Thunderbi@192.162.238.196)
[17:21:07] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Ping timeout: 256 seconds)
[17:22:22] *** merzo1 is now known as merzo
[17:24:30] <maret> I am dealing with huge table 7 billion rows representing transactions between entities. I need to create a report for any given entity which would says direction transactions from and to for that entity. So something like this http://sqlfiddle.com/#!17/efc68/15
[17:25:48] *** Quits: c2main (~quassel@user/c2main) (Ping timeout: 240 seconds)
[17:26:35] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[17:26:40] <maret> this works pretty much ok BUT issue is that there are some entities which have 700k - 2M transactions and I need to create summary not only for direct transactions but also indirect. So recursion at least 3 levels deep. The issue is that  on such a large table for so many potential entities,query can become really slow because of sheer amount of data even with proper indexes.
[17:27:01] *** Quits: n0fun_ (~jack@mue-88-130-48-222.dsl.tropolys.de) (Ping timeout: 245 seconds)
[17:27:01] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Read error: Connection reset by peer)
[17:27:18] *** Quits: ovnicraft (~ovnicraft@ftth-179-49-44-28.cue.celerity.ec) (Read error: Connection reset by peer)
[17:27:50] <maret> I don't think I can partition table because my queries are around entities names -> Give me report for entity A.. B..., I was thinking about using WITH recursive so hopefully recursion on postgres will be faster than application level
[17:27:51] *** Joins: ovnicraft (~ovnicraft@corp-179-49-44-28.uio.puntonet.ec)
[17:27:59] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[17:28:30] <maret> and also though about caching some large entities, I worry a bit that I should try something else than postgres , some NOSQL solution for this.
[17:28:30] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[17:28:59] *** Joins: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br)
[17:30:48] *** Joins: vladoski (~vladoski@2001:b07:add:d406:693e:d630:31f9:1e46)
[17:31:17] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[17:32:29] *** Joins: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge)
[17:35:37] *** Quits: vladoski (~vladoski@2001:b07:add:d406:693e:d630:31f9:1e46) (Ping timeout: 256 seconds)
[17:40:48] *** Joins: vladoski (~vladoski@2001:b07:add:d406:ce45:15e1:21a7:b919)
[17:43:46] *** Joins: alioui (~medeva293@197.244.38.44)
[17:43:46] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Read error: Connection reset by peer)
[17:44:00] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[17:44:47] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Ping timeout: 250 seconds)
[17:47:16] *** Quits: uncleyear (~ian@178.176.73.125) (Read error: Connection reset by peer)
[17:47:38] *** Quits: f3f3lix (~weechat@86.56.40.231) (Ping timeout: 260 seconds)
[17:50:04] *** Joins: uncleyear (~ian@178.176.79.141)
[17:53:07] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Remote host closed the connection)
[17:53:26] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[17:54:23] *** Joins: pedja_hpmini (~pedja_hpm@109-93-189-123.dynamic.isp.telekom.rs)
[17:56:47] *** Joins: darkbit (~db@152.32.100.99)
[17:57:02] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[17:57:29] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[17:58:02] *** Joins: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[17:59:28] *** Joins: Guest3 (~Guest3@2a02:908:214:9cc0:96a:c07c:88ab:284c)
[18:00:21] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 245 seconds)
[18:01:36] *** Joins: stark__ (~stark@192.222.248.88)
[18:02:45] <Guest3> Hello guys, I got a question. Is it possible to deny inserts in columns with a check constraint when the value has a leading number? For example: insert into dummy values (..., '22032022_log') -> this should fire an error because of the leading number
[18:06:13] *** Quits: mjf_ (~mjf@2001:1528:1:fffd:287a:f050:f744:97dd) (Ping timeout: 256 seconds)
[18:06:27] <ilmari> Guest3: check ( the_column !~ '^[0-9]' ) -- but the real restriction is probably something more specific than "not a number", because that would allow things like ' 42'
[18:06:38] *** Joins: mjf_ (~mjf@cst-prg-87-3.cust.vodafone.cz)
[18:07:37] <ilmari> if this is a restriction that will be used in more places, it would be worth creating a domain type for it
[18:08:31] *** Joins: SAS (~SAS@mail.loxodata.com)
[18:11:43] <Guest3> Thank you! :)
[18:11:44] *** Joins: kakashiAL (~kakashi@41.251.24.2)
[18:13:12] *** Quits: mjf_ (~mjf@cst-prg-87-3.cust.vodafone.cz) (Ping timeout: 252 seconds)
[18:13:44] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[18:14:09] *** Joins: mjf_ (~mjf@2001:1528:1:fffd:287a:f050:f744:97dd)
[18:17:41] *** Joins: podverse-mitch (~mitch-pod@c-73-176-137-149.hsd1.il.comcast.net)
[18:24:48] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::81cb)
[18:27:13] <maret> How would you write a recursive function for 2 or 3 levels down for this http://sqlfiddle.com/#!17/efc68/42 ?  I was able to get level 1 but I cant make it work for deeper leves by changing where indirect.depth + 1 <= 1) to <=2
[18:28:12] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[18:28:43] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[18:29:54] <johto> you're not incrementing the depth at all
[18:30:18] *** Joins: f3f3lix (~weechat@55d4c321.access.ecotel.net)
[18:30:21] <johto> the right arm of the UNION needs to SELECT depth + 1
[18:32:18] *** Joins: jkhsjdhjs (jkhsjdhjs@totally.rip)
[18:33:28] *** Parts: jkhsjdhjs (jkhsjdhjs@totally.rip) (WeeChat 3.3)
[18:33:55] <maret> ou i see , so like  http://sqlfiddle.com/#!17/efc68/46
[18:35:46] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[18:37:02] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[18:37:18] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[18:37:52] <maret> johto ^
[18:40:11] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[18:42:39] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[18:46:00] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[18:46:40] *** Quits: cm315 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Read error: Connection reset by peer)
[18:50:07] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[18:50:19] <glik22_> it appears that pg_stat_statements_reset() is being called periodically but i have no idea why. is there any way to track this down?
[18:50:30] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[18:50:35] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[18:50:39] <Myon> likely some monitoring tool
[18:50:44] <Myon> postgres_exporter and the like
[18:50:57] <Myon> you'd have to enable log_statement=all or the like
[18:51:06] *** Quits: mjf_ (~mjf@2001:1528:1:fffd:287a:f050:f744:97dd) (Ping timeout: 260 seconds)
[18:51:41] *** Joins: mjf_ (~mjf@cst-prg-93-14.cust.vodafone.cz)
[18:51:48] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[18:53:15] <glik22_> what happens after setting log_statement=all? does the offending query or whatever show up in pg_stat_statements?
[18:53:26] *** Quits: kakashiAL (~kakashi@41.251.24.2) (Ping timeout: 260 seconds)
[18:54:02] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[18:54:35] *** Quits: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: jdavfsxd)
[18:54:47] *** Joins: ConfusedFrog (~ConfusedF@201.202.14.138)
[18:55:04] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[18:56:09] <ConfusedFrog> Does postgres reliably detect and recover from all forms of deadlocks? I have some (SELECT .. FOR UPDATE) that have blocked for hours, and the logs show it has detected a deadlock.
[18:56:20] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[18:56:22] *** Joins: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi)
[18:56:35] <ConfusedFrog> But I was under the impression that postgres should always handle that pretty gracefully? (Kill one of the offenders and allow progress to happen)
[18:58:32] *** Joins: rodo (~rodo@2a01:e0a:2c6:d5f0:1b67:70b6:47c6:3f1c)
[18:59:06] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 245 seconds)
[19:00:55] *** Joins: lechner (~lechner@debian/lechner)
[19:00:59] *** Quits: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:01:26] *** Joins: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi)
[19:01:28] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[19:01:42] *** Quits: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi) (Read error: Connection reset by peer)
[19:01:55] *** Joins: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi)
[19:03:32] *** Quits: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:04:25] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[19:04:33] *** Joins: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi)
[19:04:37] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:06:02] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[19:06:33] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[19:07:55] *** Joins: mattil_ (~mattil@d5z9twwhkqzqff84b9y-4.rev.dnainternet.fi)
[19:10:12] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[19:10:47] *** Quits: mattil (~mattil@d5z9tx9ptqggt4d8xry-4.rev.dnainternet.fi) (Ping timeout: 250 seconds)
[19:11:07] *** Quits: ArchNoob (~archnoob@41.59.4.59) (Remote host closed the connection)
[19:12:30] *** Joins: carragom (~textual@201.204.94.76)
[19:13:41] *** Joins: ArchNoob (~archnoob@41.59.4.59)
[19:14:07] <nickb> is there any place where one can read up general info about nodes in postgres? (nodes.h are ok, but maybe there is an actual written document?)
[19:14:41] *** Joins: raptelan (~raptelan@208.127.242.46)
[19:19:04] <nickb> ConfusedFrog: it's not always possible to kill a stuck query. There are places in code where check for interrupts doesn't happen for a while. Or, for example, if query is stuck in scanning a corrupted index with a circular loop it can never reach a point where CheckInterrupts is run. Did you already check if one of the offending backends is still running and try killing it manually?
[19:21:00] *** Joins: magla (~gelignite@55d4decd.access.ecotel.net)
[19:22:55] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[19:23:05] *** Quits: mattil_ (~mattil@d5z9twwhkqzqff84b9y-4.rev.dnainternet.fi) (Remote host closed the connection)
[19:24:11] <ConfusedFrog> nickb: I did not. But if it happens again, you suggest I kill the manually process of one of the stuck queries and see if it resolves itself?
[19:24:42] <ConfusedFrog> I do not believe I am dealing with any corruption, checking the queries activities they are just stuck waiting on locks
[19:24:50] <nickb> no, I'd suggest to see if its still running after postgres claims it's tried to kill it
[19:25:14] <ConfusedFrog> Oh, I see. There's some cases it might not actually kill it?
[19:25:21] <nickb> and if it did, it'd be worth connecting with a debugger and fetching a backtrace to know where exactly it is stuck, or at least getting the query that is causing the issue
[19:25:30] *** Joins: asymmentric (~asymmentr@118.151.210.82)
[19:25:50] <nickb> There many possibilities. I've run into cases where power-cycling the machine was the only way to "kill" the query
[19:26:01] *** Joins: mattil (~mattil@d5z9twwhkqzqff84b9y-4.rev.dnainternet.fi)
[19:26:07] *** Quits: mattil (~mattil@d5z9twwhkqzqff84b9y-4.rev.dnainternet.fi) (Read error: Connection reset by peer)
[19:26:20] <nickb> With just the info you've provided so far it is hard to tell what could be the actual issue, so if/when you have more info, please share and we'll try to help
[19:26:26] <nickb> afaict the issue has resolved?
[19:26:36] <ConfusedFrog> Manually resetting the database :P
[19:26:45] <ConfusedFrog> The log says: Process 10447 waits for ShareLock on transaction 2408714576; blocked by process 10546. Which query should be the one getting killed?
[19:27:02] <nickb> that's not a deadlock
[19:27:43] <nickb> but you can easily identify the backends by doing something like `select * from pg_stat_activity where pid = 10546`
[19:28:00] <Berge> ??locking
[19:28:00] <pg_docbot> https://www.postgresql.org/docs/current/static/explicit-locking.html#LOCKING-ROWS :: https://www.postgresql.org/docs/current/explicit-locking.html
[19:28:03] <Berge> hm
[19:28:03] <ConfusedFrog> The line above it says: `ERROR:  deadlock detected`
[19:28:09] <Berge> There are some great queries in the wiki to show locks
[19:28:19] <Berge> https://wiki.postgresql.org/wiki/Lock_Monitoring
[19:28:38] <Berge> ConfusedFrog: Does it say that for the same session?
[19:28:47] <nickb> Hm.. A former colleague of mine wrote a very fancy one let me dig it up :-)
[19:29:17] <nickb> https://dev.to/bolajiwahab/2022-01-13-postgresql-lock-trees-56e0
[19:29:54] <ConfusedFrog> 2022-03-20 12:17:03.666 UTC [10546] vvvv ERROR:  deadlock detected
[19:29:54] <ConfusedFrog> 2022-03-20 12:17:03.666 UTC [10546] vvvv DETAIL:  Process 10546 waits for ShareLock on transaction 2408714578; blocked by process 10447.
[19:29:55] <ConfusedFrog> 2022-03-20 12:17:03 xxx yyy 	Process 10447 waits for ShareLock on transaction 2408714576; blocked by process 10546.
[19:29:58] *** Joins: Guest59 (~Guest59@ool-18bccd13.dyn.optonline.net)
[19:29:59] *** DevAntoi_ is now known as DevAntoine
[19:30:02] <ConfusedFrog> That's what it says exactly
[19:30:09] <ConfusedFrog> I also dumped pg_stat_activity at the time
[19:30:18] <Berge> With "vvvv" and "xxx yyy"?
[19:30:45] <Berge> ConfusedFrog: What's the actual question here+
[19:30:46] <ConfusedFrog> sanitized data
[19:30:57] <Guest59> hi all , anyone has sample for ECPGTrans in embedded sql code . I am not able to dynamically set the transaction identifier for the call in embedded sql code
[19:31:01] <Berge> ConfusedFrog: If you changed it, it's not "what it says exactly" (-:
[19:31:24] <Berge> Guest59: ECPGTrans?
[19:31:31] <Berge> What are you trying to do?
[19:31:46] <ConfusedFrog> The question is, does postgres always reliably detect and kill deadlocked transactions?
[19:32:06] <Guest59> Prepare transaction using ECPGLib
[19:32:06] <ConfusedFrog> One of the queries is "idle in transaction" and the other queries is "active"  when i queried pg_stat_activity
[19:32:18] <Berge> Guest59: What's ECPGLib?
[19:32:20] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:32:21] *** Quits: ba|ch (~user@p200300f3a7089cfb9f5ceaecdb021956.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[19:32:31] <ConfusedFrog> Or are there some classes of deadlocks that are not detected, and the database will forever be stuck?
[19:32:55] <Berge> ConfusedFrog: Yes, postgres always detects the specific kind of deadlock that's described in the doc
[19:33:02] <Guest59> https://www.postgresql.org/docs/9.1/ecpg.html
[19:33:19] <Berge> Which isn't necessarily the same thing as what you're observing
[19:33:26] <Berge> You can have two transactions blocking each other
[19:33:26] <ConfusedFrog> I get that, but are there other types of deadlocks which are not detected?
[19:33:45] <ConfusedFrog> like more complex deadlocks. Like A blocks B, B blocks C, C blocks D, D blocks A. sort of thing?
[19:34:14] <ConfusedFrog> But I tested the most obvious AB BA style deadlock, and it is being handled properly
[19:34:28] *** Joins: maciek__ (~maciek@2600:1700:a412:1c00:e953:c8e8:fdff:e8ce)
[19:34:53] *** Joins: mc-guest-73 (~mc-guest-@12.185.7.214)
[19:35:07] <Berge> ConfusedFrog: And what isn't being handled properly?
[19:35:41] <mc-guest-73> CPAN Install of DBD::Pg failing
[19:35:42] <ConfusedFrog> Some of the queries are being stuck permanently and never terminating
[19:35:54] <Zr40> postgres can only detect deadlocks inside the database
[19:36:18] <ConfusedFrog> In this case one of the queries: `pid 10546`  (trying to do SELECT FOR UPDATE)  was stuck for hours before i manually reset the db
[19:36:20] <Berge> ConfusedFrog: And what does the lock monitoring queries in the wiki (I pasted link above) say about them?
[19:36:27] <Berge> Manually reset?
[19:36:44] <Berge> (Are you aware of SKIP LOCKED?)
[19:36:53] <ConfusedFrog> after dumping the data, i reset the database because it's a production service
[19:36:57] <Berge> And NOWAIT
[19:37:05] <ConfusedFrog> yeah
[19:37:09] <Berge> Reset meaning what?
[19:37:11] <Berge> Restart?
[19:37:13] <ConfusedFrog> yeah
[19:37:17] <Berge> okay
[19:38:33] <depesz> mc-guest-73: how did you try, and how it failed? what os/distro?
[19:39:30] <mc-guest-73> CPAN install of DBD::Pg fails with error:  Bad initdb output: 'initdb' is not recognized as an internal or external command, operable program or batch file.  This occurs when trying to upgrade from an older version of DBD::Pg to the latest version.
[19:39:56] <ConfusedFrog> So I found something very interesting.
[19:39:58] <ConfusedFrog> SELECT * FROM tbl_a WHERE id = $1 a FOR UDATE; -- lots of these queries were stuck, in "idle in transaction" state
[19:39:58] <ConfusedFrog> INSERT INTO tbl_b ( ...  ) -- lots of these queries were stuck (running time of hours), in "active" state
[19:39:59] <mc-guest-73> Her is the output:
[19:40:11] <mc-guest-73> # PostgreSQL (compiled)       ?
[19:40:11] <mc-guest-73> # PostgreSQL (target)         ?
[19:40:12] <mc-guest-73> # PostgreSQL (reported)       ?
[19:40:12] <mc-guest-73> # Default port                ?
[19:40:13] <mc-guest-73> # DBI_DSN                     dbi:Pg:dbname=db_cgb_callcenter
[19:40:13] <mc-guest-73> # DBI_USER                    fte_asmith
[19:40:14] <mc-guest-73> # Test schema                 dbd_pg_testschema
[19:40:14] <mc-guest-73> # LANG                        C
[19:40:15] <mc-guest-73> # Adjusted:                   initdb
[19:40:15] <mc-guest-73> # Error was: Bad initdb output: 'initdb' is not recognized as an internal or external command,
[19:40:16] *** ChanServ sets mode: +o Myon
[19:40:16] <mc-guest-73> # operable program or batch file.
[19:40:16] <mc-guest-73> #
[19:40:17] <mc-guest-73> Bailout called.  Further testing stopped:  Cannot continue: connection failed
[19:40:17] <mc-guest-73> FAILED--Further testing stopped: Cannot continue: connection failed
[19:40:18] <mc-guest-73> gmake: *** [Makefile:986: test_dynamic] Error 255
[19:40:18] *** Myon sets mode: +q mc-guest-73!*@*
[19:40:24] <Myon> mc-guest-73: use a paste site
[19:40:24] <Berge> Myon: thanks
[19:40:26] <ConfusedFrog> The insert into tbl_b  queries,  have a foreign key which references tbl_a
[19:40:31] <Berge> ConfusedFrog: "idle in transaction" does not mean it's waiting for a lock
[19:40:31] <Zr40> ConfusedFrog: idle in transaction means the query is done. But the client forgot to finish its transaction
[19:40:47] <Berge> ConfusedFrog: With idle in transaction, the query you see in pg_stat_activity is the last query the transactino ran
[19:40:50] <Berge> And now it's doing nothing
[19:40:53] <Berge> …er, as Zr40 says
[19:40:55] *** Myon sets mode: -q mc-guest-73!*@*
[19:41:03] <ConfusedFrog> Does it indicate a client-error?
[19:41:08] <ConfusedFrog> If "idle in transaction" of hours ?
[19:41:10] <Zr40> yes
[19:41:16] <Myon> mc-guest-73: did you ever successfully compile dbd::pg before on that box?
[19:41:18] <Zr40> the client is responsible to COMMIT; or ROLLBACK;
[19:41:27] <Berge> Clients shouldn't be in that state for more than, say, milliseconds
[19:41:30] <Berge> In most cases
[19:41:30] <mc-guest-73> Yes, about 6 months ago
[19:41:46] <kjetilho> ConfusedFrog: it is very common for client software to don't bother with transaction code when it is only doing queries and no updates...
[19:41:48] <ConfusedFrog> Oh, so it means that the client has  `BEGIN; SELECT ..... FOR UPDATE;`  and then never  finished the transaction
[19:41:55] <Myon> mc-guest-73: which OS is that?
[19:42:01] <Berge> ConfusedFrog: It does have to mean that, no
[19:42:01] <kjetilho> ConfusedFrog: but it is a bug, yes
[19:42:08] <mc-guest-73> Windows 10, 64-bit CPU
[19:42:13] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[19:42:15] <Berge> ConfusedFrog: If you suspect actual locking issues, use the lock monitoring queries
[19:42:27] <Berge> You'll be able to see which transactions are blocking others, if any
[19:42:44] <Berge> Also consider setting idle_in_transaction_session_timeout
[19:42:57] <ConfusedFrog> So if the client just did  `SELECT FOR UPDATE`  as own query, it would not show ` idle in transaction`
[19:43:03] <Zr40> ConfusedFrog: locks are only released when the transaction commits or rolls back. So if you keep a transaction open, it will keep holding its locks
[19:43:08] <ConfusedFrog> So that helps a lot. The problem is then going to be in the client
[19:43:25] <Berge> ConfusedFrog: yes, it would
[19:43:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[19:43:39] <Berge> But if the query is waiting for a lock, pg_stat_activity would say "active"
[19:43:54] <ConfusedFrog> ah thanks! That helps a lot
[19:43:56] <mc-guest-73> Added environment variables DBI_DSN, DBI_USER and DBI_PW to get around this on a second Win10 CPU.  However, those environment variables don't result the issue on my primary CPU.
[19:43:56] <kjetilho> ConfusedFrog: it can be a plain SELECT.  PostgreSQL doesn't know if the next statement will make any updates, so it must keep the transaction open
[19:44:00] <ConfusedFrog> you guys are the best
[19:44:06] <ConfusedFrog> time to get into debug mode
[19:44:41] <mc-guest-73> Environment variables don't RESOLVE the issue on my primary CPU
[19:45:47] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[19:46:21] <mc-guest-73> Thoughts?
[19:47:02] <Myon> mc-guest-73: it's probably not finding initdb in $PATH
[19:47:39] <mc-guest-73> I did look at the path on the secondary CPU where the install worked.  There is no INITDB in the $PATH
[19:48:25] <Myon> or maybe it's actually looking for pg_config
[19:48:41] <mc-guest-73> FYI, I have a server with PG installed on it.  I use my desktop to develop strawberry perl apps and when done, move the apps to the server.
[19:48:44] *** Quits: asymmentric (~asymmentr@118.151.210.82) (Quit: Connection closed)
[19:49:19] <mc-guest-73> I did search my hard drive and $PATH for initdb and pg_config, but don't see them.
[19:49:56] <Myon> then you don't have PostgreSQL installed :)
[19:49:57] <Zr40> do you have postgresql installed on that system?
[19:50:16] <mc-guest-73> The odd thing is that these installs worked seamlessly for the past 5 years.  It is only the recent attempt to upgrade to a newer version of DBD:: Pg do I get the error
[19:50:31] <Zr40> perhaps you did have it installed those times
[19:50:36] <mc-guest-73> I do not have PostgresSQL installed on my desktop computer.
[19:50:40] <Myon> maybe tests were not mandatory then
[19:50:49] <Zr40> are they now?
[19:50:56] <Myon> I don't know, I have PostgreSQL installed
[19:51:31] <mc-guest-73> So, you have PostgresSQL installed on your desktop even though your company has a server with production PG installed on it?
[19:51:49] <Myon> do you test your stuff on the production server?
[19:52:01] <mc-guest-73> No.  I don't want to break it!!!
[19:52:03] *** Myon sets mode: -o Myon
[19:52:51] <Myon> you could diff the two build logs to see where the differences start
[19:52:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[19:53:34] <mc-guest-73> Good point about DIFF the build logs on two desktops.  I'll give that a try.
[19:53:57] <mc-guest-73> Thanks.  Any other ideas before I leave this useful chat?
[19:54:09] <Myon> don't leave :)
[19:54:40] <mc-guest-73> :)   Much as I like it here, I need to upgrade to the most recent version of DBD::Pg
[19:54:43] <Zr40> so it sounds like you have several options. 1. see if you could disable the install-time tests (but I don't recommend that), 2. install postgresql locally so that installing DBD::Pg can find initdb and run its tests. You can then uninstall postgresql or just keep it so you can experiment :)
[19:55:19] <Myon> switch to an OS that has packages available for install
[19:56:01] <mc-guest-73> Good points, Zr40.  Myron, Win10 is the standard desktop at my company.
[19:56:46] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:58:13] *** Quits: mc-guest-73 (~mc-guest-@12.185.7.214) (Quit: Connection closed)
[19:59:04] *** Joins: Rashad (~textual@2a01:9700:13b9:5900:d4b:53d7:d739:3482)
[19:59:26] *** Quits: ConfusedFrog (~ConfusedF@201.202.14.138) (Quit: Connection closed)
[19:59:48] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[20:00:07] *** Joins: bindu (~bindu@user/bindu)
[20:01:01] *** Quits: magla (~gelignite@55d4decd.access.ecotel.net) (Quit: Stay safe!)
[20:01:37] *** Quits: ArchNoob (~archnoob@41.59.4.59) ()
[20:06:19] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[20:09:29] *** Joins: asymmentric (~asymmentr@118.151.210.82)
[20:10:15] *** Joins: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[20:10:22] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[20:10:30] *** Quits: thekingofbandit (~thekingof@user/thekingofbandit) (Read error: Connection reset by peer)
[20:11:00] *** Joins: dsrt^ (~dsrt@96-67-120-105-static.hfc.comcastbusiness.net)
[20:11:15] *** Joins: RonWhoCares (~ronpi@104.158.0.91)
[20:11:54] *** Joins: thekingofbandit (thekingofb@user/thekingofbandit)
[20:12:11] *** Joins: asymmentric63 (~asymmentr@118.151.210.82)
[20:12:52] *** Quits: asymmentric63 (~asymmentr@118.151.210.82) (Client Quit)
[20:13:57] *** Quits: shiranaihito (~textual@125-228-188-231.hinet-ip.hinet.net) (Ping timeout: 256 seconds)
[20:14:12] *** Quits: RonWhoCares_ (~ronpi@104.158.0.91) (Ping timeout: 252 seconds)
[20:18:45] *** Parts: mlu (~mlu@user/mlu) ()
[20:21:47] *** Quits: asymmentric (~asymmentr@118.151.210.82) (Quit: Connection closed)
[20:23:00] *** Quits: odnes (~odnes@5-203-166-158.pat.nym.cosmote.net) (Remote host closed the connection)
[20:23:21] *** Joins: odnes (~odnes@5-203-166-158.pat.nym.cosmote.net)
[20:24:24] *** Joins: methbkts (~methbkts@82.138.90.40)
[20:25:40] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Remote host closed the connection)
[20:28:17] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[20:29:04] *** Quits: Rashad (~textual@2a01:9700:13b9:5900:d4b:53d7:d739:3482) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[20:29:28] <aLeSD[m]> do I have to lock FOR UPDATE every time in a tx I read a vlue for later modify it ?
[20:30:02] *** Quits: fordfrog_ (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[20:31:10] <maret> Is there faster way to write this query? I have a large table and trying to find  count  which values repeats most if one of the columns -> https://www.pastiebin.com/6239f2947156f
[20:31:16] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[20:31:32] *** Quits: odnes (~odnes@5-203-166-158.pat.nym.cosmote.net) (Quit: Leaving)
[20:32:18] *** Quits: Guest3 (~Guest3@2a02:908:214:9cc0:96a:c07c:88ab:284c) (Quit: Client closed)
[20:37:01] *** Quits: gleu (~guillaume@2a01cb0c0e54b8007e39e75cb4390e1c.ipv6.abo.wanadoo.fr) (Quit: Leaving.)
[20:39:04] *** Joins: mizi (~mizi@user/mizi)
[20:39:32] <Myon> aLeSD[m]: depends on the isolation level and your requirements
[20:39:36] *** Joins: mizi_ (~mizi@user/mizi)
[20:41:56] *** Joins: Atque_ (~Atque@user/atque)
[20:42:15] *** Quits: merzo (~Thunderbi@192.162.238.196) (Ping timeout: 252 seconds)
[20:42:33] *** Quits: Atque_ (~Atque@user/atque) (Remote host closed the connection)
[20:42:55] *** Quits: Atque (~Atque@user/atque) (Ping timeout: 240 seconds)
[20:43:02] *** Quits: bmomjian (~bruce@62.237.32.196) (Quit: Leaving.)
[20:43:07] *** Joins: Atque (~Atque@user/atque)
[20:43:14] *** Joins: bmomjian (~bruce@62.237.32.196)
[20:43:19] *** Quits: dionysus69 (~Thunderbi@94-43-121-219.dsl.utg.ge) (Ping timeout: 250 seconds)
[20:43:44] *** Joins: Rashad (~textual@2a01:9700:13b9:5900:d4b:53d7:d739:3482)
[20:43:47] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 268 seconds)
[20:43:49] *** Quits: Rashad (~textual@2a01:9700:13b9:5900:d4b:53d7:d739:3482) (Client Quit)
[20:44:27] *** Quits: rodo (~rodo@2a01:e0a:2c6:d5f0:1b67:70b6:47c6:3f1c) (Ping timeout: 252 seconds)
[20:44:58] *** Quits: maret (~maret@195.12.158.102) (Quit: maret)
[20:47:22] *** Joins: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636)
[20:48:55] *** Joins: sky-4 (~sky@user/sky-)
[20:50:00] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[20:50:37] *** Quits: sky- (~sky@user/sky-) (Ping timeout: 240 seconds)
[20:51:06] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Remote host closed the connection)
[20:52:39] *** Joins: sky- (~sky@user/sky-)
[20:54:31] *** Quits: sky-4 (~sky@user/sky-) (Ping timeout: 245 seconds)
[20:56:30] *** Joins: rodo (~rodo@2a01:e0a:2c6:d5f0:41ab:c0da:f951:bd10)
[20:57:01] *** Quits: methbkts (~methbkts@82.138.90.40) (Ping timeout: 256 seconds)
[21:02:27] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[21:05:00] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[21:07:40] *** Joins: econo (uid147250@user/econo)
[21:16:58] *** Joins: kakashiAL (~kakashi@41.250.52.71)
[21:25:03] *** Quits: shkurata (~shkurata@ptr-8riebugy003l5s1zlrj.18120a2.ip6.access.telenet.be) (Quit: Leaving...)
[21:26:58] *** Quits: chrit (~cloehr@user/chrit) (Quit: Konversation terminated!)
[21:30:17] *** Quits: psoo (~psoo@dslb-002-202-190-148.002.202.pools.vodafone-ip.de) (Quit: Connection closed)
[21:31:57] *** Joins: Epithium (~Epithium@2603-6080-3203-8d68-b162-a173-f12a-3a04.res6.spectrum.com)
[21:33:37] *** Joins: jdavfsxd (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[21:34:17] *** Quits: kakashiAL (~kakashi@41.250.52.71) (Ping timeout: 240 seconds)
[21:35:39] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[21:36:13] <aLeSD[m]> thanks
[21:36:57] <aLeSD[m]> I have a DELETE querie thatr fails because of a foreig_key ... is there any way to "CASCADE" to the references ?
[21:37:33] <ilmari> aLeSD[m]: create the foreign key with ON DELETE CASCADE
[21:37:43] *** Joins: kakashiAL (~kakashi@41.250.52.71)
[21:38:09] <aLeSD[m]> ah! So it's a schema stuff
[21:38:39] <ilmari> yes
[21:39:28] *** Quits: vladoski (~vladoski@2001:b07:add:d406:ce45:15e1:21a7:b919) (Remote host closed the connection)
[21:40:01] *** Joins: funhouse (~funhouse@user/funhouse)
[21:40:21] *** Joins: MrZeus_ (~MrZeus@81.92.206.10)
[21:40:46] *** Quits: jnnnnnnnnn (~jnnnnnnnn@65.99.151.178) (Remote host closed the connection)
[21:42:01] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[21:43:59] *** Parts: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c) ()
[21:44:13] *** Quits: Reiner_Unsinn_ (~quassel@p5dd47daa.dip0.t-ipconnect.de) (Ping timeout: 268 seconds)
[21:48:08] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[21:49:34] *** Joins: palasso (~palasso@user/palasso)
[21:49:42] *** veegee_ is now known as veegee
[21:49:54] *** Joins: rek (~rek@adsl-d6.84-47-56.t-com.sk)
[21:53:40] *** Joins: magla (~gelignite@55d4decd.access.ecotel.net)
[21:58:57] *** Quits: raptelan (~raptelan@208.127.242.46) (Ping timeout: 240 seconds)
[22:00:43] *** Quits: ekathva_ (~ekathva@2001:999:50:a96:4ee5:c816:f561:d86f) (Remote host closed the connection)
[22:02:18] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[22:02:44] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[22:05:17] *** Quits: peder (4822@nidur.ifi.uio.no) (Ping timeout: 252 seconds)
[22:06:00] *** Joins: laidback_01 (~jax@98.97.66.6)
[22:06:40] *** Joins: ekathva (~ekathva@2001:999:50:a96:4ee5:c816:f561:d86f)
[22:07:02] *** Quits: veesh (~veesh@5.28.156.164) (Ping timeout: 268 seconds)
[22:07:28] *** Joins: veesh (~veesh@89.237.101.141)
[22:14:05] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[22:14:33] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4.1)
[22:15:53] *** Joins: zeden (~zeden@user/zeden)
[22:17:56] <laidback_01> anyone use pgpool-ii  How's it work?  I'm reading through the limitations, and so far as i can tell, it looks like most of these issues are going to be rare for me -the possibility of multi-statement queries seemingly being the most notable to me
[22:22:03] *** Quits: CanuteTheGreat (~CanuteThe@user/canutethegreat) (Read error: Connection reset by peer)
[22:22:06] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[22:23:49] *** Quits: alioui (~medeva293@197.244.38.44) (Ping timeout: 240 seconds)
[22:25:37] *** Quits: rek (~rek@adsl-d6.84-47-56.t-com.sk) (Remote host closed the connection)
[22:27:18] *** Quits: mexen_wfh (uid495612@id-495612.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[22:28:36] *** Quits: kakashiAL (~kakashi@41.250.52.71) (Ping timeout: 240 seconds)
[22:29:30] *** Quits: ferz (~ferz@93-39-141-215.ip76.fastwebnet.it) (Ping timeout: 252 seconds)
[22:30:00] *** Quits: ns12 (~ns12@user/ns12) (Quit: bye)
[22:31:04] *** Joins: ns12 (~ns12@user/ns12)
[22:32:01] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[22:32:22] *** Joins: bindu (~bindu@user/bindu)
[22:33:08] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[22:33:15] *** Joins: op2_ (~op2@user/op2)
[22:33:45] *** Joins: CanuteTheGreat (~CanuteThe@user/canutethegreat)
[22:33:59] <Myon> laidback_01: which feature do you want to use it for?
[22:34:29] *** Quits: op2 (~op2@user/op2) (Ping timeout: 256 seconds)
[22:39:44] <axsuul> Is it possible for autovacuums to cause Postgres to stop responding? I'm facing a strange daily issue of my Postgres instance (11.15) just being stuck and not responding to queries anymore. Looking at pg_stat_activity there are still active queries but I also noticed about 4-5 autovacuums also happening
[22:43:08] <laidback_01> Myon: I want better read performance in about 10-15 databases.  So I want to stand up a new server, use WAL shipping to get them in sync.. and use pgpool to pull reads from both of them in a load-balanced fashion.
[22:43:14] *** Joins: Reiner_Unsinn (~quassel@p5dd47daa.dip0.t-ipconnect.de)
[22:44:14] <laidback_01> get/keep  I see that pgpool will sync writes across multiple servers, but... I'm not really interested in that.  some of my keys are UUID keys generated by the server, and I want those kept sane.
[22:45:17] *** Joins: ferz (~ferz@93-39-141-215.ip76.fastwebnet.it)
[22:45:21] <stark__> autovacuums shouldn't cause other things to get stuck. Depending on how they're configured they could saturate the system with i/o but even then postgres should still respond, just slowly. And by default they wouldn't. If empty out a whole lot of tables then autovacuum might try to truncate them which can cause some hiccups but they shouldn't be noticeable
[22:45:43] <stark__> Are any of the autovacuums marked "to avoid wraparound"?
[22:46:26] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[22:49:20] <Myon> laidback_01: ideally, your app would be able to open a separate read-only connection directly to the replica(s)
[22:49:27] <Myon> pgpool isn't needed for that
[22:49:28] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[22:50:03] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[22:50:03] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[22:50:17] *** Quits: ur5us_ (~ur5us@2406:e002:6888:2f01:6b39:b2a:58ca:5636) (Ping timeout: 250 seconds)
[22:50:46] <laidback_01> Myon: true, and the reporting tool I've written does just that.  however, these are Mirth engines, an icinga engine, jenkins, nifi, and other similar tools... so far as I know, they don't do that by default, and while i'm OK in some languages, I'm not good in java!
[22:51:15] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[22:51:35] <laidback_01> Myon: but pgpool *can* do what I'm thinking of?  are there any downsides to look at?
[22:52:29] *** Joins: peder (4822@nidur.ifi.uio.no)
[22:53:02] <axsuul> stark__: thanks for the response, yep one of them is
[22:53:55] *** Joins: urandom9000 (~urandom90@2600:1700:1474:4b70:8dde:f759:f6e:461)
[22:54:20] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[22:55:16] <xiaomiao> laidback_01: afaict yes, pgpool can do it, alternatively haproxy
[22:56:22] *** Quits: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr) (Quit: WeeChat 3.4)
[22:56:41] <axsuul> stark__: is that relevant in any way to server not responding?
[22:58:55] *** Joins: vanessa (~farawayas@103.160.128.7)
[22:59:42] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[23:00:14] *** Joins: rvalue (~rvalue@user/rvalue)
[23:02:37] <laidback_01> xiaomiao: I have a haproxy server stood up, I'll check this out to see, thanks for the headsup
[23:02:59] *** Joins: Slade (uid128877@user/slade)
[23:03:35] <axsuul> stark__: do you have any recommendations on what else I should monitor when it happens again to get more information? There's also nothing in the logs unfortunately
[23:04:00] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[23:04:19] *** Quits: fef (~thedawn@user/thedawn) (Remote host closed the connection)
[23:04:57] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[23:07:07] *** Joins: jazzy (~jaziz@user/jaziz)
[23:10:09] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[23:10:45] *** Quits: mjf_ (~mjf@cst-prg-93-14.cust.vodafone.cz) (Ping timeout: 252 seconds)
[23:12:04] *** Joins: Auron (Auron956@user/auron)
[23:16:19] *** Joins: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net)
[23:18:59] *** Quits: the_lanetly_052 (~the_lanet@194.135.167.45) (Ping timeout: 252 seconds)
[23:19:56] *** Quits: justOkay (~justache@user/justache) (Read error: Connection reset by peer)
[23:21:06] *** Joins: justOkay (~justache@user/justache)
[23:23:38] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[23:31:19] *** Quits: darutoko (~darutoko@37.21.204.113) (Quit: Leaving)
[23:37:21] *** Quits: Guest59 (~Guest59@ool-18bccd13.dyn.optonline.net) (Quit: Client closed)
[23:37:57] *** Joins: hoppity (~hoppity@mobile-107-92-61-38.mycingular.net)
[23:37:57] *** Quits: hoppity (~hoppity@mobile-107-92-61-38.mycingular.net) (Changing host)
[23:37:57] *** Joins: hoppity (~hoppity@user/hoppity)
[23:40:24] *** Joins: raptelan (~raptelan@208.127.242.46)
[23:42:39] *** Quits: austb (~austb@c-73-240-245-80.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[23:50:14] *** Joins: maxzor (~maxzor@2a01cb04054faa0067e968e95df8d6eb.ipv6.abo.wanadoo.fr)
[23:53:51] *** Quits: magla (~gelignite@55d4decd.access.ecotel.net) (Quit: Stay safe!)
[23:56:40] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[23:57:25] *** Quits: held (~heldchen@user/held) (Ping timeout: 268 seconds)
[23:57:33] *** Quits: maxzor (~maxzor@2a01cb04054faa0067e968e95df8d6eb.ipv6.abo.wanadoo.fr) (Remote host closed the connection)
[23:57:52] *** Joins: maxzor (~maxzor@2a01cb04054faa00ed919463e5f3a61d.ipv6.abo.wanadoo.fr)
[23:58:02] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 268 seconds)
