[00:04:36] *** Quits: caoliver (~caoliver@075-129-098-247.res.spectrum.com) (Ping timeout: 240 seconds)
[00:11:26] *** Quits: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp) (Ping timeout: 256 seconds)
[00:14:02] *** Joins: Erutuon (~Erutuon@user/erutuon)
[00:34:02] *** Joins: chomwitt (~chomwitt@2a02:587:dc04:5f00:97ff:5c76:a7e3:730d)
[00:40:55] *** Quits: Darkcoal (~user@user/Darkcoal) (Quit: Darkcoal)
[00:43:51] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:1da8:8bb8:7aff:3b18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:04:22] *** Quits: Gustavo6046_ (~Gustavo60@user/gustavo6046) (Quit: Leaving)
[01:04:43] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[01:10:54] *** Joins: jacky (~jacky@user/jackyalcine)
[01:15:05] *** Joins: netlynx (~jan@94-226-69-15.access.telenet.be)
[01:15:08] *** Quits: svm_invictvs (~svm_invic@user/svm-invictvs/x-6696469) (Remote host closed the connection)
[01:34:03] *** Quits: Bombo (atom@user/bombo) (Ping timeout: 252 seconds)
[01:34:31] *** Joins: Bombo (atom@p2e58ed0f.dip0.t-ipconnect.de)
[01:34:32] *** Quits: Bombo (atom@p2e58ed0f.dip0.t-ipconnect.de) (Changing host)
[01:34:32] *** Joins: Bombo (atom@user/bombo)
[02:06:40] *** Joins: HTV04 (~HTV04@ool-4353759f.dyn.optonline.net)
[02:08:02] <HTV04> Hey everyone. Is anyone here proficient with the Lua C API? I'm having trouble embedding it for a game engine I'm working on in a C++ project and I was wondering if anyone could help me get started.
[02:13:54] *** Quits: fcr (~fran@r186-48-152-202.dialup.adsl.anteldata.net.uy) (Ping timeout: 272 seconds)
[02:15:01] <HTV04> I tried using the C++ wrapper luwra at first, and I made some decent progress because of its C-function-to-Lua wrapping functionality, but when I wanted to do more complex things like store functions in a table, things got more complex. Some of its included functions only seem to be able to create global variables instead of allowing them to be stored within a table. It's clear that using the pure Lua C API would allow me to accomplish this, 
[02:15:02] <HTV04> but I'm unsure of how to properly utilize it because it's intended for C.
[02:16:51] *** Joins: develCuy (~develCuy@190.237.60.7)
[02:17:46] <kakolainen[m]> try sol2 wrapper?
[02:18:20] *** Joins: fcr (~fran@r186-48-47-202.dialup.adsl.anteldata.net.uy)
[02:20:52] *** Quits: dre (~dre@2001:8003:c932:c301:147f:456a:d163:a87f) (Ping timeout: 250 seconds)
[02:26:12] *** Quits: jacky (~jacky@user/jackyalcine) (Quit: Iridium IRC Client)
[02:27:34] <HTV04> kakolainen[m]: Is this it? https://github.com/ThePhD/sol2
[02:27:50] *** Joins: jacky (~jacky@47.202.64.169)
[02:32:21] *** Quits: fcr (~fran@r186-48-47-202.dialup.adsl.anteldata.net.uy) (Quit: -)
[02:32:54] *** Quits: jacky (~jacky@47.202.64.169) (Ping timeout: 272 seconds)
[02:33:04] *** Joins: dre (~dre@2001:8003:c932:c301:1811:4143:ef26:85c6)
[02:33:40] *** Quits: pizdets (~pizdets@183.182.114.44) (Ping timeout: 256 seconds)
[02:33:46] *** Joins: pizdets_ (~pizdets@183.182.110.129)
[02:34:10] *** Joins: jacky (~jacky@47.202.64.169)
[02:34:46] <kakolainen[m]> yeah
[02:38:28] <HTV04> Wow, I wish I had known about this earlier. It looks like it has everything I need :)
[02:38:59] <HTV04> Thanks so much!
[02:46:41] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:1da8:8bb8:7aff:3b18)
[02:56:40] *** Quits: HTV04 (~HTV04@ool-4353759f.dyn.optonline.net) (Quit: Leaving)
[03:16:10] *** Quits: develCuy (~develCuy@190.237.60.7) (Ping timeout: 256 seconds)
[03:16:26] *** Quits: chomwitt (~chomwitt@2a02:587:dc04:5f00:97ff:5c76:a7e3:730d) (Remote host closed the connection)
[03:42:17] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[03:46:32] *** Quits: dre (~dre@2001:8003:c932:c301:1811:4143:ef26:85c6) (Quit: Leaving)
[03:47:28] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[03:50:37] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 240 seconds)
[04:01:29] *** Joins: skapata (~Skapata@user/skapata)
[04:31:11] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:1da8:8bb8:7aff:3b18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:34:10] *** Joins: ratchetfreak (~ratchetfr@d8d8779d9.access.telenet.be)
[04:36:58] *** Quits: netlynx (~jan@94-226-69-15.access.telenet.be) (Quit: Leaving)
[04:38:18] *** Quits: ratchetfreak_ (~ratchetfr@d8D8779D9.access.telenet.be) (Ping timeout: 272 seconds)
[04:41:40] *** Joins: fcr (~fran@r186-48-47-202.dialup.adsl.anteldata.net.uy)
[04:49:57] *** Quits: fcr (~fran@r186-48-47-202.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[04:50:33] *** Joins: fcr (~fran@r186-48-47-202.dialup.adsl.anteldata.net.uy)
[04:52:25] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:1da8:8bb8:7aff:3b18)
[05:00:28] *** Quits: Erutuon (~Erutuon@user/erutuon) (Ping timeout: 272 seconds)
[05:15:18] *** Joins: Erutuon (~Erutuon@user/erutuon)
[05:25:03] *** Joins: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp)
[05:33:44] *** Quits: ratchetfreak (~ratchetfr@d8d8779d9.access.telenet.be) (Read error: Connection reset by peer)
[05:56:15] * _xor needs to figure out a good way to setup lua debugging
[05:58:42] *** Quits: jacky (~jacky@47.202.64.169) (Remote host closed the connection)
[06:50:25] *** Quits: sparked-- (~sparked--@ack.zs-zero.net) (Ping timeout: 256 seconds)
[06:50:35] *** Joins: sparked-- (~sparked--@ack.zs-zero.net)
[06:54:20] *** Quits: ubq323 (~ubq323@user/ubq323) (Ping timeout: 256 seconds)
[07:02:56] *** Joins: jacky (~jacky@47.202.64.169)
[07:02:56] *** Quits: jacky (~jacky@47.202.64.169) (Changing host)
[07:02:56] *** Joins: jacky (~jacky@user/jackyalcine)
[07:30:38] <_xor> Which unit testing framework should I use? (looking for suggestions)
[07:40:51] *** Quits: jacky (~jacky@user/jackyalcine) (Quit: Iridium IRC Client)
[07:58:46] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[08:01:01] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: Leaving)
[08:04:54] *** Quits: Vornicus (~Vornicus@2603-8000-5d07-7ef0-bc9a-9d0f-1878-88ac.res6.spectrum.com) (Read error: Connection reset by peer)
[08:08:23] *** Joins: Darkcoal (~user@user/Darkcoal)
[08:10:50] *** Quits: Elw3 (~Elw3@dynamic-002-247-243-113.2.247.pool.telefonica.de) (Ping timeout: 256 seconds)
[08:12:56] *** Joins: Elw3 (~Elw3@dynamic-002-247-243-113.2.247.pool.telefonica.de)
[08:52:46] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 256 seconds)
[08:58:59] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:1da8:8bb8:7aff:3b18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:02:41] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:2db7:686:885a:81b9)
[09:08:41] *** Quits: Darkcoal (~user@user/Darkcoal) (Ping timeout: 256 seconds)
[09:10:42] *** Joins: Darkcoal (~user@user/Darkcoal)
[09:24:02] *** Joins: Psyraven_ (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp)
[09:25:21] *** Quits: Psyraven (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp) (Ping timeout: 256 seconds)
[09:44:34] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:2db7:686:885a:81b9) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:00:06] <MattJ> _xor, I mostly use busted. Both busted and lua-unit tend to be packaged in distros
[12:09:39] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[12:23:08] *** Joins: netlynx (~jan@94-226-69-15.access.telenet.be)
[12:40:10] *** Quits: Elw3 (~Elw3@dynamic-002-247-243-113.2.247.pool.telefonica.de) (Remote host closed the connection)
[13:10:38] *** Joins: ratchetfreak (~ratchetfr@d8d8779d9.access.telenet.be)
[13:15:40] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[13:49:14] *** Quits: Wally (~Wally@dragonbox/forum-staff/wally) (Remote host closed the connection)
[13:58:36] *** Joins: ratchetfreak_ (~ratchetfr@d8D8779D9.access.telenet.be)
[14:16:37] *** Quits: fcr (~fran@r186-48-47-202.dialup.adsl.anteldata.net.uy) (Ping timeout: 256 seconds)
[14:21:53] *** Joins: fcr (~fran@r167-56-84-37.dialup.adsl.anteldata.net.uy)
[14:23:56] *** Joins: magla (~gelignite@55d46ecf.access.ecotel.net)
[14:25:23] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[15:29:37] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Quit: taupiqueur)
[15:29:56] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[15:30:41] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Client Quit)
[15:31:35] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[15:37:52] *** Joins: mi6x3m (~mi6x3m@user/mi6x3m)
[15:38:05] <mi6x3m> hey, what is the fastest way to create a string of n spaces followed by 1 other character?
[15:38:13] <mi6x3m> format?
[15:38:32] <jdarnley> string.rep for the first part
[15:38:56] <mi6x3m> ah
[15:48:29] *** Quits: reset (~reset@user/reset) (Quit: reset)
[15:48:42] *** Quits: Erutuon (~Erutuon@user/erutuon) (Ping timeout: 256 seconds)
[15:51:23] *** Quits: mi6x3m (~mi6x3m@user/mi6x3m) (Quit: Leaving)
[16:37:15] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[17:13:24] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:409c:deea:cba7:6b6d)
[17:13:24] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:409c:deea:cba7:6b6d) (Changing host)
[17:13:24] *** Joins: skapata (~Skapata@user/skapata)
[17:16:32] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Quit: elastic_dog)
[17:16:58] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[17:19:39] *** Joins: eroux (~eroux@102-65-85-242.ftth.web.africa)
[17:26:27] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[17:37:43] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[17:48:50] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[17:49:54] <hsv> Hi, hopefully Lua nginx module is on-topic here... i'm wondering if it serves any purpose declaring variables as 'local' inside of a ..._by_lua_block { }.
[17:50:35] <hsv> so far i declared all variables as local, but unsure what difference it makes in this situation.
[17:58:58] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[17:59:55] *** Joins: doorzan (~doorzan@2800:200:f540:73::c)
[18:00:16] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Max SendQ exceeded)
[18:00:17] *** Quits: doorzan (~doorzan@2800:200:f540:73::c) (Changing host)
[18:00:17] *** Joins: doorzan (~doorzan@user/doorzan)
[18:00:44] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[18:03:42] *** Quits: doorzan (~doorzan@user/doorzan) (Client Quit)
[18:04:43] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[18:24:46] *** Joins: Vornicus (~Vornicus@2603-8000-5d07-7ef0-e5cd-9d1e-ee8d-d0aa.res6.spectrum.com)
[18:25:54] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 250 seconds)
[18:28:00] *** Joins: skapata (~Skapata@user/skapata)
[18:31:23] *** Joins: ubq323 (~ubq323@user/ubq323)
[18:33:32] <jdarnley> hsv: if you don't declare them as local then they will be global
[18:38:41] <kakolainen[m]> globals are in hashmap and accessed with a key but locals are accessed with integer offset to the local array, in practice accessing the global hashmap is not slower
[18:44:33] <hsv> guess i should do some tests, i'm unsure if global means shared across different ..._by_lua_block { }'s.
[18:46:06] <furq> https://github.com/openresty/lua-nginx-module#data-sharing-within-an-nginx-worker
[18:47:50] <hsv> furq: thanks... "Note that the use of global Lua variables is strongly discouraged, as it may lead to unexpected race conditions between concurrent requests."
[18:49:44] <kakolainen[m]> of course you should always prefer locals
[18:50:57] <hsv> sure,.
[18:51:37] <kakolainen[m]> interesting thing I was reading GTA V Lua code once and there was a while loop's i variable never defined as local so they use global loop counters which is pretty bad
[19:30:56] <nmz> from the people that brought you "10mb json file too big to parse", now there's "use globals everywhere"
[19:33:18] *** Joins: jacky (~jacky@user/jackyalcine)
[20:01:31] *** Joins: graywolf (~wolf@user/graywolf)
[20:01:39] <kakolainen[m]> they use LPeg to parse json which should be fine also with Lua 5.4 easy way to write protect the main global table would be to set it as _index metatable for plugin's ENV 
[20:37:06] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[20:37:37] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[20:37:48] *** Quits: jacky (~jacky@user/jackyalcine) (Ping timeout: 272 seconds)
[20:38:35] *** Quits: ArRay_ (~ArRay_@user/array/x-1947090) (Ping timeout: 240 seconds)
[20:39:15] *** Quits: ano (~ano@user/ano) (Ping timeout: 240 seconds)
[20:42:27] *** Joins: jacky (~jacky@user/jackyalcine)
[20:48:02] *** Quits: Vornicus (~Vornicus@2603-8000-5d07-7ef0-e5cd-9d1e-ee8d-d0aa.res6.spectrum.com) (Read error: Connection reset by peer)
[20:54:08] <nmz> https://arstechnica.com/gaming/2021/03/hacker-reduces-gta-online-load-times-by-over-70-percent/
[20:54:13] *** Joins: ArRay_ (~ArRay_@user/array/x-1947090)
[21:15:38] *** Joins: rgrinberg (~textual@2806:101e:7:70b6:89ee:62bb:3f9a:ddbb)
[21:27:16] *** Joins: ano (~ano@user/ano)
[21:35:48] <nmz> they would save even more time if they switched from json to lua
[21:36:42] <nmz> maybe
[21:38:21] <nmz> I just tested a 16mb lua file (basically the covid data 20 times, and it loaded the table in 1 second
[21:39:07] <ubq323> how could lua be faster to parse than json?
[21:42:57] <kakolainen[m]> I was mostly talking about the community developed GTA V Lua plugin system FiveM https://github.com/citizenfx/fivem
[21:43:45] *** Joins: reset (~reset@user/reset)
[21:50:23] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[21:51:13] <nmz> ubq323: for one, you don't have to use lpeg
[21:52:04] <nmz> but I'll check
[21:53:18] <ubq323> you can parse json without lpeg
[21:58:33] <nmz> in lua?
[21:58:38] <nmz> well yeah
[22:02:08] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[22:09:37] <nmz> but the question is, could the gtaV devs, since they already use lua, just exported a table and loaded it, and would it have been faster to load/parse
[22:09:42] <nmz> and just checked, and it is
[22:10:02] <nmz> by 5x (using cjson decode)
[22:10:29] <kakolainen[m]> Lua is faster? is the data similar?
[22:10:50] <nmz> its exactly the same
[22:10:54] <nmz> wait, this isn't cjson
[22:10:59] <nmz> idk what json this is
[22:13:20] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[22:14:01] <nmz> ah, this is luajson, which uses lpeg, its probably what gta uses
[22:14:36] <nmz> still, this is a 16mb file, idk why it took them 3 minutes to load the game, they're probably doing something else, because even parsing the json is 5 seconds
[22:15:15] <nmz> 7*
[22:22:18] *** Quits: Psyraven_ (~Psyraven@p79032f3f.tokynt01.ap.so-net.ne.jp) (Ping timeout: 272 seconds)
[22:23:41] *** Quits: Darkcoal (~user@user/Darkcoal) (Quit: Darkcoal)
[22:28:19] <ubq323> nmz: the article you linked mentions them using sscanf and strlen to parse the json which implies they are doing the parsing in c not in lua
[22:28:31] <ubq323> and also explains why it was taking them so long to parse the json
[22:28:32] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[22:32:14] *** Quits: rgrinberg (~textual@2806:101e:7:70b6:89ee:62bb:3f9a:ddbb) (Ping timeout: 260 seconds)
[22:33:32] *** Joins: epony (epony@user/epony)
[22:44:44] *** Quits: graywolf (~wolf@user/graywolf) (Quit: WeeChat 3.3)
[23:07:16] *** Quits: ratchetfreak (~ratchetfr@d8d8779d9.access.telenet.be) (Ping timeout: 272 seconds)
[23:28:57] *** Joins: Moosadee (~Moosadee@136.32.155.193)
[23:36:53] *** Joins: Elw3 (~Elw3@dynamic-002-247-242-196.2.247.pool.telefonica.de)
[23:39:14] *** Joins: Erutuon (~Erutuon@user/erutuon)
[23:44:12] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[23:44:59] *** Joins: Tricycle (~CGI273@lfbn-idf1-1-1376-196.w90-79.abo.wanadoo.fr)
[23:49:25] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[23:50:02] *** Quits: b0o (0e4a0bf4c9@2604:bf00:561:2000::1bf) (Ping timeout: 250 seconds)
[23:50:43] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Client Quit)
[23:51:46] *** Quits: sm2n (ae95cb1267@user/sm2n) (Ping timeout: 250 seconds)
[23:51:55] *** Joins: b0o (0e4a0bf4c9@2604:bf00:561:2000::1bf)
[23:52:18] *** Joins: sm2n (ae95cb1267@user/sm2n)
[23:53:07] *** Quits: netlynx (~jan@94-226-69-15.access.telenet.be) (Quit: Leaving)
