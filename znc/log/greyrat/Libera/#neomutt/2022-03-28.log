[00:04:27] *** Quits: wolfshappen (~waff@irc.furworks.de) (Read error: Connection reset by peer)
[00:07:51] <mfiano> flatcap: Are there any freebsd users using neomutt here?
[00:09:40] <mfiano> I'm curious why the same version on FreeBSD has problems with my same config. One thing is it requires $folder before ${named-,mailboxes}. Other things is the neomutt.vim syntax plugin is expecting older variable names, like $spoolfile instead of $spool_file, and a bunch of other ones.
[00:10:59] <mfiano> Seems like I have to reorganize my whole config to work on FreeBSD, and I'm not sure why, since I'm using the same version on Arch.
[00:13:43] <mfiano> I just wanted to do some testing on another platform for you, and I'm not sure why there is such a large inconsistency. Anyway, no rush, you're probably sleeping.
[00:54:46] *** Joins: wolfshappen (~waff@irc.furworks.de)
[00:54:56] *** Quits: keypusher (keypusher@user/keypusher) (Read error: Connection reset by peer)
[00:55:15] *** Joins: keypusher (keypusher@user/keypusher)
[00:57:56] *** Joins: inak (~justme@228-134-237-24.gci.net)
[01:05:30] *** Quits: oriba (~oriba@dynamic-077-013-007-140.77.13.pool.telefonica.de) (Remote host closed the connection)
[01:08:14] *** Quits: jotoho (~jotoho@user/jotoho) (Quit: Closing client)
[01:10:25] *** Quits: strajder (~strajder@user/strajder) (Quit: leaving)
[02:04:55] *** Joins: oriba (~oriba@dynamic-077-013-007-140.77.13.pool.telefonica.de)
[02:34:21] *** Joins: qub411 (~user@60-242-81-127.tpgi.com.au)
[02:35:05] *** Quits: qub411 (~user@60-242-81-127.tpgi.com.au) (Client Quit)
[02:41:34] <oriba> hello flatcap, today I looked at the compressed-mailbox hook, but have some questions
[02:41:53] <oriba> where is the according entry in mutt_commands.c ?
[02:42:37] <oriba> and... the stuff from "ifdef USE_COMP_MBOX" looks rather unfinished
[02:42:55] *** Joins: rgrinberg (~textual@177.248.144.104)
[02:42:56] <oriba> so it would be more than just refactoring I would guess.
[02:43:14] <oriba> do you have more infos on that thing?
[02:43:31] <oriba> otherwise I would look for other stuff to refactor out
[02:43:41] <oriba> (from mutt_parse_hook())
[02:49:10] *** Joins: qub411 (~user@60-242-81-127.tpgi.com.au)
[03:05:48] *** Joins: pekman (~pekman@user/pekman)
[03:13:19] *** Quits: qub411 (~user@60-242-81-127.tpgi.com.au) (Quit: WeeChat 3.4.1)
[03:20:11] *** Joins: qub411 (~user@60-242-81-127.tpgi.com.au)
[03:21:02] *** Quits: qub411 (~user@60-242-81-127.tpgi.com.au) (Client Quit)
[03:25:24] *** Quits: rgrinberg (~textual@177.248.144.104) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:45:05] *** Joins: qub411 (~user@60-242-81-127.tpgi.com.au)
[03:46:17] *** Quits: qub411 (~user@60-242-81-127.tpgi.com.au) (Client Quit)
[03:46:54] *** Quits: Pali (~pali@user/pali) (Ping timeout: 252 seconds)
[03:47:25] *** Joins: qub411 (~user@60-242-81-127.tpgi.com.au)
[03:53:39] *** Quits: plastico (~plastico@neomutt/plastico) (Quit: WeeChat 3.4)
[04:23:50] <flatcap> mfiano: great.  I may add a couple more checks, then merge it in the morning
[04:25:29] <flatcap> oriba: there are three for the compressed mailbox: open-hook, append-hook, close-hook
[04:26:01] <flatcap> those three run a check on the arg, to make sure it has two expandos in it
[04:27:43] <flatcap> as for `#ifdef USE_COMP_MBOX`, we decided to *always* define it in auto.def (configure) because it has no build dependencies
[04:27:55] <flatcap> (the sidebar is the same)
[04:28:14] <flatcap> we've left the #ifdef's in place as markers to make the code more visible
[04:28:15] <oriba> flatcap: I meant I looked at the "struct Command mutt_commands[]" and did not find something like "open-hook" in the first of the three arguments 
[04:28:25] <flatcap> oh, sorry
[04:29:00] <flatcap> they're defined in compmbox/compress.c
[04:29:07] <flatcap> struct Command comp_commands[]
[04:29:22] <flatcap> registered by mutt_comp_init()
[04:30:20] * oriba wonders, why not all hooks are called/registered the same way
[04:31:47] <flatcap> because splitting the commands into a modular architecture is a recent feature
[04:32:25] <flatcap> if you look at mutt's code, everything is SUPER global :-)
[04:32:36] <oriba> yes :-(
[04:33:51] <flatcap> .
[04:34:39] <oriba> but the the compressed mailbox stuff is really hooks, or should it moved to somewhere else?
[04:36:57] <flatcap> I suppose it's ok for them to stay in hooks.c, but a better place would be compmbox/hooks.c
[04:37:37] <flatcap> but putting them in a subdir, adds a build dep on the root source files
[04:38:36] <oriba> maybe it's better to first refactor something that definitely needs to stay in hooks.c
[04:39:30] <oriba> when mutt_parse_hook() then is very small, it's easier to do such shiftts (which seem to make sense from what you have written)
[04:39:43] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[04:40:05] <oriba> if it makes the structure of the code better, I think the shift makes sense
[04:40:24] <flatcap> yes
[04:40:25] <oriba> and a build dep is acceptable then, I think
[04:41:32] <flatcap> yes, it's probably not too bad
[04:41:52] <oriba> SO I would pikc a different hook first
[04:42:40] <oriba> btw: I jsut set up a local repo for rc-file snippets, that are i tended to do testing
[04:42:54] <flatcap> those three need splitting out of mutt_parse_hook() as they closely related to each other and have a test function that's private to them
[04:42:56] <oriba> the charset/iconv testfile is the first item
[04:43:08] <flatcap> great
[04:45:35] <oriba> I saw the ticket #3298; it is about startup/shutdown/timeout hooks
[04:45:35] <neo-bot> Issue by @dataCobra "Can't configure startup-hook, timeout-hook and shutdown-hook at once": https://github.com/neomutt/neomutt/issues/3298
[04:45:40] <oriba> so I looked for startup hook
[04:45:50] <oriba> there is already a separate function for it!
[04:46:12] <oriba> hehe, nice bot :-)
[04:47:09] <flatcap> to execute it, yes
[04:48:09] <oriba> ah, you mean not parsing... but executing?
[04:48:40] <flatcap> yes.  the parsing is done by mutt_parse_hook()
[04:49:40] <oriba> and mabye there is the problem with the above mentioned issue...
[04:49:48] <flatcap> that issue turned out to be a quirk when running mbsync
[04:55:39] <flatcap> so, please can you split out the comp-mbox hooks.  we can look at other hooks afterwards
[05:01:09] <oriba> hmhh, I thought above we came to the conclusion, to do the splitting later?
[05:02:31] <flatcap> no.  I think we want to split out those hooks, because they belong separately
[05:03:09] <oriba> when mutt_parse_hook() is already smaller, it's easier to refactor things like moving code and change the build...
[05:03:21] <flatcap> I don't mind if we leave them in hooks.c move them to compmbox/
[05:03:39] <oriba> ?
[05:04:49] <oriba> I have no clue how to move that stuff... and what stuff. the parsing code inside the #ifdef?
[05:05:12] <flatcap> yes, just like the charset,iconv hooks
[05:05:33] <flatcap> create a new function to parse the three compmbox hooks
[05:06:28] <flatcap> for extra brownie points, put it in a new file compmbox/hook.c
[05:06:56] <flatcap> (that will require adjusting the build and linking up doxygen headers)
[05:07:57] <oriba> so just refactoring would be first step, then moving
[05:08:49] <flatcap> yep
[05:09:27] <oriba> ok, that looks possible
[05:09:45] <oriba> btw: I just tested the startup/shutdown hooks
[05:09:55] <oriba> from the online documentation: "startup-hook – when NeoMutt starts up, before opening the first mailbox"
[05:10:12] <oriba> but when using -Z cli arg, the hooks don't work
[05:11:19] <flatcap> hmm... does it get fired when you enter the index?
[05:11:21] * flatcap looks ...
[05:12:19] <flatcap> they could do with a rethink
[05:12:19] <oriba> "No mailbox with new mail" - startup/shutdown, but no hook-invocation
[05:22:25] <oriba> ok, late enough, going to bed...
[05:22:36] *** Quits: oriba (~oriba@dynamic-077-013-007-140.77.13.pool.telefonica.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[05:23:20] <flatcap> night
[05:32:17] *** Quits: maetthew (~maetthew@user/maetthew) (Quit: ZNC 1.8.2 - https://znc.in)
[05:34:55] *** Joins: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se)
[05:34:56] *** Quits: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se) (Changing host)
[05:34:56] *** Joins: maetthew (~maetthew@user/maetthew)
[06:02:57] *** Quits: reset (~reset@user/reset) (Quit: reset)
[06:10:10] *** Joins: rgrinberg (~textual@177.248.144.104)
[06:14:04] *** Quits: BrunoFontes (~bruno@2a02:c207:2026:6264::1) (Quit: WeeChat 2.8)
[06:14:30] *** Joins: BrunoFontes (~bruno@2a02:c207:2026:6264::1)
[06:20:39] *** Quits: rgrinberg (~textual@177.248.144.104) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:41:55] *** Quits: nyah (~nyah@05453449.skybroadband.com) (Quit: leaving)
[07:28:11] *** Quits: pekman (~pekman@user/pekman) (Quit: pekman)
[09:05:45] *** Quits: pinpoxIRC (~pinpox@v2202101107577140883.nicesrv.de) (*.net *.split)
[09:05:48] *** Quits: epony (epony@user/epony) (*.net *.split)
[09:05:49] *** Quits: qyliss (~qyliss@atuin.qyliss.net) (*.net *.split)
[09:05:49] *** Quits: k33p3r (kexik@2605:6400:c847:1948::8491) (*.net *.split)
[09:05:49] *** Quits: Kinnison (~dsilvers@godforsaken.horse) (*.net *.split)
[09:05:49] *** Quits: crest (~quassel@user/crest) (*.net *.split)
[09:05:57] *** Joins: Kinnison (~dsilvers@godforsaken.horse)
[09:05:58] *** Joins: crest (~quassel@user/crest)
[09:06:20] *** Joins: pinpoxIRC (~pinpox@v2202101107577140883.nicesrv.de)
[09:06:42] *** Joins: qyliss (~qyliss@2001-ba8-1f1-f0bc-0-0-0-2.autov6rev.bitfolk.space)
[09:08:44] *** Quits: nattiestnate (~nate@202.138.250.62) (Quit: WeeChat 3.4.1)
[09:09:03] *** Joins: k33p3r (kexik@2605:6400:c847:1948::8491)
[09:09:32] *** Joins: Guest6037 (epony@lz2.eu)
[09:36:49] *** Joins: cdman (~dcm@user/dmc/x-4369397)
[10:12:06] *** Quits: inak (~justme@228-134-237-24.gci.net) (Quit: Leaving)
[10:39:12] *** Quits: sbach (~sbach@user/sbach) (Read error: Connection reset by peer)
[10:41:19] *** Joins: plastico (~plastico@neomutt/plastico)
[10:41:32] *** Joins: sbach (~sbach@user/sbach)
[10:42:35] *** Quits: mrus (~mrus@gateway/tor-sasl/mrus) (Ping timeout: 240 seconds)
[10:45:02] *** Joins: mrus (~mrus@gateway/tor-sasl/mrus)
[10:55:50] *** Quits: mrus (~mrus@gateway/tor-sasl/mrus) (Remote host closed the connection)
[10:56:05] *** Joins: mrus (~mrus@gateway/tor-sasl/mrus)
[11:00:30] *** Joins: kzak (~kzak@nat-37.starnet.cz)
[11:07:32] <gahr> morning
[11:09:15] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Ping timeout: 240 seconds)
[11:11:30] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[11:49:46] *** Quits: aplund (~aplundmat@2001:470:69fc:105::4146) (Quit: Bridge terminating on SIGTERM)
[11:49:47] *** Quits: p00f (~p00f@2001:470:69fc:105::38f) (Quit: Bridge terminating on SIGTERM)
[11:49:50] *** Quits: dafna2[m] (~dafnamaym@2001:470:69fc:105::3076) (Quit: Bridge terminating on SIGTERM)
[11:49:52] *** Quits: jeronath[m]1 (~jeronathm@2001:470:69fc:105::a4) (Quit: Bridge terminating on SIGTERM)
[11:49:54] *** Quits: kaji (~kajiryoji@2001:470:69fc:105::405b) (Quit: Bridge terminating on SIGTERM)
[11:49:54] *** Quits: adray (~araymatri@2001:470:69fc:105::1873) (Quit: Bridge terminating on SIGTERM)
[11:49:58] *** Quits: sss123next[m] (~sss123nex@2001:470:69fc:105::1:ceac) (Quit: Bridge terminating on SIGTERM)
[11:53:53] *** Quits: holgersson (~quassel@user/holgersson) (Ping timeout: 256 seconds)
[11:55:10] *** Joins: dafna2[m] (~dafnamaym@2001:470:69fc:105::3076)
[11:57:09] *** Joins: Pali (~pali@user/pali)
[11:57:30] <mfiano> gahr: Hey!
[11:57:36] *** Joins: aplund (~aplundmat@2001:470:69fc:105::4146)
[11:57:57] *** Joins: kaji (~kajiryoji@2001:470:69fc:105::405b)
[11:58:14] *** Joins: jeronath[m] (~jeronathm@2001:470:69fc:105::a4)
[11:58:14] *** Joins: p00f (~p00f@2001:470:69fc:105::38f)
[11:58:35] *** Joins: adray (~araymatri@2001:470:69fc:105::1873)
[11:58:39] *** Joins: sss[m] (~sss123nex@2001:470:69fc:105::1:ceac)
[11:59:02] <mfiano> I'm starting to find those obscure bugs. flatcap fixed a segfault I found
[12:00:06] *** Joins: holgersson (~quassel@user/holgersson)
[12:00:46] <mfiano> I think my latest question about some weird inconsistency went un-noticed though.
[12:26:38] <gahr> hi mfiano 
[12:27:07] <gahr> I use FreeBSD
[12:27:19] <mfiano> Oh great
[12:27:19] <gahr> can you please re-state the issue?
[12:27:24] <mfiano> Sure
[12:27:30] <mfiano> I'm curious why the same version on FreeBSD has problems with my same config. One thing is it requires $folder before ${named-,mailboxes}. Other things is the neomutt.vim syntax plugin is expecting older variable names, like $spoolfile instead of $spool_file, and a bunch of other ones.
[12:27:36] <mfiano> Seems like I have to reorganize my whole config to work on FreeBSD, and I'm not sure why, since I'm using the same version on Arch.
[12:28:28] <gahr> if your mailboxes command uses + or =, you'll need folder before, because + and = expand to the value of folder
[12:28:44] <gahr> it can't behave differently based on the OS
[12:28:54] <gahr> you must be having a different config file or a different neomutt version
[12:29:11] <mfiano> Well it certainly does on Arch. and neomutt -v reports the same version (latest release)
[12:32:46] <mfiano> I have a config that works great on Arch with the same version of neomutt, and I can't explain why it doesn't on FreeBSD
[12:35:20] <mfiano> I have an idea. Let me recompile neomutt from ports
[12:35:33] <mfiano> (I uninstalled it out of frustration)
[12:39:43] <gahr> do arch and freebsd provide different system-wide config files perhaps?
[12:41:41] <mfiano> I am pretty sure I know what the issue is
[12:42:06] <mfiano> On Arch my maildir is ~/Mail and on Freebsd it is ~/mail. $folder defaults to the former.
[12:42:25] <mfiano> Which is why my config was able to define mailboxes before any settings
[12:43:17] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 240 seconds)
[12:44:48] <gahr> makes sense
[12:44:54] <mfiano> gahr: Do you use mbsync?
[12:47:09] *** Quits: polve (~polve@user/polve) (Ping timeout: 256 seconds)
[12:49:05] <gahr> no, I use IMAP
[12:49:36] <mfiano> Hmm, I'm trying to figure out how to make my mail server scalable
[12:50:03] <mfiano> My mail server is a cheap VPS with limited storage. I would like to auto-delete mail from the server when I download it from IMAP (with mbsync)
[12:51:17] *** Joins: eroux (~eroux@102-65-72-61.ftth.web.africa)
[12:54:23] <Pali> mfiano: For fast one-way email download via imap I wrote my own tool... as there was no tool which can do this very fast and be compatible also with google imap server.
[12:54:47] <Pali> So maybe you should do the same thing: Write tool for your specific needs
[12:55:09] <mfiano> I think that's orthogonal to my problem. I'm not sure how to tell the server to delete mail it serves to an IMAP client
[12:55:57] <Pali> IIRC you cannot tell it to server. Your imap client must do it (delete email after fetch).
[12:56:43] <mfiano> Even still, I'm not sure how, and if mbsync has this functionality or I would need to write my own tool.
[12:58:51] <Pali> For my needs mbsync and offlineimap were unsuitable (horrible slow with google), so I chose option to write own tool.
[12:59:12] <mfiano> I run my own mail server, which is quite fast.
[12:59:51] <Pali> I mean that those two tools (mbsync and offlineimap) were slow.
[13:00:29] <mfiano> I haven't experienced that. I run mbsync every 5 seconds and it's near instant.
[13:02:26] <mfiano> gahr: header_cache_compress_method is an unknown option in mail/neomutt from ports
[13:02:38] <mfiano> and header_cache_compress_level
[13:03:02] <mfiano> Do I need to add some build flag or something?
[13:39:02] <gahr> I guess that depends on which header cache backend is compiled in
[13:39:47] <gahr> no, it depends on whether you have compression compiled in :)
[13:40:02] <gahr> --with-lz4, --with-zstd, --with-zlib
[13:41:58] <mfiano> Let me see
[13:42:39] <mfiano> Ah another case of the poor port maintenance.
[13:42:44] <mfiano> None of the above
[13:43:03] <gahr> I wouldn't be so rude
[13:43:30] <mfiano> You're right. I submit a lot of fixes to ports is all.
[13:55:16] <mfiano> What is the proper syntax for "set some_string_var = <some shell command>" ?
[13:55:44] <mfiano> I am trying the backtick notation but it is trying to parse the output of the shell command as a neomutt command and failing
[13:56:28] <mfiano> Even tried wrapping the backticks in both kinds of quotes
[13:59:17] <flatcap> morning all
[13:59:44] <mfiano> nevermind, I got it
[13:59:56] <mfiano> GOod morning flatcap. Thanks for the fix!
[14:00:42] <flatcap> hi mfiano, np
[14:00:55] <flatcap> > neomutt.vim syntax plugin is expecting older variable names
[14:01:05] <mfiano> Ignore that
[14:01:34] <mfiano> I didn't have neomutt.vim loaded, and neovim must have builtin support for older syntax
[14:01:44] <flatcap> I updated *our* version a couple of days ago, which you can use directly: https://github.com/neomutt/neomutt.vim
[14:02:05] <mfiano> Yeah I pulled it with vim-plug a little while ago
[14:02:19] <flatcap> I'll push it to (n)vim after the release, but it takes a little while to get to the users
[14:02:31] <flatcap> cool
[14:02:40] <mfiano> When do you expect a new release of neomutt?
[14:03:20] <mfiano> As a fellow developer, I realize how wrong that question is :)
[14:03:26] <flatcap> hehe
[14:03:47] <flatcap> the original date was this Thursday, but I'm going to have to push it back a week
[14:03:58] <mfiano> Cool
[14:04:21] <flatcap> I've finally got to the point where I *have* to fix the Index/Pager arch
[14:04:39] <flatcap> (I've been avoiding the issue for several years :-)
[14:04:50] <mfiano> Ah, well good luck!
[14:05:25] <flatcap> thanks
[14:05:34] <mfiano> I'm testing neomutt on FreeBSD right now. The plan was to run it on that box all along but I like to test things on my workstation (Arch) first
[14:06:22] <flatcap> aha
[14:07:46] <mfiano> I just have one problem to solve, not neomutt related, but I'm having problems researching how to do it with Dovecot
[14:08:46] <flatcap> not neomutt, good :-)
[14:08:59] <mfiano> My email server has limited storage space, so I'd like to tell Dovecot to delete messages as they are downloaded. My FreeBSD box will contain all the email it downloads.
[14:09:09] <mfiano> If you have any idea, please let me know :)
[14:13:00] <flatcap> ok
[14:15:19] <gahr> hi flatcap 
[14:17:15] <flatcap> hi gahr 
[14:30:27] <mfiano> gahr: Do you run neomutt in a jail?
[14:30:56] *** Quits: Guest6037 (epony@lz2.eu) (Quit: QUIT)
[14:43:58] <gahr> I sometimes do
[14:44:00] <gahr> why?
[14:44:08] <gahr> sorry a bit busy, will read the backlog later
[14:45:23] *** Joins: epony (epony@user/epony)
[14:45:27] <mfiano> gahr: I'm wondering if gnupg needs special device nodes. I cannot sign my emails. gnupg on the cli even complains with the cryptic "public key decryption failed: No such file or directory"
[14:45:50] <mfiano> works fine in the host with the same keyring though
[14:48:16] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 272 seconds)
[14:49:15] *** Quits: epony (epony@user/epony) (Max SendQ exceeded)
[14:59:31] <mfiano> nevermind. It's only an issue with jexec, not when I ssh in.
[15:35:03] *** Quits: aplund (~aplundmat@2001:470:69fc:105::4146) (Quit: User was banned)
[15:35:15] *** Quits: dafna2[m] (~dafnamaym@2001:470:69fc:105::3076) (Quit: User was banned)
[15:35:18] *** Quits: sss[m] (~sss123nex@2001:470:69fc:105::1:ceac) (Quit: User was banned)
[15:35:59] *** Quits: p00f (~p00f@2001:470:69fc:105::38f) (Quit: User was banned)
[15:36:17] *** Quits: kaji (~kajiryoji@2001:470:69fc:105::405b) (Quit: User was banned)
[15:36:21] *** Quits: jeronath[m] (~jeronathm@2001:470:69fc:105::a4) (Quit: User was banned)
[15:36:27] *** Quits: adray (~araymatri@2001:470:69fc:105::1873) (Quit: User was banned)
[15:40:54] <gahr> cool
[15:41:00] <gahr> did you solve your config issues, too?
[15:41:08] *** Joins: keypusher (keypusher@user/keypusher)
[15:42:07] <gahr> flatcap: nice email to the dev list :)
[15:45:38] <flatcap> hehe, thanks :-)
[15:47:50] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[15:49:23] *** Joins: epony (epony@user/epony)
[15:50:14] *** Joins: nyah (~nyah@05453449.skybroadband.com)
[16:45:01] *** Quits: downtrip (~downtrip@188.166.151.198) (Quit: WeeChat 3.4.1)
[16:46:48] *** Joins: downtrip (~downtrip@188.166.151.198)
[16:48:51] *** Quits: downtrip (~downtrip@188.166.151.198) (Client Quit)
[16:51:21] *** Joins: downtrip (~downtrip@188.166.151.198)
[16:52:17] *** Joins: The-Compiler (~compiler@the-compiler.org)
[16:53:11] <The-Compiler> Hey! Since a couple of months or so, my neomutt occasionally segfaults (one in 4 times maybe?) just after sending a mail. Despite my best efforts, so far I haven't been able to get a stacktrace, for some reason coredumpctl always tells me none is available...
[16:53:26] <The-Compiler> any idea how I could get more info, other than trying to run neomutt inside gdb or so for a while?
[16:55:45] <apo> write a program that segfaults by design and see if you can get that to coredump?
[16:56:09] <flatcap> hi The-Compiler, you could build with ASAN: https://neomutt.org/dev/analysis/asan
[16:56:12] <The-Compiler> I do get stacktraces for other segfaults, yes
[16:56:25] <flatcap> small overhead and detailed logs on memory issues
[16:58:48] *** Joins: eblake (~eblake@172-125-7-16.lightspeed.rcsntx.sbcglobal.net)
[16:58:49] *** Quits: eblake (~eblake@172-125-7-16.lightspeed.rcsntx.sbcglobal.net) (Changing host)
[16:58:49] *** Joins: eblake (~eblake@redhat/eblake)
[17:02:26] <jindraj_> here's a little shellscript that "segfaults" if it helps `kill -11 $$`
[17:03:25] <The-Compiler> yup, I do get a coredump for that as expected ¯\_(ツ)_/¯
[17:03:46] <The-Compiler> flatcap: good idea - is it expected that I get memory leaks there? :D
[17:05:01] <flatcap> most workflows should be leak free
[17:06:42] <The-Compiler> I get some leaks according to ASAN just when opening and immediately closing neomutt
[17:06:57] <flatcap> what version's that?
[17:07:12] <The-Compiler> 20211029
[17:07:37] <flatcap> ok.  we've notched up ~500 commits since then
[17:07:52] <The-Compiler> let my try building from git then!
[17:07:58] <flatcap> please :-)
[17:08:36] <The-Compiler> haven't done a release in my project (qutebrowser) since October, so I can't complain :D
[17:08:55] <flatcap> :-)
[17:16:45] *** Joins: polve (~polve@user/polve)
[17:17:14] <The-Compiler> ...and here I am wondering why I don't get any debugging symbols anymore when I accidentally set "!debug strip" rather than the opposite in the Arch PKGBUILD
[17:17:27] <flatcap> ah!
[17:17:48] <The-Compiler> yup, still seem to get leaks - time for a bug I suppose?
[17:18:30] <flatcap> please
[17:18:39] <The-Compiler> https://paste.the-compiler.org/view/1708afbd if that rings a bell somewhere
[17:19:45] <flatcap> parse_tag_transforms(), ah, that'll explain why I haven't seen it
[17:20:16] <The-Compiler> config is at https://github.com/The-Compiler/dotfiles/blob/master/mutt/muttrc (except the non-public parts)
[17:20:18] *** Joins: dafna2[m] (~dafnamaym@2001:470:69fc:105::3076)
[17:20:27] <The-Compiler> what should I be looking at to minimize this?
[17:20:27] *** Joins: aplund (~aplundmat@2001:470:69fc:105::4146)
[17:20:28] *** Joins: kaji (~kajiryoji@2001:470:69fc:105::405b)
[17:20:41] *** Joins: jeronath[m] (~jeronathm@2001:470:69fc:105::a4)
[17:20:55] *** Joins: p00f (~p00f@2001:470:69fc:105::38f)
[17:21:08] *** Joins: adray (~araymatri@2001:470:69fc:105::1873)
[17:21:08] *** Joins: sss[m] (~sss123nex@2001:470:69fc:105::1:ceac)
[17:23:07] <flatcap> hmm... I don't see any tag-transforms commands
[17:25:58] *** Quits: eroux (~eroux@102-65-72-61.ftth.web.africa) (Ping timeout: 272 seconds)
[17:47:41] <The-Compiler> oh, looks like https://github.com/sheoak/neomutt-powerline-nerdfonts is what triggers it
[17:49:22] <flatcap> yep, I see
[17:52:55] <The-Compiler> flatcap: https://github.com/neomutt/neomutt/issues/3324
[17:53:05] <The-Compiler> will get back with the segfault issue once I can reproduce it again
[17:53:42] <flatcap> thanks
[17:53:58] <The-Compiler> thank you for all the help so far!
[17:54:07] <flatcap> np
[18:00:39] <gahr> flatcap: want me to have a look?
[18:00:54] <flatcap> yes please
[18:09:08] <mfiano> neomutt is so great that it got me to use rss feeds again. I could never like the existing cli feed readers, but then I remembered there are tools to fetch/parse/send them as text over imap
[18:10:20] <flatcap> they sound useful.  got any links?
[18:10:54] <mfiano> I'm using this one, after a lot of trial and error with rss2email: https://github.com/Necoro/feed2imap-go
[18:11:18] <flatcap> cool
[18:15:22] <mfiano> Is there a function to mark all messages in a mailbox as read?
[18:16:45] <flatcap> not specifically, but I have a pair that wipe New, or Old
[18:16:47] <flatcap> macro index ,n "<tag-pattern>~N<enter><tag-prefix><clear-flag>N<tag-prefix><tag-entry>"
[18:17:35] <mfiano> Thanks
[18:18:29] <mfiano> flatcap: By the way I noticed a problem with your sieve config yesterday
[18:18:39] <mfiano> Let me scroll up and find the link
[18:18:52] <flatcap> oh?  what was wrong?
[18:19:10] <flatcap> I hadn't read my sieve config in years
[18:20:01] <mfiano> Search this page for "Some spam scanners" https://doc.dovecot.org/configuration_manual/sieve/examples/
[18:20:20] <mfiano> and see the Note at the end of that code
[18:20:33] <mfiano> Your config might match a negative (very good) spam score
[18:20:36] * flatcap reads ...
[18:21:23] <flatcap> thanks!  I'll update it right now
[18:21:45] <mfiano> https://gist.github.com/mfiano/8bdc3f78af632bd9308d730cd50237df
[18:22:06] <mfiano> That's mine
[18:22:41] <flatcap> thanks
[18:28:28] *** Joins: strajder (~strajder@user/strajder)
[18:46:21] *** Quits: madage (~madage@user/madage) (Quit: leaving)
[18:47:36] *** Joins: bremner (~bremner@notmuch/developer/bremner)
[18:50:14] *** Joins: madage (~madage@user/madage)
[18:50:35] *** Joins: reset (~reset@user/reset)
[18:56:06] <mfiano> Does the sidebar have any paging capability? I'm about 3/4 to the bottom of my terminal so far, and wondering what happens when its too large :)
[18:56:21] <flatcap> yes, it'll page down/up
[18:56:30] <mfiano> Nice
[19:04:45] <mfiano> I might have found another bug
[19:05:09] <flatcap> yeah?
[19:05:49] <mfiano> <save-entry> (bound to "s") in the attachments menu shows this info message: fopen: No such file or directory (errno = 2)
[19:06:07] <mfiano> also seems to occur if i select an attachment and try it there
[19:07:12] <flatcap> I get a prompt: Save to file: ./
[19:08:23] <flatcap> that error's from maildir. maildir_msg_open() is trying to open the message, and failing
[19:08:38] <mfiano> Investigating
[19:08:42] <flatcap> is your TMPDIR writeable?
[19:08:54] <flatcap> you mentioned jails, earlier
[19:09:21] <mfiano> Ok it was due to $attach_save_dir not existing yet. I created it and I get a different message now.
[19:10:30] <mfiano> File is a directory, save under it? ([yes]/no): y<enter>
[19:10:35] <mfiano> File under directory: foo<enter>
[19:10:51] <mfiano> and I see a foo file in my $attach_save_dir
[19:11:01] <mfiano> Why is it saying file is a directory?
[19:12:33] <flatcap> don't knw
[19:12:44] <mfiano> It's just an html attachment
[19:12:52] <mfiano> I don't know what it's trying to tell me.
[19:13:29] <mfiano> If I select no, I get: fopen: File exists (errno = 17)
[19:13:31] <flatcap> there are options to do with saving multiple attachments: with/without prompting for each file
[19:13:40] <mfiano> I literally have nothing in my $attach_save_dir
[19:14:43] <mfiano> I already have set attach_save_without_prompting = yes
[19:14:53] <mfiano> Unless you mean something else
[19:16:09] <flatcap> sorry, I don't know what's wrong and I don't have time to look right now
[19:16:26] <mfiano> Sure no problem.
[19:17:59] <flatcap> it sounds like a bug, so feel free to raise an issue
[19:19:44] <flatcap> and the code's in mutt_save_attachment_list() in attach/recvattach.c if you want to have a poke around
[19:26:59] <mfiano> Thanks. I added it to my todo list.
[19:27:15] *** Quits: cdman (~dcm@user/dmc/x-4369397) (Ping timeout: 260 seconds)
[19:42:06] <gahr> The-Compiler: I need help, there's something I don't understand in the logic for parsing tag-transforms and tag-formats
[19:42:28] <gahr> it doesn't allow you to map two tags to the same transform or format
[19:42:31] <gahr> and I don't understand why
[19:42:38] *** Joins: rgrinberg (~textual@177.248.148.38)
[19:42:56] <gahr> is "tag-transforms starred * important *" very wrong?
[19:43:15] <The-Compiler> gahr: I barely know what tag-transforms are, I just use https://github.com/sheoak/neomutt-powerline-nerdfonts because it looks great :D
[19:44:34] <gahr> fair enough
[19:45:29] <gahr> adray?
[19:58:33] *** Quits: strajder (~strajder@user/strajder) (Quit: leaving)
[20:00:13] *** Joins: strajder (~strajder@user/strajder)
[20:01:26] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 260 seconds)
[20:01:42] <adray> i don't recognize tag transforms off the top of my head. is there a tracking issue I can look at after work?
[20:04:14] <gahr> #3324, thanks
[20:04:14] <neo-bot> Issue by @The-Compiler "Memory leak in parse_tag_transforms": https://github.com/neomutt/neomutt/issues/3324
[20:04:25] <gahr> there's a note in the TODO list
[20:05:35] <adray> thanks, I'll bookmark and check this evening
[20:06:04] <gahr> cheers
[20:21:49] *** Joins: inak (~justme@228-134-237-24.gci.net)
[20:23:04] <mfiano> Can someone help me fix this macro? It's not restoring alternative_order when finished. https://gist.github.com/mfiano/afe37dd36ae02c3e003b1dc76ad3173f
[20:25:17] <mfiano> Ugh. alternative_order is a function, not a variable. I'm not sure how to capture it then.
[20:29:59] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[20:33:42] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[20:40:07] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 260 seconds)
[20:55:24] *** Quits: riesebie (~riesebie@user/riesebie) (Ping timeout: 240 seconds)
[21:29:21] <mfiano> I just wrote a recursive macro, and I feel dirty.
[21:29:45] <mfiano> https://gist.github.com/mfiano/94747ec9122d4df757667c8cd7dc2632
[21:30:21] <mfiano> This will let me toggle the view from html to text in the pager, and restore to text on quit. also let's me enter into html immediately from the index
[21:30:32] <mfiano> Macros that define macros, oh my.
[21:48:39] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Remote host closed the connection)
[21:49:02] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[21:53:25] *** Quits: noex (~null@user/noex) (Ping timeout: 256 seconds)
[21:54:17] *** Joins: noex (~null@user/noex)
[21:59:15] *** Quits: rittchen (~rittchen@gateway/tor-sasl/rittchen) (Ping timeout: 240 seconds)
[22:10:59] *** Quits: weirdsmiley (~weirdsmil@103.25.231.102) (Ping timeout: 256 seconds)
[22:12:37] *** Joins: rittchen (~rittchen@gateway/tor-sasl/rittchen)
[22:19:56] *** Quits: rogeliodh (~rogeliodh@rogeliodh.dev) (Quit: The Lounge - https://thelounge.chat)
[22:20:20] *** Joins: rogeliodh (~rogeliodh@rogeliodh.dev)
[22:33:05] *** Joins: weirdsmiley (~weirdsmil@103.25.231.102)
[22:47:12] <mfiano> Is there a way to specify the character to pad with for the left justification expando "%-" ?
[22:47:18] <mfiano> Or does it have to be a space
[22:52:47] *** Quits: alex19EP (znc@archlinux/trusteduser/alex19EP) (Quit: ZNC - https://znc.in)
[22:53:56] *** Joins: alex19EP (znc@archlinux/trusteduser/alex19EP)
[23:07:30] <eblake> hmm, something in the pager regressed just over the weekend. <next-undeleted> isn't changing the pager view
[23:07:39] <eblake> But now that I read the neomutt list archives, I see that this looks to be a known regression...
[23:20:23] <eblake> changing which row in the index half of the pager view, but not changing the pager contents itself, is very confusing
[23:21:37] <eblake> I may resort to temporarily defining 'j' as a pager macro for '<exit><next-undeleted><display-message>', and similar for its friends
[23:41:44] *** Quits: mala (~mala@user/malaclyps) (Quit: ZNC 1.6.1 - http://znc.in)
[23:42:29] *** Joins: mala (~mala@user/malaclyps)
