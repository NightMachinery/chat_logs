[00:01:13] *** Joins: oldmagic (~oldmagic@user/oldmagic)
[00:04:01] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[00:05:58] *** Quits: oldmagic (~oldmagic@user/oldmagic) (Ping timeout: 260 seconds)
[00:07:18] *** Joins: oldmagic (~oldmagic@user/oldmagic)
[00:08:47] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Ping timeout: 252 seconds)
[00:13:42] *** Quits: Alhazred (~Alhazred@86.106.74.40) (Ping timeout: 260 seconds)
[00:16:28] *** Quits: oldmagic (~oldmagic@user/oldmagic) (Ping timeout: 260 seconds)
[00:16:58] *** Joins: oldmagic (~oldmagic@user/oldmagic)
[00:28:29] <entropy_> how do you cache a page so when you reload in your browser, the content is always the last cached page
[00:29:27] <Albright> Okay, so
[00:29:45] <Albright> First thing to note is that you basically have zero control over how browsers cache things.
[00:30:01] <Albright> You can offer suggestions, and browsers can (and often will) disregard them.
[00:30:43] <Albright> So trying to get browsers to act how you want them to in this regard can be incredibly frustrating.
[00:31:13] <Albright> That being said‚Ä¶ See the Expires header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Expires
[00:31:26] <Albright> And Cache-Control: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control
[00:31:32] <__adrian> unless you just come to terms with it and stop expecting to control it all
[00:31:37] <Albright> And Etag: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag
[00:32:13] <entropy_> i am using datatables and when i 'reload' a page from chrome, it loads table and then redraws it in a sec later
[00:32:16] <Albright> Also note that there are other layers to caching. Cloudflare or similar services do their own caching
[00:32:32] <Albright> As do some ISPs or public access points at airports and the like
[00:33:00] <Albright> Okay‚Ä¶ that might be a different question then
[00:34:35] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[00:37:46] *** Joins: vlm (~vlm@user/vlm)
[00:38:23] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[00:38:42] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[00:39:52] <Sammitch> if you're using edge caches you also need to be careful about what you're setting cache headers on, because if you set a cache header on a response with confidential info in it, then it is likely going to be served to users other than for whom it was originally intended
[00:40:32] <__adrian> also when you add something to the list in your DB, a lot of folks won't see it for a while
[00:41:34] *** Quits: hh (~g@37.214.57.161) (Remote host closed the connection)
[00:41:54] *** Quits: PTNapivoski (~PTNapivos@2804:60:1e8:a000:973:87dc:1d1b:321) (Quit: Leaving)
[00:44:27] <Sammitch> also, what everyone seems to forget: static üëè resources üëè d don't üëè change üëè without üëè a üëè filename üëè change
[00:46:59] <entropy_> https://mypastebin.com/pastes.php <- when you click 'reload' in your browser, it loads the data, then a second later it updates.. i want to cache everytime you reload
[00:47:20] <entropy_> i don't know if that is datatables or what
[00:48:47] <Sammitch> the HTML loads with the table in one form, and then you trigger JS to re-render it. which is why it looks like it's doing that.
[00:48:53] <Sammitch> javascript people might have suggestions
[00:50:04] <da_wunder> caching is always a "problem" - you should know when you need to reset that cache
[00:50:48] <da_wunder> and yes that sounds easy - but literally isn't not - that all depends on your application domain
[00:51:02] <teresko> entropy_: you will ahve to learn how to use AJAX in javascript ... good luck
[00:51:48] <__adrian> people always forget fetch exists...
[00:52:31] <teresko> __adrian: I have actually had several refusing to use fetch
[00:53:29] *** Joins: harpia (~harpia@143.208.84.100)
[00:53:31] <da_wunder> __adrian: I would not use fetch if your application is already using some other solution for that - if you want to replace those  all - that is totally different story
[00:54:49] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[00:55:26] <da_wunder> and using that fetch api - it will need some serious error handling - personally I'm not fan about that api
[00:55:42] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 260 seconds)
[00:56:01] <teresko> da_wunder: it is a huge improvement over piece of shit that is jquery
[00:59:22] <__adrian> "if ..."  if, if
[00:59:47] <__adrian> and yeah, there's less built around it, i guess.
[01:05:12] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[01:09:59] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 250 seconds)
[01:11:45] *** Joins: ansivirus (~ansivirus@12.50.11.83)
[01:15:32] *** Quits: ansivirus (~ansivirus@12.50.11.83) (Quit: Leaving)
[01:16:37] *** Quits: roadie (~user@2a02:8108:5a40:1d87:445f:c015:94d4:87ed) (Ping timeout: 240 seconds)
[01:16:49] *** Joins: ansivirus (~ansivirus@12.50.11.83)
[01:19:48] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[01:35:57] *** Quits: epony (epony@user/epony) (Quit: QUIT)
[01:41:08] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[01:42:50] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[01:42:54] *** Joins: Alhazred (~Alhazred@45.129.56.151)
[01:43:34] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[01:44:35] *** Quits: magla (~gelignite@55d42a76.access.ecotel.net) (Quit: Stay safe!)
[01:57:51] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 250 seconds)
[02:03:01] *** Joins: funhouse (~funhouse@user/funhouse)
[02:08:31] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[02:09:41] *** Joins: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd)
[02:14:12] *** Quits: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd) (Ping timeout: 240 seconds)
[02:23:26] *** Quits: harpia (~harpia@143.208.84.100) (Quit: harpia)
[02:26:43] *** Joins: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd)
[02:27:28] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[02:31:22] *** Quits: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd) (Ping timeout: 260 seconds)
[02:31:41] *** Joins: Poboy (~Poboy@user/poboy)
[02:55:25] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[03:15:36] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[03:20:15] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Ping timeout: 260 seconds)
[03:30:52] *** Joins: tester12 (~tester12@5.119.230.181)
[03:30:57] *** Quits: Jck_true (~jcktrue@user/jck-true/x-0200799) (Quit: Ping timeout (120 seconds))
[03:34:51] *** Joins: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd)
[03:36:10] *** Quits: SleePy (~SleePy@simplemachines/siteteam/SleePy) (Quit: I quit, that is all)
[03:37:12] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[03:39:28] *** Quits: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd) (Ping timeout: 260 seconds)
[03:40:20] *** Joins: SleePy (~SleePy@simplemachines/siteteam/SleePy)
[03:45:15] *** Quits: tuskkk____ (uid18470@id-18470.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[03:46:19] *** Quits: ms49434_ (~ms49434@user/ms49434) (Quit: Leaving)
[03:48:56] *** Quits: luva (~luva@185.168.9.235) (Ping timeout: 272 seconds)
[03:56:50] *** Joins: luva (~luva@37.120.197.53)
[04:09:58] *** Quits: tester12 (~tester12@5.119.230.181) (Quit: Client closed)
[04:23:26] *** Quits: Poboy (~Poboy@user/poboy) (Ping timeout: 250 seconds)
[04:36:58] *** Quits: genomc (uid245282@id-245282.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[04:37:00] *** Quits: ryzendar (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net) (Quit: Leaving)
[04:43:21] *** Joins: tester12 (~tester12@5.119.230.181)
[04:53:57] *** Quits: tester12 (~tester12@5.119.230.181) (Quit: Client closed)
[04:58:27] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[04:59:23] *** Quits: Nek (~Nek@62-210-157-90.rev.poneytelecom.eu) (Quit: Bye bye !)
[05:03:45] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 250 seconds)
[05:06:31] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[05:11:29] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 256 seconds)
[05:16:07] *** Joins: vlm (~vlm@user/vlm)
[05:27:19] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[05:27:29] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[05:29:03] *** Joins: Jck_true (~jcktrue@user/jck-true/x-0200799)
[05:54:02] *** Joins: dimi1947 (~dimi1947@46.198.247.237)
[06:09:52] <Hash> https://3v4l.org/sonQm why does this produce the first line with \n. I'm trying to print 10 per row
[06:10:10] <Hash> get 10 elements, then do \n, then 10 more, then do \n
[06:10:36] *** Joins: ath28 (~dimi1947@46.198.247.237)
[06:10:43] <Hash> I though modulo 10 would be the thing, but first line is messed up as it produces a \n after line 1. I expect 10 elements, then \n
[06:11:19] <__adrian> https://3v4l.org/Kig8Y
[06:11:35] <Sammitch> 0 % 10 == 0
[06:13:58] *** Quits: dimi1947 (~dimi1947@46.198.247.237) (Ping timeout: 272 seconds)
[06:14:37] <Hash> Oh shoul drenumber the array to begin from 1?
[06:14:41] <Hash> What should I do?
[06:15:26] <__adrian> i'd wonder why you're doing this at all. what's this for? is it for a webpage? cli output?
[06:15:42] <Hash> for some 90s software
[06:17:37] <__adrian> that doesn't really answer it
[06:18:27] <__adrian> why are you using this format? with tabs and a static number of columns? what's it for?
[06:18:30] <Hash> https://3v4l.org/KdPTo
[06:18:37] <Hash> I told you man, dude, 90s game, Diablo 2
[06:18:48] <Hash> Don't worry about it.
[06:19:14] <Hash> https://3v4l.org/j8kBp <- was testing, not needed. Just test for 0
[06:19:18] <__adrian> you really didn't tell me that at all  :)
[06:19:26] <Hash> You asked me :D
[06:19:54] <Sammitch> that... shouldn't work like that.
[06:19:56] <Hash> I generate text in php, etc. and then I copy paste into the d2 txt files to modify the game.
[06:20:02] <Blondie101010> it'd be cleaner to: if ($i === 0) { continue; }
[06:20:27] <Blondie101010> or actually might start at 1
[06:20:38] <Hash> https://i.imgur.com/D07DBNJ.png
[06:20:38] <Sammitch> honestly if ($i % 10 == 0 && $i > 0){}
[06:20:50] <Blondie101010> :)
[06:20:54] <Hash> Sure that too
[06:20:57] <Hash> Good thinking
[06:21:39] <Hash> Otherwise, adding hundreds of new items to game, you have to sit there and type into the d2 txt files in excel or something else, manually.
[06:21:44] <Blondie101010> not like the paste though
[06:21:52] <Hash> Just generate the txt as I need, then copy paste into the file is much faster
[06:21:54] <Blondie101010> the key won't be good
[06:22:02] <Sammitch> I still can't figure out why his "fixed" code _isn't_ skipping the first element like that
[06:22:03] <Hash> I can add hundreds of new items into the game with various properties and drop rates this way.
[06:22:21] <Blondie101010> all misaligned
[06:22:23] <Sammitch> OH HELL NAW
[06:22:28] <Hash> Yeah, I mean it's not fixed
[06:22:32] <Hash> I'm just testing things.
[06:22:34] <Blondie101010> it's not right
[06:22:36] <Blondie101010> test it
[06:23:02] <__adrian> Sammitch: line 10
[06:23:06] <Sammitch> that has got to be the ugliest hack I have seen in a good long while
[06:23:25] <Hash> start range at 1
[06:23:32] <Hash> renumber array indexes
[06:23:39] <Hash> I'm just trying things man I dunno
[06:23:43] <Hash> Been a while since I coded
[06:23:44] <Blondie101010> hmm
[06:24:14] * Sammitch does a functional arrow pattern at it, because I can't help myself.
[06:24:46] <Blondie101010> shouldn't be the line delimiter condition alone?
[06:25:19] <Hash> https://3v4l.org/Ok7tE
[06:25:21] <Hash> Here
[06:25:30] <Hash> reinded the array to start at 1, instead of 0
[06:25:35] <Hash> Then start the loop at 1
[06:25:45] <Hash> If you don't reindex, you will skip #1(0)
[06:25:47] <Hash> This is fixed.
[06:25:55] <Sammitch> no it isn't
[06:26:03] <Blondie101010> won't be usable with real data
[06:26:04] <Sammitch> please let me spoonfeed you a solution, for my own sanity
[06:26:07] <Hash> why not
[06:26:12] <Hash> is it missing elements
[06:26:21] <Hash> Oh it is. Isn't it. The last one.
[06:26:32] <Sammitch> https://3v4l.org/rsUMK
[06:26:35] <Hash> 'ami' is missing
[06:26:36] <Sammitch> good lord man
[06:26:49] <Hash> that makes 11 on row 1
[06:26:51] <Hash> :)
[06:26:54] <Hash> The one you posted
[06:27:08] <Hash> I ran in to that myself.
[06:27:24] <Blondie101010> loop through the data in a NORMAL loop and put your line feed separately
[06:28:57] <Blondie101010> $i = 0; foreach ($arr as $element) { echo "$element\t"; if ($i && $i % 10 == 0) { echo "\n"; } }
[06:29:10] <Sammitch> if( $i % 10 == 9 ) {
[06:29:34] <Blondie101010> for 9 columns
[06:29:50] <Hash> That would make 9 on row 1
[06:30:10] <Sammitch> the version that is one opcode more expensive is `if( ($i + 1) % 10 == 0 ) {}`
[06:30:36] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 240 seconds)
[06:30:43] <Hash> Same, it would make 9 on row 1
[06:30:44] <Blondie101010> 9 columns again
[06:30:50] <Hash> The way I see loop in my head.
[06:30:52] <Blondie101010> Sammitch:  show him my solution
[06:30:55] <Sammitch> count em https://3v4l.org/OCO1B
[06:31:31] <Hash> Oh yeah I was thinking after reindex in my head
[06:31:33] <Hash> doh
[06:31:38] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[06:31:49] <Sammitch> please do not every write anything like that "reindex" code again
[06:31:54] <Blondie101010> ahhh
[06:31:56] <Hash> Why not?
[06:32:07] <Hash> Why so strong feeling?
[06:32:16] <Blondie101010> Sammitch:  I hate the idea but you're correct
[06:32:25] <Sammitch> it is a LOT of extra work for being bad at math
[06:32:40] <Hash> true
[06:32:41] <Sammitch> Blondie101010: you want to hate a solution?
[06:32:52] <Sammitch> https://3v4l.org/HoYSB
[06:33:05] <Blondie101010> thanks :)
[06:33:48] <Sammitch> you would [probably not] be surprised how deep into that arrow pattern I've gone before I realized what I was doing
[06:34:01] <Blondie101010> how the heck did you think of that?
[06:34:32] <Sammitch> my brain got rewired for array_map() years ago
[06:35:14] <Blondie101010> haven't done that upgrade yet
[06:36:59] <Sammitch> probably not terribly useful, but I highly recommend the Generator upgrade that makes you try to make everything a stream workflow
[06:37:22] <__adrian> yield to peer pressure
[06:37:35] <Sammitch> throw yourself into it
[06:41:38] *** Quits: ath28 (~dimi1947@46.198.247.237) (Quit: Leaving)
[06:42:41] <Sammitch> lol I found it. my masterwork of "oh god what have I done?". https://3v4l.org/9dN0v
[06:55:39] *** Quits: muley (~muley@76-245-68-99.lightspeed.iplsin.sbcglobal.net) (Remote host closed the connection)
[07:07:40] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[07:10:20] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 272 seconds)
[07:11:48] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 240 seconds)
[07:17:40] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[07:21:49] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Ping timeout: 240 seconds)
[07:22:11] *** Quits: newwebdev13 (~newwebdev@78.135.92.89) (Quit: Leaving)
[07:40:43] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 246 seconds)
[07:40:50] *** Joins: keypushe- (keypusher@user/keypusher)
[07:44:08] *** keypushe- is now known as keypusher
[07:45:36] *** Joins: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[07:45:41] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[07:50:18] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 260 seconds)
[08:13:37] *** Joins: dimi1947 (~dimi1947@46.198.247.237)
[08:15:05] <dimi1947> I suppose after I get the email from faceboook(facebook social login) I will just create the session and do DB operations just like an ordinary custom flow
[08:15:15] <dimi1947> ...custom login flow
[08:15:34] *** Quits: sreve (~quassel@p4ff44df2.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[08:15:36] *** Joins: sreve_ (~quassel@p4ff44f3f.dip0.t-ipconnect.de)
[08:27:41] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[08:27:46] *** Joins: zumba_addict (~zumba_add@12.202.91.140)
[08:34:55] *** Quits: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[08:35:38] *** Joins: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[08:38:54] *** Joins: genomc (uid245282@id-245282.hampstead.irccloud.com)
[08:39:19] *** Quits: eddof13 (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Client Quit)
[08:57:46] *** Quits: jargon (~jargon@184.101.173.186) (Remote host closed the connection)
[08:59:22] <Blondie101010> dimi1947:  not sure what you're talking about
[08:59:46] <Blondie101010> it's been a while since I used Facebook API, but I can assure you it's nothing like DB operations
[09:00:35] <mishehu> I suppose that after scotty gets out of the jeffries tube, we'll have warp drive again.  I'll just do db operations...   custom warp flow.
[09:16:47] *** Joins: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd)
[09:21:53] *** Quits: roadie (~user@2a02:8108:5a40:1d87:bc7a:bbe4:d21a:4cbd) (Ping timeout: 260 seconds)
[09:23:48] *** Quits: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f) (Ping timeout: 240 seconds)
[09:27:31] *** Joins: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f)
[09:30:44] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[09:31:58] *** Joins: php-bot_ (~php-bot@box.croustillant.ch)
[09:32:05] *** Quits: php-bot (~php-bot@box.croustillant.ch) (Read error: Connection reset by peer)
[09:32:20] *** php-bot_ is now known as php-bot
[09:35:27] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 260 seconds)
[09:42:24] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[09:50:48] *** Quits: oldmagic (~oldmagic@user/oldmagic) (Remote host closed the connection)
[10:03:42] *** Joins: oldmagic (~oldmagic@user/oldmagic)
[10:05:06] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[10:14:42] <dimi1947> Blondie101010: Ok I will try to be more specific....after i get the email from facebook Graph API do I pass it to a session variable?
[10:15:15] <dimi1947> ..just like the email of an oridinary login form
[10:21:12] *** Quits: zauberfisch (~Zauberfis@cm147-42.liwest.at) ()
[10:22:17] *** Joins: zauberfisch (~Zauberfis@cm147-42.liwest.at)
[10:35:37] *** Quits: pmercado (~pmercado@190.22.73.57) (Ping timeout: 256 seconds)
[10:38:24] *** Joins: undefined_bob (~undefined@user/undefined-bob/x-5411918)
[10:46:28] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 260 seconds)
[10:48:15] <mattf> is there a way i can forcefully remove a php session?
[10:48:30] <mattf> without php code... just for a hacky test
[10:48:38] *** Joins: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16)
[10:49:19] <mattf> if i go to /var/lib/php/sessions and remove the corresponding id that i see on my browser, kill apache with `killall -9 apache` and start it again and reload my browser the file returns, it is cached somewhere?
[10:50:18] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[10:51:55] <Naktibalda> deleting the file should be enough
[10:52:01] <Naktibalda> what do you expect to happen?
[10:52:31] <Naktibalda> session id is stored in the cookie, so the next request uses the same session id
[10:54:56] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Ping timeout: 245 seconds)
[10:55:07] <mattf> Naktibalda: if i ctrl + f5 my browser i am still logged in, the session is up, it is restored
[10:55:14] <mattf> even the same file is restored
[10:55:33] <Naktibalda> with the same data?
[10:55:42] <mattf> let me verify that
[10:56:09] <Naktibalda> same file is expected, same data is not
[10:56:55] <mattf> Naktibalda: you are right
[10:57:05] <Naktibalda> maybe you have some cookie that helps to login automatically
[10:57:10] <mattf> yeah
[10:57:16] <mattf> might be
[10:57:23] <mattf> well i give up on this weird hack
[10:57:25] <Naktibalda> remember me functionality
[11:04:09] *** Joins: luigibu (~luigi@93.176.153.88)
[11:15:26] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:20:59] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[11:22:27] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.4.1)
[11:23:10] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:23:16] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Client Quit)
[11:30:56] *** Joins: opeerateur_ (~My_user_n@178.220.220.180)
[11:33:46] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (Quit: A lol made me boom.)
[11:35:28] *** Quits: opeerateur_ (~My_user_n@178.220.220.180) (Ping timeout: 260 seconds)
[11:36:38] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[11:38:36] *** Quits: Forza (~Forza@user/forza) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[11:44:00] *** Joins: Forza (~Forza@user/forza)
[11:44:19] *** Quits: zumba_addict (~zumba_add@12.202.91.140) (Quit: Client closed)
[11:55:59] *** Joins: hans (uid529825@id-529825.helmsley.irccloud.com)
[11:57:09] <hans> any way to access winapi in php? for example MessageBox? ( https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-messagebox )
[11:57:59] *** Joins: jargon (~jargon@184.101.173.186)
[11:58:02] <TinoDidriksen> Yes, you can call any native function. But why would you do that from PHP?
[11:59:12] <TinoDidriksen> See https://php.net/ffi
[11:59:36] <hans> neat, thanks
[11:59:37] <AllenJB> See also https://www.php.net/manual/en/refs.utilspec.windows.php
[12:00:40] *** Joins: otisolsen70 (~otisolsen@80.80.4.2)
[12:01:36] <TinoDidriksen> Doing GUI stuff from PHP is well into the "do not attempt" territory, imo. FFI is neat for processing libraries, but not for interactivity.
[12:01:48] *** Quits: otisolsen70 (~otisolsen@80.80.4.2) (Remote host closed the connection)
[12:03:03] *** Joins: otisolsen70 (~otisolsen@80.80.4.2)
[12:04:58] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928)
[12:08:03] *** Joins: sfields_ (~sfields@2605:a601:adea:7a00:b0f3:92c0:5031:4a99)
[12:10:35] *** Quits: sfields (~sfields@2605:a601:adea:7a00:b060:ab7f:958c:df55) (Ping timeout: 250 seconds)
[12:11:31] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[12:15:19] *** Joins: opeerateur_ (~My_user_n@91.143.220.230)
[12:29:36] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Remote host closed the connection)
[12:29:44] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[12:31:40] <Koopz> alright i'm at my wit's end
[12:32:05] *** Joins: ViktorasCNC (~sinvet@user/sinvet)
[12:32:32] <AllenJB> So? You don't have to tell jokes all the time.
[12:32:34] *** Joins: delboy1978uk (~delboy197@d51a4773c.access.telenet.be)
[12:34:04] <Koopz> i compared both SSH session's printenv output, copypasted the relevant env vars from the session where the ODBC connection works into putenv() calls and there's no difference between the env vars now. But the other session still refuses to establish a working connection when executing the php script
[12:36:08] *** Joins: ms49434 (~ms49434@user/ms49434)
[12:37:47] <Koopz> one says odbc_connect(): SQL error: [unixODBC][Driver Manager]Can't open lib '/opt/sqlanywhere17/lib64/libdbodbc17_r.so' : file not found
[12:38:06] <Koopz> the other one dumps the result of my sql
[12:39:12] <Koopz> if it's not env vars what else could prevent me from establishing an ODBC connection
[12:41:39] *** Joins: richardjh (~Thunderbi@51.219.41.0)
[12:45:02] *** Joins: fandre1986 (~fandre198@78.10.85.96)
[12:45:42] *** Quits: delboy1978uk (~delboy197@d51a4773c.access.telenet.be) (Quit: delboy1978uk)
[12:51:43] *** Quits: otisolsen70 (~otisolsen@80.80.4.2) (Ping timeout: 272 seconds)
[12:56:40] *** Quits: Tempesta (~Tempesta@user/tempesta) (Read error: Connection reset by peer)
[12:58:08] <Koopz> and all i need to do to make this work is "source /opt/sqlanywhere17/bin64/sa_config.sh", additionally set ODBCINI=/etc/odbc.ini and it works
[12:59:19] <Koopz> what baffles me though is the fact that aforementioned sa_config.sh just sets the exact same ENV variables i do via putenv()
[13:01:37] <Koopz> if only somebody could point out some undocumented facts like, for example... there might be limitations to what vars you can set via putenv()
[13:04:56] *** Quits: opeerateur_ (~My_user_n@91.143.220.230) (Quit: WeeChat 3.4.1)
[13:08:23] *** Quits: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f) (Ping timeout: 256 seconds)
[13:08:47] <Koopz> https://gist.github.com/Koopzington/dab33a1e34229d524bceeba40f669edc
[13:12:25] <Koopz> corporate wants you to find the difference in results
[13:12:39] *** Joins: CrazyEddy (crazyed@2603:300a:1d10:c000:de4a:3eff:fe88:cc5f)
[13:15:46] *** Quits: roadie (~user@2a02:8108:5a40:1d87:8076:4ef7:2d74:3f16) (Ping timeout: 245 seconds)
[13:30:07] *** Joins: Tempesta (~Tempesta@user/tempesta)
[13:30:53] <Koopz> i swear to you i triple checked *all* env vars between the two sessions
[13:31:07] <Koopz> they are exactly the same
[13:32:13] <Koopz> give me any hint on what magic this bash script is working
[13:32:26] <Naktibalda> #bash
[13:33:13] <Naktibalda> maybe the magic is "export"?
[13:33:54] <Koopz> explain
[13:34:47] *** Joins: otisolsen70 (~otisolsen@80.80.4.2)
[13:35:43] <Naktibalda> nah, keep trying, I have no idea
[13:35:45] <Koopz> according to my knowledge "export" is the bash equivalent to php's "putenv"
[13:36:03] <Koopz> but i guess i can't be any more wrong
[13:37:02] *** Quits: travisghansen (~travisgha@192.74.130.86) (Quit: Ping timeout (120 seconds))
[13:38:17] <Naktibalda> according to my knowledge, export affects shell variables outside the script, without export you create local variables
[13:38:26] <DevAntoine> Hello
[13:38:30] <TinoDidriksen> LD_LIBRARY_PATH can't help you from within PHP. That affects processes launched from that environment, but you're already inside a PHP process and it's not launching any new ones.
[13:38:34] <DevAntoine> I'm (again) having issues with upgrading dependencies
[13:38:35] <DevAntoine> https://gist.github.com/devantoine/d78be582756318153e1c588f7eabcf01
[13:38:41] <DevAntoine> I'm not sure what to do there
[13:39:38] <Naktibalda> upgrade nette/utils to 3.0
[13:39:43] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160)
[13:40:14] *** Quits: nuala (~nuala@user/nuala) (Read error: Connection reset by peer)
[13:41:24] <Koopz> TinoDidriksen i see... guess my hunch about putenv()ing being too late was right... now how do i get around this
[13:41:48] <DevAntoine> Naktibalda: "https://gist.github.com/devantoine/d78be582756318153e1c588f7eabcf01" is in the update list, shouldn't it upgrade to 3.0 to match requirements?
[13:42:59] <Koopz> in theory i should at least be able to get the LD_LIBRARY_PATH set for my fpm process right?
[13:44:05] <Naktibalda> DevAntoine: have you listed all dependants of nette/utils?
[13:44:18] <TinoDidriksen> Yeah, you can set envvars in whatever thing you use to launch the php-fpm service.
[13:44:27] <DevAntoine> Naktibalda: what you mean?
[13:44:36] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160) (Ping timeout: 240 seconds)
[13:44:39] <Naktibalda> are you mixing editing composer.json with restricted composer update?
[13:44:51] <DevAntoine> oh, I should add all the packages requiring nette/utils in the update list too?
[13:45:04] <Naktibalda> nah, just run composer update
[13:45:34] <Naktibalda> if you afraid to do that, you should use stricter constraints in composer.json
[13:45:34] <DevAntoine> Naktibalda: kinda, in composer.json I've edited "sylius-labs/coding-standard" from "^2.0" to "^3.2"
[13:45:45] *** Joins: nuala (~nuala@user/nuala)
[13:46:06] <DevAntoine> well, I want to upgrade sylius-labs/coding-standard to then upgrade php-cs-fixer
[13:46:38] <Naktibalda> is there a version of simplify libs supporting nette/utils 3.0?
[13:47:29] <DevAntoine> Naktibalda: I don't know, I guess I'll have to digg it
[13:54:06] <DevAntoine> I'm not sure what's the correct way for upgrading packages. Let's say I've got package "foobar": "^2.0" and want to upgrade it to 3.2.
[13:54:32] <DevAntoine> Should I edit composer.json and run "composer update foobar" or should I run "composer update foobar:3.2"?
[14:00:19] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[14:02:48] *** Joins: keypushe- (~keypusher@user/keypusher)
[14:05:23] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 260 seconds)
[14:06:09] *** keypushe- is now known as keypusher
[14:11:01] <Naktibalda> as a developer I prefer editing files to running commands
[14:11:02] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160)
[14:12:05] <DevAntoine> Hum, I removed sylius-labs/coding-standard which removed a bunch of deps and then installed php-cs-fixer :D
[14:12:10] <DevAntoine> Everything went fine ahah
[14:13:01] <Koopz> holy crap it works, i can even use the SQL builder library
[14:18:41] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[14:21:29] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160) (Ping timeout: 256 seconds)
[14:24:00] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160)
[14:26:28] <gde33> for the 5th time my script created a file that shows up in the directory but cant be deleted, renamed or opened. :/
[14:26:52] *** Joins: LucaTM (~LucaTM@user/lucatm)
[14:26:55] <gde33> last time I fill a ticket with the host, they don't know what happened but deleted it for me
[14:27:23] <gde33> for those it went wrong at upload this time it went wrong while moving the file
[14:28:24] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[14:28:52] <gde33> or wait, the original in the temp folder is there to. It also says: 550 foo.jpg: No such file or directory
[14:29:38] <gde33> it apparenlty considered the corrupted file a valid image then moved it
[14:30:14] *** Joins: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861)
[14:30:50] <gde33> either resizing or changing orientation created the corrupted file
[14:31:55] *** Joins: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[14:32:17] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[14:39:57] <gde33> It is reading the image file shortly after saving it. I cant imagine anything else with 1/200 odds
[14:43:31] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 246 seconds)
[14:44:12] *** Joins: ViktorasCAM (~sinvet@user/sinvet)
[14:45:49] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[14:45:58] *** Quits: ViktorasCNC (~sinvet@user/sinvet) (Ping timeout: 246 seconds)
[14:47:39] <gde33> https://stackoverflow.com/questions/56086897/why-do-i-have-a-corrupted-image-file-after-using-move-uploaded-file-function
[14:48:29] *** Quits: otisolsen70 (~otisolsen@80.80.4.2) (Quit: Leaving)
[14:51:26] *** Quits: jargon (~jargon@184.101.173.186) (Remote host closed the connection)
[14:54:14] *** Quits: dimi1947 (~dimi1947@46.198.247.237) (Quit: Leaving)
[15:00:35] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[15:01:31] *** Quits: Csm319_ (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[15:06:04] *** Joins: keypushe- (keypusher@user/keypusher)
[15:08:23] *** Quits: keypusher (~keypusher@user/keypusher) (Ping timeout: 260 seconds)
[15:09:20] *** keypushe- is now known as keypusher
[15:16:12] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928) (Ping timeout: 240 seconds)
[15:18:13] *** Joins: thiras (~thiras@user/thiras)
[15:27:45] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[15:32:04] <gde33> ok, my question is: Can I safely rename() a file right after copy()ing it?
[15:34:33] * Naktibalda hasn't heard about unsafe rename
[15:37:59] <Naktibalda> rename is one of the safest operations if the file is moved within the same filesystem
[15:46:37] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.4.1)
[15:48:08] <gde33> mysterious
[15:50:22] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[15:50:34] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[16:04:47] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[16:05:23] *** Joins: newwebdev13 (~newwebdev@31.210.55.233)
[16:07:06] *** Quits: newwebdev13 (~newwebdev@31.210.55.233) (Read error: Connection reset by peer)
[16:07:17] *** Joins: newwebdev13 (~newwebdev@31.210.55.233)
[16:10:55] *** Joins: guido (~weechat@host-79-43-249-74.retail.telecomitalia.it)
[16:18:34] <__adrian> did you read the answer you got there?
[16:19:49] <__adrian> if your image viewer is relying on the "hint" of the file extension...
[16:25:57] <__adrian> also, for reference, don't not use move_uploaded_file(). it does important things that other functions don't.
[16:26:38] <__adrian> what filesystem is this? are the source and destination on the same disk/partition? how are you determining the file is "corrupted"?
[16:27:04] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[16:27:48] *** Joins: hans (uid529825@id-529825.helmsley.irccloud.com)
[16:28:59] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 256 seconds)
[16:30:30] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[16:32:07] <__adrian> also error reporting, etc.
[16:32:13] <Blondie101010> I"d bet that they have a space and / or special chars in the file name
[16:33:19] <Blondie101010> the tech support will probably stop replying soon if they keep asking them to delete files
[16:36:03] <__adrian> one way or the other, i'd suspect that this is more a problem of accessing the file than it actually being "corrupted"
[16:36:34] <__adrian> filesystems don't rely on the file being intact to delete it
[16:38:20] *** Joins: pmercado (~pmercado@190.22.73.57)
[16:40:33] <Blondie101010> indeed
[16:42:05] *** Joins: Chris (~coke@darktexas.icq-chat.com)
[16:43:07] <gde33> it uploads fine, original file name is stripped from unwanted characters. Then it rotates and resizes the image if nesasary and moves it to /small. The user may then chose a new file name. The file is copied to the image directory with the new name and the file in /small is renamed.
[16:43:46] <gde33> It created 4 corruted files in /small but today I also have one in the final image directory
[16:44:21] <gde33> thousands of other images uploaded, moved, resized & rotated just fine
[16:44:39] <Blondie101010> please define how it is corrupt
[16:44:58] <gde33> but I did see one with a strange character in the file name now that you mention it
[16:45:06] <gde33> it is corrupt in that it shows up in the folder
[16:45:13] <gde33> but it is not accessable
[16:45:20] <AllenJB> I would suggest that you should completely rename the file rather than "strip unwanted characters"
[16:45:35] <gde33> cant delete it, rename it, cant delete the folder, cant change permission on it. It does have a file size
[16:45:40] <hans> inb4 he strips the image data of unwanted characters too
[16:45:59] <Naktibalda> maybe your disk is corrupted
[16:46:00] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Quit: elastic_dog)
[16:46:02] *** Quits: fandre1986 (~fandre198@78.10.85.96) (Quit: Connection closed)
[16:46:03] <Blondie101010> nah
[16:46:14] <Blondie101010> likely just weird file names
[16:46:30] <gde33> ill get rid of original file names
[16:46:34] <Blondie101010> gde33:  var_dump() the file name
[16:46:39] <hans> gde33: can you link to an image, both the original and the corrupted version of the same image?
[16:46:49] <gde33> it only happens 1 time every 1000 images or so
[16:47:01] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[16:47:03] <Blondie101010> is the name user input?
[16:47:05] <Naktibalda> when you say that you can't do this or that, what error do you get?
[16:47:45] <gde33> 550 name.jpg: No such file or directory
[16:47:54] <Blondie101010> there is a space!!
[16:48:23] <hans>  if(($len=strlen($binary))!==($written=file_put_contents($filename,$binary,LOCK_EX)){throw new \RuntimeException("could only write {$written}/{$len} bytes to {$filename} !");}
[16:48:36] <gde33> name.jpg_20220331141724.jpg - 0 bytes transferred in 0 seconds
[16:49:10] <Blondie101010> where do you take that message from?
[16:49:15] <gde33> ftp client
[16:49:28] <hans> ftp or sftp?
[16:49:32] <Blondie101010> and no real error message?
[16:49:35] <gde33> sftp
[16:49:45] <gde33> (I think)
[16:49:49] <Blondie101010> you seem to transfer an empty file
[16:49:57] <gde33> yes, its like its not even there
[16:50:08] <Blondie101010> that is not corrupted, and normal that the destination sees what is actually sent
[16:50:26] <Blondie101010> so being empty is not caused by the PHP process in that case for sure
[16:50:32] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[16:51:43] <gde33> I did see one image with a strange character in its file name that it didn't originally have
[16:52:14] <gde33> I'm doing:  $filename = trim(preg_replace("/[^\w \.\[\]]+/", "", $filename));
[16:53:47] <Naktibalda> gde33: spaces and square brackets can cause problems in shell if not escaped correctly
[16:54:49] <Chris> Hey folks, should I wait until you're done with gde or may I state my question?
[16:55:18] <Naktibalda> just ask
[16:55:19] <gde33> Naktibalda: right
[16:56:42] <Chris> Hi there, I am having a kind of complicated issue, which is probably something very easy. I‚Äôm trying to customize a code, moving a part of a code to a different location. Basically, we‚Äôre speaking about this: https://imgur.com/a/O9WFZIE I‚Äôm trying to move the ‚Äúselect expiry time‚Äù out of the dialog box, that‚Äôs coming up when clicking the edit icon. I‚Äôd like to have it right above the upload button. I can move that code just fine at the
[16:56:42] <Chris> location where I‚Äôd like to have it, that‚Äôs no problem. But when the code is at a different place, out of the settings box it simply does not work anymore: the file gets uploaded to the server WITHOUT any expiry time and the selection of a expiry time ignored. The code I‚Äôve moved: https://github.com/rodber/chevereto-free/blob/1.6/app/themes/Peafowl/snippets/anywhere_upload.php#L294-L314 to above the upload button like image 3 shows.
[16:58:17] <Naktibalda> Chris: is it inside form?
[17:04:59] *** Quits: judabuda (kowbunga@user/judabuda) (Quit: Gone.)
[17:06:30] <__adrian> gde33: DO NOT try to "fix" input. DO NOT EVER let people choose filenames on your system!
[17:06:51] <__adrian> your s/o example showed a hardcoded destination filename that you chose.
[17:07:04] <__adrian> ALWAYS choose your own filenames.
[17:07:19] <Blondie101010> he said it got uploaded through ftp or sftp
[17:07:25] <Blondie101010> :/
[17:07:39] <gde33> Blondie101010: no its a php script
[17:07:48] <Blondie101010> hmmm ok
[17:07:53] <__adrian> how was the uploaded file uploaded
[17:07:58] <__adrian> (just to be clear)
[17:08:58] <__adrian> gde33: ^
[17:09:30] <gde33> 1 moment
[17:09:36] <__adrian> this includes the extension, btw
[17:09:53] <__adrian> not asking for code, just a plain-language answer
[17:10:04] <Chris> well, Naktibalda, I have not added a div class form for it, do I need to create a new div class like <div class="modal-form2"> ?
[17:10:15] <gde33> oh, a multi post form
[17:10:16] <__adrian> e.g., is it uploaded to your php script via a normal html form?
[17:10:19] <__adrian> ok
[17:10:20] <gde33> yes
[17:10:34] <gde33> nothing fancy, just multi file
[17:10:36] <__adrian> so back to this:  "$filename = trim(preg_replace("/[^\w \.\[\]]+/", "", $filename));"   don't ever do this.
[17:10:38] <arash> Hello, is it ok to use throw command in my class this way? if($rows->rowCount() > 0 ) { return $rows->fetch(); } throw new \Exception("There is no ROW");
[17:10:44] <__adrian> choose your own filenames.
[17:11:05] <__adrian> arash: assuming that's an error condition, yes
[17:11:11] <gde33> its the admin area btw
[17:11:18] <__adrian> gde33: that's not relevant
[17:11:41] <__adrian> obviously it's possible to filename-inject yourself
[17:11:59] <gde33> I kinda need my images to have names to make sense of it all
[17:11:59] <__adrian> "gde33> I did see one image with a strange character in its file name that it didn't originally have"
[17:12:30] <gde33> yes, no idea so far, I should figure out how that is even possible and even if I cant refuse input when it does happen
[17:12:35] <__adrian> if you need the original name, store it as metadata (e.g., in the database).
[17:13:00] <__adrian> "I should figure out how that is even possible"  because "$filename = trim(preg_replace(..."
[17:13:08] <__adrian> like i said, stop doing that.
[17:13:37] <__adrian> even when you ARE accepting user input, you DO NOT "fix" it. it's either good (you keep it) or it's BAD (you reject it).
[17:13:37] <gde33> you mean make all my image names into random strings?
[17:14:00] <__adrian> if file ownership is not an issue, then hashing the file contents is a common approach
[17:14:43] *** Joins: l__q (~modinfo@user/modinfo)
[17:15:05] <__adrian> i you need specific filenames for admin reasons, uploading via a web form + php script is probably not the way.
[17:15:15] <gde33> then i wonder if I can put a correct version in the form after rejecting it?
[17:15:23] <__adrian> no, just reject it
[17:15:30] <__adrian> it's the user's job to make it correct
[17:16:22] <__adrian> you can tell them why you reject it, of course. probably something like "use a filename with only A-z0-9_"
[17:16:25] <gde33> I need specific names for organisation and it would be good SEO
[17:16:35] <gde33> ah ok
[17:17:33] *** Quits: luigibu (~luigi@93.176.153.88) (Quit: WeeChat 3.5)
[17:17:55] <__adrian> re: extensions: don't accept those from user input at all. check the mime-type (e.g., https://php.net/finfo ) and assign a known extension based on that.
[17:18:26] *** Quits: newwebdev13 (~newwebdev@31.210.55.233) (Read error: Connection reset by peer)
[17:18:45] *** Joins: newwebdev13 (~newwebdev@31.210.55.233)
[17:20:15] <gde33> can I check mime type directly on the posted data?
[17:20:36] <__adrian> on the posted file? yes. using the info in $_FILES?  **NO**.
[17:20:55] <gde33> that is to bad
[17:21:12] <__adrian> no, it's good. don't trust user input.
[17:21:40] <gde33> it seems bad if I have to put it on the file system before completing checks
[17:21:59] <__adrian> you absolutely don't
[17:22:13] <__adrian> uploads go to a tmp location for this very reason.
[17:22:29] <gde33> tmp is still on the hd?
[17:22:36] <__adrian> do your checks first, then move_uploaded_file ONLY AFTER you've checked and know the file is good.
[17:22:54] <__adrian> if you don't move the uploaded file, it's deleted when php exits.
[17:23:21] <__adrian> it doesn't stay
[17:24:24] <__adrian> in $_FILES: php sets "size", "tmp_name", and "error". the other items are provided by the user.
[17:24:26] <gde33> I get that that is the idea but my current issue involves files I've made some how that do not want to go away. lol
[17:24:55] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928)
[17:25:02] <__adrian> stop making them. see above - "move_uploaded_file ONLY AFTER"
[17:25:16] <__adrian> if you don't trust a file yet, DON'T MOVE IT yet.
[17:25:56] <gde33> I trust them then move them then get the weird inaccessible files
[17:26:35] <gde33> uploading is not a problem atm, I must be doing something wrong in the process of renaming copying and deleting them
[17:26:45] <__adrian> we've been over that part. all clues point to the file being fine and you're just screwing up the filename.
[17:27:05] <__adrian> "I must be doing something wrong in the process of renaming"  // yes, see above.
[17:27:09] <gde33> right, I should start by addressing those pointers asap
[17:27:31] <__adrian> ""$filename = trim(preg_replace("/[^\w \.\[\]]+/", "", $filename));"   don't ever do this."
[17:27:53] <gde33> ill do that then compare the product with the input and reject if they don't exactly match
[17:28:15] <__adrian> just decide what characters you allow and match
[17:28:29] <gde33> ill replace the original name with random characters
[17:28:55] <__adrian> ...ok (though i thought you said you needed the filename)
[17:29:32] <gde33> force a new file name to be input in a form rather than allow using the existing one (by leaving hte field blank)
[17:30:32] *** Joins: luigibu (~luigi@93.176.153.88)
[17:30:55] <gde33> I just noticed that if I echo <img src="foo[bar baz.jpg"> it escapes the spaces as %20 but not the [ as %5B
[17:32:26] <Naktibalda> it is up to you to escape filenames correctly, don't expect browsers to get it right
[17:33:07] <gde33> when creating file names I should not escape anything right?
[17:33:23] <gde33> or is it okay to create a file  "foo%20bar.jpg"  ?
[17:33:38] <Naktibalda> no, you must escape URLs correctly when generating HTML
[17:34:27] <gde33> only there, ah
[17:35:06] <gde33> I was taking more of an if it works it works approach, will look what I've done :P
[17:35:23] <gde33> thanks, its been supper useful
[17:50:38] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 272 seconds)
[17:51:41] *** Joins: goddard (~goddard@user/goddard)
[17:52:34] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[18:15:33] <Chris> I assume it's not that easy.
[18:16:40] <Naktibalda> it would be that easy if you used plain HTML, now you have some frontend framework to deal with
[18:23:55] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[18:24:38] *** Joins: JohnBeales (~JohnBeale@dsl-173-206-92-57.tor.primus.ca)
[18:25:52] *** Joins: Poboy (~Poboy@user/poboy)
[18:31:18] *** Quits: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160) (Ping timeout: 260 seconds)
[18:32:06] *** Joins: muley (~muley@76-245-68-99.lightspeed.iplsin.sbcglobal.net)
[18:37:52] *** Quits: luigibu (~luigi@93.176.153.88) (Quit: WeeChat 3.5)
[18:47:40] *** Joins: roadie (~user@2a02:8108:5a40:1d87:5de1:cf4a:f547:2160)
[19:02:12] *** Quits: sreve_ (~quassel@p4ff44f3f.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[19:04:04] *** Joins: sreve (~quassel@p54a71c9d.dip0.t-ipconnect.de)
[19:11:13] *** Quits: undefined_bob (~undefined@user/undefined-bob/x-5411918) (Quit: WeeChat 1.5)
[19:14:00] *** Quits: newwebdev13 (~newwebdev@31.210.55.233) (Read error: Connection reset by peer)
[19:14:06] *** Joins: newwebdev132 (~newwebdev@31.210.55.233)
[19:16:32] *** Quits: Poboy (~Poboy@user/poboy) (Ping timeout: 250 seconds)
[19:20:09] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[19:32:13] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 240 seconds)
[19:34:30] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 272 seconds)
[19:34:47] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[19:36:20] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[19:37:15] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[19:44:38] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 272 seconds)
[19:48:53] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[19:54:38] *** Joins: olle (~olle@217.116.228.10)
[19:55:05] *** Joins: travisghansen (~travisgha@192.74.130.86)
[19:56:03] *** Quits: JohnBeales (~JohnBeale@dsl-173-206-92-57.tor.primus.ca) (Quit: My MacBook Air has gone to sleep. ZZZzzz‚Ä¶)
[19:57:07] *** Joins: Poboy (~Poboy@user/poboy)
[19:58:06] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[20:02:13] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[20:02:15] *** Quits: olle (~olle@217.116.228.10) (Remote host closed the connection)
[20:05:43] *** Joins: JohnBeales (~JohnBeale@dsl-173-206-92-57.tor.primus.ca)
[20:08:58] *** Quits: Poboy (~Poboy@user/poboy) (Ping timeout: 250 seconds)
[20:09:14] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[20:11:17] *** Joins: magla (~gelignite@d5362fd7.access.ecotel.net)
[20:21:49] *** Joins: l__q (~modinfo@user/modinfo)
[20:22:09] *** Joins: elastic_1 (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[20:22:39] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 250 seconds)
[20:23:55] *** Quits: elastic_1 (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Client Quit)
[20:24:18] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[20:31:14] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928) (Ping timeout: 260 seconds)
[20:38:49] *** Quits: richardjh (~Thunderbi@51.219.41.0) (Quit: richardjh)
[20:41:27] *** Joins: Gamara (~Gamara@cpe9050cade20e3-cm9050cade20e0.cpe.net.cable.rogers.com)
[20:42:17] <Gamara> hey how would I shuffle an array with key value, I always want HEADING_PROPERTY on top? https://onecompiler.com/php/3xxrp4ywj
[20:46:52] <Gamara> sorry like this: https://onecompiler.com/php/3xxrpsa7u
[20:49:29] <relipse> Gamara: are you wanting to sort it but keep HEADING_PROPERTY on top?:
[20:49:34] <relipse> i don't see it sorted really
[20:50:24] <Gamara> I basically just want to always shuffle the HEADING_PROPERTY to the top of the array
[20:50:53] <Gamara> Oh I am dumb I can just create a new array
[20:50:56] <relipse> so you can unset() it and then https://www.php.net/manual/en/function.array-unshift.php
[20:51:09] <Gamara> that is even more clever thank you
[20:51:17] <Gamara> unset then push to the front
[20:53:04] <relipse> ok i'm wrong
[20:53:40] <relipse> https://stackoverflow.com/questions/1371016/php-prepend-associative-array-with-literal-keys
[20:53:52] <relipse> you'll have to create a new array
[20:56:29] *** Joins: WishBoy (~WishBoy@user/wishboy)
[20:57:42] <relipse> https://3v4l.org/6M30k Gamara
[20:57:45] <relipse> there you go
[20:57:59] <relipse> be sure to use "relipse" as author
[20:58:03] <relipse> ;)
[20:58:54] <Gamara> haha thank you <3
[21:00:59] <Gamara> I was trying to use the spread operator but was getting a syntax error ;_;
[21:09:02] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 260 seconds)
[21:11:28] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[21:15:48] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[21:18:24] *** Joins: l__q (~modinfo@user/modinfo)
[21:19:12] *** Quits: l__q (~modinfo@user/modinfo) (Client Quit)
[21:20:00] *** Joins: l__q (~modinfo@user/modinfo)
[21:25:42] *** Joins: eddof13_ (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
[21:27:50] *** Quits: magla (~gelignite@d5362fd7.access.ecotel.net) (Quit: Stay safe!)
[21:29:20] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[21:31:33] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 250 seconds)
[21:32:42] *** Joins: jargon (~jargon@184.101.173.186)
[21:43:48] *** Quits: eddof13_ (~eddof13@2806:102e:12:64:8553:23df:507a:ff04) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[22:01:07] *** Joins: Poboy (~Poboy@user/poboy)
[22:02:54] *** Joins: funhouse (~funhouse@user/funhouse)
[22:09:20] *** Joins: Phil-Work (~phil@62.3.100.20)
[22:14:47] *** Quits: konrados (~konrados@user-5-173-20-21.play-internet.pl) (Ping timeout: 260 seconds)
[22:19:38] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Remote host closed the connection)
[22:19:41] *** Quits: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861) (Quit: Client closed)
[22:20:08] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[22:27:11] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: On the other hand, you have different fingers.)
[22:49:16] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[22:50:47] *** Joins: magla (~gelignite@d5362fd7.access.ecotel.net)
[22:54:51] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Ping timeout: 260 seconds)
[22:59:07] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a)
[23:03:51] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:6028:512c:43b4:598a) (Ping timeout: 250 seconds)
[23:05:38] *** Joins: delboy1978uk (~delboy197@d51a4773c.access.telenet.be)
[23:14:14] *** Quits: delboy1978uk (~delboy197@d51a4773c.access.telenet.be) (Quit: delboy1978uk)
[23:33:16] *** Joins: DevAntoine (~DevAntoin@78.193.133.12)
[23:37:51] *** Quits: DevAntoine (~DevAntoin@78.193.133.12) (Ping timeout: 245 seconds)
[23:41:08] *** Quits: l__q (~modinfo@user/modinfo) (Ping timeout: 260 seconds)
[23:51:26] *** Quits: newwebdev132 (~newwebdev@31.210.55.233) (Read error: Connection reset by peer)
[23:53:07] *** Joins: newwebdev13 (~newwebdev@31.210.55.233)
[23:55:44] *** Joins: eddof13_ (~eddof13@2806:102e:12:64:8553:23df:507a:ff04)
