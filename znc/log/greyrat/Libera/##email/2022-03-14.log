[00:02:44] *** Joins: lagash (lagash@lagash.shelltalk.net)
[00:43:04] *** Quits: Quimby (~Quimby@89-248-153-155.dynamic.modem.fl1.li) (Ping timeout: 250 seconds)
[00:49:18] *** Quits: dob1 (~dob1@user/dob1) (Quit: quit)
[00:51:36] *** Joins: Quimby (~Quimby@89-248-153-155.dynamic.modem.fl1.li)
[01:00:16] *** Joins: rgrinberg (~textual@177.244.18.30)
[01:15:50] *** Joins: dob1 (~dob1@user/dob1)
[01:22:25] *** Quits: rgrinberg (~textual@177.244.18.30) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:25:48] *** Quits: dob1 (~dob1@user/dob1) (Ping timeout: 252 seconds)
[01:25:50] *** Joins: dob1_ (~dob1@user/dob1)
[01:32:39] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Quit: Konversation terminated!)
[01:51:44] *** dob1_ is now known as dob1
[02:27:10] *** Joins: vit (~vit@chello085216193138.chello.sk)
[02:27:34] *** vit is now known as Guest8508
[02:28:29] *** Quits: Guest8508 (~vit@chello085216193138.chello.sk) (Client Quit)
[02:28:48] *** Joins: vit (~vit@chello085216193138.chello.sk)
[02:29:12] *** vit is now known as Guest7375
[02:40:38] *** Guest7375 is now known as freeworld
[02:42:46] *** freeworld is now known as Guest7375
[03:32:17] *** Quits: merpaderp (~ircuser@89.111.36.243) (Ping timeout: 252 seconds)
[03:32:43] *** Joins: merpaderp (~ircuser@89.111.36.243)
[03:55:57] *** Quits: Guest7375 (~vit@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[06:56:35] *** Quits: chiselfuse (~chiselfus@user/chiselfuse) (Ping timeout: 240 seconds)
[07:00:56] *** Quits: bitblit (~bitblit@gateway/tor-sasl/bitblit) (Ping timeout: 240 seconds)
[07:12:01] *** Quits: JPT (~jpt@classified.name) (Quit: Hoppla!)
[07:20:18] *** Joins: chiselfuse (~chiselfus@user/chiselfuse)
[07:20:21] *** Joins: JPT (~jpt@classified.name)
[07:26:36] *** Joins: bitblit (~bitblit@gateway/tor-sasl/bitblit)
[07:30:00] *** Quits: Luke- (~ldm@hacksoc/alumni/ldm) (Quit: o/ 3w 6d 23h 59m 13s)
[07:34:14] *** Joins: Luke (~ldm@hacksoc/alumni/ldm)
[07:35:16] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[08:03:15] *** Joins: rgrinberg (~textual@177.244.18.30)
[08:05:19] *** Joins: Atque (~Atque@user/atque)
[08:21:36] *** Quits: monkeynutz (~monkeynut@user/monkeynutz) (Ping timeout: 252 seconds)
[09:01:16] *** Joins: monkeynuts (~monkeynut@user/monkeynuts)
[09:28:23] *** Joins: acagastya (~acagastya@wikinews/acagastya)
[09:31:59] <acagastya> Hi, I received an email with this headers.  https://dpaste.com/APXFQ52J4.txt.  We don't have a IT@MY-WEBSITE.com email, so I am guessing it was spoofed.  Any idea how I can prevent the spoofing?
[09:34:07] <bookworm> acagastya: spf / dmarc / dkim and then the rest is depending on the policy of the receiving end
[09:41:07] <bookworm> but why are you accepting mail from your domain that's not actually sent by you?
[09:45:41] <acagastya> I just checked the DNS records, spf, dmarc and dkim TXT records exists, bookworm.
[09:46:21] <acagastya> Re "but why are you accepting mail from your domain that's not actually sent by you?" -- there are john@domain and sam@domain, who should be able to send emails to others@domain too.
[09:47:00] <bookworm> sure, but then the email comes from *your* infra
[09:47:27] <bookworm> why do you allow other MTAs to send emails on your behalf? That's always going to be spam
[09:47:39] <bookworm> (unless you use MLs that misbehave)
[09:47:52] <acagastya> MLs?
[09:48:02] <bookworm> for those MLs that behave, just check the dkim record. Mailing lists
[09:48:25] <acagastya> why do you allow other MTAs to send emails on your behalf? That's always going to be spam -- um, how do I disable it?
[09:48:44] <bookworm> depends on how you setup postfix
[09:50:04] <acagastya> The MLs that exist are just aliases in /etc/aliases.
[09:51:24] <bookworm> I meant external mailing lists... postfix list, lkml and so forth
[09:51:31] <bookworm> check_sender_access is one way of doing it
[09:53:42] <acagastya> There are no external MLs -- the one we use are all @domain.com
[09:59:10] <acagastya> depends on how you setup postfix -- it was done using a script -- I might still have that script somewhere -- which config command should I be looking for?
[10:05:48] *** Quits: rgrinberg (~textual@177.244.18.30) (Ping timeout: 240 seconds)
[10:08:38] *** Joins: rgrinberg (~textual@177.244.18.30)
[10:08:49] *** Quits: nurupo (~nurupo.ga@user/nurupo) (Quit: nurupo.ga)
[10:09:20] *** Joins: nurupo (~nurupo.ga@user/nurupo)
[10:16:15] *** Quits: rgrinberg (~textual@177.244.18.30) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:18:38] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[10:22:52] *** Joins: Atque (~Atque@user/atque)
[10:57:49] *** Joins: Guest7375 (~vit@chello085216193138.chello.sk)
[11:11:36] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[11:34:54] <pj> bookworm: it's not mis-behaving for a mailing list to leave the From: header intact, in fact it's generally required to not invalidate DKIM and DMARC.
[11:35:43] <pj> acagastya: I can help you here, but you will get better help if you join #postfix.
[11:37:46] <bookworm> pj: didn't say it was. The issue is usually that they insist on modifying the subject and / or body. Therby invalidating dkim
[11:38:13] <pj> acagastya: one thing to note is the bottom received header also claims to be from your domain, is 141.98.10.58 your IP or is that external?
[11:38:29] *** Joins: menace (~someone@ppp-93-104-191-63.dynamic.mnet-online.de)
[11:38:29] *** Quits: menace (~someone@ppp-93-104-191-63.dynamic.mnet-online.de) (Changing host)
[11:38:29] *** Joins: menace (~someone@user/menace)
[11:39:29] *** menace is now known as Deknos
[11:41:47] <pj> acagastya: assuming that is not your IP then it comes from a spoofed HELO header, and it's very easy to detect when another server attempts to HELO as you and reject the mail.  That will *never* happen from a legitimate email and is a better check than the From: header.
[11:43:09] <pj> If you have a look at this article it tells how to use check_helo_access to reject any mail coming into the server from outside that claims to be coming from your server (among other good anti-spam measures that it recommends): http://jimsun.linxnet.com/misc/postfix-anti-UCE.txt
[11:44:38] <pj> bookworm: sure, That is actually why some mailing lists such as the postfix mailing list specifically don't modify certain headers or the body.
[11:45:22] <bookworm> yes, didn't mean to imply that postfix was a bad list. Just clarifying what I meant by "MLs". lkml is s sane list too
[11:45:32] <pj> no, of course not.
[11:46:32] <pj> and you are quite right that there are actually quite a large number of mailing lists that do change that stuff, although nowadays those lists tend to alter headers and re-sign dkim, etc so that recipient servers will accept the messages from them.
[12:23:44] *** Joins: john122 (~john122@115.red-83-52-125.dynamicip.rima-tde.net)
[12:46:34] *** Quits: monkeynuts (~monkeynut@user/monkeynuts) (Ping timeout: 272 seconds)
[12:50:50] *** Joins: monkeynuts (~monkeynut@user/monkeynuts)
[13:48:34] <acagastya> pj: no, that IP is not my IP.
[13:49:30] <acagastya> Looking at that link now.
[14:02:27] *** Joins: labrador (~labrador@user/labrador)
[14:10:11] *** Quits: Deknos (~someone@user/menace) (Quit: Deknos)
[16:00:14] *** Joins: CyberTailor (~cyber@gateway/tor-sasl/cybertailor)
[17:08:28] *** Joins: Atque (~Atque@user/atque)
[18:57:51] *** Joins: bsd4me (~usingbsd@user/bsd4me)
[18:58:18] *** Quits: bsd4me (~usingbsd@user/bsd4me) (Read error: Connection reset by peer)
[19:01:31] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[19:08:19] *** Joins: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net)
[19:12:13] *** Quits: lh (7166095ff0@2604:bf00:561:2000::2a4) (Remote host closed the connection)
[19:12:15] *** Quits: mendelmaleh (e58b23db5e@2604:bf00:561:2000::22b) (Remote host closed the connection)
[19:12:56] *** Joins: mendelmaleh (e58b23db5e@2604:bf00:561:2000::22b)
[19:13:03] *** Joins: lh (7166095ff0@2604:bf00:561:2000::2a4)
[19:17:09] *** Quits: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net) (Quit: Leaving)
[19:17:23] *** Joins: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net)
[19:18:12] *** Quits: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net) (Read error: Connection reset by peer)
[19:18:21] *** Joins: minimal (~minimal@user/minimal)
[19:18:39] *** Joins: inak (~justme@209-112-220-139-radius.dynamic.acsalaska.net)
[19:23:14] *** Quits: bremner (~bremner@notmuch/developer/bremner) (Remote host closed the connection)
[19:41:45] *** Joins: micah (~micah@debian/micah)
[19:41:54] <micah> i'm trying to test my postfwd rules by doing: nc 127.0.0.1 10040 </usr/share/doc/postfwd/examples/request.sample but it never returns -- any ideas?
[19:42:40] <lunaphyte> if it were me, i'd be looking at the logs
[19:43:26] <micah> yeah, i find nothing in the log :o
[19:44:08] <lunaphyte> with increased verbosity?
[19:44:11] <micah> postfix *is* using it though, I can confirm that, but I need to test a rule
[19:44:32] <micah> i'll try adding more verbosity
[19:44:37] <lunaphyte> oh, so it's operating properly?  you're just trying to do something manually?
[19:45:15] <micah> yes
[19:45:24] <micah> adding -vv doesn't tell me anything :i
[19:45:54] *** Joins: bremner (~bremner@notmuch/developer/bremner)
[20:03:37] <rob0> might need expect(1) or such to simulate interactive connections
[20:10:45] <jelly> pet peeve: email clients that mess up order of Received headers
[20:11:34] *** Joins: Atque (~Atque@user/atque)
[20:13:46] <BranchPredictor> jelly: ... how?
[20:14:07] <BranchPredictor> jelly: and which ones?
[20:14:47] <rob0> Ideally Received: headers are prepended, so the first you see should be the last one added.
[20:14:49] <micah> rob0: it doesn't seem to output anything, its like I need to send something else to get a response. I can strace and see it connecting and my data being sent
[20:15:14] <micah> i can type "PING" and I get a "PONG" in response
[20:16:51] <micah> there must be a protocol message I need to send to say 'done sending, gimme a result'
[20:24:31] <micah> i can see (via strace) the attributes get set, but I dont know how to 'finish' the conversation: https://github.com/postfwd/postfwd/blob/master/sbin/postfwd3#L3310
[20:28:48] <micah> aha! i need an empty line at the end
[20:42:51] *** Quits: ecdhe_ (~ecdhe@user/ecdhe) (Read error: Connection reset by peer)
[20:43:05] *** Joins: ecdhe (~ecdhe@user/ecdhe)
[20:56:18] *** Joins: rgrinberg (~textual@177.244.18.30)
[21:06:52] *** Quits: rgrinberg (~textual@177.244.18.30) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:10:35] *** Joins: rgrinberg (~textual@177.244.18.30)
[21:21:24] <jelly> are you trying to manually talk policyd proto to postfwd?
[21:41:25] *** Joins: AndroUser (~androirc@176.55.166.222)
[21:51:34] *** Quits: rgrinberg (~textual@177.244.18.30) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:59:56] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[22:00:55] *** Quits: AndroUser (~androirc@176.55.166.222) (Read error: Connection reset by peer)
[22:01:13] *** Joins: AndroUser (~androirc@176.55.166.222)
[22:24:15] *** Joins: rgrinberg (~textual@177.244.18.30)
[22:28:45] *** Joins: Atque (~Atque@user/atque)
[22:34:40] *** Quits: rgrinberg (~textual@177.244.18.30) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:38:17] *** Quits: Duchess (~Duchess@2604:3d08:1:1b:c189:b6ab:68c1:858f) (Quit: Client closed)
[22:38:30] *** Joins: rgrinberg (~textual@177.244.18.30)
[22:38:38] *** Joins: Duchess78 (~Duchess@2604:3d08:1:1b:c189:b6ab:68c1:858f)
[22:50:43] <jaybe> so this is evidently a more popular thing now... ew... "Received: from 480285636384 named unknown by gmailapi.google.com with HTTPREST; Mon, 14 Mar 2022 12:14:21 -0700"
[22:51:34] <jaybe> they are populating the To: with unknown/nonsense and causing delivery that way
[22:53:19] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[22:58:31] <jelly> BranchPredictor, I don't want to blame Outlook for everything but this particular message came as .msg
[23:29:11] *** Quits: rgrinberg (~textual@177.244.18.30) (Ping timeout: 256 seconds)
[23:30:35] *** Quits: bitblit (~bitblit@gateway/tor-sasl/bitblit) (Remote host closed the connection)
[23:30:59] *** Joins: bitblit (~bitblit@gateway/tor-sasl/bitblit)
[23:32:43] *** Joins: rgrinberg (~textual@177.244.18.30)
[23:50:34] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Quit: Konversation terminated!)
[23:55:31] *** Quits: rgrinberg (~textual@177.244.18.30) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:55:58] <foo> Setting up mailgun to send email from @ root domain. I don't believe I need to update dkim / spf on *root domain*, only setting that appropriately on subdomain is appropriate - correct? Or am I missing something? 
[23:56:42] *** Joins: rgrinberg (~textual@177.244.18.30)
[23:58:14] <rob0> not sure what "root domain" means to you?
[23:58:41] *** Quits: labrador (~labrador@user/labrador) (Quit: Leaving)
[23:58:44] <rob0> doesn't mailgun provide dkim/spf instructions?
