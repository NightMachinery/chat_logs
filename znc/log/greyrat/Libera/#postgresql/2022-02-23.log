[00:00:36] *** Quits: rufito (~phil@186-79-8-11.baf.movistar.cl) (Quit: Leaving)
[00:01:48] *** Quits: vladoski (~vladoski@2001:b07:add:d406:674:d163:1ccf:ebf1) (Remote host closed the connection)
[00:02:54] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[00:09:27] *** Quits: gdd (~gdd@129.199.146.230) (Quit: WeeChat 3.3)
[00:10:37] *** Quits: darkbit (~db@136.158.8.67) (Ping timeout: 240 seconds)
[00:10:50] *** Joins: spacenautx (~spacenaut@user/spacenautx)
[00:13:55] *** Quits: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net) (Read error: Connection reset by peer)
[00:14:17] *** Quits: Rashad (~textual@2a01:9700:1a7c:8900:904c:8218:36e0:4214) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[00:14:36] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[00:14:59] *** Joins: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net)
[00:15:02] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 240 seconds)
[00:17:39] *** Joins: gdd (~gdd@129.199.146.230)
[00:17:42] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[00:19:00] *** Quits: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net) (Ping timeout: 240 seconds)
[00:19:26] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Read error: Connection reset by peer)
[00:21:24] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[00:23:05] *** Quits: analogsalad (~analogsal@user/analogsalad) (Quit: bye)
[00:23:28] *** Quits: lkw (~lkw@user/lkw) (Remote host closed the connection)
[00:24:13] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[00:31:48] *** Quits: magla (~gelignite@55d4d6c3.access.ecotel.net) (Quit: Stay safe!)
[00:31:55] *** Quits: rednul_ (~rednul@098-127-226-233.biz.spectrum.com) (Read error: Connection reset by peer)
[00:34:28] *** Joins: realies0 (~realies@user/realies)
[00:34:35] *** Quits: viaSanctus (~viaSanctu@user/viasanctus) (Quit: Ping timeout (120 seconds))
[00:34:56] *** Joins: hrob (~hrob@31-209-221-88.dsl.dynamic.simnet.is)
[00:35:41] *** Quits: realies (~realies@user/realies) (Read error: Connection reset by peer)
[00:35:41] *** realies0 is now known as realies
[00:39:02] *** Joins: Reiner_Unsinn (~quassel@ip-092-050-086-254.um29.pools.vodafone-ip.de)
[00:40:26] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[00:40:32] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr) (Read error: Connection reset by peer)
[00:42:09] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr)
[00:42:59] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[00:46:21] *** Joins: Odin- (~odin@cybernetic.anarchism.is)
[00:46:38] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[00:47:19] *** Joins: tkonto (~tkonto@188.4.208.136.dsl.dyn.forthnet.gr)
[00:47:24] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[00:47:33] <tkonto> trying to drop a database with - in the name and I get an error
[00:47:45] <tkonto> drop database PROD-2022;
[00:47:47] <tkonto> ERROR:  syntax error at or near "-"
[00:47:53] <peerce> specify th ename in " "
[00:48:11] <tkonto> thanks
[00:48:22] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 272 seconds)
[00:48:25] <peerce> PROD-2022 is an expression, what subtracts 2022 from the value of PROD (which of course is nonsense in this context.
[00:48:48] <Myon> in that context it's just a syntax error
[00:49:01] <peerce> identifiers are quoted with " " while string constants are quoted with ' '
[00:49:18] *** Joins: funhouse (~funhouse@user/funhouse)
[00:50:27] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662)
[00:50:57] <peerce> you also need "quotes" around identifiers with upper or mixed case.
[00:51:43] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[00:52:47] *** Quits: eroux (~eroux@102-65-85-242.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:53:02] *** Joins: tozhu (~tozhu@180.168.6.186)
[00:55:20] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[00:55:42] <ufk> i don't quite understand the jit part of the git
[00:55:46] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662) (Ping timeout: 245 seconds)
[00:56:07] <ufk> i'm comparing =any(array()) to =any((values())
[00:58:20] <ufk> =any(values()) is always faster then =any(array()) because it allows using the primary index ?
[00:59:20] <peerce> there's no index on values() or on array()
[01:00:03] <ufk> this is the explain of using an array https://explain.depesz.com/s/eKWt and this one for using values: https://explain.depesz.com/s/sVig
[01:00:09] <ufk> both of them are written statically in the query
[01:00:59] <ufk> looks like the planning and executing time of =any(values) is faster but the just in time complication takes longer so i have no idea what it really means and what's more usable
[01:04:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[01:04:21] <peerce> 115 vs 169 milliseconds when you're dealing with a query that is taking 200 seconds is kind of down in the noise
[01:05:09] <ufk> ahhh ms!
[01:05:16] <ufk> right :)
[01:05:50] <ufk> ok then.. by values is a bit faster. awesome thanks
[01:06:23] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 256 seconds)
[01:06:58] *** Joins: ponsfrilus1 (~Thunderbi@vpn-253-153.epfl.ch)
[01:08:00] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 272 seconds)
[01:08:01] *** ponsfrilus1 is now known as ponsfrilus
[01:08:51] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[01:14:22] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[01:15:06] <Caerus> hey does anyone know if there is a way to wrangle pg_restore into dumping on a database with a different name?   pg_dump {args...} databaseA | psql {args...} databaseB works wonders but it'd be nice to be able to do the same with custom format files.
[01:15:52] <peerce> -d dbname
[01:16:14] <Caerus> googled around and found mostly hacks that revolve creating dbs then renaming or using -T.
[01:16:52] <peerce> hmm?  just pg_restore -d dbname dumpfilename
[01:17:57] <peerce> can't use -C  (shouldn't use it anyways)
[01:18:46] <Caerus> pg_restore kept erroring that the database with the original name didn't exist.  I'm not versed with postgres at all so I'm sorry if this is a silly question or I'm missing something obvious.
[01:18:56] <peerce> the 2nd example shows this exactly.  https://www.postgresql.org/docs/current/app-pgrestore.html
[01:19:17] <peerce> what options did you use on the pg_dump ?
[01:19:32] <peerce> just pg_dump -Fc -f filename dbname ?
[01:20:40] <xocolatl> it can have some stuff with the old database name
[01:20:49] <xocolatl> unfortunately
[01:21:55] *** Joins: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:65dc:ab5d:8da2:d8b4)
[01:21:55] <StuckMojo> probably grants on the db?
[01:22:14] <StuckMojo> you can use -L and -l options of pg_restore to skip the stuff that's erroring
[01:22:27] <StuckMojo> or you can generate sql and edit it
[01:23:01] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[01:23:56] <Caerus> pg_restore -h hostname.us-east-1.rds.amazonaws.com -p 5432 -W -U testuser -c -d postgres < consolidated_test_c.backup    (may have tried some other variations).  rds only has postgres db that I was using just to test things out.
[01:24:10] *** Joins: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net)
[01:26:02] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662)
[01:26:20] <peerce> create a new db first to restore to, and don't use -=C or -c
[01:26:29] *** Quits: jbg (~jbg@user/jbg) (Quit: Ping timeout (120 seconds))
[01:26:33] <Caerus> yeah piping pg_dump | psql worked but I kept thinking about why the custom format didn't.  I'll give it another go later tonight, I'm sure I messed up somewhere.
[01:27:02] <Caerus> ah, that could have been it. -c
[01:28:54] <Caerus> will do, thanks @peerce, everybody.
[01:30:09] *** Joins: merzo (~Thunderbi@95.133.38.222)
[01:30:30] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662) (Ping timeout: 250 seconds)
[01:34:02] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[01:35:32] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[01:35:33] <peerce> i usually do somethin glike,  psql -h host -c "drop database if exists newdb; create database newdb owner blahblah;"    then run pg_restore -d newdb dumpfile
[01:39:29] *** Quits: tozhu (~tozhu@180.168.6.186) (*.net *.split)
[01:39:29] *** Quits: rvalue (~rvalue@user/rvalue) (*.net *.split)
[01:42:14] *** Joins: rvalue (~rvalue@user/rvalue)
[01:42:53] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[01:43:23] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.3)
[01:44:38] *** Quits: hrob (~hrob@31-209-221-88.dsl.dynamic.simnet.is) (Quit: Client closed)
[01:46:12] *** Joins: zlinux[] (~zlinux@142.247.7.201)
[01:50:26] *** Quits: mexen (uid495612@user/mexen) (Quit: Connection closed for inactivity)
[01:52:04] *** Joins: javi404 (~quassel@pool-173-63-15-246.nwrknj.fios.verizon.net)
[01:52:17] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[01:57:03] <crunchy_david> I'm trying to get a simple function created that will read in a raw disk block and return it as a bytea; attempted using plpython3u as it was available, but it's not working. (code/demo: https://gist.github.com/pgguru/7c2efe0aafe26d61c515848dbe70545f)  The equivalent works in python, so assuming it's something about the plumbing. Ideas?
[01:59:00] <crunchy_david> (don't care about the specific mechanism, just want to read in a file as a bytea for use in pageinspect outside of the base/ directory)
[01:59:31] <peerce> remember, any function runs with the file system permissions of the postgres server process
[01:59:47] <peerce> so that can trip into all sorts of permissions issues, selinux, etc.
[01:59:48] <crunchy_david> yup, the original files were not at issue
[01:59:56] <crunchy_david> didn't see anything in audit.log
[02:00:39] <crunchy_david> mainly looking for the right way to handle that in plpython (or a different approach of getting a disk page outside base/ in, not particular)
[02:00:58] <peerce> bytea[] is an array of bytea.   a scalar bytea can be any number of bytes up to the field size limit (< 1GB?)
[02:01:11] *** Joins: Atque (~Atque@user/atque)
[02:01:50] *** Quits: kakashiAL (~kakashi@ip-037-201-198-039.um10.pools.vodafone-ip.de) (Ping timeout: 272 seconds)
[02:02:09] *** Joins: tozhu (~tozhu@180.168.6.186)
[02:02:34] *** Joins: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au)
[02:05:01] *** Quits: spacenautx (~spacenaut@user/spacenautx) (Ping timeout: 272 seconds)
[02:06:35] *** Joins: spacenautx (~spacenaut@user/spacenautx)
[02:11:21] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[02:11:56] *** Joins: MrZeus__ (~MrZeus@185.248.85.10)
[02:12:41] *** Quits: spacenautx (~spacenaut@user/spacenautx) (Ping timeout: 256 seconds)
[02:13:31] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[02:14:27] *** Joins: spacenautx (~spacenaut@user/spacenautx)
[02:15:03] *** Quits: spacenautx (~spacenaut@user/spacenautx) (Max SendQ exceeded)
[02:15:46] *** Quits: MrZeus_ (~MrZeus@185.195.232.164) (Ping timeout: 272 seconds)
[02:19:12] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 256 seconds)
[02:20:54] *** Joins: spacenautx (~spacenaut@user/spacenautx)
[02:23:15] *** Joins: zeden (~zeden@user/zeden)
[02:23:29] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[02:23:39] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::82dc)
[02:25:47] <gambl0re> i backed up my cloud postgres db but when I try to restore it keep getting ERROR:  must be owner of table <table_name>
[02:26:02] <gambl0re> what can I do about this? please advise. thanks
[02:26:35] <peerce> what commands did you use to back it up and restore it, and where are you restoring it to?
[02:26:54] *** Joins: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29)
[02:27:29] <gambl0re> im using pgadmin4 to backup up. I save the schema i want to backup as plain file and leave the rest of the options default
[02:28:01] <gambl0re> then i restore ala \i /home/gmabl0rejw/backups/auth
[02:28:07] <gambl0re> via psql
[02:28:07] <peerce> does this database use multiple user roles with permissions assigned per table, or is it just all one user ?
[02:28:23] <gambl0re> i believe it has more than one role
[02:28:38] <gambl0re> im using supabase postgres db
[02:28:39] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[02:28:41] <peerce> leave beliefs for religions, and confirm
[02:28:45] <peerce> i have no idea what that is.
[02:28:54] <gambl0re> ok i'll elsewhere then. thanks
[02:29:03] <crunchy_david> peerce: ha! that was it, thanks for the double-check
[02:29:04] *** Quits: fcr (~fran@r167-60-118-111.dialup.adsl.anteldata.net.uy) (Ping timeout: 272 seconds)
[02:29:28] <gambl0re> anyways if anyobody knows how to handle my issue, please ping me or pm me.
[02:29:30] <gambl0re> thanks
[02:29:41] *** Quits: iliv (~iliv@user/iliv) (Ping timeout: 256 seconds)
[02:31:14] <crunchy_david> if you're curious, gist has been updated with the working version
[02:33:22] *** Quits: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net) (Ping timeout: 256 seconds)
[02:33:51] *** Joins: fcr (~fran@r167-60-99-233.dialup.adsl.anteldata.net.uy)
[02:34:11] *** evdubs_ is now known as evdubs
[02:34:41] *** Joins: tc__ (~tc@103-140-203-11.vic.as139284.net.au)
[02:38:34] *** Quits: tc_ (~tc@103-140-203-11.vic.as139284.net.au) (Ping timeout: 272 seconds)
[02:40:36] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Ping timeout: 240 seconds)
[02:41:52] <Bilge> If I neither commit nor roll back a transaction, why does it get committed? Does it commit by default or something?
[02:42:35] <StuckMojo> gambl0re: the problem is that you don't have a real superuser on RDS
[02:43:18] <StuckMojo> if you add the role you're restoring as to the role that wants to or does own tablename, it'll work
[02:43:19] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[02:43:36] <crunchy_david> Bilge: if you don't explicitly create a transaction there is a single-statement transaction that is created
[02:43:41] <crunchy_david> i.e., no BEGIN
[02:43:47] <StuckMojo> i.e. grant tableowner_role to dbadmin_role;
[02:44:39] <Bilge> crunchy_david, no I am always beginning a transaction, I just don't always conclude it
[02:45:07] <StuckMojo> gambl0re: run that sql as tableowner_role, before you do your restore
[02:46:47] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[02:47:08] *** Quits: xocolatl (~xocolatl@193.32.126.231) (Read error: Connection reset by peer)
[02:47:33] <crunchy_david> Bilge: you can see your own transaction's effects before it commits/rolls back; noone else can see them until you commit though
[02:48:54] <StuckMojo> Bilge: are you using a framework or ORM or something other that libpq? some drivers / frameworks will commit on disconnect as an option i think
[02:49:04] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[02:49:09] <Bilge> I don't think we're talking about the same thing. If I BEGIN but do not COMMIT, why does it commit anyway? I am not using any framework or whatever
[02:49:22] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[02:49:29] <crunchy_david> how are you determining that it commits?
[02:49:39] <Bilge> Becuase the data has changed when I subsequently query it
[02:49:43] <StuckMojo> Bilge: it DOES NOT commit
[02:49:45] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[02:49:45] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[02:49:48] <peerce> from the same connection ?
[02:49:54] <Bilge> No, from an entirely separate GUI admin tool
[02:49:59] <peerce> you have to look at it from a different connection
[02:50:42] <Bilge> I definitely am. The data has been deleted within a transaction that was never committed manually
[02:50:44] <azlev> Bilge: can you turn log_statements = 'all' in that user? Postgres indeed doesn't commit "by chance"
[02:51:13] <azlev> there is something happening and logs can reveal what's happening
[02:51:17] <StuckMojo> Bilge: in that session, right after begin, do: SET log_statement='all';
[02:51:22] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[02:51:34] *** Joins: xocolatl (~xocolatl@194.110.113.55)
[02:51:36] <Bilge> Even if I enable logs, where do I see them?
[02:51:38] <StuckMojo> then tail the log file and trace the sql coming from that PID
[02:51:52] <StuckMojo> log_destination
[02:51:57] <StuckMojo> often $data/pg_log
[02:52:18] <StuckMojo> or /var/log/postgres[ql]*
[02:52:19] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[02:52:38] <StuckMojo> depends on your packaging / distro / OS
[02:53:06] <Bilge> log_destination=stderr, so who knows since I am on Windows
[02:53:53] <StuckMojo> probably pg_log or "logfile" or the event log
[02:54:02] <StuckMojo> google where does postgres on window log to
[02:54:06] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 245 seconds)
[02:54:07] <azlev> Bilge: well, we need logs to help you
[02:54:43] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: ncwbqcfe)
[02:54:56] <peerce> it definitely does not use the windows event log, thats too high in overhead
[02:55:40] <xocolatl> it does if configured for it
[02:55:59] <xocolatl> Bilge: what is logging_collector set to?
[02:56:25] <Bilge> "on"
[02:56:38] <xocolatl> select pg_current_logfile();
[02:59:12] <Bilge> log/postgresql-2022-02-22_000000.log
[02:59:26] <Bilge> I can find that file
[02:59:28] <StuckMojo> so $datadir/log/ that
[02:59:43] <StuckMojo> show data_directory;
[02:59:52] <Bilge> Driver vendor I'm using just confirmed that calling close() on the connection invokes commit instead of rollback
[03:00:29] <StuckMojo> bingo
[03:00:43] <StuckMojo> that's a pretty stupid default. can it be configured?
[03:01:37] *** Joins: wowi42130 (~wowi42@46.252.181.68)
[03:01:52] <Bilge> No, the destructor will call it automatically on any connection left open
[03:02:07] *** Quits: wowi42130 (~wowi42@46.252.181.68) (Remote host closed the connection)
[03:02:26] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:03:00] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:03:24] <StuckMojo> well that's super dangerous. what POS driver is this?
[03:03:27] *** Quits: wowi4213 (~wowi42@185.42.117.170) (Quit: Going to hibernate)
[03:03:31] <StuckMojo> so i know never to use it
[03:03:40] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:03:41] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:03:54] *** Quits: tkonto (~tkonto@188.4.208.136.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[03:04:11] <Bilge> The log isn't really helpful. It shows LOG:  statement: COMMIT but gives no indication as to where or why it's happening
[03:04:38] <Bilge> Well we're talking about fixing it now lol
[03:04:46] <Bilge> But since you asked... https://github.com/amphp/postgres/
[03:04:51] <peerce> well, that shows indeed something is sending a COMMIT to the server, and if its not you, its your library.
[03:05:07] *** Joins: wowi42130 (~wowi42@185.42.117.170)
[03:06:31] <StuckMojo> Bilge: oh god, PHP?! :P
[03:06:33] <StuckMojo> no wonder
[03:07:36] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:07:56] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:07:57] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Ping timeout: 240 seconds)
[03:09:29] <gambl0re> StuckMojo: what do you mean i dont have a real superuser?
[03:09:35] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:09:43] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:09:55] <xocolatl> which part don't you understand?
[03:10:31] <StuckMojo> gambl0re: in RDS, the admin user they give you is not an actual superuser (just look at the output of \du)
[03:10:54] <StuckMojo> so you can't assign ownership of objects to roles you're not a member of
[03:10:59] <gambl0re> are you talking about aws?
[03:11:00] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:11:01] <peerce> i thought he said he was on supabase, i have no idea what that does.
[03:11:02] <gambl0re> im not using aws
[03:11:39] <xocolatl> this is not a supabase channel
[03:11:53] <StuckMojo> gambl0re: yeah. you said cloud, so i ass-u-med. ok what cloud then? but i can almost guarantee it's the same problem, because that's the message you get
[03:12:08] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:12:15] *** Joins: schinckel (uid38120@user/schinckel)
[03:12:16] <gambl0re> StuckMojo: that's cool. thanks for your help
[03:13:12] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:13:17] <StuckMojo> gambl0re: in any case, it means the role that is executing the restore is trying to do something that requires it to be a member of the role it's trying to assign. this often comes from the ALTER TABLE i_just_created SET OWNER TO foo;
[03:13:18] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:13:30] <StuckMojo> if the user running the restore is not a member of foo role, you get that error
[03:13:40] <Bilge> In a transaction, shouldn't it theoretically be possible to delete a row and then select it? I mean, the row hasn't actually been deleted yet, so other transactions can read it, but can't the current one also somehow?
[03:13:45] *** Joins: trowski (~trowski@173.225.146.47)
[03:13:51] *** Quits: spacenautx (~spacenaut@user/spacenautx) (Quit: WeeChat 3.4)
[03:13:57] <xocolatl> it has logically been deleted
[03:14:07] <gambl0re> StuckMojo: yea that makes sense. the full error is ERROR:  must be member of role "supabase_admin"
[03:14:18] <xocolatl> Bilge: so no, you can't select it from the transaction that deleted it
[03:14:19] <gambl0re> they dont give access to supabase_admin i believe
[03:14:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[03:14:43] <Bilge> xocolatl: and there's absolutely no way to override that behaviour?
[03:14:48] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:14:49] <xocolatl> of course not
[03:14:50] <StuckMojo> gambl0re: figure out what SQL is generating that error. you might be able to just ignore it
[03:14:53] <xocolatl> select before deleting
[03:14:55] <Bilge> OK
[03:14:56] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:14:58] <ilmari> Bilge: no, you can't violate causality
[03:15:04] <gambl0re> but i managed to backup the db by not saving the Owner when backing up
[03:15:17] <StuckMojo> Bilge: or user DELETE ... RETURNING *;
[03:15:28] <gambl0re> and was able to successfully restore
[03:15:29] <ilmari> Bilge: just becaus the deletion hasn't made it to other obesrvers yet doesn't mean it hasn't happened
[03:15:34] <gambl0re> just not sure what the implications might be
[03:15:44] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:15:52] <StuckMojo> gambl0re: again, look at what statement it's erroring on
[03:16:03] <StuckMojo> and that should clue you in to whether it's important or not
[03:16:08] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:16:34] <StuckMojo> you can grant * on whatever to supabase_admin; so it still has access at least. you just can't assign the ownership
[03:16:47] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:19:07] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[03:19:36] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Client Quit)
[03:22:13] *** Joins: iliv (~iliv@93-77-147-152.lvv.volia.net)
[03:25:21] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[03:25:26] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 272 seconds)
[03:25:29] <gambl0re> i pm'd you the logs
[03:25:31] <gambl0re> it looks like it's trying to alter some privileges
[03:26:55] <StuckMojo> gambl0re: if you do psql -E it will echo back each sql statement it runs
[03:26:58] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[03:27:04] <StuckMojo> so you can see what the sql is that't generating the error
[03:27:27] <StuckMojo> or you can just look at line 1545
[03:27:42] <StuckMojo> as you can see it reports the line number generating the error
[03:31:17] *** Quits: fab23 (fabian@2001:8a8:1005:1::3) (Ping timeout: 240 seconds)
[03:32:32] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[03:32:37] *** Quits: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr) (Ping timeout: 240 seconds)
[03:33:37] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 240 seconds)
[03:34:02] *** Joins: fab23 (fabian@62.12.173.3)
[03:35:24] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[03:35:36] *** Joins: sakasama (~sakasama@user/sakasama)
[03:41:14] *** Quits: trowski (~trowski@173.225.146.47) (Quit: Client closed)
[03:41:26] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[03:44:00] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662)
[03:44:03] *** Joins: trowski (~trowski@173.225.146.47)
[03:45:12] *** Joins: zlinux_ (~zlinux@149.109.5.231)
[03:46:28] *** Quits: Slade (uid128877@user/slade) (Quit: Connection closed for inactivity)
[03:48:26] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7d8d:4f3:5584:8662) (Ping timeout: 260 seconds)
[03:48:52] *** Quits: zlinux[] (~zlinux@142.247.7.201) (Ping timeout: 272 seconds)
[03:50:23] *** Quits: bsliger (~bsliger@ip68-97-47-19.ok.ok.cox.net) (Quit: Unexpected signal 11)
[03:51:00] *** Quits: Reiner_Unsinn (~quassel@ip-092-050-086-254.um29.pools.vodafone-ip.de) (Ping timeout: 240 seconds)
[03:51:44] *** Joins: compscipunk (~compscipu@107-214-234-232.lightspeed.sndgca.sbcglobal.net)
[03:52:07] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[03:54:46] *** Joins: funhouse (~funhouse@user/funhouse)
[03:54:49] <funhouse> so i rebooted my server and trying to login via psql
[03:54:50] <funhouse> psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  Peer authentication failed for user "postgres"
[03:55:00] <funhouse> so i rebooted my server and trying to login via psql
[03:55:01] <funhouse> psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  Peer authentication failed for user "postgres"
[03:57:06] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 272 seconds)
[03:59:07] *** Quits: trowski (~trowski@173.225.146.47) (Quit: Ping timeout (120 seconds))
[04:00:34] <compscipunk> hello everybody... just curious if anybody is having an issue with the pgadmin4 6.5 users popup window not popping up?
[04:00:41] <peerce> funhouse:   thats just running psql with no arguments as the system postgres user ?
[04:02:22] *** Parts: Caerus (~Caerus@170.246.157.60) (Leaving)
[04:04:31] *** Quits: maxzor_ (~maxzor@2a01cb04054faa00156861a741d5de6c.ipv6.abo.wanadoo.fr) (Ping timeout: 245 seconds)
[04:05:03] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[04:05:28] <funhouse> peerce psql -U postgres
[04:06:50] <compscipunk> just i should have just done this before asking...but rolled back to 6.4 and get the users popup... i didn't see it in the bug list so i thought it was just me...or might still be...
[04:07:31] <peerce> funhouse; try sudo -u postgres psql
[04:08:16] <funhouse> peerce boom thank you
[04:10:08] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[04:10:16] <peerce> once in,    CREATE USER yourname SUPERUSER PASSWORD 'newpassword';   CREATE DATABASE yourname OWNER yourname;
[04:10:29] <peerce> where yourname is your regular unix/linux shell user name.
[04:10:34] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[04:10:45] <peerce> after that, you should be able to just run `psql` from shell
[04:11:20] <funhouse> peerce ok will do now
[04:12:08] *** Joins: impermanence (~impermane@c-75-73-193-204.hsd1.mn.comcast.net)
[04:14:11] <funhouse> peerce thank you again sir
[04:15:47] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[04:18:31] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8)
[04:22:15] *** Joins: zachxz (~zachary@124.133.18.218)
[04:26:27] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[04:27:02] *** Joins: cliluw (~cliluw@47.147.77.43)
[04:28:37] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[04:34:44] *** Joins: Auron956 (Auron956@user/auron)
[04:35:17] *** Quits: Auron (Auron956@user/auron) (Ping timeout: 250 seconds)
[04:36:37] <cliluw> What are the downsides of having idle connections lying around in my Postgres server?
[04:39:48] *** Quits: op2 (~op2@user/op2) (Ping timeout: 240 seconds)
[04:40:19] <nbjoerg> they consume resources
[04:40:49] <nbjoerg> and if they are idle in transaction, they can block various clean ups from happening
[04:43:44] <cliluw> For idle in transaction connections, do they only block vacuuming on the tables that that transaction has queried or on all tables in the database?
[04:43:58] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[04:44:01] <mst> cliluw: because postgres uses a forking rather than threading model, a heavily used connection that then becomes idle can sit around with more memory allocated than one might otherwise prefer, but while I would want to make sure that my app code can auto-reconnect if it's necessary, I wouldn't worry too much about letting it stay connected
[04:44:02] <peerce> nothing newer than the oldest open transaction can be vacuumed
[04:44:30] <mst> if your app is leaving connections open with a transaction active, your app is broken and it's time to summon a small gnome to hit the deeloper with a mallet
[04:44:58] <peerce> a large troll with said mallet is more effective.
[04:45:19] <mst> yes, but not everybody wants to pay my consulting rates
[04:46:44] <cliluw> peerce: That's what I kinda suspected, but I've noticed I can manually run VACUUM on the tables that idle transaction has seen and dead tuples get cleaned up.
[04:46:45] *** Quits: dob1 (~dob1@user/dob1) (Quit: quit)
[04:48:23] <mst> cliluw: only the ones that became dead before that transaction started
[04:48:33] <nbjoerg> but make sure first that they *are* idle in transation
[04:48:43] *** Joins: dob1 (~dob1@user/dob1)
[04:49:06] <mst> sure, it's always polite to give it ten minutes before you shoot the connection and/or the developer in the head
[04:51:22] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[04:51:38] <cliluw> Pivoting back to truly idle connections (not idle in transaction), the FOSDEM 2022 talk called "Slow things down to make them go faster" said that many connections can cause things to be slower due to LWLocks. That only applies to active connections, right? I don't see how idle connections could be contending for LWLocks.
[04:52:06] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[04:52:56] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[04:54:38] *** Quits: dob1 (~dob1@user/dob1) (Quit: quit)
[04:55:04] *** Joins: carragom (~textual@201.204.94.76)
[04:57:18] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[05:00:17] *** Joins: dob1 (~dob1@user/dob1)
[05:00:57] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[05:01:06] *** Quits: davidfetter_work (~davidfett@c-73-252-148-184.hsd1.ca.comcast.net) (Quit: leaving)
[05:03:51] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 252 seconds)
[05:04:23] *** Joins: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8)
[05:07:03] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[05:07:06] *** Joins: xocolatl_ (~xocolatl@194.110.113.39)
[05:07:08] *** Quits: Atque (~Atque@user/atque) (Remote host closed the connection)
[05:08:15] *** Joins: Atque (~Atque@user/atque)
[05:08:23] *** Quits: Auron956 (Auron956@user/auron) (Remote host closed the connection)
[05:09:46] *** Quits: xocolatl (~xocolatl@194.110.113.55) (Ping timeout: 256 seconds)
[05:11:22] *** Joins: jbg (~jbg@user/jbg)
[05:15:17] <funhouse> Getting this error when trying to do an insert --> PHP Fatal error:  Uncaught PDOException: SQLSTATE[22021]: Character not in repertoire: 7 ERROR:  invalid byte sequence for encoding "UTF8": 0xc9 0x42
[05:19:18] <peerce> well, if your database is encoded in UTF8, and you send stuff thats NOT UTF8, thats exactly what you get.
[05:20:04] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 272 seconds)
[05:20:14] <peerce> C9 42 is not valid UTF8
[05:20:45] <peerce> so what character encoding is your php data in ?
[05:20:49] <funhouse> peerce hmm ok grabbing from a csv file
[05:21:00] <funhouse> Im just going to do a COPY
[05:21:07] <peerce> what encoding is the CSV file in ?
[05:22:01] <funhouse> Hmm dame error
[05:22:03] <funhouse> same
[05:22:05] <funhouse> How do I check?
[05:22:21] <peerce> um, someone or something wrote that CSV file, what encoding was it using ?
[05:22:37] <funhouse> Uh file command
[05:22:40] <funhouse> Ah*
[05:22:56] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[05:23:04] <funhouse> I get this
[05:23:05] <funhouse> PCCF.csv: CSV text
[05:23:09] <peerce> in ISO 8859-1,  C9 is É, 42 is B
[05:23:10] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[05:24:17] *** Joins: hojasuelta (~hojasuelt@50.34.135.134)
[05:24:34] <funhouse> ah french letter
[05:24:36] <funhouse> govt of canada csv
[05:25:36] <funhouse> peerce should I change encoding of table?
[05:25:40] <peerce> french could use utf8 or iso8859-15 or I dunno what
[05:25:56] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:79d5:13cf:61dc:c362)
[05:26:51] <funhouse> Ok got the encoding of the csv
[05:26:52] <funhouse> PCCF.csv: iso-8859-1
[05:27:10] <funhouse> I guess convert to UTF 8?
[05:27:13] *** Joins: carragom (~textual@201.204.94.76)
[05:27:20] <peerce> I believe there's a way to get COPY to convert hat on the fly to UTF8
[05:27:34] *** Quits: carragom (~textual@201.204.94.76) (Read error: Connection reset by peer)
[05:27:36] <funhouse> ok searching
[05:27:41] *** Joins: cliluw (~cliluw@47.147.77.43)
[05:27:59] <peerce> yes, COPY table FROM ....   ENCODING 'UTF8'
[05:28:15] <peerce> err, I mean, ENCODING 'ISO8859-1'
[05:28:30] *** Quits: cliluw (~cliluw@47.147.77.43) (Read error: Connection reset by peer)
[05:29:17] *** Quits: turlando (~turlando@user/turlando) (Ping timeout: 240 seconds)
[05:30:23] *** Joins: cliluw (~cliluw@47.147.77.43)
[05:30:28] <funhouse> \COPY pccf FROM /home/ubuntu/PCCF.csv WITH CSV HEADER ENCODING 'UTF8';
[05:30:42] <funhouse> ERROR:  invalid byte sequence for encoding "UTF8": 0xc9 0x42
[05:30:42] <funhouse> CONTEXT:  COPY pccf, line 2
[05:30:53] <peerce> no, you want encoding 'ISO8859-1',   the TABLE is already in utf8
[05:30:57] <funhouse> ahhhhh
[05:31:26] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:79d5:13cf:61dc:c362) (Ping timeout: 250 seconds)
[05:31:40] <peerce> AKA encoding 'LATIN1'
[05:33:59] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[05:35:49] <funhouse> Darn, new error
[05:35:54] *** Quits: MrZeus__ (~MrZeus@185.248.85.10) (Ping timeout: 272 seconds)
[05:35:55] <funhouse> postalcode,pruid,prname,cduid,cdname,cdtype,ccsuid,ccsname,csduid,csdname,csdtype,cmauid,cmapuid,cmaname,cmatype,lon,lat,dbuid,urban,poc_apt,poc_biz,poc_houses,poc_farms
[05:36:06] <funhouse> H9W6C9,24,QUEBEC / QU▒BEC,2466,MONTR▒AL,T▒,2466023,MONTR▒AL,2466107,BEACONSFIELD,V,462,24462,MONTR▒AL,B,-73.85805,45.43322,24662300008,MOSTLY URBAN HOMES,0,0,38,0
[05:36:23] <funhouse> ERROR:  invalid input syntax for type integer: "H9W6C9"
[05:36:24] <funhouse> CONTEXT:  COPY pccf, line 2, column id: "H9W6C9"
[05:37:23] *** Quits: Guest6792 (~vit@chello085216193138.chello.sk) (Ping timeout: 252 seconds)
[05:37:43] <peerce> is H9W5C9 a field in your table ?  or is that a value, it looks like its the first value on the 2nd line of your input as shown
[05:37:49] *** Quits: f3f3lix (~weechat@55d4a229.access.ecotel.net) (Ping timeout: 256 seconds)
[05:37:57] <peerce> which correlates to postalcode ?
[05:38:09] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[05:38:10] <funhouse> first field
[05:38:18] <peerce> what type is that field ?
[05:38:18] <funhouse> first value
[05:38:23] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[05:38:23] <funhouse> varchar(128)
[05:38:29] <funhouse> ill post schema
[05:38:50] <peerce> well, varchar is certainly not INTEGER
[05:39:10] <funhouse> https://pastebin.com/TD8aLwgu
[05:39:13] <funhouse> Neither is that string?
[05:39:32] *** Joins: f3f3lix (~weechat@55d410a1.access.ecotel.net)
[05:39:39] <peerce> your table starts with an integer id
[05:39:46] <peerce> and your data doesn't ?
[05:40:38] <peerce> so \copy pccf(postalcode,pruid,prname,........) FROM ....
[05:40:53] <peerce> eg, list the columns that are in your CSV file.
[05:43:11] <funhouse> peerce thank you so much again very much appreciated
[05:46:57] *** Quits: Su-Shee (~Susanne@p4ffc7ded.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[05:48:53] *** Joins: Su-Shee (~Susanne@p4ffc7ff3.dip0.t-ipconnect.de)
[06:04:37] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[06:05:03] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Killed (NickServ (GHOST command used by Nekomander)))
[06:05:09] *** Nekomander is now known as BadAdviceCat
[06:06:40] *** Quits: justAstache (~justache@user/justache) (Read error: Connection reset by peer)
[06:07:48] *** Joins: justAstache (~justache@user/justache)
[06:10:42] *** Quits: sakasama (~sakasama@user/sakasama) (Remote host closed the connection)
[06:17:13] *** Quits: hojasuelta (~hojasuelt@50.34.135.134) (Remote host closed the connection)
[06:19:51] *** Joins: tachoknight (~tachoknig@2600:1700:3060:3ee0:8056:1ade:4b1a:57e6)
[06:21:50] *** Joins: hojasuelta (~hojasuelt@50.34.135.134)
[06:22:01] *** Joins: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[06:24:18] *** Quits: tachoknight (~tachoknig@2600:1700:3060:3ee0:8056:1ade:4b1a:57e6) (Ping timeout: 250 seconds)
[06:26:12] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[06:26:33] *** Quits: hojasuelta (~hojasuelt@50.34.135.134) (Ping timeout: 256 seconds)
[06:30:14] *** Quits: n0fun_ (~jack@mue-88-130-48-171.dsl.tropolys.de) (Ping timeout: 256 seconds)
[06:34:53] *** Joins: ffl^ (~ffl@50-202-219-146-static.hfc.comcastbusiness.net)
[06:35:37] *** Quits: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au) (Ping timeout: 256 seconds)
[06:38:27] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[06:38:39] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: ncwbqcfe)
[06:41:28] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[06:42:11] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[06:43:26] *** Quits: dob1 (~dob1@user/dob1) (Quit: quit)
[06:44:12] *** Joins: dob1 (~dob1@user/dob1)
[06:48:22] *** Quits: peteyboy1 (~peteyboy1@95.169.226.66) (Ping timeout: 256 seconds)
[06:52:16] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[06:54:49] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:79d5:13cf:61dc:c362)
[06:59:17] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:79d5:13cf:61dc:c362) (Ping timeout: 240 seconds)
[07:00:08] *** Quits: Vacuity (~Vacuity@user/vovo) (Ping timeout: 272 seconds)
[07:00:16] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[07:01:08] *** Joins: maxzor_ (~maxzor@2a01cb04054faa00bfe089f997f98338.ipv6.abo.wanadoo.fr)
[07:01:10] *** Joins: Vacuity (~Vacuity@user/vovo)
[07:01:29] *** Quits: maxzor_ (~maxzor@2a01cb04054faa00bfe089f997f98338.ipv6.abo.wanadoo.fr) (Read error: Connection reset by peer)
[07:01:32] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:01:48] *** Joins: maxzor_ (~maxzor@2a01cb04054faa00bfe089f997f98338.ipv6.abo.wanadoo.fr)
[07:02:32] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:07:29] *** Joins: Azem (~haise01@user/haise01)
[07:07:44] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 272 seconds)
[07:08:36] *** Quits: maxzor_ (~maxzor@2a01cb04054faa00bfe089f997f98338.ipv6.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[07:10:45] *** Quits: Emet-Selch (~haise01@user/haise01) (Ping timeout: 256 seconds)
[07:15:04] *** Quits: CodeMouse92 (~CodeMouse@user/codemouse92) (Quit: Oh freddled gruntbuggly | Thy micturations are to me | As plurdled gabbleblotchits | On a lurgid bee)
[07:15:13] *** Quits: dob1 (~dob1@user/dob1) (Quit: quit)
[07:15:33] *** Joins: dob1 (~dob1@user/dob1)
[07:18:20] *** Quits: tozhu (~tozhu@180.168.6.186) (Quit: tozhu)
[07:20:09] *** Joins: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29)
[07:20:27] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[07:20:30] *** Joins: hojasuelta (~hojasuelt@50.34.135.134)
[07:20:45] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[07:25:28] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 272 seconds)
[07:33:18] *** Joins: sakasama (~sakasama@user/sakasama)
[07:36:01] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:79d5:13cf:61dc:c362)
[07:38:54] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[07:40:22] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:79d5:13cf:61dc:c362) (Ping timeout: 260 seconds)
[07:42:03] *** Quits: sreve (~quassel@p4ff44fcc.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[07:42:23] *** Joins: sreve (~quassel@p549d70eb.dip0.t-ipconnect.de)
[07:42:57] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8) (Ping timeout: 240 seconds)
[07:45:48] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:46:27] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 256 seconds)
[07:47:28] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:48:06] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:9981:2aec:efef:695f)
[07:48:07] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:52:32] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:9981:2aec:efef:695f) (Ping timeout: 240 seconds)
[07:52:41] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[07:55:22] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:55:30] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:56:07] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:57:55] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:58:10] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:59:59] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[08:00:27] *** Quits: hojasuelta (~hojasuelt@50.34.135.134) ()
[08:00:42] *** Quits: libsys (~libsys@186.105.130.50) (Read error: Connection reset by peer)
[08:03:00] *** Quits: aremaref_ (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[08:06:25] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[08:06:40] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[08:07:16] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 272 seconds)
[08:08:29] *** Quits: tehenderz (~tehenderz@ti0018a400-5433.bb.online.no) (Ping timeout: 250 seconds)
[08:09:06] *** Joins: tehenderz (~tehenderz@ti0018a400-6465.bb.online.no)
[08:11:32] *** Joins: libsys (~libsys@186.105.187.237)
[08:13:47] *** Joins: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[08:15:24] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[08:15:44] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[08:15:58] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[08:23:24] *** Joins: ba|ch (~user@p200300f3a70c0d1cdba383149229a723.dip0.t-ipconnect.de)
[08:36:57] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[08:37:00] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[08:37:39] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[08:38:51] *** Joins: mattil (~mattil@helsinki.portalify.com)
[08:39:48] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22)
[08:42:44] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 272 seconds)
[08:44:12] *** Joins: ur5us_ (~ur5us@203.86.198.200)
[08:45:29] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Read error: Connection reset by peer)
[08:46:01] *** Quits: libsys (~libsys@186.105.187.237) (Read error: Connection reset by peer)
[08:54:13] *** Joins: libsys (~libsys@186.105.187.237)
[08:54:27] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[09:04:42] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[09:11:06] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[09:11:10] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 256 seconds)
[09:11:37] *** Quits: pvn1 (~Adium@85-195-230-32.fiber7.init7.net) (Quit: Leaving.)
[09:15:00] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 240 seconds)
[09:15:25] *** Quits: xinming (~xinming@115.221.15.154) (Ping timeout: 256 seconds)
[09:15:48] *** Joins: xinming (~xinming@115.221.15.154)
[09:24:12] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[09:24:15] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[09:30:54] *** Joins: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr)
[09:31:00] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 240 seconds)
[09:32:28] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:35:54] *** Quits: Giovanni (~Giovanni@176.67.166.45) (Read error: Connection reset by peer)
[09:35:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[09:37:23] *** Quits: opcode (~opcode@user/opcode) (Quit: hopefully not k:lined)
[09:41:18] *** Joins: Giovanni (~Giovanni@176.67.166.45)
[09:42:55] *** Joins: eroux (~eroux@102-65-85-242.ftth.web.africa)
[09:43:25] *** Joins: nattiestnate (~nate@182.2.41.240)
[09:46:36] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[09:52:07] *** Joins: mexen (uid495612@user/mexen)
[09:59:00] *** Quits: xinming (~xinming@115.221.15.154) (Ping timeout: 240 seconds)
[09:59:15] *** Joins: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz)
[09:59:23] *** Joins: xinming (~xinming@115.221.15.154)
[10:00:28] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[10:05:45] *** Joins: zlinux[] (~zlinux@149.109.5.231)
[10:06:59] *** Quits: ur5us_ (~ur5us@203.86.198.200) (Ping timeout: 272 seconds)
[10:08:58] *** Quits: zlinux_ (~zlinux@149.109.5.231) (Ping timeout: 256 seconds)
[10:11:14] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 256 seconds)
[10:13:54] <ksynwa> Can an insert query have multiple ON CONFLICT DO... clauses? For example if I want to specify a strategy for conflict on (id) and another for conflict on (name, age).
[10:15:11] <peerce> no, I don't believe it can, because that rapidly becomes a huge mess
[10:16:25] <ksynwa> Got it. Thanks.
[10:18:02] *** Joins: darutoko (~darutoko@176.209.242.81)
[10:19:38] *** Quits: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[10:20:55] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[10:20:58] *** Quits: esainane (esainane@antihype.space) (Read error: Connection reset by peer)
[10:22:04] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[10:22:29] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[10:23:03] *** Joins: shka (~herr@109.231.3.55)
[10:26:08] *** Joins: ejjfunky (~ejjfunky@125.164.22.233)
[10:27:33] *** Quits: ba|ch (~user@p200300f3a70c0d1cdba383149229a723.dip0.t-ipconnect.de) (Remote host closed the connection)
[10:27:37] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:5014:69b3:7a23:e16d) (Ping timeout: 240 seconds)
[10:27:50] *** Joins: the_lanetly_052 (~the_lanet@185.30.90.255)
[10:28:37] *** Quits: the_lanetly_052 (~the_lanet@185.30.90.255) (Max SendQ exceeded)
[10:29:04] *** Joins: the_lanetly_052 (~the_lanet@194.135.154.63)
[10:29:45] *** Joins: manti7 (~manti7@176.10.104.94)
[10:34:51] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:1dba:8fb7:d7e0:4473)
[10:39:32] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:1dba:8fb7:d7e0:4473) (Ping timeout: 250 seconds)
[10:44:14] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::82dc) (Ping timeout: 260 seconds)
[10:46:38] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2489:b809:811:b373)
[10:47:13] *** Joins: odnes (~odnes@5-203-186-235.pat.nym.cosmote.net)
[10:47:52] *** Joins: esainane (esainane@antihype.space)
[10:48:30] *** Joins: mrwick (~mrwick@user/mrwick)
[10:49:05] *** Quits: libsys (~libsys@186.105.187.237) (Read error: Connection reset by peer)
[10:49:34] *** Quits: odnes (~odnes@5-203-186-235.pat.nym.cosmote.net) (Client Quit)
[10:51:14] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:2489:b809:811:b373) (Ping timeout: 260 seconds)
[10:55:28] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[10:58:17] *** Joins: libsys (~libsys@186.105.187.237)
[11:04:51] *** Joins: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au)
[11:06:36] *** Quits: pglife_bot (~pglife@momjian.us) (Ping timeout: 245 seconds)
[11:08:28] *** Quits: bmomjian1 (~bruce@momjian.us) (Ping timeout: 256 seconds)
[11:08:57] *** Joins: bmomjian (~bruce@momjian.us)
[11:09:30] *** Joins: lkw (~lkw@user/lkw)
[11:09:32] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Remote host closed the connection)
[11:11:00] *** Joins: pglife_bot (~pglife@momjian.us)
[11:11:58] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[11:14:21] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:91af:f92e:54e4:10a3)
[11:15:05] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[11:16:35] *** Joins: ur5us_ (~ur5us@203.86.198.200)
[11:18:58] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:91af:f92e:54e4:10a3) (Ping timeout: 250 seconds)
[11:20:12] *** Joins: palasso (~palasso@user/palasso)
[11:21:04] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[11:21:39] *** Joins: tkonto (~tkonto@188.4.208.136.dsl.dyn.forthnet.gr)
[11:22:19] *** Quits: nattiestnate (~nate@182.2.41.240) (Quit: WeeChat 3.4)
[11:23:23] *** Joins: fercell (~ferr@45.82.33.220)
[11:24:55] <daffy951> custom set_config parameters can't begin with underscore anymore? (moving some stuff from 13.5 -> 14.2)
[11:25:21] <daffy951> (getting ERROR: invalid configuration parameter name ...)
[11:25:45] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[11:27:10] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[11:27:41] <Myon> huh
[11:27:41] *** Joins: Klinda (~superleag@user/klinda)
[11:28:20] <Myon> ERROR:  42602: invalid configuration parameter name "_foo._bar"
[11:28:20] <Myon> DETAIL:  Custom parameter names must be two or more simple identifiers separated by dots.
[11:28:58] *** Joins: rendar (~rendar@user/rendar)
[11:29:00] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Read error: Connection reset by peer)
[11:29:46] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[11:30:08] <peerce> 14.0 release notes:   Require custom server parameter names to use only characters that are valid in unquoted SQL identifiers (Tom Lane)
[11:30:39] <peerce> you'll probably need to research that one on postgresql-hackers archives
[11:30:50] *** Joins: gleu (~guillaume@2a01cb0c046d4500986de48660e05ed5.ipv6.abo.wanadoo.fr)
[11:30:50] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[11:30:50] *** Joins: iliv (~iliv@user/iliv)
[11:31:38] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[11:31:59] <peerce> phew thats a huge list https://why-upgrade.depesz.com/show?from=13.6&to=14&keywords=
[11:32:16] *** Quits: Komzzpa (~kom@46.216.152.219) (Ping timeout: 256 seconds)
[11:32:49] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[11:33:19] *** Joins: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:20c1:6c11:2939:5b5d)
[11:37:05] *** Joins: Slade (uid128877@user/slade)
[11:37:55] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:91af:f92e:54e4:10a3)
[11:40:23] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 252 seconds)
[11:42:29] *** Joins: psoo (~psoo@dslb-090-186-134-090.090.186.pools.vodafone-ip.de)
[11:43:12] <maret> how does update foo as f set bar = v.bar from (values (1,2,3),(2,3,4)) as v ('col1','col2','col3') works? How does this make sure correct rows are updated ? In  my case I am updating values in col 2
[11:43:39] *** Quits: marcel (~marcel@user/marcel) (Quit: The Lounge - https://thelounge.chat)
[11:43:53] *** Quits: led_belly (~led_belly@37.120.197.44) (Ping timeout: 256 seconds)
[11:44:33] *** Joins: marcel (~marcel@user/marcel)
[11:45:07] <Myon> _ is valid in sql identifiers
[11:46:22] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[11:48:18] *** Quits: lkw (~lkw@user/lkw) (Ping timeout: 272 seconds)
[11:48:49] <daffy951> Ok.. Do I understand it correctly that it's unexpected that it fails for me then?
[11:49:59] *** Joins: lkw (~lkw@user/lkw)
[11:50:30] *** Quits: lkw (~lkw@user/lkw) (Remote host closed the connection)
[11:50:33] *** Joins: led_belly (~led_belly@37.120.197.44)
[11:52:12] *** Quits: SAS (~SAS@mail.loxodata.com) (Quit: ZNC - http://znc.sourceforge.net)
[11:53:21] *** Joins: op2 (~op2@user/op2)
[11:54:41] <brekken> I'm looking to rewrite/refactor the contents of a jsonb column in a table that has 2M rows. The operation takes too long in a single transaction. What are my options? The update is simply UPDATE mytable SET jsoncol = jsonb_build_object(...contents depends on previous contents..). It doesn't have to be done atomically, so some sort of batching mechanism would work well
[11:54:50] *** Joins: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi)
[11:54:57] <Myon> daffy951: git 3db826bd5, "_" seems like an omission
[11:56:04] <Berge> brekken: Is there a question here too? (-:
[11:56:38] *** Quits: ur5us_ (~ur5us@203.86.198.200) (Ping timeout: 256 seconds)
[11:56:59] <Berge> Also, when you say refactor a jsonb column, that often means refactoring into normalsied columns instead
[11:57:11] <Myon> daffy951: I'd report that on pgsql-bugs or -hackers
[11:57:17] <daffy951> ok, thanks!
[11:57:24] <Myon> the https://www.postgresql.org/message-id/flat/1477413.1613068373%40sss.pgh.pa.us#306b052df55197f80b79980b6f329928 didn't mention _
[11:57:28] <daffy951> Ah, I thought you would do it :)
[11:57:55] <Myon> daffy951: I don't want to steal your report ;) (but I can do that if you want)
[11:58:52] <Myon> ah, it does allow _ later in the name
[11:58:52] <brekken> I see, @Berge. I'm looking to change the contents of the column based on its old contents. I could do this from application code, looping over the rows, but it's slow and not terribly elegant. My next thought was to add a column "jsoncol2" and populating 10K rows at a time with update mytable set jsoncol2 = ... where id in (select id from mytable where jsoncol2 is null limit 10000) and running this repeatedly (from what?)
[11:59:18] <brekken> Then I could switch the columns around in a single tx later by dropping one and renaming the other
[12:01:56] *** Quits: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi) (Remote host closed the connection)
[12:04:02] *** Joins: Vitto (~Vitto@se-14.nat.univ-paris4.fr)
[12:04:53] <Berge> brekken: Yes, that's a resaonable approach
[12:05:11] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[12:05:26] <Berge> You mentioned "too slow" – I thought you meant just a single UPDATE for the entire table, but you meant looping over rows in application code?
[12:06:13] *** Joins: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi)
[12:07:00] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[12:07:05] *** Quits: Vitto (~Vitto@se-14.nat.univ-paris4.fr) (Client Quit)
[12:08:57] *** Joins: dminuoso (~dminuoso@user/dminuoso)
[12:09:50] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 272 seconds)
[12:10:06] <dminuoso> This might be a frequently asked question.. but between timestamp and timestamptz, what's the difference, what is it that I likely want?
[12:10:27] <dminuoso> Given that both have the same storage size, Im going to assume that timestamptz does not store any timezone information
[12:10:32] *** Joins: Vitto (~Vitto@se-14.nat.univ-paris4.fr)
[12:10:47] *** AmyMalik is now known as MelMalik
[12:11:22] <Berge> dminuoso: Use timestamptz
[12:11:31] <Berge> timestamp isn't what you think it is, and there are almost no reasons ever to use it.
[12:11:38] <Berge> ??timestamp
[12:11:39] <pg_docbot> http://it.toolbox.com/blogs/database-soup/zone-of-misunderstanding-48608 :: http://lluad.com/blog/2013/08/27/postgresql-and-iso-8601-timestamps/
[12:11:39] <pg_docbot> https://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.5#Commit_timestamp_tracking :: https://www.postgresql.org/docs/current/static/functions-info.html#FUNCTIONS-COMMIT-TIMESTAMP
[12:11:39] <pg_docbot> https://www.postgresql.org/docs/current/static/datatype-datetime.html :: https://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT
[12:11:43] <dminuoso> So presumably a value in `timestamp` will be interpreted in whatever local timezone postgresql is configured in?
[12:11:56] <Berge> dminuoso: No, it isn't interpreted as a timezone at all
[12:12:14] <Berge> timestamptz is terribly named; it's specifically _not_ a timestamp with a time zone, instead, it's a universal point in time
[12:12:17] <dminuoso> So I could think of `timestamp` as just a text field storing whatever I throw at it?
[12:12:24] <Berge> dminuoso: https://wiki.postgresql.org/wiki/Don%27t_Do_This#Don.27t_use_timestamp_.28without_time_zone.29
[12:12:44] <Berge> dminuoso: yeah, kind of
[12:13:02] *** Joins: iBelieves (~ibelieves@41.13.10.165)
[12:13:57] <Berge> dminuoso: From the wiki page I linked to above: "So if what you want to store is a point in time, rather than a picture of a clock, use timestamptz."
[12:14:19] <dminuoso> Im trying to understand the why, rather than "what to do"
[12:14:35] <Berge> Fair enough (-: Did you read the link?
[12:14:51] <zelest> I wish to store how long something takes.. I have the duration in seconds, but wonder what the best(tm) way to store it is? Should I just use an integer or is another type better suited?
[12:15:02] <Berge> zelest: Use the interval type
[12:15:11] <zelest> Ah!
[12:15:11] <Berge> That allows easy time calculations
[12:15:13] <peerce> yeah, an interval is a time duration
[12:15:20] <peerce> and has all KINDA nice time math available
[12:15:23] <dminuoso> Berge: which one of them? Im seeing.. 7.
[12:15:24] <zelest> Lovely, thanks! :D
[12:15:25] <peerce> indexable comparisions, etc
[12:15:32] <Berge> dminuoso: The last one, with the "Don't"
[12:15:53] <Berge> dminuoso: And https://www.toolbox.com/tech/data-management/blogs/zone-of-misunderstanding-092811/ for more background.
[12:15:59] *** Quits: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi) (Remote host closed the connection)
[12:16:07] <peerce> an interval can have years, months, weeks, days, hours, minutes, and seconds.
[12:16:27] <peerce> and I think microsecond resolution
[12:16:30] <dminuoso> Berge: Let me give it a stamp. Does timestamptz rezone the timestamp to UTC and then store that?
[12:16:32] <dminuoso> *stab
[12:16:34] <peerce> IIRC< its stored as 3 components
[12:16:34] *** Joins: mattil (~mattil@37-33-224-229.bb.dnainternet.fi)
[12:16:35] *** Quits: mattil (~mattil@37-33-224-229.bb.dnainternet.fi) (Read error: Connection reset by peer)
[12:16:47] <dminuoso> (And upon retrieval, give it in whatever timezone the database is configured in)
[12:16:47] *** Joins: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi)
[12:16:58] *** Quits: iBelieves (~ibelieves@41.13.10.165) (Client Quit)
[12:17:07] <Berge> dminuoso: It doesn't "rezone" as such – it takes a universal point in time, typically represented as an ISO8601 timestamp, and stores in an internal representation
[12:17:07] <peerce> dminuoso; timestamptz is input and output in the client's *current* timezone, and stored as UTC
[12:17:18] <Berge> Internally it happens to store it as UTC, but that's an irrelevant implementation detail
[12:17:19] <peerce> it rperesents an absolute point in time.
[12:17:32] <dminuoso> Berge: By "rezone" I mean do some `zonedTimeToUTC` conversion.
[12:17:37] <dminuoso> Mmm
[12:17:53] <dminuoso> But is UTC time not an absolute point in time?
[12:17:56] <Berge> it is
[12:18:06] <Berge> As is a PDT time, or CEST, or whatnot
[12:18:11] <zelest> Is there a function to convert seconds to interval?
[12:18:22] <zelest> or will I have to do that in the app?
[12:18:34] <Myon> select 1234123 * '1s'::interval
[12:18:56] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:9d4b:bf25:26b7:c649)
[12:19:06] <zelest> ah, cheers :)
[12:19:47] <Berge> dminuoso: To illustrate it: BEGIN; SET timezone = 'America/Asuncion'; SELECT NOW(); SET timezone = 'Europe/Oslo'; SELECT NOW(); ROLLBACK;
[12:20:10] <Berge> "2022-02-23 05:49:31.735359-03" and "2022-02-23 09:49:31.735359+01" are different representation of the very same universal point in time.
[12:20:15] <dminuoso> And presumably NOW() is of type timestamptz?
[12:20:20] <Berge> yep
[12:20:32] <Myon> select pg_typeof(now())
[12:20:44] <dminuoso> Berge: Alright. So with my working mind model I can imagine `timestamptz` as being `UTCTime`. That seems to work.
[12:20:50] <Berge> The string representation output of timestamptz will depend on your session's timezone parameter
[12:20:54] <Berge> But that's purely a display thing
[12:20:58] <dminuoso> yeah that makes sense
[12:21:06] <Berge> Don't think of it as UTC time
[12:21:12] <Berge> It's a universal point in time
[12:21:23] <Berge> Which can be represented for instance as UTC, or in any other time zone
[12:21:31] <peerce> yeah, if you SET timezone='America/Los_Angeles';    thats what it will show as.
[12:22:37] <kjetilho> I think UTC has leap seconds?  PostgreSQL does not, I think.
[12:22:58] <Berge> What do you mean by "PostgreSQL does not"?
[12:23:00] *** Quits: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi) (Remote host closed the connection)
[12:23:29] <Berge> I suppose postgres technically stores time as UT1 internally.
[12:24:00] <kjetilho> you can't store the absolute point in time which is a leap second.  23:59:60
[12:24:12] <Myon> it's actually OS system time which ignores leap seconds on all OSes afaict
[12:25:00] <Berge> kjetilho: I think you can store it, but not compare it (or it compres as the next second)
[12:25:15] <Berge> SELECT '2022-12-23 00:00:60+00'::timestamptz → 2022-12-23 01:01:00+01
[12:25:15] <kjetilho> Myon: really?  I thought it just was more popular to do the "smear" now.
[12:25:48] *** Joins: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr)
[12:26:13] <dminuoso> Berge: Perhaps the name `timestamp with timezone` *is* fine then.
[12:26:21] <Myon> kjetilho: smear is part of the system time, PostgreSQL just calls gettimeofday() and friends
[12:26:26] <Berge> dminuoso: no, it's terrible, because it isn't a timetamp with timezone (-:
[12:26:39] <dminuoso> Berge: Because semantically I could imagine it storing the timestamp with timezone information. You could argue that the implicit convention of storing it "AS UTC" is the same as slapping "UTC" on the tuple.
[12:26:57] <dminuoso> (Or any other timezone, for that matter)
[12:26:59] <kjetilho> this was a leap second: select '2016-12-31 23:59:60'::timestamptz;
[12:27:05] <Berge> dminuoso: No, it doesn't store the timezone info. It converts to UTC (or UT1 or whatever) internally and throws away the timezone info
[12:27:25] <dminuoso> Berge: Semantically the information that the stored timestamp is in UTC is stored in the knowledge that it is UTC.
[12:27:41] <Berge> kjetilho: And SELECT '2016-12-31 23:59:60'::timestamptz = '2017-01-01 00:00:00+01'::timestamptz; → true
[12:27:41] <dminuoso> Im not talking about technical implementation, just that the semantics is the same
[12:27:56] <kjetilho> I was just bringing it up to illustrate it's not really UTC internally.  I think.
[12:28:07] <Myon> it's unix time
[12:28:07] <Berge> dminuoso: Exactly, and the semantics isn't "it's stored in UTC"
[12:28:30] <dminuoso> Berge: Sure, Im just saying that it could be some mind model
[12:28:42] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:91af:f92e:54e4:10a3) (Remote host closed the connection)
[12:28:46] <dminuoso> "stored in UTC" is semantically also the same
[12:28:46] <Berge> The semantics are "it's a universal point in time". Postgres could change its implementation to store it as +05:34 internally, without semantics changing one bit
[12:28:58] <peerce> some day I want to be in our newer car, that has a servo motor driven 'analog' clock, which is GPS time synced, and automatically adjusts for DST, and be sitting in the car when DST changes and see if the sleeping car actually wakes up and spins the clock ahead or back and hour, hah hah
[12:29:04] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:91af:f92e:54e4:10a3)
[12:29:19] <dminuoso> Berge: Either way, postgresql *does* store timezone information. Just not in the tuple.
[12:29:25] <Berge> dminuoso: No, it _does not_ (-:
[12:29:30] <dminuoso> It *does*
[12:29:31] <Berge> It has no data type that does so
[12:29:36] <dminuoso> The code does.
[12:29:57] <dminuoso> If the code is configured to zone it into UTC before storing, and interpreting it as UTC when rezoning it to whatever local timezone pg is configured in..
[12:29:59] <Berge> I don't know what to say.
[12:30:02] <peerce> the time zone is not stored.    any time zone is processed on input or output but it is NOT STORED with the data
[12:30:17] <dminuoso> Then postgresql has the knowledge timestamptz to be stored in UTC inside of it.
[12:30:34] <peerce> the connection sesssion carries the client's current timezone
[12:30:45] <peerce> that can be changed on the fly with SET TIMEZONE=....;
[12:30:58] <Berge> dminuoso: Why do you care about storage (for the purposes of semantics)?
[12:31:21] <Berge> It's completely and utterly irrelevant. Postgres could store it as a PNG of an analog clock.
[12:31:23] <peerce> the server also has a serverwide default timezone that clients will default to if they don't change it
[12:31:45] <dminuoso> Berge: Im not talking about storage. Im just saying that conceptually `timestamp with time zone` does store the timestamp longside with *some* time zone. Whether that time zone exists as an actual piece of information in the tuple, or some ambient knowledge in the code is irrelevant.
[12:31:46] <Berge> Or number of microseconds since the premiere of Jurassic Park.
[12:32:14] <Berge> dminuoso: No, it really, truly does not.
[12:32:25] <peerce> hah, said pseudo-analog servo driven car clock. https://photos.smugmug.com/Misc/2016-Mercedes-E350/i-CC6mWm5/0/77731837/X2/PXL_20211224_051249286-X2.jpg
[12:33:32] <Berge> The tuple really does not have any timezone info at all
[12:33:48] <Berge> The tuple just have 8 bytes of data.
[12:33:50] <peerce> almost everyone who's ridden in this car, a minute or 5 later, goes, ooooh, i like the clock!
[12:33:53] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[12:34:02] <dminuoso> Berge: I never said the tuple has informatino.
[12:34:07] <dminuoso> Berge: If postgresql had *no* ambient knowledge of what timezone the stored timestamp was in, it would be completely and utterly unable to give me a promise of what `x AT TIME ZONE 'America/New_York'` even produced.
[12:34:20] <dminuoso> It *knows* the tuple to be stored in UTC by convention.
[12:34:34] <dminuoso> One could say its normalized into the code.
[12:34:46] <peerce> ok, fine, this is a semantic argument.  meh.
[12:34:52] <Berge> Yes, it happens to be implemented internally as a counter that counds the number of microseconds since whenver.
[12:34:58] <peerce> i was a sophomore hanging out in the quad in 1973.
[12:34:59] <Berge> I don't actually know what the epoch is.
[12:35:14] <peerce> we could argue over what shade of blue the sky was for hours.
[12:35:29] <Berge> yeah, I think I've said what I have to say (-:
[12:35:33] <dminuoso> I didnt mean to kick off a meaningless discussion. Sorry about that
[12:35:46] <peerce> berge is time stored as a numeric?   or as a double ?
[12:35:49] <peerce> or what?
[12:35:58] <peerce> 64 bit integer number of microseconds?
[12:36:00] <dminuoso> But I think all prior confusion was cleared up, Berge. So thank you for that!
[12:36:02] *** Joins: Auron (Auron956@user/auron)
[12:36:08] <Berge> peerce: I can't recall, actually
[12:36:22] <peerce> heh, yeah, the internal representation is ACTUALLY NOT IMPORTANT
[12:36:28] <Berge> dminuoso: I just think it'd be helpful for you if your mental model matches postgres' actual semantics
[12:36:42] <Berge> I thought I knew, but I can't remember, so.
[12:36:48] <peerce> IIRC, however, INTERVAL's are stored as 2 or 3 components
[12:36:57] *** Joins: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi)
[12:37:03] <pnorman> wasn't there a compile time option for two different storage representations at one point?
[12:37:15] <Myon> pnorman: a decade ago, yes
[12:37:24] <Myon> --enable-integer-datetimes
[12:37:31] <peerce> INTERVAL '36 years 6 months 20 days 3 hours 20 minutes 35.011232 seconds'   << valid INTERVAL
[12:37:39] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[12:37:53] <peerce> yeah, that went away early in the 8.x series, IIRC
[12:38:01] <kjetilho> isn't the traditional epoch 1852 or something?
[12:38:02] <dminuoso> Berge: I do understand your point of view. By the way, for unrelated reasons I just dislike the notion of "absolute point in time"
[12:38:10] <dminuoso> (Because that makes fundamental assumptions that dont hold up in reality)
[12:38:17] <Berge> I dislike how humans try to reckon time.
[12:38:26] <peerce> TIME KEEPS ON TICKIN... TICKIN... INTO THE FUTURE!
[12:38:35] <Berge> But I recognize it's useful to have an approximation of universal time.
[12:38:58] <Berge> To know when the train arrives.
[12:39:01] <dminuoso> So if I was feeling provocative, I might say postgresql is in violation of general relativity!
[12:39:03] <peerce> there is the past, now, and the future, and that is constantly changing.
[12:39:15] <Berge> (The modern notion of synchronized clocks came with high-speed travel with trains.)
[12:39:48] <dminuoso> Berge: And amusingly, with it came Einstein's theories of relativity. :)
[12:39:53] <peerce> a blast from the 1970s, https://www.youtube.com/watch?v=Wb9By-lODgk
[12:40:10] <Berge> dminuoso: That came a bit later, perhaps (-:
[12:40:43] <Berge> Railway time is a mid-1800's thing
[12:40:44] <dminuoso> Berge: Actually, part of why Einstein came up with all his works was - if memory serves right - partly due to his work at the patent office. At the time, a lot of patents revolving around time synchronization passed his desk.
[12:41:01] <dminuoso> Berge: Which is what made him start thinking about that problem domain a lot.
[12:41:11] <dminuoso> Well not "all of his works", but the relativity works, anyway
[12:41:15] <Berge> ah, yes. But 50 years later.
[12:41:17] *** Quits: mattil (~mattil@dy6psnsqf3pbq6nc7rb2y-4.rev.dnainternet.fi) (Ping timeout: 240 seconds)
[12:41:19] <dminuoso> Right
[12:41:26] <Berge> 50 UTC years!
[12:41:26] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[12:41:42] <dminuoso> You mean julian years?
[12:41:46] <peerce> phew, 1976.    year before I started at Digital Research, working directly for the author of CP/M
[12:41:50] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[12:42:11] <peerce> [thats when this song is from... i was 22]
[12:45:23] <peerce> yeow, that was 45 years ago.
[12:45:34] *** Joins: dege (~dege@user/dege)
[12:48:20] <kjetilho> what did you do at DR?
[12:49:04] <peerce> um, initially lots and lots of stuff.
[12:49:13] <kjetilho> ah... you made tea.
[12:49:15] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[12:49:15] <peerce> i was the junior
[12:49:21] <kjetilho> ;)
[12:50:03] <peerce> nah, I worked on device drivers, hardware interfacing, and setup the cp/m boxes.       wrote a bunch of the early HDD controller support into BIOSs
[12:50:26] <peerce> contributed to piles of bits and pieces in CP/M 2.x
[12:50:43] <Berge> peerce: That's really cool (-:
[12:50:47] <peerce> also did a lot of OEM technical support
[12:50:55] <peerce> helping our customers get their own hardware working
[12:52:22] <peerce> i was the software guy with an oscilloscope on my bench :D
[12:52:23] <kjetilho> PIP.COM PRN: LEDGER.TXT
[12:52:47] <peerce> I think that needed an = in the middle?   PRN:=filename  ?
[12:52:53] <peerce> geez.   beeen way too long
[12:53:07] <kjetilho> oh, perhaps it did.  way too long for me, too.
[12:54:05] <peerce> i probably have a set of those original cp/m manuals with the construction paper covers, pritned via a diablo daisywheel that I'd built the interrface for and programmed teh driver
[12:54:28] <Rembane> That's lovely
[12:54:55] <peerce> I dunno, I threw a lot of that stuff away 20+ years ago trying to purge the junk level down to sane.
[12:55:28] <Rembane> I'm gonna assume that they still exist.
[12:56:07] <Rembane> Because the idea of their existence makes me happy.
[12:57:00] *** Joins: Komzzpa (~kom@46.216.152.2)
[12:57:08] <peerce> there's cp/m users groups and such that keep old s100 crap runing, etc.
[12:58:02] <peerce> awhile back my friend found this 4x5 inch card that I had designed that had a 8 bit cpu, rom, ram, and various low level serial and parallel IO on it, sort of a late 1970s Arduino.
[12:58:36] <peerce> i was like whoa, ok, thts my handwriting on the hand drawn schematics and there's the PCBA, and I don't even remember wtf this project was for.
[12:58:39] <ne2k> probably used a bit more power
[12:59:00] <Rembane> Hand drawn schematics ftw!
[12:59:01] <peerce> arduinios suck for power management, actually.  I  like PIC based systems better
[12:59:32] <peerce> hell, it was ruler and template and #2 pencil on 1/4 inch quadrille graph paper
[13:00:09] <Myon> cool
[13:00:32] <peerce> i was trying to find my photos or scans of that, but not finding them now
[13:01:34] <peerce> oh heres' the board, hahahahaha.   next to a raspberry pi thats like 1000X more powerful.   https://photos.smugmug.com/photos/i-4CbKTJk/2/905f7cc5/X3/i-4CbKTJk-X3.jpg
[13:02:17] <peerce> [pi3b]
[13:02:31] <Rembane> It's pretty though and have huge discrete components <3
[13:02:48] <peerce> that was standard circa 1977
[13:04:24] <peerce> IIRC, that top big chip is a 8755 which was parallel IO bits plus some UV erasable EPROM (what we used before EEPROM was a thing)
[13:04:45] <peerce> the middle chip is a 8155, which is more IO bits and a tiny bit of ram, liek 256 bytes or something
[13:05:33] *** Quits: jmcgnh (~jmcgnh@wikipedia/jmcgnh) (Ping timeout: 250 seconds)
[13:05:34] <peerce> and the bottom big chip is a 8088, which is the same CPU the original IBM PC used, 4-5 Mhz clock speeds, 8 bit bus, 16 bit instrucutions and registers
[13:05:45] <Rembane> I thought I recognized it! :D
[13:05:51] <Rembane> Lovely!
[13:06:15] <peerce> oh, the upper right smaller chip, 8185, thats a 1KByte static RAM chip
[13:06:19] *** Joins: jmcgnh (~jmcgnh@wikipedia/jmcgnh)
[13:06:55] <peerce> and the lower right smaller chip, thats the clock controller for the 8088
[13:07:43] <Rembane> I thought it had a clock built in. I learned something today.
[13:07:48] <Myon> I like how cleaned up it looks, not like the SMD mess on the rpi board
[13:08:01] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[13:08:11] <Rembane> Myon: You just need to zoom in on the pi to get the same feeling.
[13:08:15] <Rembane> Or look.
[13:08:56] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[13:09:23] *** Joins: Komzpa (~kom@46.216.225.177)
[13:09:25] *** Quits: Komzzpa (~kom@46.216.152.2) (Ping timeout: 240 seconds)
[13:13:02] *** Quits: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se) (Ping timeout: 240 seconds)
[13:13:37] *** Quits: merzo (~Thunderbi@95.133.38.222) (Quit: merzo)
[13:13:59] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[13:14:42] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[13:15:07] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 256 seconds)
[13:18:17] *** Quits: iliv (~iliv@user/iliv) (Ping timeout: 240 seconds)
[13:21:37] *** Joins: lkw (~lkw@user/lkw)
[13:21:45] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[13:28:29] *** Quits: Vitto (~Vitto@se-14.nat.univ-paris4.fr) (Quit: Leaving.)
[13:28:43] *** Quits: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au) (Ping timeout: 256 seconds)
[13:30:03] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[13:31:57] *** Joins: fef (~thedawn@user/thedawn)
[13:32:35] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[13:33:48] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Ping timeout: 240 seconds)
[13:34:06] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 256 seconds)
[13:34:42] *** Quits: zachxz (~zachary@124.133.18.218) (Ping timeout: 272 seconds)
[13:34:47] *** Joins: cliluw (~cliluw@47.147.77.43)
[13:38:58] *** Joins: sprite-- (~sprite__@ip68-1-116-32.pn.at.cox.net)
[13:40:35] <sprite--> https://explain.depesz.com/s/RpPN#html any way to improve this query to speed it up? I have this index index_contact_requests_on_sender_id_and_receiver_id  (sender_id,receiver_id) UNIQUE
[13:41:02] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 240 seconds)
[13:41:40] *** Joins: peteyboy1 (~peteyboy1@95.169.226.66)
[13:42:53] <ne2k> what does LIMIT $1[["LIMIT", 10]] do?
[13:42:54] <jkavalik> OR cannot use a multicolumn index (efficiently at least)
[13:43:39] <jkavalik> sprite--, you may want to rewrite it as an UNION, that might make it more optimizable, ORs are not great and the BitmapOr is probably the best thing the optimizer can do
[13:43:41] <ne2k> sprite--, I think you'd need a separate index on receiver_id
[13:44:16] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[13:44:16] <jkavalik> thats a good idea too
[13:44:19] <sprite--> I have separate indinces on receiver_id and sender_id also. I will try UNION.
[13:44:20] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[13:44:25] <ne2k> jkavalik, what would the receiver_id = half of the union use?
[13:44:57] <peerce> I've never seen that notation [["LIMIT",10]]
[13:45:21] <sprite--> Any pointers what the query will look like using UNION? If not I'll start Googling.
[13:45:39] <sprite--> peerce: It's just how rails activerecord adapter does it.
[13:45:56] <ne2k> sprite--, select a from t where r = id union select a from t where s = id
[13:46:10] <sprite--> Perfect thanks, will give it a shot.
[13:46:37] <ne2k> sprite--, oh, and a join to get the user.. I htink?
[13:50:06] <sprite--> https://explain.depesz.com/s/sIEz#html yeah this is what my actual query to get users looks like. Seems I can benefit from increasing work_mem since it goes to disk.
[13:51:57] *** Quits: Komzpa (~kom@46.216.225.177) (Ping timeout: 256 seconds)
[13:52:12] *** Joins: mattil (~mattil@helsinki.portalify.com)
[13:54:43] <peerce> sprite--; was that what it sent to SQL, or was that some syntax you used for Rails ?
[13:55:06] <peerce> cuz, ORMS really serve to obfuscate what is going on
[13:55:24] *** Quits: dob1 (~dob1@user/dob1) (Read error: Connection reset by peer)
[13:55:43] *** Joins: dob1 (~dob1@user/dob1)
[13:55:55] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Ping timeout: 256 seconds)
[13:58:08] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[13:58:52] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Ping timeout: 250 seconds)
[13:59:51] *** Joins: gr33nR10t (~greenriot@user/gr33nr10t)
[13:59:58] <rk4> orms are a mistake 9/10 times</driveby comment>
[14:00:16] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[14:00:22] * rk4 is being pretty generous with the implication that 1/10 is OK, it might be 1/100
[14:04:40] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[14:07:38] *** Joins: iliv (~iliv@93-77-147-152.lvv.volia.net)
[14:09:15] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[14:09:15] *** Joins: iliv (~iliv@user/iliv)
[14:09:43] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[14:10:28] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[14:12:05] *** Joins: idontneedanick (~idontneed@h-85-24-184-105.A189.priv.bahnhof.se)
[14:12:28] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[14:13:22] *** Joins: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c)
[14:17:17] *** Quits: Klinda (~superleag@user/klinda) (Ping timeout: 240 seconds)
[14:17:32] *** Joins: Ergo^ (~ergo@91.238.59.144)
[14:17:59] *** Quits: ponsfrilus (~Thunderbi@vpn-253-153.epfl.ch) (Quit: ponsfrilus)
[14:19:40] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 272 seconds)
[14:20:32] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[14:23:16] *** Joins: zlinux (~zlinux@149.109.10.45)
[14:25:40] *** Quits: zlinux[] (~zlinux@149.109.5.231) (Ping timeout: 256 seconds)
[14:26:12] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[14:29:00] *** Quits: tkonto (~tkonto@188.4.208.136.dsl.dyn.forthnet.gr) (Quit: WeeChat 3.4)
[14:31:42] *** Quits: fcr (~fran@r167-60-99-233.dialup.adsl.anteldata.net.uy) (Ping timeout: 272 seconds)
[14:32:02] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[14:32:19] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[14:32:27] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[14:33:52] *** Joins: immibis_ (~hexchat@62.156.144.218)
[14:33:58] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[14:34:35] *** Joins: Klinda (~superleag@user/klinda)
[14:34:43] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[14:35:16] *** Joins: merzo (~Thunderbi@185.39.197.205)
[14:35:36] *** Joins: tozhu (~tozhu@180.168.6.186)
[14:36:52] *** Joins: fcr (~fran@r167-60-28-161.dialup.adsl.anteldata.net.uy)
[14:37:17] *** Quits: immibis (~hexchat@62.156.144.218) (Ping timeout: 256 seconds)
[14:38:59] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 256 seconds)
[14:41:29] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[14:41:30] *** Joins: zlinux_ (~zlinux@149.109.13.110)
[14:41:56] <ne2k> I'm very glad I didn't succumb to the temptation to go down the ORM route ten or so years ago when they were all-the-rage
[14:41:59] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[14:42:06] <ne2k> SQL is SQL. use it
[14:42:55] <OliverMT> or best of both worlds, a good DSL mapper so you can do SQL and also have a proper language to do dynamic stuff in :)
[14:43:00] *** Quits: zlinux (~zlinux@149.109.10.45) (Ping timeout: 240 seconds)
[14:43:09] <OliverMT> jooq, ecto etc
[14:43:20] *** Quits: eroux (~eroux@102-65-85-242.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:44:44] <peerce> if you feel the need to do 'dynamic stuff', you probably not not using the sql relaional model properly
[14:45:05] <peerce> or, ....
[14:45:08] <peerce> ??2nd
[14:45:08] <pg_docbot> Nothing found
[14:45:15] <peerce> ??2nd system
[14:45:15] <pg_docbot> Nothing found
[14:45:20] <peerce> greeee
[14:45:38] <peerce> https://en.wikipedia.org/wiki/Second-system_effect
[14:46:27] <peerce> aksi as a corallory, https://en.wikipedia.org/wiki/Inner-platform_effect
[14:51:20] *** Quits: karabaja4 (~karabaja4@dh207-94-120.xnet.hr) (Ping timeout: 272 seconds)
[14:51:36] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[14:53:09] *** Quits: sakasama (~sakasama@user/sakasama) (Ping timeout: 256 seconds)
[14:55:42] <sprite--> How would I join users on the UNION? I tried using WHERE, but it's slow https://explain.depesz.com/s/BQp1
[14:58:20] <ne2k> select u.* from users u join (select ... union select ...) s on u.id = s.id?
[14:58:32] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 256 seconds)
[14:59:25] <sprite--> Thanks, sorry for being such a newb, guess that's what I get for relying on ORMs. Will definitely do some more reading to get more proficient on SQL
[14:59:43] *** Joins: mattil (~mattil@helsinki.portalify.com)
[15:01:01] *** Joins: Guest6792 (~vit@chello085216193138.chello.sk)
[15:01:51] *** Joins: zlinux (~zlinux@142.247.5.175)
[15:02:59] *** Joins: kydd (~kydd@193.110.87.251)
[15:04:21] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[15:04:37] *** Joins: karabaja4 (~karabaja4@dh207-93-84.xnet.hr)
[15:04:46] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[15:05:16] *** Quits: zlinux_ (~zlinux@149.109.13.110) (Ping timeout: 272 seconds)
[15:05:21] <peerce> typical ORM is like tryin to type with boxing gloves on.
[15:06:02] *** Quits: dob1 (~dob1@user/dob1) (Ping timeout: 240 seconds)
[15:07:48] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 240 seconds)
[15:09:22] *** Joins: dob1 (~dob1@user/dob1)
[15:09:41] *** Joins: nyov (~nyov@user/nyov)
[15:10:47] *** Quits: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:20c1:6c11:2939:5b5d) (Read error: Connection reset by peer)
[15:11:29] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[15:13:06] *** Joins: xocolatl (~xocolatl@194.110.113.55)
[15:15:18] *** Joins: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:4d9b:d806:652d:f6d8)
[15:15:50] *** Quits: xocolatl_ (~xocolatl@194.110.113.39) (Ping timeout: 260 seconds)
[15:19:12] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Ping timeout: 272 seconds)
[15:19:52] *** Joins: viaSanctus (~viaSanctu@user/viasanctus)
[15:21:06] *** Quits: iliv (~iliv@user/iliv) (Ping timeout: 272 seconds)
[15:26:45] *** Joins: F0ma (~F0ma@85.206.58.104)
[15:29:02] *** Joins: iliv (~iliv@93-77-147-152.lvv.volia.net)
[15:29:53] <sprite--> This is what I ended up with using union, not any improvement over my initial query, but at least I tried unless anyone has some other suggestions https://explain.depesz.com/s/hdDM#html
[15:31:14] *** Joins: eroux (~eroux@102-65-85-242.ftth.web.africa)
[15:32:16] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[15:32:35] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[15:32:35] *** Joins: iliv (~iliv@user/iliv)
[15:35:02] <jkavalik> sprite--, did you create the second index?
[15:35:16] <sprite--> yeah I already had it
[15:36:48] <jkavalik> well, the index scan will hardly be faster.. what about the index-only scan? there are 43k heap fetches, maybe run vacuum on contact_requests ?
[15:41:13] *** Joins: Caerus (~Caerus@170.246.157.60)
[15:41:39] *** Joins: Komzpa (~kom@46.216.113.197)
[15:44:43] *** Joins: maxzor_ (~maxzor@2a01cb04054faa00f058c4a7597737fc.ipv6.abo.wanadoo.fr)
[15:46:35] *** Joins: volga629 (~volga629@72.139.93.26)
[15:47:42] <volga629> Hello Everyone, in pgpool after changing pool_passwd  is reload enough to apply changes ?
[15:48:46] <volga629> ExecReload=/bin/kill -HUP $MAINPID
[15:49:13] <Myon> test it?
[15:50:33] *** Quits: tozhu (~tozhu@180.168.6.186) (Ping timeout: 265 seconds)
[15:50:48] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:56:10] *** Joins: zlinux_ (~zlinux@142.247.5.175)
[15:56:23] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[15:58:47] *** Joins: tozhu (~tozhu@180.168.6.186)
[15:59:38] *** Joins: zlinux[] (~zlinux@149.109.11.146)
[15:59:44] *** Quits: zlinux (~zlinux@142.247.5.175) (Ping timeout: 256 seconds)
[16:01:57] *** Quits: zlinux_ (~zlinux@142.247.5.175) (Ping timeout: 240 seconds)
[16:03:25] *** Joins: Haudegen (~quassel@91.114.49.10)
[16:03:32] *** Quits: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr) (Ping timeout: 272 seconds)
[16:05:48] *** Quits: dob1 (~dob1@user/dob1) (Ping timeout: 240 seconds)
[16:07:02] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Ping timeout: 240 seconds)
[16:07:48] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[16:09:36] *** Joins: gr33nR10t (~greenriot@user/gr33nr10t)
[16:10:22] *** Quits: tozhu (~tozhu@180.168.6.186) (Ping timeout: 265 seconds)
[16:10:38] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Read error: Connection reset by peer)
[16:11:17] *** Joins: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5)
[16:11:21] *** Quits: Komzpa (~kom@46.216.113.197) (Ping timeout: 256 seconds)
[16:11:58] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[16:13:22] *** Joins: Komzpa (~kom@46.216.155.91)
[16:15:54] *** Joins: n0fun_ (~jack@i577BC0E4.versanet.de)
[16:16:32] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:17:01] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Max SendQ exceeded)
[16:17:30] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:18:05] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Max SendQ exceeded)
[16:18:47] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:19:21] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Max SendQ exceeded)
[16:19:58] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[16:20:13] *** Joins: dob1 (~dob1@user/dob1)
[16:20:33] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[16:22:51] *** Quits: dob1 (~dob1@user/dob1) (Client Quit)
[16:23:01] *** Joins: vanessa (~farawayas@103.160.128.7)
[16:24:52] *** Quits: rednul__ (~rednul@098-127-178-044.biz.spectrum.com) (Quit: bye)
[16:26:26] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[16:29:55] *** Joins: darkbit (~db@136.158.8.67)
[16:29:56] *** Quits: kydd (~kydd@193.110.87.251) (Quit: Client closed)
[16:32:00] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[16:34:16] *** Joins: ba|ch (~user@p200300f3a70c0d1cdba383149229a723.dip0.t-ipconnect.de)
[16:41:03] <TomTom> Hi there. Is there a good way starting up postgresql without letting others (remote) connect immediately? Setting connections in the postgresql.conf file to 0 for example?
[16:41:26] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[16:41:49] <Myon> listen_addresses = ''
[16:41:58] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[16:42:04] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[16:42:04] <Myon> or localhost, which is actually the default
[16:42:18] <xocolatl> or use pg_hba.conf to reject everything
[16:42:24] <xocolatl> (avoids a restart)
[16:45:32] *** Joins: MrZeus__ (~MrZeus@185.248.85.53)
[16:45:38] *** Quits: Elodin (~elodin@user/elodin) (Ping timeout: 256 seconds)
[16:53:10] *** Quits: vanessa (~farawayas@103.160.128.7) (Quit: Leaving)
[16:55:53] *** Quits: Junxter (~Junxter@222.95.164.193) (Read error: Connection reset by peer)
[16:56:14] *** Joins: Junxter (~Junxter@222.95.164.193)
[16:56:39] *** Joins: Elodin (~elodin@user/elodin)
[16:56:45] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[16:57:28] *** Joins: mattil (~mattil@helsinki.portalify.com)
[16:59:50] *** Joins: sincatter (~sincatter@2408:8270:101e:6900:f99b:33a9:1c5d:99ef)
[17:04:05] *** Joins: bsliger (~bsliger@ip68-97-47-19.ok.ok.cox.net)
[17:05:28] *** Quits: mattil (~mattil@helsinki.portalify.com) (Remote host closed the connection)
[17:05:43] *** Joins: mattil (~mattil@helsinki.portalify.com)
[17:07:50] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[17:08:27] *** Joins: dob1 (~dob1@user/dob1)
[17:13:58] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[17:15:57] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Read error: Connection reset by peer)
[17:16:04] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[17:20:10] *** Joins: volga629 (~volga629@72.139.93.26)
[17:20:37] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[17:21:57] <volga629> I tried systemctl reload but seems has no affect, authentication still failing
[17:22:39] <volga629> trying scram sha256
[17:23:43] *** Joins: sgen (~sgen@2607:fea8:7ce1:c8e0:3169:1651:ead:5ffb)
[17:24:51] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[17:25:43] <pedja> can pgpool do that? kick existing/block all new connections while admin work is done on cluster?
[17:27:28] *** Joins: _sgen (~sgen@2607:fea8:7ce1:c8e0:3169:1651:ead:5ffb)
[17:27:41] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::82dc)
[17:28:27] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[17:29:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[17:31:02] *** Quits: MrZeus__ (~MrZeus@185.248.85.53) (Read error: Connection reset by peer)
[17:34:42] *** Joins: MrZeus (~MrZeus@185.248.85.38)
[17:37:15] *** Joins: tozhu (~tozhu@180.168.6.186)
[17:38:45] *** Quits: _sgen (~sgen@2607:fea8:7ce1:c8e0:3169:1651:ead:5ffb) (Quit: Leaving)
[17:38:45] *** Quits: sgen (~sgen@2607:fea8:7ce1:c8e0:3169:1651:ead:5ffb) (Quit: Leaving)
[17:40:58] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::82dc) (Ping timeout: 260 seconds)
[17:42:58] *** Joins: gambl0re (~gambl0re@cpe688f2e1852a3-cm688f2e1852a0.cpe.net.cable.rogers.com)
[17:46:30] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[17:46:52] *** Quits: ne2k (~andy@212.250.187.98) (Read error: Connection reset by peer)
[17:49:40] *** Quits: ffl^ (~ffl@50-202-219-146-static.hfc.comcastbusiness.net) (Remote host closed the connection)
[17:51:32] *** Quits: gambl0re (~gambl0re@cpe688f2e1852a3-cm688f2e1852a0.cpe.net.cable.rogers.com) (Ping timeout: 240 seconds)
[17:51:45] *** Joins: jringstad__ (~Amadiro@31.11.55.179)
[17:52:19] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[17:53:05] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[17:53:19] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:54:02] *** Quits: Amadiro (~Amadiro@31.11.55.179) (Ping timeout: 260 seconds)
[17:54:23] *** Quits: jringstad__ (~Amadiro@31.11.55.179) (Remote host closed the connection)
[17:54:41] *** Joins: Amadiro (~Amadiro@31.11.55.179)
[17:55:15] *** Quits: tozhu (~tozhu@180.168.6.186) (Ping timeout: 265 seconds)
[17:57:29] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:b4a7:dec3:a543:4b87)
[17:57:30] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[17:58:56] *** Joins: Elodin (~elodin@user/elodin)
[18:01:39] *** Joins: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29)
[18:02:44] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Ping timeout: 260 seconds)
[18:04:13] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[18:04:45] *** Joins: tozhu (~tozhu@101.84.180.251)
[18:07:13] <sprite--> Ok got another problematic query... can I do a multi column partial index on where discarded_at = NULL and status IN (2,3), is that possible? https://explain.depesz.com/s/4ODH#html
[18:08:22] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[18:09:24] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[18:10:21] *** Quits: ba|ch (~user@p200300f3a70c0d1cdba383149229a723.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[18:14:14] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Quit: ncwbqcfe)
[18:14:36] *** Quits: dege (~dege@user/dege) (Ping timeout: 240 seconds)
[18:15:56] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[18:23:28] *** Joins: zeden (~zeden@user/zeden)
[18:24:08] *** Quits: eroux (~eroux@102-65-85-242.ftth.web.africa) (Ping timeout: 272 seconds)
[18:25:21] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 245 seconds)
[18:27:19] <sprite--> guess I'm thinking backwards, I need the opposite index right?
[18:28:16] <sprite--> discarded_at IS NOT NULL AND status NOT IN(2,3)?
[18:28:16] *** Joins: ne2k (~andy@212.250.187.98)
[18:28:20] *** Joins: the_lanetly_052_ (~the_lanet@185.30.89.14)
[18:29:19] *** Joins: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com)
[18:30:46] *** Quits: the_lanetly_052 (~the_lanet@194.135.154.63) (Ping timeout: 245 seconds)
[18:32:32] *** Parts: F0ma (~F0ma@85.206.58.104) ()
[18:34:43] *** Quits: tozhu (~tozhu@101.84.180.251) (Quit: tozhu)
[18:37:00] *** Joins: tozhu (~tozhu@180.168.6.186)
[18:38:18] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[18:40:32] *** Quits: tozhu (~tozhu@180.168.6.186) (Client Quit)
[18:41:46] <sprite--> https://explain.depesz.com/s/QVpkC#html that anti join is the real performance killer, any suggestions how to restructure the whole query?
[18:42:37] *** Joins: Maxattax97 (~max@50-195-160-193-static.hfc.comcastbusiness.net)
[18:42:39] *** Joins: Kohe (~Kohe@77.49.10.102.dsl.dyn.forthnet.gr)
[18:44:20] *** Joins: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[18:47:23] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[18:47:35] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[18:50:03] <ne2k> IN ($1, $2)[["status", 2],["status", 3]] what is that syntax?
[18:50:56] <ne2k> sprite--, ^ and what is the in-words description of what this query does?
[18:51:14] *** Joins: tozhu (~tozhu@180.168.6.186)
[18:53:03] <ne2k> messages that have not been discarded and whose status is 2 or 3 and for which there isn't a conversation for which this is the last message?
[18:53:09] *** Joins: Elodin (~elodin@user/elodin)
[18:53:09] <sprite--> It checks for messages to mark as deleted, they have to be status 2 or 3 [opened_expired/expired], the status must not have been recently updated (checks if it was updated within last 10 minutes) and the message must not be the last message in a conversation. This last condition seems to be the killer. I have lots of messages that would be deletable if they were not otherwise the last message of the conversation
[18:55:10] <jkavalik> a bit of denormalization maybe? - store "is last" for every new message, cleanup as needed (may be done "offline" if a bit of lag is not a problem) and then you can check that directly
[18:55:18] <sprite--> Here is not the full query but a smaller one demonstrating the main problem: https://explain.depesz.com/s/JFvb
[18:55:56] <sprite--> hmm yeah that might be the best approach
[18:56:25] <jkavalik> if you forget to mark something as "not last anymore" it will be just deleted later
[18:57:09] *** Joins: rednul_ (~rednul@098-127-178-044.biz.spectrum.com)
[18:58:25] <sprite--> yeah I think that shouldn't be a problem. when the last_message_id is updated on the conversation I can just set all other messages that are part of the conversation to not last, or even just update the previous last message if there is one and then just run a one time job to set it for all current messages
[18:58:34] *** Quits: tozhu (~tozhu@180.168.6.186) (Ping timeout: 265 seconds)
[18:59:06] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[18:59:19] <sprite--> That seems like it wouldn't be a bad approach if there isn't an easy way to fix the query the way the data is currently structured
[19:02:07] <ne2k> sprite--, you presumably already have a trigger that sets last_message_id for a conversation when a message is created, so just set "is_last_message" to false for the most recent one at the same time
[19:02:32] <ne2k> presumably a message cannot be part of more than one conversation?
[19:02:43] <sprite--> yeah a message can only belong to one conversation
[19:03:07] <sprite--> the last_message_id is set at the application level, but I can just update the field for previous message there as well
[19:03:55] <ne2k> well if you already have the previous message id cached in the application, then that's easier. personally I'd do such things in the db with triggers but hey
[19:05:22] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[19:05:30] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[19:06:03] *** Joins: tozhu (~tozhu@101.84.180.251)
[19:06:34] *** Quits: Maxattax97 (~max@50-195-160-193-static.hfc.comcastbusiness.net) (Ping timeout: 272 seconds)
[19:06:53] *** Quits: sincatter (~sincatter@2408:8270:101e:6900:f99b:33a9:1c5d:99ef) (Read error: Connection reset by peer)
[19:10:17] *** Quits: Elodin (~elodin@user/elodin) (Ping timeout: 240 seconds)
[19:11:01] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[19:12:52] <volga629> I think pgpool systemd service file should use this /usr/pgpool-11/bin/pgpool  -f /etc/pgpool-II-11/pgpool.conf -a /etc/pgpool-II-11/pool_hba.conf reload to reload configuration instead -HUP
[19:14:50] *** Joins: siiky (~siiky@2001:8a0:ff44:f800:8372:5d19:cba8:f58b)
[19:14:56] *** Quits: ben_ (~ben@host86-151-198-203.range86-151.btcentralplus.com) (Remote host closed the connection)
[19:15:48] *** Quits: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz) (Ping timeout: 256 seconds)
[19:16:53] *** Joins: xenoc__ (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net)
[19:19:00] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[19:25:34] *** Quits: merzo (~Thunderbi@185.39.197.205) (Remote host closed the connection)
[19:26:07] *** Joins: Rashad (~textual@149.200.188.246)
[19:27:09] *** Quits: Rashad (~textual@149.200.188.246) (Client Quit)
[19:27:51] *** Joins: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[19:29:53] *** Joins: Reiner_Unsinn (~quassel@ip-092-050-086-254.um29.pools.vodafone-ip.de)
[19:30:06] *** Quits: uberardy[m] (~uberardye@2001:470:69fc:105::1:7094) (Quit: You have been kicked for being idle)
[19:30:15] *** Quits: xenoc__ (~xenoterra@99-124-139-34.lightspeed.iplsin.sbcglobal.net) (Ping timeout: 256 seconds)
[19:30:16] <Ankhers> Other than being having the ability to be used as a foreign key, what is the real difference between a composite primary key and a unique index on the same fields?
[19:30:19] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[19:30:32] *** Joins: uberardy[m] (~uberardye@2001:470:69fc:105::1:7094)
[19:30:35] *** Parts: uberardy[m] (~uberardye@2001:470:69fc:105::1:7094) ()
[19:31:12] *** Joins: Rashad (~textual@2a01:9700:1356:c700:b9b4:2ebb:1c61:10be)
[19:31:29] <Myon> Ankhers: only PK implies NOT NULL
[19:31:38] <Myon> apart from that, it's the same
[19:31:43] <Ankhers> Myon: Thanks!
[19:32:13] <ne2k> Ankhers, what makes you think that a foreign key requires PRIMARY KEY to reference?
[19:32:16] <Myon> unique constraints can be used for FKs as well
[19:32:44] <Ankhers> Myon: TIL, thank you!
[19:33:06] <Ankhers> ne2k: Just the fact I have never tried anything else before.
[19:33:17] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[19:33:45] <ne2k> https://www.postgresql.org/docs/current/ddl-constraints.html#:~:text=A%20foreign%20key%20must%20reference%20columns%20that%20either%20are%20a%20primary%20key%20or%20form%20a%20unique%20constraint.%20This%20means%20that%20the%20referenced%20columns%20always%20have%20an%20index%20(the%20one%20underlying%20the%20primary%20key%20or%20unique%20constraint)%3B%20so%20checks%20on%20whether%20a%20referencing%20row%20has%20a%20match%20will%20be%20efficient.
[19:33:51] <ne2k> urgh
[19:33:57] <ne2k> A foreign key must reference columns that either are a primary key or form a unique constraint. This means that the referenced columns always have an index (the one underlying the primary key or unique constraint); so checks on whether a referencing row has a match will be efficient.
[19:34:11] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[19:34:36] *** Quits: tenten_ (~noname@65.201.88.74) (Remote host closed the connection)
[19:35:01] <ne2k> someone needs to make a chrome extension that automagically applies a URL shortener to the "copy link to highlight" links
[19:35:17] <ne2k> because they is fugly
[19:37:45] <ilmari> or just don't copy links with highlights
[19:37:48] <Ankhers> So the only difference between a primary key and an index is the fact that primary key enforces not null by default and I would need to specify that for the index?
[19:38:16] <ne2k> Ankhers, depends on what null-based behaviour you wan
[19:39:34] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[19:39:38] <Ankhers> ne2k: Thanks. I'm going to play around with that.
[19:39:58] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[19:41:24] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 272 seconds)
[19:41:35] <ne2k> Ankhers, look at MATCH FULL vs PARTIAL vs SIMPLE (https://www.postgresql.org/docs/14/sql-createtable.html#:~:text=There%20are%20three%20match%20types%3A%20MATCH%20FULL%2C%20MATCH%20PARTIAL%2C%20and%20MATCH%20SIMPLE%20(which%20is%20the%20default).)
[19:42:03] <Myon> that's only partially implemented I think
[19:43:52] <Myon> my takeaway is that multi-column FKs on nullable columns are so weird they must be avoided
[19:44:10] *** Quits: Rashad (~textual@2a01:9700:1356:c700:b9b4:2ebb:1c61:10be) (Read error: Connection reset by peer)
[19:44:35] <Ankhers> That sounds about right. I will keep this in mind though because it could come in handy at some point.
[19:46:12] *** Quits: xinming (~xinming@115.221.15.154) (Ping timeout: 240 seconds)
[19:46:35] *** Joins: xinming (~xinming@115.221.15.154)
[19:50:57] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[19:51:47] *** Quits: FastJack (~fastjack@ip-078-094-022-014.um19.pools.vodafone-ip.de) (Ping timeout: 256 seconds)
[19:52:57] *** Joins: FastJack (~fastjack@ip-078-094-022-014.um19.pools.vodafone-ip.de)
[19:53:03] *** Joins: Maxattax97 (~max@50-195-160-193-static.hfc.comcastbusiness.net)
[19:54:08] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[19:54:11] <sprite--> ne2k: That got me a 10x improvement, but shouldn't it use an index or do I need to manually tune the query? is_last_message_in_conversation only has 24k records https://explain.depesz.com/s/jVN2
[19:59:41] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[20:02:10] *** Quits: jnnnnnnnnn (~jnnnnnnnn@157.97.164.5) (Remote host closed the connection)
[20:05:41] <ne2k> what is this ()[[],[],[]) syntax?
[20:06:01] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[20:07:46] <ilmari> it looks like that's the bind parameters?
[20:07:50] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[20:08:00] <ne2k> yeah. just hadn't seen that before
[20:08:01] <ilmari> the first element in each [] is the name, the second is the value
[20:08:34] <ne2k> oh, I see. you can't actually write that in SQL, can you?
[20:08:45] <ne2k> it's an array of arrays form a client library that's been psted in there?
[20:08:57] <ilmari> looks like it to me
[20:09:11] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[20:10:57] <ne2k> ilmari: re link highlights, the pages and for the matter the sections within them are rather big and it's very handy to be able to concisely direct someone to a specific part of it
[20:11:24] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Ping timeout: 240 seconds)
[20:11:43] <ilmari> Firefox (at least 92 ESR) doesn't seem to support it at all
[20:12:32] <sprite--> Thanks again, ne2k. I added a partial index on the is_last_message_in_conversation. Result query went from taking 7-10s to 20-30ms https://explain.depesz.com/s/MmPL
[20:12:34] <Ankhers> Yeah, I noticed the text in the URL and had to search for it. FF did not take me to that section.
[20:12:54] <ilmari> looks like only chromium-based browsers support it: https://caniuse.com/url-scroll-to-text-fragment
[20:13:11] *** Quits: gleu (~guillaume@2a01cb0c046d4500986de48660e05ed5.ipv6.abo.wanadoo.fr) (Quit: Leaving.)
[20:13:16] <ne2k> sprite--, so you went down the route of updating the value on the previous message when you put a new one in?
[20:13:45] <sprite--> yeah. I added code to update the previous one when a new one is set and then I ran a one time job to sync all the existing ones.
[20:13:57] *** Quits: glik22_ (~glik22@99-36-164-253.lightspeed.snjsca.sbcglobal.net) (Ping timeout: 240 seconds)
[20:15:44] <ne2k> sprite--, and that hasn't had an adverse impact on message insertion performance?
[20:17:13] *** Quits: furrymcgee (~devuan@cgn-89-1-209-226.nc.de) (Quit: leaving)
[20:18:23] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[20:18:23] *** Quits: viaSanctus (~viaSanctu@user/viasanctus) (Remote host closed the connection)
[20:18:55] <sprite--> It shouldn't be a big deal I'm just updating one extra column on old message when a new one is created and it's not a super busy endpoint. Now I just need to update the actual job that handles expiring old messages.
[20:19:20] *** Joins: ben_ (~ben@bglloyd.plus.com)
[20:24:28] *** Quits: zlinux[] (~zlinux@149.109.11.146) (Ping timeout: 272 seconds)
[20:24:43] *** Quits: xinming (~xinming@115.221.15.154) (Ping timeout: 250 seconds)
[20:25:07] *** Joins: xinming (~xinming@115.221.15.154)
[20:25:08] *** Quits: Haudegen (~quassel@91.114.49.10) (Quit: Bin weg.)
[20:25:47] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[20:26:39] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[20:27:04] *** Joins: glik22_ (~glik22@99-36-164-253.lightspeed.snjsca.sbcglobal.net)
[20:29:35] *** Joins: Rashad (~textual@2a01:9700:1356:c700:b9b4:2ebb:1c61:10be)
[20:34:26] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[20:38:31] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[20:39:02] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 272 seconds)
[20:39:53] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[20:40:15] *** Joins: hoppity (~hoppity@66.222.130.38)
[20:40:15] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[20:40:15] *** Joins: hoppity (~hoppity@user/hoppity)
[20:41:06] *** Quits: mexen (uid495612@user/mexen) (Quit: Connection closed for inactivity)
[20:42:48] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Quit: My Mac Pro has gone to sleep. ZZZzzz…)
[20:44:06] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Ping timeout: 245 seconds)
[20:45:07] *** Joins: dirigible_ (~dirigible@2607:9000:0:3:36a4:cf80:2f7b:6990)
[20:45:14] *** Quits: ben_ (~ben@bglloyd.plus.com) (Remote host closed the connection)
[20:46:27] *** Joins: ben_ (~ben@bglloyd.plus.com)
[20:46:37] *** Quits: Maxattax97 (~max@50-195-160-193-static.hfc.comcastbusiness.net) (Ping timeout: 240 seconds)
[20:48:12] *** Quits: dirigible (~dirigible@2607:9000:0:3:36a4:cf80:2f7b:6990) (Ping timeout: 252 seconds)
[20:51:04] *** Quits: Reiner_Unsinn (~quassel@ip-092-050-086-254.um29.pools.vodafone-ip.de) (Ping timeout: 272 seconds)
[20:51:11] *** Quits: ben_ (~ben@bglloyd.plus.com) (Remote host closed the connection)
[20:51:47] *** Joins: ben_ (~ben@bglloyd.plus.com)
[20:52:51] *** Joins: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net)
[20:53:04] *** Joins: mizi (~mizi@user/mizi)
[20:56:13] *** Quits: xinming (~xinming@115.221.15.154) (Ping timeout: 240 seconds)
[20:56:35] *** Joins: xinming (~xinming@115.221.15.154)
[20:59:12] *** Quits: peteyboy1 (~peteyboy1@95.169.226.66) (Ping timeout: 250 seconds)
[20:59:31] *** Joins: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net)
[21:00:11] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[21:00:22] *** Joins: Reiner_Unsinn (~quassel@ip-092-050-086-254.um29.pools.vodafone-ip.de)
[21:04:44] *** Quits: Rashad (~textual@2a01:9700:1356:c700:b9b4:2ebb:1c61:10be) (Read error: Connection reset by peer)
[21:07:06] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[21:13:06] *** Quits: Reiner_Unsinn (~quassel@ip-092-050-086-254.um29.pools.vodafone-ip.de) (Ping timeout: 256 seconds)
[21:18:18] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[21:18:30] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[21:22:24] *** Joins: peteyboy1 (~peteyboy1@95.169.226.66)
[21:22:28] *** Parts: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c) ()
[21:24:53] <gambl0re> anyone use pgadmin4?
[21:26:02] <gambl0re> how do i select a column? https://i.imgur.com/JeSlrxR.png
[21:26:07] <gambl0re> thanks
[21:27:22] <ne2k> gambl0re, no idea but what happens if you click on the pencil icon?
[21:28:47] *** Joins: Maxattax97 (~max@96-94-237-74-static.hfc.comcastbusiness.net)
[21:29:12] *** Joins: magla (~gelignite@d5360aa7.access.ecotel.net)
[21:29:25] <gambl0re> ne2k: it allows me to add some comments and change some default options but it still doesnt allow me to select any columns
[21:29:40] <gambl0re> how do i alter a table so that 2 columns must be unique?
[21:29:46] <gambl0re> thats basically what im trying to do
[21:29:56] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 245 seconds)
[21:30:07] <gambl0re> i thought i could do it thorugh the gui but i might ass well just doit through sql
[21:30:28] <ne2k> gambl0re, alter table t add constraint unique_a_b unique (a,b);
[21:31:00] <ne2k> or just alter table t add unique (a,b); to let it make up the name
[21:31:12] <gambl0re> so like: alter table add constraint unique(a,b) unique (a,b)?
[21:31:22] <ne2k> no
[21:31:36] <gambl0re> make up the name for the constraint?
[21:32:04] <ne2k> you can specify the name yourself, with constraint <name>, or you can omit it and it will invent one for you
[21:32:48] <ne2k> so, as I said, either: alter table t add constraint unique_a_b unique (a, b); or: alter table t add unique (a, b):
[21:33:04] <gambl0re> if i dont add the name, what kind of name will it create? will it make sense if i look back at it?
[21:34:01] <ne2k> TIAS
[21:35:25] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[21:35:26] <ne2k> gambl0re, afaik it will call it t_a_b_key
[21:35:45] <gambl0re> oh ok cool. thanks for the help
[21:36:36] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 240 seconds)
[21:38:03] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[21:39:56] *** Joins: econo (uid147250@user/econo)
[21:40:34] *** Quits: tozhu (~tozhu@101.84.180.251) (Read error: Connection reset by peer)
[21:42:12] *** Joins: pvn1 (~Adium@85-195-230-32.fiber7.init7.net)
[21:42:17] <gambl0re> ne2k: can i have the same constraint name for multiple tables?
[21:43:10] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[21:43:16] <ne2k> gambl0re, https://dbfiddle.uk/?rdbms=postgres_14&fiddle=fa2affb53bddb7a4da60ff90080a4323
[21:43:32] <ne2k> gambl0re, no. constraint names are global
[21:44:15] <gambl0re> I se. thanks
[21:44:40] *** Quits: ben_ (~ben@bglloyd.plus.com) (Remote host closed the connection)
[21:48:35] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:91af:f92e:54e4:10a3) (Remote host closed the connection)
[21:48:35] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 240 seconds)
[21:51:27] *** Quits: pvn1 (~Adium@85-195-230-32.fiber7.init7.net) (Quit: Leaving.)
[21:52:10] *** Joins: showstoppre (~showstopp@49.204.133.128)
[21:52:21] *** Parts: showstoppre (~showstopp@49.204.133.128) (Leaving)
[21:53:05] *** Joins: pvn1 (~Adium@85-195-230-32.fiber7.init7.net)
[21:54:12] *** Quits: the_lanetly_052_ (~the_lanet@185.30.89.14) (Ping timeout: 240 seconds)
[21:59:00] *** Quits: rvalue (~rvalue@user/rvalue) (Quit: ZNC - https://znc.in)
[22:00:34] *** Joins: rvalue (~rvalue@user/rvalue)
[22:00:41] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[22:02:14] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[22:02:57] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[22:05:06] *** Quits: pvn1 (~Adium@85-195-230-32.fiber7.init7.net) (Quit: Leaving.)
[22:06:09] *** Joins: pvn1 (~Adium@85-195-230-32.fiber7.init7.net)
[22:07:12] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Remote host closed the connection)
[22:07:35] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[22:07:37] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[22:08:04] *** Quits: psoo (~psoo@dslb-090-186-134-090.090.186.pools.vodafone-ip.de) (Ping timeout: 256 seconds)
[22:10:21] *** Joins: turlando (~turlando@user/turlando)
[22:11:47] *** Quits: noarb (~noarb@user/noarb) (Read error: Connection reset by peer)
[22:11:51] *** Joins: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net)
[22:15:54] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 250 seconds)
[22:16:44] *** Joins: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[22:16:52] *** Quits: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca) (Quit: Leaving.)
[22:21:55] <glik22_> i'm trying to monitor progress of my logical replication. sent/write/flush/replay_lsn in pg_stat_replication are all the same, and pg_replication_slots.confirmed_flush_lsn matches. pg_replication_slots.restart_lsn is a bit behind though.
[22:22:00] *** Quits: tdavis (~tdavis@2603-6081-2400-c17b-1c76-d8d0-6b8d-ee2e.res6.spectrum.com) (Remote host closed the connection)
[22:22:05] <glik22_> i guess i just don't know which values to look at
[22:22:44] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[22:23:09] *** Joins: Elodin (~elodin@user/elodin)
[22:23:45] *** Joins: ThorMojito (~Adium@modemcable212.77-202-24.mc.videotron.ca)
[22:27:34] <johto> restart_lsn lagging behind is normal
[22:30:11] *** Joins: maciek_ (~maciek@2600:1700:a412:1c00:9a12:9521:252d:be58)
[22:32:44] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[22:33:44] *** Joins: noarb (~noarb@user/noarb)
[22:34:07] *** Joins: the_lanetly_052_ (~the_lanet@185.30.89.14)
[22:34:24] <glik22_> so if i'm going to promote the replica to primary it's ok if restart_lsn is behind?
[22:35:44] *** Quits: darutoko (~darutoko@176.209.242.81) (Quit: Leaving)
[22:35:52] <maciek_> Hello. I'm trying to understand how TOASTing works (specifically, when a row exceeds toast_tuple_threshold, what happens to get it under toast_tuple_target). Has that been written up somewhere (in more detail than official docs)? Or can anyone point me to the right place in the source?
[22:37:04] *** immibis_ is now known as immibis
[22:37:35] <glik22_> maciek_: i found this pretty helpful https://hakibenita.com/sql-medium-text-performance
[22:38:08] <Zr40> ??toast
[22:38:08] <pg_docbot> https://www.postgresql.org/docs/current/static/storage-toast.html
[22:38:39] *** Quits: baldpope_ (~baldpope@99.153.6.113) (Read error: Connection reset by peer)
[22:39:16] <Zr40> maciek_: what kind of information are you looking for?
[22:40:05] *** Quits: the_lanetly_052_ (~the_lanet@185.30.89.14) (Ping timeout: 256 seconds)
[22:40:05] <Zr40> the things that can happen to toasted values (note, values, not rows) is described in the list in 70.2.1
[22:40:06] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[22:40:10] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Client Quit)
[22:40:35] <maciek_> glik22_: ah yeah, I just read that the other day--it's a great article, but I'm looking for details on which fields get TOASTed when the threshold is exceeded.
[22:41:34] <johto> TOASTing is done separately on each field
[22:41:42] <johto> so how wide the row is is not really relevant
[22:42:21] <Zr40> maciek_: PLAIN columns remain untouched, EXTENDED columns get toasted and compressed, EXTERNAL columns only get toasted, MAIN columns only get compressed (but _may_ still get toasted if needed), and it stops as soon as enough work has been done to reduce the row to less than TOAST_TUPLE_TARGET
[22:43:48] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:44:15] *** Quits: ejjfunky (~ejjfunky@125.164.22.233) (Read error: Connection reset by peer)
[22:44:24] <maciek_> Zr40: ok, great. and the columns are processed in order? so if I have a typically-short-ish extended-storage column before a typically-much-longer column, they'll both get toasted?
[22:45:27] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[22:45:27] <maciek_> johto: hello again :). toast_tuple_target and toast_tuple_threshold apply to the row as a whole, if i understand the docs correctly.
[22:46:27] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[22:46:55] <Zr40> maciek_: look at toast_insert_or_update() for all the details (it's quite long)
[22:47:12] <maciek_> ok, thanks!
[22:49:26] *** Quits: Maxattax97 (~max@96-94-237-74-static.hfc.comcastbusiness.net) (Ping timeout: 256 seconds)
[22:50:25] *** Quits: ish (~ish@codemonkey.net) (Quit: The Lounge - https://thelounge.chat)
[22:50:49] *** Joins: ish (~ish@codemonkey.net)
[22:51:24] *** Quits: ish (~ish@codemonkey.net) (Client Quit)
[22:53:57] <maciek_> ah, no, it looks like it's much more clever than just going column-by-column--neat! https://github.com/postgres/postgres/blob/27b77ecf9f4d5be211900eda54d8155ada50d696/src/backend/access/heap/heaptoast.c#L179-L218
[22:54:12] <j0hannes> I have a question regarding tsvector: format('%L:1', '\:') returns E'\\:':1, but SELECT format('%L:1', '\:')::tsvector gives a syntax error
[22:55:46] *** Quits: darkbit (~db@136.158.8.67) (Ping timeout: 245 seconds)
[22:55:48] <j0hannes> I have been searching for the code where a tsvector string is processed, but the fts code turned out to be too abstract for me to see what happens in this case
[22:57:52] *** Joins: carragom (~textual@201.204.94.76)
[22:59:35] *** Joins: Simplar (~Simplar@188.163.93.241)
[22:59:51] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[22:59:56] *** Joins: sky-6 (~sky@user/sky-)
[23:01:08] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[23:02:29] *** Joins: sky-9 (~sky@user/sky-)
[23:03:25] *** Quits: sky- (~sky@user/sky-) (Ping timeout: 240 seconds)
[23:03:25] *** sky-9 is now known as sky-
[23:03:32] *** Joins: volga629 (~volga629@72.139.93.26)
[23:04:28] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[23:04:52] *** Joins: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[23:05:00] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[23:05:24] *** Joins: Elodin (~elodin@user/elodin)
[23:06:02] *** Quits: sky-6 (~sky@user/sky-) (Ping timeout: 240 seconds)
[23:07:00] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 240 seconds)
[23:09:20] *** Joins: mizi (~mizi@user/mizi)
[23:20:07] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[23:20:38] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[23:21:25] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Client Quit)
[23:24:23] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[23:25:12] *** Quits: pg_docbot (~docbot_li@donatu.postgresql.org) (Quit: Signal received: INT - shutting down)
[23:25:22] *** Joins: csm3105 (~csm3105@31.177.98.6)
[23:25:53] *** Joins: pg_docbot (~docbot_li@donatu.postgresql.org)
[23:27:31] *** Joins: sky-9 (~sky@user/sky-)
[23:27:52] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[23:28:12] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 240 seconds)
[23:28:26] *** Joins: ben_ (~ben@bglloyd.plus.com)
[23:28:29] *** Joins: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz)
[23:31:02] *** Quits: sky- (~sky@user/sky-) (Ping timeout: 240 seconds)
[23:31:02] *** sky-9 is now known as sky-
[23:31:02] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Read error: Connection reset by peer)
[23:32:44] *** Quits: csm3105 (~csm3105@31.177.98.6) (Quit: Leaving)
[23:32:47] *** Quits: pvn1 (~Adium@85-195-230-32.fiber7.init7.net) (Quit: Leaving.)
[23:32:52] *** Joins: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[23:32:58] *** Joins: pvn1 (~Adium@85-195-230-32.fiber7.init7.net)
[23:33:07] *** Quits: uncleyea1 (~ian@pppoe.178-66-156-85.dynamic.avangarddsl.ru) (Remote host closed the connection)
[23:34:11] *** Joins: uncleyear (~ian@pppoe.178-66-156-85.dynamic.avangarddsl.ru)
[23:35:37] *** Quits: xenoterracide_ (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[23:36:08] *** Joins: gr33nR10t (~greenriot@user/gr33nr10t)
[23:36:52] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[23:37:00] *** Quits: pvn1 (~Adium@85-195-230-32.fiber7.init7.net) (Ping timeout: 240 seconds)
[23:37:55] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[23:38:10] *** Quits: tehenderz (~tehenderz@ti0018a400-6465.bb.online.no) (Ping timeout: 256 seconds)
[23:38:17] *** Joins: tehenderz (~tehenderz@ti0018a400-8534.bb.online.no)
[23:39:11] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[23:39:20] *** Joins: shokohsc4 (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr)
[23:40:09] *** Quits: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz) (Ping timeout: 256 seconds)
[23:40:09] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-1472-129.w92-169.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[23:40:09] *** shokohsc4 is now known as shokohsc
[23:40:13] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Remote host closed the connection)
[23:41:35] *** Joins: sky-1 (~sky@user/sky-)
[23:44:44] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 250 seconds)
[23:45:00] *** Quits: sky- (~sky@user/sky-) (Ping timeout: 240 seconds)
[23:45:00] *** sky-1 is now known as sky-
[23:47:32] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[23:49:21] *** Quits: zelest (jesper@81-233-184-27-no13.tbcn.telia.com) (Quit: If you wake up in a house that's full of smoke, don't panic! Call me and I'll tell you a joke!)
[23:49:46] *** Joins: pvn1 (~Adium@85-195-230-32.fiber7.init7.net)
[23:52:54] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[23:53:30] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Quit: ZNC 1.8.2 - https://znc.in)
[23:54:36] *** Parts: siiky (~siiky@2001:8a0:ff44:f800:8372:5d19:cba8:f58b) ()
[23:57:02] *** Quits: pvn1 (~Adium@85-195-230-32.fiber7.init7.net) (Quit: Leaving.)
