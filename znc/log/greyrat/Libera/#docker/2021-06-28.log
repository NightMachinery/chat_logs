[00:00:43] *** Quits: Guest1115 (~Ryu945@154.3.251.82) (Client Quit)
[00:00:55] *** Joins: Ryu (~Ryu945@154.3.251.82)
[00:01:20] *** Ryu is now known as Guest1421
[00:01:41] *** Quits: vincent- (~vincent-@cpc87559-seve28-2-0-cust94.13-3.cable.virginm.net) (Quit: Leaving)
[00:02:02] *** Quits: Guest1421 (~Ryu945@154.3.251.82) (Remote host closed the connection)
[00:02:11] *** Joins: ryu (~Ryu945@154.3.251.91)
[00:02:34] *** ryu is now known as Guest942
[00:04:54] *** Guest942 is now known as Ryu945
[00:06:40] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[00:06:54] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[00:21:49] *** Joins: scadman (~scadman@cpc145252-maid8-2-0-cust473.20-1.cable.virginm.net)
[00:29:09] *** Quits: [fspy] (~fspy@user/fspy) (Quit: [fspy])
[00:34:03] *** Quits: fmy (~fmy@60.52.220.195) (Remote host closed the connection)
[00:35:34] *** Joins: fspy (~fspy@user/fspy)
[00:36:09] *** Quits: fspy (~fspy@user/fspy) (Client Quit)
[00:37:54] *** Joins: fspy (~fspy@user/fspy)
[00:38:20] *** Quits: tyson2 (~user@cpe44d9e795a64f-cm688f2e2dfaa0.cpe.net.cable.rogers.com) (Remote host closed the connection)
[00:38:26] *** Quits: fspy (~fspy@user/fspy) (Client Quit)
[00:38:50] *** Joins: fspy (~fspy@user/fspy)
[00:38:52] *** Quits: fspy (~fspy@user/fspy) (Client Quit)
[00:39:44] *** Joins: fspy (~fspy@user/fspy)
[00:39:48] *** Quits: fspy (~fspy@user/fspy) (Client Quit)
[00:40:35] *** Joins: fspy (~fspy@user/fspy)
[00:41:50] *** Quits: goddard (~goddard@user/goddard) (Ping timeout: 250 seconds)
[00:42:01] *** Quits: fspy (~fspy@user/fspy) (Client Quit)
[00:44:18] *** Joins: fspy (~fspy@user/fspy)
[00:45:06] *** Quits: Haxxa (~Haxxa@122.199.47.41) (Quit: Haxxa flies away.)
[00:45:16] *** Quits: fspy (~fspy@user/fspy) (Remote host closed the connection)
[00:47:04] *** Joins: fspy (~fspy@user/fspy)
[00:47:58] *** Joins: Haxxa (~Haxxa@122.199.47.41)
[00:49:02] *** Joins: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net)
[00:49:04] *** Quits: Ryu945 (~Ryu945@154.3.251.91) (Quit: Leaving)
[00:51:03] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Read error: Connection reset by peer)
[00:55:26] *** Joins: flump (~flump@user/flump)
[01:01:02] *** Joins: pvdp (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au)
[01:04:20] *** Joins: glider (~glider@user/glider)
[01:21:32] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 268 seconds)
[01:21:58] *** Joins: cliluw (~cliluw@47.147.80.149)
[01:26:31] *** Quits: sleym (~sleym@23.81.181.4) (Quit: sleym)
[01:41:25] *** Joins: bradley (~bradley@user/bradley)
[01:52:57] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[01:54:40] *** Joins: Ryu (~Ryu945@154.3.251.91)
[01:55:04] *** Ryu is now known as Guest1715
[01:55:48] *** Guest1715 is now known as Ryu945
[01:57:34] <Ryu945> Is there a way to take an existing docker container deployment that uses NGINX and add a new service to it without having to completely rip the setup apart and deploy a new docker compose file with that new service added?
[01:59:17] <Ryu945> Essentially, I have NGINX reverse proxy -> Service A.   I want to make it NGINX reverse proxy -> Service A and B .   Any way to do this without destroying the current setup?
[02:02:10] <Ryu945> Ideally, I would like a way to do this in a docker compose file
[02:04:25] <tabakhase> Ryu945 you can connect 2 stacks by marking a network as "external" on one end
[02:04:49] <tabakhase> (otherwise "down" will try to remove it and obvs fail cause your other container is still attached)
[02:05:33] <Ryu945> tabakhase: what do you mean by connect two stacks?
[02:05:48] <artok> well written compose and docker images would take changes and just update needed stuff
[02:05:56] <tabakhase> or if you want to sneak something into that other stack - you can have "docker-compose.override.yml" next to the normal one (say dev changes you dotn wanne commit)
[02:06:06] <tabakhase> not entirely sure what your problem is at core ;-)
[02:08:10] <Ryu945> I have a group of containers I deployed one service on.   It uses NGINX, letsencrypt plus the service.   I later did research an unrelated service I want to start running.   To use a compose file to set it up from how I understand it, I have to delete everything.  Add the new service to the existing compose file and then run the full setup of both services.
[02:08:29] *** Quits: versageek (~versageek@wikimedia/Versageek) (Remote host closed the connection)
[02:08:52] *** Joins: versageek (~versageek@wikimedia/Versageek)
[02:08:58] <gordonjcp> Ryu945: that doesn't make a lot of sense
[02:09:13] <gordonjcp> Ryu945: what exactly are you trying to do?
[02:09:35] <gordonjcp> Ryu945: from the description it sounds like you're using nginx to proxy a web service, and then now you want to proxy another web service through the same nginx?
[02:11:48] <Ryu945> gordonjcp: Yes.   I originally tried to set it up on a different LAN IP and just run a seperate instance of NGNIX and letsencrypt but that fails for some reason.  I haven't identified why but I can't use the same NGINX/letsencrypt on the same server.  For reference, this server is manually assigned to have multiple IP address.
[02:12:28] <gordonjcp> Ryu945: you can't run two public-facing nginxes because you can't have two port 80s
[02:12:47] <gordonjcp> Ryu945: same reason you can't run nginx and apache on the same "bare metal"
[02:13:05] <Ryu945> gordonjcp: you can if the server has both LAN address 1.2.3.4 and 1.2.3.5 ip address I thought
[02:13:25] <gordonjcp> Ryu945: yes but then you're dicking around binding servers to ports and so on
[02:13:54] <gordonjcp> Ryu945: far better to have a single reverse proxy that handles all your SSL stuff, and then everything else "plugs in" to tat
[02:13:57] <gordonjcp> *that
[02:14:39] <Ryu945> gordonjcp: How would I use docker compose to add this new service behind an already existing NGINX container?
[02:15:33] <gordonjcp> Ryu945: stop your existing service, add an external network, add that network to your nginx container
[02:15:43] <gordonjcp> configure that nginx container to proxy your new service
[02:15:50] <Ryu945> artok: what did you mean by that?
[02:16:08] <gordonjcp> configure your new service to start using the external network
[02:16:09] <Ryu945> I feel like your there is more to what you are saying.
[02:16:23] <gordonjcp> Ryu945: tbh, if you use something like Traefik a lot of the work is taken care of for you
[02:18:33] <Ryu945> gordonjcp: I ended up using this because it did certificates without needing access to port 80 and 443
[02:19:33] <Ryu945> I don't know what you mean by configure your new service to start using external network.
[02:21:04] <Ryu945> I have one server I am deploying several services to.   Some are internet exposed others cannot be internet exposed.  My original plan was to use multiple IPs assigned to one server.  Each IP would get its own NGINX setup.   The internet exposed service would only be redirected to the one IP that has an internet exposed service.
[02:24:05] <artok> if you design your infrastructure well on start, you can dynamically resize everything without real downtime, that said, amend nginx configuration and add your extra services to that compose file and you should have new setup going on with docker-compose up, given that you've used volumes properly to save persistent data
[02:25:25] <artok> that would be the optimal case, but as I can't see your work from here no-one can really help you
[02:26:45] <artok> upload your compose file somewhere  (you can **** all sensitive data) and someone might see what is your problem if any
[02:30:02] *** Quits: Sven_vB (~sven@user/sven-vb/x-2094958) (Remote host closed the connection)
[02:30:28] *** Joins: Sven_vB (~sven@user/sven-vb/x-2094958)
[02:35:21] <Ryu945> artok: the top one is the service I want to merge with the existing bottom one.   https://paste.centos.org/view/c5c2afcb
[02:35:37] *** Quits: mossman93 (~quassel@user/mossman93) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[02:36:02] *** Joins: mossman93 (~quassel@user/mossman93)
[02:36:50] <artok> you seem to change volume names so no state is saved 
[02:37:55] <Ryu945> artok: what do you mean?   The volume names don't change.  The top one has new volumes for a new service.
[02:38:32] <Ryu945> You guys were saying that I should use the same nginx though and move that service you see in the top file to the bottom file
[02:38:40] <Ryu945> Thus removing the need for some of those volumes
[02:39:19] *** Quits: onizu (uid373383@id-373383.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[02:40:07] <artok> draw the picture of your infrastructure, flowchart of services, then it's easier to understand what you're trying to do 
[02:40:52] <artok> but yes, you can add service to existing stack and then amend proxy configuration so that will route traffic as needed
[02:42:16] <Ryu945> Assume I use one NGINX container.    NGINX Reverse proxy -> Service A   and NGINX Reverse proxy -> Service B.   I have the first one already deployed.   Is there some other detail you were looking for when you said graph?
[02:42:46] <artok> it's just advise so 
[02:43:00] <artok> you'll keep map of everything yourself also
[02:43:01] <Ryu945> I'm trying to make sure I give you the details your asking for
[02:43:44] <Ryu945> The actual hard is just one router and one Centos server
[02:43:48] <Ryu945> *hardware*
[02:44:21] <artok> thing is, I don't know about those images how they are configured etc.
[02:46:15] *** Quits: factor (~factor@c-66-30-67-217.hsd1.ma.comcast.net) (Read error: Connection reset by peer)
[02:47:05] <Ryu945> artok: I know the NGINX/letsencrypt are made to use dns verification so port 80 and 443 don't need to be open
[02:47:48] *** Joins: getSomethingGood (~getSometh@d72-39-70-155.home1.cgocable.net)
[02:49:05] *** Joins: factor (~factor@c-66-30-67-217.hsd1.ma.comcast.net)
[02:52:16] *** Quits: tex (~super@user/dix) (Ping timeout: 272 seconds)
[02:54:13] <artok> keep what you have and amend
[02:54:47] <Ryu945> artok: don't you have to tear down a network before you can rerun the the same docker compose file?
[02:55:15] <Ryu945> artok: network looks something like this.  https://paste.centos.org/view/05eb24eb
[02:55:20] <Ryu945> image got clipped
[02:55:35] <artok> no you don't have to
[02:56:14] <Ryu945> artok: That will not mess up the existing deployment?
[02:56:41] <Ryu945> by network, i mean the group of docker containers
[02:57:16] <Ryu945> I can just add a new service to a master file and it will leave everything already deployed alone?
[02:57:48] <artok> yeah
[02:59:53] <Ryu945> artok: How do I handle port forwarding though.   I have the first service set as port 80:80 and 443:443 and it does SSL termination at the proxy.  The other service is accessed on 8123.   How would I tell it to go to 8123 for one service the current port for the current service?
[03:02:02] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Quit: Leaving)
[03:02:47] <artok> nginx does proxying also on that service? add that port to nginx listening and then configure it to forward traffic to container
[03:03:15] <artok> if not, you can directly set port forwarding to that service
[03:03:39] <Ryu945> the outside ports don't change, their both 80 and 443.    It is just that on the inside one service needs port 80 and the other needs port 8123 so I am not sure how to set that
[03:05:49] <Ryu945> artok: I'd like to figure out how to do it in the docker compose file and not have to go in and change an http://website.com to http:website.com:8123
[03:06:47] <Ryu945> i mean proxy_pass http://website.com to proxy_pass http://website.com:8123
[03:07:29] <Ryu945> artok: Can you do two inside ports to one outside port?
[03:10:38] *** Quits: finsternis (~X@23.226.237.192) (Ping timeout: 258 seconds)
[03:13:37] <artok> umm what?
[03:16:27] <Ryu945> artok: i talk to NGINX only on port 80 and 443.   Service A uses port 80 on the inside of the docker network.   Service B uses port 8123 on the inside of the docker network.   How do I tell the NGINX proxy to proxy_pass to 80 for Service A and 8123 for Service B on the docker compose file?
[03:17:40] <artok> it might be possible on environmetn variables sometimes, you need to check manual of that who made the image
[03:20:00] *** Joins: finsternis (~X@23.226.237.192)
[03:22:41] *** Quits: jimmyb (~jimmyb@user/jimmyb) (Quit: The Lounge - https://thelounge.chat)
[03:28:34] *** Quits: jkwnki (~jkwnki@p4fedb926.dip0.t-ipconnect.de) (Ping timeout: 268 seconds)
[03:32:50] *** Joins: sleym (~sleym@23.81.181.4)
[03:34:43] *** Quits: chasmo77 (~chas77@71.63.241.168) (Ping timeout: 265 seconds)
[03:34:50] *** Joins: jimmyb (~jimmyb@user/jimmyb)
[03:38:06] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 265 seconds)
[03:38:53] *** Quits: scadman (~scadman@cpc145252-maid8-2-0-cust473.20-1.cable.virginm.net) (Quit: Konversation terminated!)
[03:45:00] *** Quits: Ryu945 (~Ryu945@154.3.251.91) (Quit: Leaving)
[03:49:26] *** Quits: ultima (~ultima@23.81.113.230) (Quit: ZNC 1.8.2 - https://znc.in)
[03:59:45] *** Quits: sleym (~sleym@23.81.181.4) (Quit: sleym)
[04:00:14] <Lutin> artok what do I miss here you think ? https://pastebin.com/rijFH9Yi
[04:01:04] <Tabmow> Lutin: permissions?
[04:01:26] <Lutin> Tabmow but where ? --privileged is no option I would say
[04:01:46] *** Joins: ultima (~ultima@23.81.113.230)
[04:02:44] *** Quits: jpmh (uid445439@id-445439.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[04:03:49] <Tabmow> Not sure exactly, does it all work out of docker using the same user?
[04:06:45] <Lutin> Tabmow erm, running it as... erm...
[04:08:58] *** Joins: m1n10n (georgecloo@cpe-76-184-204-251.tx.res.rr.com)
[04:09:10] *** Quits: Atum_ (~IRC@user/atum/x-2392232) (Quit: Atum_)
[04:17:46] *** Quits: ultima (~ultima@23.81.113.230) (Ping timeout: 272 seconds)
[05:04:23] *** Quits: lemonzest (~lemonzest@user/lemonzest) (Quit: Quitting)
[05:12:38] <Lutin> Tabmow ok seems to be that the modules are not loaded but they weird thing is... kernel headers, everything is installed, even wireguard-dkms
[05:18:24] *** Joins: Erisa (~Erisa@51.15.106.41)
[05:30:21] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:36:50] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 268 seconds)
[05:37:24] *** Joins: cliluw (~cliluw@47.147.80.149)
[05:49:01] *** Joins: factor4 (~factor@c-66-30-67-217.hsd1.ma.comcast.net)
[05:50:33] *** Joins: vlm (~vlm@user/vlm)
[05:52:46] *** Quits: factor (~factor@c-66-30-67-217.hsd1.ma.comcast.net) (Ping timeout: 272 seconds)
[05:52:46] *** factor4 is now known as factor
[05:58:38] *** Joins: pete443_ (~pete@user/pete443)
[05:59:18] *** Joins: versa_gone (~versageek@32.215.132.28)
[05:59:21] <Tabmow> Lutin: what are you trying to achieve?
[05:59:41] *** Quits: pete443 (~pete@user/pete443) (Ping timeout: 258 seconds)
[05:59:47] *** Joins: Brainium (~brainium@user/brainium)
[05:59:47] <Lutin> Tabmow running wireguard on docker... upgraing to Ubunu 21.04... kernel is too old
[06:00:10] <Lutin> *upgrading
[06:02:08] *** Quits: versageek (~versageek@wikimedia/Versageek) (Ping timeout: 265 seconds)
[06:04:33] *** Quits: versa_gone (~versageek@32.215.132.28) (Ping timeout: 265 seconds)
[06:06:10] *** Joins: ada_ (~ada@user/ada/x-9065485)
[06:06:10] *** ChanServ sets mode: +o ada_
[06:25:26] *** Quits: Lutin (~Lutin@user/lutin) (Quit: Lutin)
[06:30:22] *** Joins: holbrode (sid339826@id-339826.tinside.irccloud.com)
[06:30:34] *** Quits: getSomethingGood (~getSometh@d72-39-70-155.home1.cgocable.net) (Remote host closed the connection)
[06:35:19] *** Quits: holbrode (sid339826@id-339826.tinside.irccloud.com) (Quit: Updating details, brb)
[06:35:29] *** Joins: holbrode (sid339826@id-339826.tinside.irccloud.com)
[07:06:21] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[07:06:33] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[07:14:52] *** Quits: thanas (~thanas@user/thanas) (Ping timeout: 272 seconds)
[07:25:42] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 250 seconds)
[07:27:09] *** Joins: HaMsTeRs (~mx@49.130.89.2)
[07:27:25] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[07:30:45] *** Joins: thanas (~thanas@user/thanas)
[07:34:56] *** Quits: artok (~azo@mobile-access-5672e1-99.dhcp.inet.fi) (Ping timeout: 265 seconds)
[07:43:44] *** Quits: HaMsTeRs (~mx@49.130.89.2) (Quit: Konversation terminated!)
[07:47:00] *** Joins: kikijiki (~Thunderbi@user/kikijiki)
[07:48:11] *** Quits: thanas (~thanas@user/thanas) (Ping timeout: 268 seconds)
[07:49:10] *** Joins: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi)
[07:53:16] *** Quits: Brainium (~brainium@user/brainium) (Quit: Konversation terminated!)
[07:53:44] *** Quits: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi) (Ping timeout: 272 seconds)
[07:55:17] *** Joins: thanas (~thanas@user/thanas)
[08:09:26] *** Joins: guy_frm_yogaland (~gourab@2409:4062:2386:142:95a3:1309:3344:513b)
[08:10:12] <guy_frm_yogaland> hello everyone
[08:18:28] *** Quits: guy_frm_yogaland (~gourab@2409:4062:2386:142:95a3:1309:3344:513b) (Quit: Konversation terminated!)
[08:18:46] *** Joins: guy_frm_yogaland (~gourab@2409:4062:2386:142:95a3:1309:3344:513b)
[08:22:43] *** Quits: OPK (~OPK@user/opk) (Ping timeout: 268 seconds)
[08:34:31] *** Quits: notsponsible (~notsponsi@62.182.99.49) (Quit: notsponsible)
[08:36:30] *** Joins: notsponsible (~notsponsi@62.182.99.49)
[08:36:47] <guy_frm_yogaland> I have created a new system user called app and assigned it to a group called app, and when I set the user to app in the dockerfile, and then build -> it says permission error, use root and I don't want to run a container as root user, what should I do now?
[08:40:48] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[08:43:34] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 265 seconds)
[08:44:27] *** Joins: cliluw (~cliluw@47.147.80.149)
[08:45:20] *** Joins: OPK (~OPK@user/opk)
[08:52:48] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[08:54:27] <guy_frm_yogaland> can anybody look at this dockerfile and tell me what am I doing wrong with it, please?   https://dpaste.org/DndG
[08:59:36] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[09:03:24] *** Quits: flump (~flump@user/flump) (Ping timeout: 272 seconds)
[09:04:27] *** Joins: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi)
[09:05:52] *** Quits: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi) (Client Quit)
[09:15:30] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Quit: CodeSpelunker)
[09:23:02] *** Quits: m1n10n (georgecloo@cpe-76-184-204-251.tx.res.rr.com) ()
[09:26:31] *** Quits: incognito (~relativit@user/incognito) (Ping timeout: 268 seconds)
[09:28:49] *** Joins: flump (~flump@user/flump)
[09:45:27] *** Quits: flump (~flump@user/flump) (Remote host closed the connection)
[09:49:03] *** Joins: thc202 (~thc202@user/thc202)
[09:50:06] <coc0nut> https://docs.docker.com/compose/install/ <- following this tutorial installing docker-compose version 1.29.2, but further down it says 1.5.x... I want the latest :p probably.. and "docker-compose migrate-to-labels" doesnt work :|
[09:56:44] *** Quits: factor (~factor@c-66-30-67-217.hsd1.ma.comcast.net) (Ping timeout: 252 seconds)
[09:58:45] *** Joins: lemonzest (~lemonzest@user/lemonzest)
[10:09:15] *** Quits: guy_frm_yogaland (~gourab@2409:4062:2386:142:95a3:1309:3344:513b) (Read error: Connection reset by peer)
[10:22:06] *** Quits: tardisx (~tardisx@2400:8902::f03c:91ff:fe89:d107) (Quit: ciao)
[10:23:35] *** Quits: _till_ (~till@user/till/x-8616149) (Ping timeout: 268 seconds)
[10:27:19] *** Joins: rpthms (~rpthms@user/rpthms)
[10:30:52] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 265 seconds)
[10:31:04] *** Joins: cliluw (~cliluw@47.147.80.149)
[10:33:22] <Tabmow> coc0nut: it tells you how to install different (and newer) versions on that page.
[10:33:46] *** Quits: acid (~acid@user/acid) (Ping timeout: 250 seconds)
[10:34:26] *** Joins: acid (~acid@user/acid)
[10:34:40] *** Joins: incognito (~relativit@user/incognito)
[10:40:07] *** Joins: tardisx (~tardisx@2400:8902::f03c:91ff:fe89:d107)
[10:49:58] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Read error: Connection reset by peer)
[10:50:38] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[10:52:04] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Read error: Connection reset by peer)
[10:52:29] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[10:53:16] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Read error: Connection reset by peer)
[10:53:59] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[10:57:21] *** Joins: tex (~super@user/dix)
[11:09:55] <geirha> coc0nut: with latest docker you no longer need docker-compose; it has it integrated. Just run  docker compose  (without the -) instead
[11:16:48] *** Joins: stivo (~stivo@p4fe9592e.dip0.t-ipconnect.de)
[11:16:52] *** Joins: Ohlov3 (~Ohlov3@dyndsl-091-248-236-140.ewe-ip-backbone.de)
[11:17:31] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 268 seconds)
[11:18:15] *** Joins: cliluw (~cliluw@47.147.80.149)
[11:22:46] <coc0nut> ah, I kinda felt that on my belly... thx!
[11:23:21] <Tabmow> There are subtle differences between 'docker-compose' and 'docker compose' I've found though
[11:23:56] <coc0nut> im looking to do reverse proxy with docker containers... early in the learning tho :P
[11:27:52] <aminvakil> coc0nut: take your time, when you feel ready, you might want to take a look at traefik too
[11:29:08] <geirha> Tabmow: Do you remember what those differences were?
[11:31:46] <coc0nut> its in fact traefik im preparing for... but, should traefik be on one vm, and then the apps in another vm? or can all be in same machine?
[11:32:11] *** Quits: notsponsible (~notsponsi@62.182.99.49) (Quit: notsponsible)
[11:32:21] *** Joins: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de)
[11:34:05] *** Quits: finsternis (~X@23.226.237.192) (Remote host closed the connection)
[11:34:54] <aminvakil> for a simple application all can be in one docker-compose
[11:36:06] *** Quits: rpthms (~rpthms@user/rpthms) (Remote host closed the connection)
[11:39:34] *** Quits: Ohlov3 (~Ohlov3@dyndsl-091-248-236-140.ewe-ip-backbone.de) (Quit: The Lounge - https://thelounge.chat)
[11:40:22] *** Joins: jkwnki (~jkwnki@p4fedb926.dip0.t-ipconnect.de)
[11:42:38] *** Joins: onizu (uid373383@id-373383.highgate.irccloud.com)
[11:46:16] *** Joins: notsponsible (~notsponsi@62.182.99.49)
[11:46:58] <akik> i have this message on a swarm worker node that joins the swarm after one day downtime "Failed to join nnnn: No installed keys could decrypt the message". i had to restart dockerd to get it to join the swarm
[11:47:54] <akik> that message seems to be from consul (google search results point to it)
[11:50:24] <akik> is there something i could do to fix that?
[11:55:30] *** Joins: pvalenta (~petr@mail.open-system.cz)
[11:59:56] <akik> i found this issue which is still open: https://github.com/moby/moby/issues/41722
[12:00:53] <akik> open for 6 months with no comments :\
[12:08:44] *** Quits: pvalenta (~petr@mail.open-system.cz) (Quit: ZNC - https://znc.in)
[12:09:06] *** Joins: pvalenta (~petr@mail.open-system.cz)
[12:13:58] *** Quits: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de) (Ping timeout: 268 seconds)
[12:14:07] *** Joins: varaindemian (~varaindem@86.124.22.73)
[12:15:44] *** Joins: Ohlov3 (~Ohlov3@dyndsl-091-248-236-140.ewe-ip-backbone.de)
[12:27:34] *** Quits: notevil (~notevil@user/notevil) (Quit: ZNC - http://znc.in)
[12:27:34] *** Quits: beanzilla (beanzilla@user/beanzilla) (Quit: ZNC 1.8.2 - https://znc.in)
[12:27:59] *** Joins: beanzilla (~beanzilla@user/beanzilla)
[12:27:59] *** Joins: notevil (notevil@user/notevil)
[12:29:10] *** Quits: notevil (notevil@user/notevil) (Client Quit)
[12:29:10] *** Quits: beanzilla (~beanzilla@user/beanzilla) (Client Quit)
[12:29:39] *** Joins: beanzilla (~beanzilla@user/beanzilla)
[12:29:40] *** Joins: notevil (~notevil@user/notevil)
[12:30:22] *** Joins: thiras (~thiras@user/thiras)
[12:42:07] *** Joins: AnapodoPsalidaki (~AnapodoPs@2a02:587:2900:3751:2677:5d39:9ae:869d)
[13:02:32] *** Quits: selckin (~selckin@user/selckin) (Quit: selckin)
[13:02:42] *** Joins: selckin (~selckin@user/selckin)
[13:04:08] *** Joins: guy_frm_yogaland (~gourab@2409:4062:2386:142:95a3:1309:3344:513b)
[13:05:28] *** Quits: guy_frm_yogaland (~gourab@2409:4062:2386:142:95a3:1309:3344:513b) (Remote host closed the connection)
[13:08:07] *** Joins: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de)
[13:08:20] *** Joins: jonifen (~jonifen@user/jonifen)
[13:20:01] *** Joins: wattux (~wattux@212.51.23.106)
[13:20:22] *** Joins: patstoms (~patstoms@tzt.lv)
[13:29:45] *** Joins: fibsifan (~quassel@x4dbfa993.dyn.telefonica.de)
[13:52:29] *** Joins: Lutin (~Lutin@user/lutin)
[13:52:57] *** Quits: PaulFranz (~pfranz@c-73-187-178-34.hsd1.pa.comcast.net) (Quit: leaving)
[14:07:24] *** Quits: Ohlov3 (~Ohlov3@dyndsl-091-248-236-140.ewe-ip-backbone.de) (Ping timeout: 272 seconds)
[14:08:49] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 258 seconds)
[14:09:15] *** Joins: cliluw (~cliluw@47.147.80.149)
[14:17:32] *** Joins: RV06 (~RV@lfbn-nic-1-430-119.w90-116.abo.wanadoo.fr)
[14:30:29] *** Joins: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi)
[14:31:09] *** Joins: rsx (~dummy@ppp-188-174-128-157.dynamic.mnet-online.de)
[14:32:33] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[14:32:41] *** Joins: gschanuel7 (~gschanuel@user/gschanuel)
[14:52:52] *** Joins: rpthms (~rpthms@user/rpthms)
[14:54:02] *** Joins: TomyWork (~TomyLobo@p200300e80f133c000512b9808dfc1445.dip0.t-ipconnect.de)
[14:55:36] *** Joins: tyson2 (~user@bras-base-toroon0624w-grc-10-70-54-112-49.dsl.bell.ca)
[14:55:46] *** Joins: Sherpard2 (~VirtualPa@user/sherpard2)
[14:58:48] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[14:59:50] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[15:00:09] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[15:00:34] *** Quits: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 265 seconds)
[15:03:52] *** Quits: CombatVet (~c4@user/combatvet) (Remote host closed the connection)
[15:05:16] *** Joins: CombatVet (~c4@user/combatvet)
[15:06:55] *** Quits: incognito (~relativit@user/incognito) (Ping timeout: 268 seconds)
[15:16:52] *** Quits: varaindemian (~varaindem@86.124.22.73) (Quit: Client closed)
[15:31:33] *** Joins: Atum_ (~IRC@user/atum/x-2392232)
[15:35:22] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[15:39:35] *** Joins: varaindemian (~varaindem@86.124.22.73)
[15:41:47] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[15:50:45] *** Joins: Lauxley (~lauxley@2a01:e34:ec55:2700:a596:168e:4b57:f991)
[15:53:29] <Lauxley> Hello, I'm trying to create a base image containing some heavy libs but I'm not sure how to reference it in my main Dockerfile? (it's not clear in https://docs.docker.com/develop/develop-images/baseimages/)
[15:57:49] *** Quits: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de) (Ping timeout: 268 seconds)
[15:57:56] *** Joins: Ohlov3 (~Ohlov3@dyndsl-095-033-058-193.ewe-ip-backbone.de)
[16:00:43] *** Joins: Crassus (~Crassus@user/crassus)
[16:04:50] *** Quits: jazzy (~jaziz@2600:380:8753:52bc:1884:3ec0:3ac7:33b1) (Ping timeout: 250 seconds)
[16:10:47] *** Quits: wattux (~wattux@212.51.23.106) (Quit: Client closed)
[16:12:10] *** Quits: jkwnki (~jkwnki@p4fedb926.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[16:13:54] *** Joins: s0ullight (~s0ullight@143.169.223.186)
[16:16:29] <s0ullight> I want to containerize a postgres db. Should I simply create a dump and import it to the containerized postgres installation or mount the postgres folder?
[16:17:55] <artok> s0ullight: create clean containerized pg service, data on named volume, and load the dump from existing db to it
[16:18:45] <s0ullight> could you expand on "data on named volume"?
[16:19:17] <artok> https://docs.docker.com/storage/volumes/
[16:19:21] <artok> not bind mount
[16:20:48] *** Joins: rickumali (~rick@2601:19c:4200:4160::11be)
[16:22:29] *** Quits: AnapodoPsalidaki (~AnapodoPs@2a02:587:2900:3751:2677:5d39:9ae:869d) (Ping timeout: 268 seconds)
[16:26:06] *** Joins: wattux (~wattux@212.51.23.106)
[16:32:22] *** Quits: Code_Bleu (~Code_Bleu@user/code-bleu/x-6939963) (Ping timeout: 252 seconds)
[16:32:40] *** Quits: Crassus (~Crassus@user/crassus) (Quit: Textual IRC Client: www.textualapp.com)
[16:32:41] *** Joins: Code_Bleu (~Code_Bleu@user/code-bleu/x-6939963)
[16:32:44] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[16:33:08] *** Joins: thiras (~thiras@user/thiras)
[16:36:52] *** Quits: Haxxa (~Haxxa@122.199.47.41) (Ping timeout: 272 seconds)
[16:37:33] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 258 seconds)
[16:39:57] *** Joins: arinov (~arinov@31.142.7.118)
[16:46:14] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:48:05] *** Joins: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de)
[16:50:00] *** Quits: s0ullight (~s0ullight@143.169.223.186) (Quit: Client closed)
[16:52:23] *** Joins: rgl (~rgl@85.245.47.147)
[16:54:53] *** Joins: Alina-malina (~Alina-mal@user/alina-malina)
[16:57:01] *** Quits: tyson2 (~user@bras-base-toroon0624w-grc-10-70-54-112-49.dsl.bell.ca) (Remote host closed the connection)
[16:57:58] *** Joins: tyson2 (~user@bras-base-toroon0624w-grc-10-70-54-112-49.dsl.bell.ca)
[16:58:59] *** Joins: jkwnki (~jkwnki@p4fedb101.dip0.t-ipconnect.de)
[16:59:12] <Lauxley> in compose why doesn't that work: image: my_image:${MY_VERSION:latest} , the default latest throws an error, and what is the workaround?
[17:00:58] <Lauxley> heh nvm it can be override with docker-compose.override.yml anyway
[17:02:35] *** Quits: arinov (~arinov@31.142.7.118) (Ping timeout: 268 seconds)
[17:04:56] *** Joins: Crassus (~Crassus@user/crassus)
[17:07:52] *** Quits: varaindemian (~varaindem@86.124.22.73) (Ping timeout: 246 seconds)
[17:08:18] *** Quits: ueberall (ueberall_l@user/ueberall) (Quit: ZNC)
[17:11:14] *** Quits: rgl (~rgl@85.245.47.147) (Ping timeout: 252 seconds)
[17:13:24] *** Joins: SomeWeirdAnon (~shwn@2a02:8109:abf:ffb4:13:3c3f:fb8a:fb0a)
[17:14:49] *** Joins: ueberall (ueberall_l@user/ueberall)
[17:20:16] *** Quits: pvdp (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au) (Remote host closed the connection)
[17:21:39] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[17:21:55] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[17:28:28] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 250 seconds)
[17:31:52] *** Quits: thanas (~thanas@user/thanas) (Quit: ZNC - https://znc.in)
[17:32:12] *** Joins: thanas (~thanas@user/thanas)
[17:34:59] *** Quits: Crassus (~Crassus@user/crassus) (Quit: Textual IRC Client: www.textualapp.com)
[17:36:12] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 265 seconds)
[17:36:46] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[17:37:06] *** Joins: cliluw (~cliluw@47.147.80.149)
[17:40:24] *** Joins: Crassus (~Crassus@user/crassus)
[17:43:20] *** Joins: AnapodoPsalidaki (~AnapodoPs@2a02:587:2917:ae32:3e27:ffb7:d22e:fa82)
[17:46:18] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 272 seconds)
[17:47:14] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[17:48:22] *** Joins: ottobackwards (~Otto@pool-100-0-215-24.bstnma.fios.verizon.net)
[17:53:13] *** Quits: Crassus (~Crassus@user/crassus) (Quit: Textual IRC Client: www.textualapp.com)
[17:56:37] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[17:57:24] *** Joins: Crassus (~Crassus@user/crassus)
[17:57:53] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[17:57:59] *** Joins: rgl (~rgl@bl12-47-147.dsl.telepac.pt)
[17:58:58] *** Quits: wattux (~wattux@212.51.23.106) (Ping timeout: 246 seconds)
[18:02:01] *** Quits: GeorgeK (~GeorgeK@cpe-70-92-5-228.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[18:05:31] *** Joins: ses (uid38151@id-38151.stonehaven.irccloud.com)
[18:07:10] <Lutin> L0j1kping
[18:07:13] <Lutin> L0j1k ping
[18:07:19] *** Quits: Crassus (~Crassus@user/crassus) (Ping timeout: 268 seconds)
[18:08:28] *** Quits: rsx (~dummy@ppp-188-174-128-157.dynamic.mnet-online.de) (Quit: rsx)
[18:15:09] <programmerq> seriously, a ping without context is just noise. If you must tag someone, at least include something for them to respond to.
[18:19:59] <aminvakil> https://blogs.gnome.org/markmc/2014/02/20/naked-pings/
[18:22:08] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[18:22:24] *** Joins: arinov (~arinov@31.142.7.118)
[18:22:28] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[18:28:57] *** Joins: arinov_ (~arinov@31.142.7.118)
[18:29:15] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 268 seconds)
[18:29:20] *** Quits: arinov (~arinov@31.142.7.118) (Quit: Konversation terminated!)
[18:30:01] *** Joins: superuser (~superuser@9.red-83-40-153.dynamicip.rima-tde.net)
[18:30:30] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[18:31:24] *** Quits: i64 (i64@gateway/vpn/protonvpn/i64) (Ping timeout: 258 seconds)
[18:33:31] *** Quits: rgl (~rgl@bl12-47-147.dsl.telepac.pt) (Ping timeout: 268 seconds)
[18:33:50] *** Quits: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de) (Ping timeout: 268 seconds)
[18:36:55] *** Quits: arinov_ (~arinov@31.142.7.118) (Ping timeout: 268 seconds)
[18:38:44] <Lutin> programmerq do we hug today ?
[18:39:17] <Lutin> programmerq I have multiple channels so if he is not available now it's not needed later maybe :)
[18:40:03] <Lutin> aminvakil if people need to blog about nothing... it says a lot about the person itself
[18:42:00] <Lauxley> it's been a while I haven't seen anybody ask for a ban that bad
[18:43:47] *** Joins: Gustavo6046_ (~Gustavo60@user/gustavo6046)
[18:44:37] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Read error: Connection reset by peer)
[18:45:25] <Lutin> Lauxley also a while that people asked for it without a reason.Having a bad day ?
[18:46:03] *** Gustavo6046_ is now known as Gustavo6046
[18:50:26] *** Joins: i64 (i64@gateway/vpn/protonvpn/i64)
[18:50:46] <Lutin> wow wireguard is weird
[18:52:01] *** Joins: varaindemian (~varaindem@86.124.78.162)
[18:53:36] *** Quits: thanas (~thanas@user/thanas) (Read error: Connection reset by peer)
[19:00:37] *** Joins: thanas (~thanas@user/thanas)
[19:09:54] *** Joins: thiras (~thiras@user/thiras)
[19:12:13] *** Joins: Crassus (~Crassus@user/crassus)
[19:13:40] *** Joins: finsternis (~X@23.226.237.192)
[19:15:50] *** Quits: superuser (~superuser@9.red-83-40-153.dynamicip.rima-tde.net) (Ping timeout: 272 seconds)
[19:23:59] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 265 seconds)
[19:25:04] *** Quits: jkwnki (~jkwnki@p4fedb101.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[19:37:05] *** Joins: rgl (~rgl@85.245.47.147)
[19:49:45] *** Joins: [twisti] (~twisti@toadwater.com)
[19:50:05] <[twisti]> sometimes, i push an image to a remote repository, and the repo will have the tag, but not the image
[19:50:35] <[twisti]> repo UI shows this when i click the tag: https://i.imgur.com/bzkTBqG.png
[19:50:45] <[twisti]> no errors on pushing the image, reports success
[19:55:31] <Lutin> tabakhase you were not OK about linuxserver images as well ? what a drama there
[19:57:17] *** Quits: Crassus (~Crassus@user/crassus) (Quit: Textual IRC Client: www.textualapp.com)
[20:02:37] *** Joins: tang^ (~doofus@2604:3d09:47c:f970:d0d5:ae62:81f0:ab56)
[20:08:28] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[20:09:47] *** Quits: kikijiki (~Thunderbi@user/kikijiki) (Quit: kikijiki)
[20:13:31] *** Quits: varaindemian (~varaindem@86.124.78.162) (Quit: Client closed)
[20:14:43] *** Joins: redbrass (~shawn@S01065c7695fa1e56.cg.shawcable.net)
[20:16:34] *** Joins: Haxxa (~Haxxa@122-199-10-189.ip4.superloop.com)
[20:18:19] <redbrass> I'm running an "apt install" inside my container that needs to modify /etc/resolv.conf.  resolve.conf is bind mounted so the package install fails.  I'm looking for ideas.  I haven't found the trick with Google yet.
[20:18:25] *** Quits: TheBigK (~quassel@user/thebigk) (Quit: No Ping reply in 180 seconds.)
[20:20:16] <redbrass> I'm converting a process from Podman to Docker native (due to Gitlab).  In Podman I can specify "--dns=off", and the resolv.conf is left in a default configuration - not bind mounted.  I can't find a similar option with Docker (yet)
[20:21:02] <redbrass> oops.. the podman setting is "--dns=none"
[20:26:36] *** gschanuel7 is now known as gschanuel
[20:31:29] <ada_> redbrass: what is the purpose of the change to /etc/resolv.conf?
[20:31:51] <ada_> redbrass: why is this a blocker, docker handles DNS by forwarding requests to your host's nameservers specified in the *host's* /etc/resolv.conf
[20:36:58] *** Quits: TomyWork (~TomyLobo@p200300e80f133c000512b9808dfc1445.dip0.t-ipconnect.de) (Quit: Leaving)
[20:41:05] <redbrass> ada_: the package adds dnsmasq settings.  It is a blocker (for me only I'd imagine) because it breaks the apt install process and leaves the resolve.conf in a wrong state for our target hardware.  We are using Docker to build up a filesystem that is transferred to hardware later on.
[20:43:02] <ada_> which package is it? can you share a build log and dockerfile?
[20:45:30] <redbrass> custom internal package that I don't control unfortunately.  No dockerfile - we start with debootstrap to a tar file.  Then a docker import of that tar to get our image.  then a run command to launch a script that does the apt install.
[20:45:39] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[20:46:37] <ada_> seems convoluted
[20:46:53] <ada_> so to be specific, it doesn't fail during build;  it fails at runtime when the script runs?
[20:46:54] *** Quits: jonifen (~jonifen@user/jonifen) (Quit: Leaving)
[20:47:28] <redbrass> I may have a lead here.. I'm able to edit the container's resolv.conf file manually with a "--net VALUE" specified.  Trying that out with the automated process (takes a while)
[20:47:47] <ada_> --net would change the network the container is attached to
[20:47:55] <ada_> docker has a --dns flag that lets you specify a certain nameserver
[20:48:09] <ada_> but it doesn't really have an equivalent to --dns=off like podman
[20:48:14] <redbrass> ada_: correct regarding runtime.  Container is already running and is mostly good.
[20:48:49] <redbrass> ada_: yeah, the --dns= is for adding a name server, which isn't what I'm trying to do here.
[20:49:03] <ada_> right
[20:49:04] <ada_> thats the problem
[20:49:32] <ada_> does your container build require network access?
[20:49:39] <ada_> or is all the work done locally from a package
[20:49:51] <ada_> you could try --net=none maybe... lemme see in my container
[20:50:18] <ada_> nope, file still busy
[20:50:18] <redbrass> network access needed.  pulls from debian.org, and an internal apt repository server.
[20:50:54] *** Joins: vincent- (~vincent-@cpc87559-seve28-2-0-cust94.13-3.cable.virginm.net)
[20:52:08] <ada_> I don't think there's any official way to allow modifications to /etc/resolv.conf
[20:52:20] <ada_> docker's pretty opinionated here
[20:52:29] <redbrass> I'm noticing.. :)
[20:52:30] <ada_> maybe containerd is a better fit for this use case
[20:52:58] <akik> ada_: can you bind mount over it?
[20:53:19] <programmerq> akik▸ docker bind mounts over it already.
[20:53:32] <akik> programmerq: can you double bind mount over it?
[20:53:33] <programmerq> kaniko may be worth trying out. I don't know what runtime it uses, but it may not get in the way and can build a dockerfile.
[20:54:20] <redbrass> Originally this was a python script that used chroot in a lot of places.  The goal is to "modernize" the approach and use a containerized version.  I got Podman running, but Gitlab does not play well with Podman at this time.
[20:54:49] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[20:55:02] <redbrass> ada_: sighs, the --net trick didn't work.  Here is my output (sorry for the multi line post):  
[20:55:15] <redbrass> Running set-dosfstools...
[20:55:17] <redbrass> Running set-resolvconf...
[20:55:18] <redbrass> ln: failed to create symbolic link '/etc/resolv.conf': Device or resource busy
[20:55:20] <redbrass> ========================================
[20:55:21] <redbrass> ========================================
[20:55:23] <redbrass> ========================================
[20:55:24] <redbrass> ========================================
[20:55:26] <redbrass> ========================================
[20:55:27] <redbrass> Something went horribly wrong and the build will not complete
[20:55:29] <redbrass> Command '('/usr/share/ties-3dp/post/scripts/set-resolvconf',)' returned non-zero exit status 1
[20:55:30] <redbrass> Let this process finish; ^C will just break things
[20:55:46] <redbrass> That text is coming from the custom code in set-resolvconf.
[20:56:01] <redbrass> the ln: failed bit is the part that matters...
[20:56:37] <ada_> please use a paste service 
[20:57:28] *** Quits: cliluw (~cliluw@47.147.80.149) (Ping timeout: 252 seconds)
[20:58:48] <redbrass> k. so what I'm seeing then is that this custom script MUST modify resolv.conf.  Docker does not allow that.  So I can't use docker for this solution then.  :(
[20:58:50] *** Joins: cliluw (~cliluw@47.147.80.149)
[20:58:59] <s17> https://dpaste.com/99M34LJ44
[20:59:30] <programmerq> redbrass▸ is this a package from debian itself? Do you have a Dockerfile that duplicates the issue? I'm curious to try a couple things.
[20:59:44] *** Joins: diverdude (~undodre@176-21-102-230-cable.dk.customer.tdc.net)
[20:59:49] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[21:01:35] <diverdude> hi - if i am running redis in a container: 94598e73ef60 redis:alpine "docker-entrypoint.s…"   59 minutes ago   Up 58 minutes   6379/tcp proj-ui_zuiredis_1 (started using docker-compose) why can i not connect to redis from my host using neither localhost:6379 nor zuiredis:6379 ?
[21:01:35] *** Joins: Hazza (~Haxxa@89nnjg0xckz9ggn6r5xm.ip6.superloop.com)
[21:01:40] <redbrass> Not a Debian package.  It is a product of our Dev team.  No dockerfile in use here
[21:02:43] <programmerq> diverdude▸ that port isn't published, so that's why localhost:6379 doesn't work from the host. Assuming this is a compose created service, the 'zuiredis' alias is only resolvable on containers attached to the same network as that container, not from the host.
[21:03:22] <programmerq> to publish the port, you need to specify a ports: setting in the compose file.
[21:03:41] *** Quits: Haxxa (~Haxxa@122-199-10-189.ip4.superloop.com) (Ping timeout: 268 seconds)
[21:06:05] *** Joins: rageshkrishna (~rageshkri@136.185.187.57)
[21:06:12] *** Quits: rageshkrishna (~rageshkri@136.185.187.57) (Remote host closed the connection)
[21:09:01] <akik> redbrass: i just tested with docker compose mounting /etc/hostname from the host into the container's /etc/resolv.conf and it worked so there doesn't seem to be a limitation for doing that
[21:10:30] <redbrass> akik: thanks.  I'm trying to find this "set-resolvconf" command with our devs so I can exactly what it is trying to do.
[21:11:28] <redbrass> I think it is not just adding to resolv.conf, but trying to replace it with a symlink.
[21:12:32] <redbrass> it would be real nice if I can get this running with Docker (the workflow becomes so much easier), but automation is the goal, not "docker" per se.
[21:16:23] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[21:24:36] <redbrass> k. found the code.  Yep, it is creating a symlink for /etc/resolv.conf.  Which is bind mounted, so that command fails.  Under the hood, the code is using resolvconf to configure things, which is conflicting with Docker's handling of the networking..
[21:25:32] <redbrass> I think it is going to be a long day...  Thanks for the support though!
[21:27:44] *** Quits: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi) (Ping timeout: 258 seconds)
[21:29:04] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Read error: Connection reset by peer)
[21:29:31] *** Joins: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi)
[21:29:33] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[21:30:56] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[21:32:30] *** Joins: rwtrecs (~rewrit3@user/rewrit3)
[21:33:11] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Killed (NickServ (GHOST command used by rwtrecs)))
[21:33:15] *** rwtrecs is now known as rewrit3
[21:34:22] *** Quits: lemonzest (~lemonzest@user/lemonzest) (Quit: Quitting)
[21:35:25] *** Quits: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi) (Quit: faaaaa)
[21:35:54] *** Joins: artok (~azo@mobile-access-b0484d-108.dhcp.inet.fi)
[21:36:37] *** Joins: thekingofbandit (thekingofb@user/thekingofbandit)
[21:37:23] *** Quits: fibsifan (~quassel@x4dbfa993.dyn.telefonica.de) (Quit: https://quassel-irc.org)
[21:39:01] *** Joins: vidbina (~vid@dynamic-089-014-134-063.89.14.pool.telefonica.de)
[21:43:10] *** Quits: diverdude (~undodre@176-21-102-230-cable.dk.customer.tdc.net) (Ping timeout: 268 seconds)
[21:43:47] *** Joins: Sasazuka (~Sasazuka@user/sasazuka)
[21:47:13] *** Joins: jkwnki (~jkwnki@p4fedb101.dip0.t-ipconnect.de)
[21:47:17] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[21:47:48] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[21:56:25] *** Joins: nedbat (~nedbat@python/psf/nedbat)
[22:01:33] *** Quits: metah4ck3r (~meta@user/metah4ck3r) (Ping timeout: 265 seconds)
[22:03:26] *** Joins: metah4ck3r (~meta@user/metah4ck3r)
[22:03:32] *** Joins: withered_wolf (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net)
[22:09:33] *** Quits: zakame (~zakame@user/zakame) (Read error: Connection reset by peer)
[22:11:04] *** Joins: zakame (~zakame@user/zakame)
[22:15:15] *** Quits: sebastianos (~sebastian@user/sebastianos) (Quit: ZNC 1.8.2 - https://znc.in)
[22:15:45] *** Quits: tyson2 (~user@bras-base-toroon0624w-grc-10-70-54-112-49.dsl.bell.ca) (Read error: Connection reset by peer)
[22:15:59] *** Joins: tyson2 (~user@bras-base-toroon0624w-grc-10-70-54-112-49.dsl.bell.ca)
[22:16:58] *** Joins: metah4ck1 (~meta@user/metah4ck3r)
[22:16:59] <nedbat> I'm using docker for mac. When I edit a shared file on the Mac, the change isn't visible in the file in the container.  It seems to take an hour (exactly) for it to propagate. What could cause that?
[22:17:32] *** Quits: metah4ck1 (~meta@user/metah4ck3r) (Client Quit)
[22:17:48] *** Joins: metah4ck1 (~meta@user/metah4ck3r)
[22:19:10] *** Quits: metah4ck3r (~meta@user/metah4ck3r) (Read error: Connection reset by peer)
[22:21:42] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[22:22:43] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[22:24:00] *** Quits: metah4ck1 (~meta@user/metah4ck3r) (Ping timeout: 252 seconds)
[22:27:06] *** Quits: stivo (~stivo@p4fe9592e.dip0.t-ipconnect.de) (Remote host closed the connection)
[22:28:06] *** Joins: stivo (~steven@146.52.46.40)
[22:30:59] *** Quits: dostoyevsky2 (~sck@user/dostoyevsky2) (Ping timeout: 256 seconds)
[22:32:25] *** Joins: incognito (~relativit@user/incognito)
[22:33:16] *** Quits: thekingofbandit (thekingofb@user/thekingofbandit) (Remote host closed the connection)
[22:37:09] <ada_> nedbat: you might be using the osxfs file sharing mechanism.  enable grpc-fuse in the general settings tab to use the new filesystem
[22:37:25] *** Joins: goldfish (~goldfish@user/goldfish)
[22:37:34] <ada_> nedbat: the old osxfs file sharing mechanism had some options you could tweak to improve performance but the docs have been removed from the website since the grpc-fuse release earlier this year
[22:37:54] <nedbat> ada_: am I crazy to think that a 1-hour delay is happening?
[22:38:12] <ada_> nedbat: i don't know 
[22:38:18] *** Joins: metah4ck3r (~meta@user/metah4ck3r)
[22:38:20] <nedbat> ada_: I already have grpc-fuse enabled :(
[22:38:52] <ada_> nedbat: are you using apple M1 or intel mac?
[22:39:00] <nedbat> ada_: intel
[22:39:08] <ada_> not really sure what else to suggest
[22:39:18] <nedbat> ada_: btw, I have noticed other ways that the filesystem doesn't catch up, independent of docker.
[22:39:23] <ada_> which filesystem?
[22:40:25] <nedbat> ada_: Disk Utility says APFS Volume (encrypted)
[22:40:50] <artok> which way it has priority?
[22:41:03] <artok> container -> host or host -> container
[22:41:21] <nedbat> artok: is this for me? I don't know.
[22:41:46] <ada_> nedbat: noticed what ways the filesystem doens't catch up?  and what is the referene point you're talkig about catching up to?
[22:42:12] <nedbat> ada_: I edit a file in the Mac.  the shared file in the container doesn't see the change for an hour.
[22:42:19] <ada_> nedbat: you said "independent of docker"
[22:42:28] <ada_> so is that some other kind of filesystem problem in your system?  
[22:42:48] <nedbat> ada_: oh, sorry. for example, the finder can show the size of images, but sometimes just doesn't.
[22:42:59] <ada_> are you sure that you're calculating all file sizes?
[22:43:03] <ada_> thats a Finder option in mac
[22:43:13] <ada_> i mean is that the only thing? are there additional data points?
[22:44:07] <nedbat> ada_: i don't see that as a Finder option.   
[22:44:27] <nedbat> not showing sizes is just an odd thing I haven't looked at closely.  the hour-delay with docker I am testing more rigorously
[22:48:33] <artok> I had docker image that launches rsync service with named volume mounted to it and then fswatcher on local dir will check for edits and upload them to container
[22:49:08] *** Quits: metah4ck3r (~meta@user/metah4ck3r) (Ping timeout: 268 seconds)
[22:49:16] <artok> then just launch another container that will act as dev test runner, that same volume mounted
[22:50:38] *** Joins: metah4ck3r (~meta@user/metah4ck3r)
[22:50:41] *** Joins: thekingofbandit (thekingofb@user/thekingofbandit)
[22:51:06] *** Joins: diverdude (~undodre@176-21-102-230-cable.dk.customer.tdc.net)
[22:51:44] <diverdude> Is it somehow possible to execute more than one line in command: line in docker-compose file?
[22:53:16] <artok> nedbat something like that https://termbin.com/7oml https://termbin.com/7nyf https://termbin.com/tzgw
[22:53:48] <artok> just had one off need for that so didn't finish that project
[22:54:15] *** Joins: TheBigK (~quassel@user/thebigk)
[22:55:31] <nedbat> artok: it's clever to use docker to run rsync to keep things in sync, but docker should be doing this on its own, right?
[22:55:41] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 265 seconds)
[22:55:58] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[22:55:59] <ada_> diverdude: technically, yes, but why? what problem are you trying to solve
[22:56:04] <ada_> diverdude: what does "more than one line" actually mean?
[22:56:21] <ada_> diverdude: like, a bunch of commands in a row that happens to use more than 1 line of yaml?  or something like a loop?
[22:56:41] <diverdude> ada_: i want to make a loop that runs and does nothing until redis database is ready
[22:57:07] <diverdude> ada_: and then after i want to run my webserver command
[22:57:37] <ada_> diverdude: yaml supports multi-line strings, so yes it is technically possible
[22:57:48] <artok> nedbat: you can config rsync to do that uid mapping and container can do anything it wants and your source dir is clean
[22:58:02] <diverdude> ada_: aha cool
[22:58:02] <ada_> diverdude: its probably "easier" to write a script that does the right thing, though, and run the script with the command: line instead
[22:58:39] *** Joins: sebastianos (~sebastian@user/sebastianos)
[22:58:54] <diverdude> ada_: ok so i could just write a full bash file which first runs the loop and then starts up the server and then just execute that script from the docker-compose command?
[22:59:05] <ada_> diverdude: yep
[22:59:13] <diverdude> ah cool...yeah thats better
[22:59:18] <artok> diverdude: add check to entrypoint that tries to connect to redis, and loops N times trying, if not able, exit, if connection was established, start the actual service
[22:59:32] <diverdude> awesome
[22:59:33] <diverdude> yes
[23:01:00] <artok> this is one of "entrypoint best practices" that ada_ was about to write almost two years ago ;)
[23:01:04] *** Joins: Tuor (~quassel@user/tuor)
[23:02:02] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[23:02:15] <artok> we talked about it, I did already some list, but haven't had time to write that blog post yet
[23:08:45] <programmerq> nedbat▸ what's the command used to start the container? (or compose file if you're using that)?
[23:09:04] <programmerq> is it a single file bind mounted into the container? or a directory?
[23:09:28] <nedbat> programmerq: (hi) it's a directory, with some odd symlinks
[23:11:02] <nedbat> programmerq: the compose file is here: https://github.com/edx/devstack/blob/master/docker-compose.yml but tbh, i don't understand all the mechanisms at play in that repo
[23:11:44] <programmerq> which container and path is affected?
[23:13:04] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[23:13:26] <nedbat> (a test just finished: the file change was seen 57 minutes after it was made)
[23:15:18] <nedbat> programmerq: the container is lms, I'm not sure of the volume.  the path in the container is /edx/src/xblock-lti-consumer/lti_consumer/lti_1p1/consumer.py
[23:18:24] *** Quits: Lutin (~Lutin@user/lutin) (Ping timeout: 272 seconds)
[23:20:37] *** Quits: onizu (uid373383@id-373383.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[23:24:30] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[23:25:00] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[23:26:00] *** Quits: printf (~printf@user/printf) (Read error: Connection reset by peer)
[23:26:19] *** Joins: printf (~printf@user/printf)
[23:27:50] *** Quits: printf (~printf@user/printf) (Remote host closed the connection)
[23:28:34] *** Joins: printf (~printf@user/printf)
[23:36:09] *** Quits: tyson2 (~user@bras-base-toroon0624w-grc-10-70-54-112-49.dsl.bell.ca) (Remote host closed the connection)
[23:37:42] <programmerq> nedbat▸ looking over that compose file, the lms container has no bind mounts. It looks like there's something that will try to populate the named volume at some point, but I'm not sure which component that might be.
[23:38:15] <programmerq> so that means that the /etc/src/... path inside the container is a copy rather than going over the file sharing mechanism for docker desktop.
[23:38:39] <nedbat> programmerq: i have /src shared in the docker preferences
[23:39:47] <nedbat> programmerq: it's entirely possible that I am very confused about how this is all supposed to work.
[23:39:59] <programmerq> the docker preferences only affect what paths on the host are available to the docker desktop VM. it won't also set up bind mounts for individual containers.
[23:40:46] <programmerq> so on a "regular" docker host where it's just native linux, a container will only "see" files on the host if you have defined a bind mount. For example: docker run --rm -it -v /home/jeff/:/jeffhome alpine ls -lah /jeffhome
[23:41:31] <programmerq> since mac doesn't run linux binaries, docker desktop sets up a linux VM and any bind mounts that those containers get are mapped inside the VM. The file sharing mechanism just mounts files from the host into the VM so that you can do a container bind mount
[23:42:24] <programmerq> so to get /etc/src/... mapped in your container, you'd need to add something like this just below line 351 in the compose file: - /path/on/host:/edx/src/edxapp/
[23:42:54] <programmerq> let me know if that doesn't compute. :)
[23:45:23] <nedbat> programmerq: i am one of 100 devs using this, but others don't seem to have this issue, so I should ask around there why i am different :)
[23:45:39] *** Quits: vincent- (~vincent-@cpc87559-seve28-2-0-cust94.13-3.cable.virginm.net) (Quit: Leaving)
[23:46:49] <raub> docker-composer question: How can I createa symbolic link once a volume is mounted inside the container?
[23:47:54] <programmerq> compose won't create symlinks in a container write layer nor in a volume. you'd need something inside the container to create the symlink. you can likely accomplish that with an entrypoint script inside the container.
[23:50:40] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Ping timeout: 250 seconds)
[23:52:40] <raub> So I can call an entrypoint script from the compose script. Nice. Now all Ineed to do is lookup how to copy said entrypoint into container
[23:58:46] <nedbat> programmerq: i don't know how these various compose files work together, but this seems relevant: https://github.com/edx/devstack/blob/master/docker-sync.yml#L57-L60
