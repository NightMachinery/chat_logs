[00:31:52] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[00:50:01] *** Joins: AnimalClatter (~AnimalCla@208.66.176.26)
[00:51:33] <AnimalClatter> Can anyone help me understand the Awk program 'ORS=NR%3?FS:RS' ? I think that through 'ORS=NR%3' it's grouping three lines of input into one record of output, but I don't understand from the question mark on.
[00:58:20] *** Quits: mrlemke (~mrlemke@208.74.105.200) (Read error: Connection reset by peer)
[00:58:47] *** Joins: mrlemke (~mrlemke@208.74.105.200)
[01:04:00] *** Joins: Bossi (~quassel@p4fc22308.dip0.t-ipconnect.de)
[01:04:00] <AnimalClatter> ...and I don't know how/where to supply a preferred OFS
[01:11:23] *** Joins: Torr (~Torr@user/torr)
[01:12:02] <nmz> that's a ternary operator AnimalClatter 
[01:12:26] <nmz> a ternary operator is basically a if/else condition
[01:13:30] <nmz> so that is basically                 if (NR%3) { ORS = FS } else {ORS = RS }
[01:14:35] <nmz> # awk 'BEGIN {true=1;false=0; var = true; print var ? "I'm true!" : "I'm False!" }'
[01:14:40] <nmz> bloody hell
[01:14:41] <shbot> nmz: awk: non-terminated string Im... at source line 1
[01:14:41] <shbot> nmz:  context is
[01:14:41] <shbot> nmz: etc... ( http://ix.io/3saf )
[01:16:54] <nmz> # awk 'BEGIN {true=1;false=0; var = true; print var ? "true" : "False";exit }'
[01:16:55] <shbot> nmz: true
[01:17:36] <nmz> AnimalClatter: it turns conditions which are usually statements into an expression, saving you a lot of typing
[01:20:32] <AnimalClatter> nmz: Thanks
[01:25:38] <AnimalClatter> nmz: I think I get it, thank you. How can I supply an OFS? I've tried 'BEGIN { OFS = "," };ORS=NR%3?FS:RS' to no avail.
[01:26:08] <nmz> remember that awk is PATTERN {action}
[01:26:25] <nmz> BEGIN {action}; ORS <- this is a pattern
[01:26:43] <AnimalClatter> I have it in reverse.
[01:26:44] <nmz> put the ORS inside the {ACTION}
[01:27:18] <nmz> or else, awk will just think its an expression, and in every line, it will output, because an assignment returns whatever is assigned
[01:27:41] <nmz> so what do you mean when you say, you want to supply an ORS?
[01:28:17] <nmz> OFS*to be 
[01:28:35] <nmz> OFS*
[01:28:54] <AnimalClatter> I have a file with many rows and one column. I'm trying to transpose every three lines into one row of three columns separated by a comma. The above program gives me three columns and the content looks right, but the OFS is whitespace
[01:30:06] <AnimalClatter> I found a snippet on the internet that gave me the basics of grouping n lines into one, but my awk-fu is still rudimentary :) 
[01:30:12] <nmz> well OFS only prints when there are multiple rows
[01:30:19] <AnimalClatter> I really like Awk though. I wish more languages were this straightforward.
[01:30:32] <nmz> you want to print line1,line2,line3 
[01:30:35] <AnimalClatter> Right
[01:30:53] <e36freak> AnimalClatter: if you change FS to a comma it'll work, or use a comma instead of FS in the ternary operator
[01:31:04] <e36freak> NR%3?",":RS
[01:31:18] <e36freak> or awk -F, 'ORS=NR%3?FS:RS'
[01:31:33] <nmz> clever
[01:32:20] <nmz> # seq 4 | awk -F, 'ORS=NR%3?FS:RS'
[01:32:22] <shbot> nmz: one,two,three
[01:32:22] <shbot> nmz: four,
[01:32:34] <nmz> mmm would lead a dangling ,
[01:32:40] <e36freak> i'd probably put an END statement in there to make sure there's a trailing newline
[01:34:13] <e36freak> awk 'ORS=NR%3?",":RS;END{if(NR%3)printf("\n")}'
[01:34:24] <e36freak> if you're going for minimal chars :)
[01:34:48] <e36freak> still get a trailing "," but at least it's a complete line
[01:35:07] <e36freak> if you don't want a trailing "," you'll need to be a bit more verbose
[01:35:40] <AnimalClatter> Wild
[01:37:32] <AnimalClatter> Well, I'm not above using sed to strip out the last comma :)
[01:37:42] <e36freak> haha, no need for that
[01:41:16] <e36freak> awk 'NR==1{printf("%s",$0);next} {printf("%s%s", (NR-1)%3?",":"\n", $0)} END {print ""}'
[01:43:16] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:43:46] <AnimalClatter> e36fread and nmz: Thanks so much for the pointers. Well, for the working code. I'll spend some time with this.
[01:45:49] <e36freak> the key to that one is it doesn't print the separator until the next time around
[01:46:21] <e36freak> for the first line, it just prints it with no trailing anything, and then for each subsequent line it prints either a "," or a newline first, then the current line again with no trailing anything
[01:46:26] <e36freak> then at the end it just prints a newline
[01:47:47] <e36freak> i guess you could double ternary to make it shorter and more confusing
[01:47:49] <e36freak> awk '{printf("%s%s",NR>1?((NR-1)%3?",":"\n"):"",$0)}END{print ""}'
[01:48:19] <nmz> now that looks like awk code
[01:48:27] <e36freak> i think that's the best i can golf it right now
[01:49:25] <e36freak> could lose 2 more chars by changing "\n" to RS
[01:54:07] *** Joins: _mrlemke_ (~mrlemke@208.74.105.200)
[01:57:26] *** Quits: mrlemke (~mrlemke@208.74.105.200) (Ping timeout: 252 seconds)
[01:58:31] *** Quits: mknod (~mknod@user/mknod) (Quit: mknod)
[01:59:30] <earnestly> e36freak: Can remove the ( ) around printf and print"" works too
[02:03:36] <e36freak> werd
[02:06:34] <e36freak> nested ternaries make my eye twitch a bit though
[02:06:44] <e36freak> feel dirty
[02:12:12] <earnestly> Quite rightly
[02:28:41] *** Joins: britho (~britho@2600:6c40:7900:744:9731:1691:401c:c12e)
[02:33:47] <AnimalClatter> nms: lol
[02:33:57] <AnimalClatter> s/nms/nmz/
[21:04:10] *** Joins: greyrat (~greyrat@ip202.ip-51-178-215.eu)
[21:04:25] *** Server sets mode: +nrtf #awk
[21:53:18] *** Joins: yuesbeez (uid458354@id-458354.tinside.irccloud.com)
[22:17:18] <OMGOMG> or awk '/pattern/ && !pattern++ {print substr($1,5,4)}'
[22:20:10] *** Joins: BSaboia (~bsaboia@188-178-217-166-cable.dk.customer.tdc.net)
[22:28:34] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[22:29:45] <nmz> its better to exit
[22:29:54] <nmz> else awk will load the entire file
[22:30:02] <nmz> s/load/process
[22:31:16] *** Joins: larryv (~larryv@zsh/patchmanager/larryv)
[22:31:17] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Read error: Connection reset by peer)
[22:31:29] *** Quits: BSaboia (~bsaboia@188-178-217-166-cable.dk.customer.tdc.net) (Quit: This computer has gone to sleep)
[22:32:02] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[22:35:18] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Client Quit)
[22:40:10] *** Quits: AnimalClatter (~AnimalCla@208.66.176.26) (Ping timeout: 240 seconds)
[22:41:39] *** Joins: AnimalClatter (~AnimalCla@208.66.176.26)
[22:54:26] *** Quits: phillbush (~phillbush@user/phillbush) (Quit: Leaving)
[22:58:29] *** Quits: lgc (~lgc@user/lgc) (Quit: WeeChat 3.2-dev)
[22:59:02] *** Joins: lgc (~lgc@user/lgc)
[23:01:51] *** Joins: BSaboia (~bsaboia@188-178-217-166-cable.dk.customer.tdc.net)
[23:02:57] *** Quits: BSaboia (~bsaboia@188-178-217-166-cable.dk.customer.tdc.net) (Client Quit)
[23:14:38] *** Joins: Torr (~Torr@user/torr)
[23:18:12] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[23:26:44] *** Quits: jetchisel (~jetchisel@user/jetchisel) (Ping timeout: 252 seconds)
[23:34:31] <yitz> Exiting early can lead to a broken pipe
[23:45:19] <earnestly> Which should be fine
[23:58:52] *** Joins: mknod (~mknod@user/mknod)
