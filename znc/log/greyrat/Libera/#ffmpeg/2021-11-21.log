[00:18:49] *** Joins: l4yer (~l4yer@195.181.170.210)
[00:26:30] *** Quits: wyatt8740 (~wyatt8740@62.182.99.241) (Ping timeout: 268 seconds)
[00:26:37] *** Joins: wyatt8750 (~wyatt8740@138.199.52.66)
[00:28:49] *** Joins: `St0ner (~services@user/st0ner/x-3205467)
[00:32:11] *** Quits: arbitercoin (~Rheanna@218.78.53.13) (Remote host closed the connection)
[00:34:23] *** Joins: arbitercoin (~Rheanna@101.91.232.166)
[00:34:31] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 268 seconds)
[00:40:02] *** Quits: kib (~kib@user/kib) (Quit: WeeChat 3.3)
[01:07:32] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[01:13:05] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[01:13:14] <tuxd3v> can everybody help me to find the place to set aspect ratio?
[01:13:25] <tuxd3v> -aspect 8/5
[01:15:04] <BtbN> what do you mean, set aspect ratio?
[01:15:26] <tuxd3v> I have a display 1680x1050
[01:15:28] <BtbN> Usually, the resolution defines the aspect ratio
[01:15:49] <tuxd3v> I am trying to do -f X11grab
[01:16:01] <tuxd3v> I am trying to record my desktop
[01:16:20] <tuxd3v> the problem is ... the final video gets distorted and set on 4:3
[01:16:46] <BtbN> Who or what distorts it?
[01:17:05] *** Quits: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[01:17:05] <BtbN> So you're saying you get a video with the correct resolution out of it, but a player plays it squished to 4:3?
[01:17:22] *** Joins: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952)
[01:17:31] <tuxd3v> yes
[01:17:43] <tuxd3v> :)
[01:18:15] <BtbN> That makes no sense and I'd say if you didn't explicitly add a filter that did that, is impossible even
[01:18:21] <tuxd3v> I don know how to apply -aspect
[01:18:24] <BtbN> Please post full commandline and full uncut console output.
[01:18:42] <BtbN> You don't -aspect, you just do nothing pretty much, and get the desired resolution
[01:18:51] <BtbN> x11grab has no magic non-square pixels or anything
[01:19:17] <tuxd3v> ffmpeg -f x11grab -s 1680x1050 -r 25 -i :0.0 -f pulse -ac 1 -i default /home/tuxd3v/Desktop/output.mkv
[01:19:19] *** Quits: sagax (~sagax_nb@user/sagax) (Ping timeout: 250 seconds)
[01:19:35] <tuxd3v> I only have 1 microphone so I chose 1 channel
[01:19:58] <BtbN> You forgot the complete and uncut output (please use a pastebin)
[01:20:05] <BtbN> Also, the option name is -video_size, not -s
[01:20:22] <BtbN> And just ommitting it entirely will use the full desktop resolution by default
[01:21:10] <BtbN> You'll also very much want to specifc your desired audio and video encoders, and quality/bitrate options. The defaults are poor.
[01:22:42] <tuxd3v> ok, there is the output in the console: https://paste.debian.net/hidden/f7ccc9cc/
[01:22:43] *** Quits: arbitercoin (~Rheanna@101.91.232.166) (Remote host closed the connection)
[01:23:52] <tuxd3v> BtbN, many thanks for your clarifications, I would want superfast, and H264, but I don't know how to set them
[01:24:06] <tuxd3v> it has tons of options and usually is end in errors
[01:24:22] <BtbN> You'll probably also won't want to combine h264 + vorbis
[01:24:28] <BtbN> https://trac.ffmpeg.org/wiki/Encode/H.264
[01:24:38] <BtbN> I mean, it works, but is very unusual
[01:25:21] <BtbN> I see nothing wrong there with the video. If that gets messed up during playback, that's most likely on your player.
[01:25:42] <BtbN> Maybe throw a -pix_fmt yuv420p in, for maximum compatibility. But otherwise...
[01:27:03] <tuxd3v> Codec AVOption preset (Configuration preset) specified for input file #1 (default) is not a decoding option.
[01:27:16] <tuxd3v> the examples doesn't work with me i don't know why
[01:27:28] <BtbN> What do you mean?
[01:27:37] <tuxd3v> I tried -preset superfast after -i, it give error
[01:27:45] <BtbN> You have two -i
[01:27:49] <tuxd3v> then I tried it before -i it gives error
[01:28:12] <BtbN> It needs to go after all your inputs, in front of the output you want it to affect
[01:28:26] *** Joins: rya (~ry@47.23.188.138)
[01:28:30] <tuxd3v> I don't know why I have 2 I just tought it would be needed
[01:28:41] <BtbN> Because you have two inputs.
[01:28:55] *** Quits: rya (~ry@47.23.188.138) (Changing host)
[01:28:55] *** Joins: rya (~ry@user/rya)
[01:29:14] <tuxd3v> I have 2? but I am doing x11grab its 1 input the other is for audio
[01:29:44] <furq> one input and another input is two inputs
[01:29:44] <BtbN> Yes, so you have two inputs right there?
[01:29:47] <BtbN> Your video, and your audio
[01:30:09] <furq> your encoder options have to go after all the inputs
[01:31:20] <tuxd3v> OK, now I am trying only 1 unput: ffmpeg -f x11grab -video_size 1680x1050 -r 25 -preset superfast -i :0.0 -preset superfast -f pulse -ac 1 /home/tuxd3v/Desktop/output.mkv
[01:31:36] <tuxd3v> the -preset continues to give me error
[01:32:23] <BtbN> Why did you move the -f pulse?
[01:32:40] <BtbN> And why do you have multiple -preset? One as input option?
[01:33:11] <BtbN> Every option affects the next input or output that follows after it
[01:33:15] <tuxd3v> ok, now I have 2 inputs: ffmpeg -f x11grab -video_size 1680x1050 -r 25 -i :0.0 -preset superfast -f pulse -ac 1 -i default /home/tuxd3v/Desktop/output.mkv
[01:33:38] <BtbN> Now the -preset is in front of -i again
[01:33:41] <tuxd3v> I am trying for a week now to understand this and I can't figure it out :/
[01:33:58] <tuxd3v> were is the place - preset should go?
[01:34:10] <BtbN> After every input, in front of the output
[01:34:43] <BtbN> And you'll also want to specify -crf, -a:c, -b:a and maybe other things
[01:34:44] <furq> [x11grab options] -f x11grab -i :0:0 [pulse options] -f pulse -i default [output options] out.mkv
[01:35:18] <BtbN> *-c:a
[01:35:19] <BtbN> and -c:v
[01:35:27] <BtbN> I'd suggest just using aac and 128k
[01:35:39] <BtbN> crf you'll have to experiment
[01:35:48] <BtbN> 20 or something is probably fine, but might be exzessive
[01:38:02] <tuxd3v> many thanks
[01:38:14] <tuxd3v> ok now I have this: ffmpeg -f x11grab -i :0.0 -f pulse -ac 1 -i default -video_size 1680x1050 -r 25 -preset superfast /home/tuxd3v/Desktop/output.mkv
[01:40:45] <tuxd3v> for youtube like videos what is the good value for -crf, and -c:v ?
[01:40:57] *** Quits: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru) (Quit: Leaving)
[01:42:43] <furq> video_size and r are x11grab options
[01:42:53] <furq> but you can omit them both anyway
[01:42:59] *** Quits: Guest9482 (~Buster@buster-net.ru) (Ping timeout: 268 seconds)
[01:46:14] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 260 seconds)
[01:47:43] <BtbN> If you want to upload to YouTube, just set crf to something super low. 18 or even 16
[01:47:54] <BtbN> YouTube will butcher the quality anyway, so the more input quality the better
[01:47:58] *** Joins: waleee (~waleee@h-82-196-111-63.NA.cust.bahnhof.se)
[01:51:59] *** Quits: rpthms (~rpthms@user/rpthms) (Ping timeout: 264 seconds)
[01:52:20] *** Joins: gucky-chat-laden (~gucky-cha@46.41.28.214)
[01:55:38] <tuxd3v> furq, thanks, is this correct? ffmpeg -video_size 1680x1050 -r 25 -f x11grab -i :0.0 -ac 1 -f pulse -i default -c:v libx264 -preset superfast /home/tuxd3v/Desktop/output.mkv
[01:59:29] *** Joins: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru)
[02:02:15] <tuxd3v> BtbN, I have tried now: ffmpeg -video_size 1680x1050 -r 25 -f x11grab -i :0.0 -ac 1 -f pulse -i default -c:v libx264 -crf 18 -preset superfast -aspect 8:5 /home/tuxd3v/Desktop/output.mkv
[02:02:42] <BtbN> I still don't understand what you're trying to do with that -aspect option.
[02:02:59] <tuxd3v> with my display aspect ration... but playing the video with vlc just shows a 4:3 aspect ratio and not the 8:5 of my monitor
[02:03:12] <BtbN> paste ffprobe of the resulting file
[02:04:35] <tuxd3v> BtbN, thanks, here it go: https://paste.debian.net/hidden/65dedace/
[02:04:59] <tuxd3v> its just that the result loose a lot of quality, escaling the video back
[02:05:28] <BtbN> that looks like a perfectly valid video with he right resolution and aspect ratio to me.
[02:05:52] <BtbN> Still might want to add -pix_fmt yuv420p, not sure how well YT deals with 444
[02:05:59] <tuxd3v> but it has 2 dark zones on the sides of the screen when playing it
[02:06:24] <BtbN> Are you sure that's not just your player adding those, because its Window is in 4:3 shape?
[02:06:28] <tuxd3v> the video is compressed to fit in a small area
[02:09:13] <tuxd3v> BtbN, now that you talk about that... maybe its vlc, because in full screen it plays ok :)
[02:11:01] <tuxd3v> BtbN, is there a way that I can hide my desktop panel from apear in the video?
[02:11:18] <BtbN> Desktop Panel?
[02:11:30] <tuxd3v> I know that we have a option -i 0:0+x,y ?
[02:11:59] <tuxd3v> yes were you have your menu, and open applications..
[02:12:13] *** Joins: nemesit| (~textual@p200300061141ca34ad1054e24bea9e8d.dip0.t-ipconnect.de)
[02:12:14] <tuxd3v> also systemtray and such
[02:12:58] <BtbN> You'll have to manually figure out the dimensions of your screen without it, and specify it
[02:13:52] <nemesit|> Hi, I'm trying to extract an image at a scene change but it seems as if the pts_time of the extracted image does not match the metadata printed by ffmpeg
[02:15:22] *** Joins: rpthms (~rpthms@user/rpthms)
[02:15:36] <nemesit|> ffmpeg -ss 12763ms -t 180 -i input.mp4 -f image2 -vf 'select=gt(scene\,0.3),metadata=print' -frames:v 1 output.jpg
[02:16:24] <nemesit|> is the command I use, my video has burned in timecode, ms, frame num etc and the extracted frame does not match Parsed_metadata_1
[02:16:44] <nemesit|> or any of the pts_time output in stderr/stdout
[02:16:59] <nemesit|> any ideas?
[02:17:53] *** Joins: arbitercoin (~Rheanna@218.78.79.129)
[02:19:41] <nemesit|> ffmpeg prints  pts_time:21.0207 whereas the extracted frame (or switch player) show 33.78375
[02:26:58] *** Joins: minimal (~minimal@user/minimal)
[02:32:52] *** Quits: nemesit| (~textual@p200300061141ca34ad1054e24bea9e8d.dip0.t-ipconnect.de) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:36:09] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[02:36:19] *** Quits: Kei_N_ (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[02:37:07] *** Joins: nemesit| (~textual@p200300061141ca34ad1054e24bea9e8d.dip0.t-ipconnect.de)
[02:37:46] *** Quits: nemesit| (~textual@p200300061141ca34ad1054e24bea9e8d.dip0.t-ipconnect.de) (Client Quit)
[02:38:28] *** Quits: auth (~auth@user/auth) (Ping timeout: 268 seconds)
[02:47:05] *** Quits: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru) (Read error: Connection reset by peer)
[02:50:43] <tuxd3v> hello guys, many thanks ofr your help I just have some few more.. :(
[02:50:48] <tuxd3v> -c:a copy
[02:50:56] <tuxd3v> is a good thing or a bad thing?
[02:51:58] <tuxd3v> I discovered that my screen area that I want to copy is 1677x1011, starting I believe from the right top corner
[02:52:32] <tuxd3v> I want to eliminate from the image the systemtray panel and "start menu"
[03:01:57] *** Quits: arbitercoin (~Rheanna@218.78.79.129) (Remote host closed the connection)
[03:03:50] *** Joins: arbitercoin (~Rheanna@61.171.21.169)
[03:04:02] *** Quits: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3) (Ping timeout: 240 seconds)
[03:06:35] *** Joins: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru)
[03:07:01] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[03:16:19] *** Quits: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net) (Quit: The Lounge - https://thelounge.chat)
[03:17:40] *** Joins: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net)
[03:18:50] <tuxd3v> BtbN, furq , many many thanks, this is working for me:
[03:18:58] <tuxd3v> ffmpeg -video_size 1680x1011 -r 25 -f x11grab -i :0.0 -f pulse -ac 1 -i default -c:v libx264 -crf 18 -preset superfast -aspect 8:5 /home/tuxd3v/Desktop/output.mkv
[03:19:30] <BtbN> You're still using vorbis though, and are not specifying an audio bitrate
[03:19:42] <tuxd3v> the trick to eliminate the panel... well just passed 1680x1011 resolution, it will automatically eliminate the lower part ...found it :)
[03:19:54] <BtbN> And the aspect argument is most likely doing nothing, and in the worst case breaking it, because it's not 8:5 anymore
[03:20:17] <tuxd3v> I don't know if its the way of doing it, but I am trying for several days and exhausted..
[03:21:00] <tuxd3v> ho, the aspect ratio, right, its not neded now , thanks
[03:21:03] <tuxd3v> :)
[03:21:34] <tuxd3v> about the vorbis, how can I solve it, and what is best?
[03:21:49] <BtbN> aac with 128k bitrate is plenty
[03:22:00] <BtbN> so just -c:a aac -b:a 128k
[03:22:11] <BtbN> keep in mind it's mono, so 128k is very overkill
[03:22:38] <tuxd3v> 64k?
[03:22:47] <tuxd3v> yeah its mono unfortunatly :(
[03:23:00] <tuxd3v> how does people get stereo, 2 microphones?
[03:23:20] <BtbN> Nothing wrong with mono if it's just voice
[03:23:25] <BtbN> Not like you talk in stereo
[03:23:36] <tuxd3v> many thanks
[03:23:48] <BtbN> And you _want_ to overkill on quality
[03:23:51] *** beaver is now known as pong
[03:24:03] <BtbN> YouTube will re-encode no matter what, so you want to give it as lossless and pristine of a recording as possible
[03:24:39] <tuxd3v> ho, I didn't know how this stuff works but its very complex, audio and video
[03:29:56] <tuxd3v> BtbN, does 64k will be the same as 128k for audio mono?
[03:30:02] *** Quits: palasso (~palasso@user/palasso) (Ping timeout: 240 seconds)
[03:30:07] *** Quits: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net) (Quit: The Lounge - https://thelounge.chat)
[03:30:14] <tuxd3v> I don't really know the bitrates and stuff of the codecs :/
[03:30:51] <BtbN> 64k is half of 128k, so not sure what you mean
[03:31:07] <BtbN> With mono it's just twice as good, since the 128k normally get divided between all channels
[03:31:35] *** Joins: shokohsc8618 (~shokohsc@161.88.195.77.rev.sfr.net)
[03:31:44] <tuxd3v> ho, thanks for the explanation.. does it consume lots of cpu more, or its almost the same?
[03:32:58] <tuxd3v> it seems to be the same, in cpu power usage.. nice! :)
[03:37:09] <BtbN> audio is entirely neglibible next to video
[03:39:35] *** Quits: hpkn (~hpkn@gateway/tor-sasl/hpkn) (Remote host closed the connection)
[03:41:22] *** Joins: hpkn (~hpkn@gateway/tor-sasl/hpkn)
[03:49:51] *** Quits: pong (~beaver@user/pong) (Remote host closed the connection)
[03:52:28] *** Joins: pong (~beaver@user/pong)
[03:54:35] *** Joins: CruxOfTheB (~CruxOfThe@192.222.196.53)
[03:55:32] *** Quits: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com) (Remote host closed the connection)
[03:57:21] <tuxd3v> the problem I have is that audio is very low.. I can rize the volume, but then a lot of noise coming from my machine will take over :/
[03:57:51] <tuxd3v> I don't know if exists there a option to equalize audio to lets say 50% of volume automatically
[03:58:23] <tuxd3v> some videos you see people talking very loud and other very low volume(like in my case, right now..)
[04:19:46] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[04:25:03] <BtbN> If you boost up volume, naturally background noise gets louder as well
[04:25:23] <BtbN> Only way to fix that is having a good mic
[04:25:38] <BtbN> Or a noise gate that just mutes the mic when you're not talking
[04:26:35] <tuxd3v> BtbN, could that be provided by ffmpeg, I mean below certain volume, mute?
[04:26:43] <BtbN> No idea
[04:26:50] <BtbN> Probably, but don't ask me how
[04:26:56] <tuxd3v> :)
[04:27:49] <tuxd3v> one thing that I would love to have to complement the solution I have, is the capability to only add frames to file , if video changes..
[04:28:23] <tuxd3v> if video image is the same , mantain the same image, reducing in a colossal way processing power, and also size of the files
[04:28:29] <tuxd3v> that would be nice
[04:29:46] <tuxd3v> I read in simplescreenrecorder, they have that option, but its graphical app, so I don't know how to activate it via flags in the command..
[04:30:26] <tuxd3v> actually simprescreenrecorder produce garbage videos, at least for me, compared to what I have now only with ffmpeg :)
[04:30:34] <tuxd3v> thanks to you guys :)
[04:30:40] <BtbN> That's not how video works
[04:31:00] <BtbN> No player will properly play such a file
[04:31:07] <BtbN> and YouTube will hate the ever living fuck out of it as well
[04:46:07] *** Quits: CruxOfTheB (~CruxOfThe@192.222.196.53) (Ping timeout: 268 seconds)
[04:47:29] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[04:49:06] <furq> you can do something like that with -vf mpdecimate
[04:49:26] <furq> youtube will just convert it back to cfr but that's not your concern
[04:49:54] <furq> also if you have enough disk space you shouldn't encode intermediate files at all
[05:20:10] <tuxd3v> does ffmpeg can take advantage of vaapi?I read a bit about it, but doesn't found any workable solution, but I also switch all the flags in a wrong way :S
[05:21:53] <tuxd3v> vainfo, only reports this: https://paste.debian.net/hidden/e3c1c1a2/
[05:22:11] <tuxd3v> I have also opencl, but only opencl 1.1, via mesa clover
[05:22:40] <tuxd3v> I have a AMD integrated R 7 graphics card
[05:55:05] *** Quits: emcodem (uid483343@helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[05:57:55] *** Joins: omegahack0 (~omega@cpe-98-28-203-56.cinci.res.rr.com)
[06:13:59] *** Joins: nock (~noctarium@2804:14c:8786:81c3:a10c:e0ab:fd30:1397)
[06:38:25] *** Joins: aquijoule_ (~richbridg@213-225-3-145.nat.highway.a1.net)
[06:41:05] *** Quits: aquijoule__ (~richbridg@213-225-12-152.nat.highway.a1.net) (Ping timeout: 256 seconds)
[06:50:39] *** Quits: omegatron (~some@p5484903d.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[07:05:54] *** Quits: nock (~noctarium@2804:14c:8786:81c3:a10c:e0ab:fd30:1397) (Quit: Leaving)
[07:11:43] *** Quits: Nact (~l@host-85-27-120-251.dynamic.voo.be) (Quit: Konversation terminated!)
[07:11:43] *** Quits: arbitercoin (~Rheanna@61.171.21.169) (Remote host closed the connection)
[07:12:34] *** Joins: Vonter (~Vonter@user/vonter)
[07:12:46] *** Joins: arbitercoin (~Rheanna@218.78.104.50)
[07:17:11] *** Quits: jos1 (~jos3@dyndsl-091-248-050-207.ewe-ip-backbone.de) (Ping timeout: 264 seconds)
[07:30:30] *** Joins: jos1 (~jos3@dyndsl-091-096-043-110.ewe-ip-backbone.de)
[07:37:37] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[07:56:07] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[08:01:29] *** Quits: arbitercoin (~Rheanna@218.78.104.50) (Remote host closed the connection)
[08:03:07] *** Joins: arbitercoin (~Rheanna@218.78.104.50)
[08:34:35] *** Quits: waagrr (~waagrr@220.85.70.23) (Ping timeout: 264 seconds)
[08:44:44] <kepstin> yeah, ffmpeg can use vaapi. looks like encoding h264 should work on your card
[08:47:05] <kepstin> https://trac.ffmpeg.org/wiki/Hardware/VAAPI#Encoding has some example command lines
[08:47:42] <kepstin> note that your graphics don't have a very good hardware encoder; it might be helpful for e.g. live streams if you don't otherwise have enough cpu power to encode, for example.
[08:47:49] *** Joins: waagrr (~waagrr@220.85.70.23)
[08:48:30] <kepstin> but if you're encoding files i'd probably recommend sticking with a software encoder, even tho it might be slower
[08:51:29] <tuxd3v> kepstin, many thanks..
[08:51:31] *** Quits: arbitercoin (~Rheanna@218.78.104.50) (Remote host closed the connection)
[08:53:56] *** Joins: arbitercoin (~Rheanna@218.78.79.129)
[08:55:10] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[08:55:15] <tuxd3v> I know about -haccel vaapi -vaapi_device /dev/dri/renderD128
[08:56:14] <tuxd3v> I need to x11grab desktop pass it to the graphics to encode, and them add the audio from mic via cpu?
[08:59:06] <tuxd3v> I don't really know what I am doing, but I think, I will need to do this:
[09:00:58] <tuxd3v> ffmpeg -hwaccel vaapi -vaapi_device /dev/dri/renderD128 -video_size 1680x1011 -r 25 -f x11grab -i :0.0 -f pulse -ac 1 -i default -c:v libx264 -crf 18 -preset superfast -c:a aac -b:a 128k /home/tuxd3v/Desktop/output.mkv
[09:02:49] *** Quits: waleee (~waleee@h-82-196-111-63.NA.cust.bahnhof.se) (Quit: WeeChat 3.3)
[09:05:54] *** Quits: waagrr (~waagrr@220.85.70.23) (Ping timeout: 260 seconds)
[09:15:46] *** Joins: waagrr (~waagrr@220.85.70.23)
[09:16:33] <tuxd3v> it gives me error: ffmpeg -vaapi_device /dev/dri/renderD128 -video_size 1680x1011 -r 25 -f x11grab -i :0.0 -f pulse -ac 1 -i default -c:v h264_vaapi -c:a aac -b:a 128k /home/tuxd3v/Desktop/output.mkv
[09:17:21] <tuxd3v> https://paste.debian.net/hidden/28c07176/
[09:19:07] <tuxd3v> I tried with h264_vaapi codec
[09:23:04] <tuxd3v> Impossible to convert between the formats supported by the filter 'Parsed_null_0' and the filter 'auto_scaler_0'
[09:25:45] <tuxd3v> maybe I also need a buffer to get the screen video, and input it on the graphics card?..just guessing..
[09:27:41] *** Quits: waagrr (~waagrr@220.85.70.23) (Ping timeout: 256 seconds)
[09:33:36] *** Joins: waagrr (~waagrr@220.85.70.23)
[09:34:23] <tuxd3v> maybe my vaapi version is to old?2.10.0
[09:35:05] <tuxd3v> I will try on debian unstable tomorrow its 5 am right now :)
[09:58:33] *** Joins: someuser (~user@197.54.24.66)
[10:17:26] *** Joins: kib (~kib@user/kib)
[11:14:47] *** Quits: vqueiroz (uid340368@hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[11:34:33] *** Joins: softworkz_ (~softworkz@user/softworkz)
[11:34:33] *** softworkz is now known as Guest8871
[11:34:33] *** Quits: Guest8871 (~softworkz@user/softworkz) (Killed (molybdenum.libera.chat (Nickname regained by services)))
[11:34:33] *** softworkz_ is now known as softworkz
[11:34:45] *** Joins: a0z (~a0z@90.244.184.28)
[11:39:53] *** Joins: auth (~auth@user/auth)
[11:43:07] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[11:44:10] *** Joins: Vonter (~Vonter@user/vonter)
[11:51:30] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 260 seconds)
[11:51:34] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 260 seconds)
[11:55:56] *** Joins: softworkz_ (~softworkz@user/softworkz)
[11:55:56] *** softworkz is now known as Guest7595
[11:55:56] *** Quits: Guest7595 (~softworkz@user/softworkz) (Killed (strontium.libera.chat (Nickname regained by services)))
[11:55:56] *** softworkz_ is now known as softworkz
[12:00:18] *** Quits: aquijoule_ (~richbridg@213-225-3-145.nat.highway.a1.net) (Remote host closed the connection)
[12:03:08] *** Joins: palasso (~palasso@user/palasso)
[12:06:25] *** Joins: nemesit (~nemesit@myriadvisuals.com)
[12:06:56] *** Joins: dreamon (~dreamon@pd95032c6.dip0.t-ipconnect.de)
[12:11:17] *** Joins: lavaball (felix@31.204.155.215)
[12:18:07] <nemesit> anyone already awake?
[12:19:43] *** Quits: Atsuko (~x@45.63.115.64) (Ping timeout: 250 seconds)
[12:20:08] <nemesit> and knows how I could extract a frame at a scene change and get the corresponding timestamp/pts whatever for that frame?
[12:20:14] <nemesit> I tried ffmpeg -ss 12763ms -t 180 -i input.mp4 -f image2 -vf 'select=gt(scene\,0.3),metadata=print' -frames:v 1 scene.jpg
[12:20:56] <nemesit> but the pts_time printed is not the one of the frame extracted
[12:24:10] *** Joins: Atsuko (~x@45.63.115.64)
[12:28:35] <nemesit> I tried with this video with burned in everything https://www.dropbox.com/s/29gry56hts2vaj1/input_23.976.mp4?dl=0
[12:29:40] <nemesit> and these 3 commands https://pastebin.com/eXmBZb91
[12:30:01] <nemesit> they all produce the same frame but different pts_time printouts
[12:30:09] <nemesit> any help would be appreciated
[12:41:28] *** Joins: Vonter (~Vonter@user/vonter)
[12:42:37] <nemesit> ah shit the pts_time is only the offset from the ms value in seek time?
[13:05:54] *** Joins: Volgaar (~volgaar@193.137.116.78.rev.sfr.net)
[13:06:33] *** Quits: auth (~auth@user/auth) (Quit: Leaving)
[13:10:25] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[13:13:27] *** Joins: softworkz_ (~softworkz@user/softworkz)
[13:13:28] *** Quits: softworkz (~softworkz@user/softworkz) (Killed (calcium.libera.chat (Nickname regained by services)))
[13:13:28] *** softworkz_ is now known as softworkz
[13:13:38] *** Joins: emcodem (uid483343@helmsley.irccloud.com)
[13:30:05] *** Quits: justache (~justache@user/justache) (Read error: Connection reset by peer)
[13:31:12] *** Joins: justache (~justache@user/justache)
[13:32:31] *** Quits: Nex8192 (~Nex8192@user/nex8192) (Ping timeout: 250 seconds)
[13:36:09] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[13:36:18] *** Quits: pong (~beaver@user/pong) (Ping timeout: 276 seconds)
[13:37:50] *** Joins: pong (~beaver@user/pong)
[13:42:37] *** Quits: af (~af@awalgarg.me) (Ping timeout: 268 seconds)
[13:55:31] *** Joins: af (~af@awalgarg.me)
[14:01:30] *** Joins: vlm (~vlm@user/vlm)
[14:06:04] *** Joins: rsx (~dummy@ppp-188-174-139-53.dynamic.mnet-online.de)
[14:09:38] *** Joins: Nex8192 (~Nex8192@user/nex8192)
[14:26:12] *** Joins: nillyhan (~00000000@user/nillyhan)
[14:31:06] *** Joins: Amoz (~alex@h-155-4-73-184.A192.priv.bahnhof.se)
[14:31:37] *** Quits: nyuszika7h (nyuszika7h@lykos/dev/nyuszika7h) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[14:32:02] *** Joins: nyuszika7h (~nyuszika7@lykos/dev/nyuszika7h)
[14:58:17] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[15:05:07] *** Joins: auth (~auth@user/auth)
[15:06:08] *** Joins: luni-4 (uid453292@ilkley.irccloud.com)
[15:08:44] *** Quits: nillyhan (~00000000@user/nillyhan) (Quit: Ping timeout (120 seconds))
[15:09:12] *** Joins: nillyhan (~00000000@user/nillyhan)
[15:10:05] *** Joins: softworkz_ (~softworkz@user/softworkz)
[15:10:05] *** Quits: softworkz (~softworkz@user/softworkz) (Killed (sodium.libera.chat (Nickname regained by services)))
[15:10:05] *** softworkz_ is now known as softworkz
[15:13:46] <video2go> hi. I think I have a problem with lack of knowledge and not finding the right words to get a result. We do a live production in 108p50 which is OK, but I have trouble of getting this to 1080i50 for TV production. I use Blackmagic Up/Down Cross converter, but I am not satisficed with the result. How could I use ffmpeg to get SRT stream and to convert 1080p50 to 1080i50?
[15:13:59] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[15:19:14] *** Quits: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru) (Ping timeout: 260 seconds)
[15:20:26] <durandal_1707> video2go: there is interlace and tinterlace filters for that iiuc
[15:22:01] *** Joins: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com)
[15:22:30] <video2go> durandal_1707: do you have any example?
[15:22:50] *** Joins: guest29348769876 (~dummy@ppp-188-174-150-85.dynamic.mnet-online.de)
[15:25:00] <durandal_1707> video2go: consult filtes documentation available on ffmpeg web page
[15:25:02] *** Quits: rsx (~dummy@ppp-188-174-139-53.dynamic.mnet-online.de) (Ping timeout: 240 seconds)
[15:25:13] <durandal_1707> it is very trivial
[15:26:10] <video2go> I have "loast" several day on this, not getting anywhere that is why I turned up here asking :D
[15:26:15] <durandal_1707> ffmpeg -i INPUT -vf interlace=scan=tff:lowpass=linear -c:a copy OUTPUT
[15:26:18] <video2go> *"lost"
[15:28:15] <durandal_1707> https://ffmpeg.org/ffmpeg-filters.html#interlace
[15:29:22] *** Quits: guest29348769876 (~dummy@ppp-188-174-150-85.dynamic.mnet-online.de) (Quit: guest29348769876)
[15:29:35] *** Joins: rsx (~dummy@ppp-188-174-150-85.dynamic.mnet-online.de)
[15:30:00] *** Quits: dreamon (~dreamon@pd95032c6.dip0.t-ipconnect.de) (Ping timeout: 265 seconds)
[15:30:11] <durandal_1707> video2go: but you want 50i from 50p
[15:30:36] <durandal_1707> for 50i you need to have original at 100p
[15:31:57] <durandal_1707> you could duplicate every frame to get p100
[15:31:57] *** Quits: arbitercoin (~Rheanna@218.78.79.129) (Remote host closed the connection)
[15:33:18] <durandal_1707> or motion interpolate p50 to p100 but that may introduce sometimes various artifacts
[15:33:23] *** Joins: arbitercoin (~Rheanna@218.78.94.61)
[15:57:46] *** Joins: bin76 (~bin@103.88.46.41)
[15:58:56] <video2go> ?
[15:59:05] <video2go> is not 50i = 25p?
[16:00:30] <video2go> it's ice hockey. Done in 1080p50. To get 1080p25 it's half. I believed that 50i is 25p?
[16:01:54] *** Joins: Fohsap (~Muimi@2001:19f0:5001:2bf8:5400:3ff:fe30:8554)
[16:04:33] *** Quits: pntaylor (~quassel@2405:6e00:10da:8700::d) (Quit: No Ping reply in 180 seconds.)
[16:05:47] *** Joins: pntaylor (~quassel@2405:6e00:10da:8700::9)
[16:05:49] <durandal_1707> video2go: nope, 50i is 50i
[16:08:54] *** Joins: Fohsap_ (~Muimi@60.20.222.147)
[16:09:12] <durandal_1707> interlace process drops every 2nd scanline/row
[16:09:57] <durandal_1707> and than missing/dropped rows are replaced with next frame from time in future
[16:10:02] *** Quits: Fohsap (~Muimi@2001:19f0:5001:2bf8:5400:3ff:fe30:8554) (Ping timeout: 240 seconds)
[16:15:26] *** Quits: bin76 (~bin@103.88.46.41) (Quit: Ping timeout (120 seconds))
[16:17:49] *** Joins: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru)
[16:17:56] *** Joins: softworkz_ (~softworkz@user/softworkz)
[16:17:56] *** softworkz is now known as Guest8984
[16:17:56] *** Quits: Guest8984 (~softworkz@user/softworkz) (Killed (strontium.libera.chat (Nickname regained by services)))
[16:17:56] *** softworkz_ is now known as softworkz
[16:21:40] *** Quits: arbitercoin (~Rheanna@218.78.94.61) (Remote host closed the connection)
[16:24:10] *** Joins: arbitercoin (~Rheanna@61.171.38.68)
[16:31:35] *** fling is now known as ciphersalad
[16:38:04] *** Joins: vqueiroz (uid340368@hampstead.irccloud.com)
[16:43:18] *** Quits: kib (~kib@user/kib) (Ping timeout: 268 seconds)
[16:48:15] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 268 seconds)
[16:57:20] *** Joins: Vonter (~Vonter@user/vonter)
[17:01:01] *** Quits: softworkz (~softworkz@user/softworkz) (Ping timeout: 256 seconds)
[17:06:00] *** ciphersalad is now known as fling
[17:20:17] *** Quits: Amoz (~alex@h-155-4-73-184.A192.priv.bahnhof.se) (Ping timeout: 256 seconds)
[17:21:55] *** Joins: minimal (~minimal@user/minimal)
[17:28:30] *** Quits: nillyhan (~00000000@user/nillyhan) (Ping timeout: 260 seconds)
[17:29:49] *** Quits: tuxd3v (~tuxd3v@93.102.33.166.rev.optimus.pt) (Quit: Leaving)
[17:36:59] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 264 seconds)
[17:38:39] *** Joins: waleee (~waleee@h-82-196-111-63.NA.cust.bahnhof.se)
[17:40:35] *** Quits: a0z (~a0z@90.244.184.28) (Ping timeout: 264 seconds)
[17:46:46] *** Joins: tuxd3v (~tuxd3v@93.102.33.166.rev.optimus.pt)
[17:46:49] *** Quits: Al2O3 (~Al2O3@user/al2o3) (Ping timeout: 268 seconds)
[17:47:14] *** Joins: nillyhan (~00000000@user/nillyhan)
[17:54:41] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 250 seconds)
[17:58:01] *** Joins: Al2O3 (~Al2O3@user/al2o3)
[18:18:13] <tuxd3v> guys maybe I have now GPU accelerated encoding of H264, cpu usage is a lot lower with my AMD R7 Graphics Card :)
[18:18:32] *** Quits: Colt (~Colt@user/colt) (Quit: Leaving)
[18:24:45] <tuxd3v> ffmpeg -init_hw_device vaapi=GPU:/dev/dri/renderD128 -hwaccel vaapi -hwaccel_output_format vaapi -hwaccel_device GPU -video_size 1680x1010 -r 25 -f x11grab -i :0.0 -f pulse -ac 1 -i default -filter_hw_device GPU -vf 'format=nv12|vaapi,hwupload' -c:v h264_vaapi -c:a aac -b:a 128k /home/tuxd3v/Desktop/video.$(date +"%H_%M_%S").mkv
[18:27:29] <tuxd3v> vainfo information: https://paste.debian.net/hidden/f2864248/
[18:27:43] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[18:27:53] <tuxd3v> vaapi version: 2.12.0
[18:28:27] *** Joins: kib (~kib@user/kib)
[18:29:37] <tuxd3v> I am now testing on debian unstable
[18:33:25] <tuxd3v> it uses a lot less cpu :)
[18:52:26] *** Joins: keypusher (keypusher@user/keypusher)
[18:52:57] *** Joins: VarunAgw (~VarunAgw@103.158.148.26)
[18:54:39] <BtbN> And is the quality any good?
[19:03:09] <tuxd3v> yeah the quality seems the same as with libxh264
[19:03:47] <tuxd3v> also when playing the video, it uses half of cpu when encoding it via gpu
[19:04:10] <tuxd3v> I mean, I don't have a way to mesure the quality :S
[19:04:24] <tuxd3v> but the result seems petty aceptable
[19:05:12] <tuxd3v> now, I don't know if using h264_vaapi, if I have the chance to set -crf 18 -preset superfast
[19:05:43] <tuxd3v> I will test now :)
[19:05:59] <tuxd3v> when encoding it uses a lot less cpu
[19:06:02] <furq> you can't
[19:06:08] <furq> those are x264 options
[19:06:55] <tuxd3v> furq, does you thing there are options for  h264_vaapi, or all in it depends on GPU and only it deals with it?
[19:07:11] <furq> there are options for it but your gpu may or may not do anything with them
[19:08:06] <furq> kaveri is a fairly early vce so it might be missing some features
[19:08:28] <tuxd3v> its GCN 2
[19:08:37] <furq> right
[19:08:40] <furq> they're up to 4.1 now
[19:11:39] <tuxd3v> maybe the quality is not exactly the same as with  -crf 18 -preset superfast, but it seems unnoticeable
[19:14:12] <tuxd3v> and when playing the video, is uses less than half of the cpu, comparing to playing a video encoded by libx264
[19:15:21] <tuxd3v> furq, it would be nice to test some flags to apply to codev h264_vaapi, but I don't know which ones :S
[19:16:57] <furq> https://trac.ffmpeg.org/wiki/Hardware/VAAPI#Encoding
[19:22:12] *** Quits: kib (~kib@user/kib) (Quit: WeeChat 3.3)
[19:26:27] *** Joins: a0z (~a0z@90.244.184.28)
[19:27:26] *** Quits: a0z (~a0z@90.244.184.28) (Client Quit)
[19:30:01] *** Joins: Nact (~l@host-85-27-120-251.dynamic.voo.be)
[19:42:26] *** Quits: HumanG33k (~HumanG33k@2a01:e0a:95:5d90:215:c5ff:fe68:fb04) (Quit: WeeChat 3.0)
[19:45:38] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:51:27] <tuxd3v> furq, many thanks, I didn't had scrolled down the page..i thought that it didn't have the extra juice :)
[19:51:29] <tuxd3v> thanks
[20:04:51] <oliv3> hi, i tried displaying 3 videos side-by-side like this https://paste.debian.net/1220294/, but only 2 show up
[20:07:27] *** Quits: vqueiroz (uid340368@hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[20:11:59] *** Joins: jcelerier (~jcelerier@2a01:cb1d:8b98:6a00:2e56:dcff:fe39:5547)
[20:12:45] <jcelerier> hi :) when I try to download things from https://ffmepg.org it tells me that the cert has expired
[20:12:49] <jcelerier> ffmpeg*
[20:12:57] <jcelerier> on multiple computers here..
[20:14:57] *** Quits: rsx (~dummy@ppp-188-174-150-85.dynamic.mnet-online.de) (Quit: rsx)
[20:19:32] *** Joins: Guest9482 (~Buster@46.160.36.66)
[20:24:21] <c_14> I hope you mean https://ffmpeg.org/ jcelerier
[20:25:05] <c_14> (typo in the url, probably some scam site)
[20:25:23] <c_14> the actual ffmpeg.org works fine here
[20:26:21] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 250 seconds)
[20:26:36] <oliv3> ok nvm, found my problem
[20:26:54] <oliv3> it should have been -filter_complex "hstack,hstack"
[20:27:25] *** Joins: Narrat (~omnius@p200300df5f15684606ea56fffe2e7cdc.dip0.t-ipconnect.de)
[20:30:09] *** Quits: englishm (sid6629@tinside.irccloud.com) (Remote host closed the connection)
[20:30:10] *** Quits: buhman (sid411355@user/buhman) (Remote host closed the connection)
[20:31:58] *** Quits: Fohsap_ (~Muimi@60.20.222.147) (Quit: Going offline, see ya! (www.adiirc.com))
[20:37:24] *** Quits: luni-4 (uid453292@ilkley.irccloud.com) (Remote host closed the connection)
[20:37:24] *** Quits: itok_ (sid418430@ilkley.irccloud.com) (Remote host closed the connection)
[20:37:25] *** Quits: Naleksuh (sid454423@wikimedia/naleksuh) (Remote host closed the connection)
[20:37:25] *** Quits: ullbeking (sid5364@user/ullbeking) (Remote host closed the connection)
[20:37:25] *** Quits: Tips|Cloud (sid62231@ilkley.irccloud.com) (Remote host closed the connection)
[20:37:58] <jcelerier> c_14 no aha the typo was in my irc message
[20:37:59] *** Joins: cosimone (~user@2001:b07:ae5:db26:a7aa:8027:6b4e:2fb3)
[20:38:07] <jcelerier> one of my CI scripts started failing
[20:38:13] <jcelerier> and that one definitely does not have the typo
[20:38:42] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[20:39:09] <c_14> jcelerier: which link has the issues?
[20:40:09] <jcelerier> c_14: my error is with wget -nv https://ffmpeg.org/releases/ffmpeg-snapshot.tar.bz2
[20:40:23] <jcelerier> but just opening ffmpeg.org in my browser already displays the warning
[20:42:37] <c_14> certs are valid here, for ffmpeg.org from Nov. 1 2021 to Jan 30 2022 signed by LetsEncrypt -> R3 -> ISRG X1
[20:43:56] <tuxd3v> furq, I am testing now with -c:v h264_vaapi -qp 18
[20:44:18] <tuxd3v> but I don't know if big numbers are bad or worst.. it doesn't say
[20:44:36] <tuxd3v> -qp default seems to be 20
[20:44:57] <jcelerier> okay weird, wonder what could cause the issue on my end... i doubt it'd be some isp tampering
[20:45:02] <jcelerier> thanks for checking c_14
[20:45:42] <c_14> try inspecting the cert in your browser?
[20:48:42] *** Quits: termos (sid18647@helmsley.irccloud.com) (Ping timeout: 260 seconds)
[20:49:10] *** Quits: emcodem (uid483343@helmsley.irccloud.com) (Ping timeout: 260 seconds)
[20:49:58] *** Quits: linjie (sid455360@helmsley.irccloud.com) (Ping timeout: 250 seconds)
[20:52:35] *** Quits: kurosu (uid342582@hampstead.irccloud.com) (Ping timeout: 246 seconds)
[20:52:59] *** Quits: mindfreeze (uid250931@user/mindfreeze) (Ping timeout: 250 seconds)
[20:53:04] *** Quits: raytiley (sid13397@hampstead.irccloud.com) (Ping timeout: 260 seconds)
[20:53:04] *** Quits: Nick_d0gb0y (sid467444@lymington.irccloud.com) (Ping timeout: 260 seconds)
[20:53:04] *** Quits: Manouchehri (sid384576@hampstead.irccloud.com) (Ping timeout: 260 seconds)
[20:53:25] *** Quits: tmatth (sid143283@videolan/developer/tmatth) (Ping timeout: 250 seconds)
[20:54:28] *** Quits: video2go (sid515994@lymington.irccloud.com) (Ping timeout: 260 seconds)
[21:03:23] *** Quits: Narrat (~omnius@p200300df5f15684606ea56fffe2e7cdc.dip0.t-ipconnect.de) (Ping timeout: 264 seconds)
[21:03:48] *** Joins: Narrat (~omnius@p200300df5f15684606ea56fffe2e7cdc.dip0.t-ipconnect.de)
[21:05:02] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[21:05:26] *** Joins: a0z (~a0z@90.244.184.28)
[21:06:39] <tuxd3v> furq, what I notice is that if -qp 20, when playing only the video, the cpu usage is half of that with when recorded with -qp 18
[21:07:03] <tuxd3v> so I suspect that -qp 18 is more quality than -qp 20
[21:09:59] *** Quits: jafa (~jafa@ip70-162-106-203.ph.ph.cox.net) (Ping timeout: 264 seconds)
[21:11:54] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[21:12:31] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[21:12:36] <tuxd3v> outch... the video size is very big..
[21:13:37] <tuxd3v> -qp 20, 17:40 min - 234.5MB
[21:14:50] <tuxd3v> -qp 18, 11:42 min - 145.2MB
[21:16:00] *** Joins: Naleksuh (~Naleksuh@wikimedia/naleksuh)
[21:17:55] *** Joins: asdf_ (~asdf@87-92-77-166.bb.dnainternet.fi)
[21:18:19] <kepstin> huh, that's really weird; -qp usually indicates constant-qp mode, and larger numbers should provide smaller lower quality files.
[21:19:11] *** Joins: jafa (~jafa@ip70-162-106-203.ph.ph.cox.net)
[21:19:57] <tuxd3v> -qp 20 -> .22122641509433962264 MB/s
[21:20:46] <tuxd3v> -qp 18 -> .20683760683760683760 MB/s
[21:21:28] <tuxd3v> it seems that -qp 18 provides a bit smaller files, since it does less MB/s comparing to -qp 20
[21:21:35] *** Joins: qantata (~asdf@87-92-77-166.bb.dnainternet.fi)
[21:21:36] *** Quits: arbitercoin (~Rheanna@61.171.38.68) (Remote host closed the connection)
[21:21:42] <tuxd3v> maybe there are here some indirect factors..
[21:22:19] <tuxd3v> laos I notice that via vaapi, some frames are lost :(
[21:22:29] <another|> jcelerier: could be because of the recent Let's Encrypt Cert change. Update your libs
[21:22:32] <tuxd3v> laos -> also
[21:23:13] *** Joins: arbitercoin (~Rheanna@218.78.105.67)
[21:23:34] <qantata> is this a good place to ask about transcoding, remuxing and stuff?
[21:23:34] <tuxd3v> I opened the cpu system monitor, and I see that it slides fast, from time to time..
[21:25:42] <JEEB> &34
[21:36:06] *** Joins: noarb (~noarb@user/noarb)
[21:41:53] *** Joins: zsoltiv_ (~zsoltiv@fibhost-67-12-35.fibernet.hu)
[21:43:04] <tuxd3v> is there any diference between kmsgrab, and x11grab?
[21:43:26] <tuxd3v> I mean can we do exactly the same with kmsgrab as with x11grab?
[21:43:48] <tuxd3v> or the cursor(mouse) is out..
[21:44:02] <tuxd3v> does vaapi work via kmsgrab?
[21:44:43] <tuxd3v> for what I understand kmsgrab should be faster since the video is already in graphics card..
[21:57:16] *** Quits: Aelius (~Aelius@user/aelius) (Read error: Connection reset by peer)
[21:57:37] *** Joins: Aelius (~Aelius@user/aelius)
[22:11:01] *** Joins: omegatron (~some@p5484903d.dip0.t-ipconnect.de)
[22:12:10] *** Quits: arbitercoin (~Rheanna@218.78.105.67) (Remote host closed the connection)
[22:14:08] *** Joins: ullbeking (sid5364@user/ullbeking)
[22:14:24] *** Joins: arbitercoin (~Rheanna@218.78.99.237)
[22:18:42] *** Joins: ullbeking_ (sid5364@user/ullbeking)
[22:19:06] *** Joins: N77 (~N77@075-112-092-167.res.spectrum.com)
[22:19:24] *** Quits: ullbeking (sid5364@user/ullbeking) (Ping timeout: 260 seconds)
[22:23:08] *** Quits: ullbeking_ (sid5364@user/ullbeking) (Ping timeout: 260 seconds)
[22:23:47] *** Joins: ullbeking_ (sid5364@id-5364.ilkley.irccloud.com)
[22:23:49] <tuxd3v> I get a :
[22:23:56] <tuxd3v> Guessed Channel Layout for Input Stream #1.0 : mono
[22:24:06] <tuxd3v> but I have there -ac 1
[22:24:15] <tuxd3v> why is he guessing?
[22:25:00] <tuxd3v> also: Driver does not support some wanted packed headers (wanted 0xd, found 0x1)
[22:25:00] <another|> because you didn't specify a layout
[22:25:04] <tuxd3v> what this mean?
[22:25:28] *** Joins: Tips|Cloud (sid62231@id-62231.ilkley.irccloud.com)
[22:25:48] <tuxd3v> this is my command:
[22:25:54] <tuxd3v> ffmpeg -init_hw_device vaapi=GPU:/dev/dri/renderD128 -hwaccel vaapi -hwaccel_output_format vaapi -hwaccel_device GPU -video_size 1680x1010 -r 25 -f x11grab -i :0.0 -f pulse -ac 1 -i default -filter_hw_device GPU -vf 'format=nv12|vaapi,hwupload' -c:v h264_vaapi -qp 18 -c:a aac -b:a 128k /home/tuxd3v/Desktop/video.$(date +"%H_%M_%S").mkv
[22:26:09] <tuxd3v> I do -f pulse -ac 1
[22:27:19] *** Joins: termos (sid18647@id-18647.helmsley.irccloud.com)
[22:27:39] *** Joins: xkuru (~xkuru@user/xkuru)
[22:28:15] *** Joins: itok_ (sid418430@id-418430.ilkley.irccloud.com)
[22:28:40] *** Joins: Naleksuh_ (sid454423@wikimedia/naleksuh)
[22:30:54] <another|> yes, and ffmpeg is guessing the layout from that
[22:33:05] *** Joins: luni-4 (uid453292@id-453292.ilkley.irccloud.com)
[22:33:44] <tuxd3v> another|, how can I define one?
[22:33:54] *** Joins: raytiley (sid13397@id-13397.hampstead.irccloud.com)
[22:33:57] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[22:35:03] <another|> aformat or something?
[22:35:18] <tuxd3v> don't know.. :S
[22:36:32] *** Joins: englishm (sid6629@id-6629.tinside.irccloud.com)
[22:36:39] *** Joins: tmatth (sid143283@videolan/developer/tmatth)
[22:38:36] *** Quits: jab416171 (~jab416171@c-174-52-57-117.hsd1.ut.comcast.net) (Ping timeout: 244 seconds)
[22:38:50] *** Joins: Manouchehri (sid384576@id-384576.hampstead.irccloud.com)
[22:39:25] *** Joins: linjie (sid455360@id-455360.helmsley.irccloud.com)
[22:39:55] *** Joins: emcodem (uid483343@id-483343.helmsley.irccloud.com)
[22:40:40] *** Joins: video2go (sid515994@id-515994.lymington.irccloud.com)
[22:40:48] *** Joins: buhman (sid411355@user/buhman)
[22:41:51] *** Joins: mindfreeze (uid250931@user/mindfreeze)
[22:42:41] *** Joins: kurosu (uid342582@id-342582.hampstead.irccloud.com)
[22:44:15] <N77> Here is the code I've been working with:
[22:44:18] <N77> Functions:
[22:44:20] <N77> Uploaded file: https://uploads.kiwiirc.com/files/7010a5a3963c96101347af045991d782/pasted.txt
[22:44:35] <N77> Main Function:
[22:44:37] <N77> Uploaded file: https://uploads.kiwiirc.com/files/6f722c1b26314c163d82c3247f8ada14/pasted.txt
[22:45:19] *** Quits: fkaa (~fkaa@81-226-20-99-no256.tbcn.telia.com) (Quit: Leaving)
[22:45:35] <JEEB> I didn't look at the code, but your issue yesterday seemed to be that the timestamps were completely different between the buffers' inputs to the overlay
[22:45:39] <tuxd3v> -c:v libx264 -crf 18 -preset superfast - produces files that are half in size of- -c:v h264_vaapi -qp 18
[22:46:01] <JEEB> N77: the simplest way to fix that is to just make whatever is feeding your application to utilize something as a timestamp base
[22:46:11] *** Joins: Nick_d0gb0y (sid467444@id-467444.lymington.irccloud.com)
[22:46:14] <JEEB> that way it doesn't matter whether you started 10 seconds or 1 second ago
[22:46:16] <tuxd3v> also the bitrate of '-c:v libx264 -crf 18 -preset superfast' is half of '-c:v h264_vaapi -qp 18'
[22:47:07] <N77> JEEB: Thanks for the suggestions, I tried that out along with converting between different time_base(s) like you suggested, but the video was still running slow. I wasn't sure of what else to do
[22:49:27] <N77> I can post the code that I modified in one of the functions to convert between the different time_bases(s) that you suggested if you want
[22:50:30] <JEEB> time base synchronization just means your timestamps should be read OK and passed to the filter chain OK. but since the timestamps were so different and you noted that things worked as long as you started inputs close enough - it sounds like your input isn't utilizing the same timestamp offset
[22:50:40] <JEEB> so you have something feeding that application
[22:50:53] *** Joins: Amoz (~alex@h-155-4-73-184.A192.priv.bahnhof.se)
[22:51:05] <JEEB> simplest would be to have something like input timestamp offset being the unix timestamp or something :P
[22:51:29] <JEEB> that way even if you start the inputs at different times, the timestamps should be in similar ranges when you start reading them
[22:54:32] <N77> That was my first thought. When I did that (before I posted questions here), one of the videos (the screen-grab video) was playing back very slow. When I implemented the change of converting from the AVStream time_base to the AVCodecContext time_base (before calling avcodec_send_packet()) then converting from AVCodecContext time_base to
[22:54:33] <N77> AVFilterContext time_base (before calling av_buffersrc_add_frame()), both videos were playing slower than expected.
[22:56:42] <N77> So, the suggestions worked concerning getting the final frame out of the av_buffersink_get_frame() call, but I'm not sure why they're playing back slowly...
[22:57:45] <JEEB> well you can check if your logic seems sound by using av_ts2timestr
[22:57:50] <JEEB> and logging that
[22:57:53] *** Quits: asdf_ (~asdf@87-92-77-166.bb.dnainternet.fi) (Quit: leaving)
[22:57:53] *** Quits: qantata (~asdf@87-92-77-166.bb.dnainternet.fi) (Quit: leaving)
[22:58:19] <JEEB> you first get packet from demuxer, and you log av_ts2timestr(pkt->pts, AVStream->time_base)
[22:58:44] <JEEB> then you convert to decoder's time base and do the same before feeding to decoder
[22:58:55] <JEEB> time base being the one you just supposedly converted to
[22:59:28] <JEEB> it will basically give you a string'ified representation of the pts on that time base
[23:00:03] <N77> Gotcha. Thanks I'll try that out, I'll let you know how it goes
[23:00:59] <JEEB> and if your log leve is higher than or equal to AV_LOG_VERBOSE f.ex. the buffersrc filter will log its configuration (including time base as tb)
[23:01:08] <JEEB> so you can attempt to verify such things
[23:01:30] <JEEB> as long as these timestamps are just correctly adjusted according to the time base they're being taken into, everything should be fine
[23:01:38] *** Quits: arbitercoin (~Rheanna@218.78.99.237) (Remote host closed the connection)
[23:03:04] *** Joins: arbitercoin (~Rheanna@218.78.94.61)
[23:14:00] <intrac> does ffmpeg have any equivalent filter to Audacity's voice removal/isolation tool?
[23:14:16] <intrac> I think it works by doing a difference of the left and right channels
[23:14:50] <intrac> which can remove much of the vocals if they're mixed in the centre (equal in both left/right channels)
[23:17:44] <BtbN> Google says pan="stereo|c0=c0|c1=-1*c1"
[23:19:12] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 268 seconds)
[23:20:15] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[23:21:18] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 260 seconds)
[23:22:56] <tuxd3v> with '-c:v h264_vaapi' I need to find a way to lower the bitrate from ~1600kb/s to around 800-900Kb/s, is that possible?
[23:23:18] <tuxd3v> I tried -qb 24 - compression_level 6
[23:23:25] <tuxd3v> but still no luck
[23:24:13] *** Quits: a0z (~a0z@90.244.184.28) (Ping timeout: 250 seconds)
[23:25:02] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 240 seconds)
[23:25:23] <BtbN> If it's reasonably possible depends entirely on the contents
[23:25:36] <BtbN> that's a really low bitrate for non-SD content, so it'll probably trash the quality
[23:26:27] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[23:27:09] <tuxd3v> I have a reasonable quality with ~900kb/s with '-c:v libx264 -crf 18 -preset superfast'
[23:27:25] <BtbN> libx264 is worlds better at encoding h264 than any old hwenc
[23:27:28] <tuxd3v> but I don't know how they correlate each other..
[23:28:07] <tuxd3v> yeah that is probably the problem of my hw encoder
[23:32:54] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 260 seconds)
[23:35:50] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[23:43:13] <emcodem> @tuxd3v what you meam by correlate?
[23:45:10] <tuxd3v> emcodem, corresponding options that exist in libx264 compared with options that exist in h264_vaapi
[23:45:15] *** Quits: thunfisch (~thunfisch@user/thunfisch) (Ping timeout: 250 seconds)
[23:46:03] *** Joins: thunfisch (~thunfisch@user/thunfisch)
[23:49:15] *** Quits: Naleksuh (~Naleksuh@wikimedia/naleksuh) (Quit: Connection closed)
[23:49:15] *** Naleksuh_ is now known as Naleksuh
[23:51:35] *** Quits: arbitercoin (~Rheanna@218.78.94.61) (Remote host closed the connection)
[23:52:03] <BtbN> They are entirely different encoders. The options don't relate in any way, outside of obvious things like bitrate, gop length and such
[23:52:27] *** Joins: arbitercoin (~Rheanna@218.78.109.69)
[23:55:20] <emcodem> yeah well, qp relates to crf but not 1:1, one always needs to find out how it exactly behaves on your own hardware
[23:56:30] <emcodem> e.g. if crf 35 produces 1mbit/s and qp 23 does the same, you just found out how they relate :D ..but as it's different encoders, the quality will be totally different
[23:59:27] <BtbN> That's not how either of those work
[23:59:40] <BtbN> crf 35 of a cs:go match will produce a ton more data than the same value for a chess match
