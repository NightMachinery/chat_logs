[00:11:15] *** Quits: Volgaar (~volgaar@40.34.6.93.rev.sfr.net) (Quit: WeeChat 3.4)
[00:22:32] <aphysically> time_base=1/1000000000
[00:22:36] <aphysically> seems a bit excessive but okay
[00:26:12] *** Quits: pat (~pat@104.234.247.99) (Quit: Connection closed)
[00:26:18] <furq> and still not enough to represent ntsc
[00:27:44] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:30:00] <klaxa> sounds more like a base10 problem to me
[00:33:48] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 240 seconds)
[00:41:11] <kepstin> wasn't there some vr project a few years back which game up with some timebase that was the lcm of a whole bunch of common video and audio rates, heh?
[00:41:39] <kepstin> (i have no idea if anything actually used it, but it sure was a big and awkward number)
[00:43:58] <kepstin> ah, there it is: https://github.com/facebookarchive/Flicks "1/705600000"
[00:44:10] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[00:47:31] *** Joins: oriba (~oriba@dynamic-077-183-242-005.77.183.pool.telefonica.de)
[00:48:48] *** Quits: oriba (~oriba@dynamic-077-183-242-005.77.183.pool.telefonica.de) (Client Quit)
[00:49:08] *** Joins: oriba (~oriba@dynamic-077-183-242-005.77.183.pool.telefonica.de)
[00:51:45] *** Joins: noarb- (~noarb@user/noarb)
[00:52:19] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 256 seconds)
[00:55:48] *** Quits: averne (~averne@176-179-35-51.abo.bbox.fr) (Ping timeout: 272 seconds)
[00:55:49] *** Joins: averne_ (~averne@2001:861:5102:3290:9952:d870:185e:c44c)
[00:56:28] *** averne_ is now known as averne
[00:59:29] *** Joins: noarb (~noarb@user/noarb)
[01:00:52] *** Quits: noarb- (~noarb@user/noarb) (Ping timeout: 272 seconds)
[01:02:08] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 272 seconds)
[01:02:29] *** Quits: blaze (~blaze@user/blaze) (Quit: WeeChat 3.3)
[01:08:16] *** Quits: averne (~averne@2001:861:5102:3290:9952:d870:185e:c44c) (Ping timeout: 245 seconds)
[01:10:41] <aphysically> O__O
[01:28:37] *** Joins: lavaball (felix@31.204.155.215)
[01:37:13] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Read error: Connection reset by peer)
[01:38:31] *** Joins: averne (~averne@176-179-35-51.abo.bbox.fr)
[01:40:02] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:47:00] *** Joins: panella32 (~panella32@154.6.22.37)
[01:47:09] <BtbN> There is no proper srt server, like nginx-rtmp, is there?
[01:47:30] <BtbN> https://github.com/Edward-Wu/srt-live-server pops up, but it looks dead
[01:53:50] *** Joins: kurosu (uid342582@id-342582.hampstead.irccloud.com)
[01:54:36] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[02:03:38] *** Joins: LRN_ (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru)
[02:04:35] *** Quits: LRN (~LRN@broadband-95-84-200-6.ip.moscow.rt.ru) (Ping timeout: 256 seconds)
[02:04:57] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Ping timeout: 252 seconds)
[02:06:59] *** Joins: JanC_ (~janc@user/janc)
[02:07:09] *** JanC is now known as Guest5415
[02:07:09] *** Quits: Guest5415 (~janc@user/janc) (Killed (calcium.libera.chat (Nickname regained by services)))
[02:07:09] *** JanC_ is now known as JanC
[02:09:26] <chymera> is there any way to use ffmpeg to share my screen? A lot of videochat apps seem to be pretty hit and miss (I assume it's due to wayland) but I have a server... I was thinking maybe I can somehow just record my screen and pipe that to a publicly accessible .mp4 via SSH...
[02:09:47] <chymera> is there any way to write such a file with ffmpeg? which can be read as it is being written
[02:11:26] *** Quits: panella32 (~panella32@154.6.22.37) (Quit: Textual IRC Client: www.textualapp.com)
[02:12:55] <durandal_1707> there is a way to capture screen, but sharing is another beast
[02:13:49] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[02:16:36] *** Quits: rya (~ry@user/rya) (Ping timeout: 240 seconds)
[02:18:15] <BtbN> well, there is x11grab and kmsgrab
[02:18:25] <BtbN> the one obviously has a certain issue with wayland, and the other is weird
[02:18:45] <aphysically> I wonder how av1 compares in cpu encoding modes that allow it to be faster than hevc/x264 quality wise
[02:19:35] <aphysically> for same encoding time that is
[02:26:41] *** Quits: averne (~averne@176-179-35-51.abo.bbox.fr) (Ping timeout: 256 seconds)
[02:26:51] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[02:33:01] *** Quits: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20) (Quit: ERC (IRC client for Emacs 27.1))
[02:33:15] *** Joins: rya (~ry@47.23.188.138)
[02:33:15] *** Quits: rya (~ry@47.23.188.138) (Changing host)
[02:33:15] *** Joins: rya (~ry@user/rya)
[02:35:40] <znf> oh, BtbN has added fdk-aac to the build system a while ago, neat!
[02:35:59] <BtbN> it's nonfree and not built into any of the releases though
[02:36:05] <BtbN> it's purely for local nonfree builds
[02:36:19] <znf> yeah, I had my own script for nonfree builds
[02:36:33] <znf> suddenly thought I was seeing double
[02:37:14] <BtbN> it's not exactly new
[02:38:09] <znf> I did clone ages ago :)
[02:38:51] *** Quits: rya (~ry@user/rya) (Ping timeout: 256 seconds)
[02:39:18] <znf> BtbN, is there any way to increase the thread count?
[02:39:30] <znf> when building the images?
[02:39:42] <BtbN> you mean, even more than all it can get?
[02:39:56] <znf> does it? it's barely tickling my 96 thread machine :-/
[02:39:58] <BtbN> Like, that thing happily spawnd 40+ parallel builds and eats a ton of RAM and needs to be toned down
[02:40:02] <BtbN> *spawns
[02:40:35] <znf> hm, I see it's running make -j$(nproc)
[02:40:41] <znf> but... soooo slow
[02:40:51] <BtbN> Buildkit itself parallelizes it as well
[02:41:02] <BtbN> it doesn't get more aggressively multithreaded than that
[02:41:20] <znf> doesn't even register in my top/htop
[02:41:23] <znf> guess it hits some other limit
[02:42:16] <BtbN> did you run out of RAM and it's happily trashing your swap?
[02:42:23] <znf> nope, 213GB available
[02:42:32] <BtbN> your system must be broken then
[02:44:12] <znf> weird https://pastie.dev/gywQuV.yaml
[02:50:26] <aphysically> "[mpegts @ 0x556292e5d4c0] Stream 0, codec av1, is muxed as a private data stream and may not be recognized upon reading."
[02:50:29] <aphysically> wh--what
[02:50:52] <znf> BtbN, how long does it take for you any kind of system?
[02:51:10] <BtbN> like 15 minutes in WSL2
[02:51:19] <znf> I'm at 10 minutes into it now, been at "Building final gcc compiler" for a while
[02:51:44] <BtbN> Oh, you building the whole stack. That takes like an hour or so
[02:52:02] <aphysically> I'm guessing this is because mpegts doesn't support av1 in any official capacity
[02:52:08] *** Joins: rya (~ry@user/rya)
[02:52:18] <aphysically> but how do I configure ffmpeg to read an mpegts encoded like this (the mpegts is for sending over SRT)
[02:52:33] <znf> yeah, I did specify making the image(s)
[02:52:58] <znf> building ffmpeg itself is fast, I'd say it takes like 5? minutes on this system
[02:53:39] *** Joins: averne (~averne@176-179-35-51.abo.bbox.fr)
[02:57:25] <aphysically> apparently av1-in-mpegts is meant to be a thing at some point https://github.com/AOMediaCodec/av1-mpeg2-ts
[02:57:43] <aphysically> not in ffmpeg yet maybe
[03:05:16] <aphysically> is there a way to demux the private data streams as video in the meantime?
[03:12:17] <aphysically> hmmm, not sure how to get the private data back into video
[03:14:24] <znf> aaand image done
[03:21:45] <aphysically> hmm I don't see a way to decode the private data as video again, so right now av1 won't really work with ffmpeg srt
[03:23:22] <aphysically> oof
[03:23:30] * aphysically makes mental note to revisit av1 in a couple years
[03:25:02] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[03:25:34] <aphysically> BtbN: re: srt server, what makes it proper? there's srt-live-transmit too
[03:25:48] <BtbN> nginx-rtmp but for srt.
[03:26:08] <BtbN> some oneshot cli tool is not a replacement for a proper server that can serve a lot of users
[03:26:51] <aphysically> I see
[03:27:57] <aphysically> I basically wrote my own version of nginx-rtmp using python and flask as an API and ffmpeg as the underlying srt transmitter
[03:28:14] <BtbN> I don't want to send srt
[03:28:19] <BtbN> I want to receive it, like nginx-rtmp.
[03:28:35] <aphysically> yes, I switched from nginx-rtmp to this actually
[03:28:54] <BtbN> what you describe is the opposite way around from nginx-rtmp
[03:31:25] <aphysically> I don't know what you're imagining, the server isn't capable of sending, only receiving
[03:31:45] <BtbN> It'd be fed from OBS, via srt
[03:31:50] <BtbN> so it needs to be an srt receiver
[03:31:54] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[03:31:56] <aphysically> yeah, that works fine with my server
[03:31:59] <aphysically> I've literally fed it from OBS
[03:32:10] <BtbN> you just said it's only an srt transmitter?
[03:34:20] <aphysically> anyway I was trying to fix the server to work with av1 now, but I imagine it's going to have the same problem the sending side does
[03:34:38] <aphysically> ffmpeg doesn't support the av1 in mpegts yet so it would choke on the input I assume
[03:34:41] <aphysically> but I don
[03:34:52] <BtbN> AV1 in mpeg-ts is not specified, and ffmpeg does not normally implement off-spec stuff
[03:34:55] <aphysically> but I don't have any non-ffmpeg way to try sending valid av1-in-mpegts so I couldn't test it
[03:35:35] <aphysically> I don't know what makes a spec official or not, but AOM has one: https://github.com/AOMediaCodec/av1-mpeg2-ts
[03:35:54] <BtbN> it being official, not something some random person/group came up with
[03:36:02] <aphysically> well, they do claim it's official
[03:36:28] <BtbN> I see no ISO/IEC standard for it
[03:36:43] <BtbN> it's just something aomedia has cooked up, it's not official mpeg stuff
[03:36:46] <aphysically> so then that answers my question what you'd consider official
[03:36:56] <BtbN> What else would you consider official?
[03:37:04] <BtbN> it needs to be officially specified to be part of mpeg-ts
[03:37:31] <aphysically> I don't even know where the spec for mpeg-ts originates
[03:37:54] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[03:38:10] <BtbN> ITU-T Recommendation H.222.0, 13818-1
[03:38:41] <aphysically> I was hoping I could get it to work by interpreting the private data that it encodes as video forcefully
[03:38:44] <BtbN> and a lot of extensions for later codecs and other format changes
[03:39:01] <BtbN> You can't just interpret random data as video stream
[03:39:16] <BtbN> you need to know the format it's packaged as, where/how to get the codec extradata, and so on
[03:39:38] <aphysically> well, since I also code the sending side I presumably know all these things in general
[03:39:59] <aphysically> but I see no trivial way to do this with ffmpeg.c so I don't think it's worth bothering
[03:40:00] <BtbN> Feel free to write a patch to support their idea how to to put it into mpeg-ts
[03:49:04] *** Quits: fkaa (~fkaa@user/fkaa) (Remote host closed the connection)
[03:49:07] <znf> Is anyone using ffmpeg with hts? (spawning a process to transcode)
[03:49:24] <znf> this thing is driving me crazy, it leaves ffmpeg processes running behind
[03:50:01] <aphysically> I wonder if I can send av1 over srt without using mpegts
[03:50:31] <aphysically> srt claims they are container agnostic, but in practice nobody ever uses anything except mpegts afaik, so it would probably be more trouble than it's worth
[03:58:48] *** Joins: Atsuko (~x@94.242.250.86)
[04:06:13] *** Joins: MrZeus__ (~MrZeus@89.238.176.167)
[04:16:01] <znf> this VRAM thing is annoying the hell out of me :(
[04:30:50] <znf> [h264_nvenc @ 0x559e3c2f62c0] Driver does not support the required nvenc API version. Required: 11.1 Found: 10.0
[04:31:03] <znf> Why does this report 10.0 if my CUDA is 11.0?
[04:31:11] <znf> Is 11.0 = 10 internally?
[04:35:30] <znf> oh wait, driver version
[04:35:31] <znf> damn it
[04:36:43] *** Quits: emagex (~user@user/emagex) (Remote host closed the connection)
[04:40:41] *** Quits: Buster_ (~Buster@46.160.36.66) (Ping timeout: 256 seconds)
[04:45:04] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[04:45:10] *** Quits: admal (~admal@gateway/tor-sasl/admal) (Remote host closed the connection)
[04:47:32] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[05:02:39] *** Quits: durandal_1707 (~computer@95.168.120.42) (Read error: No route to host)
[05:08:26] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[05:10:03] *** Quits: bencc1 (~bencc1@2a00:a040:197:3af:bad:5bb6:c399:b750) (Quit: Leaving)
[05:23:48] <znf> god damn it, nvidia with your different encoder on 1070/1080 vs. 1050/1060 :-/
[05:23:55] <znf> ~50-60MiB difference
[05:28:11] <BtbN> You must be using quite an ancient driver to only have 10.0 support.
[05:30:02] *** Quits: MrZeus__ (~MrZeus@89.238.176.167) (Ping timeout: 272 seconds)
[05:30:20] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:30:59] <znf> yeah, >1 year on those older ones
[05:31:06] <znf> but I'm not concerned with those at the moment
[05:31:15] <znf> was just trying to test to compare the vram usage with the new build
[05:31:46] <BtbN> I still don't see why 50MB more is at all a concern
[05:32:06] <znf> ~20 streams x 50MiB adds up :P
[05:32:24] <BtbN> You can only run two on consumer cards anyway, and the professional cards have all the RAM
[05:32:32] <znf> eh, patched the driver
[05:32:41] <BtbN> That's not supported and you're on your own with that.
[05:32:42] <znf> we looked into the pro cards, but damn the prices
[05:33:22] *** Joins: vlm (~vlm@user/vlm)
[05:33:28] <BtbN> Tesla T4 are nice. They have two encoders
[05:33:37] <BtbN> and 16GB VRAM or something
[05:34:05] <znf> they're also $2500 or something like :D
[05:34:21] <BtbN> yeah, relatively affordable for what it does
[05:34:22] <znf> actually 2200â‚¬, before VAT
[05:34:58] <znf> my actual issue is not with those exactly 50MB
[05:35:20] <znf> but when I want to burn in dvb subtitles over the video, I suddenly need ~500-550MiB VRAM for 1 stream
[05:35:47] <BtbN> yeah, if you do filtering, you need a lot more VRAM
[05:35:59] <znf> ...unless I decode hardware, hwdownload, overlay in software, then hwupload back
[05:36:32] <znf> which just seems to trade in VRAM for PCIe bandwidth and obviously CPU usage
[05:39:37] <znf> why is -extra_hw_frames not automatically adjusted, I hate having to manually set it
[05:39:50] <BtbN> How would it possibly be?
[05:40:24] <BtbN> The decoder has no idea what options you passed to whatever you chained behind it. Let alone what it even is what you chain behind.
[05:41:20] <znf> I'm not really sure, but even just a transcode with no filters and nothing special that I can guess still requires me to use -extra_hw_frames 3
[05:41:40] <BtbN> yes, because nvenc by default uses bframes
[05:41:47] <BtbN> which reorder and buffer frames
[05:41:57] <znf> ie: https://pastie.dev/UTJLWt.yaml
[05:42:02] <znf> this doesn't run without -extra_hw_frames
[05:42:08] <BtbN> And the default is to use the minimal amount of extra buffer
[05:42:14] <BtbN> to... save ram usage
[05:42:25] <znf> system ram or vram?
[05:42:31] <BtbN> ...
[05:42:43] <BtbN> Where do you think those extra frames it buffers would be stored?
[05:42:48] <znf> in the vram!
[05:43:17] <BtbN> The only place that has complete knowledge of the filter graph and encoder, and all of their options is the API client, i.e. ffmpeg.c
[05:43:38] *** Quits: kurosu (uid342582@id-342582.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[05:43:43] <BtbN> and a massive nvidia specific hackfest that guesstimates the extra buffer frames needed would never be accepted
[05:50:38] *** Joins: noarb- (~noarb@user/noarb)
[05:50:41] *** Quits: oriba (~oriba@dynamic-077-183-242-005.77.183.pool.telefonica.de) (Ping timeout: 256 seconds)
[05:50:57] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 272 seconds)
[05:51:50] <znf> this is so annoying:
[05:51:50] <znf> [graph 0 input from stream 0:2 @ 0x5567db0b5200] filter context - w: 1920 h: 1080 fmt: 28, incoming frame - w: 720 h: 576 fmt: 28 pts_time: 86.1085
[05:51:57] <znf> [graph 0 input from stream 0:2 @ 0x5567db0b5200] Changing video frame properties on the fly is not supported by all filters.
[05:52:12] <znf> I know why it happens, damn TV...
[05:54:28] <znf> Is there any fancy way to see the difference between temporal-aq and spacial-aq? I've tried doing the same video with both settings, but my eyes don't really see anything different
[05:59:35] <BtbN> If you are messing with those settings, you are most likely over-ricing your encode
[06:04:32] *** Quits: justGhost (~justache@user/justache) (Read error: Connection reset by peer)
[06:05:01] <znf> I was just looking at the parameters, thought I could see any improvement with them on/off etc.
[06:05:08] <znf> but doesn't seem so
[06:05:40] *** Joins: justGhost (~justache@user/justache)
[06:07:02] *** Joins: orthoplex64 (~crm@70.120.0.94)
[06:19:57] *** Joins: oriba (~oriba@dynamic-077-191-095-152.77.191.pool.telefonica.de)
[06:22:12] <znf> oh, so user_agent is not a valid option unless your input starts with http://
[06:22:20] <znf> if you pipe it, won't work, doh
[06:31:06] *** Joins: ano (~ano@user/ano)
[06:33:40] <ano> (ffmpeg -nostdin -v fatal -i ... -max_muxing_queue_size 32767 -f hash -hash md5) is terribly slow or just me?
[06:33:48] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[06:40:20] *** Quits: jos1 (~jos3@dyndsl-178-142-068-150.ewe-ip-backbone.de) (Ping timeout: 272 seconds)
[06:42:21] *** Joins: Vonter (~Vonter@user/vonter)
[06:46:17] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[06:50:24] *** Quits: oriba (~oriba@dynamic-077-191-095-152.77.191.pool.telefonica.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[06:52:36] *** Joins: jos1 (~jos3@dyndsl-178-142-068-015.ewe-ip-backbone.de)
[07:00:19] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[07:06:29] *** Quits: zumba_addict (~zumba_add@2601:240:4500:8320:224:1dff:fec8:64f6) (Quit: Client closed)
[07:30:01] *** Quits: haasn (~nand@haasn.dev) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[07:31:23] *** Joins: haasn (~nand@haasn.dev)
[07:39:55] *** Quits: ano (~ano@user/ano) (Ping timeout: 240 seconds)
[07:42:07] *** Joins: ano (~ano@user/ano)
[07:49:21] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[07:51:28] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[07:52:41] <aphysically> znf: nvidia's 10bit hevc encoder is pretty good
[07:52:58] <aphysically> but I think their avc encoder is often better than their 8 bit hevc encoder
[07:53:08] <aphysically> their 8 bit hevc encoder is just entirely bugged, I think
[07:53:21] <znf> I can't use HEVC :)
[07:55:30] <aphysically> their rc-lookahead encoding parameter was bugged in nvenc until a few driver versions ago, but I haven't had a chance to retest it since they changed/fixed it
[07:55:54] <aphysically> it worked like a boolean option where everything >=1 had the same output, which definitely contradicts all their documentation
[07:56:06] <aphysically> but a few driver versions ago that changed (without changelog mentioning it anywhere......)
[07:56:14] <aphysically> and now it's doing something again
[07:58:31] <aphysically> BtbN: it looks like mpegts can't package vp9 either, but there doesn't seem to be any effort to provide a way to do it like there is with av1
[08:00:06] <aphysically> so the valid things to stream over srt that might conceivably be used in practice are, like, {avc, hevc} and {aac, opus, mp3}, I guess
[08:00:19] <aphysically> where only avc and aac/opus are well supported if you're going to try packaging into dash+hls
[08:00:24] <aphysically> (for web)
[08:00:49] <aphysically> browsers have problems with mp3 in mp4, but there may be some other weird stuff that work like MPEG2 (..?)
[08:01:50] <aphysically> all things considered I'm surprised opus managed to clear all the hurdles to be (mostly) working
[08:02:46] <aphysically> I should look into if people have tried alternatives to mpegts for srt packaging
[08:04:47] <aphysically> if I'm not using mpegts I have to recalculate all this payload size nonsense
[08:09:14] <aphysically> I don't even know what I would use instead of mpegts; ...can't mkv be streamed?
[08:15:32] <johnjaye> i've never heard of that
[08:17:43] *** Quits: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se) (Ping timeout: 256 seconds)
[08:18:46] <aphysically> hmmm maybe I could look into that if I could figure out the correct packet size to use
[08:20:27] <aphysically> mpegts is 1316 because it's the most 188 byte sections that can fit into 1500 MTU while leaving room for the header
[08:27:28] <aphysically> iirc I tried mkv over mpegts a year or two ago and while it didn't not work at all, I think I ran into a showstopper of I-don't-remember-what
[08:28:36] <aphysically> I could always try fmp4
[08:28:52] <aphysically> I limited by what fmp4 supports on the dash/hls side anyway
[08:41:45] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[08:42:11] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[08:51:34] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[09:15:59] <aphysically> I wonder if the decimate filter will work well on things animated on 2s
[09:16:36] <aphysically> I think there's some 29.970 stuff that's native 24.976 floating around, but I would think being animated on 2s would muck up the decimate filter
[09:16:43] <aphysically> not sure if there's a better solution
[09:17:39] <aphysically> although maybe because of the ranking it still works fine and drops the frame that's most-duplicated
[09:17:49] <aphysically> not sure how decimate actually works :)
[09:17:55] <aphysically> let's make some animated wrong fps stuff and try it
[09:34:12] <aphysically> if decimate can detect frames duplicated more than 2 times and favor removing that one then it will probably be fine, if it only removes one of the two most similar frames it will probably cause horrible judder :D
[09:43:17] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 256 seconds)
[10:03:48] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[10:06:18] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[10:10:00] <Manouchehri> confirmed, youtube supports HDR10+ in VP9! :O https://www.youtube.com/watch?v=MMnvyWdRYHk
[10:10:28] <aphysically> fieldmatch+decimate seems to work fine
[10:10:35] <aphysically> literally "fieldmatch,decimate"
[10:13:47] <aphysically> I wish I knew why dvd_subtitle renders with a weird white outline in ffmpeg overlays
[10:20:35] <aphysically> wait there's a metadata stream specifier???? so I've been able to automate selecting the english stream in a large playlist of randomized subtitles this whole time ?? Q__Q
[10:23:16] *** Joins: hpkn (~hpkn@gateway/tor-sasl/hpkn)
[10:24:50] <aphysically> hmmmm I'm guessing it won't work for ffconcat stuff though cause it will still just try to pick the same index throughout
[10:27:35] <Manouchehri> LOL
[10:27:38] <Manouchehri> after all that work
[10:27:48] <Manouchehri> turns out HDR10+ works fine with HEVC on youtube too
[10:29:36] *** Quits: demon__ (~user@217.54.82.162) (Ping timeout: 272 seconds)
[10:34:59] *** Joins: kurosu (uid342582@id-342582.hampstead.irccloud.com)
[10:36:57] <aphysically> oh geez this is a headache
[10:37:14] <aphysically> what's the best way to offset picsubs in time without extracting to a separate file....
[10:37:54] <aphysically> can I do something like setpts=PTS+some_number/TB
[10:37:58] <aphysically> or -some_number
[10:38:33] <furq> yes
[10:38:38] <furq> setpts,subtitles,setpts
[10:38:57] <furq> actually idk if that works for image subtitles
[10:39:01] <furq> obviously the middle bit doesn't
[10:39:31] <aphysically> let's find out
[10:39:48] <aphysically> I need to do like 400 ms hmm
[10:40:33] <aphysically> furq: for text subs I actually _always_ extract them to a separate file, otherwise it doesn't really work with streaming because of the way initialization can take arbitrarily long amounts of time
[10:40:40] <aphysically> so I can just trivially retime while extracting
[10:40:44] <aphysically> the interesting case is image subs
[10:40:55] <aphysically> where I'm not currently extracting it (and I'd like to avoid it if I don't need to!)
[10:45:36] <aphysically> wow it's making a corrupt video file :D
[10:48:30] <aphysically> I don't know I can't seem to get it right between setpts and the video overlay
[10:55:10] <aphysically> ....I was typing PTS*num instead of PTS+num
[10:56:07] *** Joins: l4yer (~l4yer@2001:ac8:20:3a00:1012:3f2e:f182:ae72)
[11:00:57] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[11:02:29] <aphysically> furq: this order seems to be okay
[11:02:48] <aphysically> [0:s:0]setpts=PTS+0.4/TB[d];[d][c]scale2ref=w='trunc(min(ih*mdar,iw))':h='trunc(min(ih,iw/mdar))':flags=bicubic[e][f];[f][e]overlay=(W-w)/2:H-h:format=yuv420,format=p010le
[11:05:03] <aphysically> I wonder if it works for negative offset
[11:10:06] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[11:14:07] *** Joins: Vonter (~Vonter@user/vonter)
[11:19:38] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 272 seconds)
[11:20:08] *** Quits: zetaE (~alpmons@139.47.114.154) (Remote host closed the connection)
[11:23:24] <aphysically> oh god this is so ugly
[11:25:22] <aphysically> at least I coded my filter_complex rapper generic enough that I don't have to touch any of that nonsense
[11:25:25] <aphysically> wrapper*
[11:33:40] *** Joins: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de)
[11:36:03] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:40:37] <aphysically> furq: that wasn't nearly as bad as it could have been :) https://github.com/GBeauregard/pyffstream/commit/6b9126a7a1a014639c1d95e8b03a2c29a6f3fa1f
[11:51:56] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 272 seconds)
[11:55:19] *** Joins: Vonter (~Vonter@user/vonter)
[12:10:37] *** Joins: dbolton_ (~dbolton@2601:204:d77f:a9d7:4065:e01e:4a4:6d9a)
[12:13:48] *** Quits: dbolton (~dbolton@2601:204:d77f:a9d7:c1f9:4bb7:1aff:a52f) (Ping timeout: 240 seconds)
[12:26:48] *** Joins: MrZeus__ (~MrZeus@185.248.85.53)
[12:42:48] *** Joins: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se)
[12:48:26] *** Joins: palasso (~palasso@user/palasso)
[12:58:37] *** Joins: lavaball (felix@31.204.155.215)
[13:18:00] *** Joins: durandal_1707 (~computer@95.168.120.42)
[13:20:25] *** Joins: Volgaar (~volgaar@40.34.6.93.rev.sfr.net)
[13:32:39] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[13:33:56] *** Quits: Volgaar (~volgaar@40.34.6.93.rev.sfr.net) (Ping timeout: 256 seconds)
[13:38:17] *** Quits: rdz (~rdz@2001:620:120:1::12) (Quit: Verlassend)
[13:57:16] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[13:59:09] *** Quits: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se) (Ping timeout: 256 seconds)
[14:01:08] *** Quits: Some_Person (someperson@23-118-229-174.lightspeed.hstntx.sbcglobal.net) (Quit: ZNC 1.8.2 - https://znc.in)
[14:02:35] *** Joins: Some_Person (someperson@2600:1700:d02:1c50:ce81:24dc:3854:f698)
[14:04:49] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[14:10:36] *** Joins: cosimone (~user@93-47-228-207.ip115.fastwebnet.it)
[14:12:11] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[14:15:21] *** Joins: Vonter (~Vonter@user/vonter)
[14:23:27] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[14:37:44] *** Quits: Vonter (~Vonter@user/vonter) (Read error: Connection reset by peer)
[14:39:23] *** Joins: Vonter (~Vonter@user/vonter)
[14:46:06] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 272 seconds)
[14:46:45] *** Joins: fkaa (~fkaa@user/fkaa)
[15:20:18] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Ping timeout: 272 seconds)
[15:21:12] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[15:27:15] *** Joins: Vonter (~Vonter@user/vonter)
[15:28:12] *** Quits: dreamon (~dreamon@ppp-88-217-74-38.dynamic.mnet-online.de) (Ping timeout: 240 seconds)
[15:34:11] *** Joins: emagex (~user@user/emagex)
[15:37:07] *** Joins: blaze (~blaze@user/blaze)
[16:01:09] *** Quits: blaze (~blaze@user/blaze) (Quit: WeeChat 3.3)
[16:02:03] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[16:05:16] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 272 seconds)
[16:07:03] *** Quits: emagex (~user@user/emagex) (Quit: ERC (IRC client for Emacs 27.1))
[16:12:36] *** Quits: Thedarkb1-Deskto (~Thedarkb@2001:bb6:b403:e042:19e8:85b4:7fb1:958e) (Ping timeout: 240 seconds)
[16:13:41] *** Joins: tonitch (~tonitch@user/tonitch)
[16:22:02] *** Quits: rvalue (~rvalue@user/rvalue) (Ping timeout: 250 seconds)
[16:25:21] *** Joins: Vonter (~Vonter@user/vonter)
[16:37:04] *** Joins: emagex (~user@user/emagex)
[16:50:24] *** Joins: someuser (~user@197.54.84.129)
[16:57:25] *** Joins: rvalue (~rvalue@user/rvalue)
[17:09:45] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[17:10:17] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[17:12:02] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[17:13:51] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[17:14:09] *** Joins: Narrat (~omnius@p200300df5f123b4a06ea56fffe2e7cdc.dip0.t-ipconnect.de)
[17:14:35] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:68ed:dfaa:90a9:4cf5)
[17:15:00] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[17:16:37] *** Joins: NovumDXW (~NovumDXW@2409:8a28:361c:d160:6499:aaab:329a:e347)
[17:34:57] *** fling is now known as swing
[17:34:57] *** Joins: SpeakerToMeat (~Speaker@user/speakertomeat)
[17:35:05] <SpeakerToMeat> Hi
[17:35:07] * SpeakerToMeat waves
[17:37:41] <SpeakerToMeat> Question, I have a script to create scripts to compress to multiple outputs (different resolutions) with hls output. Normally for each resolution I do a map of a video track and an audio track. On this ocation my source has 6 independant tracks/streams for 5.1 audio (which I want to mix down to stereo via -ac 2), so my question is, I want to implement the guide in the wiki and do: -filter_complex
[17:37:43] <SpeakerToMeat> "[0:a:0][0:a:1][0:a:2][0:a:3][0:a:4][0:a:5]join=inputs=6:channel_layout=5.1[a]" -map "[a]"  to do this, do I need to use both the filter and the map for each output? or the filter first, and then only the map for each output?
[17:47:14] *** Quits: someuser (~user@197.54.84.129) (Ping timeout: 256 seconds)
[17:49:13] *** Quits: orthoplex64 (~crm@70.120.0.94) (Ping timeout: 256 seconds)
[17:50:03] *** Joins: orthoplex64 (~crm@70.120.0.94)
[17:55:29] *** Quits: bpmedley (~bpmedley@2600:1700:e2c:8410:68ed:dfaa:90a9:4cf5) (Quit: Textual IRC Client: www.textualapp.com)
[17:59:14] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[18:11:19] *** Joins: bpmedley (~bpmedley@2600:1700:e2c:8410:68bc:51ee:29e8:6d26)
[18:25:41] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[18:26:31] *** Quits: NovumDXW (~NovumDXW@2409:8a28:361c:d160:6499:aaab:329a:e347) (Read error: Connection reset by peer)
[18:26:33] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[18:32:29] *** Joins: dreamon (~dreamon@pd95035d1.dip0.t-ipconnect.de)
[18:45:24] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[18:47:24] *** Quits: MrZeus__ (~MrZeus@185.248.85.53) (Read error: Connection reset by peer)
[18:48:25] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[18:49:34] *** Joins: MrZeus (~MrZeus@185.248.85.53)
[18:56:09] *** Joins: Thedarkb-Desktop (~Thedarkb@2001:bb6:b403:e042:108a:7490:94e9:7e0d)
[18:57:29] *** Joins: xkuru (~xkuru@user/xkuru)
[19:00:20] *** Joins: iconoclasthero (~quassel@pool-68-238-241-198.phlapa.fios.verizon.net)
[19:00:25] *** Quits: emagex (~user@user/emagex) (Read error: Connection reset by peer)
[19:02:21] *** Joins: Vonter (~Vonter@user/vonter)
[19:15:48] *** Quits: iconoclasthero (~quassel@pool-68-238-241-198.phlapa.fios.verizon.net) (Ping timeout: 240 seconds)
[19:39:57] *** justGhost is now known as justAstache
[19:42:08] *** Joins: Buster_ (~Buster@46.160.36.66)
[20:04:17] *** Quits: lexano (~lexano@174.119.69.134) (Ping timeout: 240 seconds)
[20:14:36] *** Joins: minimal (~minimal@user/minimal)
[20:16:19] *** swing is now known as fling
[20:18:17] *** Joins: lexano (~lexano@174.119.69.134)
[20:21:14] *** Quits: myon98 (~myon98@user/myon98) (Ping timeout: 250 seconds)
[20:21:48] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[20:42:22] *** Joins: rsx (~dummy@ppp-188-174-142-192.dynamic.mnet-online.de)
[20:47:06] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 272 seconds)
[20:48:42] <aphysically> I still haven't fixed my regex for ffmpeg durations since it allows things like 00:00:-01.34
[20:48:57] <aphysically> I'm guessing 00:-03:00 is valid too
[20:49:23] <aphysically> but I don't really want to make my regex ugly by duplicating it with three | expressins
[20:49:24] *** Quits: durandal_1707 (~computer@95.168.120.42) (Read error: Connection reset by peer)
[20:49:27] <aphysically> Q__Q
[20:49:56] *** Joins: durandal_1707 (~computer@95.168.120.42)
[20:51:58] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[20:53:23] *** Quits: lexano (~lexano@174.119.69.134) (Ping timeout: 256 seconds)
[21:06:49] *** Joins: lexano (~lexano@174.119.69.134)
[21:10:26] *** Quits: durandal_1707 (~computer@95.168.120.42) (Read error: Connection reset by peer)
[21:11:00] *** Quits: lexano (~lexano@174.119.69.134) (Ping timeout: 240 seconds)
[21:13:32] *** Joins: durandal_1707 (~computer@95.168.118.32)
[21:15:29] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Ping timeout: 256 seconds)
[21:23:20] *** Joins: lexano (~lexano@174.119.69.134)
[21:28:48] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[21:30:30] *** Joins: gitautas (~gitautas@86.100.73.225)
[21:32:51] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[21:33:21] <gitautas> Hey guys, I was wondering for a more appropriate channel to ask about codec efficiency. I'm working on a personal project where I need a low latency solution for video encoding and decoding. I already support H264 since consumer GPUs have hardware encoders for them that are very fast, I was wondering how do Intel Quicksync/AMD CPU encoders compare
[21:33:22] <gitautas> when encoding vp8 in terms of encoding speed?
[21:33:40] <gitautas> If this is not the right channel perhaps someone could point me to a more appropriate one.
[21:35:01] <BtbN> I'm not sure I understand what you're asking.
[21:35:14] <BtbN> Yes, hwencs are fast, but have comparaitviely poor quality as tradeoff
[21:36:19] <gitautas> Here quality comes second to encoding speed. I'm building an open source cloud gaming infrastructure and am considering if it's worth targeting browsers that cannot support H264.
[21:36:38] <BtbN> You'd have go to back a decare or more to find a browser like that.
[21:37:56] <gitautas> Well, in the case of MacOS Chromium doesn't support it by default and it's behind a flag on firefox.
[21:37:59] <gitautas> But that is a fair point.
[21:40:16] <BtbN> Browsers on OSX don't support h264? I have trouble believing that oO
[21:41:34] <xerox> they do, have for a long while
[21:42:21] <gitautas> I might be misinformed, either way in that case I can target H264 and forget about VP8.
[21:42:57] <BtbN> I've never heard of a vp8 hwenc anway. And quality would be piss poor
[21:45:16] <gitautas> Thanks for the help guys, sorry for not doing my full due diligence
[21:45:46] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[21:48:46] <klaxa> browsers are hard to research, there are too many with too many versions and platforms
[21:55:58] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[22:00:15] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[22:00:15] *** Joins: alban771 (~alban@67.13.23.93.rev.sfr.net)
[22:08:43] <another|> caniuse.com/vp9
[22:10:09] *** Joins: Vonter (~Vonter@user/vonter)
[22:13:43] <kepstin> are you talking about normal video playback or webrtc?
[22:13:54] <kepstin> because support is different for those :/
[22:14:36] *** Quits: alban771 (~alban@67.13.23.93.rev.sfr.net) (Ping timeout: 240 seconds)
[22:17:24] <gitautas> kepstin: WebRTC in this case
[22:17:35] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[22:19:12] <kepstin> right, i think safari still might not support vp9 in webrtc. at this point h264 should work with webrtc in all major browsers, with the note that firefox might be using openh264 on some platforms, which limits you to ... either constrained baseline or main, can't remember.
[22:20:43] <kepstin> so yeah, only two codecs you can really consider for webrtc are vp8 and h264 constrained baseline. and of the two, use h264 unless you have a reason to avoid it.
[22:21:21] <gitautas> That's what I've been operating with, I thought it'd be worth coming up with a VP8 MVP to see how much latency is introduced.
[22:22:55] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Ping timeout: 240 seconds)
[22:24:04] <kepstin> i wouldn't expect vp8 format to cause any issues with latency itself. like h264 constrained baseline, there's no frame re-ordering, so the encoders/decoders can operate one-frame-in, one-frame-out.
[22:24:13] <kepstin> but browser implementation quality may vary :)
[22:25:45] <gitautas> Well for this use case the latency inducing part would be the additions of copying the raw video to CPU memory and encoding it in the CPU, but it's impossible to say how much that would add without trying
[22:27:19] *** Joins: mlohik (mka@kapsi.fi)
[22:29:04] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[22:29:25] *** Quits: rsx (~dummy@ppp-188-174-142-192.dynamic.mnet-online.de) (Quit: rsx)
[22:34:48] *** Quits: noarb- (~noarb@user/noarb) (Quit: ZNC 1.8.2 - https://znc.in)
[22:35:00] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 240 seconds)
[22:35:02] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[22:37:37] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[22:45:17] *** Joins: crashrep (~crashrep@user/crashrep)
[22:47:51] *** Joins: alban771 (~alban@91.148.22.93.rev.sfr.net)
[22:48:01] *** Joins: noarb (~noarb@user/noarb)
[22:51:29] *** Joins: waleee (~waleee@h-98-128-229-110.NA.cust.bahnhof.se)
[22:52:47] *** Joins: noarb- (~noarb@user/noarb)
[22:53:00] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 240 seconds)
[22:55:15] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 240 seconds)
[23:05:00] *** Joins: emagex (~user@user/emagex)
[23:07:30] <aphysically> what is the 'experimental' rounding mode for swscale?
[23:11:07] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[23:15:52] *** Quits: emagex (~user@user/emagex) (Quit: ERC (IRC client for Emacs 27.1))
[23:16:57] *** Quits: VarunAgw_ (~VarunAgw@ip5f5bd251.dynamic.kabel-deutschland.de) (Read error: Connection reset by peer)
[23:29:07] <aphysically> I wonder what the technical reason is for the white outline in the pic sub scaling with scale2ref, it's surely possible to set it up so it doesn't happen since mpv does it
[23:29:23] *** Joins: crashrep (~crashrep@user/crashrep)
[23:33:55] *** Quits: crashrep (~crashrep@user/crashrep) (Ping timeout: 240 seconds)
[23:37:43] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[23:41:25] *** Quits: gitautas (~gitautas@86.100.73.225) (Quit: Client closed)
[23:42:32] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[23:43:12] *** Joins: lavaball (felix@31.204.155.215)
[23:52:32] *** Quits: alban771 (~alban@91.148.22.93.rev.sfr.net) (Quit: WeeChat 3.4)
[23:52:35] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Ping timeout: 240 seconds)
[23:52:50] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[23:58:31] *** Quits: cosimone (~user@93-47-228-207.ip115.fastwebnet.it) (Remote host closed the connection)
