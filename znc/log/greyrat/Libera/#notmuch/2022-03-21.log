[00:36:46] *** Joins: radu242 (~radu242@pool-96-250-220-83.nycmny.fios.verizon.net)
[03:08:52] *** Quits: gast0n (~g4570n@user/gast0n) (Read error: Connection reset by peer)
[03:25:09] *** Joins: gast0n (~g4570n@user/gast0n)
[03:40:00] *** Joins: rgrinberg (~textual@fixed-187-191-8-46.totalplay.net)
[03:59:11] *** Joins: acdw (~case@user/acdw)
[04:16:54] <anarcat> uh
[04:17:01] <anarcat> so how do i forward a message properly in notmuch? :)
[04:17:06] <anarcat> like the full message
[04:20:32] *** Joins: nlhowell (~nlhowell@172.58.84.130)
[04:32:50] *** Joins: nlhowell1 (~nlhowell@172.58.84.190)
[04:36:17] *** Quits: nlhowell (~nlhowell@172.58.84.130) (Ping timeout: 256 seconds)
[04:37:40] *** Quits: seschwar (~seschwar@user/seschwar) (Quit: :wq)
[04:58:09] *** Quits: nlhowell1 (~nlhowell@172.58.84.190) (Ping timeout: 256 seconds)
[05:04:19] *** Quits: acdw (~case@user/acdw) (Ping timeout: 250 seconds)
[05:08:46] *** Quits: rgrinberg (~textual@fixed-187-191-8-46.totalplay.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:16:01] *** Joins: acdw (~case@user/acdw)
[05:19:22] <pabs3> anarcat: I would assume it depends on which MUA you use rather than notmuch?
[05:20:06] <pabs3> I'm using evolution with notmuch, it has four different options for forwarding
[05:21:31] <anarcat> oh, i guess i mean notmuch-emacs
[05:23:26] <pabs3> ah maybe this: https://notmuchmail.org/emacstips/#index18h2
[05:23:51] <pabs3> are you talking about bouncing/resending messages, or forward as attachment?
[05:24:38] * pabs3 wonders if bouncing/resending still works with all the SPF/DMARC/DKIM/etc stuff
[05:41:46] <anarcat> forwarding as attachment
[05:42:13] <anarcat> the "f" key, by default, does (notmuch-show-forward-message)
[05:42:18] <anarcat> which is not the full message forward
[05:45:31] <bremner> anarcat: then I guess you want "b" ?
[05:45:59] * pabs3 sees this: notmuch-tree.el:    (define-key map "f" 'notmuch-tree-forward-message)
[05:46:20] <anarcat> bremner: no no, that just resends the email, and as pabs3 said, that will fail with spf/dkim/etc
[05:46:38] <anarcat> what i want is to write a new email, but use an existing message as an attachment
[05:46:47] <bremner> that is what f does?
[05:46:51] <anarcat> which is not what "f" does right now, what it does is to mangle the message
[05:46:56] <anarcat> well it doesn't look like it here
[05:47:01] <bremner> huh.
[05:47:16] <anarcat> if i take a message here, and type "f"
[05:47:21] <pabs3> I still successfully use resend/bounce a lot, so I think it isn't completely broken these days
[05:47:23] <anarcat> i get a mail with this at the bottom:
[05:47:24] <anarcat> -------------------- Start of forwarded message --------------------
[05:47:24] <anarcat> Date: Sun, 20 Mar 2022 21:25:56 -0400
[05:47:31] <anarcat> that doesn't look like an attachment to me
[05:47:34] <bremner> hrm.
[05:47:36] <anarcat> maybe notmuch does something magic with this
[05:47:45] <anarcat> but it removes a bunch of headers that are really useful to diagnose stuff
[05:47:47] <bremner> nah, you should see mml markup
[05:47:49] <pabs3> can you change the binding to use notmuch-tree-forward-message instead?
[05:47:54] <anarcat> yeah i don't
[05:48:09] <anarcat> pabs3: change it to what?
[05:48:21] <pabs3> the binding for "f"
[05:48:30] <pabs3> (define-key map "f" 'notmuch-tree-forward-message)
[05:48:36] <anarcat> i don't have that function here
[05:48:37] <bremner> there might be some variable controlling how forwarding is done.
[05:48:50] <pabs3> ah, I guess you are on an older version
[05:48:52] <anarcat> maybe i'm using a too old notmuch and this was fixed
[05:48:56] <anarcat> i'm on bullseye
[05:49:03] <anarcat> that super old debian that was released last year
[05:49:05] <anarcat> maybe you heard of it
[05:49:07] <anarcat> ;)
[05:49:28] <pabs3> ancient stuff!
[05:49:37] <anarcat> also, why is everything so fucking fast now
[05:49:53] <bremner> anarcat: what function do you get reported from C-h k f
[05:50:06] <anarcat> 22:12:13 <anarcat> the "f" key, by default, does (notmuch-show-forward-message)
[05:50:13] <anarcat> that
[05:50:28] <anarcat> it seems i am using notmuch 0.31
[05:50:44] <anarcat> same for elpa-notmuch, thankfully
[05:51:02] <anarcat> it seems i missed 4 releases
[05:52:26] <bremner> anarcat: that sounds related to configuration. Can you try in "emacs -q"? You might have to load notmuch by hand.
[05:53:02] <bremner> unfortunately gnus has a bazillion configuration variables, many of which affect notmuch.
[05:53:05] <anarcat> whoa, 0.32 is major
[05:53:15] <anarcat> okay!
[05:53:31] <anarcat> i love getting the "emacs -q"
[05:53:37] <anarcat> it means "you are old"
[05:54:05] <anarcat> bremner: same.
[05:54:23] <anarcat> i wonder if i have something in my .emacs/notmuch-config.el
[05:54:54] <bremner> maybe? let's see if I can replicate that env.
[05:55:19] <anarcat> i don't have much in there
[05:55:40] <anarcat> https://gitlab.com/anarcat/emacs-d/-/blob/main/notmuch-config.el
[05:56:44] <bremner> oh. Something did change apparently. I see the same "start of forwarded message" with 0.31
[05:56:52] <anarcat> haha wow
[05:56:57] <anarcat> you should upgrade
[05:56:58] <anarcat> is the answer
[05:57:09] <anarcat> i've been meaning to upgrade to bookworm for a bit
[05:57:20] <bremner> oh. this is weirder, this bullseye machine has 0.35 on it for $reasons.
[05:58:40] <bremner> OK, so it's something in _my_ config that makes things better.
[05:58:41] <anarcat> probably because "you're the maintainer of notmuch"
[05:58:51] <anarcat> haha
[05:58:53] <anarcat> great.
[05:59:06] * anarcat watches bremner fall into his .emacs.d
[05:59:24] <bremner> ah. message-forward-as-mime
[05:59:34] <bremner> customize that, or setq it to t
[06:01:09] *** Quits: gast0n (~g4570n@user/gast0n) (Quit: Bye, see you soon! ðŸ‘‹)
[06:13:39] <bremner> anarcat: that's for you ^. I'm falling asleep...
[06:13:40] *** Joins: nlhowell1 (~nlhowell@172.58.87.65)
[06:15:33] <anarcat> bremner: awesome thanks
[06:16:03] <anarcat> i should have found it myself, sorry
[06:18:39] <bremner> well, it's a bit non-obvious what the important variables are. We should probably document some in the notmuch-emacs manual
[06:36:37] <anarcat> yeah
[06:36:48] <anarcat> i must say i read the forwarding source and couldn't figure it out
[06:36:54] <anarcat> i guess i couldn't find the gnus escape hatch
[07:53:24] *** Quits: nlhowell1 (~nlhowell@172.58.87.65) (Ping timeout: 252 seconds)
[07:54:22] *** Joins: nlhowell1 (~nlhowell@172.58.84.244)
[08:08:06] *** Quits: acdw (~case@user/acdw) (Ping timeout: 260 seconds)
[09:09:51] *** Quits: nlhowell1 (~nlhowell@172.58.84.244) (Read error: Connection reset by peer)
[09:24:06] *** Quits: jao (~jao@cpc103048-sgyl39-2-0-cust502.18-2.cable.virginm.net) (Ping timeout: 245 seconds)
[11:00:29] *** Joins: kzak (~kzak@nat-37.starnet.cz)
[12:12:47] *** Quits: radu242 (~radu242@pool-96-250-220-83.nycmny.fios.verizon.net) (Ping timeout: 256 seconds)
[12:19:36] *** Joins: radu242 (~radu242@pool-96-250-220-83.nycmny.fios.verizon.net)
[12:23:49] *** Quits: radu242 (~radu242@pool-96-250-220-83.nycmny.fios.verizon.net) (Ping timeout: 240 seconds)
[12:29:50] *** Joins: radu242 (~radu242@pool-96-250-220-83.nycmny.fios.verizon.net)
[12:52:52] *** Joins: nlhowell1 (~nlhowell@172.58.84.141)
[13:30:53] <inwit> Wow, again the superpowers of this chat. I came to ask about forwarding too. I've just discovered that forwarding multipart messages is not working properly. Contrary to anarcat, I want to forward messages inline, that is, the body of the message shouldn't be an attachment, but rather copied in my message. However, with message-forward-as-mime set to nil, in multipart messages, I'm seeing that my message (what I write before the ---Start of forwa
[13:48:34] <bremner> inwit: your message was cut off
[13:54:01] <inwit> Oops. Thank you, bremner, here I come again.
[13:54:13] <inwit> Wow, again the superpowers of this chat. I came to ask about forwarding too. I've just discovered that forwarding multipart messages is not working properly. Contrary to anarcat, I want to forward messages inline, that is, the body of the message shouldn't be an attachment, but rather copied in my message.
[13:54:24] <inwit> However, with message-forward-as-mime set to nil, in multipart messages, I'm seeing that my message (what I write before the ---Start of forwarded...--- line) doesn't get through to my destinataires, which get the forwarded message but not my words.
[13:54:30] <inwit> I guess I'll have to play with message-forward-show-mml, but it's still weird that my message is lost.
[13:59:41] <inwit> I've played with both variables (message-forward-as-mime and message-forward-show-mml) and I can't seem to get what I want (text-part of the fw message inline after my message, the other parts attached).
[14:00:23] <inwit> There's an old related thread in the ml: https://notmuchmail.org/pipermail/notmuch/2015/021343.html
[14:00:49] <inwit> So I guess I'm again in one of those corner-cases I tend to find myself... :-S
[14:01:26] *** Joins: nlhowell2 (~nlhowell@172.58.84.152)
[14:04:38] *** Quits: nlhowell1 (~nlhowell@172.58.84.141) (Ping timeout: 260 seconds)
[14:12:57] <bremner> inwit: I can't duplicate that in emacs -q. The next needs to be after --text follows this line--, in case that was not obvious.
[14:24:46] *** Joins: nlhowell3 (~nlhowell@172.58.87.57)
[14:28:13] *** Quits: nlhowell2 (~nlhowell@172.58.84.152) (Ping timeout: 256 seconds)
[14:49:56] *** Quits: nlhowell3 (~nlhowell@172.58.87.57) (Ping timeout: 245 seconds)
[15:07:09] <inwit> ... and before the ---Start of forwarded message--, yes. :-S
[15:08:49] <inwit> I'm doing some more testing and I think that, somehow, the multipart structure gets broken when there's another multipart nested. I'm seeing other MUAs "flatten" the nested structure, so all the attachments of the fw message are first-level attachments.
[15:22:00] <bremner> iirc notmuch is just relying on gnus here
[15:22:36] <bremner> honestly restructuring messages to forward them is not something I'm very enthusiastic about
[15:22:52] <bremner> although I get there a lot of bad clients out there that are easily confused.
[15:27:57] <dkg> MTAs should *not* be adjusting the MIME structure of messages.
[15:28:45] <dkg> MUAs should also be able to handle the nesting properly, at least within message/rfc822 or message/global parts
[16:15:26] <inwit> Thanks, bremner. I'll have to dig in gnus, then. However, while I fully agree with you and dkg in that modifying the structure of messages is not a good idea, there's the fact that inlining the text of the fw message after one's own message is a kind of structural alteration, is it not?
[16:15:57] <bremner> inwit: yeah, basiscally I don't like the inline forwarding
[16:16:26] <inwit> bremner, I see why. Of course, it is not the case if you also attach the original message, but then there's redundancy.
[17:11:16] *** Joins: nlhowell3 (~nlhowell@149.160.142.217)
[19:04:11] *** Joins: seschwar (~seschwar@user/seschwar)
[19:10:14] *** Joins: gast0n (~g4570n@user/gast0n)
[19:48:11] *** Joins: acdw (~case@user/acdw)
[20:05:51] *** Joins: jao (~jao@cpc103048-sgyl39-2-0-cust502.18-2.cable.virginm.net)
[21:15:01] *** Joins: nyah (~nyah@05453449.skybroadband.com)
[22:29:45] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 268 seconds)
[22:32:06] *** Quits: geyaeb (~geyaeb@gateway/tor-sasl/geyaeb) (Remote host closed the connection)
[22:33:06] *** Joins: geyaeb (~geyaeb@gateway/tor-sasl/geyaeb)
[22:42:25] *** Quits: qyliss (~qyliss@2001-ba8-1f1-f0bc-0-0-0-2.autov6rev.bitfolk.space) (Quit: bye)
[22:44:18] *** Joins: qyliss (~qyliss@2001-ba8-1f1-f0bc-0-0-0-2.autov6rev.bitfolk.space)
[22:57:12] *** Quits: qyliss (~qyliss@2001-ba8-1f1-f0bc-0-0-0-2.autov6rev.bitfolk.space) (Quit: bye)
[22:59:38] *** Joins: qyliss (~qyliss@atuin.qyliss.net)
[23:27:41] <acdw> what's yall's FCC lines look like? Mine keep putting mails back in inbox
[23:28:40] <bremner> Fcc: some/path/.sent-mail -unread +inbox
[23:29:06] <bremner> so, I guess for me it's feature they are in the inbox. You could change +inbox to -inbox there
[23:36:59] *** Quits: radu242 (~radu242@pool-96-250-220-83.nycmny.fios.verizon.net) (Ping timeout: 256 seconds)
