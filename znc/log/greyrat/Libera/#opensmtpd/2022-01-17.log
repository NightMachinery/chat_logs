[00:29:41] *** Joins: Lucas6023 (~Lucas6023@gateway/tor-sasl/lucas6023)
[01:34:04] *** Joins: gnoMii (~gnoMii@zorve-amanvilliers.pck.nerim.net)
[02:49:29] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[03:18:52] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Quit: East bound and down, loaded up and truckin')
[03:27:18] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[03:32:29] *** Quits: Guest9014 (~vit@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[04:02:19] *** Quits: CyberTailor (~cyber@gateway/tor-sasl/cybertailor) (Remote host closed the connection)
[04:57:16] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[05:18:04] *** Joins: seninha (~seninha@user/seninha)
[05:53:59] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[10:17:41] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Quit: Now if you will excuse me, I have a giant ball of oil to throw out my window)
[11:16:17] *** Joins: Guest9014 (~vit@chello085216193138.chello.sk)
[13:21:03] *** Joins: Dko1905 (~Dko1905@79.142.76.199)
[13:43:28] *** Quits: Dko1905 (~Dko1905@79.142.76.199) (Quit: Leaving)
[14:01:42] *** Joins: seninha (~seninha@user/seninha)
[15:13:17] *** Joins: TheAnachron (~TheAnachr@cron.world)
[15:13:26] <TheAnachron> Hello.
[15:15:10] <TheAnachron> I was wondering. What is the best way how to exclude things from rejection rules?
[15:15:29] <TheAnachron> Lets say I want to filter all gmail stuff because its 99% spam, but there is one person I'm writing with over gmail
[15:27:35] <Tycho`Brahe> I would implement such filtering in sieve rules instead OpenSMTPD
[15:29:09] *** Quits: Guest9014 (~vit@chello085216193138.chello.sk) (Ping timeout: 256 seconds)
[15:31:55] <TheAnachron> I am not using sieve.
[16:32:04] *** Tycho`Brahe is now known as TychoBrahe
[16:44:39] <leah2> rules are executed in order
[16:45:07] <leah2> so put a match action line before the reject
[16:50:26] <TheAnachron> so basically "match mail-from "test@example.com" for domain <vdomains> action "mdir_alias" right before
[16:50:39] <TheAnachron> "match mail-from <blocked> for any reject"?
[16:51:21] <TheAnachron> I hoped maybe we can do something with regex inside the blocked table, I've tried ^(?!test).*@example.com but that didn't work out
[17:38:33] <leah2> i think that should work, yes
[17:38:46] <leah2> regex is only posix ERE i guess
[18:00:12] <renaud> is there anyone having issues sending mails to t-online.de?
[18:00:35] <renaud> I get an error message directly at connection, then I am disconnected
[18:00:38] <renaud> 554 IP=91.183.56.64 - A problem occurred. (Ask your postmaster for help or to contact tosa@rx.t-online.de to clarify.)
[18:11:30] <renaud> the funny thing is that opensmtpd will still retry those mails, even after the 554 message
[18:11:42] <renaud> probably because it is received at connect phase
[18:15:59] <renaud> in fact, only 1 on my 6 servers is able to receive a 220 connect from t-online.de
[18:18:58] <betabug> renaud: and what does this tosa@ say? (just out of curiosity)
[18:22:29] <renaud> (s)he didn't reply (yet?)
[18:23:37] <betabug> hmm, I would have expected some auto-reply thing
[18:24:10] <renaud> no, I also tried to contact them via their online form, and no autoreply either
[18:24:56] <renaud> and I don't have the "BL" note in the error message like many
[18:25:03] <betabug> ah well, those huge companies are always crazy
[18:25:13] <leah2> does your website have an impressum /s
[18:25:30] <renaud> what do you mean by impressum?
[18:26:02] <renaud> you mean a contact with address, phone, etc?
[18:26:03] <leah2> in germany commercial websites need an "impressum", which says who runs it and where they live
[18:26:06] <leah2> yes
[18:26:12] <leah2> and t-online decided to enforce that for mail domains too
[18:26:14] <renaud> no, it dofes not and will not have one
[18:26:17] <leah2> it's plain insane
[18:26:23] <leah2> is it a .de domain?
[18:26:30] <renaud> no, it's a .org
[18:26:36] <leah2> then they can fuck off anyway :p
[18:27:34] <renaud> if they mandate an impressum, I will just blacklist them as it's useless to store mails in the queue for them
[18:27:52] <leah2> from my .de server i get a 220
[18:28:00] <leah2> from my customer line i get 554 immediately
[18:28:06] <leah2> (which is plausible)
[18:28:13] <renaud> I get 554 from every IP, except one in Switzerland
[18:28:33] <renaud> all with correct FCrDNS, etc
[18:28:44] <leah2> faq says it means the ip is blacklisted
[18:29:03] <renaud> so, they blacklist everyone and only whitelist some people?
[18:29:15] <leah2> some people would say that's true -.-
[18:29:16] <renaud> that's not really the way mail is suupposed to work
[18:29:27] <leah2> did it work before?
[18:29:54] <renaud> I looked at my logs and it seems only 1 mail was sent to t-online.de and it was more than 1 year ago
[18:30:08] <leah2> hm
[18:32:18] <leah2> > a 554 response MAY be given in the initial connection opening message instead of the 220.
[18:32:47] <renaud> that's what I get, and I don't have the mention of "(BL)" at the end of the message
[18:32:54] <leah2> i dont see BL either
[18:33:05] <leah2> just saying the mta should detect it :p
[18:33:53] <renaud> it connects and then instantly disconnects, so maybe the MTA doesn't even read the answer
[18:34:05] <leah2> connection stays open here, as by rfc
[18:34:07] <renaud> and treats it like a temp error
[18:34:09] <leah2> (i
[18:34:16] <leah2> (i'm using netcat)
[18:34:17] <betabug> funny how in their FAQ they recommend people to choose their blacklist wisely :-)
[18:34:44] <renaud> isildur# telnet mx00.t-online.de 25                                                                  
[18:34:47] <renaud> Trying 194.25.134.8...
[18:34:50] <renaud> Connected to mx00.t-online.de.
[18:34:51] <leah2> but 5xx is permanent error no?
[18:34:53] <renaud> Escape character is '^]'.
[18:34:55] <renaud> 554 IP=91.183.56.64 - A problem occurred. (Ask your postmaster for help or to contact tosa@rx.t-online.de to clarify.)
[18:34:58] <renaud> Connection closed by foreign host.
[18:35:10] <leah2> oh right
[18:35:12] <renaud> yes, but I suppose opensmtpd doesn't read it because the connection is cut directly
[18:35:27] <leah2> nc keeps the socket half-open
[18:35:30] <leah2> argh
[18:40:40] <renaud> yes, nc is not always the best way to test
[18:40:58] <renaud> I generally use telnet, and nc in some more edge cases
[18:41:22] <leah2> well my nc can do ssl etc, needed nowadays :)
[18:41:40] <renaud> yes, I use nc when openssl s_client gives problems
[18:47:34] <betabug> so they don't do neither spf nor dkim
[18:48:11] <betabug> but they say something like "if you are sending from a different ip than the one you have been sending before, we might block you"
[18:48:30] <betabug> so it seems they kind of make their own spf, only crappy
[18:48:52] <renaud> to be honest, given they disconnect direcly, they can't do spf dkim or anything useful to analyze what you are sending
[18:51:10] <betabug> yeah, but their faq states that they don't do spf or dkim
[18:52:03] <betabug> while this here could mean, that maybe last time (1 year ago) you sent from that .ch server, so now they want only that one... "Eine Sperre kann insbesondere auch vorliegen, wenn Sie eine bisher von Ihnen nicht für den Mailversand benutzte IP-Adresse verwenden wollen; der Anlass kann entsprechend auch längere Zeit zurück liegen"
[18:52:20] <betabug> anyway, I'm only reading tea leaves (aka their FAQ)
[18:52:28] <renaud> no, no mail has been ever sent from that CH server
[18:52:44] <betabug> in the end, everybody says you have to write to that tosa@rx...
[18:53:24] <leah2> yes
[18:53:25] <renaud> I have done that, I will see if they replyu
[18:53:34] <renaud> if they don't , I will just block t-online.de
[18:54:00] <leah2> my landlord uses t-online.de :D
[18:54:05] <leah2> but else... it's become rare
[18:54:25] <leah2> fun fact: back in the day you could mail $phonenumber@t-online.de
[18:54:57] <renaud> funny
[18:55:40] <renaud> they don't seem to take email as a service they offer
[18:56:21] <renaud> it reminds me of a big american company which was blacklisting everything not from USA
[18:56:39] <renaud> like if USA was not the main source of spam
[18:57:19] <leah2> ime most spam is from asia :(
[18:57:31] <renaud> now, to be honest, the only real spam sources for me after all filtering are gmail and sendgrid
[18:57:36] <leah2> hehe
[18:57:49] <renaud> and gmail abuse doesn't work anymore
[18:58:47] <renaud> not that it ever was efficient
[18:59:48] <leah2> do you get lots of "invoice spam" too these days?
[19:00:14] <renaud> no, mostly african people wanting to give me money
[19:01:24] <renaud> and sendgrid/mailchimp mailing that want to make me invest into some crappy new stuff
[20:24:49] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[21:13:30] *** Quits: seninha (~seninha@user/seninha) (Remote host closed the connection)
[21:33:52] *** Quits: TheAnachron (~TheAnachr@cron.world) (Quit: TheAnachron)
[22:04:39] *** Joins: seninha (~seninha@user/seninha)
[22:21:54] *** Quits: bsd4me (~IceChat95@user/bsd4me) (Ping timeout: 250 seconds)
[23:06:24] *** Joins: bsd4me (~IceChat95@user/bsd4me)
[23:34:54] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Remote host closed the connection)
[23:40:29] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
