[00:04:38] *** Quits: rgrinberg (~textual@187.223.75.25) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:04:40] <adray> that looks awfully similar to a leak that should be fixed. i'll look into it tomorrow as I'm away from my computer. is there a corresponding github issue so we don't forget about it?
[00:26:02] *** Quits: bradfier (~bradfier@user/bradfier) (Quit: Leaving...)
[00:27:58] *** Joins: bradfier (~bradfier@user/bradfier)
[00:52:22] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[00:55:19] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[01:02:30] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[01:12:39] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[01:19:17] *** Quits: alban771 (~alban@37.171.24.58) (Ping timeout: 240 seconds)
[01:22:19] *** Joins: alban771 (~alban@37.172.21.82)
[01:40:08] *** Joins: rgrinberg (~textual@2806:265:5401:9431:d03e:a2ca:3d77:ef5f)
[02:13:21] *** Joins: Vonter (~Vonter@user/vonter)
[02:19:12] <flatcap> adray: thanks.   no issue yet.  judging by the report, I think Notmuch and Xapian were both built with ASAN enabled.
[02:20:25] *** Quits: rgrinberg (~textual@2806:265:5401:9431:d03e:a2ca:3d77:ef5f) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:29:30] *** Joins: rgrinberg (~textual@2806:101e:7:def:8ca4:21b9:b555:2338)
[02:30:27] *** Quits: rgrinberg (~textual@2806:101e:7:def:8ca4:21b9:b555:2338) (Client Quit)
[02:31:45] *** Quits: strajder (~strajder@user/strajder) (Quit: leaving)
[02:49:04] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[02:49:23] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[02:51:08] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[02:51:27] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[02:54:37] *** Joins: Maxattax97 (~max@2603:300f:b9f:2000::6a84)
[02:55:43] *** Quits: weirdsmiley (~weirdsmil@203.122.10.222) (Ping timeout: 256 seconds)
[03:14:43] *** Quits: ormaaj (~ormaaj@user/ormaaj) (Quit: Reconnecting)
[03:15:07] *** Joins: ormaaj (~ormaaj@user/ormaaj)
[03:17:14] *** Quits: andi- (~andi-@user/andi-) (Remote host closed the connection)
[03:18:37] *** Joins: rgrinberg (~textual@2806:101e:7:def:8ca4:21b9:b555:2338)
[03:19:12] *** Joins: andi- (~andi-@user/andi-)
[03:20:48] *** Quits: rgrinberg (~textual@2806:101e:7:def:8ca4:21b9:b555:2338) (Client Quit)
[03:32:26] <Raito_Bezarius> I only built neomutt with ASAN, flatcap, in fact
[03:36:33] *** Joins: rgrinberg (~textual@2806:101e:7:def:8ca4:21b9:b555:2338)
[03:39:18] *** Quits: Maxattax97 (~max@2603:300f:b9f:2000::6a84) (Remote host closed the connection)
[03:44:17] *** Quits: rgrinberg (~textual@2806:101e:7:def:8ca4:21b9:b555:2338) (Ping timeout: 268 seconds)
[04:17:18] *** ormaaj is now known as jaamro
[04:33:21] <flatcap> Raito_Bezarius: oh.  Then I'm surprised to see such detail from the notmuch/xapian code
[04:33:40] *** Joins: rgrinberg (~textual@2806:101e:7:def:f99c:f095:57cb:e173)
[04:35:31] <flatcap> I thought all the libraries would have to be built with asan, in order for it to trap the alloc/new/free/delete
[04:35:38] <Raito_Bezarius> hm, it might have to do with some smart mechanism in NixOS to fetch symbols
[04:35:50] <flatcap> yeah, perhaps
[04:36:02] <flatcap> debugging technology is pretty neat these days :-)
[04:36:13] <Raito_Bezarius> to my great pleasure :D
[04:50:11] *** Quits: rgrinberg (~textual@2806:101e:7:def:f99c:f095:57cb:e173) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:24:09] *** Quits: plastico (~plastico@neomutt/plastico) (Quit: WeeChat 3.3)
[05:31:21] *** Quits: amigan (dramoray@dtvax.dynatron.me) (Quit: WeeChat 3.3)
[05:31:32] *** Joins: amigan (dramoray@dtvax.dynatron.me)
[05:33:17] *** Quits: maetthew (~maetthew@user/maetthew) (Quit: ZNC 1.8.2 - https://znc.in)
[05:35:54] *** Joins: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se)
[05:35:54] *** Quits: maetthew (~maetthew@c188-150-159-232.bredband.tele2.se) (Changing host)
[05:35:54] *** Joins: maetthew (~maetthew@user/maetthew)
[05:38:37] *** Quits: alban771 (~alban@37.172.21.82) (Ping timeout: 240 seconds)
[05:39:37] *** Quits: Pali (~pali@user/pali) (Ping timeout: 240 seconds)
[06:17:37] *** Joins: bsd4me (~bsduser@user/bsd4me)
[07:13:59] *** Joins: rgrinberg (~textual@2806:265:5401:9431:e42d:e292:4d35:3f96)
[07:44:39] *** Joins: sassmann_ (~sassmann@user/sassmann)
[07:44:57] *** Quits: sassmann (~sassmann@user/sassmann) (Ping timeout: 240 seconds)
[08:08:17] *** jaamro is now known as ormaaj
[09:55:42] *** Quits: bsd4me (~bsduser@user/bsd4me) (Quit: leaving)
[10:09:55] *** Quits: rgrinberg (~textual@2806:265:5401:9431:e42d:e292:4d35:3f96) (Read error: Connection reset by peer)
[10:10:52] *** Joins: rgrinberg (~textual@2806:265:5401:9431:e42d:e292:4d35:3f96)
[10:20:49] *** Joins: tsing (~tsing@121.225.25.202)
[10:21:05] *** Quits: tsing (~tsing@121.225.25.202) (Client Quit)
[10:32:23] <gahr> morning
[10:40:57] *** Quits: polve (~polve@user/polve) (Ping timeout: 256 seconds)
[10:42:18] *** Joins: polve (~polve@user/polve)
[10:49:41] *** Quits: kusoneko (~kusoneko@137.220.55.93) (Remote host closed the connection)
[10:50:23] *** Joins: kusoneko (~kusoneko@137.220.55.93)
[11:20:02] <gahr> I just discovered that outlook will screw up 8-bit emails, resulting in failures to verify the hash of the email body during dkim checks: "dkim=fail (body hash did not verify)". Unsetting allow_8bit fixes it.
[11:37:43] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[11:38:01] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[11:52:02] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Ping timeout: 260 seconds)
[12:21:15] *** Quits: polve (~polve@user/polve) (Ping timeout: 256 seconds)
[12:22:01] *** Joins: polve (~polve@user/polve)
[12:26:06] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[12:48:32] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:50:48] *** Quits: kusoneko (~kusoneko@137.220.55.93) (Quit: Lost terminal)
[12:51:51] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[13:03:48] <holgersson> morning
[13:11:37] <p00f> morning
[13:11:39] *** Joins: kzak (~kzak@nat-37.starnet.cz)
[13:23:28] <gahr> hi holgersson p00f 
[13:36:14] <gahr> holgersson: is Context->mailbox a dangling pointer?
[13:54:32] *** Quits: rgrinberg (~textual@2806:265:5401:9431:e42d:e292:4d35:3f96) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:59:51] <flatcap> morning all
[14:11:29] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[14:12:25] <holgersson> gahr: how do I check? 'ag'/grep tells me that it's used a few times, so I'd rather think it's not
[14:14:25] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[14:15:08] <flatcap> holgersson: that looks like one of the bugs I fixed for Raito_Bezarius
[14:16:49] <flatcap> there's a fix in branch [devel/monitor]
[14:17:45] <flatcap> yesterday, I was investigating a few other places that used Context to see if I could eliminate them too
[14:18:30] <holgersson> pretty cool, I'll test it - just give me a minute (or..ten)
[14:21:36] <flatcap> thanks
[14:21:57] <flatcap> I'll create a PR in sec
[14:27:17] <gahr> hi flatcap 
[14:28:02] <gahr> ah, nice
[14:28:18] <flatcap> hi gahr 
[14:29:04] <holgersson> flatcap: I can't trigger the bug anymore - looks fixed, thanks!
[14:29:07] <flatcap> I haven't created a PR yet as I was trying to eliminate a few more Contexts
[14:29:50] <flatcap> of the original ~500 global uses, there's *one* left and I don't know what to do with it
[14:30:16] <holgersson> flatcap: don't feel pressed to hurry by me - I can stay on that fix as long as it takes
[14:30:22] <holgersson> s/fix/branch/
[14:31:24] <flatcap> thanks.  that fix is fairly solid. the rest of my changes can wait
[14:31:40] <flatcap> https://github.com/neomutt/neomutt/blob/master/copy.c#L744
[14:32:19] <gahr> who uses it?
[14:32:37] <flatcap> mutt_copy_message_fp() optionally updates Context->vsize (the cumulative size of all the emails in the Mailbox / limited view)
[14:33:09] <flatcap> I tried tracing all the callers, but it got a bit messy (and it was getting late)
[14:33:38] <flatcap> but one of the call stacks went back to mailbox_mbox_sync()
[14:36:14] <flatcap> vsize is used in quite a few places, but I think it's only visible as %L in $status_format
[14:37:02] *** Joins: breavyn (~breavyn@user/breavyn)
[14:37:05] <gahr> would it be possible to update it in one place, e.g., when the index gets redrawn?
[14:38:02] *** Quits: breavyn_ (~breavyn@user/breavyn) (Ping timeout: 252 seconds)
[14:38:52] <flatcap> probably, yes.  I'll have a dig after breakfast
[14:39:31] <flatcap> the branch introduces two workaround functions:
[14:39:58] <flatcap> get_current_mailbox() - needed by the monitor code and autocrypt (because they're poorly written)
[14:40:42] <flatcap> get_current_menu() - used by regex, hook, score
[14:41:28] <flatcap> not ideal, but they avoid random bits of code having to track whether the Context exists / has changed
[14:45:01] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[14:47:36] *** Joins: breavyn_ (~breavyn@user/breavyn)
[14:47:58] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[14:48:29] *** Quits: breavyn (~breavyn@user/breavyn) (Ping timeout: 252 seconds)
[14:52:01] *** Joins: breavyn (~breavyn@user/breavyn)
[14:52:11] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[14:53:07] *** Quits: breavyn_ (~breavyn@user/breavyn) (Ping timeout: 256 seconds)
[14:55:06] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[15:01:49] <gahr> yeah, not beautiful, but better than now )
[15:03:22] <flatcap> :-)
[15:06:02] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[15:10:33] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:13:20] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[15:15:54] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[15:22:43] *** Joins: Pali (~pali@user/pali)
[15:27:22] *** Joins: weirdsmiley (~weirdsmil@203.122.10.222)
[15:45:23] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:45:51] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[15:48:23] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[15:48:27] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[15:52:28] *** Joins: whatsyourask (~whatsyour@user/whatsyourask)
[15:54:07] *** Joins: eroux (~eroux@102-65-85-177.ftth.web.africa)
[16:07:15] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[16:09:57] *** Quits: kzak (~kzak@nat-37.starnet.cz) (Ping timeout: 240 seconds)
[16:12:38] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Ping timeout: 252 seconds)
[16:45:16] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[16:47:34] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[16:55:31] *** Quits: earthnative (~nemo@119-18-37-212.771225.bne.static.aussiebb.net) (Ping timeout: 256 seconds)
[17:12:26] <flatcap> #3177 fixes #3176
[17:12:26] <neo-bot> PR by @flatcap "Refactor uses of global Context": https://github.com/neomutt/neomutt/pull/3177
[17:12:26] <neo-bot> Issue by @holgersson32644 ">neomutt-mail-client/neomutt-20210205: segmentation fault at monitor_resolve() in monitor.c": https://github.com/neomutt/neomutt/issues/3176
[17:40:23] *** Joins: plastico (~plastico@neomutt/plastico)
[17:43:39] *** Quits: eroux (~eroux@102-65-85-177.ftth.web.africa) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:54:35] *** Joins: earthnative (~nemo@119-18-37-212.771225.bne.static.aussiebb.net)
[18:14:18] <gahr> nice
[18:17:29] <flatcap> thanks :-)
[18:22:15] <gahr> set use_threads=yes, compose, attach-message, pick a folder with threads, does your index look ok?
[18:22:37] <gahr> sorry
[18:22:57] <gahr> set use_threads=yes, pick a folder with threads, compose, attach-message, pick the current mailbox, does your index look ok?
[18:24:46] * flatcap builds ...
[18:25:34] <gahr> oh, with master, too
[18:25:41] <gahr> https://gist.github.com/gahr/494d24128fcc33b795fd6ba6712bf06b
[18:26:02] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 240 seconds)
[18:26:11] *** Joins: keypushe- (~keypusher@user/keypusher)
[18:26:53] <gahr> I can't collapse/uncollapse in the attach-message view
[18:27:43] <flatcap> hmm... it looks ok with my normal config, and also with zero config
[18:29:29] *** keypushe- is now known as keypusher
[18:30:40] <flatcap> hmm... the last release looks very weird, though
[18:31:26] <flatcap> that seems to have messed up the original index
[18:33:33] <gahr> bisecting now
[18:34:32] <flatcap> I see it with master too.  I just had my threads unfolded so I didn't see the change
[18:35:04] <gahr> ok
[18:38:22] <gahr> 20211029 is bad alrady
[18:40:30] <gahr> 20210205 is good
[18:40:36] * gahr eyes use_threads
[18:41:45] <gahr> even on 0215, collapse-all works the same as collapse-thread
[18:44:12] <flatcap> hmm...
[18:44:56] <gahr> at a certain point in my bisect, threading is not enabled in the attach-message index view
[18:45:04] <gahr> and the bug presents itself if I do eanble it
[18:46:11] *** Quits: Vonter (~Vonter@user/vonter) (Quit: WeeChat 3.4)
[18:47:08] <flatcap> oh
[18:49:07] *** Joins: Vonter (~Vonter@user/vonter)
[18:49:23] *** Quits: keypusher (~keypusher@user/keypusher) (Ping timeout: 252 seconds)
[18:52:42] *** Joins: keypusher (keypusher@user/keypusher)
[18:59:17] *** Quits: jirib (~jiri@109.105.40.231) (Ping timeout: 240 seconds)
[18:59:20] *** Quits: whatsyourask (~whatsyour@user/whatsyourask) (Quit: whatsyourask)
[20:17:12] *** Quits: Vonter (~Vonter@user/vonter) (Quit: WeeChat 3.4)
[20:37:16] <gahr> bisect was inconclusive... 
[20:37:39] <gahr> otoh, the day is concluded :) cu tomorrow
[20:45:04] *** Joins: bsd4me (~bsduser@user/bsd4me)
[20:46:51] <flatcap> :-(  bye gahr 
[20:53:08] *** Quits: bsd4me (~bsduser@user/bsd4me) (Quit: leaving)
[20:56:17] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[20:58:21] *** Joins: bsd4me (~bsduser@user/bsd4me)
[21:10:44] *** Joins: rgrinberg (~textual@187.223.75.25)
[21:36:22] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[21:38:50] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[21:39:01] *** Quits: bsd4me (~bsduser@user/bsd4me) (Quit: leaving)
[21:42:39] *** Joins: bsd4me (~bsduser@user/bsd4me)
[22:21:25] *** Quits: madage (~madage@user/madage) (Remote host closed the connection)
[22:21:36] *** Joins: madage (~madage@user/madage)
[22:29:13] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[22:32:22] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[22:56:20] *** Quits: rgrinberg (~textual@187.223.75.25) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:01:14] *** Quits: riesebie (~riesebie@user/riesebie) (Ping timeout: 260 seconds)
[23:01:51] *** Joins: riesebie (~riesebie@HSI-KBW-078-042-175-253.hsi3.kabel-badenwuerttemberg.de)
[23:01:51] *** Quits: riesebie (~riesebie@HSI-KBW-078-042-175-253.hsi3.kabel-badenwuerttemberg.de) (Changing host)
[23:01:51] *** Joins: riesebie (~riesebie@user/riesebie)
[23:15:33] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[23:18:03] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[23:24:08] *** Quits: gabriel1 (~gabriel1@user/gabriel1) (Remote host closed the connection)
[23:24:23] *** Joins: strajder (~strajder@user/strajder)
[23:26:37] *** Joins: gabriel1 (~gabriel1@user/gabriel1)
[23:35:53] *** Quits: bsd4me (~bsduser@user/bsd4me) (Quit: leaving)
[23:43:28] *** Joins: kusoneko (~kusoneko@137.220.55.93)
