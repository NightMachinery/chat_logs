[00:00:20] *** Joins: gedulis12 (~gedulis12@46.251.49.174)
[00:00:34] <ash_worksi> ¯\_(ツ)_/¯
[00:07:38] *** Quits: tyson2 (~user@bras-base-toroon0628w-grc-46-142-112-141-177.dsl.bell.ca) (Remote host closed the connection)
[00:12:00] *** Joins: pvdp40 (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au)
[00:19:00] <ash_worksi> I don't get these errors; I changed it to a named volume and it still said the source didn't exist; so then I was like, "uh, okay" and deleted the stack and redeploted
[00:19:03] <ash_worksi> redeployed*
[00:19:08] <ash_worksi> now it says "no such image"
[00:19:13] <ash_worksi> but docker images shows it
[00:21:12] <ash_worksi> ... help?
[00:23:57] *** Joins: tyson2 (~user@bras-base-toroon0624w-grc-08-70-29-36-27.dsl.bell.ca)
[00:28:13] <ash_worksi> nvm; typo in the image tag... amazing how I manage to change things that never need to be changed
[00:34:40] *** Joins: netx (~netx@23-24-2-197-static.hfc.comcastbusiness.net)
[00:36:32] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 272 seconds)
[00:38:17] *** Quits: fjmorazan (~quassel@user/fjmorazan) (Quit: fjmorazan)
[00:38:55] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[00:43:40] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[00:43:59] *** Joins: ExeciN (~ExeciN@user/nicexe)
[00:56:25] *** sehrope__ is now known as sehrope
[00:59:25] *** Quits: gproto23 (~gproto23@user/gproto23) (Remote host closed the connection)
[01:01:24] *** Quits: ekathva_ (~ekathva@n16izluvk39q3lx3y-1.v6.elisa-mobile.fi) (Remote host closed the connection)
[01:01:42] *** Joins: ekathva_ (~ekathva@n16j0a7g3xklok7dy-1.v6.elisa-mobile.fi)
[01:02:32] *** Quits: hosk (~hosk@cpe-67-243-254-161.nyc.res.rr.com) (Quit: leaving)
[01:02:44] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[01:03:45] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[01:04:04] *** Joins: ExeciN (~ExeciN@user/nicexe)
[01:04:26] *** Joins: clf059 (~clf059@94.140.8.5)
[01:10:59] *** Joins: k8yun_ (~k8yun@user/k8yun)
[01:11:24] *** Quits: k8yun (~k8yun@user/k8yun) (Ping timeout: 252 seconds)
[01:35:32] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[01:35:54] *** Quits: drillbyt_ (drillbyt@user/drillbyt) (Quit: Leaving)
[01:40:08] *** Quits: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net) (Quit: Client closed)
[01:44:22] *** Joins: ska (~ska@user/ska)
[01:45:09] *** Quits: netx (~netx@23-24-2-197-static.hfc.comcastbusiness.net) (Quit: Bye)
[01:45:38] *** Quits: k8yun_ (~k8yun@user/k8yun) (Quit: Leaving)
[01:47:49] *** Joins: cliluw (~cliluw@47.147.77.43)
[01:48:29] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[01:48:54] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 250 seconds)
[01:49:34] *** Quits: ekathva_ (~ekathva@n16j0a7g3xklok7dy-1.v6.elisa-mobile.fi) (Quit: Leaving)
[01:55:40] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[01:57:05] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[02:10:01] *** Quits: clf059 (~clf059@94.140.8.5) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:11:19] *** Joins: clf059 (~clf059@94.140.8.5)
[02:14:05] *** Joins: mven5 (~mven@ip68-104-39-54.lv.lv.cox.net)
[02:15:13] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Ping timeout: 256 seconds)
[02:15:13] *** mven5 is now known as mven
[02:19:47] *** Quits: clf059 (~clf059@94.140.8.5) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:20:50] *** Joins: trevors (~trevors@user/trevors)
[02:22:17] *** Joins: clf059 (~clf059@94.140.8.5)
[02:25:58] *** Quits: DoofusCanadensis (~DoofusCan@node-1w7jr9yercvgfo0ajai388avv.ipv6.telus.net) (Quit: So as you can see from this flowchSQUIRREL!!)
[02:30:30] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Ping timeout: 250 seconds)
[02:30:58] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[02:36:25] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[02:37:01] *** Joins: hydracat (~hydracat_@pool-96-230-188-202.prvdri.fios.verizon.net)
[03:00:34] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[03:03:20] *** Joins: trevors (~trevors@user/trevors)
[03:07:16] *** Quits: Bardon (~Bardon@user/Bardon) (Ping timeout: 272 seconds)
[03:11:01] *** Quits: hub (~hub@user/hub) (Quit: -)
[03:11:29] *** Joins: hub (~hub@user/hub)
[03:12:48] *** Quits: clf059 (~clf059@94.140.8.5) (Quit: Textual IRC Client: www.textualapp.com)
[03:16:08] *** Joins: Bardon (~Bardon@user/Bardon)
[03:20:55] <hydracat> I'm having trouble downloading this container. https://hub.docker.com/r/ibmcom/openvpn-ppc64le  i used the command in the overview
[03:21:53] <hydracat> https://pastebin.com/W9iSZbeR
[03:22:57] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[03:23:53] <hydracat> i just tried a different one and it works, i'll just skip the IBM one
[03:24:24] <tabakhase> hydracat that readme is wrong, see the "tags" page, would be `ibmcom/openvpn-ppc64le:2.3.10`
[03:25:12] <hydracat> 2.3.10: Pulling from ibmcom/openvpn-ppc64le
[03:25:13] <hydracat> no matching manifest for linux/amd64 in the manifest list entries
[03:25:18] <tabakhase> but yea, unless you need this special arch and cant get it elsewhere the image looks a bit spooky...
[03:25:32] <hydracat> Yeah i just realized it's for a different arhitecture
[03:25:57] <hydracat> Is this one spooky? https://hub.docker.com/r/kylemanna/openvpn ;)
[03:26:23] <tabakhase> yep https://hub.docker.com/r/ibmcom/openvpn-ppc64le/tags - combined with "4 yesrs old" and "arch in the name" thats likely from before docker supported multiarch inbuild or so...
[03:26:47] <hydracat> i didn't realize ppc64le was an architecture
[03:28:21] <tabakhase> guess you came from here then or so? yea 1st spot is pretty bad there :D 430 downloads what a cutie... https://hub.docker.com/search?q=openvpn&type=image -- kyles with a BILLION looks indeed much better ^^
[03:28:43] <tabakhase> *340 even, twisted those
[03:33:13] <hydracat> looks liek he's a Cardano fan https://hub.docker.com/r/kylemanna/cardano-rt-view
[03:33:22] <hydracat> i'll try his vpn container
[03:33:25] *** Quits: RougeR (~rougex250@user/rouger) (Remote host closed the connection)
[03:44:51] *** Quits: tex (~dix@user/dix) (Ping timeout: 252 seconds)
[03:52:36] *** Joins: victori (~victori@cpe-76-89-139-69.socal.res.rr.com)
[03:57:16] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Read error: Connection reset by peer)
[03:58:00] *** Joins: Thanzex (~Thanzex@37.103.212.236)
[03:59:11] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[04:00:12] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[04:06:39] *** Joins: hbjy (~hbjy@rockylinux/web/hbjy)
[04:07:32] *** Quits: hy (~hbjy@rockylinux/web/hbjy) (Ping timeout: 240 seconds)
[04:10:51] *** Quits: leitz (~LeamHall@072-182-158-027.res.spectrum.com) (Quit: nappy time)
[04:13:03] *** Joins: trevors (~trevors@user/trevors)
[04:33:15] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 252 seconds)
[04:33:52] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[04:34:08] <hydracat> tabakhase can you help me understand what is happening in this command?
[04:34:14] <hydracat> docker run -v $OVPN_DATA:/etc/openvpn --rm -it kylemanna/openvpn easyrsa build-client-full CLIENTNAME nopass
[04:34:42] <hydracat> the "easyrsa build-client-full CLIENTNAME nopass" are those arguments special for this container, or do they exist on the docker server? 
[04:37:23] <tabakhase> -v $OVPN_DATA:/etc/openvpn --rm -it are arguments to docker - then comes the name of the image, and anythign after that becomes the CMD of the image - what exactly that then does kinda depends on the entrypoint(if there is one) -- here likely just passed on to a shell to run the easyrsa tool inside the container yep
[04:42:09] *** Joins: trevors (~trevors@user/trevors)
[04:42:24] <hydracat> thank you
[04:47:16] <cim> gotta dock em all
[04:49:13] <rawtaz> DOCK ALL THE THINGS! \o/
[04:49:52] <cim> everything MUST go in containers
[04:52:07] *** Joins: DannyMac (sid324534@user/dannymac)
[04:59:41] *** Joins: CRCinAU (~CRCinAU@user/crcinau)
[05:00:06] <CRCinAU> Hmmmm - so I have an image from docker hub that is based on alpine linux - but I want to install a couple of additional packages from alpine
[05:00:09] <CRCinAU> ie rsync
[05:00:18] <CRCinAU> how can I do this in a friendly way for a docker-compose setup?
[05:00:34] <CRCinAU> can I map in something like an S6 oneshot somehow?
[05:01:30] <CRCinAU> pretty much, I just need to run: apk add rsync
[05:02:40] <tabakhase> CRCinAU what speaks against a 2liner dockerfile?
[05:02:50] *** Joins: Voliteon (~adam@2001:19f0:5801:1f28:5400:3ff:fe37:9588)
[05:02:52] <tabakhase> (als add a --no-cache in that)
[05:03:10] <CRCinAU> I don't really want to start making my own :\
[05:03:58] <tabakhase> "FROM theotherimage \n RUN apk add --no-chache rsync" is all to put in there... 
[05:03:59] <Voliteon> Hi all, my Docker on my mac m1 has been working good for > 1 year, then yesterday just stopped starting up. no error when opening 'docker desktop', it just doesn't start. when i try to run docker-compose, i get this exception stack trace: https://pastebin.com/YQrTr5FX - any ideas please?
[05:04:20] <CRCinAU> ... but then I can't run it with a docker-compose, right?
[05:04:28] <CRCinAU> and I can't update with a docker compose pull ?
[05:05:04] <tabakhase> well pull&build&up
[05:05:12] *** Quits: phalanx (~thelounge@user/phalanx) (Ping timeout: 250 seconds)
[05:05:39] <tabakhase> some rare cases, hacking the cmd can be a method too... but rly ugly :P -- so "command: install... && exec originalCommand" or such, rly  fugly tho :P
[05:06:34] *** Quits: Tach (~Tach@user/tach) (Quit: Tach)
[05:06:51] <CRCinAU> yeah - I was thinking of mapping a volume in to /etc/conf-init.d/ and then adding an init scrip that runs the apk command
[05:07:41] <tabakhase> Voliteon assuming that "file not found" is a mising socket to the (not running?) docker-daemon, so compose kinda got nthing on this
[05:09:04] <Voliteon> tabakhase: makes sense. is there any logs I can check for the docker-daemon not starting?
[05:09:24] <tabakhase> CRCinAU ye none of those things run in containers at all, entrypoints & cmd it is  (((you can set entrypoint in compose too, and then have your install + exec "$@" in a script sure)))
[05:10:16] <CRCinAU> hmmmmm
[05:10:21] <CRCinAU> I was looking at: https://github.com/just-containers/s6-overlay#executing-initialization-and-finalization-tasks
[05:10:29] *** Quits: SSLbits (~SSLbits@user/sslbits) (Quit: Ping timeout (120 seconds))
[05:10:36] <tabakhase> Voliteon sr. no further clue of Docker-for-Mac - and m1 especially not :|
[05:10:45] *** Quits: con3 (~con3@143.198.53.32) (Quit: ZNC 1.8.2 - https://znc.in)
[05:10:54] *** Joins: SSLbits (~SSLbits@user/sslbits)
[05:11:01] *** Joins: con3_ (~con3@2604:a880:4:1d0::be:d000)
[05:11:24] <DannyMac> I'm having a heck of a time with my containers.  I seem to have somehow soft-locked myself outside of commanding them to do anything.  I used docker compose with restart: unless-stopped and they're starting up after boot (i'm old school and used to manually starting them after boot) and it's like docker refuses to command it.  It's like there are two different docker installs fighting against each other
[05:11:36] *** Quits: foo (~foo@user/foo/x-8763512) (Ping timeout: 245 seconds)
[05:11:38] <Voliteon> tabakhase: probably worth just uninstalling and reinstallnig entirely?
[05:12:26] <tabakhase> CRCinAU running a init in a container is kinda the last-resort ((and not about onboot-scripts, but "multiple proccesses" (as docker usually likes to have a container be one thing run in foreground)))
[05:12:38] <tabakhase> "fat containers" :/
[05:12:46] *** Quits: wez (~wez@about/web/wez) (Ping timeout: 260 seconds)
[05:13:03] *** Quits: ihaveamac (~ihaveamac@ihaveahax.net) (Quit: fail)
[05:13:22] *** Joins: ihaveamac (~ihaveamac@ihaveahax.net)
[05:13:32] *** Joins: Tacoder (~Tacoder@2806:264:5482:9e0:1cc9:d73:eb51:2a8d)
[05:13:34] *** Joins: wez (~wez@about/web/wez)
[05:13:41] *** Joins: foo (~foo@user/foo/x-8763512)
[05:13:48] <tabakhase> DannyMac who refuses to command what when? not sure what of that you report as problem and whats the observation and "what it should be instead" :D
[05:14:23] *** Joins: gschanuel0 (~gschanuel@user/gschanuel)
[05:15:15] <DannyMac> tabakhase: my containers are starting after boot, but when i try to do a sudo docker stop <container> the container doesn't stop
[05:16:10] <tabakhase> so, what does it do?
[05:16:18] <DannyMac> when i attempt to start it, i get a daemon error while creating mount source path: read-only file system
[05:16:36] <DannyMac> so if i sudo docker stop plex, it returns 'plex'
[05:16:51] <tabakhase> instantly?
[05:16:55] <DannyMac> yes
[05:17:35] <DannyMac> $ sudo docker start plex
[05:17:35] <DannyMac> Error response from daemon: error while creating mount source path '/opt/plex': mkdir /opt/plex: read-only file system
[05:17:35] <DannyMac> Error: failed to start containers: plex
[05:17:37] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Ping timeout: 240 seconds)
[05:17:37] *** gschanuel0 is now known as gschanuel
[05:18:20] <DannyMac> plex is running as i am currently using it and the other containers are running.  even portainer shows nothing is running too
[05:20:08] *** Joins: phalanx7 (~thelounge@user/phalanx)
[05:20:12] <tabakhase> what are those containers?... wonder if something zombied out or so
[05:21:13] <tabakhase> also, is anything of this RO? -- also OS? and docker-installation-method?
[05:22:25] <DannyMac> i'm using ubuntu server 20.04 and am using the default docker installed with it
[05:23:37] *** Quits: Voliteon (~adam@2001:19f0:5801:1f28:5400:3ff:fe37:9588) (Quit: WeeChat 2.8)
[05:24:06] <tabakhase> "default docker installed with it" sounds scarry... `docker version` says ?   ((generally the repo docker itself offers is perfeered over distro...))
[05:24:44] <DannyMac> tabakhase: version: 20.10.7
[05:25:25] <tabakhase> 2021-06-02 --- so not suuuper horrible at least kk =)
[05:25:45] <tabakhase> (there is some debian with docker 18 and such out there :P)
[05:26:03] *** Quits: phalanx7 (~thelounge@user/phalanx) (Ping timeout: 252 seconds)
[05:27:10] <tabakhase> tho... potentially that could be a snap? :| - then its all sorta haywire :D
[05:27:25] <DannyMac> tabakhase: i bet it is an effing snap!
[05:28:47] <tabakhase> that be a big nope then indeed :D - snaps in some semi-sandboxed space that works for some things, breaks with others to all i know
[05:29:53] *** Joins: dvanloon6 (~dvanloon@user/dvanloon)
[05:29:57] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Ping timeout: 240 seconds)
[05:29:57] *** dvanloon6 is now known as dvanloon
[05:31:04] <tabakhase> (like, i would assume that your /opt/plex exists already given you said "this plex is actually running right now" - yet that read-only error comes from a mkdir?! -- and docker-daemon does an mkdir if a path used in a bindmount "doesnt exist"
[05:31:59] <DannyMac> tabakhase: iirc, i had trouble with the oob docker and thought i reinstalled it, but i may have accidentally installed two different dockers (which please shoot down this theory).  after rebooting one or the other took over and the one i'm attempting to use via the command line is not able to control the containers started at boot by the others which has soft-locked me out of controlling them
[05:32:23] <DannyMac> i'm going to try to uninstall the snap version
[05:32:49] <tabakhase> yes and no - i´d think is not so much "locked out" - but rather "talking to the wrong one"
[05:33:20] <tabakhase> given the mkdir and readonly - sounds like "your docker-cli may try to talk to the snap-thing"
[05:33:54] <tabakhase> `env` and see if any DOCKER_HOST is set maybe
[05:34:01] *** Quits: jaysicks (~jaysicks@178-164-134-178.pool.digikabel.hu) (Remote host closed the connection)
[05:34:35] *** Joins: luckiswithme (~luckiswit@149.167.160.220)
[05:34:44] <tabakhase> also try forcing it and see what for example `DOCKER_HOST=unix:///var/run/docker.sock docker version` spits
[05:39:35] *** Joins: docmax (~docmax@dynamic-077-001-029-024.77.1.pool.telefonica.de)
[05:41:17] *** Quits: docmax_ (~docmax@dynamic-095-116-006-210.95.116.pool.telefonica.de) (Ping timeout: 240 seconds)
[05:42:39] <DannyMac> tabakhase: that's what it was, after I had setup everything, the snap version took control and the normal docker was like, dude, there's nothing going on
[05:43:02] <tabakhase> :D
[05:43:06] *** Quits: remote (~self@user/hackers) (Remote host closed the connection)
[05:44:35] <DannyMac> effing snap, how much longer is Canonicl going to continue having the world suffer? 
[05:52:01] *** Quits: luckiswithme (~luckiswit@149.167.160.220) (Remote host closed the connection)
[05:53:07] *** Joins: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970::fb)
[05:53:56] <DannyMac> tabakhase: thanks for your help
[05:54:10] <tabakhase> yw =)
[05:54:46] *** Joins: luckiswithme (~luckiswit@149.167.160.220)
[05:56:23] *** Parts: DannyMac (sid324534@user/dannymac) ()
[05:58:51] <CRCinAU> Ok - I know this is somewhat hacky - but I added a new s6 init script as a volume - then mapped it to /etc/s6/init - and added the following bash script as /etc/s6/init/run - https://paste.centos.org/view/4dd0af31
[05:59:43] <CRCinAU> given that I only need to add rsync for some scripting that runs in the background on a few things, this way, it will always run and fix up a new container when I pull from :latest in the future
[06:00:42] *** Quits: tsal (~tsal@user/tsal) (Ping timeout: 252 seconds)
[06:07:06] *** Joins: tsal (~tsal@user/tsal)
[06:12:48] *** Quits: Tacoder (~Tacoder@2806:264:5482:9e0:1cc9:d73:eb51:2a8d) (Ping timeout: 252 seconds)
[06:14:19] *** Quits: DoofusCanadensis (~DoofusCan@2604:3d09:47c:f970::fb) (Quit: So as you can see from this flowchSQUIRREL!!)
[06:35:17] *** Joins: Tacoder (~Tacoder@2806:264:5482:9e0:1cc9:d73:eb51:2a8d)
[06:55:36] *** Quits: millido (~millido@84.210.150.128) (Read error: Connection reset by peer)
[07:04:40] *** Joins: Nintendo (~smb3@user/great)
[07:10:24] *** Joins: k8yun (~k8yun@user/k8yun)
[07:14:02] *** Quits: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1) (Quit: The Lounge - https://thelounge.chat)
[07:15:01] *** Joins: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1)
[07:20:13] *** Joins: setesat2 (~setesat@94.4.156.220)
[07:22:30] *** Quits: setesat (~setesat@94.4.156.220) (Ping timeout: 272 seconds)
[07:22:31] *** setesat2 is now known as setesat
[07:26:47] *** Joins: lalitmee (~lalitmee@180.94.33.5)
[07:42:58] *** Quits: lalitmee (~lalitmee@180.94.33.5) (Remote host closed the connection)
[07:45:12] *** Quits: jochum (~quassel@user/jochum) (Ping timeout: 252 seconds)
[07:46:12] *** Joins: jochum (~quassel@user/jochum)
[07:46:48] *** Quits: tyson2 (~user@bras-base-toroon0624w-grc-08-70-29-36-27.dsl.bell.ca) (Remote host closed the connection)
[07:50:20] *** cryocaustik7 is now known as cryocaustik
[07:51:13] *** Joins: lalitmee (~lalitmee@180.94.33.5)
[07:52:15] *** Quits: Tacoder (~Tacoder@2806:264:5482:9e0:1cc9:d73:eb51:2a8d) (Remote host closed the connection)
[07:52:40] *** Joins: Tacoder (~Tacoder@2806:264:5482:9e0:1cc9:d73:eb51:2a8d)
[07:57:26] <ericlee> is there any doc talking about docker image structure and its dir layout? 
[08:07:42] <amosbird> Hello! What's wrong with this statement FROM ubuntu:18.04 AS generator
[08:07:49] <amosbird> Error parsing reference: "ubuntu:18.04 AS generator" is not a valid repository/tag: invalid reference format
[08:09:08] <tabakhase> ericlee any more precise q in that? - in one way "its just a linux system" - but also its very much NOT that ((as the "system" part in there is rly just so you can use apt-get/yum/apk/rpm and so on ;P))
[08:09:30] <tabakhase> amosbird `docker version`?
[08:11:28] <tabakhase> also, --from=1 (maybe 0? not sure) can be used as bypass i guess
[08:13:29] <ericlee> tabakhase, like the dir / file structure under /var/lib/docker 
[08:15:45] <tabakhase> ericlee that you should kinda "never have to touch" - not sure if there is any actual documentation, its somewhat selfexplained even i´d say...
[08:17:32] <ericlee> :) thanks but I noticed that it's not too easy to understand. 
[08:19:26] *** Joins: ekathva (~ekathva@n16j1oo707h05v16j-1.v6.elisa-mobile.fi)
[08:20:17] <tabakhase> you rly shouldnt have to touch it ever ;-) - buncha folders that assemble as layers (looking how this works is certainly worth) and a whoooooole lot of json files is pretty much all there is to it :D
[08:21:42] <ericlee> it's not about touching the files, it's about understanding what they are :) 
[08:24:46] <tabakhase> well i mean more as in there isnt rly anything to "learn" in there - its just some storage :P -- all the "magic" is cgroups, namespaces, how layering-filesystems work and there problems, volumes, bindmounts, entrypoints, signalhandling and how that goes into the "lifecycle"
[08:36:32] *** Quits: divine (~divine@2001:470:8247:1::31) (Read error: Connection reset by peer)
[08:37:34] *** Joins: divine (~divine@2001:470:8247:1::31)
[08:44:21] <ericlee> this is the one for overlayfs: https://docs.docker.com/storage/storagedriver/overlayfs-driver/
[08:45:44] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[08:45:57] *** Joins: rvalue (~rvalue@user/rvalue)
[08:59:30] *** Joins: ac_slater (~ac_slater@c-73-221-73-144.hsd1.wa.comcast.net)
[09:01:41] <ac_slater> hey guys sorry to bother. I use `ENTRYPOINT ["/bin/bash", "-c"]`. Before these run, I want to to source some environment variables from a file. How do you suggest is the best way to do this?
[09:02:26] <ac_slater> I should clarify, I do want bash as my entry point, but before it invokes the commands through -c, I want to load some vars. Almost like .bashrc or whateve
[09:09:51] *** Joins: mcpackey (~pm0001@p5dc1c9c8.dip0.t-ipconnect.de)
[09:28:40] <rvalue> ac_slater: `docker run --rm -it -e 'SLATER_ENV=1' bash:5`
[09:29:05] <ac_slater> rvalue: ah yea or I can use an .env file
[09:29:31] *** Joins: OsteHovel (~OsteHovel@ti0056a400-0096.bb.online.no)
[09:36:18] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 252 seconds)
[09:38:50] <ericlee> ac_slater, you can set ENV in your Dockerfile
[09:39:01] <ac_slater> right
[09:39:33] <ac_slater> in my case, I have some files I want to include in the dockerfile - specifically a toolchain. The toolchain has a "environment-setup" file that is intended for bashrc
[09:40:06] <ericlee> the elegant way is to use ENV, that's how I set up the environment vars. 
[09:41:02] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[09:41:07] <ac_slater> yea that likely makes sense
[09:41:12] <ac_slater> thanks!
[09:41:22] <ericlee> welcome
[09:42:28] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[09:49:21] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:50:17] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 240 seconds)
[09:51:18] *** Joins: Enitin (~Enitin@82.180.145.226)
[10:14:49] *** Joins: jazzy (~jaziz@user/jaziz)
[10:15:11] *** Quits: k8yun (~k8yun@user/k8yun) (Ping timeout: 256 seconds)
[10:21:21] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[10:23:21] *** Quits: luckiswithme (~luckiswit@149.167.160.220) (Remote host closed the connection)
[10:27:32] *** Joins: luckiswithme (~luckiswit@149.167.160.220)
[10:37:08] *** Quits: Enitin (~Enitin@82.180.145.226) (Ping timeout: 250 seconds)
[10:37:36] *** Quits: scjosh (~scjosh@206.189.79.69) (Quit: The Lounge - https://thelounge.chat)
[10:38:09] *** Joins: scjosh (~scjosh@206.189.79.69)
[10:42:42] *** Joins: ekathva_ (~ekathva@86.114.187.171)
[10:44:49] *** Quits: ekathva_ (~ekathva@86.114.187.171) (Read error: Connection reset by peer)
[10:45:22] *** Quits: ekathva (~ekathva@n16j1oo707h05v16j-1.v6.elisa-mobile.fi) (Ping timeout: 250 seconds)
[10:46:07] *** Joins: ekathva_ (~ekathva@n16iyde4bmj9ireof-1.v6.elisa-mobile.fi)
[10:46:26] *** Joins: ExeciN (~ExeciN@user/nicexe)
[10:46:35] *** Joins: emerent_ (~quassel@p200300cd5743c35fba27ebfffed28a59.dip0.t-ipconnect.de)
[10:46:36] *** emerent is now known as Guest5106
[10:46:36] *** emerent_ is now known as emerent
[10:46:40] *** Quits: Guest5106 (~quassel@p200300cd5743c32cba27ebfffed28a59.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[10:47:25] *** Joins: lalitmee_ (~lalitmee@180.94.32.193)
[10:50:05] *** Quits: lalitmee (~lalitmee@180.94.33.5) (Ping timeout: 256 seconds)
[10:53:16] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[10:53:34] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[10:56:01] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Remote host closed the connection)
[10:57:13] *** Joins: ekathva__ (~ekathva@mobile-access-5672d1-126.dhcp.inet.fi)
[10:57:45] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[10:59:40] *** Quits: ekathva_ (~ekathva@n16iyde4bmj9ireof-1.v6.elisa-mobile.fi) (Ping timeout: 250 seconds)
[11:05:57] *** Quits: cluelessperson (~cluelessp@user/cluelessperson) (Quit: ZNC - https://znc.in)
[11:06:17] *** Joins: cluelessperson (~cluelessp@user/cluelessperson)
[11:06:20] *** Joins: jazzy2 (~jaziz@user/jaziz)
[11:08:06] *** Joins: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net)
[11:09:35] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 256 seconds)
[11:11:28] *** Joins: asdf__ (~slashasdf@030-245-128-083.dynamic.caiway.nl)
[11:11:55] *** Quits: cluelessperson (~cluelessp@user/cluelessperson) (Ping timeout: 268 seconds)
[11:18:03] *** Quits: Tacoder (~Tacoder@2806:264:5482:9e0:1cc9:d73:eb51:2a8d) (Ping timeout: 252 seconds)
[11:19:44] *** Joins: Enitin (~Enitin@82.102.22.85)
[11:22:36] *** Quits: ekathva__ (~ekathva@mobile-access-5672d1-126.dhcp.inet.fi) (Read error: Connection reset by peer)
[11:24:05] *** Joins: ekathva__ (~ekathva@n16j14urzyjc7uwzq-1.v6.elisa-mobile.fi)
[11:32:44] *** Joins: tex (~dix@user/dix)
[11:50:25] *** Joins: lalitmee__ (~lalitmee@180.94.32.228)
[11:51:02] *** Joins: Tach (~Tach@user/tach)
[11:52:58] *** Quits: lalitmee_ (~lalitmee@180.94.32.193) (Ping timeout: 250 seconds)
[11:53:58] *** Quits: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:11:35] *** Quits: bindu (~bindu@user/bindu) (Ping timeout: 240 seconds)
[12:15:30] *** Joins: jdvr (~jdvr@user/jdvr)
[12:17:06] *** Joins: bindu (~bindu@user/bindu)
[12:19:34] *** Joins: jaysicks (~jaysicks@178-164-134-178.pool.digikabel.hu)
[12:25:51] *** Quits: kostkon_ (~androirc@athedsl-393845.home.otenet.gr) (Ping timeout: 256 seconds)
[12:29:25] *** jazzy2 is now known as jazzy
[12:32:54] *** Joins: lalitmee_ (~lalitmee@180.94.32.86)
[12:34:31] *** Joins: kostkon_ (~androirc@2.142.66.94.static.otenet.gr)
[12:35:38] *** Quits: lalitmee__ (~lalitmee@180.94.32.228) (Ping timeout: 260 seconds)
[12:43:35] <thm> is there a way to automatically re-populate a volume with the contents of the underlying container image in case the image gets updated?
[12:58:48] *** Quits: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se) (Ping timeout: 272 seconds)
[12:59:01] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 240 seconds)
[13:00:12] *** Joins: Enitin (~Enitin@82.102.22.85)
[13:00:57] *** Quits: SSLbits (~SSLbits@user/sslbits) (Ping timeout: 240 seconds)
[13:05:20] *** Joins: andypandy (~andypandy@h-178-174-148-234.A163.priv.bahnhof.se)
[13:08:35] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 256 seconds)
[13:11:37] *** Quits: Nintendo (~smb3@user/great) (Quit: Game over.)
[13:13:42] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[13:27:59] *** Joins: SSLbits (~SSLbits@user/sslbits)
[13:31:21] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Read error: Connection reset by peer)
[13:31:41] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[13:32:17] *** Quits: phylaz (~phylaz@82.51-174-55.customer.lyse.net) (Ping timeout: 240 seconds)
[13:33:37] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[13:41:00] *** Joins: RV06 (~RV@lfbn-nic-1-430-119.w90-116.abo.wanadoo.fr)
[13:41:35] *** Quits: clueminati (~clueminat@gateway/tor-sasl/clueminati) (Ping timeout: 240 seconds)
[13:42:03] *** Joins: clueminati (~clueminat@gateway/tor-sasl/clueminati)
[13:44:53] *** Quits: Enitin (~Enitin@82.102.22.85) (Ping timeout: 252 seconds)
[13:48:15] *** Quits: CombatVet (~c4@user/combatvet) (Ping timeout: 240 seconds)
[13:53:21] <Tach> thm what do you mean ?
[13:54:26] *** Quits: lalitmee_ (~lalitmee@180.94.32.86) (Quit: Leaving)
[13:54:55] <thm> a volume that is empty/freshly created will be populated with the contents the container has at the moint point, if any.
[13:56:09] <thm> now, when the container image is updated, I need to rm the volume to get it re-populated
[14:05:01] *** Joins: gproto23 (~gproto23@user/gproto23)
[14:16:04] *** Joins: CombatVet (~c4@user/combatvet)
[14:21:11] *** Joins: bouncy (~ben@user/benoit)
[14:22:48] <ikke> as far as I know, there is now way to do that
[14:22:58] <ikke> it only gets populated when the volume is created
[14:24:14] *** Joins: TomyWork (~TomyLobo@p200300e80f15820040d7f921142b8d51.dip0.t-ipconnect.de)
[14:31:28] *** Joins: tyson2 (~user@bras-base-toroon0624w-grc-08-70-29-36-27.dsl.bell.ca)
[14:35:42] <Tach> make a trigger for it
[14:44:09] *** Joins: DrowningElysium (uid190788@user/drowningelysium)
[14:44:25] *** Joins: Enitin (~Enitin@82.180.145.226)
[14:47:37] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Remote host closed the connection)
[14:51:30] *** Joins: pulsar12 (~quassel@a79-169-140-39.cpe.netcabo.pt)
[15:02:26] *** Quits: pizza (~pizzaiolo@user/pizzaiolo) (Quit: Goodbye)
[15:02:47] *** Joins: jkwnki (~jkwnki@p2e57985d.dip0.t-ipconnect.de)
[15:03:48] *** Joins: pizzaiolo (~pizzaiolo@user/pizzaiolo)
[15:08:42] *** Quits: mino_ (~mino@user/mino) (Quit: Bye)
[15:08:52] *** Joins: trevors (~trevors@user/trevors)
[15:14:22] <stenno> i am a bit confused about maintaining multiple remote hosts with docker. Assume i have a simple web app consisting of a webserver, a database and a mounted volume. Now i have dozens of different remote hosts (basically virtual machines in our virtual network) which runs the software for each of our customers, i.e. each customer has their own virtual machine.
[15:15:42] <stenno> Yesterday i looked into docker context and docker swarm, and came to the conclusion: docker context is _probably_ what i want, docker swarm is more for fault tolerance and availability instead of maintaining many small hosts
[15:18:58] <stenno> but now i am not really sure how to automate deployment over multiple contexts. should my 'master' node just deploy by switching context to each specific customer and update the images?
[15:20:37] <stenno> i could also look into docker swarm again and configure it in a way that each stack represents an installation, and they are all seperated
[15:21:04] <stenno> i don't need any load balancing, i just need a decent way to maintain and update many different containers on many hosts
[15:22:54] <stenno> i am not even sure if my setup would constitute a 'cluster' as all of my nodes are totally independent from each other
[15:23:58] <stenno> i don't need any cluster or resource pooling, i just need a way to maintain all my different deployment targets
[15:25:21] <Tach> stenno cluster is only for HA
[15:25:32] <stenno> yeah thought so
[15:25:56] <stenno> so docker swarm would be the wrong tool for that right? it scales in the wrong dimension if that makes sense
[15:28:06] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[15:28:32] *** Quits: pulsar12 (~quassel@a79-169-140-39.cpe.netcabo.pt) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[15:32:11] <Tach> depens on design
[15:35:29] *** Joins: CombatVet_ (~c4@user/combatvet)
[15:36:02] *** Quits: CombatVet (~c4@user/combatvet) (Quit: suck it)
[15:36:19] *** CombatVet_ is now known as CombatVet
[15:36:20] *** Joins: Proxysna (~Proxysna@62.119.254.142)
[15:39:03] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Read error: Connection reset by peer)
[15:39:24] *** Joins: Thanzex9 (~Thanzex@37.103.241.128)
[15:39:26] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[15:40:47] *** Quits: Thanzex (~Thanzex@37.103.212.236) (Ping timeout: 256 seconds)
[15:40:47] *** Thanzex9 is now known as Thanzex
[15:45:57] *** Quits: Proxysna (~Proxysna@62.119.254.142) (Quit: Leaving)
[15:51:05] *** Quits: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith) (Remote host closed the connection)
[15:51:22] *** Joins: winstonsmith (~winstonsm@gateway/vpn/pia/winstonsmith)
[15:57:59] *** Joins: MikeBux (~MikeBux@host-091-097-125-245.ewe-ip-backbone.de)
[15:58:25] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[15:59:04] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[16:00:34] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Remote host closed the connection)
[16:00:49] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[16:02:01] *** Quits: hydracat (~hydracat_@pool-96-230-188-202.prvdri.fios.verizon.net) (Ping timeout: 245 seconds)
[16:02:44] *** Quits: jkwnki (~jkwnki@p2e57985d.dip0.t-ipconnect.de) (Quit: WeeChat 3.0)
[16:03:07] *** Joins: jkwnki (~jkwnki@p2e57985d.dip0.t-ipconnect.de)
[16:03:56] *** Quits: FaV1r3s (~localhost@user/fav1r3s) (Quit: ZNC - https://znc.in)
[16:09:46] *** Quits: fmirkes (~fmirkes@user/fmirkes) (Quit: ZNC - https://znc.in)
[16:09:58] *** Joins: fmirkes (~fmirkes@user/fmirkes)
[16:15:00] *** Quits: bolt (~r00t@user/bolt) (Remote host closed the connection)
[16:16:03] *** Joins: FaV1r3s (~localhost@user/fav1r3s)
[16:17:12] *** Joins: bolt (~r00t@user/bolt)
[16:22:53] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[16:25:58] <Tach> tabakhase are you here ?
[16:26:15] <tabakhase> Tach sure :P
[16:26:36] <tabakhase> (since about 10 minutes or so :D)
[16:27:36] <tabakhase> for?
[16:29:05] *** Joins: trevors (~trevors@user/trevors)
[16:33:17] <stenno> Tach: my design is that i have multiple independent installations/instances of the same repositories
[16:33:36] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[16:34:43] *** Joins: ekathva_ (~ekathva@193.210.171.118)
[16:36:59] *** Quits: ekathva__ (~ekathva@n16j14urzyjc7uwzq-1.v6.elisa-mobile.fi) (Ping timeout: 250 seconds)
[16:39:25] *** Quits: Enitin (~Enitin@82.180.145.226) (Ping timeout: 240 seconds)
[16:39:51] *** Quits: ekathva_ (~ekathva@193.210.171.118) (Read error: Connection reset by peer)
[16:39:56] *** Joins: Enitin (~Enitin@82.102.22.84)
[16:40:54] *** Quits: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net) (Ping timeout: 252 seconds)
[16:40:57] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Ping timeout: 240 seconds)
[16:41:06] *** Joins: ekathva_ (~ekathva@n16j1b0fzs8z4jskb-1.v6.elisa-mobile.fi)
[16:42:06] *** Joins: atrigent (~atrigent@c-73-69-68-26.hsd1.ma.comcast.net)
[16:42:36] <Tach> tabakhase sure you are :) I forgot what I wanted to ask
[16:43:14] *** Quits: bolt (~r00t@user/bolt) (Remote host closed the connection)
[16:43:25] <Tach> oh there it is again... what do you think what hapens when you do "docker image prune --all" during multiple (staged) builds ?
[16:43:33] <Tach> stenno that is not design
[16:45:27] *** Joins: bolt (~r00t@user/bolt)
[16:54:05] <stenno> what is a design
[16:54:47] <stenno> its not my design, its my current situation
[16:55:24] *** Quits: Tabmow (~tabmow@user/tabmow) (Ping timeout: 268 seconds)
[16:55:42] *** Joins: k8yun (~k8yun@user/k8yun)
[16:56:16] <stenno> Tach: what exactly do you mean with 'design' ?
[16:56:24] *** Joins: Tabmow (~tabmow@user/tabmow)
[16:56:47] <tabakhase> Tach good question :D i could see this go horribly wrong... but also "work fine" (cause the containers used for the build kinda hold the door open i guess...) --- but given that "to purge a registry, you are recommended to switch it to readonly to not have ongoing-uploads" id imagine bare-docker would have very much the same potential problem... and even moreso with multistages... --- "BUT" 
[16:56:48] <tabakhase> new docker versions have there builder/buildcache somewhat distant from the normal dockerD, so that may change some of this if only using "image prune" and not whole system... - all pure guesstimations tho ;D
[16:57:41] *** Quits: tyson2 (~user@bras-base-toroon0624w-grc-08-70-29-36-27.dsl.bell.ca) (Remote host closed the connection)
[17:00:10] <Tach> yeah indeed. For staged, and also other builds, I can label the images
[17:00:18] <Tach> so remove manually
[17:01:29] *** Quits: steerpike (~echelon@gateway/tor-sasl/steerpike) (Remote host closed the connection)
[17:01:54] *** Joins: steerpike (~echelon@gateway/tor-sasl/steerpike)
[17:04:32] *** Joins: leon (~znc@user/leon)
[17:06:12] *** Quits: jkwnki (~jkwnki@p2e57985d.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[17:07:24] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 240 seconds)
[17:10:09] *** Quits: bolt (~r00t@user/bolt) (Remote host closed the connection)
[17:12:05] *** Joins: bolt (~r00t@user/bolt)
[17:16:49] *** Quits: bolt (~r00t@user/bolt) (Remote host closed the connection)
[17:18:57] *** Joins: bolt (~r00t@user/bolt)
[17:19:24] *** Joins: R2Racoon (~R2Racoon@181.62.52.196)
[17:21:57] *** Quits: k8yun (~k8yun@user/k8yun) (Read error: Connection reset by peer)
[17:23:05] *** Joins: Enitin (~Enitin@82.180.145.226)
[17:27:17] *** Quits: Enitin (~Enitin@82.180.145.226) (Ping timeout: 240 seconds)
[17:32:04] <braxas> should `docker run --rm -it --network host ...` make loopback become the host's loopback?
[17:32:28] <stenno> https://docs.docker.com/engine/context/working-with-contexts/#prerequisites mentions 'single-engine docker node', what exactly is meant with 'single-engine'? does that just mean that its a node where docker is installed?
[17:40:26] *** Joins: tyson2 (~user@cpe688f2ec1f9b3-cm688f2ec1f9b0.sdns.net.rogers.com)
[17:40:41] <tabakhase> braxas yep
[17:41:00] <braxas> I'm guessing shoehow rootless docker breaks this
[17:41:23] <tabakhase> thats very much possible 
[17:42:22] <tabakhase> https://thenewstack.io/how-to-run-docker-in-rootless-mode/ -- Limitations: Doesn’t support –net-host. --- so thats a yes
[17:42:43] *** Joins: ekathva__ (~ekathva@mobile-access-5672f9-202.dhcp.inet.fi)
[17:42:43] <braxas> https://docs.docker.com/engine/security/rootless/#known-limitations
[17:43:09] <tabakhase> thats the better google result indeed :D
[17:43:14] <braxas> actually seems I can use nsenter
[17:43:26] <braxas> but actually I'm guessing things are going to go poorly
[17:43:31] <braxas> should probably not rely on it
[17:43:55] <tabakhase> that nsenter there is about "host->container" i think
[17:44:47] <tabakhase> (that said, IPAddress kinda shouldnt be used ever anyhow, that one can access the docker0-interface network directly is "almost an accident" - published ports is where its at...)
[17:45:16] *** Quits: ekathva_ (~ekathva@n16j1b0fzs8z4jskb-1.v6.elisa-mobile.fi) (Ping timeout: 250 seconds)
[17:55:32] *** Joins: k8yun (~k8yun@user/k8yun)
[17:57:23] *** Quits: chodonne (~chodonne@ec2-3-18-56-136.us-east-2.compute.amazonaws.com) (Quit: ZNC - https://znc.in)
[17:58:06] *** Joins: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com)
[17:58:48] *** Joins: phylaz (~phylaz@82.51-174-55.customer.lyse.net)
[18:00:07] *** Joins: chodonne (~chodonne@ec2-3-18-56-136.us-east-2.compute.amazonaws.com)
[18:01:33] *** Quits: ekathva__ (~ekathva@mobile-access-5672f9-202.dhcp.inet.fi) (Ping timeout: 256 seconds)
[18:07:00] *** Joins: meandrain (~meandrain@2a02:2f0e:f70f:6e00:4ce0:6366:566f:39a0)
[18:12:41] *** Joins: Enitin (~Enitin@82.102.22.86)
[18:15:30] *** Quits: eroux (~eroux@102-65-85-242.ftth.web.africa) (Ping timeout: 252 seconds)
[18:17:13] *** Joins: millido (~millido@84.210.150.128)
[18:22:11] *** Joins: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net)
[18:22:16] *** Quits: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net) (Client Quit)
[18:26:16] *** Joins: dan01 (~dan01@79.114.32.99)
[18:29:54] *** Quits: Enitin (~Enitin@82.102.22.86) (Ping timeout: 250 seconds)
[18:30:15] *** Joins: Enitin (~Enitin@82.180.145.226)
[18:47:04] <ska> Is there a way to convince docker-compose to access our private repos using ssh-agent forwarding, (do not copy any credentials)... ?
[18:47:22] *** Joins: drillbyt (drillbyt@user/drillbyt)
[18:52:21] *** Quits: dan01 (~dan01@79.114.32.99) (Ping timeout: 252 seconds)
[18:56:58] *** Joins: mino (~mino@user/mino)
[18:58:20] <tabakhase> ska docker-compose has has nothing todo with this - just docker / Dockerfile
[18:59:33] <peac> hey, i have an sshfs mounted directory on my host, and i need to bind mount this folder, or even a folder inside if that's an issue, to a container. When running `-v /home/peac/Downloads/test:/test:rslave` i get `Error response from daemon: error while creating mount source path '/home/peac/Downloads/test': mkdir /home/peac/Downloads: file exists.` any idea why ?
[19:00:05] <peac> Downloads is the sshfs mounted directory
[19:00:24] <tabakhase> ska and then google should spit some useable stuff, but in general 2 strategies -> a) multistage build, ship in secrets, do stuff, FROM again (in the same dockerfile!) and COPY --from= only the cloned code  <- this also works with old(er) docker daemons and alternative builders -- or b) use buildkit and stuff like "ssh-temp-mounts" what requires a fairly recent docker-daemon and may not be 
[19:00:24] <tabakhase> supported by podman&there-like (no clue on that tho)
[19:00:33] *** Joins: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net)
[19:01:05] *** Quits: pvdp40 (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au) (Remote host closed the connection)
[19:02:28] *** Quits: redbrass (~shawn@S01065c7695fa1e56.cg.shawcable.net) (Quit: Konversation terminated!)
[19:03:29] <tabakhase> peac did test exist?  and why you mocking around with propagation there...
[19:04:17] <peac> i tried without :rslave and using Downloads instead of Downloads/test and i get the same result, like if docker was having an issue with the sshfs
[19:05:04] *** Quits: mcpackey (~pm0001@p5dc1c9c8.dip0.t-ipconnect.de) (Remote host closed the connection)
[19:05:06] *** Joins: dan01 (~dan01@2a02:2f09:3805:0:b44a:f768:9ead:27f)
[19:05:07] <peac> and i just re-tried with/without rslave, after creating Downloads/test manually, same result
[19:05:27] <tabakhase> peac who made the sshfs? allow_other enabled?
[19:06:11] <programmerq> peac if you did the mount after docker started, and docker is running in its own child mount namespace, that might explain the issue?
[19:06:40] <peac> tabakhase user peac made the sshfs, i did not see allow_other i'll check that
[19:06:50] *** Quits: gproto23 (~gproto23@user/gproto23) (Remote host closed the connection)
[19:07:31] <tabakhase> peac may work just as -o | potentially needs to be unlocked/allowed to be used in fuse.conf first
[19:07:35] <programmerq> oh yeah, it could definitely be stuff with fuse too. allow_other or
[19:07:53] <programmerq> something similar could be getting in the way. I imagine your docker daemon is running as root on the host?
[19:15:01] <peac> that seems to work, thanks !
[19:16:24] <tabakhase> :)
[19:17:02] *** Joins: jamiejackson (~jamiejack@131.106.140.145)
[19:18:01] *** Quits: tyson2 (~user@cpe688f2ec1f9b3-cm688f2ec1f9b0.sdns.net.rogers.com) (Remote host closed the connection)
[19:18:06] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[19:19:13] *** Joins: minimal (~minimal@user/minimal)
[19:33:14] *** Joins: leitz (~LeamHall@072-182-158-027.res.spectrum.com)
[19:33:57] *** Quits: Enitin (~Enitin@82.180.145.226) (Ping timeout: 240 seconds)
[19:34:16] *** pizzaiolo is now known as pizza
[19:39:48] *** Quits: catbehemoth (~vasyl@bras-base-lnglpq6100w-grc-16-206-172-248-192.dsl.bell.ca) (Quit: WeeChat 3.4)
[19:40:15] *** Joins: catbehemoth (~vasyl@bras-base-lnglpq6100w-grc-16-206-172-248-192.dsl.bell.ca)
[19:42:05] *** Quits: gearnode (~gearnode@2a01cb000ce2c100f22f74fffedefec1.ipv6.abo.wanadoo.fr) (Quit: WeeChat 3.4)
[19:43:26] *** Quits: luckiswithme (~luckiswit@149.167.160.220) (Remote host closed the connection)
[19:44:07] *** Joins: rsx (~dummy@ppp-188-174-129-89.dynamic.mnet-online.de)
[19:44:43] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[19:44:45] *** Joins: luckiswithme (~luckiswit@149.167.160.220)
[19:48:12] *** Quits: asdf__ (~slashasdf@030-245-128-083.dynamic.caiway.nl) (Ping timeout: 240 seconds)
[20:02:28] *** Quits: burrows (burrows@user/burrows) (Quit: Probably rebooting)
[20:02:58] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[20:05:15] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[20:06:31] <ash_worksi> re: bind mounts -- The file or directory does not need to exist on the Docker host already. It is created on demand if it does not yet exist.
[20:06:51] <ash_worksi> is there anything in the docs that says this is untrue?
[20:06:57] <ash_worksi> omg my brain
[20:07:02] <ash_worksi> is there anything in the docs that says this is untrue for swarm?
[20:07:03] *** Joins: burrows (burrows@user/burrows)
[20:07:11] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Remote host closed the connection)
[20:07:52] <ash_worksi> I thought maybe this was a permissions issue but I tried setting my pg data source dir directly to /home/docker/postgresql/data
[20:08:37] <ash_worksi> and the service didn't start; I created the directory manually with `mkdir -p postgresql/data` and of course the service started right up
[20:08:52] <rawtaz> dont forget to patch your linux kernels for CVE-2022-25636
[20:09:52] <ash_worksi> thanks rawtaz 
[20:10:14] <rawtaz> yw. tbh i havent investigated in detail whether theres some quick workaround for it, if anyone knows let me know :)
[20:10:42] <ash_worksi> `sudo sysctl kernel.unprivileged_userns_clone=0`
[20:10:49] <ash_worksi> rawtaz: for ubuntu ^
[20:11:47] <ash_worksi> see https://ubuntu.com/security/CVE-2022-25636
[20:11:53] *** Quits: luckiswithme (~luckiswit@149.167.160.220) (Remote host closed the connection)
[20:12:39] *** Joins: Enitin (~Enitin@82.102.22.84)
[20:12:39] *** Joins: luckiswithme (~luckiswit@149.167.160.220)
[20:12:58] <rawtaz> thanks!
[20:13:07] <rawtaz> i guess that should apply to debian as well
[20:13:15] <rawtaz> but meh, im patching anyway
[20:15:24] <ash_worksi> anyone have any input on my volumes question?
[20:16:59] *** Quits: Enitin (~Enitin@82.102.22.84) (Ping timeout: 256 seconds)
[20:17:16] <rawtaz> ash_worksi: sorry i never used swarm. but i would expect the folder creation to work the same way as a regular docker standalone host :o
[20:17:39] *** Quits: luckiswithme (~luckiswit@149.167.160.220) (Remote host closed the connection)
[20:18:15] *** Joins: Enitin (~Enitin@82.180.145.223)
[20:18:53] *** Joins: luckiswithme (~luckiswit@149.167.160.220)
[20:19:09] *** Quits: dfee (~dfee@162-227-164-101.lightspeed.sntcca.sbcglobal.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:19:18] *** Joins: trevors (~trevors@user/trevors)
[20:19:37] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[20:20:13] *** Joins: DoofusCanadensis (~DoofusCan@node-1w7jr9yercvgf5wapngawmyps.ipv6.telus.net)
[20:22:05] *** Parts: rob` (~rbos@limelight.ca) ()
[20:26:15] <Furai> I'm not sure what changed in my system but docker used to read /etc/hosts entries from my host through systemd-resolved. Now it stopped working. Anyone has any ideas what could be the cause? Was something changed on docker side or is it rather my system? I'm on linux.
[20:27:24] <programmerq> docker itself pretty much just follows what your /etc/resolv.conf says are the dns servers. If that dns server is able to read your /etc/hosts, then docker won't know nor care that those entries have anything to do with /etc/hosts since it just talks dns.
[20:28:41] <programmerq> with the legacy docker0 network, docker will remove any 127.0.0.x entries as considered as valid when it builds the /etc/resolv.conf for the container. If you don't specify something with --dns, and you don't have any entries that can be used from inside the container, docker will just toss in 8.8.8.8 since the legacy docker0 stuff just gets a basic /etc/resolv.conf file
[20:29:54] <programmerq> with user defined networks, docker runs its own dns forwarding server to inject service discovery stuff, and forwards other requests on the host to whatever the /etc/resolv.conf file has in it. Since it's not making the container itself directly interact with the dns servers on the host's /etc/resolv.conf it doesn't need to do the 8.8.8.8 thing
[20:30:45] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[20:31:14] <minimal> programmerq: doesn't that depend on the distro? I've used docker images/containers on Ubuntu where inside the container /etc/resolv.conf only had a single entry for 127.0.0.53 (from memory) which was then serviced by systemd-resolvd
[20:33:18] *** Joins: dfee (~dfee@12.207.156.194)
[20:34:11] *** Quits: samuelbernardo (~samuelber@nata02.lip.pt) (Ping timeout: 272 seconds)
[20:34:47] *** Quits: drillbyt (drillbyt@user/drillbyt) (Quit: Leaving)
[20:36:14] <ash_worksi> re: bind mounts -- The file or directory does not need to exist on the Docker host already. It is created on demand if it does not yet exist. -- is there anything that says this is untrue for swarm? (which seems to be my experience)
[20:41:15] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[20:41:21] *** Quits: R2Racoon (~R2Racoon@181.62.52.196) (Ping timeout: 256 seconds)
[20:44:05] *** Joins: samuelbernardo (~samuelber@nata01.lip.pt)
[20:46:13] *** Quits: dan01 (~dan01@2a02:2f09:3805:0:b44a:f768:9ead:27f) (Read error: Connection reset by peer)
[20:49:14] *** Quits: rsx (~dummy@ppp-188-174-129-89.dynamic.mnet-online.de) (Quit: rsx)
[20:50:58] *** Quits: Czernobog (~Czernobog@user/czernobog) (Quit: ZNC 1.8.2 - https://znc.in)
[20:50:59] *** Joins: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[20:52:27] *** Joins: Czernobog (~Czernobog@user/czernobog)
[20:55:01] <ada_> ash_worksi: docs say --mount does not ever exhibit that behaviour, but --volume does
[20:55:31] <ada_> ash_worksi: I can't say for swarm, but I think from anecdotes it doesn't create those directories?  I think if you deploy a swarm service with an an invalid (doesn't exist yet) volume path then it will fail to run
[20:56:29] <DoofusCan> the Develop with Docker docs say use bind mounts in development but volumes in production... and mention Swarm only in the context of production
[20:56:50] <ash_worksi> ada_: okay, but I'm not crazy, that behaviour isn't documented anywhere?
[20:57:12] <ash_worksi> thanks DoofusCan 
[20:57:20] <ada_> ash_worksi: I cannot confirm nor deny 
[20:57:45] <DoofusCan> I didn't see anything more specific than that in my brief glance at the documentation
[20:57:56] *** Joins: stenno (~stenno@user/stenno)
[21:03:07] <ash_worksi> ada_: just to make sure, when you're talking about --volume, you're not taking issue with my premise, right?
[21:03:28] <ada_> no, I agree with you; but I can't confirm it with docs just my own experience
[21:03:51] <ada_> I feel like you're right
[21:09:35] *** Joins: Sven_vB (~sven@user/sven-vb/x-2094958)
[21:10:43] <Sven_vB> Hi :) A readme in an official repo seems to be cut off early: https://hub.docker.com/_/postgres seems to end with "on the host system (outside the container) and". where should I report this?
[21:11:36] <Sven_vB> oh, I see the note on top even mentions it
[21:11:48] <Sven_vB> we should repeat that note on the bottom.
[21:12:17] <Sven_vB> I'll report that idea on the linked feedback hub.
[21:12:47] *** Joins: junktext (~junktext@gateway/vpn/pia/junktext)
[21:19:25] <ash_worksi> ada_: from that perspective would you be more inclined to (1) deploy a database on swarm using a named volume (2) deploy database not on swarm (3) deploy a database using a bind mount on swarm and just do whatever is necessary to ensure the volume exists. ?
[21:19:43] <ada_> I used named volumes everywhere
[21:19:56] <ada_> and probably a placement constraint to make sure it respawns on the same node 
[21:22:30] <rawtaz> i on the other hand always use bind mounts
[21:22:42] <rawtaz> both approaches hav their pros and cons, neither is perfect :D
[21:22:44] <rawtaz> >_<
[21:25:38] *** Joins: Synthead (~Synthead@50.35.186.220)
[21:26:11] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:26:16] <Synthead> is there a way I can ignore a directory outside of .dockerignore?  .dockerignore is tracked in a project, but I have my own directory of random junk I want to avoid sending to the docker daemon
[21:26:38] <ada_> I don't understand the question
[21:26:55] <ada_> everything under the build context gets sent to the builder.  .dockerignore should be at the root of the build context
[21:26:56] <rawtaz> they want to put additional entries in .dockerignore or equivalent, but without having it version controlled
[21:27:03] <rawtaz> (the addition, i mean)
[21:27:04] <ada_> so how can you ignore something that isn't in the build context?
[21:27:08] *** Quits: dfee (~dfee@12.207.156.194) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:27:12] <ada_> oh oh
[21:27:19] <ada_> just locally modify .dockerignore and don't check it in?
[21:27:21] * rawtaz took a wild guess :D
[21:27:46] <ada_> but the answer to the question is "no, there is not some *other* way to ignore things"
[21:28:08] <rawtaz> thats what i would do too. since i always use git add -p, so its easy to not add/commit that change.
[21:28:12] <Synthead> ada_: that's what I'm doing now, but I'm hoping to keep the file in sync to the repo
[21:28:29] <Synthead> git has something for this: .git/info/exclude
[21:28:55] <ada_> so I enable autostash with my pulls
[21:28:57] <ada_> in my git config
[21:29:09] <ada_> that way my local changes get automatically stash'd and then pop'd on a pull or rebase
[21:29:22] <ada_> https://cscheng.info/2017/01/26/git-tip-autostash-with-git-pull-rebase.html
[21:29:29] <Synthead> oh that's handy
[21:30:47] *** Joins: bloodninja7 (~bloodninj@user/bloodninja)
[21:30:57] <ada_> ah ok, I like your method too
[21:31:05] <ada_> .git/info/exclude, and list the .dockerignore file
[21:31:06] <ada_> TIL
[21:31:26] *** Quits: luckiswithme (~luckiswit@149.167.160.220) (Remote host closed the connection)
[21:31:32] *** Joins: dfee (~dfee@12.207.156.194)
[21:32:15] <Synthead> well, I don't want to ignore the .dockerignore file
[21:32:23] <Synthead> if it gets changed, I want to know :)
[21:32:37] *** Quits: bloodninja (~bloodninj@user/bloodninja) (Ping timeout: 240 seconds)
[21:32:37] *** bloodninja7 is now known as bloodninja
[21:32:43] <Synthead> I just want to have my own stuff ignored without bodging up .dockerignore
[21:32:45] <ada_> but doesn't that just ignore your local changes?
[21:33:00] <Synthead> even an env var would work; I use direnv do this would be totally ok
[21:33:30] <Synthead> ada_: yes, but if I made local changes to it, I want it to show up, like .gitignore
[21:35:14] <Synthead> maybe I should just ignore .dockerignore with .git/info/exclude
[21:35:29] <Synthead> it's not the best, but that file doesn't change enough for me to care too much
[21:44:11] <Synthead> hm, exclude doesn't work on tracked files
[21:47:42] <tabakhase> you can untrack a file while its still in the repo - just note that this will never ever get updated 
[21:47:42] <rawtaz> is this really such a big problem? make your local changes and just dont commit them, problem solved. if you ever need to commit them, temporarily stash your changes to that file, make and commit changes, then unstash.
[21:47:53] <rawtaz> i dont see why this is such a big deal or problem at all :O
[21:48:25] <rawtaz> the only time it'd be a problem is if you are one of them git "users" that just add all the files that were changes and never keep their git history and commits tidy :)
[21:48:40] <Synthead> it's not a _huge_ deal, but it's an annoyance that I thought I'd ask if there is an answer for
[21:48:43] <Synthead> "no" is okay :)
[21:48:47] <tabakhase> `git update-index --assume-unchanged .dockerignore` "unlocks" that file you could say
[21:49:19] <ikke> Don't use --assume-unchanged, use at least --skip-worktree
[21:50:15] *** Quits: ska (~ska@user/ska) (Quit: Leaving)
[21:50:47] <rawtaz> Synthead: very fair enough :D
[21:52:02] <Synthead> :D
[21:52:10] <Synthead> alright y'all, thanks a ton <3
[21:52:13] <Synthead> ciao
[21:52:21] *** Quits: Synthead (~Synthead@50.35.186.220) (Quit: Leaving)
[21:53:00] <rawtaz> what a happy camper! :-)
[21:53:57] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[22:09:57] *** Parts: Sven_vB (~sven@user/sven-vb/x-2094958) (Leaving)
[22:10:32] *** Joins: nemexis_ (~nemexis@193-62-201-31.ftth.glasoperator.nl)
[22:11:25] *** Quits: nemexis (~nemexis@193-62-201-31.ftth.glasoperator.nl) (Ping timeout: 240 seconds)
[22:13:42] *** Quits: epicout (~epicout@user/epicout) (Quit: ZNC - https://znc.in)
[22:14:23] *** Quits: dfee (~dfee@12.207.156.194) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:18:15] *** Quits: Enitin (~Enitin@82.180.145.223) (Ping timeout: 256 seconds)
[22:18:25] *** Joins: dfee (~dfee@12.207.156.194)
[22:18:34] *** Joins: Enitin (~Enitin@82.180.145.223)
[22:19:46] *** Quits: dfee (~dfee@12.207.156.194) (Client Quit)
[22:20:17] *** Joins: epicout (~epicout@user/epicout)
[22:21:12] *** Joins: AnapodoPsalidaki (~AnapodoPs@2a02:587:290f:12b5:7905:e0af:7720:84a4)
[22:23:07] *** Quits: AnapodoPsalidi (~AnapodoPs@195.46.31.29) (Ping timeout: 256 seconds)
[22:25:51] *** Joins: JoelJoel (~jjshoe@user/joel)
[22:26:33] *** Quits: Joel (~jjshoe@user/joel) (Ping timeout: 268 seconds)
[22:28:59] *** Quits: beenao (~beenao@user/beenao) (Quit: quit)
[22:29:36] *** Quits: jdvr (~jdvr@user/jdvr) (Ping timeout: 252 seconds)
[22:29:58] *** Joins: beenao (~beenao@user/beenao)
[22:31:08] *** Quits: Enitin (~Enitin@82.180.145.223) (Read error: Connection reset by peer)
[22:31:36] *** Joins: Enitin (~Enitin@82.180.145.223)
[22:32:56] *** Joins: jazzy (~jaziz@user/jaziz)
[22:34:37] *** Joins: dfee (~dfee@12.207.156.194)
[22:34:40] *** Quits: dfee (~dfee@12.207.156.194) (Client Quit)
[22:36:34] *** Joins: luc4 (~manjaro-u@host-87-8-234-44.retail.telecomitalia.it)
[22:37:57] *** Quits: Enitin (~Enitin@82.180.145.223) (Ping timeout: 240 seconds)
[22:39:15] *** Joins: Enitin (~Enitin@82.180.145.227)
[22:41:42] *** Quits: kostkon_ (~androirc@2.142.66.94.static.otenet.gr) (Ping timeout: 252 seconds)
[22:45:06] *** Quits: Haxxa (~Haxxa@202-130-210-100.ip4.superloop.com) (Quit: Haxxa flies away.)
[22:47:22] *** Joins: Haxxa (~Haxxa@202-130-210-100.ip4.superloop.com)
[22:51:14] *** Joins: kostkon_ (~androirc@athedsl-393845.home.otenet.gr)
[22:53:03] *** Joins: lenarhoyt (~lenarhoyt@p2e5cf9dd.dip0.t-ipconnect.de)
[22:54:35] <lenarhoyt> Hi all. I'm trying to install acme.sh in a read_only container with tmpfs: /tmp:uid=me,gui=me. The installer script gets downloaded successfully, but then it fails running the script. 20:15:20 execve("./acme.sh", ["./acme.sh", "--install", "--no-cron", "--home", "/state/certs/acmesh", "--config-home", "/state/certs", "--cert-home", "/state/certs",
[22:54:35] <lenarhoyt> "--accountemail"], 0x7f10bf44e620 /* 8 vars */) = -1 EACCES (Permission denied)
[22:55:01] <lenarhoyt> gid*
[22:56:34] *** Joins: lilgopher (~ubuntu@2601:241:8000:38f0::1bb1)
[22:59:46] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[23:03:27] *** Joins: tyson2 (~user@bras-base-toroon0624w-grc-08-70-29-36-27.dsl.bell.ca)
[23:03:35] *** Quits: Enitin (~Enitin@82.180.145.227) (Ping timeout: 256 seconds)
[23:04:08] *** Joins: Enitin (~Enitin@82.180.145.225)
[23:04:58] *** Joins: jkwnki (~jkwnki@p2e57985d.dip0.t-ipconnect.de)
[23:10:22] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[23:11:38] *** Joins: Brainium (~brainium@user/brainium)
[23:14:45] *** Joins: Manouchehri (sid384576@id-384576.hampstead.irccloud.com)
[23:15:10] *** Quits: trevors (~trevors@user/trevors) (Quit: trevors)
[23:15:43] <Manouchehri> Hmm, if I'm passing a device through with `--device=/dev/loop0:/dev/loopy0`, how would I also pass through /dev/loopy0p1 after partitions were created on /dev/loopy0?
[23:20:10] <tabakhase> same?
[23:20:42] <Manouchehri> tabakhase: eh I guess, but I have to restart the container, no?
[23:23:50] <tabakhase> likely, or give it permissions to mount itself i guess if the formating happens "inside" there...
[23:25:04] <tabakhase> what ive also seen is handing over "all of /dev" - but that seems spooky never done it myself :D    ((for usb plugin detection or so...))
[23:25:26] *** Quits: Atque (~Atque@user/atque) (Remote host closed the connection)
[23:25:37] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[23:25:49] <Manouchehri> tabakhase: yea, I'm abusing docker to bootstrap build a VM image :p
[23:25:57] *** Joins: ExeciN (~ExeciN@user/nicexe)
[23:26:05] <tabakhase> id whack in some --privileged and see if container can mount himself for your usecase, if that works, cut down to only the needed --cap-add i guess ((somewhere there is a tool that can tell whats needed after a strace run...))
[23:26:36] *** Joins: Atque (~Atque@user/atque)
[23:26:43] <Manouchehri> yeah, my startup is working on improving tooling for the latter. :p 
[23:27:57] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-e0e2-ce57-d3ad-b362.res6.spectrum.com) (Ping timeout: 240 seconds)
[23:29:22] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-c00d-0011-9495-6b87.res6.spectrum.com)
[23:30:26] <tabakhase> `some tool` == capsh ;)
[23:31:10] *** Joins: mauz (~mauz@2a01:e0a:994:7ed0:d42e:54ce:ab14:af5e)
[23:34:18] <programmerq> Manouchehri: you would indeed need to pass in /dev as a bind mount if you want new devices to appear in the container. Yes it, is a bit spoopy, but no less so than running this sort of thing uncontainerized, so just keep that in mind. Sometimes containerizing something is more about repeatability and user experience than it is about truly isolating something from the host. If that is compatible
[23:34:21] <programmerq> with your usecase, then awesome.
[23:34:59] <programmerq> otherwise you would indeed need to do the partition create with --dev=/dev/loop0 and then another container instance for interacting with the newly created /dev/loop0p1
[23:39:23] *** Quits: lenarhoyt (~lenarhoyt@p2e5cf9dd.dip0.t-ipconnect.de) (Quit: Client closed)
[23:41:15] *** Joins: humanBird (~humanBird@2603-8001-7000-3642-9533-c9bc-6bff-610c.res6.spectrum.com)
[23:41:37] <humanBird> not sure what docker run -d -p 5000:5000 --restart=always --name registry registry:2 is doing.  specifically the --name registry registry:2 part
[23:42:09] <humanBird> also, how do you push to a local registry. i'm not ready to pick a cloud registry like docker hub or digital ocean registry or whatever it is.
[23:43:14] <ikke> --name registry specifies the name of the container
[23:43:24] <ikke> registry:2 is the image to use
[23:44:48] *** Quits: recyclehero (~alistar@ec2-3-127-140-208.eu-central-1.compute.amazonaws.com) (Ping timeout: 272 seconds)
[23:45:26] *** Joins: pvdp40 (~Pieter@static-n58-105-183-94.rdl4.qld.optusnet.com.au)
[23:47:31] <Manouchehri> programmerq: thanks, yeah, I decided I'm overthinking the containerized part here, it's not needed :) 
[23:47:51] *** Quits: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[23:48:45] <humanBird> so i have to have the image/container name/ids from already built images/running containers?
[23:49:40] *** Quits: Forsaken87 (~quassel@ip-037-201-193-116.um10.pools.vodafone-ip.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[23:49:48] <humanBird> or is the name of the container something i specify in order to start a container with that name?
[23:53:05] <minimal> Manouchehri: in the past I used docker in a similar fashion but then moved to chroot instead when I started doing partitioning on loop devices, encryption etc, it was much easier with chroot
[23:54:24] <Manouchehri> ah fiddle sticks, partprobe won't work >_<
[23:54:26] <Manouchehri> https://github.com/moby/moby/issues/16160
[23:55:03] <minimal> Manouchehri: are you building Alpine VMs?
[23:55:41] <Manouchehri> minimal: building a hardened Linux VM with an automated pipeline
[23:55:44] <Manouchehri> not Alpine :) 
[23:56:06] *** Joins: Forsaken87 (~quassel@ip-037-201-193-116.um10.pools.vodafone-ip.de)
[23:56:21] <humanBird> heh. looks like i pulled an image called registry:2 that i don't want
[23:56:23] <minimal> ah ok, my (chroot-based) script is for Alpine VM/Cloud/physical disk images
[23:56:34] <Manouchehri> minimal: is it public?
[23:56:46] <Manouchehri> I'm actually using chroot inside docker lol
[23:56:58] <minimal> Manouchehri: https://github.com/dermotbradley/create-alpine-disk-image
[23:57:19] <minimal> it uses binfmt/qemu-user when create images for other archs
[23:57:45] <Manouchehri> oh nice, I'm also using cloud-init
[23:57:55] <Manouchehri> well, EC2 is.
[23:58:21] <minimal> there is a "degree" of hardening in the script (if you use the "--harden" option), its a work-in-progress
[23:59:28] *** Joins: trevors (~trevors@user/trevors)
[23:59:38] <Manouchehri> minimal: sadly I have to work with an incredibly stupid kernel module :P 
[23:59:57] <programmerq> humanBird: if you want to run your own registry locally, then registry:2 is probably the image you want.
