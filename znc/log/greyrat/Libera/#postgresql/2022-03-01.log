[00:06:33] *** Quits: csd (~csd@c-73-22-175-211.hsd1.il.comcast.net) (Quit: Client closed)
[00:08:04] *** Joins: maciek__ (~maciek@99-145-198-91.lightspeed.sntcca.sbcglobal.net)
[00:09:16] *** Quits: Emet-Selch (~haise01@user/haise01) (Ping timeout: 250 seconds)
[00:09:25] *** Joins: ur5us (~ur5us@203.86.198.200)
[00:09:38] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[00:10:12] *** Quits: maciek_ (~maciek@2600:1700:a412:1c00:bb59:79e7:ba69:d8e7) (Ping timeout: 240 seconds)
[00:10:34] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[00:15:52] *** Joins: zeden (~zeden@user/zeden)
[00:17:00] *** Quits: Klinda (~superleag@user/klinda) (Quit: Konversation terminated!)
[00:20:32] *** Quits: zer0bitz_ (~zer0bitz@dsl-hkibng32-54fb4d-184.dhcp.inet.fi) (Ping timeout: 250 seconds)
[00:22:55] *** Quits: magla (~gelignite@d5362da6.access.ecotel.net) (Quit: Stay safe!)
[00:23:45] *** Quits: withdon (~withdon@93-103-184-194.dynamic.t-2.net) (Quit: Client closed)
[00:27:10] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 260 seconds)
[00:32:42] *** Joins: jazzy (~jaziz@user/jaziz)
[00:34:19] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[00:35:40] *** Quits: econdudeawesome (~shadowfax@cpe-76-187-70-50.tx.res.rr.com) (Quit: leaving)
[00:36:15] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[00:39:07] <glik22_> are sequence values copied over with physical replication?
[00:40:07] <peerce> yes, the sequence is implemented like a table with a single tuple
[00:41:40] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Remote host closed the connection)
[00:42:00] *** Joins: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[00:45:46] *** Quits: mizi (~mizi@user/mizi) (Ping timeout: 272 seconds)
[00:51:23] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[00:51:53] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 252 seconds)
[00:52:13] *** Joins: emad (~emad@102.45.236.212)
[00:55:06] *** Quits: emad (~emad@102.45.236.212) (Client Quit)
[00:59:44] *** Joins: phylaz (~phylaz@82.51-174-55.customer.lyse.net)
[01:01:27] *** Quits: Phil (~phil@186-79-11-47.baf.movistar.cl) (Quit: Leaving)
[01:02:21] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Remote host closed the connection)
[01:02:54] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[01:06:44] *** Quits: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net) (Ping timeout: 252 seconds)
[01:06:48] *** Joins: hoppity (~hoppity@66.222.130.38)
[01:06:48] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[01:06:48] *** Joins: hoppity (~hoppity@user/hoppity)
[01:07:13] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Ping timeout: 256 seconds)
[01:11:12] *** Joins: merzo (~Thunderbi@88.155.39.13)
[01:12:43] <concrete-houses> is there a way to query for all the columns added in the last say year?
[01:12:58] <Berge> concrete-houses: no
[01:15:08] <peerce> sure, keep your schema definition in a UML or similar system and tag each column with the creation date as an extra attibute, then query that UML system
[01:16:57] <concrete-houses> client at work has replica
[01:17:03] <concrete-houses> no one maintained updates
[01:17:04] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[01:17:18] <concrete-houses> now they want audit and replica job model updated
[01:17:27] <concrete-houses> guy who built it is gone
[01:17:28] <concrete-houses> :)
[01:17:40] <concrete-houses> ok let me ask more mundane
[01:18:00] <concrete-houses> How do I query to list each table and its columns but remove 4 I know we don't send in the repica
[01:18:54] <concrete-houses> select * from myschema.* or something
[01:19:39] <concrete-houses> The developer wants to me look at the model files of asp.net  which represent each table and pick out columns the replication jbo model does not have that exist in prod
[01:19:45] <concrete-houses> I feel like a dumb mule
[01:20:16] <concrete-houses> but no one has owned it and guy whos let who did thsi claims he nevr owned it and now he is runnign  a team and wants nothing to do with this replica thing
[01:20:19] <concrete-houses> lol
[01:20:40] <peerce> pg_catalog.pg_class has all tables and um, (gotta look) has all columns
[01:21:36] <zilti[m]> Hi, I have a small issue with a procedure I wrote... I am sure it is something small. I added an argument to the definition, and now I get `ERROR: column "s_company" does not exist" when trying to use it. What did I miss? https://pastebin.com/qZfrtXzc
[01:22:07] <peerce> pg_catalog.pg_attribute has the columns ('attributes' in the relational model0
[01:22:07] <concrete-houses> nice
[01:23:48] *** Quits: acovrig (~acovrig@host-173-247-7-127.JENOLT2.epbfi.com) (Ping timeout: 252 seconds)
[01:25:09] <peerce> zilti[m]; maybe I'm blind, but I don't see any reference to s_company
[01:25:37] <zilti[m]> peerce: it's on line 65, in the FROM clause
[01:26:11] <peerce> and search.match_candidate_vacancy() expects an integer ?
[01:26:42] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[01:27:11] <zilti[m]> Yes, the signature is `search.match_candidate_vacancy(company_id INTEGER DEFAULT NULL, s_global BOOLEAN DEFAULT TRUE)`
[01:30:52] *** Quits: ekathva (~ekathva@n2gvphuai7dnh8dcm-1.v6.elisa-mobile.fi) (Remote host closed the connection)
[01:32:36] *** Parts: CygniX_ (~CygniX@2a01:8740:1:727:4e:80:7f:2d) (Konversation terminated!)
[01:37:32] <peerce> not sure why it doesn't like this...  this is bog stock postgres, or is it some vendor custmized version like RDS or Aurora ?
[01:37:39] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[01:38:42] <zilti[m]> No, standard postgres indeed. I do have timescaledb installed on it though, but I don't think that has any influence
[01:38:58] *** Joins: tdcly^ (~tdcly@12.163.216.98)
[01:39:09] <zilti[m]> I am very surprised too. Couldn't even find anything on the web either
[01:39:46] <peerce> what version postgres ?
[01:40:09] <zilti[m]> I assumed it's probably something really small I missed, that someone else would spot at first glance or something, heh. Postgres 14
[01:40:29] <peerce> hmmm, maybe its that a view can not reference a local variable of plpgsql
[01:41:59] *** Quits: jancoow (~jancoow@user/jancoow) (Ping timeout: 250 seconds)
[01:42:03] <zilti[m]> Hm, I guess that could be possible. Do you know how to pass a value in anyway? Otherwise I guess that at least gives me more clues for searching further
[01:42:07] *** Joins: kakashiA1 (~kakashi@105.154.182.62)
[01:42:32] <peerce> yes, TEMPORARY VIEW exists in the SESSION, not private to the plpgsql function
[01:43:05] <peerce> you only invoke that view once, don't use a view, just inline the query where you reference the view, yes I know huge ugly query
[01:43:47] <zilti[m]> I'll try that, thanks a lot! :)
[01:43:49] <peerce> note your temp table wiol also exist through the session.
[01:44:09] <peerce> so a second invocation of this function in the section will error on CREATE TEMPORARY TABLE, I think.
[01:44:24] <peerce> s/section/session/
[01:44:35] *** Joins: CygniX (~CygniX@2a01:8740:1:727:4e:80:7f:2d)
[01:44:35] <dob1> can I know when a database was created?
[01:44:40] <zilti[m]> It will indeed, yes, but in my case that's luckily not an issue :)
[01:44:41] *** Quits: jtomas (~jtomas@210.red-88-24-179.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[01:45:00] <peerce> dob1; you can, if you log DDL
[01:45:17] *** Quits: manti7 (~manti7@176.10.104.94) (Quit: WeeChat 3.3)
[01:45:18] *** Quits: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca) (Quit: WeeChat 3.4)
[01:45:19] <peerce> and you parse those logs
[01:45:22] <dob1> peerce, ah ok, no metadata for it
[01:45:47] *** Joins: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au)
[01:46:04] <peerce> pg has a minimalist approach, it doesn't collect or store metadata it doesn't need.
[01:46:13] <dob1> just asking, no problem!
[01:46:21] <zilti[m]> peerce: Ahh I think I know again now why I created that temp view in the first place. `SELECT ... INTO tmpmatches_local` fails with `ERROR: "tmpmatches_local" is not a known variable`
[01:46:37] *** Joins: perrierjouet (~perrier-j@modemcable012.251-130-66.mc.videotron.ca)
[01:47:32] <zilti[m]> Moving it the other way around works though
[01:47:39] <peerce> btw, you have COMMIT without START TRANSACTION
[01:48:52] <peerce> i don't think you need that view at all, in fact, not sure you need that tmpmatches_local table, either.    INSERT INTO public.candidate_match_local SELECT (big ugly query here)
[01:49:26] *** Joins: EvanCarroll (~ecarroll@c-76-30-110-244.hsd1.tx.comcast.net)
[01:51:04] *** Joins: k8yun (~k8yun@user/k8yun)
[01:54:29] <zilti[m]> Wouldn't that leave the table empty for the duration of the SELECT call?
[01:54:47] <peerce> https://dpaste.org/dPJO
[01:55:45] <peerce> hmm?    its not any different than using your view to populate a temporary table, then copying it to the 'real' table.
[01:56:50] <zilti[m]> Well copying from a temporary table is a matter of seconds, while the select to fill the temporary table takes about half an hour in my case
[01:57:13] <peerce> so?        the table 'appears' when the transaction is committed.
[01:59:44] *** Joins: hoppity_ (~hoppity@mobile-166-172-56-167.mycingular.net)
[02:01:57] <concrete-houses> select attname from pg_catalog.pg_attribute where pg_attribute.attrelid in (select  oid from pg_catalog.pg_class where pg_class.relkind = 'r');
[02:02:30] <concrete-houses> check this out, but how do I get it to spit out the table name before each column list?
[02:02:33] <concrete-houses> hmmm
[02:03:19] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 256 seconds)
[02:04:36] <concrete-houses> psql script maybe.
[02:05:37] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[02:06:25] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[02:08:54] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 260 seconds)
[02:10:19] *** Quits: hoppity_ (~hoppity@mobile-166-172-56-167.mycingular.net) (Remote host closed the connection)
[02:10:50] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[02:10:55] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[02:10:55] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[02:10:55] *** Joins: hoppity (~hoppity@user/hoppity)
[02:14:18] *** Quits: merzo (~Thunderbi@88.155.39.13) (Read error: Connection reset by peer)
[02:14:26] *** Quits: uncleyear (~ian@pppoe.178-66-156-85.dynamic.avangarddsl.ru) (Ping timeout: 272 seconds)
[02:14:40] *** Quits: michalz (~michalz@185.246.204.90) (Remote host closed the connection)
[02:14:57] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 240 seconds)
[02:16:00] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[02:17:36] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[02:19:19] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[02:19:19] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[02:19:19] *** Joins: hoppity (~hoppity@user/hoppity)
[02:19:46] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[02:21:13] *** Quits: k8yun (~k8yun@user/k8yun) (Quit: Leaving)
[02:22:35] *** Quits: zlinux_ (~zlinux@142.247.15.169) (Ping timeout: 256 seconds)
[02:23:17] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[02:28:52] *** Joins: hoppity_ (~hoppity@66.222.130.38)
[02:28:52] *** Quits: hoppity (~hoppity@user/hoppity) (Read error: Connection reset by peer)
[02:29:05] *** Quits: ivii (~ivan@user/ivii) (Read error: Connection reset by peer)
[02:34:10] *** Quits: hoppity_ (~hoppity@66.222.130.38) (Remote host closed the connection)
[02:34:33] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[02:34:46] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[02:34:56] *** Joins: hoppity (~hoppity@66.222.130.38)
[02:34:56] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[02:34:56] *** Joins: hoppity (~hoppity@user/hoppity)
[02:38:36] *** Quits: kitsunenokenja (~kitsunech@68.91.220.96) (Ping timeout: 240 seconds)
[02:40:12] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 240 seconds)
[02:40:15] *** Joins: TheRuralJuror (~quassel@178.115.237.87.static.drei.at)
[02:40:38] *** Quits: bluejaypop (~7f000001@user/josefig) (Ping timeout: 268 seconds)
[02:41:49] *** Joins: cation21 (cation@user/cation)
[02:42:51] *** Quits: cation (cation@user/cation) (Ping timeout: 245 seconds)
[02:43:30] *** Joins: bluejaypop (~7f000001@user/josefig)
[02:45:14] *** cation21 is now known as cation
[02:46:01] *** Joins: virmire1 (~Virmire@p200300cfc7264301560b5512c6bf7e3e.dip0.t-ipconnect.de)
[02:46:44] *** Quits: virmire1 (~Virmire@p200300cfc7264301560b5512c6bf7e3e.dip0.t-ipconnect.de) (Client Quit)
[02:49:01] *** Quits: Disconsented (~quassel@irc.disconsented.com) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[02:49:15] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Ping timeout: 240 seconds)
[02:49:38] *** Joins: Disconsented (~quassel@irc.disconsented.com)
[02:52:18] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 260 seconds)
[02:52:38] *** Quits: palasso (~palasso@user/palasso) (Read error: Connection reset by peer)
[02:52:51] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[02:53:14] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[02:55:41] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[02:56:10] *** Quits: Disconsented (~quassel@irc.disconsented.com) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[02:56:13] *** Quits: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[02:56:23] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[02:56:32] *** Joins: hoppity_ (~hoppity@mobile-166-172-56-167.mycingular.net)
[02:57:30] *** Quits: shka (~herr@109.231.3.55) (Ping timeout: 272 seconds)
[02:58:02] *** Joins: Disconsented (~quassel@2604:a880:1:4a::3:c000)
[02:58:12] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[02:59:26] *** Quits: pedja (~pedja@user/deus-ex/x-7934090) (Quit: Leaving)
[02:59:40] *** Joins: jancoow (~jancoow@user/jancoow)
[03:00:02] *** Quits: esainane (esainane@antihype.space) (Ping timeout: 240 seconds)
[03:00:11] *** Joins: esainane (esainane@antihype.space)
[03:00:40] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 272 seconds)
[03:01:18] *** Quits: concrete-houses (~g@209.6.150.53) (Ping timeout: 272 seconds)
[03:02:26] *** Joins: concrete-houses (~g@209.6.150.53)
[03:05:22] *** Quits: ur5us (~ur5us@203.86.198.200) (Ping timeout: 260 seconds)
[03:12:06] <concrete-houses> ok I can find the columns  but how do I group them by table?
[03:14:00] *** Quits: hoppity_ (~hoppity@mobile-166-172-56-167.mycingular.net) ()
[03:16:52] *** Joins: Guest59 (~Guest59@ool-18bccd13.dyn.optonline.net)
[03:18:28] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[03:18:48] <Guest59> anyone worked with hold cursor turned on in XA/two phase commit  transaction ?
[03:22:12] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Ping timeout: 240 seconds)
[03:27:51] *** Joins: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net)
[03:30:03] *** Quits: zopsi (~zopsi@104-237-136-227.ip.linodeusercontent.com) (Quit: Oops)
[03:30:23] <concrete-houses> https://www.postgresqltutorial.com/postgresql-group-by/ group by seems to be what I need
[03:31:12] *** Joins: zopsi (~zopsi@104-237-136-227.ip.linodeusercontent.com)
[03:35:48] *** Quits: tehenderz (~tehenderz@ti0018a400-9397.bb.online.no) (Ping timeout: 240 seconds)
[03:35:53] *** Joins: rj1 (~rj1@i.dont.know.how.com.puters.work)
[03:36:30] *** Joins: tehenderz (~tehenderz@ti0018a400-9529.bb.online.no)
[03:37:25] *** Quits: ccx (~ccx@82.142.125.46) (Ping timeout: 272 seconds)
[03:38:58] *** Quits: TheRuralJuror (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 260 seconds)
[03:43:38] *** Joins: funhouse (~funhouse@user/funhouse)
[03:50:03] *** Quits: justAstache (~justache@user/justache) (Read error: Connection reset by peer)
[03:51:12] *** Joins: justAstache (~justache@user/justache)
[03:51:34] *** Quits: kakashiA1 (~kakashi@105.154.182.62) (Ping timeout: 250 seconds)
[03:55:47] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[03:56:08] *** Joins: Guest8369 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp)
[03:58:37] *** Quits: Kohe (~Kohe@46.12.214.37.dsl.dyn.forthnet.gr) (Ping timeout: 256 seconds)
[04:00:35] *** Joins: xiongxin (~Thunderbi@2409:8955:3088:422e:dbd0:5f53:ba3b:be2f)
[04:01:09] *** Joins: pvn1 (~Adium@85-195-230-63.fiber7.init7.net)
[04:01:58] *** Quits: pvn2 (~Adium@147.87.131.169) (Ping timeout: 250 seconds)
[04:02:20] *** Joins: ccx (~ccx@82.142.125.46)
[04:04:30] *** Quits: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net) (Remote host closed the connection)
[04:08:15] *** Quits: jancoow (~jancoow@user/jancoow) (Ping timeout: 256 seconds)
[04:09:01] *** Quits: htd (~htd@095129203062.t4.akis.net) (Read error: Connection reset by peer)
[04:10:53] *** Joins: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net)
[04:11:21] <StuckMojo> concrete-houses: use a join
[04:12:14] <StuckMojo> concrete-houses: or: select attrelid::regclass, attname from ....
[04:14:32] *** Joins: htd (~htd@095129203062.t4.akis.net)
[04:17:56] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[04:19:49] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Ping timeout: 240 seconds)
[04:22:52] *** Quits: mthall (~quassel@mail.thalliman.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[04:23:13] *** Joins: mthall (~quassel@mail.thalliman.com)
[04:25:50] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8)
[04:29:10] *** Joins: zachxz (~zachary@124.133.18.218)
[04:30:17] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[04:30:36] *** Quits: Guest8369 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 272 seconds)
[04:33:45] <concrete-houses> what does attrelid::regclass do?
[04:33:58] <concrete-houses> select attrelid, attname, atttypid from pg_catalog.pg_attribute  where pg_attribute.attrelid in (select  oid from pg_catalog.pg_class where pg_class.relkind = 'r') group by attrelid, attname, atttypid order by attrelid;
[04:34:11] <concrete-houses> I did this but those tables have all numbers I want to read words
[04:34:15] <StuckMojo> ??regclass
[04:34:16] <pg_docbot> https://www.postgresql.org/docs/current/static/datatype-oid.html
[04:34:31] <StuckMojo> concrete-houses: do what i told you: attrelid::regclass
[04:34:36] <concrete-houses> I am still getting used to joins
[04:34:39] <concrete-houses> i am so clumsy
[04:34:58] <StuckMojo> regclass looks up the oid in pg_class and returns the relname for that oid
[04:36:33] <concrete-houses> select attrelid::regclass as tablename, attname as column, atttypid as column_type from pg_catalog.pg_attribute  where pg_attribute.attrelid in (select  oid from pg_catalog.pg_class where pg_class.relkind = 'r') group by attrelid, attname, atttypid order by attrelid;
[04:36:39] <concrete-houses> oh thats much better
[04:37:08] <StuckMojo> if you want to order by the name: order by attrelid::regclass
[04:37:41] <StuckMojo> order by attrelid would kind of order by the order you created the tables in, kind of
[04:38:11] <concrete-houses> select attrelid::regclass as tablename, attname as column, atttypid as column_type from pg_catalog.pg_attribute  where pg_attribute.attrelid in (select  oid from pg_catalog.pg_class where pg_class.relkind = 'r') group by attrelid, attname, atttypid order by attrelid::regclass;
[04:38:46] <concrete-houses> the atttypid is still a number can I do teh same thing?
[04:38:59] <concrete-houses> I think it didn't work for atttypid
[04:39:01] <StuckMojo> no
[04:39:24] <StuckMojo> attypid is not a reference to pg_class
[04:39:29] <StuckMojo> ??catalog
[04:39:30] <pg_docbot> http://wiki.postgresql.org/wiki/Posters :: https://www.postgresql.org/docs/current/static/information-schema.html
[04:39:30] <pg_docbot> https://www.postgresql.org/docs/current/static/catalogs.html
[04:39:58] <StuckMojo> you probably want to be using information_schema, it's a lot easier to use and is designed to be used by humans
[04:40:05] <StuckMojo> the postgres catalog is not
[04:40:16] <concrete-houses> ah ha!!
[04:40:50] <StuckMojo> info schema is also portable to other RDBMSs that implement it, it's part of the sql standard i think maybe
[04:42:12] <concrete-houses> I want to find the tables, and columns in each
[04:42:19] <concrete-houses> you'd think this has been done before.
[04:42:33] <concrete-houses> ok maybe I was making my life hard as usual
[04:42:49] <concrete-houses> thank you for the kind tip
[04:43:14] <StuckMojo> you can see the query that psql uses if you do: psql -E  then \d tablename
[04:43:22] *** Quits: Auron (Auron956@user/auron) ()
[04:43:41] <StuckMojo> info schema is easier and will be portable across postgres versions too
[04:46:08] <concrete-houses> ok I see tables
[04:49:00] *** Quits: tehenderz (~tehenderz@ti0018a400-9529.bb.online.no) (Ping timeout: 240 seconds)
[04:49:40] *** Joins: tehenderz (~tehenderz@ti0018a400-9566.bb.online.no)
[04:52:12] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[04:52:23] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[04:54:06] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[04:55:17] <concrete-houses> select * from information_schema."tables" where table_type = 'BASE TABLE';
[04:55:23] <concrete-houses> thsi works
[04:56:10] <StuckMojo> there's one for columns too
[04:56:12] *** Quits: xiongxin (~Thunderbi@2409:8955:3088:422e:dbd0:5f53:ba3b:be2f) (Ping timeout: 240 seconds)
[04:56:23] *** Quits: Led_Zeppelin2 (~user@cpe-68-172-241-89.nj.res.rr.com) (Remote host closed the connection)
[04:56:36] *** Quits: furrymcgee (~devuan@cgn-89-1-209-226.nc.de) (Ping timeout: 240 seconds)
[04:56:54] <concrete-houses> ok so I want to join and group by to get each table and its columns?
[04:57:41] <concrete-houses> oh wait maybe just query columns
[04:59:32] <StuckMojo> yeah the table name is probably in the columns table in info schema
[04:59:36] <StuckMojo> like i said, it's much easier
[04:59:44] * StuckMojo wanders off
[05:00:41] <concrete-houses> thanks again!!!
[05:01:16] <concrete-houses> I jsut have to figure out  how to pick only base tables   with the grop by stuff
[05:02:47] *** Joins: Emet-Selch (~haise01@user/haise01)
[05:05:33] <concrete-houses> select table_name, column_name from information_schema."columns" group by table_name, column_name order by table_name;
[05:05:59] *** Joins: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net)
[05:14:36] *** Quits: tdcly^ (~tdcly@12.163.216.98) (Remote host closed the connection)
[05:17:24] *** Quits: MrZeus_ (~MrZeus@185.248.85.10) (Ping timeout: 240 seconds)
[05:17:35] <StuckMojo> you don't need the group by
[05:17:47] <concrete-houses> oh?
[05:17:57] <StuckMojo> just order by table_name, column_name
[05:18:41] <concrete-houses> select table_name, column_name from information_schema."columns"  order by table_name, column_name;
[05:19:25] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[05:19:37] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8) (Ping timeout: 240 seconds)
[05:20:38] <concrete-houses> ok but I want only real tables not views n stuff....
[05:20:44] <concrete-houses> (or do I?)
[05:21:00] <concrete-houses> I feel so dumb.... I must not be thinking about postgresql the right way...
[05:21:00] <StuckMojo> then do a where
[05:21:12] <StuckMojo> group by is for aggregates
[05:21:25] *** Joins: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[05:21:52] <concrete-houses> https://www.postgresql.org/docs/current/infoschema-columns.html columns doesn't seem to have a table type
[05:21:56] <concrete-houses> column
[05:22:18] <StuckMojo> group by wouldn't do it either
[05:22:24] <StuckMojo> you need to join to tables
[05:24:12] <concrete-houses> ok
[05:25:17] *** Quits: mthall (~quassel@mail.thalliman.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[05:26:08] *** Joins: mthall (~quassel@mail.thalliman.com)
[05:26:19] <StuckMojo> select c.table_schema, c.table_name, c.column_name from information_schema.columns c join information_schema.tables t on t.table_name = c.table_name where c.table_schema not in ('information_schema', 'pg_catalog') order by table_schema, table_name;
[05:27:18] <StuckMojo> and you'll want to add a WHERE for table type = base table or whatever
[05:27:50] <StuckMojo> where t.table_type = 'BASE TABLE'
[05:28:29] *** Joins: xiongxin (~Thunderbi@117.136.33.235)
[05:28:35] <StuckMojo> select c.table_schema, c.table_name, c.column_name from information_schema.columns c join information_schema.tables t on t.table_name = c.table_name where c.table_schema not in ('information_schema', 'pg_catalog') and t.table_type = 'BASE TABLE' order by table_schema, table_name, column_name;
[05:30:02] <concrete-houses> How did you know to do that?
[05:30:17] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[05:30:36] *** Joins: bindu (~bindu@user/bindu)
[05:31:45] *** Joins: dsrt^ (~dsrt@12.163.216.98)
[05:33:14] <concrete-houses> lol 0 rows becaus emy jsu tisntaleld 14.2
[05:33:22] <concrete-houses> removed the pg_catalog and lots shows
[05:33:35] <StuckMojo> it's just a simple join
[05:33:37] <StuckMojo> ??join
[05:33:37] <pg_docbot> http://www.w3schools.com/sql/sql_join.asp :: http://www.varlena.com/GeneralBits/56.php
[05:33:38] <pg_docbot> http://use-the-index-luke.com/sql/join :: https://www.postgresql.org/docs/current/static/queries-table-expressions.html
[05:33:38] <pg_docbot> https://www.postgresql.org/docs/current/static/tutorial-join.html
[05:33:49] <StuckMojo> last link will show you how to use them
[05:34:14] *** Quits: bigGopher (~dan@207.98.176.66) (Quit: bigGopher)
[05:36:37] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[05:39:07] <concrete-houses> thank you
[05:40:12] <concrete-houses> hmmm
[05:40:16] <concrete-houses> I notice one thing...
[05:43:05] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[05:44:41] <concrete-houses> schema table column ah its column type thats missing....
[05:44:44] <concrete-houses>  select c.table_schema, c.table_name, c.column_name, c.data_type from information_schema.columns c join information_schema.tables t on t.table_name = c.table_name where c.table_schema not in
[05:44:48] <concrete-houses>                    ('information_schema') and t.table_type = 'BASE TABLE' order by table_schema, table_name, column_name, data_type;
[05:45:10] <concrete-houses>                    ('information_schema', 'pg_catalog') and t.table_type = 'BASE TABLE' order by table_schema, table_name, column_name, data_type;
[05:45:25] <concrete-houses>  select c.table_schema, c.table_name, c.column_name, c.data_type from information_schema.columns c join information_schema.tables t on t.table_name = c.table_name where c.table_schema not in
[05:45:32] <concrete-houses>                    ('information_schema', 'pg_catalog') and t.table_type = 'BASE TABLE' order by table_schema, table_name, column_name, data_type;
[05:46:19] <concrete-houses> select c.table_schema, c.table_name, c.column_name, c.data_type from information_schema.columns c join information_schema.tables t on t.table_name = c.table_name where c.table_schema not in ('information_schema', 'pg_catalog') and t.table_type = 'BASE TABLE' order by table_schema, table_name, column_name, data_type;
[05:47:29] <concrete-houses> mind boggles at which kind of join to use
[05:47:31] <concrete-houses> so many
[05:47:33] <concrete-houses> lol
[05:48:37] *** Joins: mihael (~mihael@115.146.176.131)
[05:53:49] *** Quits: f3f3lix (~weechat@55d4a7dd.access.ecotel.net) (Ping timeout: 240 seconds)
[05:55:52] *** Joins: f3f3lix (~weechat@55d40c9e.access.ecotel.net)
[05:57:43] *** Joins: zeden (~zeden@user/zeden)
[05:57:50] *** Quits: zeden (~zeden@user/zeden) (Client Quit)
[05:58:32] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[05:59:09] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[05:59:27] <concrete-houses> thank you again I feel things clearing up for me alittle
[06:01:03] <StuckMojo> concrete-houses: use a paste site please
[06:01:15] <StuckMojo> concrete-houses: also "join" by itself == inner join
[06:01:23] <StuckMojo> which is what you usually want
[06:02:27] <StuckMojo> you don't need to add data_type to the order by. you won't have two columns in the same table with the same name but different data types. column_name is unique within a table
[06:03:01] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[06:06:38] *** Quits: mihael (~mihael@115.146.176.131) (Quit: Client closed)
[06:10:29] *** Quits: justAstache (~justache@user/justache) (Remote host closed the connection)
[06:11:37] *** Joins: justAstache (~justache@user/justache)
[06:16:04] *** Quits: jhammerman (~joe.hamme@98.246.188.6) (Quit: jhammerman)
[06:20:48] *** Joins: xiongxin1 (~Thunderbi@2409:8955:2e88:3278:b0c8:95dd:82b2:fcd6)
[06:20:51] *** Quits: xiongxin (~Thunderbi@117.136.33.235) (Ping timeout: 256 seconds)
[06:20:52] *** xiongxin1 is now known as xiongxin
[06:28:37] *** Quits: martti (~martti@46-126-48-136.dynamic.hispeed.ch) (Ping timeout: 240 seconds)
[06:29:05] *** Quits: Su-Shee (~Susanne@p50894046.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[06:29:20] *** Quits: krismatrix (~krismatri@c-73-212-30-17.hsd1.md.comcast.net) (Quit: Leaving)
[06:30:08] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[06:30:49] *** Joins: Su-Shee (~Susanne@p4ffc7919.dip0.t-ipconnect.de)
[06:33:02] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[06:33:30] *** Quits: bmomjian1 (~bruce@momjian.us) (Ping timeout: 260 seconds)
[06:37:37] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[06:38:55] *** Joins: bmomjian (~bruce@momjian.us)
[06:43:59] *** Joins: Vitto (~Vitto@2a01:e0a:26e:28c0:4f09:b3a5:389d:7c8a)
[06:44:45] *** Quits: Vitto (~Vitto@2a01:e0a:26e:28c0:4f09:b3a5:389d:7c8a) (Client Quit)
[06:45:47] *** Quits: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net) (Quit: Client closed)
[06:48:35] *** Joins: Vitto (~Vitto@2a01:e0a:26e:28c0:4f09:b3a5:389d:7c8a)
[06:51:00] *** Quits: Vacuity (~Vacuity@user/vovo) (Ping timeout: 240 seconds)
[06:52:15] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[06:52:16] *** Joins: jancoow (~jancoow@user/jancoow)
[06:52:52] *** Joins: Vacuity (~Vacuity@user/vovo)
[06:53:09] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[06:55:35] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[06:56:01] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[06:57:22] *** Quits: fraxamo (~fraxamo@bexl-11-b2-v4wan-163006-cust259.vm4.cable.virginm.net) (Read error: Connection reset by peer)
[06:57:39] *** Joins: fraxamo (~fraxamo@bexl-11-b2-v4wan-163006-cust259.vm4.cable.virginm.net)
[06:57:49] *** Joins: ur5us (~ur5us@203.86.198.200)
[06:59:57] *** Quits: xiongxin (~Thunderbi@2409:8955:2e88:3278:b0c8:95dd:82b2:fcd6) (Ping timeout: 240 seconds)
[07:01:35] *** Quits: Vitto (~Vitto@2a01:e0a:26e:28c0:4f09:b3a5:389d:7c8a) (Quit: Leaving.)
[07:07:37] *** Joins: Azem (~haise01@user/haise01)
[07:10:43] *** Quits: Emet-Selch (~haise01@user/haise01) (Ping timeout: 256 seconds)
[07:20:04] *** Joins: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net)
[07:20:11] *** Quits: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br) (Ping timeout: 250 seconds)
[07:22:37] *** Quits: n0fun (~jack@i577BC0DE.versanet.de) (Ping timeout: 240 seconds)
[07:22:54] *** Joins: n0fun (~jack@i577BC0A3.versanet.de)
[07:25:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[07:28:49] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[07:29:10] <concrete-houses> thanks again
[07:29:14] *** Parts: concrete-houses (~g@209.6.150.53) ()
[07:33:33] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Read error: Connection reset by peer)
[07:33:48] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[07:38:36] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:39:37] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:41:11] *** Joins: Guest104 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp)
[07:43:48] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[07:46:09] *** Quits: ur5us (~ur5us@203.86.198.200) (Ping timeout: 256 seconds)
[07:46:24] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[07:46:37] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Read error: Connection reset by peer)
[07:46:53] *** Joins: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[07:49:17] *** Quits: tehenderz (~tehenderz@ti0018a400-9566.bb.online.no) (Ping timeout: 240 seconds)
[07:49:49] *** Quits: sreve (~quassel@p549d7015.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[07:49:50] *** Joins: tehenderz (~tehenderz@ti0018a400-9673.bb.online.no)
[07:50:04] *** Joins: xiongxin (~Thunderbi@2409:8955:2e88:18e1:3184:f55a:7cbe:ae3b)
[07:50:09] *** Joins: sreve (~quassel@p549d706d.dip0.t-ipconnect.de)
[07:51:26] *** Quits: Starfoxxes (~Starfoxxe@2a02:8070:5390:d00:12bf:48ff:feb8:38c8) (Ping timeout: 260 seconds)
[07:52:00] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 272 seconds)
[07:56:36] *** Quits: xiongxin (~Thunderbi@2409:8955:2e88:18e1:3184:f55a:7cbe:ae3b) (Ping timeout: 240 seconds)
[07:57:15] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[07:58:58] *** Quits: Guest104 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 272 seconds)
[08:05:08] *** Joins: carragom (~textual@201.204.94.76)
[08:06:45] *** Joins: Guest5188 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp)
[08:10:29] *** Joins: Starfoxxes (~Starfoxxe@ip-037-201-006-167.um10.pools.vodafone-ip.de)
[08:13:01] *** Quits: maciek__ (~maciek@99-145-198-91.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 240 seconds)
[08:15:19] *** Quits: Guest5188 (~Thunderbi@p10605177-ipngn25001marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 256 seconds)
[08:20:50] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 260 seconds)
[08:21:33] *** Quits: sakasama (~sakasama@user/sakasama) (Ping timeout: 256 seconds)
[08:21:38] *** Joins: ekathva (~ekathva@2001:999:51:19b8:30eb:aab6:8fa5:4db8)
[08:21:46] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[08:24:00] *** Joins: lucifer (sid308373@id-308373.helmsley.irccloud.com)
[08:25:30] <lucifer> hi all! while debugging, i found `invalid page in block 807471 of relation base/16422/104743859` in logs. using https://pganalyze.com/docs/log-insights/server/S6, i was able to fix it. it turned out to be a corruption in the index and dropping it got things working again.
[08:25:32] <ksynwa> Those who use postgresql with docker-compose, do you have to increase the shm_size so that vacuuming works?
[08:25:34] *** Quits: jancoow (~jancoow@user/jancoow) (Ping timeout: 272 seconds)
[08:25:53] <lucifer>  however, i am unsure what caused the issue in the first place. any ideas?
[08:26:52] <peerce> lucifer; can be a bunch of things, mostly flakey hardware
[08:27:17] <peerce> unreliable disk buffering, soft bit error in non-ECC ram, etc etc.
[08:27:47] <lucifer> oh ok, yeah we were too thinking its either a postgres bug or hardware issue.
[08:28:10] <lucifer> thanks peerce!
[08:28:10] <peerce> there have been /very/ few postgres data corruption bugs in the past 20+ years
[08:28:31] <lucifer> yes, makes sense
[08:31:58] *** Quits: realies (~realies@user/realies) (Quit: ~)
[08:36:01] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[08:36:15] <peerce> buggy 3rd party extensions, including self developed ones in C, can do that
[08:37:21] <lucifer> i see, we aren't using any 3rd party extension so that shouldn't be an issue.
[08:37:34] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[08:38:01] *** Joins: fef (~thedawn@user/thedawn)
[08:38:33] *** Quits: n0fun (~jack@i577BC0A3.versanet.de) (Ping timeout: 256 seconds)
[08:39:32] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[08:40:05] <peerce> running with fsync off, and having a power fail or OS crash event can do that, too
[08:41:08] *** Joins: realies (~realies@user/realies)
[08:45:57] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[08:49:54] *** Quits: shiranaihito (~textual@123-192-192-149.dynamic.kbronet.com.tw) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[08:53:08] <Darius> even with fsync, drives lie :(
[08:54:48] <peerce> consumer ssd, for sure.  enterprise disks, especially SAS, usually not.
[08:55:12] <peerce> but you build a database server with crappy consumer hardware?  all bets are off.
[08:55:35] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Remote host closed the connection)
[08:56:05] *** Joins: dodobrain (~dodobrain@user/dodobrain)
[09:01:19] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[09:06:36] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[09:09:57] *** Quits: Azem (~haise01@user/haise01) (Ping timeout: 240 seconds)
[09:10:34] *** Joins: xiongxin (~Thunderbi@2409:8955:2e88:18de:2891:93d6:3a63:3ab4)
[09:11:33] *** Quits: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net) (Quit: Client closed)
[09:11:53] *** Joins: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net)
[09:11:59] *** Quits: led_belly (~led_belly@37.120.197.44) (Ping timeout: 256 seconds)
[09:13:42] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Remote host closed the connection)
[09:13:42] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Write error: Connection reset by peer)
[09:13:42] *** Quits: fef (~thedawn@user/thedawn) (Read error: Connection reset by peer)
[09:13:42] *** Quits: bindu (~bindu@user/bindu) (Read error: Connection reset by peer)
[09:13:42] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Read error: Connection reset by peer)
[09:16:33] *** Joins: bindu (~bindu@user/bindu)
[09:17:36] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[09:17:42] *** Quits: tozhu (~tozhu@218.89.234.137) (Quit: tozhu)
[09:18:26] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[09:18:34] *** Joins: led_belly (~led_belly@37.120.197.46)
[09:18:36] *** Joins: shiranaihito (~textual@111-249-199-219.dynamic-ip.hinet.net)
[09:18:41] *** Joins: pvn2 (~Adium@147.87.131.89)
[09:18:54] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[09:20:40] *** Quits: pvn1 (~Adium@85-195-230-63.fiber7.init7.net) (Ping timeout: 272 seconds)
[09:21:55] *** Quits: tehenderz (~tehenderz@ti0018a400-9673.bb.online.no) (Ping timeout: 256 seconds)
[09:22:01] *** Joins: tehenderz_ (~tehenderz@ti0018a400-9727.bb.online.no)
[09:23:12] *** Joins: fef (~thedawn@user/thedawn)
[09:26:41] *** Quits: EvanCarroll (~ecarroll@c-76-30-110-244.hsd1.tx.comcast.net) (Ping timeout: 252 seconds)
[09:29:28] *** Joins: maret (~maret@nat-88-212-37-89.antik.sk)
[09:33:49] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[09:35:41] *** Joins: berkhan (~berkhan@159.146.43.233)
[09:36:07] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[09:36:08] *** Joins: jazzy2 (~jaziz@user/jaziz)
[09:36:15] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Ping timeout: 240 seconds)
[09:37:57] *** Quits: xiongxin (~Thunderbi@2409:8955:2e88:18de:2891:93d6:3a63:3ab4) (Ping timeout: 240 seconds)
[09:39:40] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 272 seconds)
[09:41:01] *** Quits: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net) (Ping timeout: 250 seconds)
[09:42:33] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[09:44:06] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[09:45:02] *** Joins: kakashiA1 (~kakashi@41.251.116.49)
[09:47:59] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[09:50:37] *** Quits: bindu (~bindu@user/bindu) (Read error: Connection reset by peer)
[09:50:37] *** Quits: todd (~todd@gateway/tor-sasl/toddf) (Write error: Connection reset by peer)
[09:50:37] *** Quits: fef (~thedawn@user/thedawn) (Write error: Connection reset by peer)
[09:50:37] *** Quits: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp) (Read error: Connection reset by peer)
[09:50:51] *** Joins: bindu (~bindu@user/bindu)
[09:51:06] *** Joins: fef (~thedawn@user/thedawn)
[09:51:23] *** Joins: ncwbqcfe (~rvgzuuqp@gateway/tor-sasl/rvgzuuqp)
[09:51:29] *** Quits: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net) (Read error: Connection reset by peer)
[09:51:50] *** Quits: koo5_ (~quassel@51.140.155.227) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[09:51:52] *** Quits: bindu (~bindu@user/bindu) (Remote host closed the connection)
[09:52:02] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[09:52:18] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[09:52:36] *** Joins: bindu (~bindu@user/bindu)
[09:52:43] *** Joins: koo5_ (~quassel@51.140.155.227)
[09:52:43] *** Joins: Reiner_Unsinn_ (~quassel@p579d7a94.dip0.t-ipconnect.de)
[09:53:10] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[09:53:55] *** Quits: jazzy2 (~jaziz@user/jaziz) (Ping timeout: 256 seconds)
[09:54:57] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[09:56:05] *** Joins: todd (~todd@gateway/tor-sasl/toddf)
[09:56:37] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[09:56:50] *** Joins: Kohe (~Kohe@46.12.214.37.dsl.dyn.forthnet.gr)
[09:57:00] *** Quits: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd) (Ping timeout: 240 seconds)
[09:57:58] *** Joins: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz)
[10:02:02] *** Joins: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22)
[10:04:01] *** Joins: michalz (~michalz@185.246.204.93)
[10:05:34] *** Joins: ur5us_ (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8)
[10:06:19] *** Joins: manti7 (~manti7@176.10.104.94)
[10:07:48] *** Joins: zlinux_ (~zlinux@149.109.14.64)
[10:08:12] *** Quits: ur5us (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Ping timeout: 240 seconds)
[10:08:33] *** Joins: darutoko (~darutoko@92.125.59.255)
[10:08:39] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[10:08:48] *** Quits: kakashiA1 (~kakashi@41.251.116.49) (Ping timeout: 272 seconds)
[10:09:07] *** Shells is now known as Michelle
[10:10:21] *** Quits: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net) (Ping timeout: 256 seconds)
[10:11:59] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[10:11:59] *** Joins: jancoow (~jancoow@user/jancoow)
[10:12:01] *** Quits: jancoow (~jancoow@user/jancoow) (Client Quit)
[10:12:35] *** Joins: jazzy (~jaziz@user/jaziz)
[10:12:57] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[10:14:47] *** Joins: jancoow (~jancoow@user/jancoow)
[10:15:09] <tmunro> also operating systems.  they lie
[10:15:48] *** Quits: ur5us_ (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8) (Ping timeout: 240 seconds)
[10:16:01] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Remote host closed the connection)
[10:16:12] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[10:16:33] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[10:18:01] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[10:19:55] *** Quits: shiranaihito (~textual@111-249-199-219.dynamic-ip.hinet.net) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[10:20:51] *** Quits: randir (~randir@95-25-111-216.broadband.corbina.ru) (Ping timeout: 256 seconds)
[10:21:34] *** Quits: seabre (~seabre@user/seabre) (Ping timeout: 250 seconds)
[10:22:03] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[10:22:22] *** Joins: xiongxin (~Thunderbi@2409:8955:2e88:2df3:beab:ad08:2d6a:98c5)
[10:22:23] *** Joins: mrwick (~mrwick@user/mrwick)
[10:25:20] *** Joins: seabre (~seabre@user/seabre)
[10:27:32] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[10:28:52] *** Joins: uncleyear (~ian@pppoe.178-66-156-85.dynamic.avangarddsl.ru)
[10:29:20] *** Quits: berkhan (~berkhan@159.146.43.233) (Quit: Leaving for now. See you next time.)
[10:32:16] *** Quits: dodobrain (~dodobrain@user/dodobrain) (Ping timeout: 260 seconds)
[10:32:20] *** Joins: gleu (~guillaume@pop.92-184-121-224.mobile.abo.orange.fr)
[10:32:31] *** Joins: tozhu (~tozhu@117.174.101.210)
[10:32:56] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[10:35:23] *** Joins: shiranaihito (~textual@2001-b011-4011-30c0-292f-d5e1-0352-6bca.dynamic-ip6.hinet.net)
[10:36:01] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[10:45:20] *** Quits: fcr (~fran@r186-48-155-33.dialup.adsl.anteldata.net.uy) (Ping timeout: 252 seconds)
[10:50:16] *** Joins: fcr (~fran@r167-60-35-197.dialup.adsl.anteldata.net.uy)
[10:50:47] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[10:50:47] *** Joins: iliv (~iliv@user/iliv)
[10:50:54] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7c29:b905:2d90:6b21)
[10:53:09] *** Quits: tehenderz_ (~tehenderz@ti0018a400-9727.bb.online.no) (Ping timeout: 256 seconds)
[10:53:40] *** Joins: tehenderz (~tehenderz@ti0018a400-9792.bb.online.no)
[10:56:06] *** Joins: kakashiA1 (~kakashi@41.251.116.49)
[10:56:45] *** Joins: TzilTzal (~TzilTzal@158.140.134.198)
[10:57:18] *** Joins: randir (~randir@93.159.239.42)
[10:58:18] *** Joins: ur5us_ (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22)
[11:05:48] *** Quits: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net) (Ping timeout: 272 seconds)
[11:08:09] *** Quits: quazimodo (~quazimodo@n110-21-88-214.bla2.nsw.optusnet.com.au) (Ping timeout: 256 seconds)
[11:08:34] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[11:09:57] *** Joins: the_lanetly_052_ (~the_lanet@194.135.169.19)
[11:10:43] *** Quits: the_lanetly_052_ (~the_lanet@194.135.169.19) (Max SendQ exceeded)
[11:11:12] *** Joins: the_lanetly_052_ (~the_lanet@194.135.167.211)
[11:11:57] *** Quits: the_lanetly_052_ (~the_lanet@194.135.167.211) (Max SendQ exceeded)
[11:12:26] *** Joins: the_lanetly_052_ (~the_lanet@194.135.167.211)
[11:13:13] *** Quits: the_lanetly_052_ (~the_lanet@194.135.167.211) (Max SendQ exceeded)
[11:13:41] *** Joins: the_lanetly_052_ (~the_lanet@194.135.169.19)
[11:14:47] *** Quits: the_lanetly_052_ (~the_lanet@194.135.169.19) (Max SendQ exceeded)
[11:15:17] *** Joins: the_lanetly_052_ (~the_lanet@194.135.167.211)
[11:16:10] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[11:16:17] *** Quits: kakashiA1 (~kakashi@41.251.116.49) (Ping timeout: 240 seconds)
[11:19:19] *** Joins: mattil (~mattil@helsinki.portalify.com)
[11:19:48] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[11:20:22] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 272 seconds)
[11:23:26] *** Joins: jazzy2 (~jaziz@user/jaziz)
[11:26:42] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 272 seconds)
[11:26:47] *** jazzy2 is now known as jazzy
[11:27:24] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 240 seconds)
[11:27:53] *** Joins: cliluw (~cliluw@47.147.77.43)
[11:30:00] *** Joins: palasso (~palasso@user/palasso)
[11:34:38] *** Joins: mattil_ (~mattil@87-92-108-248.bb.dnainternet.fi)
[11:35:40] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[11:36:47] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[11:39:06] *** Quits: mattil_ (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 245 seconds)
[11:40:49] *** Joins: jtomas (~jtomas@210.red-88-24-179.staticip.rima-tde.net)
[11:44:09] *** Joins: rendar (~rendar@user/rendar)
[11:46:10] *** Joins: AteBall (~AteBall@188.27.97.49)
[11:46:48] <AteBall> can anyone help me restore a cluster from WAL?
[11:47:06] <AteBall> I'm trying to follow the instructions in the docs, but I think I'm screwing something up
[11:47:54] <mbanck> that's not enough information to help; what are you doing exactly and what is the error message? How did you create the base backup?
[11:48:17] *** Quits: tehenderz (~tehenderz@ti0018a400-9792.bb.online.no) (Ping timeout: 240 seconds)
[11:48:39] <AteBall> it keeps hitting me with LOG:  invalid primary checkpoint record
[11:48:42] <peerce> you need a basebackup *and* all wal archive since the basebackup started.
[11:48:49] *** Joins: tehenderz (~tehenderz@ti0018a400-9813.bb.online.no)
[11:49:14] *** Quits: tozhu (~tozhu@117.174.101.210) (Quit: tozhu)
[11:49:49] *** Quits: ferz (~ferz@146-241-198-179.dyn.eolo.it) (Ping timeout: 240 seconds)
[11:49:52] <AteBall> does this count? https://pastebin.com/MuP0DmfU
[11:50:17] <peerce> frankly, its easiest if you use something like barman or pgBackRest to manage both the base+archiving and restore process.
[11:50:22] *** Joins: ferz (~ferz@146-241-198-179.dyn.eolo.it)
[11:51:37] <mbanck> is there a backup_label file in the data directory? If so, what is its content? And probably also pastebin the output of pg_controldata on the data directory
[11:52:15] <peerce> so you have all WAL archived since 0/1000002B 000000010000....004, from September 14th, 2021 ?
[11:53:04] <AteBall> regarding the backup_label, I've just initialized a new cluster and am trying to figure out how to get it to start restoring
[11:53:15] <AteBall> it keeps trying with ...0001 and then hits me with the error
[11:54:18] *** Quits: maret (~maret@nat-88-212-37-89.antik.sk) (Quit: maret)
[11:54:23] *** Quits: f3f3lix (~weechat@55d40c9e.access.ecotel.net) (Ping timeout: 256 seconds)
[11:54:36] <peerce> what sort of archive_command were you using?   cp to a nfs mount, or scp to a scp/sftp(ssh) server?  or ?
[11:54:37] *** Quits: ferz (~ferz@146-241-198-179.dyn.eolo.it) (Ping timeout: 256 seconds)
[11:54:46] <AteBall> I have the all the WAL from the archive, up to the point I want to restore
[11:54:55] *** Quits: op2 (~op2@user/op2) (Ping timeout: 256 seconds)
[11:55:13] *** Joins: ferz (~ferz@146-241-187-124.dyn.eolo.it)
[11:55:35] *** Joins: psoo (~psoo@dslb-002-204-079-161.002.204.pools.vodafone-ip.de)
[11:55:36] <AteBall> archive_command='cp "%p" /archive/%f'
[11:55:53] <AteBall> it's a virtual disk
[11:56:36] *** Quits: xiongxin (~Thunderbi@2409:8955:2e88:2df3:beab:ad08:2d6a:98c5) (Ping timeout: 240 seconds)
[11:56:46] *** Joins: shka (~herr@109.231.3.55)
[11:57:59] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[11:58:21] <AteBall> created a fresh cluster, stopped, set restore_command correspondingly, touched recovery.signal in cluster dir; what am I missing?
[11:59:01] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[11:59:37] <peerce> are you following instructions for the postgres version you are running?    the recovery thing has changed in a relatively recent version from how it had worked for a long time
[11:59:54] *** Quits: zachxz (~zachary@124.133.18.218) (Quit: Leaving)
[12:00:37] <AteBall>  PostgreSQL 13.4 (Debian 13.4-1.pgdg100+1)
[12:00:53] <AteBall> both the instance that generated the archive and the one I'm trying to recover into
[12:01:07] <AteBall> yes, I was on the version 13 docs page
[12:01:25] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[12:02:17] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[12:02:37] <peerce> looks like its been recovery.signal since 12, before that it was a recovery.conf file that had some info in it
[12:03:14] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[12:04:11] <AteBall> am I supposed to copy something else from the original cluster?
[12:04:50] <peerce> i don't think so, except maybe your postgresql.conf and pg_hba.conf settings
[12:05:01] <peerce> its been awhile since I did this so I'm pretty fuzzy on it.
[12:06:36] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 272 seconds)
[12:07:23] *** Joins: tozhu (~tozhu@117.174.101.210)
[12:08:17] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[12:08:59] *** Joins: op2 (~op2@user/op2)
[12:09:40] *** Quits: tozhu (~tozhu@117.174.101.210) (Client Quit)
[12:10:49] *** Joins: tozhu (~tozhu@117.174.101.210)
[12:14:34] *** Joins: xiongxin (~Thunderbi@2409:8955:2e88:b55:2334:5dc4:2226:271c)
[12:16:03] *** Joins: mattil (~mattil@helsinki.portalify.com)
[12:16:54] *** Joins: f3f3lix (~weechat@55d4a3d9.access.ecotel.net)
[12:17:22] *** Quits: pvn2 (~Adium@147.87.131.89) (Ping timeout: 272 seconds)
[12:18:11] *** Parts: dirtwash (~dirtwash@user/dirtwash) (WeeChat 2.8)
[12:18:51] *** Parts: lucifer (sid308373@id-308373.helmsley.irccloud.com) ()
[12:21:59] *** Joins: maret (~maret@195.12.158.102)
[12:23:17] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[12:23:25] *** Joins: Auron (Auron956@user/auron)
[12:30:15] *** Quits: thel00p[m] (~thel00pma@2001:470:69fc:105::1:4c05) (Quit: You have been kicked for being idle)
[12:31:24] <AteBall> copied cluster dir from primary server, emptied pg_wal as per docs
[12:31:25] <AteBall> https://pastebin.com/CeF7Kw7t
[12:32:03] *** Quits: ufk (~textual@bzq-84-108-89-219.cablep.bezeqint.net) (Read error: No route to host)
[12:32:11] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[12:32:23] *** Joins: randir (~randir@93.159.239.42)
[12:33:52] *** Quits: tozhu (~tozhu@117.174.101.210) (Quit: tozhu)
[12:34:12] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[12:34:49] <Myon> AteBall: do you have archive_command configured?
[12:34:58] *** Joins: tozhu (~tozhu@117.174.101.210)
[12:35:13] <Myon> err restore_command
[12:35:20] <Myon> it doesn't seem to restore anything
[12:35:37] *** Quits: ur5us_ (~ur5us@2406:e002:6804:8a01:fe29:d3cc:a0c3:c22) (Ping timeout: 240 seconds)
[12:35:53] *** Joins: martti (~martti@46-126-48-136.dynamic.hispeed.ch)
[12:36:33] *** Quits: Kyros (~kyros@user/kyros) (Quit: ZNC 1.8.2 - https://znc.in)
[12:36:52] *** Joins: Kyros (~kyros@user/kyros)
[12:37:24] *** Joins: carragom (~textual@201.204.94.76)
[12:38:38] *** Joins: grundrausch3n (~grundraus@p200300e9ef2f4500ec74bb015909cfe6.dip0.t-ipconnect.de)
[12:38:57] *** Quits: grundrausch3n (~grundraus@p200300e9ef2f4500ec74bb015909cfe6.dip0.t-ipconnect.de) (Client Quit)
[12:39:00] *** Quits: memoryleak (~quassel@195-202-248-193.dynamic.hispeed.ch) (Ping timeout: 240 seconds)
[12:41:11] <AteBall> correct, I thought I had it set, but I think I lost it between attempts
[12:41:53] <AteBall> now it says FATAL:  hot standby is not possible because wal_level was not set to "replica" or higher on the master server
[12:42:05] <AteBall> master was configured with wal_level=logical
[12:43:22] <Myon> was it configured like that when the backup was created?
[12:44:18] <AteBall> this is the backup entry
[12:44:19] <AteBall> https://pastebin.com/MuP0DmfU
[12:44:28] <AteBall> I've never changed it manually
[12:44:37] <peerce> wal_level should have been archive on the original master
[12:45:04] <peerce> oh, logical should work too
[12:45:31] <Myon> start over from the beginning
[12:50:07] *** Quits: tozhu (~tozhu@117.174.101.210) (Quit: tozhu)
[12:50:52] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[12:50:54] *** Joins: memoryleak (~quassel@195-202-248-193.dynamic.hispeed.ch)
[12:53:17] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[12:57:45] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[12:58:05] *** Joins: tozhu (~tozhu@117.174.101.210)
[12:59:24] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[13:01:32] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[13:06:41] *** Quits: held (~heldchen@user/held) (Ping timeout: 252 seconds)
[13:09:36] <AteBall> now it's behaving like it was when I didn't have the restore_command configured
[13:09:44] <AteBall> I triple checked it's there
[13:15:16] <Myon> recovery.signal?
[13:18:02] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[13:20:24] <AteBall> it's there
[13:20:27] <AteBall> https://pastebin.com/9rduW2ee
[13:21:52] <Myon> is /archive correct? Are the other wal files in there? uncompressed?
[13:22:08] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[13:22:26] <peerce> all these files you created are owned by the postgres server process owner ?
[13:22:37] <peerce> typically 'postgres' but sometimes pgsql
[13:22:39] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[13:22:45] <peerce> and sometimes something else entirely different ?
[13:23:16] *** Joins: held (~heldchen@user/held)
[13:29:14] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[13:29:58] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[13:32:58] *** Joins: Ergo^ (~ergo@91.238.59.144)
[13:33:37] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[13:34:45] *** Quits: tozhu (~tozhu@117.174.101.210) (Quit: tozhu)
[13:36:19] <AteBall> they were readable, but I chown'd them to postgres just to be sure
[13:37:28] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[13:39:36] *** Quits: xiongxin (~Thunderbi@2409:8955:2e88:b55:2334:5dc4:2226:271c) (Ping timeout: 250 seconds)
[13:41:04] <Myon> AteBall: was that a proper basebackup with backup_label in the data dir?
[13:42:17] *** Quits: Kohe (~Kohe@46.12.214.37.dsl.dyn.forthnet.gr) (Ping timeout: 256 seconds)
[13:42:17] *** Quits: stairmast0r (~stairmast@user/stairmast0r) (Ping timeout: 256 seconds)
[13:43:49] <peerce> pg_basebackup takes care of the startbackup() and stopbackup() calls, rigth ?
[13:44:04] *** Joins: merzo (~Thunderbi@46.96.137.37)
[13:44:04] <AteBall> I... think so? I'd just initialized the main cluster and was setting up replication
[13:44:44] <AteBall> this is the file
[13:44:45] <AteBall> https://pastebin.com/MuP0DmfU
[13:44:46] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[13:45:03] <AteBall> 000000010000000000000004.00000028.backup
[13:45:21] *** Joins: stairmast0r (~stairmast@user/stairmast0r)
[13:45:30] <peerce> btw, most of us dislike pastebin.com because it pushes a ton of garbage javascript and trackers and stuff
[13:45:49] <Myon> AteBall: does the directory you are restoring from have a backup_label file?
[13:45:55] <peerce> paste.depesz.com is run by a postgres channel regular or dpaste.org
[13:46:07] <AteBall> noted
[13:46:21] <peerce> with dpatste.org yuou want to set 'plain code' as the paste type
[13:46:26] <peerce> dpaste.org
[13:47:12] <AteBall> Myon: you mean the main server data directory?
[13:47:35] <AteBall> no, it does not
[13:48:35] <Myon> then you need to wipe that and re-copy from your backup
[13:48:46] <Myon> the whole directory
[13:49:12] *** Joins: mattil (~mattil@helsinki.portalify.com)
[13:52:17] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[13:52:17] *** Joins: MarderIII (~MarderIII@2a02:a45a:72f1:1:8587:dbce:9777:9595)
[13:52:18] <AteBall> I don't have anything else
[13:52:32] <AteBall> the main server is still running; I copied the data dir from there
[13:55:46] <depesz> anyone of you remember where can I find documented that you can call: table_alias.function_name and be it the same as function_name(table_alias) ?
[13:56:09] *** Quits: TzilTzal (~TzilTzal@158.140.134.198) (Remote host closed the connection)
[13:57:02] <Myon> AteBall: copied how?
[13:57:26] <AteBall> tar, scp
[13:57:38] <Myon> depesz: that's probably one of those features that aren't documented since they should have been removed decades ago
[13:57:48] <Myon> AteBall: that's not a proper basebackup
[13:57:48] <depesz> i really hope not.
[13:58:59] <Myon> AteBall: mbanck was asking these questions two hours ago, and you didn't answer them
[14:01:14] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[14:02:10] <mbanck> AteBall: that backup_label seems to be from 2021
[14:02:29] <AteBall> okay, so I thought enabling the WAL archive was going to be good enough
[14:02:35] <AteBall> at the time
[14:02:35] <mbanck> I think you're either just initdbing a new cluster and think you can restore; or your doing your base backup wrong
[14:02:51] <Myon> no you need proper base backups along with the WAL archive
[14:03:04] <AteBall> it was a fresh cluster; was I supposed to make a basebackup of the empty cluster?
[14:03:08] <Myon> where the most simple version of "proper" is using "pg_basebackup"
[14:03:17] <Myon> yes
[14:03:37] *** Joins: pedja (~pedja@user/deus-ex/x-7934090)
[14:04:12] <AteBall> wonderful; I suppose this means there's no way to recover, right?
[14:05:24] <mbanck> what's the status of the current cluster?
[14:05:32] *** Quits: richard_h (~richard@2406:e001:8:a900:6e62:6dff:fe05:ae29) (Quit: Leaving.)
[14:05:35] <mbanck> but yeah, I guess your WAL won't help you
[14:05:54] <AteBall> so, the main server is running, but I need to recover its state about 40 days ago
[14:06:36] *** Joins: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net)
[14:06:56] <AteBall> I made a pg_dump > gzip, but gzip screwed me over and blanked the first 600mb of the resulting archive
[14:06:59] <mbanck> and you don't have dumps nor base backups from before that
[14:07:59] *** Quits: ferrer (~ferrer@89.29.180.19) (Quit: Leaving)
[14:08:20] <AteBall> no, I didn't think it would be necessary if I kept the WAL archive from the very beginning
[14:08:39] <AteBall> I saw replication was working, so I didn't think anything was wrong
[14:08:40] <mbanck> how long did you think a restore should/would take?
[14:09:22] <AteBall> just shy of 400 GB of WAL; I'm guessing up to a few hours
[14:10:34] <AteBall> it was never going to be a big issue; I'd need it eventually, not in a hurry
[14:12:14] *** Quits: merzo (~Thunderbi@46.96.137.37) (Read error: Connection reset by peer)
[14:12:31] *** Quits: jazzy (~jaziz@user/jaziz) (Quit: Beddie bye-bye)
[14:13:16] <AteBall> the replica would still have the data in case of a failure in the primary server
[14:14:32] <Myon> both the original and the replica are fried now?
[14:14:54] <AteBall> no, neither is
[14:15:19] <AteBall> I just need to go back in time; this is a type of issue that I hadn't planned for
[14:16:02] <peerce> i'm of the opinion that you should take a basebackup every so often, and trim your wal archive, afterwards,  maybe weekly or monthly, keep maybe two basebacups, and all wal since the start of the older
[14:16:28] <peerce> I mean, how likely is it that you;'d ever want a PITR restore to a point over 2 weeks or two months old?
[14:16:37] <AteBall> it's a single-use app with a limited lifetime
[14:16:50] <peerce> exactly
[14:17:16] <AteBall> I didn't think to schedule periodical backups and such
[14:17:30] <peerce> we didn't do any of this in OUR production system, but it was a 6 month retention online manufacturing tracking system, HUGE amounts of data daily, very write intensive
[14:17:31] <AteBall> because it would be done before anyone would care
[14:17:43] <peerce> we kept a mirror server that subscribed to the same events.
[14:17:50] <peerce> and that was the ONLY backup
[14:18:09] <peerce> we had a way of failing over to that mirror, so we could do an upgrade of the primary
[14:18:34] <peerce> our messaging system could handle a few days of backlog and catchup without loosing events
[14:18:38] <peerce> er, losing
[14:19:29] *** Quits: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon) (Remote host closed the connection)
[14:19:29] <peerce> everything from the 1000s of stations on the factory floor came into the database via a pub/sub messaging queueing system
[14:19:57] *** Joins: GNUmoon (~GNUmoon@gateway/tor-sasl/gnumoon)
[14:19:58] <AteBall> this is a pretty plain app, it's like a basic document registry
[14:20:04] <peerce> we also had a facility to archive messages ('events') over an interval but that quickly became gigabytes per hour
[14:20:56] <AteBall> it doesn't see a lot of traffic or anything, we had an upper estimate on how big it might get
[14:21:16] <AteBall> set up logical replication "just in case"
[14:21:28] <AteBall> didn't think to do a basebackup at the beginning
[14:21:51] <AteBall> a proper one, like you said
[14:22:59] *** Joins: merzo (~Thunderbi@46.96.137.37)
[14:23:36] *** Joins: tozhu (~tozhu@218.89.234.137)
[14:23:38] <rk4> out of curiousity, what was the messaging system that could store up this backlog?
[14:24:49] <peerce> um, we originally had our own funky stuff, then we participated in a big corporate wide MQ shootout, and ended up with Tibco RV, but after a few years, we had found enough problems with it, that the messaging guru on my core team rolled his own from scratch in a few weeks
[14:25:05] <peerce> it was entirely peer to peer without any dedicated messaging servers required
[14:25:18] *** Quits: stairmast0r (~stairmast@user/stairmast0r) (Ping timeout: 272 seconds)
[14:25:32] <rk4> ah, what did the persistence layer look like?
[14:25:56] <peerce> used the publish/subscribe paradigm with what the MQ folks call 'guaranteed delivery', meaning any publisher has to be able to store messages bounced for a subscriber for as long as we needed, usually a couple days or a week to allow for emergencies.
[14:26:35] <peerce> we dealth with a LOT of cases of operations going, 'why does this server have this umpteen gigabyte storage allocation its never using' and taking it away, until something went down and needed it.
[14:26:53] <rk4> welp
[14:27:20] <peerce> the publisher storage for outbound messages that were backloggging was any reliable file system you could present.    sometimes it was an NFS share in a Netapp Filer.
[14:27:27] <peerce> other times, it was a local RAID
[14:28:41] <peerce> it didnt' take long for production operations to realize that we *NEEDED* those spooling file systems for those abnormal events evne if they were only a few times a year
[14:29:11] <peerce> this system ran continuously at a half dozen major sites for over 20 years
[14:29:20] *** Joins: stairmast0r (~stairmast@user/stairmast0r)
[14:29:40] <peerce> the manufacturing sites were all in Asia, and couldn't rely on internet for cloud access, so everything had to be on site.
[14:31:04] <peerce> we had other nodes that subscribed to some of these publish topics, and filtered them according to dynamically adjustable parameters and queued them up to be forward to the corporate EDW which, hah, had more downtime than our own manufacturing systems.
[14:31:37] <peerce> the EDW was for long term retention of select manufacturing data so engineering could use to to analyze product returns
[14:31:51] <peerce> factories only cared about 6 months
[14:31:55] <rk4> seems like a fun environment, well, a specific kind of fun
[14:31:57] <peerce> EDW cared about 3 years or 5 years
[14:32:27] <peerce> thankfully, MY exposure to all this was being the systems guru and troubleshooter for the very small core development team here in California.
[14:32:43] <peerce> I spent most of 20 years pushing for Postgresql to replace Oracle
[14:33:38] <peerce> the core team was 6-8 developers, a manager/director, an Oracle DBA and me.
[14:33:47] *** Joins: furrymcgee (~devuan@cgn-89-1-209-226.nc.de)
[14:33:50] <peerce> ALL of us had been with the company for 20+ years
[14:33:59] <peerce> and yeah, lotta grey hair.
[14:34:20] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[14:37:03] <peerce> when i started my hair was brown.  in those 20 years, I raised two kids to adulthood and their college degrees, I managed the developemnet lab, troubleshooted endless integration problems, and my hair turned nearly totally silver
[14:37:58] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 272 seconds)
[14:38:27] *** Quits: fordfrog (~fordfrog@gentoo/developer/fordfrog) (Quit: Leaving)
[14:38:40] <peerce> then omg, hah, on my 20th anniversary, they dissolved our core developement department, and moved all our functions overseas to asia.   I can't complain, I was nearly ready to reture, and a 40 week (2 weeks/year for 20 years) severance paycheck didn't hurt
[14:38:59] <peerce> looked at my 401k, and went, yup, I don't need to work no mo.
[14:39:53] <rk4> not bad not bad
[14:39:58] <peerce> oh, on the date they annouced our department was being shut down, i was given 6 months to 'wrap up' our operations
[14:40:06] <peerce> on top of the rest.
[14:40:31] <rk4> what do you do now?
[14:40:42] <peerce> as little as I can get away with!
[14:40:47] <peerce> every day is saturday.
[14:41:02] <peerce> we hang out here in paradise, we take road trips with our RV.
[14:41:25] <rk4> and hang out with the postgres commmunity :>
[14:41:40] <peerce> heading to southern california next week for some time visiting a wife relative in Sandy Eggo (San Diego), then going to Death Valley for a week+, then wandering back home.
[14:42:18] <peerce> [I live on the central/northern California coast... 122W 37N]
[14:43:49] <sobel> paradise or Paradise?
[14:44:01] * rk4 nods, and waves as a different wife insists it's bed time
[14:44:11] <sobel> i lived in paradise until Austin grew up
[14:44:47] <peerce> kid#1 is a phd in geology who's getting well established as a global expert on earthquake faults and rupture, living in the UK now and workign all over,  kid #2 has her degree, and is working as a medical laboratory compliance officer in New Orleans
[14:44:52] *** Quits: realies (~realies@user/realies) (Quit: ~)
[14:45:28] <peerce> hah, I had a friend in Paradise, CA but he bailed a few years before the fire destroyed that town and lives in the Joshua Tree area now..
[14:45:46] <peerce> no, my Paradise is Santa Cruz.
[14:46:10] <peerce> mild weather year around, forests, oceans.
[14:46:35] *** Joins: realies (~realies@user/realies)
[14:47:16] <peerce> expensive cost of living, but we can afford it.   crazy homeless/druggie scene, but thats everywhere now.
[14:47:47] *** Quits: econo (uid147250@user/econo) (Quit: Connection closed for inactivity)
[14:49:22] <nbjoerg> does COALESCE evaluate arguments lazily?
[14:50:13] *** Joins: realies3 (~realies@user/realies)
[14:50:34] <nbjoerg> or is there a good technique in a VIEW for a field that requires another join, is by itself rarely set and condition?
[14:50:34] <peerce> i would assume so, but thats never a safe bet.  :D
[14:51:16] <peerce> assumptions like that have a way of biting you.
[14:51:29] <nbjoerg> yeah, that's why I am asking first ;)
[14:52:45] *** Joins: Kohe (~Kohe@46.12.214.37.dsl.dyn.forthnet.gr)
[14:53:24] *** Quits: realies (~realies@user/realies) (Read error: Connection reset by peer)
[14:53:24] *** realies3 is now known as realies
[14:53:36] <peerce> I never like to assume stuff like that, but once an expression in the list returns not null, it has no reason to continue, so take that at face value.
[14:54:36] <AteBall> version 13 docs: Like a CASE expression, COALESCE only evaluates the arguments that are needed to determine the result; that is, arguments to the right of the first non-null argument are not evaluated.
[14:55:04] <peerce> there ya go!
[14:56:06] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[14:56:10] <nbjoerg> thanks
[14:59:35] <AteBall> just reported the "no dice" on the recovery thing
[15:00:01] <AteBall> any other ideas would be welcome
[15:00:32] *** Quits: MarderIII (~MarderIII@2a02:a45a:72f1:1:8587:dbce:9777:9595) (Ping timeout: 240 seconds)
[15:01:39] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[15:08:43] *** Quits: nyov (~nyov@user/nyov) (Ping timeout: 256 seconds)
[15:10:14] *** Joins: nyov (~nyov@user/nyov)
[15:11:44] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[15:13:30] *** Joins: TomyWork (~TomyLobo@p200300e80f158200e0a0a550bb296489.dip0.t-ipconnect.de)
[15:13:32] *** Quits: mattil (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[15:21:22] *** Quits: zlinux_ (~zlinux@149.109.14.64) (Read error: Connection reset by peer)
[15:22:54] *** Joins: zlinux (~zlinux@149.109.31.219)
[15:25:27] *** Joins: MarderIII (~MarderIII@86-88-74-111.fixed.kpn.net)
[15:28:50] *** Joins: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08)
[15:30:55] *** Quits: merzo (~Thunderbi@46.96.137.37) (Read error: Connection reset by peer)
[15:31:19] *** Joins: merzo (~Thunderbi@46.96.137.37)
[15:33:07] <ne2k> all IP addresses are Internet IP addresses. as it's The Internet Protocol. innit
[15:35:34] <koollman> some are more internet than others :)
[15:35:44] *** Joins: kakashiA1 (~kakashi@41.251.116.49)
[15:42:05] *** Quits: maths22 (~maths22@user/maths22) (Remote host closed the connection)
[15:42:47] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[15:43:16] <ne2k> koollman, ;_0
[15:44:29] *** Joins: james_lavin (~jameslavi@ool-457981b2.dyn.optonline.net)
[15:45:06] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 260 seconds)
[15:46:08] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[15:48:44] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[15:50:37] <zilti[m]> peerce: Well it turns out not using a temp table in-between indeed just locks out any table access until the procedure has finished... Guess I'll go back to using a temp table for the results first
[15:51:22] *** Joins: MrZeus_ (~MrZeus@185.195.232.164)
[15:56:01] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[16:04:12] *** Quits: merzo (~Thunderbi@46.96.137.37) (Ping timeout: 240 seconds)
[16:06:58] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[16:07:11] *** Joins: merzo (~Thunderbi@46.96.137.37)
[16:10:37] *** Quits: Kohe (~Kohe@46.12.214.37.dsl.dyn.forthnet.gr) (Ping timeout: 240 seconds)
[16:13:00] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[16:13:52] *** Joins: n0fun (~jack@i577BC0A3.versanet.de)
[16:17:22] *** Quits: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:19:17] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[16:20:46] *** Joins: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08)
[16:21:04] *** Joins: Klinda (~superleag@user/klinda)
[16:22:19] *** Quits: liriel (~liriel@user/liriel) (Quit: bye)
[16:22:49] *** Joins: liriel (~liriel@185.21.217.6)
[16:22:51] *** Quits: liriel (~liriel@185.21.217.6) (Changing host)
[16:22:51] *** Joins: liriel (~liriel@user/liriel)
[16:24:22] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 272 seconds)
[16:25:39] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[16:26:03] *** Quits: liriel (~liriel@user/liriel) (Remote host closed the connection)
[16:26:08] *** Joins: rufito (~phil@186-79-11-47.baf.movistar.cl)
[16:26:19] *** Joins: liriel (~liriel@185.21.217.6)
[16:26:21] *** Quits: liriel (~liriel@185.21.217.6) (Changing host)
[16:26:21] *** Joins: liriel (~liriel@user/liriel)
[16:28:45] *** Quits: bmomjian (~bruce@momjian.us) (Quit: Leaving.)
[16:28:51] *** Joins: bmomjian1 (~bruce@momjian.us)
[16:29:39] *** Quits: liriel (~liriel@user/liriel) (Remote host closed the connection)
[16:30:25] *** Joins: liriel (~liriel@185.21.217.6)
[16:30:27] *** Quits: liriel (~liriel@185.21.217.6) (Changing host)
[16:30:27] *** Joins: liriel (~liriel@user/liriel)
[16:31:00] *** Joins: s3a (~s3a@ip216-239-66-174.vif.net)
[16:32:54] <s3a> Hello everyone. Why is this ( https://dpaste.com/9CP2NRFDN#wrap ) returning no rows? I'm trying to return only those rows with the the highest num_ratings.
[16:40:15] *** Quits: maret (~maret@195.12.158.102) (Quit: maret)
[16:40:25] *** Quits: rvalue (~rvalue@user/rvalue) (Ping timeout: 265 seconds)
[16:44:28] *** Joins: rvalue (~rvalue@user/rvalue)
[16:45:05] <peerce> i'm not sure that query makes sense to me.
[16:45:17] <peerce> it probably sould be rewritten as a join.
[16:46:03] <peerce> that <= ALL () clause looks like its going to return all the rows of movies.num_ratings
[16:46:47] <s3a> It's >=, not <=
[16:46:48] <peerce> if you want the largest num_ratings, what about something like.... (gimme a sec...)
[16:47:00] <peerce> SELECT M.mid, M.title, M.year, M.num_ratings, M.rating
[16:47:00] <peerce> FROM movies M
[16:47:16] <peerce> order by num_ratings desc limit 10;
[16:47:40] <peerce> that will give the 10 highest.
[16:47:41] *** Joins: maret (~maret@195.12.158.102)
[16:47:43] <peerce> is that what you want ?
[16:47:48] <s3a> I'm supposed to get all the movies with the highest number of ratings.
[16:47:54] <s3a> So, no. :)
[16:48:08] <peerce> huh?  only one movie can have the HIGHEST rating.
[16:48:25] <peerce> so what do you mean by all the movies with the highest number of ratings (vs what?)
[16:48:28] <s3a> no. not if many have the exact same amount of ratings. ;)
[16:48:42] <s3a> "Print all information (mid, title, year, num ratings, rating) for the movie(s) with the
[16:48:42] <s3a> highest number of ratings."
[16:49:17] <s3a> "One would expect that the movie with the highest number of user ratings is either the highest rated movie or perhaps the lowest rated movie. Let’s find out if this is the case here. Print all information (mid, title, year, num ratings, rating) for the movie(s) with the highest number of ratings."
[16:49:19] <peerce> so the highest for each year?
[16:49:31] <peerce> wait, whaaaa?
[16:49:38] <peerce> thats a bunch of bullshit
[16:49:42] <s3a> lol
[16:50:02] <peerce> hihgest or perhaps ?
[16:50:07] <peerce> squishy
[16:50:17] <s3a> what?
[16:50:47] <s3a> The way I took it is highest meaning num_ratings1 >= all_other_num_ratings
[16:50:49] <peerce> << is either the highest rated movie or perhaps the lowest rated movie>>
[16:50:59] <peerce> say huh?
[16:51:39] *** Quits: Auron (Auron956@user/auron) ()
[16:52:51] *** Quits: bmomjian1 (~bruce@momjian.us) (Quit: Leaving.)
[16:52:52] *** Joins: bmomjian (~bruce@momjian.us)
[16:52:55] <ne2k> what would be the least clunky of making an array of start/end times, and then checking that a timestamptz is not within any of the listed time ranges interpreted for today in the local (or a given) timezone
[16:53:05] *** Quits: MarderIII (~MarderIII@86-88-74-111.fixed.kpn.net) (Quit: Leaving)
[16:53:13] <ne2k> I was thinking an array of timerange but there is no such thing
[16:53:19] <s3a> peerce, if there r three movies m1, m2 and m3 m1 and m2 have 1000 ratings, and m3 has 999 ratings, then it should show m1 and m2
[16:53:41] <Myon> ne2k: upgrade to PG14 and use multiranges
[16:53:51] <s3a> num_ratings is a given column, no need for COUNT(*) or anything like that
[16:54:23] <s3a> I thought what I did was brilliant ... until it didn't work. :P
[16:54:33] <s3a> :'(
[16:54:55] <ne2k> Myon, I'm already on pg14 as this is a new project! the curse of google directing me to a page that isn't the current version.... again....
[16:55:09] <Myon> that said, tstzrange[] is a thing: select '{"(2020-01-01,2022-01-01)"}'::tstzrange[];
[16:56:01] <Myon> but multiranges are cooler: select '{(2020-01-01,2022-01-01)}'::tstzmultirange;
[16:56:02] <ne2k> Myon, basically, I have a bunch of services that run on given intervals, e.g. ten minutes, and I want to be able to create an array of time-of-day ranges during which it shouldn't run
[16:56:31] <ne2k> Myon, so, service 1 is disabled between 01:00-02:00 and 03:00-03:30 (in the local timezone)
[16:56:50] <ne2k> I suppose I could normalize and put in another table
[16:56:53] <Myon> there's time, and you can create a range type on top of that
[16:57:01] *** Quits: justAstache (~justache@user/justache) (Read error: Connection reset by peer)
[16:57:52] *** Joins: ponsfrilus1 (~Thunderbi@vpn-254-155.epfl.ch)
[16:57:54] <ne2k> create table service_disable_times (serviceid int references service(id), start time, end time)
[16:58:11] <ne2k> exclude overlapping time ranges for a given service using gist
[16:58:11] *** Joins: justAstache (~justache@user/justache)
[16:58:26] *** Joins: fordfrog (~fordfrog@gentoo/developer/fordfrog)
[16:59:05] <ne2k> and then check that the count of rows for each service for which now() lies between start@today and end@today is zero
[16:59:12] *** Quits: ponsfrilus (~Thunderbi@vpn-254-174.epfl.ch) (Ping timeout: 272 seconds)
[16:59:13] *** ponsfrilus1 is now known as ponsfrilus
[16:59:45] *** Joins: lokirf_ (~lokirf@111.29.80.180)
[17:00:11] <ne2k> Myon, that said, if I can create a timemultirange, and it will "work", that'd be great
[17:00:17] <ne2k> wow, timerange is even in the docs
[17:01:15] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[17:01:17] <Myon> afaict multirange types just pop up if you create a range type
[17:01:24] <ne2k> Myon, magically?
[17:01:38] *** Quits: lokirf_ (~lokirf@111.29.80.180) (Client Quit)
[17:01:43] <Myon> like array types pop up when you create a base type
[17:01:45] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[17:02:27] <ne2k> Myon, which makes sense as array has special syntax, but isn't multirange actually just a textually different name for the type?
[17:02:36] <ne2k> seems a bit... smelly that that would pop up automagically
[17:03:00] <Myon> it's based on the range type, not on the base type
[17:03:26] <Myon> array of ranges is similar to multirange but not the same
[17:03:28] <ne2k> yeah, but I called it whatever I wanted... ah, I see in CREATE TYPE that you can specify MULTIRANGE_TYPE_NAME = . that makes sense
[17:03:36] <Myon> the latter will automatically merge overlapping entries
[17:03:46] <ne2k> wow!
[17:03:57] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 240 seconds)
[17:04:04] <ne2k>  If not specified, this name is chosen automatically as follows. If the range type name contains the substring range, then the multirange type name is formed by replacement of the range substring with multirange in the range type name. Otherwise, the multirange type name is formed by appending a _multirange suffix to the range type name.
[17:04:09] <ne2k> well, I suppose that's logical
[17:04:19] *** Quits: merzo (~Thunderbi@46.96.137.37) (Remote host closed the connection)
[17:04:22] *** Joins: vladoski (~vladoski@2001:b07:add:d406:35da:4533:e7d7:7cd6)
[17:04:42] <ne2k> Myon, and so if I create a type timerange, will I magically get an operator that lets me till if a value is not within any of the ranges?
[17:05:24] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 240 seconds)
[17:05:50] *** Joins: TzilTzal (~TzilTzal@58.96.213.198)
[17:05:50] <Myon> if it lets you create the type, that will be the case I think
[17:06:14] <Myon> it might need extra support on the side of the type to let you create the range type, that's the part I'm unsure about
[17:06:31] <Myon> it's been a while since I implemented range support in postgresql-unit
[17:06:49] *** Joins: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net)
[17:07:10] *** Joins: Elodin (~elodin@user/elodin)
[17:09:45] <ne2k> Myon, https://dbfiddle.uk/?rdbms=postgres_14&fiddle=86d0ebefbbfc7be572623a9d68e9343c have I done anything dumb or does this seem like it would be correct?
[17:10:43] <peerce> does it do what you want?
[17:11:21] <ne2k> peerce, I think so. I'm just asking whether it appears that it would Do The Right Thing with respect to timezones and stuff. now()::time is presumably converted to the time now in the connection's timezone
[17:11:47] <peerce> re the fiddle, I like it split up like this,   https://dbfiddle.uk/?rdbms=postgres_14&fiddle=cd22431873a57999e71e86d52680a402
[17:12:19] <ne2k> peerce, good idea for improved readability; will bear in mind for future, thanks
[17:12:19] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:12:51] <peerce> each block on that site is run as a transaction, so if there is an error in one block, it will still run the rest.
[17:13:04] <peerce> and the error reporing is a lot nicer than most fiddles.
[17:13:04] <ne2k> peerce, which may or may not what you want....
[17:15:21] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Ping timeout: 256 seconds)
[17:18:29] *** Joins: Elodin (~elodin@user/elodin)
[17:18:32] *** Quits: TzilTzal (~TzilTzal@58.96.213.198) (Remote host closed the connection)
[17:19:53] *** Quits: iliv (~iliv@user/iliv) (Ping timeout: 256 seconds)
[17:21:16] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:21:44] *** Joins: Elodin (~elodin@user/elodin)
[17:23:26] <s3a> peerce, This is weird. Here ( https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all3&ss=-1 ), the following DOES seem to work.:
[17:23:26] <s3a> SELECT ProductName
[17:23:27] <s3a> FROM Products
[17:23:27] <s3a> WHERE ProductID >= ALL (SELECT ProductID FROM OrderDetails);
[17:24:26] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:27:24] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[17:27:39] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[17:28:15] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Read error: Connection reset by peer)
[17:28:21] *** Quits: mniip (mniip@libera/staff/mniip) (Ping timeout: 604 seconds)
[17:28:26] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[17:30:00] *** Joins: Elodin (~elodin@user/elodin)
[17:30:46] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Remote host closed the connection)
[17:30:48] *** Joins: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net)
[17:31:30] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 260 seconds)
[17:31:33] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[17:32:46] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Ping timeout: 272 seconds)
[17:34:17] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:35:05] *** Joins: iliv (~iliv@93-77-147-152.lvv.volia.net)
[17:35:31] *** Quits: Bish (~arne@ip-037-024-001-041.um08.pools.vodafone-ip.de) (Ping timeout: 256 seconds)
[17:35:56] *** Joins: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net)
[17:36:30] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[17:40:23] *** Joins: Elodin (~elodin@user/elodin)
[17:41:30] *** Joins: Bish (~arne@ip-037-024-001-041.um08.pools.vodafone-ip.de)
[17:41:33] *** Joins: Azem (~haise01@user/haise01)
[17:44:56] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[17:45:11] *** Quits: iliv (~iliv@93-77-147-152.lvv.volia.net) (Changing host)
[17:45:11] *** Joins: iliv (~iliv@user/iliv)
[17:46:04] *** Quits: sabra (~sabra@99-105-192-94.lightspeed.livnmi.sbcglobal.net) (Ping timeout: 272 seconds)
[17:50:02] *** Quits: ees-mobile (~ees-mobil@pool-108-18-30-46.washdc.fios.verizon.net) (Ping timeout: 240 seconds)
[17:50:16] *** Joins: sabra (~sabra@99-105-192-94.lightspeed.livnmi.sbcglobal.net)
[17:50:42] *** Joins: Elodin (~elodin@user/elodin)
[17:59:07] *** Quits: Elodin (~elodin@user/elodin) (Read error: Connection reset by peer)
[18:00:04] *** Joins: ponsfrilus1 (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[18:00:19] *** Quits: justAstache (~justache@user/justache) (Read error: Connection reset by peer)
[18:01:28] *** Joins: justAstache (~justache@user/justache)
[18:01:50] *** Quits: ponsfrilus (~Thunderbi@vpn-254-155.epfl.ch) (Ping timeout: 260 seconds)
[18:01:50] *** ponsfrilus1 is now known as ponsfrilus
[18:04:39] *** Quits: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net) (Ping timeout: 256 seconds)
[18:04:44] *** Quits: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net) (Read error: Connection reset by peer)
[18:04:57] *** Joins: Elodin (~elodin@user/elodin)
[18:05:12] *** Quits: Elodin (~elodin@user/elodin) (Client Quit)
[18:05:26] *** Joins: robinsmidsrod (~robin@25.51-174-133.customer.lyse.net)
[18:08:28] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[18:09:24] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Remote host closed the connection)
[18:09:50] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[18:10:08] *** Joins: mattil__ (~mattil@helsinki.portalify.com)
[18:12:19] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[18:14:34] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 272 seconds)
[18:14:46] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[18:19:06] *** Parts: Demosthenex (~Demosthen@user/demosthenex) ()
[18:21:16] *** Quits: randir (~randir@93.159.239.42) (Remote host closed the connection)
[18:21:48] *** Joins: randir (~randir@93.159.239.42)
[18:24:53] *** Quits: CanuteTheGreat (CanuteTheG@user/canutethegreat) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[18:25:02] *** Quits: epony (epony@user/epony) (Ping timeout: 240 seconds)
[18:25:12] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[18:25:58] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 272 seconds)
[18:26:24] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[18:26:36] *** Quits: randir (~randir@93.159.239.42) (Ping timeout: 272 seconds)
[18:30:00] <maret> HI I am thinking about using optimistic locking in my code. I have a simple table -> property_name, type_id. My code is calling 3rd party API which  helps me group items based by type_id. Now the issue: Few things can happen:  I can find properties unrelated to any type_id, in that case i create new type_id (like 1) and store property. 2 thing -> I can find two group of properties and thanks to 3rd party api I can find out that they are related. In
[18:30:00] <maret>  that case I take which ever entity_id is higher an update all rows to that -> if I find properties with type_id 1, 2, 2, 3, all of them gets update to 3
[18:31:24] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 240 seconds)
[18:31:39] <maret> to speed things up, I am doing this process in paralel finding new properties and grouping existing one. Obviously things can get rewritten. I don't really care what type_id property end up having, I only care that in the end all grouped properties stay the same
[18:31:41] *** Joins: the_lanetly_052 (~the_lanet@194.135.167.54)
[18:32:36] *** Quits: the_lanetly_052_ (~the_lanet@194.135.167.211) (Ping timeout: 240 seconds)
[18:33:33] *** Quits: mattil__ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[18:33:33] *** Quits: kakashiA1 (~kakashi@41.251.116.49) (Ping timeout: 256 seconds)
[18:33:43] <maret> Normaly when I came across issue with locking, it was something like two users updating same texts, where obviously it matters that one can overwrite the second one. Not sure if I need to add locking mechanism here. In this case I could add optimistic locking based on type_id so I don't need version column
[18:33:50] *** Joins: gp5st (~gp5st@pool-72-77-44-213.pitbpa.fios.verizon.net)
[18:34:00] *** Quits: Junxter (~Junxter@121.237.60.195) (Remote host closed the connection)
[18:34:24] *** Joins: Junxter (~Junxter@121.237.60.195)
[18:35:20] *** Joins: kakashiA1 (~kakashi@41.251.116.49)
[18:38:05] <Myon> that's something serializable isolation level should be able to handle
[18:39:02] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[18:39:39] *** Quits: Ergo^ (~ergo@91.238.59.144) (Read error: Connection reset by peer)
[18:39:40] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[18:39:47] *** Quits: kakashiA1 (~kakashi@41.251.116.49) (Ping timeout: 256 seconds)
[18:43:16] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 245 seconds)
[18:45:27] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[18:45:58] *** Joins: Ergo^ (~ergo@91.238.59.144)
[18:47:31] <maret> hmm thanks let me read upon on that
[18:48:10] *** Joins: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net)
[18:48:23] *** Quits: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:48:30] *** Quits: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se) (Read error: Connection reset by peer)
[18:49:25] *** Joins: jnnnnnnnnn (~jnnnnnnnn@c-2172524e.016-77-73746f43.bbcust.telenor.se)
[18:49:29] *** Joins: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c)
[18:49:49] *** Joins: randir (~randir@95-25-111-216.broadband.corbina.ru)
[18:51:38] *** Joins: merzo (~Thunderbi@88.155.116.153)
[18:52:02] *** Joins: kakashiA1 (~kakashi@41.251.116.49)
[18:56:23] *** Joins: mrgz (~mrgz@201-42-0-191.dsl.telesp.net.br)
[18:57:00] *** Quits: kakashiA1 (~kakashi@41.251.116.49) (Ping timeout: 272 seconds)
[18:58:07] *** Joins: shiranaihito_ (~textual@123-192-192-149.dynamic.kbronet.com.tw)
[18:59:14] *** Joins: DevAntoi_ (~DevAntoin@2a01:e34:ec18:50c0:e505:d7c0:c703:adc2)
[19:00:01] *** Quits: shiranaihito (~textual@2001-b011-4011-30c0-292f-d5e1-0352-6bca.dynamic-ip6.hinet.net) (Ping timeout: 250 seconds)
[19:00:24] *** Joins: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08)
[19:01:26] *** Quits: s3a (~s3a@ip216-239-66-174.vif.net) (Ping timeout: 272 seconds)
[19:02:26] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:7c29:b905:2d90:6b21) (Ping timeout: 250 seconds)
[19:03:08] *** Joins: Kohe (~Kohe@46.12.214.37.dsl.dyn.forthnet.gr)
[19:03:35] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[19:03:54] *** Quits: zlinux (~zlinux@149.109.31.219) (Read error: Connection reset by peer)
[19:05:18] *** Quits: dsrt^ (~dsrt@12.163.216.98) (Remote host closed the connection)
[19:05:21] *** Joins: zlinux (~zlinux@142.247.13.212)
[19:05:55] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[19:06:36] *** Quits: tehenderz (~tehenderz@ti0018a400-9813.bb.online.no) (Ping timeout: 245 seconds)
[19:07:01] *** Joins: tehenderz (~tehenderz@ti0018a400-10077.bb.online.no)
[19:10:55] *** Quits: varioust (~varioust@gateway/tor-sasl/varioust) (Ping timeout: 240 seconds)
[19:11:49] *** Quits: zlinux (~zlinux@142.247.13.212) (Ping timeout: 256 seconds)
[19:13:24] *** Joins: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:d4c1:2cbb:dba4:6da3)
[19:16:17] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[19:17:10] *** Quits: jmarsac (~jmarsac@2a01:cb1d:1f5:ca00:d4c1:2cbb:dba4:6da3) (Client Quit)
[19:17:59] *** Joins: zlinux (~zlinux@149.109.5.240)
[19:19:26] *** Quits: merzo (~Thunderbi@88.155.116.153) (Remote host closed the connection)
[19:19:39] *** Joins: Siecje (~Siecje@97.111.200.32)
[19:21:20] <Siecje> I'm trying to restore a database backup but I'm getting "invalid command" and "invalid byte sequence"
[19:21:27] <Siecje> I'm using psql < $db_file
[19:21:42] <Myon> show more context with the actual error message
[19:22:07] *** Quits: TitanOfOld (titan@gentoo/developer/TitanOfOld) (Quit: ZNC - https://znc.in)
[19:23:43] *** Joins: TitanOfOld (titan@gentoo/developer/TitanOfOld)
[19:23:59] *** Joins: magla (~gelignite@55d47d67.access.ecotel.net)
[19:25:04] <Siecje> Myon: https://dpaste.org/2uyj
[19:25:35] <Siecje> It is a .sql.gz file
[19:25:47] <Myon> well, then you need to decompress it
[19:25:54] *** Joins: mattil (~mattil@87-92-108-248.bb.dnainternet.fi)
[19:25:55] <Myon> zcat $db_file | psql
[19:26:27] *** Joins: mattil_ (~mattil@helsinki.portalify.com)
[19:26:33] *** Joins: kakashiA1 (~kakashi@41.251.116.49)
[19:26:56] *** Joins: carragom (~textual@201.204.94.76)
[19:27:00] *** Quits: n0fun (~jack@i577BC0A3.versanet.de) (Ping timeout: 240 seconds)
[19:28:13] *** Joins: jhammerman (~joe.hamme@98.246.188.6)
[19:28:36] *** Joins: varioust (~varioust@gateway/tor-sasl/varioust)
[19:28:40] *** Quits: Guest7 (~Guest7@c-23-152-128-248.rev.sailinternet.net) (Quit: Client closed)
[19:28:45] <Siecje> How can I check if I need zcat? with zcat I get "cannot stat .sql.gz.Z): No such file or directory"
[19:30:13] *** Quits: mattil (~mattil@87-92-108-248.bb.dnainternet.fi) (Ping timeout: 256 seconds)
[19:31:43] <mbanck> that's weird
[19:31:57] <mbanck> what command did you run exactly?
[19:33:02] <Siecje> I get it by just running zcat on the file. zcat $file or zcat -d $file
[19:33:22] *** Joins: maciek__ (~maciek@2600:1700:a412:1c00:6076:6f7a:b278:9222)
[19:33:36] <Siecje> zcat --version Apple gzip 352.40.6
[19:33:41] <Siecje> Should I try to install with brew?
[19:33:50] <mbanck> dunno, I don't run Mac OS
[19:34:28] *** Joins: ponsfrilus1 (~Thunderbi@vpn-254-058.epfl.ch)
[19:34:31] *** Joins: gambl0re (~gambl0re@2607:fea8:a59f:c360::78dd)
[19:35:00] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 272 seconds)
[19:35:01] *** ponsfrilus1 is now known as ponsfrilus
[19:35:53] *** Quits: mattil_ (~mattil@helsinki.portalify.com) (Ping timeout: 256 seconds)
[19:36:50] *** Joins: mizi (~mizi@user/mizi)
[19:44:07] *** Quits: tehenderz (~tehenderz@ti0018a400-10077.bb.online.no) (Ping timeout: 256 seconds)
[19:44:41] *** Joins: tehenderz (~tehenderz@ti0018a400-10112.bb.online.no)
[19:45:38] *** Quits: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:51:12] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[19:51:23] *** Quits: maret (~maret@195.12.158.102) (Quit: maret)
[19:51:24] *** Quits: veesh (~veesh@77.137.128.134) (Ping timeout: 250 seconds)
[19:52:10] *** Joins: veesh (~veesh@77.137.128.134)
[19:55:08] <ne2k> Siecje, gunzip -c file.sql.gz | psql
[19:55:16] *** Quits: mrwick (~mrwick@user/mrwick) (Ping timeout: 272 seconds)
[19:57:21] <otisolsen70> If I run pg_basebackup from a master to a slave I am trying to build and a write occurs to the master while pg_basebackup runs. Will I then have to re-run pg_basebackup?
[19:58:03] <ne2k> from my GNU gzip man page:       zcat  is  identical  to  gunzip  -c.   (On  some  systems,  zcat may be installed as gzcat to preserve the original link  to  compress.)
[19:58:43] <otisolsen70> I have to set up replication on a 1+ TB database. And I would really like to only do the initial transfer once.
[19:59:19] <ne2k> Siecje, ^ so I suspect your system has zcat dealing with "compress", which does lz compression and uses .Z extensions, hence the error message. use gunzip -c
[19:59:56] <Siecje> I used gzip and it worked.
[20:00:00] <Siecje> Thanks!
[20:01:20] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[20:01:40] <ne2k> Siecje, this is part of the trouble with MacOS being unix-based. people who use Linux assume that, because most commands are the same, everything is the same. and... it's not
[20:02:12] <ne2k> things being different in subtle, weird ways
[20:02:22] <ilmari> otisolsen70: by default it streams any WAL that happens while the backup is in progress, any writes that happen during the copy will be included
[20:02:36] *** Joins: carragom (~textual@201.204.94.76)
[20:02:42] <otisolsen70> Right.
[20:02:44] <otisolsen70> Thanks
[20:04:35] *** Joins: vlado_ (~vladoski@2001:b07:add:d406:35da:4533:e7d7:7cd6)
[20:05:11] *** Quits: vladoski (~vladoski@2001:b07:add:d406:35da:4533:e7d7:7cd6) (Read error: Connection reset by peer)
[20:06:12] *** Quits: DarkG (~DarkG@user/darkg) (Excess Flood)
[20:06:29] *** Joins: DarkG (~DarkG@user/darkg)
[20:07:43] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[20:10:06] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[20:19:08] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[20:23:31] *** Joins: xocolatl_ (~xocolatl@194.110.113.87)
[20:24:13] <depesz> is there any simple way to revoke all privileges some role has?
[20:24:39] <depesz> i want to drop it, but can't because there are privileges granted. so i have to walk through everything there is and revoke. any idea on how to do it more automatically?
[20:25:50] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[20:26:19] *** Quits: xocolatl (~xocolatl@193.32.126.225) (Ping timeout: 256 seconds)
[20:26:22] *** Joins: aremaref (~aremaref@160.72.16.74)
[20:28:01] *** Joins: epony (epony@user/epony)
[20:28:58] *** Joins: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08)
[20:29:25] *** Parts: jpa (~jpa@2a01:e0a:5cb:6b80:9dd8:d715:f031:d21c) ()
[20:30:32] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 252 seconds)
[20:33:12] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[20:41:20] <Zr40> drop owned by
[20:43:24] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[20:43:40] *** Quits: vlado_ (~vladoski@2001:b07:add:d406:35da:4533:e7d7:7cd6) (Remote host closed the connection)
[20:43:56] *** Parts: gleu (~guillaume@pop.92-184-121-224.mobile.abo.orange.fr) ()
[20:45:56] *** Quits: held (~heldchen@user/held) (Ping timeout: 252 seconds)
[20:46:03] *** Quits: Guest59 (~Guest59@ool-18bccd13.dyn.optonline.net) (Quit: Client closed)
[20:46:23] *** Joins: k8yun (~k8yun@user/k8yun)
[20:50:13] *** Joins: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net)
[20:54:06] *** Joins: carragom (~textual@201.204.94.76)
[20:54:06] *** Joins: hoppity (~hoppity@user/hoppity)
[20:55:48] *** Quits: psoo (~psoo@dslb-002-204-079-161.002.204.pools.vodafone-ip.de) (Ping timeout: 240 seconds)
[20:55:54] <ilmari> privileges don't prevent dropping the role, but ownership does. REASSIGN OWNED and DROP OWNED (in every database)
[20:56:24] *** Joins: held (~heldchen@user/held)
[20:57:04] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Ping timeout: 268 seconds)
[20:59:02] <ilmari> oh, I was wrong, privileges do block it
[21:00:59] *** Quits: TitanOfOld (titan@gentoo/developer/TitanOfOld) (Quit: ZNC - https://znc.in)
[21:01:51] *** Joins: heldchen (~heldchen@user/held)
[21:02:49] *** Joins: TitanOfOld (~titan@gentoo/developer/TitanOfOld)
[21:03:24] *** Quits: Reiner_Unsinn_ (~quassel@p579d7a94.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[21:05:56] *** Quits: held (~heldchen@user/held) (Ping timeout: 250 seconds)
[21:10:16] *** Quits: zlinux (~zlinux@149.109.5.240) (Ping timeout: 250 seconds)
[21:17:15] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[21:22:29] *** Joins: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net)
[21:22:48] *** Joins: econo (uid147250@user/econo)
[21:22:59] *** Quits: aremaref (~aremaref@160.72.16.74) (Ping timeout: 256 seconds)
[21:25:58] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26)
[21:26:35] *** Joins: zlinux (~zlinux@149.109.5.240)
[21:29:17] *** Quits: carragom (~textual@201.204.94.76) (Quit: Textual IRC Client: www.textualapp.com)
[21:31:11] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[21:39:29] *** Quits: kakashiA1 (~kakashi@41.251.116.49) (Ping timeout: 250 seconds)
[21:45:02] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[21:45:37] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[21:45:37] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[21:45:37] *** Joins: hoppity (~hoppity@user/hoppity)
[21:47:14] *** Quits: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:49:42] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:81f:6e:2be2:8546:ba26) (Ping timeout: 250 seconds)
[21:50:18] *** Quits: hoppity (~hoppity@user/hoppity) (Ping timeout: 252 seconds)
[21:51:12] *** Joins: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08)
[21:54:03] *** Joins: carragom (~textual@201.204.94.76)
[21:58:28] *** Joins: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de)
[22:00:44] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[22:00:44] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[22:00:44] *** Joins: hoppity (~hoppity@user/hoppity)
[22:01:31] *** Quits: ponsfrilus (~Thunderbi@vpn-254-058.epfl.ch) (Ping timeout: 256 seconds)
[22:01:53] *** Joins: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch)
[22:02:06] *** Joins: merzo (~Thunderbi@88.155.116.153)
[22:02:25] *** Joins: spacenautx (~spacenaut@user/spacenautx)
[22:05:55] *** Joins: n0fun (~jack@i577BC0A3.versanet.de)
[22:06:31] *** Joins: raptelan (~raptelan@208.127.242.47)
[22:07:57] *** Quits: szkl (uid110435@id-110435.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[22:08:52] *** Joins: otisolsen70_ (~otisolsen@xd4ed80b5.cust.hiper.dk)
[22:08:52] *** Quits: hoppity (~hoppity@user/hoppity) (Read error: Connection reset by peer)
[22:09:16] <raptelan> Hey guys, does anyone know where I can see whether grants have WITH ADMIN OPTION in the catalog?
[22:09:22] *** Joins: hoppity (~hoppity@66.222.130.38)
[22:09:22] *** Quits: hoppity (~hoppity@66.222.130.38) (Changing host)
[22:09:22] *** Joins: hoppity (~hoppity@user/hoppity)
[22:09:32] *** Quits: ponsfrilus (~Thunderbi@adsl-178-39-226-100.adslplus.ch) (Ping timeout: 272 seconds)
[22:09:49] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[22:10:05] *** Quits: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net) (Ping timeout: 252 seconds)
[22:11:07] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[22:11:34] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[22:11:34] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[22:11:34] *** Joins: hoppity (~hoppity@user/hoppity)
[22:11:43] *** Joins: EvanCarroll (~ecarroll@68-78-105-35.lightspeed.hstntx.sbcglobal.net)
[22:12:16] <ilmari> raptelan: pg_auth_members.admin_option
[22:12:36] *** Quits: tehenderz (~tehenderz@ti0018a400-10112.bb.online.no) (Ping timeout: 240 seconds)
[22:12:46] <ilmari> https://www.postgresql.org/docs/current/catalog-pg-auth-members.html
[22:12:55] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Ping timeout: 268 seconds)
[22:13:20] *** Joins: tehenderz (~tehenderz@ti0018a400-10211.bb.online.no)
[22:14:43] *** Quits: otisolsen70_ (~otisolsen@xd4ed80b5.cust.hiper.dk) (Remote host closed the connection)
[22:17:23] *** Quits: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net) (Ping timeout: 256 seconds)
[22:17:41] <raptelan> ilmari: cheers
[22:18:28] *** Joins: aremaref (~aremaref@107-198-1-161.lightspeed.irvnca.sbcglobal.net)
[22:21:53] *** Joins: sakasama (~sakasama@user/sakasama)
[22:26:08] *** Joins: merzo1 (~Thunderbi@192.162.238.196)
[22:26:29] *** Quits: jtomas (~jtomas@210.red-88-24-179.staticip.rima-tde.net) (Ping timeout: 268 seconds)
[22:26:36] *** Quits: fef (~thedawn@user/thedawn) (Remote host closed the connection)
[22:29:24] *** Quits: merzo (~Thunderbi@88.155.116.153) (Ping timeout: 240 seconds)
[22:29:33] *** merzo1 is now known as merzo
[22:32:01] *** Quits: the_lanetly_052 (~the_lanet@194.135.167.54) (Ping timeout: 245 seconds)
[22:34:08] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Remote host closed the connection)
[22:34:12] *** Quits: zemis (~zemis@ip-89-176-21-138.net.upcbroadband.cz) (Ping timeout: 240 seconds)
[22:35:01] *** Quits: AceSlash (~slash@cosium-fo-152-18.fib.nerim.net) (Quit: Leaving)
[22:44:49] *** Quits: darutoko (~darutoko@92.125.59.255) (Quit: Leaving)
[22:44:49] *** Quits: fcr (~fran@r167-60-35-197.dialup.adsl.anteldata.net.uy) (Read error: Connection reset by peer)
[22:46:02] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[22:53:30] *** Joins: fcr (~fran@r186-48-67-193.dialup.adsl.anteldata.net.uy)
[22:54:30] *** Quits: Reiner_Unsinn (~quassel@p579d7a94.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[22:54:37] *** Joins: Reiner_Unsinn (~quassel@p4fd6db85.dip0.t-ipconnect.de)
[22:55:47] *** Quits: justAstache (~justache@user/justache) (Ping timeout: 272 seconds)
[22:58:36] *** Quits: DevAntoi_ (~DevAntoin@2a01:e34:ec18:50c0:e505:d7c0:c703:adc2) (Remote host closed the connection)
[22:59:00] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[22:59:07] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:e505:d7c0:c703:adc2)
[22:59:33] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[22:59:33] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[22:59:33] *** Joins: hoppity (~hoppity@user/hoppity)
[23:00:21] *** Quits: hoppity (~hoppity@user/hoppity) (Remote host closed the connection)
[23:00:33] *** Joins: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net)
[23:00:33] *** Quits: hoppity (~hoppity@mobile-166-172-56-167.mycingular.net) (Changing host)
[23:00:33] *** Joins: hoppity (~hoppity@user/hoppity)
[23:01:07] *** Quits: jhammerman (~joe.hamme@98.246.188.6) (Quit: jhammerman)
[23:02:51] *** Quits: merzo (~Thunderbi@192.162.238.196) (Read error: Connection reset by peer)
[23:03:29] *** Quits: Xelnor (xelnor@2a01:e34:ec7b:5e70::2) (Quit: \"Fatal error in /dev/brain : no neuron found\")
[23:03:37] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:e505:d7c0:c703:adc2) (Ping timeout: 256 seconds)
[23:04:28] *** Joins: ur5us_ (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8)
[23:06:52] *** Joins: Xelnor (xelnor@2a01:e34:ec7b:5e70::2)
[23:07:13] <G_SabinoMullane> \quit
[23:07:17] *** Quits: G_SabinoMullane (~G_SabinoM@pool-72-94-251-236.phlapa.fios.verizon.net) (Quit: leaving)
[23:09:24] *** Quits: ur5us_ (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8) (Ping timeout: 240 seconds)
[23:09:36] *** Joins: merzo (~Thunderbi@192.162.238.196)
[23:12:33] *** Quits: TMM_ (hp@amanda.tmm.cx) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[23:12:37] *** Joins: Auron (Auron956@user/auron)
[23:12:39] *** Joins: TMM_ (hp@amanda.tmm.cx)
[23:16:08] *** Parts: strk (~strk@user/strk) (WeeChat 3.4)
[23:18:19] *** Quits: f3f3lix (~weechat@55d4a3d9.access.ecotel.net) (Ping timeout: 256 seconds)
[23:19:03] *** Joins: urandom2 (~urandom30@2600:1700:1474:4b70:c0f2:8795:999e:f9f3)
[23:20:05] *** Joins: f3f3lix (~weechat@55d4a3d9.access.ecotel.net)
[23:22:45] *** Joins: kitsunenokenja (~kitsunech@68.91.220.96)
[23:24:12] *** Quits: carragom (~textual@201.204.94.76) (Quit: My iMac has gone to sleep. ZZZzzz…)
[23:27:11] *** Quits: urandom2 (~urandom30@2600:1700:1474:4b70:c0f2:8795:999e:f9f3) (Quit: Leaving)
[23:28:00] *** Quits: rufito (~phil@186-79-11-47.baf.movistar.cl) (Quit: Leaving)
[23:30:05] *** Joins: justAstache (~justache@user/justache)
[23:30:11] *** Quits: Stanley (~stanley@d66-183-88-69.bchsia.telus.net) (Quit: ZNC - https://znc.in)
[23:30:27] *** Joins: Stanley (~stanley@d66-183-88-69.bchsia.telus.net)
[23:34:57] *** Quits: magla (~gelignite@55d47d67.access.ecotel.net) (Quit: Stay safe!)
[23:35:09] *** Joins: jhammerman (~joe.hamme@205.209.24.227)
[23:35:34] *** Quits: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:36:41] *** Joins: urandom9000 (~urandom30@2600:1700:1474:4b70:c0f2:8795:999e:f9f3)
[23:38:33] *** Joins: DNH (~DNH@2a02:8109:b740:2c4:254f:fda4:cde:8b08)
[23:39:42] *** Quits: dim (~dimlibera@2a02:2178:2:4:1658:d0ff:fe49:408c) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[23:40:05] *** Joins: dim (~dimlibera@212.85.154.83)
[23:41:49] *** Quits: AteBall (~AteBall@188.27.97.49) (Ping timeout: 256 seconds)
[23:41:56] *** Quits: vodkra (~vodkra@user/vodkra) (Ping timeout: 252 seconds)
[23:42:05] *** Quits: rvgate (~rvgate@user/rvgate) (Quit: Ping timeout (120 seconds))
[23:42:44] *** Joins: vodkra (~vodkra@user/vodkra)
[23:42:46] *** Joins: rvgate (~rvgate@user/rvgate)
[23:43:05] *** Quits: geman (~geman@user/geman) (Quit: ZNC - http://znc.in)
[23:43:08] *** Quits: Exa (exa@irc.moe) (Quit: see ya!)
[23:43:55] *** Joins: Exa (exa@irc.moe)
[23:46:27] *** Quits: merzo (~Thunderbi@192.162.238.196) (Ping timeout: 250 seconds)
[23:49:24] *** Quits: raptelan (~raptelan@208.127.242.47) (Quit: leaving)
[23:51:09] *** Quits: Zr40 (~zr40@user/zr40) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[23:51:21] *** Joins: Zr40 (~zr40@user/zr40)
[23:52:01] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 256 seconds)
[23:52:09] *** Joins: cliluw (~cliluw@47.147.77.43)
[23:52:31] *** Quits: FastJack (~fastjack@ip-078-094-022-014.um19.pools.vodafone-ip.de) (Ping timeout: 250 seconds)
[23:52:56] *** Quits: kvn (~weechat@user/kvn) (Ping timeout: 252 seconds)
[23:53:36] *** Joins: FastJack (~fastjack@ip-078-094-022-014.um19.pools.vodafone-ip.de)
[23:54:28] *** Joins: kvn_ (~weechat@user/kvn)
[23:55:41] *** Joins: ur5us_ (~ur5us@2406:e002:6804:8a01:f026:9131:1160:dcf8)
[23:58:36] *** Quits: maciek__ (~maciek@2600:1700:a412:1c00:6076:6f7a:b278:9222) (Ping timeout: 240 seconds)
