[00:00:39] *** Quits: saba4ka-mumu (~efsearfc@81.177.126.15) (Ping timeout: 256 seconds)
[00:02:13] *** Quits: Volgaar (~volgaar@2a01:cb14:675:e500:e1a8:ddac:588e:abe1) (Quit: WeeChat 3.4)
[00:06:58] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[00:13:06] *** Joins: saba4ka-mumu (~efsearfc@213.24.127.81)
[00:14:21] *** Quits: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[00:17:39] *** Quits: qwedfg (~qwedfg@user/qwedfg) (Ping timeout: 256 seconds)
[00:20:09] *** Joins: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de)
[00:25:27] *** Joins: JGod-P666-45 (~JGod-P666@213.237.90.59)
[00:32:53] *** Quits: JGod-P666-45 (~JGod-P666@213.237.90.59) (Quit: Connection closed)
[00:33:55] *** Joins: JGod-P666-452 (~JGod-P666@213.237.90.59)
[00:34:19] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 256 seconds)
[00:37:06] *** Quits: JGod-P666-452 (~JGod-P666@213.237.90.59) (Client Quit)
[00:38:01] *** Joins: qwedfg (~qwedfg@user/qwedfg)
[00:57:56] *** Quits: wyatt8750 (~wyatt8740@104.168.34.155) (Read error: Connection reset by peer)
[01:00:37] *** Quits: saba4ka-mumu (~efsearfc@213.24.127.81) (Ping timeout: 240 seconds)
[01:12:43] *** Joins: saba4ka-mumu (~efsearfc@213.24.135.7)
[01:15:33] *** Quits: Aeyesi (~Aeyesi@185.148.214.170) (Quit: Connection closed)
[01:17:05] *** Quits: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[01:17:21] *** Joins: wcpan (~quassel@2400:8902::f03c:91ff:fee0:f952)
[01:19:37] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 240 seconds)
[01:20:00] *** Joins: jshanab (~jshanab@207.67.123.194)
[01:21:10] *** Joins: Jan\ (~kvirc@104.204.200.69)
[01:24:17] *** Quits: jkwnki (~jkwnki@p4fedb869.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[01:24:27] <jshanab> I have been trying for a long time to get a c++ program using libavformat to stream to an html5 element across a rest interface. When I run ffmpeg on the command line and create a fragmented file it plays fine in html using Media Source Extensions. When I write out a file from c++ ffplay will play the video. But the browser just shows black.
[01:24:28] <jshanab> Different browsers respond a bit differntly but I cannot get it to work.
[01:26:26] <jshanab> Most examples on stack overflow are 10 years old, documentation is doxygen and requires a lot of revers engineering. The sample code does not seem to do it.  There are a lot of options, Any hints would be greatly greatly appreciated.
[01:41:34] *** Quits: fannagoganna (uid110488@id-110488.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[01:43:33] <jshanab> oh, I should mention the source is "frames" where the keyframe has sn sps, pps, and keyframe seaparted by 00 00 00 01.  If fed into libavcodec, it decodes properly
[01:47:01] *** Quits: dingdreher (~dingdrehe@2a02:aa08:401e:fff2:a824:9afd:6d29:d02c) (Quit: dingdreher)
[01:55:23] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[02:02:23] *** Joins: fannagoganna (uid110488@id-110488.tinside.irccloud.com)
[02:30:44] *** Joins: System_Error (~SystemErr@user/systemerror)
[02:42:17] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[03:09:57] *** Joins: noarb (~noarb@user/noarb)
[03:36:12] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Quit: Goodbye.)
[03:38:41] *** Joins: mven (~mven@ip68-104-39-54.lv.lv.cox.net)
[03:52:58] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[03:53:00] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Client Quit)
[04:12:02] *** Quits: Kruppt (~Kruppt@50-111-49-4.drhm.nc.frontiernet.net) (Quit: Leaving)
[04:21:15] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Quit: Goodbye.)
[04:31:34] *** Quits: fannagoganna (uid110488@id-110488.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[04:35:39] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[04:38:10] *** Joins: mven (~mven@ip68-104-39-54.lv.lv.cox.net)
[04:41:03] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Client Quit)
[04:41:31] *** Joins: mven (~mven@ip68-104-39-54.lv.lv.cox.net)
[04:50:25] *** Joins: myon98 (~myon98@user/myon98)
[05:00:55] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[05:05:41] *** Quits: rv1sr (~rv1sr@user/rv1sr) ()
[05:15:32] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:17:22] *** Quits: oriba (~oriba@dynamic-077-191-250-060.77.191.pool.telefonica.de) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[05:18:03] *** Joins: vlm (~vlm@user/vlm)
[05:23:54] <znf> jshanab, I may be understanding this wrong - but what container are you putting those frames into?
[05:26:01] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:27:51] *** Quits: KombuchaKip (~kip@192.252.230.5) (Ping timeout: 256 seconds)
[05:28:24] *** Joins: vlm (~vlm@user/vlm)
[05:53:09] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:56:51] *** Quits: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4) (Ping timeout: 256 seconds)
[05:59:46] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[06:01:21] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[06:02:10] *** Joins: vlm (~vlm@user/vlm)
[06:05:37] *** Quits: eXtr3m0 (~eXtr3m0@user/eXtr3m0) (Ping timeout: 240 seconds)
[06:09:15] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[06:14:12] *** Quits: x_kuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[06:15:17] *** Joins: vlm (~vlm@user/vlm)
[06:20:24] *** Parts: noarb (~noarb@user/noarb) ()
[06:21:27] *** Joins: Fohsap (~Muimi@2001:19f0:6001:e4d:5400:3ff:fe41:8d5b)
[06:22:27] *** Quits: minimal (~minimal@user/minimal) (Quit: Leaving)
[06:29:49] *** Joins: guest (~guest@124.126.139.136)
[06:29:55] *** Quits: c7s (~c7s@user/c7s) (Quit: c7s)
[06:34:20] *** Joins: c7s (~c7s@user/c7s)
[06:41:24] *** Quits: itsalexjones (~itsalexjo@82.4.99.241) (Read error: Connection reset by peer)
[06:48:39] *** Quits: guest (~guest@124.126.139.136) (Ping timeout: 256 seconds)
[06:49:38] *** Quits: fkaa (~fkaa@user/fkaa) (Remote host closed the connection)
[06:50:07] *** Quits: jos1 (~jos3@host-091-097-190-061.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
[06:57:13] *** Joins: Vonter (~Vonter@user/vonter)
[07:03:04] *** Joins: jos1 (~jos3@dyndsl-091-096-035-030.ewe-ip-backbone.de)
[07:14:10] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[07:49:07] *** Quits: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com) (Quit: Leaving)
[07:49:52] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Quit: Goodbye.)
[08:08:51] *** Quits: darkapex_ (~darkapex@user/darkapex) (Ping timeout: 250 seconds)
[08:10:23] *** Joins: dvanloon8 (~dvanloon@user/dvanloon)
[08:11:37] *** Quits: dvanloon (~dvanloon@user/dvanloon) (Ping timeout: 240 seconds)
[08:11:37] *** dvanloon8 is now known as dvanloon
[08:13:25] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[08:19:11] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[08:24:50] *** Joins: mven (~mven@ip68-104-39-54.lv.lv.cox.net)
[08:51:03] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 256 seconds)
[08:52:29] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[08:57:51] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 256 seconds)
[09:02:06] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:02:21] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[09:16:11] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[09:24:55] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:25:12] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[09:33:33] *** Quits: c7s (~c7s@user/c7s) (Ping timeout: 256 seconds)
[09:42:22] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:42:37] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[09:46:18] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-cd89-01e8-2e2b-f64f.res6.spectrum.com) (Quit: jarthur)
[09:49:00] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[09:49:15] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:00:06] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[10:03:18] *** Joins: MG2021 (MG2021@gateway/vpn/protonvpn/mg2021)
[10:03:53] <MG2021> hi
[10:12:39] *** Quits: MG2021 (MG2021@gateway/vpn/protonvpn/mg2021) (Ping timeout: 256 seconds)
[10:12:47] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[10:13:03] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:18:38] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[10:22:40] *** Quits: s1b1 (~s1b1@user/s1b1) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[10:23:54] *** Quits: theracermaster (~theracerm@52.79.209.35.bc.googleusercontent.com) (Quit: theracermaster)
[10:25:42] *** Joins: Buster_ (~Buster@buster-net.ru)
[10:25:45] *** Joins: theracermaster (~theracerm@52.79.209.35.bc.googleusercontent.com)
[10:29:31] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[10:29:47] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:36:09] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[10:36:24] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[10:56:39] *** Quits: System_Error (~SystemErr@user/systemerror) (Ping timeout: 276 seconds)
[10:59:56] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[11:00:11] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[11:00:39] *** Joins: s1b1 (~s1b1@user/s1b1)
[11:04:13] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[11:09:43] *** Joins: darkapex (~darkapex@user/darkapex)
[11:13:33] *** Joins: Vonter (~Vonter@user/vonter)
[11:14:50] *** Joins: jueying (~jueying@61.16.102.73)
[11:22:09] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[11:23:35] *** Joins: Volgaar (~volgaar@lfbn-lyo-1-1616-10.w90-52.abo.wanadoo.fr)
[11:23:46] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[11:24:01] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[11:36:21] *** Quits: mven (~mven@ip68-104-39-54.lv.lv.cox.net) (Quit: Goodbye.)
[11:38:13] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[11:44:13] *** Joins: mven (~mven@ip68-104-39-54.lv.lv.cox.net)
[11:46:34] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[11:46:50] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[11:48:30] *** Joins: guest (~guest@124.126.139.136)
[11:58:14] *** Joins: MG20214 (MG2021@gateway/vpn/protonvpn/mg2021)
[11:59:36] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[12:00:03] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[12:05:32] *** Joins: someuser (~user@197.54.43.98)
[12:06:46] *** Quits: guest (~guest@124.126.139.136) (Ping timeout: 250 seconds)
[12:12:46] *** Joins: xkuru (~xkuru@user/xkuru)
[12:14:43] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[12:16:11] *** Quits: nrg (~NRG@user/nrg) (Quit: ZNC - https://znc.in)
[12:17:11] *** Joins: Vonter (~Vonter@user/vonter)
[12:21:17] *** Quits: Buster_ (~Buster@buster-net.ru) (Ping timeout: 256 seconds)
[12:21:30] *** Joins: nrg (~NRG@user/nrg)
[12:23:03] *** Quits: l4yer (~l4yer@2001:ac8:31:8900:1012:1bf5:ba27:3ee) (Remote host closed the connection)
[12:23:19] *** Joins: rv1sr (~rv1sr@user/rv1sr)
[12:24:15] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[12:24:31] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[12:26:15] *** Joins: blaze (~blaze@user/blaze)
[12:31:21] *** Joins: GuiToris (~GuiToris@user/guitoris)
[12:31:47] <GuiToris> hello, how can I find out how long my video is precisely?
[12:36:45] *** Joins: rsx (~dummy@ppp-188-174-153-123.dynamic.mnet-online.de)
[12:42:27] *** Quits: blaze (~blaze@user/blaze) (Quit: WeeChat 3.3)
[12:48:09] *** Joins: lavaball (felix@31.204.155.215)
[12:51:25] *** Joins: mirv81 (~mirv@93-34-38-91.ip48.fastwebnet.it)
[12:51:35] <rv1sr> GuiToris: You can use ffprobe to get the duration of individual streams
[12:52:05] <mirv81> Possible to add metadata when video recording stops?
[12:53:00] <rv1sr> Sure, process another time with copy codec and insert metadata then
[12:54:55] <mirv81> Create metadata is being generated during recording so I need to add (augment) it when done. I DONT want to create a temp file, add metadata, create new file  then delete temp file. Just add the metadata when recording stops…
[12:56:26] <rv1sr> Not possible with ffmpeg as far as I can tell. You always have to provide input and output streams
[12:57:27] <rv1sr> You count however process the video and audio separately, generate your metadata meanwhile, after just mux video+audio+metadata into a single container
[12:57:45] <rv1sr> Should to the trick without any additional steps involved
[12:58:00] <rv1sr> Just do the encoding and muxing manually instead of letting ffmpeg do it all at once
[12:58:21] *** Quits: someuser (~user@197.54.43.98) (Ping timeout: 256 seconds)
[12:59:52] <GuiToris> rv1sr, I found it, thank you :)
[13:00:30] <mirv81> rv1sr, here’s my current code:
[13:00:30] <mirv81>                 'raspivid -t 0 -n -md 4 -w 1920 -h 960 -fps 20 -g 20 -ex sports -ih -b 17000000 -3d sbs -co -15 -fli auto -pf baseline  -o - | ffmpeg -y -f alsa -ac 2 -acodec pcm_s32le -sample_rate 11025 -thread_queue_size 2048 -i hw:0,0 -r 20.00735  -thread_queue_size 2048 -i - -f mp4 -c:v copy -c:a aac -b:a 128k -ac 2 -ar 44100 -movflags
[13:00:31] <mirv81> +faststart -filter:a "volume=90,afade=t=in:ss=0:d=5,aresample=async=1" '+ 'test.mp4'
[13:01:30] <mirv81> Basically Raspivid (to get video) > ffmpeg (to add audio from mic)
[13:01:58] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Quit: WeeChat 3.4)
[13:02:48] <rv1sr> Yeah I see, with ffmpeg you will need to store input and output at the same time at some point
[13:03:13] <rv1sr> No idea how (or if at all) you could do what you need using ffmpeg alone
[13:03:14] <mirv81> The text I want to insert is a json object that’s being gradually updated during recording…
[13:04:15] <furq> how big is this json file
[13:04:17] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 240 seconds)
[13:04:20] <rv1sr> I'd save the video and audio separately, gather relevant information and when all 3 streams are complete (audio, video, metadata) mux them together in one final step
[13:04:24] <furq> or how big could it be
[13:04:29] <rv1sr> but that requires storing all data twice at some point in time
[13:04:34] <mirv81> Huge.
[13:04:34] <rv1sr> which you cant to avoid
[13:04:43] <rv1sr> have to solution for this with plain ffmpeg
[13:05:12] <rv1sr> s/to/no/
[13:05:15] <mirv81> What I found out is that this (huge) text file can be stored entirely in the title metadata tag
[13:05:51] <furq> you're already writing the file twice by using -movflags faststart and not -moov_size
[13:06:38] <mirv81> -moov_size?
[13:07:04] <furq> https://ffmpeg.org/ffmpeg-formats.html#toc-mov_002c-mp4_002c-ismv
[13:08:08] <rv1sr> Elegant solution, didn't know about it
[13:08:24] <furq> the title tag is in the moov atom so you could potentially make that huge and store the file in there afterwards
[13:08:27] <furq> but not with ffmpeg
[13:08:34] <furq> maybe you can do it with the api
[13:08:51] <furq> that seems like it would be prone to wasting a lot of space though
[13:09:52] <mirv81> furq: so, remove -movflags faststart with -moov_size?
[13:09:58] <furq> no you need both
[13:11:00] <mirv81> So, keep -movflags faststart and add -moov_size
[13:11:54] <mirv81> What would be a safe byte size?
[13:12:25] <rv1sr> Depends on your additional data to be inserted afterwards
[13:13:08] <rv1sr> Don't know if reserving a few KB more would hurt here
[13:13:28] <rv1sr> Not really that wasteful compared to a video stream I think
[13:14:42] *** Joins: l4yer (~l4yer@2001:ac8:31:8900:1011:924a:b1e3:99a5)
[13:17:16] <mirv81> What would be a good value here?
[13:19:19] <mirv81> Assuming metadata is a large text file.
[13:20:22] <rv1sr> Not knowing how many butes a regular moov atom tages I'd start with the size of your json + 4 KB or something like that
[13:20:26] <rv1sr> *bytes
[13:22:31] <AMM> How large is large? 512Kib? 2MiB? 32MiB?
[13:24:19] *** Quits: mirv81 (~mirv@93-34-38-91.ip48.fastwebnet.it) (Quit: Connection closed)
[13:37:29] *** Quits: Volgaar (~volgaar@lfbn-lyo-1-1616-10.w90-52.abo.wanadoo.fr) (Quit: WeeChat 3.4)
[13:39:13] *** Joins: mirv80 (~mirv@93-34-38-91.ip48.fastwebnet.it)
[13:40:14] <mirv80> Hmm.
[13:41:18] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[13:43:29] *** Quits: mirv80 (~mirv@93-34-38-91.ip48.fastwebnet.it) (Client Quit)
[13:44:37] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Ping timeout: 240 seconds)
[13:55:55] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 256 seconds)
[14:02:43] *** Quits: MG20214 (MG2021@gateway/vpn/protonvpn/mg2021) (Ping timeout: 256 seconds)
[14:04:28] *** Joins: Vonter (~Vonter@user/vonter)
[14:18:34] *** Joins: MajorBiscuit (~MajorBisc@86-88-79-148.fixed.kpn.net)
[14:51:50] *** Joins: JGod-P666-45 (~JGod-P666@213.237.90.59)
[14:51:54] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[14:52:22] *** Quits: JGod-P666-45 (~JGod-P666@213.237.90.59) (Client Quit)
[14:55:03] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[14:55:51] *** Quits: bitblit_ (~bitblit@gateway/tor-sasl/bitblit) (Ping timeout: 276 seconds)
[15:00:15] *** Joins: Buster_ (~Buster@buster-net.ru)
[15:01:07] *** Joins: bitblit_ (~bitblit@gateway/tor-sasl/bitblit)
[15:04:59] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[15:05:03] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[15:14:20] *** Joins: fkaa (~fkaa@user/fkaa)
[15:18:13] *** Joins: Vonter (~Vonter@user/vonter)
[15:24:06] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[15:25:07] *** Quits: MajorBiscuit (~MajorBisc@86-88-79-148.fixed.kpn.net) (Ping timeout: 256 seconds)
[15:34:19] *** Joins: eXtre3m0 (~eXtr3m0@user/eXtr3m0)
[16:03:47] *** Joins: MajorBiscuit (~MajorBisc@86-88-79-148.fixed.kpn.net)
[16:04:53] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[16:11:19] *** Joins: Vonter (~Vonter@user/vonter)
[16:32:11] <pa> hi folks
[16:32:27] <pa> so ffmpeg can capture and encode the screen. I was wondering if you are aware of any solution able to do remote desktop on top of that?
[16:32:33] <pa> basically sending back keyboard/mouse events
[16:33:19] <pa> bonus if such a solution could either create, or just connect (ala X11VNC) to an existing session
[16:33:31] <pa> (offscreen)
[16:40:41] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[16:54:08] *** Joins: tlacatlc6 (~tlacatlc6@097-101-132-062.res.spectrum.com)
[16:55:32] *** Joins: x_kuru (~xkuru@user/xkuru)
[16:56:57] *** Quits: xkuru (~xkuru@user/xkuru) (Ping timeout: 240 seconds)
[17:08:22] *** Joins: someuser (~user@197.54.43.98)
[17:18:31] *** Joins: Aeyesi (~Aeyesi@185.148.214.170)
[17:19:06] <Aeyesi> Hello, could anyone help me please with this? [AVHWDeviceContext @ 0x562f7719c600] libva: /usr/lib/x86_64-linux-gnu/dri/iHD_drv_video.so init failed ... it is way beyond my skill to figure out ~
[17:19:28] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[17:20:18] <Aeyesi> I am basically trying to use  -hwaccel qsv -c:v h264_qsv ... but it fails with this error
[17:20:20] <kepstin> Aeyesi: that's usually an ignorable warning, means either you don't have that specific driver installed or that's not the driver for your card (vaapi might still be working perfectly fine with a different driver)
[17:20:39] <kepstin> oh, qsv? use the vaapi drivers :/
[17:21:05] <kepstin> qsv is annoying to set up, vaapi works out of the box on basically all linux distros.
[17:21:07] <Aeyesi> I am ... they should even be installed
[17:22:51] <kepstin> use -hwaccel vaapi -c:v h264_vaapi
[17:23:42] <Aeyesi> "unknown decoder"
[17:24:26] <kepstin> oh, you only need to specify the -c:v as an encoder
[17:24:35] <kepstin> the default decoder uses the hwaccel
[17:24:41] <Aeyesi> https://pastebin.com/qJWybQMh
[17:25:07] <Aeyesi> let me try again
[17:25:43] <kepstin> like i said, don't bother with the qsv stuff, use the vaapi interface instead.
[17:25:55] *** Joins: Kei_N_ (~Kei_N@user/kei-n/x-2886111)
[17:26:40] <kepstin> https://trac.ffmpeg.org/wiki/Hardware/VAAPI is the reference for using vaapi with ffmpeg
[17:26:59] <Aeyesi> but you got like 90% of experience I lack, so thanks for pointing out
[17:28:17] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Ping timeout: 240 seconds)
[17:28:31] <Aeyesi> So i tried "ffmpeg -vaapi_device /dev/dri/renderD128 -i input.mp4 -vf 'format=nv12,hwupload' -c:v h264_vaapi -b:v 5M output.mp4" and got again "libva: /usr/lib/x86_64-linux-gnu/dri/iHD_drv_video.so init failed"
[17:28:56] *** Quits: GuiToris (~GuiToris@user/guitoris) (Remote host closed the connection)
[17:29:16] <Aeyesi> followed by : "Failed to initialise VAAPI connection: -1 (unknown libva error)."
[17:30:17] <jkqxz> What hardware are you trying to run this on?
[17:31:15] <Aeyesi> Uff x86_64 Intel (bay trail I think?)
[17:31:17] *** Quits: Vonter (~Vonter@user/vonter) (Read error: Connection reset by peer)
[17:32:44] <jkqxz> Try "cat /proc/cpuinfo | grep 'model name' | head -1"?
[17:33:06] <jkqxz> Though if it's Bay Trail it will not work at all with the iHD driver.  You need the i965 driver.
[17:33:28] *** Joins: Vonter (~Vonter@user/vonter)
[17:34:24] <Aeyesi> Jeez, stupid me then... Intel(R) Celeron(R) CPU  N2830 ... it uses only few watts and I had no use for it so I though I could create a small video NAS out of it
[17:36:29] <jkqxz> Yeah, that'll work fine with the older driver.
[17:37:46] <jkqxz> The name of the package varies a bit by distribution; if you're on Debian or a derivative then you want the package "i965-va-driver-shaders".
[17:41:04] <Aeyesi> It is ubuntu
[17:41:11] <Aeyesi> server version*
[17:41:39] <Aeyesi> (so yeah I found it)
[17:42:54] *** Quits: Vonter (~Vonter@user/vonter) (Read error: Connection reset by peer)
[17:44:25] *** Joins: palasso (~palasso@user/palasso)
[17:44:26] <Aeyesi> I installed the package ... and I keep getting "[AVHWDeviceContext @ 0x56442d47a600] libva: /usr/lib/x86_64-linux-gnu/dri/iHD_drv_video.so init failed" ... why is it purposely looking for the iHD ?
[17:44:31] *** Quits: MajorBiscuit (~MajorBisc@86-88-79-148.fixed.kpn.net) (Ping timeout: 256 seconds)
[17:44:44] *** Quits: Buliarous (~gypsydang@46.232.210.139) (Ping timeout: 268 seconds)
[17:44:51] *** Joins: Vonter (~Vonter@user/vonter)
[17:45:19] <Aeyesi> Is it because I compiled the ffmpeg with the "--enable-vaapi" ?
[17:45:25] *** Quits: Kei_N_ (~Kei_N@user/kei-n/x-2886111) (Ping timeout: 256 seconds)
[17:47:22] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[17:48:17] <jkqxz> It's libva which makes the default decision, unrelated to ffmpeg.  There was some confusion in the transition, it might work if you uninstall the newer driver.
[17:49:08] *** Joins: MG2021 (MG2021@gateway/vpn/protonvpn/mg2021)
[17:49:22] <MG2021> hi
[17:49:25] <jkqxz> You can override the choice in ffmpeg with "ffmpeg -init_hw_device vaapi:/dev/dri/renderD128,driver=i965 ..." rather than using "-vaapi_device".
[17:50:00] <MG2021> any news about bink 2 (bk2) format support by ffmpeg
[17:52:00] *** Joins: minimal (~minimal@user/minimal)
[17:53:10] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 260 seconds)
[17:53:36] <BtbN> The devel ML is public, so you can check yourself if anyone happened to send a patch.
[17:56:07] <Aeyesi> jkqxz and kepstin thank you for help, it works!
[18:01:43] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[18:04:34] *** Joins: Vonter (~Vonter@user/vonter)
[18:06:20] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[18:06:36] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[18:08:53] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[18:14:13] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 250 seconds)
[18:15:00] *** Joins: Kruppt (~Kruppt@50-111-52-16.drhm.nc.frontiernet.net)
[18:17:56] <JEEB> jkqxz: btw wasn't the libva thing also affected by env var, so if you happen to have an env var set that prefers iHD then it will end up picking that first?
[18:21:22] <zeromind> i only know about there being one for vdpau (VDPAU_DRIVER), which i set here because it also tries to load nvidia by default
[18:22:06] <JEEB> LIBVA_DRIVER_NAME apparently
[18:22:18] <zeromind> without VDPAU_DRIVER=radeonsi even vdpauinfo just goes 'Failed to open VDPAU backend libvdpau_nvidia.so: cannot open shared object file: No such file or directory'
[18:22:18] <JEEB> lol https://github.com/intel/media-driver/issues/621
[18:22:35] <zeromind> lol
[18:22:51] <jkqxz> JEEB:  Yes, LIBVA_DRIVER_NAME.  The API setting used by init_hw_device overrides that (it's API-set value > env var > default guessed from device), hence the suggestion.
[18:23:05] <JEEB> right
[18:30:21] *** Quits: l4yer (~l4yer@2001:ac8:31:8900:1011:924a:b1e3:99a5) (Ping timeout: 245 seconds)
[18:56:58] *** Joins: jarthur (~jarthur@2603-8080-1540-002d-708d-a2f0-bac0-934a.res6.spectrum.com)
[19:00:22] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[19:07:18] *** Quits: havona (sid299542@id-299542.helmsley.irccloud.com) ()
[19:07:41] *** Joins: Vonter (~Vonter@user/vonter)
[19:10:05] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[19:11:47] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[19:12:03] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[19:14:45] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[19:18:24] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[19:18:39] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[19:26:10] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 250 seconds)
[19:28:13] *** Quits: Aeyesi (~Aeyesi@185.148.214.170) (Ping timeout: 256 seconds)
[19:31:28] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[19:33:47] *** Joins: Hackerpcs (~user@user/hackerpcs)
[19:34:03] *** Quits: Hackerpcs (~user@user/hackerpcs) (Max SendQ exceeded)
[19:35:10] *** Joins: Hackerpcs (~user@user/hackerpcs)
[19:42:11] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[19:42:27] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:06:01] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[20:06:16] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:06:29] *** Joins: Vonter (~Vonter@user/vonter)
[20:08:31] *** Joins: lavaball (felix@31.204.155.215)
[20:19:29] *** Joins: itsalexjones (~itsalexjo@82.4.99.241)
[20:29:31] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[20:29:45] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:34:12] *** Joins: VarunAgw (~VarunAgw@aftr-62-216-202-63.dynamic.mnet-online.de)
[20:37:41] *** Quits: lavaball (felix@31.204.155.215) (Ping timeout: 256 seconds)
[20:40:42] *** Quits: VarunAgw (~VarunAgw@aftr-62-216-202-63.dynamic.mnet-online.de) (Ping timeout: 250 seconds)
[20:46:13] *** Quits: Kei_N (~Kei_N@user/kei-n/x-2886111) (Read error: Connection reset by peer)
[20:46:28] *** Joins: Kei_N (~Kei_N@user/kei-n/x-2886111)
[20:49:30] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[20:49:33] <intrac> hi, is h264_nvenc still the correct name for HW encoding on Nvidia cards?
[20:49:52] <intrac> this was working before a system update, but now isn't listed as a codec
[20:51:31] *** Joins: cosimone (~user@2001:b07:ae5:db26:c24a:d20:4d91:1e20)
[20:51:43] *** Joins: djk (~Thunderbi@pool-72-76-214-169.nwrknj.fios.verizon.net)
[20:52:08] <intrac> I see no mention of nvenc in the -codecs output
[20:52:43] <intrac> ffmpeg-4 (4.2.1-pm152.2.9.5) (Packman)
[20:53:31] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[20:53:51] *** Joins: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e)
[20:56:48] *** Joins: Volgaar (~volgaar@147.94.235.41)
[21:01:49] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 256 seconds)
[21:15:12] *** Quits: rsx (~dummy@ppp-188-174-153-123.dynamic.mnet-online.de) (Quit: rsx)
[21:27:28] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[21:27:51] <znf> intrac, that means your binary has no support for it
[21:32:14] <intrac> znf: right. I wonder why the packman version has (seemingly) dropped it
[21:32:32] <znf> Wouldn't be able to tell you, ask the packager
[21:32:39] <intrac> znf: would this be in the core ffmpeg binary (not one of the libav* packages)?
[21:32:59] <intrac> just wondering if I'm missing a dependency
[21:33:18] <intrac> you say binary, so I guess that means the ffmpeg package itself
[21:33:52] <znf> yes, I mean the binary itself
[21:34:08] <intrac> thanks
[21:34:11] <znf> when you run "ffmpeg", you can see the ./configure line used
[21:34:50] <intrac> yep - a mention of --enable-libx264 but nothing relating to Nvidia/nvenc
[21:35:23] <znf> I _think_ that the nvenc is enabled by default with --enable-gpl
[21:35:26] <znf> but I'm not 100% sure
[21:36:06] *** Joins: waleee (~waleee@2001:9b0:21d:fc00:398f:b003:b90d:acf4)
[21:36:12] <znf> and I cba to look for the 4.2 sources :)
[21:38:19] *** Quits: Volgaar (~volgaar@147.94.235.41) (Ping timeout: 256 seconds)
[21:38:31] <intrac> I'm on SUSE Leap 15.2 (soon to update to 15.3) but apparently still an issue for the latter:
[21:38:33] <intrac> https://www.mail-archive.com/packman@links2linux.de/msg12181.html
[21:38:37] <intrac> no solution given there
[21:39:57] *** Quits: MajorBiscuit (~MajorBisc@2a02:a461:129d:1:193d:75d8:745d:e91e) (Ping timeout: 240 seconds)
[21:42:18] *** Joins: Volgaar (~volgaar@147.94.235.41)
[21:42:51] <intrac> znf: no problem
[21:43:29] <intrac> A question raised here on what functionality is lost with --enable-gpl and --enable-nonfree:
[21:43:33] <intrac> https://ffmpeg-user.ffmpeg.narkive.com/Rbyk22FB/what-does-enable-gpl-and-enable-nonfree-do
[21:43:45] <znf> When you build ffmpeg, you need the nvenc headers to build the nvenc* stuff
[21:43:49] <intrac> first answer is unhelpfully 'Read the LICENSE file'
[21:44:02] <intrac> I presume this is it: https://www.ffmpeg.org/legal.html
[21:44:11] <intrac> no mention of the functionality that gets toggled there
[21:44:42] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[21:44:47] <intrac> znf: yeah, it could just be an accidental omission by whoever builds for Packman
[21:44:59] <znf> because it's an ever-changing list and nobody will care to actually update it
[21:45:00] * intrac has had that in the past
[21:45:09] <znf> you'll have to read the configure script to tell which features get enabled by which
[21:45:40] <intrac> znf: someone clever could script it to translate the build information and update the docs :)
[21:45:54] <znf> https://github.com/FFmpeg/FFmpeg/blob/master/configure#L1771-L1783
[21:46:04] <znf> ffmpeg accepts PRs :)
[21:46:08] <znf> and/or patches
[21:46:10] <intrac> :P
[21:46:20] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[21:46:37] *** Quits: Volgaar (~volgaar@147.94.235.41) (Ping timeout: 240 seconds)
[21:46:55] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Client Quit)
[21:47:15] <znf> ffmpeg's licensing can get a bit complicated due to the amount of libs it depends on to provide specific functionality
[21:47:44] <intrac> yeah, I can understand that
[21:47:54] <intrac> fwiw, --enable-nonfree is also set on my build
[21:48:11] <znf> pretty sure that's a license violation
[21:48:20] <intrac> so I guess the combination of --enable-gpl and --enable-nonfree should include the most functionality
[21:48:32] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[21:48:37] <JEEB> nonfree means that you cannot redistribute that binary
[21:48:38] <znf> as you can not redistribute binaries created with nonfree, if I recall correctly
[21:48:41] <JEEB> also thankfully almost nothing has that
[21:49:18] <JEEB> like there's the case of fdk-aac which was found to be incompatible with GPL license-wise, so even if it's open source you specifically cannot redistribute the result if you also enable GPL licensing
[21:49:18] <intrac> JEEB: znf: can you redistribute the binary if you also provide the source?
[21:49:24] <intrac> (with that flag set)
[21:49:26] <JEEB> no
[21:49:26] <znf> no
[21:49:30] <JEEB> it's due to conflicting licenses
[21:49:41] <intrac> oh, then seems Packman are doing something odd there
[21:50:06] <JEEB> like that fdk-aac case I explained, which is OK with LGPL but its incompatible with GPL, and thus you need nonfree with the latter
[21:50:20] <JEEB> thankfully there's the internal AAC encoder as well
[21:51:15] <JEEB> and then there's some nonfree nvidia things, but thankfully since there's now native CUDA filters, I'd say libnpp is not really needed for that
[21:51:29] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 252 seconds)
[21:51:39] <znf> You'll pry libnpp out of my cold, dead hands
[21:51:55] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[21:52:18] <JEEB> most stuff has native cuda filters, if you still need something that is not included poke whomever was writing those native CUDA things
[21:52:25] *** Joins: zmt00 (~zmt00@user/zmt00)
[21:52:29] <JEEB> I think it might have been BtbN
[21:53:06] <BtbN> libnpp is effectively deprecated, don't use it.
[21:53:32] <znf> we've been over this tough :P
[21:53:39] <znf> there's no replacements for something I use
[21:53:49] <znf> unless you recently added some shiny things
[21:53:52] <BtbN> What's still there in libnpp that scale_cuda doesn't have?
[21:54:35] <znf> I think scale_cuda didn't do some format conversion well?
[21:54:47] <BtbN> It does more format conversions than libnpp ever could.
[21:54:49] <znf> I know I've discussed this with you back then, and you told me to fall back to npp
[21:55:01] <BtbN> the libnpp scaler pretty much can only to to/from nv12 and yuv420p
[21:55:11] <BtbN> *go
[21:55:24] <BtbN> Only conversions still missing from scale_cuda are to and from RGB
[21:55:33] <BtbN> Which scale_libnpp doesn't even understand to begin with
[21:55:35] <znf> my use-case was that I needed to burn-in dvb subtitles in hardware
[21:56:07] <znf> I think this:
[21:56:07] <znf> -filter_complex "[0:s] scale=1920:1080,format=yuva420p,hwupload_cuda [sub]; [0:v] scale_npp=format=yuv420p [main]; [main][sub] overlay_cuda [v]"
[22:00:15] <znf> I'd be more than thankful to NOT use libnpp for that :D
[22:04:30] *** Quits: Flat (~flat@35.137.99.241) (Quit: Rip internet)
[22:05:58] <BtbN> What format is the input to scale_npp? Given it supports barely anything other than nv12, scale_cuda can trivially do nv12 to yuv420p.
[22:06:10] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[22:10:30] *** Joins: Flat (~flat@35.137.99.241)
[22:12:15] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[22:24:05] <znf> BtbN, I *think* it's yuva420p
[22:24:10] *** Joins: KombuchaKip (~kip@192.252.230.5)
[22:24:15] <znf> as it's a dvb subtitle track
[22:24:36] <BtbN> "main" is a dvb subtitle track?
[22:24:49] <JEEB> no, the subtitle goes through normal sw scale to yuva420a, and then gets hwuploaded
[22:24:58] <JEEB> while scale_npp seems to be just going out to yuv420p
[22:25:07] <JEEB> and since it's the video, it's most likely nv12 or p010
[22:25:14] <JEEB> (the input)
[22:26:16] <znf> let me run the thingie, as I'm going off on memory
[22:27:18] <znf> https://pastie.dev/vHgjRL.yaml
[22:27:29] <znf> that's the output
[22:27:50] <BtbN> so 0:v is just yuv420p
[22:27:57] <BtbN> and that scale_npp does literally nothing
[22:28:10] *** Quits: someuser (~user@197.54.43.98) (Ping timeout: 250 seconds)
[22:28:35] <znf> I think overlay_cuda complains that it's nv12 and won't overlay?
[22:28:48] <BtbN> yeah, if you decode it via nvdec, it'll be nv12
[22:28:56] <BtbN> converting nv12 to yuv420p is trivial though
[22:29:20] <znf> yeah, if I remove the scale, it fails
[22:29:38] <BtbN> so, use scale_cuda to do the conversion.
[22:30:20] <JEEB> the other alternative commonly is p010 but I think scale_npp isn't going to fly with that, either
[22:30:20] <znf> did you add format to scale_cuda?
[22:30:39] <znf> I'm on N-102753-gfcb80aa289 and that doesn't seem to have format=
[22:30:48] <BtbN> Like two years ago or so
[22:31:03] <JEEB> -h filter=scale_cuda I think
[22:31:40] <znf> https://pastie.dev/lPQ17L.yaml
[22:32:16] <BtbN> seems like you should depserately update
[22:33:16] <znf> uhm, N-102753 is "only" 6 months old tough
[22:33:23] <BtbN> The current ffmpeg master is N-105470
[22:33:32] <BtbN> you're some 2000 commits behind
[22:33:42] <BtbN> almost 3000
[22:33:50] <znf> well, I /did/ set this up ages ago :)
[22:34:13] <BtbN> Not updating ffmpeg regularily is very foolish. There's potentially security relevant issues fixed all the time
[22:34:53] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[22:35:13] <znf> I lack the personal bandwidth to keep ffmpeg updated everywhere I run transcoding stuff
[22:36:07] <BtbN> Downloading a new binary sure is a lot of work, and takes almost a whole minute :P
[22:36:42] <znf> I'm compiling it with your build system :)
[22:36:59] <BtbN> Just download the latest binary then
[22:37:09] <znf> which I patched for static npp support, which I bugged you plenty of times about :)
[22:37:39] <BtbN> Well, perfect opportunity to just get rid of scale_npp then and use a non-scuffed build.
[22:37:57] <znf> also, it's not just about updating the binary
[22:38:29] <znf> a while ago due to some nvidia patches to ffmpeg, it started using almost 50% more VMEM for transcodes, so I also need to do testing
[22:38:40] <znf> you pointed me to the commits last time :)
[22:38:51] <BtbN> I'm not aware of any vmem leak
[22:39:02] <znf> not a leak, it was a tweak in some defaults, I believe
[22:39:18] <BtbN> You mean turning on bframes by default? That happened almost 3 years ago at this point.
[22:39:24] <znf> was it 3 years?
[22:39:29] <znf> my memory is foggy
[22:39:44] <znf> most certainly have no binary that is 3 years old
[22:40:27] <znf> my ffmpeg.old.old (rad naming scheme) is N-98994
[22:41:39] *** Joins: crashrep (~crashrep@user/crashrep)
[22:42:40] <BtbN> I really don't understand the issue at this point
[22:42:54] <BtbN> your ffmpeg binary is too outdated. The latest version supports what you need without any hacks
[22:43:44] <znf> not an issue, last time we discussed it, there was no support :)
[22:44:27] <BtbN> basic format conversion like nv12 to yuv420p is really not all that new
[22:45:10] *** Joins: l4yer (~l4yer@2001:ac8:31:8900:1011:59fd:b6e1:4ba0)
[22:45:13] <znf> what's the commit date of N-102753 ?
[22:45:35] <JEEB> there should be a gXYZ after that
[22:45:38] <JEEB> that should be the git hash
[22:45:49] <JEEB> fcb80aa289
[22:45:59] <JEEB> http://git.videolan.org/?p=ffmpeg.git;a=commit;h=fcb80aa289
[22:46:25] <JEEB> basically the g-prefix is "git" and then you get the git hash afterwards
[22:46:51] <znf> mine is patched, so no hash
[22:47:02] <znf> as in, it doesn't match
[22:47:22] *** Quits: pong (~beaver@user/pong) (Quit: mince)
[22:47:34] <JEEB> too bad then, the number then isn't stable either
[22:47:41] *** Quits: Kruppt (~Kruppt@50-111-52-16.drhm.nc.frontiernet.net) (Quit: Leaving)
[22:47:42] <JEEB> in theory the configure script could check you against master or something
[22:47:52] <JEEB> if you have your own branch or whatever
[22:48:16] <JEEB> I think x264 does something like that
[22:48:49] <JEEB> so you could have the "this was the last commit which was also in master" hash printed, too
[22:56:24] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[22:57:37] *** Quits: saba4ka-mumu (~efsearfc@213.24.135.7) (Ping timeout: 250 seconds)
[23:12:40] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Quit: Konversation terminated!)
[23:23:38] *** Quits: feiw (~Fei.Wang@192.55.46.52) (Ping timeout: 250 seconds)
[23:24:01] *** Joins: feiw (~Fei.Wang@192.55.46.52)
[23:31:40] *** Joins: saba4ka-mumu (~efsearfc@213.24.127.74)
[23:46:25] *** Quits: MG2021 (MG2021@gateway/vpn/protonvpn/mg2021) (Quit: Client closed)
[23:55:41] *** Quits: saba4ka-mumu (~efsearfc@213.24.127.74) (Ping timeout: 256 seconds)
