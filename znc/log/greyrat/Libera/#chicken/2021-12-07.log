[00:27:19] *** Joins: cjb (~cjb@user/cjb)
[00:32:50] <vandusen> [eggs repo (r40946, by kon)] add srfi-128 dependency, add srfi-128 -hash & -comparator for time/date/time-period, minimum -hash test
[00:35:26] *** Parts: tooDumbToFleng (~alexshend@2a02:8070:8796:7600:31f9:838d:7bf9:293f) ()
[00:54:41] <jcroisant> Is it possible in CHICKEN to create a SRFI-4 numeric vector that refers to an already-existing array in static memory? For example if a C library returns an array of bytes, could I wrap that in a u8vector somehow?
[01:02:39] <klovett> jcroisant: directly, w/o any memory movement? afaik, no
[01:06:51] <jcroisant> I know CHICKEN extends the SRFI-4 make-___vector procedures with the NONGC argument to allocate vectors in static memory, so I'm hoping maybe there is some hack to use some existing static memory. Or at least that it would be not too difficult to add to CHICKEN for the future. I'd like to avoid reinventing numeric vectors in Jiffi
[01:19:57] <jcroisant> Hm. Looking at the implementation of SRFI-4, it looks like it allocates a blob (bytevector), which requires the data to include a block header. So it couldn't be used with existing data without copying. Oh well
[01:24:53] <jcroisant> (I want to avoid copying so that it can be used with an array that is a member of a struct, so that modifying the numeric vector would modify the struct's memory)
[01:59:01] *** Quits: Techcable (~Techcable@168.235.93.147) (Ping timeout: 256 seconds)
[02:10:21] <vandusen> [eggs repo (r40947, by kon)] drop srfi-128 dependency & lean into srfi-69, move date-adjust-support to own module (but not own compilation-unit), simplify test
[02:10:37] *** Quits: fantazo (~fantazo@192-164-154-92.hdsl.highway.telekom.at) (Ping timeout: 268 seconds)
[02:13:27] <vandusen> [eggs repo (r40948, by kon)] rel 4.5.0 (add -hash procedures)
[02:18:28] <vandusen> [eggs repo (r40949, by kon)] rel 4.5.0
[02:29:28] <vandusen> [eggs repo (r40950, by kon)] add srfi-69 -hash optional arguments support
[02:34:50] <vandusen> [eggs repo (r40951, by kon)] rel 4.5.1
[02:35:03] <vandusen> [eggs repo (r40952, by kon)] rel 4.5.1
[02:39:21] *** Quits: nikola2 (~nikola2@178-222-121-69.dynamic.isp.telekom.rs) (Quit: Yaaic - Yet another Android IRC client - http://www.yaaic.org)
[02:39:29] *** Joins: nikola2 (~nikola2@178-222-121-69.dynamic.isp.telekom.rs)
[02:39:54] <Bunny351> srfi-4 vectors are record structures holding a bytevector (blob), which needs a header, so this is only possible if the external memory can be modified to hold a 1-word chicken-specific header, unfortunately
[02:40:23] <Bunny351> this could be considered a design mistake...
[02:42:06] <Corbin> Is it fixable, or are there ABI commitments?
[02:42:19] <Bunny351> it would be better if the length were stored in the record with a raw pointer to the storage, and perhaps make SRFI-4 vectors dual-typed: holding either a pointer ("external") or an internally allocated blob
[02:42:37] <Corbin> Yes! The Strategy Pattern returns again.
[02:42:54] <Bunny351> this is fixable, I'd say. I'm not sure how often internals assume the current layout (ffi, etc.)
[02:43:23] <Bunny351> you'd have a performance impact for distinguishing between both forms of allocation
[02:44:02] *** Parts: gabbiel (~user@68.205.230.98) (ERC (IRC client for Emacs 27.2))
[02:44:36] <Bunny351> external vectors would also need to be distinguished for being free'able or not
[02:45:01] *** Quits: ublx (~ublx@user/ublx) (Ping timeout: 240 seconds)
[02:45:42] <Bunny351> all rather tedious, and accessing free'd external mem from scheme would be bothersome to debug
[02:46:00] <Bunny351> perhaps it is better to access C data from C and Scheme data from Scheme, after all...
[02:51:53] *** Joins: ublx (~ublx@user/ublx)
[02:56:09] *** Quits: jobol (~jobol@2a01:e34:ee5c:ee50:d6be:d9ff:fea3:db03) (Quit: Leaving)
[03:12:04] <vandusen> [eggs] srfi-19 version 4.5.0 (for CHICKEN 5) has been released
[03:12:04] <vandusen> [eggs] srfi-19 version 4.5.1 (for CHICKEN 5) has been released
[03:25:32] <vandusen> [eggs repo (r40953, by kon)] just comparator
[03:26:57] *** Joins: s-liao (~s-liao@101.86.99.70)
[03:55:49] *** Quits: andyjpb (~andyjpb@user/andyjpb) (Ping timeout: 240 seconds)
[04:00:12] *** Joins: Techcable (~Techcable@168.235.93.147)
[04:17:34] <vandusen> [eggs repo (r40954, by kon)] remove unused import
[04:18:27] <vandusen> [eggs repo (r40955, by kon)] add comparator example
[04:26:13] *** Quits: GreaseMonkey (greaser@user/greasemonkey) (Remote host closed the connection)
[04:46:39] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 265 seconds)
[04:50:10] *** Joins: skapata (~Skapata@user/skapata)
[05:04:32] <vandusen> [eggs repo (r40956, by kon)] remove comparator modules (see doc example)
[06:42:23] *** Quits: siiky (~siiky@2001:8a0:ff7d:dd00:1f5d:a8bd:3bdc:60a8) (Ping timeout: 252 seconds)
[06:44:14] *** Joins: siiky (~siiky@2001:8a0:ff52:4b00:d65f:f081:77d0:63d8)
[06:48:15] <jcroisant> Bunny351: Thank you for the info and confirmation. I don't think it is worth changing how SRFI-4 numeric vectors are implemented, just to support this use case
[06:51:59] *** Quits: klovett (~klovett@107.115.32.2) (Ping timeout: 256 seconds)
[07:18:32] *** Quits: ublx (~ublx@user/ublx) (Quit: ublx)
[07:53:27] *** Quits: cjb (~cjb@user/cjb) (Quit: rcirc on GNU Emacs 29.0.50)
[09:16:01] *** Quits: skapata (~Skapata@user/skapata) (Ping timeout: 252 seconds)
[09:20:44] *** Joins: greaser|q (greaser@antihype.space)
[09:21:47] *** Quits: greaser|q (greaser@antihype.space) (Changing host)
[09:21:47] *** Joins: greaser|q (greaser@user/greasemonkey)
[09:21:51] *** greaser|q is now known as GreaseMonkey
[09:29:04] *** Joins: skapata (~Skapata@user/skapata)
[09:39:01] *** Quits: mononote (~mononote@user/mononote) (Ping timeout: 240 seconds)
[10:17:45] *** Joins: jobol (~jobol@2a01:e34:ee5c:ee50:d6be:d9ff:fea3:db03)
[10:25:27] *** Joins: fantazo (~fantazo@192-164-154-92.hdsl.highway.telekom.at)
[11:46:56] *** Joins: mononote (~mononote@user/mononote)
[11:55:55] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[12:30:47] *** Quits: s-liao (~s-liao@101.86.99.70) (Ping timeout: 256 seconds)
[13:00:14] *** Joins: andyjpb (~andyjpb@user/andyjpb)
[13:22:16] <dTal> bok bok bok
[13:31:46] <vandusen> "freeee" pasted "freeeeee" http://paste.call-cc.org/paste?id=e93fbd61ca158b80a5de881ad5bb767c57e84d7b
[13:31:46] <judybot> vandusen: spam e93fbd61ca158b80a5de881ad5bb767c57e84d7b
[13:31:47] <vandusen> judybot: I have deleted 1 paste(s) with hash e93fbd61ca158b80a5de881ad5bb767c57e84d7b successfully.
[17:52:10] *** Joins: s-liao (~s-liao@101.86.99.70)
[17:57:53] *** Joins: xaltsc (~xaltsc@user/xaltsc)
[17:59:30] <xaltsc> Hey, I'm trying to install eggs in a user directory (without doas/sudo), I've setup CHICKEN_{INSTALL,}_REPOSITORY, but, when installing, say, sxml-transforms, which depends on srfi-14 and srfi-13, the building phase of srfi-13 doesn't work because it can't find srfi-14. csi cannot import srfi-14 either.
[18:13:35] <sjamaan> xaltsc: I have no idea how that's supposed to work. Maybe try the chicken-users mailing list if nobody replies here
[18:14:50] *** Joins: monkey_ (~user@181.114.17.106)
[18:30:50] <xaltsc> sjamaan: I managed to get installation working by setting CHICKEN_INCLUDE_PATH to the same value, now I'm having this error in csi http://paste.debian.net/1222436/
[18:33:06] <s-liao> chicken-install srfi-14
[18:33:16] <s-liao> try it firstly
[18:34:16] <xaltsc> s-liao: that works
[18:34:54] <s-liao> Then chicken-install srfi-13
[18:35:18] <xaltsc> Does work as well with CHICKEN_INCLUDE_PATH, but I cannot import them in csi
[18:36:09] <s-liao> you mean that (import srfi-14) can not work?
[18:36:15] <s-liao> in csi
[18:37:51] <xaltsc> Yep
[18:38:17] <s-liao> What is the error?
[18:38:34] <xaltsc> The error is that in the pastebin above
[18:41:15] <s-liao> How can you setup the chicken?
[18:42:44] <s-liao> You can not import any module?
[18:43:21] <xaltsc> The binary chicken ? I installed it with my distribution's pkgmanager (xbps), then in a shell, I exported the variables CHICKEN_{,INSTALL_}REPOSITORY and CHICKEN_INCLUDE_PATH to the same directory in my $HOME dir.
[18:44:17] <xaltsc> I can import r4rs
[18:45:15] <xaltsc> And scheme, (chicken base). But not srfi-14.
[18:47:02] <s-liao> Okay
[18:47:56] <xaltsc> I think the extension path might not be set properly, ,r in csi only gives the system dir.
[18:48:27] <s-liao> Yes.
[18:48:44] <s-liao> I am looking up the path in my VM.
[18:50:59] <s-liao> It is inÂ  the path /root/.cache/chicken-install
[18:54:29] <s-liao> finally it is in the folder ../.local/lib/chicken/11
[18:55:38] <xaltsc> I have a directory $HOME/.cache/chicken-install, but my CHICKEN_* vars are set to $HOME/.local/lib/chicken/11/, where the *.so files are, and a modules.db, but no .scm files
[18:56:28] <s-liao> That is Okay.
[18:57:09] <s-liao> It might not need the *.scm files necessary.
[18:59:34] <xaltsc> chicken-status outputs nothing, maybe that's where we should look into first ?
[19:00:30] <s-liao> import does not realize the path.
[19:02:48] <xaltsc> well, it does know where to find the .so file, the first import gives this "; loading /home/ax/.local/lib/chicken/11/srfi-14.import.so ..." before erroring
[19:06:28] <xaltsc> chicken-status -cached sees the cached modules, but not the installed ones
[19:09:01] <s-liao> did you check all srfi-14* files in the folder $HOME/.local/lib/chicken/11/?
[19:09:16] <xaltsc> csi -setup-mode works when I'm ~/.local/lib/chicken/11/
[19:10:33] <xaltsc> this is the list of files in this dir http://paste.debian.net/1222445/
[19:10:49] <xaltsc> csi works even without -setup-mode when this is the cwd
[19:11:21] <s-liao> You mean that you can run (import srfi-14) by cd to ~/.local/lib/chicken/11/
[19:11:52] <s-liao> cd ~/.local/lib/chicken/11/
[19:11:59] <s-liao> Then run csi
[19:12:14] <s-liao> Then (import srfi-14)
[19:15:06] <xaltsc> Yes, it works
[19:15:29] <xaltsc> But when I cd back to, say ~, it doesn't anymore
[19:17:53] <s-liao> It is about the import command have not realized the path.
[19:18:41] <s-liao> I have a local build one of Chicken.
[19:20:51] <s-liao> All of eggs , including new install by chicken-install or built-in eggs are all in ~/.local/lib/chicken/11/ folder.
[19:21:54] <s-liao> I have to get to sleep. Next time, I can try to find out the build instruction for you.
[19:22:01] <s-liao> Have a good day.
[19:22:29] <xaltsc> Thx
[19:24:25] *** Quits: s-liao (~s-liao@101.86.99.70) (Quit: Client closed)
[19:33:01] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:f1f0:a87b:efe3:ebd7)
[19:33:01] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:f1f0:a87b:efe3:ebd7) (Changing host)
[19:33:01] *** Joins: skapata (~Skapata@user/skapata)
[19:49:02] *** Quits: monkey_ (~user@181.114.17.106) (Ping timeout: 265 seconds)
[19:49:07] *** Joins: monkey_` (~user@181.114.17.106)
[19:50:25] *** Quits: monkey_` (~user@181.114.17.106) (Remote host closed the connection)
[20:10:52] *** Joins: klovett (~klovett@107.115.32.81)
[20:12:09] *** Quits: rgherdt (~rgherdt@2a02:8109:86c0:d8d:e9b2:ade6:e9e3:d923) (Remote host closed the connection)
[20:30:59] <jcowan> Bunny351: https://github.com/johnwcowan/r7rs-work/blob/master/AllocationLocations.md is a short version of the different kinds of allocation types in SBCL.  It might be useful for inspiration.
[20:36:15] <Bunny351> jcowan: thanks!
[21:05:49] *** Quits: mononote (~mononote@user/mononote) (Ping timeout: 240 seconds)
[21:14:47] *** Joins: mononote (~mononote@user/mononote)
[21:41:05] *** Quits: mononote (~mononote@user/mononote) (Ping timeout: 252 seconds)
[21:41:22] *** Quits: clacke (88d96f2df3@knopi.disroot.org) (Read error: Connection reset by peer)
[21:48:52] *** Joins: rgherdt (~rgherdt@2a02:8109:86c0:d8d:f1ba:fd5a:67b3:b8c0)
[21:54:37] *** Quits: Techcable (~Techcable@168.235.93.147) (Ping timeout: 240 seconds)
[22:07:15] *** Quits: klovett (~klovett@107.115.32.81) (Quit: ZZZzzzâ¦)
[22:25:53] *** Quits: jobol (~jobol@2a01:e34:ee5c:ee50:d6be:d9ff:fea3:db03) (Quit: Leaving)
[22:43:43] *** Joins: klovett (~klovett@107.115.32.81)
[23:46:38] *** Joins: ublx (~ublx@user/ublx)
[23:46:58] *** Joins: mononote (~mononote@user/mononote)
