[00:01:47] *** Quits: quhar (~g.kucharc@staticline-31-182-241-146.toya.net.pl) (Quit: WeeChat 3.4)
[00:02:23] *** Joins: quhar (~quhar@staticline-31-182-241-146.toya.net.pl)
[00:07:57] *** Quits: quhar (~quhar@staticline-31-182-241-146.toya.net.pl) (Quit: WeeChat 3.4)
[00:08:25] *** Joins: quhar (~quhar@staticline-31-182-241-146.toya.net.pl)
[00:08:38] *** Joins: Guest54 (~Guest54@2620:10d:c092:400::4:4c89)
[00:09:45] *** Quits: pmercado (~pmercado@186.107.61.173) (Ping timeout: 256 seconds)
[00:09:53] *** Quits: CoreISP (~LvH@simplemachines/serverteam/CoreISP) (Quit: ZNC - https://znc.in)
[00:10:39] *** Joins: pmercado (~pmercado@186.107.61.173)
[00:15:29] *** Joins: CoreISP (~LvH@simplemachines/serverteam/CoreISP)
[00:17:45] *** Quits: MrTrick (uid181961@id-181961.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[00:24:49] *** Joins: Intelo (~Intelo@88.246.76.192)
[00:25:15] <Intelo> thumbs I got disconnected. Did you messaged me after I said "why"?
[00:37:49] *** Quits: Guest54 (~Guest54@2620:10d:c092:400::4:4c89) (Quit: Client closed)
[00:43:09] <thumbs> Intelo: no, not yet
[00:44:32] <Intelo> thumbs ok
[00:54:11] *** Quits: quhar (~quhar@staticline-31-182-241-146.toya.net.pl) (Quit: WeeChat 3.4)
[00:58:24] *** Joins: KnowledgeShark (~Knowledge@50.34.198.222)
[01:05:56] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[01:07:37] *** Joins: funhouse (~funhouse@user/funhouse)
[01:38:23] *** Quits: Intelo (~Intelo@88.246.76.192) (Ping timeout: 256 seconds)
[01:40:08] *** Quits: zumba_addict (~zumba_add@c-71-194-58-34.hsd1.il.comcast.net) (Quit: Client closed)
[01:45:40] *** Joins: ferdna (~ferdna@user/ferdna)
[02:22:32] *** Quits: alch3mist (~alch3mist@199.169.204.182) (Quit: Client closed)
[02:29:41] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[02:30:15] *** Quits: pmercado (~pmercado@186.107.61.173) (Ping timeout: 250 seconds)
[02:45:26] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Ping timeout: 252 seconds)
[02:55:12] *** Joins: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[02:59:15] *** Joins: Guest54 (~Guest54@2620:10d:c092:400::4:85ac)
[03:39:05] *** Quits: Guest54 (~Guest54@2620:10d:c092:400::4:85ac) (Ping timeout: 256 seconds)
[03:52:36] *** Joins: victori (~victori@cpe-76-89-139-69.socal.res.rr.com)
[03:59:11] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[04:06:32] *** Quits: CoreISP (~LvH@simplemachines/serverteam/CoreISP) (Ping timeout: 240 seconds)
[04:06:46] *** Joins: CoreISP (~LvH@simplemachines/serverteam/CoreISP)
[04:06:51] *** Joins: JeremyD (SleePy@simplemachines/siteteam/SleePy)
[04:07:02] *** Quits: adas (adas@adas.shelltalk.net) (Ping timeout: 240 seconds)
[04:07:02] *** Quits: SleePy (SleePy@simplemachines/siteteam/SleePy) (Ping timeout: 240 seconds)
[04:07:23] *** JeremyD is now known as SleePy
[04:16:06] *** Joins: adas (adas@adas.shelltalk.net)
[04:19:02] *** Quits: lamneth_ (~IceChat95@modemcable025.99-56-74.mc.videotron.ca) (Ping timeout: 240 seconds)
[04:21:07] *** Joins: lamneth (~IceChat95@2607:fa49:2107:c900:806:c2f3:1c27:9866)
[04:33:44] *** Quits: palasso (~palasso@user/palasso) (Remote host closed the connection)
[04:56:14] *** Joins: pmercado (~pmercado@186.107.61.173)
[05:10:38] *** Quits: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz) (Remote host closed the connection)
[05:10:58] *** Joins: jkavalik (~jkavalik@ip-78-102-141-139.net.upcbroadband.cz)
[05:14:10] *** Quits: gothicserpent (~gothicser@2604:a880:4:1d0::176:6000) (Ping timeout: 260 seconds)
[05:15:52] *** Joins: gothicserpent (~gothicser@2604:a880:4:1d0::176:6000)
[05:15:56] *** Quits: DCTWD (~dc@uz.utmappro.com) (Quit: ...)
[05:16:15] *** Joins: DCTWD (~dc@uz.utmappro.com)
[07:21:52] *** Quits: Vacuity (~Vacuity@user/vovo) (Ping timeout: 272 seconds)
[07:23:12] *** Joins: Vacuity (~Vacuity@user/vovo)
[07:27:16] <thumbs> !t me delete dupes
[07:27:16] <ubiquity_bot> thumbs: If you have a unique ID and the name may contain duplicates then DELETE t1 FROM table1 AS t1 JOIN table1 AS t2 ON t1.id>t2.id AND t1.name=t2.name; If you have other fields that need to be taken into consideration extend the join as needed. If it fails on a myisam table see http://bugs.mysql.com/bug.php?id=28837
[07:50:20] *** cryocaustik7 is now known as cryocaustik
[08:21:21] <KnowledgeShark> I have a Python Variable which is an integer holding json file count "53185" as an example. file.write is giving me an "write() argument must be str, not int" ; what's the remedy for this situation? my dpaste is here: https://dpaste.com/D3Q73BWH6 thanks
[08:44:18] <KnowledgeShark> sorry. wrong channel.
[08:44:43] <KnowledgeShark>  Isotopp: Greetings! Evening
[08:45:44] *** Quits: rvalue (~rvalue@user/rvalue) (Read error: Connection reset by peer)
[08:45:57] *** Joins: rvalue (~rvalue@user/rvalue)
[09:05:21] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[09:34:26] <Isotopp> KnowledgeShark: to convert an into into a str, use the str() function.
[09:35:26] <Isotopp> KnowledgeShark: another option would be to use an f-string in sufficiently recent python file.write(f"{myinteger}"). this is more useful if you also write out other things and/or want formatting.
[09:36:16] <KnowledgeShark> Isotopp: That's exactly what a nice man said in #python. Thank you very much! . Only I didn't get an example of the f-string. ahhh... very handy indeed! I appreciate this.
[09:36:28] *** Quits: pmercado (~pmercado@186.107.61.173) (Ping timeout: 250 seconds)
[09:39:11] <Isotopp> for your ask, the f-string is likely overkill, but in more complicated scenarios it beats all other solutions.
[09:39:24] <KnowledgeShark> Isotopp: Also; I wanted to thank you again for the Harvard CAP Python Loader; I was able to get the loader working (various errors on each one) against 44+ datasets in the Harvard CAP Metadata Collection; however I ran into 6 that I cannot solve for the life of me. I didn't want to ask you and quite honestly didn't know I was going to bump into you tonight. I was going to try and return the favor before asking since I am a Constitutional Law
[09:39:24] <KnowledgeShark> student here in America. I have German descent and I had planned on building a Python -> MariaDB scraper for The Federal Republic of Germany's Constitution. I haven't got there yet, been working on a different loader for a different dataset (still, law, though). It's a wild Python program (It can't be normal, all I gotta say). Once I work out the bugs; it just may work.
[09:39:27] <Isotopp> you want to consult the python manual about f-string syntax, it is very flexible.
[09:39:56] <KnowledgeShark> Isotopp: Great to know and most likely will be doing that!
[09:40:37] <Isotopp> Also, take all my input right now with a grain of salt, I am recovering from covid, and even fully vaccinated and boostered, this is not an experience I recommend. But the fever is receding
[09:41:15] <KnowledgeShark> Isotopp: Take care of yourself. Still not worth overthrowing the World's Government for a flu, though, right? :)
[09:41:30] <Isotopp> german law is available in machine readable format online, and so are most judgements. german law relies much less on case law than the english language sphere does, anyway
[09:41:57] <KnowledgeShark> Isotopp: Good to know regarding German Law.
[09:42:09] <Isotopp> I also ain't overthrowing any covernments here, enjoying my free healthcare and stuff :-)
[09:42:33] <KnowledgeShark> Isotopp: Germans get free healthcare?
[09:43:02] <Isotopp> Well, you get a proscribed rate insurance, and that covers all treatments.
[09:43:22] <KnowledgeShark> Isotopp: Suiting for most people I would imagine.
[09:44:12] <KnowledgeShark> Isotopp: Have a good evening! Perhaps you won't mind if I ping you for help once you survive the flu. :)
[09:44:16] <Isotopp> so there is a fixed ~300 euro monthly cost (I am living in the netherlands, but all states that are not the US of A have similar systems)
[09:44:57] <Isotopp> and there is no concept of sick days. you go to a doctor, the doc writes you unfit to work, and that means your job is to get healthy again (literally you job, you are being paid)
[09:45:26] <Isotopp> when you are reconvalenscenced, the doc will write you fit again and you are allowed to return to work.
[09:45:38] <KnowledgeShark> Interesting.
[09:46:28] <Isotopp> that is basically how it works (with minor variations) in all first world countries with the US of A being an exception
[09:48:01] <KnowledgeShark> The Great Empire of Deception and Subversion! I'm a famous Overt American Seditious Conspirator & Traitor insulter as I petition my Overt Unlawful Governments for Redress.
[09:48:49] <KnowledgeShark> Sorry my Country oppresses people around the globe. We are working on things. Perhaps my American "People" will win.
[09:49:36] <KnowledgeShark> then the reciprocation happens when greed gets hammered and Tyranny stopped.
[09:53:59] <Isotopp> unlikely.
[09:54:38] <Isotopp> more likely to get that outcome if you use the law to find a way to tax the oligarchs (ie billionaires) around the globe
[10:09:17] <KnowledgeShark> Isotopp: I would much prefer Prison sentences for Seditious Conspiracy and Overt Treason.
[10:10:17] <KnowledgeShark> My fellow Americans are hardly American; they have abandoned our Supreme Law of The Land for a false Government(s) hierarchy across our Constitutional Republic. And they listen non-stop to deceivers.
[10:10:20] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[10:10:43] <KnowledgeShark> Interestingly; the Estoppel of Tyranny only works when Corporations are used to Auto-Abridge our Rights.
[10:10:59] <KnowledgeShark> and the Overt Seditious Conspirators and Traitors sit behind the Corporations & Serve on the Boards.
[10:11:30] <KnowledgeShark> Mandates = Profits while / Overt Seditious Conspiracy + Treason and Constitutional American Law says they all need to go to Prison.
[10:11:57] <KnowledgeShark> They seem to think a Computer Server is a lawful Public Constitutional Court ; also known as ZOOM Corp IPO.
[10:12:03] <KnowledgeShark> Anyways... Enough about Armageddon.
[10:12:13] <KnowledgeShark> Have a wonderful evening!
[10:15:16] <Naktibalda> 8:45 AM here :)
[10:16:06] <KnowledgeShark> Good afternoon! :)
[10:16:23] <KnowledgeShark> oh. Actually Armageddon truly means "Revealing of Hidden Knowledge" from what I learned.
[10:16:40] <KnowledgeShark> You all have tremendous days/evenings. I'm going to keep being a Python + Mysql Noob.
[10:42:02] *** Joins: Intelo (~Intelo@88.246.76.192)
[10:45:15] *** Quits: Intelo (~Intelo@88.246.76.192) (Changing host)
[10:45:15] *** Joins: Intelo (~Intelo@user/Intelo)
[11:00:17] *** Quits: lamneth (~IceChat95@2607:fa49:2107:c900:806:c2f3:1c27:9866) (Ping timeout: 256 seconds)
[11:08:11] *** Joins: QuHaR (~QuHaR@192.162.148.48)
[11:37:17] *** Joins: MrTrick (uid181961@id-181961.uxbridge.irccloud.com)
[11:38:42] *** Parts: Intelo (~Intelo@user/Intelo) ()
[11:42:20] *** Joins: palasso (~palasso@user/palasso)
[12:40:07] *** Joins: xiao (~xiao@37.166.11.76)
[14:18:34] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Ping timeout: 250 seconds)
[14:27:23] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[14:35:17] *** Joins: xiao_ (~xiao@37.165.136.17)
[14:37:25] *** Quits: xiao (~xiao@37.166.11.76) (Ping timeout: 240 seconds)
[14:39:07] *** Quits: genius3000 (g3k@user/genius3000) (Ping timeout: 250 seconds)
[14:41:58] *** Joins: genius3000 (g3k@user/genius3000)
[14:44:11] *** Joins: DrowningElysium (uid190788@user/drowningelysium)
[14:55:27] *** Joins: bytestream (~bytestrea@user/bytestream)
[15:02:26] *** Quits: pizza (~pizzaiolo@user/pizzaiolo) (Quit: Goodbye)
[15:03:48] *** Joins: pizzaiolo (~pizzaiolo@user/pizzaiolo)
[15:07:07] *** Joins: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861)
[15:07:45] <DF32> Hey. Does a situation where your db table name is being found like this:
[15:07:45] <DF32> $attribute_id = Attribute::where('visits_id', $id)->first()->id;
[15:07:46] <DF32> return DB::table("attribute_$attribute_id")
[15:07:46] <DF32> ->where('user_id', $user_id)
[15:07:47] <DF32> ->first();
[15:07:47] <DF32> Bad? And indicate us that I should instead use a pivot table?
[15:10:36] <DF32> I'm using an ORM, but what I'm trying to figure it out is if the design of the DB is good/bad
[15:20:28] <lopid> so table names that consist of column calues
[15:20:30] <lopid> v
[15:22:12] *** Quits: xiao_ (~xiao@37.165.136.17) (Remote host closed the connection)
[15:23:34] <DF32> Yes, that's right. Based on that "attribute_id" I can have more than one "attribute_ID" table
[15:24:29] <lopid> so it's inconsistent if not unknown, at least
[15:24:54] <DF32> Based on the ID retrieved from  "Attribute" table, I can have more than one "attribute_ID" probably more correct like this
[15:25:48] <DF32> Sorry, what do you mean?
[15:26:21] <DF32> by "it's inconsisten if not unknown"
[15:27:32] <DF32> Or I mean, what's not consistent?
[15:27:50] <lopid> can you predict the schema?
[15:28:14] <DF32> For the "attribute_someID" table?
[15:28:21] <lopid> for the database
[15:28:39] <DF32> I have acess to the schema
[15:29:22] <DF32> Is that your question? Or I'm missinterpreting?
[15:30:26] <lopid> the structure of your database is a part of the data itself
[15:33:55] <DF32> Yes, all data is organized based on the structure. But I'm failling to understand what do you mean by "predict the schema of the database". I'm not a very database person, so I may be interpreting something wrong
[15:35:00] <lopid> at no point can you say what your schema will look like without first examining the data in it
[15:35:26] <DF32> Ohh, I see
[15:35:45] <lopid> the schema could even be dynamic
[15:36:50] <DF32> Dynamic, in the send of e.g. could providers that sell shared hosts?
[15:37:19] <lopid> in the sense of it changes
[15:43:30] *** Joins: pmercado (~pmercado@186.107.61.173)
[15:45:27] <DF32> In this case this is what happens: I have a "Attribute" table and the "id" of that table is what gives me the name of the "attribute_n" table (where n is the id from attribute). And there is another field in the "Attribute" table that is a foreign key to table "visits". That foreign key can change since the visit can be revoked from that
[15:45:28] <DF32> "attribute_n" table and can be added to another "attribute_n" table.
[15:45:28] <DF32> Based on this can I get to any conclusion? I would assume that the best thing to do is do add a pivot table between "attribute" and "attribute_n"
[15:47:07] <lopid> the conclusion is to write a sensible, at least consistent, schema
[15:47:23] <lopid> but, i've seen it in the wild more than once
[15:47:50] <lopid> always came with a php app…
[15:48:13] <thumbs> oddly enough
[15:49:19] <DF32> I didn't write the schema, I doing my first internship in a company (as a software developer, not database designer). I was just looking at how this query is being done and at the dabase and was questing myself if could improve the database design
[15:50:11] <lopid> i think the answer is "yes" :)
[15:50:39] <thumbs> indeed
[15:53:00] <DF32> I thought so, it would made more sense to add a pivot table between these two. But is there any reference to the why? I just knew it made more sense, not why
[15:53:23] <DF32> to justify the change
[15:55:15] <thumbs> the schema should be built to accomodate the queries you need to run on it, as a starting point.
[15:57:51] <DF32> I had one class of databases, It's probably something in my inconsistent remembering something about database normalization but I don't remember what it is ahah
[15:58:15] <DF32> Thanks for the help and patience tho
[15:58:46] <thumbs> normalization helps, but it always depends on the queries you need to run on the data, ultimately
[15:58:55] <DF32> *inconscience
[16:02:09] <DF32> Got it, thanks for the help and patience :P
[16:03:23] <thumbs> trying to abuse MySQL as a key-value store isn't a good idea either
[16:08:58] <DF32> what do you mean? Isn't that what we do, store data (value) in a key(column)?
[16:09:49] <thumbs> a normalized schema will store more than a single table with a single column
[16:10:57] <DF32> I thinkkk I understood what you meant
[16:16:36] <g0z> that seems like data lacking a relation and is not suitable for storage in a relational database. I guess.
[16:19:21] *** Joins: lamneth (~IceChat95@2607:fa49:2107:c900:292f:d66:a62f:422d)
[16:30:04] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[16:33:36] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[16:35:39] *** Quits: QuHaR (~QuHaR@192.162.148.48) (Quit: WeeChat 3.3)
[16:55:24] *** Quits: Tabmow (~tabmow@user/tabmow) (Ping timeout: 268 seconds)
[16:56:24] *** Joins: Tabmow (~tabmow@user/tabmow)
[17:23:26] <Isotopp> Nah, that is not what happens here from the description
[17:23:45] <Isotopp> the model does not want to commit to model a specific thing and tries to keep things generic
[17:25:14] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[17:53:31] *** Joins: DJ-ArcAngel_ (~arcangel@2a02:c206:2082:112::1)
[17:56:33] *** Quits: DJ-ArcAngel_ (~arcangel@2a02:c206:2082:112::1) (Client Quit)
[17:58:10] *** Joins: DJ-ArcAngel_ (~arcangel@2a02:c206:2082:112::1)
[17:59:33] *** Quits: DJ-ArcAngel (arcangel@grid.nixsec.org) (Ping timeout: 252 seconds)
[18:03:53] *** Quits: DJ-ArcAngel_ (~arcangel@2a02:c206:2082:112::1) (Quit: ZNC - https://znc.in)
[18:04:14] *** Joins: DJ-ArcAngel (~arcangel@2a02:c206:2082:112::1)
[18:12:12] *** Quits: DJ-ArcAngel (~arcangel@2a02:c206:2082:112::1) (Remote host closed the connection)
[18:13:42] *** Joins: DJ-ArcAngel (arcangel@2a02:c206:2082:112::1)
[18:14:12] *** Joins: mav`rik (~unknown@ec2-54-171-126-99.eu-west-1.compute.amazonaws.com)
[18:17:18] *** Quits: DJ-ArcAngel (arcangel@2a02:c206:2082:112::1) (Client Quit)
[18:22:35] *** Joins: DJ-ArcAngel (arcangel@2a02:c206:2082:112::1)
[18:29:39] <DF32> Isotopp Yup, it's because each "visit" can have different fields in "attribute_n". For what I was told, this was something that was added later on
[18:56:31] <k_sze> How does MySQL 8.0.15 behave if: I have a table `foo` with a bigint auto_increment PK; I have three connections (A, B, and C); A and B perform a `SELECT * FROM foo FOR UPDATE` at the same time; C tries to insert more rows into foo at the same time?
[18:57:13] <k_sze> Suppose connection A's SELECT request reaches the server first, are B and C both blocked?
[18:59:20] <k_sze> And then if A deletes the selected rows from the foo table and commits the transaction, B will be unblocked and won't see the the rows deleted by A, right?
[19:02:17] <Naktibalda> yes
[19:14:41] <DF32> For what I was told now the "attribute" table has a column "structure" (json) and based on that the "attribute_n" table is created
[19:17:02] *** Joins: jamiejackson (~jamiejack@131.106.140.145)
[19:18:06] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Quit: Leaving)
[19:24:44] <Isotopp> DF32: that sounds all very ominously doomed
[19:25:02] <Isotopp> k_sze: a "select for update" selects data, but locks like an update statement
[19:25:24] <Isotopp> that is, all rows that are scannned by the select statements index component gain an x-lock
[19:25:47] <Isotopp> an unqualified select statement will lock the entire table, in table order, by creating a gazillion of x-locks
[19:26:06] <Isotopp> other statements that create x-locks such as update, insert or select for update will wait
[19:26:24] <k_sze> Sounds exactly like what I need.
[19:26:59] <Isotopp> if you are using oracle mysql 8 you also want to check out SELECT ... FOR UPDATE SKIP LOCKED
[19:27:37] <k_sze> I'm using MySQL from Azure, not sure if it supports SKIP LOCKED.
[19:27:43] <Isotopp> https://blog.koehntopp.info/2020/07/29/mysql-transactions-the-logical-view.html
[19:27:47] <k_sze> I'd have to check.
[19:27:53] <Isotopp> https://blog.koehntopp.info/2020/07/30/mysql-transactions---writing-data.html
[19:28:06] <Isotopp> https://blog.koehntopp.info/2020/08/01/mysql-locks-and-deadlocks.html
[19:28:16] <Isotopp> https://blog.koehntopp.info/2020/08/02/mysql-deadlocks-with-insert.html
[19:28:26] <Isotopp> https://blog.koehntopp.info/2021/07/13/mysql-a-job-queue-in-python.html
[19:28:30] <Isotopp> this is what i have on x-locks
[19:28:42] <k_sze> haha, I'm exactly using a table like a queue.
[19:28:52] <Isotopp> you konster
[19:28:56] <Isotopp> you monster
[19:29:36] <Isotopp> https://github.com/isotopp/mysql-dev-examples/blob/master/mysql-claim-jobs/mysql-claim-jobs.py
[19:29:43] <k_sze> And I just wanted to ensure that if kubernetes spawns multiple job consumers, they won't duplicate jobs or run the jobs out of order if I do a naive select * for update.
[19:29:59] <Isotopp> You are creating a queue with exactly-once semantics at the cost of a disk sync per state change
[19:30:12] <Naktibalda> jobs should have LIMIT
[19:30:26] <Isotopp> k_sze: you want to understand what etcd is, how to run and use one, and use that. that's what k8s itself does, internally
[19:30:57] <Isotopp> k_sze: i mean, not that it would be faster, etcd too is notoriously disk write intense.
[19:31:16] <k_sze> Isotopp, I don't actually care, the amount of jobs I expect in the queue is *very* sparse.
[19:31:20] <Isotopp> but you gain resiliency in the face of a single machine failure
[19:31:42] <Isotopp> in any case, trying to run a job queue in mysql without having SKIP LOCKED is doomed
[19:33:39] <k_sze> the jobs are generated by human interaction, and those interactions don't happen very often. The job is just the sending of messages via Azure EventHub, and I put a queue there only in case EventHub goes down and I don't have to block the user from doing their work.
[19:34:16] *** pizzaiolo is now known as pizza
[19:34:54] <k_sze> Why is not having SKIP LOCKED bad? Is it only in the cases where I expect very frequent queueing and unqueueing of jobs?
[19:35:16] <Isotopp> assume the program in the example above, https://github.com/isotopp/mysql-dev-examples/blob/master/mysql-claim-jobs/mysql-claim-jobs.py
[19:35:30] <Isotopp> assume you run 4 instances of the consumer function scannning for unclaimed records.
[19:35:32] <Naktibalda> it isn't bad, but it is worse
[19:35:51] <Isotopp> they will find multiple unclaimed jobs, all the same ids,
[19:36:06] <Isotopp> the first one will claim them with for update, and the others, also using for update, will block.
[19:36:15] <Isotopp> they will scan the same records, and find x-locks.
[19:36:26] <Naktibalda> there is no point to have multiple instances
[19:36:28] <Isotopp> whhen the x-lock drops the jobs are gone and their work lists are useless.
[19:36:40] <Isotopp> they have waited one work cycle, not doing any work
[19:36:45] <Isotopp> and that makes them pointless.
[19:36:57] <k_sze> Isotopp, oh, that's actually ok for me, lol.
[19:36:58] <Isotopp> now again, using skip locked, the first iteration will find 4x the same ids.
[19:37:23] <Isotopp> but the for update phase for jobs 2-4 will not claim anything, cycling fast, claiming new, different ids.
[19:37:38] <Isotopp> now the concurrency can kick in and become useful
[19:38:03] <k_sze> In my case I actually want them to block because I want to ensure that the messages are sent in the order they were queued.
[19:38:05] <Isotopp> SKIP LOCKED is new in Oracle MySQL 8 and extremely critical for your use-case
[19:38:18] <Isotopp> k_sze: that is very single threaded indeed.
[19:38:39] <Isotopp> you will still block on writers, depending...
[19:38:49] <k_sze> That's fine.
[19:38:55] <k_sze> That's fine for my case.
[19:39:00] <Isotopp> well, good luck
[19:39:23] *** Quits: DF32 (~DF32@2001:8a0:f893:5c00:942a:1f12:22a1:861) (Quit: Client closed)
[20:27:00] *** Joins: Guest54 (~Guest54@2620:10d:c092:400::4:a410)
[21:21:01] *** Quits: Guest54 (~Guest54@2620:10d:c092:400::4:a410) (Ping timeout: 256 seconds)
[21:23:10] *** Quits: shibboleth (~shibbolet@user/shibboleth) (Quit: shibboleth)
[21:26:30] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: ASCII a stupid question, get a stupid ANSI!)
[21:28:18] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[21:32:12] *** Quits: yano (~yano@ircpuzzles/staff/yano) (Quit: WeeChat, the better IRC client, https://weechat.org/)
[21:35:32] *** Joins: shibboleth (~shibbolet@user/shibboleth)
[21:36:11] *** Joins: yano (~yano@ircpuzzles/staff/yano)
[21:38:29] *** Joins: Intelo (~Intelo@user/Intelo)
[21:38:31] <Intelo> Hi, is database date time different than system/OS date time? I am talking about mysql and postgres in specific. I am syncing data from mysql to pg on remote servers based on datetime of row updated
[21:48:18] <AllenJB> MySQL uses the system timezone by default, but this can be changed, either on a server-wide basis or per-connection. See https://dev.mysql.com/doc/refman/8.0/en/time-zone-support.html
[21:49:28] <AllenJB> MySQL does not store the timezone in date/datetime/time values, so changing the timezone after data has been added is not advisable.
[21:49:53] <Intelo> AllenJB I see
[21:49:55] <Intelo> what about pg?
[21:50:41] <AllenJB> I don't know about postgres in detail. I believe it (can) store timezones in datetime values. Check with their documentation and/or support channel
[21:50:46] *** Joins: hack (~hack@user/pot)
[21:51:15] <Intelo> AllenJB I have same timezone UTC and GMT (both are same) in mysql and postgres respectively but I mostly get a difference of 40 seconds or 1 minute when i query now() / timestamp from both databases. The db time and system time on both servers is  same. Why is that?
[21:52:29] <AllenJB> No idea.
[21:53:52] <AllenJB> Could be related to leap seconds
[21:53:57] *** Quits: DrowningElysium (uid190788@user/drowningelysium) (Quit: Connection closed for inactivity)
[21:55:31] <Intelo> AllenJB whats that?
[21:57:38] *** Joins: funhouse (~funhouse@user/funhouse)
[21:57:54] <AllenJB> Every so often we add a second to what we consider the current time because we base time on the earths rotation, and that's slowing down (until one day the earth stops spinning and we all die, or something, maybe)
[21:59:17] <Intelo> ya but its 40+ seconds
[21:59:19] <Intelo> for me
[22:03:21] *** Parts: hack (~hack@user/pot) (Textual IRC Client: www.textualapp.com)
[22:03:58] <AllenJB> So, to be clear, you're saying that the OS on both servers shows exactly the same datetime (to the second), but the database servers NOW() shows a difference of > 40 seconds?
[22:09:52] <AllenJB> The only other thing I can think of is if (something like) one of the databases is not directly querying system time, but attempts to track time internally and that's drifting over time (the longer the database service is running). I would check for that by restarting the database service on both servers and seeing if there's still a difference in
[22:09:52] <AllenJB> NOW() values
[22:10:19] <Intelo> AllenJB no I mean to say that db time on both is set to UTC/GMT respectively but there is a 40+ second gap while querying both
[22:12:33] <AllenJB> If you haven't checked that OS datetime is in sync, I would check that (run `date` on the commandline without parameters if it's linux)
[22:13:12] <AllenJB> If they're not in sync, you might want to ensure time sync is set up at the OS level (using NTP)
[22:13:21] <Intelo> AllenJB why would it not be in sync if its same itmezone
[22:13:21] <Intelo> ?
[22:15:52] <AllenJB> If not automatically sync'd, computer clocks are set manually, and those values might differ. Even if they were initially both correct, computer clocks can drift over time (they're not 100% accurate at counting seconds). On servers it's common to use software to sync time using internet servers (using NTP) (or other reliable sources such as GPS)
[22:28:40] *** Joins: pot (~pot@user/pot)
[22:51:12] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[23:01:57] *** Joins: quhar (~quhar@staticline-31-182-241-146.toya.net.pl)
[23:08:28] <Intelo> AllenJB thanks
[23:35:07] *** ChanServ sets mode: +o thumbs
[23:35:10] *** thumbs sets mode: +b *!*pot@user/pot
[23:35:10] *** pot was kicked by thumbs (pot)
[23:35:15] *** thumbs sets mode: -o thumbs
[23:41:48] *** Joins: funhouse (~funhouse@user/funhouse)
