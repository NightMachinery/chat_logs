[00:00:36] <Filystyn> ok one more question
[00:01:02] <Filystyn> openssl s_client  how to force timeout ?
[00:01:23] <Filystyn> like close after 5 second from connecting
[00:01:51] <geirha> !timeout
[00:01:51] <greybot> http://mywiki.wooledge.org/BashFAQ/068 -- How do I run a command, and have it abort (timeout) after N seconds?
[00:02:56] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[00:03:33] <jaggz> greybot, use timeout
[00:03:40] <mannequin> sleem $n\s && exit
[00:03:48] <mannequin> sleep $n\s && exit
[00:03:54] <jaggz> tasleem?
[00:04:14] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[00:04:31] <Filystyn> ok command & sleep did the job
[00:04:41] <Filystyn> this was easier problem than I expected !
[00:05:17] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903) (Ping timeout: 240 seconds)
[00:05:33] *** Joins: unop (~unop@195.91.14.193)
[00:09:10] *** Joins: bluedust (~bluedust@185.248.85.42)
[00:10:35] <Filystyn> one more question. I have two files
[00:10:41] <Filystyn> where one line was chnaged
[00:10:46] <Filystyn> sort | uniq -u
[00:10:59] <Filystyn> but is there way to know WHICH line is the new line
[00:11:05] <Filystyn> maybe qort can add filenames?:>
[00:11:37] <larryv> diff?
[00:11:59] <geirha> or comm
[00:14:00] <Filystyn> ok diff should have think about it
[00:14:07] <Filystyn> comm was a discovery
[00:14:22] *** Quits: Bercik (~Redomen@user/bercik) (Ping timeout: 256 seconds)
[00:14:41] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[00:19:43] *** Joins: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl)
[00:19:43] *** Quits: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl) (Changing host)
[00:19:43] *** Joins: Bercik (~Redomen@user/bercik)
[00:22:44] *** Joins: bluedust_ (~bluedust@59.89.219.44)
[00:24:41] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[00:26:38] *** Joins: Jong (~Jong@2620:10d:c090:400::5:8039)
[00:26:50] *** Quits: bluedust (~bluedust@185.248.85.42) (Ping timeout: 256 seconds)
[00:29:16] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 272 seconds)
[00:31:33] <dob1> if [[ ! -z "WORKMANAGER_DIR" ]]; then     is this wrong?
[00:32:19] <dob1> ah I got it
[00:32:43] <emanuele6> that string is constant so it is always non-empty.
[00:32:52] <dob1> I have to use $, but it still says to use -n
[00:33:30] <emanuele6> also   [[ ! -z $x ]] is the exact same as [[ -n $x ]] which is the exact same as [[ $x ]]
[00:34:16] * e36freak reports dob1 to the department of redundancy department
[00:35:06] <emanuele6> # help test | grep ' STRING\>'
[00:35:07] <shbot> emanuele6:       -z STRING      True if string is empty.
[00:35:08] <shbot> emanuele6:       -n STRING
[00:35:08] <shbot> emanuele6:          STRING      True if string is not empty.
[00:35:36] <HelloShitty> Hello peeps. I have these two variables set: $RTLPATH and $RTLPROC like: RTLPATH='Downloads/RTL-v0.11.2-beta' and RTLPROC='rtl.js'. Then I have this: RTLPID=pgrep -f "^node $RTLPATH/$RTLPROC$". But this is not returning the process ID I expect. It's returning an empty result.
[00:35:40] <dob1> [[ ! -z $x ]]  this is more readable, imho
[00:36:06] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[00:36:16] <HelloShitty> However, if I run `ps aux | grep rtl.js` I get:
[00:36:18] <emanuele6> weird opinion
[00:36:42] <HelloShitty> psysc0r+     977  0.0  1.5 708292 60836 pts/4    Ssl+ 19:19   0:03 node /home/psysc0rpi0n//Downloads/RTL-v0.11.2-beta/rtl.js
[00:37:09] <HelloShitty> is it because I'm not using the full path? I mean '/home/psysc0rpi0n/....' ?
[00:37:27] *** Quits: lavaball (thomas@31.204.155.215) (Remote host closed the connection)
[00:37:28] <emanuele6> you have put a ^ in your regex.
[00:37:49] <emanuele6> that requires pgrep to only match something that starts with the word node
[00:38:05] <wiscii> eagle-eyes!
[00:38:06] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[00:38:34] <geirha> [[ ! -z $x ]] is more readable than [[ $x ]] ?
[00:39:06] <wiscii> more to read ;-)
[00:39:07] <emanuele6> [[ ! ! ! ( ! $x ) ]] is more readable than [[ ! -z $x ]]
[00:39:45] <dob1> [[ $x ]] this means if variable is set or not set ?
[00:39:45] <HelloShitty> emanuele6: that ^ was replying to me?
[00:40:18] <dob1> it's the contrary I suppose
[00:40:35] <emanuele6> dob1: it has nothing to do with setness
[00:40:45] *** Quits: dreamon (~dreamon@p54b14d36.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[00:41:00] <emanuele6> it is true if the expansion of $x has length greater than 0
[00:41:29] <wiscii> basically, -n is the default test flag, if none specified
[00:41:34] <emanuele6> HelloShitty: your regex does not match  node /home/psysc0rpi0n//Downloads/RTL-v0.11.2-beta/rtl.js
[00:41:41] *** armands_ is now known as armands
[00:41:43] <geirha> # set -x ; [[ $x ]]
[00:41:45] <shbot> geirha: + [[ -n '' ]]
[00:42:05] <emanuele6> your regex is   ^node Downloads/RTL-v0.11.2-beta/rtl.js$
[00:42:23] <dob1> emanuele6, I am lost, how can you then say that  [[ ! -z $x ]] is like [[ $x ]]  >
[00:42:24] <dob1> ?
[00:42:37] <wiscii> because it is
[00:42:38] <emanuele6> that would match   nodeDownloads/RTL-a0a11a2-beta/rtlajs
[00:42:42] <emanuele6> err
[00:42:45] <emanuele6> that would match   node Downloads/RTL-a0a11a2-beta/rtlajs
[00:42:51] *** Quits: l4s8g_ (~l4s8g@pd9e621d0.dip0.t-ipconnect.de) (Remote host closed the connection)
[00:42:58] <emanuele6> but not   node /home/psysc0rpi0n//Downloads/RTL-v0.11.2-beta/rtl.js, no way.
[00:43:02] <emanuele6> !regex > HelloShitty
[00:43:03] <greybot> HelloShitty: Regular Expressions are used to *match* certain patterns in strings. They come in several flavors (BRE, ERE, PCRE, and more). Bash only supports EREs (using [[ string =~ pattern ]]). Sed uses BREs. See !ere, !bre, !pcre, http://mywiki.wooledge.org/RegularExpression
[00:43:05] <geirha> [[ -z $x ]] is the same test as [[ ! $x ]], so [[ ! -z $x ]] is [[ ! ! $x ]]
[00:43:45] <emanuele6> dob1: [[ ! -z $x ]] is true if [[ -z $x ]] is false, which is true if the expansion of $x is the empty string
[00:43:55] <HelloShitty> I'm lost
[00:44:00] <emanuele6> [[ -z $x ]] is exactly the same as [[ ! $x ]] effectively
[00:44:02] <dob1> ok sorry, I was doing wrong... I was checking the opposite! my bad
[00:44:11] <emanuele6> wow
[00:44:14] <dob1> damn... what an error
[00:44:19] <emanuele6> so you are admitting it is not readable at all
[00:44:21] <HelloShitty> You mean due to the fact that I don't have the "/home/psysc0rpi0n/"?
[00:44:35] <dob1> emanuele6, yes for sure
[00:44:44] <emanuele6> HelloShitty: do you know anything about regular expressions?
[00:45:36] <HelloShitty> more or less. I don't know every detail
[00:45:55] <HelloShitty> but you mentioned something like "rtlajs" and I got lost
[00:46:07] <emanuele6> . means "any character"
[00:46:25] <wiscii> in a regex
[00:46:28] <emanuele6> # printf '%s\n' file.png fileapng fileabpng
[00:46:29] <shbot> emanuele6: file.png
[00:46:29] <shbot> emanuele6: fileapng
[00:46:29] <shbot> emanuele6: fileabpng
[00:46:33] <HelloShitty> ok, but somehow that was not the problem I think
[00:46:36] <emanuele6> # printf '%s\n' file.png fileapng fileabpng | grep '^file.png$'
[00:46:38] <shbot> emanuele6: file.png
[00:46:38] <shbot> emanuele6: fileapng
[00:46:43] <HelloShitty> because I got it working by providing the complete path
[00:46:48] <emanuele6> HelloShitty: yes, that is not the problem.
[00:47:04] <HelloShitty> hein?
[00:47:12] <emanuele6> do you know what the regex `^node Downloads/' means?
[00:47:15] <emanuele6> just that bit
[00:47:19] <HelloShitty> It is not the problem? So why did you mentioned it?
[00:47:28] <emanuele6> i did not, it was an example
[00:47:31] <HelloShitty> yes, the ^ makes it to match the start of the string
[00:47:42] <wiscii> inverse xy .. is that yx problem ?
[00:47:42] <emanuele6> so what does `^node Downloads/' mean?
[00:47:45] <emanuele6> what does it match?
[00:47:48] <HelloShitty> $ makes it to match until the end of the string
[00:47:59] <emanuele6> HelloShitty: that has nothing to do with my question.
[00:48:11] <HelloShitty> I was replying already about the $
[00:48:11] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[00:48:15] <HelloShitty> I replied to your question
[00:48:24] <emanuele6> i never asked about $
[00:48:36] <emanuele6> any way.
[00:48:39] <emanuele6> `^node Downloads/' matches only strings that start with "node Downloads/"
[00:48:44] <HelloShitty> yes, I know, but you would probably aska bout it too
[00:48:48] <HelloShitty> as you asked about the ^
[00:48:56] <HelloShitty> yes
[00:49:00] <HelloShitty> that's the goal
[00:49:04] <emanuele6> no i would have not.
[00:49:12] <emanuele6> because i only cared about ^.
[00:49:18] <emanuele6> i wanted to show you that
[00:49:21] <emanuele6> "node /home/psysc0rpi0n//Downloads/RTL-v0.11.2-beta/rtl.js"
[00:49:24] <HelloShitty> because there are other otputs that would match the same string but not from the start
[00:49:28] <emanuele6> does not start with "node Downloads/"
[00:49:32] <emanuele6> so why would it match?
[00:49:44] <HelloShitty> so, the problem was not the dot
[00:49:46] <HelloShitty> ok
[00:49:48] <HelloShitty> I got it
[00:49:55] <HelloShitty> thank you
[00:49:56] <emanuele6> what are you talking about?
[00:49:58] <geirha> you're still treating data as code though, by having the "." in the data match any character, instead of the intended "."
[00:50:01] *** Joins: mat001 (~mat001@c-69-181-155-247.hsd1.ca.comcast.net)
[00:50:15] <emanuele6> but that . is not even a problem
[00:50:30] <HelloShitty> when you mentioned the dot and then the "rtlajs" I thought the problem was there
[00:50:40] <HelloShitty> and that I would need tp escape the dot to be treated as such
[00:50:43] <emanuele6> that is not the problem
[00:50:46] <wiscii> .o0( ^ )
[00:50:48] <emanuele6> that would just match more stuff
[00:51:03] <emanuele6> how can he not see that   "node /home/psysc0rpi0n//Downloads/RTL-v0.11.2-beta/rtl.js"  does not start with "node Downloads/"?
[00:51:10] <emanuele6> THAT is the problem
[00:51:14] <HelloShitty> ok, I got it
[00:51:16] <geirha> that just violated the "don't treat data as code rule", but doesn't have a big impact in this case
[00:51:18] <HelloShitty> sorry
[00:51:36] <HelloShitty> How would I make it properly, then?
[00:51:42] <HelloShitty> about the dot
[00:51:46] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[00:52:01] <emanuele6> HelloShitty: -F -x "node $var/$var/rja.js"
[00:52:04] <Earnestly> So close!  xsltproc happens to implement exslt extensions, of which includes datetime features.  It has 'date-parse' on its todo list, noooooooo
[00:52:17] <geirha> write code that can sanitize the data for regex injection
[00:52:21] <emanuele6> HelloShitty: but ONCE AGAIN, the dot is not the problem
[00:52:23] <geirha> or avoid using regex
[00:53:09] *** Quits: uhu (~uhu@2a01:4f9:c010:1087::2) (Excess Flood)
[00:53:11] <wiscii> :-^
[00:53:28] <HelloShitty> I already understood that the problem is not the dot
[00:53:33] <HelloShitty> but it could be in the future
[00:53:35] *** Joins: uhu (~uhu@static.101.168.216.95.clients.your-server.de)
[00:53:36] <geirha> prgrep doesn't have -F though
[00:53:40] <HelloShitty> so I was asking how to do it properly
[00:53:45] <geirha> or at least, not an -F that works the same as grep -F
[00:53:54] <emanuele6> well, it has but it is not like greps
[00:54:20] <HelloShitty> ok, nevermind! :|
[00:54:28] <emanuele6> HelloShitty: you will just have to use \. instead of . in the regex
[00:54:35] <HelloShitty> oki
[00:54:36] <emanuele6> but if you inject values you cannot be sure of it
[00:54:53] <emanuele6> injecting data into regex is not a good idea
[00:55:03] <HelloShitty> I just want to use a few variables instead of absolute paths all over the code
[00:55:29] <emanuele6> what are you trying to get with that pgrep?
[00:55:45] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[00:56:54] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[00:57:06] <HelloShitty> PIDs
[00:57:16] <HelloShitty> to check if there is a process already running
[00:57:19] <HelloShitty> and if not, I start it
[00:57:31] <emanuele6> but pids of what?
[00:57:38] <HelloShitty> programs
[00:57:51] <emanuele6> but what program...
[00:58:02] <HelloShitty> This is a script to start a few applications I have running in a single board computer
[00:58:06] <emanuele6> why do you need to match a regex on the command line of a process?
[00:58:15] <HelloShitty> instead of starting each one by hand, I am writting this script
[00:58:53] <geirha> ah, re-inventing systemd/upstart/sysvinit
[00:58:57] <HelloShitty> because there is at least another process that will match similar process
[00:59:12] <HelloShitty> because I starting these applications within screen
[00:59:28] <emanuele6> if they are started within screen, why do you need pgrep?
[00:59:46] <Filystyn> I think most times you don't want to track program pid unless child/parent
[00:59:47] <HelloShitty> so, if I run `ps aux | grep rtl` I get 2 lines
[00:59:48] <emanuele6> also, can't you use your OS's init system for that?
[00:59:58] <HelloShitty> so, I need to filter out the one I need
[01:00:18] <emanuele6> HelloShitty: but can't you just use screen to check if it is running?
[01:00:47] <HelloShitty> oki I couldd, but I started doing this this way
[01:00:47] <emanuele6> name the screen session for each program with their name, if that screen session with that name doesn't exist, start it
[01:00:57] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[01:01:01] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 240 seconds)
[01:01:03] <emanuele6> but why not just use systemd or whatever you have?
[01:01:04] <HelloShitty> That's basically the same that I'm doing
[01:01:04] <geirha> using flock instead of ps|grep or pgrep at least removes most race conditions
[01:01:11] <geirha> !faq mutual
[01:01:11] <greybot> https://mywiki.wooledge.org/BashFAQ/045 -- How can I ensure that only one instance of a script is running at a time (mutual exclusion, locking)?
[01:01:12] <HelloShitty> why would dit be better than what I'm doing?
[01:01:39] <emanuele6> because any process can choose its own commandline
[01:01:50] <HelloShitty> It's that I'm just searching for the PID and you would be searching for the screen session name
[01:01:55] <geirha> systemd keeps track of the processes it starts, avoiding the need to check if maybe something similar is currently running
[01:02:22] <emanuele6> pgrep -f 'rts\.js' could match any process
[01:02:27] <Filystyn> Why is that PID so important O.o
[01:02:27] <emanuele6> # type pgrep
[01:02:29] <shbot> emanuele6: bash: type: pgrep: not found
[01:02:46] *** Quits: zouhair (~zouhair@lnsm4-montreal02-142-122-58-148.internet.virginmobile.ca) (Quit: KVIrc 5.0.1 Aria http://www.kvirc.net/)
[01:03:04] <HelloShitty> That's why I use the regex to match exactly the one I want
[01:03:10] <emanuele6> # (bash -c 'sleep 10 # rts.js :)'); ps aux | grep 'rts[.]js'
[01:03:14] <emanuele6> err
[01:03:17] <shbot> emanuele6: no output within the time limit
[01:03:20] <HelloShitty> the PID is important because it matches the applicaiton I want to check. I don't even understand that question
[01:03:22] <emanuele6> # (bash -c 'sleep 10 # rts.js :)') & disown; ps aux | grep 'rts[.]js'
[01:03:24] <shbot> emanuele6: [1] 51
[01:03:36] <Filystyn> Why not open port or something
[01:03:56] <Filystyn> and talk with the app on that
[01:04:05] <HelloShitty> Filystyn: I understand that may exist hundred of solutions to a problem
[01:04:12] <HelloShitty> I just went for this one, that's all
[01:04:15] <emanuele6> ah, that is not how ps aux works
[01:04:34] <emanuele6> HelloShitty: any program can set its own cmdline to whatever
[01:04:48] *** Quits: mat001 (~mat001@c-69-181-155-247.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[01:04:52] <emanuele6> you can't try a commandline to determine if a process is running
[01:05:12] <HelloShitty> ok, but this is working now, so I'm good
[01:05:23] <HelloShitty> I'm good in the sense that I'm not going to change it now
[01:05:24] <Filystyn> I will honestly say I would never pick that kind of solution. In longer run this will cause more problems than worth it but what ever
[01:05:30] <HelloShitty> and risk to ruin it
[01:06:12] <emanuele6> it's going to run on screen any way
[01:06:15] *** Quits: jaysicks (~jaysicks@185-29-82-222.pool.digikabel.hu) (Ping timeout: 256 seconds)
[01:06:16] <HelloShitty> Filystyn: well, for my level of knowledge, this was the only solution at the time I started writting the script
[01:06:37] <HelloShitty> not eveyone are experts in bash ot whatever, right?
[01:06:50] <emanuele6> so even if you don't want to use systemd, i really don't see why you want to grep the commandline of each process on the system that you can see instead of just naming you screen sessions
[01:06:52] <HelloShitty> So, this was what came to my mind to check if the process was already started or not
[01:07:19] <HelloShitty> I am naming the screen sessions of each application
[01:07:29] <HelloShitty> but to be honest, I never thought of that
[01:07:42] <HelloShitty> to try to use session names to check if there was already a session with that name
[01:08:08] <emanuele6> then why not just check if they exist, if they don't launch them? that is not extremely reliable, but way more reliable than ps|grep and quite simple
[01:08:13] <Filystyn> I am not expert. Just my three cents. I did a bit program communiaction once. Used few solutions. But tracking pid with ps aux seems just bad idea. That is all.
[01:08:57] <Filystyn> You will probably chnage it sooner or later
[01:08:59] <HelloShitty> the ps | aux is just to check how the process is laucnhed. I'm not using ps | aux inside the script
[01:08:59] <geirha> iirc, there's still a race condition with using screen names, as it doesn't let you do exact matching
[01:09:05] <HelloShitty> inside te script I'm using pgrep
[01:09:26] <emanuele6> it's the same principle
[01:09:45] <emanuele6> you are reading the commandline of all the processes in the system that you can see
[01:09:58] <emanuele6> and checking if it matches a regular expression
[01:10:01] <emanuele6> it is just werid
[01:11:03] <emanuele6> `pgrep -f' is useful to find commands at the command line, but it is weird to use it as a way to check if programs are running
[01:11:20] <HelloShitty> Well, for now, it will be like this. When I ran into problems, I'll think of it
[01:12:13] <HelloShitty> no, pgrep and the regex only returns the PID, then I use if [[ -z "$PIDRTL" ]]; then to ceck if the varible is empty or not
[01:12:49] <HelloShitty> And I just ruined the script again
[01:12:50] <geirha> if you're going with pgrep, just use its exit status
[01:12:50] <HelloShitty> fack me
[01:12:52] <emanuele6> that is even more nonsensical
[01:13:11] <geirha> using a lockfile with flock is fairly easy and avoids most race conditions you'll have with pgrep
[01:13:12] <emanuele6> you can just use   if ! pgrep -q whatever; then ...; fi
[01:13:21] <HelloShitty> Why is it nonsensical. IF the variable is empty, means no PIDD was found
[01:13:22] <emanuele6> ( if you are going to do that )
[01:13:36] <HelloShitty> so it means the applciation is not running
[01:13:44] <HelloShitty> Don't know why is it nonsensical
[01:13:51] <emanuele6> oh, wait it is not -q'
[01:14:15] <HelloShitty> it's -z... It works with -z why would I need to change for something else?
[01:14:32] <emanuele6> HelloShitty: if you check the EXIT STATUS section of the pgrep manual
[01:14:35] <emanuele6> 0   One or more processes matched the criteria. For pkill and pwait,
[01:14:39] *** Joins: zouhair (~zouhair@lnsm4-montreal02-142-122-58-148.internet.virginmobile.ca)
[01:14:46] <emanuele6> 1    No processes matched or none of them could be signalled.
[01:14:58] <HelloShitty> ok, that makes more sense
[01:15:03] <geirha> if pgrep -f "$regex" >/dev/null ; then
[01:15:03] <emanuele6> so you can just use     if ! pgrep -f whatever ; then ...; fi
[01:15:09] <emanuele6> you don't need the variable
[01:15:18] <emanuele6> that is what i was trying to say
[01:15:22] <emanuele6> pgrep options are weird
[01:15:43] <HelloShitty> Now I need to "unfuck" the script again
[01:15:43] <emanuele6> they don't do what i would expect at least :D
[01:15:46] <HelloShitty> then I can think of that
[01:15:54] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[01:16:14] <HelloShitty> I'm messing with paths and shell expansions and it's not going good
[01:16:37] *** Quits: jmew (~jmew___@user/jmew) (Ping timeout: 240 seconds)
[01:17:06] <emanuele6> if you see the command line of your process:   "node /home/psysc0rpi0n//Downloads/RTL-v0.11.2-beta/rtl.js"
[01:17:12] <emanuele6> there is a double //
[01:17:31] <HelloShitty> yes, but I think that was a typo or something
[01:17:37] <HelloShitty> That souldn't be there
[01:17:50] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 256 seconds)
[01:17:58] <emanuele6> that is from the output of ps aux that you sent before
[01:18:06] <emanuele6> so it is probably actually there
[01:18:10] <HelloShitty> That's why I started revewing my paths variables and started messing with them, and now I fucked up the script again
[01:18:38] <HelloShitty> I need to try to fix it before I can even think of any other improvements
[01:18:40] *** Joins: kdlrep (~igloo@66.172.211.24)
[01:18:43] *** Joins: jaysicks (~jaysicks@45.132.227.32)
[01:19:58] <HelloShitty> If I want to use Debian $HOME variable to construct another path, how do I use it: RTLPATH=$HOME'/Downloads/RTL..../'  or  RTLPATH='$HOME/Downloads/RTL.../' ?
[01:20:23] <HelloShitty> $HOME needs to go inside the '' or it stays outside?
[01:20:26] <emanuele6> !varcap
[01:20:26] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[01:20:52] <emanuele6> # rtlpath=$HOME'/Downloads/RTL..../'; declare -p rtlpath; rtlpath=$HOME'/Downloads/RTL..../'; declare -p rtlpath
[01:20:53] <shbot> emanuele6: declare -- rtlpath="/root/Downloads/RTL..../"
[01:20:54] <shbot> emanuele6: declare -- rtlpath="/root/Downloads/RTL..../"
[01:21:04] <emanuele6> err
[01:21:06] <emanuele6> # rtlpath=$HOME'/Downloads/RTL..../'; declare -p rtlpath
[01:21:07] <shbot> emanuele6: declare -- rtlpath="/root/Downloads/RTL..../"
[01:21:10] <emanuele6> # rtlpath='$HOME/Downloads/RTL..../'; declare -p rtlpath
[01:21:12] <shbot> emanuele6: declare -- rtlpath="\$HOME/Downloads/RTL..../"
[01:21:23] <emanuele6> if you put $HOME inside quotes, it won't expand
[01:21:29] <HelloShitty> ok
[01:21:34] <emanuele6> !quote > HelloShitty: learn more about quoting here
[01:21:34] <greybot> HelloShitty: learn more about quoting here: https://mywiki.wooledge.org/Quotes
[01:21:34] <geirha> meh, just use a lockfile or lockdir already. Simpler.
[01:21:42] <emanuele6> ^
[01:21:55] *** Joins: aosk (~blscoe@cpc78653-glfd7-2-0-cust223.6-2.cable.virginm.net)
[01:22:03] *** Joins: sinaowolabi (~SinaOwola@160.152.110.131)
[01:22:22] *** Quits: martinus__ (~martin@151.58.202.77.rev.sfr.net) (Ping timeout: 256 seconds)
[01:22:30] <HelloShitty> Guys, I don't have any knowledge in bash, so bare with me please. I have no idea what are lockfiles or lockdirs
[01:22:30] <emanuele6> !faq 45
[01:22:30] <greybot> https://mywiki.wooledge.org/BashFAQ/045 -- How can I ensure that only one instance of a script is running at a time (mutual exclusion, locking)?
[01:22:37] <HelloShitty> anyway, let me try to fix the paths
[01:22:42] <emanuele6> read the links we give you.
[01:23:06] <aosk> Hi, how can I use the value of @ from the caller and $VISUAL supplied by the enviroment of the login shell? -lc "${VISUAL} $@"
[01:23:07] <wiscii> brain-melting..
[01:23:49] *** Quits: jaysicks (~jaysicks@45.132.227.32) (Ping timeout: 256 seconds)
[01:23:52] <aosk> Hi, how can I use the value of @ from the caller and $VISUAL supplied by the enviroment of the login shell in bash -lc "${VISUAL} $@"  ?
[01:24:25] <larryv> VISUAL is in the environment already?
[01:24:26] <emanuele6> bash -lc '"${VISUAL}" "$@"' "$@"
[01:24:38] <aosk> larryv: no
[01:24:55] <larryv> oh i see, you want to invoke it
[01:25:04] <larryv> nvm i had something else in mind
[01:25:20] <aosk> Basically, VISUAL is unset and it gets set in `bash -l`.
[01:25:20] <emanuele6> actually
[01:25:24] <emanuele6> bash -lc '"${VISUAL}" "$@"' _ "$@"
[01:25:38] *** Quits: kdlrep (~igloo@66.172.211.24) (Ping timeout: 250 seconds)
[01:26:02] <emanuele6> and {} are redundant obviously
[01:26:09] <aosk> yeah, let me try
[01:29:28] <aosk> Something is not quite right
[01:29:50] <emanuele6> can you show me the value output of:   bash -lc 'declare -p VISUAL' ?
[01:29:58] <emanuele6> s/value //
[01:30:11] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Quit: WeeChat 3.4)
[01:30:21] *** Joins: analognoise (~analognoi@185.229.59.36)
[01:31:23] *** Quits: analognoise (~analognoi@185.229.59.36) (Max SendQ exceeded)
[01:31:52] *** Joins: analognoise (~analognoi@185.229.59.36)
[01:32:53] <aosk> I am doing this: https://wiki.termux.com/wiki/Intents_and_Hooks
[01:32:57] <aosk> This is a working script: https://pastebin.com/raw/jz4Qup2K
[01:33:01] <aosk> I want to remove the middle line.
[01:33:40] <HelloShitty> ok, now paths are fixed
[01:34:01] <HelloShitty> I will try to change the pgrep thing to check the return value instead of saving the PIDs
[01:34:08] <HelloShitty> and cecking the PIDs
[01:34:21] *** Quits: eldritch_ (~eldritch@user/eldritch/x-9272577) (Quit: bye)
[01:34:21] *** Quits: glider (~glider@user/glider) (Quit: ZNC - https://znc.in)
[01:34:21] *** Quits: anderson (~ande@user/anderson) (Quit: bye)
[01:34:42] <emanuele6> aosk: if that script script is working it means that you don't actually need bash -l because $VISUAL is expanded by that shell (probably because you source .profile)
[01:35:09] <aosk> Yeah, that is correct, I forgot to remove -l in bash -l for that example./
[01:35:09] <emanuele6> aosk: anyway, now you have showed that the value of VISUAL:  VISUAL="emacsclient -t"
[01:35:20] <aosk> Yeah
[01:35:44] <aosk> So I want to keep $VISUAL unset in the caller and use the value of $VISUAL from the subshell, the bash login shell.
[01:35:46] <emanuele6> that is what the declare -p VISUAL that i asked would have printed out
[01:35:54] <emanuele6> anyhow
[01:36:00] <emanuele6> bash -lc '${VISUAL} "$@"' _ "$@"
[01:36:02] <emanuele6> err
[01:36:05] <emanuele6> bash -lc '$VISUAL "$@"' _ "$@"
[01:36:07] <emanuele6> that should work
[01:36:15] <aosk> Okay, I will try that..
[01:36:21] <aosk> Okay, I will try that.
[01:36:34] <emanuele6> "$VISUAL" does not work because VISUAL contains a program name and an argument
[01:36:49] <emanuele6> so it expects to be word splitted
[01:37:11] *** Joins: sinaowolabi_ (~SinaOwola@160.152.110.131)
[01:37:52] *** Joins: jaysicks (~jaysicks@194.5.48.227)
[01:39:45] *** Joins: newchair (~newchair@d-24-145-4-109.paw.cpe.atlanticbb.net)
[01:40:06] <aosk> emanuele6: perfect!! thank you!
[01:40:42] *** Joins: eldritch_ (~eldritch@user/eldritch/x-9272577)
[01:41:05] <aosk> Actually $VISUAL is unset in the the script, because https://github.com/termux/termux-widget#Setup-Instructions
[01:41:20] <aosk> https://github.com/termux/termux-widget#termux-environment
[01:41:20] *** Quits: Alternity (~Alternity@user/alternity) (Read error: Connection reset by peer)
[01:42:04] <aosk> I was trying to pass $@ as is and use $VISUAL from the subset enviroment and `bash -lc '$VISUAL "$@"' _ "$@"` works
[01:42:14] <aosk> subshell*
[01:42:21] *** Joins: glider (~glider@user/glider)
[01:43:27] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[01:43:31] *** Joins: Alternity (~Alternity@user/alternity)
[01:46:38] <emanuele6> aosk: `_' is just a placeholder for `$0' (it could be anything that isn't `-' or `--'), "$@" forwards the arguments to the new bash running with -l
[01:46:40] *** Joins: anderson (~ande@user/anderson)
[01:46:57] <emanuele6> `$VISUAL "$@"' is the code that the new bash will run
[01:47:02] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:3851:118b:4a93:672e)
[01:47:29] <newchair> I just finished setting up a really nice bash ps1 <https://pastebin.com/EEdR3xaF> but whenever i type past a certain width of chars when using this prompt, the whole thing gets messed up and i cant go to the beginning of the line. The  prompt is  2 separate lines could that be the issue?
[01:47:29] <pasteban> Paste is available without ads on https://pastebin.com/raw/EEdR3xaF
[01:47:31] <emanuele6> before you had "${VISUAL} $@" so the $VISUAL and $@ were actually being expanded by the shell, not the new bash
[01:48:17] <emanuele6> so if you ran your script as   ./my_script file1.sh file2.sh,   the command you were actually running was: ' file1.sh' 'file2.sh'
[01:48:23] <emanuele6> err
[01:48:31] <aosk> I understand, thank you!
[01:48:42] <emanuele6> the command you were actually running was: bash -lc ' file1.sh' file2.sh
[01:48:49] *** Joins: hlauk (~hlauk@176.33.96.72)
[01:49:01] <emanuele6> which would in turn try to run file1.sh as a program and ignore file2.sh
[01:49:06] <aosk> but the -c needed everything together
[01:49:08] <aosk> yeah
[01:49:39] <emanuele6> !faq color
[01:49:39] <greybot> https://mywiki.wooledge.org/BashFAQ/037 -- How can I print text in various colors?
[01:49:42] <emanuele6> err
[01:49:45] <emanuele6> !faq prompt
[01:49:45] <greybot> https://mywiki.wooledge.org/BashFAQ/053 -- I have a fancy prompt with colors, and now bash doesn't seem to know how wide my terminal is.  Lines wrap around incorrectly.
[01:49:51] <emanuele6> newchair: ^
[01:50:18] <emanuele6> basically you need to put \[ and \] between your zero width characters in the prompt
[01:52:18] <newchair> whats a zero-width character? lol sorry im new to this
[01:54:08] *** Quits: jaysicks (~jaysicks@194.5.48.227) (Ping timeout: 272 seconds)
[01:54:20] *** Joins: sargon (~sargon@188.250.185.117)
[01:54:34] <newchair> greybot: ah sorry i missed
[01:54:45] <newchair> that link
[01:55:10] <newchair> i cant type -_-
[01:55:15] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:3851:118b:4a93:672e) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:55:40] <emanuele6> !iamabot
[01:55:40] <greybot> I am only a software bot, programmed to hand out information. Talk to the person who last said something beginning with "!" before I spoke; that's the person who asked me to say something.
[01:56:57] <wiscii> greybot is my imaginary friend :)
[01:57:13] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:3851:118b:4a93:672e)
[01:57:24] <newchair> i just had a conversation with a bot
[01:57:27] <newchair> lol
[01:57:46] <wiscii> it's quite addictive
[01:57:49] <emanuele6> !bot
[01:57:49] <greybot> I know I am, but what are you?
[01:57:53] <emanuele6> !human
[01:57:53] <greybot> I know you are, but what am I?
[01:58:04] <wiscii> !circuit
[01:58:06] <larryv> !b24
[01:58:07] <greybot> The newcomer will address greybot as if it were human.
[01:58:16] *** Joins: zebrag (~chris@user/zebrag)
[01:58:22] *** Quits: aosk (~blscoe@cpc78653-glfd7-2-0-cust223.6-2.cable.virginm.net) (Quit: Client closed)
[01:58:43] <wiscii> !factoids
[01:58:43] <greybot> My factoid database, and other things, are available at http://wooledge.org/~greybot/
[02:00:15] <wiscii> tha !turing could be better ;-)
[02:04:28] *** Joins: nyex (~Thunderbi@177.84.107.26)
[02:08:35] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Ping timeout: 256 seconds)
[02:09:04] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[02:09:40] *** Joins: unop (~unop@195.91.14.193)
[02:09:42] *** Joins: jaysicks (~jaysicks@185-29-82-222.pool.digikabel.hu)
[02:11:37] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[02:14:14] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[02:15:16] *** Quits: lesshaste (~lesshaste@82-69-126-43.dsl.in-addr.zen.co.uk) (Remote host closed the connection)
[02:15:28] *** Joins: lesshaste (~lesshaste@82-69-126-43.dsl.in-addr.zen.co.uk)
[02:19:04] <welder> !-x
[02:19:05] *** Joins: loganlee[gnu] (~Thunderbi@user/loganlee)
[02:19:05] <greybot> set -x (or ''bash -x myscript'') makes bash output the exact command that it will run after parsing and expansion. You can put ''set -x'' just before the code you want to debug (turn off with ''set +x''). To add more information, change PS4 first: eg. PS4='+($?) $BASH_SOURCE:$FUNCNAME:$LINENO:'
[02:20:46] *** Joins: Filohuhum (~dante@gateway/tor-sasl/filohuhum)
[02:21:11] <wiscii> luxury debugging
[02:22:01] <emanuele6> !step
[02:22:01] <greybot> step through your code, look into bashdb or put this where you want to begin stepping: debug_prompt () { read -p "[$BASH_SOURCE:$LINENO] $BASH_COMMAND?" _ ;}; trap 'debug_prompt "$_"' DEBUG
[02:22:41] *** Quits: bluedust_ (~bluedust@59.89.219.44) (Remote host closed the connection)
[02:23:52] *** Joins: bluedust (~bluedust@59.89.219.44)
[02:25:14] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[02:25:30] *** Joins: unop (~unop@195.91.14.193)
[02:25:53] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[02:27:29] *** Quits: hlauk (~hlauk@176.33.96.72) (Quit: Leaving)
[02:30:03] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[02:35:58] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:36:06] *** Quits: nyex (~Thunderbi@177.84.107.26) (Quit: nyex)
[02:36:33] <wiscii> !learn notbot !notbot
[02:36:33] <greybot> OK, wiscii
[02:37:43] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:37:52] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:38:07] <wiscii> !forget notbot
[02:38:07] <greybot> OK, wiscii
[02:38:18] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[02:38:28] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:38:35] *** Joins: mat001_ (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[02:38:37] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:38:48] <wiscii> !learn notbot # printf '!notbot'
[02:38:49] <greybot> OK, wiscii
[02:39:30] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:39:38] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:39:43] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:3851:118b:4a93:672e) (Ping timeout: 250 seconds)
[02:40:03] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:40:07] <wiscii> !forget notbot
[02:40:07] <greybot> OK, wiscii
[02:40:18] <wiscii> !learn notbot # printf '!notbot\n'
[02:40:18] <greybot> OK, wiscii
[02:40:55] *** Joins: rgrinberg (~textual@187.194.14.9)
[02:41:45] <emanuele6> !forget notbot
[02:41:45] <greybot> OK, emanuele6
[02:41:49] <emanuele6> it can't work anyway.
[02:42:15] <emanuele6> shbot always prefixes the each line of output with your nick.
[02:42:49] <wiscii> oh yeah, forgot
[02:42:55] <emanuele6> s/the //
[02:43:20] <emanuele6> but please don't add malicious factoids.
[02:43:33] <wiscii> i will not do it again :)
[02:44:46] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:45:12] *** Quits: Filohuhum (~dante@gateway/tor-sasl/filohuhum) (Remote host closed the connection)
[02:45:30] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:45:32] <wiscii> the shbot output nick prefix is the guard
[02:45:41] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:46:34] *** Joins: Filohuhum (~dante@gateway/tor-sasl/filohuhum)
[02:48:54] *** Quits: mat001_ (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[02:49:10] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[02:52:16] <wiscii> maybe greybot could use a filter, `if printf "$2" | grep '^!.*'; then exit 1; fi`
[02:52:31] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:52:40] <Filystyn> Is this fine to do ( ' commands '{}' further things' \;
[02:52:41] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:52:44] <Filystyn> find "$src" -type f -exec sh -c 'rm -f '"$tmpfile"'; cat'{}' | fstrswp '\''malloc.h'\'' '\''stdlib.h'\'' > '"$tmpfile"'; rm -f '{}'; mv '"$tmpfile"' '{} \;
[02:52:53] *** Joins: volga629 (~volga629@72.139.93.26)
[02:53:26] <Filystyn> or can I simply put {} inside the ' '
[02:53:43] <geirha> that's shell injection
[02:53:53] *** Quits: zaden (~maddx@c-73-92-207-228.hsd1.ca.comcast.net) (Quit: WeeChat 3.5-dev)
[02:54:05] <geirha> pass the {} as argument to sh instead, then use "$1" inside sh -c
[02:54:24] *** Joins: zaden (~maddx@c-73-92-207-228.hsd1.ca.comcast.net)
[02:54:27] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:54:36] <Filystyn> wait, pass how
[02:54:36] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:54:56] <geirha> -exec sh -c 'echo {}' \;  # BAD
[02:54:58] <geirha> -exec sh -c 'echo "$1"' _ {} \;  # GOOD
[02:55:07] *** Quits: howdoi (uid224@id-224.lymington.irccloud.com) (Quit: Connection closed for inactivity)
[02:55:39] <Filystyn> ok and _ is for program name ye ?
[02:56:13] <geirha> a placeholder for the script's name, yes
[02:56:28] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:56:37] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:56:44] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[02:56:53] <Filystyn> ok  nice thank you
[02:57:07] <geirha> normally the script's name is set based on the script's filename, but when passing the script as an argument, there's no filename, so instead it expects you to provide the name as the next argument
[02:57:19] *** Quits: Inline (~Inline@ip-037-201-241-209.um10.pools.vodafone-ip.de) (Remote host closed the connection)
[02:57:43] *** Joins: Inline (~Inline@ip-037-201-241-209.um10.pools.vodafone-ip.de)
[02:57:56] *** Joins: rgrinberg (~textual@187.194.14.9)
[02:58:14] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:58:37] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[02:59:31] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[02:59:37] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[03:00:07] *** Joins: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au)
[03:00:36] <larryv> wiscii: you seem to like dynamically constructing printf(1) format strings. you should stop doing that
[03:00:37] *** Quits: kurahaupo_ (~kurahaupo@pa49-197-103-160.pa.qld.optusnet.com.au) (Read error: Connection reset by peer)
[03:00:39] *** ChanServ sets mode: +o geirha
[03:00:41] *** geirha sets mode: +b-bo kurahaupo_!~kurahaupo@*$##fix_your_connection kurahaupo_!~kurahaupo@115.69.27.211$##fix_your_connection geirha
[03:02:06] *** Quits: off^ (~off@50.235.176.163) (Ping timeout: 256 seconds)
[03:02:38] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[03:03:21] *** Joins: rgrinberg (~textual@187.194.14.9)
[03:03:36] *** Quits: analognoise (~analognoi@185.229.59.36) (Quit: Leaving)
[03:05:55] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:07:06] <Filystyn> worked like a gem
[03:07:14] <Filystyn> have a nice night cya !
[03:07:17] *** Quits: Filystyn (~piotr@user/filystyn) (Quit: leaving)
[03:11:37] *** Quits: skered (~dereks@user/skered) (Ping timeout: 240 seconds)
[03:12:46] *** Quits: bluedust (~bluedust@59.89.219.44) (Remote host closed the connection)
[03:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:15:31] *** Quits: BUSY (~BUSY@user/busy) (Remote host closed the connection)
[03:15:38] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[03:17:38] *** Joins: BUSY (~BUSY@user/busy)
[03:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:20:39] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[03:20:45] *** Joins: off^ (~off@50.235.176.163)
[03:23:46] <Earnestly> d# p=$(printf 'foo\nbar'); case $p in *${IFS#??}*) printf newline\\n; esac
[03:23:47] <shbot> Earnestly: newline
[03:23:55] <Earnestly> d# p=$(printf 'foo\rbar'); case $p in *${IFS#??}*) printf newline\\n; esac
[03:23:56] <shbot> Earnestly: no output
[03:23:59] *** Joins: zeden (~zeden@user/zeden)
[03:24:06] *** Joins: rcernin (~rcernin@124.190.132.36)
[03:24:20] *** Quits: zeden (~zeden@user/zeden) (Client Quit)
[03:26:36] *** Quits: OlCe (~user@amontsouris-156-1-23-81.w92-151.abo.wanadoo.fr) (Ping timeout: 272 seconds)
[03:30:02] *** Quits: waxfire6 (~waxfire@65.119.2.240) (Quit: The Lounge - https://thelounge.chat)
[03:30:37] *** Joins: waxfire6 (~waxfire@65.119.2.240)
[03:33:50] *** Quits: jaysicks (~jaysicks@185-29-82-222.pool.digikabel.hu) (Ping timeout: 256 seconds)
[03:36:48] *** Joins: chenqisu1 (~chenqisu1@183.217.200.249)
[03:36:50] *** Joins: jaysicks (~jaysicks@185-29-82-222.pool.digikabel.hu)
[03:38:33] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Remote host closed the connection)
[03:38:53] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[03:39:56] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[03:40:56] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:f5fc:59c9:ba9b:990)
[03:42:39] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 256 seconds)
[03:43:06] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[03:48:04] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[03:48:37] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:f5fc:59c9:ba9b:990) (Ping timeout: 240 seconds)
[03:48:39] *** Joins: unop (~unop@195.91.14.193)
[03:52:52] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Quit: PROTO-IRC v0.73a (C) 1988 NetSoft - Built on 11-13-1988 on AT&T System V)
[03:53:19] *** Joins: rgrinberg (~textual@187.194.14.9)
[04:01:05] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[04:06:56] *** Quits: freepp (~freepppp@193.92.35.32.dsl.dyn.forthnet.gr) (Read error: Connection reset by peer)
[04:08:18] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:89b6:75bb:9400:4d95)
[04:12:45] *** Quits: newchair (~newchair@d-24-145-4-109.paw.cpe.atlanticbb.net) (Quit: Client closed)
[04:12:57] *** Quits: Jong (~Jong@2620:10d:c090:400::5:8039) (Ping timeout: 240 seconds)
[04:16:11] *** Joins: m0viefreak (~asdf@user/m0viefreak)
[04:19:40] *** Joins: computerworm110 (~quassel@216.114.110.6)
[04:23:18] *** Quits: loganlee[gnu] (~Thunderbi@user/loganlee) (Quit: loganlee[gnu])
[04:25:44] *** Joins: dre (~dre@2001:8003:c932:c301:65d5:9857:1e2b:4377)
[04:26:45] *** Quits: dre (~dre@2001:8003:c932:c301:65d5:9857:1e2b:4377) (Client Quit)
[04:33:37] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[04:35:40] *** Quits: acidsys (~LSD@2a03:4000:55:d20::3) (Excess Flood)
[04:36:23] *** Joins: acidsys (~LSD@2a03:4000:55:d20::3)
[04:37:03] *** Quits: yustin (~yustin@user/yustin) (Ping timeout: 256 seconds)
[04:37:26] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Read error: Connection reset by peer)
[04:37:48] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[04:38:10] *** Quits: computerworm110 (~quassel@216.114.110.6) (Ping timeout: 272 seconds)
[04:44:06] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[04:45:32] *** Joins: loganlee[gnu] (~Thunderbi@user/loganlee)
[04:46:48] *** Joins: crashrep (~crashrep@user/crashrep)
[04:49:24] *** Quits: n4dir (~user@88.130.152.4) (Remote host closed the connection)
[04:51:40] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[04:52:36] *** Quits: Bercik (~Redomen@user/bercik) (Ping timeout: 256 seconds)
[04:55:52] *** Joins: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl)
[04:55:53] *** Quits: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl) (Changing host)
[04:55:53] *** Joins: Bercik (~Redomen@user/bercik)
[04:56:19] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[04:58:46] *** Quits: lesshaste (~lesshaste@82-69-126-43.dsl.in-addr.zen.co.uk) (Remote host closed the connection)
[04:58:58] *** Joins: lesshaste (~lesshaste@82-69-126-43.dsl.in-addr.zen.co.uk)
[05:00:06] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.4)
[05:00:57] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:04:49] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[05:05:43] *** Joins: luckiswithme (~luckiswit@149.167.138.135)
[05:05:45] *** Joins: junebug (~junebug@2600:1700:3db0:2540:2d12:aa64:c287:4ac7)
[05:07:18] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Ping timeout: 272 seconds)
[05:08:08] <Betal> what is an easy way to recursive do `touch -r dir1/file dir2/file` where file is the same name in both directory tree? iam thinking in `cd dir1; find . -type f -exec touch -r "{}" "../dir2/{}" \;`
[05:09:25] <Inline> find . -type f -name file -exec touch {} +
[05:10:33] <Inline> and you don't cd to anywhere, find is already recursive
[05:11:06] <larryv> that isn't what Betal is asking for
[05:13:51] <larryv> Betal: you are sure that every file under dir1 is also under dir2?
[05:14:06] <Betal> looks 'find' result in {} carry the path relative to where we are, so I guess using cd first, we can use the same {} for dir2/{}
[05:14:21] <Inline> for dir in dirs; do touch dir/file; done ?
[05:14:33] <ackyshake> or simply touch {dir1,dir2}/file
[05:14:43] <Inline> or just touch */file;
[05:14:48] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Quit: Leaving)
[05:15:13] <Betal> larryv: using 'tree dir1 > 1.txt', 'tree dir2 > 2.txt', and "git diff 1.txt 2.txt", only main directory name is diff
[05:15:29] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[05:15:43] <ackyshake> Inline: that won't work if there are non directories in the path.
[05:16:02] <Inline> ah yes
[05:17:17] <Betal> ackyshake: isn't this going to simple touch files? the idea is to give 'modify time' of dir1/file to dir2/file, thats why touch -r dir1/file dir2/file
[05:18:13] <Inline> ah yes the reference file
[05:18:40] <Inline> for mtime setting
[05:18:42] <larryv> Betal: what you have ought to work, as far as i know
[05:18:57] <larryv> why exactly are you copying mtimes over from one directory hierarchy to other, though?
[05:19:12] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:89b6:75bb:9400:4d95) (Ping timeout: 250 seconds)
[05:19:26] *** Joins: skered (~dereks@user/skered)
[05:19:43] <Inline> to steal effectively ?
[05:19:46] <Inline> lol
[05:20:19] <Betal> dir2 is recovered data, while dir1 is corrupted data with correct metadata
[05:20:27] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:9818:747d:186f:47b5)
[05:20:36] <Inline> aha
[05:21:29] *** Joins: adanwan_ (~adanwan@gateway/tor-sasl/adanwan)
[05:22:20] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Remote host closed the connection)
[05:22:35] <larryv> okay. as long as dir2 isn't missing anything, what you started with should work
[05:26:44] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[05:27:57] <e36freak> you can -exec sh -c '[ -e ../dir2/"$1" ] && touch -r "$1" ../dir2/"$1"' _ {} \; to handle that
[05:28:17] *** Quits: N4buc0- (~N4buc0@177.16.170.138) (Ping timeout: 240 seconds)
[05:28:42] <Inline> for dir in dirs; ref=dir{1,3,5},mod=dir{2,3,6]; do touch -r ref/file mod/file; done ?
[05:29:36] *** Joins: userT (~user0@187.140.230.181)
[05:31:08] <Betal> larryv: it worked \o
[05:31:21] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:31:36] <larryv> nice
[05:32:16] <Betal> e36freak: yea, checking if file exist is a better generic approach
[05:33:33] <e36freak> i guess you could also -exec test -e ../dir2/{} \; -exec touch -r {} ../dir2/{} \;
[05:34:24] <userT> In practice, what could be the difference between unset variables and empty string variables?
[05:34:26] <larryv> Inline: you're not expanding any of the variables you set, among other problems
[05:34:33] *** Quits: NoelFlantier3 (~Hubert@195.201.244.189) (Remote host closed the connection)
[05:34:38] <Betal> e36freak: how exactly your first find works with the _ {} ?
[05:34:59] *** Joins: NoelFlantier3 (~Hubert@195.201.244.189)
[05:35:01] <e36freak> Betal: when used with -c, sh or bash treat the first argument as $0
[05:35:06] <e36freak> so _ is just a dummy value for $0
[05:35:11] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:9818:747d:186f:47b5) (Ping timeout: 256 seconds)
[05:35:39] <Betal> e36freak: can't you change $1 to $0 and remove the _ ?
[05:36:07] <e36freak> you could, but using $0 is a little weird, and if you want to use {} + and loop over the file arguments $0 won't be included in "$@"
[05:36:13] <e36freak> so it's standard to just put something there
[05:36:28] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:f0a2:d1c3:4490:2515)
[05:36:51] <larryv> userT: the difference matters if you have a variable where an empty value has meaning
[05:37:26] *** Joins: vysn (~vysn@user/vysn)
[05:37:53] <Betal> e36freak: I see, so for \; this works, but when the giant string comes from \+, $0 will be lost
[05:38:32] <userT> And I still struggle to imagine one example...
[05:38:37] <userT> (I'm noob)
[05:39:28] <larryv> Betal: sort of. the standard shell idioms of looping over arguments just don't include $0
[05:39:42] <larryv> you could "fix" that but it'd be weird
[05:40:02] <e36freak> userT: IFS is one example, an empty IFS means a different thing from an unset IFS, which uses a default value
[05:40:51] <userT> ...ouch
[05:40:56] <e36freak> similarly with "read", providing read -d '' sets an empty delimiter value, while not using -d at all leaves that value unset which has it use a default value ("\n")
[05:41:06] <e36freak> internally i mean, but that's an example where there's a difference
[05:41:15] *** Quits: junebug (~junebug@2600:1700:3db0:2540:2d12:aa64:c287:4ac7) (Quit: Leaving)
[05:41:44] *** Quits: Filohuhum (~dante@gateway/tor-sasl/filohuhum) (Remote host closed the connection)
[05:42:12] <userT> Oh. Thanks.
[05:42:37] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:f0a2:d1c3:4490:2515) (Ping timeout: 240 seconds)
[05:42:56] *** Joins: Filohuhum (~dante@gateway/tor-sasl/filohuhum)
[05:43:37] <e36freak> userT: make sense? you may want to allow an empty string for an argument, but use a default when no argument is supplied. that'd be one common reason to differentiate betwene the two
[05:45:57] <userT> Yes, makes a bit of sense. Still not totally because I need to know more, but yes.
[05:46:19] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[05:46:26] *** Quits: rcernin (~rcernin@124.190.132.36) (Ping timeout: 256 seconds)
[05:46:50] <userT> With that last example, I guess you mean the construction ${var1-$var0}
[05:47:03] <userT> (I learned about it just recently)
[05:47:19] <e36freak> that's one possible way to implement a default, sure
[05:47:30] <e36freak> : ${var1=var2} is another common thing you'll see
[05:47:56] <e36freak> or if you wanna be verbose, you can [[ -v var1 ]] || var1=$var2
[05:47:59] <userT> An additional colon ':' on that for also including *empty* strings
[05:48:50] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:4414:dfd5:8bde:213a)
[05:48:59] <userT> construction ${var1:-$var0}
[05:49:16] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[05:49:24] <e36freak> correct
[05:49:34] <e36freak> likewise "${var1:=$var2}"
[05:51:13] <userT> But, this type of contruction, by default always tries to *run* something? Thus the ':' at beginning in order to skip it?
[05:51:17] <userT> Or something like that?
[05:51:52] <userT> Because yes, I already saw that example quite often...
[05:51:57] *** Joins: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903)
[05:53:53] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:4414:dfd5:8bde:213a) (Ping timeout: 256 seconds)
[05:54:33] <larryv> the variable expansion doesn't try to "run" anything
[05:54:58] <larryv> but if it's in command position, its expansion may be interpreted as a utility name
[05:55:17] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:69db:e827:4059:f439)
[05:55:49] <larryv> that's generally not what you want. hence using such expansions as arguments for the : command, which does nothing
[05:56:01] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:56:28] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Max SendQ exceeded)
[05:56:41] <userT> What did the ':' command mean? (Trying to remember...)
[05:56:47] <larryv> !:
[05:56:48] <greybot> : is a builtin identical to the 'true' builtin; they do nothing and have an exit status of 0
[05:57:00] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:57:01] *** Joins: forgotmynick (uid24625@id-24625.hampstead.irccloud.com)
[05:57:07] <userT> Oohhh, right.
[05:58:32] *** Joins: rcernin (~rcernin@124.190.132.36)
[06:01:48] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Quit: Leaving)
[06:05:45] *** Quits: Filohuhum (~dante@gateway/tor-sasl/filohuhum) (Remote host closed the connection)
[06:05:47] <skered> epic
[06:05:54] <skered> oops wrong window
[06:07:09] *** Quits: rcernin (~rcernin@124.190.132.36) (Ping timeout: 256 seconds)
[06:07:52] <Friithian> epic
[06:08:17] *** Quits: cliluw (~cliluw@47.147.73.223) (Ping timeout: 256 seconds)
[06:09:05] <userT> Epic!
[06:09:09] *** Joins: cliluw (~cliluw@47.147.73.223)
[06:09:47] *** Quits: ablegreen (~ablegreen@tsunami.ocf.berkeley.edu) (Quit: Lost terminal)
[06:11:13] *** Quits: drbeco (~beco@2804:351c:dd01:6600:e4a2:7a5d:e23f:1fd8) (Quit: Leaving)
[06:15:31] *** Joins: rcernin (~rcernin@124.190.132.36)
[06:16:03] *** Quits: userT (~user0@187.140.230.181) (Quit: leaving)
[06:17:52] *** Quits: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net) (Quit: Quit)
[06:20:45] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:69db:e827:4059:f439) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:20:46] *** Quits: rcernin (~rcernin@124.190.132.36) (Ping timeout: 272 seconds)
[06:21:34] *** Quits: sinaowolabi (~SinaOwola@160.152.110.131) (Ping timeout: 256 seconds)
[06:22:08] *** Quits: sinaowolabi_ (~SinaOwola@160.152.110.131) (Ping timeout: 256 seconds)
[06:23:41] *** Joins: volga629 (~volga629@72.139.93.26)
[06:25:36] *** Joins: herjazz (~herjazz@p10513117-ipngn24101marunouchi.tokyo.ocn.ne.jp)
[06:27:19] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903) (Ping timeout: 256 seconds)
[06:28:22] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 256 seconds)
[06:32:29] *** Parts: jaggz (~jaggz@user/jaggz) (Leaving)
[06:32:56] *** Joins: vlm (~vlm@user/vlm)
[06:34:37] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:37:07] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[06:43:11] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8)
[06:44:33] *** Quits: jos1 (~jos3@dyndsl-178-142-069-187.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
[06:47:43] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8) (Ping timeout: 256 seconds)
[06:50:02] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8)
[06:56:13] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8) (Ping timeout: 240 seconds)
[06:57:10] *** Joins: jos1 (~jos3@dyndsl-091-096-038-094.ewe-ip-backbone.de)
[07:02:02] *** Quits: vicecea (~vicecea@gateway/vpn/pia/vicecea) (Remote host closed the connection)
[07:02:20] *** Joins: vicecea (~vicecea@gateway/vpn/pia/vicecea)
[07:02:43] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:69db:e827:4059:f439)
[07:06:07] <mattf> hi
[07:06:37] <mattf> I have this little function that takes a unicode character hex value and converts into the actual character for bash: chru() { printf "\\U$(printf '%08x' "$1")"; }
[07:06:45] <mattf> but it doesn't work on mac's bash :P
[07:06:50] <mattf> what is up with mac's bash
[07:07:56] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8)
[07:10:52] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[07:11:03] *** Joins: pabs3 (~pabs3@user/pabs3)
[07:11:23] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[07:11:28] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[07:11:56] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[07:12:17] *** Joins: seninha (~seninha@user/seninha)
[07:14:38] <ackyshake> the bundled bash on mac is quite old, and for all intents and purposes, deprecated in favor of zsh which is now the default shell. I'm guessing support for \U was added in a later version of bash than is available on the mac
[07:17:08] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 272 seconds)
[07:17:38] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[07:19:08] <ackyshake> The version on mac for bash is 3.2 which was released in 2006, and it'll soon be allowed to drive in many US states :)
[07:28:22] *** Joins: computerworm110 (~quassel@216.114.110.6)
[07:28:32] <larryv> mattf: \u and \U were added in bash 4.2
[07:28:55] <mattf> chru() { printf "\x$(printf %x "$1")"; } worked for me
[07:28:58] <mattf> thanks
[07:30:37] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:69db:e827:4059:f439) (Ping timeout: 240 seconds)
[07:32:19] *** Joins: d3w3r- (~d3w3r@2800:484:8d87:5200:bfea:a30a:1a1:6fb3)
[07:33:51] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 256 seconds)
[07:35:35] *** Quits: d3w3r- (~d3w3r@2800:484:8d87:5200:bfea:a30a:1a1:6fb3) (Quit: Leaving)
[07:37:10] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:40:01] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Client Quit)
[07:41:28] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:45:20] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[07:47:42] *** Quits: nunggu (~q@user/nunggu) (Ping timeout: 276 seconds)
[07:48:17] *** Quits: computerworm110 (~quassel@216.114.110.6) (Ping timeout: 240 seconds)
[07:51:06] *** Quits: off^ (~off@50.235.176.163) (Ping timeout: 256 seconds)
[07:51:26] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[07:53:08] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[07:53:50] *** Joins: malina (~malina@user/malina)
[07:54:32] *** Quits: domicron (~domicron@gateway/tor-sasl/domicron) (Quit: Ping timeout (120 seconds))
[07:54:56] *** Joins: domicron (~domicron@gateway/tor-sasl/domicron)
[07:56:19] *** Joins: rgrinberg (~textual@187.194.14.9)
[07:57:24] *** Quits: reset (~reset@user/reset) (Quit: reset)
[08:00:07] *** Joins: off^ (~off@50.235.176.163)
[08:02:45] *** Quits: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com) (Ping timeout: 256 seconds)
[08:03:32] *** Joins: computerworm110 (~quassel@216.114.110.6)
[08:04:27] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 256 seconds)
[08:06:18] *** Joins: abrattic (~abrattic@182.70.173.19)
[08:08:11] *** Quits: mannequin (uid453465@id-453465.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[08:08:11] *** Quits: abrattic (~abrattic@182.70.173.19) (Client Quit)
[08:08:39] *** Joins: abrattic (~abrattic@182.70.173.19)
[08:09:37] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8) (Ping timeout: 240 seconds)
[08:16:24] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[08:19:48] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[08:20:25] *** Joins: rgrinberg (~textual@187.194.14.9)
[08:20:34] *** Quits: off^ (~off@50.235.176.163) (Ping timeout: 256 seconds)
[08:21:07] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[08:21:54] *** Joins: rgrinberg (~textual@187.194.14.9)
[08:23:40] *** Quits: FluffyMask (~masque@user/fluffymask) (Quit: WeeChat 3.4)
[08:24:09] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[08:25:06] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8)
[08:26:06] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:3853:4a1e:23f:a5b)
[08:26:33] *** Quits: computerworm110 (~quassel@216.114.110.6) (Ping timeout: 256 seconds)
[08:26:49] *** Quits: zauberfisch (~Zauberfis@cm147-42.liwest.at) ()
[08:28:42] *** Joins: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com)
[08:30:12] *** Parts: abrattic (~abrattic@182.70.173.19) (Good Bye)
[08:30:44] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:3853:4a1e:23f:a5b) (Ping timeout: 250 seconds)
[08:34:10] *** Quits: karakedi (~eAC53C340@user/karakedi) (Ping timeout: 256 seconds)
[08:34:17] *** Joins: rgrinberg (~textual@187.194.14.9)
[08:36:41] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[08:37:17] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:a54b:13e2:82b5:a352)
[08:37:39] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[08:37:46] *** Joins: karakedi (~eAC53C340@user/karakedi)
[08:38:43] *** Joins: Atque (~Atque@user/atque)
[08:39:02] *** Joins: mybbgirl (~mybbgirl@188.25.57.254)
[08:41:08] *** Joins: off^ (~off@50.235.176.163)
[08:42:17] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:a54b:13e2:82b5:a352) (Ping timeout: 240 seconds)
[08:43:28] *** Quits: mybbgirl (~mybbgirl@188.25.57.254) (K-Lined)
[08:46:04] *** Quits: malina (~malina@user/malina) (Remote host closed the connection)
[08:48:22] *** Joins: nunggu (~q@user/nunggu)
[08:50:03] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:8d02:94d4:341b:3a0c)
[08:56:46] *** Joins: zauberfisch (~Zauberfis@cm147-42.liwest.at)
[09:06:06] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3c73:3837:d514:4fe8) (Quit: WeeChat 3.4)
[09:06:30] *** Joins: rcernin (~rcernin@124.190.132.36)
[09:08:44] *** Quits: off^ (~off@50.235.176.163) (Ping timeout: 256 seconds)
[09:09:18] *** Quits: xx (~xx@user/xx) (Ping timeout: 250 seconds)
[09:11:05] *** Quits: luckiswithme (~luckiswit@149.167.138.135) (Quit: Konversation terminated!)
[09:11:22] *** Joins: luckiswithme (~luckiswit@149.167.138.135)
[09:17:17] *** Quits: timj (~timj@user/timj) (Ping timeout: 240 seconds)
[09:29:27] *** Quits: A|an (~Alan@173.218.175.171) (Ping timeout: 256 seconds)
[09:30:01] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:30:56] *** Quits: ori (~atdt@user/ori) (Quit: Bye!)
[09:31:16] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:31:34] *** Joins: timj (~timj@user/timj)
[09:31:34] *** Joins: ori (~atdt@user/ori)
[09:37:44] *** Quits: rcernin (~rcernin@124.190.132.36) (Ping timeout: 272 seconds)
[09:38:26] *** Quits: larryv (~larryv@zsh/patchmanager/larryv) (Quit: larryv)
[09:44:22] *** Joins: sinaowolabi (~SinaOwola@160.152.110.131)
[09:44:43] *** Joins: rcernin (~rcernin@124.190.132.36)
[09:50:11] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:8d02:94d4:341b:3a0c) (Ping timeout: 256 seconds)
[09:51:12] *** Quits: nunggu (~q@user/nunggu) (Ping timeout: 276 seconds)
[09:51:48] *** Quits: rcernin (~rcernin@124.190.132.36) (Ping timeout: 256 seconds)
[09:54:02] *** Joins: nunggu (~q@user/nunggu)
[09:59:50] *** Joins: sinaowolabi_ (~SinaOwola@160.152.110.131)
[10:02:37] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 240 seconds)
[10:04:51] *** Quits: akoana (~ah@user/akoana) (Quit: leaving)
[10:06:23] *** Joins: volga629 (~volga629@72.139.93.26)
[10:07:20] *** Joins: rcernin (~rcernin@124.190.132.36)
[10:13:19] *** Joins: dreamon (~dreamon@p54b14d36.dip0.t-ipconnect.de)
[10:24:15] *** Quits: loganlee[gnu] (~Thunderbi@user/loganlee) (Quit: loganlee[gnu])
[10:25:41] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[10:28:52] *** Joins: off^ (~off@50.235.176.163)
[10:29:40] *** Quits: rcernin (~rcernin@124.190.132.36) (Ping timeout: 272 seconds)
[10:42:47] *** Joins: malina (~malina@user/malina)
[10:47:01] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3d72:a508:6b63:50f0)
[10:49:36] *** Quits: off^ (~off@50.235.176.163) (Ping timeout: 256 seconds)
[10:49:37] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[10:51:25] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3d72:a508:6b63:50f0) (Ping timeout: 240 seconds)
[10:51:51] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Quit: WeeChat 3.4)
[10:56:40] *** Quits: forgotmynick (uid24625@id-24625.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[10:59:59] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[11:00:15] *** Joins: unop (~unop@195.91.14.193)
[11:00:42] *** Joins: computerworm110 (~quassel@216.114.110.6)
[11:01:20] *** Joins: euphoricallysane (~quatro@user/euphoricallysane)
[11:02:04] *** Quits: luckiswithme (~luckiswit@149.167.138.135) (Remote host closed the connection)
[11:02:16] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[11:05:21] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3d72:a508:6b63:50f0)
[11:08:33] *** Joins: vatralum (~vatralum@user/vatralum)
[11:09:37] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3d72:a508:6b63:50f0) (Ping timeout: 240 seconds)
[11:13:20] *** Quits: computerworm110 (~quassel@216.114.110.6) (Quit: If this happens without warning, it's not you, it's my Internet.  :()
[11:15:03] *** Quits: nunggu (~q@user/nunggu) (Remote host closed the connection)
[11:16:01] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:3d72:a508:6b63:50f0)
[11:16:47] *** Joins: nunggu (~q@user/nunggu)
[11:18:58] *** Joins: fef (~thedawn@user/thedawn)
[11:20:10] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Remote host closed the connection)
[11:27:18] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 272 seconds)
[11:27:34] *** Quits: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com) (Ping timeout: 256 seconds)
[11:27:59] *** Parts: pabs3 (~pabs3@user/pabs3) (Don't rest until the streets are paved in poems.)
[11:30:25] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[11:30:54] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:3d72:a508:6b63:50f0) (Quit: WeeChat 3.4)
[11:32:17] *** Joins: concrete-houses (~g@209.6.150.53)
[11:33:15] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 276 seconds)
[11:33:16] <concrete-houses> how do I egrep -v to remove lines with # at beginngin only, even if they have max_connections = 100   # blah comment
[11:33:51] <lopid> that's not at the beginning
[11:34:03] <concrete-houses> postgresql.conf I want to remove blank lines and see the variables that are not commented out, problem is they have like above with comment to the right of set variable
[11:34:46] <concrete-houses> egrep -v '#|^$' postgresql.conf is foiled by that it eliminates it
[11:34:53] <concrete-houses> I want to KEEP that line
[11:35:28] <lopid> ^
[11:35:34] <concrete-houses> I want to remove lines that are # blah blah
[11:35:41] <lopid> you've already used it, just use it again
[11:35:46] <concrete-houses> but KEEP   max_connection = 100 # some comment
[11:36:08] <Patsie> egrep -v "^#|^$" postgresql.conf
[11:36:15] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[11:36:56] <concrete-houses> I did that and I guess it worked,... but I though tit didnt becasue so many lines came back! LOl
[11:36:59] <concrete-houses> LOL
[11:37:01] <concrete-houses> oh jeesh ok
[11:37:07] *** Quits: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de) (Quit: WeeChat 3.4)
[11:37:15] <lopid> didn't you look at the lines?
[11:37:28] *** Joins: 029AAAHVX (~l4s8g@pd9e621d0.dip0.t-ipconnect.de)
[11:37:30] <concrete-houses> oh no it does not do what I want
[11:37:37] <concrete-houses> wait
[11:37:48] <lopid> no
[11:41:03] <concrete-houses> heh
[11:41:22] <concrete-houses> well it still gives the lines with # comment to the right
[11:41:35] <concrete-houses> interesting
[11:41:49] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[11:41:53] <concrete-houses> egrep -v '^#|^$' postgresql.conf |awk '{print $1, $2, $3}'|grep -v '#'  sorta got what  Iwant like this
[11:42:28] *** Joins: unop (~unop@195.91.14.193)
[11:45:36] *** Joins: fef (~thedawn@user/thedawn)
[11:52:06] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 276 seconds)
[12:01:40] *** Quits: cim (~cim@205.185.117.110) (Quit: The Lounge - https://thelounge.chat)
[12:01:59] *** Joins: cim (~cim@205.185.117.110)
[12:02:07] *** Joins: lavaball (thomas@31.204.155.215)
[12:04:05] *** Joins: fef (~thedawn@user/thedawn)
[12:06:00] *** Joins: yustin (~yustin@user/yustin)
[12:06:47] <geirha> looks brittle as you don't take into account the actual format of that config file
[12:07:25] *** Quits: concrete-houses (~g@209.6.150.53) (Quit: leaving)
[12:07:50] <kurahaupo> mattf: chru() { local -i c k ; local d s= ; for c do set -- if (( c < 0x80 )) ; then (( c >= 0 )) || return 1 ; else for (( k=0x80 ; k>>=1, c>=k && k>0 ; c>>=6 )) do set $(( c & 0x3f | 0x80 )) "$@" ; done ; (( k <<= 1, c |= -k & 0xff )) ; fi ; printf -v d \\\\x%02x "$c" "$@" ; s+=$d ; done ; printf %b "$s" ; }
[12:07:55] <geirha> foo = 'bar baz'   will end up as   foo = 'bar
[12:09:29] <kurahaupo> mattf: chru() { local -i c k ; local d s= ; for c do set -- ; if (( c < 0x80 )) ; then (( c >= 0 )) || return 1 ; else for (( k=0x80 ; k>>=1, c>=k && k>0 ; c>>=6 )) do set $(( c & 0x3f | 0x80 )) "$@" ; done ; (( k <<= 1, c |= -k & 0xff )) ; fi ; printf -v d \\\\x%02x "$c" "$@" ; s+=$d ; done ; printf %b "$s" ; } # oops, missed a semicolon
[12:10:21] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[12:11:34] <kurahaupo> geirha: btw, I code-golfed "box" down to 305, or 297 if I'm allowed to use more basic arg handling than getopts. (The number of bytes depends on which unicode chars are used for the box edges, but that's the size for the standard box chars.)
[12:12:13] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[12:12:20] <kurahaupo> # box(){ local p q m w a=l s OPTIND;while [[ $1 = -[clr] ]];do a=${1#?};shift;done;for w do((${#w}>${#m}))&&m=$w;done;s=${m//?/ };m=${m//?/═}══;printf ╔$m╗\\n;for w do p=${s:${#w}} q=$p case $a in l)q=;;c)q=${q:${#q}/2};esac;printf %s\\n "║ $q$w${p:${#q}} ║";done;printf ╚$m╝\\n;} ; box -c Hello GeirhaAndThe World
[12:12:22] <shbot> kurahaupo: bash: syntax error near unexpected token `)'
[12:13:51] <geirha> s/OPTIND/IFS/
[12:13:57] <kurahaupo> Note to self: don't play code golf and 3am and then proudly announce a solution the next day without checking it
[12:14:07] <geirha> it has the echo problem though
[12:14:30] <geirha> like echo can't output -e, box can't output -l
[12:14:39] <kurahaupo> geirha: which echo problem (among many)?
[12:14:43] *** Joins: OlCe (~user@amontsouris-156-1-23-81.w92-151.abo.wanadoo.fr)
[12:15:38] <kurahaupo> oh, right
[12:17:03] *** Quits: lavaball (thomas@31.204.155.215) (Quit: lavaball)
[12:19:01] <kurahaupo> # box(){ local p q m w a=l s IFS=;while [[ $1 = -[clr] ]];do a=${1#?};shift;done;for w do((${#w}>${#m}))&&m=$w;done;s=${m//?/ };m=${m//?/═}══;printf ╔$m╗\\n;for w do p=${s:${#w}} q=$p;case $a in l)q=;;c)q=${q:${#q}/2};esac;printf %s\\n "║ $q$w${p:${#q}} ║";done;printf ╚$m╝\\n;} ; box -c Hello GeirhaAndThe World
[12:19:08] *** Quits: euphoricallysane (~quatro@user/euphoricallysane) (Ping timeout: 256 seconds)
[12:19:08] <shbot> kurahaupo: ╔══════════════╗
[12:19:09] <shbot> kurahaupo: ║     Hello    ║
[12:19:09] <shbot> kurahaupo: etc... ( http://ix.io/3Psn )
[12:19:33] <kurahaupo> (missed one semicolon while I was editing "unrolled" lines)
[12:19:35] *** Joins: lavaball (felix@31.204.155.215)
[12:21:09] <kurahaupo> # box(){ local p q m w a=l s OPTIND;while getopts lcr w;do a=$w;done;set - "${@:OPTIND}";for w do((${#w}>${#m}))&&m=$w;done;s=${m//?/ };m=${m//?/═}══;printf ╔$m╗\\n;for w do p=${s:${#w}} q=$p;case $a in l)q=;;c)q=${q:${#q}/2};esac;printf %s\\n "║ $q$w${p:${#q}} ║";done;printf ╚$m╝\\n;} ; box -lrc -- -l
[12:21:11] <shbot> kurahaupo: ╔════╗
[12:21:11] <shbot> kurahaupo: ║ -l ║
[12:21:11] <shbot> kurahaupo: ╚════╝
[12:21:20] <kurahaupo> geirha: that better?
[12:21:46] <kurahaupo> That's 303 bytes (including the newline)
[12:23:05] <kurahaupo> btw, I'm not sure that 'set -' is necessarily equivalent to 'set --'. It seems like 'set -' may imply 'set +x' in some versions of Bash
[12:23:21] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[12:24:55] *** Quits: whaa (~whaa@c-75-67-72-65.hsd1.ma.comcast.net) (Remote host closed the connection)
[12:27:11] *** Quits: fef (~thedawn@user/thedawn) (Quit: Leaving)
[12:28:03] <geirha> We kinda went with an unwritten rule not to allow chaning IFS to cause problems; you have a couple of unquoted $m, we either quoted or made IFS local to make it immune
[12:28:40] *** Joins: whaa (~whaa@c-75-67-72-65.hsd1.ma.comcast.net)
[12:30:06] *** Quits: worldofgeese (~worldofge@2001:470:69fc:105::1:3cd8) (Quit: You have been kicked for being idle)
[12:30:31] <geirha> and if IFS is made local, shift $((OPTIND-1)) is same length as set - "${@:OPTIND}"
[12:31:09] <kurahaupo> geirha: Hmm, OK.
[12:31:29] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[12:31:31] <kurahaupo> Well, I'd have to add 4 quotes but I could remove 2 backslashes, so that would make 305
[12:32:56] <kurahaupo> # box(){ local p q m w a=l s OPTIND;while getopts lcr w;do a=$w;done;set - "${@:OPTIND}";for w do((${#w}>${#m}))&&m=$w;done;s=${m//?/ };m=${m//?/═}══;printf "╔$m╗\n";for w do p=${s:${#w}} q=$p;case $a in l)q=;;c)q=${q:${#q}/2};esac;printf %s\\n "║ $q$w${p:${#q}} ║";done;printf "╚$m╝\n";} ; box -c -- Hello\ World
[12:32:58] <shbot> kurahaupo: ╔═════════════╗
[12:32:58] <shbot> kurahaupo: ║ Hello World ║
[12:32:58] <shbot> kurahaupo: ╚═════════════╝
[12:34:02] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Quit: Leaving)
[12:34:45] <kurahaupo> If you use '-' or '%' as the corner symbol, printf will be sad
[12:35:19] *** Joins: drd (~drd@93-42-66-75.ip85.fastwebnet.it)
[12:37:11] <kurahaupo> Hard to tell these days which would be considered more problematic: relying on a terminal to understand UTF8, or relying on a terminal to understand G0/G1/G2/G3 bank-switch escapes (and that one of those banks contains line drawing characters)
[12:38:52] <chronon> Surely the terminals people actually use all do utf8 now don't they?
[12:50:36] *** Quits: nunggu (~q@user/nunggu) (Ping timeout: 276 seconds)
[12:51:43] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[12:53:08] *** Joins: nunggu (~q@user/nunggu)
[12:53:09] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[12:53:09] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[12:53:09] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[12:55:53] *** Joins: rendar (~rendar@user/rendar)
[12:56:24] *** Joins: mr-red (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[12:56:26] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[12:57:08] *** Joins: freep (~freepppp@193.92.35.32.dsl.dyn.forthnet.gr)
[12:57:52] *** Quits: drd (~drd@93-42-66-75.ip85.fastwebnet.it) (Ping timeout: 272 seconds)
[12:57:55] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[12:57:55] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[12:57:55] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[12:58:36] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:02:52] *** Quits: mattf (mattf@2600:3c03::f03c:92ff:fea6:56a4) (Ping timeout: 250 seconds)
[13:04:22] <uuidNuniq> you guys are awesome
[13:04:23] <geirha> after applying your p and q magic on the original, that one is now down to 306
[13:04:32] *** Joins: mattf (~mattf@li908-138.members.linode.com)
[13:06:01] <geirha> # box(){ local p q m w a=l s OPTIND;while getopts lcr w;do a=$w;done;set - "${@:OPTIND}";for w;do((${#w}>${#m}))&&m=$w;done;s=${m//?/ } m=${m//?/q}qq;printf "\e(0l$m"k\\n;for w;do p=${s:${#w}} q=$p;case $a in l)q=;;c)q=${q:${#q}/2};esac;printf "x\e(B $q%s${p:${#q}} \e(0x\n" "$w";done;printf "m$m"j"\e(B\n";};box test | sed $'s/\e(.//g'
[13:06:03] <shbot> geirha: lqqqqqqk
[13:06:03] <shbot> geirha: x test x
[13:06:03] <shbot> geirha: mqqqqqqj
[13:06:20] <uuidNuniq> nerd
[13:06:50] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[13:12:01] *** Quits: zer0bitz (~zer0bitz@2001:2003:f74d:b800:78e9:2c9a:5431:d092) (Read error: Connection reset by peer)
[13:12:04] *** Joins: thebombzen (~thebombze@c-68-41-54-207.hsd1.mi.comcast.net)
[13:14:11] *** Joins: masoudd (~masoudd@user/masoudd)
[13:14:31] *** Joins: adac (~adac@213-47-252-7.cable.dynamic.surfer.at)
[13:15:17] *** Quits: sdu_ (~sidu@185.44.146.61) (Quit: leaving)
[13:15:37] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[13:17:03] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[13:17:03] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[13:17:03] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[13:18:27] *** Joins: betuxy (~betuxy@p579ad834.dip0.t-ipconnect.de)
[13:20:13] *** Joins: ElPresidente (~ElPreside@2600:1700:3d10:4870:add8:b075:8307:d644)
[13:20:50] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[13:21:09] *** Joins: kilitary (~kilitary@188.242.105.134)
[13:22:14] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[13:22:14] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[13:22:14] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[13:23:09] <Earnestly> tfw when have case with *[${IFS#??}$cr$hr\"\\]*)
[13:23:24] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.4)
[13:24:05] <Earnestly> Also it comes to my attention that just about no script out there assigning paths to variables accounts for trailing newlines.  They really ought to just be banned from VFS, like \0 and / are
[13:26:12] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:f8af:7e9a:b154:2753)
[13:27:55] *** Joins: sdu (~sidu@185.44.146.61)
[13:28:00] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[13:28:01] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Ping timeout: 256 seconds)
[13:28:24] *** Joins: han-solo (~han-solo@user/han-solo)
[13:30:59] *** Joins: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com)
[13:31:01] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[13:31:52] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Read error: Connection reset by peer)
[13:32:15] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[13:32:29] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[13:32:29] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[13:32:29] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[13:37:45] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[13:37:54] *** Quits: han-solo (~han-solo@user/han-solo) (Ping timeout: 256 seconds)
[13:38:13] *** Quits: adac (~adac@213-47-252-7.cable.dynamic.surfer.at) (Ping timeout: 256 seconds)
[13:38:33] *** Quits: haliucinas (~haliucina@5.20.153.21) (Ping timeout: 256 seconds)
[13:39:11] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[13:39:11] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[13:39:11] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[13:39:46] *** Joins: han-solo (~han-solo@103.104.46.40)
[13:43:44] *** Joins: jmew (~jmew___@host-78-147-81-209.as13285.net)
[13:44:32] *** Quits: jmew (~jmew___@host-78-147-81-209.as13285.net) (Client Quit)
[13:44:47] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[13:48:11] *** Quits: mr-red (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 256 seconds)
[13:48:40] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[13:50:48] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[13:51:30] *** Quits: OlCe (~user@amontsouris-156-1-23-81.w92-151.abo.wanadoo.fr) (Remote host closed the connection)
[13:52:28] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[13:53:31] *** Quits: betuxy (~betuxy@p579ad834.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[13:53:54] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[13:53:54] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[13:53:54] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[13:56:59] *** Joins: bash-libera (~bash-libe@h216-170-204-47.hrcnut.broadband.dynamic.tds.net)
[13:59:11] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[14:00:36] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:00:36] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:00:36] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:03:25] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[14:04:53] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[14:05:09] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[14:06:19] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:06:19] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:06:19] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:07:09] *** Joins: tobybl_ (~tobybl@214.242.200.146.dyn.plus.net)
[14:07:47] *** Quits: qub411 (~user@118.209.248.55) (Quit: WeeChat 3.0)
[14:08:35] *** Joins: Tahvok (~Tahvok@user/tahvok)
[14:08:55] *** Quits: han-solo (~han-solo@103.104.46.40) (Changing host)
[14:08:55] *** Joins: han-solo (~han-solo@user/han-solo)
[14:09:04] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Ping timeout: 256 seconds)
[14:10:49] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Read error: Connection reset by peer)
[14:10:56] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[14:11:26] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[14:11:43] <Tahvok> Hey guys! I have a question about file descriptors. I have a 'read -r bar <<<"$baz"' commnad, inside a 'while read -r foo' loop. Do I need to change the file descriptor of either of the read commands? If not, how does it not conflict with one another?
[14:13:12] *** Joins: qub411 (~user@118.209.248.55)
[14:13:27] <pj> Tahvok: it's fine, the redirection from the heredoc on the inside read means that it doesn't interfere with stdin on the outside loop.
[14:14:06] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[14:15:02] *** Joins: computerworm110 (~quassel@xpress10374.htc.net)
[14:15:32] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:15:32] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:15:32] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:16:03] *** Quits: computerworm110 (~quassel@xpress10374.htc.net) (Client Quit)
[14:17:03] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[14:17:56] *** Quits: mongy (~mongy@user/mongy) (Quit: WeeChat 3.4)
[14:19:17] *** Quits: sinaowolabi (~SinaOwola@160.152.110.131) (Ping timeout: 240 seconds)
[14:19:19] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[14:19:35] *** Quits: sinaowolabi_ (~SinaOwola@160.152.110.131) (Ping timeout: 256 seconds)
[14:19:52] *** Joins: jmew (~jmew___@host-78-147-81-209.as13285.net)
[14:19:53] *** Quits: jmew (~jmew___@host-78-147-81-209.as13285.net) (Changing host)
[14:19:53] *** Joins: jmew (~jmew___@user/jmew)
[14:20:22] *** Joins: haliucinas (~haliucina@5.20.153.21)
[14:20:59] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:20:59] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:20:59] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:21:31] <Helmholtz> Is this wrong? `if [[ ($x && $y) || ($a && $b)  ]]`
[14:21:34] *** Joins: Filystyn (~piotr@user/filystyn)
[14:21:36] <Filystyn> hello
[14:22:17] *** Joins: vysn (~vysn@user/vysn)
[14:22:27] *** Joins: computerworm110 (~quassel@xpress10374.htc.net)
[14:22:57] *** Quits: Inline (~Inline@ip-037-201-241-209.um10.pools.vodafone-ip.de) (Quit: Leaving)
[14:22:58] *** Quits: computerworm110 (~quassel@xpress10374.htc.net) (Client Quit)
[14:23:02] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Remote host closed the connection)
[14:23:08] *** Joins: computerworm110 (~quassel@xpress10374.htc.net)
[14:23:34] *** Quits: chenqisu1 (~chenqisu1@183.217.200.249) (Quit: Leaving)
[14:24:35] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[14:25:12] *** Joins: cdown (~cdown@163.114.131.1)
[14:25:34] <Earnestly> Helmholtz: Your continued questions here just highlight how you've never bothered to read the guide, or really much of wooledge at all
[14:25:45] <Earnestly> And I imagine people here notice that trend
[14:25:54] <Filystyn> I have a root owned file with 400; than I have a script that does cat file; owned by root with perms 4710,  I log out from root back to normal user.  the script group matches normal user
[14:26:03] <geirha> Helmholtz: it's not wrong
[14:26:08] <Filystyn> and it refuses to cat file
[14:26:37] *** Quits: revolve (~u0_a227@cpc100838-bagu15-2-0-cust672.1-3.cable.virginm.net) (Ping timeout: 240 seconds)
[14:26:51] <Filystyn> it exectutes but not as root
[14:27:02] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[14:28:28] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:28:29] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:28:29] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:29:39] *** Joins: revolve (~u0_a227@82-132-237-8.dab.02.net)
[14:31:12] *** Joins: luckiswithme (~luckiswit@149.167.138.19)
[14:32:16] *** Quits: zauberfisch (~Zauberfis@cm147-42.liwest.at) ()
[14:32:45] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[14:32:57] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[14:33:01] <Filystyn> I expect expert intervention on my issue
[14:33:29] *** Joins: Lord_of_Life_ (~Lord@user/lord-of-life/x-2819915)
[14:33:54] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 260 seconds)
[14:33:59] *** Quits: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net) (Remote host closed the connection)
[14:34:11] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:34:11] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:34:11] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:34:18] *** Joins: Tangent-Man (~Tang3nt-M@cpc145602-basl14-2-0-cust33.20-1.cable.virginm.net)
[14:35:27] *** Quits: revolve (~u0_a227@82-132-237-8.dab.02.net) (Read error: Connection reset by peer)
[14:36:03] *** Quits: tobybl_ (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[14:36:18] *** Lord_of_Life_ is now known as Lord_of_Life
[14:39:40] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 256 seconds)
[14:39:55] *** Joins: reset (~reset@user/reset)
[14:40:40] <grawity> Filystyn: expert intervention will cost you expert rates. here's free intervention by a random on the internet: scripts cannot be setuid. you can't make a setuid script. the OS will not honor the setuid bit on any type of script, *and* bash will deliberately drop privileges if it nevertheless somehow gets run setuid.
[14:41:06] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[14:41:40] *** Joins: bluedust (~bluedust@59.89.210.247)
[14:42:22] <Filystyn> ok
[14:42:29] <Filystyn> but binary can be yes ?
[14:43:09] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 250 seconds)
[14:44:58] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[14:45:35] <Filystyn> nope still breaks - I copied cat and chaged pers 4710
[14:45:55] <Filystyn> can't cat file with root permission
[14:45:58] <grawity> cat itself can be setuid, yes
[14:46:03] <grawity> but first try making `id` setuid
[14:46:24] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[14:46:24] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[14:46:24] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[14:46:25] <grawity> to see whether it actually gets euid=0
[14:46:29] *** Joins: Inline (~Inline@ip-037-201-241-209.um10.pools.vodafone-ip.de)
[14:47:07] *** Quits: luckiswithme (~luckiswit@149.167.138.19) (Remote host closed the connection)
[14:47:48] <Filystyn> not sure what you mean with making `id` setuid
[14:47:56] <grawity> exactly like what your'e doing to `cat` now
[14:48:08] <grawity> e.g .maybe it doesn't work because you're copying it to a nosuid filesystem
[14:48:25] <Filystyn> I am on /tmp ok this can make sens
[14:48:40] <Filystyn> but when I ls -la I see it rws
[14:48:48] *** Joins: mongy (~mongy@user/mongy)
[14:48:51] <grawity> that's irrelevant
[14:48:57] <grawity> nosuid doesn't prevent you from chmod'ing it like that
[14:49:04] <grawity> it prevents the actual +s from taking effect
[14:49:22] <grawity> so test it in $HOME or something
[14:49:26] <grawity> if you successfully give the setuid bit to `id`, it should show "uid=1001(filystyn) euid=0(root)"
[14:50:36] <Filystyn> Ok i think I got the problem now
[14:52:53] <Filystyn> thx for help ;-)
[14:55:40] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 272 seconds)
[14:56:25] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Quit: Leaving)
[14:57:48] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[14:58:41] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[14:59:54] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[15:00:07] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[15:00:07] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[15:00:07] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[15:01:19] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[15:03:24] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[15:03:47] *** Joins: Sayona (~Sayona@user/sayona)
[15:04:30] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[15:05:06] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[15:05:06] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[15:05:06] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[15:14:54] *** Joins: fef (~thedawn@user/thedawn)
[15:17:40] *** Joins: chenqisu1 (~chenqisu1@183.217.200.249)
[15:17:49] *** Joins: N4buc0- (~N4buc0@2804:7f4:348b:2121:a987:95db:818a:7bf0)
[15:18:04] *** Joins: rcernin (~rcernin@124.190.132.36)
[15:19:27] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[15:21:10] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[15:21:23] *** Joins: vishal (~vishal@fedora/vishal)
[15:21:29] *** Joins: Filohuhum (~dante@gateway/tor-sasl/filohuhum)
[15:23:53] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[15:23:53] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[15:23:53] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[15:25:13] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[15:26:24] *** Quits: bluedust (~bluedust@59.89.210.247) (Remote host closed the connection)
[15:27:02] *** Joins: Nahra (~user@static.161.95.99.88.clients.your-server.de)
[15:28:56] *** Joins: luckiswithme (~luckiswit@149.167.138.19)
[15:35:27] *** Quits: tobybl (~tobybl@214.242.200.146.dyn.plus.net) (Remote host closed the connection)
[15:36:12] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:c128:812:5c48:c0e3)
[15:36:12] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:c128:812:5c48:c0e3) (Changing host)
[15:36:12] *** Joins: skapata (~Skapata@user/skapata)
[15:39:59] *** Joins: n4dir (~user@i59F77C2B.versanet.de)
[15:42:56] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[15:45:27] *** Joins: magla (~gelignite@d536720f.access.ecotel.net)
[15:46:38] *** Quits: rcernin (~rcernin@124.190.132.36) (Quit: WeeChat 3.4)
[15:46:54] *** Joins: zzilb (~zzilb@109.126.36.28)
[15:47:04] *** Joins: rcernin (~rcernin@124.190.132.36)
[15:47:24] <zzilb> is anybody talking right now?  any scripting problems?
[15:48:38] <Filystyn> everyone keeps it shut
[15:50:59] <zzilb> i have a thing i want to discuss a little.  i just did
[15:51:08] <zzilb> read -r x < <(find . -maxdepth 1 -type f -printf '%T@ %f\n' | sort -n | { mapfile -t && select x in "${MAPFILE[@]}"; do printf '%s' "$x"; break; done </dev/tty; }
[15:51:25] <zzilb> in order to select one of the last downloaded files and  do a bunch of  ffplay "$x"   mv -v "$x" ... etc. with it
[15:51:56] <zzilb> but in my "downloads" directory i have a bunch of filenames with linebreaks in them
[15:53:26] <zzilb> well, i know i can print filenames in \077\088\099 using a mini program written in C to generate "linebreak-safe" form, and i know i can use printf -v ... %q ... or something to quickly decode this format in bash
[15:54:23] <Filystyn> ok first thing i need to say thanks to someone tha nI will look into your problem at least
[15:54:30] <Filystyn> grawity it worked ;-)
[15:54:40] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[15:54:45] <Filystyn> had to move to fs that had nosetuid
[15:54:58] *** Quits: rcernin (~rcernin@124.190.132.36) (Quit: WeeChat 3.4)
[15:55:37] *** Joins: rcernin (~rcernin@124.190.132.36)
[15:56:38] <zzilb> ... but is there any simple and safe way, also not involving a billion of   IFS= read -r -d '' var   (for reading NUL-terminated filenames) instead of mapfile (readarray; i'm calling it mapfile in my first snippet because i then use MAPFILE array, so calling it by name mapfile makes sense, i think)
[15:56:44] <zzilb> ?
[15:57:28] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[15:57:28] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[15:57:28] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[15:57:48] <Filystyn> zzlib you god filenames separated with /0 ?
[15:58:03] <Filystyn> \0 **
[15:58:22] <zzilb> i know i can use -print0 in my version of find to output zero-terminated filenames
[15:58:52] <zzilb> i'm not sure it will work well with select, didn't try multi-line "selection variants"
[15:59:17] <Filystyn> can't tr fix this ?
[15:59:35] <zzilb> i have a kind of C-oneliner-compiler contraption that works well for ad-hoc programming of simple things like this one, output a bunch of things, ask a user for a number, then just print the selected filename on stdout without of any line-reading magic
[15:59:50] <zzilb> (select in bash does not offer any of readline features)
[16:00:11] <zzilb> (it's trivial to make an equivalent of select in C)
[16:00:35] <zzilb> (the list has to be ordered by modification time)
[16:00:45] *** Joins: revolve (~u0_a227@82-132-237-8.dab.02.net)
[16:00:53] <zzilb> (i just downloaded a bunch of files in a crowded directory)
[16:01:17] *** Joins: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de)
[16:01:35] *** Quits: han-solo (~han-solo@user/han-solo) (Ping timeout: 256 seconds)
[16:01:42] *** Quits: apos (~apos@gateway/tor-sasl/apos) (Ping timeout: 276 seconds)
[16:01:43] <zzilb> my original snippet has a bug, i forgot to delete the "number" before a filename
[16:02:03] <zzilb> meh,   ... select x in "${MAPFILE[@]#* }"; ...
[16:02:47] <zzilb> by the way, can mapfile terminate with non-zero status?
[16:03:14] *** Quits: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[16:03:23] <zzilb> # printf '' | mapfile && echo mapfile exits with success
[16:03:25] <shbot> zzilb: mapfile exits with success
[16:03:40] <Filystyn> youll be fine
[16:04:13] <zzilb> # MAPFILE=(hackers manipulate election);  printf '' | { mapfile; declare -p MAPFILE; }
[16:04:14] <shbot> zzilb: declare -a MAPFILE=()
[16:04:42] <zzilb> ``mapfile'' overwrites the MAPFILE array even when input is empty...  ok.
[16:06:04] <zzilb> also it feels kind of silly that it seems to me that   -printf '%T@ %f\n' | sort   has a year 99902000 problem or something
[16:07:12] <zzilb> imho, a bunch of leading zeros is necessary in order to make this way of sorting safe
[16:07:35] <zzilb> does -printf %T@ in GNU find support generation of leading zeros?
[16:08:17] <zzilb> though it does not matter how much zeros you have, any way this thing is a time bomb in your software, planned obsolescence
[16:08:39] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[16:09:57] *** Joins: przemoc (~przemoc@user/przemoc)
[16:10:05] <ForeverNoob[m]> hello, would it make my bash prompt to start faster if I move my bigger functions into external scripts?
[16:10:06] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[16:10:06] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[16:10:06] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[16:10:40] *** Joins: apos (~apos@gateway/tor-sasl/apos)
[16:11:04] <zzilb> ForeverNoob[m]: if you are going to load files from within .bashrc, it will make your "prompt" appear slower
[16:11:35] <zzilb> especially when you first login in your session when filesystem cache is cold
[16:12:19] <zzilb> it's possible that your HDD is a spindle one, and you are creating a bunch of files in absolutely random places on the surface of the HDD disks
[16:13:53] <ForeverNoob[m]> no I have an SSD but I think my bashrc is just way too big, and yeah I'm loading a few external files. I'll have to take a look at that.
[16:14:35] <gnoo> zzilb: use mapfile -td '' ?
[16:14:51] <zzilb> gnoo: what version of bash is needed for that?
[16:15:00] <zzilb> i'm stuck with bash 4.2
[16:15:16] <gnoo> !features
[16:15:16] <gnoo> !feature
[16:15:17] <greybot> "What bash version added feature X?" -- http://mywiki.wooledge.org/BashFAQ/061
[16:15:41] <zzilb> interesting thing.  thanks for information.  if it is that simple, this is exact kind of answer i wanted to hear.
[16:15:55] <zzilb> gnoo: thank you.
[16:16:20] <zzilb> "mapfile/readarray -d  4.4 (2016)  native"  too new.
[16:17:02] <zzilb> but mapfile is a builtin, and i think i can recompile my bash, or unload/reload mapfile using a bit newer implementation without of completely switching to a later bash version
[16:17:26] <gnoo> yeah, maybe you can just set `IFS=' in the start of that segment ?
[16:18:39] *** Quits: rcernin (~rcernin@124.190.132.36) (Quit: WeeChat 3.4)
[16:19:12] *** Quits: l4yer (~l4yer@2001:ac8:31:8900:1012:8fa1:422e:5368) (Remote host closed the connection)
[16:21:49] <zzilb> i'd  read -r -d '' x < <(find . -mindepth 1 -maxdepth 1 -printf '%T@ %p\0' | sort -n | while IFS= read -r -d '' _ 'files[${#files[@]}]'; do :; done;   select x in "${files[@]}"; do printf '%s\0' "$x"; break; done </dev/tty)
[16:21:52] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[16:22:07] *** Quits: malina (~malina@user/malina) (Remote host closed the connection)
[16:23:01] <gnoo> sort -z if you have it
[16:23:18] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[16:23:18] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[16:23:18] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[16:23:27] <zzilb> yes-yes, sort -z
[16:23:36] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[16:23:37] <zzilb> it can sort zero-terminated data
[16:23:43] <zzilb> GNU sort, that is
[16:23:59] <zzilb> IFS= read -r -d '' ...  can be used to get rid of the string prefix removal operation too, so now i think it's not that bad.
[16:24:36] <zzilb> gonna make myself a .bashrc procedure
[16:25:39] <zzilb> what i like about procedures is that they can be defined or not defined based on feature tests (e.g. whether or not -z of sort works) checked at shell startup time
[16:25:45] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 276 seconds)
[16:26:55] <zzilb> speed penalty of opening several files while starting up shell can be considered infinitesimal and unperceivable on SSD, the penalty is very low.
[16:27:38] <zzilb> basically if it is smaller than 1/60 of a second (less than LCD screen update time) it is like speed of light
[16:28:18] *** Quits: vatralum (~vatralum@user/vatralum) (Quit: .)
[16:29:23] <zzilb> if it is less than a twentieth of a second, it is unperceivable from biological perspective, human senses cannot detect such delay anyway
[16:30:57] <ForeverNoob[m]> Do you think if I consolidated those external files into my bashrc, that my bash prompt would load faster as a result?
[16:32:00] <zzilb> imho, it won't make any difference.  it's like asking, "if i defragmented my disk, will it make my bash prompt faster?"
[16:32:35] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[16:32:39] <zzilb> you will not be able to measure the difference using any stopwatch in the world
[16:33:54] <Helmholtz> `x="-" curl link --output "$x"` How can I make it so that curl outputs to - (STDOUT)?
[16:33:58] <zzilb> have you an anti-virus that makes your system delay while it scans every file opened?
[16:34:02] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[16:34:20] <zzilb> Helmholtz: a silly pitfall question.
[16:34:39] <zzilb> put a ;  between  x=- and curl
[16:34:53] <ForeverNoob[m]> no I don't have any antivirus, it's just that it sources 8 external files from what I can tell
[16:35:09] *** Quits: chenqisu1 (~chenqisu1@183.217.200.249) (Quit: Leaving)
[16:35:16] <ForeverNoob[m]> and I think some of those external files also source some other external files
[16:35:16] <zzilb> Helmholtz: curl automatically dumps downloaded data on stdout
[16:35:27] <pj> ummmm, last time I checked curl dumps to stdout by default.
[16:35:29] <Helmholtz> zzilb, I want to control output in a variable
[16:35:58] <Helmholtz> like I want a `-o path/to/file` option in my script and pass it directly to curl
[16:35:59] <zzilb> # x="hello.txt"; curl -o "$x"  http://example.com/
[16:36:00] <shbot> zzilb: bash: curl: command not found
[16:36:23] <zzilb> well, on Your system the curl program will be found
[16:36:27] <Helmholtz> and if the user didn't give -o, default would be stdout
[16:36:36] <zzilb> yup
[16:37:06] <zzilb> you can also use the special "stdout" filename: /dev/stdout
[16:37:34] <zzilb> or under Linux kernel and /proc mounted, /proc/self/fd/0
[16:37:41] <zzilb> if i'm not mistaken
[16:37:48] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[16:37:51] *** Quits: computerworm110 (~quassel@xpress10374.htc.net) (Ping timeout: 256 seconds)
[16:37:57] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Quit: WeeChat 3.4)
[16:38:07] <zzilb> # curl() { echo fake curl; }    curl >/proc/self/fd/0
[16:38:09] <shbot> zzilb: bash: syntax error near unexpected token `curl'
[16:38:12] <zzilb> forgot ;
[16:38:17] <Helmholtz> thanks that was it
[16:38:28] <Helmholtz> curl > "$x" where x=/dev/stdout
[16:38:58] <zzilb> but don't forget to issue the variable assignment and the curl simple command as 2 separate commands.
[16:39:04] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[16:39:13] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[16:39:13] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[16:39:13] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[16:39:14] <zzilb> the    x=hello echo "$x"   is a common pitfall
[16:41:12] *** Quits: kewl_fft (~kewl_fft@2a01:e0a:9cb:8950:feaa:14ff:fec1:c4d4) (Remote host closed the connection)
[16:41:34] <Helmholtz> yeah output_dir var is global
[16:42:19] *** Parts: goated (~Xeroine@user/xeroine) ()
[16:45:15] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[16:45:54] <Tahvok> I'm running a loop, which runs a command. The command returns me a list of items (separated by new line). How would I combine each time a command returns anything to a single variable but making sure there is a newline separating between each list? I used foo+= - however, I do not have a newline separator sometimes
[16:47:52] <zzilb> # items= sep=; for x in item-{x,y,z}; do  items+="$sep$x"; sep='<newline>'; done;   printf '{%s}\n' "$items"
[16:47:53] <shbot> zzilb: {item-x<newline>item-y<newline>item-z}
[16:49:16] <zzilb> idk, it's a kind of an idiomatic algorithm, on a first iteration "comma" string is empty, and during the first iteration it is set to actual "comma"
[16:49:17] <emanuele6> ${sep='<newline>'}
[16:49:53] <emanuele6> ah, that doesn't work
[16:50:43] <zzilb> i like to put newlines in my script like that:    sep='
[16:50:44] <zzilb> '
[16:50:48] *** Joins: kewl_fft (~kewl_fft@2a01:e0a:9cb:8950:feaa:14ff:fec1:c4d4)
[16:52:28] <emanuele6> !$'
[16:52:28] <greybot> bash has a special form of quoting, $'string' in which backslash-character combinations are expanded. For example, IFS=$' \t\n' or echo $'It\'s embedded!' http://mywiki.wooledge.org/Quotes
[16:52:43] <zzilb> yup, but sh has no such syntax
[16:53:33] <emanuele6> yup, but sh has no item-{x,y,z} sytanx.
[16:53:42] <zzilb> touche
[16:53:48] *** Joins: Fauto_ (~dante@gateway/tor-sasl/filohuhum)
[16:54:05] *** Quits: Filohuhum (~dante@gateway/tor-sasl/filohuhum) (Remote host closed the connection)
[16:58:33] *** Joins: furrymcgee (~devuan@cgn-89-1-211-103.nc.de)
[16:59:43] *** Quits: revolve (~u0_a227@82-132-237-8.dab.02.net) (Read error: Connection reset by peer)
[16:59:52] *** Joins: l4yer (~l4yer@2001:ac8:31:8900:1012:e7e1:6127:52de)
[17:02:27] *** Joins: revolve (~u0_a227@cpc100838-bagu15-2-0-cust672.1-3.cable.virginm.net)
[17:03:00] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[17:04:26] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[17:04:26] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[17:04:26] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[17:06:21] *** Quits: luckiswithme (~luckiswit@149.167.138.19) (Read error: Connection reset by peer)
[17:06:49] *** Quits: zzilb (~zzilb@109.126.36.28) (Remote host closed the connection)
[17:08:18] *** Joins: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net)
[17:09:13] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[17:09:37] *** Joins: bluedust_ (~bluedust@59.89.210.247)
[17:10:41] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[17:10:41] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[17:10:41] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[17:13:55] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[17:15:17] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[17:15:17] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[17:15:17] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[17:15:28] *** Quits: revolve (~u0_a227@cpc100838-bagu15-2-0-cust672.1-3.cable.virginm.net) (Read error: Connection reset by peer)
[17:20:35] *** Joins: revolve (~u0_a227@cpc100838-bagu15-2-0-cust672.1-3.cable.virginm.net)
[17:21:29] *** Quits: litheum (~kolbe@user/kolbe) (Ping timeout: 256 seconds)
[17:22:01] *** Quits: bodiccea (~bodiccea@user/bodiccea) (Remote host closed the connection)
[17:22:38] *** Joins: bodiccea (~bodiccea@user/bodiccea)
[17:22:56] *** Joins: litheum (~kolbe@user/kolbe)
[17:25:52] *** Joins: Jong (~Jong@2620:10d:c090:400::5:8039)
[17:28:05] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[17:29:34] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[17:29:34] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[17:29:34] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[17:31:42] *** Joins: thiras (~thiras@user/thiras)
[17:33:04] *** Joins: sinaowolabi (~SinaOwola@41.58.231.223)
[17:33:18] *** Joins: Tach (~Tach@user/tach)
[17:33:52] *** Quits: sinaowolabi (~SinaOwola@41.58.231.223) (Max SendQ exceeded)
[17:34:18] *** Joins: LuksNuke (~LuksNuke@gateway/tor-sasl/luksnuke)
[17:34:27] <Tach> hi guys, I'm having a challenge getting my vars into this: $(curl -H "Authorization: Basic $(echo -n $USER:$PASS | base64)" https:foo.bar)
[17:34:37] <Tach> oops wrong
[17:34:38] *** Quits: LuksNuke (~LuksNuke@gateway/tor-sasl/luksnuke) (Remote host closed the connection)
[17:34:50] <Tach> https://
[17:34:57] *** Joins: LuksNuke (~LuksNuke@gateway/tor-sasl/luksnuke)
[17:34:57] <Tach> but I can't echo there
[17:35:18] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[17:36:44] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[17:36:44] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[17:36:44] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[17:37:06] <gnoo> "$(base64 <<< "$USER:$PASS")"
[17:37:38] <emanuele6> gnoo: that is just wrong
[17:38:02] <gnoo> emanuele6: why? i tested it here :^)
[17:38:03] <emanuele6> # user=emanuele6 pass=hunter2; base64 <<< "$user:$pass"
[17:38:04] <colo> Tach, tou are aware that curl can do that computation for you?
[17:38:05] <shbot> emanuele6: bash: base64: command not found
[17:38:13] <colo> you*
[17:38:14] <Tach> gnoo I can do that within the $()
[17:38:26] <Tach> indeed command not found :D
[17:38:26] <emanuele6> gnoo: because it will include a \n
[17:38:35] <gnoo> ohhhh
[17:39:01] <emanuele6> # user=emanuele6 pass=hunter2; jq -sR '@base64' <<< "$user:$pass"
[17:39:03] <shbot> emanuele6: "ZW1hbnVlbGU2Omh1bnRlcjIK"
[17:39:04] *** Joins: lsrtl__ (~lsrtl@user/lsrtl)
[17:39:18] <emanuele6> # user=emanuele6 pass=hunter2; printf '%s:%s' "$user" "$pass" | jq -sR '@base64'
[17:39:20] <shbot> emanuele6: "ZW1hbnVlbGU2Omh1bnRlcjI="
[17:39:27] <emanuele6> # user=emanuele6 pass=hunter2; printf '%s:%s\n' "$user" "$pass" | jq -sR '@base64'
[17:39:28] <shbot> emanuele6: "ZW1hbnVlbGU2Omh1bnRlcjIK"
[17:39:50] *** Quits: justaguy (~quassel@2a05:d014:742:eb00:7693:c44f:1fc3:29) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[17:39:56] <depesz> # user=emanuele6 pass=hunter2; baseenc --base64 <<< "$user:$pass"
[17:39:57] <shbot> depesz: bash: baseenc: command not found
[17:40:03] <depesz> # user=emanuele6 pass=hunter2; basenc --base64 <<< "$user:$pass"
[17:40:05] <shbot> depesz: bash: basenc: command not found
[17:40:15] <depesz> that's interesting...
[17:40:18] * Tach runs into bufferoverflow
[17:40:19] <emanuele6> it is not really
[17:40:28] *** Joins: han-solo (~han-solo@103.104.46.40)
[17:40:29] *** Quits: han-solo (~han-solo@103.104.46.40) (Changing host)
[17:40:29] *** Joins: han-solo (~han-solo@user/han-solo)
[17:40:31] <emanuele6> shbot has only a few programs installed.
[17:40:36] <emanuele6> as most systems.
[17:40:36] *** Joins: justaguy (~quassel@2a05:d014:742:eb00:7693:c44f:1fc3:29)
[17:40:39] <depesz> basenc is part of coreutils. i'd assume it's "always" available.
[17:41:01] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[17:41:19] <emanuele6> you are also assuming that shbot has coreutils
[17:41:47] <depesz> well, not anymore. I *would* assume. And I *did* assume.
[17:42:10] <depesz> i'd much rather guess that "random system" has coreutils than jq :)
[17:42:28] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[17:42:28] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[17:42:28] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[17:43:38] <emanuele6> a system meant to be used by users in #awk #bash #sed and #jq has multiple versions of awk and shells, and has sed and jq.
[17:44:22] <depesz> TIL :)
[17:44:51] <emanuele6> it has some GNU coreutils, but not all of them
[17:45:18] <emanuele6> and some of them are not enabled by default in favour of the example bash loadable builtins
[17:45:42] <emanuele6> # type rm cut
[17:45:43] <shbot> emanuele6: rm is a shell builtin
[17:45:44] <shbot> emanuele6: cut is a shell builtin
[17:45:46] <emanuele6> 5# type rm cut
[17:45:48] <shbot> emanuele6: rm is /bin/rm
[17:45:48] <shbot> emanuele6: cut is /bin/cut
[17:47:54] *** Joins: idego (~idego@user/idego)
[17:47:57] <emanuele6> ( well, /bin/rm /bin/cut etc are still there, but they are not used by default as `rm' or `cut' since the loadable builins are enabled )
[17:48:40] <Tach> emanuele6 so what's the verdict now ?
[17:48:49] *** Joins: sinaowolabi_ (~SinaOwola@160.152.110.131)
[17:49:07] <emanuele6> what are you talking about?
[17:51:10] *** Joins: sinaowolabi (~SinaOwola@102.134.114.6)
[18:00:36] *** Joins: volga629 (~volga629@72.139.93.26)
[18:01:41] *** Quits: kilitary (~kilitary@188.242.105.134) (Remote host closed the connection)
[18:04:45] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[18:06:12] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[18:06:12] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[18:06:12] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[18:09:05] *** Quits: herjazz (~herjazz@p10513117-ipngn24101marunouchi.tokyo.ocn.ne.jp) (Quit: leaving)
[18:11:49] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 250 seconds)
[18:12:08] *** Joins: oiai (~oiai@109.126.36.28)
[18:14:11] *** Quits: cliluw (~cliluw@47.147.73.223) (Ping timeout: 256 seconds)
[18:14:19] *** Joins: cliluw (~cliluw@47.147.73.223)
[18:16:58] *** Quits: bash-libera (~bash-libe@h216-170-204-47.hrcnut.broadband.dynamic.tds.net) (Quit: Leaving...)
[18:17:38] *** Joins: xx (~xx@user/xx)
[18:20:01] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[18:20:17] *** Joins: unop (~unop@195.91.14.193)
[18:23:26] *** Quits: oiai (~oiai@109.126.36.28) (Remote host closed the connection)
[18:23:28] *** Joins: goldfish (~goldfish@user/goldfish)
[18:24:26] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 260 seconds)
[18:27:50] *** Quits: sinaowolabi (~SinaOwola@102.134.114.6) (Ping timeout: 272 seconds)
[18:29:29] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:29:33] *** Joins: kilitary (~kilitary@188.242.105.134)
[18:30:02] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 250 seconds)
[18:32:56] *** Joins: metal_egg (~metalegg@pool-72-94-145-43.phlapa.fios.verizon.net)
[18:35:36] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[18:38:28] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[18:40:41] *** Quits: metal_egg (~metalegg@pool-72-94-145-43.phlapa.fios.verizon.net) (Quit: Leaving)
[18:41:11] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[18:41:11] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[18:41:11] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[18:41:47] *** Joins: kilitary__ (~kilitary@188.242.105.134)
[18:41:52] *** Joins: karakedi (~eAC53C340@user/karakedi)
[18:41:57] *** Joins: hlauk (~hlauk@176.33.96.72)
[18:41:58] *** Joins: metal_egg (~metalegg@pool-72-94-145-43.phlapa.fios.verizon.net)
[18:42:46] *** Quits: kilitary (~kilitary@188.242.105.134) (Ping timeout: 256 seconds)
[18:45:27] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[18:46:42] *** Joins: volga629 (~volga629@72.139.93.26)
[18:46:55] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[18:46:55] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[18:46:55] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[18:47:04] *** Joins: nyex (Thunderbir@gateway/vpn/protonvpn/nyex)
[18:47:42] *** Joins: lilt (~lilt@109.126.36.28)
[18:50:04] *** Quits: kilitary__ (~kilitary@188.242.105.134) (Quit: entering irc ...)
[18:51:31] *** Joins: filename (~kilitary@188.242.105.134)
[18:52:05] *** Quits: filename (~kilitary@188.242.105.134) (Client Quit)
[18:52:12] *** Quits: hlauk (~hlauk@176.33.96.72) (Quit: Leaving)
[18:53:37] *** Joins: filename (~kilitary@188.242.105.134)
[18:59:30] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Ping timeout: 272 seconds)
[18:59:42] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[18:59:49] *** Quits: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de) (Quit: WeeChat 3.4)
[19:01:08] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:01:08] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:01:08] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:01:27] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[19:03:54] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[19:08:55] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[19:09:09] *** Quits: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de) (Remote host closed the connection)
[19:10:01] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[19:10:03] *** Joins: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de)
[19:10:31] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:10:32] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:10:32] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:11:11] *** Joins: tfe (~tfe@213.195.122.71)
[19:12:20] *** Quits: tfe (~tfe@213.195.122.71) (Quit: Saliendo)
[19:13:37] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[19:16:29] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:16:29] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:16:29] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:20:06] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[19:21:31] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:21:31] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:21:31] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:22:18] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Ping timeout: 272 seconds)
[19:24:47] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[19:26:16] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:26:16] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:26:16] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:26:43] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Quit: enoq)
[19:27:52] *** Quits: Tadgy (~tadgy@slackware.uk/founder/tadgy) (Quit: Lost terminal)
[19:28:33] *** Parts: idego (~idego@user/idego) ()
[19:29:28] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[19:30:52] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[19:31:00] *** Quits: Fauto_ (~dante@gateway/tor-sasl/filohuhum) (Ping timeout: 276 seconds)
[19:31:27] *** Quits: metal_egg (~metalegg@pool-72-94-145-43.phlapa.fios.verizon.net) (Quit: Leaving)
[19:32:16] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[19:33:57] *** Joins: Tadgy (~tadgy@slackware.uk/founder/tadgy)
[19:34:31] *** Quits: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de) (Remote host closed the connection)
[19:35:15] *** Joins: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de)
[19:35:18] *** Quits: Tadgy (~tadgy@slackware.uk/founder/tadgy) (Client Quit)
[19:35:36] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:35:36] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:35:36] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:39:18] *** Joins: Tadgy (~tadgy@slackware.uk/founder/tadgy)
[19:40:31] <dob1> is if ! [ ... ]  the same as   if [ ! ...
[19:40:36] <dob1> is if ! [ ... ]  the same as   if [ ! ... ]   ?
[19:45:18] <wiscii> # if ! [ 0 = 1 ]; then echo ok; fi
[19:45:19] <shbot> wiscii: ok
[19:45:39] <wiscii> # if [ 0 != 1 ]; then echo ok; fi
[19:45:41] <shbot> wiscii: ok
[19:45:48] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[19:46:55] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[19:47:14] <emanuele6> ![
[19:47:14] <greybot> [ or test is the POSIX test command. It can do simple tests on files and strings. In bash, you should use the more powerful [[ instead and ban [ for sake of consistency. [[ can do pattern matching, is faster and safer to use. http://mywiki.wooledge.org/BashGuide/TestsAndConditionals http://mywiki.wooledge.org/BashFAQ/031
[19:47:34] *** Joins: unop (~unop@195.91.14.193)
[19:48:07] <emanuele6> dob1: well, it is not *the same*.
[19:48:23] <emanuele6> # [ ! a -ne 2 ]; echo "$?"
[19:48:24] <shbot> emanuele6: bash: [: a: integer expression expected
[19:48:24] <shbot> emanuele6: 2
[19:48:31] <emanuele6> # ! [ a -ne 2 ]; echo "$?"
[19:48:32] <shbot> emanuele6: bash: [: a: integer expression expected
[19:48:32] <shbot> emanuele6: 0
[19:50:33] *** Quits: sdu (~sidu@185.44.146.61) (Quit: leaving)
[19:51:42] *** Quits: Filystyn (~piotr@user/filystyn) (Quit: leaving)
[19:51:54] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:51:54] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:51:54] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:52:00] *** Joins: dionys (dionys@user/dionys)
[19:54:32] <dionys> globbing for a case: -*[\?]  ... this matches dash followed by 0 or more question marks
[19:54:48] <emanuele6> no
[19:55:10] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[19:56:02] <emanuele6> it's the same as  -*\?  it matches any string that starts with - and ends with ?
[19:56:30] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 272 seconds)
[19:56:34] <dionys> ah, that makes more sense
[19:56:59] <dionys> how can I glob for just a chain of ?
[19:57:00] *** fling is now known as contractor
[19:57:10] <emanuele6> in bash, you can have something like what you are asking using extglobs
[19:57:30] <emanuele6> first you enable extglobs with `shopt -s extglob' then you use  -*(\?)
[19:57:52] <emanuele6> + instead of * if you want at least one question mark
[19:58:28] <emanuele6> if you use [[ instead of case, you don't have to enable extglobs
[19:58:36] <emanuele6> [[ $var == -*(\?) ]]
[19:59:02] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[19:59:02] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[19:59:02] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[19:59:31] <emanuele6> another way to approach the problem is checking that the string does not contain any character that is not ? ( *[!?]* ) and that it starts with - (-*)
[19:59:48] <dionys> My aim is to make a sensible trigger to show help for a function:
[20:00:05] <dionys> \?*[\?]|-*[\?]|h|-h|help) printf "%s\n" "$help" && return
[20:00:07] <emanuele6> then you probably don't want `-' to match.
[20:00:26] <emanuele6> is this bash or posix?
[20:00:28] <dionys> I wanted ?, -?, h, -h, and help
[20:00:40] <emanuele6> why the -???? stuff then?
[20:00:44] *** contractor is now known as fling
[20:00:57] <dionys> bash, but more posix-like is nice if it can be done reasonably
[20:01:18] <emanuele6> why are you trying to match -????   ?
[20:01:24] <dionys> just thought it was a rough edge I could smooth.
[20:01:53] *** Joins: mannequin (uid453465@id-453465.helmsley.irccloud.com)
[20:02:29] <emanuele6> rough edge?
[20:02:40] <emanuele6> why not also  -----????????????? at that point?
[20:02:41] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[20:02:57] *** Quits: [R] (~rs@genoce.org) (Ping timeout: 240 seconds)
[20:03:14] <dionys> The function doesn't take options, just wanted to give a heads up in case the user tried to look for help that way.
[20:03:39] *** Joins: ferdna (~ferdna@user/ferdna)
[20:03:43] <emanuele6> well, in bash you can use:  ?(-)+(\?)|-|-h|help)  if you enable extglobs as i said, but in POSIX you cannot do that with a single case.
[20:03:47] <dionys> It's overkill, sure.
[20:04:12] <emanuele6> err
[20:04:18] <emanuele6> -|-h -> h|-h
[20:04:24] *** Joins: [R] (~rs@genoce.org)
[20:04:34] <dionys> Silly problem, but I learned something anyway ;) much thanks
[20:04:36] <emanuele6> ?(-)+(\?)|h|-h|help) is a case that matches   ???????   -?????????   h   -h   help
[20:05:04] <emanuele6> ?(-) means - or nothing,  +(\?)  one or more ?, and you know the rest
[20:05:06] <emanuele6> !extglob
[20:05:07] <greybot> "Extended globs" (shopt -s extglob) allow you to say things like "all files that do not end in .jpg". See http://mywiki.wooledge.org/glob#extglob
[20:09:14] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[20:09:14] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[20:09:14] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[20:10:11] *** Quits: john_johnk (~Thunderbi@232.58.140.77.rev.sfr.net) (Quit: john_johnk)
[20:10:42] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[20:11:21] <Helmholtz> In this code: https://dpaste.com/9HV5CDPYG  , geo_map is set inside a bash function like `geo_map=$(mktemp "$script_tmp_dir/geo-XXX")`. (I've not declared it to be local)...so I assume geo_map should be accessible outside of that funciton.
[20:11:28] <Helmholtz> Why it is not accessible to cleanup function?
[20:11:40] *** Joins: crashrep (~crashrep@user/crashrep)
[20:12:41] <emanuele6> you have omitted important code i think
[20:12:51] <emanuele6> anyway, you are probably running the function in a subshell
[20:13:06] <emanuele6> so the variable only exists in the separate subshell process
[20:13:08] <emanuele6> !subshell
[20:13:08] <greybot> http://mywiki.wooledge.org/SubShell
[20:13:31] <emanuele6> # f () { a=2 ;}; x=$(f); declare -p a
[20:13:32] <shbot> emanuele6: bash: declare: a: not found
[20:13:36] <emanuele6> # f () { a=2 ;}; f; declare -p a
[20:13:38] <shbot> emanuele6: declare -- a="2"
[20:14:37] <Helmholtz> emanuele6, https://dpaste.com/FR6GGYB73
[20:14:48] <Helmholtz> no, the variable itself should be visible globally
[20:14:54] <emanuele6> ...
[20:14:59] <emanuele6> # f () { a=2 ;}; x=$(f); declare -p a
[20:15:01] <shbot> emanuele6: bash: declare: a: not found
[20:15:15] <emanuele6> $(f) runs `f' in a separate process!
[20:15:32] <Helmholtz> oh
[20:15:36] <emanuele6> you keep omitting the code that calls "my_function" if that is even its real name
[20:15:50] <emanuele6> it is probably something like $(my_function whatever)
[20:15:57] <emanuele6> !subshell
[20:15:57] <greybot> http://mywiki.wooledge.org/SubShell
[20:16:04] <emanuele6> since you probably missed it.
[20:16:21] <emanuele6> there is a paragraph about that.
[20:17:59] <Helmholtz> ah I knew about this subshell thing but this was not it! sorry! I should have echo >&2
[20:18:22] <Helmholtz> I call the function like my_function in the script itself...
[20:19:09] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[20:22:01] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[20:23:42] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[20:23:51] *** Joins: drd (~drd@93-42-66-75.ip85.fastwebnet.it)
[20:24:12] *** Quits: nyex (Thunderbir@gateway/vpn/protonvpn/nyex) (Quit: nyex)
[20:25:43] <Helmholtz> emanuele6, ok, in that snippet I linked,  "before exit" would be printed before exit
[20:25:48] <Helmholtz> but not on Ctrl+C
[20:26:01] <Helmholtz> it's like trap does not execute the routine on ctrl+C
[20:28:02] <emanuele6> Helmholtz: you have [[ so i assumed your shell is bash.
[20:28:09] <emanuele6> if this is zsh, go to #zsh
[20:28:11] <emanuele6> !zsh
[20:28:11] <greybot> zsh is NOT an enhanced version of bash. It's a different shell, with different features and there's a different channel for your questions: #zsh For zsh-like menu completion, bind '\C-i':menu-complete # there is nothing similar to menu selection
[20:28:19] <Helmholtz> no it's bash
[20:28:23] <emanuele6> it is clearly not
[20:28:49] <emanuele6> bash, unlike other shells, handles SIGINT (^C) in EXIT traps by default.
[20:29:19] <emanuele6> if this is meant to be a bash script, make sure your script is being ran by bash.
[20:29:43] <emanuele6> !shebang
[20:29:43] <greybot> A script MUST begin with a #! line, called the "shebang" (from hash+bang). It tells the kernel what interpreter to run, to read your script. See <http://stackoverflow.com/a/733901/58803> and <http://mywiki.wooledge.org/BashGuide/CommandsAndArguments#Scripts> and <http://www.in-ulm.de/~mascheck/various/shebang/>
[20:29:57] <Helmholtz> I mean I'm using fish but the script is using bash and I've set up shellcheck to warn me on any non-bash usage
[20:30:04] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[20:30:04] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[20:30:04] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[20:30:07] <Helmholtz> #!/usr/bin/env bash
[20:30:28] <emanuele6> so that it has #!/bin/bash shebang (not /bin/sh) and that you are not running it as `sh file', but as `bash file' or `./file'
[20:31:30] <Helmholtz> Aren't you confusing it with `[` aka test? [[ is fine in bash
[20:31:40] *** Joins: zer0bitz_ (~zer0bitz@2001:2003:f74d:b800:70e8:bae3:c5b2:7d1d)
[20:32:12] <Helmholtz> I mean [ is fine too...[ is not posix
[20:32:27] <emanuele6> yes it is fine in bash.
[20:32:34] <emanuele6> that is why i assumed you were using bash
[20:32:37] *** Quits: sinaowolabi_ (~SinaOwola@160.152.110.131) (Ping timeout: 240 seconds)
[20:32:49] <emanuele6> but if ^C is not being handled by EXIT traps, you are not using bash,.
[20:33:02] <emanuele6> or, once again, you are using subshells where you should not be
[20:33:47] <emanuele6> make sure that the EXIT trap is not being run by adding something   `echo blabla;'.
[20:34:15] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[20:34:50] <Helmholtz> https://dpaste.com/E88EAE3MC
[20:35:02] <Helmholtz> This is a minimal example, ctrl+c does not print before exit
[20:35:13] <emanuele6> oh god
[20:35:30] <emanuele6> have tried adding  `echo blabla;' in the trap?
[20:35:37] *** Quits: zer0bitz (~zer0bitz@2001:2003:f74d:b800:f8af:7e9a:b154:2753) (Ping timeout: 256 seconds)
[20:35:37] <emanuele6> anyway, with that paste, the issue is clear
[20:35:58] <emanuele6> nor the trap nor the function exist when you ^C
[20:36:15] <emanuele6> try putting the `sleep 5' after.
[20:36:28] <Helmholtz> OH no
[20:36:37] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[20:36:52] *** Joins: Guest40 (~Guest40@2001:8a0:b8aa:8000:350e:2ec3:8b49:31a1)
[20:37:12] *** Parts: Guest40 (~Guest40@2001:8a0:b8aa:8000:350e:2ec3:8b49:31a1) ()
[20:38:44] <Helmholtz> emanuele6, sorry for bothering...it's fixed now..thakns
[20:38:46] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Remote host closed the connection)
[20:38:58] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[20:39:28] *** Quits: han-solo (~han-solo@user/han-solo) (Quit: leaving)
[20:39:41] <emanuele6> Helmholtz: making claim like "it's like trap does not execute the routine on ctrl+C" which are not true and you have not even verified is not helpful
[20:40:03] <emanuele6> and important omitting code is not helpful either
[20:40:38] *** Joins: dsrt^ (~dsrt@50.235.176.163)
[20:41:43] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[20:41:43] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[20:41:43] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[20:43:17] <emanuele6> s/\(important\) \(omitting\)/\2 \1/
[20:43:39] *** Joins: carl- (~carl-@c-138ee555.02-180-73746f39.bbcust.telenor.se)
[20:44:55] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[20:46:22] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[20:46:38] *** Joins: unop (~unop@195.91.14.193)
[20:51:07] *** Joins: gschanuel215 (~gschanuel@user/gschanuel)
[20:51:58] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:f931:4dd:828a:cfc2)
[20:52:10] *** Quits: PeGaSuS (WeeChat@user/pegasus) (Quit: Goodbye! - WeeChat 3.4)
[20:53:50] *** Joins: PeGaSuS (WeeChat@user/pegasus)
[20:54:08] *** Quits: cliluw (~cliluw@47.147.73.223) (Ping timeout: 272 seconds)
[20:54:13] *** Quits: gschanuel21 (~gschanuel@user/gschanuel) (Ping timeout: 240 seconds)
[20:54:13] *** gschanuel215 is now known as gschanuel21
[20:54:51] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[20:54:51] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[20:54:51] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[20:54:55] <Earnestly> How does busybox have http3 support in their httpd before virtually anyone else, lol
[20:54:57] *** Joins: cliluw (~cliluw@47.147.73.223)
[20:55:35] *** Joins: k8yun (~k8yun@user/k8yun)
[20:56:45] <Earnestly> Sorry, read wrong
[20:56:47] <Earnestly> It does not
[20:56:56] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Quit: WeeChat 3.4)
[20:57:00] *** Joins: bluedust (~bluedust@89.238.143.234)
[20:57:55] <emanuele6> was about to say, lol
[20:58:14] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[20:59:06] *** Quits: themchn (~themachin@user/themachine) (Quit: I fell over, send help.)
[20:59:25] *** Quits: XV8 (~XV8@c-73-148-120-152.hsd1.va.comcast.net) (Ping timeout: 240 seconds)
[21:00:13] *** Quits: bluedust_ (~bluedust@59.89.210.247) (Ping timeout: 256 seconds)
[21:00:16] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:00:29] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:00:32] <Exterminador> hello guys. trying to create a shell script to launch weechat in case of failure. can I check if a process is running based on the entire command?
[21:00:56] <Exterminador> the command would be something like `/usr/bin/SCREEN -dmSU weechat /usr/bin/weechat`
[21:01:34] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:01:45] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:02:16] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:02:24] *** Joins: XV9 (~XV8@2601:5cb:c001:50:bc64:9586:eaa5:f172)
[21:02:27] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:03:08] *** Quits: unop (~unop@195.91.14.193) (Remote host closed the connection)
[21:03:25] <emanuele6> i mean, you can, that is not a great way to manage processes though:  pgrep -f '\bweechat\b'
[21:03:55] *** Joins: mithrin (~mithrin@188-167-233-152.dynamic.chello.sk)
[21:04:03] *** Joins: unop (~unop@195.91.14.193)
[21:04:38] <emanuele6> !faq 33
[21:04:38] <greybot> https://mywiki.wooledge.org/BashFAQ/033 -- How can I find a process ID for a process given its name?
[21:04:57] <emanuele6> ( also, you may find !faq45 interesting )
[21:05:04] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:05:04] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:05:04] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:06:41] <e36freak> and uh
[21:06:42] <e36freak> !pm
[21:06:42] <greybot> http://mywiki.wooledge.org/ProcessManagement
[21:06:46] *** Joins: vysn (~vysn@user/vysn)
[21:06:56] <Exterminador> I know that it isn't perfect but if I use only weechat or screen it will macth a few more PIDs
[21:07:30] *** Joins: XV8 (~XV8@c-73-148-120-152.hsd1.va.comcast.net)
[21:07:38] <e36freak> Exterminador: see the pm page and maybe think about a better way to approach the problem as a whole
[21:08:17] *** Quits: XV9 (~XV8@2601:5cb:c001:50:bc64:9586:eaa5:f172) (Ping timeout: 240 seconds)
[21:08:47] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:08:53] *** Quits: lilt (~lilt@109.126.36.28) (Remote host closed the connection)
[21:09:01] <Exterminador> I can use systemd (I've been using it for a bit) but somehow I'm getting zombie processes when weechat reconnects to networks (randomly). so I wanted to check if NOT using systemd would make any effect
[21:10:13] *** Joins: ChmEarl (~chmearl@user/chmearl)
[21:10:56] *** Joins: FluffyMask (~masque@user/fluffymask)
[21:11:15] <Exterminador> I'll take a look at the tips you've given to me and I'll come with a solution (I hope) xD
[21:11:38] <Exterminador> thanks for the quick replies, though. appreciated
[21:11:39] *** Quits: beencubed (~beencubed@209.131.238.248) (Quit: Leaving)
[21:12:27] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:f931:4dd:828a:cfc2) (Ping timeout: 256 seconds)
[21:14:16] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:14:16] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:14:16] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:14:31] *** Joins: rgrinberg (~textual@187.194.14.9)
[21:15:12] *** Quits: k8yun (~k8yun@user/k8yun) (Read error: Connection reset by peer)
[21:15:50] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[21:17:24] <sixwheeledbeast> could be something wrong with your systemd unit?
[21:17:56] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:19:57] *** Joins: bluedust_ (~bluedust@59.89.210.247)
[21:21:11] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[21:21:20] *** Quits: filename (~kilitary@188.242.105.134) (Quit: entering irc ...)
[21:21:28] *** Quits: XV8 (~XV8@c-73-148-120-152.hsd1.va.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:22:26] <Exterminador> sixwheeledbeast: I don't think so.
[21:22:48] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[21:22:49] <Exterminador> another stupid question: "$HOME"/file or $HOME/file?
[21:23:08] *** Joins: XV8 (~XV8@2601:5cb:c001:50:dc92:7130:8d6b:5842)
[21:23:27] *** Quits: bluedust (~bluedust@89.238.143.234) (Ping timeout: 256 seconds)
[21:23:34] *** Quits: XV8 (~XV8@2601:5cb:c001:50:dc92:7130:8d6b:5842) (Client Quit)
[21:23:52] *** Joins: filename (~kilitary@185.193.143.131)
[21:24:00] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:24:00] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:24:00] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:25:12] *** Quits: filename (~kilitary@185.193.143.131) (Read error: Connection reset by peer)
[21:25:47] <sixwheeledbeast> !qefs
[21:25:47] <greybot> "$Quote" "$Every" "$Fucking" "$Substitution"
[21:27:03] *** Joins: sdu (~sidu@185.44.146.61)
[21:28:17] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:29:25] *** Joins: filename (~kilitary@185.193.143.131)
[21:29:41] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:29:41] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:29:41] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:31:43] *** Joins: beencubed (~beencubed@209.131.238.248)
[21:32:05] <Exterminador> rotfl! nice one :D
[21:32:42] <mute> also acceptable to "$HOME/file"
[21:32:57] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:33:29] <mute> might just be me, but if it's going to expand to one parameter, I quote it together.
[21:37:04] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:37:04] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:37:04] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:37:16] *** Quits: mowcat (~mowcat@host86-129-162-211.range86-129.btcentralplus.com) (Remote host closed the connection)
[21:37:35] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[21:37:43] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:37:44] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:38:18] <Exterminador> !paste
[21:38:18] <greybot> Paste short snippets (<= 5 lines) in channel. Paste more using http://paste.debian.net/ or http://paste.wooledge.org/ or see !ix or !sprunge. Please don't use pastebin.com -- it's full of ads and mangles whitespace. NEVER upload screen shots. Don't use a site that requires Javascript, or registration to view raw.
[21:38:57] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:39:10] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:39:42] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 276 seconds)
[21:39:49] *** Joins: N4buc0 (~N4buc0@177.16.170.138)
[21:39:52] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:40:06] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:40:09] *** Joins: jtmusky (~jtmusky@104-1-122-97.lightspeed.okcbok.sbcglobal.net)
[21:40:18] <Exterminador> http://paste.wooledge.org/11564 >> I guess this will do it for the next tests
[21:40:51] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:41:35] *** Quits: N4buc0- (~N4buc0@2804:7f4:348b:2121:a987:95db:818a:7bf0) (Remote host closed the connection)
[21:41:37] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[21:41:49] *** Quits: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c) (Ping timeout: 240 seconds)
[21:42:00] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:42:10] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:44:08] *** Joins: XV8 (~XV8@2601:5cb:c001:50:dc92:7130:8d6b:5842)
[21:44:43] *** Quits: filename (~kilitary@185.193.143.131) (Quit: entering irc ...)
[21:44:46] *** Joins: ouestbillie (~gallup@192-222-138-215.qc.cable.ebox.net)
[21:44:54] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:44:54] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:44:54] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:45:01] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[21:45:02] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Remote host closed the connection)
[21:47:01] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:47:07] *** Quits: rgrinberg (~textual@187.194.14.9) (Read error: Connection reset by peer)
[21:47:07] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:48:04] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:48:12] *** Joins: filename (~kilitary@185.193.143.131)
[21:48:24] *** Joins: rgrinberg (~textual@2806:101e:7:5da4:9dd2:64b9:16ba:553d)
[21:49:03] <sixwheeledbeast> You don't happen to use $date in your systemd unit do you? Or is that just for that
[21:49:08] *** Joins: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[21:51:22] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[21:51:23] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[21:51:23] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[21:52:06] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:52:18] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:53:02] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[21:53:30] *** Joins: larryv (~larryv@zsh/patchmanager/larryv)
[21:54:10] <Exterminador> it is just for that
[21:54:51] <emanuele6> Exterminador: i mean, sure. but if you want to match the line exactly use -x
[21:55:22] *** Quits: XV8 (~XV8@2601:5cb:c001:50:dc92:7130:8d6b:5842) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:55:31] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[21:55:40] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[21:56:04] *** Joins: XV8 (~XV8@2601:5cb:c001:50:dc92:7130:8d6b:5842)
[21:56:10] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[21:56:16] <Exterminador> emanuele6: `pgrep -x "/usr/bin/SCREEN -dmSU weechat /usr/bin/weechat"` returns empty. while -f returns the actual PID
[21:56:35] <sixwheeledbeast> The units are fussy ExecStart= can't just take sh like commands and % needs escaping.
[21:56:52] <emanuele6> Exterminador: i never told you to remove -f though.
[21:57:36] <Exterminador> sixwheeledbeast: my systemd user unit is the following: https://termbin.com/hevh
[21:57:57] <Exterminador> no expandable strings, nothing
[21:59:12] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[21:59:30] *** Joins: taupiqueur_ (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr)
[22:00:01] *** Joins: hiroaki (~hiroaki@2a02:908:4b14:2d40:6c79:e2da:5933:c0f5)
[22:00:17] *** Quits: taupiqueur (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[22:00:24] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:add8:b075:8307:d644) (Read error: Connection reset by peer)
[22:01:13] *** Quits: 029AAAHVX (~l4s8g@pd9e621d0.dip0.t-ipconnect.de) (Quit: 029AAAHVX)
[22:01:26] *** Quits: zer0bitz_ (~zer0bitz@2001:2003:f74d:b800:70e8:bae3:c5b2:7d1d) (Read error: Connection reset by peer)
[22:01:33] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[22:01:33] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[22:01:33] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[22:01:38] <Exterminador> emanuele6: added -x as advised. thanks!
[22:02:22] <emanuele6> Exterminador: also `>' followed by `>>' can cause race conditions and it is completely unnecessary.
[22:02:35] *** Joins: adac (~adac@213-47-252-7.cable.dynamic.surfer.at)
[22:02:54] <emanuele6> use a single printf
[22:02:59] <emanuele6> or group the printf's together
[22:03:05] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[22:03:28] <emanuele6> { printf 'printf1'; printf 'printf2' ;} > file
[22:04:01] *** Quits: rgrinberg (~textual@2806:101e:7:5da4:9dd2:64b9:16ba:553d) (Ping timeout: 256 seconds)
[22:04:11] <sixwheeledbeast> Is it intentional you are using forking?
[22:04:15] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[22:04:26] <emanuele6> where am i forking?
[22:05:24] *** Joins: micah (~micah@debian/micah)
[22:05:51] <micah> i'm trying to remove the second occurence of the string '- backend' from a yaml file, and remove the entire line, shouldn't sed 's/- backend//2' do that? for some reason, it does not (if I put /1 there, it deletes both of them)
[22:06:11] <phy1729> /2 is per line iirc
[22:06:27] <sixwheeledbeast> Sorry not the bash, the systemd unit. I would try Type=simple
[22:07:36] <micah> phy1729: hum, that might be why
[22:07:58] <emanuele6> what is the goal? are you trying to edit a text file?
[22:08:23] <emanuele6> this would be much easier in ed (also it is much nicer to edit text files in ed)
[22:08:25] <Exterminador> emanuele6: something like: https://paste.debian.net/plain/1230785 ?
[22:08:38] <Exterminador> (about multiple printf)
[22:08:51] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[22:09:15] <micah> emanuele6: i'm trying to just remove the second occurence of that string in a yaml file
[22:09:35] <Exterminador> sixwheeledbeast: usually, iirc, Type=simple is when the process does not fork. in this case it forks (using screen)
[22:09:54] <emanuele6> micah: is this trying to edit a text file with -i?.... that was my question.
[22:10:14] <emanuele6> anyway this is how you do it in sed:   sed -e '/- backend/by' -e 'b' -e ':y' -e 's///' -e 'n' -e 'by' .
[22:10:18] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[22:10:18] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[22:10:18] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[22:10:26] <emanuele6> in ed, it would have been much simpler
[22:10:50] <micah> probably in awk as well
[22:11:01] <emanuele6> you still are not answering my question.
[22:11:06] <emanuele6> whatever.
[22:11:28] *** ChanServ sets mode: +o twkm
[22:11:29] <micah> i am trying to edit a text file
[22:11:31] *** Joins: euphoricallysane (~quatro@user/euphoricallysane)
[22:11:32] <emanuele6> Exterminador: sure, but now you have an extra newline if you have not noticed
[22:11:48] <emanuele6> because '%s\n\n...\n'
[22:11:48] *** twkm sets mode: -bo kurahaupo_!~kurahaupo@*$##fix_your_connection twkm
[22:12:04] <Exterminador> they're intentional now :D but great eye!
[22:13:22] <micah> emanuele6: hum, that sed doesn't seem to do it
[22:13:39] *** Quits: carl- (~carl-@c-138ee555.02-180-73746f39.bbcust.telenor.se) (Ping timeout: 256 seconds)
[22:13:45] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[22:13:58] <emanuele6> # printf '%s\n' '  - backend  ' 'x' ' - backend: lol' | sed -e '/- backend/by' -e 'b' -e ':y' -e 's///' -e 'n' -e 'by'
[22:13:59] <shbot> emanuele6:
[22:13:59] <shbot> emanuele6: x
[22:14:00] <shbot> emanuele6:  : lol
[22:14:05] <emanuele6> right
[22:15:01] <emanuele6> sed -e '/- backend/by' -e 'b' -e ':y' -e 'n; s///' -e 'tz' -e 'by' -e ':z' -e 'n; bz'
[22:15:20] <emanuele6> again, if you insist in editing TEXT inplace with sed.
[22:15:32] <emanuele6> # printf '%s\n' '  - backend  ' 'x' ' - backend: lol' | sed -e '/- backend/by' -e 'b' -e ':y' -e 'n; s///' -e 'tz' -e 'by' -e ':z' -e 'n; bz'
[22:15:34] <shbot> emanuele6:   - backend
[22:15:34] <shbot> emanuele6: x
[22:15:34] <shbot> emanuele6:  : lol
[22:15:47] <emanuele6> # printf '%s\n' '  - backend  ' '-backend: hehe' ' - backend: lol' | sed -e '/- backend/by' -e 'b' -e ':y' -e 'n; s///' -e 'tz' -e 'by' -e ':z' -e 'n; bz'
[22:15:48] <shbot> emanuele6:   - backend
[22:15:48] <shbot> emanuele6: -backend: hehe
[22:15:48] <shbot> emanuele6:  : lol
[22:15:57] <emanuele6> oh, missing space
[22:16:00] <emanuele6> # printf '%s\n' '  - backend  ' '- backend: hehe' ' - backend: lol' | sed -e '/- backend/by' -e 'b' -e ':y' -e 'n; s///' -e 'tz' -e 'by' -e ':z' -e 'n; bz'
[22:16:02] <shbot> emanuele6:   - backend
[22:16:02] <shbot> emanuele6: : hehe
[22:16:02] <shbot> emanuele6:  - backend: lol
[22:16:08] <emanuele6> only the second gets removed now.
[22:16:19] <emanuele6> s/TEXT/FILES/
[22:16:28] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Ping timeout: 272 seconds)
[22:16:44] <emanuele6> !sed
[22:16:44] <greybot> sed is a Stream Editor, used to filter output. It's NOT primarily useful for editing files (use ed, ex or perl instead). Ask sed questions in #sed.
[22:17:02] <emanuele6> note that it says "Stream" editor, not "File" editor.
[22:17:12] <micah> awk '!/- backend/ || ++ctr != 2'
[22:17:20] <micah> that does work ^
[22:17:28] <emanuele6> that something different.
[22:17:34] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Quit: No Ping reply in 180 seconds.)
[22:17:35] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[22:17:45] <emanuele6> your original code removed only "- backend".
[22:17:58] <emanuele6> that awk code clearly does not do that, it removes the whole line
[22:18:09] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[22:18:15] <micah> i misspoke then, i do wish to remove the whole line
[22:19:02] <emanuele6> # sed 's/- backend//' <<< 'dsakjl kj- backend: d'
[22:19:04] <shbot> emanuele6: dsakjl kj: d
[22:19:12] <emanuele6> that is how s/// normally works, right
[22:19:17] <emanuele6> that is what you used
[22:19:20] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[22:19:20] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[22:19:20] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[22:19:21] *** Quits: domicron (~domicron@gateway/tor-sasl/domicron) (Remote host closed the connection)
[22:19:21] <emanuele6> # sed '/- backend/d' <<< 'dsakjl kj- backend: d'
[22:19:23] <shbot> emanuele6: no output
[22:19:27] <emanuele6> this is how you delete lines in sed
[22:19:33] <micah> yes, but that doesn't delete the second occurence
[22:19:34] <emanuele6> you used the substitution command
[22:19:35] <micah> only
[22:19:50] *** Joins: domicron (~domicron@gateway/tor-sasl/domicron)
[22:19:51] <micah> oh true, i was using 's'
[22:19:53] <emanuele6> micah: s/// never deletes lines
[22:19:56] <micah> that indeed was a mistake
[22:20:13] <emanuele6> it's like sub() in awk
[22:20:16] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[22:21:03] <emanuele6> micah: once again, this is MUCH easier (and better since ed is actually a FILE editor) to do in ed if you are editing a file inplace.
[22:21:33] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[22:21:53] <emanuele6> printf '%s\n' '/- backend/' '//d' 'w' 'q' | ed -s file_to_edit
[22:22:13] <micah> indeed that is easier
[22:22:44] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[22:24:45] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[22:26:26] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[22:27:21] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[22:28:58] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[22:29:13] *** Quits: ouestbillie (~gallup@192-222-138-215.qc.cable.ebox.net) (Quit: leaving)
[22:29:27] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[22:29:47] <emanuele6> # printf '%s\n' '  - backend  ' '-backend: hehe' ' - backend: lol' | sed -e '/- backend/by' -e 'b' -e ':y' -e 'n; //by' -e 'tz' -e 'by' -e ':z' -e 'n; bz'
[22:29:49] <shbot> emanuele6:   - backend
[22:29:49] <shbot> emanuele6: -backend: hehe
[22:29:50] <shbot> emanuele6:  - backend: lol
[22:29:59] <emanuele6> err, missing space again
[22:31:40] *** Joins: themachine (~themachin@user/themachine)
[22:33:27] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[22:33:28] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[22:33:28] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[22:34:12] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 272 seconds)
[22:34:29] <emanuele6> # printf '%s\n' aa '  - backend  ' '- backend: hehe' ' - backend: lol' | sed -ne 'p; /- backend/bx' -e 'b' -e ':x' -e 'n; //by' -e 'p; bx' -e ':y' -e 'n; p; by'
[22:34:30] <shbot> emanuele6: aa
[22:34:30] <shbot> emanuele6:   - backend
[22:34:30] <shbot> emanuele6:  - backend: lol
[22:35:14] <emanuele6> that is how you could convert the script from before to deleting the second line that matches instead of removing the first "- backend" from the second lines that matches
[22:35:33] *** Quits: taupiqueur_ (~taupiqueu@lmontsouris-659-1-2-186.w193-248.abo.wanadoo.fr) (Quit: taupiqueur_)
[22:35:51] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[22:36:01] <emanuele6> you need to use `-n' mode, because `d' would just back to the top of the script
[22:36:26] <emanuele6> ( well, you could do it without -n if you involve the hold space )
[22:36:48] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 256 seconds)
[22:36:49] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Read error: Connection reset by peer)
[22:37:06] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[22:38:29] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[22:38:29] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[22:38:29] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[22:38:47] *** Joins: FIlystyn (~piotr@user/filystyn)
[22:39:15] *** Parts: furrymcgee (~devuan@cgn-89-1-211-103.nc.de) ()
[22:39:20] *** Quits: themachine (~themachin@user/themachine) (Quit: I fell over, send help.)
[22:39:28] *** Joins: TomyLobo (~TomyLobo@p200300e80f006700cc6e9ab645bdad3a.dip0.t-ipconnect.de)
[22:41:46] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[22:44:26] <emanuele6> # printf '%s\n' aa '  - backend  ' '- backend: hehe' ' - backend: lol' | sed 'x; /../ { x; b; }; /./ { x; /- backend/ { x; s/^/./; x; d; }; b; }; x; /- backend/ { x; s/^/./; x; }'
[22:44:28] <shbot> emanuele6: aa
[22:44:28] <shbot> emanuele6:   - backend
[22:44:28] <shbot> emanuele6:  - backend: lol
[22:44:38] <emanuele6> here is one way to do it, without -n, with the hold space
[22:44:42] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Ping timeout: 276 seconds)
[22:45:06] *** Joins: l4s8g (~l4s8g@pd9e621d0.dip0.t-ipconnect.de)
[22:48:08] <emanuele6> ( another way to do it without -n and without the hold space is to use `N;s/.*\n//;by' instead of `d' )
[22:49:34] <emanuele6> s/;by/;bz/
[22:51:04] <emanuele6> # printf '%s\n' aa '  - backend  ' '- backend: hehe' ' - backend: lol' | sed -e '/- backend/by' -e 'b' -e ':y' -e 'n; // { N; s/.*\n//; bz' -e '}; by' -e ':z' -e 'n; bz'
[22:51:06] <shbot> emanuele6: aa
[22:51:06] <shbot> emanuele6:   - backend
[22:51:06] <shbot> emanuele6:  - backend: lol
[22:52:23] *** Joins: XV9 (~XV8@2601:5cb:c001:50:e0f2:76b6:d7e0:55b)
[22:52:25] *** Quits: volga629 (~volga629@72.139.93.26) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:52:26] *** Joins: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903)
[22:53:02] *** Joins: Atque_ (~Atque@user/atque)
[22:53:09] *** Quits: Atque (~Atque@user/atque) (Ping timeout: 276 seconds)
[22:54:25] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903) (Client Quit)
[22:54:55] *** Quits: Atque_ (~Atque@user/atque) (Remote host closed the connection)
[22:55:07] *** Quits: jaysicks (~jaysicks@185-29-82-222.pool.digikabel.hu) (Remote host closed the connection)
[22:55:21] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[22:55:33] *** Joins: SWISSMANN (~SWISSMANN@2001-4dd2-5e3c-0-df30-62d1-7594-7534.ipv6dyn.netcologne.de)
[22:55:34] *** Quits: XV8 (~XV8@2601:5cb:c001:50:dc92:7130:8d6b:5842) (Ping timeout: 260 seconds)
[22:56:02] *** Joins: jaysicks (~jaysicks@185-29-82-222.pool.digikabel.hu)
[22:56:13] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[22:56:21] *** Joins: Atque (~Atque@user/atque)
[22:57:31] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[22:57:47] <FIlystyn> cat /etc/shell does it even matter - if someone tries to connect from ssh with sehll that is not listed will shh gently tell him to go away ?
[22:58:03] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Read error: Connection reset by peer)
[22:58:24] *** Joins: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com)
[22:58:36] *** Joins: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net)
[22:58:36] *** Quits: ghostboarder (~quassel@S010640623101dbe0.va.shawcable.net) (Changing host)
[22:58:36] *** Joins: ghostboarder (~quassel@user/ghostboarder)
[23:00:24] *** Quits: Atque (~Atque@user/atque) (Remote host closed the connection)
[23:01:15] *** Joins: Atque (~Atque@user/atque)
[23:01:50] <emanuele6> FIlystyn: try #openssh
[23:02:00] *** Joins: bobo (~bobo@176-12-55-59.pon.spectrumnet.bg)
[23:02:20] *** Quits: ghostboarder (~quassel@user/ghostboarder) (Client Quit)
[23:02:22] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[23:02:32] <FIlystyn> okie
[23:03:30] *** ChanServ sets mode: +o geirha
[23:03:32] *** geirha sets mode: +b-o ghostb*!*quassel@*$##fix_your_connection geirha
[23:03:47] *** Joins: zer0bitz (~zer0bitz@2001:2003:f74d:b800:f425:fffb:4465:6325)
[23:04:28] *** Quits: bobo (~bobo@176-12-55-59.pon.spectrumnet.bg) (Client Quit)
[23:05:11] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[23:05:43] <geirha> !forget box
[23:05:43] <greybot> OK, geirha
[23:05:50] <geirha> !learn box box(){ local p q m w a s OPTIND;while getopts lcr w;do a=$w;done;set - "${@:OPTIND}";for w;do((${#w}>${#m}))&&m=$w;done;s=${m//?/ } m=${m//?/q}qq;printf "\e(0l$m"k\\n;for w;do p=${s:${#w}} q=$p;case $a in r)q=;;c)q=${p:${#p}/2};esac;printf "x\e(B ${p:${#q}}%s$q \e(0x\n" "$w";done;printf "m$m"j"\e(B\n";}
[23:05:50] <greybot> OK, geirha
[23:07:14] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[23:09:06] *** Quits: drd (~drd@93-42-66-75.ip85.fastwebnet.it) (Ping timeout: 256 seconds)
[23:09:22] *** Joins: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903)
[23:12:28] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[23:12:49] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 256 seconds)
[23:16:38] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903) (Quit: WeeChat 3.4)
[23:17:15] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[23:17:16] *** Joins: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903)
[23:18:01] *** Quits: sargon (~sargon@188.250.185.117) (Quit: Ex-Chat)
[23:18:06] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903) (Client Quit)
[23:18:35] *** Joins: ElPresidente (~ElPreside@2600:1700:3d10:4870:1b5d:374a:816c:e903)
[23:19:39] <rendar> with `exec screen -m -S vid export DISPLAY=:0; mpv --fs "${@:1}"` i get error: cannot exec export: no such file or directory
[23:19:40] <rendar> why?
[23:20:47] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[23:20:47] <geirha> because export isn't a command in PATH, it's a shell builtin
[23:21:35] <chronon> I got curious about that use of sed to remove the line with second occurence of a match.
[23:21:44] <geirha> wrap a shell around it;  sh -c 'DISPLAY=:0 mpv --fs "$@"' _ "$@"
[23:21:45] <chronon> This works for me: sed '/^ *- backend:/!b;x;s/$/@/;/^@@$/{x;d};x'
[23:22:18] <geirha> or, you could just use env
[23:22:27] <chronon> I cannot tell whether that's the same as emanuele6's last one.
[23:22:28] <geirha> screen -S vid env DISPLAY=:0 mpv --fs "$@"
[23:23:18] <emanuele6> well, yours is using GNUisms
[23:23:24] <chronon> In principle you can just add as many @'s as needed to pick the occurrence to remove.
[23:23:36] <chronon> Yes, I'm on Linux.
[23:23:53] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[23:24:21] *** Quits: LuksNuke (~LuksNuke@gateway/tor-sasl/luksnuke) (Ping timeout: 276 seconds)
[23:24:23] <emanuele6> sed -e '/- backend/!b' -e 'x;s/$/@/;/^@@$/{x;d;};x'
[23:24:32] <emanuele6> here is the portable version of your solution
[23:24:40] <emanuele6> but anyway, it is not similar to my second to last one
[23:24:59] <emanuele6> my second to last one stops adding to the hold space once it has two characters in it
[23:25:15] <chronon> I see.
[23:25:25] <Tach> It it possible to use a basic auth in a subshell ?
[23:25:27] <emanuele6> yours just keeps adding to the hold space and doesn't print /- backend/ if there are two characters
[23:25:32] <emanuele6> it works
[23:25:59] <geirha> basic auth?
[23:26:10] <chronon> Yeah, I was thinking along the lines of being able to choose any occurrence, so the @'s keep counting.
[23:27:27] <emanuele6> sed 'x; /../ { x; b' -e '}; /./ { x; /- backend/ { x; s/^/./; x; d; }; b' -e '}; x; /- backend/ { x; s/^/./; x; }'
[23:27:43] <chronon> So I notice you split mine into two -e parts at the branch. Why there?
[23:28:32] <emanuele6> chronon: because commands that take have a label or file argument cannot be terminated by ;
[23:28:55] <chronon> Oh, that's pretty awkward.
[23:28:58] <emanuele6> they must be terminated by a newline (or by -e at the command line which is the same as \n )
[23:28:58] <larryv> Tach: your question doesn't really make any sense. what are you looking to do?
[23:29:11] <chronon> I see.
[23:29:33] *** Quits: Atque (~Atque@user/atque) (Remote host closed the connection)
[23:29:40] <emanuele6> chronon: i also added a ; before }, because that is necessary when not using GNU sed
[23:29:50] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[23:29:54] *** Quits: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de) (Remote host closed the connection)
[23:30:23] <chronon> Yes, I noticed that.
[23:30:24] *** Joins: Atque (~Atque@user/atque)
[23:30:26] <Tach> larryv doing a basic auth from scriptX.sh which I include in run.sh and use it in scriptY.sh which I include also in run.sh (yeah just .sh to make it clear)
[23:30:34] <chronon> I'm trying to think of a situation where I would have to be limited by the constraints of portability.
[23:30:46] *** Joins: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de)
[23:30:55] <emanuele6> when you use BSD
[23:31:01] <chronon> I don't think I have access to any systems that don't run GNU sed.
[23:31:05] <emanuele6> or when you don't use GNU sed
[23:31:12] *** Quits: adac (~adac@213-47-252-7.cable.dynamic.surfer.at) (Ping timeout: 272 seconds)
[23:31:34] <chronon> Linux is so dominant these days.
[23:32:18] <emanuele6> i have BSD sed on my sdf shell :)
[23:32:26] <chronon> sdf?
[23:32:28] <emanuele6> also many user in #sed use BSD
[23:32:45] <emanuele6> https://en.wikipedia.org/wiki/SDF_Public_Access_Unix_System
[23:33:32] <koollman> (there are also many macos users in the world. more than bsd and linux users combined, I think)
[23:33:37] <chronon> I will check out #sed. Looks quiet there at the mo.
[23:33:56] <rendar> geirha, thanks it works, but only if i drop 'exec'
[23:34:13] <rendar> geirha, if i keep 'exec screen ...' it will fail, but i cannot even read the error message
[23:34:17] <rendar> i just get [screen is terminating]
[23:34:20] <rendar> any clue?
[23:34:27] <chronon> Oh yes, MacOS is potentially a platform one might not have a choice but to provide for.
[23:34:43] <geirha> rendar: you probably want screen -m -d
[23:34:44] <larryv> chronon: the tool-specific channels are generally pretty quiet. except #awk
[23:35:00] <emanuele6> it has happened some times that i sent solutions with subtle GNU sedism like s/a/\n/ or y/\$'\n'/a/ and it took us hours to figure out how to make them work on BSD
[23:35:02] *** Quits: fatal (~0x00@user/fatal) (Remote host closed the connection)
[23:35:03] <chronon> Oh, I should check out #awk then.
[23:35:16] *** Joins: fatal (~0x00@user/fatal)
[23:35:18] <rendar> geirha, nope, nothing happens with that flag
[23:35:33] <geirha> it starts it in the background
[23:35:36] <emanuele6> now i have learn a lot of GNU features and sed tricks by making sure my sed scripts are portable :)
[23:35:44] <emanuele6> s/learn/&ed/
[23:35:46] <geirha> if you don't want that, try removing both -m and -d
[23:36:15] <chronon> Seems like the BSD people ought to update their sed to incorporate some of the GNUisms. It'll make everyone's life easier to have a consistent set of syntax and features.
[23:36:30] <emanuele6> it does not make sense to do that
[23:36:33] <phy1729> Or GNU could stop adding extra crap
[23:36:41] <larryv> lol typical GNU position, "why doesn't everyone just do what we do"
[23:36:42] <emanuele6> also BSD has features GNU does not have
[23:36:52] <chronon> Yeah, not adding arbitrary stuff would be helpful.
[23:37:11] <emanuele6> if you want portable sed, use https://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html
[23:37:14] <rendar> geirha, it doesn't start
[23:37:22] <chronon> Oh, that's interesting. What the the BSD-only features?
[23:37:22] <rendar> geirha, mpv is never called, the video isn't showing
[23:37:25] <larryv> Tach: what do you mean by "basic auth"? surely not HTTP basic auth?
[23:37:28] <emanuele6> if you want to use GNU features or BSD features, that is fine, but you are limiting yourself
[23:37:55] <chronon> s/the/are/
[23:40:10] *** Quits: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072) (Remote host closed the connection)
[23:40:15] <emanuele6> any implementation of unspecified behaviour is a feature
[23:40:17] <geirha> you run that from inside a terminal emulator running interactive bash?
[23:40:47] *** Joins: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072)
[23:42:02] <rendar> uhm, can i run screen with a bash function?
[23:42:15] <geirha> sure
[23:42:17] *** Quits: xx (~xx@user/xx) (Ping timeout: 256 seconds)
[23:42:25] *** Quits: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[23:42:48] *** Quits: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de) (Remote host closed the connection)
[23:42:54] <larryv> unless you're asking whether ''screen my_function'' will work
[23:43:39] <geirha> oh, I didn't catch that ambiguity
[23:44:47] *** Quits: zer0bitz (~zer0bitz@2001:2003:f74d:b800:f425:fffb:4465:6325) (Read error: Connection reset by peer)
[23:44:55] <Tach> larryv yes that is what I ment, sorry!
[23:46:13] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[23:46:37] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[23:46:47] *** Joins: mat001 (~mat001@c-71-202-208-88.hsd1.ca.comcast.net)
[23:47:03] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[23:47:57] *** Quits: shailangsa (~shailangs@host109-159-108-227.range109-159.btcentralplus.com) (Ping timeout: 256 seconds)
[23:48:33] *** Joins: JohnML (~JohnML@ip-037-201-129-030.um10.pools.vodafone-ip.de)
[23:50:21] *** Quits: adanwan_ (~adanwan@gateway/tor-sasl/adanwan) (Ping timeout: 276 seconds)
[23:50:35] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[23:52:29] *** Joins: tobybl (~tobybl@214.242.200.146.dyn.plus.net)
[23:52:50] *** Joins: themachine (~themachin@user/themachine)
[23:55:10] *** Joins: shailangsa_ (~shailangs@host86-186-127-164.range86-186.btcentralplus.com)
[23:56:20] *** Joins: Betal (~Betal@user/betal)
[23:59:46] *** Quits: themachine (~themachin@user/themachine) (Quit: I fell over, send help.)
