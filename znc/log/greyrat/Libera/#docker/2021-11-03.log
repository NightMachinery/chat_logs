[00:00:04] <kittonian> i don't want it in syslog. i want an individual file that has the same contents as running the docker-compose logs command
[00:00:28] <zoredache> Right, and if you sent it to syslog, you could have your syslog put all the docker output into a file?
[00:00:32] *** Quits: INeedAHandle (~INeedAHan@39.124.72.106) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[00:00:53] <kittonian> no, i don't want it to go to syslog at all
[00:00:59] <kittonian> that's not how fail2ban works
[00:01:09] <kittonian> it's needs me to point to a specific log file for it to watch
[00:01:19] <kittonian> and i only need the output of one specific container (apache)
[00:01:45] <ikke> You can use tee to write output to both stdout and a file
[00:02:05] <kittonian> from a docker-compose yaml?
[00:02:27] <zoredache> Anyway look at the logging drivers section of the docs. https://docs.docker.com/config/containers/logging/configure/
[00:02:34] <ikke> you do need a shell to be able to pipe into tee though
[00:03:21] <programmerq> forget the compose bit for a moment-- docker has a container logging system. That system has several drivers. the default driver is to store it on disk alongside the container in a docker-specific format. As mentioned, there are other drivers that you can specify. That driver can be applied to a specific container (and yes, you can specify container log driver options in the compose definition), or
[00:03:23] <programmerq> system-wide.
[00:03:52] <programmerq> essentially the stdout/stderr that comes out of the main containerized process is handed to the logging driver for that container.
[00:04:39] <programmerq> the json format logs might actually work with fail2ban since the json pretty much just wraps each line in a json object with a timestamp and whether it was stderr/stdout.
[00:04:51] <programmerq> assuming you can teach fail2ban about that file format
[00:06:05] *** Quits: rpthms (~rpthms@user/rpthms) (Remote host closed the connection)
[00:06:05] *** Joins: kittonian_ (~kittonian@cpe-70-114-148-180.austin.res.rr.com)
[00:06:13] <kittonian_> not sure what that was about
[00:06:20] <kittonian_> just disconnected all of a sudden
[00:06:46] *** Quits: kittonian (~kittonian@cpe-70-114-148-180.austin.res.rr.com) (Ping timeout: 260 seconds)
[00:07:57] *** Joins: rpthms (~rpthms@user/rpthms)
[00:08:57] *** Joins: AnselmoCampanas (~AnselmoCa@190.99.69.41)
[00:09:28] <ikke> and again
[00:09:31] <AnselmoCampanas> hi! I'm starting with Microservices architecture, and I wonder which strategies and tools do you follow for monitoring 
[00:09:45] *** Joins: ss4 (~wootehfoo@user/wootehfoot)
[00:10:54] *** Quits: Null_A (~null_a@2601:645:8700:2290:91de:cb47:8eef:9a3e) (Remote host closed the connection)
[00:11:04] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:11:32] *** Joins: Null_A (~null_a@2601:645:8700:2290:91de:cb47:8eef:9a3e)
[00:11:56] *** kittonian_ is now known as kittonian
[00:12:07] <kittonian> no, that was libera finally releasing my nick
[00:12:54] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Ping timeout: 260 seconds)
[00:14:29] *** Quits: incognito (~relativit@user/incognito) (Quit: Going offline, see ya! (www.adiirc.com))
[00:15:24] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Read error: Connection reset by peer)
[00:15:45] *** Joins: lithium (~lithium@user/lithium)
[00:17:07] *** Quits: mickey8 (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[00:17:33] *** Joins: mickey8 (~user@user/mickey)
[00:21:13] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Quit: Good Bye! My bouncer has probably crashed or lost connection to the internet...)
[00:23:15] *** Joins: INeedAHandle (~INeedAHan@121.155.99.135)
[00:23:34] *** Quits: Wendelin (~Wendelin@user/wendelin) (Ping timeout: 260 seconds)
[00:23:38] *** Joins: luva (~luva@146.70.62.238)
[00:26:16] <kittonian> is there no way to do this?
[00:30:18] *** Quits: DoofusCanadensis (~DoofusCan@207.229.38.10) (Quit: So as you can see from this flowchSQUIRREL!!)
[00:31:23] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[00:33:58] *** Joins: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl)
[00:38:42] *** Quits: noarb (~noarb@user/noarb) (Quit: ZNC 1.8.2 - https://znc.in)
[00:40:52] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[00:43:42] *** Quits: vd (~vd@bras-base-mtrlpq2848w-grc-41-70-53-240-121.dsl.bell.ca) (Quit: Client closed)
[00:44:16] <kittonian> anyone?
[00:44:34] *** Quits: Tas-sos (~Tas-sos@ppp005054072206.access.hol.gr) (Quit: Lost terminal)
[00:45:14] <ikke> kittonian: did you get this? https://tpaste.us/5neX 
[00:45:53] <kittonian> i did not, thank you for posting it
[00:45:59] <kittonian> unfortunately that's not a correct answer
[00:46:18] <kittonian> it would be if the container id (and thus the file path) never changed
[00:46:40] <kittonian> but every time you docker-compose down and then docker-compose up -d, the container id (and the file path to the json file) changes
[00:46:49] <kittonian> so I can't point fail2ban at something that doesn't exist
[00:47:48] *** Joins: vd (~vd@bras-base-mtrlpq2848w-grc-41-70-53-240-121.dsl.bell.ca)
[00:48:13] <ikke> I suggested to use tee to redirect the output both to stdout and a file
[00:48:26] *** Parts: vd (~vd@bras-base-mtrlpq2848w-grc-41-70-53-240-121.dsl.bell.ca) ()
[00:48:33] <ikke> but it requires a shell to redirect output to tee
[00:50:35] *** Quits: jgrim66 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Read error: Connection reset by peer)
[00:50:53] *** Joins: jgrim66 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[00:51:07] *** Quits: ss4 (~wootehfoo@user/wootehfoot) (Read error: Connection reset by peer)
[00:52:46] <[twisti]> kittonian: docker inspect --format='{{.LogPath}}' yourcontainername
[00:52:53] <[twisti]> will return the log file location
[00:53:46] <kittonian> yes, i know
[00:54:02] <kittonian> that location changes every time the container is brought down and then back up
[00:54:44] <[twisti]> update a symlink to point at the new location after bringing the container up maybe ?
[00:55:23] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[00:55:31] <kittonian> i need something automated, not manual
[00:55:39] <[twisti]> so automate it
[00:55:41] *** Joins: noarb (~noarb@user/noarb)
[00:55:43] <kittonian> especially for the httpd container which gets restarted all the time
[00:55:50] <[twisti]> though i agree that its hacky at best
[00:55:57] <kittonian> hacky is putting it lightly, lol
[00:58:02] <ikke> command: 'sh -c "httpd ... | tee -a path/to/logfile"'
[00:58:43] <kittonian> ikke, thank you, but again, i need this to be automatic from the docker-compose file
[00:58:43] *** Quits: INeedAHandle (~INeedAHan@121.155.99.135) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[00:58:56] <ikke> you can specify a command in the docker-compose file
[00:59:25] <ikke> https://docs.docker.com/compose/compose-file/compose-file-v3/#command
[01:02:37] <[twisti]> are you using the apache docker image ? iirc, it maps error.log and access.log to /dev/std*, which is why they go to docker-compose, but i would think you could volume mount host files to those locations instead
[01:02:51] *** Quits: noarb (~noarb@user/noarb) (Quit: ZNC 1.8.2 - https://znc.in)
[01:02:54] *** Parts: Termux (puracan@user/termux) (FREAKSHELLS - https://www.freakshells.net)
[01:03:58] *** Joins: lilgopher (~textual@2601:241:8000:38f0:a964:7ef1:3a96:2c25)
[01:04:00] <kittonian> I have my own Dockerfile but it is using httpd:2.4 as a starting point
[01:04:08] <kittonian> and a simple volume mount would be beautiful
[01:05:08] <kittonian> all of the logs for each vhost are already separated, but when you look at docker-compose logs apache, it shows me everything for everything vhost and that's what I need fail2ban to point to
[01:08:39] <[twisti]> then try the volume mount and see if that works
[01:10:18] <kittonian> great, how would I do that if it's logging to /dev/std
[01:10:28] <kittonian> and I still need to be able to do a docker-compose logs apache
[01:14:30] *** Quits: luva (~luva@146.70.62.238) (Ping timeout: 260 seconds)
[01:15:23] <[twisti]> its not logging to /dev/stdout, its logging to /var/log/apache/access.log (or whatever), and thats symlinked to /dev/stdout. you could just `-v ./yourlogfile.log:/var/log/apache/access.log` (or whatever)
[01:15:35] <[twisti]> but yeah, that will make it not go to docker-compose logs anymore
[01:15:56] <[twisti]> youll have to go with ikkes solution then
[01:16:13] <[twisti]> if you want to actually log to two different places, then youll need to ... well, actually log to two different places
[01:16:43] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Ping timeout: 268 seconds)
[01:16:44] <kittonian> i looked inside the container earlier today and there is no /var/log/apache
[01:16:53] <kittonian> there is nothing of note in /var/log
[01:18:37] *** Joins: noarb (~noarb@user/noarb)
[01:18:58] <[twisti]> odd
[01:19:12] <[twisti]> maybe they changed it then, apache can have its logging configured through its settings
[01:19:33] <kittonian> i know
[01:19:36] <kittonian> in teh httpd.conf
[01:19:38] <kittonian> *the
[01:19:39] <[twisti]> thats actually probably the cleanest solution
[01:19:46] <kittonian> but as I said, you do that per virtualhost
[01:19:55] <kittonian> and that is already in place
[01:20:07] <[twisti]> theres no way to define global logging in apache ?
[01:20:11] <kittonian> docker-compose logs apache seems to give me everything going on with that container and that's a perfect solution for fail2ban
[01:20:24] <kittonian> global logging for what? it logs per virtualhost
[01:20:37] <kittonian> so, you can not log per virtualhost and have everything in a single log file
[01:20:40] <kittonian> but that would be crazy
[01:20:46] <[twisti]> how come ?
[01:20:53] <[twisti]> and isnt that what you actually want ?
[01:21:14] <kittonian> seriously? tons of domains with log file analzyers like awstats reading the log files for each domain, countly analytics, etc.
[01:21:22] <kittonian> you would never log everything to a single file
[01:21:31] <ikke> kittonian: what docker-compose logs (docker logs) shows is what the root process writes to stdout
[01:21:36] <kittonian> that's why virtualhost log declarations have existed forever
[01:21:51] <kittonian> ikke, yes, and that is what I am trying to get to a file
[01:21:58] <ikke> I told you how
[01:22:02] <kittonian> you did
[01:22:10] <[twisti]> im lost now
[01:22:14] <kittonian> i'm just not sure I'm understanding how to specifically implement your solution
[01:22:35] <[twisti]> so its incredibly insane and unreasonable to log everything to one file, so you came here looking for a solution to ... log everything ... to one file
[01:22:36] <kittonian> ikke, i read the link you posted
[01:22:57] <ikke> kittonian: when running a container, you specify a command to run
[01:22:59] <[twisti]> also, im nearly certain that per default, all traffic, no matter what vhost, goes to access.log
[01:23:05] <kittonian> [twisti], no, it's incredibly insane and unreasonable to log everything to a single file AND not have individual logs per domain
[01:23:16] <ikke> instead of running http directly, use use a shell to run it and pipe the output to tee
[01:23:33] <[twisti]> im not telling you not to have individual logs, you do you
[01:24:24] <kittonian> [twisti], if you know of a way to access log files that log everything apache is doing, while still having the individual log files for each virtualhost, i'm all ears
[01:24:28] <ikke> kittonian: https://stackoverflow.com/questions/42483974/how-to-redirect-apache-logs-to-both-stdout-and-apache-log-file
[01:24:46] <ikke> You can even let apache use tee
[01:24:51] <kittonian> but what is being output via docker-compose logs right now is erased every time the container is restarted
[01:26:02] <[twisti]> that looks like a great solution ikke
[01:26:06] <kittonian> that's not bad
[01:26:31] <kittonian> i would add a custom log line for every vhost to write to the same file and then rotate those logs so they don't grow too large
[01:26:45] <kittonian> and then I can setup a fail2ban jail using that single log file
[01:27:02] <kittonian> very interesting and creative solution
[01:27:04] *** Joins: INeedAHandle (~INeedAHan@39.124.72.106)
[01:27:39] <[twisti]> hope you get it working, im off to bed
[01:27:44] <kittonian> thanks!
[01:31:23] *** Quits: lilgopher (~textual@2601:241:8000:38f0:a964:7ef1:3a96:2c25) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:39:34] *** Quits: lithium (~lithium@user/lithium) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:41:56] *** Joins: DoofusCanadensis (~DoofusCan@207.229.38.10)
[01:44:50] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 260 seconds)
[01:47:22] <kittonian> you're not going to believe this, but all of that was for nothing
[01:47:28] <kittonian> turns out, fail2ban can accept wildcards
[01:47:44] <kittonian> so i can have it monitor the entire directory of individual log files
[01:47:53] *** Parts: bytestream (~bytestrea@user/bytestream) (Leaving)
[01:48:06] <kittonian> but, that's ok, we all learned something which is always cool, and I greatly appreciate the time and effort 
[01:48:16] *** Joins: luva (~luva@45.141.152.52)
[01:48:31] <kittonian> so, thank you and i'm sure we'll talk again soon :)
[01:48:36] *** Quits: kittonian (~kittonian@cpe-70-114-148-180.austin.res.rr.com) (Quit: Leaving)
[01:50:16] *** Quits: goldfish (~goldfish@user/goldfish) (Remote host closed the connection)
[01:50:38] *** Quits: TomTom (uid45892@id-45892.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[01:56:11] *** Quits: ryanrambharose (~ryanrambh@132.145.99.124) (Ping timeout: 268 seconds)
[01:56:49] <statusbot> Status update: Docker Hub is currently experiencing an outage with our email provider.  Email verification and other email communications from Docker Hub may be delayed or undelivered during this outage. -- https://status.docker.com/pages/incident/533c6539221ae15e3f000031/6181bb27e91909053f83f892
[02:09:08] *** Joins: realies7 (~realies@user/realies)
[02:09:36] *** Joins: emerent_ (~quassel@p200300cd574855c4ba27ebfffed28a59.dip0.t-ipconnect.de)
[02:09:36] *** emerent is now known as Guest376
[02:09:36] *** emerent_ is now known as emerent
[02:09:58] *** Quits: Guest376 (~quassel@p200300cd574855f2ba27ebfffed28a59.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[02:10:45] *** Quits: realies (~realies@user/realies) (Read error: Connection reset by peer)
[02:10:45] *** realies7 is now known as realies
[02:20:51] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 268 seconds)
[02:23:01] *** Joins: SomeWeirdAnon (~shwn@2a02:8109:abf:ffb4:4132:d00a:bdd6:9501)
[02:30:03] *** Quits: Sven_vB (~sven@user/sven-vb/x-2094958) (Remote host closed the connection)
[02:30:40] *** Joins: Sven_vB (~sven@user/sven-vb/x-2094958)
[02:35:43] *** Quits: ses (uid38151@id-38151.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[02:38:57] <statusbot> Status update: The email provider has a fix in place and it is being monitored. -- https://status.docker.com/pages/incident/533c6539221ae15e3f000031/6181bb27e91909053f83f892
[02:44:34] *** Quits: denningsrogue (~denningsr@206.214.235.175) (Ping timeout: 260 seconds)
[02:48:36] *** Quits: luva (~luva@45.141.152.52) (Ping timeout: 268 seconds)
[02:50:32] *** Quits: AnselmoCampanas (~AnselmoCa@190.99.69.41) (Ping timeout: 256 seconds)
[02:53:19] <statusbot> Status update: Docker Hub email communications have been restored. We will continue to monitor while the provider has the incident active. -- https://status.docker.com/pages/incident/533c6539221ae15e3f000031/6181bb27e91909053f83f892
[02:56:26] *** Joins: vidbina (~vid@dynamic-078-054-030-075.78.54.pool.telefonica.de)
[02:59:51] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[03:09:17] *** Quits: DoofusCanadensis (~DoofusCan@207.229.38.10) (Quit: So as you can see from this flowchSQUIRREL!!)
[03:38:08] *** Leonarbro_ is now known as Leonarbro
[03:51:46] *** Joins: AnselmoCampanas (~AnselmoCa@190.99.69.41)
[03:58:49] *** Quits: SomeWeirdAnon (~shwn@2a02:8109:abf:ffb4:4132:d00a:bdd6:9501) ()
[04:01:37] *** Joins: denningsrogue (~denningsr@206.214.235.175)
[04:04:27] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 268 seconds)
[04:05:41] *** Joins: denningsrogue7 (~denningsr@206.214.235.175)
[04:06:55] *** Quits: denningsrogue (~denningsr@206.214.235.175) (Ping timeout: 268 seconds)
[04:06:56] *** denningsrogue7 is now known as denningsrogue
[04:11:25] *** Joins: noarb (~noarb@user/noarb)
[04:16:32] *** Quits: INeedAHandle (~INeedAHan@39.124.72.106) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[04:28:00] *** Quits: AnselmoCampanas (~AnselmoCa@190.99.69.41) (Ping timeout: 256 seconds)
[04:32:04] *** Quits: Null_A (~null_a@2601:645:8700:2290:91de:cb47:8eef:9a3e) (Remote host closed the connection)
[04:32:50] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 260 seconds)
[04:35:28] *** Joins: Null_A (~null_a@2601:645:8700:2290:91de:cb47:8eef:9a3e)
[04:38:47] *** Joins: keypusher (keypusher@user/keypusher)
[04:49:28] *** Quits: vidbina (~vid@dynamic-078-054-030-075.78.54.pool.telefonica.de) (Ping timeout: 268 seconds)
[04:52:19] *** Joins: jarthur_ (~jarthur@2603-8080-1540-002d-d06a-c06b-a13c-ec3f.res6.spectrum.com)
[04:54:42] *** Quits: jarthur (~jarthur@2603-8080-1540-002d-d4d1-6d9f-a6fc-1fe3.res6.spectrum.com) (Ping timeout: 260 seconds)
[04:55:36] *** Quits: Sven_vB (~sven@user/sven-vb/x-2094958) (Ping timeout: 276 seconds)
[05:00:18] *** Joins: INeedAHandle (~INeedAHan@39.124.72.106)
[05:04:14] *** Joins: goldfish (~goldfish@user/goldfish)
[05:08:28] *** Quits: jstoker (~jstoker@user/jstoker) (Remote host closed the connection)
[05:11:42] *** Joins: jstoker (~jstoker@user/jstoker)
[05:16:02] *** Joins: The_Jag_ (~The_Jag@host-79-52-47-230.retail.telecomitalia.it)
[05:16:52] *** Quits: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com) (Read error: Connection reset by peer)
[05:17:12] *** Joins: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com)
[05:18:58] *** Quits: The_Jag (~The_Jag@host-79-52-47-230.retail.telecomitalia.it) (Ping timeout: 260 seconds)
[05:20:04] *** Joins: noarb- (~noarb@user/noarb)
[05:20:55] *** Quits: noarb (~noarb@user/noarb) (Ping timeout: 268 seconds)
[05:25:06] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 260 seconds)
[05:29:22] *** jarthur_ is now known as jarthur
[05:30:30] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:35:09] *** Joins: vlm (~vlm@user/vlm)
[05:37:54] *** Joins: lenswipe (~lenswipe@pool-173-48-154-44.bstnma.fios.verizon.net)
[05:37:56] <lenswipe> hey folks
[05:37:57] <lenswipe> quick question
[05:38:33] <lenswipe> Does docker magically sync volumes between docker swarm nodes?
[05:38:41] <lenswipe> if I don't use any kind of NFS backing storatge
[05:48:25] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:48:34] <statusbot> Status update: Email communications on Docker Hub have been restored and stable. -- https://status.docker.com/pages/incident/533c6539221ae15e3f000031/6181bb27e91909053f83f892
[05:49:04] <tabakhase> lenswipe nope
[05:50:25] <tabakhase> i think gluster is fairly widely used, no clue tho, best to have a look at volume-plugins and your needs...
[05:50:30] <lenswipe> damn
[05:58:02] <pycurious> how do i move all the storage of docker files from / to /opt? 
[05:58:12] <pycurious> on ubuntu 20.04 please
[05:58:20] <pycurious> I've a very small "/" and that is the issue
[05:58:34] *** Quits: Null_A (~null_a@2601:645:8700:2290:91de:cb47:8eef:9a3e) (Remote host closed the connection)
[06:03:25] <tabakhase> pycurious stop docker,
[06:03:35] <tabakhase> move things, set "datadir" in daemon.json
[06:04:00] <tabakhase> (guess its called "data-root" as config-key)
[06:06:56] <lenswipe> tabakhase, i currently have some bind mounts setup in docker - I'm trying to migrate everything to a new docker host so that I can upgrade the current one to a 64 bit OS. 
[06:07:14] <lenswipe> my current plan is to create new (non bind mount) volumes so that docker creates the proper directories
[06:07:28] <lenswipe> then copy the contents of my bind mounts to /var/lib/docker/volumes/<volume>
[06:07:43] <tabakhase> dont :P - use "docker cp"
[06:07:59] <lenswipe> wait what
[06:08:12] <lenswipe> I've already done one volume, I've kicked another one off
[06:08:19] <tabakhase> the raw "/var/lib/docker" is a nogo area :P
[06:08:20] <lenswipe> should I kill the one I've kicked off and re-do it with docker cp?
[06:08:26] <lenswipe> ohhh...oopsie
[06:08:45] <tabakhase> youre technically mangling with an unassembled onionFS
[06:10:43] <tabakhase> redo, maybe not... in a lot of cases it may be just fine (adding files) but on edits/removes i think it goes ham, dont quote me on that tho, point remains docker has tooling, so this shall be used - be it just "docker cp" or creating helper containers to fill em if more work is needed
[06:11:41] <tabakhase> (cause you need a container, cant interact with volumes directly.... so if say a mysql datadir, starting the "real sql" would kick of the init, so youd make a container with a volume, cp in data, kill that container, and then reuse that volume on the db
[06:12:34] *** Joins: duban (uid517682@id-517682.uxbridge.irccloud.com)
[06:14:44] <lenswipe> aj
[06:15:21] <lenswipe> tabakhase, so I tried to do a docker cp
[06:15:31] <lenswipe> ~/docker/unifi/config $ docker cp . unifi.1.drkuzh4owka4butp3kyzurtzr:/config 
[06:16:04] <lenswipe> it failed at first, missed writing blah blah blah
[06:16:06] <queue[m]> thats to a volume?
[06:16:16] <lenswipe> I just re-ran that with sudo (since /var/lib/docker is root only)
[06:16:20] <lenswipe> it...didn't explode
[06:16:25] <lenswipe> queue[m], /config is a mounted volume
[06:16:28] <queue[m]> is that to a volume?
[06:16:29] <queue[m]> yes or no
[06:17:00] <lenswipe> what is the "that" we're talking about here?  unifi.1.drkuzh4owka4butp3kyzurtz is a container
[06:17:07] <lenswipe>   /config points to a mounted docker volume
[06:17:16] <queue[m]> ok
[06:17:23] <queue[m]> thats waht i wanted to know, so to copy to the volume
[06:17:24] <queue[m]> do this:
[06:18:04] <queue[m]> https://www.toptal.com/developers/hastebin/ofofederuc.bash
[06:18:17] <queue[m]> thats docker-volume.sh
[06:18:27] <queue[m]> you can use this to copy contents to a volume
[06:18:30] <queue[m]> this is the easiest way
[06:18:54] *** Joins: The_Jag (~The_Jag@host-79-33-167-46.retail.telecomitalia.it)
[06:19:13] <lenswipe> so it creates a container, mounts the volume, copies the contents to the temp container then bins the container?
[06:19:18] *** Joins: Zelec95644 (~Zelec@user/zelec)
[06:19:45] <queue[m]> you an docker-compose down ; docker-volume unifi.1.blahblahetcetc ./supiwannauploadthisvolume/hi ; docker-compose up -d
[06:19:59] <queue[m]> or even more suiting
[06:20:31] <queue[m]> docker-compose down ; docker volume rm unifi[tab] ; docker-volume unifi.1.blahblahetcetc ./supiwannauploadthisvolume/hi ; docker-compose up -d
[06:20:32] <queue[m]> there ya go
[06:21:00] <lenswipe> queue[m], i mean, im not using docker compose, but yeah
[06:21:12] <queue[m]> same idea 
[06:21:21] *** Quits: Zelec9564 (~Zelec@user/zelec) (Ping timeout: 268 seconds)
[06:21:21] <queue[m]> you make life more difficult without compose tbh
[06:21:22] *** Zelec95644 is now known as Zelec9564
[06:21:27] <lenswipe> queue[m], im using swarm
[06:21:36] <queue[m]> .yml's are easier, you can translate anything to .yml from docker build/docker run
[06:21:45] <lenswipe> see above
[06:21:47] <tabakhase> noe that that script needs some work.. some quotes specifically :P
[06:21:48] <queue[m]> plus you get the availability to run stacks of docker containers
[06:21:50] <queue[m]> oh ok, lol
[06:21:51] <queue[m]> i see
[06:21:58] *** Quits: The_Jag_ (~The_Jag@host-79-52-47-230.retail.telecomitalia.it) (Ping timeout: 268 seconds)
[06:22:12] <lenswipe> at some point, im migrating to k8s
[06:22:13] <lenswipe> but not this point
[06:22:16] <queue[m]> feel free to improve on it
[06:22:19] <queue[m]> but that script works
[06:22:20] <queue[m]> :D
[06:23:08] <queue[m]> personally i think docker should make it easier on us to copy informatin to a volume
[06:24:03] <tabakhase> this sidestep over containers is stupid no question^^
[06:28:26] <queue[m]> i just dont get why its not already there when its so easily implemented with a bash script, this script has been available for the past year that i know of as a resolution to volumes and their irritability
[06:28:52] <queue[m]> since volumes are "safer" you would think this would have been automatic lol
[06:29:11] <queue[m]> but nah you have to global sbin the docker-volume file and run the cmds yourself
[06:29:59] <lenswipe> okay
[06:30:08] <lenswipe> so I've got all my stuff migrated over to regular docker volumes
[06:30:14] <lenswipe> now I need to move the volumes between hosts
[06:30:23] <lenswipe> suggestions?
[06:30:32] <queue[m]> the volumes are stored in like
[06:30:34] <lenswipe> I was going to just SCP /var/lib/docker, but...if that's a taboo...
[06:30:38] <queue[m]> /var/lib/docker/blahblahblah
[06:30:52] <lenswipe> yes they are, but according to tabakhase that's no touchy.
[06:31:18] <queue[m]> idk why not, thats how id grab temp information out of a volume
[06:32:02] <queue[m]> at a security standpoint i could see why some of those files could be malicious after having them there but i also wouldnt go against tabak's information, hes smart when it comes to containers and vm's
[06:33:02] <lenswipe> i mean i doub't they'd be malicious - or at least not any more so for being migrated between hosts
[06:33:04] <lenswipe> but yes
[06:33:14] <queue[m]> your information is sitting there tho
[06:33:16] <queue[m]> in each volume
[06:33:16] <queue[m]> lol
[06:33:19] <queue[m]> in /var/lib/docker
[06:33:40] <queue[m]> you can easily copy that info, its not 'no touchy' not sure why it would be id have to hear more on this
[06:34:03] <queue[m]> you can chown and chmod the information and its np
[06:35:01] <tabakhase> lenswipe when you move "the whole thing" thats pretty fine too
[06:35:27] <tabakhase> thats just about fingering around in individual layers ;-)
[06:35:52] <lenswipe> queue[m], so what? I'm moving it from a host I control to a host I control (it's literally sat on my desk in front of me). It's going over my home network that I also control and I'm using SCP. What's the attack surface here?
[06:36:10] <lenswipe> tabakhase, ah okay, so just SCP the entirety of /var/lib/docker/volumes?
[06:36:16] <queue[m]> containering
[06:36:24] <lenswipe> wut
[06:36:25] <queue[m]> involving the reason of sandbox escapes
[06:36:44] <queue[m]> things put in a container and secluded to docker's framework
[06:36:45] <lenswipe> but what does this have to do with copying data between docker hosts?
[06:36:58] <queue[m]> oh just as tabak said
[06:37:11] <queue[m]> nothing more nothing less
[06:37:24] <lenswipe> so...nothing then.
[06:37:42] <queue[m]> he said you can copy the entier thing, its up to you man
[06:37:51] <queue[m]> you've always had that availabiility
[06:38:05] <queue[m]> but things set in docker volumes are usually in docker volumes for a reason
[06:38:08] <queue[m]> thats all hes saying
[06:38:14] <lenswipe> right and I'm asking you what sandbox escapes and "your information sitting in /var/lib/docker" has to do with any of this
[06:38:21] <queue[m]> i think his reasoning is whats teh point of using a volume in the first place
[06:38:27] <queue[m]> tbqh
[06:38:48] <queue[m]> oh thats just escaping docker containers bro
[06:38:53] <queue[m]> you're always susceptible to that
[06:38:59] <lenswipe> Yes I know.
[06:39:00] <queue[m]> as anyone on any virtualization software is
[06:39:17] <lenswipe> but you brought it up.
[06:39:19] <lenswipe> ...I can smell burnt toast, does anyone else smell burnt toast
[06:39:21] <lenswipe> ?
[06:39:27] <queue[m]> nothing in depth here as i dont wanna blog out the millions of stages of cloud computing and why containers/vm's are generally a worse idea than actual hardware
[06:39:40] <lenswipe> whatever
[06:39:42] <queue[m]> i can smell the wood burning, are you thinking again?
[06:39:49] <tabakhase> lenswipe if youre migrating a whole host, id pick the entire /var/lib/docker - wouldnt mess with sorting out things, or if i do, id export volumes as needed (as you kinda should have for backups anyhow do you ;P)
[06:40:10] <lenswipe> tabakhase, I'm migrating an entire host
[06:40:11] <queue[m]> yea since you're mr k8s
[06:40:16] <queue[m]> you'd obv have backups right
[06:40:35] <queue[m]> or do you just docker swarm
[06:40:36] <queue[m]> and no kubes
[06:41:12] <queue[m]> included kubes if you can afford the 3 extra nodes while setting up an HA cluster
[06:41:14] <queue[m]> just an idea
[06:41:27] <queue[m]> to automate these things you are looking for
[06:42:02] <tabakhase> guess with this also goes the note that this obvs only works with the default-volume-driver - and even then not 1000% as there is a way to have a "bindmounted-volume" with some hackery (yes, i do not mean a bind-mount)
[06:42:42] <tabakhase> what kinda underlines the "use docker tooling only" idea - "docker cp" will end up in the right place at all times*
[06:42:51] <queue[m]> 100% but docker volume is better than the bind-mount
[06:43:14] <queue[m]> the API
[06:43:26] <tabakhase> better is such a harsh word ;-) they are different.... - sure there is some overlap, but they also excell on different points :P
[06:43:34] *** Quits: denningsrogue (~denningsr@206.214.235.175) (Ping timeout: 268 seconds)
[06:44:09] <queue[m]> im not sure if its not better, i guess it all depends on the attack vector honestly
[06:44:25] <queue[m]> if someone has docker fully rekt or if someone has the OS you're running your server on fully rekt
[06:44:47] <queue[m]> the best we can do is close the door when we poop
[06:45:01] <queue[m]> and turn the vent on
[06:54:47] <lenswipe> tabakhase, the permissions are a bit weird. is everything in /var/lib/docker just owned by root:root ?
[06:54:57] <lenswipe> err.... /var/lib/docker/volumes that is
[06:55:39] <lenswipe> ...y'know what, nevermind - i just had an idea
[06:57:52] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[06:58:12] *** Joins: denningsrogue (~denningsr@206.214.235.175)
[07:23:30] *** Quits: monoxane (~monoxane@162.43.233.220.static.exetel.com.au) (Read error: Connection reset by peer)
[07:24:19] *** Joins: monoxane (~monoxane@162.43.233.220.static.exetel.com.au)
[07:26:43] *** Quits: monoxane (~monoxane@162.43.233.220.static.exetel.com.au) (Changing host)
[07:26:44] *** Joins: monoxane (~monoxane@user/monoxane)
[07:30:02] *** Quits: emerent (~quassel@p200300cd574855c4ba27ebfffed28a59.dip0.t-ipconnect.de) (Remote host closed the connection)
[07:31:16] *** Joins: emerent (~quassel@p200300cd574855c4ba27ebfffed28a59.dip0.t-ipconnect.de)
[07:39:32] *** Joins: denningsrogue4 (~denningsr@206.214.235.175)
[07:39:54] *** Quits: denningsrogue (~denningsr@206.214.235.175) (Ping timeout: 260 seconds)
[07:39:54] *** denningsrogue4 is now known as denningsrogue
[07:44:34] *** Quits: denningsrogue (~denningsr@206.214.235.175) (Ping timeout: 260 seconds)
[07:45:51] *** Quits: pycurious (~Adium@user/pycurious) (Quit: Leaving.)
[07:46:14] *** Joins: pycurious (~Adium@user/pycurious)
[07:50:38] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 260 seconds)
[07:59:30] *** Quits: Zelec9564 (~Zelec@user/zelec) (Ping timeout: 260 seconds)
[08:00:51] *** Quits: lenswipe (~lenswipe@pool-173-48-154-44.bstnma.fios.verizon.net) (Quit: Leaving)
[08:02:57] *** Joins: Zelec9564 (~Zelec@user/zelec)
[08:07:38] *** Joins: CodeSpelunker (~CodeSpelu@user/codespelunker)
[08:13:22] *** Joins: pycurious (~Adium@user/pycurious)
[08:14:58] *** Quits: CodeSpelunker (~CodeSpelu@user/codespelunker) (Quit: CodeSpelunker)
[08:18:16] *** Joins: i64 (i64@gateway/vpn/protonvpn/i64)
[08:18:38] *** Joins: versa_gone (~versageek@32.215.132.28)
[08:19:26] *** Quits: arash (arash@thinks.life.is-a.beauty) (Quit: fBNC - https://bnc4free.com)
[08:21:05] *** Quits: versageek (~versageek@wikimedia/Versageek) (Ping timeout: 268 seconds)
[08:21:40] *** Joins: arash (arash@thinks.life.is-a.beauty)
[08:24:47] *** Joins: denningsrogue (~denningsr@206.214.235.175)
[08:29:02] *** Joins: denningsrogue1 (~denningsr@206.214.235.175)
[08:29:37] *** Quits: denningsrogue (~denningsr@206.214.235.175) (Ping timeout: 268 seconds)
[08:29:37] *** denningsrogue1 is now known as denningsrogue
[08:46:24] *** Quits: zamba (~marius@5.226.162.54) (Ping timeout: 260 seconds)
[08:46:25] *** Quits: duban (uid517682@id-517682.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[09:04:50] *** Quits: A17 (~deejayh@71-36-110-208.ptld.qwest.net) (Ping timeout: 260 seconds)
[09:05:00] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[09:07:09] <imp> How can I copy a directory (including the directory itself to a docker image  while building it?  I tried  COPY [ "dir/", "." ] , also tried ADD [ "dir/", "."] but in bock cases it copy the **contents** of dir/ instead the dir itself.
[09:08:21] <GyrosGeier> COPY [ "dir", "dir" ]
[09:08:41] <imp> GyrosGeier: no / in both?
[09:08:41] <GyrosGeier> might also work with COPY [ "dir", "./" ]
[09:08:58] <GyrosGeier> trailing slash is only relevant in rsync
[09:09:08] <GyrosGeier> pretty much no one else case
[09:09:10] <imp> It will respect the WORKDIR previously executed correct?
[09:09:45] <GyrosGeier> yes, these are all relative unless made absolute
[09:10:06] <imp> GyrosGeier: it means, adding a "/" in front of path.
[09:10:21] <imp> Lets try again ;-)
[09:10:25] <GyrosGeier> exactly, that would make the paths absolute
[09:10:37] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[09:11:20] <imp> I'm having a problem, that node.js / yarn correctly runs in host machine. but fails in docker image. The environment is exactly the same. I even tried to mount a volume to garantee that.
[09:11:44] <imp> GyrosGeier: YAY! paths correctly copied. thanks
[09:12:59] <imp> I have user ADD instead COPY. Are both equivalent?
[09:19:00] *** Quits: i64 (i64@gateway/vpn/protonvpn/i64) (Remote host closed the connection)
[09:23:59] <tabakhase> imp add/copy in a lot of cases yes, but not always, see the docs for details (but for generic add local bunch of files its the same9
[09:24:37] <tabakhase> imp for node, define "fails" ;-) without an error or what you are trying expectingVSgetting there isnt much to help with :P
[09:41:46] *** Quits: yjftsjthsd3 (~yjftsjths@162.127.123.34.bc.googleusercontent.com) (Ping timeout: 245 seconds)
[09:48:12] <imp> tabakhase: thanks. I will take a look. For sure.
[09:55:44] *** Joins: onizu (uid373383@id-373383.uxbridge.irccloud.com)
[10:10:46] *** Quits: The_Jag (~The_Jag@host-79-33-167-46.retail.telecomitalia.it) (Quit: The_Jag)
[10:26:20] *** Joins: A17 (~deejayh@71-36-110-208.ptld.qwest.net)
[10:42:29] *** Joins: Tas-sos (~Tas-sos@ppp005054072206.access.hol.gr)
[10:49:06] *** Joins: TomTom (uid45892@id-45892.ilkley.irccloud.com)
[10:52:13] *** Joins: sebastianos (~sebastian@user/sebastianos)
[11:03:35] *** Joins: wasd (~wasd@user/axis)
[11:08:04] *** Joins: bouncy (~ben@user/benoit)
[11:10:35] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 268 seconds)
[11:20:18] *** Joins: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch)
[11:20:32] *** Quits: mickey8 (~user@user/mickey) (Remote host closed the connection)
[11:20:55] *** Joins: mickey8 (~user@user/mickey)
[11:24:32] *** Joins: Armanzor (~Armanzor@user/armanzor)
[11:26:56] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[11:38:05] *** Joins: nattiestnate (~nate@2001:448a:20a0:4134:25e:715f:d637:5263)
[11:45:23] *** Quits: Bardon (~Bardon@user/Bardon) (Ping timeout: 264 seconds)
[11:56:30] *** Joins: ac5tin (~ac5tin@user/ac5tin)
[12:00:11] *** Quits: rpthms (~rpthms@user/rpthms) (Read error: Connection reset by peer)
[12:05:34] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[12:06:45] *** Joins: rpthms (~rpthms@user/rpthms)
[12:07:18] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Ping timeout: 260 seconds)
[12:08:31] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[12:10:40] *** Joins: monoxane0 (~monoxane@user/monoxane)
[12:12:52] *** Quits: monoxane (~monoxane@user/monoxane) (Ping timeout: 268 seconds)
[12:12:52] *** monoxane0 is now known as monoxane
[12:13:55] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Remote host closed the connection)
[12:15:27] *** Joins: mei (~mei@user/mei)
[12:17:00] *** Quits: imp (~imp@192-141-191-227.alternativaip.net.br) (Quit: imp)
[12:17:08] *** Joins: ExeciN (~ExeciN@user/nicexe)
[12:17:39] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[12:19:22] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[12:24:34] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 260 seconds)
[12:28:52] *** Joins: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it)
[12:28:53] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 268 seconds)
[12:35:35] *** Quits: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:40:26] *** Quits: ExeciN (~ExeciN@user/nicexe) (Ping timeout: 256 seconds)
[12:41:21] *** Joins: pycurious (~Adium@user/pycurious)
[12:46:02] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 260 seconds)
[12:48:00] *** Quits: sebastianos (~sebastian@user/sebastianos) (Ping timeout: 268 seconds)
[12:48:56] *** Joins: sebastianos (~sebastian@user/sebastianos)
[12:53:33] *** Quits: Tas-sos (~Tas-sos@ppp005054072206.access.hol.gr) (Ping timeout: 268 seconds)
[12:54:20] *** Joins: Tas-sos (~Tas-sos@78-45-241.adsl.cyta.gr)
[12:56:20] *** Quits: mickey8 (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[12:56:36] *** Joins: mickey8 (~user@user/mickey)
[12:58:25] *** Joins: Piraty (~irc@user/piraty)
[13:02:48] *** Quits: mei (~mei@user/mei) (Ping timeout: 268 seconds)
[13:03:12] <Piraty> when using docker-compose, i declare services in separate compose-files which share a network. how is dns resolution accomplished then if i resolve a container of one compose file from another compose file's container? 
[13:04:56] *** Joins: pycurious (~Adium@user/pycurious)
[13:05:37] <BtbN> The exact same way
[13:06:00] <BtbN> compose files are just a fancy way to invoke docker
[13:21:29] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[13:33:38] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 268 seconds)
[13:41:03] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 268 seconds)
[13:45:46] *** Quits: noarb- (~noarb@user/noarb) (Ping timeout: 260 seconds)
[13:46:10] *** Joins: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl)
[13:47:12] *** Joins: noarb (~noarb@user/noarb)
[13:47:46] *** Quits: imp (~imp@192-141-191-227.alternativaip.net.br) (Remote host closed the connection)
[13:52:13] *** Quits: n9nes (~n9nes@user/n9nes) (Quit: ZNC 1.8.2 - https://znc.in)
[13:53:42] *** Joins: n9nes (~n9nes@user/n9nes)
[13:58:22] *** Quits: bouncy (~ben@user/benoit) (Ping timeout: 260 seconds)
[14:00:14] *** Quits: Czernobog (~Czernobog@user/czernobog) (Ping timeout: 260 seconds)
[14:00:19] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[14:06:02] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[14:06:19] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Ping timeout: 268 seconds)
[14:07:57] *** Joins: leitz (~LeamHall@cpe-173-172-58-72.tx.res.rr.com)
[14:08:47] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 268 seconds)
[14:14:17] *** Joins: imp (~imp@192-141-191-227.alternativaip.net.br)
[14:17:14] *** Joins: vidbina (~vid@2a02:3032:3:b94b:a3ed:b68f:aaa4:2966)
[14:18:30] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Ping timeout: 260 seconds)
[14:20:33] *** Quits: n9nes (~n9nes@user/n9nes) (Quit: ZNC 1.8.2 - https://znc.in)
[14:21:31] *** Joins: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl)
[14:22:07] *** Joins: n9nes (~n9nes@user/n9nes)
[14:22:53] *** Joins: pycurious (~Adium@user/pycurious)
[14:26:50] *** Quits: vidbina (~vid@2a02:3032:3:b94b:a3ed:b68f:aaa4:2966) (Ping timeout: 260 seconds)
[14:28:18] *** Joins: incognito (~relativit@user/incognito)
[14:32:02] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 260 seconds)
[14:32:52] *** Quits: terrorjack (~terrorjac@static.3.200.12.49.clients.your-server.de) (Quit: The Lounge - https://thelounge.chat)
[14:34:13] *** Joins: i64 (i64@gateway/vpn/protonvpn/i64)
[14:34:22] *** Joins: terrorjack (~terrorjac@2a01:4f8:1c1e:509a::1)
[14:36:35] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[14:37:01] *** Joins: pycurious (~Adium@user/pycurious)
[14:38:22] *** Joins: c2main (~quassel@user/c2main)
[14:41:46] *** Quits: pycurious (~Adium@user/pycurious) (Ping timeout: 260 seconds)
[14:41:57] *** Joins: Czernobog (~Czernobog@user/czernobog)
[14:42:45] *** Joins: pycurious (~Adium@user/pycurious)
[14:50:43] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Ping timeout: 268 seconds)
[14:55:25] *** Quits: cebor (~cebor@user/cebor) (Quit: bye!)
[14:55:58] *** Joins: cebor (~cebor@user/cebor)
[14:56:11] *** Quits: cebor (~cebor@user/cebor) (Remote host closed the connection)
[14:57:16] *** Joins: cebor (~cebor@user/cebor)
[15:00:16] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[15:00:39] *** Joins: dmalteseknight (~dmaltesek@user/dmalteseknight)
[15:04:14] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 260 seconds)
[15:05:25] *** Joins: bouncy (~ben@user/benoit)
[15:07:20] *** Joins: mei (~mei@user/mei)
[15:08:21] *** Quits: incognito (~relativit@user/incognito) (Quit: Going offline, see ya! (www.adiirc.com))
[15:13:44] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Quit: Good Bye! My bouncer has probably crashed or lost connection to the internet...)
[15:17:12] <c2main> I'm starting some services with "docker-compose --scale ...". The scale is for 2 services working together: dbreplica and dbmonitor for this replica. I need to set configuration of dbmonitor with cojnnect string to the dbreplica. How can I get the docker container name generated for the dbreplica "in" the dbmonitor ?
[15:18:00] <c2main> how if there  are common way to achieve similar needs.... ?
[15:28:02] *** Quits: monoxane (~monoxane@user/monoxane) (Ping timeout: 260 seconds)
[15:34:40] *** Joins: keypusher (~keypusher@user/keypusher)
[15:35:44] *** Quits: i64 (i64@gateway/vpn/protonvpn/i64) (Ping timeout: 268 seconds)
[15:36:57] *** Joins: ses (uid38151@id-38151.hampstead.irccloud.com)
[15:37:43] *** Joins: jim87 (~g.furlan@93.55.249.30)
[15:38:13] *** Joins: keypushe- (keypusher@user/keypusher)
[15:38:33] *** Joins: incognito (~relativit@user/incognito)
[15:39:10] *** Quits: keypusher (~keypusher@user/keypusher) (Ping timeout: 260 seconds)
[15:41:13] *** Quits: ezekyel (~ezekyel@user/ezekyel) (Quit: ZNC 1.8.2 - https://znc.in)
[15:41:26] *** keypushe- is now known as keypusher
[15:41:29] *** Joins: ezekyel (~ezekyel@user/ezekyel)
[15:42:56] <jim87> hello! I´m developing a bash script which should create a command to send to a docker run (docker rum --rm IMAGE_NAME CMD). If I execute the docker image interactively (-ti) I´m able to execute the command, though if I pass it directly to docker, something happens with the arguments, because the tool (mongodump) throws an error about arguments number mismatching. This is the script: View paste 23KQ (bpa.st) - as you can see I echo the 
[15:42:56] <jim87> arguments, and if called inside the docker image, the very same command works as expected. Thanks :)
[15:43:51] <jim87> https://bpa.st/23KQ <-- pidgin transformed it into the website´s title
[15:44:56] <BtbN> If query is empty, it will be perceived as just not being there
[15:45:15] <BtbN> which will turn out into the fourth argument.
[15:47:38] <jim87> BtbN: I forgot to mention the dump doesn´t work only if the query is set u.u it works if the query is empty
[15:47:39] <tabakhase> jim87 what error exactly?
[15:47:54] <jim87> tabakhase: error parsing command line options: error parsing positional arguments: provide only one MongoDB connection string. Connection strings must begin with mongodb:// or mongodb+srv:// schemes
[15:48:28] <jim87> And the generated command is the following: mongodump --uri="mongodb://127.0.0.1:27017/" --db="pdp" --collection="auctionUnitsData" --query='{ "date": { "$date": "2021-11-01T00:00:00.000+00:00" } }' --out="/dump/"
[15:48:59] <BtbN> Probably some fun quoting going on there
[15:49:07] <tabakhase> yea id bet quoting too...
[15:49:34] <jim87> Yep, I was thinking the same. But I´m quoting everything. I tried double quoting (and escaping inside) the query, too, with no results
[15:50:08] <tabakhase> echo is also pretty "bad" to debug such things, better "set -x"
[15:50:10] <BtbN> turn on set -x and see what it actually runs
[15:50:24] <jim87> ok will do right now
[15:50:28] *** Joins: minimal (~minimal@user/minimal)
[15:50:33] *** Quits: sudoforge (~sudoforge@wireguard/tunneler/sudoforge) (Ping timeout: 268 seconds)
[15:51:04] <tabakhase> also on the image itself - entrypoint? 
[15:51:59] <jim87> tabakhase: the entrypoint is empty, the default cmd is echo (to be replaced with one of the mongo tools)
[15:52:01] <jim87> '--query='\''{' '"date":' '{' '"$date":' '"2021-11-01T00:00:00.000+00:00"' '}' '}'\'''
[15:52:12] <jim87> that seems to be a little bit too much quoted?
[15:56:10] <jim87> The full command is the following: + docker run --rm --network host --user 1000:1000 --volume /home/jim87/src/pdp/pdp-devenv/dumper/dump:/dump:z pdp-devenv-mongo-tools mongodump '--uri="mongodb://127.0.0.1:27017/"' '--db="pdp"' '--collection="auctionUnitsData"' '--query="{' '"date":' '{' '"$date":' '"2021-11-01T00:00:00.000+00:00"' '}' '}"' '--out="/dump/"'
[15:59:42] *** Quits: ajfriesen (~ajfriesen@cable-78-35-98-50.nc.de) (Quit: The Lounge - https://thelounge.chat)
[16:02:54] *** Joins: ajfriesen (~ajfriesen@cable-78-35-98-50.nc.de)
[16:07:02] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[16:08:14] *** Quits: zuritat (~zuritat@user/zuritat) (Quit: WeeChat 3.4-dev)
[16:08:53] *** Quits: leitz (~LeamHall@cpe-173-172-58-72.tx.res.rr.com) (Quit: nappy time)
[16:11:01] *** Quits: incognito (~relativit@user/incognito) (Quit: Going offline, see ya! (www.adiirc.com))
[16:24:12] <BtbN> Yeah, it's chopping up that --query argument a ton
[16:24:18] <BtbN> first one is '--query="{'
[16:24:24] <BtbN> followed by '"date":'
[16:24:25] <BtbN> and so on
[16:24:27] *** Quits: mei (~mei@user/mei) (Ping timeout: 268 seconds)
[16:25:17] <jim87> so it seems it´s writing something like "{ "date": { "$date": "2021-11-01T00:00:00.000+00:00" } }"
[16:25:27] <jim87> and that seems to be wrong
[16:27:48] <jim87> though the script single-quotes the query
[16:27:51] *** Joins: incognito (~relativit@user/incognito)
[16:28:25] *** Joins: gschanuel (~gschanuel@user/gschanuel)
[16:30:42] <pycurious> in docker - can i run a set of steps in parallel with another set of steps? 
[16:30:46] <pycurious> to speed up the build?
[16:31:58] <jim87> pycurious: you can multithread with an appropriate application
[16:32:26] <pycurious> can i just do RUN sudo xyz & ?
[16:32:46] <jim87> not that I´m aware of, because it won´t wait for it
[16:33:00] <jim87> you should fork, execute commands and join the threads waiting them to finish
[16:33:10] <jim87> for example with a simple python script
[16:33:41] *** Quits: c2main (~quassel@user/c2main) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[16:33:46] <jim87> though I wouldn´t recommend it, because you´d manage error codes, error messages etc...
[16:33:47] <pycurious> so if a python script forks and does two different things, that is ok?
[16:33:57] <jim87> in theory yes
[16:36:52] <jim87> BtbN: '--query='\''{' '"date":' '{' '"$date":' '"2021-11-01T00:00:00.000+00:00"' '}' '}'\''' <-- that seems to be right
[16:37:43] <jim87> That should translate to --query='{ "date": { "$date": "2021-11-01T00:00:00.000+00:00" } }'
[16:45:56] *** Joins: zamba (~marius@5.226.162.54)
[16:48:30] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 268 seconds)
[17:05:40] *** Joins: vidbina (~vid@2a02:3032:3:b94b:ebe5:9fc4:7ced:6ac)
[17:05:48] *** Quits: incognito (~relativit@user/incognito) (Quit: Going offline, see ya! (www.adiirc.com))
[17:16:14] *** Joins: forgotmynick (uid24625@id-24625.hampstead.irccloud.com)
[17:19:23] *** Quits: irrgit (~irrgit@192.241.175.183) (Quit: Leaving)
[17:20:19] *** Joins: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it)
[17:21:29] *** Quits: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it) (Client Quit)
[17:22:01] *** Joins: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it)
[17:24:02] *** Joins: irrgit (~irrgit@192.241.175.183)
[17:26:47] *** Quits: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it) (Client Quit)
[17:28:39] *** Joins: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it)
[17:29:21] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[17:29:59] *** Quits: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it) (Client Quit)
[17:30:41] *** Joins: iomari891 (~iomari891@105.112.138.38)
[17:31:04] *** Joins: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl)
[17:32:10] *** Quits: SpeakerToMeat (~Speaker@user/speakertomeat) (Read error: Connection reset by peer)
[17:33:02] *** Joins: wasutton (~wasutton3@75-46-236-127.lightspeed.tukrga.sbcglobal.net)
[17:34:22] *** Joins: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it)
[17:35:31] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Read error: Connection reset by peer)
[17:35:46] *** Joins: BSaboia (~bsaboia@177.37.198.98)
[17:37:26] *** Joins: sudoforge (~sudoforge@wireguard/tunneler/sudoforge)
[17:38:14] *** Quits: dmalteseknight (~dmaltesek@user/dmalteseknight) (Quit: WeeChat 3.3)
[17:40:05] *** Joins: fusta (~fusta@178.251.43.26)
[17:45:24] *** Joins: luva (~luva@37.120.197.46)
[17:46:31] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[17:50:14] *** Joins: SpeakerToMeat (~Speaker@user/speakertomeat)
[17:55:51] *** Joins: me-sudoer-dentne (~me-sudoer@2405:204:508f:c2a8:54aa:497c:4a9a:d063)
[17:58:11] *** Quits: vidbina (~vid@2a02:3032:3:b94b:ebe5:9fc4:7ced:6ac) (Ping timeout: 268 seconds)
[18:00:26] <geirha> no
[18:00:38] <geirha> too many quotes
[18:01:12] <geirha> ah wait, is $date a shell variable you want to inject?
[18:01:33] <geirha> or is it mongo syntax?
[18:05:06] <geirha> jim87: ah ok, just noticed your paste. The error is on line 36: https://bpa.st/23KQ#1L36  each of those variables must be quoted.  mongodump "$uri" "$db" "$collections" "$query" "$out"
[18:05:52] <geirha> oh and you added extra quotes on lines 19-22 too, remove all \"s
[18:12:06] <geirha> or, just don't bother with the variables to begin with; they are only used once anyway.  docker run --rm ... "$image_name" --uri="$MONGO_HOST" --db="$MONGO_DB_NAME" --collection="$1" ${2:+"--query=$2"} --out=/dump/
[18:20:11] *** Joins: incognito (~relativit@user/incognito)
[18:20:35] *** Quits: me-sudoer-dentne (~me-sudoer@2405:204:508f:c2a8:54aa:497c:4a9a:d063) (Quit: Leaving)
[18:24:04] *** Joins: leadgeek (~leadgeek@user/leadgeek)
[18:29:08] *** Joins: momomo (~momomo@user/momomo)
[18:36:41] *** Quits: The_Jag (~The_Jag@host-62-110-17-18.business.telecomitalia.it) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:40:03] <FurCoatStarlette> Is it possible to mount /mnt/d/whatever_folder to a container when running Windows with WSL2?
[18:40:29] <FurCoatStarlette> My docker compose seems to run fine, but the bind mount never propagates any files into the container
[18:45:54] *** Joins: lalitmee (~lalitmee@42.106.36.190)
[18:48:15] *** Quits: Czernobog (~Czernobog@user/czernobog) (Quit: ZNC 1.8.2 - https://znc.in)
[18:49:44] *** Joins: trevors_ (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[18:49:49] *** Joins: Czernobog (~Czernobog@user/czernobog)
[18:49:59] *** Joins: Sven_vB (~sven@user/sven-vb/x-2094958)
[18:50:37] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Ping timeout: 268 seconds)
[19:05:51] *** Joins: TomyWork (~TomyLobo@p200300e80f06af0024de406b2d054407.dip0.t-ipconnect.de)
[19:07:36] <jim87> geirha: thanks, will try :)
[19:07:55] <jim87> what´s the meaning of ${2:+...}?
[19:11:08] <jim87> btw it worked /kisses
[19:18:16] *** Quits: jonifen (~jonifen@user/jonifen) (Quit: Leaving)
[19:19:00] *** Joins: jonifen (~jonifen@user/jonifen)
[19:19:05] *** Quits: jonifen (~jonifen@user/jonifen) (Remote host closed the connection)
[19:19:44] *** Joins: jonifen (~jonifen@user/jonifen)
[19:22:27] *** Quits: jonifen (~jonifen@user/jonifen) (Client Quit)
[19:28:31] *** Joins: jonifen (~jonifen@user/jonifen)
[19:35:24] *** Quits: rewrit3 (~rewrit3@user/rewrit3) (Remote host closed the connection)
[19:35:47] *** Joins: rewrit3 (~rewrit3@user/rewrit3)
[19:46:35] *** Joins: Alex86ns (~Alex86ns@93-87-67-225.static.isp.telekom.rs)
[19:47:43] <Alex86ns> hello everyone. I am new on this irc and I have some question about dockerfile. I will appreciate every answer :)
[19:48:47] <Alex86ns> I have problem using FROM python:3.7
[19:49:04] <Alex86ns> seems kernel is update and I cant use apt-key command
[19:51:22] *** Quits: BSaboia (~bsaboia@177.37.198.98) (Quit: This computer has gone to sleep)
[19:52:28] <Alex86ns> Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
[19:53:16] <Alex86ns> is there any way to use python:3.7 with previous minima debian?
[19:55:56] *** Quits: forgotmynick (uid24625@id-24625.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[19:57:18] <tabakhase> Alex86ns deprecated, but still works ;-)
[19:58:26] <Alex86ns> https://packages.microsoft.com/keys/microsoft.asc | apt-key add - && curl https://packages.microsoft.com/config/debian/9/prod.list > /etc/apt/sources.list.d/mssql-release.list && apt-get update && ACCEPT_EULA=Y apt-get install msodbcsql17 unixodbc-dev -y' returned a non-zero code: 100
[19:59:19] <Alex86ns> The following packages have unmet dependencies:
[19:59:19] <Alex86ns>  libodbc1 : PreDepends: multiarch-support but it is not installable
[19:59:19] <Alex86ns>  odbcinst1debian2 : PreDepends: multiarch-support but it is not installable
[19:59:20] <Alex86ns> E: Unable to correct problems, you have held broken packages.
[20:00:39] <programmerq> probably just need to use the debian 11 prod.list from microsoft instead of the debian 9 prod.list
[20:00:55] <programmerq> IRC ettiquette is to put long output more than 2 lines into a paste service
[20:01:03] <programmerq> not a big deal, just FYI for future
[20:03:16] <Alex86ns> is there any way to use older version e.g FROM python:3.7previous
[20:03:19] <Alex86ns> ?
[20:03:33] <Alex86ns> I want to avoid changing Dockerfile
[20:03:47] <Alex86ns> it is not good for CI/CD
[20:04:34] *** Joins: Bardon (~Bardon@user/Bardon)
[20:04:41] <programmerq> there's a 3.7-buster to get buster instead of bullseye
[20:06:19] <programmerq> you can see all the tags here: https://hub.docker.com/_/python
[20:07:20] <Piraty> BtbN: (re earlier question) who acts as the dns resolver in that case?
[20:08:25] <Alex86ns> programmerq thank you.Is posible use previous release?
[20:09:44] <programmerq> buster is the previous release compared to the current one.
[20:10:55] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[20:12:25] <Alex86ns> OK. Buster is something as first release..?
[20:12:33] <Alex86ns> and it will be always same?
[20:14:02] *** Quits: emerent (~quassel@p200300cd574855c4ba27ebfffed28a59.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[20:14:27] *** Joins: emerent (~quassel@p200300cd57485589ba27ebfffed28a59.dip0.t-ipconnect.de)
[20:14:33] <programmerq> buster refers to the fact that it's based on the buster version of debian. buster will always be buster.
[20:15:21] <programmerq> the python image authors may discontinue publishing the buster variant of the python image once the debian project EOLs it.
[20:18:10] *** Quits: lalitmee (~lalitmee@42.106.36.190) (Ping timeout: 268 seconds)
[20:19:50] *** Quits: Alex86ns (~Alex86ns@93-87-67-225.static.isp.telekom.rs) (Quit: Client closed)
[20:25:01] *** Joins: falce90 (~falce90@94.244.70.81)
[20:25:03] *** Quits: onizu (uid373383@id-373383.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[20:25:49] <falce90> How to make docker daemon automatically add custom /etc/hosts entries for every new container that is started?
[20:26:14] <falce90> in the container's /etc/hosts file
[20:27:57] *** Quits: erhandsome (~erhandsom@user/erhandsome) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[20:29:05] <programmerq> you can use --add-host list                  Add a custom host-to-IP mapping
[20:29:39] <programmerq> it'll only touch /etc/hosts if you are on the legacy docker0 network. user-defined networks will have the added hosts available in the DNS service that docker runs.
[20:40:58] *** Quits: falce90 (~falce90@94.244.70.81) (Quit: Client closed)
[20:44:19] *** Joins: kevr (~kevr@user/kevr)
[20:44:57] <kevr> is there a way i can set a session toward a container as read-only in the container's filesystem; not the entire container, just a session to one. I still need the thing to operate, I just want accesses from the host to be read-only
[20:45:23] *** Joins: Null_A (~null_a@2601:645:8700:2290:41b5:a1c:d64e:bf9)
[20:45:24] <kevr> ?
[20:45:34] *** Joins: falce90 (~falce90@94.244.70.81)
[20:46:18] *** Joins: erhandsome (~erhandsom@user/erhandsome)
[20:49:42] <falce90> --add-host is for docker run, but I can't change how the containers are executed, I can only change dockerd daemon configuration.
[20:55:10] *** Joins: weedmic (~weedmic@109-186-1-92.bb.netvision.net.il)
[20:55:57] <programmerq> falce90▸ you'd need to just set up a dns server with the additional hosts and point your docker daemon to that dns server.
[20:55:58] <tabakhase> kevr that sounds the wrong way around... what are you actually trryn?
[20:56:00] *** Quits: emberquill (~emberquil@user/emberquill) (Quit: The Lounge - https://thelounge.chat)
[20:56:05] <programmerq> kevr▸ what do you mean by "session" ?
[20:57:25] *** Joins: emberquill (~emberquil@user/emberquill)
[20:59:41] <tabakhase> falce90 containers talking to other containers?
[21:01:00] *** Quits: SpeakerToMeat (~Speaker@user/speakertomeat) (Read error: Connection reset by peer)
[21:02:28] <tabakhase> and how comes "you cant change the run" - smth else starting those containers? - longlived? (you can attach networks and give aliases after the create, but that may bring a timing issue)
[21:03:28] <tabakhase> docker api is just http(s), so in a worst case you could man-in-the-middle it to add what you need ;D bit insane, but hey...
[21:04:30] <falce90> I want every new container to connect to X that is outside of docker containers. The containers are started by a CI system but it uses my docker daemon. I don't want to fiddle with the CI system
[21:04:31] <tabakhase> or overlay the image (if not forcepulled) with a entrypoint to populate the hosts (thats pretty much all --add-host does)
[21:05:28] <tabakhase> what CI is it? - own runners?
[21:05:33] <falce90> Yes
[21:05:48] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[21:06:10] <tabakhase> as in, gitlab, github, jenkins, circle and whatanot
[21:07:52] *** Quits: vaio (~gary@user/ghost) (Remote host closed the connection)
[21:10:54] *** Joins: bytestream (~bytestrea@user/bytestream)
[21:13:37] <bytestream> I built an image using buildx for linux/amd64,linux/arm64. buildx imagetools shows both architectures and docker image inspect shows arm64, but docker run and uname -m inside the container shows x86_64. Does anyone know where I might be going wrong?
[21:17:40] *** Quits: falce90 (~falce90@94.244.70.81) (Quit: Client closed)
[21:19:08] *** Joins: SpeakerToMeat (~Speaker@user/speakertomeat)
[21:21:05] *** Quits: zamba (~marius@5.226.162.54) (Ping timeout: 268 seconds)
[21:21:37] <programmerq> bytestream▸ if you have a multiarch image, and you run it on a system that is one of those architectures, then uname will show that host's architecture.
[21:22:49] <bytestream> programmerq, i'm running it on arm64 
[21:23:09] <programmerq> what is the host? a raspberry pi?
[21:23:43] <bytestream> m1 mac
[21:24:02] <programmerq> ah, then you're running docker in docker desktop? the vm it runs is an x86_64 host.
[21:24:30] <programmerq> they do have the qemu-binfmt stuff set up too, so you can force it to start it using thee other arch. docker run --platform armsomething ...
[21:24:34] <programmerq> I don't remember the specific platform names.
[21:25:17] <bytestream> ah, is there a way to force --platform globally rather than hardcoding it everywhere?
[21:27:11] <programmerq> not to my knowledge, no.
[21:28:30] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[21:28:50] <bytestream> how come if I `docker run --rm node:14 uname -m` it shows aarch64 ?
[21:28:51] <programmerq> ah, DOCKER_DEFAULT_PLATFORM is an env var your docker cli can use.
[21:29:15] <programmerq> and you can probably toss something into ~/.docker/config.json too
[21:29:35] <programmerq> because that's the platform of the binary in that image that the qemu binfmt stuff is emulating when you do --platform linux/arm64
[21:29:46] <programmerq> different things call things a little different
[21:29:51] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:29:58] <programmerq> like amd64 and x86_64 get used to mean the same thing in different situations
[21:30:16] *** Joins: onizu (uid373383@id-373383.uxbridge.irccloud.com)
[21:31:04] *** Quits: Armanzor (~Armanzor@user/armanzor) (Read error: Connection reset by peer)
[21:31:24] <bytestream> I'm a bit confused by that. Shouldn't my multi arch image also return aarch64?
[21:31:32] <bytestream> when using the same command
[21:32:06] *** Quits: alicef (~none@gentoo/developer/alicef) (Quit: install gentoo)
[21:32:07] <bytestream> `docker run --rm mymultiarch uname -m`
[21:32:47] *** Quits: Null_A (~null_a@2601:645:8700:2290:41b5:a1c:d64e:bf9) (Ping timeout: 264 seconds)
[21:32:52] *** Joins: alicef (~none@gentoo/developer/alicef)
[21:34:47] <programmerq> if you aren't specifying which platform specifically, it'll use the default platform. on docker desktop, that's x86_64
[21:36:01] *** Quits: TomyWork (~TomyLobo@p200300e80f06af0024de406b2d054407.dip0.t-ipconnect.de) (Quit: Leaving)
[21:36:15] *** Quits: jim87 (~g.furlan@93.55.249.30) (Read error: Connection reset by peer)
[21:44:21] <bytestream> I'm struggling to get `--platform linux/arm64` to output anything other than `x86_64` for my image
[21:44:55] <bytestream> even after removing the image, to workaround a bug where `--platform` doesn't work if you already downloaded the image
[21:49:11] *** Joins: mei (~mei@user/mei)
[21:51:14] *** Quits: weedmic (~weedmic@109-186-1-92.bb.netvision.net.il) (Quit: Konversation terminated!)
[21:56:10] <programmerq> you said it was saying aarch64 -- that is indeed the arm64 platform.
[21:59:35] *** Quits: bouncy (~ben@user/benoit) (Quit: WeeChat 2.8)
[22:00:16] <bytestream> programmerq, it outputs aarch64 for node:14, it outputs x86_64 for my image (even when specifying --platform)
[22:06:24] *** Joins: DoofusCanadensis (~DoofusCan@207.229.38.10)
[22:07:08] *** Quits: DoofusCanadensis (~DoofusCan@207.229.38.10) (Read error: Connection reset by peer)
[22:07:26] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Ping timeout: 260 seconds)
[22:07:33] *** Joins: B4re (~l4yer@159.48.55.11)
[22:07:35] *** Joins: DoofusCanadensis (~DoofusCan@207.229.38.10)
[22:08:33] *** Quits: momomo (~momomo@user/momomo) (Ping timeout: 268 seconds)
[22:09:04] *** Quits: l4yer (~l4yer@2a02:6ea0:e102:0:1011:8d08:ca14:8f03) (Ping timeout: 260 seconds)
[22:10:33] *** Joins: momomo (momomo@user/momomo)
[22:12:15] *** Quits: B4re (~l4yer@159.48.55.11) (Ping timeout: 268 seconds)
[22:15:35] *** Joins: l4yer (~l4yer@159.48.55.9)
[22:17:31] *** Joins: kittonian (~kittonian@cpe-70-114-148-180.austin.res.rr.com)
[22:18:02] <kittonian> hi all. how do you enter a docker container that has no bash? usually I just docker-compose exec container /bin/bash but pgadmin says there is no bash
[22:18:44] <ikke> Is there sh?
[22:19:42] *** Joins: momomo_ (~momomo@user/momomo)
[22:20:04] *** Joins: Atque (~Atque@user/atque)
[22:22:23] *** Joins: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl)
[22:22:53] <kittonian> ikke, thank you. of course there is sh. didn't think of that
[22:23:03] <kittonian> you up for an interesting problem?
[22:23:11] *** Quits: momomo (momomo@user/momomo) (Ping timeout: 264 seconds)
[22:32:29] <tabakhase> https://dontasktoask.com/ ;-)
[22:34:27] <kittonian> well, it's only sort of docker related which is why I asked
[22:34:43] <kittonian> it has to do with the docker image for pgadmin and proxying from apache to it
[22:35:18] <kittonian> i've got it up and running but it's only working properly in safari. firefox is complaining about parts of the site being insecure, cross site scripting, etc.
[22:35:35] <kittonian> for example, the first error I get that I believe has to do with the security issue is: Loading mixed (insecure) display content “http://pgadmin.domain.com/static/favicon.ico?ver=60100” on a secure page
[22:35:57] <kittonian> but I get it even when I go directly to https://pgadmin.domain.com/static/favicon.ico
[22:36:12] <kittonian> just not sure what's going on with this thing
[22:37:01] *** Joins: junktext (~junktext@gateway/vpn/pia/junktext)
[22:39:44] *** Quits: leadgeek (~leadgeek@user/leadgeek) (Quit: Leaving)
[22:41:12] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[22:43:31] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[22:44:40] *** Joins: B4re (~l4yer@159.48.55.8)
[22:44:58] *** Joins: jazzy (~jaziz@user/jaziz)
[22:45:07] *** Quits: Haxxa (~Haxxa@122.199.46.64) (Quit: Haxxa flies away.)
[22:45:13] <tabakhase> kittonian
[22:45:25] <tabakhase> it doesnt know its https, so may render things with wrong urls
[22:45:48] <tabakhase> usually there is a set of agreed_by_the_software headers to influnece that
[22:46:17] *** njka is now known as traderjoe
[22:47:11] *** Quits: l4yer (~l4yer@159.48.55.9) (Ping timeout: 264 seconds)
[22:47:38] <tabakhase> like, if its looking at $_SERVR['SERVER_PORT'] for example it may expect 80 / 443 to detect, but i puzzled with 8080 that it runs on inside - so the software may also evaluate a "X_SERVER_PORT" header that your proxy adds
[22:48:14] *** Joins: Haxxa (~Haxxa@122.199.46.64)
[22:48:37] <tabakhase> X-Request-Scheme is another often-seen one...
[22:50:30] <tabakhase> apears pgadmin may want X-Scheme - https://www.enterprisedb.com/postgres-tutorials/reverse-proxying-pgadmin
[22:52:44] <kittonian> ok, this is apache not nginx, but i can do the same thing. however what is $scheme?
[22:52:52] <kittonian> it's a variable that points to nothing
[22:53:45] <tabakhase> http://nginx.org/en/docs/http/ngx_http_core_module.html#var_scheme - apache likely has a analog
[22:56:39] *** Quits: johnny_sitar (~artur@078088015209.bialystok.vectranet.pl) (Ping timeout: 268 seconds)
[22:57:28] <kittonian> very close
[22:57:31] <kittonian> i just solved it
[22:57:35] <kittonian> needed to put RequestHeader set X_FORWARDED_PROTO 'https'
[22:57:42] <kittonian> and now there is no more error
[22:58:02] *** Quits: DoofusCanadensis (~DoofusCan@207.229.38.10) (Read error: Connection reset by peer)
[22:58:34] *** Joins: DoofusCanadensis (~DoofusCan@207.229.38.10)
[22:58:43] *** Joins: McEnroe (~e@2a02:168:636c:1:c5fd:fc46:c1a6:7eaf)
[22:59:15] <irrgit> Anyone using docker/docker-compose on the new M1 MAX ? What is performance like? 
[22:59:31] *** Quits: kittonian (~kittonian@cpe-70-114-148-180.austin.res.rr.com) (Quit: Leaving)
[23:00:23] *** Quits: jazzy (~jaziz@user/jaziz) (Ping timeout: 264 seconds)
[23:07:42] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Remote host closed the connection)
[23:08:52] *** Joins: junktext (~junktext@gateway/vpn/pia/junktext)
[23:13:23] *** justache is now known as justUnited
[23:14:45] *** Joins: dustfinger (~user@d75-159-231-192.abhsia.telus.net)
[23:15:03] <dustfinger> I am would like to be able to a ENV in a dockerfile from within a RUN if condition. Is that possible? Here is what I have tried so far. https://termbin.com/yv4p. Essentially, I am exporting the new variable, but that does not set the value of the original variable in the dockerfile context, but that is what I would like to do.
[23:22:13] <kevr> dustfinger: you could always just populate a file in the container with the env export
[23:23:25] <kevr> [[ $(getent group 20) ]] && echo "export GROUP_NAME=$(...)" >> ~/.bashrc or whatever shell you might use, or profile if you get a login shell
[23:25:12] <kevr> the only thing that the RUN does there is run as if you were in the container, you can't really share context between them unless you use the filesystem
[23:25:17] <kevr> afaik
[23:27:02] <dustfinger> kevr: Okay, that is good to know.
[23:30:44] *** Joins: jazzy (~jaziz@user/jaziz)
[23:30:48] <tabakhase> dustfinger note that those shenanigans during build are a bit of a lost battle... only a entrypoint can know, so if --user doesnt cut it, check https://github.com/boxboat/fixuid
[23:32:11] *** Quits: incognito (~relativit@user/incognito) (Quit: Going offline, see ya! (www.adiirc.com))
[23:46:15] *** Joins: mjbatty (~mjbatty@82.2.17.205)
[23:49:54] <dustfinger> tabakhase: Thank you, I will take a look
