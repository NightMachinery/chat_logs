[00:00:34] *** Quits: andril (~andril@2601:586:8400:113:f85d:b935:8ae0:12e1) (Ping timeout: 240 seconds)
[00:02:10] *** sublim20 is now known as Oprah
[00:03:06] *** Oprah is now known as sublim20
[00:12:04] *** Joins: xall (~xall@102.129.145.99)
[00:12:09] *** Quits: irrgit (~irrgit@192.241.175.183) (Quit: Leaving)
[00:12:23] *** Joins: irrgit (~irrgit@192.241.175.183)
[00:18:16] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 258 seconds)
[00:18:25] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 244 seconds)
[00:19:32] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[00:21:15] *** Joins: andril (~andril@2601:586:8400:113:f85d:b935:8ae0:12e1)
[00:21:36] *** Joins: mr-red (~drd@93-39-151-19.ip76.fastwebnet.it)
[00:22:42] *** Joins: xall92 (~xall@2600:8800:8c02:3600:8c93:8d86:e6a4:7638)
[00:23:54] *** Quits: drd (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 252 seconds)
[00:25:31] *** Quits: xall (~xall@102.129.145.99) (Ping timeout: 246 seconds)
[00:29:03] *** Quits: andril (~andril@2601:586:8400:113:f85d:b935:8ae0:12e1) (Ping timeout: 268 seconds)
[00:30:52] *** Quits: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca) (Quit: Konversation terminated!)
[00:31:27] *** Joins: wstrnr (uid510617@id-510617.tooting.irccloud.com)
[00:32:11] <wstrnr> hi guys. has this channel any kind of log of recent messages?
[00:32:27] *** Quits: slackjeff (~slackjeff@191.177.172.134) (Ping timeout: 258 seconds)
[00:32:28] <wstrnr> maybe public channel log of some kind...
[00:32:29] <yitz> There's no public logs. There's plenty of private logs
[00:34:18] *** Quits: pragma- (~chaos@user/pragmatic-chaos) (Ping timeout: 240 seconds)
[00:35:08] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Ping timeout: 258 seconds)
[00:35:32] <wstrnr> allright.
[00:35:54] <sudomann> hwo to use bot again?
[00:35:57] <sudomann> #> echo foo
[00:36:02] <sudomann> > echo foo
[00:36:03] <wstrnr> # echo foo
[00:36:04] <shbot> wstrnr: foo
[00:36:08] <sudomann> ...
[00:36:18] <sudomann> thanks
[00:36:18] <wstrnr> this bot has many prefixes
[00:36:47] <greycat> '# ' for a fairly-recent version of bash, '32# ' for bash 3.2, etc.
[00:37:05] <sudomann> # command="kubectl port-forward service/foo --address 0.0.0.0 8888:8000 -n staging" echo ${command////$'\\'/}
[00:37:07] <shbot> sudomann: no output
[00:37:15] <greycat> !faq 104
[00:37:15] <greybot> https://mywiki.wooledge.org/BashFAQ/104 -- Why doesn't foo=bar echo "$foo" print bar?
[00:37:15] <sudomann> # command="kubectl port-forward service/foo --address 0.0.0.0 8888:8000 -n staging" && echo ${command////$'\\'/}
[00:37:17] *** Joins: pragma- (~chaos@user/pragmatic-chaos)
[00:37:17] <shbot> sudomann: kubectl port-forward service\/foo --address 0.0.0.0 8888:8000 -n staging
[00:37:43] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[00:37:53] <sudomann> Is there a prettier way to write ${command////$'\\'/}
[00:37:57] <wstrnr> sudomann: greycat says truth. you really have to see that faq page
[00:37:58] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[00:38:06] <llua> use a function
[00:38:07] <sudomann> That looks attrocious and i only figured it out by trial and error
[00:38:36] <wstrnr> sudomann: if you have a lot of / in your pattern and/or replacement strings, use quotes to "decorate" them, to make the pattern and replacement prominent
[00:39:08] <wstrnr> # x=jeej////jejj;  echo "${x//'///'/'3-slashes'}"
[00:39:10] <shbot> wstrnr: jeej3-slashes/jejj
[00:39:49] <sudomann> # command="kubectl port-forward service/foo --address 0.0.0.0 8888:8000 -n staging" && echo ${command/"//"/$'\\'/}
[00:39:51] <shbot> sudomann: kubectl port-forward service/foo --address 0.0.0.0 8888:8000 -n staging
[00:39:53] <sudomann> ...
[00:39:54] <wstrnr> if you want to put literal ' in replacement string, you can single-quote it
[00:40:17] <wstrnr> # x='blah'; echo "${x/a/'\'}"
[00:40:18] <shbot> wstrnr: bl\h
[00:40:24] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:68b1:6814:85e7:960b)
[00:40:24] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:68b1:6814:85e7:960b) (Changing host)
[00:40:24] *** Joins: skapata (~Skapata@user/skapata)
[00:40:32] <sudomann> i'd just like to change / to \/
[00:40:45] <sudomann> oh i see
[00:41:02] <greycat> ${foo//\//\\/}  I think
[00:41:19] <wstrnr> you can combine quoting styles in the replacement (also in the pattern, obviously, but it will affect how the pattern is interpreted, e.g. magic meaning of wildcard characters will  vanish in quotes)
[00:41:25] <geirha> # s='/' bs='\' var=foo/bar; printf '%s\n' "${var//$s/$bs$s}"
[00:41:26] <shbot> geirha: foo\/bar
[00:41:41] <greycat> of course, we may simply ask "what are you really trying to do", because this is often an X-Y question
[00:42:09] <sudomann> haha yes I'm trying to pass that command into ps -e -o pid,cmd | awk -v command="${@:2}" '/command/{print $1}'
[00:42:34] <geirha> that's definitely wrong
[00:42:38] <sudomann> the single slash breaks awk's functionality but \/ works nicely
[00:42:55] <greycat> !injection > sudomann 
[00:42:55] <greybot> sudomann: Don't pass user-supplied data in a context where it could be interpreted as code. BAD: ssh host "rm $file"; GOOD: ssh host "$(printf 'rm %q' "$file")"; see http://mywiki.wooledge.org/BashProgramming/05
[00:43:01] <geirha> awk -v command="${*:2}" '$0 ~ command{ print $1 }'
[00:43:17] <sudomann> not user supplied btw
[00:43:39] <greycat> then why are you using this variable and expansion
[00:43:50] <geirha> in awk  /command/  will simply use command as regex, it will not use the variable named command for anything
[00:44:15] <sudomann> I have two variants of that comand in a script and i start two loops that try to run them indefinitely. The command is pass to the loop function as a paramter
[00:44:44] <geirha> but  /foo/  is shorthand for  $0 ~ /foo/   and the regex can be provided as a regular string ("foo") or as a variable
[00:44:46] *** Joins: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca)
[00:44:46] <sudomann> unfortunately storing the command with \/, the it ends up without it
[00:45:04] <greycat> well, "escaping" the slashes does not turn your command into a valid regex
[00:45:11] <geirha> in either case, you do NOT need to escape /
[00:45:18] <greycat> the slashes are not the characters you actually need to quote
[00:45:35] <greycat> . and [ and a few others, but not /
[00:46:05] <sudomann> geirha, that substitution syntax is awk is new and weird to me
[00:46:10] <sudomann> interesting
[00:47:21] <sudomann> why ${*:2} instead? 
[00:47:24] <geirha> it's useful to know that syntax, because it means you can now do regex matching on separate words not just against entire lines. E.g.  $2 ~ /^(on|1|true)$/
[00:47:43] <greycat> I'm sure @:2 and *:2 are *both* wrong but you gave no context
[00:47:52] <geirha> because "${@:2}" may expand to multiple words
[00:48:04] <greycat> @:2 is definitely wrong, and *:2 is only probably wrong
[00:48:20] *** Joins: alzgh (~alzgh@216.155.158.214)
[00:48:27] <sudomann> oh I was targeting "all arguments supplied to this function execpt the first one"
[00:48:33] <geirha> # set -- foo bar baz; printf '<%s>' "${@:2}"
[00:48:34] <shbot> geirha: <bar><baz>
[00:48:40] <geirha> # set -- foo bar baz; printf '<%s>' "${*:2}"
[00:48:41] <shbot> geirha: <bar baz>
[00:48:54] <greycat> well, your thing expands to   awk -v command=arg1 arg2 arg3 'script'
[00:49:11] <greycat> or if you prefer,  awk -v command=arg2 arg3 arg4 'script'
[00:49:36] <greycat> geirha's variant expands to   awk -v command='arg2 arg3 arg4' 'script'
[00:49:37] *** Parts: rhu (~rhu@84.71.117.34) (WeeChat 2.8)
[00:51:15] *** Quits: mr-red (~drd@93-39-151-19.ip76.fastwebnet.it) (Ping timeout: 268 seconds)
[00:51:37] *** Quits: esselfe (~steph@user/esselfe) (Read error: Connection reset by peer)
[00:53:23] *** Joins: esselfe (~steph@user/esselfe)
[00:53:35] *** Quits: furrymcgee (~devuan@31.179.186.66) (Quit: leaving)
[00:55:18] <sudomann> Jeez so much subtlety 
[00:56:14] <greycat> the CodeInjection page (aka BashProgramming/05) is one of my favorites, and I'd strongly recommend it
[00:57:03] *** Quits: lachesis (~lachesis@user/lachesis) (Ping timeout: 250 seconds)
[00:57:42] *** Joins: Night-Shade (~Tim@ip5b403d56.dynamic.kabel-deutschland.de)
[00:57:52] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[00:57:57] *** Joins: rhu (~rhu@84.71.117.34)
[00:57:58] *** mnrmnaugh is now known as KeziahMason
[00:59:31] *** Joins: slackjeff (~slackjeff@191.177.172.134)
[01:00:21] <sudomann> whooo thats a long read
[01:01:49] *** Quits: makara (~sol@196.61.111.63) (Ping timeout: 250 seconds)
[01:03:27] *** Joins: mefistofeles (~mefistofe@user/mefistofeles)
[01:04:03] <mefistofeles> hey, I'm getting an error code 2 when trying to run a bash script, it is because I'm doing `set -e` apparently, why is this a "misuse of shell builtins"?
[01:04:42] <phy1729> !-e
[01:04:42] <greybot> "set -e" is an inheritance of the old bourne shell, and doesn't really work well with modern shell features. You'll really have less buggy scripts if you do the error handling manually instead of relying on the unreliable "set -e"; see http://mywiki.wooledge.org/BashFAQ/105
[01:05:17] <mefistofeles> ok
[01:05:21] <mefistofeles> thanks
[01:05:27] *** Quits: magla (~gelignite@55d4f84b.access.ecotel.net) (Quit: Stay safe!)
[01:10:04] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[01:10:50] *** Joins: fortuno51_ (~fortuno51@37.120.156.254)
[01:12:16] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[01:12:42] *** Quits: fortuno51 (~fortuno51@37.120.156.254) (Ping timeout: 258 seconds)
[01:14:37] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 258 seconds)
[01:16:56] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Ping timeout: 258 seconds)
[01:19:23] *** Joins: TheHermann (~TheHerman@gateway/tor-sasl/thehermann)
[01:20:00] *** Quits: Mo (~Mo@dynamic-095-112-026-083.95.112.pool.telefonica.de) (Ping timeout: 252 seconds)
[01:21:43] *** Joins: keypushe- (keypusher@user/keypusher)
[01:23:16] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 272 seconds)
[01:24:58] *** keypushe- is now known as keypusher
[01:25:36] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:26:08] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[01:27:40] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[01:32:30] *** Quits: brettgilio (~brettgili@45.55.53.68) (Quit: The Lounge - https://thelounge.chat)
[01:33:22] *** Joins: brettgilio (~brettgili@45.55.53.68)
[01:37:42] *** Joins: thiras (~thiras@user/thiras)
[01:42:03] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[01:43:49] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Remote host closed the connection)
[01:44:56] *** xall92 is now known as xall
[01:45:50] *** Quits: pervaya (~pervaya@2001:41d0:602:3007::641b:b74c) (Ping timeout: 256 seconds)
[01:46:01] *** Quits: neltraus (~neltraus@supernova.neltraus.de) (Quit: Zzzzzz...)
[01:46:08] *** Quits: aaro (aaro@user/aaro) (Ping timeout: 268 seconds)
[01:46:14] *** Joins: neltraus (~neltraus@supernova.neltraus.de)
[01:46:33] *** Quits: Yorick- (znc@vps.freegamehosting.eu) (Read error: Connection reset by peer)
[01:46:41] *** Joins: pervaya (~pervaya@2001:41d0:602:3007::641b:b74c)
[01:46:47] *** Joins: Yorick_ (znc@vps.freegamehosting.eu)
[01:48:05] *** Parts: pragma- (~chaos@user/pragmatic-chaos) (Bye!)
[01:48:07] *** Joins: aaro (aaro@user/aaro)
[01:48:39] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:50:35] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[01:51:04] *** Quits: Kruppt (~Kruppt@50.111.9.86) (Quit: Leaving)
[01:53:32] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 268 seconds)
[01:54:52] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[02:06:23] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Ping timeout: 250 seconds)
[02:08:39] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[02:09:53] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[02:15:14] *** Quits: lq820105 (~lq@180.167.42.3) (Remote host closed the connection)
[02:15:20] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Quit: leaving)
[02:15:38] *** Joins: lq820105 (~lq@180.167.42.3)
[02:24:36] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[02:26:41] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Ping timeout: 258 seconds)
[02:28:45] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[02:29:08] *** Quits: fortuno51_ (~fortuno51@37.120.156.254) (Ping timeout: 272 seconds)
[02:29:46] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 272 seconds)
[02:29:48] *** Joins: lachesis (~lachesis@user/lachesis)
[02:29:55] *** Quits: ZucZero (~Zucca@user/zucca) (Quit: WeeChat 3.1)
[02:30:11] *** Joins: Zucca (~Zucca@user/zucca)
[02:33:06] *** Quits: sublim20 (~sublim20@user/sublim20) (Ping timeout: 240 seconds)
[02:38:16] *** Quits: SuperLag (~akulbe@user/superlag) (Remote host closed the connection)
[02:40:08] *** Quits: fedenix (~fedenix@gateway/tor-sasl/fedenix) (Remote host closed the connection)
[02:40:14] *** Joins: jmcantrell (~weechat@user/jmcantrell)
[02:43:24] *** Quits: zro (~zro@user/zro) (Quit: WeeChat 3.2)
[02:44:40] *** Joins: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net)
[02:44:45] *** Joins: SuperLag (~akulbe@user/superlag)
[02:51:09] *** Quits: wstrnr (uid510617@id-510617.tooting.irccloud.com) (Quit: Connection closed for inactivity)
[02:55:53] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[03:06:56] *** Quits: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net) (Ping timeout: 258 seconds)
[03:08:11] *** Joins: akoana (~ah@user/akoana)
[03:09:57] *** Quits: mohabaks_ (~mohabaks@gateway/tor-sasl/mohabaks) (Ping timeout: 244 seconds)
[03:11:29] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[03:16:24] *** Joins: milkt_ (~debian@gateway/tor-sasl/milkt)
[03:17:42] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 244 seconds)
[03:20:28] *** Joins: __jmcantrell__ (~weechat@user/jmcantrell)
[03:20:35] *** Quits: hsv (~unknown@user/hsv) (Remote host closed the connection)
[03:22:21] *** Quits: milkt_ (~debian@gateway/tor-sasl/milkt) (Ping timeout: 244 seconds)
[03:23:25] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Ping timeout: 258 seconds)
[03:24:19] *** Joins: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net)
[03:24:33] *** Joins: sublim20 (~sublim20@user/sublim20)
[03:25:22] *** Joins: hsv (~unknown@user/hsv)
[03:25:43] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 258 seconds)
[03:29:00] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[03:29:14] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[03:29:28] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[03:29:43] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Quit: WeeChat 3.2)
[03:29:58] *** Joins: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au)
[03:31:16] *** Quits: jsrnop (~mark@user/jsrnop) (Quit: The Lounge - https://thelounge.chat)
[03:31:39] *** Joins: jsrnop (~mark@user/jsrnop)
[03:32:36] *** Quits: MercilessDeth (~brad@136.49.61.2) (Quit: Konversation terminated!)
[03:35:24] *** Joins: dre|dinner (~dre@2001:8003:c932:c301:ceba:8234:4850:924e)
[03:36:21] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[03:36:57] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Quit: tech_exorcist)
[03:38:18] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[03:41:49] *** Joins: sublim20 (~sublim20@user/sublim20)
[03:43:21] *** Quits: moto (~moto@user/moto) (Ping timeout: 258 seconds)
[03:43:33] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[03:43:44] <sublim20> hey all, got a quick question.  i have two files, each file is a list of items.   i wanna find the items that exist in one file, but not in the other.  what would be the best way to do this?
[03:44:09] <greycat> !faq intersect
[03:44:10] <greybot> https://mywiki.wooledge.org/BashFAQ/036 -- How can I get all lines that are: in both of two files (set intersection) or in only one of two files (set subtraction).
[03:44:24] <sublim20> thank you greycat 
[03:44:42] <sublim20> once again, my question is answered in the FAQ.   
[03:44:44] *** Joins: jmcantrell (~weechat@user/jmcantrell)
[03:44:49] * sublim20 puts on dunce cap
[03:45:44] *** Quits: lq820105 (~lq@180.167.42.3) (Remote host closed the connection)
[03:46:10] *** Joins: lq820105 (~lq@210.72.8.204)
[03:47:27] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[03:47:40] *** Quits: __jmcantrell__ (~weechat@user/jmcantrell) (Ping timeout: 256 seconds)
[03:48:14] *** Quits: potamides (~amnifiliu@2003:a:270f:c400:28d8:e046:7d92:3970) (Ping timeout: 272 seconds)
[03:48:17] <ash_worksi> I started some files in sqitch (db migrations) using timestamp prefixes; can I autocomplete filenames without typing the prefix? like for a file 20210804_171548_add_user_table,sql, could I do something like `vi *add^I` ?
[03:48:49] *** Joins: downunder (~downunder@110.151.122.76)
[03:48:51] *** Parts: mefistofeles (~mefistofe@user/mefistofeles) ()
[03:48:53] *** Quits: TheHermann (~TheHerman@gateway/tor-sasl/thehermann) (Quit: Leaving)
[03:48:58] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[03:50:36] *** dre|dinner is now known as dre
[03:50:51] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Read error: Connection reset by peer)
[03:52:33] *** Quits: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net) (Ping timeout: 258 seconds)
[03:54:27] <Riviera> ash_worksi: M-*
[03:54:59] *** Joins: moto (~moto@user/moto)
[03:55:39] <ash_worksi> Riviera: so typically, ALT + SHIFT + 8 ?
[03:56:10] <Riviera> ash_worksi: yup, that or escape shift + 8
[03:56:53] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Ping timeout: 250 seconds)
[03:57:04] <ash_worksi> Riviera: I'll try that
[03:57:06] *** Quits: kurahaupo (~kurahaupo@pa49-195-104-15.pa.nsw.optusnet.com.au) (Ping timeout: 240 seconds)
[03:57:23] <Riviera> what takes you so long :P
[03:57:23] <Riviera> :)
[03:57:36] <ash_worksi> niether worked for `ls *add`
[03:57:55] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 258 seconds)
[03:58:44] <ash_worksi> neither*
[03:58:50] <Riviera> ah damn, it'd only work for *add* i think
[03:59:02] *** Joins: Crescendo (~Crescendo@user/crescendo)
[03:59:20] <Riviera> sorry, forgot about that
[04:00:44] *** Joins: YaoNai (~YaoNai@user/yaonai)
[04:01:15] *** Joins: qub411 (~user@203-219-207-138.tpgi.com.au)
[04:02:17] *** Quits: YaoNai (~YaoNai@user/yaonai) (Client Quit)
[04:02:47] <ash_worksi> oh
[04:02:52] <ash_worksi> I'll try that then
[04:03:52] <ash_worksi> no combination of [pressing|holding] [esc|alt|altgr] + * worked
[04:05:29] <Riviera> ash_worksi: I created the file "20210804_171548_add_user_table,sql", then I typed echo *add*<escape><*>
[04:05:50] <Riviera> ash_worksi: and I got "echo 20210804_171548_add_user_table,sql"
[04:06:36] <akoana> ash_worksi: what happens when you try   *add*<control><x><*> 
[04:14:58] *** Quits: greycat (~greg@209.142.155.49) (Quit: Bye)
[04:15:02] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:15:39] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[04:15:54] <akoana> hmm, here *add*<escape><*> also doesn't complete to 20210804_171548_add_user_table,sql 
[04:16:56] <akoana> completion works only for prefixes like 20210804_17154<escape><*>
[04:17:22] <akoana> Riviera: you must have special magic completion :)
[04:20:02] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[04:20:38] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[04:22:42] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[04:23:33] *** Joins: Crescendo (~Crescendo@user/crescendo)
[04:25:13] <Riviera> akoana: both work here, C-x * and M-*
[04:25:32] <Riviera> akoana: both with a single and with multiple matching files in the current directory
[04:26:22] <akoana> weird, and I haven't changed something relevant in my .inputrc ...
[04:27:02] <akoana> could it be the bash version, mine is GNU bash, version 5.0.3(1) ?
[04:27:06] *** Quits: moto (~moto@user/moto) (Ping timeout: 240 seconds)
[04:27:12] <Riviera> akoana: what am i missing, what else would these readline commands do?
[04:27:57] <Riviera> akoana: i would have asked whether perhaps programmable completion interferes (if you have it), but C-x * should not be affected.
[04:28:30] <akoana> well,  a<alt><*> expands to all files starting with a
[04:28:31] *** Quits: Sasazuka (~Sasazuka@user/sasazuka) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:28:55] <Riviera> akoana: i don't think the bash version matters, i believe i use this feature for many years now, but fwiw i tested with 5.1.8(1)-release
[04:29:13] *** Joins: moto (~moto@user/moto)
[04:29:56] <akoana> but it does not work with your example (20210804_171548_add_user_table,sql) and *add*<alt><*> somehow it does not work with *
[04:30:08] *** Joins: potamides (~amnifiliu@p5df14fc4.dip0.t-ipconnect.de)
[04:30:32] <akoana> 20210804<alt><*> works however
[04:30:59] <akoana> and *add*<control><x><*>  works too, strange
[04:31:29] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[04:31:42] <akoana> bind -p | grep -F '\e*' => "\e*": insert-completions
[04:31:43] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[04:32:14] <Riviera> okay then earth rays are likely the cause
[04:32:15] <Riviera> :)
[04:32:22] <akoana> hehe, yep
[04:33:40] <snappy> Hi, I'm trying to dynamically add python user /bin paths to my PATH, but the problem is I'm doing it in a subshell in a while loop. Is there  a way to hoist this up into the main shell when it gets interpreted: http://codepad.org/lZvq9srX
[04:36:24] *** Quits: Masklin_Gurder (~joel@93.182.183.85) (Ping timeout: 256 seconds)
[04:36:27] <emanuele6> !check
[04:36:28] <checkbot> snappy: Line 9: PATH was modified in a subshell. That change might be lost. Line 4: Use find instead of ls to better handle non-alphanumeric filenames. Line 4: read without -r will mangle backslashes. See https://shellcheck.net/?id=cb21987 for all 6 issues.
[04:37:03] <OMGOMG> parsing ls is bad, parsing ls -l is insane
[04:37:31] <snappy> eh i know this directory isn't going to have whitespaces or what not, but i admit find is better, just didn't think about it
[04:37:37] <emanuele6> OMGOMG: you need a better font
[04:37:48] <snappy> but the problem still persists PATH is modified in a subshell... 
[04:38:22] <emanuele6> you should not use ls and you really should use `-r` with read
[04:38:37] <OMGOMG> emanuele6: good point, though using ls -1 in a script is also insane
[04:39:35] <emanuele6> snappy: ..but ignoring that (dont) if you use bash, you can solve the subshell issue using while read -r; do ...; done < <(cmd1 | cmd2) instead of cmd1 | cmd2 | while read -r; do ...; done
[04:40:03] *** Quits: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (Quit: ZNC 1.8.2 - https://znc.in)
[04:40:20] *** Joins: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[04:40:29] <akoana> Riviera: you are right, programmable completion was the culprit, after shopt -u progcomp everything worked as you described, no success for earth rays :) Thank you!
[04:40:56] <snappy> is there a way to just have find print the directory names and not the full path names like ls -1?
[04:41:21] <snappy> because i want to sort these directories first in numerical order, and that needs a bit of massaging because they're versions
[04:41:26] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Quit: Leaving)
[04:41:36] *** Joins: sinaowolabi (~SinaOwola@41.190.2.136)
[04:42:26] <emanuele6> snappy: just don't use find; use `printf '%s\n' *'
[04:43:06] *** Quits: rhu (~rhu@84.71.117.34) (Ping timeout: 240 seconds)
[04:43:14] <emanuele6> or even better `printf '%s\0' *', but you probably can't do that since you are targeting mac os and mac os sort probably doesn't have -z
[04:44:30] <emanuele6> oh, you are passing a path to ls
[04:47:00] *** Quits: carlos (~pum@user/carlos) (Remote host closed the connection)
[04:47:12] *** Quits: sinaowolabi (~SinaOwola@41.190.2.136) (Ping timeout: 272 seconds)
[04:47:26] <emanuele6> there is `(cd $path; printf '%s\n' *) |` then
[04:48:13] *** Joins: neshpion (~neshpion@gateway/tor-sasl/neshpion)
[04:48:17] <emanuele6> s/\$path/"&"/
[04:50:23] <snappy> ah yeah that'd do the trick
[04:54:13] *** Joins: n4dir (~user@mue-88-130-57-016.dsl.tropolys.de)
[04:55:03] *** Joins: __jmcantrell__ (~weechat@user/jmcantrell)
[04:56:12] <emanuele6> there are not really many benefit other than not using `ls` to that since if there is a file that contains a newline in its name, it will break
[04:56:25] <emanuele6> also if it contains a `:` since you are using it in PATH
[05:00:20] *** Joins: jmcantrell (~weechat@user/jmcantrell)
[05:00:28] <emanuele6> also if the filename has leading whitespace since you are not using REPLY and are not setting IFS='' for read
[05:00:30] <emanuele6> !REPLY
[05:00:32] <greybot> REPLY is the default variable that read populates, when not supplied with one. The trimming of leading and trailing IFS whitespace does not occur, when used as such. See ''help read'' and http://wiki.bash-hackers.org/commands/builtin/read
[05:03:22] *** Quits: __jmcantrell__ (~weechat@user/jmcantrell) (Ping timeout: 240 seconds)
[05:07:30] <ash_worksi> akoana: that worked!
[05:08:30] <akoana> ash_worksi: what worked, M-* after shopt -u progcomp   or  C-x *  ?
[05:09:01] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[05:09:05] <ash_worksi> C-x
[05:09:13] <ash_worksi> sorry I was trying to catch up
[05:09:16] <akoana> ah, ok
[05:09:47] <ash_worksi> someone was answering an absurd number of postgres questions I had in #perl, and I just couldn't let that oppertunity pass 
[05:10:49] <akoana> here it M-* didn't work too, but as Riviera said, programmable completion was the reason it for it, shopt -u progcomp disables that, and then *add*<alt><*> did complete
[05:10:56] <akoana> s/it//
[05:11:48] <akoana> (M-* == <alt><*>)
[05:11:53] *** Joins: XV8 (~XV8@2601:5cb:c001:50:df69:766a:bc37:5a0b)
[05:12:19] <ash_worksi> indeed
[05:12:49] <ash_worksi> I guess I could disable it, but I was hoping to have something as nice as just `tab`
[05:14:06] *** Quits: siodor (~quassel@140.238.211.102) (Remote host closed the connection)
[05:17:23] *** Joins: Atque (~Atque@user/atque)
[05:22:05] *** Joins: enoq (~enoq@194-208-179-35.lampert.tv)
[05:22:24] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Remote host closed the connection)
[05:23:20] *** Joins: Psi-Jack (psi-jack@user/psi-jack)
[05:24:35] *** Joins: __jmcantrell__ (~weechat@user/jmcantrell)
[05:24:56] *** Parts: Psi-Jack (psi-jack@user/psi-jack) (Textual IRC Client: www.textualapp.com)
[05:25:09] *** Joins: Psi-Jack (psi-jack@user/psi-jack)
[05:25:36] <ash_worksi> maybe I'll write some shortcut in my lifetime that will expand `ls *foo^I` to files containing foo
[05:27:37] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Ping timeout: 245 seconds)
[05:27:37] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 258 seconds)
[05:28:05] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[05:28:55] *** Quits: rustyshackleford (uid236774@id-236774.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[05:28:58] *** Parts: Psi-Jack (psi-jack@user/psi-jack) (Textual IRC Client: www.textualapp.com)
[05:30:15] *** Joins: Psi-Jack (psi-jack@user/psi-jack)
[05:30:23] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:31:20] <akoana> ash_worksi: well, if you disable programmable completion, you could put a line like
[05:31:23] <akoana> "\t\t": insert-completions
[05:31:55] <akoana> into your $HOME/.inputrc and pressing foo*<tab>-<tab> would do that
[05:32:13] <akoana> or *foo<tab>-<tab>
[05:32:43] *** Joins: Starmina_ (~Starmina@194.110.113.26)
[05:33:01] *** Quits: alzgh (~alzgh@216.155.158.214) (Quit: Client closed)
[05:33:33] *** Quits: Starmina (~Starmina@194.110.113.89) (Ping timeout: 276 seconds)
[05:33:33] *** Starmina_ is now known as Starmina
[05:33:53] <akoana> ash_worksi: just did that, it works.
[05:34:17] *** Joins: vlm (~vlm@user/vlm)
[05:36:10] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.0.1)
[05:36:45] *** Quits: lq820105 (~lq@210.72.8.204) (Read error: Connection reset by peer)
[05:36:54] <akoana> well you could even use a single tab if for this if you want, "\t": insert-completions  but then the usual tab behaviour would get lost...
[05:37:13] *** Joins: lq820105 (~lq@210.72.8.212)
[05:37:36] *** Quits: LiftLeft (~LiftLeft@191.96.150.113) (Ping timeout: 256 seconds)
[05:37:43] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[05:38:40] *** Quits: Psi-Jack (psi-jack@user/psi-jack) (Remote host closed the connection)
[05:41:50] *** Joins: jmcantrell (~weechat@user/jmcantrell)
[05:43:00] <ash_worksi> REALLLY?!?!?!
[05:43:09] <ash_worksi> oh
[05:43:12] <ash_worksi> I didn't read up enough
[05:43:27] <ash_worksi> what is 
[05:43:30] <ash_worksi> dang
[05:43:35] <ash_worksi> what is programmable completion?
[05:44:03] *** KeziahMason is now known as mnrmnaugh
[05:44:43] <akoana> ash_worksi: there is a whole section in the bash manual dedicated to Programmable Completion...
[05:45:28] *** Quits: __jmcantrell__ (~weechat@user/jmcantrell) (Ping timeout: 272 seconds)
[05:46:49] <akoana> for example it allows you to have bash complete options for a command
[05:47:25] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[05:47:30] <akoana> ash_worksi: try to enter ls -<tab><tab>   it will show you possible ls options
[05:47:31] <ash_worksi> akoana: but it's enabled by default? so if i disabled it, am I shunning some helpful ubuntu things?
[05:48:02] <akoana> here (debian) it is enabled by default, so I guess it's the same for ubuntu
[05:48:05] *** Quits: cisco87 (~quassel@lnxg33k.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[05:48:48] <akoana> ash_worksi: but when you disable the Programmable Completion   ls -<tab><tab> won't show you the options
[05:48:55] <akoana> for example
[05:49:50] <akoana> it wouldn't do much harm if you disabled that by putting a line with    shopt -u progcomp  into your bashrc
[05:49:51] <ash_worksi> oh *foo<tab>-<tab> was WITHOUT disabling progcomp?
[05:50:15] <ash_worksi> and that hypen is somethign you type?
[05:50:26] <akoana> no, just two tabs
[05:50:58] <akoana> first disable Programmable Completion with    shopt -u progcomp
[05:51:32] <ash_worksi> okay, I tried that and it didn't work :\
[05:51:36] <akoana> then   enter foo*<tab><tab>   (with "\t\t": insert-completions in your .inputrc)
[05:51:55] <ash_worksi> oh *foo*
[05:51:58] <ash_worksi> not *foo
[05:52:18] <ash_worksi> I see
[05:52:19] <akoana> you have to start a new bash after changes to .inputrc
[05:53:24] *** Joins: cisco87 (~quassel@lnxg33k.com)
[05:53:47] <akoana> it's read by bash on startup
[05:54:24] *** Quits: enoq (~enoq@194-208-179-35.lampert.tv) (Quit: enoq)
[05:54:25] <akoana> (you'd have shopt -u progcomp again in the new bash)
[05:54:39] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:a452:b856:6408:4425) (Read error: Connection reset by peer)
[05:54:49] <akoana> (unless you have put it in your .bashrc)
[05:56:29] <akoana> or you can make your current bash re-read the .inputrc with C-x C-r
[05:58:41] *** Joins: keypushe- (keypusher@user/keypusher)
[05:58:54] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[05:59:17] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[05:59:44] <akoana> ash_worksi: here is an example for $HOME/.inputrc  https://termbin.com/iemf
[06:00:47] <ash_worksi> is it heresy to use globals in functions this way: https://gist.github.com/ash-m/b8399b244bb39f1528d3d09b46fdada9
[06:01:44] *** keypushe- is now known as keypusher
[06:01:52] <akoana> it is recommended to use lower case to prevent clashes with environment vars
[06:02:22] <ash_worksi> akoana: are you talking about ROOT?
[06:02:29] <akoana> yes
[06:02:39] <tirnanog> it's obviously meant to be inherited.
[06:03:02] <ash_worksi> akoana: I was talking about $db $new and $orig in the cmp_schemas() function
[06:03:12] <ash_worksi> tirnanog: come again?
[06:03:16] <tirnanog> ROOT.
[06:03:29] <akoana> ash_worksi: it's ok
[06:03:48] <ash_worksi> tirnanog: ah, yes... well, I meant for it to be an env var
[06:03:52] <tirnanog> anyway, there's not obvious reason for the function not to be parameterized, but for a short script like this, I don't suppose it really matters.
[06:04:10] <ash_worksi> tirnanog: just saving on typing
[06:05:11] <ash_worksi> tirnanog: better? https://gist.github.com/ash-m/b8399b244bb39f1528d3d09b46fdada9
[06:05:11] <tirnanog> you could probably imagine a larger script reaching a complexity threshold where it starts to become a case of action at a distance.
[06:07:02] *** Joins: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net)
[06:07:09] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:07:18] <akoana> the first version appears more readable to me, but taste varies
[06:07:37] <tirnanog> either that or: local db=$1 orig=$2 new=$3. anyway, up to you. I agree with akoana. for a simple script such as this, it's fine really.
[06:08:36] <tirnanog> if it were not immediately clear as to what it does at a glance, that's the point at which it might cross the line into heresy, as you put it.
[06:11:47] <tirnanog> perhaps the more important matter is that it doesn't check for errors other than in the case of diff.
[06:12:37] <ash_worksi> tirnanog: like what were you imagining?
[06:12:53] <ash_worksi> tirnanog: other than that and the ROOT env :P
[06:13:55] <tirnanog> well, I'm not familiar with these tools but pg_dump and psql can potentially fail, right? also, anything involving a redirection can potentially fail.
[06:14:17] *** Joins: odoood (~odoood@2601:c8:c003:a550::8)
[06:14:53] <ash_worksi> yes, that's true; so do you expect the redirects to be wrapped in `if`s?
[06:15:05] <ash_worksi> wrapped in `if ...; then` that is
[06:15:18] <ash_worksi> or `if ! ...; then` rather
[06:15:20] <tirnanog> given it's so short, you could just bung && on the end of most of the commands.
[06:15:35] <tirnanog> example impending.
[06:15:51] <ash_worksi> like && (echo 'you suck.'; exit 1) ?
[06:16:27] <ash_worksi> or more accurately `&& (echo 'psql failed.'; exit 1)` ?
[06:17:04] <akoana> more like  psql -scC --if-exists "$db" > "$orig" &&\n psql "$db" < "$revert" &&\n ...
[06:17:39] <tirnanog> https://termbin.com/h5ul
[06:17:41] <tirnanog> something like that.
[06:18:00] <ash_worksi> I see
[06:18:30] <ash_worksi> thanks for the help!
[06:19:03] *** Joins: FreeBDSM (~uzer@user/freebdsm)
[06:19:22] *** Quits: ash_worksi (~ash_m@user/ash-m/x-3292451) (Quit: leaving)
[06:19:46] *** Quits: n4dir (~user@mue-88-130-57-016.dsl.tropolys.de) (Ping timeout: 240 seconds)
[06:19:49] <FreeBDSM> Hi. Can I use `exec some.sh` inside a bash script twice? I'd expect it to run those sequentially.
[06:19:58] <FreeBDSM> !exec
[06:19:59] <greybot> exec [command] [redirections] # With a command, replace the shell process with the new command; without a command, apply the redirections to the current shell process. http://wiki.bash-hackers.org/commands/builtin/exec http://mywiki.wooledge.org/FileDescriptor
[06:20:36] <akoana> FreeBDSM: exec (when successful) never returns
[06:20:38] <tirnanog> "replace the shell process". no.
[06:20:40] *** Quits: yogoyo (~paddy@user/yogoyo) (Ping timeout: 256 seconds)
[06:21:32] <tirnanog> it's the old fork/exec one-two, in this case. unless it fails, indeed.
[06:21:42] *** Joins: n4dir (~user@i59F77C22.versanet.de)
[06:21:50] <FreeBDSM> I currently do 1st call `nohup my.1st.script.sh >/dev/null 2>&1 &` and only then `exec 2nd.script.sh`
[06:22:28] <FreeBDSM> this way I am left with a defunct process when 1st script finishes
[06:22:32] *** Joins: alzgh (~alzgh@216.155.158.214)
[06:22:32] *** Joins: yogoyo (~paddy@user/yogoyo)
[06:22:32] *** Quits: killown (~killown@user/killown) (Quit: Leaving)
[06:23:04] <FreeBDSM> oh, and 1 correction: I actually need to start both script in parallel, not sequentially
[06:23:18] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[06:25:50] <tirnanog> you should probably just drop the exec. if you want for the 2nd program to also be backgrounded, use & again.
[06:28:27] <FreeBDSM> okay, I'll just avoid exec for now. But what does `exec <>file` do?
[06:28:34] <tirnanog> also, if you have an actual need to dissasociate the first job, you can use "& disown" instead.
[06:29:13] <FreeBDSM> tirnanog: you mean put it inside the my.1st.script.sh?
[06:29:26] <tirnanog> e.g. foo & disown; bar
[06:29:34] <tirnanog> but you might not even need it. it depends.
[06:29:58] <akoana> exec <>file redirects stdout and stdin to/from file
[06:30:24] <tirnanog> and does so in a way that affects the present shell from thereon.
[06:30:57] *** Quits: Nanobot567 (~Nanobot56@108-195-7-3.lightspeed.nsvltn.sbcglobal.net) (Ping timeout: 245 seconds)
[06:31:19] <FreeBDSM> Please explain `foo & disown; bar` a bit more detailed: would it run `foo` as background job (and then immediately 'forget' about it so there'd be no 'defunct' process when it finishes) + sequentially run `bar`?
[06:31:19] <tirnanog> actually, <> operates only on stdin, in the absence of a file descriptor number.
[06:32:33] <akoana> yeah, only on 0
[06:32:39] <tirnanog> # ( exec <>file; ls -l /proc/self/fd/[012] >&2 )
[06:32:46] <shbot> tirnanog: lrwx------ 1 root root 64 Aug  5 02:02 /proc/self/fd/0 -> /root/file
[06:32:46] <shbot> tirnanog: l-wx------ 1 root root 64 Aug  5 02:02 /proc/self/fd/1 -> pipe:[306]
[06:32:46] <shbot> tirnanog: etc... ( http://ix.io/3v1F )
[06:33:41] *** Parts: brettgilio (~brettgili@45.55.53.68) (The Lounge - https://thelounge.chat)
[06:35:32] <akoana> and file will be created if it doesn't exist
[06:37:51] <tirnanog> disown will put it beyond the purview of bash's job control. in particular, given an interactive instance of bash, bash will no longer propagate SIGHUP to the job if it receives such a signal.
[06:38:02] *** Quits: neshpion (~neshpion@gateway/tor-sasl/neshpion) (Quit: neshpion)
[06:40:32] *** Quits: cisco87 (~quassel@lnxg33k.com) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[06:40:49] *** Joins: cisco87 (~quassel@lnxg33k.com)
[06:43:52] *** Joins: lq (~lq@116.228.78.179)
[06:45:27] *** Quits: lq820105 (~lq@210.72.8.212) (Ping timeout: 250 seconds)
[06:46:18] <tirnanog> also, take a look at faq 63 in the event that ssh is involved in any way.
[06:48:19] <FreeBDSM> thanks, tirnanog and akoana
[06:53:30] *** Joins: LiftLeft (~LiftLeft@191.96.150.150)
[06:55:09] *** Joins: lq820105 (~lq@116.228.78.179)
[06:55:17] *** Quits: lq (~lq@116.228.78.179) (Read error: Connection reset by peer)
[07:07:44] *** Joins: sublim20 (~sublim20@user/sublim20)
[07:08:25] *** Joins: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca)
[07:10:03] *** Quits: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca) (Client Quit)
[07:10:28] *** Joins: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca)
[07:11:32] *** Quits: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca) (Changing host)
[07:11:32] *** Joins: dangrenier83 (~user@user/dangrenier83)
[07:11:38] *** Joins: jos2 (~jos3@dyndsl-091-096-035-113.ewe-ip-backbone.de)
[07:12:04] *** Quits: dangrenier83 (~user@user/dangrenier83) (Client Quit)
[07:12:18] *** Joins: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca)
[07:12:19] *** Quits: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca) (Changing host)
[07:12:19] *** Joins: dangrenier83 (~user@user/dangrenier83)
[07:15:18] *** Quits: jos1 (~jos3@dyndsl-178-142-066-157.ewe-ip-backbone.de) (Ping timeout: 252 seconds)
[07:15:50] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[07:20:48] *** Joins: lq (~lq@116.228.78.181)
[07:21:21] *** Joins: MercilessDeth (~brad@136.49.61.2)
[07:22:14] *** Quits: lq820105 (~lq@116.228.78.179) (Ping timeout: 258 seconds)
[07:23:19] *** Quits: dangrenier83 (~user@user/dangrenier83) (Quit: Leaving)
[07:23:34] *** Joins: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca)
[07:23:34] *** Quits: dangrenier83 (~user@modemcable059.178-59-74.mc.videotron.ca) (Changing host)
[07:23:34] *** Joins: dangrenier83 (~user@user/dangrenier83)
[07:30:05] *** Joins: lq820105 (~lq@180.167.42.10)
[07:30:41] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[07:32:34] *** Quits: lq (~lq@116.228.78.181) (Ping timeout: 240 seconds)
[07:33:22] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Remote host closed the connection)
[07:33:44] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 258 seconds)
[07:35:24] *** Joins: totenkoph (~scythe@user/totenkoph)
[07:36:13] *** Quits: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net) (Read error: Connection reset by peer)
[07:37:02] *** Joins: shokohsc (~shokohsc@161.88.195.77.rev.sfr.net)
[07:39:23] *** Parts: akoana (~ah@user/akoana) ()
[07:40:01] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Quit: WeeChat 3.2)
[07:40:18] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:40:38] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[07:40:51] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[07:45:41] *** Quits: igemnace (~ian@user/igemnace) (Quit: WeeChat 3.2)
[07:46:05] *** Joins: igemnace (~ian@user/igemnace)
[07:49:16] *** Quits: igemnace (~ian@user/igemnace) (Client Quit)
[07:49:42] *** Joins: igemnace (~ian@user/igemnace)
[07:54:32] *** Joins: ferdna (~ferdna@user/ferdna)
[07:55:02] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[07:58:45] *** Quits: alzgh (~alzgh@216.155.158.214) (Quit: Client closed)
[08:01:45] *** Joins: Sasazuka (~Sasazuka@user/sasazuka)
[08:02:00] *** Quits: Sasazuka (~Sasazuka@user/sasazuka) (Client Quit)
[08:08:45] <lockywolf> How do I use AND in a [[ ]] check?
[08:09:05] <dre> [[ test && test2 ]];
[08:09:15] <lockywolf> I can use [ ] AND [ ] , but as far as I understand, this summons two separate processes.
[08:12:00] <yitz> [ doesn't spawn a new process
[08:12:04] *** Quits: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (Remote host closed the connection)
[08:12:44] *** Joins: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net)
[08:12:56] <lockywolf> thank you, dre
[08:13:20] <lockywolf> isn't /usr/bin/[ a program ?
[08:13:34] <phy1729> it's often a builtin
[08:13:48] <lockywolf> Or does bash treat the `if [` not like `if /usr/bin/[` ?
[08:13:59] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Ping timeout: 258 seconds)
[08:14:04] <lockywolf> ah, got it
[08:14:44] <yitz> lockywolf:   type -a [
[08:16:09] <lockywolf> shell builtin, thank you
[08:20:11] *** ekaj is now known as a1
[08:20:19] *** Joins: auk (auk@gateway/vpn/protonvpn/auk)
[08:21:55] *** Quits: n4dir (~user@i59F77C22.versanet.de) (Remote host closed the connection)
[08:23:07] *** Joins: sublim20 (~sublim20@user/sublim20)
[08:27:13] *** Joins: tijuco (~tijuco@user/tijuco)
[08:27:27] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[08:28:48] *** sublim20 is now known as Omega_Karen
[08:33:32] *** Omega_Karen is now known as sublim20
[08:33:43] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[08:34:58] <sublim20> hey all, anyone use here strings with comm?   i've tried, comm -12 <<< "$varOne" <<< "$varTwo"  but comm gives an error
[08:36:02] *** Quits: Burrr (~Burrr@urmomma-fux0rs-with.burrr.nl) (Ping timeout: 252 seconds)
[08:36:34] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[08:37:14] <llua> have you seen the man page of comm before
[08:38:23] <sublim20> i briefly read the options, but not the whole
[08:38:26] <sublim20> errr, flags
[08:38:39] <llua> did you notice what comm works with?
[08:39:03] <llua> its in the synopsis
[08:39:25] <sublim20> are you referring to the part, When FILE1 or FILE2 (not both) is -, read standard input
[08:39:27] <sublim20> ?
[08:39:42] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 245 seconds)
[08:39:48] *** Quits: omnigoat (~omnigoat@user/omnigoat) (Ping timeout: 265 seconds)
[08:41:19] *** Quits: FlippY (~flip@flipperdeflapper.flapperdeflipper.com) (Remote host closed the connection)
[08:41:43] <tirnanog> herestrings are not stand-ins for files.
[08:42:24] <tirnanog> you could, at best, specify one herestring to interoperate with the "-" argument. perhaps you wanted process substitution instead.
[08:43:16] <sublim20> wait, herestrings are NOT stand-ins for files?   that was my understanding
[08:43:56] <sublim20> process substitution will work, but the creation of subshells is probably slow
[08:44:03] <llua> they are files, connected to fd0, comm expects two filenames to be given to it
[08:44:28] <ormaaj> they can be but you've discaded the first fd replacing it with the second
[08:44:35] <tirnanog> <<< can also result in a subshell, unless the payload is short and you have a very recent version of bash (5.1, iirc).
[08:44:45] <tirnanog> actually, not a subshell. rather, a tempfile.
[08:45:06] <tirnanog> anyway, they're not.
[08:46:01] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[08:46:04] <sublim20> ormaaj, the second replaces the first?
[08:46:34] * sublim20 goes onto wooledge and reads up on here strings
[08:46:38] <ormaaj> yes because when you don't specify a fd number it defaults to stdin
[08:47:01] <sublim20> fd number?
[08:47:29] <sublim20> appreciate the help / conversation everyone is giving btw.  thank you.
[08:47:55] <ormaaj> file descriptor. stdin is 0
[08:49:08] <ormaaj> comm manual doesn't say that it reads from stdin anyway so that doesn't really help you
[08:49:45] <sublim20> the man page does mention that file1 or file2 can be std in (with -) but NOT both
[08:50:03] <ormaaj> it might accept `-` or bodge it with `/dev/fd/`
[08:51:12] <sublim20> so the command, comm - <<< "$varOne" - <<< "$varTwo",  doesn't work, cause it's trying to read two different things from the same source ( std in) ?
[08:52:06] <tirnanog> yes. besides, you can't specify - twice anyway (how would it even work). 
[08:53:25] *** Joins: gnoo (~gnoo@user/gnoo)
[08:53:59] <sublim20> heh.  does seem silly now with the knowledge the chats provided
[08:54:20] <a1> tirnanog: obviously just do -- /s
[08:54:27] <tirnanog> comm -12 <(printf %s "$x") <(printf %s "$y") or printf %s "$x" | comm -12 - <(printf %s "$y") are among the solutions. or, use a herestring to feed - but know that herestrings append a newline that was not originally there, which could offend comm.
[08:54:36] <tirnanog> a1: heh
[08:54:57] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[08:55:07] <tirnanog> (both of those examples assume that x and y terminate with a newline)
[08:55:19] <sublim20> understood
[08:55:28] *** Joins: spengler_ (~spengler_@117.222.68.20)
[08:56:51] <tirnanog> # x=$'1\n2\n' y=$'2\n3\n'; comm -12 - <(printf %s "$y") <<<"$x"
[08:56:52] <shbot> tirnanog: 2
[08:56:52] <shbot> tirnanog: comm: file 1 is not in sorted order
[08:57:02] <tirnanog> see, the problem is that the herestring is tacking on an additional $'\n' there.
[08:57:25] <tirnanog> however.
[08:57:39] <tirnanog> # x=$'1\n2' y=$'2\n3'; comm -12 - <(printf '%s\n' "$y") <<<"$x"
[08:57:40] <shbot> tirnanog: 2
[08:57:42] <tirnanog> is ok.
[08:57:47] *** Joins: vishal (~vishal@fedora/vishal)
[08:58:14] <spengler_> i normally pipe the output of my programs to vim for debugging like `perl hello.pl | vi -`. but when i tried this with Node.js now, the terminal started logging every keystroke in vim as if i'm automatically in insert mode. the same thing happens if i pipe it to less too. any idea what's happening?
[08:58:48] <sublim20> tirnanog, didn't know that aspect about here strings.  that seems pretty important to know actually.  
[08:58:52] <tirnanog> yeah.
[09:00:01] <sublim20> thanks
[09:01:36] <a1> :q
[09:02:53] <tirnanog> spengler_: are you able to provide some small program to reproduce this behaviour?
[09:04:23] *** Quits: AnAverageHuman (~AnAverage@user/anaveragehuman) (Ping timeout: 244 seconds)
[09:05:30] *** Joins: yuesbeez (uid458354@id-458354.tinside.irccloud.com)
[09:08:26] <spengler_> tirnanog: if one has `Node.js` installed, one could run even a simple `console.log(hello, world)` in it and instead of logging the output to terminal just pipe it to vim or less, etc. any keystroke i press after that is logged onto the screen.
[09:09:36] <tirnanog> to be clear, do you mean in the fashion of node -e 'console.log("hello world")'?
[09:10:25] <tirnanog> because that works here.
[09:11:34] *** Quits: auk (auk@gateway/vpn/protonvpn/auk) (Quit: Leaving)
[09:12:05] *** Joins: spengler__ (~spengler_@59.88.27.13)
[09:12:28] <spengler__> i'm terribly sorry my connection died unexpectedly. was there any reply i missed?
[09:13:11] <tirnanog> I tested node -e 'console.log("hello world")' | vim - and found it to work as expected.
[09:13:30] *** Quits: spengler_ (~spengler_@117.222.68.20) (Ping timeout: 256 seconds)
[09:15:17] <a1> spengler__: no
[09:17:18] *** xiaomiao is now known as bonsaikitten
[09:17:27] *** bonsaikitten is now known as xiaomiao
[09:19:45] <spengler__> tirnanog: thanks! i see now that it's a problem with nvim. i don't know what made me observe less behave like that. it doesn't anymore. i thought it must have been related to some escape sequence in bash. never mind, though.
[09:20:39] <tirnanog> works for me also in nvim 0.5.0, for what it's worth.
[09:21:36] *** Joins: Frnt (~Frenetick@gw.ptr-80-238-209-252.customer.ch.netstream.com)
[09:21:37] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[09:22:59] *** Quits: odoood (~odoood@2601:c8:c003:a550::8) (Ping timeout: 258 seconds)
[09:25:47] *** Quits: llua (~llua@zsh/developer/llua) (Quit: <Rudolph> shell code is what greycat reads to kids when he tucks them in)
[09:26:31] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[09:29:10] *** Quits: dangrenier83 (~user@user/dangrenier83) (Quit: Leaving)
[09:30:01] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:30:32] *** Quits: spengler__ (~spengler_@59.88.27.13) (Ping timeout: 245 seconds)
[09:31:21] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:31:53] *** Joins: llua (~llua@zsh/developer/llua)
[09:40:29] *** Joins: spengler___ (~spengler_@59.88.28.42)
[09:52:19] *** Quits: et (~et@user/et) (Quit: ZNC 1.8.0 - https://znc.in)
[09:52:26] *** Quits: themachine (~themachin@user/themachine) (Remote host closed the connection)
[09:52:38] *** Joins: themachine (~themachin@user/themachine)
[09:52:40] *** Joins: et (~et@user/et)
[09:53:53] *** Joins: roadie (~user@2a02:8108:ec0:1427:e8b1:8908:a3c8:856e)
[10:11:02] *** Joins: n4dir (~user@i59F77C22.versanet.de)
[10:15:20] *** Joins: makara (~sol@196.61.111.63)
[10:22:54] *** Joins: absc (~absc@dynamic-adsl-94-34-194-170.clienti.tiscali.it)
[10:22:56] *** Quits: absc (~absc@dynamic-adsl-94-34-194-170.clienti.tiscali.it) (Client Quit)
[10:27:33] *** Quits: reset (~reset@user/reset) (Quit: reset)
[10:33:15] *** Quits: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072) (Ping timeout: 244 seconds)
[10:35:39] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[10:36:07] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[10:43:24] *** Quits: qub411 (~user@203-219-207-138.tpgi.com.au) (Quit: WeeChat 2.3)
[10:45:40] <snappy> \
[10:55:04] *** Joins: Lord_of_Life_ (~Lord@user/lord-of-life/x-2819915)
[10:55:35] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 268 seconds)
[10:56:19] *** Lord_of_Life_ is now known as Lord_of_Life
[11:02:02] *** Joins: sublim20 (~sublim20@user/sublim20)
[11:07:21] *** Joins: rendar (~rendar@user/rendar)
[11:13:48] *** Joins: Burrr (~Burrr@urmomma-fux0rs-with.burrr.nl)
[11:15:18] *** Quits: roadie (~user@2a02:8108:ec0:1427:e8b1:8908:a3c8:856e) (Ping timeout: 258 seconds)
[11:18:47] *** Joins: lavaball (felix@31.204.155.215)
[11:18:53] *** Quits: LiftLeft (~LiftLeft@191.96.150.150) (Ping timeout: 250 seconds)
[11:18:55] *** Quits: xall (~xall@2600:8800:8c02:3600:8c93:8d86:e6a4:7638) (Quit: Client closed)
[11:21:19] *** Joins: vysn (~vysn@user/vysn)
[11:23:54] *** Quits: spengler___ (~spengler_@59.88.28.42) (Quit: leaving)
[11:26:02] *** Quits: richardm75 (~richardm7@2600:8801:c502:1000:74c6:902a:b5b9:40bf) (Ping timeout: 258 seconds)
[11:26:19] *** Joins: absc (~absc@dynamic-adsl-94-34-194-170.clienti.tiscali.it)
[11:26:24] *** Quits: absc (~absc@dynamic-adsl-94-34-194-170.clienti.tiscali.it) (Client Quit)
[11:27:11] *** Joins: __jmcantrell__ (~weechat@user/jmcantrell)
[11:28:21] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[11:30:38] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Ping timeout: 272 seconds)
[11:33:42] *** Quits: austin987 (~null@100.42.98.196) (Ping timeout: 258 seconds)
[11:35:25] *** Joins: qub411 (~user@203-219-207-138.tpgi.com.au)
[11:41:35] *** Joins: roadie (~user@2a02:8108:ec0:1427:e8b1:8908:a3c8:856e)
[11:42:36] *** Joins: lilalinu_ (~lilalinux@p549ee776.dip0.t-ipconnect.de)
[11:42:47] *** Joins: mohabaks_ (~mohabaks@gateway/tor-sasl/mohabaks)
[11:45:09] *** Quits: n4dir (~user@i59F77C22.versanet.de) (Remote host closed the connection)
[11:46:37] *** Quits: roadie (~user@2a02:8108:ec0:1427:e8b1:8908:a3c8:856e) (Ping timeout: 250 seconds)
[11:46:38] *** Quits: ufk (~ufk@2001:4cd0:aa00:54:40e4:e83f:476:9a5d) (Quit: ZNC 1.8.2 - https://znc.in)
[11:47:12] *** Joins: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com)
[11:49:09] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Read error: Connection reset by peer)
[11:54:44] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Quit: = "")
[11:55:06] *** Joins: karakedi (~eAC53C340@user/karakedi)
[11:56:57] *** Joins: zhangxiaofei (~fzhan@111.203.234.210)
[11:58:29] *** Joins: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it)
[11:59:13] <zitter> Hi, can someone tell me what -z option means in this staement -> if [ -z "$(ls -A /etc/my.cnf.d/* 2> /dev/null)" ]; then  ? TIA
[12:01:10] <Soliton> # help test | grep -- -z
[12:01:11] <shbot> Soliton:       -z STRING      True if string is empty.
[12:01:14] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[12:01:28] <Soliton> !faq empty
[12:01:28] <greybot> https://mywiki.wooledge.org/BashFAQ/004 -- How can I check whether a directory is empty or not?  How do I check for any *.mpg files, or count how many there are?
[12:02:53] *** Joins: TomyWork (~TomyLobo@p200300e80f133c0099fbaea743b3eb58.dip0.t-ipconnect.de)
[12:09:33] <zitter> TY
[12:11:35] *** Quits: __jmcantrell__ (~weechat@user/jmcantrell) (Quit: WeeChat 3.2)
[12:12:31] *** Joins: roadie (~user@2a02:8108:ec0:1427:e8b1:8908:a3c8:856e)
[12:15:36] *** Quits: son0p (~ff@181.136.122.143) (Ping timeout: 272 seconds)
[12:21:06] *** Quits: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (Ping timeout: 240 seconds)
[12:27:57] *** Joins: earnestly (~earnest@user/earnestly)
[12:29:54] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Remote host closed the connection)
[12:30:17] *** Joins: shad (~shad@user/shad)
[12:30:28] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[12:30:42] *** Quits: roadie (~user@2a02:8108:ec0:1427:e8b1:8908:a3c8:856e) (Ping timeout: 240 seconds)
[12:41:26] *** Quits: Betal (~Beta@user/betal) (Quit: WeeChat 3.2)
[12:41:26] *** Quits: lilalinu_ (~lilalinux@p549ee776.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[12:41:35] *** Joins: lilalin__ (~lilalinux@p549ee776.dip0.t-ipconnect.de)
[12:43:21] *** Joins: mongrel (uid508343@id-508343.charlton.irccloud.com)
[12:46:45] *** Quits: lilalin__ (~lilalinux@p549ee776.dip0.t-ipconnect.de) (Remote host closed the connection)
[12:52:54] *** Joins: lilalinu_ (~lilalinux@p549ee776.dip0.t-ipconnect.de)
[12:53:15] *** Joins: Bhavuk (~BTaneja@122.173.26.189)
[12:56:19] *** Joins: jmcantrell (~weechat@user/jmcantrell)
[12:58:25] *** Quits: dre (~dre@2001:8003:c932:c301:ceba:8234:4850:924e) (Ping timeout: 258 seconds)
[13:00:42] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Read error: Connection reset by peer)
[13:08:57] *** Joins: wedwards (~wedwards@rtr0.17.31.bogert.cyberfusion.cloud)
[13:10:15] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[13:10:34] *** Joins: Mo (~Mo@dynamic-077-008-210-209.77.8.pool.telefonica.de)
[13:15:33] *** Joins: magla (~gelignite@55d4e731.access.ecotel.net)
[13:19:34] *** Joins: __jmcantrell__ (~weechat@user/jmcantrell)
[13:20:25] *** Joins: autopsy (~autopsy@ip70-190-159-27.ph.ph.cox.net)
[13:20:51] *** Joins: jmcantre1 (~weechat@user/jmcantrell)
[13:22:50] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Ping timeout: 256 seconds)
[13:23:57] *** Quits: yogoyo (~paddy@user/yogoyo) (Quit: WeeChat 3.2)
[13:24:17] *** Quits: __jmcantrell__ (~weechat@user/jmcantrell) (Ping timeout: 245 seconds)
[13:30:47] *** Quits: cmc (~methos@gateway/tor-sasl/cmc) (Remote host closed the connection)
[13:30:53] *** jmcantre1 is now known as jmcantrell
[13:31:00] *** Quits: rcernin (~rcernin@188.146.148.122.sta.wbroadband.net.au) (Ping timeout: 258 seconds)
[13:31:09] *** Joins: cmc (~methos@gateway/tor-sasl/cmc)
[13:33:27] *** Quits: yuesbeez (uid458354@id-458354.tinside.irccloud.com) (Quit: Connection closed for inactivity)
[13:38:34] *** Quits: jmcantrell (~weechat@user/jmcantrell) (Quit: WeeChat 3.2)
[13:39:38] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:42:03] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[13:46:43] *** Quits: Mo (~Mo@dynamic-077-008-210-209.77.8.pool.telefonica.de) (Ping timeout: 258 seconds)
[13:48:08] *** Joins: loganlee (~Thunderbi@user/loganlee)
[13:53:08] *** Joins: thiras (~thiras@user/thiras)
[13:54:34] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[13:59:06] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Ping timeout: 240 seconds)
[13:59:17] *** Quits: downtrip (~downtrip@188.166.151.198) (Quit: WeeChat 3.2)
[14:01:14] *** Joins: downtrip (~downtrip@188.166.151.198)
[14:07:54] *** Joins: jetchisel (jetchisel@user/jetchisel)
[14:07:56] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[14:09:02] <lockywolf> What does the >& redirect mean in bash?
[14:09:21] <lockywolf> I have seen 1>&2 and &> , but not >& 
[14:09:48] <Soliton> !>&
[14:09:48] <greybot> >&word where word is a number or - is FD duplication or closing. A plain >& or >&word (word not numeric or -) is just like &> -- cmd >& file is equivalent to cmd >file 2>&1 but the former is bash- and csh-only.
[14:10:29] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 250 seconds)
[14:14:57] *** Quits: potamides (~amnifiliu@p5df14fc4.dip0.t-ipconnect.de) (Quit: WeeChat 3.2)
[14:16:18] *** Joins: dre (~dre@2001:8003:c932:c301:d99a:7bc6:6e11:ccd2)
[14:16:40] <lockywolf> is 256 a valid exit status?
[14:17:26] <Soliton> !exit
[14:17:26] <greybot> Every Unix process returns an exit status code to its parent. This is an unsigned 8-bit integer, 0 to 255 inclusive, with 0 meaning "success" and 1-255 meaning "failure". A script returns the exit status of the last command executed, unless you call "exit" with an argument. Functions "return" an 8-bit status code also.
[14:18:32] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[14:18:55] *** Quits: dre (~dre@2001:8003:c932:c301:d99a:7bc6:6e11:ccd2) (Remote host closed the connection)
[14:19:16] *** Quits: zitter (~danilodim@93-57-35-194.ip162.fastwebnet.it) (Quit: Leaving)
[14:20:27] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 258 seconds)
[14:22:00] <lockywolf> ah, hehe
[14:23:18] *** Joins: potamides (~amnifiliu@2003:a:270f:c400:28d8:e046:7d92:3970)
[14:24:52] *** Joins: omnigoat (~omnigoat@user/omnigoat)
[14:31:07] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[14:33:08] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Remote host closed the connection)
[14:33:11] *** Joins: sinaowolabi (~SinaOwola@41.190.2.136)
[14:36:19] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[14:38:09] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Remote host closed the connection)
[14:38:19] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[14:40:22] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[14:40:34] *** Quits: yamchah2 (~yamchah2@user/yamchah2) (Ping timeout: 240 seconds)
[14:42:41] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[14:42:41] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[14:43:00] *** Joins: yamchah2 (~yamchah2@user/yamchah2)
[14:47:14] *** Parts: fernandobasso (~fernandob@192.251.132.34.bc.googleusercontent.com) (WeeChat 2.8)
[14:52:11] *** Joins: gnooooo (~gnoo@user/gnoo)
[14:54:41] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[14:57:29] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[14:58:42] *** Joins: kspalaiologos (~kspalaiol@user/kspalaiologos)
[15:01:25] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Read error: Connection reset by peer)
[15:04:59] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Remote host closed the connection)
[15:06:09] *** gnooooo is now known as gnoo
[15:09:10] *** Joins: nobody_ (~nobody@host-79-45-186-108.retail.telecomitalia.it)
[15:12:06] *** Joins: reset (~reset@user/reset)
[15:12:11] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[15:12:16] *** Joins: karakedi (~eAC53C340@user/karakedi)
[15:12:57] *** Quits: mongrel (uid508343@id-508343.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[15:13:03] *** Joins: seninha (~seninha@user/seninha)
[15:14:40] *** Joins: PinealGlandOptic (~PinealGla@37.115.210.35)
[15:16:16] <lsrtl__> hi, there is a setting in a bash script, so if it is on then the script will fail if any of the statement inside fail. can't recall what was that setting
[15:16:52] <geirha> not really
[15:16:58] <geirha> !-e
[15:16:58] <greybot> "set -e" is an inheritance of the old bourne shell, and doesn't really work well with modern shell features. You'll really have less buggy scripts if you do the error handling manually instead of relying on the unreliable "set -e"; see http://mywiki.wooledge.org/BashFAQ/105
[15:21:26] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[15:24:19] <lsrtl__> thx
[15:25:17] <lsrtl__> !-u
[15:25:18] <greybot> ''set -u'' or ''set -o nounset'', makes the use of unset variables sometimes cause a fatal error. If you want to detect typoed variable names, use shellcheck instead. See http://mywiki.wooledge.org/BashFAQ/112
[15:26:07] <geirha> !pf euo
[15:26:07] <greybot> https://mywiki.wooledge.org/BashPitfalls#pf60 -- Don't do this! -- set -euo pipefail
[15:28:35] *** Joins: geli (~gelignite@55d4244c.access.ecotel.net)
[15:30:51] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Ping timeout: 244 seconds)
[15:31:22] *** Quits: magla (~gelignite@55d4e731.access.ecotel.net) (Ping timeout: 245 seconds)
[15:32:47] <lsrtl__> I won't ;)
[15:33:55] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[15:36:54] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[15:42:28] *** Joins: julius_c (~julius_c@197.red-88-0-60.dynamicip.rima-tde.net)
[15:42:59] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[15:43:54] *** Joins: n4dir (~user@i59F77C22.versanet.de)
[15:45:56] *** Joins: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com)
[15:51:06] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Ping timeout: 240 seconds)
[16:02:03] *** Joins: sublim20 (~sublim20@user/sublim20)
[16:02:49] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[16:04:24] *** Quits: mongy (~mongy@user/mongy) (Quit: WeeChat 3.2)
[16:07:28] *** Quits: downunder (~downunder@110.151.122.76) (Quit: WeeChat 3.2)
[16:13:23] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[16:15:31] *** Joins: cdown (~cdown@89.32.122.5)
[16:19:54] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Ping timeout: 240 seconds)
[16:26:13] *** Joins: jellyknight (~gelignite@55d4d9f5.access.ecotel.net)
[16:28:34] *** Quits: geli (~gelignite@55d4244c.access.ecotel.net) (Ping timeout: 240 seconds)
[16:28:52] *** Quits: YHVH (~yhvh@2601:982:8300:8090:50fe:b779:40bd:6b91) (Ping timeout: 272 seconds)
[16:31:42] *** Joins: kurahaupo (~kurahaupo@pa49-195-104-15.pa.nsw.optusnet.com.au)
[16:31:52] *** Joins: shad (~shad@user/shad)
[16:34:29] *** Joins: yogoyo (~yogoyo@user/yogoyo)
[16:41:13] *** Joins: YHVH (~yhvh@2601:982:8300:8090:a09d:5f40:6d86:e7a)
[16:42:23] *** Joins: kill (~killown@user/killown)
[16:42:33] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[16:43:09] <ash_worksi> if I want to return the value of a command's exit code from a function, do I do `command ...; return "$?"` ?
[16:44:45] <Soliton> just return is the same.
[16:45:02] <ormaaj> ash_worksi: No return is "transparent" to the exit code. And return is only needed at all if you need to explicitly return.
[16:47:17] <ash_worksi> oh so just `command ...` then?
[16:47:32] <ormaaj> ya
[16:48:36] *** Joins: rustyshackleford (uid236774@id-236774.brockwell.irccloud.com)
[16:49:08] <ash_worksi> how about if I want to check the exit status in a trap?
[16:49:33] *** Joins: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net)
[16:49:40] <ash_worksi> like if [[ "$?" != 0 ]]; then ...
[16:50:15] <ash_worksi> like trap 'if [[ "$?" != 0 ]]; then (undo stuff you did); fi' EXIT
[16:50:41] <ormaaj> sure that works.
[16:51:06] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 258 seconds)
[16:51:57] <ash_worksi> are global variables availble in a trap?
[16:52:30] <ash_worksi> (like if I set $var=/path/to/file, can I use `$var` in trap ' ... '?
[16:52:32] <ash_worksi> )
[16:52:35] <ormaaj> like ones you've set with `typeset -g`? They aren't special.
[16:53:04] <geirha> yes, even local variables if it was triggered from a function
[16:53:06] <ash_worksi> sorry, I need to learn the term, I just mean a variable I'd set at the top of a script
[16:53:14] <ash_worksi> geirha: oh neat
[16:53:17] <ash_worksi> thanks
[16:57:14] *** Quits: jellyknight (~gelignite@55d4d9f5.access.ecotel.net) (Ping timeout: 258 seconds)
[16:57:36] *** Joins: magla (~gelignite@55d4e9d2.access.ecotel.net)
[16:57:41] <ash_worksi> I want a script to die and trigger a do some clean up if a command in a function fails; in order to do that, do I have to do `if ! command ...; then exit 1; fi` ?
[16:58:02] <ash_worksi> (in order to trigger a trap)
[16:59:02] <Soliton> cmd || exit
[16:59:04] <geirha> command || exit    or   command || { printf >&2 'Some error message\n'; exit 1; }
[17:02:02] *** Joins: cdown_ (~cdown@163.114.131.1)
[17:02:04] <ash_worksi> I am actually not realizing that my trap is kind of unnecessary... I am trying to improve this https://gist.github.com/ash-m/b8399b244bb39f1528d3d09b46fdada9 ; I was thinking I basically want to execute line 17 if anything fails between lines 22-28
[17:02:08] <ash_worksi> now*
[17:03:17] *** Joins: speckz (~speckz@2600:1700:ce0:bf00:8808:b77:b3cf:f827)
[17:03:25] <ash_worksi> can/should I just append `|| { psql < "$orig"; exit 1; }` to the end of each `cmp_schemas` ?
[17:04:03] <ash_worksi> (and clean up the if to just be a diff)
[17:04:54] *** Quits: cdown (~cdown@89.32.122.5) (Ping timeout: 258 seconds)
[17:05:55] <ash_worksi> like so... https://gist.github.com/ash-m/b8399b244bb39f1528d3d09b46fdada9
[17:06:17] <ash_worksi> or does that suffer from a &&..&&..|| chain pitfall?
[17:07:23] *** bwe_ is now known as bwe
[17:08:53] *** Joins: AnAverageHuman (~AnAverage@user/anaveragehuman)
[17:12:04] *** Frnt is now known as Freneticks
[17:13:48] <tirnanog> using a trap isn't such a bad idea.
[17:16:35] <ash_worksi> tirnanog: okay... but then I would still need `|| exit` after cmp_schemas, right?
[17:16:35] <tirnanog> here's one possible approach: https://termbin.com/73n9
[17:17:48] <ash_worksi> I see... what is generally the unadvised approach to using `set -e` ?
[17:19:13] <tirnanog> it's a good way of introducing surprising bugs. I wouldn't normally recommend it. but, in this case, it's just a serious of commands that would otherwise have to either be chained with &&, or have "|| exit" appended, and there shouldn't be any side-effects.
[17:19:38] <ormaaj> all of them
[17:20:08] <tirnanog> anyway, there's a long article about it at the wiki.
[17:20:23] <ash_worksi> link?
[17:20:50] <ash_worksi> on http://mywiki.wooledge.org/?
[17:21:07] <tirnanog> the point is, you can set a trap as a guard then get rid of it after you're satisfied that everything that needed to be done has been.
[17:21:21] <ash_worksi> found it
[17:21:26] <ash_worksi> ! set-e
[17:21:31] <ash_worksi> !set-e
[17:21:31] <greybot> "set -e" is an inheritance of the old bourne shell, and doesn't really work well with modern shell features. You'll really have less buggy scripts if you do the error handling manually instead of relying on the unreliable "set -e"; see http://mywiki.wooledge.org/BashFAQ/105
[17:21:35] <tirnanog> and that seems to be a good match for your intentions here.
[17:21:48] <ash_worksi> thanks tirnanog 
[17:22:32] *** Quits: n4dir (~user@i59F77C22.versanet.de) (Remote host closed the connection)
[17:23:04] <tirnanog> here's a non-errexit-using version, if you prefer: https://termbin.com/6rht
[17:24:25] *** Quits: acidsys (~LSD@2.lsd.systems) (Excess Flood)
[17:24:59] *** Joins: LSD (~LSD@2.lsd.systems)
[17:25:17] *** Joins: odoood (~odoood@2601:c8:c003:a550::8)
[17:26:36] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[17:26:44] *** Joins: Adoi (~Adoi@user/adoi)
[17:29:10] <ash_worksi> thats a lot of && s
[17:29:14] <ash_worksi> thanks though
[17:29:57] <ash_worksi> I ran `export ROOT='/repo'; ./test.sh "$db" file` and it's claiming $ROOT not set
[17:30:35] <tirnanog> you want -z, not -n. alternatively, [[ ! $ROOT ]].
[17:30:35] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 258 seconds)
[17:31:21] <ash_worksi> huh... how did I go this long without realizing that
[17:31:26] *** Joins: thiras (~thiras@user/thiras)
[17:31:27] <tirnanog> I have absolutely no idea.
[17:31:33] <ash_worksi> I could've sworn I ran this correctly earlier
[17:31:53] <tirnanog> well, ROOT was probably empty, undefined or unexported the entire time.
[17:32:16] <tirnanog> that's the only way it could have run.
[17:33:37] *** Joins: shabius (~shabius@2a0e:1c80:2:1022::1006)
[17:34:44] <ash_worksi> tirnanog: yeah, my old script that I didn't put on gist uses -z
[17:35:04] <tirnanog> that's a funny bug to introduce.
[17:38:40] <ash_worksi> and suddenly `--if-exists` option to psql isn't working
[17:38:46] *** Joins: darkbit (~db@152.32.99.67)
[17:39:55] *** Joins: Kruppt (~Kruppt@50.111.9.86)
[17:40:33] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[17:40:45] <ash_worksi> tirnanog: another thing is I proabably want to set the trap AFTER the first dump
[17:41:03] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[17:41:05] <ash_worksi> so that, it doesn't try to revert if it can't dump
[17:41:20] <tirnanog> fine.
[17:42:01] *** Joins: paulgrmn (~paulgrmn@user/paulgrmn)
[17:42:21] <ash_worksi> like so, I think: https://gist.github.com/ash-m/b8399b244bb39f1528d3d09b46fdada9
[17:43:19] <tirnanog> looks ok.
[17:44:53] *** Quits: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479) (Quit: cable management etc.)
[17:45:51] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:47:52] <kurahaupo> technically "ROOT not set" isn't the same as "ROOT empty"
[17:49:14] <tirnanog> this is true. I usually write "... is empty or unset" or such.
[17:50:46] <kurahaupo> (but it's just an error message, so the user can figure it out)
[17:51:52] *** Joins: WinterStar (~IceLight@user/icelight)
[17:53:20] *** Joins: fortuno51 (~fortuno51@37.120.156.254)
[17:54:21] *** Quits: shad (~shad@user/shad) (Ping timeout: 258 seconds)
[17:56:01] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[17:56:11] *** Joins: shad (~shad@user/shad)
[17:58:14] <ash_worksi> if I do `cmda && cmdb >> log` will the log get both output from cmda and cmdb?
[18:00:12] <Soliton> i wonder if there is a way to find out.
[18:00:41] *** Joins: RickDeckard (~RickDecka@pool-100-12-189-215.nycmny.fios.verizon.net)
[18:02:13] <kurahaupo> { cmdA && cmdB; } >> log
[18:03:29] <kurahaupo> Bear in mind that redirections after a compound command are done before any inside it, not in the "natural" order
[18:03:52] *** Quits: yogoyo (~yogoyo@user/yogoyo) (Quit: bye)
[18:05:28] <kurahaupo> So « { cmdA >&3- ; cmdB 2>&3- ; } 3>oddlog » will put stdout of cmdA and stderr of cmdB into oddlog
[18:08:36] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[18:11:07] *** Joins: geli (~gelignite@55d40e37.access.ecotel.net)
[18:12:22] *** Quits: magla (~gelignite@55d4e9d2.access.ecotel.net) (Ping timeout: 258 seconds)
[18:13:31] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 258 seconds)
[18:14:27] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[18:16:45] *** Quits: speckz (~speckz@2600:1700:ce0:bf00:8808:b77:b3cf:f827) (Quit: Textual IRC Client: www.textualapp.com)
[18:18:27] <ash_worksi> is there a way to show what file is being redirected to psql using something similar to `set -x` ?
[18:19:10] <ash_worksi> kurahaupo: thanks
[18:19:39] *** Joins: zeden (~zeden@user/zeden)
[18:19:56] *** Quits: Bhavuk (~BTaneja@122.173.26.189) (Quit: Leaving)
[18:20:08] <kurahaupo> ash_worksi: No, set -x only shows commands after redirections and expansions have been evaluated
[18:20:12] *** Joins: Bhavuk (~BTaneja@122.173.26.189)
[18:21:25] *** Joins: wstrnr (uid510617@id-510617.tooting.irccloud.com)
[18:21:46] <kurahaupo> set -v shows the script as it's parsed so it won't show the innards of functions
[18:21:55] *** Quits: Bhavuk (~BTaneja@122.173.26.189) (Client Quit)
[18:22:35] *** Joins: Bhavuk (~BTaneja@122.173.26.189)
[18:23:44] *** Quits: kspalaiologos (~kspalaiol@user/kspalaiologos) (Quit: Leaving)
[18:24:15] <wstrnr> it's possible to see how procedure was parsed using declare -f
[18:24:42] <wstrnr> # x() { echo "he"'ll'$'o'; };  declare -f x
[18:24:49] <shbot> wstrnr: x () 
[18:24:49] <shbot> wstrnr: { 
[18:24:49] <shbot> wstrnr: etc... ( http://ix.io/3v4n )
[18:25:22] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 240 seconds)
[18:26:47] *** Quits: Adoi (~Adoi@user/adoi) (Ping timeout: 245 seconds)
[18:27:05] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[18:32:15] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 276 seconds)
[18:32:49] <izabera> k# x() { echo "he"'ll'$'o'; }; typeset -f x
[18:32:50] <shbot> izabera: x() { echo "he"'ll'$'o'; };
[18:33:40] <izabera> ksh has the decency to save the code with comments
[18:33:42] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[18:34:37] *** Joins: motherr (~motherr@user/motherr)
[18:36:27] *** Joins: twobitsprite (~isaac.fre@107.13.51.62)
[18:37:04] <izabera> k# eval $'getRandomNumber() {\n  return 4; # chosen by fair dice roll.\n            # guaranteed to be random.\n}'; typeset -f getRandomNumber
[18:37:13] <shbot> izabera: getRandomNumber() {
[18:37:13] <shbot> izabera:   return 4; # chosen by fair dice roll.
[18:37:13] <shbot> izabera: etc... ( http://ix.io/3v4t )
[18:37:25] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[18:39:15] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[18:39:29] *** Joins: Inline (~Inline@2a02:908:1252:7a80:c035:deeb:51be:5431)
[18:40:11] *** Joins: tech_exorcist (~tech_exor@user/tech-exorcist/x-0447479)
[18:42:06] *** Joins: thad_the_man_2 (~tlophd_be@99-104-67-23.lightspeed.cicril.sbcglobal.net)
[18:42:39] *** Quits: moto (~moto@user/moto) (Ping timeout: 276 seconds)
[18:44:10] *** Joins: moto (~moto@user/moto)
[18:45:15] *** Quits: thad_the_man (~tlophd_be@2600:1700:3051:4370:21b:fcff:fe6e:ff04) (Ping timeout: 276 seconds)
[18:45:46] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Quit: PROTO-IRC v0.73a (C) 1988 NetSoft - Built on 11-13-1988 on AT&T System V)
[18:49:10] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 258 seconds)
[18:58:06] *** Quits: zhangxiaofei (~fzhan@111.203.234.210) (Quit: Leaving.)
[19:11:31] *** Quits: paruh (~paruh@92.60.39.18) (Ping timeout: 265 seconds)
[19:17:07] *** Joins: str1ve (~strive@user/strive)
[19:18:56] <ormaaj> Has to store it in the AST though. Waste!
[19:20:40] <ormaaj> still faster than bash anyways.
[19:21:17] <izabera> k# eval 'f() { asdf;'
[19:21:19] <shbot> izabera: ksh: eval: syntax error: `{' unmatched
[19:21:19] <shbot> izabera: /init: line 39:    44 Segmentation fault      setsid ksh -l
[19:21:19] <shbot> izabera: (shell exited with 139)
[19:21:21] <izabera> much fast
[19:21:39] <earnestly> The essence of speed is not not check anything
[19:21:40] <izabera> ksh crash% speedrun
[19:21:57] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[19:22:23] <earnestly> 1. do it fast, 2. don't do it, 3. check nothing
[19:22:47] <izabera> try to crash ksh in the least number of characters
[19:22:50] <izabera> can be interactive or not
[19:22:53] <izabera> i'll start
[19:23:01] <izabera> # ksh -c 'f(){'
[19:23:03] <shbot> izabera: ksh: syntax error at line 1: `{' unmatched
[19:23:03] <shbot> izabera: Segmentation fault
[19:23:09] <izabera> that's 4 bytes
[19:23:19] <earnestly> Is the () needed?
[19:23:40] <izabera> doesn't crash without it!
[19:24:13] <phy1729> Doesn't crash here
[19:24:39] <izabera> contest is on shbot
[19:24:49] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 258 seconds)
[19:25:30] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 256 seconds)
[19:25:37] *** Quits: gschanuel (~gschanuel@user/gschanuel) (Read error: Connection reset by peer)
[19:25:51] <ormaaj> # ksh -c $'alias @=\'echo test >&2; )$( @ \'\n$( @ )' 2>&1 | head -n3
[19:25:57] <shbot> ormaaj: test
[19:25:58] <shbot> ormaaj: test
[19:25:58] <shbot> ormaaj: test
[19:26:37] <izabera> lol nice
[19:27:10] <ash_worksi> there's no way to get `cmd 2>log` to tee stdout to the log as well?
[19:27:11] <izabera> we need some new ormaajbombs
[19:27:17] *** Joins: s0ullight (~s0ullight@212.224.229.49)
[19:27:33] <izabera> ash_worksi: s/2/&/
[19:27:36] <ash_worksi> (I don't want stderr in the cmd output)
[19:27:42] <ash_worksi> oh
[19:27:57] <ash_worksi> but then I wont get stdout to the terminal
[19:28:02] *** Quits: lilalinu_ (~lilalinux@p549ee776.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[19:28:06] *** str1ve is now known as strive
[19:28:16] <izabera> ash_worksi: stdout goes where?  stderr goes where?
[19:28:22] *** Parts: s0ullight (~s0ullight@212.224.229.49) ()
[19:28:32] <izabera> out -> terminal+log      err -> log       ?
[19:28:48] <ash_worksi> stdout I want in the screen executing the command, stdout & stderr I want in the log 
[19:28:54] <ash_worksi> yes
[19:28:57] <ash_worksi> what you said
[19:29:44] <izabera> cmd > >(tee log) 2>log    should work i think
[19:30:15] <ash_worksi> izabera: I'll try it
[19:31:22] <ash_worksi> izabera: that put stderr in the terminal too
[19:31:37] <izabera> what?
[19:32:05] <izabera> # { echo out; echo err >&2; } > >(tee log) 2> log
[19:32:06] <shbot> izabera: out
[19:32:13] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[19:32:46] <ash_worksi> oh wait
[19:32:47] <e36freak> won't have out in the log
[19:32:55] <ash_worksi> I wanted the reverse of what I said
[19:33:15] *** Quits: nobody_ (~nobody@host-79-45-186-108.retail.telecomitalia.it) (Ping timeout: 258 seconds)
[19:33:22] <ash_worksi> # {echo out; echo err >&2; } 2> >(tee log) > log
[19:33:23] <shbot> ash_worksi: bash: syntax error near unexpected token `}'
[19:33:30] <izabera> {<space>
[19:33:38] <ash_worksi> # { echo out; echo err >&2; } 2> >(tee log) > log
[19:33:39] <shbot> ash_worksi: err
[19:33:39] <e36freak> that won't have stderr in the log, just stdout
[19:33:43] <ash_worksi> yes
[19:33:43] <ash_worksi> thanks
[19:33:49] <e36freak> cat the log afterward
[19:33:54] <ash_worksi> hmm
[19:33:59] <ash_worksi> what to do ?
[19:34:29] *** Joins: nobody_ (~nobody@host-79-45-186-108.retail.telecomitalia.it)
[19:34:45] <e36freak> { command >&3 2> >(tee log >&3); } 3>log
[19:34:47] <e36freak> should work
[19:35:17] <e36freak> # foo() { echo out; echo err >&2; }; { foo >&3 2> >(tee log >&3); } 3>log; echo "---"; cat log
[19:35:18] <shbot> e36freak: ---
[19:35:18] <shbot> e36freak: err
[19:35:18] <shbot> e36freak: err
[19:35:20] <emanuele6> k# `f(){`
[19:35:22] <shbot> emanuele6: ksh: syntax error: `{' unmatched
[19:35:22] <shbot> emanuele6: /init: line 39:    44 Segmentation fault      setsid ksh -l
[19:35:22] <shbot> emanuele6: (shell exited with 139)
[19:35:22] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[19:35:31] <e36freak> hmm
[19:35:38] <emanuele6> 6 characters
[19:36:29] <e36freak> oh i'm dumb
[19:36:40] <izabera> emanuele6: pretty good! extra credit for doing it interactively
[19:36:42] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[19:37:35] <ash_worksi> emanuele6: ?
[19:37:40] <ash_worksi> izabera + emanuele6 ?
[19:37:54] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[19:38:23] <kurahaupo> k# f()
[19:38:29] <shbot> kurahaupo: Missing terminating quote, bracket or keyword
[19:38:35] <kurahaupo> k# f();
[19:38:36] <izabera> ash_worksi: it's a very important competition 
[19:38:37] <shbot> kurahaupo: ksh: syntax error: `;' unexpected
[19:38:52] <ash_worksi> based on my question?
[19:39:12] <izabera> yes totally, that's why it involves logs and tee
[19:39:18] <kurahaupo> k# function f {
[19:39:25] <shbot> kurahaupo: Missing terminating quote, bracket or keyword
[19:39:37] <kurahaupo> k# f() {
[19:39:38] <ash_worksi> I am not seeing aything about logs and tee... just `k# f()`
[19:39:38] <yitz> This isn't #ksh
[19:39:43] <shbot> kurahaupo: Missing terminating quote, bracket or keyword
[19:40:17] <kurahaupo> wait, why does explicit call to ksh -c die but not k# ?
[19:40:17] *** kill is now known as killown
[19:40:56] <izabera> kurahaupo: k# is an interactive shell
[19:40:59] <izabera> it's waiting for input
[19:41:06] <izabera> # declare -p PS2
[19:41:06] *** Joins: richardm75 (~richardm7@2600:8801:c502:1000:3044:747c:82af:888e)
[19:41:07] <shbot> izabera: declare -x PS2="Missing terminating quote, bracket or keyword"
[19:41:12] *** Joins: Adoi (~Adoi@user/adoi)
[19:41:22] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[19:42:16] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[19:43:07] <ash_worksi> am i missing stuff from IRC to make this make sense
[19:43:08] <ash_worksi> ?
[19:43:14] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[19:43:21] <ash_worksi> k# f() {
[19:43:28] <shbot> ash_worksi: Missing terminating quote, bracket or keyword
[19:43:29] <ash_worksi> ;
[19:43:43] <ash_worksi> oh, so does it wait momentarily?
[19:43:51] <emanuele6> ash_worksi: 20 minutes ago <izabera> try to crash ksh in the least number of characters
[19:44:11] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[19:44:12] *** Quits: makara (~sol@196.61.111.63) (Ping timeout: 256 seconds)
[19:44:16] <ash_worksi> so izabera was joking about it having anything to do with my question whatsoever
[19:44:44] <emanuele6> !izabera
[19:44:45] <greybot> izn't really a bera
[19:45:02] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[19:45:06] <izabera> !meta izabera
[19:45:06] <greybot> greycat 1468872840(2016-07-18) learn izn't really a bera
[19:45:08] <ash_worksi> hm
[19:45:16] <emanuele6> these don't work on modern ksh though
[19:45:16] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[19:45:27] <izabera> geirha: time to update!
[19:45:28] <emanuele6> shbot has a 9 years old ksh
[19:45:34] <emanuele6> k# ksh --version
[19:45:36] <shbot> emanuele6:   version         sh (AT&T Research) 93u+ 2012-08-01
[19:45:40] <ormaaj> some of those things might be fixed in one of the newer forks. The bot one is one of the old versions.
[19:45:40] <ash_worksi> anyway, e36freak it all went to the log
[19:45:49] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[19:46:37] <phy1729> well no single byte works
[19:47:03] *** Quits: autopsy (~autopsy@ip70-190-159-27.ph.ph.cox.net) (Remote host closed the connection)
[19:47:49] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[19:48:02] <izabera> hey bruteforcing is cheating
[19:48:34] <phy1729> why?
[19:48:47] <izabera> cuz i said so
[19:48:53] <izabera> my contest my rules
[19:50:48] <ash_worksi> hmm
[19:52:27] <ash_worksi> k# 愛
[19:52:28] <shbot> ash_worksi: ksh: ?f?^D?^[: not found [No such file or directory]
[19:52:53] *** Joins: vysn (~vysn@user/vysn)
[19:53:42] <ash_worksi> izabera: why is k# } not the winner?
[19:54:04] <izabera> k# }
[19:54:05] <shbot> izabera: ksh: syntax error: `}' unexpected
[19:54:09] <izabera> no crash
[19:54:13] <izabera> try again
[19:54:56] <ash_worksi> oh I see
[19:54:58] <ash_worksi> nvm
[19:56:12] *** Joins: thiras (~thiras@user/thiras)
[19:56:57] *** Joins: usrnamewastaken (~Delvien@212.102.39.202)
[19:57:18] <ormaaj> <izabera> "we need some new ormaajbombs" <- I like the bash_alias one :]  too bad no ksh version.
[19:57:26] <usrnamewastaken> Does anyont have a bash script that downloads the contents of an sftp link (this includes UN and PW) to the current directory? 
[19:57:37] <ormaaj> whichever that is
[19:57:42] *** Quits: ggoes (~gregf@user/ggoes) (Changing host)
[19:57:42] *** Joins: ggoes (~gregf@fsf/staff/ggoes)
[19:57:50] <ormaaj> !ormaajbomb7
[19:57:50] <greybot> ${BASH_ALIASES=eval 0|:}
[19:58:04] <izabera> there's 7!?
[19:58:14] <izabera> !meta ormaajbomb5
[19:58:14] <greybot> ormaaj 1370008281(2013-05-31) learn { function } { case }\ { in ( }\ { ) <&0 } { &esac; }; <() }; };
[19:58:17] <izabera> !meta ormaajbomb6
[19:58:17] <greybot> ormaaj 1437394358(2015-07-20) learn ${dev[${dev='dev[1>(${dev[dev]})]'}]} # requires bash <4.3
[19:58:19] <izabera> !meta ormaajbomb7
[19:58:19] <greybot> ormaaj 1461329271(2016-04-22) learn ${BASH_ALIASES=eval 0|:}
[19:58:22] <izabera> !meta ormaajbomb8
[19:58:23] <greybot> I have no record of ormaajbomb8
[19:58:32] <izabera> !searchkeys ormaajbomb
[19:58:32] <greybot> izabera: 8 matches found: ormaajbomb, ormaajbomb1, ormaajbomb2, ormaajbomb3, ormaajbomb4, ormaajbomb5, ormaajbomb6, ormaajbomb7
[19:58:42] <ash_worksi> the script redirects correctly using `cmd 2> >(tee log) 1> log` until https://gist.github.com/ash-m/b8399b244bb39f1528d3d09b46fdada9#file-test-revert-bash-L31
[19:59:57] *** Joins: mongy (~mongy@user/mongy)
[20:02:27] <tirnanog> !check cmd 2> >(tee log) 1> log
[20:02:28] <checkbot> tirnanog: Line 1: Make sure not to read and write the same file in the same pipeline. See https://shellcheck.net/?id=cb77548 for all 2 issues.
[20:02:48] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[20:11:12] <emanuele6> # bind -p | grep -F '\C-x*'
[20:11:14] <shbot> emanuele6: "\C-x*": glob-expand-word
[20:11:21] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 252 seconds)
[20:11:21] <emanuele6> is there an equivalent of glob-expand-word that works with extglobs?
[20:11:57] *** Joins: twobitsp1ite (~twobitspr@107.13.51.62)
[20:13:53] *** Quits: shad (~shad@user/shad) (Ping timeout: 258 seconds)
[20:14:20] *** Quits: twobitsprite (~isaac.fre@107.13.51.62) (Quit: leaving)
[20:14:31] *** twobitsp1ite is now known as twobitsprite
[20:15:28] *** Joins: shad (~shad@user/shad)
[20:15:41] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[20:16:45] *** Joins: ChmEarl (~chmearl@user/chmearl)
[20:19:57] *** Quits: esselfe (~steph@user/esselfe) (Quit: Changing terminal)
[20:21:09] *** Joins: esselfe (~steph@user/esselfe)
[20:28:00] *** Quits: hqdruxn08 (~hqdruxn08@cpe-66-68-160-103.austin.res.rr.com) (Read error: Connection reset by peer)
[20:28:07] <ormaaj> it would be nice to have completion for `for x in a/b/@(c|d|...` but I'm pretty sure you can't.
[20:28:25] *** Joins: hqdruxn08 (~hqdruxn08@cpe-66-68-160-103.austin.res.rr.com)
[20:30:08] <bn_work> since < is "redirect to stdin", why can't one do something like:  md5sum < echo -n foo , is it because md5sum gets executed first before echo -n foo?
[20:30:24] <bn_work> (bash v4.3.46)
[20:30:57] <phy1729> < redirects files
[20:30:58] *** Quits: austin987 (~null@cpe-173-174-99-192.austin.res.rr.com) (Ping timeout: 240 seconds)
[20:31:05] <phy1729> printf foo | md5sum
[20:31:15] <ormaaj> because echo isn't a file and you have no file named foo
[20:31:58] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[20:31:59] <bn_work> ok, so < is more like "redirect this file to stdin"
[20:32:18] <phy1729> yes
[20:32:47] <bn_work> I figured it was like the inverse of >
[20:32:47] <ormaaj> it opens the file for reading
[20:32:49] *** Quits: kurahaupo (~kurahaupo@pa49-195-104-15.pa.nsw.optusnet.com.au) (Quit: Quit)
[20:32:52] *** Joins: terabyte (~terabyte@27.176-105-213.static.virginmediabusiness.co.uk)
[20:33:03] <phy1729> bn_work: well > outputs to files
[20:33:06] *** Joins: kurahaupo (~kurahaupo@pa49-195-104-15.pa.nsw.optusnet.com.au)
[20:33:21] <phy1729> you don't printf foo >md5sum unless you want a file named md5sum
[20:33:35] *** Joins: absc (~absc@dynamic-adsl-94-34-201-166.clienti.tiscali.it)
[20:34:35] *** Quits: darkbit (~db@152.32.99.67) (Ping timeout: 258 seconds)
[20:37:19] <bn_work> right
[20:37:21] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[20:37:25] <bn_work> ok, thanks
[20:41:36] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[20:43:10] *** Joins: austin987 (~null@100.42.98.196)
[20:44:01] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Quit: Client closed)
[20:44:15] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[20:44:43] *** Quits: absc (~absc@dynamic-adsl-94-34-201-166.clienti.tiscali.it) (Remote host closed the connection)
[20:45:13] *** Joins: MaximB (~MaximB@87.68.164.32)
[20:45:38] <MaximB> Hi, for some reason I'm getting error when calling this function: https://paste.debian.net/1206694/
[20:45:46] <MaximB> not sure what can case this
[20:46:28] *** Quits: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e) (Ping timeout: 258 seconds)
[20:46:36] <ormaaj> MaximB: Doesn't look like bash.
[20:46:56] <yitz> MaximB: How are you running it?
[20:47:13] <MaximB> what do you mean?  running with PrintAmount_func
[20:47:25] <ormaaj> That isn't a bash error. You're not using bash.
[20:47:28] <yitz> What *exactly* do you type ... and where?
[20:47:49] <yitz> Are you using Windows?
[20:48:07] <tirnanog> those are shellcheck errors.
[20:48:14] *** Joins: son0p (~ff@181.136.122.143)
[20:48:52] <ormaaj> no.
[20:49:38] <tirnanog> yes.
[20:49:40] <MaximB> very strange as all other functions structured the same and have no errors (red line on "(" )
[20:50:05] <tirnanog> not only that, but the shellcheck error is because you inserted a UTF-8 encoded zero-width joiner.
[20:50:13] *** Joins: roadie (~user@2a02:8108:ec0:1427:38cb:853a:b9e8:331e)
[20:50:16] <tirnanog> stick that in your pipe and smoke it.
[20:50:58] <ormaaj> oh shellcheck... yeah not sure how you run that by mistake
[20:52:08] <tirnanog> MaximB: what OS are you using and which editor did you use to emit this code?
[20:52:26] <yitz> shellcheck usually shows an E[number] I thought
[20:52:30] <MaximB> linux mint / vs code
[20:52:40] <tirnanog> yitz: not if it cannot parse the code to begin with.
[20:52:53] *** Joins: yuesbeez (uid458354@id-458354.tinside.irccloud.com)
[20:53:14] <yitz> Ah
[20:53:52] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[20:54:11] <tirnanog> # printf 'PrintAmount_funce2\x80\xac\xe2\x80\xac\x20\x28\x29' | od -An -a -tx1
[20:54:23] <shbot> tirnanog:    P   r   i   n   t   A   m   o   u   n   t   _   f   u   n   c
[20:54:23] <shbot> tirnanog:   50  72  69  6e  74  41  6d  6f  75  6e  74  5f  66  75  6e  63
[20:54:23] <shbot> tirnanog: etc... ( http://ix.io/3v5n )
[20:54:27] *** Quits: m0viefreak (~asdf@user/m0viefreak) (Remote host closed the connection)
[20:54:32] <tirnanog> oops, missed a backslash.
[20:54:36] <tirnanog> # printf 'PrintAmount_func\xe2\x80\xac\xe2\x80\xac\x20\x28\x29' | od -An -a -tx1
[20:54:44] <shbot> tirnanog:    P   r   i   n   t   A   m   o   u   n   t   _   f   u   n   c
[20:54:44] <shbot> tirnanog:   50  72  69  6e  74  41  6d  6f  75  6e  74  5f  66  75  6e  63
[20:54:44] <shbot> tirnanog: etc... ( http://ix.io/3v5o )
[20:55:28] <tirnanog> somehow you managed to produce that. the e2 80 ac sequence is a zero-width joiner. maybe vs code supports some key combo to enter them? not sure.
[20:55:32] <ormaaj> easier to use a pastebin with a raw version. I wouldn't have bothered guessing if the pastebin mangled it
[20:55:41] *** Joins: LiftLeft (~LiftLeft@191.96.227.138)
[20:55:43] <MaximB> that's the whole unfinished code, every time I "fix" a function, another function goes "bad", strange.. https://paste.debian.net/1206695/
[20:56:14] <MaximB> I'm sure it's some minor syntax error somewhere
[20:56:50] *** Quits: sharperguy__ (~sharpergu@2001:1438:4010:3101:10a::3133) (Ping timeout: 272 seconds)
[20:56:54] <Soliton> so remove the unicode characters.
[20:57:04] <MaximB> dos2unix?
[20:57:11] <tirnanog> no.
[20:57:13] *** Joins: sharperguy__ (~sharpergu@2001:16b8:5cd4:c00:90a:543f:b6df:be7f)
[20:57:18] <MaximB> so how?
[20:59:12] <yitz> Select the line, delete it, rewrite it
[20:59:28] <Soliton> sed $'s/\u202C//g' infile > outfile
[20:59:58] <ormaaj> I would guess vs code is mangling your text somehow. Probably something in its configuration.
[21:01:01] <tirnanog> sorry, I wrote that out wrong. what Soliton said, only with \u200c instead.
[21:01:18] <tirnanog> I found zero-width joiners in the original paste.
[21:01:23] *** Joins: smlavine (smlavine@sourcehut/user/smlavine)
[21:04:24] <MaximB> thanks, but the new file still has the same problems
[21:04:26] <Soliton> the bigger paste seems to be filled with \u202[ABC]
[21:05:04] <MaximB> new file: https://paste.debian.net/1206696/
[21:05:06] <tirnanog> hmm. how on earth did this happen? while they can easily be removed, it's no good if they're going to keep slipping back in.
[21:05:25] <Soliton> some right-to-left/left-to-right directional stuff it seems.
[21:05:52] <MaximB> I suspect it's because I changed languages in the keyboard, and may have times some symbols in non-english language 
[21:06:20] *** Quits: solar_sea (~solar_sea@user/solar-sea/x-3088627) (Ping timeout: 272 seconds)
[21:06:47] <MaximB> still the last command sed $'s/\u200c//g' final.sh > final-new.sh  kept the old errors
[21:07:09] <tirnanog> ok.
[21:07:17] <Soliton> sed $'s/[\u202A\u202B\u202C]//g' infile > outfile
[21:08:01] <ormaaj> Use a tool that shows the actual contents
[21:08:22] <geirha> xxd -g1   ftw
[21:08:29] <tirnanog> MaximB: do you have perl?
[21:09:39] <tirnanog> MaximB: perl -CIO -pe 's/[^[:ascii:]]//g' infile > outfile
[21:10:00] <MaximB> Soliton thanks , seems to have been fixed now
[21:10:08] <MaximB> with your last command
[21:10:31] <MaximB> tirnanog I barely manage with bash ;)  
[21:11:15] <ormaaj> # type xxd
[21:11:16] <shbot> ormaaj: bash: type: xxd: not found
[21:11:21] <tirnanog> ormaaj: it wasn't being mangled to begin with.
[21:11:21] <ormaaj> bah.
[21:11:57] <ormaaj> what is it?
[21:12:26] <ormaaj> random invisible characters = mangled in my book.
[21:12:53] <MaximB> told you, barley ;)  
[21:12:59] <tirnanog> that's not the usual definition of mangling. I would think that most would take it to mean that the data was corrupted in the course of making its way to the pastebin. that wasn't the case.
[21:13:11] <tirnanog> on the other hand, it wasn't valid bash.
[21:14:44] <MaximB> tirnanog don't get mad, i still have loads of valid bash errors in my script ;)  
[21:14:53] <tirnanog> :)
[21:16:46] *** Quits: TomyWork (~TomyLobo@p200300e80f133c0099fbaea743b3eb58.dip0.t-ipconnect.de) (Quit: Leaving)
[21:16:51] *** Joins: enoq (~enoq@194-208-179-35.lampert.tv)
[21:17:38] <Soliton> a more generic approach: tr -cd '\11\12\40-\176' < infile > outfile
[21:17:50] <tirnanog> nice. portable. like it.
[21:18:28] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[21:19:32] <tirnanog> shellcheck might do well to warn in the case that it encounters (at least) non-ascii whitespace. it doesn't come up all that often, but I have seen it happen before.
[21:20:20] <Soliton> it warns about nbsp at least, i think.
[21:22:19] *** Joins: paruh (~paruh@92.60.39.18)
[21:22:30] <tirnanog> although, it wasn't in the space separator category. maybe non-ascii punctuation also. something like that.
[21:22:42] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Ping timeout: 240 seconds)
[21:23:16] *** Joins: PrenzlBurg (~PrenzlBur@145.243.166.71)
[21:23:54] <Nintendo> You mean ∕ and whatnot?
[21:25:08] <Nintendo> What would is warn of, though?
[21:26:30] <Nintendo> http://static.rcgroups.net/forums/attachments/1/1/6/0/6/6/a4004213-134-Caution%20This%20Sign%20Has%20Sharp%20Edges.jpg
[21:26:32] <ormaaj> shellcheck? The parse error is sufficient / correct I'd say.
[21:27:29] *** Quits: odoood (~odoood@2601:c8:c003:a550::8) (Ping timeout: 258 seconds)
[21:27:30] *** Quits: PrenzlBurg (~PrenzlBur@145.243.166.71) (Ping timeout: 240 seconds)
[21:28:14] *** Joins: xall (~xall@2600:8800:8c02:3600:849b:ccd0:e33f:e479)
[21:29:19] <tirnanog> Nintendo: well, shellcheck is a parser. it has the context to know, in principle, that certain things should not appear where whitespace might otherwise be expected between tokens.
[21:29:30] *** Joins: smlavine_ (smlavine@sourcehut/user/smlavine)
[21:29:31] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Ping timeout: 268 seconds)
[21:29:54] *** Joins: odoood (~odoood@2601:c8:c003:a550::8)
[21:30:22] *** Quits: smlavine (smlavine@sourcehut/user/smlavine) (Killed (mercury.libera.chat (Nickname regained by services)))
[21:30:22] *** smlavine_ is now known as smlavine
[21:31:01] *** Joins: ddunx (~damien@2a02:2788:834:209:8b5d:5ccd:2ae2:af18)
[21:31:20] <Nintendo> Can you provide an example of something that should result in a warning but currently does not?
[21:31:52] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[21:31:59] *** Quits: ddunx (~damien@2a02:2788:834:209:8b5d:5ccd:2ae2:af18) (Client Quit)
[21:36:58] *** Quits: smlavine (smlavine@sourcehut/user/smlavine) (Ping timeout: 240 seconds)
[21:37:41] <kurahaupo> tirnanog: the only things that can appear "between tokens" is whitespace or the standard shell meta-characters. That's what defines99,99 a token (word) in shell.
[21:38:41] *** Quits: Bhavuk (~BTaneja@122.173.26.189) (Quit: Leaving)
[21:41:47] <tirnanog> kurahaupo: no? shellcheck is an independent parser. it surely distinguished between a function name as a token and the opening parenthesis that is expected to follow it (before which, whitespace is optional). let's not pretend it's impossible to do better. I mean, if nothing else, in the parsing error emitting path, it could conceivably scan for 'wide' codepoints and point out that they are present.
[21:42:08] <tirnanog> the error was counter-intuitive given how the input appears to eyeballs. even two regulars here were getting the wrong end of the stick.
[21:42:30] <tirnanog> also, zero-width joiners between ascii characters seems like a red flag in and as of itself.
[21:42:42] <kurahaupo> tirnanog: the parentheses are99,99 standard shell meta characters
[21:43:01] <koala_man> shellcheck does recognize and warn about typical unicode spaces where ascii spaces were expected
[21:43:22] <ormaaj> Posix tries to define the tokenization steps but nobody follows them precisely.
[21:43:49] <tirnanog> kurahaupo: if you're just going to talk down to me, I'll leave it at that.
[21:44:35] *** Joins: Sasazuka (~Sasazuka@user/sasazuka)
[21:45:15] *** Joins: ozoned (~odoood@c-73-184-143-53.hsd1.ga.comcast.net)
[21:45:26] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[21:45:26] <kurahaupo> tirnanog: sorry, I shouldn't do that
[21:45:35] *** Quits: odoood (~odoood@2601:c8:c003:a550::8) (Read error: Connection reset by peer)
[21:46:01] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[21:46:32] <kurahaupo> tirnanog: My real point is that "do better" is both open ended and somewhat subjective.
[21:46:36] *** Quits: plitter (~plitter@user/plitter) (Quit: WeeChat 3.2)
[21:46:38] <tirnanog> fine fine.
[21:46:57] <tirnanog> wish I hadn't even gotten involved in any shape or form at this point.
[21:47:09] <kurahaupo> file a bug/feature request
[21:47:49] <kurahaupo> Not that we shouldn't try to do better, but please don't complain that it doesn't already do so
[21:48:09] <tirnanog> I'll say whatever I please, as long as I'm not breaking any rules.
[21:48:43] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[21:49:33] <kurahaupo> tirnanog: I'm not the developer for shellcheck but they are in this channel listening. So bring respectful of them would go a long way to getting what you want, even if you thing I'm being unreasonable. (Which  I apologise for.)
[21:50:06] <tirnanog> kurahaupo: it's not your place to take offense on their behalf.
[21:50:18] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[21:50:48] <kurahaupo> tirnanog: what's got your goat? Why are you99,99 behaving like you're offended?
[21:51:07] <tirnanog> kurahaupo: your tone policing and condescending italics, for one thing.
[21:51:17] <kurahaupo> And it's not your place to say when i may or may not defend my friends honour
[21:52:33] *** Joins: plitter (~plitter@78.31.86.243)
[21:52:34] *** Quits: plitter (~plitter@78.31.86.243) (Changing host)
[21:52:34] *** Joins: plitter (~plitter@user/plitter)
[21:52:37] <tirnanog> "honour"? good grief.
[21:53:07] <ormaaj> shellcheck uses happy? parsec? custom parser?
[21:53:12] <kurahaupo> Take your own advice and leave it alone
[21:53:23] <tirnanog> kurahaupo: same to you.
[21:53:59] *** Quits: ozoned (~odoood@c-73-184-143-53.hsd1.ga.comcast.net) (Remote host closed the connection)
[21:54:47] <koala_man> ormaaj: parsec
[21:55:17] *** Joins: hseg (~gesh@IGLD-84-228-239-14.inter.net.il)
[21:55:21] *** Joins: cardtrick (~cardtrick@40.ip-192-99-166.net)
[21:55:29] <ormaaj> ah
[21:56:13] <hseg> Hi. writing a completion script for a command executing "${@:2}" in "$1"
[21:56:42] <hseg> so I need to complete $1 as a directory, then the remaining arguments as a regular command
[21:57:05] <hseg> so far, I have http://ix.io/3v5I
[21:57:26] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[21:57:50] <hseg> which is great, except eg git's completion is dependent on CWD
[21:58:42] <hseg> so I'd want the completion of "${@:2}" to be done within that context, if possible
[21:59:39] <hseg> (obviously, if $1 is a variable expansion, that's a tough sell -- cf my common invocation for i in ...; do git log -p ..origin/master; done
[21:59:41] <hseg> )
[22:00:27] *** Quits: rendar (~rendar@user/rendar) ()
[22:01:30] *** Quits: hqdruxn08 (~hqdruxn08@cpe-66-68-160-103.austin.res.rr.com) (Ping timeout: 240 seconds)
[22:02:03] <Soliton> (cd "$1"; compgen -d)
[22:02:30] <Soliton> or whatever you want to complete there.
[22:03:25] *** Joins: hqdruxn08 (~hqdruxn08@cpe-66-68-160-103.austin.res.rr.com)
[22:05:42] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[22:05:45] <hseg> ? that would complete a subdirectory of "$1"
[22:06:23] *** Joins: PrenzlBurg (~PrenzlBur@p200300ca57319c00b09da0d2dad20612.dip0.t-ipconnect.de)
[22:07:01] <hseg> whereas what I'd want is something like (cd "${COMP_WORDS[1]}"; compgen "${COMP_WORDS:2}")
[22:07:06] *** Joins: Masklin (~joel@89-233-200-127.cust.bredband2.com)
[22:07:55] *** Quits: dualbus (~dualbus@2604:3d08:837f:faeb:b62e:99ff:fe30:7d62) (Quit: WeeChat 3.0.1)
[22:07:56] <hseg> ... that should be "${COMP_WORDS[@]:1}"
[22:08:13] <hseg> and COMP_WORDS[0]
[22:08:30] *** Quits: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com) (Ping timeout: 252 seconds)
[22:08:33] <hseg> no wait, that's the command being completed
[22:09:48] <kurahaupo> Does « compgen -d "${COMP_WORDS[0]}" » not suffice?
[22:10:23] <hseg> a) that completes the command b) that would only permit completing the directory
[22:10:59] <hseg> whereas I want to complete the remaining parameters as a command-line running in "${COMP_WORDS[1]}"
[22:11:24] <hseg> a la sudo's completion
[22:11:46] <hseg> which completes some flags, then an entire command
[22:11:54] *** Quits: PrenzlBurg (~PrenzlBur@p200300ca57319c00b09da0d2dad20612.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[22:12:21] <kurahaupo> oh I see. Yes, look at  complete -p sudo
[22:12:30] <emanuele6> if i write a multiline command in an interactive bash shell and use ^X^E to edit it, it is run after i exit vim, but then bash doesn't stop reading the multiline command and i keep having the `>` prompt.
[22:12:49] <emanuele6> i need to use ^C to go back to the regular prompt where i can enter commands
[22:14:06] <tirnanog> emanuele6: confirmed.
[22:14:09] <kurahaupo> emanuele6: After editing do you have balanced quotes and parentheses?
[22:14:12] <emanuele6> example "if true\nthen echo hi\nelse echo hello\nfi^X^E:wq
[22:14:38] <emanuele6> ignore the quote
[22:15:25] <tirnanog> I entered the expansion of $'foo &&\nbar' and edited. upon exiting vim, bash attempted to execute bar and it was still in PS2.
[22:16:33] *** Quits: cdown_ (~cdown@163.114.131.1) (Ping timeout: 258 seconds)
[22:16:56] <emanuele6> oh, and if you use ^X^E again you get the original command plus everything else you have typed
[22:17:11] <emanuele6> this is a bug, right?
[22:17:24] <kurahaupo> emanuele6: it sounds like the command is incomplete
[22:17:42] <emanuele6> kurahaupo: i don't think you understand
[22:17:50] <emanuele6> try this: if true\nthen echo hi\nelse echo hello\nfi^X^E:wq
[22:17:52] <tirnanog> it's clearly impropper.
[22:17:56] <tirnanog> improper
[22:18:29] <tirnanog> emanuele6: that was in 4.2, by the way. now I try in 5.1, and the complete command was executed as expected, only with the other issues you mentioned.
[22:18:48] <kurahaupo> Well, does it occur in a simple command or only compound commands?
[22:19:17] <tirnanog> it occurs with a simple command.
[22:19:35] <emanuele6> they just have to be multiline
[22:19:41] *** Quits: mloza (~mloza@user/atmark) (Quit: WeeChat 2.9)
[22:20:06] <emanuele6> this also happens with \ \n ls ^X^E
[22:21:24] <emanuele6> tirnanog: did you mean to mention [h]seg?
[22:21:34] <tirnanog> no.
[22:21:50] *** Joins: makara (~sol@196.61.111.63)
[22:22:27] <emanuele6> oh
[22:22:29] <tirnanog> it's just that there was another anomaly whereby it mangled the command completely before reaching the editor, resulting in it attempting to execute only "bar". but then I realised i was logged into the terminal of an outdated host. disregard that. it's an old bug that was obviously fixed.
[22:22:56] <emanuele6> ok ok
[22:23:43] <tirnanog> I tried a simple command in 5.1 and it's as you say. it only seems to take a newline character to trigger it.
[22:23:56] *** Joins: d1rewolf_ (sid312924@id-312924.brockwell.irccloud.com)
[22:24:04] <hseg> ok, success! essentially had to run the command completion under withcd
[22:24:56] <hseg> one annoyance that I discovered exploring this is that for all their commonalities syntactically, functions are different from external programs
[22:25:24] <hseg> in particular, exec "$@" will fail if $1 is a function
[22:25:24] <d1rewolf_> hello all. I have a set of files in a directory which have spaces in their names. I'm trying to come up with a one liner to search the contents of these files, identify ones matching a string, and then move those to a different directory. I've come up with this so far: "find . -print0 | xargs -0 -I '{}' grep -l 'journal' '{}' | xargs -0 -n 1 -I '{}' mv '{}' targetdir"
[22:25:29] <tirnanog> emanuele6: perhaps raise it at bash-bug? it doesn't seem right at all.
[22:25:40] *** Parts: PinealGlandOptic (~PinealGla@37.115.210.35) ()
[22:25:54] <tirnanog> or bug-bash. I keep getting that the wrong way around.
[22:25:55] <d1rewolf_> these seems to work up to the last pipe, and then it breaks down. I'm assuming the output of the second pipe breaks the third. What would be the appropriate approach here? 
[22:26:17] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[22:26:24] <hseg> also, turns out export -f doesn't export the function's dependencies, so that doesn't fix it either
[22:26:46] <d1rewolf_> the error I get: "{}: cannot open `{}' (No such file or directory)"
[22:26:51] <hseg> so I have a little duplication, oh well
[22:28:27] <tirnanog> d1rewolf_: are you using GNU/LInux?
[22:28:55] <Camus> d1rewolf_: you can't use xargs -0 on grep -l 's output
[22:29:21] *** Camus is now known as Camusensei
[22:31:10] <Camusensei> d1rewolf_:  for f in *; do grep -q journal "$f" && mv "$f" targetdir/; done
[22:31:22] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[22:32:34] <Camusensei> oh, it's recursive, sorry.         shopt -s globstar; for f in **/*; do if grep -q journal "$f"; then mv "$f" targetdir; fi; done
[22:33:11] <Camusensei> (assuming you're using bash)
[22:34:44] *** Joins: smlavine (smlavine@sourcehut/user/smlavine)
[22:34:56] <emanuele6> kurahaupo: this is what i mean https://0x0.st/-4wo.gif
[22:36:58] <kurahaupo> yeah that's a weird bug
[22:39:30] <tirnanog> d1rewolf_: here's another approach that somewhat resembles what you were attempting. strictly GNU-only, but rather efficient: find . -type f -exec grep -Zl journal {} + | xargs -0 mv -t targetdir
[22:39:48] *** Quits: cardtrick (~cardtrick@40.ip-192-99-166.net) (Quit: WeeChat 2.7.1)
[22:40:04] <Soliton> or do the move in another -exec.
[22:40:36] <tirnanog> two overloaded -exec's? yeah, that should work, shouldn't it.
[22:40:56] *** Joins: zro (~zro@user/zro)
[22:40:57] <geirha> then the first one needs to be \; so it
[22:41:01] <geirha> 'll be less efficient
[22:41:05] <tirnanog> ah.
[22:41:20] <tirnanog> I'll stick to the above then.
[22:42:06] *** Joins: superboot (~agentgasm@user/superboot)
[22:42:17] <Soliton> it'd be like the for loop version, yes.
[22:42:21] <tirnanog> Camusensei: I'd just politely suggest mv -- "$f" there. obviously, find doesn't need it because the pathnames lead with ./ in that case.
[22:43:11] *** Joins: alzgh (~alzgh@216.155.158.214)
[22:43:14] <Camusensei> tirnanog: you're righ
[22:43:17] <Camusensei> right*
[22:43:26] <tirnanog> Soliton: yeah. the idea there was to fully exploit mv -t, if it's an option.
[22:43:43] <tirnanog> and grep, for that matter.
[22:45:02] *** Parts: Imbapokah (~pavel@88.201.129.183) ()
[22:48:29] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[22:49:18] <tirnanog> Camusensei: I supposed you'd then have to adorn it with an -f test to avoid a potentially long stream of (ultimately harmless) complaints from grep.
[22:50:01] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Remote host closed the connection)
[22:50:16] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[22:51:29] *** Quits: seninha (~seninha@user/seninha) (Remote host closed the connection)
[22:52:06] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[22:53:35] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (Remote host closed the connection)
[22:54:03] *** Joins: lsrtl (~lsrtl@user/lsrtl)
[22:56:13] *** Quits: XV8 (~XV8@2601:5cb:c001:50:df69:766a:bc37:5a0b) (Remote host closed the connection)
[23:00:27] *** Quits: plitter (~plitter@user/plitter) (Quit: WeeChat 3.2)
[23:00:58] *** Quits: makara (~sol@196.61.111.63) (Ping timeout: 240 seconds)
[23:02:23] *** Joins: plitter (~plitter@78.31.86.243)
[23:02:24] *** Quits: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Read error: Connection reset by peer)
[23:02:24] *** Quits: plitter (~plitter@78.31.86.243) (Changing host)
[23:02:24] *** Joins: plitter (~plitter@user/plitter)
[23:02:56] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[23:05:20] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Remote host closed the connection)
[23:05:56] *** Joins: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[23:08:02] *** Joins: autopsy (~autopsy@ip70-190-159-27.ph.ph.cox.net)
[23:11:06] *** Quits: lilalinu_ (~lilalinux@p4fc084f7.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[23:11:43] *** Quits: maledictium (~crux@bl10-83-37.dsl.telepac.pt) (Ping timeout: 250 seconds)
[23:12:08] *** Joins: maledictium (~crux@bl10-83-37.dsl.telepac.pt)
[23:14:10] *** Quits: smlavine (smlavine@sourcehut/user/smlavine) (Quit: zzz)
[23:14:24] <hseg> am writing a hook for my package manager to display the diff of the cve list affecting me
[23:14:29] *** Joins: smlavine (smlavine@sourcehut/user/smlavine)
[23:14:53] <hseg> so would want sth like diff cve-db <(audit); audit > cve-db
[23:15:04] <hseg> except that calls audit twice
[23:15:36] <hseg> could new=$(mktemp); audit > new; diff cve-db new; mv new cve-db...
[23:15:56] <hseg> but is there a better way?
[23:18:21] <earnestly> Where is the file 'cve-db' being kept?
[23:19:01] <hseg> not sure where the proper place for this'd be, /etc atm though that's definitely the wrong place
[23:19:13] <hseg> maybe /var would be a more correct place?
[23:19:21] <earnestly> Doesn't really matter, the point is that it's a persistent file
[23:19:25] <hseg> y
[23:19:59] <earnestly> So you can just do `audit > cve-db.new' `diff -u cve-db cve-db.new' and then `mv -- cve-db.new cve-db'
[23:20:26] <hseg> without going through /tmp, got it thanks
[23:21:01] <earnestly> You only need to consider what happens if this thing runs multiple instances at the same time
[23:21:36] <hseg> yeah, but considering the package manager locks against this, i doubt it'll be an issue
[23:21:40] <earnestly> Or pre-conditions such as cve-db.new should not exist when the script starts
[23:21:56] <earnestly> (or exist when it ends)
[23:24:37] <hseg> right
[23:24:40] <hseg> thanks!
[23:26:43] *** Quits: plitter (~plitter@user/plitter) (Quit: WeeChat 3.2)
[23:29:43] *** Joins: plitter (~plitter@78.31.86.243)
[23:29:43] *** Quits: plitter (~plitter@78.31.86.243) (Changing host)
[23:29:43] *** Joins: plitter (~plitter@user/plitter)
[23:30:29] *** Joins: seninha (~seninha@user/seninha)
[23:32:20] *** Joins: goldfish (~goldfish@user/goldfish)
[23:36:02] *** Joins: furrymcgee (~devuan@31.179.186.66)
[23:39:32] *** Quits: furrymcgee (~devuan@31.179.186.66) (Client Quit)
[23:39:39] *** Joins: furrymcgee (~devuan@31.179.186.66)
[23:40:00] *** Joins: makara (~sol@196.61.111.63)
[23:40:30] *** Quits: goldfish (~goldfish@user/goldfish) (Ping timeout: 256 seconds)
[23:40:31] *** Quits: hsv (~unknown@user/hsv) (Ping timeout: 258 seconds)
[23:40:31] *** Joins: goldfish_ (~goldfish@user/goldfish)
[23:40:37] *** Quits: hseg (~gesh@IGLD-84-228-239-14.inter.net.il) (Quit: WeeChat 3.2)
[23:41:12] *** Joins: Betal (~Beta@user/betal)
[23:41:28] *** Quits: nvmd (~nvmd@user/nvmd) (Quit: Later, nerds.)
[23:42:23] *** Joins: m0viefreak (~asdf@user/m0viefreak)
[23:42:30] *** Joins: hsv (~unknown@user/hsv)
[23:48:33] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 258 seconds)
[23:48:38] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:9dda:f65f:c2ba:878f)
[23:48:39] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:9dda:f65f:c2ba:878f) (Changing host)
[23:48:39] *** Joins: skapata (~Skapata@user/skapata)
[23:50:45] *** Joins: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com)
[23:54:25] *** Joins: lilalinux (~lilalinux@p4fc084f7.dip0.t-ipconnect.de)
[23:56:45] *** Joins: drd (~drd@93-39-151-19.ip76.fastwebnet.it)
