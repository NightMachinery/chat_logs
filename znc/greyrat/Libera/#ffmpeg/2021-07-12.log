[00:03:08] <kepstin> yeah
[00:05:10] <Terrence> Okay because I just added a line of code at the end, int test = av_buffersrc_add_frame_flags(bufferSource, NULL, 0); and it still seems to be doing the same thing
[00:14:48] <Terrence>     int test = av_buffersrc_add_frame_flags(bufferSource, NULL, 0);
[00:14:48] <Terrence>     test = av_buffersink_get_frame(bufferSink, NULL);
[00:14:49] <Terrence>     av_write_frame(outputFormatContext, nullptr);
[00:14:49] <Terrence>     EncodeAndWrite(NULL, outputFormatContext, outputCodecContext);
[00:15:15] <Terrence> Yeah these are the line's that I've added to flush everything but I'm still getting audio file of different output time, pretty weird
[00:15:59] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/889be4223a46568f2a1668236a69a18c/image.png
[00:27:21] <Terrence> Could there be some other type of issue causing this problem?
[00:33:22] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Quit: leaving)
[00:33:52] *** Quits: Blacker47 (~Blacker47@user/blacker47) (Quit: Life is short. Get a V.90 modem fast!)
[00:37:57] *** Joins: linjie (~linjie@58.247.210.251)
[00:42:29] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 265 seconds)
[00:44:27] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[00:46:05] <Atsuko> what is the correct container for TrueHD audio?
[00:49:31] <Atsuko> also what is the correct way to demux it?
[00:50:50] <Atsuko> ffmpeg -i 00014.m2ts -map 0:1 -bsf:a truehd_core -acodec copy Audio.wav
[00:50:51] <Atsuko> ?
[00:52:31] <kepstin> as far as I know, dolby truehd doesn't have any standalone format
[00:54:01] <kepstin> if you just want a separate file with the truehd audio, you might as well leave it in mpegts
[00:55:52] <Atsuko> thx kepstin
[00:56:09] <Atsuko> im just trying to demux from bluray source and then mux into mkv encode
[00:56:35] *** Quits: thebombzen (~thebombze@71.73.92.220) (Quit: attack.c:4: main: Assertion `I_can_beat_that_monster' failed. Aborted (core dumped))
[00:56:46] <kepstin> well, then might as well use mkv as the output format
[00:57:45] *** Joins: colona (~colona@grunt.ycc.fr)
[00:58:07] *** Joins: Guest6121 (~Guest61@103.125.235.22)
[00:58:36] *** Parts: Guest6121 (~Guest61@103.125.235.22) ()
[00:59:25] *** Joins: AskerX (~Guest61@103.125.235.22)
[01:02:40] *** Parts: AskerX (~Guest61@103.125.235.22) ()
[01:06:00] *** Joins: Buster_ (~Buster@buster-net.ru)
[01:18:32] <Terrence> Hey kepstin quick question, so I altered my program to not even filter frames and to simply just encode and write the packets to an output file and for some reason the same exact thing is happening. I'm kinda new to encoding and and producing audio files, do you think this could be a problem with the encoder I'm using? Because it doesn't seem to
[01:18:32] <Terrence> copy over every frame
[01:19:24] <Terrence> https://pastebin.com/sxV8dnv7
[01:19:28] <Terrence> This is the code
[01:20:03] <Terrence> You can see in the while loop that it strictly only receives frames, encodes them, and writes the packet to the output file
[01:20:39] <Terrence> But the input file is 50:06 seconds but the output is only 49:58
[01:21:03] <Terrence> Not sure where this loss is coming from or how when I'm flushing the encoder at the completion of encoding all frames
[01:25:03] <Terrence> Does anyone know what could be causing this issue?
[01:29:56] <kepstin> you might be able to get a better idea by listening to both (or opening them in audacity or something) to see what part is missing.
[01:30:42] <Terrence> Ah yeah good idea
[01:32:29] *** klepz is now known as arxxr
[01:32:36] <Terrence> Yeah it's definitely cutting something out
[01:32:44] <Terrence> Uploaded file: https://uploads.kiwiirc.com/files/f79237a4924b51ecc55a769f4857d9b4/image.png
[01:33:03] <Terrence> The original is on top and the output is on the bottom
[01:33:24] <Terrence> Up until this point both audio files are the exact same
[01:33:50] <arxxr> does anyone knows why "-x264-params forced-idr=1" is wrong ? I get "Error parsing option 'forced-idr = 1'.
[01:33:53] <Terrence> But this confuses me because I read every single frame up until end of file
[01:34:15] <BtbN> arxxr, because it's not an x264-param, but a native option
[01:37:07] <arxxr> oh, thanks :)
[01:37:33] *** Joins: xkuru (~xkuru@user/xkuru)
[01:39:26] <Terrence> BtbN do you happen to know what could be a cause for the encoder not being able to encode and write every frame from an input frame?
[01:41:53] <AMM> Haha, is this still going on
[01:42:08] <BtbN> Uhm, you're probably using it wrong? Not sure what to tell you.
[01:42:28] <BtbN> I can assure you, the encoders are not broken or anything.
[01:45:34] <danergo> Terrence: just for curiosity: which version are you using?
[01:45:42] *** Quits: Volgaar (~volgaar@104.66.13.93.rev.sfr.net) (Quit: WeeChat 3.2)
[01:46:10] <Terrence> 4.4
[01:46:31] <Terrence> Did you see my code sample?
[01:46:46] <Terrence> danergo
[01:47:12] <Terrence> I don't see how I could be using it wrong though
[01:47:14] <danergo> no but I'm a _similar_ situation with 4.4, and I'm almost sure now that 4.2 doesn't suffer froom this
[01:47:42] <Terrence> Strange
[01:47:43] <Terrence> https://pastebin.com/sxV8dnv7
[01:47:52] <danergo> I'm migrating now back to 4.2 but it's a bit hard, if you can test it, it might solve your problem
[01:48:06] <danergo> but I'm not related to ffmpeg, and also I'm not expert at all :)
[01:48:08] <Terrence> This is the loop that I'm using to read each frame, encode them, and write to the output
[01:48:14] <BtbN> What does 4.2 do that 4.4 doesn't?
[01:48:24] <BtbN> If you think you found an issue, you should open one, and not just use an old version
[01:48:48] <danergo> It's still just an assumption, I need to validate
[01:48:48] <Terrence> I'm not sure if the version I'm using is the issue danergo
[01:48:52] <BtbN> There's a lot of people using 4.4 and later quite successfully, so it being broken seems unlikely
[01:48:59] <danergo> ahha
[01:49:02] <Terrence> I agree
[01:49:35] <Terrence> https://pastebin.com/VhtLJsnv
[01:49:47] <danergo> I'll double check this now, don't want to raise any ticket before it's 100% sure
[01:49:55] <Terrence> These are the helper functions I'm using to encode and write but I doubt these could be the issue because I copied them striaght from the examples
[01:50:26] <Terrence> I just don't know why it's only copying up until a certain frame
[01:50:41] <BtbN> Sounds like you just forgot to flush something
[01:51:00] <Terrence> I flushed the encoder at the completion of the encoding process
[01:51:00] <BtbN> a lot of decoders, filters and encoders require flushing
[01:51:17] <danergo> pretty much I'm doing the same, just I don't decode and encode only remux
[01:51:19] <Terrence> EncodeAndWrite(NULL, outputFormatContext, outputCodecContext);
[01:51:27] <BtbN> That's not an ffmpeg function.
[01:51:42] <Terrence> Yes but if you look at the helper functions I've defined it there
[01:51:50] <Terrence> and it uses ffmpeg functions to do so
[01:52:22] <Terrence> The only reason I did that was because I found it unnecessary to use a FIFO
[01:52:28] <Terrence> All I need is the frames
[01:53:08] <Terrence> EncodeANDWrite takes in a frame along with the outputformatcontext and outputcodeccontext, encodes, gets the packet, and writes to output file
[01:53:44] <Terrence> The audio file produces the correct sound that I'm expecting but it just stops short
[01:54:30] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Ping timeout: 265 seconds)
[01:54:48] <Terrence> Or should I be flushing the encoder sooner than where I have it currently being flushed?
[01:54:50] <BtbN> And do you flush the demuxer and the decoder?
[01:54:53] <BtbN> And the filter chain?
[01:55:00] <Terrence> I'm not using a filter chain
[01:55:10] <Terrence> And yes
[01:55:13] <Terrence> to both
[02:00:48] <Terrence> Could it be because I didn't write the output trailer?
[02:01:19] <BtbN> Does it work when you do the same with ffmpeg.c?
[02:01:24] <Terrence> Yes
[02:02:36] <BtbN> You're missing something then. Can't really tell you what then.
[02:02:38] <BtbN> *though
[02:03:00] <Terrence> Sigh thank you though
[02:04:04] <Terrence> But just to make sure, it's possible to perform this process without using a AVFIFO right?
[02:04:34] <Terrence> That's the real main difference because I'm passing in AVFrames instead
[02:14:22] <danergo> guys, what does "1 reference frame" means here?
[02:14:24] <danergo> Stream #0:0: Video: h264 (Main), 1 reference frame, yuv420p(progressive, left), 1600x900 (1600x912), 10 tbr, 90k tbn
[02:14:36] <danergo> I've called `av_dump_format`
[02:15:28] <BtbN> I don't think I have ever seen that before
[02:15:50] <BtbN> I'd guess it means how many reference frame each non-I frame has/can have
[02:19:39] *** Joins: linjie (~linjie@58.247.210.251)
[02:24:14] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 268 seconds)
[02:29:50] *** Quits: ripdog (~quassel@user/ripdog) (Quit: ripdog)
[02:36:06] *** Joins: thebombzen (~thebombze@71.73.92.220)
[02:37:02] *** Quits: thebombzen (~thebombze@71.73.92.220) (Client Quit)
[02:37:19] *** Joins: thebombzen (~thebombze@71.73.92.220)
[02:37:38] *** Quits: thebombzen (~thebombze@71.73.92.220) (Client Quit)
[02:40:16] *** Joins: thebombzen (~thebombze@71.73.92.220)
[02:41:35] *** Quits: blerd (blerd@71.182.169.24) (Quit: Going offline, see ya! (www.adiirc.com))
[02:43:55] *** Quits: thebombzen (~thebombze@71.73.92.220) (Client Quit)
[02:46:14] *** Quits: Buster_ (~Buster@buster-net.ru) ()
[02:54:22] *** Joins: fossforus (~stan@99-173-128-32.lightspeed.rlghnc.sbcglobal.net)
[02:56:14] *** Quits: dreamon (~dreamon@pd95038fb.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[02:57:07] <fossforus> How do I set the output format to the raw video from something like ffv1, magicyuv, or utvideo? you can do it for x264 with -f h264, but there doesn't seem to be anything like that for the others
[02:57:23] <fossforus> I tried messing with -f rawvideo, but it seems to actually be for the codec named rawvideo
[02:57:36] <BtbN> rawvideo is literally raw, uncompressed frame
[02:57:58] <BtbN> A lot of codecs don't have format defined to write them out without a container.
[02:58:58] <fossforus> well that's annoying, because the muxing overhead for every container I've tried is so high that I lose over half of my performance when screencasting
[02:59:06] <fossforus> so I need raw output
[02:59:09] <BtbN> That makes no sense
[02:59:18] <BtbN> Most codecs, without a container, are also useless
[02:59:24] <BtbN> since the container carries timing and header data
[02:59:42] <BtbN> h264 and hevc are a bit of a special case in that they have some container-like properties
[03:00:33] <BtbN> I have strong doubt about any container, even mpegts, having a 50% overhead though
[03:01:41] <fossforus> but yeah huffyuv with -f mkv/nut/avi/whatever is far slower than libx264rgb -preset slow output to -f h264
[03:01:48] <fossforus> and I checked for i/o bottlenecks
[03:02:22] <furq> slower by what metric
[03:02:32] <BtbN> It's _very_ unlikely that the muxer is your performance bottleneck. Ever.
[03:02:35] <furq> if you just mean throughput then x264 is multithreaded and huffyuv isn't
[03:02:52] <fossforus> but huffyuv is multithreaded according to -encoders
[03:02:58] <fossforus> only if you enable -context 1 is it disabled
[03:03:10] <fossforus> or is that ffvhuff
[03:03:13] <fossforus> well same story I sude both
[03:03:19] <fossforus> s/su/us
[03:04:14] <fossforus> if I output libx264 to any format except h264 it's the same story too
[03:04:27] <fossforus> the muxing into a container makes screencasting above 30fps impossible
[03:10:47] *** Joins: Muzer (~muzer@tim32.org)
[03:11:46] *** Joins: ripdog (~quassel@user/ripdog)
[03:29:54] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Ping timeout: 272 seconds)
[03:31:45] *** Quits: ripdog (~quassel@user/ripdog) (Quit: ripdog)
[03:34:56] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[03:42:37] *** Joins: thebombzen (~thebombze@71.73.92.220)
[03:42:51] *** Joins: ripdog (~quassel@user/ripdog)
[03:44:02] *** Quits: thebombzen (~thebombze@71.73.92.220) (Client Quit)
[03:47:41] <Terrence> BtbN you said one of the primary reasons the encoder may fail to encode every frame is because something may not have been flushed right?
[03:47:58] <Terrence> I'm stepping through my code now and trying to examine where that could have been the case
[03:48:07] <BtbN> It's one possible reason at least
[03:48:10] *** Quits: der_richter (~Akemi@p4fde4320.dip0.t-ipconnect.de) (Quit: Leaving.)
[03:48:20] <Terrence> Okay
[03:48:25] <Terrence> I'll keep searching
[03:49:01] <Terrence> and I'm not sure if you saw my question, but it's possible to only pass frames to an encoder rather than using an AVFifo struct too right ?
[03:49:30] <BtbN> No idea
[03:49:31] <Terrence> BtbN
[03:49:36] <Terrence> Oh okay
[03:49:40] <Terrence> Well thanks anyways
[03:53:52] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Quit: leaving)
[04:04:01] *** Quits: emcodem (uid483343@id-483343.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[04:07:58] *** Quits: iive (~iive@87.119.101.204.client.entry.bg) (Quit: They came for me...)
[04:08:19] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[04:10:52] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[04:11:47] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[04:15:52] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[04:16:52] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[04:28:05] *** Joins: Kacper_ (~kasper93@89-74-110-199.dynamic.chello.pl)
[04:30:02] *** Quits: kasper93 (~kasper93@89-74-110-199.dynamic.chello.pl) (Ping timeout: 268 seconds)
[04:30:02] *** Kacper_ is now known as kasper93
[04:34:24] *** Quits: pong (~beaver@user/pong) (Remote host closed the connection)
[04:47:45] *** Joins: pipeweed[m] (~ahtimozil@2001:470:69fc:105::367)
[05:06:31] *** Quits: DarkG (~DarkG@user/darkg) (Excess Flood)
[05:06:45] *** Joins: DarkG (~DarkG@user/darkg)
[05:13:18] *** Joins: WereSquirrel (~Squirrel@user/navithefairy)
[05:13:24] *** Quits: NaviTheFairy (~Squirrel@user/navithefairy) (Read error: Connection reset by peer)
[05:15:46] *** Quits: blb (~blb@user/blb) (Ping timeout: 240 seconds)
[05:16:42] *** Joins: blb (~blb@user/blb)
[05:18:53] <Terrence> Is there a way to view the number of frames in a input file using ffprobe?
[05:21:28] <BtbN> I don't think without decoding the whole thing. Which is an option, but can take a while.
[05:22:31] <BtbN> It literally has a -count_frames option even
[05:22:43] <Terrence> ffprobe does?
[05:22:48] <BtbN> Yes
[05:24:07] <Terrence> Okay, I just tried "ffprobe -i input.wav -count_frames" but it only shows me the encoder, duration, bit rate
[05:24:27] <furq> you need -show_streams as well
[05:24:38] <furq> it'll be under nb_frames iirc
[05:24:45] <Terrence> "ffprobe -i input.wav -count_frames -show_streams" ?
[05:24:50] <furq> sure
[05:25:00] <BtbN> Does ffprobe even have -i?
[05:25:12] <furq> nb_read_frames
[05:25:24] <Terrence> Ah thanks ! furq
[05:25:48] <furq> -show_entries stream=nb_read_frames instead of -show_streams will spam your terminal less
[05:25:59] <Terrence> Okay, going back to my earlier issue I just want to make sure that the while loop is reading every frame and then I'll know if its a problem with the encoder or not
[05:26:08] <Terrence> Thanks !
[05:26:31] <furq> BtbN: yeah it still works
[05:26:50] *** Quits: arxxr (~klepz@2804:7f1:ea80:a859:15d8:7359:d823:baa4) (Quit: Leaving)
[05:27:27] <Terrence> Nice, it looks like the number of frames read from the while loop is the same as the number of frames in the input file
[05:27:42] <Terrence> I guess I just need to figure out what isn't getting flushed
[05:28:50] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 255 seconds)
[05:30:20] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:54:01] *** Joins: vlm (~vlm@user/vlm)
[06:02:53] <Terrence> I'm really starting to think my issue may just be in one of the ffmpeg functions. Essentially what I am trying to do now is simply just copy one audio file into another but for some reason it still doesn't seem to match in durations. I've simplified my program even more avoiding the use of helper functions and simply just using
[06:02:53] <Terrence> avcodec_send_frame(), avcodec_receive_packet(), and av_write_frame() but for some reason it still is cut short even after flushing the encoder and demuxer
[06:03:40] <Terrence> https://pastebin.com/KsEifJsz
[06:04:47] <Terrence> This is the code sample if anyone might know, After referencing ffmpeg.c and other examples I feel the structure of the program is done correctly but the functions from API may not be working properly
[06:09:30] *** Quits: MrZeus__ (~MrZeus@37.120.156.249) (Ping timeout: 272 seconds)
[06:09:30] *** Joins: Fohsap (~Muimi@119.112.248.238)
[06:11:47] <Terrence> Or is there a documentation that shows one what filters needed to be flushed if any?
[06:12:27] *** Joins: thebombzen (~thebombze@71.73.92.220)
[06:12:52] *** Joins: houlei (uid497843@id-497843.stonehaven.irccloud.com)
[06:19:13] <fossforus> is there a way to figure out what formats a codec can encode into?
[06:21:26] *** Joins: linjie (~linjie@58.247.210.251)
[06:26:01] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 258 seconds)
[06:43:42] *** Joins: TL (~TL@119.4.240.125)
[06:44:34] <TL> have someone can tell me which patch fixed the problem of some areas are fuzzy at the loongson
[06:45:36] <TL> file:///home/test/Desktop/æªå¾å½å±_éæ©åºå_20210712101523.png
[06:47:17] <Terrence> can't see
[06:48:09] *** Quits: shibboleth (~shibbolet@gateway/tor-sasl/shibboleth) (Quit: shibboleth)
[06:55:21] <fossforus> TL: you sent the url of a local file
[06:56:37] *** Joins: jos2 (~jos3@dyndsl-091-248-052-071.ewe-ip-backbone.de)
[06:59:31] <TL> i will study how upload the file
[07:00:08] <Terrence> You can just use control v after taking the screenshot
[07:00:27] *** Quits: jos1 (~jos3@dyndsl-091-096-041-232.ewe-ip-backbone.de) (Ping timeout: 265 seconds)
[07:01:18] <TL> my system can not support it
[07:02:20] <Terrence> There's an upload button on the bottom right corner of your screen
[07:04:22] <TL> SEND  /home/uos/Desktop/1.png
[07:04:54] <TL> i click it only show a command
[07:04:57] <Terrence> Still can't see, you can just describe the problem
[07:05:07] <Guest6>  use snipboard.io
[07:07:15] <TL> [图片]
[07:09:50] <TL> i use loongson the image some where color anamorphose,  as the gray  become purple
[07:11:11] <TL> somewhere
[07:19:09] <TL> and i find the newest verion is fix the problem, i want kown in which version already fix it
[07:24:28] <TL> https://snipboard.io/vrbzIH.jpg
[07:30:07] *** Quits: Arwalk (~Arwalk@lfbn-dij-1-263-107.w86-235.abo.wanadoo.fr) (Quit: The Lounge - https://thelounge.chat)
[07:30:09] *** Joins: gnoo (~gnoo@user/gnoo)
[07:30:37] *** Joins: Arwalk (~Arwalk@lfbn-dij-1-263-107.w86-235.abo.wanadoo.fr)
[07:44:52] *** Joins: Retr0id9 (~Retr0id@user/retr0id)
[07:45:54] *** Quits: Retr0id (~Retr0id@user/retr0id) (Ping timeout: 252 seconds)
[07:45:54] *** Retr0id9 is now known as Retr0id
[07:50:04] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[08:18:45] *** Joins: pong (~beaver@user/pong)
[08:26:43] <Terrence> I was able to figure out how to copy every frame of an input to an output with the same duration but does anyone happen to know how to flush a filter? When I use the same logic to the create the output file but include filtering the frames, the output file is not correct length
[08:31:42] *** Quits: tinytoast (~squeek@user/tinystoat) (Quit: reconnecting)
[08:31:50] *** Joins: tinystoat (~squeek@user/tinystoat)
[08:34:50] *** Quits: darkapex (~darkapex@user/darkapex) (Read error: Connection reset by peer)
[08:36:01] *** Quits: pong (~beaver@user/pong) (Quit: leaving)
[08:36:14] *** Joins: darkapex (~darkapex@user/darkapex)
[08:37:29] *** Joins: pong (~beaver@user/pong)
[08:41:08] *** Quits: pong (~beaver@user/pong) (Remote host closed the connection)
[08:42:48] *** Joins: pong (~beaver@user/pong)
[09:00:13] *** Joins: linjie (~linjie@58.247.210.251)
[09:05:04] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 268 seconds)
[09:09:50] *** Quits: blinky42 (~quassel@user/blinky42) (Read error: Connection reset by peer)
[09:11:57] *** Joins: blinky42 (~quassel@206.245.174.16)
[09:11:57] *** Quits: blinky42 (~quassel@206.245.174.16) (Changing host)
[09:11:57] *** Joins: blinky42 (~quassel@user/blinky42)
[09:31:21] *** Quits: fulinjie (sid455360@id-455360.brockwell.irccloud.com) (*.net *.split)
[09:31:21] *** Quits: Lynne (~lynne@ffmpeg/developer/lynne) (*.net *.split)
[09:31:36] *** Joins: Lynne (~lynne@ffmpeg/developer/lynne)
[09:31:38] *** Joins: fulinjie_ (sid455360@id-455360.brockwell.irccloud.com)
[09:35:31] *** Joins: Guest34 (~Guest34@188.241.179.151)
[09:36:12] *** Quits: DeHackEd (~dehacked@atmaweapon.dehacked.net) (*.net *.split)
[09:36:12] *** Quits: tempora (~tempus@2a00:dcc0:dead:ba62:a1b2:c3d4:e5f6:cafe) (*.net *.split)
[09:36:12] *** Quits: fsphil (fsphil@ursa.sanslogic.co.uk) (*.net *.split)
[09:36:12] *** Quits: tp (~tp@vmi364498.contaboserver.net) (*.net *.split)
[09:36:12] *** Quits: slackbot (~RogerBell@108.180.67.193) (*.net *.split)
[09:36:12] *** Quits: strudl (~strudl@user/strudl) (*.net *.split)
[09:36:12] *** Quits: Vedaa (75d3d2e6@kayg.org) (*.net *.split)
[09:36:12] *** Quits: Ekho (~Ekho@user/ekho) (*.net *.split)
[09:36:12] *** Quits: bencoh (~bencoh@user/bencoh) (*.net *.split)
[09:36:12] *** Quits: Bombo (atom@user/bombo) (*.net *.split)
[09:36:12] *** Quits: 074AABZX6 (Rhys@help.lux.melted.me) (*.net *.split)
[09:36:12] *** Quits: another| (~another@wireguard/tunneler/another) (*.net *.split)
[09:36:12] *** Quits: jaminc (~user@2607:5300:60:116e::1) (*.net *.split)
[09:36:12] *** Quits: plitter (~plitter@user/plitter) (*.net *.split)
[09:36:12] *** Quits: colona (~colona@grunt.ycc.fr) (*.net *.split)
[09:36:12] *** Quits: CounterPillow (~Pillow@overviewer/CounterPillow) (*.net *.split)
[09:36:12] *** Quits: drv (quasselcor@oak.drv.nu) (*.net *.split)
[09:36:12] *** Quits: user890104 (~Venci@freemyipod/user890104) (*.net *.split)
[09:36:12] *** Quits: Hobbyboy (Hobbyboy@hobbyboy.co.uk) (*.net *.split)
[09:36:12] *** Quits: furq (~furq@b23.be) (*.net *.split)
[09:36:12] *** Quits: Arsen (~arsen@managarm/dev/Arsen) (*.net *.split)
[09:36:18] *** Joins: bencoh_ (~bencoh@nautica.notk.org)
[09:36:19] *** Joins: Rhvs (Rhys@help.lux.melted.me)
[09:36:20] *** Joins: Bombo (atom@p4ff00056.dip0.t-ipconnect.de)
[09:36:21] *** Joins: slackbot (~RogerBell@108.180.67.193)
[09:36:21] *** Joins: Vedaa (6796bb0e@kayg.org)
[09:36:22] *** Joins: drv (quasselcor@oak.drv.nu)
[09:36:23] *** Joins: furq_ (~furq@b23.be)
[09:36:23] *** Joins: strudl (~strudl@tvarohova.strud.la)
[09:36:23] *** Quits: strudl (~strudl@tvarohova.strud.la) (Excess Flood)
[09:36:26] *** Joins: jaminc (~user@2607:5300:60:116e::1)
[09:36:29] *** Joins: user890104 (~Venci@freemyipod/user890104)
[09:36:33] *** Quits: Bombo (atom@p4ff00056.dip0.t-ipconnect.de) (Changing host)
[09:36:33] *** Joins: Bombo (atom@user/bombo)
[09:36:34] *** Joins: DeHackEd (~dehacked@atmaweapon.dehacked.net)
[09:36:34] *** Joins: plitter (~plitter@78.31.86.243)
[09:36:36] *** Quits: imuo (~imuo@cpe-174-100-53-99.neo.res.rr.com) (Ping timeout: 272 seconds)
[09:36:37] *** Joins: Hobbyboy|BNC (Hobbyboy@hobbyboy.co.uk)
[09:36:41] *** Joins: colona (~colona@grunt.ycc.fr)
[09:36:48] *** Joins: tp (~tp@vmi364498.contaboserver.net)
[09:36:49] *** Joins: fsphil (fsphil@ursa.sanslogic.co.uk)
[09:36:52] *** Joins: strudl (~strudl@tvarohova.strud.la)
[09:36:52] *** Quits: strudl (~strudl@tvarohova.strud.la) (Excess Flood)
[09:36:52] *** Quits: plitter (~plitter@78.31.86.243) (Changing host)
[09:36:52] *** Joins: plitter (~plitter@user/plitter)
[09:36:55] *** Joins: CounterPillow (~Pillow@overviewer/CounterPillow)
[09:37:16] *** Joins: tempora (~tempus@193.234.225.98)
[09:37:18] <Guest34> can filter_complex pass a deadline to stream? if a stream is behind, can it skip input to catch up? instead of processing frames that miss the deadline?
[09:37:22] *** Joins: strudl (~strudl@user/strudl)
[09:37:22] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:37:34] *** Joins: another (~another@wireguard/tunneler/another)
[09:38:02] *** Joins: Arsen (~arsen@managarm/dev/Arsen)
[09:38:04] *** Joins: strudl (~strudl@user/strudl)
[09:38:05] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:38:24] *** Joins: strudl (~strudl@user/strudl)
[09:38:24] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:38:54] *** Joins: strudl (~strudl@user/strudl)
[09:38:54] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:39:22] *** Joins: strudl (~strudl@user/strudl)
[09:39:22] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:39:52] *** Joins: strudl (~strudl@user/strudl)
[09:39:52] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:40:24] *** Joins: strudl (~strudl@user/strudl)
[09:40:25] *** Quits: strudl (~strudl@user/strudl) (Excess Flood)
[09:40:36] *** Hobbyboy|BNC is now known as Hobbyboy
[09:40:56] *** Joins: strudl (~strudl@user/strudl)
[09:41:25] *** Quits: jimby (~jimby@jimby.jimby.name) (*.net *.split)
[09:41:25] *** Quits: znf (~ibm86@toaster.linge-ma.ro) (*.net *.split)
[09:41:25] *** Quits: Syrup (uid10029@user/maple) (*.net *.split)
[09:41:25] *** Quits: termos (sid18647@2001:67c:2f08:5::48d7) (*.net *.split)
[09:41:25] *** Quits: flowy1 (~flowy@2a01:4f8:c0c:1a8f::1) (*.net *.split)
[09:41:25] *** Quits: pulec (~pulec@user/pulec) (*.net *.split)
[09:41:25] *** Quits: Naleksuh (sid454423@user/naleksuh) (*.net *.split)
[09:41:26] *** Quits: occivink (~occivink@2001:41d0:8:bbf::1) (*.net *.split)
[09:41:26] *** Quits: tmatth (sid143283@videolan/developer/tmatth) (*.net *.split)
[09:41:26] *** Quits: garfvl (~root@ns530260.ip-149-56-24.net) (*.net *.split)
[09:41:26] *** Quits: upekkha (~Advanced@2a01:4f8:1c0c:49df::1) (*.net *.split)
[09:41:26] *** Quits: ullbeking (sid5364@id-5364.charlton.irccloud.com) (*.net *.split)
[09:41:26] *** Quits: genius3000 (g3k@user/genius3000) (*.net *.split)
[09:41:26] *** Quits: Zouppen (~joell@jkl.hacklab.fi) (*.net *.split)
[09:41:26] *** Quits: meinside (uid24933@id-24933.brockwell.irccloud.com) (*.net *.split)
[09:41:26] *** Quits: nurupo (~nurupo.ga@user/nurupo) (*.net *.split)
[09:41:26] *** Quits: llyyr (~llyyr@51.15.176.87) (*.net *.split)
[09:41:26] *** Quits: sfan5 (~sfan5@user/sfan5) (*.net *.split)
[09:41:26] *** Quits: qwedfg (~qwedfg@user/qwedfg) (*.net *.split)
[09:41:26] *** Quits: fatalis (~fatalis@user/fatalis) (*.net *.split)
[09:41:26] *** Quits: babyface (~babyface@user/babyface) (*.net *.split)
[09:41:26] *** Quits: itok (sid418430@id-418430.charlton.irccloud.com) (*.net *.split)
[09:41:26] *** Quits: Tips|Cloud (sid62231@id-62231.charlton.irccloud.com) (*.net *.split)
[09:41:26] *** Quits: koolazer (~koo@212.47.237.37) (*.net *.split)
[09:41:26] *** Quits: TheLink (~TheLink@user/thelink) (*.net *.split)
[09:41:33] *** Joins: Zouppen (~joell@jkl.hacklab.fi)
[09:41:34] *** Joins: llyyrr (~llyyr@51.15.176.87)
[09:41:34] *** Joins: meinside_ (uid24933@id-24933.brockwell.irccloud.com)
[09:41:34] *** Joins: pulec_ (~pulec@37-97-160-172.colo.transip.net)
[09:41:38] *** Joins: fatalis (~fatalis@104.128.62.36)
[09:41:40] *** Joins: flowy1 (~flowy@2a01:4f8:c0c:1a8f::1)
[09:41:42] *** Joins: genius3000 (g3k@user/genius3000)
[09:41:44] *** Joins: Syrup (uid10029@user/maple)
[09:41:44] *** Joins: jimby (~jimby@jimby.jimby.name)
[09:41:46] *** Joins: upekkha (~Advanced@2a01:4f8:1c0c:49df::1)
[09:41:47] *** Joins: termos (sid18647@id-18647.brockwell.irccloud.com)
[09:41:47] *** Joins: koolazer (~koo@user/koolazer)
[09:41:56] *** Joins: occivink (~occivink@2001:41d0:8:bbf::1)
[09:41:58] *** llyyrr is now known as llyyr
[09:42:00] *** Joins: garfvl (~root@ns530260.ip-149-56-24.net)
[09:42:13] *** Joins: Tips|Cloud (sid62231@2001:67c:2f08:3::f317)
[09:42:15] *** Quits: fatalis (~fatalis@104.128.62.36) (Changing host)
[09:42:15] *** Joins: fatalis (~fatalis@user/fatalis)
[09:42:17] *** Joins: itok (sid418430@2001:67c:2f08:3::6:627e)
[09:42:21] *** Joins: Naleksuh (sid454423@id-454423.charlton.irccloud.com)
[09:42:26] *** Joins: ullbeking (sid5364@2001:67c:2f08:3::14f4)
[09:42:29] *** Quits: Naleksuh (sid454423@id-454423.charlton.irccloud.com) (Changing host)
[09:42:29] *** Joins: Naleksuh (sid454423@user/naleksuh)
[09:42:34] *** Joins: tmatth (sid143283@id-143283.tooting.irccloud.com)
[09:42:47] *** Quits: tmatth (sid143283@id-143283.tooting.irccloud.com) (Changing host)
[09:42:47] *** Joins: tmatth (sid143283@videolan/developer/tmatth)
[09:42:55] *** Joins: TheLink (~TheLink@user/thelink)
[09:42:59] *** Joins: sfan5 (~sfan5@user/sfan5)
[09:43:02] *** Joins: babyface (~babyface@user/babyface)
[09:43:05] *** Joins: qwedfg (~qwedfg@user/qwedfg)
[09:43:07] *** Joins: nurupo (~nurupo.ga@user/nurupo)
[09:44:01] *** Joins: znf (~ibm86@toaster.linge-ma.ro)
[09:44:57] *** Quits: ketas (~ketas@0011-0000-0000-0000-d7dc-830e-07d0-2001.dyn.estpak.ee) (*.net *.split)
[09:44:58] *** Quits: Jonno_FTW (~come@user/jonno-ftw/x-0835346) (*.net *.split)
[09:44:58] *** Quits: rhys (~rhys@mill.in.net) (*.net *.split)
[09:44:58] *** Quits: auri (~admin@static.46.108.40.188.clients.your-server.de) (*.net *.split)
[09:44:58] *** Rhvs is now known as Rhys
[09:45:04] *** Joins: Jonno_FT1 (~come@api.carswap.me)
[09:45:10] *** Joins: ketas (~ketas@0011-0000-0000-0000-d7dc-830e-07d0-2001.dyn.estpak.ee)
[09:45:26] *** Joins: interru (~interru@fs.host.decodem.io)
[09:45:31] *** Joins: auri (~admin@static.46.108.40.188.clients.your-server.de)
[09:45:37] *** Joins: Ekho (~Ekho@user/ekho)
[09:45:57] *** Joins: rhys- (~rhys@mill.in.net)
[09:49:20] *** Quits: Guest34 (~Guest34@188.241.179.151) (Quit: Client closed)
[09:54:09] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[10:03:15] *** Joins: der_richter (~Akemi@p4fde4320.dip0.t-ipconnect.de)
[10:03:38] *** Quits: Terrence (~Terrence@097-085-185-009.biz.spectrum.com) (Ping timeout: 265 seconds)
[10:19:31] *** Quits: Vonter (~Vonter@user/vonter) (Read error: Connection reset by peer)
[10:19:44] *** Joins: Vonter (~Vonter@user/vonter)
[10:36:53] *** Joins: Flabb (~Flabb@89.169.84.117)
[10:43:07] *** Quits: Fohsap (~Muimi@119.112.248.238) (Remote host closed the connection)
[10:48:01] *** Joins: Terrence (~Terrence@097-085-185-009.biz.spectrum.com)
[11:00:36] *** Quits: xkuru (~xkuru@user/xkuru) (Read error: Connection reset by peer)
[11:05:39] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[11:17:09] *** Joins: Fohsap (~Muimi@119.112.248.238)
[11:19:12] *** Quits: TL (~TL@119.4.240.125) (Ping timeout: 272 seconds)
[11:19:30] *** Joins: TL (~TL@119.4.240.125)
[11:26:01] *** Quits: pong (~beaver@user/pong) (Quit: `test`.)
[11:36:32] *** Quits: TL (~TL@119.4.240.125) (Ping timeout: 272 seconds)
[11:36:41] *** Joins: beaver (~beaver@user/pong)
[11:36:50] *** Joins: TL (~TL@119.4.240.125)
[11:37:20] *** Joins: Volgaar (~volgaar@104.66.13.93.rev.sfr.net)
[11:38:06] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 255 seconds)
[11:45:39] *** Joins: linjie (~linjie@58.247.210.251)
[11:48:26] <danergo> guys, I need a little advice
[11:48:57] <danergo> my chain is: cam(x264)->rtsp(h264)->ffmpeg->fmp4(h264)
[11:49:43] <danergo> on sender's side, I requested a maxgop of 8, which resulted to produce a valid keyframe at every 50th frame. fps = 10
[11:51:55] *** Quits: AbleBacon (~AbleBacon@user/AbleBacon) (Read error: Connection reset by peer)
[11:52:30] <danergo> in case I run `ffmpeg -bsf:v trace_headers`, it seems good: in "Slice header/frame_num" always increasing upto 49, then next packet is keyframe
[11:52:52] <danergo> so 50th packet is always keyframe
[11:53:28] <danergo> however, if I use avformat* functions:
[11:53:33] <danergo> avformat_open_input(...)
[11:53:41] <danergo> avformat_find_stream_info(...)
[11:54:11] <danergo> then in a lopp:
[11:54:15] <danergo> av_read_frame(...)
[11:54:40] *** Quits: Arokh (~MoveAlong@ip-88-153-211-132.hsi04.unitymediagroup.de) (Ping timeout: 272 seconds)
[11:54:49] <danergo> and I dump read packet's details, only every 200th shown as keyframe
[11:55:26] <danergo> I limit the probesize to 32, for faster startup on low-end machines, but I tried the ffmpeg command on the same low-end machine and it works OK.
[11:56:06] <danergo> however ffmpeg's version there is 4.1 (from apt), and my code is built upon 4.4
[12:00:37] *** Joins: Arokh (~MoveAlong@ip-88-153-211-132.hsi04.unitymediagroup.de)
[12:04:24] *** Joins: dreamon (~dreamon@ppp-88-217-71-147.dynamic.mnet-online.de)
[12:05:54] *** Quits: zmt00 (~zmt00@user/zmt00) (Ping timeout: 240 seconds)
[12:09:36] *** Quits: Arokh (~MoveAlong@ip-88-153-211-132.hsi04.unitymediagroup.de) (Ping timeout: 255 seconds)
[12:10:02] *** Joins: luni-4 (uid453292@id-453292.charlton.irccloud.com)
[12:11:42] *** Joins: Arokh (~MoveAlong@ip-88-153-211-132.hsi04.unitymediagroup.de)
[12:32:35] *** Joins: Blacker47 (~Blacker47@user/blacker47)
[12:49:46] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 272 seconds)
[12:57:32] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[12:57:52] *** Joins: Trieste (T@user/pilgrim)
[13:03:18] *** Joins: Trieste_ (T@user/pilgrim)
[13:03:56] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 272 seconds)
[13:06:49] *** Quits: bencoh_ (~bencoh@nautica.notk.org) (Changing host)
[13:06:49] *** Joins: bencoh_ (~bencoh@user/bencoh)
[13:08:12] *** Joins: Vonter (~Vonter@user/vonter)
[13:09:27] <Terrence> Is it possible for a certain frame of one audio file to be shorter or longer in duration than the frame of another audio file?
[13:10:00] <JEEB> yes, various coded audio formats etc have different frame sizes
[13:10:19] <JEEB> AC-3 is one common thing where the audio frame is not 1024
[13:10:32] *** Joins: Trieste (T@user/pilgrim)
[13:10:35] <JEEB> (and coded audio formats can have multiple frame sizes supported)
[13:10:54] *** Quits: Trieste_ (T@user/pilgrim) (Ping timeout: 272 seconds)
[13:11:16] <Terrence> Hmm thank you for that explanation because I've been working on something and it just doesn't seem to make any sense why I'm getting the results I am
[13:12:49] <JEEB> the audio AVFrames always have the number samples in there, and if you're utilizing libavfilter you can either just utilize the function that gives you an AVFrame of XYZ audio samples (and you never set a general output AVFrame frame size), or if you always know how big your audio frames will be, there is a function to set the output audio frame sizes for avfilter
[13:13:27] <Terrence> Is it possible to use ffprobe to see those results as well?
[13:13:54] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: ma aafai save hunxa)
[13:13:57] *** bencoh_ is now known as bencoh
[13:14:09] <JEEB> since it can just dump what the api outputs, yes
[13:14:13] *** Joins: gnoo (~gnoo@user/gnoo)
[13:14:13] <JEEB> -show_frames
[13:14:26] <JEEB> that decodes and then outputs the data from received AVFrames
[13:14:52] <Terrence> Nice, I see it
[13:16:22] *** Joins: Vonter_ (~Vonter@user/vonter)
[13:16:39] *** Quits: Vonter (~Vonter@user/vonter) (Ping timeout: 255 seconds)
[13:17:55] <Terrence> I'm trying to incorporate a filter to copy specific frames from one audio stream to an output file, but for some reason, although it's reading the correct number of frames as expecting and writing the specific frames as expected, the duration of the output file does not match the expectations from the filter
[13:18:33] <Terrence> For example, I've been using an audio file of 40 seconds and the filter reveals that I do not need 4 seconds
[13:18:47] <Terrence> The input file contains 8133 frames
[13:18:58] <Terrence> The output contains 8096 frames
[13:19:19] <Terrence> However the output file is still 39 seconds instead of the expected 36
[13:19:40] <Terrence> And when I tried it on another file that is 9 minutes long and 27823 frames
[13:20:06] <Terrence> The filter indicated that 6 seconds were unneeded
[13:20:50] <Terrence> And when I ran it through the filter only 27806 frames were written, but again the output file is still 8:59 seconds
[13:20:53] <Terrence> I
[13:21:07] <Terrence> It's really confusing how this is happening JEEB
[13:31:02] <Terrence> I think I have another Idea I'll have to use
[13:37:39] *** pulec_ is now known as pulec
[13:38:21] *** Quits: pulec (~pulec@37-97-160-172.colo.transip.net) (Changing host)
[13:38:21] *** Joins: pulec (~pulec@user/pulec)
[13:41:52] *** Parts: pipeweed[m] (~ahtimozil@2001:470:69fc:105::367) ()
[13:43:23] <Terrence> Is it possible to use aselect from the ffmpeg API?
[14:00:45] *** Quits: TL (~TL@119.4.240.125) (Ping timeout: 255 seconds)
[14:01:03] *** Joins: TL (~TL@119.4.240.125)
[14:03:34] *** Quits: aquijoule__ (~richbridg@213-225-7-126.nat.highway.a1.net) (Ping timeout: 252 seconds)
[14:07:47] *** Joins: richbridger (~richbridg@mobiledyn-185-69-244-156.mrsn.at)
[14:25:15] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[14:29:44] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[14:33:34] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Remote host closed the connection)
[14:33:55] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[14:39:32] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[14:40:37] <roxlu> Hi, does someone knows if ffmpeg implements the latest LL-HLS spec?
[14:49:49] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[14:50:05] *** Joins: gnoo (~gnoo@user/gnoo)
[14:59:39] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[14:59:51] <zikurat> Hi
[15:01:23] <zikurat> How simple way add audio to this? https://pastebin.com/BBak0sJx
[15:04:17] <zikurat> What is a simple way of add audio to this? https://pastebin.com/BBak0sJx
[15:10:15] *** Joins: iive (~iive@87.119.101.204.client.entry.bg)
[15:12:34] *** Joins: aquijoule_ (~richbridg@089144202018.atnat0011.highway.a1.net)
[15:13:32] *** Quits: richbridger (~richbridg@mobiledyn-185-69-244-156.mrsn.at) (Read error: Connection reset by peer)
[15:39:30] <danergo> folks, have you seen my question yet by any chance? :)
[15:39:47] *** Quits: Atsuko (~x@94.242.250.86) (Remote host closed the connection)
[15:40:46] *** Joins: Atsuko (~x@94.242.250.86)
[15:46:46] *** Joins: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua)
[15:55:56] *** Quits: Guest6 (~Guest6@206.127.125.184) (Quit: Client closed)
[16:09:31] *** Joins: MrZeus__ (~MrZeus@37.120.156.249)
[16:14:51] *** Quits: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd) (Ping timeout: 255 seconds)
[16:24:54] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:25:12] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:26:52] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:27:09] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:28:49] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:29:06] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:32:30] *** Quits: adanwan (~adanwan@gateway/tor-sasl/adanwan) (Ping timeout: 244 seconds)
[16:32:43] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:32:43] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:33:01] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Ping timeout: 244 seconds)
[16:33:32] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Ping timeout: 244 seconds)
[16:34:00] *** Quits: markvandenborre (~mark@static.88.183.119.168.clients.your-server.de) (Ping timeout: 268 seconds)
[16:34:03] *** Quits: gnoo (~gnoo@user/gnoo) (Ping timeout: 244 seconds)
[16:34:03] *** Quits: admal (~admal@gateway/tor-sasl/admal) (Ping timeout: 244 seconds)
[16:34:07] *** Joins: markvandenborre (~mark@static.88.183.119.168.clients.your-server.de)
[16:34:12] *** Quits: mickey (~user@user/mickey) (Quit: Ping timeout (120 seconds))
[16:34:39] *** Quits: nitroxis (n@nxs.re) (Ping timeout: 265 seconds)
[16:34:48] *** Joins: nitroxis (n@nxs.re)
[16:35:07] *** Joins: mickey (~user@user/mickey)
[16:35:09] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[16:36:09] *** Joins: admal (~admal@gateway/tor-sasl/admal)
[16:36:18] *** Joins: gnoo (~gnoo@user/gnoo)
[16:36:52] *** Joins: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj)
[16:41:32] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:41:37] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[16:41:49] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:43:29] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:43:46] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:46:39] *** Joins: linjie (~linjie@58.247.210.251)
[16:49:35] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:49:52] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:49:56] *** Joins: TanoMarcelo (~TanoMarce@179.63.242.126)
[16:51:18] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 255 seconds)
[16:54:44] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[16:57:59] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[16:58:16] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[16:59:56] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:00:13] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:01:53] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:02:10] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:03:50] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:04:07] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:09:53] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:10:10] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:11:50] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:12:07] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:13:47] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:14:04] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:14:42] *** Joins: linjie (~linjie@58.247.210.251)
[17:17:56] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:18:13] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:19:34] *** Quits: kota2 (~kota@ip70-171-164-33.om.om.cox.net) (Ping timeout: 272 seconds)
[17:19:48] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[17:20:02] *** Joins: linjie (~linjie@58.247.210.251)
[17:23:48] *** Quits: linjie (~linjie@58.247.210.251) (Remote host closed the connection)
[17:23:50] *** Joins: taliho3 (~taliho@c-73-149-98-40.hsd1.ma.comcast.net)
[17:25:59] *** Quits: taliho (~taliho@c-73-149-98-40.hsd1.ma.comcast.net) (Ping timeout: 252 seconds)
[17:26:00] *** taliho3 is now known as taliho
[17:28:26] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:28:43] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:30:23] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:30:40] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:32:20] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:32:37] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:34:17] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:34:34] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:35:09] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[17:38:14] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:38:31] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:40:11] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:40:28] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:41:54] *** Joins: TikityTik (~TikityTik@162.223.44.49)
[17:43:19] *** Joins: TikityTik2 (~TikityTik@162.223.44.49)
[17:44:16] <TikityTik2> Which libraries should I use if I just want to copy video files with their codecs but just append metadata?
[17:45:53] <TikityTik2> also why can't i see any API documentation on here? https://ffmpeg.org/libavutil.html
[17:46:12] <TikityTik2> ah nvm, found a doxygen
[17:46:31] *** Quits: TikityTik (~TikityTik@162.223.44.49) (Client Quit)
[17:48:23] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:48:40] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:50:20] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[17:50:37] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[17:51:16] *** TikityTik2 is now known as TikityTik
[17:54:58] *** Quits: Flole (~Flole@94.31.96.37) (Ping timeout: 240 seconds)
[17:55:22] *** Quits: crashmatrix (~hatseflat@hatsuseno.rootaccess.nl) (Ping timeout: 265 seconds)
[18:00:38] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:00:55] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[18:02:35] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:02:52] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[18:04:32] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:04:49] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[18:05:58] <TikityTik> so i'm absolutely overwhelmed by all this, where can I find examples?
[18:06:57] <TikityTik> for the task i'm trying to do
[18:08:41] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:08:58] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[18:12:53] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:13:10] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[18:13:15] *** Quits: dreamer (~dreamer@user/dreamer) (Ping timeout: 265 seconds)
[18:13:47] *** Joins: dreamer (~dreamer@user/dreamer)
[18:15:57] *** Joins: crashmatrix (~hatseflat@hatsuseno.rootaccess.nl)
[18:25:29] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:25:46] *** Joins: zikurat (~zikurat@77-123-99-16.dne.volia.net)
[18:27:26] *** Quits: zikurat (~zikurat@77-123-99-16.dne.volia.net) (Remote host closed the connection)
[18:27:58] *** Quits: thebombzen (~thebombze@71.73.92.220) (Ping timeout: 272 seconds)
[18:28:56] *** Joins: ||arifaX (~Commodore@p4fc72d52.dip0.t-ipconnect.de)
[18:28:56] *** Quits: ||arifaX (~Commodore@p4fc72d52.dip0.t-ipconnect.de) (Changing host)
[18:28:56] *** Joins: ||arifaX (~Commodore@user/arifax/x-9857073)
[18:28:57] *** Joins: blerd (blerd@71.182.169.24)
[18:37:06] *** Quits: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883) (Ping timeout: 240 seconds)
[18:37:41] *** Joins: GenTooMan (~cyberman@2601:547:437f:e5c6:21f:5bff:fefe:a883)
[18:53:12] *** Quits: ivanich (~ivanich@45-140-123-239.broadband.tenet.odessa.ua) (Read error: Connection reset by peer)
[18:56:14] *** Quits: Nact (~l@host-85-27-122-107.dynamic.voo.be) (Quit: Konversation terminated!)
[18:58:00] *** Joins: Nact (~l@host-85-27-122-107.dynamic.voo.be)
[19:02:36] *** Quits: aquijoule_ (~richbridg@089144202018.atnat0011.highway.a1.net) (Quit: Leaving)
[19:03:39] *** Joins: linjie (~linjie@58.247.210.251)
[19:07:20] <Hello71> system("ffmpeg")?
[19:07:26] <jimby> TikityTik: have you checked the wiki?
[19:07:40] *** Joins: arcatech (~arcatech@user/arcatech)
[19:07:51] <TikityTik> i'm trying to make the end-user not rely on installing ffmpeg as a third party for a plugin i'm making
[19:08:04] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 256 seconds)
[19:08:18] <TikityTik> jimby, the wiki is only for CLI commands no?
[19:08:41] <furq_> TikityTik: https://ffmpeg.org/doxygen/trunk/remuxing_8c-example.html
[19:08:45] *** furq_ is now known as furq
[19:09:02] <TikityTik> thanks, will take a look
[19:09:17] <furq> and https://ffmpeg.org/doxygen/trunk/structAVFormatContext.html#a3019a56080ed2e3297ff25bc2ff88adf
[19:11:42] <furq> if the files are always the same container it might be easier to use a dedicated library for that container
[19:17:12] <TikityTik> yeah it should always be MKV for now
[19:17:21] <TikityTik> but i don't know if that will change in the future
[19:18:55] *** Joins: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi)
[19:19:48] *** Quits: blerd (blerd@71.182.169.24) (Ping timeout: 255 seconds)
[19:22:04] *** Joins: blerd (~blerd@71.182.169.24)
[19:35:45] *** Joins: zumba_addict (~zumba_add@2601:240:4500:8320:9127:25d1:43cf:6018)
[19:44:36] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[19:56:03] *** Joins: rsx (~dummy@ppp-188-174-153-99.dynamic.mnet-online.de)
[19:56:50] <Terrence> In order to use aselect, do I have to create a filter graph for it ?
[19:57:24] <JEEB> it's a filter, so even if you have just three things in that graph (input, filter itself and output), it's still a filter graph
[19:58:21] <Terrence> Okay, I'm trying to figure out how to use it but the thing is, its not a type of filter that just produces metadata
[19:59:32] *** Quits: ||arifaX (~Commodore@user/arifax/x-9857073) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[20:00:06] *** Joins: linjie (~linjie@58.247.210.251)
[20:00:36] <JEEB> TikityTik: there are examples under doc/examples, but generally if you just want to read packets and write them into an output with additional metadata, you just require libavformat demuxing and muxing
[20:02:23] *** Quits: houlei (uid497843@id-497843.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[20:03:08] *** Vonter_ is now known as Vonter
[20:03:52] *** Joins: waleee (~waleee@2001:9b0:216:8200:d457:9189:7843:1dbd)
[20:04:44] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 256 seconds)
[20:05:04] *** Joins: blerd_ (~blerd@71.182.169.24)
[20:05:15] *** Quits: blerd (~blerd@71.182.169.24) (Ping timeout: 255 seconds)
[20:05:19] *** blerd_ is now known as blerd
[20:06:47] <TikityTik> Thank you, I think the remux example is exactly what I need. Just need to get metadata on it
[20:08:10] <TikityTik> also what does muxing really mean? just packaging data into a container?
[20:08:26] <TikityTik> and not modifying the audio or video data?
[20:08:26] <furq> pretty much
[20:08:29] <furq> multiplexing
[20:11:27] <Terrence> Wait, JEEB going back to what you said, are you saying that I don't need to set up the aselect filter with a source and sink?
[20:11:39] <Terrence> Since it's already its own filtergraph?
[20:12:07] <kepstin> no; it's a filter, you need to put it into a filtergraph to use it.
[20:12:29] <Terrence> Oh okay
[20:12:57] <Terrence> But after putting each frame through the sink and getting the output from the sink, how would I produce a new output file?
[20:13:21] *** Quits: blerd (~blerd@71.182.169.24) (Ping timeout: 255 seconds)
[20:14:06] <kepstin> the same way as you would without it - by passing frames to an encoder then a output format.
[20:14:33] <kepstin> a filter takes in frames, and outputs frames. you the transcoding process is the same with or without it.
[20:14:51] *** Quits: Fohsap (~Muimi@119.112.248.238) (Read error: Connection reset by peer)
[20:15:40] *** Joins: zmt00 (~zmt00@user/zmt00)
[20:15:48] <Terrence> Hmm
[20:15:59] *** Quits: rsx (~dummy@ppp-188-174-153-99.dynamic.mnet-online.de) (Quit: rsx)
[20:16:15] <Terrence> That still kind of confuses me because I'm only trying to get certain seconds of audio
[20:16:31] <Terrence> If I pass in every frame wouldn't it just produce the same audio as the input?
[20:16:38] <Terrence> kepstin
[20:16:56] <kepstin> filters can modify frames, add frames, and remove frames.
[20:17:27] <Terrence> Ahh
[20:18:51] <Terrence> I've already started writing the structure of it but not sure if it would work
[20:19:10] <Terrence> https://pastebin.com/EAhBLbu1
[20:19:13] <Terrence> This is what I have so far
[20:19:32] *** Joins: AbleBacon (~AbleBacon@user/AbleBacon)
[20:20:15] <Terrence> So suppose the frame that I DONT WANT goes through av_buffersink_get_frame(), would an error occur during the encoding?
[20:20:21] <Terrence> kepstin
[20:23:53] <Terrence> Or since you said some frames can be deleted, so I add like a statement that says, if(filt_frame){ // perform encoding on said frame //}
[20:24:06] <TikityTik> ok so I assume I want to modify this struct to add chapters to it. https://ffmpeg.org/doxygen/trunk/structAVFormatContext.html
[20:24:59] <TikityTik> am I supposed to use write_chapter() on it?
[20:26:13] <TikityTik> or manually construct these and set the # of chapters? https://ffmpeg.org/doxygen/trunk/structAVChapter.html
[20:27:08] <TikityTik> unless I'm supposed to use avpriv_new_chapter() instead?
[20:29:50] *** Quits: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com) (Quit: WeeChat 3.0.1)
[20:34:02] *** Quits: TanoMarcelo (~TanoMarce@179.63.242.126) (Quit: WeeChat 3.1)
[20:48:06] *** Joins: stkrdknmibalz (~test@rrcs-75-87-43-226.sw.biz.rr.com)
[21:00:23] *** Quits: danergo (~danergo@catv-176-63-201-22.catv.broadband.hu) (Quit: Connection closed)
[21:00:39] *** Joins: msmith12[m] (~msmith12m@2001:470:69fc:105::bdfc)
[21:09:03] *** Joins: linjie (~linjie@58.247.210.251)
[21:09:42] *** Quits: dreamon (~dreamon@ppp-88-217-71-147.dynamic.mnet-online.de) (Ping timeout: 276 seconds)
[21:13:39] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 255 seconds)
[21:17:18] <Terrence> Does anyone know what the aselect filter does to a frame after it's filtered? I looked at select.c as a reference but I can't seem to figure out if it edits the metadata or just removes the frame entirely
[21:18:16] *** Quits: gnoo (~gnoo@user/gnoo) (Quit: gnoo)
[21:18:49] <BtbN> Nothing really
[21:19:01] <BtbN> Either it's selected or not, otherwise it does not touch them
[21:19:49] *** Quits: KombuchaKip (~kip@192.252.230.5) (Quit: Leaving.)
[21:19:51] <Terrence> Hmm
[21:20:11] *** Joins: KombuchaKip (~kip@192.252.230.5)
[21:20:14] <Terrence> Well in that case, how will I know whether or not to encode the frames then?
[21:20:35] <DeHackEd> you encode the output of the filtergraph
[21:20:46] <Terrence> Ohh
[21:21:17] <Terrence> Thanks ! DeHackEd
[21:21:35] *** Quits: KombuchaKip (~kip@192.252.230.5) (Client Quit)
[21:22:04] <Terrence> https://pastebin.com/D5wCK51L
[21:22:06] *** Joins: KombuchaKip (~kip@192.252.230.5)
[21:22:14] <Terrence> This is what I have so far but I'm not sure why it's not working
[21:22:28] <Terrence> I get an error as it goes through the encoding process
[21:25:48] <Terrence> Or is there a way to reset the formatContext back to 0? Because I apply one filter on it before using aselect
[21:25:58] <Terrence> *position 0
[21:29:25] *** Joins: danergo (~danergo@catv-176-63-201-22.catv.broadband.hu)
[21:29:31] <danergo> o/
[21:29:36] *** Joins: emcodem (uid483343@id-483343.brockwell.irccloud.com)
[21:30:08] <emcodem> good evening everyone :-)
[21:30:29] <Terrence> Good evening wherever you are
[21:30:36] <emcodem> could someone help me please solving my C related mystery?:D
[21:30:55] <emcodem> Aye Terrence, middle europe, austria :D
[21:31:05] *** Joins: imuo (~imuo@cpe-174-100-53-99.neo.res.rr.com)
[21:31:26] <emcodem> so in libavcodec/mpeg12dec.c
[21:31:35] <emcodem> the calculation of the vbv value is like this:
[21:31:35] <emcodem> s1->rc_buffer_size += vbv_high  << 10 * 1024 * 16;
[21:32:07] <emcodem> reading the iso pdf, the vbv value consists of 2 parts:
[21:32:10] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Ping timeout: 240 seconds)
[21:32:20] <emcodem> vbv_size from the sequence header
[21:32:29] <emcodem> this is a 10 bit number
[21:32:41] <emcodem> its the lower bit part of the final vbv value
[21:33:00] <emcodem> and the high part comes from sequence extension, its an 8 bit number
[21:33:34] <emcodem> together 18 bits, and reading ISO, we must multiplicate by 1024*16 because it is in 16kb
[21:34:34] <emcodem> in the calculation above s1->rc_buffer_size  is already filled, but it is the lower bit part from sequence header, AND it has for some reason already been multiplied by 1024*16
[21:34:54] <emcodem> example value: 1048576
[21:35:02] <emcodem> now the high part comes in, example value: 1
[21:35:03] *** Joins: arcatech (~arcatech@user/arcatech)
[21:35:41] <emcodem> how the heck should the above calculation bring out the correct value when the low part has already been multiplied by 1024*16
[21:38:22] *** Joins: dreamon (~dreamon@pd95038fb.dip0.t-ipconnect.de)
[21:38:48] *** Quits: Trieste (T@user/pilgrim) (Ping timeout: 256 seconds)
[21:50:04] <Terrence> Is there a way to confirm whether the filter arguments I have are correct for a certain filter? The program doesn't produce an error message to indicate whether it is accepted or not so there's no way of telling if it's right or wrong
[21:50:12] *** Joins: linjie (~linjie@58.247.210.251)
[21:50:49] <emcodem> i believe you can just look at what -loglevel debug spits out @Terrence
[21:51:27] <emcodem> it should tell you if the filter was initialized
[21:51:39] <emcodem> or better added to the graph
[21:52:16] <kepstin> even when you're using ffmpeg libraries, i think logs go to stderr by default, and there's a way to adjust the log level
[21:53:24] <emcodem> was my question with the rc_buffer size above too confusing? 😬
[21:53:40] <Terrence> Hmm, I guess the filter arguments are right but it's not working, sorry to interject emcodem
[21:53:49] <Terrence> Hopefully your problem is solved too
[21:53:57] <emcodem> pfff no interjection possible, just go on :D
[21:54:14] *** Joins: Guest4 (~Guest4@068-187-069-044.res.spectrum.com)
[21:54:15] *** Quits: Guest4 (~Guest4@068-187-069-044.res.spectrum.com) (Client Quit)
[21:54:40] *** Quits: linjie (~linjie@58.247.210.251) (Ping timeout: 256 seconds)
[21:54:41] <emcodem> how about posting what you do terrence? :D
[21:54:53] <emcodem> details...
[21:55:01] <Terrence> yeah for sure
[21:56:31] <Terrence> So the first thing I do is run the silencedetect filter on an audio file to determine which intervals that I do not want to include in my output file
[21:56:53] <Terrence> After running the filter, I write the intervals extracted from metadata to a variable
[21:57:06] <Terrence> And I then convert the variable into the filter argument
[21:57:09] <Terrence> For example
[21:58:02] <Terrence> "between(t,95.2238,98.533)+between(t,186.346,189.398)"
[21:58:06] <Terrence> is the argument
[21:58:43] <Terrence> I then set up another filter (aselect) using this as the argument
[21:59:38] <Terrence> After doing this, I run the aselect filtergraph on the same audio file and encode and write its frames to a new output file
[21:59:59] <Terrence> However, the problem that I have is that the audio file contains no audio
[22:00:20] <Terrence> So I have a couple theories but I'm just not sure what it could be:
[22:00:41] *** Joins: elliotd123 (~elliot@068-187-069-044.res.spectrum.com)
[22:00:44] <Terrence> 1. The filter arguments for aselect could be wrong because I didn't include asetpts=N/SR/TB (?)
[22:00:56] <Terrence> 2. I needed to seek the formatcontext back to position 0 (?)
[22:01:01] <TikityTik> why the gotos? aren't GOTOs really bad to use? https://ffmpeg.org/doxygen/trunk/remuxing_8c-example.html
[22:01:16] <Terrence> emcodem do you have any thoughts?
[22:01:41] <Terrence> You can alter the code to avoid using gotos TikityTik
[22:01:46] <elliotd123> Hi guys, I've got a udp stream that's just a stream utf-8 text, and I'd like to add it as a PID for a mpeg-ts stream - is this possible?
[22:01:53] <emcodem> lemme see @Terrence
[22:02:23] <TikityTik> Terrence, yeah doing it but just surprised
[22:03:13] <emcodem> hehe obviously Stefano Sabatini is someone who does coding for a very long time already :D
[22:03:25] *** Quits: arcatech (~arcatech@user/arcatech) (Quit: Bye.)
[22:03:41] <Terrence> Or another issue could be in the loop while filtering with aselect
[22:03:59] <Terrence> Because in the loop I encode every frame passed into the filter
[22:04:10] <Terrence> Unless they just become null
[22:04:14] <Terrence> But I'm not sure
[22:04:38] <emcodem> trying to wrap my head around what you are doing terrence
[22:04:48] <Terrence> Oh let me explain it better
[22:04:59] <Terrence> 1. Open an audio file
[22:05:27] <Terrence> 2. Use silencedetectfilter on the audio file to determine which parts I don't want
[22:05:45] <Terrence> 3. Run aselect on the audio file to keep the parts that I want
[22:05:53] <Terrence> That's the jist of it
[22:06:00] <emcodem> using the api of course?
[22:06:22] <Terrence> yes
[22:06:24] <Terrence> One second
[22:06:34] <emcodem> do you tear down and re-initalize new contexts and everything before you run the second?
[22:07:06] <Terrence> Yes
[22:07:12] <Terrence> I'm going to share the code
[22:07:19] <Terrence> I really appreciate the help
[22:07:24] <emcodem> code speaks more than 1000 words  :D
[22:07:37] <emcodem> well.. last time i used the api is about 8 years but i'll try my best :D
[22:07:38] <kepstin> fwiw, all aselect does is decide for each input frame whether to pass it onto an output or throw it away. setting up an extra filter chain with aselect is going to be more work than selecting what to do with frames in your own code.
[22:08:22] <Terrence> https://pastebin.com/geAkrhUu emcodem
[22:08:29] <Terrence> So here's the thing with that kepstin
[22:08:34] <kepstin> especially if you end up doing a second pass through the file to generate aselect parameters
[22:08:48] *** Joins: arcatech (~arcatech@user/arcatech)
[22:08:57] <Terrence> I tried implementing a flag variable with ONLY using silencedetect
[22:09:12] <Terrence> To tell me whether or not to include a frame in the output or not
[22:09:22] <Terrence> But I ran into several different problem with that
[22:09:31] <kepstin> right, that should work fine. that will give you the exact same result as using aselect
[22:09:40] <Terrence> but it didn't
[22:09:54] <Terrence> Because suppose a file has silence that starts at 0 seconds
[22:10:26] <Terrence> For some reason frames were still written before that 0 second mark and an extra 2 seconds of silence was in the output file
[22:10:47] <Terrence> One second I still have the commit
[22:11:19] <kepstin> hmm, that might just be a timestamps issue
[22:11:33] <Terrence> https://pastebin.com/LHWhdwgb
[22:11:37] <Terrence> kepstin
[22:11:49] <Terrence> You can see here that I implemented that very logic
[22:12:27] <kepstin> fwiw, you aren't correctly implementing a loop around the send_frame/receive_packet functions
[22:12:38] <Terrence> How so?
[22:13:06] <kepstin> after you do send_frame, you need to call receive_packet in a loop until it stops giving you packets
[22:13:27] <kepstin> this probably won't matter for simple pcm audio, but it's needed to be correct in general.
[22:13:34] <kepstin> it works the same as decoders
[22:13:54] <Terrence> Hmmm
[22:15:09] <Terrence> Well here's another quick question I have, should the flag start off at 0 assuming that the beginning of the file does not have silence? Because as I described in my earlier issue, an extra 2 seconds of silence were added to beginning of my output file even though the silence begins at the very beginning of the audio kepstin
[22:17:43] <kepstin> oh, hmm. you have to read the docs on the silencedetect filter to understand what's happening there
[22:18:13] <Terrence> Yeah
[22:18:21] <kepstin> the silence_start metadata isn't set on the first frame of silence, it turns out that it's actually set on some later frame once it's decided that it has met the silence threshold, and contains the timestamp
[22:18:45] <kepstin> so if you want to do this in 1 pass, you need to buffer an amount of audio at least as large as the configured duration in silencedetect :(
[22:18:54] <kepstin> that's annoying, i thought silencedetect did that buffering internally
[22:19:48] *** Quits: luni-4 (uid453292@id-453292.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[22:20:13] <Terrence> Hmm.. complicates things a lot more than I thought '=D
[22:20:44] <Terrence> Ah.... now I understand why I was getting the results I was ...
[22:22:37] <Terrence> So would you say it would be more efficient to do it that way or would using aselect with the intervals captured from silencedetect be a better approach? kepstin
[22:23:17] <Terrence> Because using aselect will at least allow me to use specific times
[22:23:27] <kepstin> in terms of efficiency, even with the buffering one pass will be more efficient. but 2 passes would be easier to program
[22:23:45] <kepstin> even doing 2 passes it would probably be easier to do the selection yourself instead of setting up aselect
[22:24:50] <Terrence> But is there a way to encode based on timestamps (in seconds)? I've been looking through every filter and it seems aselect is the only logical approach to doing so
[22:25:12] <kepstin> you need to go through the file once, only demuxing/decoding/running silencedetect, and save the intervals. then go back to the start of the file (seeking works, or re-open it) and do the full sequence of demuxing/decoding/selecting frames to keep/encode/mux
[22:26:15] <kepstin> that's true regardless of whether you use aselect or select the frames yourself
[22:28:07] <Terrence> But here's the thing that I've been struggling with, how would I select a specfic frame based on the timestamp? Suppose I have an audio file that 30 seconds long, and I want to select the frame at 16.434 seconds, my confusion is what function() or operator do I choose to select that specific frame to encode
[22:28:29] <Terrence> Because I see what you're saying
[22:28:37] <kepstin> when you get an AVFrame, it has the timestamp in it
[22:28:48] *** Quits: zumba_addict (~zumba_add@2601:240:4500:8320:9127:25d1:43cf:6018) (Quit: Client closed)
[22:28:56] <Terrence> Really??
[22:29:26] <Terrence> I didn't see that in the struct
[22:29:42] *** Parts: elliotd123 (~elliot@068-187-069-044.res.spectrum.com) ()
[22:29:53] <Terrence> https://ffmpeg.org/doxygen/trunk/structAVFrame.html
[22:31:43] <Terrence> Because if it does that would make my life a lot easier, I see what you're saying. Like suppose I have that audio file that 30 seconds and I don't want to include 16.434 to 30 seconds. All I would have to do is seek from time timestamp 0 and encode up until 16.434 and I'd be done
[22:32:07] <Terrence> But seeking to that specific timestamp is where I'm at a cross roads right now
[22:32:47] <kepstin> this is a reading comprehension test - you read the document that you just linked until you find the word "timestamp" :)
[22:34:04] <Terrence> ah ... lol, so pts ..
[22:34:24] <Terrence> My bad =#
[22:36:08] <kepstin> but yeah, note that the 'pts' isn't in seconds - the units are relative to the timebase (which you can get by looking at the AVStream
[22:38:36] <Terrence> In ffprobe? or can I do that programmatically?
[22:38:55] <Terrence> Because I haven't used an AVStream in my current program
[22:40:37] <Terrence> Or actually, I think what I could do is just store the timestamps into a list
[22:40:48] <Terrence> and then decide from there instead of having to use seconds
[22:41:40] <Terrence> Yeah I think that's what I'll do actually
[22:43:46] <Terrence> So now my last question :] , will performing formatContext->seek2any(0) reset it's position back to the beginning ? kepstin
[22:44:57] <kepstin> you want to use av_seek_frame()
[22:48:40] <Terrence> nice, thank you so much
[22:48:46] <Terrence> I think I know what to do now
[22:49:02] <Terrence> For every frame not in an interval, encode it
[23:13:54] <Terrence> kepstin I wanna thank you for your help again because now I think I have a clear sense of where to go from here, but as I was writing I came up with a few questions just related to the ffmpeg api and proper use of it just so I can learn
[23:14:54] <Terrence> So you were saying it would be more efficient for me to use a buffer rather the route I've taken
[23:15:44] <Terrence> But could you explain how that process would even work in terms of encoding the parts that I do want ?
[23:16:21] <Terrence> Because you wouldn't know the size of the buffer until you encounter an instance of silence
[23:16:52] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[23:23:46] <kepstin> the buffer has to be big enough to hold a length of audio larger than the "duration" parameter of the silencedetect filter
[23:26:07] *** Quits: bencc1_ (~bencc1@2a00:a040:197:3af:2ed:9169:9bea:4d04) (Quit: Leaving)
[23:26:15] <Terrence> Hm... honestly, I think this is the route that would be most ideal because I just went through some testing on the second method, I noticed that if an audio file's silence starts at 0, it's timestamp actually isn't 0 as I was antcipating
[23:26:22] *** Joins: bencc1 (~bencc1@2a00:a040:197:3af:574c:fa19:1d0c:55f4)
[23:26:43] <Terrence> But here's my thing with that logic that confusing me kepstin
[23:27:49] <Terrence> The goal is to write every frame from the input to the output that is not silent, So suppose I went with the route of the buffer
[23:28:07] <Terrence> If an audio file begins its silence at 0 seconds right
[23:28:27] <Terrence> and is silent up until 5 seconds and is 30 seconds long
[23:28:46] <Terrence> Are you saying I need to create a buffer from 5 seconds to 30 seconds containing every frame, and just write that?
[23:36:01] <Terrence> kepstin to keep it simple I guess I'm just confused what the purpose of the buffer will be for
[23:42:16] <furq> the buffer would the length of the duration set in silencedetect i.e. two seconds by default
[23:42:35] <furq> because you need to be able to go back that far after reading the silencedetect metadata
[23:44:42] <Terrence> So the buffer is to hold the frames of silence in the input file ? furq
[23:45:30] <Terrence> Because this was the issue "the silence_start metadata isn't set on the first frame of silence, it turns out that it's actually set on some later frame once it's decided that it has met the silence threshold, and contains the timestamp"
[23:46:07] <Terrence> And what I was originally trying to do was set a flag to tell me when an interval was silent or not, and only write the frames that weren't silent
[23:46:30] <Terrence> But It turns out I was writing the right frames
[23:46:50] <Terrence> But how will the buffer solve that issue? That's what I'm trying to understand first
[23:50:24] <TikityTik> Does this example also free AVChapters for me too? https://ffmpeg.org/doxygen/trunk/remuxing_8c-example.html
[23:51:04] <TikityTik> looks like it does
[23:51:12] <TikityTik> avformat_free_context(ofmt_ctx)
[23:53:44] *** Joins: thebombzen (~thebombze@71.73.92.220)
[23:58:23] <Terrence> Also what would the buffer even store?
