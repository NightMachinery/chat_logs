[00:01:56] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[00:02:04] *** Quits: guido (~weechat@host-79-22-252-161.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[00:04:46] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:b0bf:2:4c5:df8f) (Quit: Leaving...)
[00:17:33] *** Joins: guido (~weechat@host-79-22-252-161.retail.telecomitalia.it)
[00:19:54] *** Quits: Niklas__E (~Niklas___@176.10.248.198) (Quit: Client closed)
[00:25:54] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[00:26:23] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 268 seconds)
[00:28:05] *** Quits: magla (~gelignite@55d44736.access.ecotel.net) (Quit: Stay safe!)
[00:36:38] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[00:49:29] *** Joins: jargon (~jargon@184.101.167.146)
[00:51:15] *** Joins: keypushe- (keypusher@user/keypusher)
[00:51:18] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 260 seconds)
[00:54:09] *** keypushe- is now known as keypusher
[01:20:36] *** Joins: sagax (~sagax_nb@user/sagax)
[01:27:37] <pmercado> Hi, currently looking for a wordpress alternative but not as a blog engine, but like a single web page builder
[01:28:04] <Albright> What parts need to be dynamic?
[01:28:47] <Albright> Or I guess in other words, what makes you think you need a web application rather than just making a page in HTML?
[01:28:56] *** Quits: wolfshappen (~waff@irc.furworks.de) (Quit: later)
[01:29:47] *** Joins: wolfshappen (~waff@irc.furworks.de)
[01:31:22] <pmercado> already made themes, plugins like whatsapp integration, image carrousels, video embedding, ..... just to not reinvent the wheel
[01:32:00] <pmercado> and and admin where customer can edit things easily and not directly with code
[01:32:04] <Albright> And those things are not WP plugins or otherwise WP-specific?
[01:32:33] <pmercado> or compatible
[01:32:58] <pmercado> don't know, currently googling something, just asking if there is a popular alternative like wp
[01:35:23] <pmercado> like this: https://www.phpagebuilder.com , seems nice
[01:35:56] <Albright> There are probably forks of WP, but I couldn't tell you if any of them are any better than WP itself while still being compatible.
[01:36:39] *** Quits: sagax (~sagax_nb@user/sagax) (Ping timeout: 256 seconds)
[01:36:44] <pmercado> ok, thanks for your help :)
[01:36:45] *** Quits: wolfshappen (~waff@irc.furworks.de) (Ping timeout: 250 seconds)
[01:40:15] <Albright> Was I at all helpful? :P
[01:40:36] <pmercado> always help talking :)
[01:41:48] *** justAstache is now known as justOkay
[01:52:30] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[01:52:54] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 260 seconds)
[01:54:38] *** Quits: mintoyatsu (~mint@user/mintoyatsu) (Remote host closed the connection)
[01:58:31] *** Joins: wolfshappen (~waff@irc.furworks.de)
[02:01:06] *** Quits: newwebdev132 (~newwebdev@78.135.92.119) (Quit: Leaving)
[02:04:29] *** Quits: Donitz (~Donitz4@88-115-149-215.elisa-laajakaista.fi) (Read error: Connection reset by peer)
[02:05:25] <dag> been invited to work on some legcy code. lots of new features and bugs to fix. what are some good arguments for introducing an autoloader?
[02:05:47] <dag> maybe it's not worth the trouble
[02:08:05] <__adrian> is there a problem in the current system with loading classes?
[02:08:09] *** Joins: Donitz (~Donitz4@88-115-149-215.elisa-laajakaista.fi)
[02:11:46] <dag> not really
[02:12:15] <__adrian> then there's no good argument
[02:12:27] <__adrian> start with things that are problems
[02:15:42] <dag> so each time i want to use a class i have to do require 'classes/Foo.php'; $foo = new Foo
[02:15:58] <dag> i guess that can be called a small problem
[02:16:20] <dag> annoyance perhaps
[02:16:48] <__adrian> is that the current pattern?
[02:18:00] <dag> kind of. not exactly
[02:19:16] <dag> point understood though. attack the largest problems first
[02:24:34] *** gxt_ is now known as gxt
[02:24:39] *** Quits: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net) (Quit: All power corrupts, but we damn well need electricity.)
[02:25:54] *** Quits: guido (~weechat@host-79-22-252-161.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[02:33:26] <__adrian> highest value problems
[02:38:31] *** Quits: junktext (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 250 seconds)
[02:46:05] *** Joins: guido (~weechat@host-79-22-252-161.retail.telecomitalia.it)
[02:52:00] *** Quits: nolan_ (~nolan_@user/nolan/x-2434303) (Ping timeout: 252 seconds)
[02:53:03] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:57:58] *** Joins: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt)
[02:59:13] <NCS_One> hi
[02:59:50] <NCS_One> anyone no a way to get a PDF text content with tcpdf?
[03:01:16] *** Joins: sgen (~sgen@2607:fea8:7ce1:c8e0:a992:a734:d5e:8b54)
[03:02:08] *** Quits: guido (~weechat@host-79-22-252-161.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[03:13:49] *** Joins: eddof13 (~eddof13@2806:102e:12:64:f838:6484:5e24:bd9f)
[03:16:45] *** Quits: jhave_ (~jhave@gw.jdh.dk) (Ping timeout: 252 seconds)
[03:21:40] *** Joins: jhave (~jhave@gw.jdh.dk)
[03:26:03] *** Quits: eddof13 (~eddof13@2806:102e:12:64:f838:6484:5e24:bd9f) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:43:51] *** Quits: NCS_One (~NCS_One@bl11-90-133.dsl.telepac.pt) (Quit: Lost terminal)
[03:47:39] <pmercado> dag: is there any chance to implement new libraries they can be used with a good package.json, I think is the way to go. Attacking problems sometimes can rise new problems
[03:53:31] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[03:53:35] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 268 seconds)
[04:09:37] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 268 seconds)
[04:10:45] <Blondie101010> pmercado:  nothing stops you from including "vendor/autoload.php" in your existing code
[04:11:18] <Blondie101010> just put it at the end of your includes
[04:12:51] *** Joins: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net)
[04:15:26] <dag> i guess one advantage is that we dont have to worry about ordering includes in the correct order
[04:15:40] <dag> e.g. classes inheriting others etc.
[04:15:48] <Blondie101010> that should not be an issue, but you're right
[04:16:16] <Blondie101010> having that problem would denote a dependency problem
[04:16:51] <Blondie101010> hmmmm, actually except include includes
[04:16:57] <Blondie101010> autoloading does make things easier
[04:16:59] *** Joins: ferdna (~ferdna@user/ferdna)
[04:17:00] <dag> in my personal opinion the necessity to litter code with includes as such an annoyance. writing new features would be more time consuming.
[04:17:59] <dag> yeah Blondie101010 includes having includes that include other files is how older php code is :D
[04:18:04] <Blondie101010> I worked with explicit includes in C and PHP for a long time and it can be done very cleanly
[04:18:16] <deltab> I've had that with FPDF, where the pattern is that each extension is a class that inherits a previous one, so you have this chain of inwheritance adding features
[04:20:11] <deltab> template support inherits from multicolumn which inherits from table which inherits from ...
[04:20:26] <dag> unless we are working with thousands of classes (memory issue) why not just include everything at the application's entry point?
[04:20:28] <__adrian> if you're nnot autolaoding, then you just need to know which other file(s) each given file depends on, and ensure they're loaded. this is why require_once came in so handy
[04:20:29] *** Joins: eddof13 (~eddof13@2806:102e:12:64:f838:6484:5e24:bd9f)
[04:20:46] <__adrian> dag: becaue then your includes are nowhere near the code that uses them
[04:20:57] <__adrian> it's harder to keep track of and easier to make mistake
[04:20:58] <__adrian> s
[04:21:41] <dag> ah yes. so each folder/module needs to know itself how to set itself up
[04:22:26] <dag> well how about a bootstrap.php which includes all the things? then that can be included for all code that needs to do some work
[04:22:49] <__adrian> that's not different than what you just described above
[04:23:17] <dag> yes sure. i was thinking in terms of a monolith
[04:24:45] <funhouse> just wondering, whats the point of naming files like this common.lib.php
[04:24:50] <dag> so lets assume each module has its own bootstrap.php with all their includes. then the application's entry point can include all those bootstrap.php's
[04:25:17] <__adrian> you're overthinking it. what would be the advantage to that?
[04:25:17] <funhouse> ah ok
[04:25:18] <deltab> funhouse: distinguishes them from entry point scripts
[04:25:31] <__adrian> the place that you _know_ what you need is in each individual file
[04:25:47] <dag> __adrian: im thinking i dont want to manually write a require() call, ever.
[04:25:55] <__adrian> funhouse: there's no point to it. it's a foolish idea people ahd ~10 years ago
[04:26:18] <__adrian> dag: you'd be writing it in your bootstrap.php files
[04:27:15] <Blondie101010> dag:  structure your includes...  don't just dump them before everything blindly
[04:27:17] <__adrian> also, again, if this is not a pain point then just leave it be. make sure it's all consistent
[04:27:18] <deltab> funhouse: irrelevant now if you have a front controller that handles all requests (e.g. app.php)
[04:27:32] <deltab> (as you should)
[04:27:39] <dag> alright. thanks for the input :)
[04:28:06] <__adrian> and note if you want to use an autoloader for _new_ code, there's probably nothing stopping you.
[04:28:19] <__adrian> you don't have to rip out all the old, working parts to add a new feature.
[04:28:48] * deltab nods
[04:29:35] <Blondie101010> don't do something likes includes.php
[04:29:41] <__adrian> ^
[04:35:53] *** Joins: z_lehinsun (~lehinsun@188.113.178.220)
[04:36:28] *** Quits: z_lehinsun (~lehinsun@188.113.178.220) (Remote host closed the connection)
[04:41:19] <SleePy> Sorry if this seems like support.  But I'm working with a simplexml object and I can't get xpath to work.  Sample here: https://gist.github.com/jdarwood007/f0cec86f60c1d2bc82bfa87665c85b10  I'm using PHP 8.0.  I can't see what I'm doing wrong.  Online xpath tester returns results..
[04:45:50] <deltab> SleePy: I expect it's to do with the namespace
[04:46:24] <SleePy> I'm a little weak on working with XML...  What do I have to do with a namespace?
[04:48:28] *** Quits: eddof13 (~eddof13@2806:102e:12:64:f838:6484:5e24:bd9f) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:53:44] <SleePy> Ok, I think I got something..  I have to register the namespace in the foreach.  Registering it globally doesn't work
[04:54:13] <Blondie101010> what do you mean by registering the namespace?
[04:55:12] <SleePy> I updated the gist.
[04:55:26] <SleePy> Only when I call registerXPathNamespace inside the foreach does it work.
[04:56:12] <Blondie101010> hmmm, didn't it error out before?
[04:56:21] <SleePy> Nope.
[04:56:41] <SleePy> But I did find a simpler way to do what I wanted.  $install->count() == count($install->readme)
[04:57:04] *** Joins: Poboy (~Poboy@user/poboy)
[04:57:52] <deltab> SleePy: https://termbin.com/jq5e
[04:58:25] <deltab> oh, I imagine that's what you had
[04:58:33] <SleePy> @deltab Yea, thanks.  Thats I found as well.
[04:59:36] <SleePy> I was working on testing using PHP's SimpleXML.  We have a very nicely wrote xml handler that has existed since PHP 4 days (and maintained since then).  But I really wanted to see if we could use PHP's SimpleXML.  Less manual parsing
[05:10:00] *** Joins: Junxter (~Junxter@222.94.37.130)
[05:10:47] <__adrian> !+simplexml
[05:10:47] <php-bot> Don´t use SimpleXML, SimpleXML is not simple. Use DOM: http://php.net/manual/en/book.dom.php
[05:11:10] <TML> SleePy: https://3v4l.org/mFVNG
[05:11:41] <TML> Not entirely sure I understood what you were trying to do with the SimpleXML code, but there's a quick example of using DOM instead
[05:13:05] <SleePy> I'm reading through it to determine what to do for a package file that we do actions on.  I was trying to find all instances of "readme" inside the "install" element I was already in.
[05:13:21] <SleePy> But I will keep that in mind.  The DOMDocument looks simpler to deal with than SimpleXML
[05:13:50] <__adrian> also https://php.net/domxpath if you have need
[05:13:55] <TML> oh, that's easy - $install->getElementsByTagName('readme') is a DOMNodeList of the 'readme' elements on the current 'install' node
[05:14:27] <SleePy> Yea.  SimpleXML doesn't have that.  Which is why I was dropping into xpath to do basically the getElementsByTagName
[05:14:55] <TML> Yes, SimpleXML is a poorly thought-out API
[05:15:08] <TML> I only recommend it to my enemies
[05:15:42] <SleePy> Yea.. I'm seeing that now
[05:15:53] <SleePy> Only other thing is, getting attributes.
[05:16:10] <SleePy> Do I just use $xml->attributeName?
[05:17:30] <SleePy> Oh I guess getAttribute.. Although the https://www.php.net/manual/en/class.domdocument.php doesn't mention it, a comment does.
[05:24:19] <__adrian> "poorly thought-out"  the funny part is, the entire thing was _already_ pretty completely thought-out
[05:29:23] <TML> SleePy: I showed how to get attributes in my example
[05:29:35] <TML> SleePy: and it's also documented in the DOMNode documentation
[05:29:49] <SleePy> I would say its missing stuff.  Our custom module has a 'find' method.  So we can say $install->find('readme') and it will find all readme elements.  Done.  Simple.
[05:30:45] <SleePy> But as it was wrote for PHP 4 and maintained.. You can guess that it iterates over the string manually to build up the "object"
[05:31:22] <SleePy> Hopefully using a built in class, would see much faster parsing times of the xml files
[05:32:38] <TML> SleePy: what you call 'find' the DOM API calls getElementsByTagName()
[05:32:54] <SleePy> Yup.  But try that in the SimpleXML...
[05:33:01] <TML> SleePy: As far as DOM being "missing stuff", it's literally an implementation of the W3C's DOM API.
[05:33:13] <TML> SleePy: Right - SimpleXML is not a good API at all.
[05:33:34] <SleePy> I was saying SimpleXML is the one missing stuff. the DOM API feels more complete and that I won't pull my hair out over every step
[05:33:37] <TML> SleePy: __adrian's point was "Why did PHP ever even make SimpleXML when the DOM API was already well-defined?" There's not a good answer to that. :)
[05:33:53] <TML> SimpleXML is hot garbage.
[05:33:59] *** Joins: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com)
[05:34:04] <SleePy> Yea. I'm getting that now that I've worked with it a bit.
[05:34:07] <TML> :)
[05:35:46] <SleePy> I typically dislike working with xml data.  Although I have made some beautiful work of it at work.  Not PHP...  Used C# to build a xml data set, sent it up through a mssql stored procedure, then let it explode the data out into a temp data and issued a merge to mass update a lot of values in a data set.  But otherwise.. JSON everywhere for me.
[05:37:20] <TML> I don't particularly find either inherently easier to use than the other - it's six-to-five and pick 'em for me.
[05:39:03] <SleePy> I like json because javascript supports it so well.  So for me it is less work to pass data between the server and client.  Or server and other servers.
[05:39:51] <TML> javascript support for XML is pretty good, too - it uses the same DOM API as PHP does, more or less
[05:40:26] <SleePy> Yea, but I felt it always was a bit more work in some cases.  But otherwise, yea
[05:40:44] <SleePy> Like spaces vs tabs.  its preference of the dev really.
[05:41:25] <SleePy> But nobody can convince me 4x spaces is better than 1x tab.
[05:41:43] <__adrian> **4**!??!?!?!???
[05:42:25] <SleePy> Yea.. or 5 spaces.  I don't know.  I ignore it at work because visual studio fights me.  Personal stuff, its tabs.
[05:43:17] <TML> just fix your editor so the tab key inserts <X> spaces and call it done
[05:44:12] <SleePy> Yea no.. Tabs
[05:46:54] <TML> :shrug: Not an argument I've ever understood. As long as I don't have to hit my space bar <X> times and can just program the editor to do the right thing with the tab key, I don't care which invisible control character is used behind the scenes
[05:48:28] <SleePy> Yea.  I've been programing since before we had these fancy editors, or I could afford them (when it was a paid thing).  Used to build plenty of sites using basically notepad/textedit/nano/vi...
[05:48:46] <__adrian> i went to work at a place and they said "two spaces" and now i'm used to it
[05:49:26] <Blondie101010> where I work, the official standard is tabs, but the code is a mix of anything :)
[05:50:04] <SleePy> Surely you could implant some sort of cleanup script?
[05:50:37] <Blondie101010> CEO: how urgent is that?
[05:51:20] <Blondie101010> how much money will I save?
[05:51:27] <TML> None
[05:51:31] <TML> None money at all
[05:51:41] <Blondie101010> :)
[05:51:50] <SleePy> glob all files and run a preg_replace for ' {4}' to \t.  But i'm sure there is other syntax that needs cleaned up
[05:52:11] <__adrian> eh, if it's actively touched code you can make the argument that it'll save some dollars of thinking
[05:52:14] <Blondie101010> SleePy:  do that in production and risk weeks of sleepless nights, or being jobless
[05:52:30] <__adrian> SleePy: i don't think that's what was meant by "the code is a mix of anything"
[05:52:45] <SleePy> Your metrics for the week would look awesome.
[05:53:11] <TML> SleePy: I don't know, I've been telling my editor to insert spaces on the tab character since the 1980's, and never had to pay for either emacs _or_ vi
[05:55:04] <TML> and I still build plenty of sites using vi - you'll pry my modal editor out of my cold, dead hands
[05:55:13] <SleePy> Well I guess at least its something.  The dev I took over for at work.. Didn't like using spaces or tabs..  You know how fun it is to debug a 500 line stored procedure when everything has no tabs or spaces.  So you can't recall which IF/ELSE your in?  Visual Studio was able to fix most of the code by me telling it to apply styling fixes, so I could at least read through the old asp classic C# code..
[05:56:13] <SleePy> I've spent a lot of time cleaning up the stored procedures just so I could walk through them to find a bug or add a feature.  I can't keep in my mind the logic for all the if/else blocks when its 5 level deeps.
[05:57:32] <SleePy> Very smart guy though.  He retried.  But he was somebody who knew how to program cobol.  He could have went and made a chunk of money if he wanted converting cobol programs to asp programs.
[05:58:06] <TML> You should have run them through indent(1)
[05:58:18] <Blondie101010> that depends on the context but most cobol programs are not made for the web
[05:58:37] <TML> yeah, the money is not in converting cobol, but continuing to support cobol
[05:59:23] <SleePy> I figured it was in converting.  You get devs who can read/write both, they convert it over.  Then your on your way to getting it onto a language that some young dev can read/write
[05:59:25] <Blondie101010> eventually they won't have a choice to change, but they've been holding it off for decades already
[06:00:17] <SleePy> Yea, thats why I figured money was going into converting.  They are running into a problem where they won't have devs who can read/write cobol and no way to support the programs soon.
[06:00:20] <Blondie101010> it could also be an interface to a service in cobol
[06:00:59] <SleePy> I use ASP, but he can write the C#.  So yea, even if its a service it would work.  ASP can be used to write windows apps.
[06:01:25] <TML> Most of the institutions who still rely on cobol programs have 30+ year "no change" windows
[06:01:51] <SleePy> I wonder what they will do when they can't get devs anymore.
[06:02:02] <TML> and it's not talked about a whole lot, but most of them are doing just fine hiring people to learn cobol
[06:02:24] <SleePy> I suspect they will scramble to fix things... I don't know much about cobol to know if it suffers from y2k38 problem.
[06:02:44] <TML> when you tell a junior dev he can jump immediately to the mid-6-figures if he learns cobol, you can take your pick of the talent
[06:05:15] *** Joins: mearp (~Guest61@122.2.106.114)
[06:05:20] <mearp> hi
[06:06:17] <mearp> if a composer package doesn't have a minimum stability allocated does that mean that a parent package with minimum stability 'dev' can't use it?
[06:09:25] <TML> mearp: You may or may not find that #composer is more prepared to answer that question
[06:09:53] <mearp> thanks
[06:11:06] *** Quits: zlg (~zlg@user/zlg) (Ping timeout: 252 seconds)
[06:20:50] *** Quits: viv0 (~viv0@user/viv0) (Quit: Ping timeout (120 seconds))
[06:21:05] *** Joins: Rockwood (~Rocky@user/rocky)
[06:21:19] *** Joins: viv0 (~viv0@user/viv0)
[06:21:31] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[06:32:31] <Hash> https://bpa.st/5OSA I have array like this
[06:33:29] <Hash> I also have  a string like string(9) "Runeword1"
[06:33:42] <Hash> I want to search for this string in that multidimensinoal array
[06:34:03] <Hash> I tried array search etc but no luck
[06:34:50] <TML> do you know whether it will be found in Key or Value, or is that completely unknown?
[06:34:57] <Hash> Key
[06:34:57] <TML> s/Value/String/
[06:35:03] <Hash> I would like to grab the Value for that key
[06:35:32] <TML> foreach($array as $item) { if ($item['Key'] == 'Runeword1') $value = $item['String']; }
[06:35:53] <Hash> so I have to loop over it, hunh.
[06:36:01] <TML> "have to"?
[06:36:03] <Hash> i thought you could search with a function?
[06:36:07] <Hash> like array_search
[06:36:13] <TML> functions still loop over it
[06:36:51] <TML> There are about 27 different ways to do this, it just seemed like a loop was probably sufficient to your needs here
[06:37:34] <deltab> use array_column to extract the keys
[06:37:52] <TML> sure, that'd be another way
[06:37:59] <TML> or you could array_filter(), etc.
[06:38:20] <Hash> here's what I'm trying to do:
[06:38:44] <Rockwood> o/
[06:40:01] <Hash> https://i.imgur.com/FTcPbFQ.png This is the table. See Rune1, Rune2, Rune3, Rune4, Rune5, and Rune6, those codes r30 etc are in another table called strings. There are 2000 some rows in the runes table. I need to grab the value of r09 etc. from another table. I'm trying to figure out how, without making it ridiculously slow with too many sql queries
[06:41:06] <Hash> It would be, if rune1 is set, get the string value of it from strings table.
[06:41:15] <Hash> so 6 conditions, for each rune
[06:41:59] <Hash> So I thought, instead of quering sql 6 times per rune row, 2000*6, I could load the whole table in php array, and then do array search, which should be fasteer.
[06:42:07] <Hash> https://bpa.st/GZAA
[06:42:18] <Hash> I grab the strings table into an array, that I showed you
[06:42:27] <Hash> I grab $runes
[06:42:59] <Hash> Then iterate over runes, for each $runes as $rune, now inside each $rune, we have possible 6 runes, and I need to grab their matching string value from the strings array
[06:43:35] <Hash> so $rune['Rune1'] is Runeword1, and Runeword1 appears somewhere as a value for `Key` in somewhere in that strings array
[06:43:51] <Hash> If that is found, also get its String value
[06:44:09] <Hash> [Key] => Runeword1
[06:44:21] <Hash> [Value] => Allegiance
[06:44:23] <Hash> etc.
[06:44:33] <Hash> Not sure how to do this. :?
[06:47:12] <TML> I don't understand what you're trying to do, sorry
[06:47:23] <TML> you have two tables, runes and strings
[06:47:34] <TML> they have a common column
[06:47:42] <Hash> No
[06:47:49] <TML> no what?
[06:47:51] <Hash> I don't know how to share
[06:47:53] <Hash> the issue
[06:48:01] <TML> They don't have a common column?
[06:48:11] <Hash> It's not common, no
[06:48:26] <TML> so your join statement there is complete nonsense?
[06:48:26] <Hash> Strings table has two columns only, Key and String
[06:48:36] <Hash> No it's for something else.
[06:48:47] <deltab> (select String from strings where Key = ...)
[06:48:49] <TML> Let me ask this a different way
[06:49:09] <Hash> let me show you
[06:49:10] <Hash> hang on
[06:49:11] <TML> given a value in the table "runes", how do you know which values in the table "strings" would apply?
[06:49:32] <Hash> https://i.imgur.com/5YGHe05.png strings table looks like tthis, just two columns.
[06:49:40] <TML> I understand that
[06:49:56] <TML> given a value in the table "runes", how do you know which values in the table "strings" would apply?
[06:50:07] <Hash> https://i.imgur.com/kwO7kfx.png Runes table looks like this
[06:50:39] <Hash> I need to iterate over the runes table, and for each row, there are 6 columns, Rune 1 to Rune 6, which  have codes like r01, r02 etc. for each rune
[06:50:44] <TML> so they have a column in common - runes.name is the same values as strings.Key
[06:50:59] <Hash> I want to find Runes.Rune1 in strings table and grab the value.
[06:51:39] <Hash> I want to find Runes.Rune1 in strings.Key and grab its strings.Value
[06:51:43] <Hash> I want to find Runes.Rune1 in strings.Key and grab its strings.String
[06:51:45] <Hash> Sorry
[06:52:08] <TML> select strings.String from strings join runes on strings.Key = runes.Rune1
[06:52:21] <Hash> I need it for 6
[06:52:30] <Hash> I'm trying to find a way that isn't so slow.
[06:52:31] <TML> I don't understand what that means
[06:52:36] <TML> "I need it for 6"?
[06:52:37] <Hash> I heave 6 of them.
[06:52:40] <Hash> 6 colums
[06:52:44] <Hash> Rune1 to Rune6
[06:53:03] <Hash> Every row in runes table has 6 colums, and I need to run 6 queries per runes row
[06:53:06] <deltab> (select String from strings where Key = r.Rune1)
[06:53:06] <Hash> So you see the issue
[06:53:25] <Blondie101010> that means it should be in a separate table
[06:53:26] <Hash> Oh I dunno how to explain this
[06:53:39] <TML> Hash: No, I don't see the issue - can you modify this statement to accurately represent your question?  "I want to find Runes.Rune1 in strings.Key and grab its strings.String"
[06:54:00] <Hash> Do you see this: https://i.imgur.com/kwO7kfx.png ?
[06:54:03] <TML> yes
[06:54:06] <deltab> Hash: you need to look up each of the values of Rune1, Rune2, etc. as keys within strings?
[06:54:19] <TML> are you saying you want to find 6 strings.String values in a single query?
[06:54:25] <Hash> Ok, now for every row, I need to find the strings for Ruen1 to Rune6
[06:54:30] <Hash> I need 6 queries per runes row
[06:54:32] <Hash> that's too many
[06:54:38] <Hash> I fail at English
[06:54:39] <deltab> subqueries
[06:54:42] <TML> No you don't need to run 6 queries
[06:54:54] <TML> select strings.String from strings join runes on strings.Key = runes.Rune1 union select strings.String from strings join runes on strings.Key = runes.Rune2 union select strings.String from strings join runes on strings.Key = runes.Rune3 …
[06:55:10] <deltab> select (select String from strings where Key = r.Rune1) as String1, ...
[06:55:28] <TML> you probably want an additional "Where" clause on each of those queries to only pull a single row out of "runes"
[06:55:39] <TML> but you didn't explain how you're filtering "runes" so I left that out
[06:55:47] <Hash> I'm confusd
[06:55:49] <Blondie101010> welcome to #sql
[06:55:51] <TML> by what?
[06:55:57] <Hash> Everything
[06:56:17] <TML> can you narrow that down at all so we can have at least a vague chance to assist?
[06:56:24] <Hash> I'm trying
[06:56:26] <Hash> Hang on
[06:56:28] <deltab> I think I understand it
[06:56:29] <Hash> I have to think a lot
[06:56:49] <Blondie101010> deltab:  I think they should add a table
[06:58:05] <deltab> Hash: do you know what subqueries are?
[06:58:16] <TML> deltab: Why subqueries? Just union everything.
[06:58:37] <Blondie101010> union still uses subqueries
[06:59:02] <deltab> possible, but I think it's clearer with subqueries
[06:59:02] <TML> Hash: Try running this query and see if it helps you understand: select strings.String from strings join runes on strings.Key = runes.Rune1 where runes.Name = 'Runeword1' union select strings.String from strings join runes on strings.Key = runes.Rune2 where runes.Name = 'Runeword1'
[06:59:07] <TML> Blondie101010: O.o
[06:59:09] *** Quits: pmercado (~pmercado@186.107.36.107) (Ping timeout: 250 seconds)
[06:59:16] <Hash> Sec
[06:59:18] <Hash> Oh god now
[06:59:21] <Hash> not this Blondie101010 person
[06:59:31] <Hash> brb
[07:00:15] <TML> Blondie101010: I think you use the word "subquery" in a different manner than I do :)
[07:00:26] * Blondie101010 nods
[07:01:43] <Hash> Interesting.
[07:02:40] <deltab> Hash: I think it could help if you told us an example output row (or rows, if you want more than one per rune)
[07:02:53] <Hash> I'm trying to figure out how to elaborate the problem
[07:03:05] <oldmagic> waow, it's 4:30 am and i'm sitting here with my coffie to wake up and to see all this...^^
[07:03:52] <deltab> Hash: r08 is a value of Key within strings?
[07:03:59] <Hash> Correct
[07:04:32] <TML> Hash: Did you try running the query I gave you?
[07:04:38] <deltab> and you want to replace it (in the result row) with the corresponding value of String?
[07:04:40] <Hash> Imagine this, anywhere it says rXX somwhere in runes table, tht needs to be the Key column from strings, and grab the String column for that Key
[07:04:48] <Hash> so instead of r01, it becomes El Rune
[07:04:50] <Hash> etc.
[07:05:01] <Hash> TML: yes, I'm trying to understand it.
[07:05:12] <Blondie101010> which confirms my suggestion to use another table
[07:05:31] <Blondie101010> they field name is irrelevant
[07:05:31] <TML> Hash: Try running this query: select 1 union select 2
[07:05:34] <Blondie101010> -y
[07:06:47] <Hash> so basically
[07:06:56] <Hash> union select multiple selects into one query.
[07:07:41] <TML> The UNION operator is used to combine the result-set of two or more SELECT statements
[07:08:11] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[07:08:15] <Hash> https://bpa.st/QXAA
[07:08:23] <Hash> I do use unions in my other statements a sI needed them
[07:08:27] <Hash> I didn't think of it for this one
[07:08:35] <Hash> Also
[07:08:42] <Hash> It's been over 2 years since I used php and looked at my code
[07:08:49] <Hash> so I'm refiguring out many thigns myself
[07:09:10] <TML> well, there's really nothing PHP about this question so far - it's been a pure SQL question
[07:09:15] <TML> But that's ok, too
[07:09:18] <Hash> it was a php question
[07:09:22] <Hash> but turned into sql
[07:09:39] <deltab> I think it's more efficiently done in SQL
[07:09:45] <Hash> i was trying to do that myself.
[07:10:02] <deltab> the query planner can rewrite it into joins
[07:10:04] <Blondie101010> it's strange that the three tables in question have the exact same format...  shouldn't it be in the same?
[07:10:05] <Hash> my few sql qureies took too long as I was not doing good queries
[07:10:06] <TML> it was only in PHP question insofar as you were trying to write a database engine in PHP using arrays :)
[07:10:12] <TML> Blondie101010: Yes
[07:10:19] <TML> Blondie101010: I had the exact same reaction :D
[07:10:49] <TML> anytime you have three tables with the exact same structure, what you really have is one table with three names and a missing column
[07:16:01] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Read error: Connection reset by peer)
[07:16:44] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[07:17:18] *** Urawa is now known as Awari
[07:17:22] *** Awari is now known as Awaru
[07:31:56] <deltab> Hash: do you know about subqueries?
[07:42:41] <Hash> Yes
[07:44:09] <Hash> Well, I didn't have to do that in sql actually
[07:44:14] <Hash> $strings =  array_filter(PDO_FetchAssoc($sql));
[07:44:21] <Hash> instead of FetchAll
[07:44:37] <Hash> Now strings is just one array, key val pair, in php array from sql
[07:44:42] <Hash> $strings =  array_filter(PDO_FetchAssoc($sql));
[07:44:47] <Hash> $sql = 'SELECT * FROM strings';
[07:44:53] <Hash> var_dump($strings[$rune['Name']]);
[07:45:01] <Hash> So no need to run any more sql. which makes it slow.
[07:45:08] <Hash> sqlite is far slower than myql too
[07:45:12] <TML> Well, whether or not you _have_ _to_, I would still recommend you _do so_, as it is likely to be significantly more efficient in-database than in-PHP
[07:45:22] <TML> Databases are optimized for this case, PHP is not
[07:45:49] <Hash> I understand. But it's trivial to laod the strings table as assoc array and just do $strings[$rune['Name']])
[07:45:51] <TML> As far as SQLite being slower than mysql, that's provably false, and a simple google search will lead you to the proof :)
[07:45:54] <Hash> That seems to be much faster.
[07:45:58] <Hash> Like a lot faster.
[07:46:19] <Hash> Ok
[07:46:23] <Hash> Well what the helld o I know
[07:46:23] <TML> I suspect you're doing something dramatically wrong in your database, but glad you found a result you're happy with. Carry on.
[07:46:29] <Hash> It's not my dab
[07:46:31] <deltab> btw, it's best to name the columns you want, otherwise when you add a column for language to the strings table, it'll break
[07:46:32] <Hash> That's the problem
[07:46:38] <Hash> These are .txt files in diablo 2 mod
[07:46:48] <Hash> Convert them to sql to easy manipulate them.
[07:47:04] <Hash> From 1999 or something, txt files in excel, used in diablo 2 game engine
[07:47:08] <Hash> so it's not my dab and I can't normalize it
[07:47:18] <Hash> I have to use it exactly as shittily done by blizzard
[07:47:31] <TML> well, if you can import it into the database, you can also normalize it
[07:47:33] <TML> it's called ETL
[07:47:44] <TML> normalization is a pretty standard step for the 'T' phase
[07:47:46] <Hash> I can't change anything in the db about table structure
[07:47:50] <Hash> I am aware.
[07:48:03] <Hash> but if I modify any of the table structure at all, game breaks.
[07:48:10] <Hash> Other hassles.
[07:48:16] <TML> The game is reading your mysql database?
[07:48:26] <Hash> Yes
[07:48:31] <Hash> But not directly.
[07:48:34] <Hash> Anyway
[07:48:36] <TML> Right
[07:48:41] <Hash> I can sit here and explain to you all night
[07:48:43] <Hash> and get ridiculed
[07:48:47] <Hash> or I can go do my stuff
[07:48:50] <Hash> which one would you like me to do?
[07:48:50] <TML> No one is ridiculing you
[07:49:04] <TML> We're trying to offer assistance
[07:49:21] <TML> if you don't want the help, that's 100% your choice
[07:49:31] <Hash> Huh?
[07:49:50] <TML> I'm not sure which part of that you're confused by :)
[07:49:51] <Hash> Yeah, I'm dong almost everythign wrong in my life
[07:49:55] <Hash> however shit seems to work out
[07:49:58] <Hash> So I'm gonna keep living
[07:50:05] <Hash> even if other peopel think I'm living my lfie wrong
[07:50:08] <Hash> thank you.
[07:50:19] <deltab> you're not doing things wrong
[07:50:28] <Hash> I don't like that crap
[07:50:34] <Hash> You wanna help, help without saying mean thigns
[07:50:36] <deltab> there are many ways to do things
[07:50:37] <Hash> whatever.
[07:50:39] *** Quits: goddard_ (~goddard@user/goddard) (Ping timeout: 256 seconds)
[07:50:44] <Hash> I'm gonan go before this tuns into a thing.
[07:50:50] <Hash> Have a good night an thanks for your help
[07:50:51] <Hash> <3
[07:50:59] <deltab> I try to not be mean, sorry if I appeared so
[07:51:06] <Hash> Not you. Just people in generl
[07:51:19] <Hash> And after years and years and year of constatn abuse I'm just broken mind
[07:51:20] <TML> I didn't see or hear anyone attack you, but have a great night
[07:51:48] <deltab> hope you feel better tomorrow
[08:02:52] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[08:04:44] *** Quits: mearp (~Guest61@122.2.106.114) (Quit: Client closed)
[08:10:34] *** Joins: silly (silly@user/silly)
[08:26:41] *** Quits: sreve (~quassel@p54a71b7a.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[08:26:59] *** Joins: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de)
[08:37:21] *** Joins: zlg (~zlg@user/zlg)
[08:41:39] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 250 seconds)
[09:51:32] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[09:57:39] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[09:59:07] *** Joins: biberu\ (~biberu@user/biberu)
[10:02:41] *** Quits: biberu (~biberu@user/biberu) (Ping timeout: 256 seconds)
[10:02:41] *** biberu\ is now known as biberu
[10:05:02] *** Joins: biberu\ (~biberu@user/biberu)
[10:05:25] *** Quits: Awaru (Awaru@gateway/vpn/airvpn/awaru) (Quit: Awaru)
[10:07:07] *** Joins: biberu- (~biberu@user/biberu)
[10:08:31] *** Quits: biberu (~biberu@user/biberu) (Ping timeout: 250 seconds)
[10:09:21] *** Joins: biberu (~biberu@user/biberu)
[10:10:59] *** Quits: biberu\ (~biberu@user/biberu) (Ping timeout: 268 seconds)
[10:13:27] *** Quits: biberu- (~biberu@user/biberu) (Ping timeout: 268 seconds)
[10:23:26] *** Joins: Awaru (Awaru@gateway/vpn/airvpn/awaru)
[10:23:43] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[10:24:13] *** Joins: goddard_ (~goddard@user/goddard)
[10:27:31] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[10:29:53] *** Quits: goddard_ (~goddard@user/goddard) (Ping timeout: 256 seconds)
[10:34:05] *** Quits: Junxter (~Junxter@222.94.37.130) (Ping timeout: 250 seconds)
[10:50:03] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[10:56:41] *** Joins: goddard_ (~goddard@user/goddard)
[11:01:45] *** Joins: luigibu (~luigi@93.176.153.88)
[11:16:31] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:18:01] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Client Quit)
[11:22:44] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[11:24:03] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[11:29:12] *** Joins: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:31:05] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[11:36:02] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[11:40:24] *** Joins: Yuzu02 (~Yuzu02@190.80.246.109)
[11:50:06] *** Quits: jargon (~jargon@184.101.167.146) (Remote host closed the connection)
[11:51:29] *** Quits: Yuzu02 (~Yuzu02@190.80.246.109) (Ping timeout: 256 seconds)
[11:56:37] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[12:02:25] *** Quits: zauberfisch (~Zauberfis@cm147-42.liwest.at) (Quit: No Ping reply in 180 seconds.)
[12:03:39] *** Joins: zauberfisch (~Zauberfis@cm147-42.liwest.at)
[12:07:40] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[12:11:28] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:509c:8d1:be30:70ed)
[12:15:20] *** DuckThom is now known as aloy
[12:18:22] *** Joins: richardjh (~Thunderbi@92.41.22.159.threembb.co.uk)
[12:22:22] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928)
[12:34:12] *** Quits: elastic_dog (~elastic_d@ary77.neoplus.adsl.tpnet.pl) (Ping timeout: 240 seconds)
[12:37:57] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[12:41:11] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[12:42:08] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[12:42:50] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[12:46:03] *** Joins: mintoyatsu (~mint@user/mintoyatsu)
[12:47:54] *** Joins: newwebdev13 (~newwebdev@78.135.91.191)
[12:49:31] *** Joins: nwulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[12:51:45] *** Quits: Alex123 (~Adium@cpe-76-89-231-189.socal.res.rr.com) (Quit: Leaving.)
[12:51:57] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 240 seconds)
[12:53:52] *** Joins: olle (~olle@90-231-175-36-no206.tbcn.telia.com)
[13:08:00] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[13:11:35] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[13:12:24] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 252 seconds)
[13:26:46] *** Joins: LucaTM (~LucaTM@user/lucatm)
[13:29:06] *** Quits: Awaru (Awaru@gateway/vpn/airvpn/awaru) (Ping timeout: 245 seconds)
[14:00:41] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[14:08:12] *** Joins: Awaru (Awaru@gateway/vpn/airvpn/awaru)
[14:11:15] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 252 seconds)
[14:17:26] *** Joins: hans (uid529825@id-529825.helmsley.irccloud.com)
[14:27:25] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[14:30:15] *** Joins: richardjh1 (~Thunderbi@51.219.41.0)
[14:30:17] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[14:31:51] *** Quits: richardjh (~Thunderbi@92.41.22.159.threembb.co.uk) (Ping timeout: 256 seconds)
[14:31:51] *** richardjh1 is now known as richardjh
[14:32:01] *** Quits: Stanley (~stanley@d66-183-88-69.bchsia.telus.net) (Quit: ZNC - https://znc.in)
[14:32:45] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[14:36:11] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 245 seconds)
[14:37:26] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[14:38:05] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[14:57:41] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Ping timeout: 256 seconds)
[15:03:54] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 268 seconds)
[15:05:17] *** Joins: Stanley (~stanley@d66-183-88-69.bchsia.telus.net)
[15:26:09] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Ping timeout: 250 seconds)
[15:26:16] *** Joins: mIk3_09 (~Thunderbi@user/mik3-08/x-2852566)
[15:28:35] *** mIk3_09 is now known as mIk3_08
[15:28:55] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[15:30:11] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[15:31:36] *** Quits: nwulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 245 seconds)
[15:32:03] *** Quits: guido (~weechat@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.4.1)
[15:32:45] *** Joins: mintoyatsu_ (~mint@user/mintoyatsu)
[15:34:13] *** Quits: mintoyatsu (~mint@user/mintoyatsu) (Ping timeout: 240 seconds)
[15:34:21] *** mintoyatsu_ is now known as mintoyatsu
[15:35:50] *** Joins: Deuchnord (~Deuchnord@user/deuchnord)
[15:39:23] *** Joins: pmercado (~pmercado@186.107.36.107)
[15:48:14] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[16:01:37] *** Joins: guido (~weechat@host-95-234-253-158.retail.telecomitalia.it)
[16:02:57] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[16:06:19] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[16:14:15] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 250 seconds)
[16:26:30] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[16:40:50] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[16:41:24] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 240 seconds)
[16:51:18] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 252 seconds)
[17:02:26] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[17:02:50] *** Joins: ms49434 (~ms49434@user/ms49434)
[17:07:07] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 256 seconds)
[17:08:51] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 250 seconds)
[17:11:21] *** Joins: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[17:18:08] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[17:22:51] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 245 seconds)
[17:29:05] *** Joins: dimi1947 (~dimi1947@46-108-90.adsl.cyta.gr)
[17:37:45] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[17:38:35] *** Joins: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net)
[17:41:14] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[17:48:47] *** Joins: magla (~gelignite@d5363125.access.ecotel.net)
[17:52:15] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 268 seconds)
[18:00:52] *** Joins: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net)
[18:14:43] *** Joins: wovixo (~wovixo@128.104.205.49)
[18:17:42] *** Joins: [twisti] (~twisti@toadwater.com)
[18:18:32] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[18:19:26] <[twisti]> im trying to figure out mocking with phpunit. i think i have successfully mocked a class, overridden a specific method thats problematic, and then call a method on the class. everything seems to be going okay until i want to test the result i get from that call - instead of returning a Response, im getting back a Mocked_Response - which i guess makes sense, but then how do i test the result ?
[18:20:56] <teresko> the class taht you are testing should not be the same as the class you are mocking
[18:21:01] <AllenJB> From your description it sounds like you're mocking the unit of code you're trying to test. You use mocking to mock things you're not testing but what you're testing depends
[18:21:13] <AllenJB> *depends on
[18:22:29] <[twisti]> the class im trying to test has a method that has global implications im trying to get rid of - it calls an external url. so i tried mocking the class im testing, so i can overwrite the method to make it return a static result instead of calling the external url. is that not the correct way to do things ?
[18:23:02] <teresko> no, it is not
[18:23:03] <da_wunder> [twisti]: you need to make something like `$yourMockedClass->expects(self::once())->method('yourMethod')->with($param1, $param2)->willReturn($response);`
[18:23:15] <[twisti]> thats exactly what i did
[18:23:51] <teresko> [twisti]: what do you mean by "global implications"?
[18:23:52] <[twisti]> and its what i got from (the accepted answer, not the first one) https://stackoverflow.com/questions/32888128/phpunit-testing-file-get-contents too
[18:24:02] <[twisti]> teresko: it calls an external url
[18:24:14] <teresko> directly?
[18:24:23] <teresko> without any HTTP client?
[18:24:26] <[twisti]> obviously thats way beyond the scope of a unit test, the external service could be down, or changed, or rate throttled or whatever
[18:24:27] <AllenJB> It may help if you can show us the test (including setup) and the class being tested.
[18:24:30] <__adrian> using what? e.g., guzzle has a mockhandler.
[18:24:31] <[twisti]> file_get_content
[18:24:34] <__adrian> ugh
[18:24:43] <da_wunder> that is really bad idea
[18:24:44] <__adrian> don't use file_get_contents() to make http calls
[18:24:48] <__adrian> ever
[18:24:48] <da_wunder> ^
[18:24:49] <[twisti]> why not
[18:25:15] <teresko> to not get your server fucked with extra large chinese dragon dildo
[18:25:17] <__adrian> it's not what it's for and can open up some pretty bad security issues if you're not accounting for them
[18:25:24] <__adrian> teresko: language, please
[18:25:42] <teresko> it seemed to require driving the point home
[18:25:44] <[twisti]> its calling an internal service
[18:25:46] <teresko> .. pun intended
[18:25:50] <__adrian> [twisti]: use an http client, e.g., guzzle. or even curl (though that's not any easier to test)
[18:26:07] <teresko> ^ that
[18:26:08] <da_wunder> I would recommend to use proper http client, guzzle, symfony http client, etc.
[18:26:15] <Naktibalda> [twisti]: you should extract the code which makes HTTP request to separate class and inject it
[18:26:17] <[twisti]> im not trying to test the external service, thats why im trying to mock away the call of that method
[18:26:17] <da_wunder> with those you can mock that request
[18:26:31] <__adrian> and failing that... use a test url when you're testing.
[18:26:41] <teresko> and when you have the HTTP client as a proer dependency, you will be able to mock that dependency correctly
[18:26:49] <__adrian> (not preferable, but workable)
[18:26:51] <teresko> *proper
[18:27:04] <da_wunder> OR you could use phpvcr for that - https://php-vcr.github.io/
[18:27:29] <[twisti]> im literally trying to NOT make a http request
[18:27:37] <__adrian> [twisti]: then guzzle
[18:27:37] <teresko> bottom line - your code is bad: make it less bad
[18:28:04] <__adrian> use guzzle. when testing, use guzzle's mock client instead of the real one.
[18:28:19] <__adrian> https://docs.guzzlephp.org/en/stable/testing.html
[18:28:22] <da_wunder> [twisti]: or symfony http client - https://symfony.com/doc/current/http_client.html#testing
[18:28:35] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 250 seconds)
[18:29:18] <__adrian> but tl;dr: yes, you'll need to change your code. it's not testable as-is. and the change would make the code better in general (not just for tests).
[18:29:33] <da_wunder> ^
[18:29:39] <teresko> ^^
[18:30:40] <[twisti]> im not generally opposed to improving my code, but to my question why not to have it the way im having it now i got only a joking profanity and nothing else, and thats not likely to get my boss to nod off on adding a new dependency
[18:31:24] <da_wunder> if really want to use that `file_get_contents` then your option is to use that phpvcr library in your tests
[18:31:49] <teresko> [twisti]: how about - as the code is now, you are vulnerable to atacks and you have no way of handling remote error
[18:32:09] <da_wunder> but with those http clients you will get a lot of more, proper error handling, redirect supports, etc.
[18:32:15] <__adrian> [twisti]: not "only" or "nothing else." yes, the profanity was not productive; read the rest of it
[18:32:16] <[twisti]> who would attack me through an internal server ?
[18:32:54] <teresko> anyone with XSS access you your systems
[18:33:18] <teresko> ... and that's excluding pissed off employees
[18:33:30] <teresko> *to your
[18:34:02] <[twisti]> i dont really see how XSS would come in; its doing a file_get_content from a static url to an internal server that is part of the project
[18:34:25] <teresko> well .. we gave you advice, you did not like the advice
[18:35:54] <[twisti]> like i said, im not opposed to advice, but without wanting to be rude, it sounds like all i got was 'but exploits' with no explanation of how that is actually a concern or why adding a lot of code in a library thats new to me would be an improvement
[18:39:22] <AllenJB> If you can show us (pastebin / gist / sandbox) your test and the class under test (or some version of those), people may be able to offer more specific advice or spot something you're not doing quite right that will allow what you have to work.
[18:40:04] <__adrian> i didn't say "because exploits." i said because http clients are better at http requests, and file_get_contents() is usually done badly. and to your immediate question, difficult to test.
[18:40:41] <__adrian> e.g., might be as simple as "__adrian> and failing that... use a test url when you're testing."
[18:40:50] <__adrian> again, not preferable, but workable
[18:41:33] <[twisti]> i feel we are talking in circles. im *NOT* trying to test file_get_contents at all, im trying to avoid calling that part. if it was using a library, then i would try to avoid calling that library. maybe i really should cut something together for pastebin
[18:44:38] <da_wunder> [twisti]: and that is why we recommend you to use some http client, so that you can easily mock those requests in your tests, without actual changes to your implementation when you're running those tests
[18:45:55] *** Quits: aloy (~luna@2001:41f0:3fe:3:c8d2:9624:2fb2:aa5d) (Read error: Connection reset by peer)
[18:46:18] *** Joins: aloy (~luna@2001:41f0:3fe:3:c950:4707:486d:2b89)
[18:46:26] *** Joins: fef (~thedawn@user/thedawn)
[18:46:52] *** Quits: fef (~thedawn@user/thedawn) (Remote host closed the connection)
[18:51:04] <da_wunder> [twisti]: another thing that you could do is to implement class wrapper for `file_get_contents` function, so in your test you mock that wrapper class - https://stackoverflow.com/a/53905681/2608805
[18:53:26] *** Joins: Poboy (~Poboy@user/poboy)
[18:55:02] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Ping timeout: 252 seconds)
[18:55:15] *** Joins: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b)
[18:58:47] *** Joins: hans (uid529825@id-529825.helmsley.irccloud.com)
[19:09:24] *** Quits: roadie (~user@2a02:8108:5a40:1d87:7886:4248:4306:5f1b) (Ping timeout: 240 seconds)
[19:12:22] <__adrian> "[twisti]> i feel we are talking in circles. im *NOT* trying to test file_get_contents at all, im trying to avoid calling that part."  you're trying to test a class that uses file_get_contents() in an un-testable way.
[19:13:38] <__adrian> any of the suggestions given so far will solve that, and make your code at least a little bit better in the process.
[19:14:53] <da_wunder> and in each of those solutions you need to change your existing code OR add least add one more dependency
[19:15:32] *** Quits: jgrim (~jgrim@159.223.114.62) (Quit: Buh bye!)
[19:16:03] <da_wunder> with that phpvcr you don't need to change your code at all, but you need to add that as a dependency and change your tests to use it - and configuring that might be a bit hard - if I remember that correctly
[19:16:32] *** Joins: jgrim (~jgrim@159.223.114.62)
[19:16:40] <da_wunder> with that simple wrapper class, you could continue to use that file_get_contents and then just mock that in your tests - a bit more work
[19:17:17] <da_wunder> and with proper http client, like guzzle, symfony http client - you could fix your code + you make it testable
[19:19:33] *** Quits: jgrim (~jgrim@159.223.114.62) (Client Quit)
[19:20:34] *** Joins: jgrim (~jgrim@159.223.114.62)
[19:24:17] *** Quits: Robdgreat (~rob@user/robdgreat) (Ping timeout: 250 seconds)
[19:25:01] *** Quits: Deuchnord (~Deuchnord@user/deuchnord) (Remote host closed the connection)
[19:26:30] *** Quits: luigibu (~luigi@93.176.153.88) (Quit: WeeChat 3.4.1)
[19:27:06] *** Quits: csm3105 (~csm3105@143.red-83-48-84.staticip.rima-tde.net) (Read error: Connection reset by peer)
[19:33:48] *** Joins: PTNapivoski (~PTNapivos@179.189.133.33)
[19:37:49] *** Quits: travisghansen (~travisgha@192.74.130.86) (Quit: The Lounge - https://thelounge.github.io)
[19:37:57] *** Joins: roadie (~user@2a02:8108:5a40:1d87:990b:cdc7:d3d5:ac4a)
[19:38:47] *** Joins: Robdgreat (~rob@user/robdgreat)
[19:42:11] *** Quits: guido (~weechat@host-95-234-253-158.retail.telecomitalia.it) (Quit: WeeChat 3.4.1)
[19:43:27] *** Quits: kerunaru (~Jmcb@75.red-80-28-255.staticip.rima-tde.net) (Ping timeout: 252 seconds)
[19:51:17] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3928) (Ping timeout: 240 seconds)
[19:53:37] *** Joins: travisghansen (~travisgha@192.74.130.86)
[20:07:15] *** Joins: hh (~g@37.214.60.19)
[20:20:17] *** Joins: eddof13 (~eddof13@2806:102e:12:64:f838:6484:5e24:bd9f)
[20:41:14] *** Joins: guido (~weechat@host-95-234-253-158.retail.telecomitalia.it)
[20:43:03] *** Quits: magla (~gelignite@d5363125.access.ecotel.net) (Read error: Connection reset by peer)
[20:44:17] *** Joins: magla (~gelignite@d5363125.access.ecotel.net)
[20:45:03] *** Quits: goddard_ (~goddard@user/goddard) (Ping timeout: 252 seconds)
[20:52:47] *** Joins: fef (~thedawn@user/thedawn)
[20:53:57] *** Joins: mixfix41 (~homefame@user/mixfix41)
[21:03:46] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[21:09:42] *** Quits: Tempesta (~Tempesta@user/tempesta) (Quit: See ya!)
[21:16:43] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: Easy as 3.14159265358979323846...)
[21:27:42] *** Quits: richardjh (~Thunderbi@51.219.41.0) (Remote host closed the connection)
[21:30:04] *** Joins: richardjh (~Thunderbi@51.219.41.0)
[21:30:09] *** Quits: richardjh (~Thunderbi@51.219.41.0) (Client Quit)
[21:30:25] *** Quits: eddof13 (~eddof13@2806:102e:12:64:f838:6484:5e24:bd9f) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:37:51] *** Quits: magla (~gelignite@d5363125.access.ecotel.net) (Quit: Stay safe!)
[21:41:14] *** Joins: Alex123 (~Adium@2603-8000-db00-10e5-6d68-320c-3e16-04a1.res6.spectrum.com)
[21:47:27] *** Joins: DevAntoi_ (~DevAntoin@78.193.133.12)
[21:49:39] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:509c:8d1:be30:70ed) (Ping timeout: 250 seconds)
[21:49:58] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[21:51:49] *** Quits: DevAntoi_ (~DevAntoin@78.193.133.12) (Ping timeout: 240 seconds)
[22:00:43] *** Quits: olle (~olle@90-231-175-36-no206.tbcn.telia.com) (Ping timeout: 250 seconds)
[22:03:17] *** Joins: sumthing1980 (~sumthing1@94.54.64.154)
[22:03:36] <sumthing1980> hello I have a out of memory error when uploading many files
[22:03:46] <sumthing1980> I dont know where it is accumulating
[22:03:58] <sumthing1980> is there a tool to show this?
[22:04:26] <sumthing1980> as far as I know there is no persistent variable that grows but idk
[22:05:06] <sumthing1980> uploading 4 gb of files
[22:08:25] <Sammitch> put code and error message in a gist so we can actually see something
[22:08:28] *** Quits: hans (uid529825@id-529825.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[22:08:42] <sumthing1980> just out of memory message
[22:09:06] <sumthing1980> 4 gb of files in post upload it works when I increase memory limit over 4 gb
[22:09:49] <sumthing1980> is that how post is supposed to work?
[22:09:56] <ss23> Show us the error message
[22:09:57] <sumthing1980> do you need as much memory as total files?
[22:10:08] <Sammitch> message from what? what is the exact wording? when in the tranfser does it happen?
[22:10:16] <Sammitch> vague description is the worst for debugging
[22:11:06] <Sammitch> no. PHP begins writing uploads to disk once they go beyond a certain size
[22:11:20] <Sammitch> again. paste error and code in a gist so we can look at them.
[22:12:12] *** Joins: goddard_ (~goddard@user/goddard)
[22:14:06] *** Quits: sumthing1980 (~sumthing1@94.54.64.154) (Quit: Leaving)
[22:15:14] *** Quits: Kilroy7 (~thelounge@user/Kilroy) (Quit: Bye)
[22:20:35] *** Joins: magla (~gelignite@d5363125.access.ecotel.net)
[22:27:38] *** Joins: Tempesta (~Tempesta@user/tempesta)
[22:29:20] *** Quits: roadie (~user@2a02:8108:5a40:1d87:990b:cdc7:d3d5:ac4a) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[22:31:00] *** Quits: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[22:31:06] <dag> getting a warning from this $line = socket_read($s, 1024, PHP_NORMAL_READ)): PHP Warning:  socket_read(): unable to read from socket [104]: Connection reset by peer
[22:31:28] <dag> are we supposed to silence that warning with @socket_read() ?
[22:34:19] *** Joins: sreve (~quassel@p4ff44c5a.dip0.t-ipconnect.de)
[22:34:47] *** Quits: funhouse (~funhouse@user/funhouse) (Quit: Client closed)
[22:36:17] <Sammitch> I mean ideally you figure out why the other side of the connection is closing unexpectedly so that it doesn't do that.
[22:36:53] <Sammitch> if you just silence all errors you're never going to know that that problem exists, plus a whole host of other potential problems
[22:38:15] *** Quits: fef (~thedawn@user/thedawn) (Ping timeout: 240 seconds)
[22:38:54] *** Quits: goddard_ (~goddard@user/goddard) (Ping timeout: 252 seconds)
[22:39:04] <dag> in this particular case it is the server who closes the socket because all the work is done
[22:39:18] <dag> but socket_read could possibly return false for a myriad of reasons
[22:40:02] <Sammitch> can you fix the remote side to close the connection gracefully? eg: FIN instead of RST?
[22:40:43] <dag> nope
[22:41:01] *** Quits: blaster (~blaster@d205-250-202-196.bchsia.telus.net) (Quit: Leaving)
[22:41:52] <da_wunder> could you raise an issue about that to that remote side?
[22:42:31] <dag> yup
[22:42:44] <dag> here is the server. it's a finger server https://drewdevault.com/2021/05/24/io_uring-finger-server.html
[22:44:37] *** Quits: Alex123 (~Adium@2603-8000-db00-10e5-6d68-320c-3e16-04a1.res6.spectrum.com) (Quit: Leaving.)
[22:51:01] *** Joins: goddard_ (~goddard@user/goddard)
[22:53:37] *** Joins: dbal (~dbal@2603:300c:b04:b100:78eb:e08:b779:cd7)
[22:55:02] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 268 seconds)
[23:03:10] *** Quits: hh (~g@37.214.60.19) (Remote host closed the connection)
[23:10:03] *** Quits: LucaTM (~LucaTM@user/lucatm) (Ping timeout: 250 seconds)
[23:14:39] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[23:15:06] *** Quits: PTNapivoski (~PTNapivos@179.189.133.33) (Quit: Leaving)
[23:17:32] *** Quits: goddard_ (~goddard@user/goddard) (Ping timeout: 240 seconds)
[23:21:04] *** Joins: LucaTM (~LucaTM@user/lucatm)
[23:21:41] *** Joins: funhouse (~funhouse@user/funhouse)
[23:21:43] *** Quits: DerekTheRed (~portra400@peso.subtitled.com) (Quit: +++NO CARRIER)
[23:22:43] *** Joins: DerekTheRed (~portra400@peso.subtitled.com)
[23:23:16] *** Joins: junktext (~junktext@gateway/vpn/pia/junktext)
[23:26:21] *** Joins: Alex123 (~Adium@2603-8000-db00-10e5-516e-6348-1d50-48be.res6.spectrum.com)
[23:27:21] <TML> lol - finger
[23:27:41] <TML> Not going to be a lot of services anymore that allow that :)
[23:30:34] *** Joins: Poboy (~Poboy@user/poboy)
[23:31:56] *** Joins: daoumilseitek (~daoumilse@164.96.146.77.rev.sfr.net)
[23:36:08] <dobbicorp> how do i set outbound ip with workerman ?
[23:36:21] <dobbicorp> https://github.com/walkor/php-socks5
[23:39:22] <Sammitch> I've literally never heard of it before, but perhaps read the sum total of 14 lines in config.php and something will jump out.
[23:40:00] <dobbicorp> Sammitch: config is just a bunch of vars used in start.php
[23:41:02] <Sammitch> I mean... yes.
[23:41:04] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Remote host closed the connection)
[23:41:21] <dobbicorp> Sammitch: and there is no such var :)
[23:41:33] *** Joins: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd)
[23:41:37] <Sammitch> ok, then what is on line 14?
[23:41:50] <dobbicorp> Sammitch: the script just pick the first ip address i have on the server
[23:44:21] <dobbicorp> Sammitch: it is where the server listens to
[23:44:35] <dobbicorp> Sammitch: fo connections like ... my chrome browser
[23:44:49] <dobbicorp> Sammitch: then i go check my ip address (via this proxy)
[23:45:06] <dobbicorp> and it pick the fist real ip v4 address i have on the server
[23:45:12] <dobbicorp> and i need the third one
[23:46:01] <dobbicorp> Sammitch: this is inbound ip address .. and i need the outbound one
[23:46:22] <dobbicorp> i guess i need to hack workerman lib somehow
[23:46:41] <Sammitch> mmmm I see what you're getting at
[23:47:27] *** Quits: DevAntoine (~DevAntoin@2a01:e34:ec18:50c0:615d:fc8f:ab6f:d0cd) (Ping timeout: 268 seconds)
[23:48:08] <Sammitch> I'm thinking that unless you add explicit routes to your machine for the networks you want to proxy to it's just going to go out whatever the default gateway is
[23:48:22] <Sammitch> ie: not a problem possible to solve in PHP
[23:49:57] <Sammitch> mmm... does socket_bind() allow setting source IP?
[23:50:24] <Sammitch> ok so forget the thing I said
[23:52:29] <TML> dobbicorp: Create a socket stream context and set the bindto option: https://www.php.net/manual/en/context.socket.php
[23:54:28] <TML> dobbicorp: But you're going to have to modify that code to pass it the context - as written, it doesn't appear to support it
[23:55:38] <Sammitch> the Worker constructor supports a second arg that is the stream context options, but the proxy script doesn't use it
[23:56:07] <Sammitch> and that proxy script looks entirely procedural, so you'd have to fork it to add that
[23:56:22] <TML> I didn't look at the workerman piece, just that socks proxy code
[23:56:43] <TML> Honestly, that socks proxy seems…
[23:56:58] <TML> Let's call it "only useful in the most trivial of use-cases"
[23:57:07] <Sammitch> yeah I was digging around in the guts trying to find which flavor of networking it does, which is stream wrappers
[23:57:28] <Sammitch> TML: "certainly not how I would write it" :P
[23:57:54] <TML> It might be how I'd write it if I needed a one-off quick solution for a socks proxy in PHP
[23:58:00] <TML> I mean, I don't know WHY you'd ever need that
[23:58:10] <TML> But if you needed it, and it was a complete throw-away, sure
[23:58:20] <TML> Certainly not something I'd have pushed up to github, though
[23:58:36] <dobbicorp> thank you guys, i might just in fact find something like dante for linux
[23:58:58] <dobbicorp> i thought if my php script is coing to connect to it why not use php too :)
[23:59:06] <dobbicorp> coing = going
[23:59:12] <TML> I generally don't love blending PHP and sockets
[23:59:24] <TML> it's possible, but that doesn't mean it's a great idea :)
