[00:00:28] *** Joins: Szadek (~Szadek@194.36.25.39)
[00:03:53] *** Quits: guido (~guido@host-87-17-251-50.retail.telecomitalia.it) (Quit: WeeChat 3.2.1)
[00:16:34] *** Quits: M-blaise (~M-blaise@105.112.138.38) (Ping timeout: 260 seconds)
[00:17:28] <xaltsc> Hey, what is the "status" (?, type maybe is right word ?) of commands, including programs known from $path ? In particular, since alias is the proper way to add default options to a command/program, will it export to subprocesses ?
[00:18:19] <asmodai> So when looking at typeset -p output for path I see it comes back with typeset -aUT PATH path, but looking at zshbuiltins documentation that combination of flags is not possible, simple case of omission in the docs that needs a patch?
[00:18:26] <xaltsc> (assuming those subprocesses don't just use $path obviously)
[00:19:19] <asmodai> xaltsc: You mean return value/exit code -> $?  - that depends on what is invoked, check their manual pages, there should be something like an EXIT STATUS or similar section documenting these.
[00:20:12] *** Quits: Julian (~tos9@python/site-packages/Julian) (Quit: leaving)
[00:21:08] <xaltsc> asmodai: no, I guess I mean the 'token', how zsh associates a string (not a zsh string, just a sequence of letters) to a cmd/program/function.
[00:21:22] <Mikachu> asmodai: why do you think the manpage says this is not a valid combination?
[00:22:04] <Mikachu> oh you mean the listings at the start
[00:22:10] <asmodai> Mikachu: Because the ones listing -T have no a in its list of switches
[00:22:13] <asmodai> Mikachu: Aye :)
[00:22:38] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:810:7809:8396:63f0:6697) (Ping timeout: 260 seconds)
[00:24:09] <asmodai> xaltsc: You mean the arguments passed to the invoked commands? E.g. myexe arg1 arg2 and you want to know how to handle arg1 and arg2?
[00:27:29] <xaltsc> asmodai: nope again :D Say that I have alias whatever='cmdstuff' somewhere in zshrc. 1st question: how does zsh represents internally the token 'whatever'. 2nd: are such aliases variables in their own right ? 3rd question: if they're not visible from subprocesses (which I guess is the case), is it possible to export them, make visible.
[00:28:06] <xaltsc> I'm guessing the answer for the 3rd question will be no since aliases are a concept in shells only, but idk.
[00:29:15] <Mikachu> if you want to override a command in path generically, you need to make a wrapper script and put it earlier in your path
[00:29:26] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[00:29:37] *** Quits: sa02irc (~mbax@155-079-043-212.ip-addr.inexio.net) (Ping timeout: 252 seconds)
[00:30:01] <Mikachu> the only purpose of a shell alias is to save you typing at the interactive prompt
[00:35:32] <Gamma[m]> asmodai: I guess it's left out because `-a` is meaningless when declaring parameters when `-T` is used.
[00:36:55] <asmodai> Gamma[m]: I wonder why the output of typeset -p lists it then. It's what got me checking the documentation trying to figure out why it was listed. XD
[00:37:26] <xaltsc> Mikachu: that's what I plan to do in most cases indeed
[00:38:46] <Gamma[m]> asmodai: It's probably because `$path` is an array that it added the flag to the `-p` listing.
[00:38:46] <Gamma[m]> Compare `typeset -p path` to `typeset -p PATH`
[00:40:11] <asmodai> Gamma[m]: *nods* 
[00:40:43] <asmodai> Gamma[m]: I just have this consistency alert blaring in my brain about this. XD
[00:41:08] <Gamma[m]> I think the worse offender is the absence of `-U` in `typeset -p PATH`
[00:42:18] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:42:42] <asmodai> Wait? absence?
[00:43:00] *** Joins: barbaros1a93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[00:43:19] <asmodai> % typeset -p PATH
[00:43:21] <asmodai> export -UT PATH path=
[00:43:37] <asmodai> That's on 5.8 at least
[00:44:04] <Mikachu> that might depend on which one you ran typeset -U on in the first place
[00:45:53] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[00:47:07] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:810:7809:8396:63f0:6697)
[00:47:38] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Ping timeout: 265 seconds)
[00:48:00] <asmodai> Ah, good point. Yeah, have a typeset -U PATH path in my .zshenv. Indeed, starting without any startup files only has -T for PATH
[00:51:06] <Mikachu> if you say only typeset -u path, does it affect the output for PATH?
[00:51:21] <Mikachu> neither is marked as unique by default, obviously
[00:54:05] *** Quits: Everything (~Everythin@37.115.210.35) (Quit: leaving)
[01:02:10] <Gamma[m]> Yeah, I have `typeset -U path`.
[01:14:28] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[01:20:29] *** Quits: aniruddha (uid340443@id-340443.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[01:20:53] <Mikachu> flags are a bit funny with tied params sometimes
[01:21:08] <Mikachu> > typeset -Z3 -T FOO foo; foo=( 1 2 3 ); echo $foo $FOO
[01:21:11] <machabot> Mikachu: 1 2 3 2:3
[01:22:55] *** Quits: bartholin (~bartholin@109.53.4.37) (Ping timeout: 265 seconds)
[01:28:40] *** Joins: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[01:34:56] <Mikachu> > typeset -Z5 -T FOO foo; foo=( 1:2 ); echo $foo $FOO
[01:34:58] <machabot> Mikachu: 1:2 001:2
[01:36:05] *** Joins: bartholin (~bartholin@109.53.4.55)
[01:41:05] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-697d-22d5-4a5-3219.fixed6.kpn.net) (Quit: WeeChat 3.2)
[01:43:23] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net)
[01:44:34] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:51:22] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[01:57:49] *** Joins: sdfgsdfg_ (~sdfgsdfg@user/sdfgsdfg)
[01:58:12] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Ping timeout: 265 seconds)
[02:08:55] *** sdfgsdfg_ is now known as sdfgsdfg
[02:16:55] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net) (Ping timeout: 252 seconds)
[02:21:53] *** Quits: Szadek (~Szadek@194.36.25.39) (Ping timeout: 265 seconds)
[02:34:27] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net)
[02:50:00] *** Quits: DerpGusta (~quassel@user/derpgusta) (Ping timeout: 260 seconds)
[02:53:15] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net) (Ping timeout: 268 seconds)
[02:54:35] *** Joins: DerpGusta (~quassel@user/derpgusta)
[03:02:15] *** Quits: xx (~xx@user/xx) (Ping timeout: 260 seconds)
[03:02:39] *** Quits: bartholin (~bartholin@109.53.4.55) (Quit: Leaving)
[03:07:26] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[03:12:35] *** Quits: Narrat (~omnius@p200300df5f0ee19006ea56fffe2e7cdc.dip0.t-ipconnect.de) (Quit: They say a little knowledge is a dangerous thing, but it's not one half so bad as a lot of ignorance.)
[03:19:06] *** Quits: barbaros1a93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Read error: Connection reset by peer)
[03:19:27] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[03:37:46] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:810:7809:8396:63f0:6697) (Ping timeout: 252 seconds)
[03:37:50] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net)
[03:42:16] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net) (Ping timeout: 252 seconds)
[03:54:13] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 252 seconds)
[03:57:02] *** Joins: jetchisel (jetchisel@user/jetchisel)
[03:59:05] *** Joins: zindo (zindo@user/zindo)
[04:02:44] <zindo> I have this line in mi .zshrc: zstyle ':completion:*' cache-path "$XDG_CACHE_HOME/zsh/zcompcache", but .zcompdump is still being created in my ZDOTDIR, is there anything I'm missing?
[04:03:29] *** Joins: Gustavo6046_ (~Gustavo60@user/gustavo6046)
[04:03:40] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Ping timeout: 240 seconds)
[04:03:54] <phy1729> Is that line before or after you run compinit?
[04:04:23] <zindo> is after autoload -Uz compinit, but before the single call to compinit
[04:04:27] <phy1729> Oh that's for _store_cache not compdump
[04:04:46] <zindo> ohh
[04:05:03] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:05:08] <zindo> what is _store_cache sorry? No file is being created there though
[04:05:52] <phy1729> completers (like _apt) can cache things (like a list of packages) that take a long time to generate
[04:06:08] <zindo> Ohh ok, thank you
[04:06:12] *** Gustavo6046_ is now known as Gustavo6046
[04:06:15] <zindo> I should add this line then? compinit -d <dumpfile>
[04:06:47] <phy1729> yes
[04:08:16] <zindo> Nice, it wasn't working but I just had to delete my old .zcompdump file. Thank you.
[04:18:36] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Read error: Connection reset by peer)
[04:18:55] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[04:22:22] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net)
[04:26:49] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-894-7b04-59cc-7c5.fixed6.kpn.net) (Ping timeout: 252 seconds)
[04:34:50] *** Quits: wootehfoot (~wootehfoo@user/wootehfoot) (Quit: Leaving)
[04:38:42] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[04:49:20] *** Joins: conundrum_ (~conundrum@2604:a880:2:d0::2239:4001)
[04:50:15] *** conundrum_ is now known as conundrum
[04:56:32] *** Joins: ahmedelgabri (~ahmedelga@77-164-236-89.fixed.kpn.net)
[04:59:50] *** Quits: zindo (zindo@user/zindo) (Remote host closed the connection)
[05:01:31] *** Quits: ahmedelgabri (~ahmedelga@77-164-236-89.fixed.kpn.net) (Ping timeout: 268 seconds)
[05:07:01] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:07:08] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[05:09:04] *** Quits: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com) (Ping timeout: 252 seconds)
[05:12:00] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 268 seconds)
[05:13:23] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[05:31:42] *** Quits: maetthew (~maetthew@user/maetthew) (Quit: ZNC 1.8.2 - https://znc.in)
[05:34:11] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.2)
[05:35:16] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[05:37:39] *** Joins: maetthew (~maetthew@c188-150-100-85.bredband.tele2.se)
[05:37:39] *** Quits: maetthew (~maetthew@c188-150-100-85.bredband.tele2.se) (Changing host)
[05:37:39] *** Joins: maetthew (~maetthew@user/maetthew)
[05:44:08] *** Quits: markmcb (~markmcb@86.106.143.19) (Quit: WeeChat 3.0.1)
[05:47:38] *** Joins: markmcb (~markmcb@86.106.121.188)
[05:50:12] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 265 seconds)
[05:50:26] *** Joins: lesihctej (jetchisel@user/jetchisel)
[06:06:38] *** Quits: lesihctej (jetchisel@user/jetchisel) (Ping timeout: 265 seconds)
[06:07:06] *** Quits: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Ping timeout: 268 seconds)
[06:10:06] *** Joins: lesihctej (~jetchisel@user/jetchisel)
[06:52:33] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Ping timeout: 265 seconds)
[06:53:18] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[07:11:14] *** Quits: lesihctej (~jetchisel@user/jetchisel) (Read error: Connection reset by peer)
[07:16:34] *** Quits: robobo (~robobo@c-e52c524e.015-74-6762675.bbcust.telenor.se) (Ping timeout: 268 seconds)
[07:25:39] *** Quits: catman (~catman@user/catman) (Remote host closed the connection)
[07:29:10] *** Joins: catman (~catman@user/catman)
[07:37:55] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:47:40] *** catman is now known as killertoy
[07:48:16] *** killertoy is now known as catman
[08:09:46] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (Ping timeout: 260 seconds)
[08:16:29] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[08:22:06] *** Joins: Atque (~Atque@user/atque)
[08:30:19] *** Quits: TheCoffeMaker (~TheCoffeM@user/thecoffemaker) (Ping timeout: 252 seconds)
[08:31:11] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[08:50:57] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[08:59:31] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Ping timeout: 252 seconds)
[09:04:23] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[09:10:02] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 268 seconds)
[09:14:35] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[09:23:22] *** Quits: Lyude (~lyudess@pool-108-49-102-102.bstnma.fios.verizon.net) (Quit: WeeChat 3.2)
[09:24:38] *** Joins: Lyude (~lyudess@pool-108-49-102-102.bstnma.fios.verizon.net)
[09:38:21] *** Joins: scoobydoo_ (~scooby@user/scoobydoo)
[09:38:22] *** Quits: scoobydoo_ (~scooby@user/scoobydoo) (Excess Flood)
[09:41:29] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 268 seconds)
[09:52:41] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[09:52:45] *** Joins: guido (~guido@host-87-10-18-234.retail.telecomitalia.it)
[09:56:26] <xaltsc> Hey, are there general rules/good behaviours as to what variables belong to .zshrc or to .zshenv ?
[09:56:45] <Mikachu> almost nothing should be in .zshenv
[09:56:53] <Mikachu> environment variables go in .zprofile or .zlogin
[09:57:03] <Mikachu> or whichever file initializes your environment
[09:57:31] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 268 seconds)
[09:58:39] <llua> shell variables, which isn't environment variables, in .zshrc
[10:01:08] <xaltsc> I tend to think that everything not related to zsh should go in zshenv ? Esp xdg stuff ?
[10:02:38] <llua> what made you think that? since env is in the filename?
[10:02:56] <Mikachu> i already addressed that
[10:03:14] <xaltsc> This is what my (second, the first one only defines ZDOTDIR) zshenv looks like... https://paste.debian.net/hidden/f6492d92/
[10:03:24] <xaltsc> llua: yup
[10:03:56] <xaltsc> but I just have env vars in this zshenv
[10:04:05] <Mikachu> running $(perl) in .zshenv is awful
[10:04:27] <llua> .zshenv is sourced by every type of shell, interactive, non-interactive and login. do you need those variables in all of those kinds of shells?
[10:04:40] <xaltsc> yes precisely
[10:04:43] <Mikachu> mv .zshenv .zprofile
[10:04:53] <Mikachu> they only need to be set once, then everything inherits them
[10:04:59] <Mikachu> and you don't have to run perl on every zsh invocation
[10:05:25] <xaltsc> llua: maybe not the very last ones, but it prevents cluttering $HOME
[10:05:47] <xaltsc> Mikachu: perl ppl said the contrary.
[10:06:01] <llua> it seems wasteful outside of changing ZDOTDIR
[10:06:18] <Mikachu> i don't need to say the same thing for a third time, do what you want
[10:06:44] <xaltsc> or at least that I should not use the result of the perl cmd directly
[10:07:01] <xaltsc> Mikachu: idk what I want, that's the point of my asking
[10:07:16] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: sdfgsdfg)
[10:08:16] <llua> you asked for general advice, we gave it
[10:08:19] <llua> https://github.com/llua/homelab-states/blob/main/zsh/.zshenv is mine
[10:08:44] *** Quits: guido (~guido@host-87-10-18-234.retail.telecomitalia.it) (Quit: WeeChat 3.2.1)
[10:08:59] *** Joins: guido (~guido@host-87-10-18-234.retail.telecomitalia.it)
[10:09:03] <Mikachu> (i kind of disagree with autoloading stuff there)
[10:09:45] <Mikachu> i have my hash -d lines in there, so i can use them in zsh -c stuff, but even that feels a bit dirty
[10:10:24] <llua> nothing wraps an normal command, i have a separate directory for that
[10:10:40] <Mikachu> yeah just the glob could potentially be expensive
[10:10:49] * Mikachu still on spinning rust for ~
[10:12:41] <llua> exporting fpath is dumb btw
[10:12:53] <llua> in the majority of cases
[10:13:28] <Mikachu> exporting arrays also is a no-op
[10:13:44] <llua> heh, the attribute doesn't affect FPATH that is tied to either, so yeah. always dumb
[10:14:13] <Mikachu> (in this case it is probably just ignorance)
[10:14:50] <xaltsc> llua: yeah, about fpath just did it out of habitude.
[10:15:01] *** Joins: scoobydoo_ (~scooby@user/scoobydoo)
[10:15:01] *** scoobydoo_ is now known as scoobydoo
[10:15:11] <xaltsc> s/ude././
[10:15:28] <phy1729> fwiw I don't even have a .zshenv; it just rarely needed
[10:17:01] <xaltsc> I see files as coherent units of a bunch of info of a single type, hence my heavy zshenv
[10:18:42] *** Quits: gr33nR10t (~greenriot@user/gr33nr10t) (Ping timeout: 268 seconds)
[10:20:55] <xaltsc> Maybe I should put the perl stuff in .zprofile/login
[10:28:10] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[10:29:44] <xaltsc> Mikachu: abt what you said about exporting arrays, zsh always takes care of exporting ${,MAN}PATH then ?
[10:30:19] *** Joins: gr33nR10t (~greenriot@user/gr33nr10t)
[10:31:05] <llua> in most cases PATH is inherited from the environment when zsh starts, so child processes from zsh also gets it, including any possible changes to it
[10:31:05] <Mikachu> no
[10:31:10] <Mikachu> ah, what llua said
[10:32:45] <llua> unless you go out of your away to ignore it, PATH is set.
[10:35:10] <Mikachu> > unset PATH; /bin/zsh -c 'env|grep PATH'
[10:35:16] <machabot> Mikachu: /dev/stdin:1: no such file or directory: /bin/zsh
[10:35:26] <Mikachu> > echo =zsh
[10:35:29] <machabot> Mikachu: /usr/bin/zsh
[10:35:33] <Mikachu> > unset PATH; /usr/bin/zsh -c 'env|grep PATH'
[10:35:39] <machabot> Mikachu: No output, exitstatus: 1
[10:36:02] <llua> > env -i zsh -c 'typeset -p path'
[10:36:05] <machabot> llua: typeset -aT PATH path=( /bin /usr/bin /usr/ucb /usr/local/bin )
[10:42:08] *** Joins: sa02irc (~mbax@155-079-043-212.ip-addr.inexio.net)
[10:44:28] <Mikachu> i think env is nice and doesn't empty PATH
[10:44:52] <llua> > env -i env | grep PATH
[10:44:55] <phy1729> iirc it does but zsh has a builtin backup
[10:44:57] <machabot> llua: No output, exitstatus: 1
[10:45:24] <Mikachu> ah, so zsh uses an internal backup but doesn't export it
[10:45:51] <Mikachu> which is what the typeset says now that i look closer
[10:51:13] <xaltsc> Mikachu: unset PATH is a pathological case.
[10:51:41] <xaltsc> But what I'm surprised about is that zsh would have an already tied array to MANPATH
[10:51:44] <Mikachu> you asked if zsh exports PATH, it doesn't
[10:52:14] <Mikachu> yeah someone probably just carried away and added ties for all the *PATH variables ;)
[10:52:16] <xaltsc> Mikachu: but if it's set, it does, right ?
[10:52:34] <phy1729> if it's set, it's already in the environment
[10:52:36] <Mikachu> if it's already in the environment when zsh starts, it continues to be in the environment, as all other envs
[10:53:03] <xaltsc> variable scoping in shells is weird.
[10:53:15] <llua> its how unix works, not the shell in this case
[10:53:33] <xaltsc> well then, s/shells/unix/
[10:54:00] <Mikachu> certainly shells can handle environment variables in varying degrees of insanity
[10:54:13] <Mikachu> eg, consider bash allowing http variables to override internal commands
[10:54:36] <xaltsc> pathological.
[10:54:46] <Mikachu> i don't think that word means what you think it means
[10:54:59] <xaltsc> I mean it in the math sense
[10:55:10] <phy1729> I particularly like that bash supports exporting functions but not arrays
[10:56:01] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[10:56:47] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[10:58:11] *** Quits: kolla (~kolla@cloudsmurf.kolla.no) (Quit: %fog relay%)
[10:58:53] *** Joins: kolla (~kolla@cloudsmurf.kolla.no)
[11:02:55] *** Quits: sa02irc (~mbax@155-079-043-212.ip-addr.inexio.net) (Ping timeout: 265 seconds)
[11:15:38] *** Joins: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com)
[11:21:55] *** Quits: chemsmith (~chemsmith@user/chemsmith) (Ping timeout: 252 seconds)
[11:23:11] <xaltsc> Just another question: if I write a wrapper script for a program bearing the same name, won't it result in an (infinite) recursive call or (z)sh handles that as it already handles renamning through aliases ?
[11:28:49] <Mikachu> you'll need to make sure you don't call yourself
[11:29:09] <Mikachu> path[(R)$0:h]=() exec $0:t myextraarguments
[11:29:11] <Mikachu> for example
[11:29:20] <Mikachu> no warranty provided if symlinks are involved
[11:29:30] <Mikachu> more simple is just exec /path/to/file myextraarguments
[11:34:41] *** Quits: salmon (~salmon@65.128.72.91) (Ping timeout: 252 seconds)
[11:35:01] *** Joins: salmon (~salmon@65.128.72.91)
[11:42:22] <xaltsc> Mikachu: or exec env cmd stuff $args
[11:42:55] <xaltsc> Or does env actually knows the path ?
[11:45:04] <xaltsc> what does the 'path[(R)$0:h]=()' do ?
[11:45:20] *** Quits: guido (~guido@host-87-10-18-234.retail.telecomitalia.it) (Quit: WeeChat 3.2.1)
[11:45:30] <xaltsc> I can't just /path/to/file because it has to work across distros
[11:45:42] <Mikachu> sets the element of $path matching $0:h (the path to the current script) to nothing, ie removes it
[11:47:19] <xaltsc> Does it remove the dirname or just the filename ? I'll likely have a directory with wrappers.
[11:47:38] <xaltsc> And this is this dir that will be added to the path
[11:48:38] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Ping timeout: 260 seconds)
[11:49:23] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[11:51:54] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[11:52:05] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[11:53:37] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[11:58:49] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 252 seconds)
[12:02:33] <Delta[m]> phy1729: wait how does bash export a function?
[12:03:35] <llua> encoding it
[12:03:52] * Delta[m] sent a code block: https://libera.ems.host/_matrix/media/r0/download/libera.chat/36f8249ed180468d8613e82174a249a7b435d0bb
[12:03:53] <Mikachu> alternative answer: badly
[12:04:06] <llua> export -f fun
[12:04:09] <Delta[m]> oop, `export -f f` did it
[12:04:12] <Delta[m]> yup
[12:04:28] <Mikachu> https://en.wikipedia.org/wiki/Shellshock_(software_bug)
[12:04:59] <Delta[m]> oh my goodness, this looks terrible!... (full message at https://libera.ems.host/_matrix/media/r0/download/libera.chat/1d6e39fa227245b45e78a0e487589997697b6f3b)
[12:05:14] <llua> we already know
[12:05:20] <Mikachu> 09:33:53 <Mikachu> alternative answer: badly
[12:05:27] <Delta[m]> I don't know what to say
[12:05:28] <Mikachu> i guess the %% is the fix for shellshock
[12:07:24] <Delta[m]> how does %% fix it?
[12:07:39] <Mikachu> > export a%b=5
[12:07:43] <machabot> Mikachu: /dev/stdin:export:1: not valid in this context: a%b
[12:08:03] <Mikachu> web server won't put it in the env (hopefully)
[12:08:30] <Delta[m]> ❯ env "a%b=1" bash -c 'env | grep a.b='
[12:08:30] <Delta[m]> a%b=1
[12:10:15] <Delta[m]> Mikachu: ah, I guess you're right, it's unlikely that a process will innocently add that variable
[12:10:55] <Mikachu> i think it originally allowed you to set any variable to something like foo=some_command() { foo }
[12:11:05] <Mikachu> eg, that's how the SSH_ORIGINAL_COMMAND exploit worked
[12:11:13] <Mikachu> and now it requires the BASH_WHATEVER%% suffix
[12:16:02] <Delta[m]> this does still mean that being able to set an environment variable when a script is running gives you complete control over what that script does
[12:16:12] <Delta[m]> ❯ env BASH_FUNC_echo%%="() {  command echo nope\!; }" bash -c "echo innocent thing"
[12:18:01] <llua> matrix's irc bridge being cancer that it is.
[12:23:36] <Mikachu> i think that's just their prompt
[12:23:47] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Read error: Connection reset by peer)
[12:24:05] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[12:37:49] <llua> if [[ -o interactive ]] || [[ $zsh_eval_context = cmdarg ]]; then autoload ... lets me still use my functions in zsh -c, which is the only reason i have them in .zshenv
[12:40:00] <llua> ah, nope
[12:41:19] <Mikachu> interactive is only set if you use -ic
[12:41:56] <llua> that was for non zsh -c use
[12:42:14] <Mikachu> ah that's ||, i can't read
[12:42:26] <llua> but $zsh_eval_context is file when sourcing .zshenv which made sense after i tested it
[12:45:06] <Mikachu> ah, and it's somehow toplevel when running a script
[12:45:31] <Mikachu> well, in the script, not in .zshenv
[12:45:39] <Mikachu> i forgot what i wanted to test
[12:46:12] <Mikachu> yeah, still file in .zshenv when running a script
[12:46:13] <llua> > print 'echo $zsh_eval_context' > .zshenv; zsh -x =(:)
[12:46:18] <machabot> llua: +/root/.zshenv:1> echo file
[12:46:18] <machabot> llua: file
[12:51:19] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: sdfgsdfg)
[12:51:31] <llua> > zsh -c 'echo $ZSH_EXECUTION_STRING'
[12:51:33] <machabot> llua: echo $ZSH_EXECUTION_STRING
[12:51:56] <llua> testing if that is set is the only way i can think of, of knowing if -c is used
[12:53:18] <Mikachu> easy way to make a quine
[12:55:25] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[12:55:32] <llua> > zsh -c 'eval $ZSH_EXECUTION_STRING'
[12:55:36] <machabot> llua: (eval):1: job table full or recursion limit exceeded
[12:56:09] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[12:57:10] <Mikachu> > zsh -c 'zsh -c $ZSH_EXECUTION_STRING'
[12:57:23] <machabot> Mikachu: 8 second timeout reached
[13:01:30] *** Quits: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com) (Ping timeout: 268 seconds)
[13:15:15] *** Joins: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net)
[13:16:05] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[13:17:25] *** Joins: cdown (~cdown@194.207.141.245)
[13:29:36] *** Quits: bomb-on (~bomb-on@213.220.122.129) (Quit: aллилѹіа!)
[13:43:08] *** Joins: bartholin (~bartholin@109.53.0.108)
[13:45:50] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[13:49:18] *** Joins: jetchisel (jetchisel@user/jetchisel)
[14:29:14] *** Quits: mynickisregister (~mynickisr@2001:1af8:4700:b0e0:fa00::) (Quit: ZNC 1.8.2+deb1+bionic2 - https://znc.in)
[14:29:33] *** Joins: mynickisregister (~mynickisr@2001:1af8:4700:b0e0:fa00::)
[14:33:40] *** Quits: cdown (~cdown@194.207.141.245) (Ping timeout: 240 seconds)
[14:34:30] *** Joins: cdown (~cdown@194.207.141.245)
[14:39:20] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: sdfgsdfg)
[14:42:23] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[14:46:12] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Client Quit)
[14:49:12] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 268 seconds)
[15:07:02] *** Joins: jasper_ (~user@styria.daemonized.org)
[15:10:35] *** Joins: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg)
[15:13:54] *** Joins: Szadek (~Szadek@185.209.196.135)
[15:27:02] *** Joins: Fr0stBit (~theartist@ppp005054247220.access.hol.gr)
[15:28:09] <Fr0stBit> Hello! Is this an appropriate place to ask about zinit?
[15:37:07] *** Quits: bartholin (~bartholin@109.53.0.108) (Ping timeout: 252 seconds)
[15:49:22] *** Joins: bartholin (~bartholin@109.53.5.66)
[15:49:28] *** Joins: trace987 (~trace@ip5f5a6a70.dynamic.kabel-deutschland.de)
[15:52:07] *** Quits: x28girl (~x28girl@181.46.32.25) (Quit: Leaving)
[16:14:58] *** Joins: xenoterracide (~xenoterra@2600:1700:71d4:810:7809:8396:63f0:6697)
[16:16:20] *** Quits: sdfgsdfg (~sdfgsdfg@user/sdfgsdfg) (Quit: sdfgsdfg)
[16:32:00] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[16:33:17] *** Joins: xx (~xx@user/xx)
[16:37:20] *** Quits: DerpGusta (~quassel@user/derpgusta) (Ping timeout: 268 seconds)
[16:48:42] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[16:48:58] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[16:51:40] *** Quits: Fr0stBit (~theartist@ppp005054247220.access.hol.gr) (Quit: WeeChat 3.2)
[17:09:54] *** Joins: DerpGusta (~quassel@user/derpgusta)
[17:15:40] *** Quits: john_johnk (~Thunderbi@112.54.140.77.rev.sfr.net) (Ping timeout: 240 seconds)
[17:23:43] *** Quits: Aye (jeda@hellomouse/dev/cryb.jeda) (Quit: //System Offline//)
[17:37:19] *** Quits: bartholin (~bartholin@109.53.5.66) (Ping timeout: 265 seconds)
[17:39:49] *** Quits: cdown (~cdown@194.207.141.245) (Ping timeout: 252 seconds)
[17:50:24] *** Joins: bartholin (~bartholin@109.53.6.52)
[17:51:28] *** Quits: _xor (~xor@74.215.232.67) (Quit: WeeChat 3.2)
[17:52:34] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[17:56:27] *** Joins: _xor (~xor@74.215.232.67)
[17:56:39] *** Joins: Brainium (~brainium@user/brainium)
[17:57:30] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 268 seconds)
[18:15:04] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:16:09] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[18:28:11] *** Joins: cdown (~cdown@194.207.141.245)
[18:33:30] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:03:29] *** Quits: cdown (~cdown@194.207.141.245) (Ping timeout: 268 seconds)
[19:06:13] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[19:08:11] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[19:22:31] *** Quits: downtrip (~downtrip@188.166.151.198) (Quit: WeeChat 3.2.1)
[19:23:14] *** Joins: downtrip (~downtrip@188.166.151.198)
[19:31:15] *** Joins: xantam (~xantam@p200300cd871f6600382d08e0174bbb6a.dip0.t-ipconnect.de)
[19:34:11] *** Quits: xantam (~xantam@p200300cd871f6600382d08e0174bbb6a.dip0.t-ipconnect.de) (Client Quit)
[19:36:50] *** Quits: bartholin (~bartholin@109.53.6.52) (Ping timeout: 260 seconds)
[19:38:04] *** Quits: xenoterracide (~xenoterra@2600:1700:71d4:810:7809:8396:63f0:6697) (Ping timeout: 252 seconds)
[19:50:22] *** Joins: bartholin (~bartholin@109.53.0.230)
[19:55:10] *** Quits: haritz (~hrtz@user/haritz) (Ping timeout: 240 seconds)
[19:56:40] *** Quits: Raito_Bezarius (~Raito@2a01:e0a:5f9:9681:58c:8b9f:30df:bb6b) (Ping timeout: 260 seconds)
[19:57:09] *** Joins: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[20:00:33] *** Joins: greedom (~greedom@2001:16b8:2eb0:7d00:4d9f:6127:44e2:50f3)
[20:01:46] *** Joins: Narrat (~omnius@p200300df5f4530f906ea56fffe2e7cdc.dip0.t-ipconnect.de)
[20:05:30] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:05:36] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[20:06:55] *** Joins: Hackerpcs (~user@user/hackerpcs)
[20:08:54] *** Joins: Raito_Bezarius (~Raito@wireguard/tunneler/raito-bezarius)
[20:10:23] *** Quits: Gustavo6046 (~Gustavo60@user/gustavo6046) (Quit: ZNC 1.8.2 - https://znc.in)
[20:20:34] *** Quits: greedom (~greedom@2001:16b8:2eb0:7d00:4d9f:6127:44e2:50f3) (Remote host closed the connection)
[20:38:26] *** Joins: cdown (~cdown@194.207.141.245)
[20:40:17] *** Joins: greedom (~greedom@2001:16b8:2eb0:7d00:4d9f:6127:44e2:50f3)
[20:50:36] *** Quits: Brainium (~brainium@user/brainium) (Quit: Konversation terminated!)
[20:55:54] *** Joins: Bit_MCP234 (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[20:58:10] *** Quits: trace987 (~trace@ip5f5a6a70.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[21:02:41] *** Joins: Bit_MCP2345 (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[21:03:01] *** Quits: Bit_MCP2345 (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Remote host closed the connection)
[21:03:01] *** Quits: Bit_MCP (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Quit: Leaving)
[21:03:01] *** Quits: Bit_MCP234 (~Bit_MCP43@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Quit: Leaving)
[21:03:19] *** Joins: Bit_MCP (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[21:16:54] *** Joins: Gustavo6046 (~Gustavo60@user/gustavo6046)
[21:17:25] *** Joins: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net)
[21:18:42] *** Quits: trevors (~trevors@c-65-96-171-157.hsd1.ma.comcast.net) (Client Quit)
[21:18:56] *** Quits: cdown (~cdown@194.207.141.245) (Ping timeout: 268 seconds)
[21:21:01] *** Quits: greedom (~greedom@2001:16b8:2eb0:7d00:4d9f:6127:44e2:50f3) (Remote host closed the connection)
[21:22:22] *** Joins: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de)
[21:37:03] *** Quits: bartholin (~bartholin@109.53.0.230) (Ping timeout: 265 seconds)
[21:38:01] *** Quits: Bit_MCP (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Ping timeout: 265 seconds)
[21:46:45] *** Joins: guido (~guido@host-87-10-18-234.retail.telecomitalia.it)
[21:47:10] *** Quits: guido (~guido@host-87-10-18-234.retail.telecomitalia.it) (Client Quit)
[21:47:32] *** Quits: malteger (~malteger@user/malteger) (Quit: malteger)
[21:48:09] *** Joins: guido (~guido@host-87-10-18-234.retail.telecomitalia.it)
[21:50:10] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Ping timeout: 260 seconds)
[21:50:42] *** Joins: bartholin (~bartholin@109.53.6.173)
[21:51:01] *** Joins: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[21:54:40] *** Joins: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net)
[21:59:25] *** Quits: ahmedelgabri (~ahmedelga@2a02-a446-d88a-1-e83f-2087-be8-db47.fixed6.kpn.net) (Ping timeout: 252 seconds)
[22:01:49] *** Joins: malteger (~malteger@user/malteger)
[22:02:41] *** Joins: greedom (~greedom@2001:16b8:2eb0:7d00:4d9f:6127:44e2:50f3)
[22:15:21] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aллилѹіа!)
[22:19:11] *** Joins: cdown (~cdown@194.207.141.245)
[22:26:52] *** Quits: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de) (Ping timeout: 252 seconds)
[22:27:44] *** Joins: zephros (~zephros@2603-6010-1103-15a1-6564-cf2b-52c7-e426.res6.spectrum.com)
[22:29:46] *** Joins: sa02irc (~mbax@155-079-043-212.ip-addr.inexio.net)
[22:31:25] *** Joins: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de)
[22:51:07] *** Joins: Atque (~Atque@user/atque)
[22:59:18] *** Joins: Everything (~Everythin@37.115.210.35)
[22:59:19] *** Quits: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de) (Ping timeout: 252 seconds)
[23:01:23] *** Joins: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de)
[23:05:52] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[23:19:48] *** Quits: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de) (Ping timeout: 268 seconds)
[23:19:51] *** Joins: barbaros1a93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net)
[23:24:07] *** Quits: barbarossa93 (~barbaross@c-73-39-107-44.hsd1.md.comcast.net) (Ping timeout: 268 seconds)
[23:26:18] *** Joins: trace987 (~trace@dynamic-002-247-249-191.2.247.pool.telefonica.de)
[23:27:36] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[23:36:46] *** Quits: bartholin (~bartholin@109.53.6.173) (Ping timeout: 252 seconds)
[23:37:03] *** Quits: brw (~bas@static.66.39.12.49.clients.your-server.de) (Read error: Connection reset by peer)
[23:38:49] *** Joins: brw (~bas@static.66.39.12.49.clients.your-server.de)
[23:50:10] *** Joins: bartholin (~bartholin@109.53.1.190)
