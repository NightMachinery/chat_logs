[00:27:23] *** Quits: Poster (~poster@75.188.0.55) (Quit: ZNC - https://znc.in)
[00:37:48] *** Joins: DmanT (~DmanT@2001:41d0:a:f55c::1)
[00:54:08] *** Joins: Poster (~poster@75.188.0.55)
[00:59:02] *** Quits: mthall (~quassel@mail.thalliman.com) (Ping timeout: 256 seconds)
[01:01:47] *** Joins: mthall (~quassel@mail.thalliman.com)
[01:27:36] *** Quits: Poster (~poster@75.188.0.55) (Quit: ZNC - https://znc.in)
[01:28:13] *** Joins: Poster (~poster@75.188.0.55)
[01:46:12] *** Quits: Poster (~poster@75.188.0.55) (Quit: ZNC - https://znc.in)
[01:47:34] *** Quits: zulutango (~zulutango@static-n58-105-160-58.mas4.nsw.optusnet.com.au) (Remote host closed the connection)
[01:47:54] *** Joins: zulutango (~zulutango@static-n58-105-160-58.mas4.nsw.optusnet.com.au)
[01:50:13] *** Joins: Poster (~poster@75.188.0.55)
[01:50:42] *** Quits: zulutango (~zulutango@static-n58-105-160-58.mas4.nsw.optusnet.com.au) (Remote host closed the connection)
[01:53:49] *** Joins: zulutango (~zulutango@static-n58-105-160-58.mas4.nsw.optusnet.com.au)
[01:56:03] *** Quits: Poster (~poster@75.188.0.55) (Quit: ZNC - https://znc.in)
[02:31:37] *** Joins: Poster (~poster@75.188.0.55)
[02:49:54] *** Quits: jmark (~jmark@laguna07.dericnet.com) (Read error: Connection reset by peer)
[04:23:14] *** Quits: Nahra (~user@static.161.95.99.88.clients.your-server.de) (Remote host closed the connection)
[04:26:12] *** Joins: jkotra_ (~jkotra@117.98.194.182)
[04:26:44] *** Quits: jkotra (~jkotra@223.230.127.157) (Ping timeout: 250 seconds)
[04:26:44] *** jkotra_ is now known as jkotra
[05:05:50] *** Joins: jmark_ (~jmark@laguna07.dericnet.com)
[05:19:19] *** Parts: jmark_ (~jmark@laguna07.dericnet.com) (Leaving)
[05:19:57] *** Joins: jmark_ (~jmark@laguna07.dericnet.com)
[05:30:16] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:39:00] *** Quits: TonyStone (~TonyStone@2603-7080-8607-c36a-c0be-54b3-db2c-85e9.res6.spectrum.com) (Remote host closed the connection)
[06:27:19] *** Joins: TonyStone (~TonyStone@2603-7080-8607-c36a-5c4e-92cc-80de-49d9.res6.spectrum.com)
[06:32:33] *** Joins: vlm (~vlm@user/vlm)
[06:34:01] *** Quits: vlm (~vlm@user/vlm) (Client Quit)
[06:40:51] *** Quits: TonyStone (~TonyStone@2603-7080-8607-c36a-5c4e-92cc-80de-49d9.res6.spectrum.com) (Remote host closed the connection)
[06:42:24] *** Joins: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com)
[06:49:43] *** Joins: adeliktas5 (~adeliktas@i59F4D79A.versanet.de)
[06:51:49] *** Quits: adeliktas (~adeliktas@i59f5fa6e.versanet.de) (Ping timeout: 256 seconds)
[06:51:49] *** adeliktas5 is now known as adeliktas
[06:58:29] *** Joins: vlm (~vlm@user/vlm)
[07:15:09] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Quit: Ex-Chat)
[07:47:07] *** Quits: TonyStone (~TonyStone@cpe-74-76-51-197.nycap.res.rr.com) (Quit: Leaving)
[08:02:15] *** Joins: TonyStone (~TonyStone@2603-7080-8607-c36a-d449-2685-1032-d72e.res6.spectrum.com)
[09:21:46] *** Quits: zulutango (~zulutango@static-n58-105-160-58.mas4.nsw.optusnet.com.au) (*.net *.split)
[09:21:46] *** Quits: Haxxa (~Haxxa@125-253-30-213.ip4.superloop.com) (*.net *.split)
[09:21:46] *** Quits: csrf (~csrf@user/csrf) (*.net *.split)
[09:21:46] *** Quits: lorimer (~lorimer@user/lorimer) (*.net *.split)
[09:21:46] *** Quits: wolfshappen (~waff@irc.furworks.de) (*.net *.split)
[09:21:46] *** Quits: RypPn (~RypPn@user/ryppn) (*.net *.split)
[09:21:46] *** Quits: syzzer (~syzzer@77-9-88-45.connected.by.freedominter.net) (*.net *.split)
[09:21:46] *** Quits: kaipee (~quassel@host31-54-129-14.range31-54.btcentralplus.com) (*.net *.split)
[09:22:24] *** Joins: zulutango (~zulutango@static-n58-105-160-58.mas4.nsw.optusnet.com.au)
[09:22:24] *** Joins: Haxxa (~Haxxa@125-253-30-213.ip4.superloop.com)
[09:22:24] *** Joins: csrf (~csrf@user/csrf)
[09:22:24] *** Joins: lorimer (~lorimer@user/lorimer)
[09:22:24] *** Joins: wolfshappen (~waff@irc.furworks.de)
[09:22:24] *** Joins: kaipee (~quassel@host31-54-129-14.range31-54.btcentralplus.com)
[09:22:24] *** Joins: RypPn (~RypPn@user/ryppn)
[09:22:24] *** Joins: syzzer (~syzzer@77-9-88-45.connected.by.freedominter.net)
[09:25:03] *** Quits: sunyibo (~dorsch@2a04:52c0:101:443::) (*.net *.split)
[09:25:18] *** Joins: sunyibo (~dorsch@2a04:52c0:101:443::)
[09:28:58] *** Quits: Tuvix (~Tuvix@gateway/tor-sasl/tuvix) (*.net *.split)
[09:34:14] *** Joins: Tuvix (~Tuvix@gateway/tor-sasl/tuvix)
[09:36:04] *** Joins: nerozero (~nerozero@87.253.63.54)
[10:11:06] *** Quits: mannequin (uid453465@id-453465.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[10:15:45] *** Joins: Snegodick (~ne@user/Snegodick)
[10:45:54] *** Joins: Nahra (~user@static.161.95.99.88.clients.your-server.de)
[12:10:13] *** Joins: becm (~becm@55d4debf.access.ecotel.net)
[13:02:44] *** Quits: RypPn (~RypPn@user/ryppn) (Quit: Real-time updating is paused. (Resume))
[13:11:32] *** Joins: Floflobel_ (~Floflobel@cosium-fo-152-18.fib.nerim.net)
[13:12:29] *** Joins: RypPn (~RypPn@user/ryppn)
[14:00:28] *** Quits: realies (~realies@user/realies) (Ping timeout: 250 seconds)
[14:18:54] *** Joins: realies (~realies@user/realies)
[14:24:42] *** Joins: realies5 (~realies@user/realies)
[14:25:00] *** Quits: realies (~realies@user/realies) (Ping timeout: 240 seconds)
[14:25:00] *** realies5 is now known as realies
[14:32:54] *** Joins: realies4 (~realies@user/realies)
[14:34:20] *** Quits: realies (~realies@user/realies) (Ping timeout: 272 seconds)
[14:34:21] *** realies4 is now known as realies
[14:46:03] <_val_> hello there again:  I'm getting disconnects from the VPN: NOTE: failed to empirically measure MTU (requires OpenVPN 1.5 or higher at other end of connection).
[14:46:15] <_val_> What is going on here? :/
[14:46:32] <_val_> Then after that: Inactivity timeout (--ping-restart), restarting
[14:46:43] <_val_> and then.... SIGUSR1[soft,ping-restart] received, client-instance restarting
[15:30:17] *** Quits: csrf (~csrf@user/csrf) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[15:31:02] *** Joins: csrf (~csrf@user/csrf)
[16:11:09] *** Joins: mannequin (uid453465@id-453465.helmsley.irccloud.com)
[16:15:41] <ordex> _val_: it seems traffic stops flowing between you and the server
[16:15:49] <ordex> and then the connection just resets
[16:30:09] <_val_> ordex: but why? 
[16:30:22] <ordex> _val_: well, that can have many answers
[16:30:30] <ordex> it could also be somebody between you and the server is choking the connection
[16:30:37] <ordex> being it the ISP or somebody else..
[16:31:19] <ordex> _val_: does it happen always after the same amount of time? or maybe you are able to trigger the issue by doing something specific?
[16:31:24] <_val_> ordex: well I have other openvpn servers running on other environments but they do not have this error
[16:31:42] <_val_> when pinging the IP using a mss of 1500, I get: ping: local error: message too long, mtu=1500
[16:31:48] <ordex> _val_: maybe the different *environment* is the key
[16:31:59] <ordex> some provider may juat not like the permanent connection ?
[16:32:06] <_val_> ordex: according to tracepath they traverse the same route
[16:32:06] <ordex> (prvider as in the server provider)
[16:32:17] <ordex> btw you can verify that by running tcpdump on both sides and see when the traffic stops
[16:32:41] <ordex> at some point I expect to see outgoing traffic on one side, but nothing coming in on the other
[16:32:54] <_val_> ordex: I do have multiple openvon sessions to multiple vpn servers  on the same client
[16:33:09] <ordex> _val_: btw it could be there is something else going on. if you could share the client and server log at verb 4 we could have a better understanding of the whole siutation
[16:33:10] <_val_> openvpn*
[16:33:13] *** Quits: jkotra (~jkotra@117.98.194.182) (Ping timeout: 256 seconds)
[16:33:54] <_val_> ordex: yes that is a good one. Hmm that requires some changes, restarts.. cant do it right now. Thanks for your time. I'll come with some more updates later on!
[16:33:55] <ordex> _val_: if it just this one server that has issues, I guess it's likely that the issue is the server or something close to it
[16:34:01] <ordex> sure!
[16:34:05] <ordex> just dumping ideas :)
[16:34:22] <_val_> that is more than enough. Appreciated!
[16:34:27] *** Joins: jkotra (~jkotra@117.98.201.12)
[16:35:58] <ordex> np!
[16:41:46] <_val_> ordex: I increased verb to 4 in my client config
[16:42:03] <_val_> http://sprunge.us/UgAlsS
[16:42:29] <_val_> This is serious stuff it seems. 
[16:42:53] <ordex> is this all you got in the log ?
[16:43:12] <ordex> but this is some packet reordering happening in the network
[16:44:41] <_val_> ordex: these are the 3 lines that were shown in the log when the disconnection happened
[16:44:47] <_val_> I was tailing -F ... the logfile
[16:46:06] <ordex> before that there is just the 'connection established' ?
[16:46:15] <ordex> and after that the inactivity ?
[16:46:23] <ordex> btw, that sounds like something is happening on the network indeed
[16:51:45] *** Joins: BinarySavior (~BinarySav@idlerpg/player/BinarySavior)
[16:52:41] <_val_> ordex: yes. The connection is good for 1 minute
[16:53:19] <_val_> After that I am able to ssh to a local machine through VPN then suddenly.. connection is gone.. and the connection to the ssh is terminated
[16:54:02] <ordex> _val_: if it's so fats, you could check on the server if you still see packets coming from the client and viceversa (not on the tun interface, but on the real interface)
[17:00:18] <rob0> it sure sounds firewally
[17:00:34] <ordex> so *fast
[17:01:44] <rob0> multiple sessions to multiple servers ... do any of these push redirect-gateway?
[17:07:57] <_val_> rob0: yes they all do push gateways
[17:08:03] <_val_> push routes actually
[17:08:18] <_val_> ordex: well.. I have isolated the issue a bit I guess.
[17:08:36] <_val_> I went over to my 3G/4G connection and it was stable...
[17:09:06] <_val_> omg : 2022-02-14 14:38:48 us=89709 PID_ERR replay-window backtrack occurred [3] [SSL-0] [0_0_11124447>>EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE] 0:64 0:61 t=1644845928[0] r=[-2,64,15,3,1] sl=[0,64,64,528]
[17:09:23] <ordex> this is packet reordering
[17:09:25] <_val_> Ok.. let me be more specific. I set upt the VPN, then I connect to our salt-master VM
[17:09:30] <ordex> could also happen on a working connection
[17:10:02] <_val_> from there I run a salt -I roles:openvpn cmd.shell 'grep "myuser" /some/openvpn/log.log' and BOOOM
[17:10:09] <_val_> the above line appears.. connection is gone
[17:11:03] *** Parts: D0han (d0han@user/d0han) ()
[17:11:13] <_val_> ordex: maybe worth mentioning. This is a udp connection 
[17:12:12] <ordex> _val_: I wonder if it's related to bad mtu settings...you could give it a shot by reducing the MTU on both sides
[17:12:24] <ordex> ah but
[17:12:29] <ordex> in your case everything stops
[17:12:32] <ordex> not just data traffic
[17:15:05] <_val_> ordex: yes
[17:51:12] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[17:53:07] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Client Quit)
[17:55:29] *** Joins: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net)
[17:56:08] *** Quits: eelstrebor (~eelstrebo@198-178-29-136.scb.ne.static.allophone.net) (Remote host closed the connection)
[17:59:29] *** Joins: st46k (~st46k@103.88.2.78)
[18:00:55] <_val_> ordex: apologies for the late repply but I was testing the vpn connection with 3G/4G and wired etc.. so I could not connect to my remote irssi (irc client) which is running at home which is using ACL's and other IP's were not allowed to connect so .. that's the context :)
[18:01:09] <_val_> but.. now I switched to tcp.. and it seems that the connection is stable
[18:04:47] *** Joins: lotharn (~kvirc@2600:8800:280:d400:b8d1:c94a:1b73:23ad)
[18:05:29] <lotharn> how do i set the route that openvpn sets on the tun to somthing other than a /16?
[18:06:29] *** Quits: Snegodick (~ne@user/Snegodick) (Quit: Going offline, see ya! (www.adiirc.com))
[18:14:10] <_val_> ordex: it really turns out that UDP is the culprit here
[18:14:42] <ordex> _val_: not sure what you mean
[18:14:49] <_val_> But now.. I am a curious mammal and I awnt to dive into it deeper...   why UDP?
[18:14:59] <ordex> have you tried seeing if packets stop arriving for real on the server/client when the issue happens?
[18:15:25] <_val_> Hmm no I haven't done that yet.. since uhm.. it is complicated
[18:15:40] <_val_> To increase verbosity in the server I need to issue an RFC
[18:15:59] <_val_> there are these stupid procedures... which need to pass ITILv3 and you name it..
[18:16:27] <ordex> _val_: at least you can check on the client, if you stop receiving traffic from the server o rnot
[18:16:34] <_val_> So I cannot (I mean I can since I am root) procedurally I cannot change this
[18:16:48] <_val_> ordex: well the client was showing those lines
[18:17:05] <ordex> _val_: I am referring to this question " < ordex> have you tried seeing if packets stop arriving for real on the server/client when the issue happens?"
[18:17:20] <ordex> I'd do this with tcpdump
[18:21:41] <lotharn> 10.23.0.0/16 dev tun1 proto kernel scope link src 10.23.0.13 
[18:22:08] <lotharn> how do i make it a /32?
[18:22:38] <ordex> lotharn: this is the VPN network route pushed by the server
[18:22:57] <lotharn> can i override?
[18:23:10] <ordex> with what ?
[18:23:45] <lotharn> 10.23.0.0/32?
[18:24:19] <ordex> what would be the meaning of that?
[18:24:30] <ordex> if you don't want the /16, I guess you can remove it
[18:24:37] <ordex> as long as it does not interfere with the rest
[18:24:41] <ordex> (but it should not)
[18:24:50] <lotharn> i'm connecting hundreds of times.
[18:25:17] <lotharn> the 16's overlap and i'm guessing it is causing the problems i'm seeing.
[18:25:34] <lotharn> i was trying to get nc to use one of the client tuns
[18:25:49] <lotharn> and it couldnt find the address
[18:26:24] *** Joins: wedwards (~wedwards@rtr0.17.31.bogert.cyberfusion.cloud)
[18:26:49] <lotharn> i'd like to specify the netmask in the openvpn commandline
[18:27:04] <ordex> lotharn: this is pushed by the server, because it's the server handling the whole VPNnetwork
[19:12:33] <lotharn> for i in *.ovpn; do sudo openvpn --config "$i" --auth-user-pass pass --route-nopull --topology p2p --client-nat snat 10.0.0.0/30 & done
[19:12:50] <lotharn> should that work?
[19:24:45] <lotharn> ordex: 
[19:25:25] <ordex> I never used --client-nat to be honest
[19:37:09] *** Quits: jayray (~jayray@user/jayray) (Ping timeout: 250 seconds)
[19:37:39] *** Joins: Snegodick (~ne@user/Snegodick)
[19:42:15] <lotharn> well it doesnt seem to affect anything anyway
[19:59:15] *** Quits: trace987 (~trace@ip5b42976d.dynamic.kabel-deutschland.de) (Changing host)
[19:59:15] *** Joins: trace987 (~trace@user/trace)
[21:03:03] <daemon> hey all I have a client joining my op[envpn server and announcing its routes .... and it all looks right ... but somehow its not, https://dpaste.org/Bw9J
[21:03:06] <daemon> probably something simple
[21:03:11] <daemon> but not sure what it looks right
[21:03:12] *** Quits: nerozero (~nerozero@87.253.63.54) (Ping timeout: 272 seconds)
[21:04:22] <daemon> I can ping 192.168.101.5
[21:04:32] <daemon> its just those subnets it owns
[21:04:36] <daemon> and it does own them
[21:08:40] <daemon> ... ok I am an idiot 255.255.255.255 in the route's
[21:08:42] <daemon> just come over and shoot me
[21:08:45] <daemon> its the better solution
[21:17:12] <lotharn> so anyone want to tell me how to make openvpn not set up overlapping routes for concurrent connections?
[21:18:30] <daemon> multiple servers and multiple routes?
[21:18:43] <lotharn> https://termbin.com/5n0e
[21:19:04] <lotharn> my host to dozens of servers
[21:21:03] <lotharn> for i in *.ovpn; do sudo openvpn --config "$i" --auth-user-pass pass --route-nopull --topology p2p --client-nat snat 10.0.0.0/30 & done
[21:21:16] <lotharn> is what im currently trying
[21:30:14] *** Quits: Floflobel_ (~Floflobel@cosium-fo-152-18.fib.nerim.net) (Remote host closed the connection)
[21:34:10] *** Joins: jayray (~jayray@user/jayray)
[21:38:20] <Pippin_> lotharn: your servers?
[21:41:51] *** Quits: st46k (~st46k@103.88.2.78) (Quit: Client closed)
[21:42:05] *** Joins: TheCoffeMaker (~TheCoffeM@user/thecoffemaker)
[21:44:16] *** Quits: Snegodick (~ne@user/Snegodick) (Quit: Going offline, see ya! (www.adiirc.com))
[22:20:03] <lotharn> Pippin_: no
[22:29:25] *** Quits: trace987 (~trace@user/trace) (Remote host closed the connection)
[22:34:40] <Pippin_> look at the routes pushed by all the servers and note them. figure those routes out. then use --pull-filter *in each client config* to filter the routes. then set the routes you need.
[22:35:09] <Pippin_> --pull-filter in manual: https://build.openvpn.net/man/openvpn-2.5/openvpn.8.html
[22:39:15] *** Joins: trace987 (~trace@user/trace)
[22:45:04] *** Quits: Haxxa (~Haxxa@125-253-30-213.ip4.superloop.com) (Quit: Haxxa flies away.)
[22:48:51] *** Joins: Haxxa (~Haxxa@125-253-30-213.ip4.superloop.com)
[23:18:26] <lotharn> Pippin_: isnt the client the one generating the addresses? how is it picking those? 
[23:20:00] <Pippin_> they are pushed by the server, recieved by the client which then sets them
[23:20:20] <lotharn> so collisions are going to be common
[23:20:35] <Pippin_> in your case servers
[23:20:43] <lotharn> can i just force the client address and mask?
[23:21:13] <lotharn> have the tun set up like that?
[23:21:29] <lotharn> put everything on 32's?
[23:22:36] <Pippin_> 32's?
[23:22:48] <Pippin_> did i misunderstand the question?
[23:22:54] <lotharn> 192.168.0.0/32
[23:23:23] <lotharn> rather its setting 10.0.0.0/16
[23:23:36] <lotharn> and that is pissing me off.
[23:24:06] <lotharn> i want a smaller subnet.
[23:24:13] <Pippin_> what is 192.168.0.0/32 going to do?
[23:27:45] <lotharn> uh, ok, so i need a vpnclient and a tun. I only need the tun's ip address to forward traffic. however openvpn is causing the tun to have a subnet to be in the class b range with what appears to be a unique address in that range. i am having routing issues with this configuration because after 20 connections or so, the system
[23:29:13] <lotharn> starts assigning overlapping subnets 255.255.0.0, unique addresses but the wrong subnet.
[23:29:39] <lotharn> rather the right subnet with the wrong population.
[23:30:44] <lotharn> do you understand?
[23:32:22] <lotharn> Pippin_: 
[23:32:47] <Pippin_> first take a look here: https://www.github.developerdan.com/hosts/lists/tracking-aggressive-extended.txt
[23:34:24] <Pippin_> the tun gets an address in the tunnel address range, thats how it works
[23:34:46] *** Joins: Mister_Magister_ (~Mister_Ma@user/mister-magister/x-2636733)
[23:35:12] *** Quits: Mister_Magister (~Mister_Ma@user/mister-magister/x-2636733) (Ping timeout: 272 seconds)
[23:35:17] <lotharn> what am i supposed to do with this list?
[23:35:29] <Pippin_> not the list, the picture
[23:35:53] <lotharn> huh?
[23:36:02] <Pippin_> the tunnel net is pushed by the server
[23:36:37] <Pippin_> which you do not control
[23:36:39] <lotharn> i get that.
[23:36:47] *** Mister_Magister_ is now known as Mister_Magister
[23:36:49] <Pippin_> still, the exact goal is not clear to me
[23:36:51] <lotharn> but i must have some control?
[23:37:15] <lotharn> i want the tuns setup on a smaller netmask.
[23:37:17] <Pippin_> you want too avoid overlapping subnets
[23:37:30] <Pippin_> i gave a possible solution
[23:38:05] <lotharn> there was a picture?
[23:38:22] <lotharn> what about the list?
[23:39:18] <lotharn> anyway i figured there might be a simple method. i'll go back to searching.
[23:40:33] <mzar> lotharn: there are plenet of sollutions, for example multiple FIBs 
[23:41:07] <lotharn> anything is possible when you lie
[23:44:48] <mzar> lie ?
[23:48:21] <lotharn> sorry afk.
