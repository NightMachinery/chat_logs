[00:15:56] *** Quits: freeworld (~vit@chello085216193138.chello.sk) (Quit: Konversation terminated!)
[00:18:09] *** Quits: Akimb (~Akimb@86.100.13.100) (Read error: Connection reset by peer)
[00:26:10] *** Quits: guidoc (~guido@151.57.94.116) (Ping timeout: 252 seconds)
[00:28:31] <celphi> has anyone here dealt with this problem before? https://stackoverflow.com/questions/44479681/cors-php-response-to-preflight-request-doesnt-pass-am-allowing-origin
[00:31:36] <__adrian> did you see the accepted answer there?
[00:34:15] <celphi> yah but i dont really understand it
[00:34:55] <__adrian> start studying about the parts you don't understand.  https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS might be a good place to start
[00:35:28] <__adrian> it seems pretty clear and complete, so you'd need to dive into the basics and then see what more specific questions you end up with
[00:35:29] <celphi> ok brb - thnx a
[00:36:31] <__adrian> in the end, this is not going to be a copy+paste sort of answer, and it likely won't have much/anything to do with your php code aside from "you need to set {some header}" or similar.
[00:37:14] <celphi> yeah i just dont get the setting of headers in php part. is it like something you have before echoing back to server?
[00:37:22] <__adrian> no
[00:37:31] <__adrian> do you know what a http response looks like?
[00:37:31] <celphi> but ill just read article first and ask question afterwards-
[00:37:40] <celphi> in browser yes
[00:37:51] <celphi> in network tab
[00:37:51] <__adrian> no, a raw response. a http message.
[00:38:03] <celphi> isnt it same thing?
[00:38:32] <__adrian> https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Example_session
[00:38:40] <celphi> ie content type, accept, cookie ect
[00:38:45] <__adrian> three parts: status line, headers, body.
[00:39:03] <__adrian> note the headers are (literally) _before_ the body.
[00:39:21] <__adrian> if you echo "something", that goes to the body, so it's then too late to send headers.
[00:39:22] <celphi> ok ya ive seen these before
[00:39:33] <biberu> celphi: two common causes for that is either that you're requiring credentials (and can't use wildcard origins, that you probably shouldn't anyway if you are), or that the preflight didn't return a success code (2xx)
[00:39:42] <__adrian> so you need to send any headers first, before you start output. https://php.net/header
[00:40:11] <__adrian> note also that depending on your design/needs, you might set up your webserver to do this, and not make php handle it at all.
[00:40:27] <celphi> yeah i cant really change that part
[00:40:59] <__adrian> "i cant really change that part"  // not saying it's the end of the world, but that's generally a bad sign
[00:41:13] <celphi> i cant change the server settings
[00:41:19] <__adrian> yes
[00:41:23] <__adrian> that's generally a bad sign
[00:41:26] <celphi> shrug
[00:41:37] <__adrian> e.g., it usually means "hmm maybe i need a better host"
[00:41:44] <celphi> it's my job
[00:41:53] <celphi> not my host provider
[00:42:00] <celphi> restrictions
[00:42:56] <celphi> sometimes i do stuff for my own website to get better at php
[00:43:05] <__adrian> if it's "your job" there are only three answers: *someone else changes server settings, you need to talk to them. *your job needs a better host, you need to talk to whoever decides that. *your job is an idiot, you need to find a different job.
[00:43:25] <celphi> lmao- amen
[00:43:37] <__adrian> "do this, oh but you can't do it the right way" is bad
[00:43:47] <biberu> what is your job exactly? build exactly to order, or help to make better decisions?
[00:44:26] <__adrian> ^ if your job is to do exactly what your boss tells you, then you need to say, "what exactly do you want me to do then?"
[00:44:29] <celphi> i am program a section of the site,. but i do not have control over root operations bc the settings they have affect entire site
[00:44:51] <biberu> control != influence
[00:45:03] <__adrian> tell your boss/pm/whatever that you have a problem than needs resolved
[00:45:06] <celphi> not much influece after 60days of working here
[00:45:23] <__adrian> no, you can't go do it yourself, but that doesn't mean it doesn't need done or can't be done.
[00:45:25] <biberu> anyway, what is the problem? what are your requests/responses looking like?
[00:46:11] <__adrian> that's not relevant. you're working there, you need to figure out problems. "i'm new here" doesn't mean you're not allowed to bring up issues/questions
[00:46:33] <celphi> if i send curl to server then i get the request on the server- if i send ajax to server and reply with json_encode([4]) i get an array 4 in JS,. but if i try to do json_encode($_REQUEST) from ajax, i just get an empty array
[00:46:48] <__adrian> in fact if i hired you, and you kept quiet about every problem you came across instead of bringing it up and getting clarification and solving the problem _well_, i'd fire you.
[00:47:17] <celphi> __adrian: i can bring them up , but i have a time line to finish what i have to do and my suggestions are backburner requests
[00:47:30] <__adrian> "json_encode($_REQUEST) from ajax"  // i have no idea what you mean by this
[00:47:35] <biberu> me neither
[00:47:48] <Sammitch> "
[00:47:51] <celphi> echo json_encode($_REQUEST) after sending ajax to server
[00:47:54] <biberu> request/response
[00:48:02] <__adrian> "i can bring them up , but..."  // then bring them up sooner. make clear it's a blocker for you.
[00:48:05] <Sammitch> "this issue is a blocker and is affecting my deliverables"
[00:48:05] <biberu> headers, specifically
[00:48:13] <__adrian> this (making clear) is your job  :)
[00:48:34] *** Joins: jeffrey (~jeffrey@84-107-68-141.cable.dynamic.v4.ziggo.nl)
[00:49:10] <celphi> ok then you're suggesting i suggest a server setting i dont even know myself and ive never had to use-- it always just works.
[00:49:51] <__adrian> "celphi> echo json_encode($_REQUEST) after sending ajax to server"  still not clear. *why are you trying to output the request? *what do you mean by "after sending request to server"? *are you talking about your js code making an ajax request?
[00:50:04] <biberu> celphi: are you familiar with http headers? can you see what your client is sending and what the server is responding with?
[00:50:15] <__adrian> celphi: no, i'm suggesting you TELL SOMEONE that you're having cors problems and need help understanding server settings.
[00:50:20] <celphi> __adrian: it's just a test to resend back the posted data to server back at client __adrian
[00:50:35] <__adrian> k
[00:50:59] <__adrian> so $_REQUEST is empty? is that unexpected?
[00:51:05] <celphi> yes.
[00:51:18] <__adrian> and i ahve to ask why you're looking at $_REQUEST instead of (e.g.) $_POST
[00:51:35] <celphi> i mean thats a side issue
[00:51:43] <__adrian> and since "ajax," whether it SHOULD be empty (are you sending json with your requests?
[00:51:45] <celphi> it should still have something in the global
[00:51:46] <__adrian> )
[00:52:04] <__adrian> "something"?  what do you expect?  it shouldn't be a mystery.
[00:52:09] <celphi> `body: JSON.stringify({test: 123})`
[00:52:16] <__adrian> so you're sending json?
[00:52:21] <celphi> yes
[00:52:27] <biberu> celphi: and to be clear i'm in no way suggesting that you do or suggest anything without knowing what you're doing, if you don't know then study :)
[00:52:32] <__adrian> json is not parsed into $_POST (or request or anything)
[00:52:49] <__adrian> you need to read it from input and decode it yourself
[00:53:32] <celphi> crap then that's prob my issue the
[00:53:42] <celphi> no prob biberu
[00:53:54] <__adrian> or more likely, if this is an existing system, there's something you don't know about and need to learn how it handles input
[00:53:56] <celphi> im doing a lot at once -
[00:54:28] <celphi> im going to try form object and see what happns
[00:56:17] <celphi> that was the issue
[00:56:22] <celphi> sigh all that time invested
[00:56:33] <biberu> not cors at all then? :)
[00:56:34] <celphi> had to use `$data = json_decode(file_get_contents('php://input'));`
[00:56:41] <celphi> bc it was json
[00:56:56] <celphi> i completely forgot about that
[00:56:58] *** Quits: onizu (uid373383@id-373383.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[00:57:18] <__adrian> is this an existing application you're working on?
[00:57:29] <__adrian> or is it something brand new you're creating?
[00:57:54] <celphi> existing site, but i am working on a new project that is branched off from main site
[00:58:11] <celphi> they added alias ^ my path
[00:58:16] <__adrian> then strongly recommend you go ASK about how it handles input. because it _probably does_.
[00:58:53] <celphi> it doesnt for the part of site im working on
[00:59:07] <celphi> i specifically had it route away from index.php
[01:05:38] *** Quits: lembron (~admin@user/lembron) (Remote host closed the connection)
[01:13:47] *** Quits: jeffrey (~jeffrey@84-107-68-141.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[01:51:01] *** Joins: inoas (~ionas@aftr-37-201-194-213.unity-media.net)
[01:51:09] *** Quits: Junxter (~Junxter@121.237.62.179) (Read error: Connection reset by peer)
[02:03:18] *** Quits: inoas (~ionas@aftr-37-201-194-213.unity-media.net) (Remote host closed the connection)
[02:07:40] *** Joins: DuckThom (~luna@2001:41f0:3fe:3:70cf:f123:6cb0:4b56)
[02:09:36] *** Joins: jetchisel (jetchisel@user/jetchisel)
[02:10:10] *** Quits: aloy (~luna@2001:41f0:3fe:3:308c:3f17:184d:3e90) (Ping timeout: 240 seconds)
[02:11:45] *** Joins: yurtan (~yurtan@123-243-165-224.static.tpgi.com.au)
[02:11:54] *** Quits: yurtan (~yurtan@123-243-165-224.static.tpgi.com.au) (Quit: Leaving)
[02:19:48] *** Joins: inoas (~ionas@aftr-37-201-194-213.unity-media.net)
[02:24:04] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[02:25:10] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Ping timeout: 240 seconds)
[02:27:10] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:30:21] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[02:35:25] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[02:37:33] *** Joins: keypusher (keypusher@user/keypusher)
[02:51:39] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Remote host closed the connection)
[02:57:13] *** Joins: Brion (~Brion@gateway/tor-sasl/brion)
[03:09:49] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Remote host closed the connection)
[03:15:14] *** Joins: Brion (~Brion@gateway/tor-sasl/brion)
[03:21:32] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Remote host closed the connection)
[03:27:12] *** Joins: Brion (~Brion@gateway/tor-sasl/brion)
[03:33:41] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 250 seconds)
[03:34:41] *** Joins: keypusher (keypusher@user/keypusher)
[03:42:40] *** Quits: pmercado (~pmercado@186.107.57.118) (Quit: Konversation terminated!)
[03:46:46] *** Joins: Tach (~Tach@user/tach)
[04:03:39] *** Joins: mutandis (~mut@c-73-129-211-144.hsd1.md.comcast.net)
[04:04:45] *** Quits: mutandis (~mut@c-73-129-211-144.hsd1.md.comcast.net) (Client Quit)
[04:10:47] *** Quits: inoas (~ionas@aftr-37-201-194-213.unity-media.net) (Remote host closed the connection)
[04:24:24] *** Joins: ferdna (~ferdna@user/ferdna)
[04:34:42] *** Joins: tone0 (~tone@071-011-252-111.res.spectrum.com)
[04:44:24] *** Quits: Tach (~Tach@user/tach) (Quit: Tach)
[04:58:46] *** Joins: Fedorasan (~fedorasan@user/fedorasan)
[05:10:01] *** Quits: shailangsa (~shailangs@host86-186-136-25.range86-186.btcentralplus.com) (Ping timeout: 248 seconds)
[05:17:49] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[05:18:25] *** Quits: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br) (Quit: Leaving)
[05:28:29] *** Joins: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br)
[05:29:33] *** Joins: Xatenev (~xatenev@user/xatenev)
[05:29:37] <Xatenev> hello
[05:29:51] <Xatenev> is there no way from a ZipArchive object to figure out the current file name / file path?
[05:29:57] <Xatenev> I don't find anything
[05:30:31] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[05:32:34] *** Joins: shailangsa (~shailangs@host86-185-102-120.range86-185.btcentralplus.com)
[05:34:29] *** Joins: vlm (~vlm@user/vlm)
[05:34:39] <Xatenev> ah
[05:34:40] <Xatenev> found it
[05:34:43] <Xatenev> theres just an attribute ->filename it seems
[05:34:44] <Blondie101010> Xatenev:  I don't understand what you mean
[05:34:53] <Xatenev> Blondie101010: https://www.php.net/manual/de/class.ziparchive.php#ziparchive.props.filename this one
[05:35:27] *** Quits: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net) (Ping timeout: 250 seconds)
[05:35:38] <Blondie101010> that's what you were looking for, the archive's name?
[05:35:40] <Xatenev> yep
[05:35:48] <Blondie101010> ok
[05:35:48] <Xatenev> i only looked through the methods and didn't check the attributes
[06:18:52] *** Quits: Fedorasan (~fedorasan@user/fedorasan) (Quit: Leaving)
[06:22:01] *** Quits: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br) (Quit: Leaving)
[06:28:02] <Xatenev> weird... unlink() fails in my php environment when running via php -S
[06:28:08] <Xatenev> but when i just type unlink into bash with my user it works
[06:28:22] <Xatenev> shouldn't php run under the exact same constraints when using php -S?
[06:29:44] <Blondie101010> not 100% sure but I don't think it's related
[06:29:51] <Blondie101010> do you have selinux or similar?
[06:30:06] <Xatenev> ubuntu
[06:30:09] <Blondie101010> did you check your audit logs
[06:30:17] <Xatenev> is there any way to get any kind of error message out of unlink
[06:30:18] <Xatenev> in php
[06:30:26] <Blondie101010> ok so apparmor is the one on Ubuntu normally
[06:30:32] <__adrian> !+error reporting
[06:30:32] <php-bot> Set `error_reporting = -1` in your php.ini (to see errors on your webpage, also set `display_errors = 1`) and be sure to restart your webserver/fastcgi-listeners. Using `ini_set()` and `error_reporting()` is less reliable - for example, in the case of parse errors. See https://php.net/errorfunc.configuration or "/msg php-bot error logging" for more.
[06:30:33] <Xatenev> it just returns false but no message or anything
[06:31:10] <__adrian> actually, might not be any error condition
[06:31:21] <__adrian> nope, i'm wrong. there will be a warning
[06:32:52] <Xatenev> ah i got a warning now, our own error handler didnt show it
[06:33:02] <Blondie101010> what is the warning?
[06:33:51] <Xatenev> Blondie101010: https://bpa.st/DE5A
[06:34:02] <Xatenev> line 3 is what i type into bash
[06:35:21] <Xatenev> weird
[06:35:52] <Blondie101010> did you check your logs?
[06:36:27] <Blondie101010> if you didn't do anything stupid it sounds like kernel level protection
[06:37:36] <Blondie101010> look at `dmesg`, /var/log/audit/audit.log, /var/log/syslog
[06:38:45] <Xatenev> ok i found it
[06:38:52] <Blondie101010> please share
[06:39:24] <Xatenev> i didn't call ziparchive->close(); so the newly created zip archive didn't save and didn't exist at that point. php calls ->close() at the end of the request automatically
[06:39:33] <Xatenev> so for me when it looked like it existed when i checked in bash after
[06:39:35] <Xatenev> ._.
[06:40:24] <Blondie101010> 0.0
[06:40:25] <Blondie101010> ok
[07:00:42] *** Quits: toretto (~ryan@user/toretto) (Ping timeout: 250 seconds)
[07:05:29] *** Joins: Rockwood (~Rocky@user/rocky)
[07:33:22] *** Parts: Xatenev (~xatenev@user/xatenev) ()
[07:36:27] *** Quits: Northwoods (~Northwood@103.223.8.125) (Ping timeout: 240 seconds)
[07:47:29] *** Quits: genomc (uid245282@id-245282.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[08:37:59] *** Joins: genomc (uid245282@id-245282.stonehaven.irccloud.com)
[08:38:19] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 250 seconds)
[08:41:42] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 245 seconds)
[08:47:36] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[08:52:50] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[08:58:34] *** Joins: guidoc (~guido@151.35.204.168)
[08:59:19] *** Quits: keypusher (keypusher@user/keypusher) (Ping timeout: 252 seconds)
[09:03:42] *** Quits: Poboy (~Poboy@user/poboy) (Quit: Client closed)
[09:40:01] *** Quits: epolanski (uid312403@id-312403.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[09:48:06] *** Joins: Akimb (~Akimb@82-135-197-171.static.zebra.lt)
[10:13:35] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[10:29:05] *** Joins: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com)
[11:07:28] *** Quits: tilde (~tilde@129.159.202.197) (Ping timeout: 252 seconds)
[11:10:53] *** Quits: guidoc (~guido@151.35.204.168) (Quit: WeeChat 3.2)
[11:22:47] *** Joins: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch)
[11:32:14] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Ping timeout: 244 seconds)
[11:32:28] *** Joins: MCMiic (~mcmic@176-149-85-231.abo.bbox.fr)
[11:38:12] *** Joins: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:44:29] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Quit: Quitting)
[11:46:11] *** Joins: night_wulfe_ (~wulfe@cpe-174-103-156-213.cinci.res.rr.com)
[11:48:43] *** Quits: night_wulfe (~wulfe@cpe-174-103-156-213.cinci.res.rr.com) (Ping timeout: 252 seconds)
[11:51:47] *** Joins: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3f1)
[11:52:11] *** DuckThom is now known as aloy
[11:53:16] *** Joins: mnx (mnx@user/mnx)
[11:53:21] *** Parts: mnx (mnx@user/mnx) (Bye)
[11:59:37] *** Quits: g0z (gauze@entropy.tmok.com) (Ping timeout: 248 seconds)
[12:00:24] *** Quits: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.2)
[12:00:54] *** Joins: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[12:00:56] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[12:04:04] *** Quits: B3k (~B3k@b3k.pl) (Ping timeout: 268 seconds)
[12:13:48] *** Joins: Norkle (~norkle@admin.nasa-g0v.com)
[12:30:51] *** Joins: inoas (~ionas@aftr-37-201-194-213.unity-media.net)
[12:49:34] *** Joins: WishBoy (~WishBoy@user/wishboy)
[12:59:01] *** Quits: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch) ()
[13:15:01] *** Joins: memoryleak (~memorylea@77-58-142-250.dclient.hispeed.ch)
[13:18:48] *** Quits: forgotmynick (uid24625@id-24625.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[13:23:16] *** Joins: jetchisel (~jetchisel@user/jetchisel)
[13:23:34] *** Quits: jetchisel (~jetchisel@user/jetchisel) (Client Quit)
[13:24:22] *** Joins: LucaTM (~LucaTM@user/lucatm)
[13:27:29] *** Joins: TheCapitalistPun (~Capitalis@liledevil.xs4all.nl)
[13:28:45] *** Quits: CapitalistPunk (~Capitalis@liledevil.xs4all.nl) (Read error: Connection reset by peer)
[13:30:33] *** Joins: Tach (~Tach@user/tach)
[13:37:16] *** Joins: jetchisel (jetchisel@user/jetchisel)
[13:44:28] *** Joins: onizu (uid373383@id-373383.highgate.irccloud.com)
[14:10:00] *** Joins: retrograde_ (retrograde@gateway/vpn/protonvpn/retrograde)
[14:11:34] *** Quits: SleePy (~SleePy@simplemachines/siteteam/SleePy) (Quit: I quit, that is all)
[14:11:43] *** Quits: shailangsa (~shailangs@host86-185-102-120.range86-185.btcentralplus.com) (Ping timeout: 252 seconds)
[14:11:57] *** Joins: SleePy (~SleePy@simplemachines/siteteam/SleePy)
[14:12:49] *** Quits: retrograde (retrograde@gateway/vpn/protonvpn/retrograde) (Ping timeout: 252 seconds)
[14:13:22] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Ping timeout: 252 seconds)
[14:25:04] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[14:39:12] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Remote host closed the connection)
[14:47:22] *** Joins: mishehu_ (~mishehu@2001:470:b9db:b00b::f36d:9d3)
[14:48:21] *** Quits: inoas (~ionas@aftr-37-201-194-213.unity-media.net) (Remote host closed the connection)
[15:03:36] *** Quits: MCMiic (~mcmic@176-149-85-231.abo.bbox.fr) (Read error: Connection reset by peer)
[15:15:31] *** Quits: Akimb (~Akimb@82-135-197-171.static.zebra.lt) (Read error: Connection reset by peer)
[15:18:17] *** Joins: Akimb (~Akimb@82-135-197-171.static.zebra.lt)
[15:19:11] *** Joins: keypusher (keypusher@user/keypusher)
[15:30:03] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[15:30:33] <kerunaru> Hi
[15:32:34] <kerunaru> It's been a while I don't connect to IRC. I'd lost all the freenode vs liberachat controversy
[15:37:06] <TinoDidriksen> A quite bizarre tale indeed.
[15:39:39] *** Quits: guidoc (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.2)
[15:46:39] *** Joins: bobdobbs (~user@150.107.174.237)
[15:46:39] *** Quits: WishBoy (~WishBoy@user/wishboy) ()
[16:00:25] *** Joins: mrtnt (~Martin@2001:ad0:1:1:da9e:f3ff:fe4a:8dd0)
[16:13:12] <mrtnt> I have a web application written in PHP which supports exporting data to CSV file. Part of this export function can be seen here: https://paste.debian.net/plainh/61048fbe What is weird is that the exported CSV file always contains one line with nothing more than a "Page 1:" and this line is followed by an empty line. What might cause such behavior? Could this be some sort of flushing issue?
[16:16:27] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 240 seconds)
[16:18:46] <TinoDidriksen> Paginating CSV files is weird in itself.
[16:19:25] <TinoDidriksen> And the fact that the page number starts at 1 instead of 0 is also odd. What API is that?
[16:20:44] <s17> https://www.php.net/manual/en/function.ob-end-clean.php
[16:20:46] <biberu> that code is full of scary side effects
[16:20:50] <Blondie101010> and the complaint is about line feeds which have not been included in the shown code, and the fact that they use ob_* for nothing..
[16:25:32] <Blondie101010> mrtnt:  either way, you should prepare the data first, and then output it...  that will make cleaner and therefore easier to troubleshoot code
[16:29:16] *** Joins: MCMiic (~mcmic@176.161.230.127)
[16:30:39] <onizu> hi
[16:30:53] <onizu> when JSON data is received via POST, why is it not showing in $_POST ?
[16:31:21] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[16:31:59] <onizu> I found it can be accessed using something as: 'php://input'
[16:33:24] <Blondie101010> what a discovery!
[16:34:08] <Blondie101010> how useful would it be if instead of putting carefully separated fields inside of $_POST, that we'd just throw the whole content to it?
[16:35:30] <TinoDidriksen> POST isn't just POST. There are several ways to encode the payload, though usually only form-data and raw are used. form-data will populate $_POST
[16:37:51] *** Joins: Anwar (~Anwar@5-12-45-0.residential.rdsnet.ro)
[16:40:31] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[16:44:21] *** Joins: epolanski (uid312403@id-312403.brockwell.irccloud.com)
[16:44:38] <mrtnt> TinoDidriksen: I don't know the API, but the CVS export functionality seems to be part of the Qcodo framework. The whole function can be seen here: https://paste.debian.net/hidden/208ddfd9/ The "print 'Page ' . $i . ': ';" line was added by me for debugging purposes.
[16:44:58] <Naktibalda> onizu: PHP knows how to decode url encoded data and multipart encoded data, it is up to you to decode other formats
[16:46:57] <onizu> Naktibalda: ok
[16:47:53] *** Parts: Anwar (~Anwar@5-12-45-0.residential.rdsnet.ro) ()
[16:49:25] <Blondie101010> mrtnt:  why send CSV instead of JSON?  why not extract the data to send before formatting it?
[16:52:33] *** Quits: CyberCr33p (~chris@bnc.cretaforce.gr) (Read error: Connection reset by peer)
[16:57:38] <mrtnt> Blondie101010: I guess the idea is that it's easy to import CSV files into MS Excel. Anyway, I'm not the author of this program. It's part of the open source Tracmor inventory management application.
[16:57:55] *** Joins: maroloccio (~marolocci@37.100.40.252)
[16:58:11] <Blondie101010> from the limited sample I can already tell it is of poor quality
[16:58:51] <Blondie101010> hopefully it at least does its job fine
[17:03:22] *** Joins: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566)
[17:03:35] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[17:05:44] <mrtnt> Blondie101010: I'm not sure if it is because of the framework, but the code seems to be very complicated/messy.
[17:06:05] <mrtnt> s17: where should I use the "ob_end_clean()"?
[17:09:21] <Blondie101010> I don't see any good reason to use OB there
[17:10:42] *** Quits: maroloccio (~marolocci@37.100.40.252) (Quit: WeeChat 3.0)
[17:11:33] *** Joins: maroloccio (~marolocci@37.100.40.252)
[17:14:55] <TinoDidriksen> The framework probably enables OB globally, so download handlers have to disable it.
[17:16:18] *** Quits: maroloccio (~marolocci@37.100.40.252) (Client Quit)
[17:16:37] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[17:16:51] *** Joins: guidoc (~guido@151.43.217.185)
[17:17:58] *** Joins: maroloccio (~marolocci@37.100.40.252)
[17:19:38] *** Joins: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl)
[17:20:41] *** Quits: Tach (~Tach@user/tach) (Quit: Tach)
[17:20:55] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[17:21:20] <biberu> if so that'd be better handled outside of the function that builds the csv
[17:21:44] <DrowningElysium> https://kopy.io/6MgCv#1hF114p1MpZbaA I want my toDatabase function to start storing every property in the class. It should work for child classes. How can I do this the best way? I was maybe thinking with reflection, but I am also reading stuff about serialization that I don't understand. Could anyone guide me in the right direction?
[17:22:35] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[17:22:40] <Blondie101010> don't store serialized data
[17:23:31] <biberu> is that site using dark red text on a black background?
[17:23:53] <DrowningElysium> Yeah, colour scheme might not be best for PHP
[17:24:12] <biberu> i'd have to set my display to match the surface of the sun to make out what it says
[17:24:14] <Blondie101010> store records in the relevant tables and assemble them when you load your objects
[17:25:01] <DrowningElysium> The thing is that this is a notification and it can store anything. It can store a name for display purposes, it can store an id to fetch later when actually sending the notification. So I just need to store that data
[17:25:16] *** Quits: Rubin (~rubin@2001:470:69fc:105::17e) (Quit: You have been idle for 30+ days)
[17:25:30] <DrowningElysium> And basically I wanna take away the manual work in this function
[17:25:34] *** Joins: Rubin (~rubin@2001:470:69fc:105::17e)
[17:25:35] *** Parts: Rubin (~rubin@2001:470:69fc:105::17e) ()
[17:28:04] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[17:28:53] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[17:29:53] *** Joins: Poboy (~Poboy@user/poboy)
[17:32:59] *** Joins: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br)
[17:34:49] *** Joins: shailangsa (~shailangs@host86-185-102-120.range86-185.btcentralplus.com)
[17:36:52] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[17:37:10] *** Joins: wovixo (~wovixo@128.104.205.49)
[17:45:01] *** Quits: scaleww (~scaleww@77-41-20-31.ftth.glasoperator.nl) (Quit: Leaving)
[17:45:24] *** Joins: Tach (~Tach@user/tach)
[17:46:12] *** Joins: pmercado (~pmercado@186.107.57.118)
[17:49:14] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[17:53:55] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[17:54:21] *** Quits: VectorX (~VectorX@user/vectorx) (*.net *.split)
[17:54:21] *** Quits: FatBoyXPC (~FatBoyXPC@user/fatboyxpc) (*.net *.split)
[17:54:21] *** Quits: Koopz (~Koopz@koopz.rocks) (*.net *.split)
[17:54:21] *** Quits: kantlivelong (~kantlivel@cpe-67-250-125-43.hvc.res.rr.com) (*.net *.split)
[17:54:21] *** Quits: Pokey (~pokey@spikeyCactus/hoosky) (*.net *.split)
[17:54:21] *** Quits: Bitflux (~byte@byteflux.net) (*.net *.split)
[17:54:21] *** Quits: ekneuss_ (~ekneuss@box.croustillant.ch) (*.net *.split)
[17:54:21] *** Quits: overrider (~overrider@user/overrider) (*.net *.split)
[17:54:21] *** Quits: mjh4386_ (~mjh4386@165.22.53.231) (*.net *.split)
[17:54:21] *** Quits: glider_ (~glider@user/glider) (*.net *.split)
[17:54:21] *** Quits: \mSg (~mSg@user/msg/x-0285936) (*.net *.split)
[17:54:21] *** Quits: d3sync (~d3sync@130.43.80.239.dsl.dyn.forthnet.gr) (*.net *.split)
[17:54:21] *** Quits: tccki (~tccki@box.webslate.co.nz) (*.net *.split)
[17:54:21] *** Quits: ekl (~ekl@user/ekl) (*.net *.split)
[17:54:21] *** Quits: Icedream (~icedream@hzn-b.serverkomplex.de) (*.net *.split)
[17:54:21] *** Quits: Vision (~Vision@024-178-231-173.res.spectrum.com) (*.net *.split)
[17:54:21] *** Quits: BigE (~biggie@user/bige) (*.net *.split)
[17:54:21] *** Quits: Blondie101010 (~Blondie10@user/blondie101010) (*.net *.split)
[17:54:21] *** Quits: Zauberfisch (~Zauberfis@cm83-180.liwest.at) (*.net *.split)
[17:54:21] *** Quits: celphi (uid97751@user/celphi) (*.net *.split)
[17:54:21] *** Quits: fjmorazan (~quassel@user/fjmorazan) (*.net *.split)
[17:54:21] *** Quits: Cork (~Cork@user/cork) (*.net *.split)
[17:54:21] *** Quits: thiccdaddy (~OwO@thiccdaddy.sexy) (*.net *.split)
[17:54:21] *** Quits: novns (~novns@user/novns) (*.net *.split)
[17:54:21] *** Quits: Stanley (~stanley@d162-156-50-3.bchsia.telus.net) (*.net *.split)
[17:54:21] *** Quits: nbin (~nbin@user/nbin) (*.net *.split)
[17:54:21] *** Quits: fkrauthan (~fkrauthan@user/fkrauthan) (*.net *.split)
[17:54:21] *** Quits: nuala (~nuala@user/nuala) (*.net *.split)
[17:54:21] *** Quits: NoiseEee (~NoiseEee@178.128.153.219) (*.net *.split)
[17:54:21] *** Quits: AllenJB (~AllenJB@user/allenjb) (*.net *.split)
[17:54:21] *** Quits: belak51 (~belak@user/belak) (*.net *.split)
[17:54:21] *** Quits: Woet (~me@irc.woet.me) (*.net *.split)
[17:54:21] *** Quits: wyre (~wyre@user/wyre) (*.net *.split)
[17:54:21] *** Quits: BukkitGerman (~BukkitGer@v2202101139897141171.quicksrv.de) (*.net *.split)
[17:54:22] *** Quits: s17 (~nobody@user/s17) (*.net *.split)
[17:58:11] *** Joins: ethoxy (~caretaker@cx21.havox.ru)
[17:58:39] *** Joins: kantlivelong (~kantlivel@cpe-67-250-125-43.hvc.res.rr.com)
[17:58:39] *** Joins: VectorX (~VectorX@user/vectorx)
[17:58:39] *** Joins: FatBoyXPC (~FatBoyXPC@user/fatboyxpc)
[17:58:39] *** Joins: Koopz (~Koopz@koopz.rocks)
[17:58:39] *** Joins: Pokey (~pokey@spikeyCactus/hoosky)
[17:58:39] *** Joins: Bitflux (~byte@byteflux.net)
[17:58:39] *** Joins: ekneuss_ (~ekneuss@box.croustillant.ch)
[17:58:39] *** Joins: overrider (~overrider@user/overrider)
[17:58:39] *** Joins: mjh4386_ (~mjh4386@165.22.53.231)
[17:58:39] *** Joins: glider_ (~glider@user/glider)
[17:58:39] *** Joins: \mSg (~mSg@user/msg/x-0285936)
[17:58:39] *** Joins: d3sync (~d3sync@130.43.80.239.dsl.dyn.forthnet.gr)
[17:58:39] *** Joins: tccki (~tccki@box.webslate.co.nz)
[17:58:39] *** Joins: ekl (~ekl@user/ekl)
[17:58:39] *** Joins: Icedream (~icedream@hzn-b.serverkomplex.de)
[17:58:39] *** Joins: Vision (~Vision@024-178-231-173.res.spectrum.com)
[17:58:39] *** Joins: BigE (~biggie@user/bige)
[17:58:39] *** Joins: Blondie101010 (~Blondie10@user/blondie101010)
[17:58:39] *** Joins: Zauberfisch (~Zauberfis@cm83-180.liwest.at)
[17:58:39] *** Joins: celphi (uid97751@user/celphi)
[17:58:39] *** Joins: fjmorazan (~quassel@user/fjmorazan)
[17:58:39] *** Joins: Cork (~Cork@user/cork)
[17:58:39] *** Joins: thiccdaddy (~OwO@thiccdaddy.sexy)
[17:58:39] *** Joins: novns (~novns@user/novns)
[17:58:39] *** Joins: Stanley (~stanley@d162-156-50-3.bchsia.telus.net)
[17:58:39] *** Joins: nbin (~nbin@user/nbin)
[17:58:39] *** Joins: fkrauthan (~fkrauthan@user/fkrauthan)
[17:58:39] *** Joins: nuala (~nuala@user/nuala)
[17:58:39] *** Joins: NoiseEee (~NoiseEee@178.128.153.219)
[17:58:39] *** Joins: AllenJB (~AllenJB@user/allenjb)
[17:58:39] *** Joins: belak51 (~belak@user/belak)
[17:58:39] *** Joins: Woet (~me@irc.woet.me)
[17:58:39] *** Joins: wyre (~wyre@user/wyre)
[17:58:39] *** Joins: BukkitGerman (~BukkitGer@v2202101139897141171.quicksrv.de)
[17:58:39] *** Joins: s17 (~nobody@user/s17)
[17:58:39] *** iridium.libera.chat sets mode: +v ekneuss_
[18:02:15] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[18:08:04] <mrtnt> Example of the report can be seen here: https://paste.debian.net/plainh/d8b8f635 I have no idea where those two newline characters(hex value 0a) are coming from..
[18:13:43] *** Joins: Jonny[5] (~Jonny5]@185.26.194.49)
[18:21:38] *** Quits: mIk3_08 (~Thunderbi@user/mik3-08/x-2852566) (Quit: mIk3_08)
[18:22:38] <biberu> mrtnt: what does PrintCsvRow do?
[18:22:45] *** Quits: Akimb (~Akimb@82-135-197-171.static.zebra.lt) (Read error: Connection reset by peer)
[18:23:29] <onizu> Blondie101010: how do you access request data received in JSON format in PHP?
[18:24:20] <biberu> onizu: php://input if it's in the request body
[18:25:16] <onizu> I mentioned that and he exclaimed rather shockingly
[18:25:28] <biberu> oh *scrolling back*
[18:25:32] <onizu> so I asked him how he would do it :)
[18:27:07] <biberu> i think he was being a bit sarcastic onizu
[18:27:19] <onizu> k nevermind
[18:27:31] <onizu> so php:://input is the best way?
[18:27:32] <mrtnt> biberu: this basically just prints the lines. Last line of the PrintCsvRow is "print $strColumnsHtml;". For debugging purposes I modified this line to "print '__' . $strColumnsHtml;" and it's clear that those newline characters are not coming from PrintCsvRow.
[18:28:41] <onizu> json_decode(file_get_contents('php://input'), true) ?
[18:31:58] *** Quits: fahrradToken (~fahrradTo@2a02:810b:149f:f0f4::3f1) (Remote host closed the connection)
[18:32:00] <biberu> mrtnt: perhaps they are coming from whatever $strColumnsHtml (which is an odd name for csv data) contains?
[18:34:04] <biberu> onizu: that's how i'd do it, but it's been a while since i did php so maybe there's something more built in these days
[18:34:43] <onizu> biberu: ok
[18:42:21] *** Joins: Fedorasan (~fedorasan@user/fedorasan)
[18:42:56] <mrtnt> biberu: this should not be possible. I even added a '$strColumnsHtml = str_replace("\r\n", "", $strColumnsHtml);' line before the print statement: https://paste.debian.net/plainh/d7e3ccd4
[18:44:45] <biberu> mrtnt: do you have a debugger?
[18:48:06] <Naktibalda> mrtnt: it doesn't remove \n if there is no \r before it
[18:49:50] *** Quits: Fedorasan (~fedorasan@user/fedorasan) (Quit: Leaving)
[18:49:59] <mrtnt> biberu: unfortunately not
[18:50:19] <mrtnt> Naktibalda: ok, thanks! I changed to "$strColumnsHtml = str_replace("\n", "", $strColumnsHtml);", but the issue remains
[18:50:34] *** Quits: BlueShark (sid10311@user/blueshark) ()
[18:50:46] <biberu> mrtnt: $strColumnsHtml = "foo";
[18:50:55] *** Joins: BlueShark (sid10311@user/blueshark)
[18:54:23] <mrtnt> biberu: then I still get those two '\n' characters
[18:54:50] <biberu> mrtnt: so that eliminated $strColumnsHtml
[18:54:58] <biberu> mrtnt: keep removing stuff
[19:01:48] <mrtnt> So if the lblExportCsv_Click() function looks like this: https://paste.debian.net/plainh/c8b81a94 .. and the last two lines of PrintCsvRow() are '$strColumnsHtml = "foo" . "\n";' and 'print $strColumnsHtml;', then the CSV file still includes the two '\n' characters: https://paste.debian.net/plainh/e62978b7
[19:06:49] <mrtnt> biberu: I'm not sure what else to remove there.. Perhaps it's related to those ob_flush() and flush() buffering functions. However, removing the "ob_flush()" or "flush()" does not seem to help either.
[19:06:59] <biberu> mrtnt: what is RenderCsvEnd?
[19:07:26] <biberu> also RenderCsvBegin
[19:07:42] <biberu> what if you comment those out?
[19:08:34] *** Joins: Janusz (~Janusz@user/janusz)
[19:08:37] <biberu> and there's something off about the order of things, you're printing the debug line with the ::s _after_ the data row, so there shouldn't be any ::s before the first one
[19:09:27] <biberu> is this function called several times for the export?
[19:09:41] <biberu> *wild guesses*
[19:13:05] *** Joins: inoas (~ionas@aftr-37-201-194-213.unity-media.net)
[19:17:31] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[19:19:34] <mrtnt> biberu: if I comment those two out, then the export to CSV stops working and I get the "ERR_EMPTY_RESPONSE" error message. I also changed the "print ':: ';" line to 'print "---" . "\n";' and the report now looks like this: https://paste.debian.net/plainh/97e6e7d7 At least for me it looks like those newline characters do not come from the foreach loop.
[19:22:33] <biberu> what are those functions doing then?
[19:23:19] *** Quits: celphi (uid97751@user/celphi) ()
[19:23:36] *** Joins: celphi (sid97751@user/celphi)
[19:26:58] <mrtnt> biberu: actually, it looks like those two newline characters *are* related to PrintCsvRow(). If I replace the '$this->PrintCsvRow($objObject);' line with 'print "foo" . "\n";' line, then those two problematic newline characters are no longer printed. Content of the PrintCSVRow() can be seen here: https://paste.debian.net/plainh/1ce660af
[19:30:07] *** Quits: Jonny[5] (~Jonny5]@185.26.194.49) (Quit: KVIrc 5.0.0 Aria http://www.kvirc.net/)
[19:31:25] <biberu> mrtnt: just on a phone atm, will check in later :)
[19:31:49] <mrtnt> biberu: of course. Thanks!
[19:32:25] *** Joins: Junxter (~Junxter@222.94.36.195)
[19:40:09] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[19:40:27] *** Joins: Akimb (~Akimb@86.100.13.100)
[19:44:32] *** Quits: Akimb (~Akimb@86.100.13.100) (Remote host closed the connection)
[19:44:55] *** Joins: Akimb (~Akimb@86.100.13.100)
[19:46:54] *** Quits: fury (uid193779@brockwell.irccloud.com) ()
[19:47:11] *** Joins: fury (uid193779@id-193779.helmsley.irccloud.com)
[19:52:43] *** Quits: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br) (Ping timeout: 252 seconds)
[19:57:45] *** Joins: genom (~g@37.214.44.252)
[20:00:51] *** Quits: MCMiic (~mcmic@176.161.230.127) (Quit: Konversation terminated!)
[20:01:03] *** Joins: olle (~olle@mue-88-130-56-098.dsl.tropolys.de)
[20:01:15] <olle> Did anyone here use the 4+1 view model system to document architecture?
[20:01:27] <olle> Hm, maybe better in #programming.
[20:05:56] *** Joins: mutandis (~mut@c-73-129-211-144.hsd1.va.comcast.net)
[20:14:41] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[20:16:51] *** Joins: mysteryhunter (~Mysteryhu@213-225-33-221.nat.highway.a1.net)
[20:16:54] *** Joins: WishBoy (~WishBoy@user/wishboy)
[20:33:04] <biberu> mrtnt: that code is very strange... but i don't see your newlines there either
[20:35:02] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Remote host closed the connection)
[20:37:03] *** Joins: harpia (~harpia@58.148.205.168.dynamic.vibefibra.com.br)
[20:38:21] <mrtnt> biberu: yes, it's a very strange issue. Even if I do this, then the two newlines are still in the CSV file: https://paste.debian.net/plainh/99c820e6
[20:38:55] <biberu> mrtnt: are they still there if you remove the call to PrintCsvRow?
[20:38:56] *** Joins: DevAntoine (~DevAntoin@195.101.183.21)
[20:38:58] *** Quits: DevAntoine (~DevAntoin@195.101.183.21) (Remote host closed the connection)
[20:39:06] *** mishehu_ is now known as mishehu
[20:40:16] <biberu> i don't know why that code is written the way it is, and this probably isn't something you can just change, but fwiw there are built in functions to write csv, e.g. php.net/fputcsv
[20:40:45] <biberu> or https://www.php.net/manual/en/splfileobject.fputcsv.php
[20:41:20] <mrtnt> if I remove(https://paste.debian.net/plainh/a90602bc) the call to PrintCsvRow, then the newlines are no longer there.
[20:41:36] <biberu> right, so some side effect in there
[20:41:47] <biberu> not unexpected since functions seem to print rather than return
[20:41:47] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Ping timeout: 240 seconds)
[20:42:04] <biberu> start removing stupp in PrintCsvRow then :)
[20:42:09] <biberu> stuff*
[20:47:01] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[20:52:07] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[20:54:56] *** Quits: inoas (~ionas@aftr-37-201-194-213.unity-media.net) (Remote host closed the connection)
[21:01:55] *** Joins: travisghansen (~travisgha@192.74.130.86)
[21:06:40] <mrtnt> biberu: does PHP support something like "suppress all output ON" and "suppress all output OFF"? If yes, then I could probably insert the "suppress all output ON" to the beginning of PrintCSVRow() and "suppress all output OFF" before the "print" statement at the end of the function.
[21:11:30] <biberu> mrtnt: there is e.g. the ob functions that you see in there, but it's weird to mix that responsibility with the CSV generation
[21:12:39] *** Quits: JohnDoe2 (~johndoe2@2001:470:1f07:89::dead:bead) (Quit: bye)
[21:13:20] *** Parts: olle (~olle@mue-88-130-56-098.dsl.tropolys.de) ()
[21:13:29] <biberu> mrtnt: another way to structure it would be to have something that formats the CSV, perhaps a generator if it's a lot of data, then to have whatever needs the CSV e.g. pipe it into a file or write it to an http response, that way the different responsibilities are clearer (and can change and be tested independently of each other)
[21:14:07] *** Quits: guidoc (~guido@151.43.217.185) (Read error: Connection reset by peer)
[21:17:17] <biberu> mrtnt: it might also be more flexible to map the fields before passing them to the CSV generator, if you e.g. need to trim, uppercase or do other transformations like that, and if you need to present it in an html context that's not a concern for the generator either, but rather a later step (not sure what your example is doing with those html
[21:17:17] <biberu> functions, on a phone again so it's hard to read)
[21:21:19] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[21:23:28] *** Quits: shailangsa (~shailangs@host86-185-102-120.range86-185.btcentralplus.com) (Ping timeout: 252 seconds)
[21:26:07] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 240 seconds)
[21:32:08] <mrtnt> biberu: ok, thanks! As a workaround, I placed "ob_start()" and "ob_end_clean()" before and after the "$strHtml = $this->objParentControl->ParseColumnCsv($objColumn, $objObject, true);" in PrintCSVRow(). This removes those two newline characters from the CSV file. I also tried to track down the ParseColumnCsv() function, but it keeps going to other functions and files..
[21:32:50] <biberu> mrtnt: a thought, your files aren't using ?> by any chance?
[21:32:57] <biberu> if so, try removing those
[21:33:37] <Sammitch> *outside of template code, ofc
[21:33:47] <biberu> ^
[21:34:40] <mrtnt> biberu: which files do you mean?
[21:35:04] <biberu> your source files
[21:35:21] <biberu> the non-template php code
[21:36:45] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[21:38:00] *** Joins: guidoc (~guido@151.57.180.148)
[21:38:33] <mrtnt> for example, the PHP source file containing those PrintCSVRow() or lblExportCsv_Click() includes the "<?php" at the beginning and "?>" at the end
[21:40:20] <biberu> that ending ?> means that any trailing text, e.g. whitespace, will be outputted when that file is included
[21:40:49] <Sammitch> "If a file contains only PHP code, it is preferable to omit the PHP closing tag at the end of the file. This prevents accidental whitespace or new lines being added after the PHP closing tag, which may cause unwanted effects because PHP will start output buffering when there is no intention from the programmer to send any output at that point in the script."
[21:40:54] <Sammitch> https://www.php.net/manual/en/language.basic-syntax.phptags.php
[21:41:06] <biberu> mrtnt: are there newlines after the closing tags too?
[21:41:21] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[21:42:49] <biberu> if so they might be caught in the buffering the CSV code is doing, and if so that's really two bugs rolled up into one: if the CSV had built strings directly instead of using outputted buffering it wouldn't have caught anything else, and without ?> those newlines wouldn't have been emitted
[21:43:31] *** Quits: yano (~yano@ircpuzzles/staff/yano) (Quit: WeeChat, the better IRC client, https://weechat.org/)
[21:43:39] <biberu> output buffering*, phone
[21:44:42] <Sammitch> mmmm output buttering
[21:45:02] <biberu> i prefer to butter my input
[21:45:31] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[21:46:38] *** Parts: mysteryhunter (~Mysteryhu@213-225-33-221.nat.highway.a1.net) (Leaving)
[21:46:45] *** Joins: yano (~yano@ircpuzzles/staff/yano)
[21:47:37] *** Joins: JohnDoe2 (~johndoe2@2001:470:1f07:89::dead:bead)
[21:49:51] <biberu> mrtnt: did you try removing the ?>?
[21:50:07] <mrtnt> biberu, Sammitch: ok, thanks! I think because of the Qcodo framework there are hundreds of php files and I have already found several ones which include newlines after the "?>". If this is the root cause, then should I remove the "?>" from the PHP files or it doesn't matter and I could keep using the "ob_start()"/"ob_end_clean()" workaround?
[21:50:45] <biberu> mrtnt: see if it's enough to remove the one in the CSV file to start with
[21:52:12] <biberu> is Qcodo maintained by someone? perhaps they'd like to know about ?> in that case
[21:56:05] *** Joins: Cyberg33k (~Cybergeek@2001:678:9ec:ff04:4811:692c:1801:c0f)
[22:01:36] *** Joins: ash_worksi (~ash_m@user/ash-m/x-3292451)
[22:02:24] *** Quits: Akimb (~Akimb@86.100.13.100) (Read error: Connection reset by peer)
[22:02:27] *** Joins: joo (~joo@fsf/member/joo--)
[22:03:42] <ash_worksi> stupid question: what's the best way to remove an element from an array of objects where the array value is the same as a provided object (ie: where $arr[$n] == $providedObj )
[22:03:49] <ash_worksi> array_filter?
[22:04:09] <__adrian> you probably want === if it's an object
[22:04:44] <ash_worksi> oh, hmm
[22:05:28] <__adrian> well, maybe. be aware.
[22:05:50] <__adrian> https://php.net/oop5.object-comparison
[22:06:20] <ash_worksi> this would seem to imply I dont: https://3v4l.org/GdRt5
[22:06:45] <__adrian> see above
[22:06:47] <ash_worksi> like, I don't want them to be the same instance, which I guess is what that's checking
[22:06:51] * ash_worksi checkin
[22:06:55] <__adrian> depends on if you want "same instance" vs. "same values"
[22:07:24] <ash_worksi> yeah, values
[22:07:36] <ash_worksi> one is going to be parsed from user input
[22:07:36] <__adrian> k
[22:07:47] <ash_worksi> the other is constructed from database values
[22:08:15] <biberu> twist: the user input is using another unicode normalization form
[22:08:32] <biberu> :>
[22:08:44] <ash_worksi> biberu: that'd be part of sanitation and normilizaton
[22:08:56] <__adrian> would  :)
[22:09:02] <biberu> indeed, just checking that it is :)
[22:09:13] <mrtnt> biberu: I tried to remove the "?>" from the php file where the PrintCSVRow() or lblExportCsv_Click() functions are defined, but this did not help. I'll try to dig deeper, but there are a lot of php files and I have no idea what is included where. In a meanwhile, I'll keep the "ob_start()"/"ob_end_clean()" workaround in place.
[22:09:15] <ash_worksi> anyway, array_filter(fn($obj) => $obj != $providedObj, $objs); ?
[22:10:39] <ash_worksi> or, foreach ($objs as $i => $obj) if ($obj == $providedObj) { unset($objs[$i]); break; } } ?
[22:10:50] <mrtnt> biberu: thanks for the help!
[22:10:51] <biberu> mrtnt: good luck with the digging :)
[22:10:54] <biberu> np
[22:11:06] <__adrian> those could potentially give different results
[22:11:14] <ash_worksi> oh?
[22:11:29] <ash_worksi> because filter will remove all of them
[22:11:31] <ash_worksi> ?
[22:11:34] <__adrian> yes
[22:11:37] <ash_worksi> hmm
[22:11:50] <ash_worksi> I don't think it's possible from the design that there'd be dupes
[22:11:54] <__adrian> whether that will ever _actually_ be a problem is another question, but it's there
[22:12:02] <ash_worksi> right
[22:12:18] <ash_worksi> well, the first thing my mind jumped to was array_splice
[22:12:43] <ash_worksi> so my gut is telling me to rebuild the array in one way or another I guess
[22:12:58] <__adrian> filter vs. foreach is pretty even; i wouldn't use splice
[22:12:58] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 252 seconds)
[22:13:18] <ash_worksi> I suppose array_filter works
[22:13:21] <__adrian> it's just less clear
[22:15:34] <ash_worksi> in_array($obj, $objs) would comare using $objA == $objB right? (unless strict)
[22:22:44] *** Joins: inoas (~ionas@aftr-37-201-194-213.unity-media.net)
[22:34:28] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[22:41:31] *** Quits: Norkle (~norkle@admin.nasa-g0v.com) (Quit: Lost terminal)
[22:48:17] *** Joins: Fedorasan (~fedorasan@user/fedorasan)
[22:56:55] *** Quits: maroloccio (~marolocci@37.100.40.252) (Quit: WeeChat 3.0)
[22:58:41] *** Joins: Akimb (~Akimb@86.100.13.100)
[23:01:14] *** Quits: Fedorasan (~fedorasan@user/fedorasan) (Quit: Leaving)
[23:13:24] *** Joins: freeworld (~vit@chello085216193138.chello.sk)
[23:23:29] <ash_worksi> array_intersect($storeObjs, $providedObjs) throws an error that it's trying to convert to string. `array_intersect()` doesn't use `$objA == $objB` ?
[23:23:40] <ash_worksi> it tries to cast first?
[23:24:01] <__adrian> > Note: Two elements are considered equal if and only if (string) $elem1 === (string) $elem2. In words: when the string representation is the same.
[23:24:12] <__adrian> most of them work like that
[23:24:29] <ash_worksi> I see
[23:24:56] <ash_worksi> so if I want to intersect on `$objA == $objB` I'll have to use two loops?
[23:25:17] <__adrian> or make them __toString()able
[23:26:00] <ash_worksi> I suppose I could just implode the fields
[23:26:08] <__adrian> and no, one loop
[23:26:26] <__adrian> array_intersect($a,$b) is not the same as ($b,$a)
[23:26:59] <__adrian> legit encode them somehow, don't just implode fields
[23:27:00] <TernaryOperator> ^ there are a bunch of third party libraries that offer a saner intersect
[23:28:23] <TernaryOperator> also depending on what you are doing Ds\Set::intersect might be an option
[23:28:37] * TernaryOperator hopes that php-ds catches on, in a bunch of ways it's more sane
[23:29:00] <TernaryOperator> ash_worksi: https://www.php.net/manual/en/ds-set.intersect.php
[23:29:52] <TernaryOperator> the linked blog post is also a really good intro to "but...why?" https://medium.com/@rtheunissen/efficient-data-structures-for-php-7-9dda7af674cd
[23:29:55] <ash_worksi> __adrian: like using serialize()?
[23:30:16] <ash_worksi> TernaryOperator: thanks I'll take a look at it
[23:31:44] *** Quits: Akimb (~Akimb@86.100.13.100) (Read error: Connection reset by peer)
[23:44:45] *** Joins: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net)
[23:54:21] *** Joins: olle (~olle@mue-88-130-56-098.dsl.tropolys.de)
[23:54:23] *** Quits: kerunaru (~Jmcb@64.red-79-146-101.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[23:54:28] <olle> Are namespace in PHP implemented using prefixing?
[23:57:14] *** Quits: WishBoy (~WishBoy@user/wishboy) (Quit: reconnect)
[23:58:28] *** Joins: Northwoods (~Northwood@103.223.8.125)
[23:59:41] *** Joins: maroloccio (~marolocci@37.100.40.252)
