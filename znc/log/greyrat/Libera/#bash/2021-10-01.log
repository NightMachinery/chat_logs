[00:00:38] <earendel> exact line: for f in !(**/*.*); do [ ! -d "$f" ] && printf '%s\n' "$f"; done .. better?
[00:01:01] <tirnanog> yes. however, as this is bash code by definition, consider using [[.
[00:01:41] <earendel> u never use test or [?
[00:01:47] <earnestly> Not in bash
[00:02:03] <earendel> why?
[00:02:11] <tirnanog> ![vs[[
[00:02:12] <greybot> '[', also known as 'test' is the POSIX variant of [[. [ does NOT support ==, =~, &&, ||, glob pattern matching; unquoted > and < will do file redirection instead of comparison, etc. See http://mywiki.wooledge.org/BashFAQ/031
[00:02:37] <tirnanog> in short, there is no utility in doing so. I can think of only one use case and it's so obscure, I don't even feel like spelling it out.
[00:02:45] <earnestly> But as I stick mostly to POSIX, I do use [.  But when I use bash, I use [[ because it's better in every way
[00:02:47] <tirnanog> moreover, the problem would not have occured had you done so.
[00:04:34] <earendel> using [[ i can use -d ... without quotes on $f
[00:04:59] <earendel> or even have to?
[00:05:01] *** Joins: m0viefreak (~asdf@user/m0viefreak)
[00:05:12] <earnestly> Yes, you don't need quotes in that case
[00:05:25] <llua> you should still do so since you don't seem to understand the importance of it, to form a habit.
[00:05:38] <earendel> tirnanog: yes. i want to understand what im doing. sometimes.
[00:05:46] <earnestly> Only the RHS of a comparison inside [[ need be quoted because it may be interpreted as a pattern otherwise
[00:06:36] <earendel> llua: wouldn't it break when using = with regexp inside [[ ]] ?
[00:06:37] <earnestly> Although people do this explicitly when using =~ regex
[00:06:52] *** Joins: zeden (~zeden@user/zeden)
[00:06:59] <earnestly> (As otherwise the quoting becomes obnoxious)
[00:07:13] <llua> earnestly: yes it would
[00:07:18] <llua> whoops
[00:07:19] *** Quits: cebor (~cebor@user/cebor) (Quit: bye!)
[00:07:23] <llua> earendel: ^
[00:07:53] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[00:08:07] <earendel> so why are you suggesting i should always use quotes.
[00:08:11] *** Joins: cebor (~cebor@user/cebor)
[00:08:22] <earendel> that's a rhetoric question.
[00:08:53] <earnestly> There's a school of thought that says it's better to quote everything and deal with the rare case it matters, than to not properly quote at all
[00:09:14] *** Joins: Nintendo (~smb3@user/great)
[00:09:25] <earnestly> "Defensive programming"
[00:09:25] <llua> because when you use it in a spot that it isn't desired, stuff breaks immediately most likely versus not quoting and inducing subtle bugs
[00:09:33] <earendel> you're in that school.
[00:09:38] *** Joins: seninha (~seninha@user/seninha)
[00:09:41] <tirnanog> it's a reasonable way of thinking. once you are more adept with the shell, you'll know when and where it is not required to do so and can do as you like.
[00:10:11] *** Quits: seninha (~seninha@user/seninha) (Remote host closed the connection)
[00:10:34] <earendel> a pity it didn't work.
[00:10:55] <earnestly> It's the old 'look before you leap / he who hesitates is lost'
[00:10:57] *** Quits: tobybl_ (~tobybl@31.111.35.255) (Remote host closed the connection)
[00:11:03] <earendel> why are you still talking
[00:11:21] <earnestly> Nobody talks on irc, it's text
[00:11:46] <earendel> i think you mean speaking.
[00:12:05] <llua> this is why you were banned for awhile
[00:13:55] <tirnanog> in any case, it won't work as expected. this much is true. you'll likey need !(*.*) **/!(*.*) instead.
[00:14:13] <earendel> oh. thx
[00:14:23] <tirnanog> and, given the use of recursion, find begins to seem all the more appealing than ever.
[00:15:02] <tirnanog> as an aside, ** is only useful where globstar is enabled.
[00:15:51] *** Joins: peterrooney (~peter@2604:3d08:1583:7400:dabb:c1ff:fe15:d704)
[00:18:31] *** Quits: zouhair (~zouhair@lnsm3-montreal02-142-118-81-154.internet.virginmobile.ca) (Ping timeout: 250 seconds)
[00:20:46] *** Joins: zouhair (~zouhair@142.182.58.252)
[00:21:31] <earendel> which is enabled via shopt something?
[00:21:38] <tirnanog> yes.
[00:21:56] *** Parts: anddam (~anddam@user/anddam) (WeeChat 3.3)
[00:23:45] *** Quits: nyex (~Thunderbi@177.84.107.26) (Quit: nyex)
[00:24:11] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Read error: Connection reset by peer)
[00:24:23] *** Joins: BSaboia (~bsaboia@177.37.198.122)
[00:24:50] <geirha> # shopt globstar
[00:24:51] <shbot7> geirha: globstar        on
[00:25:13] <Nintendo> Debugging cron jobs sucks because of the 60-second wait interval.
[00:25:25] <earendel> can i set shopt locally? like in a function?
[00:25:48] <Nintendo> It's just long enough to be annoying but too short to do anything useful.
[00:25:49] <geirha> Nintendo: you can simulate with env -i to fix most of the quirks
[00:25:58] *** Quits: flous_ (~undervolt@2a02:a213:2901:5c00:3ca2:52c1:4139:683f) (Remote host closed the connection)
[00:26:18] *** Quits: y04nn (~y04nn@193.32.127.238) (Ping timeout: 260 seconds)
[00:26:26] <e36freak> earendel: depending on the shopt you want to set, it may have to be set on its own line before the line you want to use it for is parsed
[00:26:26] <earnestly> Look into snooze(1) when you get the chance
[00:26:55] <geirha> i.e. run a job  * * * * * env > /tmp/env   to see the env provided by cron, then recreate it with  env -i PATH=/usr/bin:/bin HOME="$HOME" etc... sh -c 'your cronjob'
[00:27:00] <e36freak> earendel: and given that functions are read in their entirety before anything is executed, they won' twork there
[00:27:15] <Nintendo> That's a good tip, geirha.  The crontab assigns a bunch of environment variables, but I should have rigged something up regardless.
[00:27:30] <Nintendo> Ahh, now I see what you mean.
[00:27:36] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[00:27:41] <Nintendo> That's as close to perfect as it gets.  Thank you.
[00:27:44] <Nintendo> I am glad I bitched ;)
[00:28:37] <earnestly> geirha: (This is how I hacked together a gpg keyserver in bash lol)
[00:28:41] <earendel> with all that switches i wonder how u can expect scripts to behave consistently
[00:28:57] <earendel> e36freak: odd
[00:29:00] <geirha> and    </dev/null 2>&1 | cat     in case the cronjob does isatty(3)
[00:29:29] *** Quits: forgotmynick (uid24625@id-24625.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[00:29:33] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[00:30:34] *** Joins: tobybl (~tobybl@31.111.35.255)
[00:31:28] *** Joins: totenkoph (~scythe@user/totenkoph)
[00:33:32] *** Joins: jkwnki (~jkwnki@p4ff31b54.dip0.t-ipconnect.de)
[00:34:48] <wwilliam> !ssh
[00:34:49] <greybot> Secure SHell (#openssh, http://mywiki.wooledge.org/CategorySsh). To run rm "$localVar" remotely, use: printf 'rm %q\n' "$localVar" | ssh user@host bash
[00:34:53] *** Quits: paulgrmn (~paulgrmn@user/paulgrmn) (Remote host closed the connection)
[00:35:25] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a) (Ping timeout: 250 seconds)
[00:35:43] <tirnanog> earendel: the effect cannot be formally localised. doing it in a subshell is one option, or simply toggling it off when you're done. shopt -q globstar is a way of knowing whether the option was already enabled, by way of the exit status.
[00:37:27] <tirnanog> # f() ( shopt -s globstar; ); shopt -u globstar; f; shopt globstar
[00:37:29] <shbot7> tirnanog: globstar        off
[00:37:45] *** shbot7 is now known as shbot
[00:37:45] <tirnanog> can't always use a subshell, though. depends on what you're doing.
[00:39:18] *** Joins: tangyQED (~tangy@user/tangy)
[00:39:21] *** Quits: tangy (tangy@user/tangy) (Quit: Quit)
[00:39:32] *** Quits: tangyQED (~tangy@user/tangy) (Remote host closed the connection)
[00:39:39] *** Quits: tobybl (~tobybl@31.111.35.255) (Remote host closed the connection)
[00:39:50] *** Joins: tangy (~tangy@user/tangy)
[00:39:56] *** Quits: tangy (~tangy@user/tangy) (Remote host closed the connection)
[00:40:53] *** Quits: setesat (~setesat@94.4.156.220) (Ping timeout: 264 seconds)
[00:42:22] *** Quits: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66) (Remote host closed the connection)
[00:43:39] *** Joins: tangy (~tangy@user/tangy)
[00:44:47] <earendel> i thought functions are run in a subshell.
[00:45:25] *** Quits: Baggypants (~baggypant@cpc94362-ward12-2-0-cust376.10-2.cable.virginm.net) (Ping timeout: 265 seconds)
[00:45:26] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 260 seconds)
[00:45:45] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[00:45:48] *** Joins: Lord_of_Life (~Lord@user/lord-of-life/x-2819915)
[00:46:33] <earendel> and toggling it off would overwrite a previous setting ..anyways.
[00:47:12] *** Joins: Baggypants (~baggypant@cpc94362-ward12-2-0-cust376.10-2.cable.virginm.net)
[00:48:13] <tirnanog> not normally. perhaps you are accustomed to using them inside a $(command substitution).
[00:48:36] *** Joins: lavaball (felix@31.204.155.215)
[00:50:22] *** Quits: kj (~kj@beta.aerisnetwork.net) (Ping timeout: 252 seconds)
[00:50:31] *** Quits: userdocs (~userdocs@95.179.142.23) (Ping timeout: 252 seconds)
[00:56:58] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Ping timeout: 252 seconds)
[00:58:30] <earendel> # f() { echo "<$blah>"; }; blah="test" f; echo "[$blah]"
[00:59:09] <shbot> earendel: <test>
[00:59:09] <shbot> earendel: []
[00:59:37] <wwilliam> how to ssh to a server within a script do some commands and see output on the screen I am doing this and of course is not working.
[00:59:38] <earendel> seems they are though.
[01:00:20] <wwilliam> https://paste.debian.net/1213914/
[01:00:58] <tirnanog> earendel: erroneous conclusion. you used a simple command form whereby an environment variable is defined only for the invocation of the function.
[01:01:34] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb)
[01:01:38] <tirnanog> # f() { echo "$$ $BASHPID"; }; echo "$$ $BASHPID"; f
[01:01:58] <shbot> tirnanog: 44 44
[01:01:58] <shbot> tirnanog: 44 44
[01:02:04] <tirnanog> # f() ( echo "$$ $BASHPID"; ); echo "$$ $BASHPID"; f
[01:02:06] <shbot> tirnanog: 44 44
[01:02:06] <shbot> tirnanog: 44 51
[01:05:44] *** Quits: BSaboia (~bsaboia@177.37.198.122) (Quit: This computer has gone to sleep)
[01:07:47] <earendel> !subshell
[01:07:47] <greybot> http://mywiki.wooledge.org/SubShell
[01:09:43] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[01:13:33] *** Joins: kj (~kj@kj.aerisnetwork.net)
[01:13:36] <tirnanog> wwilliam: the quoting is all over the place. for a start, the $(command substitution) will be expanded locally.
[01:14:38] *** Joins: BSaboia (~bsaboia@177.37.198.122)
[01:15:49] <tirnanog> secondly, the composition is such that you are effectively doing this: var="double quoted context" (whoopsee, now there's some unquoted whitespace resulting in a split) "oh, and now we begin another double quoted context here ..."
[01:15:56] <tirnanog> you don't 'nest' double quotes.
[01:16:12] <tangy> wwilliam: '-execdir' is recommended by `man find` for avoiding race conditions
[01:16:13] <tirnanog> I'll just suggest a heredoc with a single-quoted identifier.
[01:16:49] <tirnanog> seeing as your SCRIPT doesn't otherwise need to make use of stdin.
[01:19:25] <tirnanog> wwilliam: https://termbin.com/sk61
[01:19:54] *** Joins: hqdruxn08 (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com)
[01:19:55] *** Joins: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net)
[01:20:38] <tangy> wwilliam: also, `man find` suggestes the '{}' of find's '-exec' be single quoted to avoid interpretation by the shell
[01:20:56] <tirnanog> that's nonsense though, really.
[01:21:22] <earendel> each process creates a fd somewhere .. right?  where exactly?
[01:21:26] <tirnanog> I've always found that part of the GNU documentation risible. no shell that's even tangientally related to the bourne family treats {} as anything other than {}.
[01:21:58] <tirnanog> and if you're using something else entirely well, you need to know how it works. {} isn't a special snowflake in that case.
[01:23:57] *** Quits: hqdruxn08_ (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com) (Ping timeout: 250 seconds)
[01:24:22] <tangy> yeah, I haven't ever had a problem with an unquoted {} myself, but I don't use ssh very often, so. anyway, reading the man pages is something I like to encourage
[01:24:41] <tirnanog> of course. that part just happens to be a pet peeve.
[01:25:08] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Ping timeout: 250 seconds)
[01:25:09] <tangy> and why do cats have to pee in drawers, huh?
[01:25:16] <tangy> I swear
[01:25:32] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb) (Ping timeout: 265 seconds)
[01:26:04] <tirnanog> because, then, you might as well have a disclaimer for every single parameter documented by every single application that you need to know how your shell works if you happen to be invoking it from a shell. it goes without saying. it's so weird that they single out {}.
[01:26:23] <tirnanog> my best guess is that someone was thinking of brace expansion, but {} isn't a brace expansion.
[01:26:43] <tirnanog> and it's not implemented by sh anyway.
[01:29:23] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:29:38] <tangy> the next kitten is named parameter. ...subject to veto
[01:29:41] <tirnanog> the worst thing about it is that it inspires legions of simpletons to believe that quoting {} is somehow pertinent to how the argument is treated in the course of find internally executing the given command.
[01:29:46] <llua> % alias -g '{={ echo hi'
[01:29:48] <llua> % {}
[01:29:51] <llua> hi
[01:30:10] *** Quits: Seirdy (~Seirdy@sourcehut/user/seirdy) (Quit: exiting 3.2)
[01:30:12] <tirnanog> I've tried to explain that to people in #linux in the past and they just don't listen, generally.
[01:30:37] <tirnanog> "but what if it contains spaces".
[01:30:45] <tangy> command shadowing, is a thing, in fact
[01:30:51] <earendel> what is {}?
[01:31:27] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.3)
[01:31:49] <tirnanog> an argument that informs find as to where it should position the pathname in the course of composing an argument vector before executing a sub-process, at the behest of the -exec or -execdir option.
[01:32:08] <earnestly> Hmmmmm.
[01:32:21] <tirnanog> or pathnames, as the case may be.
[01:32:46] *** Quits: elena_re (~elena@178.176.79.2) (Ping timeout: 252 seconds)
[01:34:36] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[01:35:15] <earendel> !{
[01:35:15] <greybot> Command grouping. Like (), but doesn't spawn a subshell. See http://mywiki.wooledge.org/BashGuide/CompoundCommands#Command_grouping
[01:35:39] *** Quits: m0viefreak (~asdf@user/m0viefreak) (Remote host closed the connection)
[01:36:22] <xx> if I want to redefine IFS for just one command in a function, do I wrap that command in a subshell with IFS in it?
[01:36:41] <earendel> #f () echo "test"; f
[01:36:49] <tirnanog> IFS= yourcommand
[01:36:49] <earendel> # f() echo "test"; f
[01:36:51] <shbot> earendel: bash: syntax error near unexpected token `echo'
[01:36:56] <earnestly> tirnanog: Does GNU allow you to place something between {} and + for -exec?
[01:36:57] <geirha> xx: yes, or just unset it after
[01:37:10] *** Joins: mestre (~mestre@191.177.175.57)
[01:37:10] <tirnanog> earnestly: no.
[01:37:25] <earnestly> But it does allow multiple uses of {} for ; iirc
[01:37:50] <earnestly> It's funny how POSIX defines pathnames containing {} may be expanded depending on implementation
[01:38:03] <geirha> xx: and unless you need IFS later in the function, it's enough to just make it local@
[01:38:08] <geirha> -@
[01:38:11] <earendel> how to set IFS to \n ?
[01:38:17] <xx> geirha: that sounds complicated
[01:38:18] <geirha> IFS=$'\n'
[01:38:24] <tirnanog> earnestly: yes, it does. curious.
[01:38:44] <earnestly> At some point the consequences be damned
[01:38:59] <akoana> # touch "a b" "a b".c; find . -name 'a b' -exec wc -c {} {}.c \;
[01:39:02] <shbot> akoana: 0 ./a b
[01:39:02] <shbot> akoana: 0 ./a b.c
[01:39:02] <shbot> akoana: 0 total
[01:39:02] *** Joins: setesat (~setesat@94.4.156.220)
[01:39:20] <geirha> # f() { local IFS=, row=(one two); printf '%s\n' "${row[*]}"; }; f; printf 'IFS=%s\n' "${IFS@Q}"
[01:39:21] <shbot> geirha: one,two
[01:39:21] <shbot> geirha: IFS=$' \t\n'
[01:39:26] <xx> # f() { (IFS=0; echo "hi") }; f; echo "$IFS"
[01:39:27] <shbot> xx: hi
[01:39:32] <xx> is what I tried
[01:39:42] <geirha> that works too
[01:39:49] <earendel> geirha: hm. what kind of expression is $'\n'
[01:39:55] <geirha> !$'
[01:39:55] <greybot> bash has a special form of quoting, $'string' in which backslash-character combinations are expanded. For example, IFS=$' \t\n' or echo $'It\'s embedded!' http://mywiki.wooledge.org/Quotes
[01:40:12] <earendel> thanks.
[01:40:28] <emanuele6> # row=(one two); IFS=, eval 'printf %s\\n "${row[@]}"'; declare -p IFS
[01:40:35] <shbot> emanuele6: one
[01:40:35] <shbot> emanuele6: two
[01:40:35] <shbot> emanuele6: etc... ( http://ix.io/3Asd )
[01:40:41] *** Joins: seninha (~seninha@user/seninha)
[01:40:42] <emanuele6> oops
[01:40:42] <earnestly> xx: Using local obviates the need to fork a subshell but would be necessary if you were writing sh.  In such cases though I just use `unset IFS' to restore the defaults
[01:40:43] <tirnanog> *, not @.
[01:40:47] <emanuele6> # row=(one two); IFS=, eval 'printf %s\\n "${row[*]}"'; declare -p IFS
[01:40:48] <shbot> emanuele6: one,two
[01:40:48] <shbot> emanuele6: declare -- IFS="
[01:40:48] <shbot> emanuele6: "
[01:41:10] <emanuele6> (bash only)
[01:41:29] <earendel> yay. how is that working.
[01:41:38] <geirha> magic
[01:41:48] <geirha> much bash, very magic
[01:41:48] <emanuele6> sorcery
[01:42:05] *** Joins: timj (~timj@user/timj)
[01:42:15] <geirha> # type eval
[01:42:16] <tirnanog> sh# f() { printf %s\\n "$*"; }; IFS=, f one two
[01:42:18] <shbot> geirha: eval is a shell builtin
[01:42:18] <shbot> tirnanog: one,two
[01:42:21] *** Quits: timj1 (~timj@user/timj) (Quit: Leaving.)
[01:42:23] <xx> # f() { IFS=0; echo "hi"; unset IFS }; f; echo "$IFS"
[01:42:30] <shbot> xx: Missing terminating quote, bracket or keyword
[01:42:42] <mcint> for use of history - i want to have access to it in an 1-action interactive command... edit it to save with notes.  i think i need to have read/readline read from a history file, but i don't see how to do that
[01:42:48] <earnestly> tirnanog: Nice too
[01:42:50] <emanuele6> xx: IFS's default value is not unset
[01:42:59] <emanuele6> # echo "${IFS@Q}"
[01:43:00] <shbot> emanuele6: $' \t\n'
[01:43:20] <geirha> but it will behave the same as default value when unset, but "$IFS" will still expand empty
[01:43:40] <xx> emanuele6: really?
[01:44:01] <emanuele6> yeah, it's "space" "tab" "linefeed" as you can see
[01:44:06] <xx> # echo -n $IFS | hd
[01:44:07] <shbot> xx: bash: hd: command not found
[01:44:12] <emanuele6> # echo "${IFS@Q}"
[01:44:13] <earnestly> xx: od(1)
[01:44:14] <shbot> emanuele6: $' \t\n'
[01:44:44] <earnestly> # unset IFS; printf %q "$IFS"
[01:44:45] <shbot> earnestly: ''
[01:44:53] <earnestly> emanuele6: This is what geirha was refering to
[01:45:07] <geirha> "${IFS-$' \t\n'}"
[01:45:08] <xx> huh, thanks
[01:45:26] *** Quits: oprypin (~irc@pryp.in) (Quit: Bye)
[01:45:35] *** Joins: oprypin (~irc@pryp.in)
[01:45:47] <earendel> what pake in the wiki lists all that var expansion possibilities
[01:45:53] <earnestly> There may be some bourne shell out there that doesn't behave as though unset IFS resets it to its default value (internally or otherwise), but I don't care about those shells
[01:45:55] *** Joins: elena_re (~elena@178.176.79.2)
[01:45:57] <geirha> you rarely want to output "$IFS" though, so that edge case is not really a problem
[01:46:38] <geirha> as long as you don't also use code that does the silly oldIFS=$IFS; ...; IFS=$oldIFS thing
[01:47:08] *** Quits: mihaiadrian (~Thunderbi@92.81.30.221) (Quit: mihaiadrian)
[01:48:03] *** Joins: y04nn (~y04nn@193.32.127.238)
[01:49:09] *** Quits: mestre (~mestre@191.177.175.57) (Quit: leaving)
[01:49:34] *** Quits: dix_ (~super@user/dix) (Ping timeout: 265 seconds)
[01:49:56] <earendel> how would you start a bash script, and later write to its stdin?
[01:50:45] <tirnanog> use a fifo, perhaps.
[01:50:48] *** djph_ is now known as djph
[01:51:42] <earendel> can i not use some fd it creates in the fs tree?
[01:51:54] <earnestly> tirnanog: For fun: https://0x0.st/i63d.bin
[01:53:11] <tirnanog> "nobody uses named pipes".
[01:53:39] <earnestly> Like a dagger through my heart, I use them all the time
[01:53:51] <earnestly> Especially for runit style control
[01:53:56] <emanuele6> even weechat uses a named pipe
[01:54:15] <earendel> can i or no?
[01:54:16] *** Joins: Guest51 (~Guest51@ip70-176-115-111.ph.ph.cox.net)
[01:54:24] <earnestly> To be fair, this is mostly broken in the bidirectional fifo case
[01:54:32] <earnestly> It's very racy
[01:55:01] <earnestly> I don't think normal read or write fifos have this problem (not seen it yet anyway)
[01:55:29] <earendel> i thought you're waiting for interesting questions :>
[01:55:48] <geirha> vague questions aren't that interesting
[01:55:51] *** Quits: amahl (~amahl@dsl-jklbng12-54fbca-64.dhcp.inet.fi) (Remote host closed the connection)
[01:55:58] <emanuele6> ^^
[01:56:12] <earendel> how would you start a bash script, and later write to its stdin?
[01:56:12] *** Quits: elena_re (~elena@178.176.79.2) (Read error: Connection reset by peer)
[01:56:25] *** Joins: alzgh (~alzgh@user/alzgh)
[01:56:28] <earnestly> tirnanog: (Something that uses a bunch of fifos, related to arch packaging: https://0x0.st/-y4J.sh )
[01:56:41] <earnestly> (Untested0
[01:57:44] <earendel> isn't every process creating some fd somewhere?
[01:57:47] <e36freak> earendel: generally, you don't
[01:58:21] <geirha> mkfifo fifo; yourscript < fifo & exec 3>fifo; ...; printf >&3 'later\n'
[01:58:53] <e36freak> why? what are you actually trying to do?
[01:59:09] <earendel> learn
[01:59:29] <geirha> exec 3> >(yourscript); ... printf >&3 'later\n'
[01:59:32] <tirnanog> earnestly: thanks. recently, I wrote something that makes use of a fifo to order 'events' into a singular sequence. that is, taking advantage of anything produced by multiple writers being conveyed atomatically, provided it doesn't exceed PIPE_BUF. I hope that Torvalds hasn't thwarted my use case. it seems to work well.
[02:00:15] <earendel> okay. if you tell me where i find that fd i can try it myself. would you?
[02:00:23] <tirnanog> a poor man's message bus, I suppose.
[02:00:30] <earnestly> tirnanog: I've got a few prototypes of doing that, dependency resolution (DAG) using the filesystem as the structure.  Makes cycle checking easy
[02:00:39] <emanuele6> earnestly: fds are per process
[02:00:40] <geirha> 3 is the fd
[02:00:51] <emanuele6> i meant earendel
[02:00:58] <earendel> emanuele6: where can i find the fds of running procs?
[02:01:25] <emanuele6> stdin will be 0, stdout will be 1 and stderr will be 2
[02:01:26] <earendel> i have a few follow up questions. do not worry.
[02:01:31] <earnestly> tirnanog: https://0x0.st/-g8o.txt
[02:01:41] <e36freak> portably? no where
[02:01:53] <geirha> on linux, "/proc/$$/fd"
[02:01:53] <earnestly> Hm, oldish code
[02:02:06] <earendel> geirha: thank you.
[02:02:24] *** Quits: UnnamedBeer (~UnnamedBe@117.red-83-46-8.dynamicip.rima-tde.net) (Ping timeout: 250 seconds)
[02:02:34] <earnestly> tirnanog: Basically if t/d exists as d/t, it is cyclic
[02:02:58] *** Quits: edlou (uid413273@id-413273.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[02:03:00] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[02:03:17] <earnestly> Tried to start doing parallelism /combined with/ making certain parts exclusive and this is where I gave up
[02:03:19] <earendel> is the end of stream some special code?
[02:03:23] *** Quits: BSaboia (~bsaboia@177.37.198.122) (Quit: This computer has gone to sleep)
[02:04:10] <earnestly> tirnanog: (Also this experiment is what produced that messagebox case because I thought I was going mad, especially when dash started giving me syscall perror strings lol)
[02:04:30] <emanuele6> earendel: what stream?
[02:04:51] <earendel> emanuele6: are there different streams?
[02:05:04] <emanuele6> i don't even know what you mean by stream
[02:05:09] <tirnanog> earendel: ah.
[02:05:13] <tirnanog> oops, sorry.
[02:05:13] <emanuele6> could be a video stream for all i know
[02:05:16] <tirnanog> earnestly, rather.
[02:05:19] <earendel> that thing you pipe to some stdin
[02:05:38] <e36freak> EOF?
[02:05:47] <emanuele6> if you are reading from stdin using `read', read will fail when there is nothing more to read
[02:06:03] <earendel> emanuele6: how does it know?
[02:06:15] <earendel> e36freak: likely yes.
[02:06:25] *** Joins: mongrel (uid508343@id-508343.ilkley.irccloud.com)
[02:07:05] <earnestly> tcc -run ... lseek(0,0,0);
[02:07:06] <geirha> earendel: man 7 pipe
[02:07:17] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Read error: Connection reset by peer)
[02:07:18] <e36freak> EOF isn't a character
[02:07:22] <earnestly> Ot
[02:07:29] <emanuele6> earendel: the OS tells read(2) to return 0
[02:07:45] <earendel> hence im still waiting for a hint e36freak  ..
[02:07:56] <earnestly> perl -MPOSIX -e 'lseek(0,0,0)' # hmm
[02:08:00] <e36freak> i mean, see the man page
[02:08:21] <emanuele6> C std library e.g. getchar(3) see that it returns 0 and return EOF
[02:08:23] <earnestly> iirc one of the first exercises k&r gives is to print the value of eof
[02:08:27] <e36freak> but yeah, whatever system call is reading from the pipe will return an out-of-bounds value when the OS tells it to
[02:08:35] <emanuele6> bash sees that and makes read fail
[02:08:41] <emanuele6> implementation details
[02:08:41] <e36freak> it used to be a character, isn't usually anymore
[02:08:49] <earnestly> Oh right, you can't seek stdin
[02:08:52] <earnestly> Nevermind
[02:09:49] <earendel> i'm almost certain it's some control char..like sig kill
[02:10:15] <emanuele6> signals are not characters...
[02:10:28] *** Joins: ttys000 (~ttys000@user/ttys000)
[02:11:12] *** Joins: BSaboia (~bsaboia@177.37.198.122)
[02:11:13] <earendel> okay. pressing ctrl+c sends some control code. for istance..
[02:11:18] <emanuele6> how the os knows that the file ended depends on the file system / driver that provides that file
[02:11:39] <emanuele6> earendel: it sends a signal to the process, it doesn't write anything to stdin
[02:15:07] <earendel> ok. i was wrong with signals. yet. pressing ctrl+c sends some control chars. some instance then decides what to do with it. (like for instance terminate the shell or pass it on to some remote proc)
[02:16:07] *** Quits: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Quit: elastic_dog)
[02:16:17] *** Joins: elastic_1 (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[02:16:29] <wwilliam> why this work here:
[02:16:30] <wwilliam>  find . -type d -newer /home/afernandez/u6/axa/axair_prepro/markfile -name "IMGSOAA_PPD*"
[02:16:32] <wwilliam> ./IMGSOAA_PPD_20210930_1
[02:16:32] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[02:16:33] <wwilliam> ./IMGSOAA_PPD_20210930_2
[02:16:35] <wwilliam> and not here:
[02:16:35] <earendel> i read End of Transmission (EOT) 0x04?
[02:16:48] <wwilliam> while IFS= read -rd '' d; do     (cd "$d" && for y in *.zip;do z="${y%.zip}";unzip -d "$z" "$y";done); done < <(find . -maxdepth 1 -type d -newer /home/afernandez/u6/axa/axair_prepro/markfile -name "IMGSOAA_PPD*")
[02:17:51] <wwilliam> never mind I know why know
[02:18:01] *** Joins: shokohsc8 (~shokohsc@161.88.195.77.rev.sfr.net)
[02:18:02] <wwilliam> I change to while read -r
[02:18:03] <earendel> i guess mkfifo ignores such, as you have to close it manually. right?
[02:18:19] <earendel> or the fd it creates.
[02:18:24] *** Joins: igemnace (~ian@user/igemnace)
[02:18:31] *** Quits: __nick__ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 252 seconds)
[02:18:50] <tangy> per Awk User's Guide: there can be white space between the '#!' and  '/bin/bash' ...weird
[02:18:58] <emanuele6> earendel: these questions are better suited for ##kernel
[02:19:12] <emanuele6> !nabq
[02:19:13] <greybot> Not a #bash question. We're no experts in that software or OS; consider asking the channel or mailing list with experts on that topic (eg. ##linux #openssh #ubuntu #zsh #systemd or PM alis with "list keyword" to search for channels).
[02:19:33] <earendel> when you press ctrl+c using ssh. will you terminate ssh or the remote process
[02:19:54] *** Quits: tedster (~Tedster@rampage.tedster.net) (Quit: ZNC 1.8.2 - https://znc.in)
[02:20:15] *** Joins: tedster (~Tedster@rampage.tedster.net)
[02:20:37] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[02:20:38] <emanuele6> it depends
[02:21:53] <emanuele6> tangy: on some old systems only `#! /bin/sh' will work
[02:22:07] <earendel> i just tried to demonstrate there are such things like controlling chars or even strings.
[02:22:41] <emanuele6> ETX is a character, not a signal
[02:22:58] *** Quits: jkwnki (~jkwnki@p4ff31b54.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[02:23:11] <emanuele6> something is reading ETX from somewhere and interprets it to sending a TERM to the running process
[02:23:22] <earendel> right.
[02:24:24] <earendel> so ETX is ctrl+c .. EOF and EOT are something else?
[02:24:49] *** Quits: amvara (~amvara@57.red-83-40-223.dynamicip.rima-tde.net) (Read error: Connection reset by peer)
[02:24:54] *** Joins: napcok2 (~napcok@user/napcok)
[02:24:57] * earendel would be glad to establish a correct term for that E things
[02:25:02] <emanuele6> whether its your local shell, your terminal, ssh sent it over to the remote and the remote terminal interpreted as killing the current remote process depends on the software you are using
[02:25:20] *** Quits: Guest51 (~Guest51@ip70-176-115-111.ph.ph.cox.net) (Quit: Client closed)
[02:25:29] <emanuele6> earendel: EOF is not a control character
[02:25:41] <emanuele6> EOT is usually represented as ^D (ctrl+d)
[02:26:14] <emanuele6> EOF is the return value of std C library io functions that is returned when a FILE has nothing more to read/can't be written to
[02:31:33] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 250 seconds)
[02:32:01] *** Joins: Seirdy (~Seirdy@sourcehut/user/seirdy)
[02:33:26] *** Quits: aaro (~aaro@user/aaro) (Ping timeout: 246 seconds)
[02:33:34] *** Joins: quazimod1 (~quazimodo@n1-41-179-164.bla2.nsw.optusnet.com.au)
[02:34:13] *** Quits: tar_xvf (~tar@ec2-3-136-243-174.us-east-2.compute.amazonaws.com) (Quit: ZNC 1.7.5+deb4 - https://znc.in)
[02:35:10] *** Joins: tar_xvf (~tar@ec2-3-136-243-174.us-east-2.compute.amazonaws.com)
[02:38:52] *** Joins: bn_work (uid268505@id-268505.uxbridge.irccloud.com)
[02:39:12] *** Quits: brelod (~me@90.244.150.142) (Quit: leaving)
[02:40:04] *** Quits: MercilessDeth (~brad@136.49.61.2) (Quit: Konversation terminated!)
[02:40:43] <xx> emanuele6: on what system will only `#! /bin/sh` work?
[02:40:50] <xx> I've never heard of that
[02:40:57] <xx> I've heard of the other way round though
[02:42:16] <earendel> initially i wondered why you would run a command like: command </dev/null
[02:42:31] <emanuele6> xx: https://www.in-ulm.de/~mascheck/various/shebang/#details
[02:43:20] <emanuele6> it was not the system's fault, but rather a GNU autoconf bug
[02:43:36] <earendel> as to prevent writing to it?
[02:43:41] *** Joins: humky (~humky@user/humky)
[02:43:59] <xx> looks like I heard a myth then
[02:44:20] <emanuele6> i did too, i just learned about this
[02:44:56] <emanuele6> !ffmpeg > earendel
[02:44:56] <greybot> earendel: http://mywiki.wooledge.org/BashFAQ/089 -- I'm using a loop which runs once per line of input but it only seems to run once; everything after the first line is ignored?
[02:45:27] <emanuele6> earendel: `command' would inherit stdin from the shell, so writing doesn't matter
[02:45:41] <emanuele6> you do it to prevent command from reading from the shell's stdin
[02:46:44] <xx> thanks for finding that, it's interesting reading
[02:47:04] *** Joins: aaro (~aaro@user/aaro)
[02:47:12] <earendel> emanuele6: but then how would it read from shell's stdin after it has been started (in context of my previous questions) .. opening faq now
[02:48:33] *** Joins: MercilessDeth (~brad@136.49.61.2)
[02:49:23] <emanuele6> earendel: you see very confused..
[02:49:30] *** Joins: semeion (~semeion@user/semeion)
[02:49:58] <earendel> nevermind. you can't say i haven't tried. thanks
[02:51:39] <earendel> oh that FAQ is relevant. :)
[02:53:42] <earendel> o shit. ffmpeg wouldn't have an own stdin?
[02:54:33] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[02:54:51] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[02:55:49] <emanuele6> in that case, it's stdin would be the <(find . -name '*.avi') named pipe
[02:55:59] <emanuele6> s/'//
[02:57:15] <jetchisel> there is `-stdin` and `-nostdin` at least in my man pages
[03:00:08] <emanuele6> # readlink "/proc/$$/fd/0"; printf %s\\n <(readlink /proc/"$BASHPID"/fd/0 >&2)
[03:00:10] <shbot> emanuele6: bash: readlink: command not found
[03:00:10] <shbot> emanuele6: /dev/fd/63
[03:00:14] <emanuele6> oh
[03:00:39] <earendel> also thx geirha you pointed at that 3> thing. so there are more streams than just stdin, stdout, stderr
[03:01:04] <emanuele6> stream is a confusing way to call them
[03:01:05] <earendel> potentially
[03:01:13] <earendel> how u call them?
[03:01:20] <earendel> bobby tables?
[03:01:21] <earendel> :P
[03:01:42] <earendel> seriously though
[03:02:33] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 268 seconds)
[03:02:40] <emanuele6> the number, "file descriptor"; the actual block, "file"
[03:03:46] <earendel> ok.
[03:03:56] *** Quits: wuseman (~wuseman@user/wuseman) (Ping timeout: 250 seconds)
[03:04:29] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[03:04:49] *** Quits: pa_ (~smuxi@86-95-132-61.fixed.kpn.net) (Read error: Connection reset by peer)
[03:04:50] *** Quits: pa__ (~smuxi@86-95-132-61.fixed.kpn.net) (Read error: Connection reset by peer)
[03:05:32] <emanuele6> i meant to say device, not block
[03:05:58] <earendel> better :>
[03:07:07] <emanuele6> !nabq
[03:07:07] <greybot> Not a #bash question. We're no experts in that software or OS; consider asking the channel or mailing list with experts on that topic (eg. ##linux #openssh #ubuntu #zsh #systemd or PM alis with "list keyword" to search for channels).
[03:07:14] <emanuele6> !forget nabq
[03:07:14] <greybot> OK, emanuele6
[03:07:24] <earendel> lol
[03:07:48] <emanuele6> !learn nabq Not a #bash question. We're no experts in that software or OS; consider asking the channel or mailing list with experts on that topic (eg. #linux #openssh #ubuntu #zsh #systemd ##kernel or PM alis with "list keyword" to search for channels).
[03:07:48] <greybot> OK, emanuele6
[03:08:14] <emanuele6> on libera.chat, ##linux is #linux, plus i added ##kernel
[03:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:15:05] *** Joins: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp)
[03:15:38] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[03:16:50] *** Joins: SuperLag (~akulbe@user/superlag)
[03:18:28] *** Joins: nbao (~nbao@187.20.181.193)
[03:18:35] *** Joins: wuseman (~wuseman@90-227-27-97-no68.tbcn.telia.com)
[03:18:35] *** Quits: wuseman (~wuseman@90-227-27-97-no68.tbcn.telia.com) (Changing host)
[03:18:35] *** Joins: wuseman (~wuseman@user/wuseman)
[03:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:21:34] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb)
[03:21:39] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[03:24:25] *** Quits: wuseman (~wuseman@user/wuseman) (Ping timeout: 252 seconds)
[03:25:42] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[03:26:36] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb) (Ping timeout: 268 seconds)
[03:30:02] *** Quits: zopsi (zopsi@2600:3c00::f03c:91ff:fe14:551f) (Quit: Oops)
[03:30:35] *** Quits: napcok2 (~napcok@user/napcok) (Ping timeout: 265 seconds)
[03:30:58] *** Joins: zopsi (zopsi@2600:3c00::f03c:91ff:fe14:551f)
[03:32:09] *** Quits: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au) (Ping timeout: 268 seconds)
[03:36:37] *** Joins: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au)
[03:42:19] *** Quits: luva (~luva@5.180.62.231) (Ping timeout: 265 seconds)
[03:42:50] *** Joins: luva (~luva@5.180.62.228)
[03:42:57] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[03:43:17] *** Joins: greknod2 (~grek@120.88.171.98)
[03:44:09] *** Joins: CodePoint (~CodePoint@2600:1700:3070:3790:f832:81cc:b381:813e)
[03:44:45] *** Quits: CodePoint (~CodePoint@2600:1700:3070:3790:f832:81cc:b381:813e) (Remote host closed the connection)
[03:51:26] *** Quits: Bercik (~Redomen@user/bercik) (Ping timeout: 252 seconds)
[03:52:08] *** Joins: luva4 (~luva@5.180.62.230)
[03:52:22] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aÐ»Ð»Ð¸Ð»Ñ¹Ñ–Ð°!)
[03:52:30] *** Quits: luva (~luva@5.180.62.228) (Ping timeout: 268 seconds)
[03:52:30] *** luva4 is now known as luva
[03:52:52] *** Quits: nutron (~nutron@66.51.134.122) (Read error: Connection reset by peer)
[03:56:24] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[03:59:35] *** Joins: CodePoint (~CodePoint@89.38.227.236)
[03:59:54] *** Quits: luva (~luva@5.180.62.230) (Ping timeout: 268 seconds)
[04:00:04] *** Joins: luva (~luva@5.180.62.230)
[04:08:08] *** Joins: nutron (~nutron@66.51.134.122)
[04:08:43] *** Joins: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl)
[04:08:43] *** Quits: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl) (Changing host)
[04:08:43] *** Joins: Bercik (~Redomen@user/bercik)
[04:10:23] *** Quits: scoobydoo (~scooby@user/scoobydoo) (Ping timeout: 246 seconds)
[04:11:16] *** Joins: CodePoint_ (~CodePoint@94.198.42.140)
[04:13:42] *** Quits: CodePoint (~CodePoint@89.38.227.236) (Ping timeout: 250 seconds)
[04:14:14] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[04:15:38] *** Joins: CodePoint__ (~CodePoint@96.44.191.140)
[04:15:38] *** Quits: CodePoint__ (~CodePoint@96.44.191.140) (Client Quit)
[04:15:46] *** Quits: tejr (~tejr@user/tejr) (Quit: leaving)
[04:15:52] *** Joins: CodePoint (~CodePoint@96.44.191.140)
[04:18:54] *** Quits: CodePoint_ (~CodePoint@94.198.42.140) (Ping timeout: 250 seconds)
[04:22:41] *** Joins: sn1tch3r (~sn1tch3r@user/sn1tch3r)
[04:22:57] *** Quits: sn1tch3r (~sn1tch3r@user/sn1tch3r) (Remote host closed the connection)
[04:23:14] *** Joins: seninha (~seninha@user/seninha)
[04:24:46] *** Quits: mags (~mags@097-090-237-145.res.spectrum.com) (Quit: leaving)
[04:26:58] *** Joins: zeno1 (~zen@88.103.31.15)
[04:30:06] *** Quits: standardrat_ (~standardr@196.30.99.2) (Read error: Connection reset by peer)
[04:30:23] *** Quits: vlm (~vlm@user/vlm) (Quit: "")
[04:30:25] *** Quits: Bit_MCP234 (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Ping timeout: 252 seconds)
[04:30:25] *** Joins: standardrat_ (~standardr@196.30.99.2)
[04:30:55] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb)
[04:31:02] *** Quits: CrypticSquared (~CrypticS_@user/crypticsquared) (Quit: Leaving...)
[04:31:06] <zeno1> hello can someone help me with 'for loop' from dialog checklist?
[04:34:39] *** Joins: vlm (~vlm@user/vlm)
[04:35:30] *** Quits: mtk (~mtk@2601:185:200:72:44aa:53fe:886b:bee9) (Remote host closed the connection)
[04:37:54] <karstensrage> does running another shell script in a script lose variables ?
[04:38:08] <karstensrage> so like i capture seconds before the shell script is called
[04:38:15] <karstensrage> but then after its 0
[04:38:39] <karstensrage> $SECOND
[04:38:58] <karstensrage> $SECONDS
[04:39:16] <tar_xvf> im confused what you mean
[04:40:41] *** Joins: mtk (~mtk@2601:185:200:72:44aa:53fe:886b:bee9)
[04:41:11] <tar_xvf> seconds is a special variable that is used to count seconds, it may or may not start at zero when you start a new shell window or scrpt
[04:41:21] <tar_xvf> does the same behavior happen with other variable names?
[04:41:28] *** Quits: sublim21 (~sublim20@pool-108-29-101-104.nycmny.fios.verizon.net) (Remote host closed the connection)
[04:42:35] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 252 seconds)
[04:42:56] <emanuele6> i think he is trying to run ./somescript in his shell, and expects the value of SECONDS in that script to be the same of the shell
[04:43:35] <tirnanog> which would be contrary to its design, of course.
[04:43:51] <emanuele6> you can run it as `SECONDS=$SECONDS ./somescript'
[04:44:23] <emanuele6> but i don't know what you are actually doing, it seems weird
[04:44:44] <emanuele6> maybe this script should just be a function
[04:44:54] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb) (Ping timeout: 250 seconds)
[04:45:38] <tar_xvf> karstensrage: what are you trying to do with your script?
[04:45:46] *** Quits: y04nn (~y04nn@193.32.127.238) (Ping timeout: 250 seconds)
[04:46:08] <emanuele6> zeno1: are you going to ask a question? :P
[04:46:29] *** Joins: CrypticSquared (~CrypticS_@user/crypticsquared)
[04:47:37] *** Quits: CodePoint (~CodePoint@96.44.191.140) (Quit: CodePoint)
[04:48:06] <zeno1> hot to add for loop to this script? https://termbin.com/5ug1
[04:49:15] <emanuele6> !capvar
[04:49:15] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[04:49:29] <emanuele6> i don't understand the question
[04:49:59] <emanuele6> for loop of what?
[04:50:39] *** Joins: mags (~mags@097-090-237-145.res.spectrum.com)
[04:51:08] *** Joins: jcbjoe2021 (sid520195@id-520195.lymington.irccloud.com)
[04:51:46] <jcbjoe2021> is this channel only for scripts in bash or can we ask linux command that you run with the bash shell?
[04:51:51] *** Joins: ferdna (~ferdna@user/ferdna)
[04:52:48] <tirnanog> discussion of the standard utilities is generally considered on-topic. random programs that you might just have happened to launch from bash, using linux, less so.
[04:53:19] *** Quits: jasper_ (~user@styria.daemonized.org) (Quit: jasper_)
[04:54:29] <emanuele6> zeno1: oh, i think i understand
[04:54:33] <emanuele6> give me a sec
[04:54:34] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[04:55:06] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[04:55:32] <zeno1> i want create post install script for void linux. I cant figured out how to use answers from dialog checklist. no problems with menu where is only one answer...
[04:58:01] <jcbjoe2021> i've asked this question in #linux  but really didn't get the question answered. i want to list filetypes in a directory by extension. once found i want to open that directory with lets say one of the file types so if i don't like what i see i can delete it in linux with the rm command, is this possible? i ran this command find . -type f | sed 's/.*\.//' | sort | uniq -c and it showed me how many files of what type i have in the
[04:58:01] <jcbjoe2021> current directory and below, now i want to open the current directory with lets say the 4 files it found for mp4 files and play them. can i do this?
[04:58:40] <emanuele6> zeno1: you want something like this i think http://paste.wooledge.org/9382
[04:58:51] <e36freak> zeno1: capture the stdout of dialog, it'll print everything that was selected
[04:59:02] <e36freak> you should probably use --separate-output with it so you get one thing per line
[04:59:06] <e36freak> instead of trying to parse quotes and shit
[04:59:57] <e36freak> jcbjoe2021: what do you mean by "open the directory" ? i'm not sure i understand what you want to do
[05:00:33] <tirnanog> yeah. I mean, if you match a file with a given extension across multiple directories, say, as was implied by the use of a recursive find command in your example, "the directory" is somewhat ambiguous.
[05:00:44] <tirnanog> if you could refine a little, it would be good.
[05:01:47] <jcbjoe2021> e36freak: Iâ€™m trying to shrink my external hard drive. There are a lot of file types on there like m4v and mo4 files. I want to list all mp4 or m4c files play them and see if I need them. Once played I can delete them manually with the rm command
[05:01:52] <jcbjoe2021> Hope that helped
[05:02:35] <karstensrage> no im just trying to time how long the script takes
[05:02:38] <e36freak> well, find . -type f -iname '*.mp4' # will recursively find all mp4 files
[05:02:46] <karstensrage> so before inside.sh i capture $SECONDS
[05:02:51] <e36freak> you can then loop over that output and pass them to a given player
[05:02:53] <tirnanog> right.
[05:03:02] <karstensrage> and after i capture elapsed=$(( SECONDS - start_time ))
[05:03:12] <e36freak> you could even then have a thing that asks "remove file?" in the loop afterward and removes them or not
[05:03:13] <tirnanog> perhaps by way of an intermediate playlist file that you edit as you proceed to listen to its contents.
[05:03:19] <e36freak> you could also do that
[05:03:24] <karstensrage> in a test script with sleep it works
[05:03:32] <karstensrage> but in the real thing with inside.sh it doesnt
[05:03:51] <tirnanog> i.e. leaving only those that you want to be deleted.
[05:05:20] <jcbjoe2021> e36freak: how would I type that out?
[05:05:28] <e36freak> while IFS= read -rd '' file <&3; do mpv "$file"; read -rp 'Remove? [y/N]'; [[ $REPLY = [Yy]* ]] && rm "$file"; done < <(find . -type f -iname '*.mp4' -print0)
[05:05:31] <e36freak> erm
[05:05:36] <e36freak> while IFS= read -rd '' file <&3; do mpv "$file"; read -rp 'Remove? [y/N]'; [[ $REPLY = [Yy]* ]] && rm "$file"; done 3< <(find . -type f -iname '*.mp4' -print0)
[05:05:39] <e36freak> for example
[05:06:04] <jcbjoe2021> You just typed all that e36freak ?
[05:06:08] <e36freak> sure
[05:06:10] <tirnanog> perhaps rm -v for some feedback.
[05:06:16] <e36freak> maybe put an echo in front of rm to test
[05:06:22] <e36freak> rm -v also wouldn't hurt
[05:06:29] <jcbjoe2021> Dam e36freak I been looking online all day for commands
[05:06:49] <tirnanog> you made the right decision coming here from #linux.
[05:07:00] <jcbjoe2021> Yea ðŸ˜€
[05:07:55] <jcbjoe2021> Should I even try to understand that bash script?
[05:07:57] <e36freak> karstensrage: why not just run the script with time?
[05:08:05] <e36freak> jcbjoe2021: yes
[05:08:17] <e36freak> there's a few things going on there, i can link you to the relevant faqs and such
[05:08:19] <e36freak> !find
[05:08:19] <greybot> http://mywiki.wooledge.org/UsingFind
[05:08:21] <e36freak> !faq 1
[05:08:21] <greybot> https://mywiki.wooledge.org/BashFAQ/001 -- How can I read a file (data stream, variable) line-by-line (and/or field-by-field)?
[05:08:24] <e36freak> !faq ffmpeg
[05:08:24] <greybot> https://mywiki.wooledge.org/BashFAQ/089 -- I'm reading a file line by line and running ssh or ffmpeg, only the first line gets processed!
[05:09:04] <tirnanog> karstensrage: doesn't sound like you're doing anything wrong. can you show an small test case that doesn't behave as expected?
[05:09:07] <tirnanog> a*
[05:09:26] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[05:10:07] <jcbjoe2021> e36freak: I hope I can understand I got a learning disability thatâ€™s crazy. If I didnâ€™t have it I would probably be a programmer or something
[05:10:23] <jcbjoe2021> e36freak: you got anything mire basic?
[05:10:29] <jcbjoe2021> More*
[05:10:38] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[05:10:50] <e36freak> like, a basic bash introduction?
[05:10:51] <e36freak> !guide
[05:10:52] <greybot> http://mywiki.wooledge.org/BashGuide or in PDF: http://s.ntnu.no/bashguide.pdf
[05:11:32] <tirnanog> # printf '%s\n' '#!/bin/bash' 'sleep 2' > child-script; chmod +x child-script; bash -c 'sleep 2; start=$SECONDS; ./child-script; elapsed=$((SECONDS - start)); declare -p elapsed
[05:11:40] <shbot> tirnanog: Missing terminating quote, bracket or keyword
[05:11:41] <tirnanog> grr.
[05:11:42] <tirnanog> # printf '%s\n' '#!/bin/bash' 'sleep 2' > child-script; chmod +x child-script; bash -c 'sleep 2; start=$SECONDS; ./child-script; elapsed=$((SECONDS - start)); declare -p elapsed'
[05:11:48] <shbot> tirnanog: declare -- elapsed="2"
[05:11:53] <tirnanog> jcbjoe2021: ^ see. works.
[05:12:14] <tirnanog> SECONDS - start_time is the wrong way around.
[05:12:20] <tirnanog> er, never mind. tired.
[05:12:24] <tirnanog> anyway, it works.
[05:13:39] *** Quits: hqdruxn08 (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com) (Quit: Leaving)
[05:13:58] *** Joins: hqdruxn08 (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com)
[05:15:37] <jcbjoe2021> Thanks i will look at it e36freak
[05:21:31] *** Quits: cdown (~cdown@163.114.131.1) (Ping timeout: 252 seconds)
[05:22:44] *** Quits: xx (~xx@user/xx) (Ping timeout: 252 seconds)
[05:22:52] <tirnanog> karstensrage: addressed the wrong person. see above. if it doesn't work for you, show what you're doing exactly.
[05:24:19] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Ping timeout: 252 seconds)
[05:24:49] *** Quits: BSaboia (~bsaboia@177.37.198.122) (Quit: This computer has gone to sleep)
[05:28:49] *** Joins: VirtualXI (~user@styria.daemonized.org)
[05:31:18] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb)
[05:33:29] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[05:35:36] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:7907:eaa6:b44b:58bb) (Ping timeout: 250 seconds)
[05:37:53] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[05:40:09] <karstensrage> tirnanog, ill see if i can add some debugging the problem is teh inside script does tons of stuff launching java and takes like 40 minutes to complete
[05:40:43] <zeno1> https://termbin.com/b65sv
[05:41:25] <tirnanog> karstensrage: you could substitute some other short-running subprocess, perhaps. the nature of the subprocess really shouldn't be the issue.
[05:43:13] *** Joins: SteveR (~SteveR@192.146.154.3)
[05:43:17] <zeno1> this work for me but i want separate asking and working part of script
[05:45:17] *** Quits: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au) (Ping timeout: 252 seconds)
[05:47:19] <zeno1> like in my first attempt which uses if and fi https://termbin.com/79ab
[05:50:25] <emanuele6> mm, a /bin/bash script that checks if /bin/bash exists and installs bash if it does not exist
[05:52:03] *** Quits: alzgh (~alzgh@user/alzgh) (Remote host closed the connection)
[05:52:16] *** Joins: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au)
[05:53:38] <tar_xvf> emanuele6: progrim
[05:53:39] *** Joins: xiongxin (~quassel@119.123.101.90)
[05:54:35] <emanuele6> it's funny that this assumes that sudo is installed, but not that bash is installed xD
[05:57:26] <tirnanog> I don't really understand what is wanted but, in so far as there is talk of separating things, I suspect that it will entail writing some functions.
[05:57:41] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[05:58:29] *** Quits: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be) (Quit: The Lounge - https://thelounge.chat)
[05:59:46] *** Joins: totenkoph (~scythe@user/totenkoph)
[06:04:02] *** Quits: SteveR (~SteveR@192.146.154.3) (Quit: Client closed)
[06:08:39] <tirnanog> zeno1: it's incredibly long-winded. there are large expanses of code that could be reduced. for instance, if (( ${#selections[@]} )); then echo "Installing ${selections[*]}..."; sudo xbps-install "${selections[@]}"; fi
[06:09:01] <tirnanog> maybe if you work on that first, it will be easier to reason with the intended control flow and better explain what you want.
[06:09:07] *** Joins: whatamidoingogod (~ii@216-164-118-179.s689.c3-0.atw-cbr1.atw.pa.cable.rcncustomer.com)
[06:09:58] *** Quits: arinov (~arinov@213.194.126.155) (Ping timeout: 252 seconds)
[06:10:23] *** Parts: whatamidoingogod (~ii@216-164-118-179.s689.c3-0.atw-cbr1.atw.pa.cable.rcncustomer.com) ()
[06:10:59] <tirnanog> I see that you treat some selections as package sets, in effect, but you could still have a *) match that falls through to installing "${selections[@]}".
[06:12:25] *** Joins: antone (~antone@c-73-170-88-95.hsd1.ca.comcast.net)
[06:15:39] *** VirtualXI is now known as virtualxi
[06:16:47] *** Quits: virtualxi (~user@styria.daemonized.org) (Quit: virtualxi)
[06:17:08] *** Quits: Enissay (~Enissay@user/enissay) (Quit: WeeChat 3.0)
[06:17:10] *** Joins: virtualxi (~user@styria.daemonized.org)
[06:19:09] *** Joins: Enissay (~Enissay@user/enissay)
[06:19:17] <tirnanog> for example, https://termbin.com/066zj. not every selection needs to be treated as a special case.
[06:25:25] *** Joins: sublim20 (~sublim20@user/sublim20)
[06:25:35] <pj> if you need your script to have root wouldn't it be better to just run it as root?
[06:26:09] <pj> like, instead of having "sudo command" in your script just run your script with "sudo myscript"
[06:27:58] *** Quits: jos1 (~jos3@dyndsl-091-248-051-063.ewe-ip-backbone.de) (Ping timeout: 265 seconds)
[06:30:19] *** Joins: Intelo (~Intelo@88.244.90.6)
[06:30:41] *** Quits: LiftLeft (~LiftLeft@154.21.114.169) (Ping timeout: 264 seconds)
[06:30:41] *** Quits: Arlion (~Arlion@user/arlion) (Read error: Connection reset by peer)
[06:30:50] *** Joins: arlion1 (~Arlion@user/arlion)
[06:30:59] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a)
[06:34:10] <phy1729> yes
[06:34:17] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 268 seconds)
[06:35:49] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a) (Ping timeout: 252 seconds)
[06:36:04] *** Joins: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys)
[06:36:35] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[06:39:12] *** Quits: antone (~antone@c-73-170-88-95.hsd1.ca.comcast.net) (Remote host closed the connection)
[06:39:48] *** Joins: antone (~antone@c-73-170-88-95.hsd1.ca.comcast.net)
[06:40:02] *** Quits: jonakeys_ (jonathan@gateway/vpn/airvpn/jonakeys) (Client Quit)
[06:40:19] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[06:40:33] *** Joins: jos1 (~jos3@dyndsl-178-142-071-112.ewe-ip-backbone.de)
[06:41:11] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[06:45:27] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a)
[06:53:02] *** Quits: fluter (~fluter@user/fluter) (Quit: WeeChat 2.9)
[06:54:43] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[06:55:05] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[06:56:54] *** Quits: dermoth (~dermoth@dsl-199-102-159-155.mtl.aei.ca) (Ping timeout: 260 seconds)
[06:58:40] *** Quits: xiongxin (~quassel@119.123.101.90) (Read error: Connection reset by peer)
[06:59:05] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a) (Ping timeout: 246 seconds)
[06:59:55] *** Joins: xiongxin (~quassel@119.123.101.90)
[07:02:17] *** Joins: JibStyle (~user@c-71-198-134-61.hsd1.ca.comcast.net)
[07:05:04] <jcbjoe2021> Are people that do bash scripts mostly programmers?
[07:05:05] *** Quits: djph (~dpurgert@cpe-107-10-244-220.neo.res.rr.com) (Ping timeout: 260 seconds)
[07:06:21] *** Parts: akoana (~ah@user/akoana) ()
[07:07:26] <JibStyle> If you program a bash script, then you are therefore a programmer
[07:08:06] <JibStyle> But I guess bash scripts can be used for lots of stuff, not always "programming" related.
[07:09:20] *** Joins: dermoth (~dermoth@dial-216-221-45-39.mtl.aei.ca)
[07:10:00] <JibStyle> They are good for automating things you would otherwise type into a terminal.
[07:10:26] *** Quits: keypusher (keypusher@user/keypusher) (Remote host closed the connection)
[07:11:09] <emanuele6> wow, nice #bash-philosophy
[07:15:19] *** Joins: dstein64- (~dstein64@dannyadam.com)
[07:15:37] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[07:16:56] *** Quits: dstein64 (~dstein64@dannyadam.com) (Ping timeout: 246 seconds)
[07:16:56] *** dstein64- is now known as dstein64
[07:18:20] *** Joins: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941)
[07:19:10] *** Quits: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941) (Client Quit)
[07:20:35] *** Quits: nbao (~nbao@187.20.181.193) (Quit: leaving)
[07:21:54] *** Joins: fluter (~fluter@user/fluter)
[07:22:06] *** Quits: fluter (~fluter@user/fluter) (Client Quit)
[07:22:28] <jcbjoe2021> Do in have to learn bash scripting or can I just ask here for a script or command/syntax?
[07:22:32] *** Joins: fluter (~fluter@user/fluter)
[07:26:04] *** Quits: antone (~antone@c-73-170-88-95.hsd1.ca.comcast.net) (Remote host closed the connection)
[07:29:54] *** Joins: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941)
[07:38:22] <karstensrage> if you dont have #!/bin/bash what is the shell that runs the script?
[07:40:16] <llua> depends
[07:40:48] <karstensrage> i think the actual failing thing must not be running bash
[07:40:57] *** Quits: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941) (Quit: WeeChat 3.3)
[07:41:10] *** Joins: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941)
[07:41:16] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 250 seconds)
[07:41:33] <karstensrage> its being run from cron does that matter
[07:42:08] <llua> possibly, better question; why is it missing?
[07:42:11] <tirnanog> in the absence of a valid shebang, it's not a valid executable. the kernel should respond with ENOEXEC. however, some shells don't propagate the error and respond to it by then trying to open and interpret the script.
[07:42:11] *** Joins: arlion2 (~Arlion@user/arlion)
[07:42:16] *** Quits: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941) (Client Quit)
[07:42:23] *** Joins: Atque (~Atque@user/atque)
[07:42:29] *** Joins: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941)
[07:42:35] *** Quits: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941) (Client Quit)
[07:42:38] <tirnanog> at any rate, don't act as though a script is a valid executable if it lacks a shebang. it can only spell trouble.
[07:42:50] *** Joins: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941)
[07:44:15] *** Quits: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941) (Client Quit)
[07:44:31] *** Joins: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941)
[07:44:52] *** Quits: ElPresidenteP (~ElPreside@2600:1700:3d10:4870:7136:d153:c8ad:1941) (Client Quit)
[07:45:04] *** Quits: ezzieyguywuf (~Unknown@user/ezzieyguywuf) (Ping timeout: 252 seconds)
[07:45:26] *** Quits: arlion1 (~Arlion@user/arlion) (Ping timeout: 265 seconds)
[07:46:23] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[07:50:44] <karstensrage> ok i added it and it will run in 40 minutes
[07:50:46] <karstensrage> crossing my fingers
[07:51:48] *** Joins: ezzieyguywuf (~Unknown@user/ezzieyguywuf)
[07:52:05] <eschwartz> tirnanog: the execlp(3) and execvp(3) functions are required by POSIX to behave in precisely that "some shells" behavior
[07:52:24] *** Quits: ozzzo_work (~ozzzo_wor@h87.s239.verisign.com) (Quit: Ping timeout (120 seconds))
[07:52:58] <tirnanog> eschwartz: I see.
[07:53:08] <eschwartz> so the answer to "is it a valid executable" is not "no", the answer is "it depends which direction you look" :)
[07:55:07] <tirnanog> come to think of it, that might wholly account for the earlier complaint of calculations involving SECONDS resulting in 0.
[07:55:28] *** Quits: virtualxi (~user@styria.daemonized.org) (Quit: virtualxi)
[07:56:05] <tirnanog> sh# start=$SECONDS; sleep 1; echo $(( start - SECONDS ))
[07:56:07] <shbot> tirnanog: 0
[07:56:15] <tirnanog> as is to be expected.
[07:56:40] *** Joins: mmercer (daemoen@2605:d100:0:2d:5054:ff:fef0:3953)
[07:56:52] *** Joins: ElPresidenteP (~ElPreside@172-125-150-28.lightspeed.tukrga.sbcglobal.net)
[07:56:56] <tirnanog> of course, had the script been shown and the circumstances explained, that would been determined in short order.
[07:57:59] *** Quits: ElPresidenteP (~ElPreside@172-125-150-28.lightspeed.tukrga.sbcglobal.net) (Client Quit)
[07:58:01] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a)
[08:00:56] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[08:04:25] *** Joins: vishal (~vishal@fedora/vishal)
[08:06:35] <eschwartz> hmm, I think I'm missing quite a bit of context there, but if someone asked a question about the use of SECONDS and then it turned out the script didn't have a shebang, then I think we're well into "why didn't you post the gosh-darned script already"
[08:07:12] *** Joins: sinaowolabi_ (~SinaOwola@102.134.114.1)
[08:09:47] *** magyar_ is now known as magyar
[08:11:20] <eschwartz> on execlp, it should be noted -- fun! -- that the file shall be executed with argv shifted over to insert, as argv0, "an unspecified pathname for the sh utility"
[08:11:36] <tirnanog> eschwartz: bash simply uses execve(), as far as I can tell. it does, in fact, catch ENOEXEC as I mentioned. it's not a case of /bin/sh being invoked (mine is dash). I can reproduce the same behaviour with dash also. I think the initial commentary is material to the problem.
[08:11:58] <eschwartz> it can be any form of sh -- and depending on what actually handles this, it may use /bin/sh (common, handled at the glibc level on linux)
[08:12:34] <eschwartz> bash uses execve IIRC specifically to evade that POSIX requirement and so that it instead can use itself, not /bin/sh
[08:13:02] <eschwartz> it's allowed to do that, the standard just defines what execvp/execlp do -- not what *shells* do :p
[08:13:18] <tirnanog> yes, I know. but bash isn't the only shell to do it. that was my point.
[08:14:00] <eschwartz> some shells do use exec*p there, but I forget which ones
[08:15:26] <eschwartz> anyway since I don't understand karstensrage's problem I merely observed that it can be reasonably viewed as "really bad style, but yes it's technically a valid executable if you squint. In the general case"
[08:15:33] <tirnanog> my guess it that it's this: his /bin/sh isn't bash. his cron implementation uses /bin/sh to execute his script which is lacking a shebang. the /bin/sh implementation intercepts ENOEXEC and handles the script itself. no SECONDS. in the case of a shell that is using execv*p, same difference, I suppose.
[08:15:57] <eschwartz> that sounds like a reasonable guess, yeah...
[08:15:59] <tirnanog> I can't really agree there. the meaning of ENOEXEC is unambiguous. that it 'runs' is another matter.
[08:16:17] <tirnanog> I mean, I get your point but ... eh, whatever.
[08:16:25] <eschwartz> (you do need to squint...)
[08:16:36] <tirnanog> yeah.
[08:17:58] <eschwartz> using a proper shebang guarantees correct behavior everywhere, especially in cron which is a well known source of "actually you were not running the shell you thought you wanted to use"
[08:18:50] <tirnanog> yeah. here's a fair chance that defining the SHELL is possible but still, it's just bad form to call out to an executable script that lacks a shebang. as I told him earlier, just don't do it.
[08:19:53] *** Joins: fdan (~fdan@192.146.154.3)
[08:21:07] <tirnanog> you didn't miss much as concerns the prior context. no hint was given that it might be the issue until now.
[08:21:16] <eschwartz> nice
[08:21:41] *** Quits: timj (~timj@user/timj) (Ping timeout: 246 seconds)
[08:22:03] <pj> what do you think about setting the shebang to /bin/false for a script that is explicitly designed to be sourced?
[08:22:04] <tirnanog> that said, I might have found the observation that the result of the arithmetic expansion was 0 more notable. oh well.
[08:23:30] <eschwartz> pj: I'd prefer something like #!hint/bash
[08:23:33] <tirnanog> pj: I could see it making sense in some cases. if only false were always under /bin, though.
[08:23:59] <pj> so /usr/bin/env false ?
[08:24:05] <eschwartz> which completely fails to find anything, almost certainly, but also conveniently triggers most editors' shebang detection methods
[08:24:10] <tirnanog> yeah, that's a better idea.
[08:24:34] <eschwartz> I mean I dunno, maybe you have a "hint" directory where your bash executable hangs out, I won't judge :p
[08:24:42] <pj> eschwartz: true, that would at least put an editor into shell mode.
[08:25:18] <pj> can you have a shebang without a leading slash?
[08:25:21] *** Quits: YuGiOhJCJ (~YuGiOhJCJ@gateway/tor-sasl/yugiohjcj) (Quit: YuGiOhJCJ)
[08:25:42] <emanuele6> you can, but it won't work
[08:26:04] <pj> it explicitly won't work, or it's undefined?
[08:26:39] <eschwartz> I suppose there is a small chance it would find ./hint/bash
[08:27:02] <emanuele6> i guess it depends on the os
[08:27:22] <emanuele6> maybe some os will search in PATH for executables
[08:27:56] <pj> I would think it would be undefined, so an implementation could try it as a relative path, try fixing it by anchoring it to / or just error and not run anything, or who knows?
[08:29:53] <tirnanog> I believe the article referenced by !shebang mentions a few operating systems where that's the case.
[08:30:01] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[08:30:09] <pj> meh, springtime, starting to get the early spring blowflies today.
[08:31:00] <pj> yeah, well, tbh I wouldn't use it then, because you just don't know what the OS will try to do.  I'd rather use #!/hint/bash because at least then you know what it will try to do.
[08:31:01] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[08:31:16] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[08:31:18] <tirnanog> maybe not. I'm misinterpreting the import of the results table.
[08:31:21] *** Joins: babyface (~babyface@user/babyface)
[08:31:48] <eschwartz> fair enough, the versions with and without the "/" share in common the fact that you don't want them to succeed
[08:32:10] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[08:33:12] <emanuele6> pj: actually, it will work
[08:33:27] *** Joins: n4dir (~user@mue-88-130-56-201.dsl.tropolys.de)
[08:33:41] <emanuele6> #! python
[08:33:44] <emanuele6> print("hello")
[08:33:51] <emanuele6> i have this script in my home
[08:33:58] <emanuele6> if i run it from home, it doesn't work
[08:33:59] <tirnanog> pj: in any case, shebang behaviour is unspecified.
[08:34:06] <emanuele6> if i run it from /bin, it works
[08:34:10] <emanuele6> this is linux
[08:34:28] <emanuele6> "python" is treated as a relative path
[08:34:49] <eschwartz> so as long as you have the highly logical filename ./hint/bash that shebang will succeed!
[08:36:01] *** Joins: timj (~timj@user/timj)
[08:36:01] <jcbjoe2021> Ok I figured out what I want . I want a script that runs the find command in the working directory. Finds the species file types or mp4 then opens xdg-open and have a prompt to rm yes or no is this possible?
[08:36:58] <eschwartz> that is a whole bunch of things all at once... but hey, most everything is *possible*
[08:37:11] <tirnanog> jcbjoe2021: replace mpv with xdg-open in the earlier example?
[08:37:17] <eschwartz> what is a "species file type or mp4"
[08:38:37] <eschwartz> do you mean, find all files with the file extension ".species" or ".mp4" ?
[08:39:31] *** Quits: fdan (~fdan@192.146.154.3) (Quit: Client closed)
[08:39:45] <eschwartz> do you want to first xdg-open (hence launch the file in your default GUI file opener) *and* after that prompt to rm?
[08:40:15] <jcbjoe2021> tirnanog: I donâ€™t have mpv
[08:40:26] <jcbjoe2021> Oh nvm
[08:40:32] <tirnanog> all the more reason to reaplce it ...
[08:42:50] <eschwartz> offtopic: xdg-open is not something you use as a replacement for other things. It's the hot mess, walking whichcraft violation, and general eyeball melter which you avoid at all costs. Also it probably just detects your desktop environment and runs `gio open $@` (quotes deliberately removed to be in theme for xdg-open)
[08:43:04] <tirnanog> although, as xdg-open will act asynchronously, you might also want to include a command to print the pathname so that it's perfectly clear what you're being prompted to delete. otherwise, you might lose your concentration and delete the wrong file.
[08:43:19] *** Joins: tex (~super@user/dix)
[08:46:47] *** Joins: frostwork (~frostwork@user/frostwork)
[08:50:52] <jcbjoe2021> Can I get the extra command
[08:51:42] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:285b:2120:1c8b:5e6a) (Ping timeout: 260 seconds)
[08:51:43] <jcbjoe2021> while IFS= read -rd '' file <&3; do mpv "$file"; read -rp 'Remove? [y/N]'; [[ $REPLY = [Yy]* ]] && rm "$file"; done 3< <(find . -type f -iname '*.mp4' -print0)
[08:51:51] <jcbjoe2021> ^^ thatâ€™s what I got
[08:52:43] <eschwartz> read -rp "Remove file '$file'? [y/N]"
[08:53:17] <eschwartz> ooooor....
[08:53:38] <eschwartz> do mpv "$file"; rm -i "file"; done
[08:53:58] <eschwartz> rm -i will prompt you interactively with the filename
[08:54:17] <jcbjoe2021> Ok
[08:54:40] *** Quits: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net) (Ping timeout: 268 seconds)
[08:54:40] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[08:55:14] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[08:55:45] *** Joins: p-i- (~Ohmu@223.206.71.80)
[08:56:45] *** Quits: acegallagher (~Ace@71-218-173-138.hlrn.qwest.net) (Read error: Connection reset by peer)
[08:57:30] <jcbjoe2021> eschwartz:
[08:57:30] *** Joins: acegallagher (~Ace@71-218-173-138.hlrn.qwest.net)
[08:57:38] <jcbjoe2021> while IFS= read -rd '' file <&3; do mpv "$file"; read -rp 'Remove? [y/N]'; [[ $REPLY = [Yy]* ]] && rm -I "$file"; done 3< <(find . -type f -iname '*.mp4' -print0) ?
[08:57:47] <jcbjoe2021> I added -I
[08:59:05] <tirnanog> pointless because 1) you still have manual prompting mechanism (using read) and 2) -I never prompts unless more than three files are give, yet only one file is given at a time in that loop.
[08:59:52] <tirnanog> you could use rm -i instead of a manually defined prompting system, to be clear.
[09:01:12] <jcbjoe2021> tirnanog: so I donâ€™t need the bash script?
[09:02:26] *** Joins: extern (~archer@141.226.59.190)
[09:02:29] <p-i-> If I'm running `set -x` is there any way to exclude a particular command from printing itself?
[09:02:56] <p-i-> For my use case, I'm using `echo`s to improve console output readability: https://bpa.st/IT6A
[09:03:05] <extern> use grep
[09:03:32] <p-i-> But it's kinda ugly that every echo text is now duplicated.
[09:04:00] *** Joins: vysn (~vysn@user/vysn)
[09:04:25] <extern> grep -vE '*your_command*'
[09:04:39] <p-i-> I guess I could echo >/dev/null, which removes the duplication, but I'd rather prevent `set -x` from printing the echo command.
[09:05:10] *** Joins: vxi (~user@styria.daemonized.org)
[09:05:37] <emanuele6> extern: what?
[09:05:43] <emanuele6> that is not a valid regex
[09:06:08] *** Quits: vxi (~user@styria.daemonized.org) (Client Quit)
[09:06:31] *** Joins: vxi (~user@styria.daemonized.org)
[09:06:55] <extern> emanuele6: works here
[09:07:16] *** Joins: vee (~vee@c-73-71-90-145.hsd1.ca.comcast.net)
[09:07:18] <emanuele6> # echo 'hello' | grep -vE '*something*'
[09:07:20] <shbot> emanuele6: hello
[09:07:29] <emanuele6> # echo 'something' | grep -vE '*something*'
[09:07:31] <shbot> emanuele6: no output
[09:07:43] <emanuele6> # echo 'somethin' | grep -vE '*something*'
[09:07:44] <shbot> emanuele6: no output
[09:07:50] <emanuele6> extern: see?
[09:07:53] <tirnanog> jcbjoe2021: that's not what we said. consider these two examples: https://termbin.com/j5aj. they both accomplish the same thing. however, the second is obviously simpler.
[09:08:50] <extern> emanuele6: do you know what -v is ?
[09:08:57] <emanuele6> i do
[09:09:09] <tirnanog> jcbjoe2021: correction: https://termbin.com/gdrd
[09:09:16] <extern> he want to print everything EXCEPT "something"
[09:09:33] <emanuele6> extern: yes, then why was "somethin" not printed
[09:10:23] <emanuele6> the initial '*' makes the ERE not valid, but GNU grep happens to accept it and probably just ignores it
[09:10:40] <eschwartz> p-i-: do:() { (PS4='+ '; set -x; "$@") }
[09:10:48] <emanuele6> the final 'g*' has the meaning of "zero or more 'g' characters"
[09:10:49] <eschwartz> do: mkdir -p foo/
[09:10:56] <eschwartz> do: sudo apt install -y  build-essential libpython3.9-dev
[09:10:58] <eschwartz> ....
[09:11:00] <extern> emanuele6: yes we talking about grep didn't we?
[09:11:26] <emanuele6> # echo 'somethin' | grep -vE '*something*' # extern
[09:11:27] <shbot> emanuele6: no output
[09:11:39] *** Joins: edlou (uid413273@id-413273.helmsley.irccloud.com)
[09:12:20] <extern> ah ah..
[09:12:30] <emanuele6> what you want is `grep -vF 'something'', not `grep -vE '*something*'' which is invalid
[09:13:02] <extern> im standing corrected emanuele6 :D
[09:13:07] <eschwartz> you probably want to use anything at all that doesn't have 3 single quotes :p
[09:13:09] <emanuele6> (and doesn't mean what you what you think it means)
[09:13:32] <eschwartz> (why do people quote code as `...' anyway)
[09:13:45] <emanuele6> eschwartz: m4(1)
[09:13:53] <extern> weil es ist einfacher
[09:14:04] <eschwartz> torture me a bit more why don't you
[09:16:19] <tirnanog> p-i-: do you intend to keep using set -x indefinitely?
[09:16:53] <emanuele6> i'm surprised his code works at all
[09:16:59] <emanuele6> ssh -i $pem  $root_at_ip  $cmds
[09:17:15] <emanuele6> cmds is not quoted
[09:18:44] <tirnanog> it's getting away with it so far. but yes, it's wrong.
[09:18:46] *** Quits: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au) (Ping timeout: 260 seconds)
[09:19:08] <tirnanog> the reason it 'works' is because of the semicolons.
[09:19:20] *** Quits: extern (~archer@141.226.59.190) (Ping timeout: 268 seconds)
[09:19:28] <emanuele6> i have never tried using ssh like that, but even if it works, it will e.g. print the `"'s literally
[09:19:29] <p-i-> Oh, so if I "$cmds" I can dispense with the ; ?
[09:19:33] *** Joins: extern (~archer@141.226.59.235)
[09:19:47] <tirnanog> for one thing, yes.
[09:19:59] <emanuele6> p-i-: the HEREDOC is also unnecessary
[09:20:04] <emanuele6> you can simply write
[09:20:07] <emanuele6> cmds='
[09:20:10] <emanuele6> my command;
[09:20:13] <emanuele6> other command;
[09:20:16] <emanuele6> '
[09:20:20] <emanuele6> even without semicolons
[09:20:44] <tirnanog> heredocs are useful though. read -r cmd <<-'EOF'
[09:21:16] <tirnanog> -rd '' even
[09:21:22] <emanuele6> yes, you definitely want 'EOF'
[09:21:47] <emanuele6> you are getting away with not having it only because you are not using variables in your script
[09:22:15] <eschwartz> emanuele6: it's not ssh per se, but if you try printing the args to ssh you discover it is runnning the following command + argv
[09:22:17] <eschwartz> <ssh> <-i> <set> <-x> <;> <mkdir> <-p> <foo/> <;> <cd> <foo> <;> <echo> <"Setting> <up> <Tesseract"> <sudo> <apt> <install> <-y> <build-essential> <libpython3.9-dev> <;> <sudo> <apt> <install> <-y> <tesseract-ocr> <libtesseract-dev> <;> <pip> <install> <tesserocr> <;>
[09:22:28] <tirnanog> another way: f() { whatever; }; ssh ... "$(declare -f f); f'
[09:22:32] <tirnanog> er, f"
[09:22:56] *** Joins: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au)
[09:22:58] <eschwartz> oooor
[09:23:03] <emanuele6> eschwartz: i understand that
[09:23:19] <eschwartz> declare -f f > code; scp code server:/tmp/code; ssh server /tmp/code
[09:23:25] <emanuele6> that is why i said "but even if it works, it will e.g. print the `"'s literally"
[09:23:27] <p-i-> Ah I remembered why I had to use a more involved pattern. The $cmds itself needs to inssert a couple of $foo $bar variables.  https://bpa.st/BWRQ
[09:24:11] <eschwartz> wait no, there's our friend the execvp no-shebang again. ssh server bash /tmp/code
[09:24:34] <p-i-> tirnanog: the +x doesn't persist beyond remote-executing the code-block, which is as intended
[09:24:42] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[09:24:51] <tirnanog> p-i-: that wasn't my question. it was one of whether you're going to keep doing it indefinitely.
[09:24:54] <emanuele6> p-i-: that is a code injection
[09:25:16] <emanuele6> but you don't need an HEREDOC there too, you can simply use "" instead of ''
[09:25:29] <emanuele6> but you should not, because that is a code injection
[09:25:42] <tirnanog> because set -x is often used temporarily for debugging purposes. I have my reason for asking.
[09:25:51] <tirnanog> humour me and assume I have a good reason for asking.
[09:28:20] <p-i-> Sorry, just having trouble parsing your question. It's a setup.sh script for remote-setting up boxes. https://bpa.st/BTEA
[09:28:36] <tirnanog> let me put it as simply as possible: will set -x ever be removed?
[09:28:54] <tirnanog> (yes or no)
[09:28:55] <p-i-> Every time I need to add a package I fiddle the script, and re-run. It loops over deployed boxes.
[09:29:58] <p-i-> I still don't understand. I don't manually remove it. But if I later shell into my box, it isn't echoing back my commands. So I assume it is no longer in effect.
[09:30:16] <eschwartz> do you use set -x to debug your changes or is it intended to be a permanent part of the script
[09:30:19] <tirnanog> I'm asking if you ever will, not if you do at the present time.
[09:30:21] <tirnanog> it's a very simple question.
[09:30:58] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[09:31:04] <tirnanog> I can see that you use it at the present time.
[09:31:17] <tirnanog> I'm trying to establish whether you will do so in all perpetuity.
[09:31:26] <p-i-> oic. I'm doing it because it makes it easier to see what's going on from the terminal output. I wasn't planning on removing it. I find it helpful.
[09:31:34] <p-i-> If a command fails I can see which one failed.
[09:32:00] <tirnanog> in that case, using : instead of echo might be tolerable.
[09:32:37] <p-i-> Would be lovely if I could have the executed commands in a different colour. Is that possible?
[09:32:38] <tirnanog> # set -x; : "doing something ..."
[09:32:40] <shbot> tirnanog: + : 'doing something ...'
[09:32:54] *** Joins: z8z (~x@ac255238.ppp.asahi-net.or.jp)
[09:33:23] <p-i-> That's interesting!
[09:33:25] *** Joins: frostwork_ (~frostwork@user/frostwork)
[09:33:26] *** Joins: lonewulf1 (~lonewulf@user/lonewulf)
[09:33:27] <p-i-> What is : doing?
[09:33:32] *** Joins: ouzel8___ (~ouzel8_@shams.boastblast.com)
[09:33:32] <tirnanog> nothing. that's the trick.
[09:33:37] *** Joins: thebombzen_ (~thebombze@587232355.guest.umich.net)
[09:33:38] *** Quits: thebombzen_ (~thebombze@587232355.guest.umich.net) (Remote host closed the connection)
[09:33:47] <tirnanog> or, rather, it produces an exit status of 0, just as true does.
[09:33:49] *** Quits: lonewulf1 (~lonewulf@user/lonewulf) (Client Quit)
[09:33:52] <tirnanog> # help :
[09:33:53] <shbot> tirnanog: :: : -- http://ix.io/aPz
[09:33:56] <tirnanog> hmm.
[09:34:01] *** Joins: han-solo (~hanish@user/han-solo)
[09:34:04] <p-i-> I've never seen this!
[09:34:05] <tirnanog> well, as in the paste.
[09:34:22] *** Joins: JibStyle` (~user@c-71-198-134-61.hsd1.ca.comcast.net)
[09:34:26] <p-i-> Awesome!
[09:34:41] *** Quits: JibStyle` (~user@c-71-198-134-61.hsd1.ca.comcast.net) (Read error: Connection reset by peer)
[09:34:57] *** Joins: Malin8 (~CIA@seedbox.pirate.pt)
[09:35:14] <p-i-> Is it possible to have all the +foo dumps (caused by set -x) display in bold?
[09:35:18] *** Joins: comruminoAlt (~comrumino@li87-103.members.linode.com)
[09:35:20] *** Joins: voiceofreason_ (~voiceofre@207.148.10.181)
[09:35:22] *** Joins: lucerne9 (~lucerne@ip202.ip-51-178-215.eu)
[09:35:27] *** Joins: flommi_ (~flommi@puck942.startdedicated.de)
[09:35:40] *** Joins: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net)
[09:35:46] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[09:35:48] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:897:3ac8:6493:2e4e)
[09:35:49] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:897:3ac8:6493:2e4e) (Changing host)
[09:35:49] *** Joins: skapata (~Skapata@user/skapata)
[09:35:49] *** Joins: ryo_ (foobar@athena.nocsrv.de)
[09:35:49] *** Joins: xizhendu__ (~xizhendu@240e:305:7381:6400:b6be:9004:a525:ceb5)
[09:36:02] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Ping timeout: 260 seconds)
[09:36:22] *** Joins: lockywol- (~lockywolf@vultr-seoul-openbsd.lockywolf.net)
[09:36:29] *** Joins: capn_ (~capn@user/capn)
[09:36:39] *** Joins: LiENUX (~quake@108-242-135-2.lightspeed.btrgla.sbcglobal.net)
[09:36:45] *** Joins: omnigoat7 (~omnigoat@user/omnigoat)
[09:36:51] *** Joins: wolfshappen_ (~waff@irc.furworks.de)
[09:37:08] *** Joins: bodicceaII (~bodiccea@user/bodiccea)
[09:37:13] *** Joins: ezzieygu1wuf (~Unknown@user/ezzieyguywuf)
[09:37:26] *** Joins: simoneb_ (~simone@static.39.20.203.116.clients.your-server.de)
[09:37:55] *** Joins: Ps1-Jack (psi-jack@user/psi-jack)
[09:37:55] *** Joins: haliucin1s (~haliucina@5.20.153.21)
[09:38:08] *** Joins: whaa_ (~whaa@c-75-67-72-65.hsd1.ma.comcast.net)
[09:38:12] *** Joins: alkisg (~alkisg@2001:470:69fc:105::2d3)
[09:38:19] <extern> emanuele6: are you emanuele6 ferrera ?
[09:38:21] *** Joins: dstein64- (~dstein64@dannyadam.com)
[09:38:21] *** Joins: raffaele_ (~raffaele@ip-80-113-98-4.ip.prioritytelecom.net)
[09:38:28] <extern> emanuele ferrera*
[09:38:46] <alkisg> Hi, if I run `sleep 2 &`, I see `[1] 147387` and `[1]+  Done                    sleep 3`
[09:38:46] <alkisg> How can I background a job in an interactive shell, without seeing these messages?
[09:38:47] *** Joins: tolecnal_ (tolecnal@login.xiro.net)
[09:38:52] *** Joins: mags_ (~mags@097-090-237-145.res.spectrum.com)
[09:38:59] *** Joins: fjmorazan_ (~quassel@user/fjmorazan)
[09:39:03] <p-i-> eschwartz: do:() { (PS4='+ '; set -x; "$@") }  <-- this is really neat. I've never seen func:( syntax before.
[09:39:13] *** Joins: shailangsa_ (~shailangs@host217-39-45-200.range217-39.btcentralplus.com)
[09:39:48] *** Joins: redgloboli_ (~redglobol@user/redgloboli)
[09:39:50] *** Joins: bradp- (~bradp@cpe-70-92-7-182.wi.res.rr.com)
[09:40:02] *** Joins: jp (~jp@87-198-216-242.ptr.magnet.ie)
[09:40:14] <p-i-> alkisg: I think you could redirect stdout
[09:40:21] *** Joins: jinsun__ (~quassel@user/jinsun)
[09:40:30] <geirha> { sleep 2 & disown; } 2>/dev/null  but then you will no longer have control over it
[09:40:41] *** Joins: SkyWay5 (~apt@79.119.66.247)
[09:40:50] <alkisg> Thanks, trying...
[09:40:59] <tirnanog> p-i-: not so easily. you can meddle with the value of PS4. however, if you don't insert a resetting sequence, everything will be in bold. if you do, the reset will be positioned before the reported command.
[09:41:08] *** Joins: quesker_ (idnet@2600:3c01::f03c:91ff:feac:4ce2)
[09:41:24] <eschwartz> in () ???
[09:41:50] *** Joins: Tristam_ (~tristam@user/tristam)
[09:41:50] *** Joins: sven_ (~quassel@squint.a-oben.org)
[09:41:59] *** Joins: e0- (ec@rie.sdf.org)
[09:42:02] <eschwartz> ... oh, not my PS4
[09:42:09] *** Joins: nuc (~nuc@user/jessew)
[09:42:12] <emanuele6> extern: /whois emanuele6
[09:42:15] <emanuele6> "Emanuele Torre"
[09:42:16] <p-i-> eschwartz: So `do` is a function.. I've never seen a function defined in that way. What's it doing?
[09:42:35] *** Joins: SuperL4g (~akulbe@user/superlag)
[09:42:45] <eschwartz> it is defining a function named "do:"
[09:42:48] *** Joins: simplici1y (~yti@user/simplicity)
[09:42:56] <eschwartz> the : is a random, regular allowed character
[09:42:58] <emanuele6> i don't know who Emanuele Ferrara is
[09:43:02] *** Joins: adac (~adac@212-41-238-132.static.upcbusiness.at)
[09:43:22] <p-i-> eschwartz: What's it accomplishing here?
[09:43:45] *** Joins: jtopian (~quassel@nebulosa.jtopia.org)
[09:44:01] <eschwartz> it is cute and shticky, but you might just as easily use run_and_log() { (PS4='+ '; set -x; "$@") }
[09:44:10] <eschwartz> run_and_log mkdir -p foo/
[09:44:15] *** Joins: maharg101 (~maharg101@savoy.force9.co.uk)
[09:44:15] *** Joins: CRThaze0 (~weechat@188.166.44.58)
[09:44:18] *** Quits: scoobydoo (~scooby@user/scoobydoo) (*.net *.split)
[09:44:18] *** Quits: frostwork (~frostwork@user/frostwork) (*.net *.split)
[09:44:18] *** Quits: ezzieyguywuf (~Unknown@user/ezzieyguywuf) (*.net *.split)
[09:44:18] *** Quits: dstein64 (~dstein64@dannyadam.com) (*.net *.split)
[09:44:18] *** Quits: JibStyle (~user@c-71-198-134-61.hsd1.ca.comcast.net) (*.net *.split)
[09:44:18] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (*.net *.split)
[09:44:18] *** Quits: mags (~mags@097-090-237-145.res.spectrum.com) (*.net *.split)
[09:44:18] *** Quits: zeno1 (~zen@88.103.31.15) (*.net *.split)
[09:44:18] *** Quits: SuperLag (~akulbe@user/superlag) (*.net *.split)
[09:44:18] *** Quits: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp) (*.net *.split)
[09:44:18] *** Quits: wolfshappen (~waff@irc.furworks.de) (*.net *.split)
[09:44:18] *** Quits: sven^ (~quassel@squint.a-oben.org) (*.net *.split)
[09:44:18] *** Quits: simplicity (~yti@user/simplicity) (*.net *.split)
[09:44:18] *** Quits: sixwheeledbeast (~zem@user/sixwheeledbeast) (*.net *.split)
[09:44:18] *** Quits: shailangsa (~shailangs@host217-39-45-200.range217-39.btcentralplus.com) (*.net *.split)
[09:44:19] *** Quits: lorimer (~lorimer@user/lorimer) (*.net *.split)
[09:44:19] *** Quits: FreeBDSM (~uzer@user/freebdsm) (*.net *.split)
[09:44:19] *** Quits: maharg101_ (~maharg101@savoy.force9.co.uk) (*.net *.split)
[09:44:19] *** Quits: bodiccea_ (~bodiccea@user/bodiccea) (*.net *.split)
[09:44:19] *** Quits: lsrtl__ (~lsrtl@user/lsrtl) (*.net *.split)
[09:44:19] *** Quits: mat001_ (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (*.net *.split)
[09:44:19] *** Quits: jinsun (~quassel@user/jinsun) (*.net *.split)
[09:44:19] *** Quits: zaz\ (~zaz@poneybl.eu) (*.net *.split)
[09:44:19] *** Quits: rtjure (~rtjure@bras-79-132-17-74.comnet.bg) (*.net *.split)
[09:44:19] *** Quits: xizhendu_ (~xizhendu@106.38.171.198) (*.net *.split)
[09:44:19] *** Quits: terrorjack (~terrorjac@static.3.200.12.49.clients.your-server.de) (*.net *.split)
[09:44:19] *** Quits: Psi-Jack (psi-jack@user/psi-jack) (*.net *.split)
[09:44:19] *** Quits: thebombzen (~thebombze@587232355.guest.umich.net) (*.net *.split)
[09:44:19] *** Quits: haliucinas (~haliucina@5.20.153.21) (*.net *.split)
[09:44:19] *** Quits: fjmorazan (~quassel@user/fjmorazan) (*.net *.split)
[09:44:19] *** Quits: murder (mdr@chton.secunit.org) (*.net *.split)
[09:44:19] *** Quits: redgloboli (~redglobol@user/redgloboli) (*.net *.split)
[09:44:19] *** Quits: CRThaze (~weechat@188.166.44.58) (*.net *.split)
[09:44:19] *** Quits: skreech (skreech@user/skreech) (*.net *.split)
[09:44:19] *** Quits: grep_xtrange (~x@ac255238.ppp.asahi-net.or.jp) (*.net *.split)
[09:44:19] *** Quits: tolecnal (tolecnal@login.xiro.net) (*.net *.split)
[09:44:19] *** Quits: cim (~cim@205.185.117.110) (*.net *.split)
[09:44:19] *** Quits: flommi (~flommi@puck942.startdedicated.de) (*.net *.split)
[09:44:19] *** Quits: whaa (~whaa@c-75-67-72-65.hsd1.ma.comcast.net) (*.net *.split)
[09:44:19] *** Quits: e0 (ec@user/e0) (*.net *.split)
[09:44:19] *** Quits: birkoff (birkoff@user/birkoff) (*.net *.split)
[09:44:19] *** Quits: JesseW (~nuc@user/jessew) (*.net *.split)
[09:44:19] *** Quits: rafspiny (~raffaele@ip-80-113-98-4.ip.prioritytelecom.net) (*.net *.split)
[09:44:19] *** Quits: capn (~capn@user/capn) (*.net *.split)
[09:44:19] *** Quits: pieguy128 (~pieguy128@bas1-montreal02-65-92-163-194.dsl.bell.ca) (*.net *.split)
[09:44:20] *** Quits: LiENUS (~quake@108-242-135-2.lightspeed.btrgla.sbcglobal.net) (*.net *.split)
[09:44:20] *** Quits: lucerne (~lucerne@ip202.ip-51-178-215.eu) (*.net *.split)
[09:44:20] *** Quits: lockywolf (~lockywolf@vultr-seoul-openbsd.lockywolf.net) (*.net *.split)
[09:44:20] *** Quits: Malin (~CIA@seedbox.pirate.pt) (*.net *.split)
[09:44:20] *** Quits: chronon (~chronon@user/chronon) (*.net *.split)
[09:44:20] *** Quits: bionade24 (~bionade24@server2.oscloud.info) (*.net *.split)
[09:44:20] *** Quits: Anvil (~anvil@193.252.149.222) (*.net *.split)
[09:44:20] *** Quits: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com) (*.net *.split)
[09:44:20] *** Quits: SkyWay (~apt@79.119.66.247) (*.net *.split)
[09:44:20] *** Quits: Friithian (gunqqer@friithian.dev) (*.net *.split)
[09:44:20] *** Quits: Tristam (~tristam@user/tristam) (*.net *.split)
[09:44:20] *** Quits: almostdvs (~almostdvs@162.154.206.233) (*.net *.split)
[09:44:20] *** Quits: varazir (~mircwars@217-115-51-247.cust.bredband2.com) (*.net *.split)
[09:44:20] *** Quits: bradp (~bradp@cpe-70-92-7-182.wi.res.rr.com) (*.net *.split)
[09:44:20] *** Quits: ouzel8_ (~ouzel8_@shams.boastblast.com) (*.net *.split)
[09:44:20] *** Quits: erhandsome (~erhandsom@user/erhandsome) (*.net *.split)
[09:44:20] *** Quits: simoneb (~simone@static.39.20.203.116.clients.your-server.de) (*.net *.split)
[09:44:20] *** Quits: Alternity (~Alternity@user/alternity) (*.net *.split)
[09:44:20] *** Quits: jelly (jelly@user/jelly) (*.net *.split)
[09:44:20] *** Quits: dlam (~dlam@dlam.me) (*.net *.split)
[09:44:20] *** Quits: glider (~glider@user/glider) (*.net *.split)
[09:44:20] *** Quits: knirch (knirch@ifelse.fi) (*.net *.split)
[09:44:20] *** Quits: quesker (~idnet@mail.89vx.net) (*.net *.split)
[09:44:20] *** Quits: omnigoat (~omnigoat@user/omnigoat) (*.net *.split)
[09:44:20] *** Quits: voldial (~user@user/voldial) (*.net *.split)
[09:44:20] *** Quits: voiceofreason (~voiceofre@207.148.10.181) (*.net *.split)
[09:44:20] *** Quits: comrumino (~comrumino@li87-103.members.linode.com) (*.net *.split)
[09:44:20] *** Quits: ryo (foobar@user/ryo) (*.net *.split)
[09:44:20] *** Quits: diverdude (~user@176-21-102-230-cable.dk.customer.tdc.net) (*.net *.split)
[09:44:20] *** Quits: CoderCop (~CoderCop@user/codercop) (*.net *.split)
[09:44:20] *** Quits: jp11 (~jp@87-198-216-242.ptr.magnet.ie) (*.net *.split)
[09:44:20] *** Quits: xaxas (~quassel@nebulosa.jtopia.org) (*.net *.split)
[09:44:20] *** Quits: koala_man (~vidar@157.146.251.23.bc.googleusercontent.com) (*.net *.split)
[09:44:20] *** Quits: mikeputnam (~mikeputna@wilug/mikeputnam) (*.net *.split)
[09:44:20] *** Quits: auri (~quassel@fsf/member/auri) (*.net *.split)
[09:44:20] *** Ps1-Jack is now known as Psi-Jack
[09:44:20] *** dstein64- is now known as dstein64
[09:44:20] *** Malin8 is now known as Malin
[09:44:20] *** lucerne9 is now known as lucerne
[09:44:20] *** quesker_ is now known as quesker
[09:44:21] *** SkyWay5 is now known as SkyWay
[09:44:21] *** omnigoat7 is now known as omnigoat
[09:44:34] *** Joins: tobybl (~tobybl@31.111.35.255)
[09:44:34] <eschwartz> do: mkdir -p foo/
[09:44:49] *** Joins: Anvil (~anvil@193.252.149.222)
[09:44:51] *** Joins: rtjure (~rtjure@bras-79-132-17-74.comnet.bg)
[09:44:54] <eschwartz> function "do:" with args "mkdir", "-p", "foo/"
[09:45:37] <eschwartz> the function sets up a subshell, ensures the default PS4, sets up set -x, and then runs one command, that being "$@"
[09:45:39] *** Joins: situ (situ@nat-pool-brq-t.redhat.com)
[09:45:43] *** Joins: scoobydoo (~scooby@user/scoobydoo)
[09:45:43] *** Joins: terrorjack (~terrorjac@static.3.200.12.49.clients.your-server.de)
[09:45:50] *** Joins: zaz\ (~zaz@poneybl.eu)
[09:45:52] *** Joins: skreech (skreech@user/skreech)
[09:46:27] *** Joins: diverdude (~user@176.21.102.230)
[09:46:27] *** Joins: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp)
[09:46:27] *** Joins: sixwheeledbeast (~zem@user/sixwheeledbeast)
[09:46:27] *** Joins: FreeBDSM (~uzer@user/freebdsm)
[09:46:27] *** Joins: murder (mdr@chton.secunit.org)
[09:46:27] *** Joins: pieguy128 (~pieguy128@bas1-montreal02-65-92-163-194.dsl.bell.ca)
[09:46:27] *** Joins: chronon (~chronon@user/chronon)
[09:46:27] *** Joins: almostdvs (~almostdvs@162.154.206.233)
[09:46:27] *** Joins: glider (~glider@user/glider)
[09:46:27] *** Joins: knirch (knirch@ifelse.fi)
[09:46:27] *** Joins: mikeputnam (~mikeputna@wilug/mikeputnam)
[09:46:29] <eschwartz> which then consumes all args to the function, so you actually run mkdir -p foo/
[09:46:50] *** Joins: jinsun (~quassel@user/jinsun)
[09:47:04] *** Quits: jinsun__ (~quassel@user/jinsun) (Read error: Connection reset by peer)
[09:47:09] <eschwartz> and then upon leaving the subshell and hence also the function, set -x is cleared (it cannot survive outside of its subshell)
[09:47:16] <eschwartz> modern bash can do this:
[09:47:18] *** Joins: erhandsome (~erhandsom@user/erhandsome)
[09:47:20] *** Joins: auri (~quassel@fsf/member/auri)
[09:47:28] *** Quits: BrowseMan (~BrowseMan@about/openbglab/browseman) (Excess Flood)
[09:47:41] *** Joins: BrowseMan (~BrowseMan@78.130.185.116)
[09:47:42] <eschwartz> do:() { local - PS4='+ '; set -x; "$@"; }
[09:47:50] *** Joins: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com)
[09:48:14] *** Quits: greybot (~greybot@remote.wooledge.org) (Ping timeout: 250 seconds)
[09:48:15] <p-i-> So could I instead do print_and_run() { echo "$@" ; "$@" } which would let me insert a color-code in the echo, so the command gets printed in bold before executing?
[09:48:24] *** Joins: dlam (~dlam@dlam.me)
[09:48:30] *** Joins: CoderCop (~CoderCop@user/codercop)
[09:48:46] <eschwartz> there are significant differences between set -x and "echo the command first"
[09:48:49] *** Joins: zeno1 (~zen@88.103.31.15)
[09:49:02] <eschwartz> set -x will automatically handle correctly printing commands with spaces, for example
[09:49:15] <geirha> printf '%s\n' "${*@Q}"  will be closer
[09:49:34] <eschwartz> # print_and_run() { echo "$@" ; "$@"; }; print_and_run echo "hi there:
[09:49:41] <shbot> eschwartz: Missing terminating quote, bracket or keyword
[09:49:44] <eschwartz> # print_and_run() { echo "$@" ; "$@"; }; print_and_run echo "hi there"
[09:49:46] <shbot> eschwartz: echo hi there
[09:49:46] <shbot> eschwartz: hi there
[09:50:20] <eschwartz> # print_and_run() { (PS4='+ '; set -x; "$@") }; print_and_run echo "hi there"
[09:50:22] <shbot> eschwartz: + echo 'hi there'
[09:50:22] <shbot> eschwartz: hi there
[09:50:28] *** Joins: greybot (~greybot@remote.wooledge.org)
[09:50:31] *** Joins: voldial (~user@195.179.201.175)
[09:50:50] <eschwartz> # print_and_run() { printf '%s\n' "${*@Q}" ; "$@"; }; print_and_run echo "hi there"
[09:50:51] <shbot> eschwartz: 'echo' 'hi there'
[09:50:51] <shbot> eschwartz: hi there
[09:50:51] *** Quits: armands (~armands@46.109.8.165) (Read error: Connection reset by peer)
[09:51:04] *** Quits: sinaowolabi_ (~SinaOwola@102.134.114.1) (Ping timeout: 252 seconds)
[09:51:21] *** Joins: Friithian (gunqqer@friithian.dev)
[09:51:26] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 260 seconds)
[09:52:06] *** Joins: birkoff (birkoff@birkoff.thunderirc.net)
[09:52:10] <eschwartz> notice geirha's @Q suggestion gets you most of the way there, but has the unfortunate tendency to over-quote whcih set -x does not; it has the same meaning, but set -x is prettier
[09:52:22] <emanuele6> alkisg: { sleep 2 & } 2> /dev/null
[09:52:26] *** Quits: n4dir (~user@mue-88-130-56-201.dsl.tropolys.de) (Remote host closed the connection)
[09:52:30] *** birkoff is now known as Guest6605
[09:52:36] <geirha> and @Q is fairly new
[09:52:50] <geirha> emanuele6: That'll show the [1] Done  message though
[09:52:59] *** Joins: n4dir (~user@mue-88-130-56-201.dsl.tropolys.de)
[09:53:00] <emanuele6> oh, right
[09:53:12] <emanuele6> { sleep 2 & disown } 2> /dev/null
[09:53:21] <emanuele6> unless you must manage it
[09:53:33] <alkisg> Yeah, disown was needed. Problem solved, thanks all
[09:53:53] <alkisg> I did test disown but I didn't think about 2>/dev/null :)
[09:54:00] <emanuele6> alkisg: you probably also want to 2>&1 > /dev/null the command
[09:54:14] <emanuele6> { sleep 2 2>&1 > /dev/null & disown } 2> /dev/null
[09:54:19] <alkisg> The final command I used was: for i in `seq 1 255`; do { host 10.32.7.$i | grep -v 'not found' & disown; } 2>/dev/null; done
[09:54:33] <emanuele6> or maybe not :)
[09:54:48] <emanuele6> !for`
[09:54:48] <greybot> Never do this: for x in $(command) or `command` or $var. for-in is used for iterating arguments, not (output) strings. Instead, use a glob (eg. *.txt), arrays (eg. "${names[@]}") or a while-read loop (eg. while read -r line). See http://mywiki.wooledge.org/BashPitfalls#pf1 and http://mywiki.wooledge.org/DontReadLinesWithFor
[09:54:50] <alkisg> To parallelize these quick reverse dns lookups while avoiding cluttering the output
[09:55:00] <emanuele6> !forc
[09:55:03] <emanuele6> !cfor
[09:55:03] <greybot> C-style for loop: for (( INIT; COND; STEP )) do COMMANDS; done # Evaluate INIT; then, while COND evaluates to true, do COMMANDS, and evaluate STEP. Each expression is evaluated in a math context. Example: for ((i=1; i<=n; i++)) do echo "$i"; done. Use in place of the non-working: for i in {1..$number}
[09:55:18] *** Joins: tsujp (~tsujp@sourcehut/user/tsujp)
[09:55:22] <emanuele6> !faq 1 > or alternatively: seq 1 255 | while read -r; do ...
[09:55:23] <greybot> or alternatively: seq 1 255 | while read -r; do ...: https://mywiki.wooledge.org/BashFAQ/001 -- How can I read a file (data stream, variable) line-by-line (and/or field-by-field)?
[09:55:24] <geirha> { for i in {1..255}; do host 10.32.7."$1" | grep -v 'not found' & done; wait; } 2>/dev/null
[09:55:24] <han-solo> # echo {1..255}
[09:55:27] <shbot> han-solo: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 \
[09:55:27] <shbot> han-solo: 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 \
[09:55:27] <shbot> han-solo: 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255
[09:55:28] *** Joins: sixwheel- (~zem@user/sixwheeledbeast)
[09:55:34] <han-solo> welp
[09:55:37] <geirha> gah, $1 -> $i
[09:55:58] *** Joins: varazir (~mircwars@217-115-51-247.cust.bredband2.com)
[09:56:14] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[09:56:24] *** Quits: sixwheeledbeast (~zem@user/sixwheeledbeast) (Ping timeout: 252 seconds)
[09:56:24] <alkisg> Haha, that's a lot of information! Unfortunately I haven't yet managed to learn bash-specific code, as my code usually needs to be compatible with busybox ash, so I don't know all these nice bash constructs
[09:56:45] <alkisg> It would help my command line skills significantly though!
[09:56:52] <emanuele6> alkisg: still, you cause: seq 1 100 | while read -r; do ...
[09:56:59] <emanuele6> not bash specific and not wrong
[09:57:22] <p-i-> ðŸ™ tirnanog geirha eschwartz
[09:57:39] <geirha> # seq 99 100
[09:57:40] <shbot> geirha: ninety-nine
[09:57:40] <shbot> geirha: one hundred
[09:58:18] *** Joins: gxt_ (~gxt@gateway/tor-sasl/gxt)
[09:58:20] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Remote host closed the connection)
[09:58:21] <emanuele6> seq 1 100 | { while IFS= read -r i; do host 10.32.7."$i" | grep -v 'not found' & done; wait ;}
[09:58:32] <emanuele6> but, yeah, you can't truest the output of seq
[09:58:46] <tirnanog> i=1; while [ "$i" -le 255 ]; do ...; : $(( i += 1 )); done
[09:58:49] <alkisg> emanuele6: I'm reading the first two links but I don't see what's wrong with for/in while looping. I can imagine that if one uses big numbers that exceed max cmdline size that would be a problem, but for 1..255, it saves some typing...
[09:59:35] <geirha> the shell has no ARG_MAX limit, so that part isn't problematic
[09:59:51] <geirha> though generating a million strings with either $() or {..} will eat a lot of memory
[09:59:54] <emanuele6> no, for var in ...; is not affected by ARG_MAX
[10:00:17] *** Joins: mihaiadrian (~Thunderbi@82.76.223.244)
[10:00:27] <geirha> for (( i = 1; i <= 255; ++i )); do
[10:00:54] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[10:01:55] <emanuele6> for i in `seq 1 100` relies on word splitting; and may expand patterns
[10:02:26] *** Joins: totenkoph (~scythe@user/totenkoph)
[10:02:36] *** Joins: aniruddha (uid340443@id-340443.ilkley.irccloud.com)
[10:02:50] <alkisg> You mean that if I somehow had a bad IFS that didn't have space in it, right?
[10:03:00] *** Quits: sandb0y (~pirate@user/sandb0y) (Quit: WeeChat 3.3)
[10:03:00] *** Joins: lavaball (felix@31.204.155.215)
[10:03:20] <eschwartz> or if you try to process content which may have space in it
[10:03:28] <emanuele6> alkisg: not space, but newline
[10:03:42] *** Joins: bionade24 (~bionade24@server2.oscloud.info)
[10:03:43] <emanuele6> but actually it depends because who knows what seq will output
[10:03:49] <emanuele6> !seq
[10:03:49] <greybot> seq(1) is nonstandard, inefficient and useless. For bash2.04+/zsh/ksh93, use for ((i = 1; i <= 10; i++)); do ..., bash3.0+, use for i in {1..10}, for POSIX and other shells, see !counting
[10:03:54] <eschwartz> for file in `ls dir/`; do process_file "$file"; done
[10:04:07] <eschwartz> ^^ then you have a file named dir/foo\ bar
[10:04:07] <alkisg> I could do i=0; while... i=$((i + 1)), and I would do it if I was writing a script, but for a quick command, I don't know it seems like an overkill... you guys are trying to write optimized code even in the usual commands you type?
[10:04:44] <alkisg> (I couldn't do the other commands you said as I don't know bashisms yet, e.g. ++i wouldn't cross my mind... :))
[10:04:49] <emanuele6> it's not a matter of optimization, it's a matter of code correctness
[10:05:06] <geirha> for such a small range, I'd use brace expansion in an interactive session. for i in {1..255}; do
[10:05:09] <alkisg> And you do that while typing everyday commands?
[10:05:09] <alkisg> That's very nice!
[10:05:22] <eschwartz> the other mentioned problem is that you can run out of memory if you iterate over lots of values and that for loop expansion explodes
[10:06:03] <alkisg> geirha: still a bashism, I haven't yet wired these into my brain...
[10:06:10] <eschwartz> !counting
[10:06:10] <greybot> Basic loops: Bash/Zsh/ksh93: Â«for ((i = 0; i < 10; i++)) do â€¦; doneÂ», For small constants: Â«for i in {0..9}; do â€¦; doneÂ» ksh: Â«i=-1; while ((++i < 10)); do â€¦; doneÂ», POSIX: Â«i=-1; while i=$((i + 1)); [ "$i" -lt 10 ]; do â€¦; doneÂ» http://mywiki.wooledge.org/BashGuide/TestsAndConditionals#Conditional_Loops
[10:06:33] <alkisg> Yeah, I'd the last one, the POSIX one
[10:06:35] <eschwartz> there is a posix one listed ;)
[10:06:40] <geirha> sure, but you don't use use busybox ash as interactive shell :p
[10:06:49] <geirha> unless you like pain
[10:06:51] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[10:06:57] <eschwartz> a lot of people do, apparently
[10:07:04] <eschwartz> I mean
[10:07:11] <eschwartz> it's better than dash
[10:07:20] <eschwartz> at least you get line editing out of the box
[10:07:27] <geirha> dash has line editing
[10:07:36] <alkisg> Of course, and I don't like pain, but since I'm writing busybox code more than I'm typing shell commands, I didn't yet manage to dedicate the brain power to learn bashisms in a separate ..."brain chapter", one that I can set aside when programming...
[10:07:39] <geirha> set -o emacs, and voila (or set -o vi)
[10:08:21] <eschwartz> I did mention "out of the box"
[10:08:49] <geirha> though debian/ubuntu builds dash without line editing to make it "faster". Vanilla dash does include line editing though
[10:08:53] <eschwartz> every time I start dash interactively I have to re-remember that pain point the hard way
[10:09:12] <eschwartz> wat
[10:09:18] *** Quits: shailangsa_ (~shailangs@host217-39-45-200.range217-39.btcentralplus.com) ()
[10:09:22] <eschwartz> is it really "faster" lol
[10:10:16] <geirha> startup time is, but then you have to use a bunch more subshells than you would've needed with bash, and all that time gain is lost
[10:10:17] <pj> it's debian
[10:10:18] <alkisg> Of course my command line shell is bash. But I'm afraid that if I start using {1..255} in my daily tasks, without first taking the time to create a separate "namespace" in my brain, then I"ll forget myself
[10:10:18] <alkisg> and start using them in scripts too, and they'll work while I test them in bash, and then fail when I update-initramfs and try to boot a client and run them in busybox...
[10:10:26] <pj> they think they know better for everything they build.
[10:10:45] <eschwartz> I mean do they really seriously think that stripping out line editing is faster
[10:10:48] <alkisg> A "language variant" does require dedicating some time to learn it properly
[10:11:55] <alkisg> OK back to work, thank you all!
[10:13:01] <emanuele6> earendel: at least startup time wise, yes by a lot; i did this test a while ago http://paste.wooledge.org/9384
[10:13:08] <emanuele6> oh, geirha already said it
[10:13:17] <emanuele6> also i meant to mention eschwartz
[10:13:48] *** Joins: jelly (jelly@user/jelly)
[10:13:52] *** Joins: shailangsa (~shailangs@host217-39-45-200.range217-39.btcentralplus.com)
[10:14:16] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Quit: = "")
[10:14:27] <pj> I still recall the time that debian patched up Firefox so much that mozilla told them they can't call it Firefox anymore.
[10:15:52] <emanuele6> extern: by the way, who's this "ferrara" guy?
[10:15:59] *** ryo_ is now known as ryo
[10:15:59] *** Quits: ryo (foobar@athena.nocsrv.de) (Changing host)
[10:15:59] *** Joins: ryo (foobar@user/ryo)
[10:16:04] <geirha> Is that how IceWeasel came about?
[10:16:35] <emanuele6> https://en.wikipedia.org/wiki/Mozilla_software_rebranded_by_Debian
[10:17:32] <geirha> ah yes
[10:19:54] *** Joins: pieguy128_ (~pieguy128@bras-base-mtrlpq5031w-grc-57-65-92-163-194.dsl.bell.ca)
[10:20:28] *** Joins: glider_ (~glider@user/glider)
[10:20:32] *** Quits: glider (~glider@user/glider) (Ping timeout: 252 seconds)
[10:20:32] *** Quits: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 252 seconds)
[10:20:38] *** Quits: pieguy128 (~pieguy128@bas1-montreal02-65-92-163-194.dsl.bell.ca) (Read error: Connection reset by peer)
[10:20:43] *** Quits: mikeputnam (~mikeputna@wilug/mikeputnam) (Ping timeout: 252 seconds)
[10:22:27] *** Joins: mikeputnam (~mikeputna@wilug/mikeputnam)
[10:23:00] <eschwartz> emanuele6: I have known for years and years and years that dash starts up faster than bash in the general sense. My shock is that debian would claim dash *still* isn't fast enough and they need to disable linking to libedit in order to squeeze more performance out
[10:25:49] *** Joins: knirch_ (knirch@ifelse.fi)
[10:26:08] *** Quits: Scarecr0w (scarecr0w@user/scarecr0w) (Remote host closed the connection)
[10:26:47] *** Quits: knirch (knirch@ifelse.fi) (Ping timeout: 252 seconds)
[10:26:47] *** Quits: diverdude (~user@176.21.102.230) (Ping timeout: 252 seconds)
[10:27:16] *** Quits: mihaiadrian (~Thunderbi@82.76.223.244) (Remote host closed the connection)
[10:27:32] *** Joins: mihaiadrian (~Thunderbi@82.76.223.244)
[10:32:23] *** Joins: rendar (~rendar@user/rendar)
[10:32:47] *** Joins: diverdude (~user@176-21-102-230-cable.dk.customer.tdc.net)
[10:33:23] *** Joins: mihaiadrian2 (~Thunderbi@92.81.30.221)
[10:33:41] *** Quits: richardm75_ (~richardm7@2600:8801:c507:2900:2418:a102:f77b:9bf7) (Ping timeout: 264 seconds)
[10:34:17] *** Quits: mihaiadrian (~Thunderbi@82.76.223.244) (Ping timeout: 264 seconds)
[10:34:17] *** mihaiadrian2 is now known as mihaiadrian
[10:35:26] *** Joins: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp)
[10:36:19] *** Quits: n4dir (~user@mue-88-130-56-201.dsl.tropolys.de) (Remote host closed the connection)
[10:37:00] *** Joins: mihaiadrian2 (~Thunderbi@82.76.223.244)
[10:38:04] *** Hash is now known as websec
[10:38:55] *** Quits: mihaiadrian (~Thunderbi@92.81.30.221) (Ping timeout: 252 seconds)
[10:38:55] *** mihaiadrian2 is now known as mihaiadrian
[10:40:03] *** Quits: xizhendu__ (~xizhendu@240e:305:7381:6400:b6be:9004:a525:ceb5) (Remote host closed the connection)
[10:40:20] *** Quits: vysn (~vysn@user/vysn) (Quit: WeeChat 3.2)
[10:40:39] *** Joins: vysn (~vysn@user/vysn)
[10:40:48] *** websec is now known as Hash
[10:41:04] *** Joins: _0x5fc31 (~0x5fc3@wireguard/tunneler/-0x5fc3)
[10:41:08] *** Joins: eson123 (~eson123@118.69.128.37)
[10:41:44] *** Quits: swoolley (~seth@user/swoolley) (Ping timeout: 252 seconds)
[10:41:49] *** Joins: uhu- (~uhu@static.101.168.216.95.clients.your-server.de)
[10:41:50] *** Joins: mcfrd (~mcfrdy@user/mcfrdy)
[10:42:05] <eson123> guys, is there anyhow i can parse all of the color character that is wrapping around my text through any editor or through the terminal but with full details ? for now i don't see any editor which can help me do that and my terminal actually truncates the first few lines because my file is too long
[10:42:10] *** Joins: tedster- (~Tedster@rampage.tedster.net)
[10:42:17] *** Quits: SuperL4g (~akulbe@user/superlag) (Ping timeout: 252 seconds)
[10:42:17] *** Quits: uhu (~uhu@static.101.168.216.95.clients.your-server.de) (Ping timeout: 252 seconds)
[10:42:17] *** Quits: Hyde (~MrHyde@static.54.68.46.78.clients.your-server.de) (Ping timeout: 252 seconds)
[10:42:17] *** Quits: obiwahn (~heini@user/obiwahn) (Ping timeout: 252 seconds)
[10:42:17] *** Quits: Nahra (~user@static.161.95.99.88.clients.your-server.de) (Ping timeout: 252 seconds)
[10:42:17] *** Quits: matthewcroughan_ (~quassel@static.211.38.12.49.clients.your-server.de) (Ping timeout: 252 seconds)
[10:42:20] <eson123> editor can show everything tho, but it doesn't parse out the color text
[10:42:28] *** Joins: matthewcroughan (~quassel@static.211.38.12.49.clients.your-server.de)
[10:42:38] *** Joins: SuperLag (~akulbe@user/superlag)
[10:42:50] *** Joins: Nahra` (~user@static.161.95.99.88.clients.your-server.de)
[10:42:50] *** Quits: sven_ (~quassel@squint.a-oben.org) (Ping timeout: 252 seconds)
[10:42:50] *** Quits: tedster (~Tedster@rampage.tedster.net) (Ping timeout: 252 seconds)
[10:42:50] *** Quits: _0x5fc3 (~0x5fc3@wireguard/tunneler/-0x5fc3) (Ping timeout: 252 seconds)
[10:42:50] *** Quits: joo (~joo@fsf/member/joo--) (Ping timeout: 252 seconds)
[10:42:50] *** Quits: mcfrdy (~mcfrdy@user/mcfrdy) (Ping timeout: 252 seconds)
[10:42:50] *** Quits: cisco87 (~quassel@lnxg33k.com) (Ping timeout: 252 seconds)
[10:42:51] *** _0x5fc31 is now known as _0x5fc3
[10:42:59] *** Joins: cisco87_ (~quassel@lnxg33k.com)
[10:43:02] *** Quits: extern (~archer@141.226.59.235) (Quit: WeeChat 3.2.1)
[10:43:05] *** Joins: situ_ (~situ@nat-pool-brq-u.redhat.com)
[10:43:12] *** Quits: situ (situ@nat-pool-brq-t.redhat.com) (Ping timeout: 268 seconds)
[10:43:28] *** Joins: sven^ (~quassel@squint.a-oben.org)
[10:43:38] *** Joins: swoolley (~seth@user/swoolley)
[10:44:07] *** Quits: reset (~reset@user/reset) (Quit: reset)
[10:44:07] *** Joins: Hyde (~MrHyde@static.54.68.46.78.clients.your-server.de)
[10:44:44] *** Joins: xizhendu__ (~xizhendu@106.38.171.198)
[10:44:50] *** mcfrd is now known as mcfrdy
[10:45:43] *** Quits: CrypticSquared (~CrypticS_@user/crypticsquared) (Quit: Leaving...)
[10:45:48] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Quit: WeeChat 3.3)
[10:46:02] *** Joins: CrypticSquared (~CrypticS_@user/crypticsquared)
[10:48:10] *** Joins: AsenMx (~AsenMx@78.90.248.234)
[10:48:50] *** Joins: matthewcroughan_ (~quassel@static.211.38.12.49.clients.your-server.de)
[10:48:53] *** tolecnal_ is now known as tolecnal
[10:49:12] *** Joins: blaisebool_ (~blaiseboo@static.247.123.46.78.clients.your-server.de)
[10:49:26] *** Quits: xiongxin (~quassel@119.123.101.90) (Ping timeout: 252 seconds)
[10:49:37] <geirha> the typical way to deal with that is to tell the command that output the coloured text to not output those terminal escapes in the first place
[10:49:37] *** Joins: OMGOMG_ (~bobrobert@poppy.ifi.uio.no)
[10:49:48] *** Joins: micronnn (~micronn@user/micronn)
[10:50:06] *** Joins: jsrnop1 (~mark@user/jsrnop)
[10:50:12] *** Quits: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de) (Ping timeout: 250 seconds)
[10:50:13] *** Joins: _val_ (~valentin@82-169-14-137.biz.kpn.net)
[10:50:14] *** Joins: Huy[m]1 (~huyngoenv@2001:470:69fc:105::dbc7)
[10:50:28] *** Joins: situ (~situ@nat-pool-brq-u.redhat.com)
[10:50:48] *** Joins: diverdud1 (~user@176-21-102-230-cable.dk.customer.tdc.net)
[10:51:06] *** Joins: mnabid_ (uid448607@user/mnabid)
[10:51:07] *** Joins: compuguy2 (ahall@user/compuguy)
[10:51:12] *** Quits: matthewcroughan (~quassel@static.211.38.12.49.clients.your-server.de) (Quit: No Ping reply in 180 seconds.)
[10:51:12] *** Quits: micronn (~micronn@user/micronn) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: mnabid (uid448607@user/mnabid) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: OMGOMG (~bobrobert@poppy.ifi.uio.no) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com) (Remote host closed the connection)
[10:51:12] *** Quits: _val__ (~valentin@82-169-14-137.biz.kpn.net) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: compuguy (ahall@user/compuguy) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: Huy[m] (~huyngoenv@2001:470:69fc:105::dbc7) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: situ_ (~situ@nat-pool-brq-u.redhat.com) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: diverdude (~user@176-21-102-230-cable.dk.customer.tdc.net) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: vancz (~vancz@user/vancz) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: xizhendu__ (~xizhendu@106.38.171.198) (Read error: Connection reset by peer)
[10:51:12] *** Quits: ori (~atdt@user/ori) (Ping timeout: 252 seconds)
[10:51:12] *** Quits: mz` (~mz`@user/mz/x-8532539) (Ping timeout: 252 seconds)
[10:51:12] *** compuguy2 is now known as compuguy
[10:51:12] *** mnabid_ is now known as mnabid
[10:51:26] *** Joins: ori (~atdt@user/ori)
[10:51:30] *** Quits: AsenMx (~AsenMx@78.90.248.234) (Client Quit)
[10:51:41] *** Quits: jsrnop (~mark@user/jsrnop) (Ping timeout: 252 seconds)
[10:51:41] *** jsrnop1 is now known as jsrnop
[10:51:51] *** Joins: t3nj1n_ (~t3nj1n@pool-96-246-146-100.nycmny.fios.verizon.net)
[10:52:11] *** Joins: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com)
[10:52:14] *** Quits: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp) (Ping timeout: 252 seconds)
[10:52:47] *** Quits: jab416171 (~jab416171@c-174-52-53-66.hsd1.ut.comcast.net) (Ping timeout: 252 seconds)
[10:53:07] *** Joins: vancz (~vancz@user/vancz)
[10:53:43] *** Joins: xizhendu__ (~xizhendu@106.38.171.198)
[10:53:55] *** Joins: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp)
[10:53:58] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[10:54:20] *** Joins: suffer (znc@mutant.penguin.fyi)
[10:54:22] *** Joins: rdrg109_ (~rdrg109@51.195.232.80)
[10:54:31] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[10:54:36] *** Parts: FreeBDSM (~uzer@user/freebdsm) ()
[10:54:51] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[10:54:52] *** Joins: eggbean_ (~eggbean@user/eggbean)
[10:55:44] *** Joins: woky (~woky@li1651-31.members.linode.com)
[10:55:49] *** Joins: jab416171 (~jab416171@c-174-52-53-66.hsd1.ut.comcast.net)
[10:56:20] *** Joins: obiwahn (~heini@user/obiwahn)
[10:56:27] *** Joins: joo (~joo@fsf/member/joo--)
[10:56:35] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 252 seconds)
[10:57:02] *** Quits: rdrg109 (~rdrg109@51.195.232.80) (Ping timeout: 252 seconds)
[10:57:02] *** Quits: t3nj1n (~t3nj1n@pool-96-246-146-100.nycmny.fios.verizon.net) (Ping timeout: 252 seconds)
[10:57:02] *** Quits: eggbean (~eggbean@user/eggbean) (Ping timeout: 252 seconds)
[10:57:03] *** Quits: strungout (znc@mutant.penguin.fyi) (Ping timeout: 252 seconds)
[10:57:03] *** Quits: woky_ (~woky@li1651-31.members.linode.com) (Ping timeout: 252 seconds)
[10:58:10] *** Joins: semeion (~semeion@user/semeion)
[10:59:00] *** Joins: Scarecr0w (scarecr0w@user/scarecr0w)
[11:01:56] *** Joins: Uqbar_ (~sandbox@user/uqbar)
[11:01:58] *** Quits: blaisebool_ (~blaiseboo@static.247.123.46.78.clients.your-server.de) (Ping timeout: 252 seconds)
[11:02:21] *** Joins: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de)
[11:02:21] *** Joins: NRK[m]1 (~nrkmatrix@2001:470:69fc:105::4e30)
[11:03:13] *** Joins: Henry151_ (~bishop@user/henry151)
[11:04:03] *** Parts: alkisg (~alkisg@2001:470:69fc:105::2d3) ()
[11:04:07] *** Quits: aidalgol (~aidalgol@user/aidalgol) (Ping timeout: 240 seconds)
[11:04:09] *** Joins: tedster (~Tedster@rampage.tedster.net)
[11:04:34] *** Joins: kreyren[m]1 (~kreyrentc@2001:470:69fc:105::bafb)
[11:04:43] *** Quits: darkxploit (~jay@32.209.19.50) (Ping timeout: 252 seconds)
[11:04:43] *** Quits: Uqbar (~sandbox@user/uqbar) (Ping timeout: 252 seconds)
[11:04:43] *** Quits: NRK[m] (~nrkmatrix@2001:470:69fc:105::4e30) (Ping timeout: 252 seconds)
[11:04:43] *** Quits: Henry151 (~bishop@user/henry151) (Ping timeout: 252 seconds)
[11:04:43] *** Quits: tedster- (~Tedster@rampage.tedster.net) (Read error: Connection reset by peer)
[11:04:43] *** Quits: kreyren[m] (~kreyrentc@2001:470:69fc:105::bafb) (Ping timeout: 252 seconds)
[11:04:54] *** Quits: vysn (~vysn@user/vysn) (Quit: WeeChat 3.2)
[11:05:22] *** Joins: vysn (~vysn@user/vysn)
[11:05:26] *** Quits: erri (~meow@ec2-18-218-146-67.us-east-2.compute.amazonaws.com) (Ping timeout: 252 seconds)
[11:05:48] *** Joins: erri (~meow@ec2-18-218-146-67.us-east-2.compute.amazonaws.com)
[11:06:26] *** Joins: mz` (~mz`@user/mz/x-8532539)
[11:07:25] <Soliton> can't tell if you want to see the colors or not.
[11:07:34] <Soliton> perhaps you want less -R.
[11:07:47] *** Joins: TomyWork (~TomyLobo@p200300e80f06af008ce616361e40f6e6.dip0.t-ipconnect.de)
[11:08:04] *** Joins: brelod (~me@90.244.150.142)
[11:08:25] *** Joins: Carp (~rue@1-162-40-122.dynamic-ip.hinet.net)
[11:09:38] *** Joins: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de)
[11:09:58] <eson123> Soliton: it does tho but it doesn't fully parse everything
[11:13:16] *** Joins: mtk_ (~mtk@2601:185:200:72:44aa:53fe:886b:bee9)
[11:13:40] *** Quits: mtk (~mtk@2601:185:200:72:44aa:53fe:886b:bee9) (Read error: Connection reset by peer)
[11:14:52] *** Joins: stoned (~weechat@thestonedapes.com)
[11:15:08] *** Joins: justache9 (~justache@user/justache)
[11:15:12] *** Quits: justache (~justache@user/justache) (Ping timeout: 250 seconds)
[11:15:12] *** Quits: Hash (~weechat@thestonedapes.com) (Ping timeout: 250 seconds)
[11:15:12] *** justache9 is now known as justache
[11:15:17] *** Quits: dstein64 (~dstein64@dannyadam.com) (Ping timeout: 250 seconds)
[11:15:17] *** Quits: LambdaComplex (~adam@wireguard/tunneler/lambdacomplex) (Ping timeout: 250 seconds)
[11:15:17] *** stoned is now known as Hash
[11:15:27] *** Joins: LambdaCo1 (~adam@wireguard/tunneler/lambdacomplex)
[11:15:37] *** Quits: fullstop (~fullstop@user/fullstop) (Ping timeout: 250 seconds)
[11:15:44] *** Joins: dstein64 (~dstein64@dannyadam.com)
[11:15:47] *** Quits: edr (~edr@user/edr) (Ping timeout: 250 seconds)
[11:16:35] *** Joins: fullstop (~fullstop@user/fullstop)
[11:16:39] *** Quits: calaz (~calaz@user/calaz) (Ping timeout: 250 seconds)
[11:16:50] *** Joins: edr (~edr@enlo.co)
[11:16:50] *** Quits: edr (~edr@enlo.co) (Changing host)
[11:16:50] *** Joins: edr (~edr@user/edr)
[11:17:54] *** Quits: Hackerpcs_1 (~user@user/hackerpcs) (Quit: Hackerpcs_1)
[11:17:58] *** Joins: calaz (~calaz@user/calaz)
[11:19:19] *** Joins: Hackerpcs (~user@user/hackerpcs)
[11:23:02] *** Joins: earnestly (~earnest@user/earnestly)
[11:24:41] *** Quits: darkstardevx (~darkstard@2601:1c2:300:c8a0::f2b6) (Ping timeout: 264 seconds)
[11:24:57] *** Quits: af (~af@awalgarg.me) (Remote host closed the connection)
[11:25:18] *** Joins: af (~af@awalgarg.me)
[11:25:41] *** Joins: Mo_ (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de)
[11:26:24] *** Joins: Tireos (~Tireos@91.223.118.131)
[11:27:59] *** Joins: aidalgol (~aidalgol@user/aidalgol)
[11:32:40] *** Quits: af (~af@awalgarg.me) (Remote host closed the connection)
[11:32:42] *** Joins: darkstardevx (~darkstard@c-24-21-53-33.hsd1.or.comcast.net)
[11:38:20] *** Joins: af (~af@awalgarg.me)
[11:40:00] *** Joins: testuser321 (~wandering@115.187.42.142)
[11:40:02] *** Quits: greknod2 (~grek@120.88.171.98) (Ping timeout: 252 seconds)
[11:40:32] *** Joins: karakedi (~eAC53C340@user/karakedi)
[11:41:07] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[11:42:02] *** Quits: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (Ping timeout: 260 seconds)
[11:43:23] *** Quits: mihaiadrian (~Thunderbi@82.76.223.244) (Read error: Connection reset by peer)
[11:44:45] *** Joins: mihaiadrian (~Thunderbi@82.76.223.244)
[11:45:19] *** Quits: torresjrjr (~torresjrj@user/torresjrjr) (Ping timeout: 250 seconds)
[11:45:20] *** Quits: Strom (strom@fedora/strom) (Ping timeout: 250 seconds)
[11:45:20] *** Quits: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca) (Ping timeout: 250 seconds)
[11:45:38] *** Joins: torresjrjr (~torresjrj@user/torresjrjr)
[11:45:40] *** Quits: juhop (~anon@192.3.81.147) (Ping timeout: 250 seconds)
[11:45:47] *** Joins: juhop (~anon@192.3.81.147)
[11:45:59] *** Joins: Strom- (strom@fedora/strom)
[11:46:26] *** Joins: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca)
[11:47:33] *** Quits: blaisebool (~blaiseboo@static.247.123.46.78.clients.your-server.de) (Ping timeout: 268 seconds)
[11:47:59] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[11:49:08] *** Quits: soifou (~soifou@51.68.77.7) (Ping timeout: 250 seconds)
[11:49:40] *** Joins: mnemonic (~semeion@user/semeion)
[11:49:48] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Client Quit)
[11:50:26] *** Joins: soifou (~soifou@51.68.77.7)
[11:50:55] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 252 seconds)
[11:52:22] *** Joins: dostoyevsky2 (~sck@user/dostoyevsky2)
[11:53:31] <dostoyevsky2> I have two ubuntu-18.04 systems, from the same docker container... one executes $HOME/.bashrc, the other doesn't...
[11:53:32] *** Quits: cluelessperson (~cluelessp@user/cluelessperson) (Remote host closed the connection)
[11:54:01] *** Joins: cluelessperson (~cluelessp@user/cluelessperson)
[11:54:19] <Soliton> how are you calling bash?
[11:54:20] *** Joins: hyskaru (~hyskaru@user/hyskaru)
[11:55:12] *** Quits: p-i- (~Ohmu@223.206.71.80) (Ping timeout: 250 seconds)
[11:55:16] <dostoyevsky2> I use `shell -$SHELL' in .screenrc...
[11:55:42] *** Joins: Bhavuk (~BTaneja@103.132.28.42)
[11:55:56] <Soliton> so it's a login shell that does not read .bashrc.
[11:56:23] <Soliton> perhaps you want to source .bashrc from .bash_profile.
[11:56:30] <Soliton> !dotfiles
[11:56:30] *** Quits: itok (sid418430@id-418430.ilkley.irccloud.com) (Ping timeout: 252 seconds)
[11:56:30] <greybot> Set up your environment (PATH, LANG, EDITOR, ...) in ~/.bash_profile. Set up your bash shell (PS1, functions, shopts, ...) in ~/.bashrc. Then source .bashrc from .bash_profile. See <http://mywiki.wooledge.org/DotFiles>. For GUI logins, SEE YOUR DOCUMENTATION or ask your OS channel because they're all different and we don't know.
[11:56:53] *** Quits: brw (~bas@static.66.39.12.49.clients.your-server.de) (Quit: Ping timeout (120 seconds))
[11:56:56] *** Joins: hqdruxn08_ (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com)
[11:57:00] *** Joins: swn (~sweeney@user/swn)
[11:57:00] *** Joins: itok (sid418430@id-418430.ilkley.irccloud.com)
[11:57:15] *** Joins: brw (~bas@static.66.39.12.49.clients.your-server.de)
[11:57:54] *** Joins: artlogic_ (~artlogic@znc.kruth.org)
[11:58:00] *** standardrat_ is now known as standardrat
[11:58:16] *** Joins: swoolley_ (~seth@mail.swoolley.org)
[11:58:22] *** Joins: Strykar_ (~wakka@signald/Strykar)
[11:58:52] *** Joins: ztrawhcse (eschwartz@archlinux/bugwrangler/eschwartz)
[11:58:58] *** Quits: Strykar (~wakka@signald/Strykar) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: artlogic (~artlogic@znc.kruth.org) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: swoolley (~seth@user/swoolley) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: DLange (~DLange@about/linux/staff/DLange) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: _0x5fc3 (~0x5fc3@wireguard/tunneler/-0x5fc3) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: Aryan (Aryan@user/aryan) (Ping timeout: 252 seconds)
[11:58:58] *** Quits: liam (sid7517@id-7517.helmsley.irccloud.com) (Ping timeout: 252 seconds)
[11:58:59] *** Joins: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f)
[11:59:13] *** Quits: hqdruxn08 (~hqdruxn08@cpe-66-68-166-214.austin.res.rr.com) (Ping timeout: 252 seconds)
[11:59:13] *** Quits: swn_ (~sweeney@user/swn) (Ping timeout: 252 seconds)
[11:59:24] *** Joins: _0x5fc3 (~0x5fc3@wireguard/tunneler/-0x5fc3)
[11:59:46] *** Quits: aniruddha (uid340443@id-340443.ilkley.irccloud.com) (Ping timeout: 252 seconds)
[11:59:52] *** Joins: DLange (~DLange@about/linux/staff/DLange)
[11:59:56] *** Joins: aniruddha (uid340443@id-340443.ilkley.irccloud.com)
[12:00:00] *** Joins: liam (sid7517@id-7517.helmsley.irccloud.com)
[12:00:08] *** Joins: thyriaen (~thyriaen@dynamic-078-054-200-070.78.54.pool.telefonica.de)
[12:02:25] *** Joins: Aryan (Aryan@user/aryan)
[12:03:32] *** Joins: unmanbearpig (~unmanbear@45.76.95.141)
[12:03:34] *** Quits: Carp (~rue@1-162-40-122.dynamic-ip.hinet.net) (Ping timeout: 252 seconds)
[12:03:42] *** Quits: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f) (Client Quit)
[12:04:59] *** Quits: unmanbearpig (~unmanbear@45.76.95.141) (Changing host)
[12:04:59] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[12:05:17] *** Quits: unmanbearpig (~unmanbear@user/unmanbearpig) (Client Quit)
[12:05:33] *** Joins: Carp (~rue@1-162-40-122.dynamic-ip.hinet.net)
[12:05:53] *** Joins: unmanbearpig (~unmanbear@45.76.95.141)
[12:06:03] *** Quits: unmanbearpig (~unmanbear@45.76.95.141) (Changing host)
[12:06:03] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[12:06:41] *** Joins: dre (~dre@2001:8003:c932:c301:34d2:f449:f8cf:6e39)
[12:07:10] *** Joins: Payam (~Payam@138.106.57.131)
[12:08:22] *** Quits: unmanbearpig (~unmanbear@user/unmanbearpig) (Client Quit)
[12:08:41] *** Joins: unmanbearpig (~unmanbear@user/unmanbearpig)
[12:10:55] *** Quits: ullbeking (sid5364@2a03:5180:f:3::14f4) (Ping timeout: 252 seconds)
[12:11:03] *** Joins: ullbeking_ (sid5364@id-5364.ilkley.irccloud.com)
[12:11:19] *** Quits: shailangsa (~shailangs@host217-39-45-200.range217-39.btcentralplus.com) (Ping timeout: 252 seconds)
[12:11:46] *** Joins: twkm^ (twkm@rfc1459.net)
[12:12:18] *** Joins: odc_ (sid197788@id-197788.helmsley.irccloud.com)
[12:12:21] *** Quits: damyan (damyan@mail.0x4711.org) (Ping timeout: 252 seconds)
[12:12:27] *** Joins: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f)
[12:12:29] *** Quits: odc (sid197788@id-197788.helmsley.irccloud.com) (Ping timeout: 252 seconds)
[12:12:29] *** Quits: CrypticSquared (~CrypticS_@user/crypticsquared) (Ping timeout: 252 seconds)
[12:12:29] *** Quits: rendar (~rendar@user/rendar) (Ping timeout: 252 seconds)
[12:12:29] *** Quits: Bercik (~Redomen@user/bercik) (Ping timeout: 252 seconds)
[12:12:29] *** Quits: Philonous (~Philonous@user/philonous) (Ping timeout: 252 seconds)
[12:12:29] *** Quits: sdu (~doo@185.44.146.178) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: aaro1 (aaro@user/aaro) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: argonel (argonel@KDE/argonel) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: strudl (~strudl@user/strudl) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: eqw (~eqw@31.134.178.99) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: sth (~seth@sys-v.net) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: Pent (sid313808@id-313808.lymington.irccloud.com) (Ping timeout: 252 seconds)
[12:12:30] *** Quits: OlCe (~user@lfbn-nic-1-565-28.w90-118.abo.wanadoo.fr) (Read error: Connection reset by peer)
[12:12:30] *** odc_ is now known as odc
[12:12:41] *** Joins: sdu (~doo@185.44.146.178)
[12:12:48] *** Joins: Pent (sid313808@id-313808.lymington.irccloud.com)
[12:12:58] *** Quits: sven^ (~quassel@squint.a-oben.org) (Ping timeout: 252 seconds)
[12:12:58] *** Quits: Nahra` (~user@static.161.95.99.88.clients.your-server.de) (Ping timeout: 252 seconds)
[12:12:58] *** Quits: jos1 (~jos3@dyndsl-178-142-071-112.ewe-ip-backbone.de) (Ping timeout: 252 seconds)
[12:12:58] *** Quits: phy1729 (~phy1729@zsh/wizard/phy1729) (Ping timeout: 252 seconds)
[12:12:59] *** Joins: sth (~seth@sys-v.net)
[12:13:02] *** Joins: eqw (~eqw@31.134.178.99)
[12:13:14] *** Joins: jos1 (~jos3@dyndsl-178-142-071-112.ewe-ip-backbone.de)
[12:13:16] *** Joins: phy1729 (~phy1729@zsh/wizard/phy1729)
[12:13:17] *** Joins: CrypticSquared (~CrypticS_@user/crypticsquared)
[12:13:27] *** Joins: Philonous (~Philonous@user/philonous)
[12:13:31] *** Quits: loworderbit (~dave@S0106e81cba1736ea.ss.shawcable.net) (Ping timeout: 252 seconds)
[12:13:31] *** Quits: twkm (twkm@rfc1459.net) (Ping timeout: 252 seconds)
[12:13:31] *** Quits: synthmeat (~synthmeat@user/synthmeat) (Ping timeout: 252 seconds)
[12:13:35] *** Joins: vysn (~vysn@user/vysn)
[12:13:36] *** Joins: sven^ (~quassel@squint.a-oben.org)
[12:13:39] *** Joins: loworderbit (~dave@s0106e81cba1736ea.ss.shawcable.net)
[12:13:39] *** Joins: damyan (damyan@mail.0x4711.org)
[12:13:48] *** Joins: strudl (~strudl@user/strudl)
[12:13:57] *** Joins: synthmeat (~synthmeat@user/synthmeat)
[12:14:04] *** Quits: Bilge (~u@2001:41d0:1:e300:0:1:fee1:900d) (Ping timeout: 252 seconds)
[12:14:20] *** Joins: Bilge (~u@2001:41d0:1:e300:0:1:fee1:900d)
[12:14:27] *** Joins: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl)
[12:14:27] *** Quits: Bercik (~Redomen@89-73-136-211.dynamic.chello.pl) (Changing host)
[12:14:27] *** Joins: Bercik (~Redomen@user/bercik)
[12:14:48] *** Joins: Nahra` (~user@static.161.95.99.88.clients.your-server.de)
[12:14:51] *** Joins: wuseman (wuseman@90-227-27-97-no68.tbcn.telia.com)
[12:14:51] *** Quits: wuseman (wuseman@90-227-27-97-no68.tbcn.telia.com) (Changing host)
[12:14:51] *** Joins: wuseman (wuseman@user/wuseman)
[12:14:54] *** Quits: mihaiadrian (~Thunderbi@82.76.223.244) (Remote host closed the connection)
[12:15:30] *** Quits: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de) (Read error: Connection reset by peer)
[12:15:46] *** Joins: aaro1 (aaro@user/aaro)
[12:15:54] *** Quits: ztrawhcse (eschwartz@archlinux/bugwrangler/eschwartz) (Quit: A random quit message)
[12:16:02] *** Joins: shailangsa (~shailangs@host217-39-45-200.range217-39.btcentralplus.com)
[12:16:43] *** Joins: elibrokeit (eschwartz@archlinux/bugwrangler/eschwartz)
[12:16:53] <earendel> dash starts up faster than bash?
[12:17:17] <earendel> i need it.
[12:17:25] *** Joins: sinaowolabi (~SinaOwola@160.152.133.53)
[12:17:28] *** Joins: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is)
[12:18:55] *** Joins: y04nn (~y04nn@193.32.127.238)
[12:19:29] <earendel> how can i add some color to my console?
[12:19:57] <earendel> it seems perfectly capable od having colors.
[12:20:04] *** Joins: prifici (~patri@user/prifici)
[12:20:20] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Ping timeout: 250 seconds)
[12:20:33] <earendel> is that shopt as well?
[12:23:00] *** Quits: supernov1h (~supernova@mail.ijk.nz) (Ping timeout: 260 seconds)
[12:23:23] <Soliton> !faq color
[12:23:23] <greybot> https://mywiki.wooledge.org/BashFAQ/037 -- How can I print text in various colors?
[12:24:22] *** Joins: xiongxin (~quassel@119.123.101.32)
[12:25:05] *** petemc_ is now known as petemc
[12:29:23] *** Joins: supernovah (~supernova@mail.ijk.nz)
[12:29:31] *** Quits: hyskaru (~hyskaru@user/hyskaru) (Quit: hyskaru)
[12:30:52] *** Joins: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de)
[12:32:32] *** Joins: djph (~dpurgert@cpe-107-10-244-220.neo.res.rr.com)
[12:35:09] *** Joins: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff)
[12:35:42] *** Quits: thyriaen (~thyriaen@dynamic-078-054-200-070.78.54.pool.telefonica.de) (Read error: Connection reset by peer)
[12:36:16] *** Joins: compuguy6 (ahall@user/compuguy)
[12:36:22] *** Joins: Bhavuk_ (~BTaneja@103.132.28.42)
[12:36:40] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Ping timeout: 268 seconds)
[12:36:55] *** Joins: Philonous_ (~Philonous@user/philonous)
[12:37:14] *** Quits: mnemonic (~semeion@user/semeion) (Ping timeout: 250 seconds)
[12:37:26] *** Joins: damyan^ (damyan@mail.0x4711.org)
[12:37:35] *** Quits: damyan (damyan@mail.0x4711.org) (Ping timeout: 252 seconds)
[12:37:35] *** Quits: murder (mdr@chton.secunit.org) (Ping timeout: 252 seconds)
[12:37:35] *** Quits: cisco87_ (~quassel@lnxg33k.com) (Read error: Connection reset by peer)
[12:37:40] *** Quits: loworderbit (~dave@s0106e81cba1736ea.ss.shawcable.net) (Ping timeout: 252 seconds)
[12:37:40] *** Quits: Philonous (~Philonous@user/philonous) (Ping timeout: 252 seconds)
[12:37:40] *** Quits: Nahra` (~user@static.161.95.99.88.clients.your-server.de) (Ping timeout: 252 seconds)
[12:37:40] *** Quits: shailangsa (~shailangs@host217-39-45-200.range217-39.btcentralplus.com) (Ping timeout: 252 seconds)
[12:37:40] *** Quits: brelod (~me@90.244.150.142) (Ping timeout: 252 seconds)
[12:37:46] *** Joins: murder (mdr@chton.secunit.org)
[12:37:47] *** Quits: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com) (Read error: Connection reset by peer)
[12:37:58] *** Joins: thyriaen (~thyriaen@dynamic-078-054-200-070.78.54.pool.telefonica.de)
[12:38:26] *** Quits: brw (~bas@static.66.39.12.49.clients.your-server.de) (Quit: Ping timeout (120 seconds))
[12:38:26] *** Quits: compuguy (ahall@user/compuguy) (Ping timeout: 252 seconds)
[12:38:26] *** Quits: matthewcroughan_ (~quassel@static.211.38.12.49.clients.your-server.de) (Ping timeout: 252 seconds)
[12:38:26] *** compuguy6 is now known as compuguy
[12:38:32] *** Joins: matthewcroughan (~quassel@static.211.38.12.49.clients.your-server.de)
[12:38:38] *** Joins: cisco87 (~quassel@lnxg33k.com)
[12:38:38] *** Joins: shailangsa_ (~shailangs@host217-39-45-200.range217-39.btcentralplus.com)
[12:39:12] *** Joins: loworderbit (~dave@S0106e81cba1736ea.ss.shawcable.net)
[12:39:20] *** Joins: Masklin_Gurder (~joel@89-233-200-127.cust.bredband2.com)
[12:39:24] *** Joins: brelod (~me@90.244.150.142)
[12:39:29] *** Joins: Nahra` (~user@static.161.95.99.88.clients.your-server.de)
[12:40:48] *** Joins: mnemonic (~semeion@user/semeion)
[12:41:37] *** Joins: argonel (argonel@KDE/argonel)
[12:41:45] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[12:42:07] *** Joins: earnest (~earnest@user/earnestly)
[12:43:18] *** Joins: murder_ (mdr@chton.secunit.org)
[12:43:42] *** Joins: edro (~edr@enlo.co)
[12:43:42] *** Quits: edro (~edr@enlo.co) (Changing host)
[12:43:42] *** Joins: edro (~edr@user/edr)
[12:44:13] *** Joins: OlCe (~user@lfbn-nic-1-565-28.w90-118.abo.wanadoo.fr)
[12:44:39] *** Quits: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: edr (~edr@user/edr) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: Bhavuk (~BTaneja@103.132.28.42) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: vancz (~vancz@user/vancz) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: karakedi (~eAC53C340@user/karakedi) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: earnestly (~earnest@user/earnestly) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: joo (~joo@fsf/member/joo--) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: chronon (~chronon@user/chronon) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: murder (mdr@chton.secunit.org) (Ping timeout: 252 seconds)
[12:44:39] *** Quits: swoolley_ (~seth@mail.swoolley.org) (Ping timeout: 252 seconds)
[12:44:45] <Payam> Hi, I am wondering if it is possible to get a list of files  in this format : [file1, file2],[file3,file4]...
[12:45:22] *** Quits: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de) (Ping timeout: 252 seconds)
[12:45:28] *** Joins: vancz (~vancz@user/vancz)
[12:45:32] <izabera> what if you have an odd number of files?
[12:45:41] *** Joins: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de)
[12:45:41] <izabera> # printf '[%s, %s],' /*
[12:45:43] <shbot> izabera: [/bin, /dev],[/etc, /init],[/lib, /lib64],[/proc, /root],[/tmp, /usr],[/var, ],
[12:46:15] *** Joins: chronon (~chronon@user/chronon)
[12:47:12] *** Joins: swoolley (~seth@user/swoolley)
[12:48:43] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 252 seconds)
[12:48:47] <Soliton> what if the filenames contain commas or brackets?
[12:50:09] *** Quits: darkstardevx (~darkstard@c-24-21-53-33.hsd1.or.comcast.net) (Remote host closed the connection)
[12:50:09] *** Joins: wandering_nomad1 (~wandering@115.187.42.142)
[12:50:14] *** Quits: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f) (Remote host closed the connection)
[12:50:18] *** Quits: y04nn (~y04nn@193.32.127.238) (Remote host closed the connection)
[12:50:21] *** Quits: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff) (Read error: Connection reset by peer)
[12:50:30] *** Joins: y04nn (~y04nn@193.32.127.238)
[12:50:31] *** Joins: darkstardevx (~darkstard@2601:1c2:300:c8a0::f2b6)
[12:50:38] *** Joins: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff)
[12:50:42] *** Joins: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f)
[12:51:46] *** Quits: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de) (Read error: Connection reset by peer)
[12:52:02] *** Quits: eson123 (~eson123@118.69.128.37) (Quit: Leaving)
[12:52:12] *** Joins: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de)
[12:52:41] *** Quits: testuser321 (~wandering@115.187.42.142) (Ping timeout: 252 seconds)
[12:54:14] *** Joins: joo (~joo@fsf/member/joo--)
[12:54:33] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[12:54:53] *** Quits: cluelessperson (~cluelessp@user/cluelessperson) (Remote host closed the connection)
[12:54:57] *** Joins: arinov (~arinov@213.194.126.155)
[12:54:57] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[12:55:20] *** Joins: cluelessperson (~cluelessp@user/cluelessperson)
[12:58:01] *** Joins: karakedi (~eAC53C340@user/karakedi)
[13:00:30] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[13:04:03] <Payam> izabera it could be even or odd
[13:04:24] <Payam> so the last group can be sublist can be odd.
[13:04:43] <Payam> like 2,2,3 or 2,2,2,1
[13:05:08] *** Quits: Payam (~Payam@138.106.57.131) (Quit: Client closed)
[13:05:23] *** Joins: Payam (~Payam@138.106.57.131)
[13:05:32] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Remote host closed the connection)
[13:05:39] <jelly> it's an odd question
[13:05:47] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[13:06:58] *** Quits: tsujp (~tsujp@sourcehut/user/tsujp) (Ping timeout: 256 seconds)
[13:08:20] <jetchisel> what happen to [file1, file2],[file3,file4]... ?
[13:08:49] <jetchisel> now becomes odd and sublist?
[13:11:43] *** Quits: han-solo (~hanish@user/han-solo) (Quit: Lost terminal)
[13:12:28] *** Joins: shad (~shad@user/shad)
[13:13:10] *** Quits: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar) (Ping timeout: 260 seconds)
[13:14:15] *** Quits: rustyshackleford (uid236774@id-236774.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[13:15:37] <Soliton> # files=(/*) n=${#files[@]}; printf -v text '[%s, %s], ' "${files[@]:0:n-n%2}"; if ((n%2)); then printf '%s[%s]\n' "$text" "${files[@]:n-1}"; else printf '%s\n' "${text%, }"; fi
[13:15:39] <shbot> Soliton: [/bin, /dev], [/etc, /init], [/lib, /lib64], [/proc, /root], [/tmp, /usr], [/var]
[13:15:50] <pj> # shopt -s extglob; cd /bin; printf -v out '[%s,%s],' *; printf '%s\n' "${out%*([, \]])}]"
[13:15:52] <shbot> pj: [[,adu],[awk,basename],[bash,bash+],[bash1,bash2],[bash3,bash32],[bash4,bash42],[bash43,bash44],[bash5,bash50],[bash51,bc],[bsh,bunzip2],[bzcat,bzip2],[cal,cat],[chgrp,chmod],[chown,cksum],[cmp,comm],[compress,cp],[csplit,cut],[dash,date],[dd,df],[diff,dirname],[du,echo],[ed,env],[ex,expand],[expr,false],[file,find],[fold,fuser],[gawk,gawk5],[gencat,getconf],[getent,grep],[gunzip,gzip],[head,hostn\
[13:15:52] <shbot> pj: ame],[iconv,id],[join,jq],[jsh,kill],[ksh,ldconfig],[link,ln],[locale,localedef],[logger,logname],[ls,m4],[mawk,mawk133],[mawk134,mkdir],[mkfifo,mknod],[mksh,mktemp],[mount,mv],[nawk,newgrp],[nice,nl],[nohup,oawk],[od,paste],[patch,pathchk],[pax,pr],[printf,ps],[pwd,recode],[renice,rev],[rm,rmdir],[sed,seq],[setsid,sh],[sleep,sort],[split,strace],[strings,stty],[tabs,tac],[tail,tee],[test,time],[t\
[13:15:52] <shbot> pj: ouch,tput],[tr,true],[tsort,tty],[umount,uname],[uncompress,unexpand],[uniq,unlink],[uudecode,uuencode],[wc,which],[who,xargs],[yes,zcat],]
[13:15:59] <pj> bleh, mine doesn't work
[13:17:26] <pj> # shopt -s extglob; cd /bin; printf -v out '[%s,%s],' *; printf '%s\n' "${out%%*(,|])}]"
[13:17:27] <shbot> pj: [[,adu],[awk,basename],[bash,bash+],[bash1,bash2],[bash3,bash32],[bash4,bash42],[bash43,bash44],[bash5,bash50],[bash51,bc],[bsh,bunzip2],[bzcat,bzip2],[cal,cat],[chgrp,chmod],[chown,cksum],[cmp,comm],[compress,cp],[csplit,cut],[dash,date],[dd,df],[diff,dirname],[du,echo],[ed,env],[ex,expand],[expr,false],[file,find],[fold,fuser],[gawk,gawk5],[gencat,getconf],[getent,grep],[gunzip,gzip],[head,hostn\
[13:17:28] <shbot> pj: ame],[iconv,id],[join,jq],[jsh,kill],[ksh,ldconfig],[link,ln],[locale,localedef],[logger,logname],[ls,m4],[mawk,mawk133],[mawk134,mkdir],[mkfifo,mknod],[mksh,mktemp],[mount,mv],[nawk,newgrp],[nice,nl],[nohup,oawk],[od,paste],[patch,pathchk],[pax,pr],[printf,ps],[pwd,recode],[renice,rev],[rm,rmdir],[sed,seq],[setsid,sh],[sleep,sort],[split,strace],[strings,stty],[tabs,tac],[tail,tee],[test,time],[t\
[13:17:28] <shbot> pj: ouch,tput],[tr,true],[tsort,tty],[umount,uname],[uncompress,unexpand],[uniq,unlink],[uudecode,uuencode],[wc,which],[who,xargs],[yes,zcat]
[13:17:28] *** Joins: sublim20 (~sublim20@user/sublim20)
[13:17:35] <pj> there you go ^^^^
[13:17:43] <izabera> can we lower the line noise level a little bit
[13:18:16] <pj> I did take it to pm with the bot to figure it out after the first miss.
[13:19:10] <pj> not sure why it still has an extra leading [, though
[13:19:24] *** Joins: BSaboia (~bsaboia@177.37.198.122)
[13:19:28] *** Quits: y04nn (~y04nn@193.32.127.238) (Ping timeout: 252 seconds)
[13:20:39] <pj> oh, because "[" is an actual filename in /bin, that's why.
[13:24:06] <Payam> yes. Well I want groups of name lists.
[13:24:16] <Soliton> if the last entry ends with ] or comma you'll remove it. though the format breaks down then anyway.
[13:25:38] <pj> Soliton: right, at the end of the day it there's any commas or [] in any of the filenames it's gonna break down no matter how you do it.
[13:27:04] *** Quits: Payam (~Payam@138.106.57.131) (Quit: Client closed)
[13:30:09] <grondilu> can I rely on `printf "%s" foo bar` to return 'foobar'?  That is, on the format directive to be applied to all the arguments if there are several arguments for one directive?
[13:30:45] <earnest> grondilu: It loops if there are more arguments than formatters
[13:31:14] <grondilu> so it's not a hack, it is specced?
[13:31:20] <earnest> Yes
[13:31:30] <grondilu> ok, good.
[13:31:59] *** Joins: y04nn (~y04nn@193.32.127.238)
[13:32:14] *** Quits: y04nn (~y04nn@193.32.127.238) (Remote host closed the connection)
[13:32:46] <earnest> > The  format  operand  shall be reused as often as necessary to satisfy the argument operands.
[13:33:10] *** Joins: cdown (~cdown@163.114.131.1)
[13:33:48] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.3)
[13:34:33] <earnest> It's very useful too, pity more don't do it
[13:36:34] *** Quits: sinaowolabi (~SinaOwola@160.152.133.53) (Ping timeout: 252 seconds)
[13:36:41] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Ping timeout: 252 seconds)
[13:36:55] *** Joins: situ_ (situ@nat-pool-brq-t.redhat.com)
[13:37:05] *** Quits: situ (~situ@nat-pool-brq-u.redhat.com) (Ping timeout: 260 seconds)
[13:44:28] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[13:45:36] *** Quits: dre (~dre@2001:8003:c932:c301:34d2:f449:f8cf:6e39) (Remote host closed the connection)
[13:46:14] *** Joins: UnnamedBeer (~UnnamedBe@117.red-83-46-8.dynamicip.rima-tde.net)
[13:48:49] *** Joins: sinaowolabi (~SinaOwola@160.152.107.243)
[13:49:13] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Ping timeout: 252 seconds)
[13:49:35] *** Joins: extern (~archer@141.226.59.235)
[13:49:36] *** Quits: skapata (~Skapata@user/skapata) (Remote host closed the connection)
[13:53:04] *** Quits: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff) (Ping timeout: 252 seconds)
[13:57:22] *** Joins: FreeBDSM1 (~uzer@broadband-188-32-167-53.ip.moscow.rt.ru)
[13:58:41] *** Quits: xiongxin (~quassel@119.123.101.32) (Ping timeout: 252 seconds)
[13:58:49] *** Quits: Mo (~Mo@dynamic-095-116-202-050.95.116.pool.telefonica.de) (Quit: Leaving)
[14:00:44] *** Quits: Tireos (~Tireos@91.223.118.131) (Quit: Leaving)
[14:01:39] *** Joins: richardm75_ (~richardm7@2600:8801:c507:2900:45fd:52b3:2df7:1f32)
[14:02:59] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[14:04:33] <FreeBDSM1> # A=aaa; B=bbb; myvars=(A B); for myvar in "${myvars[@]}"; do echo "${myvar}: how to get it's value?"; done
[14:04:34] <shbot> FreeBDSM1: A: how to get it's value?
[14:04:34] <shbot> FreeBDSM1: B: how to get it's value?
[14:05:16] *** Joins: TheHermann (~TheHerman@gateway/tor-sasl/thehermann)
[14:05:17] *** Quits: mnemonic (~semeion@user/semeion) (Ping timeout: 252 seconds)
[14:05:17] <izabera> FreeBDSM1: ${!myvar}
[14:05:55] <FreeBDSM1> izabera: thanks, how is it called? an eval?
[14:06:01] *** Joins: thiras (~thiras@user/thiras)
[14:06:15] <izabera> no, eval is called eval
[14:06:16] *** Quits: situ_ (situ@nat-pool-brq-t.redhat.com) (Ping timeout: 252 seconds)
[14:06:29] <izabera> this is indirection? idk
[14:06:38] *** Joins: vysn (~vysn@user/vysn)
[14:08:37] <izabera> man bash calls it indirect expansion
[14:08:51] <FreeBDSM1> yeah, just found it there too
[14:08:52] *** Joins: mnemonic (~semeion@user/semeion)
[14:08:52] <FreeBDSM1> thanks
[14:08:56] *** Parts: Guest7018 (~Wiilliam@12.187.181.32) (Konversation terminated!)
[14:09:21] *** Joins: Guest7018 (~Wiilliam@12.187.181.32)
[14:09:42] *** Quits: Guest7018 (~Wiilliam@12.187.181.32) (Changing host)
[14:09:42] *** Joins: Guest7018 (~Wiilliam@user/wwilliam)
[14:09:42] *** wwilliam is now known as Guest1026
[14:09:42] *** Guest7018 is now known as wwilliam
[14:12:29] *** Joins: rendar (~rendar@user/rendar)
[14:15:47] *** Joins: alzgh (~alzgh@user/alzgh)
[14:17:33] *** Joins: darkbit (~db@152.32.99.67)
[14:18:55] *** Quits: BUSY (~BUSY@user/busy) (Ping timeout: 252 seconds)
[14:19:57] *** Joins: BUSY (~BUSY@user/busy)
[14:21:37] *** Quits: mnemonic (~semeion@user/semeion) (Ping timeout: 252 seconds)
[14:22:45] *** mags_ is now known as mags
[14:24:25] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[14:25:13] *** Joins: shad (~shad@user/shad)
[14:30:17] *** Quits: Bhavuk_ (~BTaneja@103.132.28.42) (Read error: Connection reset by peer)
[14:30:48] *** Joins: Bhavuk (~BTaneja@103.132.28.42)
[14:31:31] *** Quits: Bhavuk (~BTaneja@103.132.28.42) (Client Quit)
[14:31:51] *** Joins: Bhavuk (~BTaneja@103.132.28.42)
[14:34:16] *** Joins: xiongxin (~quassel@113.116.35.63)
[14:34:47] *** Joins: mnemonic (~semeion@user/semeion)
[14:35:51] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[14:39:02] *** Joins: totenkoph (~scythe@user/totenkoph)
[14:40:14] <FreeBDSM1> !doublequote vars
[14:40:37] *** Quits: igemnace (~ian@user/igemnace) (Ping timeout: 268 seconds)
[14:40:38] <FreeBDSM1> where's the factoid that tells to wrap as much $ stuff as possible into double quotes?
[14:41:16] <osse> !qefs
[14:41:16] <greybot> "$Quote" "$Every" "$Fucking" "$Substitution"
[14:42:08] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Remote host closed the connection)
[14:42:22] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9)
[14:42:29] <FreeBDSM1> is there a webpage for that?
[14:42:42] <Soliton> !quotes
[14:42:42] <greybot> https://mywiki.wooledge.org/Quotes
[14:46:12] *** Joins: greknod2 (~grek@120.88.171.98)
[14:46:59] <FreeBDSM1> lol, my senior colleague asks what version is that wiki page written for
[14:47:38] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:1ad:a202:574b:53b9) (Ping timeout: 252 seconds)
[14:49:16] <Soliton> the basics on how quoting works have never changed.
[14:50:28] *** Joins: xx (~xx@user/xx)
[14:51:25] *** Joins: AquaL1te (~AquaL1te@user/aqual1te)
[14:51:50] <Soliton> newest quoting feature there is perhaps $'' from bash 2.
[14:52:46] <FreeBDSM1> thanks for all the facts, new job and the new colleague turns out a little bit of tyrant
[14:53:34] <earnest> It bothers me how many 'senior' this and that seem to know much less than I'd have expected
[14:54:41] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[14:55:05] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[14:58:06] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c)
[15:03:01] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c) (Ping timeout: 252 seconds)
[15:04:30] *** Quits: Palll (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net) (Read error: Connection reset by peer)
[15:04:53] *** Joins: Palll (~Pall@cpc139184-sprt3-2-0-cust125.17-2.cable.virginm.net)
[15:05:58] *** Quits: YHVH (~yhvh@2601:982:8300:8090:213a:8f75:6baa:833e) (Ping timeout: 260 seconds)
[15:11:07] *** Joins: speckz (~speckz@2600:1700:ce0:bf00:21c1:d5b9:c26e:f0ce)
[15:12:46] *** Quits: darkbit (~db@152.32.99.67) (Ping timeout: 252 seconds)
[15:13:21] *** Quits: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au) (Ping timeout: 250 seconds)
[15:13:40] <extern> earnest == earnestly /
[15:13:42] <extern> ?
[15:14:54] *** jp is now known as jp11
[15:14:57] <FreeBDSM1> adjective vs adverb
[15:15:46] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c)
[15:17:53] *** Joins: YHVH (~yhvh@2601:982:8300:8090:19e5:eb98:24ba:a6a3)
[15:21:51] *** Quits: Administratorte (~sq@tempest.math.colostate.edu) (Quit: WeeChat 3.3)
[15:24:29] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[15:25:45] <wwilliam> Gm this is not working is not moving the dirs.......https://paste.debian.net/1213973/
[15:26:01] <wwilliam> https://paste.debian.net/1213973/
[15:30:16] <NRK[m]1> without looking too deep, i think your problem probably lies here `zpfl="IMGSOAA_PPD_*.zip"`
[15:30:46] <Soliton> it's given to find so it's fine.
[15:30:59] <Soliton> no clue why find got involved now though.
[15:32:27] <wwilliam> Soliton: because i have to find after -newer so i dont process the older ones again.
[15:33:04] <Soliton> i see.
[15:33:07] <wwilliam> That is OK is the counter part and mv that is not working.
[15:33:14] <wwilliam> nothing moves...
[15:33:32] <NRK[m]1> so find is able to expand * on it's own. i see...
[15:33:39] <wwilliam> I just get this:
[15:33:41] <wwilliam> + counter=0
[15:33:41] <NRK[m]1> good to know
[15:33:43] <wwilliam> + [[ -d /home/afernandez/u6/axa/axair_prepro/IMGSOAA_PPD_20210930082625_0 ]]
[15:33:44] <wwilliam> + IFS=
[15:33:46] <wwilliam> + read -rd '' file
[15:33:49] *** Quits: Bhavuk (~BTaneja@103.132.28.42) (Quit: Leaving)
[15:33:57] <Soliton> well, you only mv in the if. you don't do anything otherwise.
[15:34:11] <wwilliam> ?
[15:34:19] *** Joins: Bhavuk (~BTaneja@103.132.28.42)
[15:34:21] <Soliton> presumably you want to do the same in the else case just not increase the counter.
[15:35:08] <Soliton> not sure why you don't make the right dir to begin with though.
[15:35:11] *** Joins: Administratorte (~sq@tempest.math.colostate.edu)
[15:36:00] <wwilliam> Yes that be nice.
[15:36:22] <wwilliam> let me see if i can fihgure it out.....
[15:37:30] <Soliton> if [[ -d "$dest"/IMGSOAA_PPD_"$x"_"$counter" ]]; then ((counter++)); fi; mkdir -p "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_"$counter"/{zips,fromportal} && cp ...
[15:37:43] *** Quits: extern (~archer@141.226.59.235) (Quit: get back to you in Sunday)
[15:38:09] <Soliton> maybe you even want a loop in case the next counter dir also exists etc...
[15:38:47] <wwilliam> Yes I need that too....
[15:39:00] *** Quits: xizhendu__ (~xizhendu@106.38.171.198) (Ping timeout: 260 seconds)
[15:39:24] <Soliton> while [[ -d "$dest"/IMGSOAA_PPD_"$x"_"$counter" ]]; do ((counter++)); done
[15:39:51] <Soliton> then do the mkdir and stuff after you know the right dir name.
[15:40:12] *** Joins: tinman719 (~bobloblaw@185.52.3.117)
[15:40:16] <wwilliam> then end name of the dir has to be  IMGSOAA_PPD_"$(date +%Y%m%d)"_"$counter"
[15:40:26] <Soliton> sure.
[15:40:31] <wwilliam> $dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_"$counter"
[15:40:48] *** Quits: mei (~mei@user/mei) (Read error: Connection reset by peer)
[15:41:20] <Soliton> wait, that makes no sense.
[15:41:37] <Soliton> you're checking for $x but then create for the current date...
[15:41:47] <Soliton> so the check is useless.
[15:42:05] <Soliton> unless $x happens to be the current date.
[15:42:29] *** Joins: greknod24 (~grek@120.88.171.98)
[15:42:31] *** Quits: greknod2 (~grek@120.88.171.98) (Ping timeout: 252 seconds)
[15:42:31] *** greknod24 is now known as greknod2
[15:42:58] <wwilliam> yes it needs to be the current date.
[15:42:59] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[15:43:21] <Soliton> well, then also check the current date. otherwise what is the point of the check?
[15:43:21] <wwilliam> so current date plus suffix
[15:44:07] *** Quits: mnemonic (~semeion@user/semeion) (Ping timeout: 252 seconds)
[15:44:23] <wwilliam> from your lines above Soliton which one i use the if or the while line.
[15:44:59] *** Joins: nyex (~Thunderbi@177.84.107.26)
[15:46:30] <Soliton> dirprefix="$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"; while [[ -d "$dirprefix"_"$counter" ]]; do ((counter++)); done; finaldir="$dirprefix"_"$counter"; mkdir -p "$finaldir"; ...
[15:47:48] *** Joins: han-solo (~hanish@user/han-solo)
[15:48:22] <Soliton> i you want a special case for counter 0 you can add that yourself.
[15:48:39] *** Joins: kurahaupo (~kurahaupo@220-245-23-126.static.tpgi.com.au)
[15:49:39] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[15:52:16] *** Quits: gnoo (gnoo@user/gnoo) (Remote host closed the connection)
[15:53:30] <wwilliam> I am lost.
[15:53:38] <wwilliam> As always. Sorry.
[15:57:06] *** Joins: n4dir (~user@mue-88-130-56-201.dsl.tropolys.de)
[15:57:27] *** Joins: mnemonic (~semeion@user/semeion)
[15:58:35] *** Joins: topoi (~topoi@user/topoi)
[16:04:38] *** Quits: aidalgol (~aidalgol@user/aidalgol) (Ping timeout: 252 seconds)
[16:04:38] <wwilliam> like this:
[16:04:40] <wwilliam> https://paste.debian.net/1213979/
[16:05:16] <wwilliam> I just do not see where I am copying the zips to the respective dir.
[16:05:37] *** Quits: richardm75_ (~richardm7@2600:8801:c507:2900:45fd:52b3:2df7:1f32) (Ping timeout: 252 seconds)
[16:07:02] *** Joins: seninha (~seninha@user/seninha)
[16:07:17] *** Joins: aidalgol (~aidalgol@user/aidalgol)
[16:08:09] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[16:08:10] <earnest> wwilliam: You're not using capture groups in your regex and so the x= assignment doesn't make much sense.  You don't appear to be using the $file variable at all other than checking if it has matching name, is this intented?
[16:08:45] <wwilliam> no it is not
[16:08:47] <wwilliam> :(
[16:09:38] *** Quits: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f) (Quit: Leaving)
[16:09:40] <wwilliam> I need to copy $file to $x but then mv or rename $x to finaldir="$dirprefix"_"$counter"
[16:09:49] <wwilliam> dirprefix="$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"
[16:09:55] <wwilliam> Like Soliton said.
[16:10:18] <wwilliam> Only i can not put this all together earnest I am kind of dumb.
[16:10:56] *** Joins: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net)
[16:11:11] <earnest> wwilliam: But what is 'x'?  If you're just checking a file matches some regex, then is it the point to use that $file or the part of the filename that the regex matches?
[16:12:33] *** Joins: elena_re (~elena@31.173.85.129)
[16:12:48] <wwilliam> x is the part of a file name all files with that number have to go in their own dir.
[16:12:53] <wwilliam> which is x
[16:13:05] <earnest> E.g. if the filename is foo-12345-bar and your regex is [[:digit:]]{5}, do you want foo-12345-bar or 12345?
[16:13:06] <wwilliam> but x has to be mv to:
[16:13:09] *** Joins: joes (uid132583@id-132583.uxbridge.irccloud.com)
[16:13:32] <wwilliam> "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_counter  at the end
[16:13:54] <wwilliam> and this has to work for different batches
[16:14:02] <wwilliam> like if i run the script now
[16:14:13] <wwilliam> will create _1 _2 _3
[16:14:31] <earnest> wwilliam: slow down, answer my question instead
[16:14:38] <wwilliam> if i run it today in the afternoon has to continue as in _4 _5 _6 etc
[16:15:15] <earnest> Yes, the counter logic is fine
[16:15:28] <wwilliam> earnest: dont matter, because whatever name we give to that has to be mv to:
[16:15:46] <wwilliam> "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_counter
[16:15:57] <earnest> So why are you using regex?
[16:16:09] *** Joins: arlion3 (~Arlion@user/arlion)
[16:16:36] <earnest> I'm not discussing the IMG stuff, I'm asking about the $file
[16:16:44] <wwilliam> Because I have to find all files that has the regex and put them
[16:16:51] <wwilliam> in separate dirs.
[16:17:14] <earnest> wwilliam: Write out a mv command, in full, of what you expect
[16:17:23] <earnest> Without variables, entire thing
[16:17:35] <wwilliam> $file are the zips with the regex that have to go with the recon file with the regex also all in their own dir.
[16:18:26] <earnest> wwilliam: write out a full mv command, as you expect it, just one
[16:18:27] *** Quits: joes (uid132583@id-132583.uxbridge.irccloud.com) ()
[16:18:36] <wwilliam> This is what Soliton gave me which it works fine, only that after that I have to move and change the dir names to:  "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_counter
[16:18:38] <jelly> earnest, an example of a full source path and desired full dest path ?
[16:18:44] *** Joins: BH23 (uid132583@id-132583.uxbridge.irccloud.com)
[16:18:58] <earnest> jelly: Yes, but are you also wwilliam?
[16:19:05] *** Joins: shad (~shad@user/shad)
[16:19:09] <jelly> I'm not!
[16:19:12] <wwilliam> lol
[16:19:18] <earnest> Oh maybe you had access to this information
[16:19:22] <wwilliam> yes
[16:19:35] <wwilliam> I have been with this all this week earnest
[16:19:39] *** Quits: arlion2 (~Arlion@user/arlion) (Ping timeout: 250 seconds)
[16:19:48] <earnest> None of this is providing me with a complete mv command
[16:20:07] <wwilliam> hold on please slow here.... :)
[16:20:56] <wwilliam> like this but this dont work
[16:20:58] <wwilliam> counter=0;
[16:20:59] <wwilliam> for x in "$(date +%Y%m)"*;do
[16:21:01] <wwilliam>     if [[ -d "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_"$counter" ]];then
[16:21:02] <wwilliam>         (( counter++ )) ;mv -v -- "$x" "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_"$counter";
[16:21:04] <wwilliam>     fi
[16:21:05] <earnest> This is not what I asked
[16:21:05] <wwilliam> done;
[16:21:14] <wwilliam> mv -v -- "$x" "$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)"_"$counter";\]
[16:21:18] <earnest> I don't want a fucking script, I don't want variables
[16:21:26] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[16:21:34] <earnest> I want you to write out a complete mv command, with all parts expanded, as you expect
[16:21:38] <wwilliam> ok
[16:23:12] <earnest> Why is this taking so long?
[16:23:26] <jelly> it's hard to show an example of a full source path and desired full dest path
[16:23:35] <earnest> It's not
[16:23:44] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c) (Remote host closed the connection)
[16:24:07] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c)
[16:24:10] *** sixwheel- is now known as sixwheeledbeast
[16:24:11] <earnest> E.g. mv -v -- foo-12345-bar /some/path/IMGSOAA_PPD_20211001_2
[16:24:14] <earnest> there, wasn't hard
[16:24:18] <jelly> it's hard and noone understands!
[16:24:23] *** Quits: unixman_home (~unixman2@175-238-4-64.mtawireless.com) (Ping timeout: 252 seconds)
[16:25:36] <earnest> wwilliam: Noticing a distinct lack of mv commands
[16:25:50] <wwilliam> hold on I am writing...
[16:25:54] <jelly> maybe they had to go to the loo
[16:26:54] <jelly> but yeah, providing one example does not sound like a five minute job
[16:27:08] <FreeBDSM1> how to get a nice list of another envs for another process? /pid/${pid}/environ is binary and when I cat it - it prints no delimiters between envs, so it looks like they all crammed together
[16:27:10] <earnest> I'm becoming very suspicious about this whole thing
[16:27:39] <jelly> are you suspecting the don't understand the importance of being earnest
[16:27:39] <earnest> FreeBDSM1: They're nul terminated strings
[16:27:40] <wwilliam> mv -v -- 20210924123013 /home/afernandez/u6/axa/axa_ir_production/IMGSOAA_PPD_20211001_1
[16:27:57] <earnest> wwilliam: Alright good
[16:28:20] <FreeBDSM1> earnest: so sed should be usable to substitute them with \n?
[16:29:06] *** Joins: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f)
[16:29:07] <earnest> FreeBDSM1: A more appropriate tool might be tr (tr \\0 \\n).  Keep in midn that environ isn't updated if the program uses setenv(3) or such
[16:29:20] *** Joins: karakedi (~eAC53C340@user/karakedi)
[16:29:26] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c) (Remote host closed the connection)
[16:29:39] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c)
[16:29:40] *** Quits: bigMouth` (~user@173-163-76-245-cpennsylvania.hfc.comcastbusiness.net) (Remote host closed the connection)
[16:30:48] <earnest> wwilliam: One problem with this is that your script is sensitive to the working directory, as the 2021... file is a relative path.  I'd also fix that
[16:31:07] *** Quits: thyriaen (~thyriaen@dynamic-078-054-200-070.78.54.pool.telefonica.de) (Quit: Leaving)
[16:31:08] <wwilliam> Thanks.
[16:31:53] *** Joins: sinaowolabi_ (~SinaOwola@102.134.114.1)
[16:32:31] *** Quits: arinov (~arinov@213.194.126.155) (Ping timeout: 252 seconds)
[16:34:08] *** Quits: zouhair (~zouhair@142.182.58.252) (Quit: KVIrc 5.0.1 Aria http://www.kvirc.net/)
[16:36:00] *** Quits: MenschZwoNull (~MenschZwo@p200300c85711050069caeca619944502.dip0.t-ipconnect.de) (Remote host closed the connection)
[16:37:40] <Soliton> the mv command is obsolete. just create the dir with the right name to begin with...
[16:38:21] *** Joins: MenschZwoNull (~MenschZwo@p200300c85711050069caeca619944502.dip0.t-ipconnect.de)
[16:39:10] *** Quits: han-solo (~hanish@user/han-solo) (Ping timeout: 252 seconds)
[16:40:18] *** Joins: zebrag (~chris@user/zebrag)
[16:41:52] <wwilliam> Correct Soliton.
[16:42:09] *** Joins: zouhair (~zouhair@142.182.58.252)
[16:42:39] <earnest> Soliton: You may know more about what's going on.  I have seen the full script but my eyes immediately glaze over.  Here's something making more use of GNU find: https://0x0.st/-gNM.txt
[16:42:54] <wwilliam> Whatever happened to greycat?
[16:43:45] <Soliton> i have no clue if the regex part is important. i think they actually want to iterate over those recon files...
[16:43:57] *** Joins: omegatron (~some@p54849842.dip0.t-ipconnect.de)
[16:45:40] <earnest> Soliton: The assumption I made was that they have mixed up their files where some are named using that specific date format scheme which they're trying to pry out using the regex
[16:46:13] <earnest> which is basically: if ((${#file} == 14)) && only numbers
[16:46:15] <wwilliam> earnest: to recap from a few days ago:
[16:46:16] <Soliton> nah, we're building their (presumably production) file shuffling pipeline.
[16:46:26] *** Quits: sinaowolabi (~SinaOwola@160.152.107.243) (Ping timeout: 252 seconds)
[16:46:32] <wwilliam> There is a dir that has zip files
[16:46:34] <Soliton> moving around pdfs in zips or whatever it is.
[16:46:47] <wwilliam> this zip files have the regex
[16:47:03] <earnest> Do they need it?
[16:47:13] <earnest> Why have you arranged a situation where you need to do regex on filenames
[16:47:16] <wwilliam> for a group  of zip files there is always a recon.zip with the same regex
[16:47:25] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[16:47:58] <wwilliam> every group needs its own dir with all the files recon and others within these dirs
[16:48:20] <wwilliam> This is the dir sample:
[16:48:38] <earnest> Why do you use ; after every line, it bothers me
[16:48:56] <earnest> And all of them have a trailing space
[16:48:58] *** Joins: shad (~shad@user/shad)
[16:49:03] <Soliton> because it's cobbled together from IRC help.
[16:53:24] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aÐ»Ð»Ð¸Ð»Ñ¹Ñ–Ð°!)
[16:54:37] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[16:54:48] <wwilliam> https://paste.debian.net/1213986
[16:55:08] <wwilliam> ???
[16:55:13] <wwilliam> weird
[16:55:13] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[16:55:49] *** Quits: wwilliam (~Wiilliam@user/wwilliam) (Quit: Konversation terminated!)
[16:55:54] <llua> rip
[16:56:13] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[16:56:21] <Soliton> that long to find the old link only to not check it already expired.
[16:57:05] *** Joins: wwilliam (~Wiilliam@user/wwilliam)
[16:59:22] *** Joins: LiftLeft (~LiftLeft@154.21.23.29)
[16:59:30] <wwilliam> Thank you all sorry to waste your time.
[16:59:44] *** Joins: sinaowolabi (~SinaOwola@160.152.64.7)
[17:01:04] <earnest> All of the find examples are maxdepth 1, so this can be replaced with for loops
[17:01:25] *** Joins: han-solo (~hanish@user/han-solo)
[17:01:41] <Soliton> well, they have a markfile now where they only want to process newer files.
[17:01:51] <Soliton> so find makes some sense.
[17:02:53] <Soliton> if that's really necessary or if there are better ways to organize this of course is anyone's guess.
[17:03:17] <wwilliam> earnest: this is how the dir looks
[17:03:18] <wwilliam> https://paste.debian.net/1213990/
[17:04:37] <Soliton> so what's in a recon file? is it updates for the contents of the other files?
[17:05:09] <earnest> A recon file so far seems to be just used as a sentinel
[17:05:23] <wwilliam> in the recon zip there is a csv file with all the zips that belong to that
[17:05:58] <earnest> Soliton: What's odd is that they touch the timeref file and then immediately check the time as being newer, which it surely never will be?
[17:06:01] <Soliton> and nothing more?
[17:06:20] <wwilliam> no just that a csv file.
[17:06:26] <Soliton> earnest: you have to guess the goal. don't expect the details to make sense.
[17:06:41] *** Joins: H3dn1ng (~H3dn1ng@185.213.154.228)
[17:07:03] <earnest> The only way I can imagine that, on a logical level (ignoring the goal) is if those zip files have time stamps set in the future
[17:07:04] <Soliton> so what do you do with the recon file? just group the other zips by it? and then?
[17:07:54] <wwilliam> The recon file is need it in the dir so another developeer looks at it and kick his program, if this recon is not in the dir the other developer program will not work.
[17:07:58] <Soliton> earnest: i bet they just haven't figured out that they should create the ref file last.
[17:08:12] <wwilliam> We do not create the zips
[17:08:20] <wwilliam> or the name of the zips
[17:08:33] <Soliton> ok, so your job is to put the recon file and all the files in the csv in a dir?
[17:08:50] <wwilliam> Like i said I have to rsynd them from remote server and processed them
[17:09:14] <Soliton> so the logical first step is to go through the recon files. which btw you have not once stated so far.
[17:09:52] <wwilliam> My job is to get the zips create dir with the name of the zip include in this dir the zips and reconzip unzip process an index
[17:09:55] <earnest> (I'd almost be mad enough to turn this into a makefile)
[17:10:19] <wwilliam> The present script not the one you guys have seen
[17:10:34] <wwilliam> was working for more than a year until
[17:10:49] <wwilliam> customer started to missed transmissions for days
[17:11:03] <wwilliam> and send few days together
[17:11:26] <Soliton> so are you just hoping the date in the filenames will be the same as what's in the csv or that must be the case?
[17:11:51] <wwilliam> so the present script was not capable of doing that, hence the regex for the dates now and this mess I do not know how to resolve unless i process manually
[17:11:56] <wwilliam> which i dont want
[17:12:15] <Soliton> if only we knew what you'd do manually.
[17:12:15] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c) (Remote host closed the connection)
[17:12:16] <wwilliam> I dont care about the csv
[17:12:31] <wwilliam> I just cared about the regex in files and recon files.
[17:12:33] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c)
[17:12:39] <wwilliam> to group them toguetheer.
[17:12:55] <wwilliam> manually
[17:13:09] <wwilliam> I separate the batches to diferent dirs
[17:13:21] <wwilliam> process one batch with present script
[17:13:25] <wwilliam> when it finished
[17:13:41] *** Joins: betelgeuse (~betelgeus@94-225-47-8.access.telenet.be)
[17:13:48] <wwilliam> mv the other batch to the source dir and run script again
[17:13:57] *** Joins: bomb-on (~bomb-on@194.144.47.113)
[17:13:59] <Soliton> all this does not explain the counter stuff though.
[17:14:21] *** Joins: gnoo (gnoo@user/gnoo)
[17:14:28] *** Quits: mnemonic (~semeion@user/semeion) (Ping timeout: 252 seconds)
[17:14:30] <wwilliam>  I will send the script that was working before they started to send few day in one transmission.
[17:15:03] <wwilliam> the counter stuff is because the main dir is with day of processing...
[17:15:22] <earendel> o i have been accidently highlighted twice today
[17:15:28] <Soliton> nope, makes no sense.
[17:15:33] <earendel> bad bad bad.
[17:15:45] <earendel> that mischief.
[17:15:55] <earendel> xd
[17:15:57] <tangy> "customer"  ?!?
[17:16:05] <earendel> lol
[17:16:18] <Soliton> i'm guessing you process each hour or whatever and when you do processing again with the same date in files you already processed you want a new dir.
[17:16:34] <wwilliam> correct
[17:16:57] <Soliton> that is the problem. that you cannot simply say these things.
[17:17:47] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c) (Ping timeout: 252 seconds)
[17:17:54] <Soliton> so why did your script attempt check for at least two recon files or whatever?
[17:18:15] <Soliton> if there are no recon files there are no recon files. what does it matter?
[17:18:20] *** Joins: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c)
[17:18:36] <wwilliam> because Monday to Thursday 2 transmissions for same day
[17:18:48] <wwilliam> 2 recons different numbers
[17:18:56] *** Quits: maledictium (~crux@dsl-80-221.bl26.telepac.pt) (Ping timeout: 246 seconds)
[17:19:15] <earendel> doesn't matter: unlike dark matter it doesn't affect the universe whatsoever "
[17:19:16] <wwilliam> so it is going to be 20211001_1 and 20211001_2
[17:19:18] <Soliton> there is some recon requirement you're not explaining.
[17:19:31] <wwilliam> what do you mean
[17:19:45] <earnest> You clearly care about these recon files, and that at least 2 of them exist
[17:19:49] <earnest> But then do nothing with them
[17:19:51] <Soliton> how would i know. that is exactly the issue.
[17:20:14] <earendel> yes. i'll be happy if you just get me better trolls.
[17:20:14] <Soliton> impossible to help when i have no clue what the goal is.
[17:20:42] <tangy> wwilliam: perhaps trying explaining the entire story, all in one go
[17:20:59] *** Joins: maledictium (~crux@dsl-94-205.bl26.telepac.pt)
[17:21:01] <wwilliam> get zips from remote
[17:21:13] <wwilliam> sort by recon and files and create dirs
[17:21:17] <wwilliam> unzip files
[17:21:32] <wwilliam> edit an index withing this zips
[17:21:37] <wwilliam> done
[17:21:39] <Soliton> so do you just want to unzip if there is a recon file?
[17:21:43] <earnest> tangy: No, don't! :o
[17:21:44] <Soliton> i guess so.
[17:21:57] <earendel> the goal is mislead in a obvious way
[17:22:02] <wwilliam> no
[17:22:03] <earnest> 'sort by recon'?
[17:22:05] <Soliton> so you edit the csv file?
[17:22:06] <wwilliam> is not misslead
[17:22:06] <earnest> How do you sort by them
[17:22:10] <wwilliam> Soliton: no
[17:22:11] <earendel> because we ran out of tshirts last year alreadyt.
[17:22:26] <Soliton> earendel: same regex aka timestamp.
[17:22:32] <Soliton> err earnest
[17:22:45] <Soliton> i guess i should ignore the other guy.
[17:23:00] <earnest> But that would mean they extract the timestamp from the recon filename, which they aren't doing
[17:23:01] <earendel> again.
[17:23:07] <earendel> another mislead.
[17:23:14] <earendel> lol. soliton watch it.
[17:23:20] <earendel> keep it tasty.
[17:23:21] <Soliton> earnest: that's what the regex does.
[17:23:44] <Soliton> the match is the timestamp.
[17:23:50] <wwilliam> yes
[17:24:13] <tangy> [uh, "tasty" is someone else, thx ;) ]
[17:24:14] <Soliton> wwilliam: but the csv file is the index? or the index is some other file?
[17:24:27] <earnest> Soliton: The directory listing shows many such things, some of which are 'recon' files (be recon I assume the ones called Reconciliation
[17:24:40] <earnest> So the regex would match more than just the recon files
[17:24:44] <earendel> hm. maybe it wasnt me who put wwilliam on the ignore list. and wwilliam is my thai connection.
[17:24:46] <earendel> but then no.
[17:24:53] <Soliton> the timestamp is always the same.
[17:24:56] <wwilliam> Soliton: the index is another file.
[17:25:09] <Soliton> that's how they know what files belong together.
[17:25:18] <earnest> Soliton: So then why do the recon files matter?  That's what I'm confused about lol
[17:25:27] <wwilliam> earnest: no one reconciliation per files
[17:25:37] <Soliton> that is the part i don't fully know yet either.
[17:25:53] <earendel> lol
[17:26:02] <wwilliam> The recon files matter again
[17:26:07] <wwilliam> because no recon
[17:26:13] <earnest> As far as I'm concerned the recon files need to exist, and that there needs to be more than two of them.  Then they don't matter afterwards
[17:26:17] <earnest> because that's what the script tells me
[17:26:18] <wwilliam> the next developer program will not kick
[17:26:33] <Soliton> so again the first step is to go through the recon files.
[17:26:48] <Soliton> extract timestamp, gather all files that belong to it.
[17:26:56] <earendel> it's like socialism. you see the crowd lining up .. there is something to get.
[17:27:02] *** LambdaCo1 is now known as LambdaComplex
[17:27:05] <Soliton> put them all in one dir and extract and do whatever else.
[17:27:05] <earnest> No checks are made against recon files other than that it has 'Reconciliation' in its filename
[17:27:07] <earendel> lol
[17:27:21] <wwilliam> correct
[17:27:39] <wwilliam> someone else checks the  csv in the recon after wards not me
[17:27:41] <tangy> it's like Lassie, or Flipper
[17:27:42] *** Quits: kj (~kj@kj.aerisnetwork.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:27:49] <earendel> right,
[17:28:11] <earendel> less amphibic
[17:28:22] <earendel> wAIT.
[17:28:37] <earendel> dolphins are mammals and cant live on land.
[17:28:45] <tangy> right
[17:28:46] <earendel> genuine mistake. no irony.
[17:29:12] <earendel> but i love it.
[17:29:20] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[17:29:26] <earendel> wait. omg. lassie was not even a dophin.
[17:30:22] <earendel> tangy. you are the intellectual around here?
[17:30:34] <earnest> Soliton: My last contribution is then just: for each recon file; extract timestamp.  for each file that matches IMG...*timestamp*.zip move $file to directory where directory is ${file%.zip}
[17:30:38] <earnest> That's all I got
[17:30:50] *** Joins: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca)
[17:31:12] <tangy> wwilliam: have you considered finding a job where you yourself can be the expert?
[17:31:15] *** Quits: micronnn (~micronn@user/micronn) (Quit: .)
[17:31:22] <earnest> Or where directory is timestamp
[17:31:27] <tangy> I would suggest that
[17:31:36] *** Joins: micronn (~micronn@user/micronn)
[17:31:51] <earendel> tell them to patch my android so i can at least have low G again. so we can play a little bit halo.
[17:32:23] <earendel> are there no ops in this channel. we should all be at least kicked with a warning.
[17:32:50] <earendel> good old days.
[17:32:53] *** Quits: bomb-on (~bomb-on@194.144.47.113) (Quit: aÐ»Ð»Ð¸Ð»Ñ¹Ñ–Ð°!)
[17:33:05] <tangy> wwilliam: because usually the helpers can be found, and are available to help, but not always. eventually, there might not be anyone there who could help (concerned emoji)
[17:33:38] <earendel> the truth is. you are santa.
[17:34:12] <earendel> now look into the red light and say cheese.
[17:34:25] <tangy> what? my beard isn't even of 'Taliban-minumum' length yet
[17:35:23] <tangy> omg, it's so totally time for cookies
[17:36:37] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[17:37:10] <earendel> beards are for pussies.
[17:37:11] *** Quits: Carp (~rue@1-162-40-122.dynamic-ip.hinet.net) (Quit: WeeChat 3.3)
[17:37:30] *** Joins: Carp (~rue@1-162-40-122.dynamic-ip.hinet.net)
[17:39:11] *** Joins: mei (~mei@user/mei)
[17:39:29] <NRK[m]1> yes, pussies are attracted by chad beard!
[17:39:53] *** Quits: omegatron (~some@p54849842.dip0.t-ipconnect.de) (Quit: What happened? You quit!)
[17:40:00] *** Parts: zeno1 (~zen@88.103.31.15) ()
[17:40:04] <earendel> which is why you should never grow one
[17:40:10] <earendel> noob.
[17:41:08] *** tinman719 is now known as bobloblaw
[17:41:11] <earendel> ok: a moustache.
[17:42:22] <earendel> you know what they put in deodorants?
[17:42:33] *** Quits: herjazz (~herjazz@p6758124-ipngn30801marunouchi.tokyo.ocn.ne.jp) (Quit: leaving)
[17:43:08] <earendel> phaerhormes extracted from the ooze of masculine swine.
[17:43:45] *** Joins: keypusher (keypusher@user/keypusher)
[17:43:56] <earendel> who is chad.
[17:44:51] <earendel> no i really don't have a strong opinion.
[17:45:07] <earendel> beaver no beaver
[17:45:11] <earendel> it oscillates
[17:45:35] <earendel> but
[17:46:10] *** Joins: mnemonic (~semeion@user/semeion)
[17:46:59] <earendel> you realise a kink is when somebody enjoys it?
[17:48:41] <earendel> shit. this is bash right?
[17:48:48] *** Parts: earendel (uid498179@user/earendel) ()
[17:49:25] *** Joins: earendel (uid498179@user/earendel)
[17:52:01] *** Quits: prifici (~patri@user/prifici) (Quit: Off to work or bed.)
[17:53:44] *** comruminoAlt is now known as comrumino
[17:54:44] *** Joins: son0p (~ff@181.136.122.143)
[17:55:14] *** Joins: tradar (~tradar@user/tradar)
[17:56:25] <Soliton> wwilliam: it's mind boggling to me how you put this script together and have not made a single comment.
[17:56:47] <wwilliam> Sorry.
[17:57:06] <Soliton> there is so much nonsense in it which would be quicker to skip over if one wouldn't have to read the whole thing to understand it's nonsense.
[17:57:38] <Soliton> like a loop at the end of which the result is a single variable.
[17:58:47] <earendel> reduce
[17:59:16] *** Joins: kj (~kj@beta.aerisnetwork.net)
[18:00:38] *** Joins: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff)
[18:01:01] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[18:02:22] <earendel> hm. everything screams to put event-stream to next ..version. no deps. understand that bitching 0.8 streams. update node doku. and simplify process handling. ecmash
[18:02:46] <karstensrage> thank you all, my scripts are working now that i added the #!/bin/bash to them
[18:04:54] <Soliton> do they still contain gratuitous eval?
[18:10:31] *** Quits: tradar (~tradar@user/tradar) (Quit: tradar)
[18:10:56] *** Joins: ChmEarl (~chmearl@user/chmearl)
[18:11:17] *** Quits: chovy (chovy@tilde.club) (Quit: leaving)
[18:11:25] *** Quits: BSaboia (~bsaboia@177.37.198.122) (Quit: This computer has gone to sleep)
[18:12:48] <karstensrage> yes, i didnt know that was gratuitous
[18:12:49] *** Joins: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4)
[18:14:53] <Soliton> well, you did only show a partial line but it looked just like a convoluted way to write: echo "Elapsed time: $((elapsed/60)) minutes"
[18:15:45] <karstensrage> eval "echo TRACK $(date +'%d-%m %T,%3N') processing FINISHED $(date -ud "@$elapsed" +'\($((%s/60))\)')"
[18:15:49] <karstensrage> thats the whole line
[18:16:29] <Soliton> so what is the point of the second date call?
[18:16:39] *** Joins: sardonico (~alessio@user/sardonico)
[18:16:46] <Soliton> you put in epoch and get out epoch.
[18:17:01] *** Quits: sinaowolabi_ (~SinaOwola@102.134.114.1) (Ping timeout: 252 seconds)
[18:17:03] *** Parts: sardonico (~alessio@user/sardonico) ()
[18:17:30] *** Joins: shad (~shad@user/shad)
[18:17:32] <Soliton> # date -d @123 +%s
[18:17:34] <shbot> Soliton: 123
[18:17:38] <Soliton> # date -ud @123 +%s
[18:17:40] <shbot> Soliton: 123
[18:19:03] <Soliton> so you can write the whole thing as: echo "TRACK $(date +'%d-%m %T,%3N') processing FINISHED $((elapsed/60))"
[18:19:16] *** Joins: tobybl_ (~tobybl@31.111.35.255)
[18:20:52] *** Joins: BSaboia (~bsaboia@177.37.198.122)
[18:22:05] *** Quits: tobybl (~tobybl@31.111.35.255) (Ping timeout: 252 seconds)
[18:25:03] *** Quits: sdu (~doo@185.44.146.178) (Remote host closed the connection)
[18:26:25] <earnest> I like to remind that text can go in the format part too: +'TRACK %d ... FINISHED'
[18:27:14] <earnest> date +"TRACK %d ... FINISHED $((elapsed/60))" # look ma, no subshell
[18:28:37] *** Joins: semeion (~semeion@user/semeion)
[18:28:37] *** mnemonic is now known as Guest608
[18:30:32] *** Joins: Dragod (~Beu@95.236.68.104)
[18:31:28] *** Quits: Guest608 (~semeion@user/semeion) (Ping timeout: 252 seconds)
[18:32:06] *** Joins: zeden (~zeden@user/zeden)
[18:35:08] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[18:37:58] *** Joins: rtjure__ (~rtjure@bras-79-132-17-74.comnet.bg)
[18:39:49] *** Joins: elkalamar (elkalamar@gateway/vpn/airvpn/elkalamar)
[18:40:10] *** Quits: roadie`` (~user@2a02:8108:ec0:1427:4d80:5e69:3824:646c) (Ping timeout: 252 seconds)
[18:44:56] *** Joins: PapaChub (~PapaChub@vzw-54.parabon.com)
[18:45:51] *** Joins: zro (~zro@user/zro)
[18:45:59] *** Joins: jkwnki (~jkwnki@p4ff31b54.dip0.t-ipconnect.de)
[18:50:37] *** Quits: jkwnki (~jkwnki@p4ff31b54.dip0.t-ipconnect.de) (Ping timeout: 252 seconds)
[18:50:37] *** Joins: dayday (uid520582@id-520582.hampstead.irccloud.com)
[18:51:30] *** Quits: frostwork_ (~frostwork@user/frostwork) (Quit: Leaving)
[18:52:51] *** Quits: sgn (~sgn@user/sgn) (Read error: Connection reset by peer)
[18:53:14] *** Joins: sgn (~sgn@user/sgn)
[18:54:34] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[18:54:47] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[18:55:19] *** Joins: sdu (~doo@185.44.146.178)
[18:56:02] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[18:56:40] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[18:57:25] <wwilliam> Ok I almost got it Soliton if i run lets say for 2 batches it moves them fine, but if i start the script again the counter starts at 0 again and I get this:
[18:57:38] <wwilliam> + mv -v -- IMGSOAA_PPD_20211001_0 /home/afernandez/u6/axa/axa_ir_production
[18:57:39] <wwilliam> mv: cannot move 'IMGSOAA_PPD_20211001_0' to '/home/afernandez/u6/axa/axa_ir_production/IMGSOAA_PPD_20211001_0': File exists
[18:58:21] <Soliton> if the dir exists the while loop would count up.
[18:58:25] <wwilliam> How can i make the counter see whats already there and create the suffix with the next number i dont know if i explained my self correctly
[18:58:45] <wwilliam> yes if it is the same batch yes1
[18:58:47] <Soliton> i guess you added something special for count 0.
[18:59:36] <wwilliam> no is like this  counter=0
[18:59:51] *** Joins: richardm75_ (~richardm7@2600:8801:c507:2900:b4d8:aa1b:55f2:9881)
[18:59:52] *** Joins: lorimer (~lorimer@user/lorimer)
[18:59:55] <wwilliam> so the first run of the script process fine adds the number suffix and all
[19:00:14] <wwilliam> but if i run again on new batches i get that mv error.
[19:00:34] <Soliton> so  while [[ -d "$dirprefix"_"$counter" ]]; do ((counter++)); done  will count up since the dir exists.
[19:00:46] <wwilliam> OK thanks testing.
[19:01:12] <Soliton> not sure what to test. i already gave you that.
[19:02:25] *** Joins: Fozzworth (~Fozzworth@user/fozzworth)
[19:03:12] <wwilliam> I did not added I did not know where to put it.
[19:03:20] <wwilliam> I am trying again now.
[19:03:30] *** Quits: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net) (Ping timeout: 260 seconds)
[19:05:30] <n8chan> starting from <<VAR=foo; STR=\${VAR}bar;>> what's the best way to substitute the definition of VAR into STR and define a new variable SUBST which is equal to foobar?  look like you could write SUBST=$(eval echo ${STR}) but i would prefer to avoid a subshell
[19:06:14] <Soliton> i was expecting "i'd prefer to avoid the eval"...
[19:06:18] *** Joins: Bit_MCP234 (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net)
[19:06:35] <Soliton> why do you need this indirection?
[19:06:42] <Soliton> are these env variables?
[19:07:02] *** Quits: Fozzworth__ (~Fozzworth@68-123-12-205.lightspeed.sntcca.sbcglobal.net) (Remote host closed the connection)
[19:07:18] <n8chan> i am providing STR as an argument to a script.  i want it to substitute the script to substitute some definitions in
[19:07:36] <Soliton> this looks like a sad design but if you must use eval... well just use it properly and set the variable?
[19:07:44] *** Quits: rtjure (~rtjure@bras-79-132-17-74.comnet.bg) (Ping timeout: 252 seconds)
[19:08:06] <Soliton> the user provides script internal variable names??
[19:08:14] *** Joins: sublim20 (~sublim20@user/sublim20)
[19:08:17] *** Quits: adac (~adac@212-41-238-132.static.upcbusiness.at) (Ping timeout: 252 seconds)
[19:08:18] <n8chan> yeah, "the user" being me
[19:08:26] <n8chan> i'm comfortable with me doing the right thing :-)
[19:08:38] <n8chan> is that usage of eval incorrect?
[19:08:57] <Soliton> if you want to set a variable it should contain an assignment.
[19:09:01] <Soliton> !eval
[19:09:01] <greybot> 'eval' is a common misspelling of 'evil'. If eval is the answer, surely you are asking the wrong question. See http://mywiki.wooledge.org/BashFAQ/048
[19:09:05] *** Quits: drd (~drd@2001:b07:a70:9f1f:1562:34de:f50f:77d4) (Ping timeout: 264 seconds)
[19:09:23] <Soliton> perhaps you really just want to use an associative array.
[19:10:01] <n8chan> i really want to define VAR a few different ways and substitute it into a user provided string STR and do something with each of those definitions of STR
[19:10:07] *** Joins: drd (~drd@93-42-69-115.ip85.fastwebnet.it)
[19:10:31] <Soliton> declare -A arr=([foo]=foostr [bar]=barstr); ... "${arr[$1]}"
[19:10:41] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[19:10:53] *** Quits: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff) (Remote host closed the connection)
[19:11:08] <n8chan> um.  i don't know ahead of time what the values will be
[19:11:10] *** Joins: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff)
[19:12:05] *** Quits: Ders (MrA@user/ders) (Quit: ZNC 1.8.2 - https://znc.in)
[19:12:23] *** Joins: MrA (MrA@2602:ff75:7:3ccc::20)
[19:12:27] <Soliton> you don't know what the internal variable name will be??
[19:12:46] <Soliton> no idea how you're going to give it as an argument then.
[19:13:23] *** Quits: Intelo (~Intelo@88.244.90.6) (Quit: Client closed)
[19:13:54] <n8chan> the unknown thing contains things like \${internal_variable}
[19:14:03] <n8chan> i pass that unknown thing into the script
[19:14:13] <n8chan> the script substitutes \${internal_variable} into the unknown thing
[19:14:18] <n8chan> and then it does something with the result
[19:14:37] <n8chan> so one way to do that would be to write what_i_want=$(eval echo ${unknown_thing})
[19:14:44] <n8chan> hoping there's a better way
[19:14:49] *** Quits: drd (~drd@93-42-69-115.ip85.fastwebnet.it) (Ping timeout: 252 seconds)
[19:14:56] *** Quits: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca) (Ping timeout: 252 seconds)
[19:15:06] <Soliton> you give eval shell code. how can that be the code you come up with to set a variable.
[19:15:11] <Soliton> !assignment
[19:15:11] <greybot> To assign to a variable, use varname=value . Do not include spaces around the '=', and do not write $varname on the left hand side.
[19:15:14] *** Quits: elastic_1 (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb) (Quit: elastic_1)
[19:15:27] <n8chan> i would love to hear what is better, but not general advice
[19:15:32] *** Joins: elastic_dog (~elastic_d@2a01:118f:822:9c00:f583:aa51:9ad4:d4fb)
[19:15:51] <n8chan> what i've described here "works" but is obviously hacky
[19:15:57] <n8chan> i want something else that works but isn't hacky
[19:16:11] <Soliton> var=value is how you assign a value to a variable.
[19:16:47] <n8chan> so you're saying i should just write `eval thing_i_want=${unknown_thing}`?
[19:17:11] <Soliton> i'm not saying you should use eval at all.
[19:17:37] <Soliton> some quotes might be cool, too.
[19:17:47] <n8chan> cool, if you have any suggestions for the problem i'm trying to solve, i'd be happy to hear them
[19:17:58] <Soliton> heh, ok. good luck.
[19:20:11] <pocketprotector> Hey Soliton do you know when that csv builtin was added? I searched the bash project commits at savannah but didnt come up with anything
[19:20:57] <Soliton> no clue but checking the source repo should tell you.
[19:21:14] <pocketprotector> the gnu savannah page sucks =/
[19:21:32] <pocketprotector> I see somebody mirrored the repo on github, ill check there
[19:24:26] <pocketprotector> OK, its a bash 5.1 feature
[19:24:37] <pocketprotector> https://github.com/bminor/bash/blob/f3a35a2d601a55f337f8ca02a541f8c033682247/NEWS
[19:25:49] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 252 seconds)
[19:26:00] *** Quits: mozgalom (~mozgalom@IPnet-gw.157.157.97.111.simnet.is) (Quit: SO LONG SUCKERS!)
[19:26:06] <n8chan> thanks for the suggestion with eval, Soliton.  i tried what i inferred you to be suggesting.  aiui, that means i get to avoid a subprocess which was my main goal
[19:26:22] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[19:27:27] *** Joins: Crescendo (~Crescendo@user/crescendo)
[19:27:51] *** Joins: lavaball (felix@31.204.155.215)
[19:29:12] <jcbjoe2021> Are the people that are in this channel masters at the Linux distro since they know scripting?
[19:29:50] <Soliton> bash runs on many operating systems.
[19:30:38] * djph wonders what "the" linux distro is.
[19:31:07] *** Joins: drd (~drd@93-42-69-115.ip85.fastwebnet.it)
[19:31:53] <Tadgy> Slackware :)
[19:33:09] <Soliton> a good place to find "masters at the Linux distro" might be a linux channel.
[19:36:05] *** Quits: shad (~shad@user/shad) (Ping timeout: 264 seconds)
[19:36:23] *** Quits: alzgh (~alzgh@user/alzgh) (Remote host closed the connection)
[19:36:44] *** Joins: alzgh (~alzgh@user/alzgh)
[19:38:57] *** Quits: xiongxin (~quassel@113.116.35.63) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[19:39:39] *** Quits: tobybl_ (~tobybl@31.111.35.255) (Remote host closed the connection)
[19:41:42] <Soliton> wwilliam: instead of the mkfile why don't you start with a clean stage dir each time?
[19:42:00] *** Joins: tobybl (~tobybl@31.111.35.255)
[19:42:17] <Soliton> you just avoid touching the old files in each loop so why even have them there.
[19:42:18] <wwilliam> is not that more work create a new dir
[19:42:22] <wwilliam> everytime?
[19:42:32] <Soliton> mkdir is expensive?
[19:42:42] <wwilliam> no
[19:42:50] <Soliton> instead of going through files you already processed each and every time.
[19:42:58] <wwilliam> good idea
[19:43:58] <Soliton> also it'd fix stuff like  [[ $recon -nt mkfile ]]  which does nothing.
[19:43:59] <wwilliam> I am still trying to figure out where to put what you told me before...
[19:44:13] <wwilliam> OK.
[19:44:25] <Soliton> (since mkfile is a variable name not the name of the file.
[19:44:31] <wwilliam> I removed the ; at the end of everyline now.
[19:44:49] *** Joins: situ_ (~situ@ip-89-176-145-74.net.upcbroadband.cz)
[19:46:18] *** Quits: tobybl (~tobybl@31.111.35.255) (Remote host closed the connection)
[19:46:33] <wwilliam> ughh n[[ $recon -nt mkfile ]] i will fix. Thanks sol
[19:48:23] *** Uqbar_ is now known as Uqbar
[19:50:18] <Soliton> also confusing where you seem to have a zips dir under each day dir (which you create) and then there is another zips dir in the staging dir (which you don't create).
[19:52:19] *** Quits: han-solo (~hanish@user/han-solo) (Ping timeout: 252 seconds)
[19:56:42] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[19:58:24] <Soliton> also since you do that the staging dir actually should be clean...
[20:00:19] <wwilliam> OK....
[20:00:27] <wwilliam> Thanks for all that, working on it.
[20:01:32] *** Joins: magla (~gelignite@55d4bce1.access.ecotel.net)
[20:01:53] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[20:02:42] *** Quits: speckz (~speckz@2600:1700:ce0:bf00:21c1:d5b9:c26e:f0ce) (Quit: Textual IRC Client: www.textualapp.com)
[20:05:36] *** Joins: woink (~woink@cpe-69-206-152-193.hvc.res.rr.com)
[20:05:40] *** Quits: Entelin (~mpruett@50-206-111-190-static.hfc.comcastbusiness.net) (Read error: Connection reset by peer)
[20:06:17] *** Joins: seninha (~seninha@user/seninha)
[20:11:45] *** Joins: stealth[] (~stealth]@i59f72152.versanet.de)
[20:12:40] *** Quits: t3nj1n_ (~t3nj1n@pool-96-246-146-100.nycmny.fios.verizon.net) (Remote host closed the connection)
[20:12:46] *** Quits: alzgh (~alzgh@user/alzgh) (Remote host closed the connection)
[20:13:07] *** Joins: alzgh (~alzgh@user/alzgh)
[20:14:12] *** Joins: mozgalom (~mozgalom@194.144.47.113)
[20:14:19] *** Quits: sinaowolabi (~SinaOwola@160.152.64.7) (Ping timeout: 252 seconds)
[20:16:23] *** Joins: mago (~mago@87.125.57.238)
[20:19:50] *** Quits: nyex (~Thunderbi@177.84.107.26) (Quit: nyex)
[20:22:26] *** twkm^ is now known as twkm
[20:23:04] *** Quits: seninha (~seninha@user/seninha) (Quit: Leaving)
[20:26:14] <wwilliam> I did this still I get the mv error:
[20:26:15] <wwilliam> counter=0;
[20:26:17] <wwilliam> dirprefix="$dest"/IMGSOAA_PPD_"$(date +%Y%m%d)";counter=0
[20:26:18] <wwilliam> finaldir="$dirprefix"_"$counter"
[20:26:20] <wwilliam> while [[ -d "$dirprefix"_"$counter" ]]; do
[20:26:21] <wwilliam> 	((counter++));
[20:26:23] <wwilliam> done;
[20:26:24] <wwilliam> mkdir -p "$finaldir"/{zips,fromportal}
[20:26:27] <wwilliam> mv: cannot move 'IMGSOAA_PPD_20211001_0' to '/home/afernandez/u6/axa/axa_ir_production/IMGSOAA_PPD_20211001_0': File exists
[20:27:28] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[20:28:17] *** Quits: n4dir (~user@mue-88-130-56-201.dsl.tropolys.de) (Remote host closed the connection)
[20:29:19] *** Joins: seninha (~seninha@user/seninha)
[20:30:55] *** Quits: koollman (samson_t@sp1.kooll.org) (Changing host)
[20:30:55] *** Joins: koollman (samson_t@user/koollman)
[20:32:15] <Soliton> also you're moving the dir to production and THEN fix up the .txt files. since you normally do it before that does not sound good.
[20:32:18] *** Joins: sandb0y (~pirate@user/sandb0y)
[20:33:06] <Soliton> and the constant date calling every other line...
[20:33:21] *** Joins: YaoNai (~YaoNai@user/yaonai)
[20:34:30] <Soliton> your current issue is that dirprefix is in preproduction though you want to check in the production dir.
[20:40:22] <wwilliam> OK Thank you Soliton
[20:40:46] *** Joins: ozzzo_work (~ozzzo_wor@h87.s239.verisign.com)
[20:40:53] *** Quits: pj (~pj@ghettoforge/pj) (Ping timeout: 246 seconds)
[20:41:09] <ozzzo_work> I tried this but it doesn't work, because terraform wants the options to be at the end: alias terraform='/usr/local/bin/terraform-0.12.14 -autoapprove'
[20:42:00] <ozzzo_work> is it possible to make an alias that adds an option, so that I could type "terraform apply" and the alias would do "/usr/local/bin/terraform-0.12.14 apply -autoapprove"?
[20:42:12] <Soliton> !aliases
[20:42:12] <greybot> Aliases suck. They don't work in scripts. They can't take arguments. They have special evil magical powers that break all expectations. See http://mywiki.wooledge.org/BashFAQ/080 for starters.
[20:42:57] <Soliton> terraform() { /usr/local/bin/terraform-0.12.14 "$@" -autoapprove; }
[20:45:06] <ozzzo_work> oh nice, I had forgotten about bash functions
[20:46:35] <Soliton> wwilliam: http://ix.io/3AwF that is your current script rewritten as best i could tell the goal.
[20:46:36] <checkbot> Soliton: I think the problem is on line 34. d was modified in a subshell. That change might be lost. See 5 issues on https://shellcheck.net/?id=cb8596
[20:47:12] <earnest> Soliton: unzip -d will make directories, which is nice
[20:47:30] <earnest> While also extracting to it
[20:47:33] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[20:47:35] <wwilliam> Ayyyy!!! Thank you so much, I guess i got you in a good mood today!!! Thanks a million!!
[20:47:44] <Soliton> it was tough enough to get to this version. there is still lots to improve.
[20:48:02] <Soliton> also still no clue how the recon files issue comes into this.
[20:48:33] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[20:48:41] <Soliton> checkbot is wrong anyway though.
[20:49:07] <Soliton> i guess i could have use a different variable name but dir was already used...
[20:50:05] <Soliton> i also added comments, btw.
[20:50:38] <Soliton> some are obsolete though since i already fixed it in the way i think makes sense.
[20:50:54] <wwilliam> what's the fromportal dir for?  required by next dev script.
[20:51:44] <Soliton> but it's not even in the production dir.
[20:52:06] <wwilliam> that is where they wanted.
[20:52:11] <wwilliam> I dont know why.
[20:52:40] <Soliton> ok, well that part is not important though i'd document such random dependencies to other scripts.
[20:53:32] *** Joins: pj (~pj@ghettoforge/pj)
[20:53:53] <wwilliam> Ok Thanks for all that.
[20:54:18] <Soliton> if you have a lot of those .txt files then the sed call might tell you argument list too long now.
[20:54:19] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[20:54:32] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[20:54:46] *** Quits: TomyWork (~TomyLobo@p200300e80f06af008ce616361e40f6e6.dip0.t-ipconnect.de) (Quit: Leaving)
[20:54:47] <Soliton> ideally you should just fixup those txt files once anyway.
[20:54:48] <wwilliam> Not that many of those txt files.
[20:54:54] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[20:55:08] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[20:55:56] <Soliton> (i.e. first figure out if you need the counter suffix and then make awk use the correct path.)
[20:56:07] *** Quits: mtk_ (~mtk@2601:185:200:72:44aa:53fe:886b:bee9) (Ping timeout: 252 seconds)
[20:56:11] *** Quits: jdltouraine__ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff) (Remote host closed the connection)
[20:56:17] *** Joins: jdltouraine_ (~jdltourai@2a02:a03f:847b:b800:b163:93c1:699b:16ff)
[20:57:10] *** Joins: Camilo (~hugh@host-89-242-149-36.as13285.net)
[20:57:28] <wwilliam> OK,
[20:58:12] <Soliton> first of all you should see if my script does something remotely correct since i didn't test anything.
[20:58:18] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[20:59:49] *** Joins: vmeson (~rmacleod@198-48-226-187.cpe.pppoe.ca)
[21:00:16] <Camilo> really stupid question, how do I exclude a list of file types from tar? I thought this would work but no: --exclude='*.(pdf)|(log)'
[21:01:53] <Soliton> GNU tar documents a glob-style pattern.
[21:02:19] <Camilo> found it: --exclude="*."{pdf,bcf,log,out,xml,aux}
[21:02:39] *** Quits: Dragod (~Beu@95.236.68.104) (Quit: Leaving)
[21:03:13] <Soliton> that will expand to glob-styles indeed.
[21:05:19] *** Quits: Bit_MCP234 (~Bit_MCP@99-22-255-91.lightspeed.frokca.sbcglobal.net) (Ping timeout: 252 seconds)
[21:05:56] <Camilo> thanks I should have been looking up globbing instead of regex
[21:06:30] <Soliton> what you had initially was neither. :-P
[21:07:31] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 252 seconds)
[21:08:55] *** Joins: darkbit (~db@152.32.99.67)
[21:09:38] *** Quits: aniruddha (uid340443@id-340443.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[21:12:13] *** Joins: adac (~adac@213-47-187-80.cable.dynamic.surfer.at)
[21:13:07] <jcbjoe2021> I ran this command while IFS= read -rd '' file <&3; do mpv "$file"; read -rp 'Remove? [y/N]'; [[ $REPLY = [Yy]* ]] && rm -I "$file"; done 3< <(find . -type f -iname '*.mp4' -print0) and it is doing what it is suppose to I guess but I want to stop it. I did killall mph and it still cycling through I did a kill -9 <pid> and it still cycling. how do I stop this?
[21:13:53] <Soliton> press ctrl-c?
[21:14:03] <jcbjoe2021> Soliton: still cycles
[21:14:27] <jcbjoe2021> should I killall while ?
[21:14:50] *** Quits: supernovah (~supernova@mail.ijk.nz) (Ping timeout: 252 seconds)
[21:14:53] <pocketprotector> what is the goal here?
[21:15:06] <jcbjoe2021> I want to stop it cycling through videos for now
[21:15:06] <Soliton> no process is named while.
[21:15:27] <Soliton> you can kill the find if it really hasn't died.
[21:15:54] *** Quits: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com) (Read error: Connection reset by peer)
[21:16:00] *** Joins: skapata (~Skapata@2804:14c:87b0:a6f9:495a:535c:75c5:a757)
[21:16:00] *** Quits: skapata (~Skapata@2804:14c:87b0:a6f9:495a:535c:75c5:a757) (Changing host)
[21:16:00] *** Joins: skapata (~Skapata@user/skapata)
[21:16:27] <pocketprotector> why not use -exec on your find command?
[21:16:31] <jcbjoe2021> I did ps aux |grep -w find and nothing
[21:16:44] <Soliton> so what is still running anyway?
[21:16:48] <Soliton> mpv?
[21:16:59] <jcbjoe2021> Soliton: mpv is running
[21:17:03] *** Joins: arinov (~arinov@31.142.103.218)
[21:17:30] <Soliton> is mpv trapping INT?
[21:17:48] <Soliton> you ran this in an interactive shell, correct?
[21:17:54] <jcbjoe2021> yes Soliton
[21:18:05] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.3)
[21:18:06] <jcbjoe2021> can I kill the tty?
[21:18:11] <Soliton> so ctrl-c should kill it unless mpv is not cooperating.
[21:18:13] *** Joins: wolfdale (~wolfdale@ec2-3-1-90-26.ap-southeast-1.compute.amazonaws.com)
[21:18:39] <Soliton> so  pkill mpv  in another terminal perhaps.
[21:18:51] <tirnanog> press q to quit mpv, then try ^C again. also, please stop using rm -I in this context. -I does nothing here and could be dangerous if cargo-culted in some other context under the assumption that you're going to get a prompt. I explained this yesterday.
[21:19:47] *** Quits: adac (~adac@213-47-187-80.cable.dynamic.surfer.at) (Ping timeout: 252 seconds)
[21:20:13] *** Joins: semeion (~semeion@user/semeion)
[21:20:20] *** Quits: Crescendo (~Crescendo@user/crescendo) (Ping timeout: 252 seconds)
[21:20:58] *** edk is now known as deadk
[21:20:58] <jcbjoe2021> tirnanog: that fixed it. I ran it again and killall mpv worked
[21:21:01] <tirnanog> in case you missed it: https://termbin.com/gdrd
[21:21:04] <jcbjoe2021> thanks everybody
[21:21:09] <tirnanog> the second example shows a valid way of using rm -i.
[21:21:35] *** Joins: supernovah (~supernova@mail.ijk.nz)
[21:21:48] <Soliton> sounds like mpv will read stdin though.
[21:21:56] <Nintendo> Mpv has IPC capabilities, you know.  You can use it with socat.
[21:22:18] <Soliton> well and rm -i.
[21:22:44] <tirnanog> Soliton: rats. you're right. will correct.
[21:24:08] *** Quits: phogg (~phogg@static-108-51-94-2.washdc.fios.verizon.net) (Changing host)
[21:24:08] *** Joins: phogg (~phogg@user/phogg)
[21:24:48] *** Quits: lispmacs[work] (~lispmacs@fsf/member/lispmacs) (Remote host closed the connection)
[21:25:59] *** Joins: ackyshake (~ackyshake@user/ackyshake)
[21:27:02] <Soliton> jcbjoe2021: btw, another general approach is ctrl-z to suspend the job. doesn't matter what commands are involved then they won't get a say. then you can kill the job.
[21:27:10] *** Quits: wuseman (wuseman@user/wuseman) (Quit: ZNC 1.8.2+deb2build1 - https://znc.in)
[21:28:32] *** Quits: arinov (~arinov@31.142.103.218) (Ping timeout: 252 seconds)
[21:29:25] <jcbjoe2021> thanks Soliton
[21:30:00] *** Henry151_ is now known as Henry151
[21:30:14] *** Joins: przemoc (~przemoc@user/przemoc)
[21:31:11] *** Joins: hesse (~TheHerman@gateway/tor-sasl/thehermann)
[21:31:15] <tirnanog> jcbjoe2021: here you go. this also incorporates a third, simpler, example, based on pocketprotector's idea of using find -exec: https://termbin.com/7498. just remember, it's lower-case -i.
[21:31:17] *** Quits: supernovah (~supernova@mail.ijk.nz) (Ping timeout: 252 seconds)
[21:33:07] *** Joins: supernovah (~supernova@mail.ijk.nz)
[21:33:16] <jcbjoe2021> tirnanog: im going to try example 3
[21:33:30] *** Quits: sublim20 (~sublim20@user/sublim20) (Quit: Leaving)
[21:34:20] <tirnanog> running it with -I would be bad because it would just delete the file unconditionally. it's because -I only prompts under certain conditions (which are documented).
[21:34:27] *** Quits: TheHermann (~TheHerman@gateway/tor-sasl/thehermann) (Ping timeout: 276 seconds)
[21:34:27] <jcbjoe2021> oh ok
[21:34:47] <jcbjoe2021> tirnanog: I ran example 3 its playing the video but the term isn't giving me the option to delete it
[21:35:03] <tirnanog> you have to let mpv finish or (q)uit it before the prompt will appear.
[21:35:11] <tirnanog> and you did use lower case 'i' right?
[21:35:11] <jcbjoe2021> nvm
[21:35:15] <jcbjoe2021> it had to play the whole video
[21:35:20] <tirnanog> you can just press q.
[21:35:23] <jcbjoe2021> ok
[21:35:30] <tirnanog> no need to watch to the end.
[21:35:36] *** Joins: wootehfoot (~wootehfoo@user/wootehfoot)
[21:35:52] *** Joins: tangyQED (~tangy@user/tangy)
[21:35:57] <tirnanog> it's a standard mpv keyboard shortcut, you see.
[21:36:07] <jcbjoe2021> got it
[21:36:15] *** Quits: tangyQED (~tangy@user/tangy) (Remote host closed the connection)
[21:36:39] *** Quits: Bhavuk (~BTaneja@103.132.28.42) (Quit: Leaving)
[21:37:26] *** Quits: jess (~jess@libera/staff/jess) (Quit: Lost terminal)
[21:37:55] *** Joins: zeden (~zeden@user/zeden)
[21:38:15] *** Quits: zeden (~zeden@user/zeden) (Client Quit)
[21:38:50] *** Quits: mago (~mago@87.125.57.238) (Quit: Client closed)
[21:40:31] <jcbjoe2021> tirnanog: can I run a command before I run mpv that list what directories have the filetypes total like find . -type f | sed -n 's/..*\.//p' | sort | uniq -c  I want to see how many filetypes I have in the directory once I get the list I want to see what sub directories have that file type then run the example 3 command
[21:40:41] *** Quits: drd (~drd@93-42-69-115.ip85.fastwebnet.it) (Ping timeout: 252 seconds)
[21:42:27] <tirnanog> when you say "the directory", do you mean that you want a report of unique extensions, along with their counts, for every directory recursively, or just one given directory in particular?
[21:43:40] <tirnanog> I'm guessing it's the former.
[21:45:35] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 252 seconds)
[21:46:27] *** nf is now known as nfernal
[21:47:54] *** Joins: wuseman (wuseman@90-227-27-97-no68.tbcn.telia.com)
[21:47:54] *** Quits: wuseman (wuseman@90-227-27-97-no68.tbcn.telia.com) (Changing host)
[21:47:54] *** Joins: wuseman (wuseman@user/wuseman)
[21:48:45] *** Joins: semeion (~semeion@user/semeion)
[21:51:00] *** Quits: BH23 (uid132583@id-132583.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[21:51:20] *** Joins: adac (~adac@213-47-187-80.cable.dynamic.surfer.at)
[21:52:49] *** Joins: jess (~jess@libera/staff/jess)
[21:58:42] <tirnanog> jcbjoe2021: https://termbin.com/9nki, if I follow you correctly.
[21:59:55] <tirnanog> er, with -u also included by the sort command.
[22:00:22] *** Quits: SuperLag (~akulbe@user/superlag) (Ping timeout: 252 seconds)
[22:00:23] <tirnanog> hmm, maybe not.
[22:00:26] *** Quits: quazimod1 (~quazimodo@n1-41-179-164.bla2.nsw.optusnet.com.au) (Ping timeout: 252 seconds)
[22:01:09] *** Quits: YaoNai (~YaoNai@user/yaonai) (Quit: leaving)
[22:01:35] *** Quits: pj (~pj@ghettoforge/pj) (Ping timeout: 252 seconds)
[22:03:18] <tirnanog> this works: https://termbin.com/9v2d. sort before uniquing, with one more sort to show by descending order of count.
[22:05:06] *** Quits: MrA (MrA@2602:ff75:7:3ccc::20) (Quit: ZNC 1.8.2 - https://znc.in)
[22:05:26] *** Joins: MrA (MrA@2602:ff75:7:3ccc::20)
[22:05:31] *** Quits: sergiomiguelrp (~quassel@190.123.237.219) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[22:06:00] *** Joins: forgotmynick (uid24625@id-24625.hampstead.irccloud.com)
[22:06:10] <jcbjoe2021> tirnanog: run that as a script right?
[22:06:15] <tirnanog> yes.
[22:06:18] <jcbjoe2021> ok
[22:06:31] <tirnanog> and make sure you're in the directory from which you want to start searching at the time of running.
[22:06:54] <chiselfuse> I'm trying to grep a file that has very long lines, what would be a nice way to do it? I imagine the ideal output would be line and column numbers of matches.
[22:07:04] *** Quits: adac (~adac@213-47-187-80.cable.dynamic.surfer.at) (Ping timeout: 252 seconds)
[22:07:43] *** Quits: af (~af@awalgarg.me) (Quit: WeeChat 3.2.1)
[22:07:55] *** Joins: af (~af@awalgarg.me)
[22:07:56] <chiselfuse> Also I would then need a way to browse/output around that line/column.
[22:09:18] <jcbjoe2021> tirnanog: https://termbin.com/8c2g
[22:09:55] <tirnanog> jcbjoe2021: it must be run with bash. try "chmod +x ./script" before trying to run it.
[22:10:08] <tirnanog> so that the #!/bin/bash shebang is respected.
[22:10:33] <jcbjoe2021> same thing tirnanog
[22:10:37] <tirnanog> oh, but your sed doesn't support -z. I thought you were using GNU.
[22:10:47] <tirnanog> obviously, I was mistaken.
[22:10:48] <jcbjoe2021> nope
[22:11:03] *** Joins: zeden (~zeden@user/zeden)
[22:12:11] <tirnanog> jcbjoe2021: there are two things to contend with. firstly, the fact that the shebang wasn't respected. what operating system are you using?
[22:12:35] <jcbjoe2021> tirnanog: Mac OS im installing vmware fusion right now so I can install archlinux
[22:12:48] <tirnanog> jcbjoe2021: when you ran it the second time, did it still complain about globstar?
[22:13:16] <tirnanog> now I remember. macOS ships a really old version of bash.
[22:13:50] *** Joins: pj (~pj@ghettoforge/pj)
[22:14:05] <jcbjoe2021> joe@joe Downloads % ./sort
[22:14:05] <jcbjoe2021> ./sort: line 6: shopt: globstar: invalid shell option name
[22:14:05] <jcbjoe2021> Finding unique extensions in:
[22:14:09] *** Quits: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (Remote host closed the connection)
[22:14:19] <Soliton> zsh is default on macos nowadays.
[22:14:55] *** Joins: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net)
[22:14:58] <tirnanog> jcbjoe2021: yes, I understand why now.
[22:15:12] <tirnanog> Soliton: yeh, but it's a script.
[22:15:37] <Soliton> sure, but might be more pleasant to work with than ancient bash.
[22:15:55] *** Joins: unixman_home (~unixman2@216.137.211.99)
[22:16:09] <tirnanog> jcbjoe2021: can't test but  should work in macOS: https://termbin.com/t69p. again, just make sure it's marked as executable.
[22:16:26] *** Quits: MrA (MrA@2602:ff75:7:3ccc::20) (Ping timeout: 246 seconds)
[22:16:41] <tirnanog> no, it won't. silly me. revision coming right up.
[22:17:15] <tirnanog> jcbjoe2021: try this one: https://termbin.com/3r18o. it's a bit more brittle but I think it should suffice for your purposes.
[22:18:03] *** Quits: elena_re (~elena@31.173.85.129) (Read error: Connection reset by peer)
[22:18:08] *** Quits: AquaL1te (~AquaL1te@user/aqual1te) (Quit: leaving)
[22:18:15] *** Joins: t3nj1n (~t3nj1n@pool-96-246-146-100.nycmny.fios.verizon.net)
[22:18:27] <jcbjoe2021> tirnanog: it ran but its finding 1 file at a time. can I get a total?
[22:18:42] <tirnanog> jcbjoe2021: I don't think you're using the script in the last paste then.
[22:18:51] <tirnanog> please check.
[22:19:30] *** Quits: mat001 (~mat001@c-73-223-64-126.hsd1.ca.comcast.net) (Ping timeout: 260 seconds)
[22:20:52] <jcbjoe2021> ok
[22:21:06] <tirnanog> meanwhile, I'll drag out the macbook I have lying around and test it.
[22:23:28] <tirnanog> "3r18o" works for me here in macOS.
[22:24:02] *** Joins: elena_re (~elena@31.173.85.129)
[22:24:33] <tirnanog> pretty sure you're not using that particular instance.
[22:26:29] <jcbjoe2021> tirnanog: https://termbin.com/6fya
[22:27:29] <tirnanog> looks fine to me.
[22:28:14] <tirnanog> chiselfuse: ag - from the_silver_search - has a --column option but I'm not sure about limiting the context of the printed match.
[22:28:19] <tirnanog> the_silver_searcher*
[22:28:34] <jcbjoe2021> ok thanks tirnanog
[22:28:43] <tirnanog> jcbjoe2021: is it not what you wanted?
[22:29:00] <tirnanog> it does do what the comment says it does.
[22:29:56] <rundown> hey in this code https://bpa.st/KRJQ
[22:30:03] *** Quits: Carp (~rue@1-162-40-122.dynamic-ip.hinet.net) (Quit: WeeChat 3.3)
[22:30:10] <rundown> on line 6 what is the _pip; doing...is it needed
[22:30:27] <jcbjoe2021> tirnanog: yea once I find out the total of the sub directories I want to open say 65 pdf I want to open that up and look at each file and if I want delete it if I don't want it
[22:30:29] <Soliton> it calls the function.
[22:30:45] <Soliton> might as well just have the function.
[22:30:48] <Soliton> !aliases
[22:30:49] <greybot> Aliases suck. They don't work in scripts. They can't take arguments. They have special evil magical powers that break all expectations. See http://mywiki.wooledge.org/BashFAQ/080 for starters.
[22:31:09] <rundown> yes i was thinking ...does it really need to call the function when the alias itself calls the function
[22:31:12] <Soliton> there are also quotes missing around $1.
[22:31:13] *** Joins: adac (~adac@213-47-187-80.cable.dynamic.surfer.at)
[22:31:26] <rundown> ah ok ill change it and see if you like it
[22:31:48] <Soliton> the alias itself calls the function because of the last part.
[22:32:11] <tirnanog> jcbjoe2021: so, you want to be able to pick and choose which directory you initiate the viewing/culling based on the numbers you see?
[22:32:18] *** Quits: chiselfuse (~chiselfus@user/chiselfuse) (Ping timeout: 276 seconds)
[22:32:18] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Ping timeout: 276 seconds)
[22:32:19] *** Joins: loki_val (~crabbedha@user/crabbedhaloablut)
[22:33:34] *** Joins: chiselfuse (~chiselfus@user/chiselfuse)
[22:33:43] *** Quits: wwilliam (~Wiilliam@user/wwilliam) (Killed (sodium.libera.chat (Nickname regained by services)))
[22:33:43] *** Guest1026 is now known as wwilliam
[22:34:06] <wwilliam> Hello I am back I was driving...
[22:34:27] *** Joins: m0viefreak (~asdf@user/m0viefreak)
[22:36:21] *** Quits: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de) (Remote host closed the connection)
[22:37:04] <jcbjoe2021> yes tirnanog
[22:37:07] <tirnanog> jcbjoe2021: ok.
[22:37:29] *** Joins: Guest9732 (~Wiilliam@12.187.181.32)
[22:40:55] *** ezzieygu1wuf is now known as ezzieyguywuf
[22:41:46] *** Joins: Crescendo (~Crescendo@user/crescendo)
[22:42:40] *** Joins: MrA (MrA@2602:ff75:7:3ccc::20)
[22:44:06] *** MrA is now known as Ders
[22:44:15] *** Quits: Ders (MrA@2602:ff75:7:3ccc::20) (Changing host)
[22:44:15] *** Joins: Ders (MrA@user/ders)
[22:46:07] <tirnanog> jcbjoe2021: https://termbin.com/h0gm
[22:47:35] *** Quits: earendel (uid498179@user/earendel) (Quit: Connection closed for inactivity)
[22:49:53] <tirnanog> note the switch from mpv to open. in macOS, open is roughly equivalent to xdg-open.
[22:54:36] *** Quits: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net) (Remote host closed the connection)
[22:54:54] *** Quits: Crescendo (~Crescendo@user/crescendo) (Read error: Connection reset by peer)
[22:54:58] *** Joins: oldgalileo (~oldgalile@host-212-18-2-82.customer.m-online.net)
[22:54:58] <jcbjoe2021> tirnanog: joe@joe Backup Susie 9-18-21 % ./sort
[22:54:59] <jcbjoe2021> Finding unique extensions in: .
[22:54:59] <jcbjoe2021> ./sort: line 7: mapfile: command not foun
[22:55:12] *** Joins: Crescendo (~Crescendo@user/crescendo)
[22:55:24] <tirnanog> sigh. foiled by bash 3.x again.
[22:55:28] <tirnanog> will revise.
[22:55:46] <jcbjoe2021> im getting real linux to boot soon
[22:56:06] <tirnanog> you can get a new bash from brew, by the way.
[22:56:12] <tirnanog> still, will fix it.
[22:56:40] *** Quits: hesse (~TheHerman@gateway/tor-sasl/thehermann) (Remote host closed the connection)
[22:58:10] *** Joins: TheHermann (~TheHerman@gateway/tor-sasl/thehermann)
[22:58:42] <tirnanog> jcbjoe2021: https://termbin.com/p2t3
[22:59:13] <chiselfuse> I need to look at a line in a large file, I know what line number it has. I'm doing `sed -n '10719884p' file` but it's taking too long, any faster way to do it?
[22:59:22] <tirnanog> jcbjoe2021: messed up the formatting there but it works.
[23:00:25] <chiselfuse> Nevermind, it just finished now.
[23:01:22] *** Quits: zro (~zro@user/zro) (Ping timeout: 252 seconds)
[23:01:25] <tirnanog> chiselfuse: some implementations of the standard utilities are faster than others. GNU ones, in particular, are known to employ well-optimized algorithms. so, if you're not using GNU sed alread, that might be worth considering.
[23:01:30] <chiselfuse> I wonder if it needs to match all newline characters to fine the line.
[23:01:36] <chiselfuse> s/fine/find/
[23:02:17] <chiselfuse> tirnanog: It's GNU sed
[23:02:52] <tirnanog> you'll probably find it's faster on the next run, because of the pagecache warming.
[23:03:17] <tirnanog> still, there's only so much that can be done without throwing more resources at the problem. it can't know the exact offset to seek to from the outset, obviously.
[23:03:33] *** Joins: zro (~zro@user/zro)
[23:03:42] <chiselfuse> Yeah using lseek would be too good.
[23:03:46] <tirnanog> besides which, sed is line-oriented to begin with. it's possible that some other tool might be faster.
[23:03:58] <chiselfuse> tirnanog: At what level is that pagecache? Kernel?
[23:04:02] <tirnanog> yeah, kernel.
[23:05:08] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:07:48] <tirnanog> also, you should quit after printing the matching line.
[23:08:55] *** Quits: Zauberfisch (~Zauberfis@cm83-180.liwest.at) (Read error: Connection reset by peer)
[23:12:47] <tirnanog> for what it's worth, perl is faster that GNU sed on my system, as tested by printing the penultimate line of a file containing 10 million lines. GNU awk, on the other hand, is slower than both.
[23:13:05] *** Quits: zro (~zro@user/zro) (Ping timeout: 252 seconds)
[23:13:53] <tirnanog> never mind. my test case was wrong. sed is still the fastest.
[23:14:02] <tirnanog> and ed is pretty slow.
[23:14:22] <Soliton> i think newer GNU sed has the same regex engine as GNU grep which is fairly optimized so it's probably not going to get too much faster without a dedicated program.
[23:14:33] <tirnanog> absolutely. the results don't surprise me.
[23:14:43] <tirnanog> the GNU developers are very smart.
[23:14:51] *** Joins: zro (~zro@user/zro)
[23:15:07] *** Quits: darkbit (~db@152.32.99.67) (Ping timeout: 252 seconds)
[23:15:32] *** Quits: mozgalom (~mozgalom@194.144.47.113) (Quit: SO LONG SUCKERS!)
[23:16:39] *** Quits: H3dn1ng (~H3dn1ng@185.213.154.228) (Quit: leaving)
[23:17:16] *** Joins: koala_man (~vidar@157.146.251.23.bc.googleusercontent.com)
[23:17:42] <tirnanog> chiselfuse: to put it into perspective: https://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html
[23:20:20] <chiselfuse> tirnanog: Sorry, I was AFK.
[23:25:01] *** Quits: Camilo (~hugh@host-89-242-149-36.as13285.net) (Ping timeout: 252 seconds)
[23:25:37] <chiselfuse> 15 years, huh..
[23:30:10] *** Quits: somlis (~somlis@user/somlis) (Quit: WeeChat 3.3)
[23:31:17] *** Joins: somlis (~somlis@user/somlis)
[23:34:52] <tirnanog> since then, freebsd incorporated gnu grep.
[23:35:39] <rundown> https://bpa.st/FVGQ
[23:35:46] <rundown> im getting syntax error near then
[23:35:51] <tirnanog> !pf if[
[23:35:51] <greybot> tirnanog: No matches found at https://mywiki.wooledge.org/BashPitfalls
[23:35:53] <rundown> but it all looks ok to me
[23:35:55] <tirnanog> hmm. what is it.
[23:36:04] <Soliton> !if[
[23:36:05] <greybot> [ is NOT part of the `if' syntax. It's a normal, ordinary COMMAND, like grep and rm. Like `if grep ..', `if [' just checks its exit status. And just like `ifgrep`, `if[` is wrong. http://mywiki.wooledge.org/BashGuide/TestsAndConditionals
[23:36:09] <tirnanog> thanks.
[23:36:51] <Soliton> jam() { if [ "$1" = search ] ...
[23:37:07] <Soliton> just make it a function. why do you need the alias?
[23:37:11] <tirnanog> !pf 10
[23:37:11] <greybot> https://mywiki.wooledge.org/BashPitfalls#pf10 -- Don't do this! -- if [bar="$foo"]; then ...
[23:37:13] <tirnanog> also applies.
[23:37:32] <rundown> Soliton:when i finish it i want to use it as an alias in my bashrc
[23:37:40] <Soliton> why?
[23:37:43] <tirnanog> yes, why?
[23:38:02] <rundown> eventually i want to substitute an original command for a new one
[23:38:08] <tirnanog> just declare jam() { ... } in the first place.
[23:38:14] <tirnanog> you're done.
[23:38:16] <Soliton> how is the function not doing that?
[23:38:23] <rundown> ah ..sorry i get you
[23:38:25] <rundown> ok thanks
[23:38:44] *** Quits: PapaChub (~PapaChub@vzw-54.parabon.com) (Quit: Leaving)
[23:40:33] *** Quits: totenkoph (~scythe@user/totenkoph) (Ping timeout: 276 seconds)
[23:41:18] <tirnanog> besides which, scripts don't honour aliases by default anyway.
[23:41:19] *** Joins: totenkoph (~scythe@user/totenkoph)
[23:42:41] <Soliton> i assume this is for interactive use.
[23:45:02] <tirnanog> yes. but the sample cotained a shebang.
[23:45:04] <tirnanog> contained
[23:45:14] *** Joins: JohnML (~JohnML@ip-37-201-129-30.hsi13.unitymediagroup.de)
[23:47:31] <jcbjoe2021> tirnanog: I was someone I actually want a laptop so I can put linux on it cause im tired of Mac OS, can't afford it right now so im going to put ubuntu on a vmware and boot it in full screen mode or something I guess till I can afford the laptop
[23:47:57] <tirnanog> jcbjoe2021: alright. in any case, I did test the last revision directly in Catalina.
[23:48:01] *** Quits: Rue (~rue@2001-b011-1000-18fe-c1c5-8c34-a15c-8faf.dynamic-ip6.hinet.net) (Ping timeout: 245 seconds)
[23:49:30] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[23:49:42] <tirnanog> still, for as long as you do use macOS, you might consider installing bash from brew. having done so, you should be able to specify "#!/usr/bin/env bash" as a shebang in order to use a modern bash.
[23:50:19] *** Joins: Rue (~rue@2001-b011-1000-157e-35e2-c707-1aef-1f30.dynamic-ip6.hinet.net)
[23:55:22] *** Quits: Inline (~Inline@2a02:908:1252:7a80:1feb:c0cd:e428:d19f) (Remote host closed the connection)
[23:56:24] *** Quits: totenkoph (~scythe@user/totenkoph) (Remote host closed the connection)
[23:56:36] *** Joins: totenkoph (~scythe@user/totenkoph)
[23:57:52] *** Joins: bomb-on (~bomb-on@194.144.47.113)
