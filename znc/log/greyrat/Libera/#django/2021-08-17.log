[00:06:29] *** Joins: explore (uid233125@id-233125.stonehaven.irccloud.com)
[00:06:34] *** Quits: routebee (~norman@103-205-28-236.dyn.launtel.net.au) (Ping timeout: 260 seconds)
[00:11:19] *** Joins: twomoon (~twomoon@ip72-199-58-150.sd.sd.cox.net)
[00:11:24] <twomoon> where is blitzkraft?
[00:11:31] <twomoon> he said he would migrate here
[00:18:42] *** Joins: routebee (~norman@103-205-28-236.dyn.launtel.net.au)
[00:25:32] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[00:26:20] *** Joins: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:4b79:e11c:c2f:5c75)
[00:26:36] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[00:41:09] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[00:42:30] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[00:45:58] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[00:52:45] *** Quits: LuxuryMode (uid91005@id-91005.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[01:15:40] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[01:16:16] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[01:17:24] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[01:17:57] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[01:18:48] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[01:23:10] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[01:28:52] *** Quits: GJdan (~quassel@107-190-25-75.cpe.teksavvy.com) (Ping timeout: 268 seconds)
[01:45:48] *** Quits: iomari891 (~iomari891@197.210.71.192) (Read error: Connection reset by peer)
[01:47:01] *** Joins: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it)
[01:47:59] *** Joins: iomari891 (~iomari891@197.210.76.177)
[01:50:27] *** Quits: pulsar17 (~pulsar17@146.196.32.155) (Quit: Leaving)
[01:53:39] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[02:09:23] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[02:11:26] *** Joins: barrios (~barrios@2a02:3030:400:cda9:6f44:b426:78e1:c8c0)
[02:18:46] *** Quits: django-ticketbot (~django-ti@django/ops/ticketbot) (Remote host closed the connection)
[02:19:03] *** Joins: django-ticketbot (~django-ti@django/ops/ticketbot)
[02:19:15] *** Quits: barrios (~barrios@2a02:3030:400:cda9:6f44:b426:78e1:c8c0) (Read error: Connection reset by peer)
[02:19:34] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[02:20:54] *** Joins: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net)
[02:22:35] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[02:23:32] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[02:27:27] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 268 seconds)
[02:30:10] *** Quits: hyper_dave (~hyper_dav@197.156.107.244) (Ping timeout: 240 seconds)
[02:30:34] *** Joins: fortuno51 (~fortuno51@78.10.205.85)
[02:32:10] *** Quits: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[02:32:16] *** Quits: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it) (Quit: Leaving.)
[02:33:11] *** Joins: hyper_dave (~hyper_dav@197.156.107.244)
[02:38:20] *** Joins: fortuno51_ (~fortuno51@78.10.204.200)
[02:39:10] *** Quits: fortuno51 (~fortuno51@78.10.205.85) (Ping timeout: 268 seconds)
[02:50:39] *** Quits: fortuno51_ (~fortuno51@78.10.204.200) (Remote host closed the connection)
[02:55:43] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[02:56:13] *** Quits: Ergo^ (~ergo@91.238.59.144) (Remote host closed the connection)
[02:56:15] *** Quits: explore (uid233125@id-233125.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[02:56:29] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[02:58:38] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[02:58:48] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[03:03:04] *** Joins: thiras (~thiras@user/thiras)
[03:13:48] *** Quits: aplainzetakind (~johndoe@captainludd.powered.by.lunarbnc.net) (Quit: Free ZNC ~ Powered by LunarBNC: https://LunarBNC.net)
[03:14:37] *** Quits: hyper_dave (~hyper_dav@197.156.107.244) (Ping timeout: 245 seconds)
[03:16:38] *** Joins: hyper_dave (~hyper_dav@static.83.88.217.95.clients.your-server.de)
[03:17:55] *** Quits: bandit_za (~bandit_za@2c0f:ed28:b016:7760::1ed) (Ping timeout: 246 seconds)
[03:22:10] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 240 seconds)
[03:23:42] *** Quits: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca) (Ping timeout: 258 seconds)
[03:24:07] *** Joins: hoppity (~user@user/hoppity)
[03:24:15] *** Quits: flynn (~mcbloch@user/flynn) (Read error: Connection reset by peer)
[03:24:37] *** Joins: flynn (~mcbloch@user/flynn)
[03:25:23] <hoppity> Hi guys, I have a bit of a situation. I am inheriting some Django code which works great except for one particular report. This report seems to be suffering of a sever N+1 problem. My question is: Are there any simple optimizations I can apply to the code (maybe changing queries from python to pure SQL) in order to make things faster and avoid rewriting the whole thing?
[03:30:31] <GinFuyou> hoppity, how can we know without seeing the code? ^_^"
[03:31:14] <hoppity> GinFuyou: Fair point, let me get the code now. Fair warning, though. It is HORRIBLE
[03:31:51] <GinFuyou> But it works great mostly?
[03:32:16] <hoppity> it does, but it just is super slow
[03:34:04] *** Quits: iomari891 (~iomari891@197.210.76.177) (Ping timeout: 268 seconds)
[03:34:31] <GinFuyou> django-debug-toolbar can help debugging queries - just in case
[03:36:31] *** Quits: hyper_dave (~hyper_dav@static.83.88.217.95.clients.your-server.de) (Ping timeout: 268 seconds)
[03:36:35] *** Joins: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca)
[03:37:52] <hoppity> thanks for that tip
[03:37:57] *** Joins: hyper_dave (~hyper_dav@197.156.107.244)
[03:38:00] <hoppity> Here is the code in case you are curious:  https://dpaste.org/rQ7O
[03:38:53] *** Joins: neilbags (~neilbags@119.225.91.203.sta.wbroadband.net.au)
[03:40:54] <neilbags> hi all, i'm trying to create a model with a foreign key, but when applying the migration i'm getting the following error from mysql: 'errno: 150 "Foreign key constraint is incorrectly formed'. How can i debug this?
[03:41:26] <GinFuyou> hoppity, Ok, any idea around where queries are slow? It doesn't look that bad also, just... not quite optimal
[03:42:07] *** Quits: brsc2909 (~Thunderbi@109.255.244.60) (Read error: Connection reset by peer)
[03:43:14] <GinFuyou> hoppity, https://dpaste.org/rQ7O#L30 this line looks weird...
[03:44:33] <hoppity> GinFuyou:you are right, that line does look weird. I will looke into it, can probably replace it with a more efficient one.
[03:45:01] <GinFuyou> You could probably just remove it and will get faster ^_^
[03:45:10] <GinFuyou> Or I'm missing any point to it
[03:45:20] <hoppity> true haha
[03:46:05] <GinFuyou> 38 looks questionable also, but it may have something to do with need of distinct...
[03:46:18] <hoppity> I see a couple of possible optimizations such as pulling line 35 outr of the loop as in only needs to be computed once
[03:46:32] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[03:47:52] <GinFuyou> 29,35,36 should be moved before the loop I guess and probably into a single list comprehension. Though it probably not that big time saver, but still
[03:48:30] <hoppity> Agreed
[03:48:53] <hoppity> This report is run for about 200 employees for a 15 day pay period and on a litle Amazon AWS server it simply times out.
[03:49:16] <hoppity> I find my self having to run the repor in my Ryzen laptop and then just give it to my boss haha
[03:49:53] <GinFuyou> well, anyway optimizations should start with analysis
[03:50:23] <hoppity> Like human analysis or with Django debug toolbar?
[03:51:42] <GinFuyou> some kind of performance analysis yes. Be it DDT or just printing connection.queries or anything
[03:51:51] <GinFuyou> or timing code if it's not the DB
[03:52:21] <GinFuyou> Line 71 looks most suspicious so far
[03:52:29] <hoppity> Thank you, I will fight this function tomorrow, I already scheduled 8 hours for good measure
[03:53:31] <hoppity> I imagine there is no way for Django (or Python) to use the 4 cores in my server?
[03:54:22] <neilbags> Ok, so im trying to create a foreign key referencing an unmanaged table (legacy database) and it *looks like* its failing because the field types are different. (i wish mysql would give a better error message)
[03:54:40] <neilbags> the legacy id field is an int(11). django is creating a bigint(20)
[03:54:54] <GinFuyou> Well, you technically can. Django would usually use it by running different wsgi workers I believe.
[03:55:48] <GinFuyou> But you could try to fit in multiprocessing or something. Not sure I've seen anyone trying, but there is also new async capabilities now I haven't touched yet
[03:56:05] <hoppity> GinFuyou: Thank you. I will look into all these options.
[03:56:21] <GinFuyou> But anyway, it's unlikely to be python performance problem
[03:57:04] <GinFuyou> line 71 does a query in a nested loop. So it will get a lot of queries likely, and it even annotate
[03:57:07] <GinFuyou> s
[03:57:54] <GinFuyou> Need to look closer to what it does, but probably you could move some work outside of one loop at least and do it in batch
[03:57:55] <hoppity> Is anotatting costly?
[03:58:09] <GinFuyou> Well, depends as any query
[03:58:15] <hoppity> That names "annotate" has always confused me
[03:58:25] <hoppity> annotate to me means to add a note to something
[03:59:19] <GinFuyou> Yeah, it's pretty much what it does, a calculation on every row and add result to this row
[04:00:22] <hoppity> I see
[04:00:36] <hoppity> Well I thank you for you assistance and input today
[04:00:38] <hoppity> :)
[04:00:55] <GinFuyou> neilbags, oh, is it even possible to reference unmanaged model from managed? You could try modify your migration if it's just matter of field type
[04:02:48] <neilbags> GinFuyou, i thought about that, but won't any subsequent migrations break it again? I'm just gunna make it an IntegerField, set it to unmanaged, then make it a foreignkey afterwards. It isn't ideal but i've got to get on with it. I tried setting the id field on the referenced table explicitly to IntegerField but django still set it to a bigint in the migration
[04:03:22] <neilbags> * sets the foreignkey field
[04:04:30] <GinFuyou> Yeah, good point, it will reflect in historical model this way I guess, and you can temporally apply it if DB rejects it...
[04:04:38] <neilbags> I mean if i make any changes to that table in the future, it'll try to change the field type back to bigint right? I'm not sure, im real new to this :/
[04:04:42] <GinFuyou> can't *
[04:06:00] <neilbags> I was hoping to use managed tables from here-on in with this app :(
[04:06:11] <neilbags> s/tables/models
[04:10:31] <GinFuyou> neilbags, you could probably try making a subclass of ForeignKey field... https://docs.djangoproject.com/en/3.2/howto/custom-model-fields/#custom-database-types
[04:10:40] <GinFuyou> But not really sure.
[04:12:04] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[04:20:43] <neilbags> GinFuyou, yeah ok, might be worth looking into actually
[04:20:46] <neilbags> thanks
[04:22:24] <neilbags> GinFuyou, or change the id field type and hope nothing breaks
[04:22:52] <GinFuyou> Yeah, maybe that
[04:26:39] <neilbags> Ok, well that was definitely the cause of the error
[04:27:49] *** Quits: PantelicGR (~PantelicG@user/pantelicgr) (Quit: Leaving)
[04:31:08] <neilbags> And mysql let me change the field type, which means there aren't any foreign keys referencing it
[04:40:38] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[04:47:36] *** Joins: iomari891 (~iomari891@102.91.5.113)
[04:48:40] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[04:56:03] *** Quits: Qwerky_ (~Qwerky@37.170.126.120) (Remote host closed the connection)
[05:05:40] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Ping timeout: 240 seconds)
[05:05:56] *** Joins: Qwerky (~Qwerky@37.170.126.120)
[05:10:10] *** Quits: Qwerky (~Qwerky@37.170.126.120) (Ping timeout: 240 seconds)
[05:11:35] *** Quits: iomari891 (~iomari891@102.91.5.113) (Remote host closed the connection)
[05:13:28] *** Joins: iomari891 (~iomari891@102.91.4.32)
[05:33:29] *** Quits: iomari891 (~iomari891@102.91.4.32) (Ping timeout: 248 seconds)
[05:44:21] *** Joins: neilbags_ (~neilbags@103.77.232.131)
[05:45:07] *** Joins: Kalov (~Thunderbi@179.56.117.154)
[05:46:35] *** Quits: neilbags (~neilbags@119.225.91.203.sta.wbroadband.net.au) (Read error: Connection reset by peer)
[05:47:24] *** Joins: neilbags__ (~neilbags@103.77.232.132)
[05:47:42] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[05:49:40] *** Quits: neilbags_ (~neilbags@103.77.232.131) (Ping timeout: 240 seconds)
[05:50:21] *** Joins: neilbags (~neilbags@103.77.232.131)
[05:52:12] *** Quits: neilbags__ (~neilbags@103.77.232.132) (Ping timeout: 268 seconds)
[06:00:42] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:01:55] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[06:07:04] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[06:23:39] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Read error: Connection reset by peer)
[06:23:58] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[06:27:27] *** Joins: mambang (~mambang@user/mambang)
[06:29:21] *** Joins: explore (uid233125@id-233125.stonehaven.irccloud.com)
[06:31:34] *** Joins: Qwerky (~Qwerky@37.170.126.120)
[06:31:47] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[06:35:13] *** Joins: rnm (~mambang@user/mambang)
[06:35:40] *** Quits: Qwerky (~Qwerky@37.170.126.120) (Ping timeout: 240 seconds)
[06:36:10] *** Quits: mambang (~mambang@user/mambang) (Ping timeout: 240 seconds)
[06:38:11] *** Quits: jess (~jess@libera/staff/jess) (Quit: jumping servers)
[06:39:13] *** Joins: jess (~jess@libera/staff/jess)
[06:40:13] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[06:42:51] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Quit: Thanks, see you later.)
[06:46:39] *** Quits: Kalov (~Thunderbi@179.56.117.154) (Quit: Kalov)
[07:07:57] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:08:40] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[07:33:20] *** Quits: IceMichael (~IceMichae@dynamic-046-114-156-039.46.114.pool.telefonica.de) (Ping timeout: 268 seconds)
[07:40:34] *** Joins: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de)
[07:40:44] *** Quits: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[07:50:36] *** Quits: drjp (jeanpaul@112-54-174-82.ftth.glasoperator.nl) (Ping timeout: 268 seconds)
[07:51:03] *** Quits: jess (~jess@libera/staff/jess) ()
[07:53:10] *** Joins: djapo (~archangel@user/djapo)
[07:55:42] *** Joins: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de)
[07:59:35] *** Quits: dez (uid92154@user/dez) (Quit: Connection closed for inactivity)
[08:09:40] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 240 seconds)
[08:12:18] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:12:46] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[08:14:31] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Client Quit)
[08:17:21] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[08:18:16] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Remote host closed the connection)
[08:19:06] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[08:32:42] *** Joins: rnm_ (~mambang@user/mambang)
[08:33:12] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Remote host closed the connection)
[08:34:04] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[08:35:10] *** Quits: rnm (~mambang@user/mambang) (Ping timeout: 240 seconds)
[08:36:30] *** Quits: newdimension (~newdimnes@ec2-3-129-202-216.us-east-2.compute.amazonaws.com) (Changing host)
[08:36:30] *** Joins: newdimension (~newdimnes@user/newdimension)
[08:39:57] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:40:27] *** Quits: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:4b79:e11c:c2f:5c75) (Ping timeout: 245 seconds)
[08:41:56] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[08:43:43] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Client Quit)
[08:46:23] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[08:51:28] *** Joins: djapo (~archangel@user/djapo)
[08:54:56] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Quit: = "")
[08:55:05] *** Quits: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de) (Ping timeout: 248 seconds)
[08:55:20] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[08:56:15] <schinckel> Hmm. Django form fields where the name has a space (or dash) in it.
[08:56:24] <schinckel> Could make writing this code easier.
[08:57:14] <schinckel> Wonder what the best approach is.
[08:58:29] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[08:58:37] *** Joins: tallguytyo (~Guest79@p16110-ipngnfx01marunouchi.tokyo.ocn.ne.jp)
[08:59:31] <tallguytyo> Hello. I'm learning django from scratch, and I'm looking for a place to bounce noob questions off people. Does this channel fit the bill?
[09:02:15] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:03:03] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[09:03:53] <schinckel> Sure will. I'd suggest you at least do the Django official tutorial before you start asking too many questions though, as it goes through a lot of stuff in there that is super useful to know.
[09:04:13] <schinckel> There's also a djangogirls tutorial that takes a different approach (and covers some different topics, IIRC).
[09:05:53] <tallguytyo> Cool! I've been through the tutorial, and am now working on my own app, schinckel
[09:06:18] <tallguytyo> But there are simply too many don't-know-don't-knows
[09:07:09] <tallguytyo> I also have access to Pluralsight content, which is a good resource.
[09:07:41] <schinckel> Yes, this could be the place for you then!
[09:10:01] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[09:10:17] <tallguytyo> I'm eager to gain a better understanding of the M, V, and T layers in wider use. It's crystal clear what they do in the official tutorial, but there are things that slip the net when you step outside those boundaries.
[09:11:05] <tallguytyo> I've tried looking around for examples of projects on GitHub, but everything I've found appears to be full-on production-scale code
[09:12:33] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[09:13:30] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[09:35:36] *** Quits: tallguytyo (~Guest79@p16110-ipngnfx01marunouchi.tokyo.ocn.ne.jp) (Quit: Ping timeout (120 seconds))
[09:36:42] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:36:51] *** Joins: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:4b79:e11c:c2f:5c75)
[09:42:58] <PaulWay[w]> What's the nice SQL-Django-ish way of annotating a field that's True if another field contains some text and False if not?
[09:44:00] *** Quits: ST47 (~ST47@wikimedia/st47) (Remote host closed the connection)
[09:45:39] <PaulWay[w]> Am I going to have to do this as a Case?
[09:45:40] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 240 seconds)
[09:46:13] <PaulWay[w]> e.g. `Case(When(field__contains='some_value', then=Value(True)), default=Value(False))`?
[09:50:45] *** Joins: ST47 (~ST47@wikimedia/st47)
[09:52:36] *** Joins: sandeepk (~sandeepk@223.130.30.77)
[09:58:40] <schinckel> Yeah, I think you'll need to use a Case(When(...))
[09:59:52] *** Joins: neilbags_ (~neilbags@103.77.232.132)
[10:01:06] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[10:01:24] *** Joins: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de)
[10:01:35] *** Quits: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[10:02:10] *** Quits: neilbags (~neilbags@103.77.232.131) (Ping timeout: 240 seconds)
[10:02:17] <PaulWay[w]> Dang.
[10:10:22] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[10:10:34] <schinckel> You might be able to write a custom expression that does Equals()
[10:18:19] *** Joins: mattil (~mattil@airio.portalify.com)
[10:19:04] *** Quits: explore (uid233125@id-233125.stonehaven.irccloud.com) (Quit: Connection closed for inactivity)
[10:20:30] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[10:33:07] *** Quits: ytsejam (~ytsejam@88.230.226.84) (Quit: Leaving)
[10:37:05] *** Joins: brylie (~Thunderbi@88-114-218-113.elisa-laajakaista.fi)
[10:42:32] *** Quits: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net) (Ping timeout: 245 seconds)
[10:45:56] <serafeim> hello my friends
[10:46:34] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[10:46:53] *** Joins: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de)
[10:47:04] *** Quits: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[10:49:58] *** Joins: ExeciN (~ExeciN@user/nicexe)
[10:50:07] *** Quits: ExeciN (~ExeciN@user/nicexe) (Write error: Broken pipe)
[10:52:08] *** Quits: mattil (~mattil@airio.portalify.com) (Read error: Connection reset by peer)
[10:52:25] *** Quits: hyper_dave (~hyper_dav@197.156.107.244) (Ping timeout: 248 seconds)
[10:52:36] *** Joins: mattil (~mattil@airio.portalify.com)
[10:53:07] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 268 seconds)
[10:54:38] *** Joins: ExeciN (~ExeciN@user/nicexe)
[10:57:57] *** Quits: mattil (~mattil@airio.portalify.com) (Ping timeout: 245 seconds)
[10:58:29] *** Joins: hyper_dave (~hyper_dav@197.156.107.244)
[10:58:34] *** Quits: brylie (~Thunderbi@88-114-218-113.elisa-laajakaista.fi) (Quit: brylie)
[11:01:58] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[11:05:11] *** Joins: mattil (~mattil@airio.portalify.com)
[11:18:30] *** Joins: barrios (~barrios@2a02:3030:400:cda9:6f44:b426:78e1:c8c0)
[11:22:17] *** Joins: pycode (~pycode@2001:b07:5d28:551:5658:c796:4700:6f40)
[11:30:37] *** Quits: barrios (~barrios@2a02:3030:400:cda9:6f44:b426:78e1:c8c0) (Read error: Connection reset by peer)
[11:30:49] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[11:31:01] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[11:33:22] *** Quits: dre (~dre@2001:8003:c932:c301:76d5:786e:6c0b:b2c7) (Quit: Leaving)
[11:33:39] *** Joins: Qwerky (~Qwerky@37.164.114.130)
[11:34:56] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[11:37:38] <serafeim> i think there was a package that you could use to edit and display snippets of template code ?
[11:38:12] *** Quits: Qwerky (~Qwerky@37.164.114.130) (Ping timeout: 258 seconds)
[11:38:39] *** Joins: carlorat1 (carloratm@tilde.club)
[11:39:37] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 245 seconds)
[11:40:56] <carlorat1> Hi all, a bit OT: is it possible to force double quotes in autopep8?
[11:41:13] <PaulWay[w]> Y THO
[11:42:54] <serafeim> i think FunkyBob was the one that had made that
[11:48:11] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Read error: Connection reset by peer)
[11:48:12] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Read error: Connection reset by peer)
[11:48:43] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[11:56:26] <wyre> hi guys, I have a script which requires root privileges to be executed, how could I avoid the password prompt every time I run the script from django?
[12:01:50] <PaulWay[w]> What is it having to do with root privileges?
[12:02:10] <PaulWay[w]> If you can find that, and work out a better way, that's preferable.
[12:02:35] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Remote host closed the connection)
[12:03:27] <serafeim> ah yes that's the oneL: https://github.com/funkybob/django-sniplates
[12:03:30] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[12:08:22] *** Quits: PaulWay[w] (~PaulWay@2001:44b8:1110:f800:4b79:e11c:c2f:5c75) (Ping timeout: 245 seconds)
[12:09:59] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[12:13:47] *** Quits: hyper_dave (~hyper_dav@197.156.107.244) (Ping timeout: 245 seconds)
[12:16:19] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:20:21] *** Joins: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it)
[12:21:01] *** Parts: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it) ()
[12:21:10] *** Quits: mattil (~mattil@airio.portalify.com) (Ping timeout: 240 seconds)
[12:26:05] *** Joins: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it)
[12:31:08] *** Quits: twomoon (~twomoon@ip72-199-58-150.sd.sd.cox.net) (Quit: Leaving)
[12:31:40] *** Quits: audiobirb (~audio@2603-8081-1800-00ad-5755-430d-d5c4-6501.res6.spectrum.com) (Ping timeout: 240 seconds)
[12:33:34] <FunkyBob> serafeim: yes, that's mine
[12:33:46] <FunkyBob> it lets you load and reuse blocks from templates sort of like macros
[12:39:01] <wallbroken> hello FunkyBob, may I ask you for a suggestion on my developement?
[12:39:06] <wallbroken> i started a new task
[12:39:12] <wallbroken> but i came into some issue
[12:39:36] <FunkyBob> are you planning on getting to the point, or do I have to guess?
[12:39:37] <serafeim> FunkyBob: yes i found it thank tyou
[12:39:40] <serafeim> ha ha ha ha
[12:39:42] <FunkyBob> don't ask to ask... just ask the channel, wallbroken
[12:39:49] *** Quits: flynn (~mcbloch@user/flynn) (Remote host closed the connection)
[12:39:55] <FunkyBob> serafeim: glad it's of help... feedback always welcome :)
[12:40:10] *** Joins: flynn (~mcbloch@user/flynn)
[12:40:19] <wallbroken> FunkyBob: i already asked 2 days ago. did you read? or do i need to repeat?
[12:40:43] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[12:41:23] *** Joins: IceMichael (~IceMichae@dynamic-046-114-155-165.46.114.pool.telefonica.de)
[12:42:14] <graingert[m]> wallbroken: You'll need to repeat it
[12:42:15] <FunkyBob> that was two days ago, wallbroken ...
[12:42:16] *** Quits: serghei (~egrep@user/serghei) (Ping timeout: 268 seconds)
[12:42:22] <wallbroken> ok
[12:42:29] <wallbroken> my new task is:
[12:42:55] <wallbroken> an user related settings pane to set: dark mode (boolean), paginate_by number
[12:43:07] <wallbroken> i started this by myself creating a model
[12:43:23] <FunkyBob> why not add these fields directly to a custom user model?
[12:43:34] <wallbroken> https://dpaste.org/ORsK
[12:43:36] <wallbroken> this is it
[12:44:02] <FunkyBob> why s the pagination nullable?
[12:44:16] <wallbroken> because it can be shutted off
[12:44:35] *** Joins: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl)
[12:44:39] <wallbroken> in the case of you want to see all the items in one single page
[12:45:03] <FunkyBob> then what's the poiint of the 0 value?
[12:45:24] <wallbroken> 0 value means that in the view i'll check that value
[12:45:29] *** Joins: Qwerky (~Qwerky@37.164.114.130)
[12:45:32] <wallbroken> if it's 0, then don't paginate
[12:45:40] <FunkyBob> but that's what you said null means
[12:45:52] <FunkyBob> don't paginate
[12:46:05] <wallbroken> ok
[12:46:16] <FunkyBob> so otherwise, sure, looks fine...
[12:46:18] <FunkyBob> what's the problem?
[12:46:31] <wallbroken> now the hard part is to manage these fields in the UI
[12:47:05] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[12:47:46] <serafeim> have you observed that if you pass the django migration files through black they are changed a lot ? what do you do in that case ?
[12:47:58] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: Textual IRC Client: www.textualapp.com)
[12:48:13] <serafeim> do you exclude the migration files from black or you just pass them and add the black-formatted versions to the version control
[12:48:36] <wallbroken> FunkyBob:
[12:48:36] <wallbroken> https://www.dropbox.com/s/shx192q9krrscq1/Untitled.png?dl=0
[12:48:42] <wallbroken> this is what i created
[12:48:49] <wallbroken> this should have one checkbox
[12:48:53] <wallbroken> and one dropdown list
[12:48:57] <FunkyBob> serafeim: whatever you're comfortable wth
[12:49:02] <wallbroken> i created a form
[12:49:18] <FunkyBob> ok
[12:49:25] <wallbroken> https://dpaste.org/7f15
[12:49:28] <FunkyBob> so... have a viiew, have a viiew to process the form... done
[12:49:33] <wallbroken> but it is not showing the values
[12:49:34] <serafeim> well right now i'mm passing everything in my project folder through black so
[12:49:37] <wallbroken> it's normal?
[12:49:39] <FunkyBob> well, that's very wrong
[12:49:45] <FunkyBob> you don't want the user to be able to edit the user feld
[12:49:57] <FunkyBob> wallbroken: using __all__ is lazy and bad... don't to it
[12:50:01] <FunkyBob> don't do it
[12:50:22] <FunkyBob> wallbroken: you know quite well you haven't shown us nearly enough detail to help
[12:50:23] <wallbroken> i should specify the two fields?
[12:50:36] <FunkyBob> you should specify the fields  you want the user to be able to edt
[12:52:00] <wallbroken> fields = ['user', 'dark_mode' ]
[12:52:06] <wallbroken> that's right?
[12:55:48] <FunkyBob> no
[12:55:57] <FunkyBob> because user iis the fiield you do NOT  want them to edit
[13:04:56] *** Joins: brylie (~Thunderbi@88-114-218-113.elisa-laajakaista.fi)
[13:05:02] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Read error: Connection reset by peer)
[13:11:30] *** Joins: Ergo^ (~ergo@91.238.59.144)
[13:14:59] *** Quits: brylie (~Thunderbi@88-114-218-113.elisa-laajakaista.fi) (Quit: brylie)
[13:26:10] *** Quits: Qwerky (~Qwerky@37.164.114.130) (Ping timeout: 240 seconds)
[13:28:30] *** Joins: say^2 (~zay@ti0048a400-0958.bb.online.no)
[13:31:47] <wallbroken> what?
[13:31:59] <wallbroken> oh ok
[13:32:15] *** Joins: Qwerky (~Qwerky@37.164.114.130)
[13:32:25] *** Quits: doc (~doc@user/doc) (Ping timeout: 248 seconds)
[13:35:36] *** Joins: doc (~doc@user/doc)
[13:35:59] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[13:36:05] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[13:36:39] *** Quits: Qwerky (~Qwerky@37.164.114.130) (Ping timeout: 258 seconds)
[13:41:46] *** Quits: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it) (Quit: Leaving.)
[13:51:59] *** Joins: explore (uid233125@id-233125.stonehaven.irccloud.com)
[13:55:06] *** Joins: D56 (~D@59.95.43.30)
[13:57:18] *** D56 is now known as Dev
[13:57:33] <Dev> Hey django devs
[13:57:54] <Dev> Any advice on how I can work as a Django dev
[13:58:13] <Dev> (and not get ghosted)
[14:07:54] *** Joins: aplainzetakind (~johndoe@captainludd.powered.by.lunarbnc.net)
[14:09:28] *** Joins: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it)
[14:23:32] <wallbroken> FunkyBob: fields = ['paginate', 'dark_mode' ]
[14:23:40] <wallbroken> the page isn't showing that fields
[14:24:00] <wallbroken> {{ form.ConfForm }}
[14:24:06] <wallbroken> this is what i have in the template
[14:26:47] *** Joins: davidsmith (~pi@cpc119776-dudl14-2-0-cust74.16-1.cable.virginm.net)
[14:41:09] <FunkyBob> Dev: do the tutorial, start building stuff, help people learn django, publish stuff, find someone who saw you build stuff... get job
[14:41:15] <FunkyBob> Dev: at least, it worked for me.
[14:41:47] <FunkyBob> wallbroken: again, you have not provided any of the necessary data for anyone to help, apart from the form and the mode
[14:42:08] <wallbroken> FunkyBob: please, can you do specific questions?
[14:42:23] *** Quits: ExeciN (~ExeciN@user/nicexe) (Remote host closed the connection)
[14:42:25] <wallbroken> i provided screenshots and all the code i wrote for this purpose
[14:42:25] <FunkyBob> wallbroken: you should know already we need to see the view and the template
[14:42:42] <FunkyBob> bullshit you provided all the code
[14:43:16] <FunkyBob> although if all you did was write a form and a model, it's no surprise nothing is working
[14:43:36] <wallbroken> i need to write a view
[14:43:38] <wallbroken> i know
[14:43:52] <Dev> FunkyBob great I think I will keep going then, thanks :)
[14:44:12] *** Quits: Dev (~D@59.95.43.30) (Quit: Client closed)
[14:45:37] *** Quits: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it) (Quit: Leaving.)
[14:48:04] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[14:48:21] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[14:51:34] *** Joins: dez (uid92154@user/dez)
[14:59:15] <wallbroken> https://dpaste.org/dyRQ
[14:59:43] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[15:00:00] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[15:01:39] *** Quits: routebee (~norman@103-205-28-236.dyn.launtel.net.au) (Ping timeout: 256 seconds)
[15:04:51] <FunkyBob> wallbroken: and?
[15:05:01] <wallbroken> how can i fix that?
[15:05:08] <FunkyBob> ...
[15:05:11] <wallbroken>  The row in table 'shoes_shoe' with primary key '14' has an invalid foreign key: shoes_shoe.user_id contains a value 'user_id' that does not have a corresponding value in auth_user.id.
[15:05:17] <FunkyBob> yes, we can see the error
[15:05:38] <wallbroken> could you provide me some help?
[15:05:53] <FunkyBob> as always, follow the topic
[15:06:06] <FunkyBob> how the fuck do you expect us to debug code you never showed?
[15:06:19] <wallbroken> https://dpaste.org/Nto6
[15:07:28] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df05f-197.dhcp.inet.fi)
[15:07:46] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[15:08:03] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[15:10:32] <wallbroken> oh, i fixed by myself
[15:10:41] <wallbroken> removing all in migration folder
[15:10:46] <FunkyBob> is it because you assigned the literal 'user_id' to the fkey?
[15:11:23] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[15:13:30] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[15:13:38] *** Quits: pycode (~pycode@2001:b07:5d28:551:5658:c796:4700:6f40) (Ping timeout: 258 seconds)
[15:13:43] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[15:13:51] <wallbroken> FunkyBob: well, can you help me in creating a view to render the form fields?
[15:13:53] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[15:14:24] *** Joins: D56 (~D56@59.95.43.30)
[15:15:35] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[15:15:35] *** ChanServ sets mode: +v EvilDMP
[15:15:50] *** Quits: D56 (~D56@59.95.43.30) (Client Quit)
[15:22:21] <wallbroken> are you here?
[15:26:21] <wallbroken> ok, i did it by myself
[15:26:23] <wallbroken> and it works
[15:26:39] <wallbroken> thank you anyway
[15:28:58] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[15:29:47] <wallbroken> https://www.dropbox.com/s/yobxckde394txtg/Untitlssed.png?dl=0
[15:29:53] <wallbroken> this is how it looks like
[15:33:43] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Read error: Connection reset by peer)
[15:37:45] <wallbroken>  context.add(super().get_context_data(form=self.config_form, config_form=self.config_form, **kwargs))
[15:37:48] <wallbroken> what wrong with this?
[15:38:02] <wallbroken> add() is not the right method?
[15:50:39] *** Joins: Qwerky (~Qwerky@37.164.114.130)
[16:02:36] *** Joins: timdiels (~user@78-22-205-207.access.telenet.be)
[16:04:21] <timdiels> Is there a way to add extra data to a TextChoices like you would with an Enum? E.g. X = 'value', 'extra', 'label' and then make it such that obj.extra=='extra'?
[16:06:33] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[16:10:13] <timdiels> Hang on, think I figured it out
[16:17:48] *** Joins: thiras (~thiras@user/thiras)
[16:35:50] *** Joins: pycode (~pycode@2001:b07:5d28:551:d2f3:d58c:104e:a874)
[16:40:49] *** Joins: Falc (~Falc@193.191.206.243)
[16:43:21] *** Quits: IceMichael (~IceMichae@dynamic-046-114-155-165.46.114.pool.telefonica.de) (Ping timeout: 248 seconds)
[16:43:41] <Falc> Does anyone have an example of a ModelForm, used in the admin site, that has error handling? Specifically, I think I need to know what .save() is supposed to return if there's an error that breaks saving.
[16:47:26] <serafeim> Falc: there must not be an error that breaks saving
[16:47:33] <serafeim> do these checks in your clean
[16:50:38] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[16:50:51] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[16:51:08] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[16:53:32] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[16:53:48] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[16:58:35] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df05f-197.dhcp.inet.fi) (Read error: Connection reset by peer)
[17:03:35] <serafeim> do you think that a sweetalert like library but using the bootstrap 5 styling would be useful?
[17:04:11] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Quit: = "")
[17:04:50] *** Joins: iomari891 (~iomari891@105.112.138.38)
[17:05:16] <serafeim> i have implemented it as part of another project https://dpaste.org/5wKD and i'm thinking of releasing it in its own github project page
[17:11:26] *** Joins: IceMichael (~IceMichae@2a0d:5940:6:163::ad7e)
[17:14:45] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[17:17:29] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[17:20:27] *** Joins: hyper_dave (~hyper_dav@197.156.107.244)
[17:22:17] *** Quits: sandeepk (~sandeepk@223.130.30.77) (Remote host closed the connection)
[17:23:14] <timdiels> What I ended up doing https://stackoverflow.com/questions/68817673/how-to-add-extra-data-to-textchoices/68817674#68817674
[17:24:39] <timdiels> I wonder though, am I right to call str.__new__ instead of TextChoices.__new__? The latter did not seem to work
[17:25:34] *** Joins: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it)
[17:26:58] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[17:27:15] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[17:27:46] *** Quits: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it) (Client Quit)
[17:27:48] *** Joins: tga (~tga@user/tga)
[17:28:28] <tga> greetings. I have a model that is using enum models for permissions. when trying to change them, my migrations are failing because the enum is used directly and the new enum doesn't match the old migrations anymore.
[17:28:34] *** Quits: Qwerky (~Qwerky@37.164.114.130) (Remote host closed the connection)
[17:28:59] <tga> is this a known issue? is there a way around it or is it simply not possible to use enums in models/migrations?
[17:29:08] *** Joins: Qwerky (~Qwerky@37.164.114.130)
[17:29:58] *** Quits: Qwerky (~Qwerky@37.164.114.130) (Remote host closed the connection)
[17:32:15] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[17:33:48] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df05f-197.dhcp.inet.fi)
[17:42:08] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[17:43:52] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[17:45:52] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[17:52:32] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Ping timeout: 245 seconds)
[17:54:21] *** Joins: HenkTheBest (~HenkTheBe@89.20.163.74.static.ef-service.nl)
[17:54:33] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[17:54:53] <HenkTheBest> Test
[17:59:11] *** Joins: sodimel (~co@78.195.125.78.rev.sfr.net)
[18:00:36] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[18:01:09] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Quit: leaving)
[18:10:14] <anorthall> HenkTheBest: test failed
[18:10:21] *** Quits: HenkTheBest (~HenkTheBe@89.20.163.74.static.ef-service.nl) (Quit: WeeChat 2.8)
[18:11:44] *** Joins: jess (~jess@libera/staff/jess)
[18:13:04] *** Joins: rubemlrm (~rubemlrm@user/rubemlrm)
[18:16:56] *** Joins: PantelicGR (~PantelicG@user/pantelicgr)
[18:19:09] *** Quits: say^2 (~zay@ti0048a400-0958.bb.online.no) (Quit: Lost terminal)
[18:31:19] *** Joins: brsc2909 (~Thunderbi@109.255.244.60)
[18:34:41] *** Quits: jess (~jess@libera/staff/jess) ()
[18:35:39] *** Quits: tga (~tga@user/tga) (Quit: leaving)
[18:36:31] *** Quits: Elzington (~Elzington@68.235.43.108) (Quit: Leaving)
[18:45:20] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[18:45:33] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[18:45:50] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Remote host closed the connection)
[19:00:55] *** Joins: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de)
[19:02:10] *** Quits: rje (~rje@50.35.241.164) (Quit: My computer has gone to sleep. ZZZzzz…)
[19:02:36] *** Joins: rje (~rje@50.35.241.164)
[19:03:15] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 258 seconds)
[19:11:06] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[19:12:27] *** Parts: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) ()
[19:13:15] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[19:14:17] *** Quits: withere__ (~withered_@1437135-v103.1561-static.stchilaa.metronetinc.net) (Ping timeout: 248 seconds)
[19:21:40] *** Quits: brsc2909 (~Thunderbi@109.255.244.60) (Read error: Connection reset by peer)
[19:35:37] *** Joins: ktosiek0 (~ktosiek@li1810-126.members.linode.com)
[19:35:37] *** Quits: ktosiek (~ktosiek@li1810-126.members.linode.com) (Quit: Ping timeout (120 seconds))
[19:35:37] *** ktosiek0 is now known as ktosiek
[19:36:06] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[19:37:05] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[19:40:55] *** Quits: hyper_dave (~hyper_dav@197.156.107.244) (Quit: WeeChat 3.2)
[19:41:36] *** Joins: hyper_dave (~hyper_dav@197.156.107.244)
[19:52:33] *** Quits: ovnicraft (~ovnicraft@201.238.128.18) (Read error: Connection reset by peer)
[19:53:04] *** Joins: ovnicraft (~ovnicraft@201.238.128.18)
[19:53:39] *** Quits: hoppity (~user@user/hoppity) (Remote host closed the connection)
[19:54:55] *** Quits: Falc (~Falc@193.191.206.243) (Quit: Leaving)
[20:00:52] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[20:12:07] *** Quits: GinFuyou (~GinFuyou@reya.cloud.tilaa.com) (Ping timeout: 245 seconds)
[20:16:14] *** Joins: hoppity (~user@user/hoppity)
[20:16:26] <hoppity> Hi guys, do print statement affect Django in production?
[20:16:32] <hoppity> or are they ignored?
[20:19:37] *** Quits: barrios (~barrios@dslb-084-061-092-045.084.061.pools.vodafone-ip.de) (Ping timeout: 245 seconds)
[20:19:46] *** Joins: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de)
[20:20:20] <dang`r`us> in general, you should use proper logging
[20:20:22] <dang`r`us> even in dev
[20:20:33] <dang`r`us> print() is kinda unpredictable.
[20:22:07] <knbk> Django doesn't do anything with about print(), but depending on how you run and configure your wsgi server it may or may not end up somewhere
[20:23:28] *** Joins: rnm (~mambang@user/mambang)
[20:23:28] *** Quits: rnm_ (~mambang@user/mambang) (Read error: Connection reset by peer)
[20:23:29] *** Quits: rnm (~mambang@user/mambang) (Remote host closed the connection)
[20:26:45] *** Joins: rnm (~mambang@user/mambang)
[20:26:45] *** Quits: rnm (~mambang@user/mambang) (Remote host closed the connection)
[20:29:10] <timdiels> When using TextChoices on a model field, when loading a row from DB, will the field be a plain str again?
[20:29:57] <timdiels> At least I'd think so as all it sees is choices, the field doesn't really know there's an enum involved.
[20:33:08] <hoppity> dang`r`us: thank you
[20:33:13] <hoppity> knbk: thank you
[20:33:17] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df05f-197.dhcp.inet.fi) (Read error: Connection reset by peer)
[20:33:30] <hoppity> Is there any way to compile a single python function to hopefull make it run faster?
[20:35:11] <nedbat> hoppity: what's making it slow?
[20:35:27] *** Joins: nathanhi (~nathanhi@user/nathanhi)
[20:35:35] *** Joins: rnm (~mambang@user/mambang)
[20:35:43] <hoppity> nedbat: I am pretty sue it it the database queries, but I don't see a way to modify them :s
[20:35:46] *** Quits: sodimel (~co@78.195.125.78.rev.sfr.net) (Quit: Konversation terminated!)
[20:35:58] <nedbat> hoppity: then compiling the function wouldn't help anyway
[20:36:21] <nedbat> hoppity: you;d be driving a porche from red light to red light.
[20:37:34] <hoppity> nedbat: I can 100% see that, sadly. I just think that *any* improvement would be good since the problem is that the function takes so long that Django times out for my user.
[20:40:20] <timdiels> Anyone could recommend a field mixin or so for loading them as enum values, otherwise writing my own as it sounds trivial enough
[20:40:27] <jack__d> the only real solution is to optimize the database. What database are you using, and do you know why it is slow?
[20:41:01] <dang`r`us> hoppity, IIRC django runs reasonably well in pypy
[20:41:10] <dang`r`us> but yeah
[20:41:14] <dang`r`us> not gonna help with DB
[20:41:17] *** Joins: Kalov (~Thunderbi@179.56.117.154)
[20:41:31] <jack__d> or optimize the query if you don't need to make *that* query
[20:42:15] <dang`r`us> logging queries can help debugging DB perf
[20:43:47] <hoppity> jack__d: I am running SQlite unfortunately :s
[20:44:31] <hoppity> Do you guys see anything *ovbiously* wrong with the code? here: https://dpaste.org/1FAC
[20:44:46] <dang`r`us> some discussion on db logging here: https://stackoverflow.com/questions/4375784/log-all-sql-queries
[20:44:50] <hoppity> There is only a few queries going on but the problem is the nested for loop I think
[20:44:56] <jack__d> too thicc
[20:44:58] <hoppity> dang`r`us: thank you
[20:45:04] <dang`r`us> that code is far too deeply nested
[20:45:10] <dang`r`us> build higher level abstractions
[20:45:20] <hoppity> jack__d: yeah, I just inherited and its a freaking mess
[20:45:40] *** Quits: rnm (~mambang@user/mambang) (Ping timeout: 240 seconds)
[20:46:16] <jack__d> actually, you can probably make a huge improvement right at the top (line 2)
[20:46:31] <hoppity> jack__d: how?
[20:46:56] <jack__d> * jack__d has logged out jk :)
[20:47:03] <jack__d> you need to add select_related or prefetch_related
[20:47:06] <hoppity> hahah
[20:47:15] <jack__d> that will gather all the data from other tables
[20:47:21] <jack__d> that you are hitting during the remainder of the function
[20:47:52] <hoppity> ok I will read into that then
[20:48:05] <jack__d> like ManagerEntry in particular
[20:48:24] <jack__d> because as you loop, every time you access that related attribute, you are currently performing a separate database query
[20:48:46] <hoppity> 100%
[20:49:02] <hoppity> thank you for the suggestion
[20:49:27] <jack__d> Also, test the function and use the .assertNumQueries function, then work on the function and keep whittling down the number of queries
[20:49:42] <timdiels> That's a lot of arbitrary whitespace you inherited
[20:50:01] <jack__d> ideally, you want to grab *everything* you will need in one big query, then do whatever processing without further harassing the database
[20:50:25] <hoppity> thank you both, I love the *harras* the database part haha
[20:50:33] <hoppity> harass*
[20:51:07] <jack__d> timdiels: a codebase optimized for 56" ultrawide monitors
[20:51:19] <hoppity> lmao
[20:58:40] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 240 seconds)
[20:59:40] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Ping timeout: 240 seconds)
[21:01:23] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[21:02:13] *** Joins: combengue (~Thunderbi@207.191.249.160)
[21:04:22] *** Quits: barrios (~barrios@dynamic-046-114-140-232.46.114.pool.telefonica.de) (Remote host closed the connection)
[21:04:41] *** Joins: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de)
[21:04:51] *** Quits: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[21:05:27] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Ping timeout: 245 seconds)
[21:05:27] *** combengue is now known as cmbengue
[21:11:17] *** Quits: pycode (~pycode@2001:b07:5d28:551:d2f3:d58c:104e:a874) (Ping timeout: 245 seconds)
[21:12:27] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[21:18:22] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 245 seconds)
[21:22:57] *** Joins: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net)
[21:31:39] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[21:34:53] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[21:36:20] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[21:36:41] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 248 seconds)
[21:42:12] *** Joins: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it)
[21:43:40] *** Joins: JordiGH (~jordi@user/jordigh)
[21:43:59] <JordiGH> I hope evaluating .none() doesn't actually hit the db. It doesn't, right?
[21:47:39] <anorthall> https://docs.djangoproject.com/en/dev/ref/models/querysets/#none
[21:48:13] <JordiGH> Thanks for checking the docs for my lazy posterior.
[21:48:30] <anorthall> I also had to type it into Google as well!
[21:48:45] <JordiGH> google by proxy, so hot right now
[21:48:51] <anorthall> :D
[21:49:09] <anorthall> what is the use case of .none()?
[21:49:59] <JordiGH> You need a queryset elsewhere that is gonna be further filtered or something and you don't want to rewrite client code to especially handle empty things.
[21:50:40] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[21:53:22] *** Quits: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca) (Ping timeout: 245 seconds)
[21:55:40] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 240 seconds)
[22:02:17] *** Joins: brsc2909 (~Thunderbi@109.255.244.60)
[22:04:12] <anorthall> JordiGH: I see
[22:04:36] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[22:07:17] *** Joins: ChkDigit (~u388mw@207-195-34-73.prna.static.sasknet.sk.ca)
[22:11:12] *** Joins: djapo (~archangel@user/djapo)
[22:14:23] <timdiels> jack__d: Although I haven't tried it myself yet, this might be of interest for restyling the code https://pypi.org/project/black/
[22:21:42] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 245 seconds)
[22:24:45] *** Joins: ciurca (~ciurca@5-15-3-125.residential.rdsnet.ro)
[22:27:02] <anorthall> black is excellent
[22:29:26] <ciurca> Hey everyone! I have a python function that uses a file from a database object. What is the best way to get that file whilst in production (S3)?
[22:30:20] *** Joins: pycode (~pycode@2001:b07:5d28:551:f941:ce36:bda1:fab1)
[22:30:45] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[22:31:16] <ciurca> This is how I currently try to get the file I wanna use: ``` template_path = f"files/{contract_template[0].file.name}" ```
[22:31:27] <ciurca> This is the error I get in production: Package not found at 'files/important/contract_templates/fafasdfsadf.docx'
[22:31:38] *** Quits: bionade24 (~bionade24@server2.oscloud.info) (Read error: Connection reset by peer)
[22:31:46] *** Joins: bionade24 (~bionade24@server2.oscloud.info)
[22:32:00] <ciurca> I have tried all combinations to get that file, even used os.path join with base_dir (which worked when I used to hardcode the templates).
[22:34:04] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[22:39:40] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 240 seconds)
[22:40:02] <anorthall> ciurca: if you know the relative path from the directory of the python file, you can do something like this
[22:40:28] <anorthall> file_path = os.path.abspath(os.path.join(__file__, "..", "..", "path", "to", "dir"))
[22:41:23] <ciurca> and is __file__ where i'm supposed to put the file I'm trying to access?
[22:41:31] <anorthall> os.path.join(__file__, "..") leaves you in the directory of your script
[22:41:38] <anorthall> no, __file__ is the location of the python script
[22:41:51] <anorthall> all python scripts are given the variable __file__, showing the path of the currently running file
[22:42:17] <ciurca> but the file i am trying to acces is uploaded in the static folder, which isn't in the same dir as my crypt
[22:42:37] <ciurca> my scrypt file is a services.py that shares the folder with view.py
[22:43:30] <anorthall> ciurca: ok, if you don't understand the code i gave, why don't you just use a full path?
[22:43:56] <anorthall> what OS are you using?
[22:44:39] <anorthall> why not '/home/user/files/important/contract_templates/fasdasd.docx' instead, then python will find it for sure
[22:45:01] <ciurca> because I want it to get it automatically from the Object
[22:45:15] <anorthall> is it in your django static directory?
[22:45:17] <ciurca> I have a Contract Templates model, which has a file field
[22:45:22] <ciurca> yes, it is
[22:45:49] <ciurca> it saves it in important/contract_templates/
[22:46:03] <ciurca>     file = models.FileField(upload_to="important/contract_templates/", null=True, blank=True)
[22:47:19] <carlio> the file field has a path, so you can do my_object.file.path (if your field is called 'file') - see https://docs.djangoproject.com/en/3.2/ref/models/fields/#django.db.models.fields.files.FieldFile.path
[22:49:02] <ciurca> It gives this error: This backend doesn't support absolute paths.
[22:49:11] <ciurca> I am using Postgreql
[22:49:22] <timdiels> I did thought S3 was remote storage indeed
[22:49:32] <timdiels> ciurca: you can open it with file.open()
[22:50:23] <timdiels> or file.chunks()
[22:50:36] <timdiels> or if you just want to include a url in your template to the file, file.url
[22:51:07] <ciurca> I am using the file I am grabbing as a template for DocxTemplate (basically generating another docx from a template with some params)
[22:51:17] <ciurca> is file.open() going to help me? going to try right now
[22:52:10] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[22:52:38] <timdiels> I've only used FileSystemStorage so far, but I think open() works for all storage types
[22:52:50] <timdiels> See https://docs.djangoproject.com/en/3.2/ref/models/fields/#filefield-and-fieldfile
[22:53:38] <ciurca> sorry, I'm a beginner, but could you explain how opening the file would help if I need the path?
[22:55:27] <timdiels> I thought you were going to pass a python file object to some sort of docx parser, modify it and write back a new docx? I'd hope the parser can take a file obj and not just a path
[22:55:41] <anorthall> timdiels: the issue is ciurca can't figure out how to get the relative path of their file
[22:56:59] <ciurca> this is the error I get when i use file.open: expected str, bytes or os.PathLike object, not FieldFile
[22:57:13] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Ping timeout: 248 seconds)
[22:58:07] <ciurca> I get the relative path of the file by using file.name @anor
[22:58:07] <timdiels> anorthall: sounds to me like the docx isn't stored on the same host/container as where the app runs though?
[22:58:08] <ciurca> anorthall
[22:58:13] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:58:18] <anorthall> timdiels: yes, i'm not sure what is going on
[22:58:44] <anorthall> ciurca: sorry, i am confused by your question. is the file in S3? or is it local to the django install?
[22:58:47] <ciurca> the app runs on heroku. the docx is hoster on AWS S3
[22:58:53] <ciurca> hosted*
[22:59:08] <timdiels> ciurca: As it doesn't support that, it's probably easier to bundle the file along with your app, not in S3
[22:59:30] <timdiels> ciurca: otherwise you have to copy it to a tmp directory on the app each time
[23:00:01] <ciurca> the problem is that the file is uploaded by the user, when he creates a new Contract Template object
[23:00:25] <timdiels> I see, tmp dir then
[23:00:46] <ciurca> to a tmp directory where?
[23:00:55] <knbk> contract_template.file is already a file-like object, can you use that directly?
[23:01:24] <knbk> (and it auto-opens, you rarely have to use obj.file.open() manually)
[23:02:01] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[23:02:04] <ciurca> I'm going to paste the function so you guys understand
[23:02:19] <timdiels> knbk: apparently DocxTemplate does not accept file objects
[23:03:13] <ciurca> https://dpaste.com/6D5XDF7UM
[23:03:13] *** Quits: pycode (~pycode@2001:b07:5d28:551:f941:ce36:bda1:fab1) (Ping timeout: 258 seconds)
[23:03:28] <knbk> timdiels: I don't think ciurca ever said that?
[23:03:47] <carlio> "expected str, bytes or os.PathLike object" <-- that was the error they posted
[23:03:53] <ciurca> I didn't say it, but I think timdiels is right
[23:04:17] *** Quits: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net) (Client Quit)
[23:05:25] <knbk> which library is this?
[23:06:21] <ciurca> knbk https://docxtpl.readthedocs.io/en/latest/
[23:06:21] <timdiels> ciurca: something like this I think should work https://dpaste.org/M1pB
[23:06:57] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[23:07:02] *** Quits: Kalov (~Thunderbi@179.56.117.154) (Quit: Kalov)
[23:09:45] <ciurca> trying it right now timdiels
[23:10:28] <ciurca> [Errno 2] No such file or directory: '/tmp/tmpbxs86jzo/template.docx'
[23:10:30] *** Quits: blackout69 (~blackout6@net-2-42-57-150.cust.vodafonedsl.it) (Quit: Leaving.)
[23:11:40] <ciurca> theoretically a lot of people would access this generateContract function at the same time. Wouldn't there be a problem if a lot of temp files/dirs would be created?
[23:12:14] <knbk> "docx can be either a path to a .docx file (a string) or a file-like object" -- can you show what exactly you tried when using obj.file directly, and the traceback?
[23:14:57] <ciurca> wait, I think I fixed it
[23:15:34] <ciurca> it worked with .file on my machine, trying to see whether it works in production
[23:15:59] <timdiels> Unrelated, aren't self.instance's attrs set yet in MyModelForm.clean after calling super?
[23:17:03] <knbk> timdiels: nope, only after form.save(). They're in self.cleaned_data, though
[23:19:45] <ciurca> thank you everyone! apparently just using .file worked. i don't know what i was doing beforehand with .file that didn't work
[23:19:53] <ciurca> now I have another problem
[23:20:08] <ciurca> I have an export all contract function that user Obj.file.path
[23:20:20] *** Quits: koolazer (~koo@user/koolazer) (*.net *.split)
[23:20:20] *** Quits: carlio (~carlio@88.198.149.110) (*.net *.split)
[23:20:26] <ciurca> but apparently AWS doesn't support absolute paths
[23:20:30] *** Joins: carlio (~carlio@88.198.149.110)
[23:20:46] *** Joins: koolazer (~koo@user/koolazer)
[23:21:13] <ciurca> https://dpaste.com/HDJ9RVAGJ so how could I change this function to make it work?
[23:21:30] <ciurca> I guess this may be more python related than django
[23:21:48] *** Joins: audiobirb (~audio@2603-8081-1801-3bb5-8b06-6d83-bd34-d027.res6.spectrum.com)
[23:23:25] *** Joins: jack__d (~jack__d@pool-98-109-145-13.nwrknj.fios.verizon.net)
[23:23:32] <ciurca> or is there a better way for an admin to export all files associated with certain objects?
[23:27:42] <timdiels> ciurca: maybe https://dpaste.com/A8YRH7D2X
[23:28:25] <timdiels> hoping zf.write accepts file objects
[23:30:23] *** Joins: combengue (~Thunderbi@207.191.249.160)
[23:31:02] <ciurca> timdiels stat: path should be string, bytes, os.PathLike or integer, not FieldFile
[23:31:45] <timdiels> ciurca: maybe contract_file.open()?
[23:31:58] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Ping timeout: 258 seconds)
[23:31:59] *** combengue is now known as cmbengue
[23:33:57] <ciurca> timdiels still expected str, bytes or os.PathLike object, not FieldFile
[23:34:04] <knbk> ciurca: can you dpaste the full traceback? Hard to see what's going on with just the error message
[23:34:12] <timdiels> Seems you might be out of luck https://stackoverflow.com/questions/8068180/adding-a-file-like-object-to-a-zip-file-in-python
[23:34:40] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 240 seconds)
[23:36:38] <timdiels> in which case you would need to do the tempdir thing I suggested earlier for those files to add to the zip. To minimise local tmp storage usage: for file in files: with TemporaryDirectory ...: write file to dir; add to zip
[23:36:49] *** Quits: fortuno51 (~fortuno51@78.10.204.200) (Remote host closed the connection)
[23:37:22] *** Joins: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de)
[23:37:33] *** Quits: barrios (~barrios@ip5f5aba17.dynamic.kabel-deutschland.de) (Remote host closed the connection)
[23:37:52] <ciurca> https://www.botreetechnologies.com/blog/create-and-download-zip-file-in-django-via-amazon-s3/ is this better?
[23:38:03] <timdiels> ah hang on, the last answer of that SO suggests it's possible after all
[23:38:05] *** Joins: djapo (~archangel@user/djapo)
[23:38:45] *** Joins: fortuno51 (~fortuno51@78.10.204.200)
[23:41:01] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[23:41:01] *** ChanServ sets mode: +v EvilDMP
[23:41:59] <ciurca> I'm going to pick it up tomorrow. Thanks for all your help guys! I really appreciate it. :)
[23:43:37] <timdiels> ciurca: https://dpaste.com/4NGV9HU5S
[23:45:07] <timdiels> and actually the 'wb' should probably be 'w'
[23:45:45] <ciurca> for chunk in src.chunks()
[23:45:47] <ciurca> src is undefined
[23:48:37] *** Joins: combengue (~Thunderbi@207.191.249.160)
[23:48:54] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Ping timeout: 268 seconds)
[23:48:54] *** combengue is now known as cmbengue
[23:50:08] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 268 seconds)
[23:51:04] <ciurca> timdiels it works by changing src to contract_file
[23:51:10] <ciurca> but it downloads in all files format
[23:52:38] <ciurca> timdiels it works!
[23:52:55] <timdiels> ciurca: great :)
[23:52:58] <ciurca> thanks a lot!
[23:53:35] *** Joins: LuxuryMode (uid91005@id-91005.charlton.irccloud.com)
[23:53:51] <ciurca> gonna go now guys! have a nice day
[23:54:36] <LuxuryMode> When specifying `fields` in `refresh_from_db()`, i.e. `my_object.refresh_from_db(fields=['some_field'])` does this result in less IO/reading if I only need a subset of the fields to be refreshed?
[23:54:38] *** Quits: ciurca (~ciurca@5-15-3-125.residential.rdsnet.ro) (Quit: Client closed)
[23:55:40] *** Quits: audiobirb (~audio@2603-8081-1801-3bb5-8b06-6d83-bd34-d027.res6.spectrum.com) (Ping timeout: 240 seconds)
[23:56:39] <timdiels> My model form has a blast_db which should set either protein_db or nucleotide_db on the model. Is MyForm.clean the right place to set protein/nucleotid_db on the instance? Seems to work
[23:58:34] *** Joins: audiobirb (~audio@2603-8081-1801-3bb5-b85b-ab08-b222-f64f.res6.spectrum.com)
