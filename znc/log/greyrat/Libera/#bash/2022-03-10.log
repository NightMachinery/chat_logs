[00:00:21] *** Joins: Minvera (~Minvera@user/Minvera)
[00:04:28] *** Joins: rufito (~phil@186-79-2-135.baf.movistar.cl)
[00:06:02] *** Quits: Masterphi (~Masterphi@user/masterphi) (Quit: Masterphi)
[00:06:09] *** Joins: Maxxed (~Maxxed@nrgt.net)
[00:07:50] *** Joins: djph_ (~dpurgert@cpe-107-10-235-152.neo.res.rr.com)
[00:08:24] *** Joins: curvv (~quetzlcoa@192-143-23-90.ip.airmobile.co.za)
[00:08:25] *** Quits: curvv (~quetzlcoa@192-143-23-90.ip.airmobile.co.za) (Changing host)
[00:08:25] *** Joins: curvv (~quetzlcoa@user/curvv)
[00:08:40] *** Quits: noteness (~noteness@user/noteness) (Remote host closed the connection)
[00:09:00] *** Joins: noteness (~noteness@user/noteness)
[00:09:34] *** Quits: djph (~dpurgert@cpe-107-10-235-152.neo.res.rr.com) (Ping timeout: 272 seconds)
[00:09:53] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[00:10:17] *** Joins: ryzenda (~ryzenda@pool-74-109-246-70.pitbpa.fios.verizon.net)
[00:11:34] *** Quits: duuude (~user@user/duuude) (Ping timeout: 260 seconds)
[00:15:05] *** Joins: magla (~gelignite@d5367992.access.ecotel.net)
[00:15:08] *** Quits: guesswhat (~guesswhat@ip-89-177-103-59.net.upcbroadband.cz) (Quit: Client closed)
[00:16:38] *** Parts: ash_worksi (~ash_m@user/ash-m/x-3292451) ()
[00:16:54] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[00:16:58] <Earnest> That ml thread about docker returning bogus errnos for unknown syscalls is insane
[00:17:33] <Earnest> I didn't realise docker was this bad
[00:18:06] *** Joins: duuude (~user@user/duuude)
[00:19:27] *** Joins: easyriders (~easyrider@xb9b5df82.cust.hiper.dk)
[00:21:15] *** Joins: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net)
[00:22:01] *** Quits: dreamon (~dreamon@pd9503c39.dip0.t-ipconnect.de) (Ping timeout: 245 seconds)
[00:22:16] *** Quits: KevinX (~KevinX@user/KevinX) (Read error: Connection reset by peer)
[00:23:22] *** Joins: KevinX (~KevinX@user/KevinX)
[00:24:32] *** Quits: rufito (~phil@186-79-2-135.baf.movistar.cl) (Quit: Leaving)
[00:25:13] *** Quits: dea_ (~dea@31.210.96.68) (Ping timeout: 256 seconds)
[00:28:51] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Quit: john_johnk)
[00:28:55] *** Quits: Filohuhum (~dante@gateway/tor-sasl/filohuhum) (Ping timeout: 240 seconds)
[00:29:30] *** Joins: wurstwasser (~frank.hol@2001:a61:34c0:801:b48d:817c:2be2:b14f)
[00:30:49] *** Joins: m0viefreak2 (~asdf@user/m0viefreak)
[00:30:50] *** Quits: m0viefreak (~asdf@user/m0viefreak) (Killed (NickServ (GHOST command used by m0viefreak2)))
[00:30:53] *** m0viefreak2 is now known as m0viefreak
[00:31:56] *** Joins: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae)
[00:33:37] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Ping timeout: 240 seconds)
[00:36:36] <ano> https://www.openwall.com/lists/oss-security/2022/03/07/ good example why umask should be 077
[00:37:08] <ano> sry wrong chan
[00:38:32] *** Joins: leonic (~leonic@user/leonic)
[00:39:56] <leonic> hi, "cp -r dir/ dir2/." will copy files from dir/ into dir2/ without creating dir2/dir and "cp -rT dir/ dir2/" does the same.
[00:40:39] <leonic> it won't work without the dot at the end: "cp -r dir/ dir2/"
[00:40:55] <leonic> what does the dot at the end mean? is it a bashism?
[00:41:34] *** Quits: jinsun (~jinsun@user/jinsun) ()
[00:41:48] *** Joins: Masterphi (~Masterphi@user/masterphi)
[00:42:12] *** Quits: sobkas (~sobkas@95.175.17.217) (Remote host closed the connection)
[00:43:34] *** Joins: King_jul1an (~King_juli@41.1.92.54)
[00:44:59] *** Joins: jinsun (~jinsun@user/jinsun)
[00:45:20] <tirnanog> it can't possibly be a bashism because the operand is interpreted by cp.
[00:45:38] <geirha> and it should work without the . as long as you have the trailing slash
[00:46:02] <tirnanog> that's not actually the case.
[00:46:26] <leonic> geirha: I want to avoid copying dir/files into dir2/dir/files
[00:46:28] <twkm> i smell zsh.
[00:46:31] <tirnanog> at least, not with GNU cp. the trailing /. is necessary in the source operand for that distinction in behaviour.
[00:46:45] <leonic> I want it to copy dir/files to dir2/files
[00:46:46] <tirnanog> it has nothing to do with the shell (how could it).
[00:47:17] <leonic> tirnanog: so the dot is specific to cp?
[00:47:59] <leonic> I'm not sure what the dot means, because `ls dir/` returns the same as `ls dir/,`
[00:48:01] <tirnanog> # mkdir -p dir1/a; cp -r dir1/ dir2/; find dir2
[00:48:03] <shbot> tirnanog: dir2
[00:48:03] <shbot> tirnanog: dir2/a
[00:48:09] <geirha> ah right, but you need the . on the source, not the dest
[00:48:11] <leonic> `ls dir/.` I meant
[00:48:30] <tirnanog> hmm.
[00:48:38] <geirha> # mkdir dir dir2 ; touch dir/file ; cp -r dir/. dir2/ ; ls dir2
[00:48:40] <shbot> geirha: file
[00:48:50] <tirnanog> oh, duh.
[00:48:58] <tirnanog> # mkdir -p dir1/a/b; cp -r dir1/ dir2/; find dir2
[00:48:59] <shbot> tirnanog: dir2
[00:48:59] <shbot> tirnanog: dir2/a
[00:48:59] <shbot> tirnanog: dir2/a/b
[00:49:23] <leonic> geirha: sorry, yes, I made a typo in my first post. I meant to write "cp -r dir/. dir2/"
[00:49:29] <geirha> # mkdir dir dir2 ; touch dir/file ; cp -r dir/ dir2/ ; ls dir2
[00:49:31] <shbot> geirha: dir
[00:49:34] <tirnanog> hmm. but it's different here. is the bot not using gnu cp?
[00:49:54] *** Quits: Kyuzo68 (~Kyuzo@host-79-47-39-235.retail.telecomitalia.it) (Quit: Konversation terminated!)
[00:50:01] <Friithian> # cp --version
[00:50:05] <shbot> Friithian: cp (GNU coreutils) 8.28
[00:50:05] <shbot> Friithian: Copyright (C) 2017 Free Software Foundation, Inc.
[00:50:05] <shbot> Friithian: etc... ( http://ix.io/3CTf )
[00:50:06] <geirha> yes, curious
[00:50:16] <tirnanog> the plot thickens.
[00:50:50] <tirnanog> leonic: to provide a general answer, see "pathname resolution" here: https://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap04.html. if you run your experiments again with the addition of -v, you should get a better idea as to what's happening.
[00:52:08] <tirnanog> in coreutils-9.0 here, cp -r dir1/. dir2/ results in "dir2/a/b", where as dir1/ dir2/ results in "dir2/dir1/a/b".
[00:52:42] <leonic> which should be the same as cp -rT
[00:52:48] *** Quits: c_89 (~c_89@151.74.29.155) (Quit: Connection closed)
[00:52:52] <tirnanog> yes, I believe so.
[00:52:54] <leonic> (if you have gnu cp)
[00:53:13] <tirnanog> geirha: it says "An earlier version of this standard required that a pathname with a trailing <slash> character be treated as if it had a trailing "/." everywhere". maybe it's to do with that.
[00:53:22] <tirnanog> leonic: right.
[00:53:40] *** Quits: wurstwasser (~frank.hol@2001:a61:34c0:801:b48d:817c:2be2:b14f) (Remote host closed the connection)
[00:54:03] *** Quits: aniruddha (uid340443@id-340443.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[00:54:08] <tirnanog> section 4.13 of the above document, to be clear.
[00:54:20] <leonic> anyway, it has something to do with posix and I should just remember that it works that way instead of trying to understand why or how?
[00:54:57] <tirnanog> well, whether you want to understand it is up to you. but, as I say, if you do cp -rv dir1/. dir2/ and compare to dir1/ dir2/, I think you might get the idea.
[00:55:03] <leonic> but then I still don't get if there would be any difference between `ls dir/` and `ls dir/.`
[00:55:15] *** Quits: nuh^ (~nuh@50.232.121.75) (Remote host closed the connection)
[00:55:18] <tirnanog> unfortunately, the attempt to demonstrate this fell flat in the bot's environment.
[00:55:24] <leonic> or any other command
[00:56:18] <tirnanog> you have to read the documentation for a given utility to know with absolute certainty whether there'll be a difference. that being said, there shouldn't be for ls(1). both dir/ and dir/. unambiguously qualify "dir" as to be treated as a directory. I don't see any meaningful way in which ls(1) could respond differently.
[00:56:24] <leonic> tirnanog: yeah, I understand what it does. I specifically looked it up (and found it on stackoverflow), because `cp -r dir/ dir2/` didn't do what I wanted.
[00:56:44] <tirnanog> leonic: well, good on you for picking up on it. many don't realise there's a difference.
[00:56:58] <leonic> I didn't either.
[00:57:12] <leonic> I just websearched "linux copy cp recursive without creating directory".
[00:57:25] <tirnanog> another way is to use rsync, in which case the distinction doesn't matter. rsync -ai dir1/ dir2/ works as you want, for instance.
[00:57:28] <leonic> and found the answer on SO :^)
[00:57:48] *** Quits: cdown (~cdown@82-69-42-66.dsl.in-addr.zen.co.uk) (Ping timeout: 240 seconds)
[00:57:48] <leonic> yeah, I know, but I wanted to try to make it work with a simple `cp`
[00:57:55] <tirnanog> well, you succeeded :)
[00:58:21] <leonic> yeah, my backup command is now a simple `cp -rpu dir/. dir2/`
[00:58:25] <tirnanog> in summary, it look as though the standard changed its stance on this matter.
[00:59:09] <tirnanog> as I mentioned before, the above document (POSIX 2018) says that a trailing / isn't implicitly treated as /. anymore. I'm guessing the instance of cp(1) in the bot's environment is too old to account for this.
[00:59:40] <leonic> but the SO answer was from 2015
[00:59:57] <tirnanog> no, I mean, that's why cp -r dir1/ dir2/ 'worked' with the bot.
[01:00:11] <tirnanog> it wouldn't have if coreutils was up to date.
[01:00:16] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958)
[01:00:26] <tirnanog> (I think - either coreutils, libc or both)
[01:00:59] <leonic> So cp didn't used to create dir2/dir1/files?
[01:01:08] <tirnanog> apparently so.
[01:01:12] <leonic> hmm
[01:01:23] <tirnanog> with merely a trailing "/", that is.
[01:01:34] <tirnanog> anyway, don't count on that. "dir1/." is the right thing to do.
[01:05:00] *** Quits: magla (~gelignite@d5367992.access.ecotel.net) (Quit: Stay safe!)
[01:05:00] *** Quits: bertvvvs (~bertvvvs@user/bertvvvs) (Quit: Y'all have a nice day.)
[01:05:43] *** Quits: ayustae (Thunderbir@gateway/vpn/protonvpn/ayustae) (Quit: ayustae)
[01:06:23] *** Quits: drd (~drd@2001:b07:a70:9f1f:7c59:9868:ca2f:aa81) (Ping timeout: 252 seconds)
[01:11:01] *** Joins: son0p (~ff@181.136.122.143)
[01:11:43] <tirnanog> leonic: just to provide some additional context: https://pubs.opengroup.org/onlinepubs/9699919799/utilities/cp.html. note the first bullet point.
[01:12:35] <tirnanog> "[...] relative to the directory containing source_file". when said directory is considered as "." then it obviously has a different implication, relative to the destination directory.
[01:13:24] *** Quits: jkwnki (~jkwnki@p2e579634.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[01:14:03] <tirnanog> I'm honestly surprised that it was ever an implicit behaviour and I don't blame them for changing it.
[01:15:04] *** Joins: muffin_storm (~muffin_st@50-233-189-146-static.hfc.comcastbusiness.net)
[01:16:36] <leonic> there's no way you could've guessed this behaviour from the manpage though
[01:16:36] *** Quits: m0viefreak (~asdf@user/m0viefreak) (Remote host closed the connection)
[01:17:00] <tirnanog> gnu man pages are often sub-par.
[01:17:28] <tirnanog> sometimes, it's better to read the info manual instead, but it's hit and miss in general.
[01:17:42] <tirnanog> you might be able to run "man 1p cp", however.
[01:17:52] <leonic> websearching mostly gives me the quickest/best answers
[01:18:17] <Earnest> !google
[01:18:17] <greybot> Google is NOT a preferred source for learning bash, because almost all the "tutorials" and scripts out there are JUNK. Instead, ask a good question here or refer to the Guide and FAQ (see topic)
[01:18:36] <Earnest> And lol imagine not getting linux.die when searching for manuals
[01:18:41] <tirnanog> if you want a springboard for posix documentation, look at shellhaters.org.
[01:18:45] <Earnest> Prehistoric documentation
[01:19:12] <leonic> Earnest: good thing I use qwant then and not google
[01:19:22] <leonic> :^)
[01:19:24] <tirnanog> non-standard options notwithstanding, posix decides how things shall be.
[01:19:33] <tirnanog> and their documentation is actually good, if dry.
[01:19:51] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:20:18] <Earnest> leonic: You must be intelligent enough to understand that google is used here as a general stand-in for anything one might find searching the internet.  Please do not be like this
[01:20:18] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[01:20:28] *** Quits: rendar (~rendar@user/rendar) (Quit: Leaving)
[01:20:37] <leonic> I see you missed the :^)
[01:20:44] <Earnest> You don't have to be like that
[01:21:10] <leonic> tirnanog: thanks for your help.
[01:21:40] *** Joins: dsrt^ (~dsrt@50.232.121.75)
[01:22:14] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958)
[01:22:18] <Earnest> tirnanog: The unix, say bell labs, standard for documentation is rare.  It's an extremely rare feature to come across such terse and concise documentation; I literally find it nowhere else and I think it's one of the most underappreciated aspects of manpages
[01:22:44] <tirnanog> Earnest: you surely won't be surprised at my saying that I wholly agree. it's excellent.
[01:22:49] <Earnest> I would not have come up with it if I didn't just copy what they did before me
[01:23:04] <Earnest> Now I hate people who put it down
[01:23:53] <tirnanog> something about respect for the wisdom of one's elders springs to mind.
[01:24:27] *** Quits: ZedHedTed (~ZedHedTed@user/zedhedted) (Remote host closed the connection)
[01:24:42] <Earnest> This is just because they're actually good, and spurning them is bad taste
[01:24:43] *** Joins: ZedHedTed (~ZedHedTed@user/zedhedted)
[01:25:01] <Earnest> I wish product manuals were like unix manpages
[01:25:04] *** Quits: leonic (~leonic@user/leonic) (Quit: Konversation terminated!)
[01:25:51] *** Quits: cliluw (~cliluw@47.147.77.43) (Ping timeout: 256 seconds)
[01:25:57] <Earnest> If you want examples of anti-documentation it would be the documentation found in latex packages.  So far I've not found worse
[01:26:21] *** Joins: cliluw (~cliluw@47.147.77.43)
[01:26:22] <tirnanog> duly noted. I shall leave that for another day, when my resolve is greater.
[01:26:24] *** Joins: qub411 (~user@118.209.248.55)
[01:28:05] *** Quits: stanlib (~archblade@user/stanlib) (Remote host closed the connection)
[01:28:25] <Earnest> (Consistents of author showing off latex skills, comes with backstories, doesn't describe options in form of lists, doesn't show examples, etc.)
[01:28:53] <tirnanog> sounds riveting.
[01:30:10] *** Joins: sa0 (~sa0sin@2a01:e0a:414:b360:9ff:d128:aded:6ba3)
[01:31:01] *** Quits: Minvera (~Minvera@user/Minvera) (Remote host closed the connection)
[01:32:54] *** Quits: drewlander_ (~drewlande@74.196.20.3) (Quit: ZNC 1.8.2+deb2 - https://znc.in)
[01:34:49] *** Quits: redgloboli (~redglobol@user/redgloboli) (Remote host closed the connection)
[01:34:51] *** Joins: drewlander (~drewlande@74.196.20.3)
[01:34:55] *** Quits: easyriders (~easyrider@xb9b5df82.cust.hiper.dk) (Ping timeout: 256 seconds)
[01:35:05] *** Joins: redgloboli (~redglobol@user/redgloboli)
[01:35:48] *** Quits: King_julian (~King_juli@41.1.92.54) (Ping timeout: 256 seconds)
[01:36:08] *** Joins: Guest7498 (~Guest@host202.190-137-39.telecom.net.ar)
[01:36:58] *** Quits: King_jul1an (~King_juli@41.1.92.54) (Ping timeout: 272 seconds)
[01:43:46] *** Joins: schnakseli (~schnaksel@mobile-access-b04845-195.dhcp.inet.fi)
[01:50:09] *** Quits: clarkk (~clarkk@2a00:23c7:d106:2600:5a9f:6734:1f65:234f) (Remote host closed the connection)
[01:53:26] *** Joins: clarkk (~clarkk@2a00:23c7:d106:2600:9503:8932:cdd9:9528)
[01:54:07] *** Quits: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:54:35] *** Quits: clarkk (~clarkk@2a00:23c7:d106:2600:9503:8932:cdd9:9528) (Remote host closed the connection)
[01:54:40] *** duuude is now known as standard
[01:55:00] *** Joins: clarkk (~clarkk@2a00:23c7:d106:2600:9503:8932:cdd9:9528)
[01:55:20] *** Joins: sinaowolabi_ (~SinaOwola@160.152.106.73)
[01:55:35] *** standard is now known as duuude
[01:57:02] *** Joins: jkwnki (~jkwnki@p2e579634.dip0.t-ipconnect.de)
[01:57:08] *** Joins: cyberbanjo (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8)
[01:58:48] *** Quits: cyberbanjo (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8) (Remote host closed the connection)
[01:59:16] *** Joins: cdown (~cdown@82-69-42-66.dsl.in-addr.zen.co.uk)
[01:59:49] *** Joins: cyberban` (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8)
[02:01:20] *** Quits: seninha (~chatzilla@user/seninha) (Quit: ChatZilla 0.9.93 [SeaMonkey 2.53.10.2/20220226204633])
[02:02:14] *** Quits: cyberban` (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8) (Remote host closed the connection)
[02:03:46] *** Quits: cdown (~cdown@82-69-42-66.dsl.in-addr.zen.co.uk) (Remote host closed the connection)
[02:04:30] *** Joins: seninha (~chatzilla@user/seninha)
[02:05:09] *** Joins: stanlib (~archblade@user/stanlib)
[02:06:41] *** Joins: tex (~dix@user/dix)
[02:06:45] *** Quits: stanlib (~archblade@user/stanlib) (Remote host closed the connection)
[02:11:30] *** Quits: BrowseMan (~BrowseMan@78.130.185.116) (Ping timeout: 256 seconds)
[02:16:43] *** Joins: BrowseMan (~BrowseMan@78.130.185.116)
[02:17:50] *** Joins: larryv (~larryv@zsh/patchmanager/larryv)
[02:19:33] *** Quits: Asgaroth (~Asgaroth@93.107.191.92) (Read error: Connection reset by peer)
[02:21:07] *** Quits: nyex (~Thunderbi@177.84.107.26) (Remote host closed the connection)
[02:21:08] *** Quits: jkwnki (~jkwnki@p2e579634.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[02:22:37] *** Quits: A|an (~Alan@173.216.85.166) (Remote host closed the connection)
[02:22:58] *** Joins: A|an (~Alan@173.216.85.166)
[02:25:06] *** Quits: sinaowolabi_ (~SinaOwola@160.152.106.73) (Ping timeout: 256 seconds)
[02:29:02] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:3148:cd0b:417b:6958) (Ping timeout: 240 seconds)
[02:32:43] *** Joins: igemnace (~ian@user/igemnace)
[02:38:24] *** Quits: yustin (~yustin@user/yustin) (Ping timeout: 272 seconds)
[02:38:36] *** Quits: YHVH (~yhvh@2601:982:8300:8090:31c1:b472:f49e:8a92) (Ping timeout: 240 seconds)
[02:38:38] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Quit: PROTO-IRC v0.73a (C) 1988 NetSoft - Built on 11-13-1988 on AT&T System V)
[02:39:55] *** djph_ is now known as djph
[02:40:38] *** Joins: wurstwasser (~frank.hol@2001:a61:34c0:801:1092:e218:4040:a3a9)
[02:40:45] *** Joins: aod (~a@190-207-87-44.dyn.dsl.cantv.net)
[02:41:01] *** Quits: cebor (~cebor@user/cebor) (Quit: bye!)
[02:41:21] *** Quits: ekathva_ (~ekathva@n14jp5os0e43ev9my-1.v6.elisa-mobile.fi) (Remote host closed the connection)
[02:41:23] *** Joins: cebor (~cebor@user/cebor)
[02:41:32] *** Quits: wurstwasser (~frank.hol@2001:a61:34c0:801:1092:e218:4040:a3a9) (Remote host closed the connection)
[02:43:05] *** Quits: aod (~a@190-207-87-44.dyn.dsl.cantv.net) (Client Quit)
[02:44:14] *** Joins: aod (~a@190-207-87-44.dyn.dsl.cantv.net)
[02:44:58] *** Quits: LuKaRo (~LuKaRo@p57b157e5.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[02:45:50] *** Quits: cebor (~cebor@user/cebor) (Client Quit)
[02:46:29] *** Joins: cebor (~cebor@user/cebor)
[02:46:30] *** Quits: pretty_dumm_guy (trottel@gateway/vpn/protonvpn/prettydummguy/x-88029655) (Quit: WeeChat 3.4)
[02:46:31] *** Joins: ferdna (~ferdna@user/ferdna)
[02:46:37] *** Joins: LuKaRo_ (~LuKaRo@p200300dfa712f15a9a5d23a6a02b67bb.dip0.t-ipconnect.de)
[02:47:03] *** Joins: sinaowolabi_ (~SinaOwola@160.152.106.73)
[02:47:55] *** Joins: rcernin (~rcernin@101.189.129.123)
[02:49:31] *** Quits: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net) (Quit: WeeChat 3.4)
[02:49:37] *** Quits: curvv (~quetzlcoa@user/curvv) (Quit: ktxbye)
[02:51:25] *** Quits: sinaowolabi_ (~SinaOwola@160.152.106.73) (Ping timeout: 256 seconds)
[02:52:06] *** Quits: tex (~dix@user/dix) (Ping timeout: 260 seconds)
[02:52:47] *** Joins: jmdaemon (~jmdaemon@user/jmdaemon)
[02:56:26] *** Joins: fabs (~fabs@2607:fb60:2501:2805:dea6:32ff:fed8:2af3)
[03:00:47] *** Quits: jaysicks (~jaysicks@178-164-166-32.pool.digikabel.hu) (Remote host closed the connection)
[03:00:58] *** Quits: lapsi (~lapsi@85.14.25.194) (Ping timeout: 260 seconds)
[03:02:30] *** Joins: lapsi (~lapsi@85.14.25.194)
[03:03:54] *** Quits: jmdaemon (~jmdaemon@user/jmdaemon) (Quit: ZNC 1.8.2 - https://znc.in)
[03:06:43] *** Joins: jmdaemon (~jmdaemon@user/jmdaemon)
[03:07:54] <bn_work> hi, bash 5.1.16, trying to ssh to a bunch of servers to echo out a file in /etc/sudoers.d to setup NOPASSWD (ie: 'echo "jdoe ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/jdoe' ) to prep for saltstack usage.  Currently none of the servers have SSH keys so I need to mass-ssh to each of them.  I've written a script that does an ssh -tt -o ConnectTimeout=10 -n ${USER}@${HOST} ${CMD} (-tt to force a PTTY) to each server but when it
[03:07:54] <bn_work> prompts for the sudo pw, it echoes the local text and then nothing happens, why?  & is there any way to get around that 2nd prompt?
[03:08:08] *** Quits: Gerula (~Gerula@user/gerula) (Quit: Leaving)
[03:09:01] <bn_work> (the first being for the $USER@$HOST pw)
[03:10:20] *** Joins: herjazz (~herjazz@p10513117-ipngn24101marunouchi.tokyo.ocn.ne.jp)
[03:11:10] *** Joins: dea_ (~dea@2a01:5ec0:7805:d724:2a8:1b8:eda8:2484)
[03:11:42] *** Quits: dea_ (~dea@2a01:5ec0:7805:d724:2a8:1b8:eda8:2484) (Client Quit)
[03:11:50] <tirnanog> bn_work: look up the sshpass program. that may be used to get the job done.
[03:12:12] <tirnanog> you should use it to get keys deployed, really, then stop using it.
[03:12:25] <bn_work> tirnanog: I did, I tried that and ran into a different issue, lol, so I was trying to do it via my original way
[03:12:37] <bn_work> tirnanog: yes, that's the plan
[03:13:17] *** Quits: kj (~kj@beta.aerisnetwork.net) (Ping timeout: 240 seconds)
[03:13:26] *** Joins: Gerula (~Gerula@user/gerula)
[03:14:16] *** Joins: Kyuzo68 (~Kyuzo@host-79-47-39-235.retail.telecomitalia.it)
[03:15:00] *** Quits: LuKaRo_ (~LuKaRo@p200300dfa712f15a9a5d23a6a02b67bb.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[03:15:01] *** Quits: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:16:39] *** Joins: pasteban (~pasteban@157.146.251.23.bc.googleusercontent.com)
[03:16:43] <tirnanog> with a sudoers policy like that, jdoe is - effectively - a root account by a different name. you might as well just use sshpass to drop a pubkey into /root/.ssh/authorized_keys, and use that to get whatever else that needs doing done. you could always remove it later.
[03:16:46] <bn_work> tirnanog: looks like I got "Permission denied, please try again" but actually, that was my fault.  Retried it again (cmd = sshpass -f foo.txt ssh ...` ) and am basically getting the same issue, ie:  it prompts for sudo pw then echoes my typed text
[03:16:50] *** Joins: LuKaRo (~LuKaRo@p200300dfa712f15a9a5d23a6a02b67bb.dip0.t-ipconnect.de)
[03:17:50] *** Quits: seninha (~chatzilla@user/seninha) (Remote host closed the connection)
[03:18:09] *** Joins: Kaedenn (~kaedenn@137.229.82.89)
[03:18:16] *** Quits: ElPresidente (~ElPreside@2600:1700:3d10:4870:aaa1:59ff:fe3c:ddb4) (Ping timeout: 245 seconds)
[03:18:17] <bn_work> tirnanog: https://docs.saltproject.io/en/latest/topics/ssh/index.html#deploy-ssh-key-for-salt-ssh is what I need to get done, but won't I get the same issue?
[03:18:45] <bn_work> I'm assuming I will still need to have sudo access?
[03:18:46] <Kaedenn> Assume `declare -x -a arr=()`. `echo -e "a\nb\nc" | while read f; a+=($f); done`, `${a[@]}` is empty. Why?
[03:18:48] <tirnanog> oh, but I forget that it's common for distros to have no root password.
[03:18:55] <tirnanog> in that case, yeah, it's not going to be so easy.
[03:19:10] <larryv> !faq disappear > Kaedenn
[03:19:10] <greybot> Kaedenn: https://mywiki.wooledge.org/BashFAQ/024 -- I set variables in a loop that's in a pipeline. Why do they disappear after the loop terminates? Or, why can't I pipe data to read?
[03:19:10] <Kaedenn> s/a+=/do a+=/
[03:19:19] <Kaedenn> Thank you.
[03:19:37] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[03:19:38] <twkm> Kaedenn: as an aside, avoid echo or at least echo -e.
[03:19:46] <Kaedenn> This is just an example.
[03:20:01] *** Quits: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com) (Remote host closed the connection)
[03:20:21] *** Joins: seninha (~chatzilla@user/seninha)
[03:20:30] *** Joins: ElPresidente (~ElPreside@172-125-150-28.lightspeed.tukrga.sbcglobal.net)
[03:20:39] *** Joins: checkbot (~checkbot@157.146.251.23.bc.googleusercontent.com)
[03:20:48] <twkm> then so is my aside.
[03:21:23] <aod> Hi guys, how can i get the window id for a screenshot with `import`?
[03:21:32] <aod> help, thx
[03:22:03] <tirnanog> bn_work: can you show the script? I'd like to get a closer look at what's going on there.
[03:22:10] *** Quits: Guest7498 (~Guest@host202.190-137-39.telecom.net.ar) (Remote host closed the connection)
[03:22:37] <twkm> perhaps your screenshot program will emit it.
[03:23:08] <twkm> xdo might produce them.
[03:24:41] <aod> ok
[03:24:44] <aod> thanks
[03:24:46] *** Quits: konsolebox (~konsolebo@104.200.132.237) (Quit: Leaving)
[03:25:13] <Kaedenn> So the answer to my question is to remove the pipes.
[03:25:18] <Kaedenn> And instead use redirects.
[03:25:42] <larryv> that's one solution, if it fits your actual script
[03:26:05] <Kaedenn> Fortunately, I'm just looping over the content of a file, processing each line and extracting data from configured files
[03:26:46] <Enissay> I have a project folder in which I want to rename all files and folders and subfolders by replacing a specific word xxx to yyy for instance... Google drove me nuts and still didnt manage to do this :x ... I tried this but still no luck: `find . -iname '*xxx*' -print0 | xargs -0 rename 's/xxx/yyy/'`
[03:27:42] *** Joins: gamara (~gamara@cpe9050cade20e3-cm9050cade20e0.cpe.net.cable.rogers.com)
[03:28:47] <Kaedenn> `for f in *xxx*; do mv $f ${f/xxx/yyy}; done`, replace the `*xxx*` with whatever
[03:29:33] <larryv> !faq rename > Enissay
[03:29:33] <greybot> Enissay: https://mywiki.wooledge.org/BashFAQ/030 -- How can I rename all my *.foo files to *.bar, or convert spaces to underscores, or convert upper-case file names to lower case?
[03:29:49] <bn_work> tirnanog:  ok, only if you keep in mind it was a quick & dirty script :)
[03:29:53] <tirnanog> bn_work: ok.
[03:29:53] <Kaedenn> `for f in $(find . -iname ...); do mv $f ${f/xxx/yyy}; done` is another way, but beware spaces and things
[03:30:47] <Kaedenn> also, I suggest prepending your mv command with `echo` and ensuring the output is as desired. You can't undo a mv command easily; there's no undo button :)
[03:30:48] <tirnanog> Enissay: for a start, you should use depth-first recursion.
[03:30:51] *** Quits: Kyuzo68 (~Kyuzo@host-79-47-39-235.retail.telecomitalia.it) (Quit: Konversation terminated!)
[03:31:35] *** Joins: xmb (~xmb@178.197.213.215)
[03:31:37] <Kaedenn> tirnanog: why? if all filenames are unique (old and new), then that shouldn't be a concern
[03:32:25] <tirnanog> Kaedenn: because you are potentially renaming directories before attempting to process the files that were believed to reside within them.
[03:32:36] <tirnanog> that is also why -delete implies -depth in GNU find.
[03:32:51] <Kaedenn> ...oh, if you're renaming files and directories, yes
[03:33:04] <tirnanog> yes, that's what you said. "all files and folders and subfolders".
[03:33:16] <tirnanog> anyway.
[03:33:20] <phy1729> is there any find that has -delete that doesn't imply -depth
[03:33:34] <tirnanog> I would think the question is: is there any find that has -delete other than gnu find?
[03:33:49] <tirnanog> I haven't seen one, so I can't answer that.
[03:33:51] <Kaedenn> HP-UX find doesn't even have -delete :)
[03:33:58] <bn_work> tirnanog:  I'm invoking it via `mssh.bash -u jdoe -m ~/Documents/hostnames -c 'echo "jdoe ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/jdoe'`;  where hostnames = file with 1 host per line & $USER_pw.txt L1 = pw for server (assuming they are the same).    https://www.irccloud.com/pastebin/q9EBsc6O/mssh.bash
[03:34:01] <phy1729> FreeBSD and OpenBSD do
[03:34:04] <tirnanog> ah, ok.
[03:34:11] <xmb> mac os x find doesnt have -printf
[03:34:12] *** Quits: Marbug (~Marbug@94-226-144-213.access.telenet.be) (Ping timeout: 240 seconds)
[03:34:22] <larryv> ...no one is talking about printf
[03:34:33] <xmb> sorry, just about different finds lacking gnu stuff
[03:35:26] <xmb> its a very sad that, instead of having to use -printf or -delete, we have to sh compatibility .. :/
[03:36:03] <tirnanog> Kaedenn: find . -depth -name '*xxx*' -execdir bash -c 'for f; do echo mv "$f" "${f//xxx/yyy}"; done' bash-mv {} +
[03:36:09] <tirnanog> something like that.
[03:36:23] <Kaedenn> Enissay: ^
[03:37:01] <bn_work> I wonder if it's prompting for something and getting stuck
[03:38:07] <tirnanog> phy1729: I would assume not then. it wouldn't make sense otherwise, would it.
[03:38:14] <Enissay> Haha, good point, I was trying to solve that while you were discussing it
[03:38:32] *** Quits: _Vi (~vi0oss@2a0d:7c40:3000:1326::3) (Ping timeout: 240 seconds)
[03:38:45] <xmb> tirn, whats a find . -depth -name
[03:38:50] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[03:39:02] <bn_work> https://unix.stackexchange.com/a/395780 suggests using ssh -S (& perhaps prefixing it with space to prevent history logging temporarily), which obviously isn't good as it becomes visible via ps, but I can live with that on my local machine
[03:39:15] <tirnanog> bn_work: at a glance, your ssh commands can potentially compete with your while/read loop to consume data from stdin. that's not good.
[03:39:18] *** Quits: seninha (~chatzilla@user/seninha) (Remote host closed the connection)
[03:39:33] <tirnanog> bn_work: while read -r -u3 line; do ...; done 3<"$HOST"
[03:39:39] <tirnanog> (put it on a different file descriptor number)
[03:39:58] <bn_work> ah
[03:40:00] *** Quits: sa0 (~sa0sin@2a01:e0a:414:b360:9ff:d128:aded:6ba3) (Remote host closed the connection)
[03:40:14] <tirnanog> xmb: -depth has GNU find work from the leaf nodes of the tree upwards, rather than top-down.
[03:40:24] *** Joins: Jong (~Jong@2620:10d:c090:400::5:b29a)
[03:40:42] <xmb> yes but u dont give argument 1 or something
[03:40:45] *** Joins: sa0 (~sa0sin@2a01:e0a:414:b360:ec4b:710a:21ce:6bf9)
[03:40:46] <tirnanog> correct.
[03:40:50] <xmb> hm
[03:41:14] <xmb> thats there misunderstanding about me not understanding the english
[03:41:35] <bn_work> tirnanog: ok, now I get a bunch of `ssh: connect to host  port ____: Connection refused`
[03:41:39] <tirnanog> xmb: that's basically what "depth-first recursion is"
[03:41:46] <tirnanog> bottom-up, not top-down.
[03:41:59] <xmb> halfway understood
[03:42:17] <tirnanog> xmb: you can easily try it yourself if you want to see what the difference is. find dir vs find dir -depth.
[03:42:28] <tirnanog> just make sure it goes deeper than one level, otherwise you won't see any difference.
[03:42:59] <xmb> i tried but didnt get it
[03:43:06] <xmb> :) nevermind mate, ill get it somewhen else
[03:43:17] *** Quits: clarkk (~clarkk@2a00:23c7:d106:2600:9503:8932:cdd9:9528) (Remote host closed the connection)
[03:43:20] <tirnanog> diff -u <(find /etc) <(find /etc -depth)
[03:43:21] *** Quits: reset (~reset@user/reset) (Quit: reset)
[03:43:27] <bn_work> oh wait, it's not parsing in the list of hosts... why
[03:43:45] <tirnanog> xmb: note how /etc is the very _last_ path to be processed with -depth.
[03:43:57] <tirnanog> because it's the top-most node in the tree.
[03:44:31] *** Joins: bfortifi- (~bfortifie@user/bfortified)
[03:44:38] *** Joins: alienhead (~solas@user/alienhead)
[03:44:50] *** Joins: kj (~kj@kj.aerisnetwork.net)
[03:44:51] <tirnanog> bn_work: I'm not sure what you mean.
[03:45:13] <xmb>        -depth Process  each directory's contents before the directory itself.  The -delete action
[03:45:13] <xmb>               also implies -depth.
[03:45:14] <bn_work> tirnanog: when I trace it now it's not populating the host part for some reason
[03:45:15] *** Quits: bfortified (~bfortifie@user/bfortified) (Ping timeout: 256 seconds)
[03:45:26] <bn_work> (-x)
[03:45:52] *** Quits: sa0 (~sa0sin@2a01:e0a:414:b360:ec4b:710a:21ce:6bf9) (Ping timeout: 268 seconds)
[03:46:13] *** Quits: joo-_ (~joo-_@fsf/member/joo--) (Ping timeout: 240 seconds)
[03:46:19] <tirnanog> ok, but I can't see that can I.
[03:46:24] <tirnanog> it's difficult to comment.
[03:46:47] <bn_work> tirnanog: like it's printing out + sshpass -f jdoe_pw.txt ssh -tt -o ConnectTimeout=10 -n jdoe@ echo '"jdoe' 'ALL=(ALL)' NOPASSWD: 'ALL"' '|' sudo tee /etc/sudoers.d/jdoe
[03:47:03] <tirnanog> bn_work: by the way, I mistyped "$HOSTS" as "$HOST" earlier (obviously).
[03:47:10] <bn_work> note the lack of a host after the `jdoe@`
[03:47:42] <tirnanog> yes, that explains the symptom. in the absence of any other information, I cannot root-cause it for you.
[03:48:07] <tirnanog> we may be good but we're not that good.
[03:48:12] *** Joins: joo-_ (~joo-_@87-49-44-190-mobile.dk.customer.tdc.net)
[03:48:12] *** Quits: joo-_ (~joo-_@87-49-44-190-mobile.dk.customer.tdc.net) (Changing host)
[03:48:12] *** Joins: joo-_ (~joo-_@fsf/member/joo--)
[03:48:17] <bn_work> could putting it on a different fd be causing that?
[03:48:26] <tirnanog> no.
[03:48:31] *** Quits: chiselfuse (~chiselfus@user/chiselfuse) (Remote host closed the connection)
[03:48:31] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Remote host closed the connection)
[03:48:31] *** Quits: heldwin (~heldwin@user/asmodee) (Write error: Connection reset by peer)
[03:48:31] *** Quits: crabbedhaloablut (~crabbedha@user/crabbedhaloablut) (Write error: Connection reset by peer)
[03:48:31] *** Quits: adanwan_ (~adanwan@gateway/tor-sasl/adanwan) (Write error: Connection reset by peer)
[03:48:31] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Write error: Connection reset by peer)
[03:48:31] *** Quits: tejr (~tejr@user/tejr) (Write error: Connection reset by peer)
[03:48:31] *** Quits: ano (~ano@user/ano) (Write error: Connection reset by peer)
[03:48:31] *** Quits: noteness (~noteness@user/noteness) (Write error: Connection reset by peer)
[03:48:31] *** Quits: domicron (~domicron@gateway/tor-sasl/domicron) (Write error: Connection reset by peer)
[03:48:31] *** Quits: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072) (Write error: Connection reset by peer)
[03:48:31] *** Quits: fatal (~0x00@user/fatal) (Write error: Connection reset by peer)
[03:48:31] *** Quits: gxt_ (~gxt@gateway/tor-sasl/gxt) (Write error: Connection reset by peer)
[03:48:34] <tirnanog> unless you've misapplied the technique.
[03:48:59] <bn_work> oh wait, 3<"$HOSTS"
[03:49:27] *** Quits: gamara (~gamara@cpe9050cade20e3-cm9050cade20e0.cpe.net.cable.rogers.com) (Quit: Ping timeout (120 seconds))
[03:49:57] *** Joins: masoudd_ (~masoudd@user/masoudd)
[03:50:06] <bn_work> tirnanog: does line need to be lowercase?  I don't think so, it's just an arbitrary variable name, right?
[03:50:12] <tirnanog> but, also, as if you've gone to the trouble of making a function, it would make sense to parse the hostname as a function parameter, rather than hope that some variable in an upper scope happens to be defined at the time.
[03:50:29] *** Joins: noteness (~noteness@user/noteness)
[03:50:37] <tirnanog> it will make it easier to understand what the program does in the future.
[03:50:40] <tirnanog> pass*
[03:50:41] <bn_work> tirnanog: ok, so now it no longer errors but it now just hangs at the + read -r u3 Line part
[03:50:49] <tirnanog> -u3
[03:50:50] *** Joins: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072)
[03:50:52] *** Joins: gxt_ (~gxt@gateway/tor-sasl/gxt)
[03:50:53] *** Joins: adanwan (~adanwan@gateway/tor-sasl/adanwan)
[03:50:55] *** Joins: Brion (~Brion@gateway/tor-sasl/brion)
[03:50:58] <tirnanog> otherwise it's still reading from STDIN :p
[03:51:05] *** Quits: muffin_storm (~muffin_st@50-233-189-146-static.hfc.comcastbusiness.net) (Changing host)
[03:51:05] *** Joins: muffin_storm (~muffin_st@user/muffin-storm/x-3740471)
[03:51:09] <tirnanog> # help read | grep -- -u
[03:51:14] <shbot> tirnanog: read: read [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t timeout] [-u fd] [name ...]
[03:51:14] <shbot> tirnanog:     if the -u option is supplied.  The line is split into fields as with word
[03:51:14] <shbot> tirnanog: etc... ( http://ix.io/1SSl )
[03:51:22] <tirnanog> oh well.
[03:51:22] *** Joins: avesatanas[m] (~avesatana@2001:470:69fc:105::1:d083)
[03:51:26] <bn_work> ugh, did I misread that too, sigh
[03:51:27] *** Joins: crabbedhaloablut (~crabbedha@user/crabbedhaloablut)
[03:51:55] <tirnanog> as for lowercase, no.
[03:52:35] *** Joins: King_julian (~King_juli@41.1.141.23)
[03:52:38] <tirnanog> I personally prefer all lower-case but it doesn't matter. using all caps variable names is frowned upon here, though, unless they are intended to be exported.
[03:52:48] *** Joins: fatal (~0x00@user/fatal)
[03:53:10] *** Joins: Marbug (~Marbug@94-226-144-213.access.telenet.be)
[03:53:15] *** Joins: chiselfuse (~chiselfus@user/chiselfuse)
[03:53:17] *** Joins: tejr (~tejr@user/tejr)
[03:53:21] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[03:53:25] <tirnanog> !varcaps
[03:53:26] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[03:53:46] *** Quits: masoudd (~masoudd@user/masoudd) (Ping timeout: 272 seconds)
[03:55:31] *** Joins: ano (~ano@user/ano)
[03:55:56] <tirnanog> xmb: /foo/bar/baz is a child node of /foo/bar. with -depth, /foo/bar/baz is guaranteed to be traversed before /foo/bar is.
[03:56:54] *** Quits: King_julian (~King_juli@41.1.141.23) (Ping timeout: 250 seconds)
[03:56:54] <tirnanog> you _need_ that if renaming or deleting directories at the same time.
[03:57:34] *** Quits: jmdaemon (~jmdaemon@user/jmdaemon) (Ping timeout: 272 seconds)
[03:57:40] <xmb> i realized sir, for passing tree's easier
[03:57:41] <tirnanog> otherwise, let's say /foo/bar first gets renamed to /foo/quux. great. now where is /foo/bar/baz to be found? that's the problem.
[03:58:25] <xmb> i did earlier long ago pass tree's over with | rev or tac .. i guess -depth is for that
[03:58:32] <tirnanog> so you being with all the leaf nodes - nodes that don't have any children. then you iterate up to their respective parents.
[03:58:49] <tirnanog> until, eventuall you end up at the top.
[03:58:51] <bn_work> tirnanog: oh, I was just saying because it was Line vs line (not sure why I typed it that way)
[03:58:56] <xmb> k yes
[03:59:05] <bn_work> perhaps to distinguish it from a normal read param
[03:59:06] <tirnanog> bn_work: I know. it doesn't matter, as long as you consistently spell it that way.
[04:00:20] <tirnanog> xmb: another important component of the solution was to use -execdir. you don't want the string replacement operating on all of the path, just the final pathname component. -execdir handles that very nicely.
[04:01:04] <xmb> i didnt get the project details btw, i joined recently
[04:01:08] <tirnanog> ok.
[04:01:51] <tirnanog> the original problem was described as "I have a project folder in which I want to rename all files and folders and subfolders by replacing a specific word xxx to yyy for instance" (along with some broken code).
[04:02:12] <xmb> k nice
[04:02:20] <bn_work> tirnanog: oh great, now it just hangs at connect and ^C doesn't do anything :/
[04:02:33] <xmb> try c z
[04:02:39] <xmb> c \
[04:03:13] <xmb> so the solution was loop over find -depth -name results, yes
[04:03:14] <tirnanog> bn_work: I can't explain that. maybe use ssh -v so you can see how far it gets, at least.
[04:03:18] <xmb> good solution
[04:03:51] <xmb> whats the current cmdline looking like, if i may ask
[04:03:59] *** Quits: freep (~freepppp@193.92.35.32.dsl.dyn.forthnet.gr) (Read error: Connection reset by peer)
[04:04:11] <tirnanog> bn_work: although, looking at your script again ... you use input redirection at line #70. not a good idea.
[04:05:13] *** Joins: jmdaemon (~jmdaemon@user/jmdaemon)
[04:05:20] <tirnanog> bn_work: I mean, I don't see how that can interact correctly with sshpass, as sshpass surely needs to be in charge of file descriptor 0.
[04:05:26] *** Joins: dea_ (~dea@2a01:5ec0:7805:d724:2a8:1b8:eda8:2484)
[04:05:37] <tirnanog> you may have to specify your code as a parameter instead.
[04:05:48] *** Joins: akoana (~ah@user/akoana)
[04:06:46] <bn_work> if I kill the ssh process, it moves on and just starts getting `Permission denied, please try again.`
[04:07:25] <xmb> maybe it processes input by local machine then
[04:07:32] <bn_work> I wonder if I should take your suggestion and try to just directly add the ssh key
[04:07:32] <tirnanog> also, this script is chock full of other potential bugs. "$CMD" must be quoted, for one thing.
[04:08:00] <tirnanog> at the very least, quote "$CMD" and stop using input direction with sshpass.
[04:08:26] *** Joins: uuidNuniq (~weechat@222.67.5.151)
[04:08:40] <tirnanog> it make zero sense to try to feed a script to sshpass.
[04:09:11] *** Joins: computerworm110 (~quassel@user/computerworm110)
[04:09:50] <tirnanog> you could so something like this instead: remote_tasks() { do_whatever; }; sshpass ... ssh ... "$(declare -f remote_tasks); remote_tasks ${SCRIPT_PARAMS[@]@Q}"
[04:09:52] <Enissay> Kaedenn tirnanog: Thank you btw, sorry I got distracted <3
[04:10:10] <tirnanog> (as long as you know the remote login shell is bash, which it hopefully is)
[04:10:26] <bn_work> yes, like I said, it was quick and dirty :)  & probably should be quoted
[04:10:53] <tirnanog> time to stop mucking around and fix the defects.
[04:11:38] <xmb> if you use ${foo@Q} u must use eval
[04:11:48] <tirnanog> no.
[04:12:08] <xmb> i had the impression..
[04:12:08] <tirnanog> that will quote the parameters correctly for passing to the remotely propagated function.
[04:12:28] <xmb> x=abc ; for i in ${x@Q}; do echo $i ; done
[04:12:33] <bn_work> tirnanog: what is the "@Q" part of `${SCRIPT_PARAMS[@]@Q}`?
[04:12:38] <xmb> # x=abc ; for i in ${x@Q}; do echo $i ; done
[04:12:40] <shbot> xmb: 'abc'
[04:12:43] <tirnanog> xmb: you forget that the payload is _already_ being interpreted by a remote shell.
[04:12:54] <xmb> i havent still seen any code sir
[04:13:38] <xmb> x=( 1 2 ) ; printf %s-- ${x[@]@Q}
[04:13:40] <OnlineCop> The @Q quotes special characters.
[04:13:41] <tirnanog> it's simply incorrect. ssh passes a single string to be injected into the remote shell. eval doesn't come into this ... at all.
[04:13:42] <xmb> # x=( 1 2 ) ; printf %s-- ${x[@]@Q}
[04:13:44] <shbot> xmb: '1'--'2'--
[04:13:47] <xmb> see
[04:13:54] <xmb> u better...
[04:14:01] <tirnanog> see what?
[04:14:14] <xmb> # x=( 1 2 ) ; declare -a "dest=( ${x[@]@Q} ) ; printf %s-- "${dest[@]}"
[04:14:14] *** Quits: joo-_ (~joo-_@fsf/member/joo--) (Ping timeout: 250 seconds)
[04:14:21] <shbot> xmb: Missing terminating quote, bracket or keyword
[04:14:21] <xmb> it passes the ' quotes over instead of interpret
[04:14:27] <xmb> # x=( 1 2 ) ; declare -a "dest=( ${x[@]@Q} )" ; printf %s-- "${dest[@]}"
[04:14:29] <shbot> xmb: bash: declare: `'2' )': not a valid identifier
[04:14:29] <shbot> xmb: ( '1'--
[04:14:32] <xmb> hm
[04:14:39] <xmb> sorry i msg shbot
[04:14:57] <larryv> "<tirnanog>	xmb: you forget that the payload is _already_ being interpreted by a remote shell."
[04:14:59] <tirnanog> this is just random nonsense. let's get to the point.
[04:15:05] <xmb> i see
[04:15:06] <xmb> k
[04:15:18] <xmb> i didnt get, it gets interpreted, by shell
[04:15:21] <xmb> so no matter
[04:15:53] <xmb> but i was saying, if u use func ${foo[@]@Q} , it recieves the "'$foo'" not "$foo"
[04:16:05] *** Joins: joo-_ (~joo-_@80-62-117-227-mobile.dk.customer.tdc.net)
[04:16:05] *** Quits: joo-_ (~joo-_@80-62-117-227-mobile.dk.customer.tdc.net) (Changing host)
[04:16:05] *** Joins: joo-_ (~joo-_@fsf/member/joo--)
[04:16:25] *** Quits: computerworm110 (~quassel@user/computerworm110) (Ping timeout: 256 seconds)
[04:17:25] *** Quits: Murray7501 (~Murray@89.109-247-180.customer.lyse.net) (Quit: leaving)
[04:17:41] <tirnanog> ok, I made a mistake. I should have written ${args[*]@Q}. example ...
[04:17:44] <tirnanog> # args=('foo' 'bar baz' '$(echo injection attempt >&2)'); bash -c "printf '<%s>' ${args[*]@Q}"
[04:17:46] <shbot> tirnanog: <foo><bar baz><$(echo injection attempt >&2)>
[04:17:51] <tirnanog> that works.
[04:18:23] <tirnanog> but still, no eval.
[04:18:30] *** Quits: Masterphi (~Masterphi@user/masterphi) (Quit: Masterphi)
[04:19:01] <xmb> good :)
[04:19:10] <tirnanog> so, ${SCRIPT_PARAMS[*]@Q}, not [@].
[04:19:26] *** Quits: masoudd_ (~masoudd@user/masoudd) (Ping timeout: 250 seconds)
[04:19:53] <bn_work> tirnanog:  so why is it better as a function?
[04:20:15] <tirnanog> just makes it easier to inject arbitrarily complex shell code into a remote shell without havin to deal with seven levels of quoting hell.
[04:20:19] <xmb> yes so it works, with [*] instead of [@] for me too
[04:20:25] <tirnanog> seeing as you can no longer leverage the standard input to convey the code.
[04:20:46] <tirnanog> xmb: yeah. so either that or: $(printf '%q ' "${args[@]}")
[04:20:48] <xmb> # x=( '1 2' '$( printf foo >&2)' ) ; declare -a "x=( ${x[*]@Q} )"  ; printf %s-- "${x[@]}"
[04:20:50] <shbot> xmb: 1 2--$( printf foo >&2)--
[04:21:00] <xmb> declare -a parses quotes
[04:21:07] <xmb> then no need for eval
[04:21:24] <tirnanog> bn_work: not only that, it defends against connection interruption. as a function is a compound command, if the ssh connection is cut off before all the data has been conveyed, you won't end up executing partial code.
[04:21:32] <bn_work> ok, so I would need to put echo "jdoe ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/jdoe in that function definition?
[04:21:38] <tirnanog> yeah.
[04:22:38] *** Quits: LuKaRo (~LuKaRo@p200300dfa712f15a9a5d23a6a02b67bb.dip0.t-ipconnect.de) (Ping timeout: 260 seconds)
[04:23:06] <tirnanog> xmb: yeah, I get what you're saying. but it doesn't apply here. the goal was simply to requote some parameters for safe reinjection into a remote bash run by sshd.
[04:23:18] *** Joins: MonoL (~MonoL@user/MonoL)
[04:23:20] <tirnanog> or, at least, that was the goal of the example.
[04:23:33] <xmb> thank you, yes, bash interprets em of course
[04:23:40] *** Joins: LuKaRo_ (~LuKaRo@p57b157e5.dip0.t-ipconnect.de)
[04:23:46] *** Joins: z8z (~x@ac255238.ppp.asahi-net.or.jp)
[04:24:29] <tirnanog> besides, using printf %q is more compatible.
[04:24:42] <tirnanog> need >=5.0 on the remote side for @Q, don't we.
[04:24:51] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[04:24:55] <xmb> i hate backward compatibility
[04:25:10] *** Joins: thiras (~thiras@user/thiras)
[04:25:37] *** Joins: travaldo (~travaldo@159.203.88.148)
[04:25:56] *** Quits: z8z (~x@ac255238.ppp.asahi-net.or.jp) (Max SendQ exceeded)
[04:26:16] <xmb> printf %q is very bash too, isnt it
[04:26:24] *** Joins: z8z (~x@ac255238.ppp.asahi-net.or.jp)
[04:26:55] <tirnanog> yes, it is. but, at least, it's been around for a long time.
[04:27:03] <xmb> aye
[04:27:11] *** Joins: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98)
[04:27:30] *** Quits: xx (~xx@user/xx) (Ping timeout: 256 seconds)
[04:28:02] *** Quits: z8z (~x@ac255238.ppp.asahi-net.or.jp) (Max SendQ exceeded)
[04:28:05] <OnlineCop> I'd like to highlight whitespace so I can see where a line is using tabs vs. spaces. Spaces color fine with `printf '\e[43m%s\e0m' $' '` but for some reason, tabs don't highlight. TERM=xterm-256color
[04:28:30] *** Joins: z8z (~x@ac255238.ppp.asahi-net.or.jp)
[04:29:11] <OnlineCop> (yes, typo: \e0m should be \e[0m)
[04:29:36] *** Joins: Murray7501 (~Murray@89.109-247-180.customer.lyse.net)
[04:30:30] <tirnanog> I don't think it could be done. you could pre-process the text, perhaps.
[04:30:38] <xmb> you realize, if u have lots of single data, that x thousand printfs will be slow ?
[04:30:52] <xmb> i had once reverse video for cmd output on the term, may help
[04:31:11] <OnlineCop> Ah. An old forum post states that on xterm, TAB moves the cursor without touching the skipped-over positions so background color is unchanged.
[04:31:20] <tirnanog> that is, some terminal emulators may be able to do it. I don't think it's anything standard, though.
[04:31:46] <xmb> you can try reverse video for the tabs
[04:32:20] <xmb> no it doesnt work
[04:32:25] <tirnanog> tput rev; printf '\t' tput sgr0
[04:32:34] <tirnanog> doesn't work in my vte-based terminal.
[04:32:47] <tirnanog> oops, "; tput sgr0", I mean.
[04:33:10] *** Quits: FluffyMask (~masque@user/fluffymask) (Quit: WeeChat 3.4)
[04:33:28] <xmb> printf \\e[7m\\tx\\e[m\\n # with reverse it doesnt work too, only the x gets highlighted
[04:33:46] <xmb> i've seen when reverse video on the tabs and line endings dont get .. marked
[04:34:20] <OnlineCop> It's alright. If it's simply moving the cursor without rendering it, I'll just not highlight tabs.
[04:35:23] <tirnanog> it's either that or converting to, say, 8 spaces of a different colour, I suppose.
[04:35:34] *** Quits: rcernin (~rcernin@101.189.129.123) (Ping timeout: 272 seconds)
[04:35:40] <xmb> tabs are dyn length
[04:36:04] <OnlineCop> 8 spaces works... as long as the 1st of those tabs is at a tab stop.
[04:36:06] <xmb> count the chars in line, at where the tab ends
[04:36:46] <pj> 8-(column % 8) I think.
[04:36:58] <tirnanog> ok. well, maybe use expand(1) then.
[04:37:00] <pj> or somethign like that.
[04:37:00] <xmb> cool
[04:37:26] <tirnanog> although, I have no idea how one would handle a distinct colour in that case.
[04:37:56] <pj> also you should not be hard-coding escape sequences
[04:37:59] <pj> !tput
[04:37:59] <greybot> Do NOT hardcode terminal escape sequences. Use tput with the sequence names from man terminfo to get the right code for your terminal. Eg. red=$(tput setaf 1); echo "Hello ${red}world!" # Variables example: http://to.lhunath.com/bashlib#L210 more info at http://www.gnu.org/software/termutils/
[04:38:07] *** Joins: luckiswithme (~luckiswit@110-175-171-214.static.tpgi.com.au)
[04:39:24] <OnlineCop> Don't worry; I'm not. I was using the short version simply for brevity.
[04:39:57] *** Quits: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66) (Remote host closed the connection)
[04:40:17] *** Joins: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66)
[04:41:29] *** Quits: knstn (~knstn@ppp-94-66-57-121.home.otenet.gr) (Quit: leaving)
[04:42:17] *** Quits: dea_ (~dea@2a01:5ec0:7805:d724:2a8:1b8:eda8:2484) (Ping timeout: 240 seconds)
[04:42:20] *** Joins: SteveR (~SteveR@2001:1900:2100:2807:ed17::20e)
[04:42:23] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[04:42:48] *** Joins: rcernin (~rcernin@101.189.129.123)
[04:42:52] *** Quits: Gooberpatrol_66 (~Gooberpat@user/gooberpatrol66) (Remote host closed the connection)
[04:43:52] *** Joins: Gooberpatrol66 (~Gooberpat@user/gooberpatrol66)
[04:46:16] *** Joins: Betal (~Betal@user/betal)
[04:46:45] <bn_work> tirnanog:  if I'm not using the "send script" functionality part in my script for now, can I leave out the `${SCRIPT_PARAMS[*]@Q}` part? since in my case I'm just defining and running remote_tasks which is just echo "jdoe ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/jdoe; , yes?
[04:46:58] *** Quits: bomb-on (~bomb-on@user/bomb-on) (Read error: Connection reset by peer)
[04:47:08] <tirnanog> correct. if you don't need to pass any parameters to your function, you can leave that out.
[04:47:16] *** Joins: stanlib (~archblade@user/stanlib)
[04:47:21] <bn_work> or I guess I can leave out the -c part
[04:47:30] *** Joins: bomb-on (~bomb-on@user/bomb-on)
[04:47:35] <bn_work> just didn't want the original command to be misinterpreted twice
[04:47:46] <tirnanog> which -c are you referring to, to be clear?
[04:48:29] <tirnanog> ssh takes the last operand as the code to be conveyed, if that's what you mean. -c was for bash itself.
[04:48:54] <tirnanog> you won't need -c unless you meant something else altogether.
[04:49:30] *** Quits: LuKaRo_ (~LuKaRo@p57b157e5.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[04:50:00] <bn_work> hmm, getting `command-line: line 0: Bad configuration option: connectiontimeout` now, sigh
[04:50:06] *** Joins: computerworm110 (~quassel@user/computerworm110)
[04:50:22] <bn_work> the -c I specify during invocation
[04:50:25] <xmb> u  need it right case
[04:50:46] <bn_work> ssh -tt -o ConnectionTimeout=10 isn't that right?
[04:50:56] <xmb> that looks fine maybe
[04:50:59] <bn_work> not sure why it got reverted?
[04:51:01] <tirnanog> ConnectTimeout
[04:51:11] <tirnanog> man ssh_condig
[04:51:14] <tirnanog> er, ssh_config
[04:51:20] *** Joins: sa0 (~sa0sin@2a01:e0a:414:b360:ec4b:710a:21ce:6bf9)
[04:51:34] <tirnanog> it was never right to begin with.
[04:52:07] <bn_work> ah
[04:52:26] *** Quits: sinaowolabi (~SinaOwola@160.152.106.73) (Ping timeout: 256 seconds)
[04:53:00] <xmb> i have this ssh issue, with debian, my ssh from to debian times out always
[04:53:06] <xmb> i have keep alive in everywhere
[04:53:57] *** Quits: zoe (~zoe@fsf/member/zoe) (Ping timeout: 240 seconds)
[04:54:41] <xmb> client_loop: send disconnect: Broken pipe
[04:54:42] <xmb> again
[04:54:47] <xmb> on long idle
[04:55:24] *** Quits: jmdaemon (~jmdaemon@user/jmdaemon) (Ping timeout: 240 seconds)
[04:55:26] <tirnanog> you might be losing a connection state somewhere along the path (think: NAT).
[04:55:29] *** Joins: LuKaRo (~LuKaRo@p57b157e5.dip0.t-ipconnect.de)
[04:55:45] <tirnanog> then again, that's exactly what keep alive is supposed to defend against.
[04:56:10] *** Quits: sa0 (~sa0sin@2a01:e0a:414:b360:ec4b:710a:21ce:6bf9) (Ping timeout: 268 seconds)
[04:56:24] <bn_work> grr, it keeps "hanging" when it connects and I have to kill the process & it goes to the next one and does the same thing
[04:56:28] *** Quits: computerworm110 (~quassel@user/computerworm110) (Ping timeout: 272 seconds)
[04:56:33] *** Quits: Murray7501 (~Murray@89.109-247-180.customer.lyse.net) (Quit: leaving)
[04:56:51] <xmb> can i see code
[04:57:03] *** Joins: computerworm110 (~quassel@user/computerworm110)
[04:57:24] *** Quits: dsrt^ (~dsrt@50.232.121.75) (Ping timeout: 240 seconds)
[04:57:40] <akoana> xmb: using ServerAliveInterval 60 and ServerAliveCountMax 10000 in ~/.ssh/config were helpful in similar cases for me...
[04:57:57] <xmb> thank you
[05:00:09] <xmb> ClientAliveInterval i guess in sshd_config
[05:00:16] *** Joins: Murray7501 (~Murray@89.109-247-180.customer.lyse.net)
[05:00:27] <bn_work> xmb:  invoking via `mssh.bash -u jdoe -m hostnames` https://www.irccloud.com/pastebin/Ja7GiJm2/mssh_v2.bash
[05:03:10] <xmb> i see more uppercase useage and old style sh/bash than real code
[05:03:27] <xmb> if u tell me what u're trying to do i can do other code :p
[05:03:49] <bn_work> like I'll get prompted `foo.domain.com, \n [sudo] password for jdoe:` and nothing I type echoes and hitting enter or any other key does anything
[05:03:50] *** Quits: computerworm110 (~quassel@user/computerworm110) (Quit: If this happens without warning, it's not you, it's my Internet.  :()
[05:04:42] <xmb> u sure u do host $host.domain.com ? u have hardcoded other domain than domain.com there ? or is *.domain.com special
[05:04:50] <tirnanog> you're probably getting closer but I suspect it's because you use sshpass at all. it's designed to interact with ssh itself. not necessarily the subsequent invocation of sudo.
[05:05:20] <bn_work> xmb: domain.com is just sanitization, s/domain.com/yourdomain/
[05:05:22] <tirnanog> if so, I don't have any concrete ideas as to how to deal with that.
[05:05:25] <xmb> k
[05:05:35] <xmb> so its a big bug mess imho
[05:05:42] <xmb> lemme code a fresh one
[05:05:46] *** Joins: idego (~idego@user/idego)
[05:05:58] <bn_work> so don't use sshpass?
[05:06:00] <xmb> but, what are trying there i dont get
[05:06:16] <tirnanog> bn_work: but then you're back to the problem of not being able to use key auth yet.
[05:06:24] <xmb> can u use rsa passless keys with ssh ?
[05:06:39] *** Joins: dsrt^ (~dsrt@50.232.121.75)
[05:06:41] <tirnanog> no keys have been authorized yet. that's the problem.
[05:06:43] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[05:06:46] <xmb> why not, doesnt authorized_keys in ~/.ssh/ mode 600 work
[05:06:47] <tirnanog> and there are whole bunch of hosts to operate on.
[05:06:51] <xmb> k
[05:06:53] <tirnanog> it does work. that's not the point.
[05:07:05] <tirnanog> no keys are yet authorized.
[05:07:09] <akoana> !sed -i
[05:07:11] <tirnanog> that's why sshpass is being used at all.
[05:07:15] <xmb> !sed-i
[05:07:15] <greybot> sed -i isn't portable; standard sed doesn't have it at all, GNU sed -i has an optional argument, and BSD sed -i has a mandatory argument. See !editing and <https://mywiki.wooledge.org/BashFAQ/021> for advice
[05:07:27] <xmb> so make it not ask for hostnames
[05:07:28] <tirnanog> bn_work: I have an idea.
[05:07:30] <xmb> make it auto dedicated work
[05:07:54] *** Quits: lapsi (~lapsi@85.14.25.194) (Ping timeout: 260 seconds)
[05:08:28] <tirnanog> bn_work: actually, no, I don't.
[05:08:53] <xmb> so what are u trying to accomplish with that script dude, i see host host.domain.com nothing else or something
[05:09:00] *** Quits: LuKaRo (~LuKaRo@p57b157e5.dip0.t-ipconnect.de) (Ping timeout: 240 seconds)
[05:09:01] <xmb> u trying to resolve domains on remote hosts ?
[05:09:29] <bn_work> xmb: what tirnanog said, I'm just trying to mass ssh to a bunch of hosts that don't have SSH keys setup yet to bootstrap them for use with saltstack
[05:09:39] <bn_work> https://docs.saltproject.io/en/latest/topics/ssh/index.html
[05:10:07] <bn_work> xmb:  that part just allows the host list to be hostnames without the domain suffix
[05:10:09] <xmb> what about this salt-ssh
[05:10:19] *** Quits: tomreyn (~tomreyn@megaglest/team/tomreyn) (Ping timeout: 250 seconds)
[05:10:23] <xmb> code in var is ok for passment
[05:10:32] <bn_work> xmb:  it's kinda nonsensical though the way it's written though
[05:10:42] <tirnanog> bn_work: ok.
[05:10:49] <xmb> u can do askpass -p ssh ssh bash -c "$my_code"
[05:11:09] <xmb> for host in $( < hosts ) ; do .. $host ; done
[05:11:09] <tirnanog> bn_work: keep sshpass, but deliver code to the remote host that does something like: printf %s 'password' | sudo -S ...
[05:11:19] <tirnanog> so that you don't rely on the client supplying the sudo password.
[05:11:23] <xmb> u just form bash code to remote-run by the script
[05:11:45] <tirnanog> for to iterate over lines? come on now.
[05:11:53] <tirnanog> it's not the problem, anyway.
[05:12:07] <xmb> well no but
[05:12:12] <xmb> whats the problem
[05:12:34] <xmb> the host code is shit, u form good code, as arg or stdin to the script, then it sshpass ssh host bash -c "$code"
[05:12:34] <xmb> done
[05:12:38] <tirnanog> automating the interaction with ssh to supply a password while _also_ automating the interaction with sudo remotely to update a sudoers policy.
[05:12:41] <tirnanog> it's not as simple as you think.
[05:12:44] <xmb> u didnt listen to !caps
[05:12:54] <xmb> hm
[05:12:59] <xmb> yea sudo auto
[05:13:03] <xmb> with askpass u can
[05:13:04] <xmb> like sshpass
[05:13:06] <xmb> just for sudo
[05:13:12] <tirnanog> anyway, sudo -S on the remote side should help. that will decouple it from the fact that sshpass controls the input of ssh(1).
[05:13:25] <xmb> yea if -S accepts pass then that
[05:13:26] <tirnanog> bn_work: do you understand?
[05:13:44] <bn_work> tirnanog: I think so...
[05:14:22] <tirnanog> basically, stop trying to make the client cater to two conflicting requirements. deal with sudo in the remote context.
[05:14:41] <xmb> well good luck, i tried
[05:15:09] <tirnanog>  -S, --stdin [...] read the password from the standard input instead of using the terminal device.
[05:15:09] <bn_work> tirnanog: just trying to think of how to rewrite remote_tasks() so I can still pipe & tee, yet pass the sudo passwd via sudo -S
[05:15:59] *** Joins: junebug (~junebug@2600:1700:3db0:2540:fe6d:12d2:2acc:ce5f)
[05:16:14] <bn_work> remote_tasks() { printf %s 'password' | sudo -S bash -c 'echo "${USER} ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/$USER;' };  perhaps?
[05:16:43] <tirnanog> yes, that looks good.
[05:16:53] <tirnanog> actually, no.
[05:17:00] <bn_work> will that nested sudo work?
[05:17:08] <bn_work> or it's unnecessary?
[05:17:20] <bn_work> since bash is already sudo-ed?
[05:17:28] <xmb> uh
[05:17:37] <xmb> u run that sudo bash -c '$USER' will be root
[05:18:07] <bn_work> wouldn't it get substituted before then?
[05:18:19] <bn_work> this is being executed in a script
[05:18:29] <xmb> in that function, no its in single quotes
[05:18:34] <tirnanog> remote_tasks() { printf %s 'password' | sudo tee "/etc/sudoers.d/$USER" <<<"${USER} ALL=(ALL) NOPASSWD: ALL"; }
[05:18:54] <tirnanog> no, that's nonsense. sorry.
[05:19:06] <tirnanog> let's try that again.
[05:19:09] *** Joins: LuKaRo (~LuKaRo@p200300dfa712f14b7d1690af90762b47.dip0.t-ipconnect.de)
[05:19:09] *** Quits: alienhead (~solas@user/alienhead) (Quit: Konversation terminated!)
[05:19:33] <xmb> remote() { str=$USER\ NOPASSWD:\ ALL; <<<pass sudo -S bash -c 'printf %s "$0" >/etc/sudo.d/"$1"' "$str" "$USER" ; }
[05:21:07] <tirnanog> remote_tasks() { printf %s 'password' | sudo -S sh -c 'echo "$1 ALL=(ALL) NOPASSWD: ALL" > "/etc/suoders.d/$1"' sh "$USER"; }
[05:21:31] *** Quits: xmb (~xmb@178.197.213.215) (Quit: yea)
[05:21:37] <tirnanog> total headache, but that I think that should do it.
[05:21:41] <bn_work> I wonder if I should just shove the SSH key in now vs mucking with this since that is what really needs to happen (not sure if that would be any simpler)
[05:21:55] <tirnanog> well, yeah, I did say that at the beginning.
[05:22:00] *** Joins: YHVH (~yhvh@c-98-235-30-231.hsd1.pa.comcast.net)
[05:22:06] <tirnanog> the sooner you can stop using sshpass the better.
[05:22:22] <bn_work> how would I do so?  the docs I linked weren't clear on that
[05:22:37] <bn_work> I guess they assumed one had remote root access
[05:23:25] *** Quits: bomb-on (~bomb-on@user/bomb-on) (Quit: aллилѹіа!)
[05:23:27] <tirnanog> just have the function write - or append - the correct key to ~/.ssh/authorized_keys.
[05:23:40] <tirnanog> even if it's not root's, it will make things easier henceforth.
[05:23:44] <bn_work> like the only reason I'm doing this is because I'm assuming I need to per the note at the bottom of https://docs.saltproject.io/en/latest/topics/ssh/index.html#salt-ssh-roster
[05:24:19] <bn_work> since doing anything that's not for that user will need sudo/root access
[05:24:38] <bn_work> ex:  adding SSH key for say a new 'salt' user
[05:24:53] <tirnanog> just take it one step at a time. auth a damned key for the user, then you can stop using sshpass, which immediately removes an obstacle.
[05:25:21] <tirnanog> either way, the above code should work.
[05:26:51] <tirnanog> a simple printf '%s\n' '... key details here ...' >> ~/.ssh/authorized_keys would suffice as the remote payload.
[05:27:45] <tirnanog> having done that, you will no longer have to content with sshpass and sudo -S being at odds with one another.
[05:27:48] <tirnanog> contend*
[05:28:36] *** Joins: bertvvvs (~bertvvvs@user/bertvvvs)
[05:29:03] <tirnanog> like, you could then just feed the sudo password to ssh itself, without sshpass getting in the way.
[05:30:55] <bn_work> would ssh-copy-id also generate it?  it's been a while, I remember there was ssh-keygen
[05:31:14] <tirnanog> yes, but it will want a password ...
[05:31:28] <tirnanog> you could go around in circles on this. you already have sshpass working so you might as well use it deploy the key.
[05:31:36] <tirnanog> just get it done.
[05:31:46] <tirnanog> all becomes easier from thereon.
[05:31:48] <bn_work> so I could leave out sshpass at that point?
[05:32:05] <tirnanog> yes. obviously, if key auth is working, there is no utility in trying to pump passowrds into ssh(1).
[05:32:20] <tirnanog> (sudo is a totally separate concern)
[05:32:30] *** Quits: \\Mr_C\\ (~mrc@cpe-75-187-191-230.neo.res.rr.com) (Quit: (Read error: Connection reset by beer, You Phuq With Me, You Phuq With The B0rg.0rg))
[05:35:42] <tirnanog> also, I would drop the -tt options. I have no idea whether sshpass tolerates them the man page makes it clear that it does not demand them.
[05:36:38] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:36:45] *** Quits: aod (~a@190-207-87-44.dyn.dsl.cantv.net) (Quit: leaving)
[05:37:25] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:5a9:1bfd:dfd5:df91)
[05:37:25] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:5a9:1bfd:dfd5:df91) (Changing host)
[05:37:25] *** Joins: skapata (~Skapata@user/skapata)
[05:39:50] <tirnanog> bn_work: https://termbin.com/gsgu
[05:40:02] <tirnanog> after that, you should hopefully be able to kiss sshpass goodbye.
[05:41:07] <tirnanog> well, $user@$host. you get the point.
[05:44:35] *** Joins: jmdaemon (~jmdaemon@user/jmdaemon)
[05:52:39] *** Parts: idego (~idego@user/idego) ()
[05:52:45] *** Quits: SteveR (~SteveR@2001:1900:2100:2807:ed17::20e) (Ping timeout: 256 seconds)
[05:54:33] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[05:54:33] *** Joins: computerworm110 (~quassel@user/computerworm110)
[05:57:05] *** Quits: MonoL (~MonoL@user/MonoL) (Quit: WeeChat 3.3)
[06:00:38] *** Quits: Codaraxis_ (~Codaraxis@user/codaraxis) (Ping timeout: 260 seconds)
[06:05:53] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:07:46] *** Quits: Hackerpcs (~user@user/hackerpcs) (Quit: Hackerpcs)
[06:10:51] *** Joins: Hackerpcs (~user@user/hackerpcs)
[06:14:17] *** Quits: igemnace (~ian@user/igemnace) (Quit: WeeChat 3.4)
[06:14:17] <bn_work> tirnanog: thanks, I think that seems to be have added the keys.  so... when you say I can now just directly pass in the sudo pw to ssh, you mean like https://unix.stackexchange.com/a/395780 or in the function directly as you suggested earlier?
[06:15:03] <tirnanog> bn_work: I meant that you should now be able to do printf '%s\n' 'sudopassword' | ssh ... 'sudo -S ...' without issue.
[06:15:29] <tirnanog> because you don't need sshpass anymore. right?
[06:15:41] <bn_work> right
[06:15:59] *** Quits: dsrt^ (~dsrt@50.232.121.75) (Remote host closed the connection)
[06:16:37] *** Joins: Inline__ (~Inline@p200300cd470c9c002556fbf58fa37daf.dip0.t-ipconnect.de)
[06:16:50] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[06:17:10] *** Joins: thiras (~thiras@user/thiras)
[06:17:53] <tirnanog> you might now want to populate root's authorized_keys but that, of course, is up to you.
[06:19:02] *** Quits: Inline (~Inline@p200300cd4709fe0020393da7e35c629b.dip0.t-ipconnect.de) (Ping timeout: 250 seconds)
[06:19:37] *** Quits: computerworm110 (~quassel@user/computerworm110) (Ping timeout: 240 seconds)
[06:22:14] <bn_work> yeah.. I think these salt-ssh instructions are implying that I would have to manually do that somehow
[06:24:07] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353)
[06:25:48] *** Joins: Nintendo (~smb3@user/great)
[06:33:45] *** Joins: aod (~a@190-207-87-44.dyn.dsl.cantv.net)
[06:35:15] *** Joins: Haxxa (~Haxxa@202-130-210-100.ip4.superloop.com)
[06:35:32] <Haxxa> Are questions related to sh allowed?
[06:36:36] <Friithian> oh yes
[06:38:18] *** Quits: akoana (~ah@user/akoana) (Quit: leaving)
[06:38:39] <Haxxa> variable replacement in iptable commands should variables be defined like this: IP-BLOCK=192.168.5.0/24 or like this: IP-BLOCK="192.168.5.0/24"
[06:38:59] <Haxxa> This is the command in question: /sbin/iptables -A INPUT -i eth0 -p tcp --destination-port 67 -s $IP-BLOCK -j DROP
[06:39:26] <emanuele6> you can't have a variable with a `-' in the name.
[06:39:28] *** Joins: computerworm110 (~quassel@user/computerworm110)
[06:39:41] <emanuele6> not in bash and especially not in posix
[06:39:49] <Haxxa> Ok let me fix that
[06:40:00] <emanuele6> # IP-BLOCK=abc
[06:40:03] <shbot> emanuele6: bash: IP-BLOCK=abc: command not found
[06:40:31] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[06:41:03] <emanuele6> !varcap
[06:41:04] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[06:41:18] <emanuele6> also avoid naming custom script variables in all uppercase
[06:41:52] <Haxxa> So this would be better ip_block
[06:42:19] <emanuele6> first of all, that would actually work because it does not have a - in the name
[06:42:22] *** Joins: Masterphi (~Masterphi@user/masterphi)
[06:42:26] <emanuele6> but yes, that is better :)
[06:42:57] *** Quits: Masterphi (~Masterphi@user/masterphi) (Client Quit)
[06:44:05] *** Joins: Codaraxis (~Codaraxis@user/codaraxis)
[06:44:38] *** Quits: wierzbowski (~wierzbows@dynamic-046-114-155-024.46.114.pool.telefonica.de) (Ping timeout: 256 seconds)
[06:44:48] *** Quits: luckiswithme (~luckiswit@110-175-171-214.static.tpgi.com.au) (Remote host closed the connection)
[06:45:45] *** Quits: bertvvvs (~bertvvvs@user/bertvvvs) (Quit: Y'all have a nice day.)
[06:46:19] *** Quits: randm (~randm@2001:19f0:5:1de9:5400:3ff:fe98:1bdd) (Quit: Leaving.)
[06:46:31] *** Joins: on^ (~on@50.232.121.75)
[06:46:56] *** Joins: randm (~randm@mx.rayprimus.com)
[06:47:17] <Haxxa> What about my variable subsitution do I need the comma's?
[06:47:33] *** Quits: computerworm110 (~quassel@user/computerworm110) (Quit: If this happens without warning, it's not you, it's my Internet.  :()
[06:47:34] <emanuele6> commas?
[06:47:35] <Haxxa> Sorry not comma's, I meant quotes.
[06:47:35] <tirnanog> what commas?
[06:47:39] <tirnanog> yes, you should use quotes.
[06:47:48] <emanuele6> you should quote the expansion, yes
[06:48:01] <emanuele6> for the assignment it doesn't matter
[06:48:04] *** Joins: computerworm110 (~quassel@user/computerworm110)
[06:48:22] <emanuele6> ip_block="192.168.5.0/24" and ip_block=192.168.5.0/24  are both perfectly fine
[06:48:37] <Haxxa> cool and the command: /sbin/iptables -A INPUT -i eth0 -p tcp --destination-port 67 -s $ip_block -j DROP
[06:48:50] <emanuele6> no, there it is not good
[06:49:03] <emanuele6> you should quote that expansion
[06:49:10] <emanuele6> /sbin/iptables -A INPUT -i eth0 -p tcp --destination-port 67 -s "$ip_block" -j DROP
[06:49:16] <Haxxa> thanks
[06:49:23] <emanuele6> you are welcome
[06:49:44] *** Quits: rcernin (~rcernin@101.189.129.123) (Ping timeout: 256 seconds)
[06:49:53] <Haxxa> Out of interest why is it best to quote it?
[06:50:04] <tirnanog> while this has nothing to do with the shell, you might also consider using iptables-restore to load a complete ruleset atomically. you can still use variable expansions (within a here document). look up Jan Engelhardt's "Towards a Perfect Ruleset" for more on that.
[06:50:35] <Haxxa> tirnanog yep using ip tables restore, thankfully came included on this embedded PLC
[06:50:45] <emanuele6> Haxxa: "$ip_block" simply tells the shell to pass the content of $ip_block to the command
[06:50:50] *** Quits: skapata (~Skapata@user/skapata) (Read error: Connection reset by peer)
[06:51:01] <tirnanog> ok. well it seemed that you were exectuing iptables commands successively, which is very brittle. so I just thought I'd mention it.
[06:51:29] <emanuele6> while $ip_block process the variables with many steps before actually passing some arguments
[06:51:44] <Haxxa> thanks for all the help
[06:51:59] *** Quits: millido (~millido@84.210.150.128) (Read error: Connection reset by peer)
[06:52:51] <tirnanog> if you don't quote, the variable is expanded then subjected to a around of word splitting and - potentially - pathname expansion. you don't want that.
[06:53:16] <emanuele6> $ip_block is first split by spaces (actually by the characters in the IFS variable), then every splitted word is pathname expanded (e.g. *.mp4 converts to all files that end in .mp4 in the current directory), etc. and then all the resulting words gets passed to the command instead of one single argument
[06:53:25] <tirnanog> granted, neither of those things would happen for that particular value. but it's not the point.
[06:54:10] <emanuele6> another difference is that if the variable is empty, "$ip_block" passes an empty string, while $ip_block passes nothing
[06:54:14] <tirnanog> another consequence of not quoting is that an empty variable would not constitute a word at all, resulting in what would otherwise be a distinct argument to be conveyed to iptables being elided.
[06:54:16] <tirnanog> this, too, is bad.
[06:54:26] <emanuele6> as if you ran: /sbin/iptables -A INPUT -i eth0 -p tcp --destination-port 67 -s -j DROP
[06:54:29] <tirnanog> well, emanuele6 put it more plainly.
[06:55:02] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:55:03] <emanuele6> which may mess up error reporting or run a program in unwanted manner because the options were not passed correctly
[06:55:18] <tirnanog> all of which is to say: you didn't wanna do it like that!
[06:55:39] <emanuele6> you can read more about it here probably https://mywiki.wooledge.org/Quotes
[06:55:44] <emanuele6> but the tldr is
[06:55:46] <emanuele6> !qefs
[06:55:46] <greybot> "$Quote" "$Every" "${F:-ing}" "$Substitution"
[06:57:08] *** Joins: King_julian (~King_juli@41.1.141.23)
[06:57:39] <emanuele6> !meta qefs
[06:57:39] <greybot> kurahaupo 1645905948(2022-02-26) learn "$Quote" "$Every" "${F:-ing}" "$Substitution"
[06:57:46] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[06:58:10] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[06:58:34] <tirnanog> !quoting
[06:58:35] <greybot> Quoting 101: Always use "double quotes" around expansions: "$foo", "$(awk ..)". Use 'single quotes' to prevent even bash expansion: awk '$1 == foo'. You "can 'nest'" quotes but can't put literal single quotes in single quotes; so use: 'Don'\''t forget to quote!'.
[06:58:38] <tirnanog> this one doesn't get much love.
[06:59:12] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353)
[06:59:42] <tirnanog> but there's also quotewhen and a bunch of others.
[07:00:00] <larryv> !searchkeys quote
[07:00:00] <greybot> larryv: 27 matches found: awkquote, bashquote, htmlquote, jsonquote, mysqlquote, noquote, noquotes, quote, quotebreak, quotedemo, quotenotwhen, quoteoptional, quotes, quotesoptional, quoteswhen, quotewhen, quotewhennot, quotewhy, requote, shellquote, ...
[07:00:03] <wiscii> quoth the raven
[07:00:09] <emanuele6> !quotewhy
[07:00:09] <greybot> Unquoted $expansions (except for in keywords or assignments) are always bugs (subjected to word splitting and pathname expansion) and are also twice as slow to expand. If you think you *need* an unquoted expansion: You're wrong. Write better logic or learn about arrays or functions.
[07:01:56] *** Quits: King_julian (~King_juli@41.1.141.23) (Ping timeout: 250 seconds)
[07:06:58] *** Joins: lotharn (~kvirc@174-26-203-222.phnx.qwest.net)
[07:07:37] *** Joins: millido (~millido@84.210.150.128)
[07:08:04] *** Joins: igemnace (~ian@user/igemnace)
[07:08:07] *** Quits: kurahaupo (~kurahaupo@pa49-197-102-98.pa.qld.optusnet.com.au) (Ping timeout: 256 seconds)
[07:08:40] *** Joins: wierzbowski (~wierzbows@dynamic-046-114-172-041.46.114.pool.telefonica.de)
[07:11:23] *** Joins: xmb (~xmb@178.197.213.215)
[07:11:25] *** Joins: rcernin (~rcernin@2001:8003:6803:db00:a86e:5fb9:d24:a3d3)
[07:13:51] *** Quits: computerworm110 (~quassel@user/computerworm110) (Quit: If this happens without warning, it's not you, it's my Internet.  :()
[07:14:11] *** Joins: computerworm110 (~quassel@user/computerworm110)
[07:14:46] *** Joins: rcernin_ (~rcernin@101.189.129.123)
[07:16:32] *** Quits: rcernin (~rcernin@2001:8003:6803:db00:a86e:5fb9:d24:a3d3) (Ping timeout: 240 seconds)
[07:16:32] *** Quits: xmb (~xmb@178.197.213.215) (Read error: Connection reset by peer)
[07:17:22] *** Quits: computerworm110 (~quassel@user/computerworm110) (Client Quit)
[07:17:53] *** Joins: computerworm110 (~quassel@user/computerworm110)
[07:18:37] *** Quits: duuude (~user@user/duuude) (Ping timeout: 268 seconds)
[07:20:20] *** Quits: jos1 (~jos3@dyndsl-091-248-053-123.ewe-ip-backbone.de) (Ping timeout: 256 seconds)
[07:20:29] *** Joins: tomreyn (~tomreyn@megaglest/team/tomreyn)
[07:23:12] *** Quits: travaldo (~travaldo@159.203.88.148) (Quit: travaldo)
[07:24:48] *** Joins: xmb (~xmb@178.197.213.215)
[07:28:46] *** Joins: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net)
[07:30:22] *** Quits: xmb (~xmb@178.197.213.215) (Ping timeout: 272 seconds)
[07:33:24] *** Quits: makara1 (~makara@196.214.171.83) (Ping timeout: 240 seconds)
[07:33:48] *** Quits: makara (~makara@196.214.171.83) (Ping timeout: 240 seconds)
[07:33:57] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Ping timeout: 240 seconds)
[07:34:02] *** Joins: jos1 (~jos3@host-091-097-187-152.ewe-ip-backbone.de)
[07:35:40] *** Joins: makara (~makara@196.214.171.83)
[07:36:08] *** Joins: makara1 (~makara@196.214.171.83)
[07:36:20] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:40:02] *** Quits: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys) (Client Quit)
[07:40:19] *** Joins: jonakeys (jonathan@gateway/vpn/airvpn/jonakeys)
[07:44:48] *** Quits: A|an (~Alan@173.216.85.166) (Quit: A|an)
[07:50:14] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[07:50:22] *** Quits: jmdaemon (~jmdaemon@user/jmdaemon) (Ping timeout: 256 seconds)
[07:51:57] *** Joins: chasmo77 (~chas77@c-71-193-246-4.hsd1.or.comcast.net)
[07:52:38] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:28aa:e73d:ee36:3353) (Ping timeout: 250 seconds)
[07:56:32] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 250 seconds)
[07:56:39] *** Quits: s1b1 (~s1b1@user/s1b1) (Quit: ZNC 1.8.2+deb2+b1 - https://znc.in)
[07:57:01] *** Joins: rgrinberg (~textual@187.223.141.66)
[07:57:18] *** Quits: rgrinberg (~textual@187.223.141.66) (Read error: Connection reset by peer)
[07:58:28] *** Joins: rgrinberg (~textual@187.223.141.66)
[08:00:32] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:05:38] *** Quits: milkt (~debian@gateway/tor-sasl/milkt) (Remote host closed the connection)
[08:05:59] *** Joins: milkt (~debian@gateway/tor-sasl/milkt)
[08:07:10] *** Joins: makara- (~makara@196.214.171.83)
[08:07:42] *** Joins: makara_ (~makara@196.214.171.83)
[08:08:02] *** Quits: makara (~makara@196.214.171.83) (Read error: Connection reset by peer)
[08:08:11] *** Quits: makara1 (~makara@196.214.171.83) (Read error: Connection reset by peer)
[08:09:26] *** Joins: s1b1 (~s1b1@user/s1b1)
[08:15:20] *** Quits: senoraraton (~senorarat@192-195-83-130.static.monkeybrains.net) (Ping timeout: 272 seconds)
[08:20:44] *** Quits: computerworm110 (~quassel@user/computerworm110) (Quit: If this happens without warning, it's not you, it's my Internet.  :()
[08:21:23] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[08:21:30] *** Joins: han-solo (~hanish@user/han-solo)
[08:23:10] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[08:23:11] *** Quits: tirnanog (~tirnanog@user/tirnanog) (Quit: = "")
[08:26:38] *** Quits: schnakseli (~schnaksel@mobile-access-b04845-195.dhcp.inet.fi) (Ping timeout: 256 seconds)
[08:31:55] *** Quits: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:34:12] *** Quits: on^ (~on@50.232.121.75) (Ping timeout: 240 seconds)
[08:35:32] *** Joins: geowiesnot (~user@5-51-190-244.abo.bbox.fr)
[08:36:51] *** Joins: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks)
[08:38:04] *** Joins: King_julian (~King_juli@41.1.141.23)
[08:40:14] *** Quits: wierzbowski (~wierzbows@dynamic-046-114-172-041.46.114.pool.telefonica.de) (Ping timeout: 256 seconds)
[08:40:23] *** Joins: King_jul1an (~King_juli@41.1.141.23)
[08:40:38] *** Joins: jmdaemon (~jmdaemon@user/jmdaemon)
[08:42:45] *** Quits: King_julian (~King_juli@41.1.141.23) (Ping timeout: 256 seconds)
[08:44:00] *** Joins: King_julian (~King_juli@41.1.141.23)
[08:46:02] *** Joins: wierzbowski (~wierzbows@dynamic-046-114-172-041.46.114.pool.telefonica.de)
[08:47:14] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[08:47:42] *** Quits: zebrag (~chris@user/zebrag) (Quit: Konversation terminated!)
[08:50:44] *** Joins: ivanakis (~ivanakis@46.10.161.208)
[08:52:12] *** Quits: eschwartz (~eschwartz@archlinux/bugwrangler/eschwartz) (Ping timeout: 240 seconds)
[08:52:57] *** Joins: eschwartz (~eschwartz@archlinux/bugwrangler/eschwartz)
[09:00:53] *** Quits: King_jul1an (~King_juli@41.1.141.23) (Ping timeout: 256 seconds)
[09:06:14] *** Joins: crashrep (~crashrep@user/crashrep)
[09:08:44] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Quit: leaving)
[09:09:05] *** Joins: on^ (~on@50.232.121.75)
[09:13:02] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Remote host closed the connection)
[09:13:34] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[09:14:49] *** Joins: labrador (~labrador@user/labrador)
[09:20:12] *** Quits: larryv (~larryv@zsh/patchmanager/larryv) (Quit: larryv)
[09:21:41] *** Quits: mohabaks (~mohabaks@gateway/tor-sasl/mohabaks) (Quit: WeeChat 3.4)
[09:23:39] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[09:24:21] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Client Quit)
[09:24:32] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[09:25:20] *** Quits: redgloboli (~redglobol@user/redgloboli) (Quit: ...enter the matrix...)
[09:26:19] *** nortoh_ is now known as nortoh
[09:26:19] *** Quits: nortoh (~nortoh@bishop.xerrero.com) (Changing host)
[09:26:19] *** Joins: nortoh (~nortoh@user/nortoh)
[09:26:24] *** Quits: King_julian (~King_juli@41.1.141.23) (Remote host closed the connection)
[09:26:29] *** Joins: redgloboli (~redglobol@user/redgloboli)
[09:26:39] *** Joins: easyriders (~easyrider@xb9b5df82.cust.hiper.dk)
[09:26:42] *** Joins: King_julian (~King_juli@41.1.141.23)
[09:27:00] *** Quits: junebug (~junebug@2600:1700:3db0:2540:fe6d:12d2:2acc:ce5f) (Ping timeout: 240 seconds)
[09:27:19] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Client Quit)
[09:27:24] *** Joins: ormaaj247 (~ormaaj2@user/ormaaj)
[09:27:58] *** Quits: ormaaj247 (~ormaaj2@user/ormaaj) (Client Quit)
[09:28:04] *** Joins: ormaaj24799 (~ormaaj247@user/ormaaj)
[09:28:18] *** Quits: Xanthaos (~ke4nhw@user/ke4nhw) (Remote host closed the connection)
[09:28:42] *** Quits: ormaaj24799 (~ormaaj247@user/ormaaj) (Client Quit)
[09:28:51] *** Joins: ormaaj24799 (~ormaaj247@user/ormaaj)
[09:29:26] *** Quits: geowiesnot (~user@5-51-190-244.abo.bbox.fr) (Ping timeout: 272 seconds)
[09:30:01] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Remote host closed the connection)
[09:30:15] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Ping timeout: 240 seconds)
[09:30:16] *** Quits: ormaaj24799 (~ormaaj247@user/ormaaj) (Client Quit)
[09:30:21] *** Quits: timj (~timj@user/timj) (Ping timeout: 256 seconds)
[09:30:24] *** Joins: ormaaj24799 (~ormaaj247@user/ormaaj)
[09:31:16] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[09:31:20] *** Quits: ormaaj24799 (~ormaaj247@user/ormaaj) (Client Quit)
[09:31:35] *** Joins: ormaaj24799 (~ormaaj247@user/ormaaj)
[09:32:17] *** Quits: ormaaj24799 (~ormaaj247@user/ormaaj) (Client Quit)
[09:32:49] *** Quits: Ders (MrA@user/ders) (Read error: Connection reset by peer)
[09:32:56] *** Quits: shalok (~shalok@user/shalok) (Ping timeout: 252 seconds)
[09:32:59] *** Joins: MrA (MrA@2602:ff75:7:3ccc::20)
[09:33:03] *** Quits: themachine (~themachin@user/themachine) (Read error: Connection reset by peer)
[09:33:17] *** Joins: themachine (~themachin@user/themachine)
[09:33:25] *** Joins: shalok (~shalok@user/shalok)
[09:33:52] *** Quits: King_julian (~King_juli@41.1.141.23) (Ping timeout: 272 seconds)
[09:34:02] *** Quits: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98) (Ping timeout: 252 seconds)
[09:34:45] *** Joins: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98)
[09:35:23] <ormaaj> Some of those might be a little redundant, unless they're all  #redirs
[09:36:04] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[09:39:59] *** Quits: easyriders (~easyrider@xb9b5df82.cust.hiper.dk) (Ping timeout: 256 seconds)
[09:40:26] <ormaaj> seems they're pretty logical. nvm! :)
[09:41:28] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Ping timeout: 272 seconds)
[09:46:17] *** Joins: timj (~timj@user/timj)
[09:50:21] *** Joins: semeion (~semeion@user/semeion)
[09:52:54] *** Quits: ChmEarl (~chmearl@user/chmearl) (Quit: Leaving)
[09:54:40] *** Quits: aod (~a@190-207-87-44.dyn.dsl.cantv.net) (Quit: leaving)
[10:03:12] *** Quits: fatal (~0x00@user/fatal) (Remote host closed the connection)
[10:03:27] *** Joins: fatal (~0x00@user/fatal)
[10:06:37] *** Quits: jochum (~quassel@user/jochum) (Ping timeout: 256 seconds)
[10:07:10] *** Joins: bluedust (~bluedust@194.37.96.104)
[10:08:53] *** Quits: ivanakis (~ivanakis@46.10.161.208) (Ping timeout: 256 seconds)
[10:09:21] *** Joins: szkl (uid110435@id-110435.uxbridge.irccloud.com)
[10:11:25] *** Joins: yustin (~yustin@user/yustin)
[10:13:45] *** Quits: Night-Shade (~Tim@ip1f11e523.dynamic.kabel-deutschland.de) (Read error: Connection reset by peer)
[10:17:51] *** Joins: dreamon (~dreamon@pd9503c39.dip0.t-ipconnect.de)
[10:18:12] *** Quits: rgrinberg (~textual@187.223.141.66) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:18:44] *** Joins: ekathva (~ekathva@n14joep3rywnjx0h5-1.v6.elisa-mobile.fi)
[10:25:17] *** Joins: sa0 (~sa0sin@2a01:e0a:414:b360:ec4b:710a:21ce:6bf9)
[10:25:48] *** Quits: semeion (~semeion@user/semeion) (Ping timeout: 272 seconds)
[10:26:10] *** Joins: jaysicks (~jaysicks@178-164-166-32.pool.digikabel.hu)
[10:28:53] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[10:29:35] *** Quits: sa0 (~sa0sin@2a01:e0a:414:b360:ec4b:710a:21ce:6bf9) (Ping timeout: 252 seconds)
[10:32:10] *** Quits: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072) (Remote host closed the connection)
[10:32:27] *** Joins: bob_x1 (~bob_x@gateway/tor-sasl/bobx1/x-26457072)
[10:33:15] *** Joins: rgrinberg (~textual@2806:101e:7:20ec:a0ff:ed0f:a27c:5f4)
[10:34:06] *** Quits: Manouchehri (sid384576@id-384576.hampstead.irccloud.com) (Ping timeout: 268 seconds)
[10:34:23] *** Quits: dreamon (~dreamon@pd9503c39.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[10:36:09] *** Joins: Manouchehri (sid384576@id-384576.hampstead.irccloud.com)
[10:37:47] *** Joins: lavaball (felix@31.204.155.215)
[10:38:31] *** Quits: karakedi (~eAC53C340@user/karakedi) (Remote host closed the connection)
[10:38:44] *** Joins: semeion (~semeion@user/semeion)
[10:41:25] *** Joins: karakedi (~eAC53C340@user/karakedi)
[10:44:01] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 256 seconds)
[10:44:17] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[10:47:23] *** Joins: freep (~freepppp@193.92.35.32.dsl.dyn.forthnet.gr)
[10:48:14] *** Quits: rgrinberg (~textual@2806:101e:7:20ec:a0ff:ed0f:a27c:5f4) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:48:52] *** Quits: bluedust (~bluedust@194.37.96.104) (Ping timeout: 256 seconds)
[10:49:30] *** Joins: loganlee (~Thunderbi@user/loganlee)
[10:50:54] *** Joins: mithrin (~mithrin@188-167-233-152.dynamic.chello.sk)
[10:51:43] *** Joins: Payam98 (~Payam@138.106.57.131)
[10:56:26] *** Joins: ferdna (~ferdna@user/ferdna)
[10:58:34] *** Joins: ivanakis (~ivanakis@46.10.161.208)
[10:59:52] *** Joins: namkeleser (~namkelese@101.175.104.107)
[11:00:00] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[11:00:17] *** Joins: unop (~unop@195.91.20.32)
[11:02:51] *** Joins: duuude (~user@user/duuude)
[11:03:17] *** Quits: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com) (Ping timeout: 256 seconds)
[11:04:02] *** Quits: tangy (~tangy@user/tangy) (Ping timeout: 240 seconds)
[11:05:46] *** Quits: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com) (Ping timeout: 245 seconds)
[11:05:48] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Read error: Connection reset by peer)
[11:10:08] *** Quits: Sulky (~Sulky@2a04:cec0:1054:650:b0ad:c3eb:dab3:fd32) (Remote host closed the connection)
[11:10:13] *** Joins: Sulky_ (~Sulky@2a04:cec0:1054:650:b0ad:c3eb:dab3:fd32)
[11:12:49] *** Quits: labrador (~labrador@user/labrador) (Quit: Leaving)
[11:13:38] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[11:15:02] *** Joins: xmb (~xmb@178.197.213.215)
[11:15:33] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[11:16:32] *** Joins: unop (~unop@195.91.20.32)
[11:17:17] *** Joins: tobybl (~tobybl@227.192.115.87.dyn.plus.net)
[11:17:20] *** Quits: tobybl (~tobybl@227.192.115.87.dyn.plus.net) (Read error: Connection reset by peer)
[11:17:35] *** Joins: tobybl (~tobybl@227.192.115.87.dyn.plus.net)
[11:18:50] *** Joins: paddymahoney (~paddymaho@cpe9050ca207f83-cm9050ca207f80.cpe.net.cable.rogers.com)
[11:18:54] *** Quits: Sauvin (~sauvin@about/linux/staff/sauvin) (Ping timeout: 256 seconds)
[11:19:49] *** Joins: tex (~dix@user/dix)
[11:20:12] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 240 seconds)
[11:22:24] *** Joins: sinaowolabi_ (~SinaOwola@160.152.106.73)
[11:23:42] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[11:24:52] *** Quits: semeion (~semeion@user/semeion) (Quit: WeeChat 3.4)
[11:25:17] *** Quits: Sulky_ (~Sulky@2a04:cec0:1054:650:b0ad:c3eb:dab3:fd32) (Ping timeout: 268 seconds)
[11:26:32] *** Quits: YoungFrog (~youngfrog@2a02:a03f:c21b:f900:e1b2:838c:ba67:c714) (Remote host closed the connection)
[11:26:54] *** Joins: YoungFrog (~youngfrog@39.129-180-91.adsl-dyn.isp.belgacom.be)
[11:26:56] *** Quits: Codaraxis (~Codaraxis@user/codaraxis) (Remote host closed the connection)
[11:27:17] *** Joins: Codaraxis (~Codaraxis@user/codaraxis)
[11:27:49] *** Joins: masoudd_ (~masoudd@user/masoudd)
[11:29:10] *** Joins: Sulky (~Sulky@2a04:cec0:1054:650:b0ad:c3eb:dab3:fd32)
[11:31:24] *** Quits: xmb (~xmb@178.197.213.215) (Ping timeout: 240 seconds)
[11:31:35] *** Joins: dreamon (~dreamon@ppp-88-217-83-128.dynamic.mnet-online.de)
[11:32:30] *** Joins: rendar (~rendar@user/rendar)
[11:33:37] *** Quits: richardm645 (~quassel@2600:8801:c507:b200:70f0:1617:e216:48b0) (Ping timeout: 240 seconds)
[11:36:02] *** Joins: schnakseli (~schnaksel@193.184.119.2)
[11:36:37] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[11:37:40] *** Joins: unop (~unop@195.91.20.32)
[11:39:27] *** Quits: Betal (~Betal@user/betal) (Quit: WeeChat 3.4)
[11:40:32] *** Quits: Sulky (~Sulky@2a04:cec0:1054:650:b0ad:c3eb:dab3:fd32) (Ping timeout: 240 seconds)
[11:40:41] *** Quits: ferdna (~ferdna@user/ferdna) (Quit: Leaving)
[11:41:12] *** Quits: masoudd_ (~masoudd@user/masoudd) (Quit: Leaving)
[11:41:26] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[11:44:30] *** Joins: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net)
[11:45:38] *** Quits: namkeleser (~namkelese@101.175.104.107) (Quit: Client closed)
[11:47:30] *** Quits: Masklin__Gurder (~joel@bioinf-serv.biol.lu.se) (Ping timeout: 272 seconds)
[11:48:11] *** Quits: rcernin_ (~rcernin@101.189.129.123) (Quit: WeeChat 3.4)
[11:49:02] *** Joins: aramtsamtsam (~Thunderbi@2001:861:388a:5600:1710:c3dc:c776:df35)
[11:50:20] *** Joins: jgrossholtz (~Julien@249.164.25.93.rev.sfr.net)
[11:51:36] *** Quits: aramtsamtsam (~Thunderbi@2001:861:388a:5600:1710:c3dc:c776:df35) (Client Quit)
[11:53:08] *** Joins: zer0bitz_ (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[11:56:02] *** Quits: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi) (Ping timeout: 240 seconds)
[11:58:22] *** Quits: downtrip (~downtrip@188.166.151.198) (Quit: WeeChat 3.4)
[12:00:04] *** Joins: jochum (~quassel@user/jochum)
[12:06:11] *** Quits: cryptonector (~nico@24.28.108.183) (Ping timeout: 256 seconds)
[12:09:42] *** Joins: arinov_ (~arinov@213.194.126.155)
[12:11:56] *** Joins: downtrip (~downtrip@188.166.151.198)
[12:12:12] *** Quits: john_johnk (~Thunderbi@102.178.207.77.rev.sfr.net) (Ping timeout: 272 seconds)
[12:13:43] *** Quits: lorimer (~lorimer@user/lorimer) (Read error: Connection reset by peer)
[12:13:43] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[12:16:26] *** Quits: loganlee (~Thunderbi@user/loganlee) (Quit: loganlee)
[12:19:05] *** Joins: ormaaj2 (~ormaaj2@user/ormaaj)
[12:19:24] *** Quits: ormaaj2 (~ormaaj2@user/ormaaj) (Client Quit)
[12:21:11] *** Joins: BoraKlavunbora (~BoraKlavu@88.240.96.73)
[12:24:33] *** Quits: stanlib (~archblade@user/stanlib) (Remote host closed the connection)
[12:25:23] *** Joins: lapsi (~lapsi@85.14.25.194)
[12:27:53] *** Joins: azidhaka (~azidhaka@user/azidhaka)
[12:28:59] *** Joins: Masklin__Gurder (~joel@bioinf-serv.biol.lu.se)
[12:29:01] *** Joins: shad (~shad@user/shad)
[12:30:14] *** Quits: shroomreactionar (~shroomrea@2001:470:69fc:105::1:409e) (Quit: You have been kicked for being idle)
[12:33:17] *** Quits: schnakseli (~schnaksel@193.184.119.2) (Ping timeout: 240 seconds)
[12:34:25] *** Joins: aakashi2001 (~aakashi20@103.61.255.12)
[12:34:25] *** Quits: aakashi2001 (~aakashi20@103.61.255.12) (Changing host)
[12:34:25] *** Joins: aakashi2001 (~aakashi20@user/aakashi2001)
[12:39:37] *** Quits: makara- (~makara@196.214.171.83) (Ping timeout: 256 seconds)
[12:40:04] *** Quits: makara_ (~makara@196.214.171.83) (Ping timeout: 272 seconds)
[12:40:07] *** Joins: _Vi (~vi0oss@2a0d:7c40:3000:1326::3)
[12:40:51] *** Joins: makara (~makara@196.214.171.83)
[12:41:19] *** Joins: makara1 (~makara@196.214.171.83)
[12:42:49] *** Joins: _gabriele (~gabriele@host-95-245-110-186.retail.telecomitalia.it)
[12:42:49] *** Quits: _gabriele (~gabriele@host-95-245-110-186.retail.telecomitalia.it) (Changing host)
[12:42:49] *** Joins: _gabriele (~gabriele@user/gabriele)
[12:42:49] *** _gabriele is now known as gabriele
[12:44:50] *** Quits: zaz\ (~zaz@poneybl.eu) (Quit: bye)
[12:45:47] *** Joins: zaz\ (~zaz@poneybl.eu)
[12:47:17] *** Quits: zaz\ (~zaz@poneybl.eu) (Client Quit)
[12:49:39] *** Joins: zaz\ (~zaz@poneybl.eu)
[12:49:53] *** Quits: bkhl (~bkhl@user/bkhl) (Read error: Connection reset by peer)
[12:50:08] *** Joins: bkhl (~bkhl@user/bkhl)
[12:51:45] *** Quits: aakashi2001 (~aakashi20@user/aakashi2001) (Quit: Leaving)
[12:52:49] *** Joins: iomari891 (~iomari891@197.210.77.99)
[12:58:28] *** Quits: Tach (~Tach@user/tach) (Quit: Tach)
[12:58:55] *** Quits: JanC (~janc@user/janc) (Remote host closed the connection)
[12:59:13] *** Joins: JanC (~janc@user/janc)
[12:59:55] *** Joins: zoe (~zoe@fsf/member/zoe)
[13:03:28] *** Joins: King_julian (~King_juli@41.1.73.181)
[13:04:04] *** Joins: King_jul1an (~King_juli@41.1.73.181)
[13:11:57] *** Quits: Sauvin (~sauvin@about/linux/staff/sauvin) (Ping timeout: 240 seconds)
[13:13:25] *** Joins: aakashi2001 (~aakashi20@103.61.255.12)
[13:13:25] *** Quits: aakashi2001 (~aakashi20@103.61.255.12) (Changing host)
[13:13:25] *** Joins: aakashi2001 (~aakashi20@user/aakashi2001)
[13:14:31] *** Quits: aakashi2001 (~aakashi20@user/aakashi2001) (Max SendQ exceeded)
[13:14:59] *** Joins: aakashi2001 (~aakashi20@103.61.255.12)
[13:14:59] *** Quits: aakashi2001 (~aakashi20@103.61.255.12) (Changing host)
[13:14:59] *** Joins: aakashi2001 (~aakashi20@user/aakashi2001)
[13:14:59] *** Joins: bomb-on (~bomb-on@user/bomb-on)
[13:18:04] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 272 seconds)
[13:18:24] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[13:18:47] *** Joins: xx (~xx@user/xx)
[13:19:06] *** Joins: masoudd (~masoudd@user/masoudd)
[13:20:02] *** Joins: domicron (~domicron@gateway/tor-sasl/domicron)
[13:20:59] *** Joins: King_julian (~King_juli@41.1.73.181)
[13:23:16] *** Quits: dre (~dre@2001:8003:c932:c301:b9de:333:ba99:ae98) (Ping timeout: 250 seconds)
[13:25:16] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 256 seconds)
[13:26:03] *** Joins: knstn (~knstn@ppp-94-66-57-121.home.otenet.gr)
[13:29:01] *** Joins: Sauvin (~sauvin@about/linux/staff/sauvin)
[13:33:20] *** Quits: ano (~ano@user/ano) (Remote host closed the connection)
[13:37:19] *** Quits: aakashi2001 (~aakashi20@user/aakashi2001) (Quit: Leaving)
[13:40:10] *** Quits: Hackerpcs (~user@user/hackerpcs) (Ping timeout: 250 seconds)
[13:40:10] *** Quits: olspookishmagus (~pookie@snf-137798.vm.okeanos.grnet.gr) (Ping timeout: 250 seconds)
[13:40:53] *** Joins: ano (~ano@user/ano)
[13:41:34] *** Quits: duuude (~user@user/duuude) (Ping timeout: 268 seconds)
[13:42:03] *** Joins: olspookishmagus (~pookie@snf-137798.vm.okeanos.grnet.gr)
[13:42:36] *** Joins: Hackerpcs (~user@user/hackerpcs)
[13:44:40] *** Joins: curvv (~quetzlcoa@192-143-93-213.ip.airmobile.co.za)
[13:44:40] *** Quits: curvv (~quetzlcoa@192-143-93-213.ip.airmobile.co.za) (Changing host)
[13:44:40] *** Joins: curvv (~quetzlcoa@user/curvv)
[13:45:00] *** Quits: nickodd (~nickodd@user/nickodd) (Ping timeout: 240 seconds)
[13:47:32] *** Quits: And1 (~And1@brewington.uberspace.de) (Ping timeout: 240 seconds)
[13:49:53] *** Quits: DK3 (~DK3@user/DK3) (Ping timeout: 256 seconds)
[13:51:17] *** Joins: DK3 (~DK3@rs000042.fastrootserver.de)
[13:53:48] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Ping timeout: 240 seconds)
[13:54:25] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[13:56:37] *** Quits: zer0bitz_ (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi) (Read error: Connection reset by peer)
[13:58:15] *** Quits: ano (~ano@user/ano) (Ping timeout: 240 seconds)
[13:58:40] *** Joins: aakashi2001 (~aakashi20@103.61.255.12)
[13:58:40] *** Quits: aakashi2001 (~aakashi20@103.61.255.12) (Changing host)
[13:58:40] *** Joins: aakashi2001 (~aakashi20@user/aakashi2001)
[14:00:44] *** Joins: ano (~ano@user/ano)
[14:01:57] *** Quits: bboles (~bboles@64.94.212.195) (Quit: ZNC 1.8.2 - https://znc.in)
[14:05:50] *** Joins: se-sm-ca (~mottles@user/se-sm-ca)
[14:06:59] *** Joins: bboles (~bboles@64.94.212.195)
[14:08:54] *** Joins: aakashi2009 (~aakashi20@user/aakashi2001)
[14:11:34] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Read error: Connection reset by peer)
[14:16:42] *** Joins: Mo (~Mo@dynamic-077-003-009-015.77.3.pool.telefonica.de)
[14:17:53] *** Joins: tmm88 (~tmm88@user/tmm88)
[14:20:59] *** Joins: j0hn_mc_clane (~j0hn_mc_c@ptr-fqhhm12iua58a0gd4hj.18120a2.ip6.access.telenet.be)
[14:22:15] *** Quits: aakashi2009 (~aakashi20@user/aakashi2001) (Remote host closed the connection)
[14:25:31] *** Quits: Nintendo (~smb3@user/great) (Quit: Game over.)
[14:30:58] *** Quits: domicron (~domicron@gateway/tor-sasl/domicron) (Remote host closed the connection)
[14:31:05] *** Joins: easyriders (~easyrider@192038128023.mbb.telenor.dk)
[14:31:10] *** Joins: sinaowolabi (~SinaOwola@102.134.114.1)
[14:31:25] *** Joins: domicron (~domicron@gateway/tor-sasl/domicron)
[14:35:16] *** Quits: easyriders (~easyrider@192038128023.mbb.telenor.dk) (Read error: Connection reset by peer)
[14:35:24] *** Quits: wierzbowski (~wierzbows@dynamic-046-114-172-041.46.114.pool.telefonica.de) (Ping timeout: 240 seconds)
[14:38:20] *** Joins: lavaball (felix@31.204.155.215)
[14:39:52] *** Quits: BoraKlavunbora (~BoraKlavu@88.240.96.73) (Quit: Leaving)
[14:41:27] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 256 seconds)
[14:43:00] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[14:43:41] *** Quits: vishal (~vishal@fedora/vishal) (Quit: ZNC 1.8.2 - https://znc.in)
[14:44:47] *** Quits: Oleg (~Oleg@ool-45745511.dyn.optonline.net) (Ping timeout: 252 seconds)
[14:45:32] *** Joins: vishal (~vishal@fedora/vishal)
[14:46:52] *** Joins: Oleg (~Oleg@ool-45745511.dyn.optonline.net)
[14:47:01] *** Joins: lonewulf` (~lonewulf@user/lonewulf)
[14:50:51] *** Quits: mixfix41 (~homefame@user/mixfix41) (Ping timeout: 256 seconds)
[14:51:01] *** Joins: thiras (~thiras@user/thiras)
[14:53:07] *** Joins: King_julian (~King_juli@41.1.73.181)
[14:53:18] *** Joins: duuude (~user@user/duuude)
[14:54:20] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 272 seconds)
[14:54:39] *** Joins: fstd (~fstd@xdsl-78-35-88-2.nc.de)
[14:54:49] *** Quits: fstd_ (~fstd@xdsl-87-79-45-162.nc.de) (Ping timeout: 256 seconds)
[14:55:55] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[14:56:16] <ano> is there a way to to redirect all cmds except one stdout to stderr for whole script?
[14:56:21] *** Joins: invra (~invra@mail.aletheianature.es)
[15:00:16] *** Joins: seninha (~chatzilla@user/seninha)
[15:00:37] *** Joins: sig_ (~sig@99-117-118-33.lightspeed.sndgca.sbcglobal.net)
[15:00:41] *** Quits: riff-IRC (~riff-IRC@user/riff-irc) (Quit: PROTO-IRC v0.73a (C) 1988 NetSoft - Built on 11-13-1988 on AT&T System V)
[15:01:44] <emanuele6> exec 3>&2 2>&1; cmd1; cmd2; cmd3; cmd4 2>&3; cmd5; cmd6; exec 3>&-
[15:01:51] *** Quits: lungaro (~sig@99-117-118-33.lightspeed.sndgca.sbcglobal.net) (Ping timeout: 256 seconds)
[15:02:34] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 272 seconds)
[15:02:56] <emanuele6> oh, stdout to stderr, not stderr to stdout
[15:02:59] <emanuele6> then:
[15:03:11] <emanuele6> exec 3>&1 >&2; cmd1; cmd2; cmd3; cmd4 >&3; cmd5; cmd6; exec 3>&-
[15:03:50] *** Joins: King_julian (~King_juli@41.1.73.181)
[15:03:58] *** Joins: tercaL (~tercaL@user/tercal)
[15:04:29] *** Joins: mowcat (~mowcat@2a00:23c5:d190:1901:f22f:74ff:fe77:1e1c)
[15:09:12] *** Quits: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt) (Remote host closed the connection)
[15:09:25] *** Joins: Swahili (~Swahili@a95-94-208-187.cpe.netcabo.pt)
[15:09:45] *** Quits: j0hn_mc_clane (~j0hn_mc_c@ptr-fqhhm12iua58a0gd4hj.18120a2.ip6.access.telenet.be) (Ping timeout: 268 seconds)
[15:10:44] *** Joins: \\Mr_C\\ (~mrc@cpe-75-187-191-230.neo.res.rr.com)
[15:12:39] *** Quits: masoudd (~masoudd@user/masoudd) (Remote host closed the connection)
[15:13:04] *** Joins: masoudd (~masoudd@user/masoudd)
[15:13:48] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[15:15:18] *** Joins: bertvvvs (~bertvvvs@user/bertvvvs)
[15:16:08] *** Joins: anaveragehuman (~anaverage@user/anaveragehuman)
[15:18:30] *** Quits: aakashi2001 (~aakashi20@user/aakashi2001) (Quit: Leaving)
[15:20:40] *** Quits: l4yer (~l4yer@user/l4yer) (Remote host closed the connection)
[15:21:39] *** Joins: j0hn_mc_clane (~j0hn_mc_c@ptr-fqhhm12iua58a0gd4hj.18120a2.ip6.access.telenet.be)
[15:22:13] *** Quits: igemnace (~ian@user/igemnace) (Ping timeout: 240 seconds)
[15:24:53] *** Joins: xmb (~xmb@178.197.209.111)
[15:28:30] *** Quits: goose (goose@bucket.goose.ws) (Ping timeout: 250 seconds)
[15:30:01] *** Quits: karstensrage (~karstensr@user/karstensrage) (Quit: ZNC - http://znc.in)
[15:30:01] *** Quits: xmb (~xmb@178.197.209.111) (Read error: Connection reset by peer)
[15:31:42] *** Quits: arinov_ (~arinov@213.194.126.155) (Ping timeout: 272 seconds)
[15:32:39] *** Quits: makara (~makara@196.214.171.83) (Ping timeout: 252 seconds)
[15:32:57] *** Quits: makara1 (~makara@196.214.171.83) (Ping timeout: 240 seconds)
[15:34:56] *** Joins: makara (~makara@196.214.171.83)
[15:35:19] *** Joins: makara1 (~makara@196.214.171.83)
[15:36:25] *** Quits: curvv (~quetzlcoa@user/curvv) (Ping timeout: 256 seconds)
[15:36:43] *** Quits: rando25892 (~atler@user/rando25892) (Read error: Connection reset by peer)
[15:39:02] *** Joins: nonominoa (~nonominoa@103.7.82.30)
[15:39:48] *** Quits: j0hn_mc_clane (~j0hn_mc_c@ptr-fqhhm12iua58a0gd4hj.18120a2.ip6.access.telenet.be) (Ping timeout: 252 seconds)
[15:40:57] *** Quits: Mo (~Mo@dynamic-077-003-009-015.77.3.pool.telefonica.de) (Ping timeout: 256 seconds)
[15:40:57] *** Joins: ondrej008 (uid311009@id-311009.lymington.irccloud.com)
[15:41:06] *** Joins: riff-IRC (~riff-IRC@user/riff-irc)
[15:42:53] *** Joins: ekathva_ (~ekathva@85-76-69-150-nat.elisa-mobile.fi)
[15:43:38] *** Quits: ekathva (~ekathva@n14joep3rywnjx0h5-1.v6.elisa-mobile.fi) (Ping timeout: 252 seconds)
[15:43:44] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 272 seconds)
[15:45:38] *** Joins: King_julian (~King_juli@41.1.73.181)
[15:46:22] *** Quits: sinaowolabi_ (~SinaOwola@160.152.106.73) (Ping timeout: 256 seconds)
[15:46:35] *** Quits: nonominoa (~nonominoa@103.7.82.30) (Quit: Client closed)
[15:46:36] *** Joins: xmb (~xmb@178.197.209.111)
[15:48:36] *** Joins: Oleg1 (~Oleg@ool-45745511.dyn.optonline.net)
[15:49:57] *** Quits: Oleg (~Oleg@ool-45745511.dyn.optonline.net) (Ping timeout: 240 seconds)
[15:54:07] *** Joins: drd (~drd@2001:b07:a70:9f1f:7c59:9868:ca2f:aa81)
[15:55:00] *** Quits: sinaowolabi (~SinaOwola@102.134.114.1) (Ping timeout: 240 seconds)
[15:58:24] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 250 seconds)
[15:59:00] *** Joins: sinaowolabi_ (~SinaOwola@102.134.114.1)
[16:00:28] *** Joins: King_julian (~King_juli@41.1.73.181)
[16:00:33] *** Joins: goose (goose@bucket.goose.ws)
[16:00:33] *** Joins: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7)
[16:01:15] *** Quits: shad (~shad@user/shad) (Ping timeout: 252 seconds)
[16:01:48] *** Quits: tmm88 (~tmm88@user/tmm88) (Ping timeout: 252 seconds)
[16:04:27] *** Joins: l4yer (~l4yer@user/l4yer)
[16:04:54] *** Joins: thevishy (~Nishant@49.37.242.151)
[16:06:11] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[16:06:32] *** Joins: unop (~unop@195.91.20.32)
[16:07:06] *** Joins: sinaowolabi (~SinaOwola@160.152.106.73)
[16:07:32] *** Quits: ivanakis (~ivanakis@46.10.161.208) (Ping timeout: 240 seconds)
[16:11:32] *** Quits: sinaowolabi (~SinaOwola@160.152.106.73) (Ping timeout: 240 seconds)
[16:11:42] *** Quits: sinaowolabi_ (~SinaOwola@102.134.114.1) (Ping timeout: 252 seconds)
[16:13:13] <dob1> how can I check if the script is run from the dir where the script it?
[16:13:22] <dob1> *is
[16:14:18] <Soliton> !faq location
[16:14:18] <greybot> https://mywiki.wooledge.org/BashFAQ/028 -- How do I determine the location of my script?  I want to read some config files from the same place.
[16:16:48] <Nomikos> harsh man, harsh :-p
[16:17:41] <Earnest> dob1: (Don't.  Just don't rely on that behaviour or design your scripts to depend on it.)
[16:17:45] <geirha> !xy
[16:17:46] <greybot> http://mywiki.wooledge.org/XyProblem -- "I want to do X, but I'm asking how to do Y..."
[16:18:38] <dob1> the script launch a docker command  with "${PWD}" as docker volume, so it's important that it is run where the script is
[16:19:16] <Earnest> And so the lesson is learned, again
[16:19:16] <geirha> because you're running the same script inside the container?
[16:19:32] <Soliton> !docker
[16:19:32] <greybot> https://xkcd.com/1988/ The fad of the month (as of June 2018) is Docker. It's always Docker. Why are they doing it THAT WAY? Because Docker.
[16:20:13] <dob1> geirha, no
[16:20:22] <dob1> it is run to start the container
[16:20:30] <xmb> anyone know to tell me what to change on shc.c for -static to work ( static builds instead of shared ones ) ?
[16:21:09] <geirha> then it's not so important that the script file itself is in the right dir, it's some other file(s) you really want to check for
[16:21:30] *** Quits: dreamon (~dreamon@ppp-88-217-83-128.dynamic.mnet-online.de) (Ping timeout: 256 seconds)
[16:21:49] <Soliton> or perhaps let the caller decide instead of guessing.
[16:22:14] <dob1> I am not sure now :)
[16:22:26] <Earnest> Either by environment, flag or argument
[16:22:30] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[16:23:02] *** Joins: Sulky (~Sulky@80.215.70.23)
[16:23:18] *** Joins: unop (~unop@195.91.20.32)
[16:25:50] *** Joins: sinaowolabi_ (~SinaOwola@160.152.106.73)
[16:26:17] *** Quits: drd (~drd@2001:b07:a70:9f1f:7c59:9868:ca2f:aa81) (Ping timeout: 240 seconds)
[16:26:55] <geirha> maybe you're looking for something like    [[ -e important-file ]] || { printf >&2 '%s: important-file not found\n' "$0" ; exit 1 ; } ; docker run -v "$PWD:/data" ...
[16:28:42] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 272 seconds)
[16:29:39] *** Joins: King_julian (~King_juli@41.1.73.181)
[16:31:48] *** Joins: Filohuhum (~dante@gateway/tor-sasl/filohuhum)
[16:33:37] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 240 seconds)
[16:37:56] *** Quits: enoq (~enoq@2a05:1141:1f5:5600:b9c9:721a:599:bfe7) (Ping timeout: 268 seconds)
[16:40:23] *** Joins: lorimer (~lorimer@user/lorimer)
[16:41:46] *** Quits: riposte (~finalripo@119-17-138-70.77118a.mel.static.aussiebb.net) (Read error: Connection reset by peer)
[16:42:06] *** Joins: riposte (~finalripo@2403-5802-74-2--2000.ip6.aussiebb.net)
[16:42:06] *** Quits: Sulky (~Sulky@80.215.70.23) (Read error: Connection reset by peer)
[16:42:28] *** Joins: King_julian (~King_juli@41.1.73.181)
[16:42:45] *** Joins: magla (~gelignite@55d4843f.access.ecotel.net)
[16:43:16] *** Quits: iomari891 (~iomari891@197.210.77.99) (Quit: WeeChat 3.3)
[16:43:42] *** Joins: Sulky (~Sulky@2a04:cec0:105d:a5f0:6c4c:6a08:ab97:a6f3)
[16:44:47] *** Joins: ivanakis (~ivanakis@46.10.161.208)
[16:45:34] <bn_work> ok, why is the following complaining about nonexistence of a > file?  shouldn't > create it if it doesn't exist? https://www.irccloud.com/pastebin/ei9A5JuI/sudoers.d_file.bash
[16:45:55] <bn_work> (bash 5.1.16)
[16:46:54] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 252 seconds)
[16:46:55] <Soliton> # > foo/bar/baz
[16:46:56] <shbot> Soliton: bash: foo/bar/baz: No such file or directory
[16:47:11] <Soliton> make sure the dir exists.
[16:47:19] <bn_work> # echo foo > blah
[16:47:21] <shbot> bn_work: no output
[16:47:31] <bn_work> it does
[16:47:50] <han-solo> `suoders`
[16:47:51] <osse> sudoers.d probably does
[16:47:52] <han-solo> sudoers ?
[16:47:52] <Soliton> talk it out with bash.
[16:48:11] *** Joins: shad (~shad@user/shad)
[16:48:32] <bn_work> I'm on the server literally looking at that dir, it exists
[16:48:57] <Soliton> if you spell it right probably.
[16:49:08] <bn_work> ah, yes!
[16:49:15] *** Joins: King_julian (~King_juli@41.1.73.181)
[16:50:10] *** Joins: wierzbowski (~wierzbows@dynamic-046-114-160-144.46.114.pool.telefonica.de)
[16:50:11] <Soliton> calling echo with sudo helps nothing, btw.
[16:50:19] <Soliton> !sudo>
[16:50:19] <bn_work> unfortunately shellcheck != spellcheck (enhancement request idea:  shpellcheck :P)
[16:50:19] <greybot> sudo echo > file -- bash operations such as redirections & glob expansions are performed by the USER's bash, not by sudo. Consider: echo | sudo tee [-a] file, or sudo bash -c 'echo > file'
[16:50:55] <Soliton> what is the point of the function anyway?
[16:52:20] <bn_work> I guess I should be using tee?  this was a modification of a solution tirnanog came up last night to all sudo to accept a piped pw
[16:52:25] *** Joins: omnigoat (~omnigoat@user/omnigoat)
[16:52:37] <bn_work> s/up/up with/
[16:54:01] <Soliton> afaict you started the function thing.
[16:54:09] <bn_work> Soliton: how would I use tee in this case if it needs to automatically accept authentication for sudo?
[16:54:52] <Soliton> also where is password supposed to come from?
[16:55:06] <Soliton> perhaps you meant to run that part on the local side.
[16:55:10] <bn_work> the function thing wasn't my idea, supposedly it allows it execute atomically?
[16:55:13] <bn_work> it to
[16:55:30] <bn_work> it is defined earlier in the script and extracted from a file
[16:56:21] <Soliton> so none of this makes much sense so far.
[16:56:24] *** Joins: enoq (~enoq@194-208-178-35.lampert.tv)
[16:57:16] <bn_work> what part?
[17:00:05] *** Quits: kj (~kj@kj.aerisnetwork.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:00:50] <Soliton> perhaps you want: printf %s "$password" | ssh -o ConnectTimeout=10 -n jdoe@host.domain.tld 'sudo -S tee "/etc/suoders.d/$USER" > /dev/null'
[17:00:51] <bn_work> I have a bunch of servers on which root is disabled and I need to enable sudoers' NOPASSWD so I can actually perform bulk operations on them (hopefully via salt- assuming they figure out their issues with python3.8+)
[17:01:17] <Soliton> no idea if USER is going to be set to something.
[17:01:52] <bn_work> USER is set in the script earlier too (probably a poor name choice considering it normally exists in the env)
[17:01:58] <Nomikos> I don't suppose there is a "pause" button for running scripts?
[17:02:07] <Soliton> ^Z
[17:02:15] <Nomikos> *things started from crontab
[17:02:18] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 256 seconds)
[17:02:42] <Soliton> kill -s STOP
[17:02:44] <bn_work> so get rid of the function?
[17:03:02] <bn_work> and silence its output?
[17:03:54] <Soliton> wait i forgot the echo part.
[17:04:02] <bn_work> Soliton: wouldn't USER not get expanded with the way you've quoted it?
[17:04:17] <bn_work> at least locally
[17:04:18] <Soliton> it's not going to get injected, yes.
[17:04:26] <Soliton> same as in your paste.
[17:04:29] *** Joins: gh34 (~textual@cpe-184-58-181-106.wi.res.rr.com)
[17:05:08] <bn_work> hmm, in vim the syntax highlighting makes it seem like it would expand locally
[17:05:34] <bn_work> so $USER needs to expand in the code before it gets sent
[17:05:44] <bn_work> I think
[17:05:46] <Soliton> perhaps you want: printf %s "$password" | ssh -o ConnectTimeout=10 -n jdoe@host.domain.tld 'printf "%s ALL=(ALL) NOPASSWD: ALL" "$USER" | sudo -S tee "/etc/suoders.d/$USER" > /dev/null'
[17:05:59] <bn_work> or maybe it doesn't since I'd already be SSH-ed in as $USER?
[17:06:16] *** Joins: nickodd (~nickodd@user/nickodd)
[17:06:34] *** Joins: MajorBiscuit (~MajorBisc@wlan-145-94-218-48.wlan.tudelft.nl)
[17:07:57] <bn_work> does that make sense?
[17:08:06] *** Joins: Dr-007 (~Dr-007@92-108-90-26.cable.dynamic.v4.ziggo.nl)
[17:08:53] <Masklin__Gurder> Wait so
[17:08:54] <bn_work> if so, I assume the first way you wrote it would be fine?
[17:09:05] <Masklin__Gurder> ... should I not quote my expansions if I want them to become a path?
[17:09:33] <Soliton> what does "become a path" mean?
[17:10:00] <Soliton> if you want globbing to happen you can't quote and perhaps whatever you're doing is broken.
[17:10:53] <xmb> sorry to ask whats the mysql syntax, mysql -u user host <<<request ?
[17:11:25] <Soliton> mysql takes sql statements on stdin, yes.
[17:11:27] *** Joins: jdvr (~jdvr@user/jdvr)
[17:11:32] <Masklin__Gurder> Soliton: I don't need globbing to happen, so that means I can quote ja?
[17:11:50] <Soliton> !qefs
[17:11:50] <greybot> "$Quote" "$Every" "${F:-ing}" "$Substitution"
[17:11:53] *** Joins: nceric (~nceric@76-217-82-15.lightspeed.chrlnc.sbcglobal.net)
[17:11:59] <Soliton> !qefe
[17:11:59] <greybot> "$Quote" "$Every" "$Fucking" "$Expansion"
[17:13:13] <nceric> Hi, can someone recommend a simple templating tool to use from bash?  I know jinja2 exists but you have to use it from a Python script, there is no jinja2 cli.
[17:13:26] <Soliton> !template
[17:13:27] <greybot> http://mywiki.wooledge.org/TemplateFiles
[17:14:07] <bn_work> ugh, 1st form doesn't work :(  so I guess my theory was wrong??
[17:14:11] <xmb> i have a link system, binds function/* alias/* and suches to code
[17:14:22] <Dr-007> hey. question. ive replaced /usr/bin/vlc with a bash script that basicly does: /usr/bin/vlc_original "$@" so it passes all parameters/arguments trough. in these parameters there's --started-from-file filename.mp3 how can i "parse" these $@ parameters to only get filename.mp3?
[17:14:46] *** Joins: tangy (~tangy@user/tangy)
[17:15:02] <Soliton> !faq options
[17:15:02] <greybot> https://mywiki.wooledge.org/BashFAQ/035 -- How can I handle command-line options and arguments in my script easily?
[17:15:24] <Soliton> you should do: exec /usr/bin/vlc_original "$@"
[17:15:39] <Soliton> to not have the script hang around for no reason.
[17:15:45] <xmb> # set -- foo --file bar blah ; while (( ++i <= $# )) && n=${!i} ; do [[ $n == --file ]] && printf %s "${@:++i:1}" ; done
[17:15:47] <shbot> xmb: +i:1
[17:15:56] <Dr-007> it works without exec, why should i add that?
[17:16:00] <bn_work> Soliton: I don't get it, neither form is creating anything on the target server's /etc/sudoers.d dir?
[17:16:02] <Soliton> to not have the script hang around for no reason.
[17:16:03] *** Joins: skapata (~Skapata@2804:14c:87b0:9d2e:c42a:2dad:bcf1:880f)
[17:16:03] *** Quits: skapata (~Skapata@2804:14c:87b0:9d2e:c42a:2dad:bcf1:880f) (Changing host)
[17:16:03] *** Joins: skapata (~Skapata@user/skapata)
[17:16:11] <Dr-007> aaah, that does happen
[17:16:12] <Dr-007> nice
[17:16:30] <Soliton> also some caller might expect that the direct child is vlc and not your script.
[17:16:50] *** Joins: Hash (~Hash@irc.websecurity.group)
[17:17:00] <Soliton> bn_work: did you fix the path? what exactly did you execute? what happened?
[17:17:11] <xmb> # set -- foo --file bar blah ; while (( ++i <= $# )) && n=${!i} ; do [[ $n == --file ]] && printf %s "${@: ++i:1}" ; done
[17:17:13] <shbot> xmb: bar
[17:17:14] <xmb> Dr-007, ^
[17:17:45] <xmb> maybe no need of, misunderstandings
[17:17:45] <Dr-007> xmb, nice. ill try that
[17:17:57] <xmb> just replace --file with --right-arg or so
[17:18:30] <xmb> the set part sets the args, so u wont want that part, only the while loop
[17:18:35] <Soliton> not sure they want to replace anything. they just mentioned getting the filename.
[17:18:54] <bn_work> Soliton:  fixed, yes.  no errors from the script, just no file created on the server
[17:19:09] <nceric> thanks Soliton
[17:19:12] *** Joins: MaximB (~MaximB@2a0d:6fc2:5770:9400:5cdb:d79c:25ae:997e)
[17:19:25] *** Joins: texasmynsted (~texasmyns@99.96.221.112)
[17:20:37] <texasmynsted> What do you use for simple TUI when parameters are too simple and ncurses is too much? tput?
[17:20:43] *** Quits: herjazz (~herjazz@p10513117-ipngn24101marunouchi.tokyo.ocn.ne.jp) (Quit: leaving)
[17:20:57] <bn_work> Soliton:  output from that portion of script https://www.irccloud.com/pastebin/nFJgsojG/sudoers.d_file.bash
[17:21:02] <Soliton> when are parameters not enough?
[17:21:16] <Dr-007> xmb, it works great. now when i double click an audio / video file i get the filepath and thanks to Soliton the scrpt doesnt hang around anymore
[17:21:38] *** Quits: enoq (~enoq@194-208-178-35.lampert.tv) (Quit: enoq)
[17:21:42] <MaximB> Hi, how can omit errors, or "not found"? like  dpkg -s python6 | grep "Status" > /dev/null 2>&1 (I don't want to see any output here)
[17:21:57] <bn_work> target server distro is Ubuntu if that makes a diff
[17:22:23] <Soliton> MaximB: if you want to ignore stderr from dpkg then you need to redirect it there as well.
[17:22:34] <xmb> dpkg 2>&-
[17:22:43] <xmb> the dpkg needs the 2>  not the grep
[17:22:46] <Soliton> closing stderr is not usually a good idea.
[17:23:18] <xmb> yea sorry fast typing
[17:23:21] <MaximB> thanks
[17:23:24] <xmb> 2>/dev/null 'more proper'
[17:23:46] <texasmynsted> Soliton: When doing data entry for a RMDBS
[17:23:51] *** Quits: Sulky (~Sulky@2a04:cec0:105d:a5f0:6c4c:6a08:ab97:a6f3) (Remote host closed the connection)
[17:24:16] <Soliton> !dialog
[17:24:17] <greybot> Dialog makes it easy to generate menus, progress bars and forms for your scripts. See http://mywiki.wooledge.org/BashFAQ/040. Similar tools include whiptail, xdialog, kdialog, gtkdialog, zenity and kommander
[17:24:18] *** Joins: Sulky (~Sulky@2a04:cec0:105d:a5f0:6c4c:6a08:ab97:a6f3)
[17:25:08] *** Joins: King_julian (~King_juli@41.1.73.181)
[17:25:15] *** Quits: geirha (~geirha@user/geirha) (Ping timeout: 250 seconds)
[17:25:45] <bn_work> Soliton: any thoughts?
[17:26:01] <texasmynsted> okay. I will check some of the dialog alternatives
[17:26:25] *** Quits: Masklin__Gurder (~joel@bioinf-serv.biol.lu.se) (Remote host closed the connection)
[17:27:23] <Soliton> bn_work: printf %s "$password" | ssh -o ConnectTimeout=10 -n jdoe@host.domain.tld 'sudo -S sh -c '\''printf "%s ALL=(ALL) NOPASSWD: ALL\\n" "$1" | tee "/etc/sudoers.d/$1" > /dev/null'\'' sh "$USER"'
[17:29:29] <bn_work> Soliton: no difference
[17:29:32] *** Joins: Masklin__Gurder (~joel@bioinf-serv.biol.lu.se)
[17:30:00] <nceric> So I think I'll go for envsubst.  What's a good file extension for the template files?... .tpl or something?
[17:30:08] *** Quits: King_julian (~King_juli@41.1.73.181) (Ping timeout: 272 seconds)
[17:31:28] *** Joins: bluedust (~bluedust@89.238.143.232)
[17:34:49] *** Quits: lonewulf` (~lonewulf@user/lonewulf) (Quit: leaving)
[17:34:55] <Soliton> bn_work: then start with figuring out how you call sudo so it behaves like you want.
[17:35:36] <nceric> SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )  ... that's top Google result for getting the script's directory.  Is that still the best way?
[17:35:51] *** Quits: King_jul1an (~King_juli@41.1.73.181) (Ping timeout: 252 seconds)
[17:36:30] <Soliton> !faq location
[17:36:30] <greybot> https://mywiki.wooledge.org/BashFAQ/028 -- How do I determine the location of my script?  I want to read some config files from the same place.
[17:36:35] <Soliton> !caps
[17:36:35] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[17:37:01] *** Joins: masber (~masber@2001:620:808:1001::28f7)
[17:37:42] <Soliton> bn_work: you use ssh -n so input is not passed on...
[17:37:48] <nceric> Actually, this script will live in a Git repo under a "scripts" directory.  What I really want is the base directory of the Git repo.  I could use this ... `git rev-parse --show-toplevel`, but then it wouldn't work if someone downloaded a tarball instead of cloning
[17:38:13] <bn_work> Soliton: I thought -n makes it so it can accept input from stdin?
[17:38:24] <bn_work> ie:  allowing it to read the pw from the |?
[17:38:48] <Soliton> no idea how you could possibly read the documentation that way.
[17:39:00] <Soliton> "Redirects stdin from /dev/null (actually, prevents reading from stdin)."
[17:39:14] *** Joins: curvv (~quetzlcoa@192-143-59-98.ip.airmobile.co.za)
[17:39:15] *** Quits: curvv (~quetzlcoa@192-143-59-98.ip.airmobile.co.za) (Changing host)
[17:39:15] *** Joins: curvv (~quetzlcoa@user/curvv)
[17:40:50] <Soliton> nceric: perhaps don't try to guess and just require the caller to be in the correct dir.
[17:41:06] *** Quits: xmb (~xmb@178.197.209.111) (Ping timeout: 250 seconds)
[17:41:31] *** Joins: rando25892 (~homefame@user/rando25892)
[17:43:06] <nceric> Soliton that's an option too.  I'd like it executed from the top level of the git repo.  So the user would have to run ./scripts/some_script.sh ... should I just rely on documentation or should I enforce this somehow in the script itself?
[17:43:18] <Soliton> perhaps you can check for some file/dir to make sure whatever you expect to be there is really there.
[17:43:54] *** Joins: curvv_ (~quetzlcoa@192-143-57-45.ip.airmobile.co.za)
[17:43:56] <Soliton> if you can check that whatever preconditions you need are met, sure.
[17:44:04] *** Quits: curvv (~quetzlcoa@user/curvv) (Ping timeout: 272 seconds)
[17:45:57] <nceric> Soliton but then that means I'm again either using "git rev-parse --show-toplevel" or using BASH_SOURCE again.  So if I'm going through that trouble anyway I might as well make it so the script can be executed from anywhere
[17:46:17] <nceric> I don't know how else I'd enforce it without using one of those two options anyway
[17:46:22] <Soliton> why is that the precondition?
[17:46:24] *** Joins: luckiswithme (~luckiswit@149.167.160.200)
[17:46:37] *** Quits: ncrowl (~ncrowl@83-233-96-141.cust.bredband2.com) (Quit: leaving)
[17:46:40] <Soliton> what if you're at the top of the git repo and they deleted the files you need?
[17:46:51] *** Quits: lorimer (~lorimer@user/lorimer) (Quit: NAE TROOSERS)
[17:46:52] *** Joins: ncrowl (~ncrowl@83-233-96-141.cust.bredband2.com)
[17:46:56] <Soliton> check for what you actually need.
[17:47:57] <nceric> Okay, so whatever files I'm working on make sure they exist in some relative way.  If not I show an error message saying "Hey idiot, you're supposed to run this from the top directory; rtfm"
[17:48:28] <Soliton> yeah, something like that.
[18:04:38] *** Joins: geirha (~geirha@user/geirha)
[18:07:34] *** Joins: zer0bitz_ (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[18:08:08] *** Quits: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi) (Ping timeout: 272 seconds)
[18:08:42] *** Joins: kj (~kj@beta.aerisnetwork.net)
[18:10:34] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[18:11:50] *** Quits: zer0bitz_ (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi) (Client Quit)
[18:12:15] *** Joins: grettke (~grettke@cpe-65-29-228-30.wi.res.rr.com)
[18:12:37] *** Joins: karstensrage (~karstensr@nibbler.warped.com)
[18:12:59] *** Quits: karstensrage (~karstensr@nibbler.warped.com) (Changing host)
[18:12:59] *** Joins: karstensrage (~karstensr@user/karstensrage)
[18:14:05] *** Joins: jlj (~jlj@cpc77371-stav19-2-0-cust1487.17-3.cable.virginm.net)
[18:14:18] *** Inline__ is now known as Inline
[18:17:03] *** Quits: pyeverything (~pyeveryth@goku.bu.edu) (Remote host closed the connection)
[18:22:12] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 256 seconds)
[18:22:35] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[18:26:12] *** Joins: alienhead (~solas@user/alienhead)
[18:26:27] <texasmynsted> Is there something between tput and dialog?
[18:26:42] <texasmynsted> Or parameters and dialog?
[18:27:10] *** Joins: lorimer (~lorimer@user/lorimer)
[18:28:21] <Soliton> read -erp 'type stuff: ' data
[18:29:54] *** Joins: zer0bitz (~zer0bitz@dsl-hkibng32-54fbf8-224.dhcp.inet.fi)
[18:30:05] *** Quits: toulene (~toulene@user/toulene) (Quit: The Lounge - https://thelounge.chat)
[18:31:06] *** Joins: Kyuzo68 (~Kyuzo@host-79-47-39-235.retail.telecomitalia.it)
[18:31:08] *** Joins: nyex (~Thunderbi@177.84.107.26)
[18:31:08] *** Quits: luckiswithme (~luckiswit@149.167.160.200) (Remote host closed the connection)
[18:31:51] *** Quits: seninha (~chatzilla@user/seninha) (Quit: ChatZilla 0.9.93 [SeaMonkey 2.53.10.2/20220226204633])
[18:32:00] *** Joins: ryan_ (~ryan@sund-16-b2-v4wan-163196-cust822.vm5.cable.virginm.net)
[18:33:35] <nceric> if I have the name of a variable stored in a variable, how can I set it?  For instance, VAR_NAME="SOME_VAR", and now I want to set SOME_VAR to a value.
[18:33:52] <Soliton> !faq indirect
[18:33:52] <greybot> https://mywiki.wooledge.org/BashFAQ/006 -- How can I use variable variables (indirect variables, pointers, references) or associative arrays?
[18:34:28] <texasmynsted> okay
[18:35:00] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[18:35:16] *** Quits: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl) (Ping timeout: 250 seconds)
[18:35:48] *** Quits: jmdaemon (~jmdaemon@user/jmdaemon) (Ping timeout: 240 seconds)
[18:35:51] *** Quits: ryan_ (~ryan@sund-16-b2-v4wan-163196-cust822.vm5.cable.virginm.net) (Quit: ryan_)
[18:35:53] *** Joins: flower_ (~debian@217-123-218-6.cable.dynamic.v4.ziggo.nl)
[18:37:51] *** Joins: TheHermann (~TheHerman@gateway/tor-sasl/thehermann)
[18:38:03] *** Joins: nerdwolf (~nerdwolf@103.79.248.148)
[18:38:08] *** Quits: Kyuzo68 (~Kyuzo@host-79-47-39-235.retail.telecomitalia.it) (Quit: Konversation terminated!)
[18:40:28] <nceric> is there a preferred pastebin here?
[18:41:02] <llua> anything that doesn't require js
[18:41:17] <nceric> https://bpa.st/ZROA
[18:41:59] <nceric> That's what I'm trying to do.. tell me if I'm an idiot and there's a better way to do it.  Basically I want to present the user with the default or current value in parenthesis, but if they hit enter I need to set it to that value
[18:43:25] *** Quits: jaysicks (~jaysicks@178-164-166-32.pool.digikabel.hu) (Read error: Connection reset by peer)
[18:43:45] *** Joins: zeden (~zeden@user/zeden)
[18:43:48] <geirha> !varcap
[18:43:48] <greybot> By convention, environment variables (PATH, EDITOR, SHELL, ...) and internal shell variables (BASH_VERSION, RANDOM, ...) are fully capitalized. All other variable names should be lowercase. Since variable names are case-sensitive, this convention avoids accidentally overriding environmental and internal variables. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html
[18:45:19] *** Joins: guesswhat (~guesswhat@ip-89-177-103-59.net.upcbroadband.cz)
[18:45:22] <geirha> as for how to assign the default value, you can use namerefs (bash 4.4), printf -v (3.1), or eval
[18:46:16] <geirha> you can also enable readline on the read, and feed it an initial value with -i
[18:46:33] <geirha> read -p "$required_var: " -e -i "$current_value"
[18:46:56] <nceric> geirha, that would be perfect.... I'll use -i
[18:46:57] <geirha> read -p "$required_var: " -e -i "$current_value" "$required_var"
[18:47:35] <nceric> I'll likely be able to remove that initial conditional as well and just use the while loop
[18:47:46] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[18:47:55] *** Joins: dreamon (~dreamon@ppp-88-217-83-128.dynamic.mnet-online.de)
[18:48:01] *** Joins: unop (~unop@195.91.20.32)
[18:48:20] *** Quits: fcser (~fcser@booty.farted.net) (Excess Flood)
[18:48:27] *** Joins: fcser (~fcser@booty.farted.net)
[18:49:48] *** Quits: NoelFlantier3 (~Hubert@195.201.244.189) (Remote host closed the connection)
[18:50:10] *** Joins: NoelFlantier3 (~Hubert@195.201.244.189)
[18:50:43] *** Joins: junebug (~junebug@2600:1700:3db0:2540:e0bb:78f3:394e:a43d)
[18:52:45] *** Quits: on^ (~on@50.232.121.75) (Remote host closed the connection)
[18:53:14] <nceric> geirha thanks... https://bpa.st/RZ3A
[18:53:18] *** Quits: TheHermann (~TheHerman@gateway/tor-sasl/thehermann) (Remote host closed the connection)
[18:53:46] *** Joins: TheHermann (~TheHerman@gateway/tor-sasl/thehermann)
[18:55:19] *** Quits: ravan (~ravan@user/ravan) (Ping timeout: 256 seconds)
[18:59:41] *** Joins: igemnace (~ian@user/igemnace)
[18:59:48] *** Quits: bertvvvs (~bertvvvs@user/bertvvvs) (Quit: Y'all have a nice day.)
[19:00:01] <geirha> some_var_1-9 should be uppercase since they are environment variables (you export them)
[19:01:01] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[19:04:21] *** Quits: unop (~unop@195.91.20.32) (Remote host closed the connection)
[19:04:36] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 240 seconds)
[19:05:31] *** Joins: unop (~unop@195.91.20.32)
[19:08:51] *** Quits: KevinX (~KevinX@user/KevinX) (Read error: Connection reset by peer)
[19:09:39] *** Joins: KevinX (~KevinX@user/KevinX)
[19:09:59] *** Joins: Minvera (~Minvera@user/Minvera)
[19:10:03] *** Quits: yustin (~yustin@user/yustin) (Ping timeout: 256 seconds)
[19:11:11] *** Quits: MaximB (~MaximB@2a0d:6fc2:5770:9400:5cdb:d79c:25ae:997e) (Ping timeout: 256 seconds)
[19:12:58] *** Quits: _Vi (~vi0oss@2a0d:7c40:3000:1326::3) (Remote host closed the connection)
[19:15:12] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[19:18:26] *** Quits: KevinX (~KevinX@user/KevinX) (Ping timeout: 272 seconds)
[19:20:26] *** Joins: off^ (~off@50.232.121.75)
[19:20:30] *** Quits: azidhaka (~azidhaka@user/azidhaka) (Quit: azidhaka)
[19:25:21] *** Joins: richardm645 (~quassel@2600:8801:c507:b200:b1ea:dd80:4319:8643)
[19:26:56] *** Joins: richardm645_ (~quassel@2600:8801:c507:b200:d43c:d149:1e9d:eb1b)
[19:29:17] *** Joins: seninha (~chatzilla@user/seninha)
[19:29:46] *** Joins: jaggz (~jaggz@user/jaggz)
[19:30:05] *** Quits: icebearii[m] (~icebearii@2001:470:69fc:105::1:3135) (Quit: You have been kicked for being idle)
[19:30:38] <jaggz> I have some words on separate lines in a script... (they're file extensions, but I want to manage them each on their own line for some shallow reason).. yet I want them in the same file as my script
[19:31:03] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[19:31:09] <jaggz> is there a way to heredoc/herestring those so they end up output on one line?
[19:31:14] *** Quits: richardm645 (~quassel@2600:8801:c507:b200:b1ea:dd80:4319:8643) (Ping timeout: 260 seconds)
[19:31:16] <jaggz> sending them to echo is safe if it can be done
[19:31:19] <Soliton> extensions=(
[19:31:21] <Soliton> .foo
[19:31:23] <Soliton> .ba
[19:31:25] <Soliton> )
[19:31:26] <jaggz> good idea, thanks
[19:31:27] *** Parts: jubalh (~jubalh@nat1.nue.suse.com) ()
[19:32:15] *** Quits: anaveragehuman (~anaverage@user/anaveragehuman) (Ping timeout: 240 seconds)
[19:32:21] <jaggz> it's just a silly script "common-video-extensions"
[19:33:41] *** Joins: ChmEarl (~chmearl@user/chmearl)
[19:34:05] <Soliton> tr '\n' ' ' <<EOF
[19:34:07] <Soliton> .foo
[19:34:09] <Soliton> .bar
[19:34:11] <Soliton> EOF
[19:34:24] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[19:34:48] *** Quits: knstn (~knstn@ppp-94-66-57-121.home.otenet.gr) (Quit: leaving)
[19:34:52] *** Joins: trekkie1701c (~trekkie17@user/trekkie1701c)
[19:35:27] <jaggz> heh.. cool
[19:35:47] <jaggz> I wonder which uses less cpu
[19:35:48] <jaggz> ;)
[19:36:41] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 256 seconds)
[19:37:28] <Soliton> here-doc and external command are surely more work than printing the array.
[19:38:11] <Soliton> you also get no extra space at the end with the array.
[19:38:36] *** Quits: junebug (~junebug@2600:1700:3db0:2540:e0bb:78f3:394e:a43d) (Ping timeout: 240 seconds)
[19:38:57] *** Quits: libsys (~libsys@186.107.230.81) (Ping timeout: 240 seconds)
[19:40:28] *** Joins: libsys (~libsys@186.105.157.179)
[19:41:14] *** Quits: N0ZYC_ (~N0ZYC@173.16.166.245) (Ping timeout: 272 seconds)
[19:41:59] *** Joins: tedwing (~anon@lfbn-idf3-1-1415-210.w109-221.abo.wanadoo.fr)
[19:42:26] *** Joins: N0ZYC (~N0ZYC@173.16.166.245)
[19:42:58] *** Joins: KevinX (~KevinX@user/KevinX)
[19:44:30] *** Joins: ivaat (~yes@my.irc.rocks)
[19:46:03] <ivaat> I have issue. When running sshpass from bash script. sshpass is installed. rsync also. this happens: sshpass: Failed to run command: No such file or directory.. ja command selline /usr/bin/sshpass -p "$SSH_PW" "/usr/bin/rsync -avhi -e 'ssh -p 23' --link-dest=../../../$DAY1/home/MYSQL-BACKUPS/ /home/MYSQL-BACKUPS "$SSH_USER"@$SSH_HOST:media/host/backup__$DAY0/home/MYSQL-BACKUPS"
[19:46:20] <ivaat> when running same command from command line then all ok
[19:46:50] <Soliton> so you expect sshpass to call a shell?
[19:47:01] <Soliton> if it's sane then it does not.
[19:47:28] <ivaat> sshpass call a shell?
[19:47:48] <Soliton> clearly you assume so since you give it shell syntax.
[19:48:09] <ivaat> you mean variables?
[19:48:30] <Soliton> you don't give it variables, no.
[19:48:46] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Read error: Connection reset by peer)
[19:48:57] <Soliton> the variables you expand (which would make it shell injection).
[19:48:58] *** Joins: xmb (~xmb@178.197.209.111)
[19:49:16] *** Joins: cryptonector (~nico@24.28.108.183)
[19:49:28] <ivaat> are you bofing?
[19:49:30] <Soliton> the documentation suggest that it does not run a shell so just give it the command to run normally as multiple arguments.
[19:49:49] <Soliton> no idea what bofing is.
[19:49:59] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[19:50:20] <ivaat> command rsync is given
[19:50:31] <ivaat> you mean without variables?
[19:50:32] <Soliton> no, you give it a big string with rsync at the start.
[19:50:48] <ivaat> withous sshpass?
[19:50:51] <Soliton> # "echo foo bar"
[19:50:52] <shbot> Soliton: bash: echo foo bar: command not found
[19:50:53] <ivaat> -s+t
[19:50:54] <Soliton> # echo foo bar
[19:50:56] <shbot> Soliton: foo bar
[19:51:00] *** Quits: gr33n7007h (~gr33n7007@user/gr33n7007h) (Ping timeout: 240 seconds)
[19:51:33] <ivaat> ah now i understand but then rsync complains that missing " at end
[19:52:01] <Soliton> show the actual error and the actual command you used.
[19:52:32] <ivaat> oh now does not complain
[19:52:35] *** Joins: Masterphi (~Masterphi@user/masterphi)
[19:52:47] <ivaat> doh it does. Missing trailing-' in remote-shell command
[19:52:49] *** Quits: Brion (~Brion@gateway/tor-sasl/brion) (Remote host closed the connection)
[19:53:02] *** Joins: Brion (~Brion@gateway/tor-sasl/brion)
[19:53:14] <ivaat> but this is question rsync help i assume
[19:53:48] <quesker> I don't know what is going on there but the quotes are unmatched...
[19:54:42] *** Joins: gr33n7007h (~gr33n7007@user/gr33n7007h)
[19:55:31] * ivaat is digging
[19:56:38] *** Quits: nceric (~nceric@76-217-82-15.lightspeed.chrlnc.sbcglobal.net) (Quit: Client closed)
[19:57:10] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[19:57:39] <Soliton> i guess you did rsync -e "'" ... or something.
[19:58:42] *** Quits: wiscii (~tct@user/wiscii) (Quit: WeeChat 2.8)
[19:58:54] *** Joins: FluffyMask (~masque@user/fluffymask)
[19:59:31] *** Quits: thevishy (~Nishant@49.37.242.151) (Quit: Leaving)
[20:00:30] *** Quits: Payam98 (~Payam@138.106.57.131) (Quit: Client closed)
[20:00:47] *** Quits: lapsi (~lapsi@85.14.25.194) (Quit: Bye bye people :))
[20:01:51] <ivaat> found it. one variable needed quoting
[20:01:53] <jelly> wait, sshpass is basically like an expect script for one specific use and only dealing with ssh client's password prompt?
[20:02:33] *** Quits: mcint (mcint@user/mcint) (Ping timeout: 250 seconds)
[20:02:38] *** Quits: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4) (Remote host closed the connection)
[20:02:45] *** Quits: ivanakis (~ivanakis@46.10.161.208) (Ping timeout: 256 seconds)
[20:03:37] *** Quits: sinaowolabi_ (~SinaOwola@160.152.106.73) (Ping timeout: 240 seconds)
[20:04:10] *** Joins: mtk (~mtk@2601:185:200:70:20c:29ff:fe3e:59e4)
[20:04:45] <xmb> mebbi, havent tried, i know it works, dunno if it passes further stdin, prolly
[20:06:28] *** Joins: easyriders (~easyrider@xb9b5df82.cust.hiper.dk)
[20:06:51] *** Joins: junebug (~junebug@2600:1700:3db0:2540:bf5:909d:2368:7b02)
[20:08:54] <ivaat> Soliton: thank you for help and quesker you too!
[20:09:22] *** Joins: fedenix (~fedenix@gateway/tor-sasl/fedenix)
[20:10:24] *** Joins: toulene (~toulene@user/toulene)
[20:10:39] *** Joins: cyberbanjo (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8)
[20:11:17] *** Quits: junebug (~junebug@2600:1700:3db0:2540:bf5:909d:2368:7b02) (Remote host closed the connection)
[20:11:36] *** Joins: junebug (~junebug@2600:1700:3db0:2540:3499:533f:a41b:9450)
[20:11:43] *** Joins: j0hn_mc_clane (~j0hn_mc_c@ptr-fqhhm12iua58a0gd4hj.18120a2.ip6.access.telenet.be)
[20:11:49] <alkisg> jelly: if I understood correctly what you're asking, the SSH_ASKPASS variable is a hook that ssh provides to various frontends that may in turn receive the password. Frontends exist for both console and gui.
[20:12:20] *** Quits: cyberbanjo (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8) (Remote host closed the connection)
[20:13:10] *** Joins: bertvvvs (~bertvvvs@user/bertvvvs)
[20:13:40] *** Joins: cyberbanjo (~user@2607:fb90:4247:7118:8739:1e35:d38:1fb8)
[20:14:27] <jelly> alkisg, "sshpass" is a different, separate tool that ivaa't seems to be using
[20:14:54] <alkisg> Ah sorry didn't read that much above :)
[20:15:13] *** Quits: guesswhat (~guesswhat@ip-89-177-103-59.net.upcbroadband.cz) (Ping timeout: 256 seconds)
[20:15:49] *** Joins: wiscii (~tct@user/wiscii)
[20:16:06] *** Quits: wierzbowski (~wierzbows@dynamic-046-114-160-144.46.114.pool.telefonica.de) (Ping timeout: 256 seconds)
[20:17:34] <alkisg> Eeeh so I guess sshpass is trying to fool ssh into accepting the password from stdin, because it didn't know how to properly implement the SSH_ASKPASS mechanism :D
[20:18:14] *** Joins: sinaowolabi_ (~SinaOwola@102.134.114.1)
[20:18:39] *** Quits: rando25892 (~homefame@user/rando25892) (Ping timeout: 252 seconds)
[20:19:52] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Quit: AAAGH!  IT BURNS!)
[20:20:59] *** Joins: k8yun (~k8yun@user/k8yun)
[20:24:31] *** Quits: j0hn_mc_clane (~j0hn_mc_c@ptr-fqhhm12iua58a0gd4hj.18120a2.ip6.access.telenet.be) (Quit: Leaving)
[20:27:57] *** Joins: jetchisel (jetchisel@user/jetchisel)
[20:28:05] *** Joins: mcint (mcint@user/mcint)
[20:28:12] *** Quits: joo-_ (~joo-_@fsf/member/joo--) (Quit: Lost terminal)
[20:28:27] *** Joins: N0ZYC_ (~N0ZYC@173.16.166.245)
[20:28:55] *** Joins: joo-_ (~joo-_@80-62-117-227-mobile.dk.customer.tdc.net)
[20:28:55] *** Quits: joo-_ (~joo-_@80-62-117-227-mobile.dk.customer.tdc.net) (Changing host)
[20:28:55] *** Joins: joo-_ (~joo-_@fsf/member/joo--)
[20:29:31] *** Quits: N0ZYC (~N0ZYC@173.16.166.245) (Ping timeout: 245 seconds)
[20:30:27] *** Joins: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e)
[20:30:57] *** Quits: shad (~shad@user/shad) (Quit: WeeChat 3.0)
[20:31:15] *** Quits: Filohuhum (~dante@gateway/tor-sasl/filohuhum) (Ping timeout: 240 seconds)
[20:33:02] *** Quits: easyriders (~easyrider@xb9b5df82.cust.hiper.dk) (Ping timeout: 240 seconds)
[20:37:54] *** Joins: gareppa (~gareppa@user/gareppa)
[20:39:19] *** Quits: gareppa (~gareppa@user/gareppa) (Remote host closed the connection)
[20:41:48] *** Quits: dreamon (~dreamon@ppp-88-217-83-128.dynamic.mnet-online.de) (Ping timeout: 240 seconds)
[20:42:45] <quesker> looks like it has its own envvar to put the pass in, why use a different one?
[20:45:28] *** Quits: tex (~dix@user/dix) (Quit: Leaving)
[20:45:48] *** Quits: bertvvvs (~bertvvvs@user/bertvvvs) (Quit: brb)
[20:47:34] *** Joins: bertvvvs (~bertvvvs@user/bertvvvs)
[20:47:54] *** Joins: rgrinberg (~textual@187.223.141.66)
[20:48:58] *** Joins: cuppajoe (~joe@ip70-171-93-122.no.no.cox.net)
[20:50:43] *** Quits: tobybl (~tobybl@227.192.115.87.dyn.plus.net) (Remote host closed the connection)
[20:52:03] *** Quits: masber (~masber@2001:620:808:1001::28f7) (Ping timeout: 256 seconds)
[20:52:46] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[20:53:33] *** Quits: cuppajoe (~joe@ip70-171-93-122.no.no.cox.net) (Client Quit)
[20:59:29] *** Joins: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net)
[21:02:43] *** Quits: masoudd (~masoudd@user/masoudd) (Quit: Leaving)
[21:03:07] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[21:06:13] *** Joins: cthulchu (~Cthulchu@69-172-160-196.cable.teksavvy.com)
[21:06:26] *** Quits: lsrtl_ (~lsrtl@user/lsrtl) (Remote host closed the connection)
[21:06:26] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 260 seconds)
[21:06:50] *** Joins: lsrtl_ (~lsrtl@user/lsrtl)
[21:06:51] *** Quits: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[21:07:06] *** Joins: Maniac (~Maniac@vpn.mnsd.org)
[21:08:35] *** Joins: ___nick___ (~quassel@cpc68286-cdif17-2-0-cust533.5-1.cable.virginm.net)
[21:10:03] <Soliton> SSH_ASKPASS contains a program to call not the password itself. sshpass is all about circumventing best practices.
[21:11:06] *** Quits: ryo (foobar@user/ryo) (Quit: ZNC 1.7.2+deb3 - https://znc.in)
[21:11:34] <bn_work> Soliton:  sorry, boss pulled me away, tried w/o -n & still no difference?
[21:11:55] *** Quits: gabriele (~gabriele@user/gabriele) (Quit: Leaving)
[21:12:07] <quesker> ah ok.  well anyway yeah use a passwordless key or the agent
[21:12:12] *** Quits: MajorBiscuit (~MajorBisc@wlan-145-94-218-48.wlan.tudelft.nl) (Ping timeout: 256 seconds)
[21:12:58] *** Quits: jlj (~jlj@cpc77371-stav19-2-0-cust1487.17-3.cable.virginm.net) (Ping timeout: 268 seconds)
[21:13:00] *** Quits: seninha (~chatzilla@user/seninha) (Remote host closed the connection)
[21:13:16] *** Quits: rgrinberg (~textual@187.223.141.66) (Read error: Connection reset by peer)
[21:13:35] *** Quits: xx (~xx@user/xx) (Quit: xx)
[21:14:06] *** Joins: rgrinberg (~textual@187.223.141.66)
[21:15:23] *** Joins: dreamon (~dreamon@pd9503c39.dip0.t-ipconnect.de)
[21:15:29] <bn_work> I'm really stumped why this file simply isn't getting created :(
[21:16:20] <Soliton> start small and figure out where it doesn't do what you expect.
[21:17:04] *** Joins: Codaraxis_ (~Codaraxis@user/codaraxis)
[21:17:28] *** Parts: Kaedenn (~kaedenn@137.229.82.89) ()
[21:17:43] *** Quits: Maniac (~Maniac@vpn.mnsd.org) (Quit: Client closed)
[21:19:42] *** Quits: jdvr (~jdvr@user/jdvr) (Ping timeout: 252 seconds)
[21:20:04] <bn_work> I don't even know how to analyze that part of the file creation issue, no error is produced, adding -vv s to ssh will only make it log other ssh setup/teardown traffic noise
[21:20:20] *** Quits: off^ (~off@50.232.121.75) (Remote host closed the connection)
[21:20:37] *** Quits: Codaraxis (~Codaraxis@user/codaraxis) (Ping timeout: 240 seconds)
[21:21:25] *** Joins: xx (~xx@user/xx)
[21:21:30] *** Quits: Sulky (~Sulky@2a04:cec0:105d:a5f0:6c4c:6a08:ab97:a6f3) (Read error: Connection reset by peer)
[21:21:32] <Soliton> ssh host 'echo foo'
[21:21:34] <bn_work> if i manually run the xtraced command it works though
[21:21:39] <Soliton> ssh host 'sudo -S echo foo'
[21:21:42] <Soliton> ...
[21:22:13] *** Quits: dreamon (~dreamon@pd9503c39.dip0.t-ipconnect.de) (Ping timeout: 268 seconds)
[21:22:46] *** Joins: Sulky (~Sulky@2a04:cec0:105d:a5f0:671d:7b6:c54c:cf3a)
[21:24:37] *** Quits: Codaraxis_ (~Codaraxis@user/codaraxis) (Ping timeout: 240 seconds)
[21:26:42] <xmb> i had that too, on my ssh thing, thta it didnt run shit
[21:26:54] <xmb> then the solution was, 'oh i saw it runs them directly' 'my code was fail'
[21:27:55] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Read error: No route to host)
[21:29:16] <xmb> i guess: ps aux | grep ssh whatever your processes
[21:29:19] <xmb> make a sleep 10
[21:29:23] <xmb> ull see the error
[21:30:35] <bn_work> xmb: on the client-side?
[21:30:49] <bn_work> xmb:  how would that help?
[21:31:02] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[21:31:02] <xmb> on the server spawn side u change the local code to sleep 10 then ps aux on the remote host while riunning
[21:31:11] *** Joins: greknod (~grek@120.88.171.98)
[21:31:12] <xmb> i think u got some usage error but maybe not
[21:31:15] <xmb> can i see code ? :))
[21:32:38] *** Joins: zebrag (~chris@user/zebrag)
[21:32:49] *** Joins: emanuele6 (~emanuele6@user/emanuele6)
[21:33:05] *** Quits: Thanatermesis (~Thanaterm@191.92.148.122) (Quit: ɯlɐɔ uı ʞɹoʍ oʇ ƃuıoƃ)
[21:33:27] *** Joins: TTwrs (~TTwrs@c-73-162-3-127.hsd1.ca.comcast.net)
[21:34:00] *** Joins: easyriders (~easyrider@xb9b5df82.cust.hiper.dk)
[21:34:49] *** Joins: dreamon (~dreamon@p57a4c911.dip0.t-ipconnect.de)
[21:35:30] *** Quits: Caspy (~Caspy@86.126.149.203) ()
[21:36:41] <xmb> anyone know 'scrot' screenshotting tool ? how to make it screenshot only a specific window or position
[21:36:45] *** Quits: magla (~gelignite@55d4843f.access.ecotel.net) (Quit: Stay safe!)
[21:37:01] <xmb> position i know its an arg but who knows the positions, hmm i think my wm even shows em, ugh
[21:37:33] <selckin> scrot -s to pick window (by clicking)
[21:38:02] <bn_work> xmb: still not quite following, like run `watch ps faxww -f | grep ssh` ?
[21:38:08] <bn_work> on the server
[21:38:40] *** Joins: seninha (~chatzilla@user/seninha)
[21:38:43] <xmb> yea take a look if the process u created looks alright
[21:38:46] <Nomikos> grep for the code that you are running on the server
[21:38:46] <xmb> i found out mine were not
[21:39:25] <Nomikos> or well, inside watch ssh will appear and disappear so that'd also work
[21:39:39] <bn_work> Nomikos: what "code"?  it's ssh running 'sudo -S sh -c '\''printf "%s ALL=(ALL) NOPASSWD: ALL\\n" "$1" | tee "/etc/sudoers.d/$1" > /dev/null'\'' sh "$USER"'
[21:40:16] *** Quits: rgrinberg (~textual@187.223.141.66) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:40:45] <Nomikos> some of that should show up in ps, no? you can grep for that. but 'grep ssh' should also work
[21:40:57] *** Quits: samnob (~samnob@user/samnob) (Ping timeout: 240 seconds)
[21:41:02] *** Quits: nerdwolf (~nerdwolf@103.79.248.148) (Remote host closed the connection)
[21:41:47] <Nomikos> whenever I need to run a bunch of things on remote servers I usually scp a file overthere and run that. one day I'll sit down and learn ansible again..
[21:42:04] <bn_work> I don't know how I'll be able to "catch" anything though, as the above will probably run very quickly
[21:42:19] <Nomikos> xmb suggested introducing the sleep 10; for that reason
[21:42:37] <Nomikos> but in a one-liner that might be tricky, I don't know enough about it
[21:42:48] *** Joins: samnob (~samnob@user/samnob)
[21:42:57] <bn_work> Nomikos: like in the above code?
[21:43:09] <bn_work> "code"
[21:43:26] <Nomikos> well, yeah, but for it being a one-liner, indeed
[21:44:07] <Nomikos> what was the problem again, that it didn't run, or you weren't sure it ran, or it errord?
[21:45:27] *** Quits: TTwrs (~TTwrs@c-73-162-3-127.hsd1.ca.comcast.net) (Quit: Leaving)
[21:45:36] <bn_work> Nomikos: no file actually got created, specifically /etc/sudoers.d/$USER
[21:45:39] *** Joins: King_julian (~King_juli@41.1.137.161)
[21:45:53] <bn_work> all the above is doing is literally echo-ing some text to a file
[21:46:06] <Nomikos> bn_work: can you try adding something simple like '; touch ~/foobar' at the end of the remote command, see if that runs at all?
[21:46:08] <bn_work> but it needs sudo
[21:46:51] *** Joins: crashrep (~crashrep@user/crashrep)
[21:47:01] *** Quits: bluedust (~bluedust@89.238.143.232) (Ping timeout: 256 seconds)
[21:47:13] <Nomikos> hrm. I don't know much about that either. how do you supply a password to it?
[21:47:15] <bn_work> so 'sudo -S sh -c '\''printf "%s ALL=(ALL) NOPASSWD: ALL\\n" "$1" | tee "/etc/sudoers.d/$1" > /dev/null'\'' sh "$USER" ; touch ~/foobar' ?
[21:47:26] <Nomikos> basically yeah
[21:47:28] *** Quits: roadie (~user@2a02:8108:5a40:1d87:89d1:133a:f798:4627) (Quit: ERC (IRC client for Emacs 25.3.50.1))
[21:47:33] <xmb> whats the ssh command looking like
[21:47:36] <bn_work> (BTW, the code above is confusing to me, I still don't fully understand the escaping)
[21:47:41] <Nomikos> then if ~/foobar exists after, you'll know the thing at least ran
[21:47:46] *** Joins: masoudd (~masoudd@user/masoudd)
[21:47:58] <bn_work> xmb: ssh -o ConnectTimeout=10 ${USER}@${HOST}
[21:48:04] <xmb> and what arg
[21:48:07] <xmb> use this code as arg
[21:48:15] <xmb> put it in a var and do ssh -o .. host "$var"
[21:48:15] <bn_work> sorry?
[21:48:22] <xmb> i mean err
[21:48:24] <xmb> a bit nonworking
[21:48:33] <bn_work> there's no error output
[21:48:40] <xmb> but where u spawn it
[21:48:43] <xmb> u do ssh -o ., host
[21:48:46] <Nomikos> it's pretty unorthodox, but what I do is a 'double' ssh, once user, then again root@localhost, and then whatever command passed is run as root
[21:48:46] <xmb> no cmd no code
[21:49:05] <bn_work> xmb:  I run this from my local machine, if that's what you're asking?
[21:49:11] <xmb> no
[21:49:13] <xmb> u ssh
[21:49:19] <xmb> where is the remote_spawn_function code in that ssh
[21:49:22] <Soliton> you'd already figured out what is not working as expected if you just start simple and tried successively more complex versions...
[21:49:24] <xmb> u spawn ssh... no cmd
[21:50:01] <xmb> so it should look ssh -o .. host "$that_code_u_pasted_in_single_quotes" try
[21:50:07] <bn_work> xmb: remote_task ?
[21:50:10] <xmb> yes
[21:50:17] <xmb> not echo remote task | ssh
[21:51:21] <bn_work> xmb: that was tirnanog's initial suggestion, but Soliton suggested to remove that
[21:51:28] <xmb> err
[21:51:34] <xmb> well he corrected i saw
[21:51:44] <xmb> but anyway do as there as ssh var
[21:52:45] <bn_work> Nomikos: this needs to happen automatically though, hence the piping of the $password for sudo
[21:53:04] <xmb> go for arg last word
[21:53:31] *** Joins: vysn (~vysn@user/vysn)
[21:53:34] <Nomikos> bn_work: hm-mm. ssh-agent forwarding, no password needed. just make sure you secure the machine it runs from very well
[21:54:09] <xmb> got xsample
[21:56:23] <bn_work> Nomikos: I don't think ssh-agent handles sudo pw, does it?
[21:56:25] *** Quits: trekkie1701c (~trekkie17@user/trekkie1701c) (Quit: :P)
[21:56:47] <bn_work> xmb:  not understanding what you're saying :/
[21:57:02] <xmb> go for what tirn said and put it as arg
[21:57:06] <xmb> u wrote it already on irc
[21:57:13] <Nomikos> bn_work: it doesn't need to in my setup; it simply passes on the command to 'ssh root@localhost' on the remote, which doesn't require sudo
[21:57:13] <xmb> now append that single quote string as arg to ssh and run
[21:57:27] *** Joins: off^ (~off@50.232.121.75)
[21:58:07] <bn_work> Nomikos: so the server has been already configured with sudoers?
[21:58:44] *** Joins: speckz (~speckz@2600:1700:ce0:bf08:78b4:7c38:173b:e6b3)
[22:01:10] <Nomikos> bn_work: my public ssh key sits in the remote ~normaluser/.ssh/authorized_keys, and also in the remote ~root/.ssh/authorized_keys. then $ ssh -A normaluser@host ssh root@localhost "'${cmd}'"
[22:01:37] <xmb> he stated he wanted to remote initiate sudo rights etc
[22:01:39] <xmb> no keys
[22:02:02] <Nomikos> I know, I'm offering/explaining an alternative setup
[22:02:11] <xmb> ah, ye
[22:02:22] <xmb> but isnt there ssh-agent that u mentioned something
[22:02:30] <xmb> that may share the passphrase to further ssh's not sure
[22:02:34] <Nomikos> yes, that is active and required
[22:02:37] *** Joins: stanlib (~archblade@user/stanlib)
[22:03:10] <xmb> aha, okk, i just know auth_keys
[22:03:24] *** Quits: junebug (~junebug@2600:1700:3db0:2540:3499:533f:a41b:9450) (Ping timeout: 240 seconds)
[22:03:45] *** Quits: TheHermann (~TheHerman@gateway/tor-sasl/thehermann) (Quit: Leaving)
[22:03:47] <Nomikos> if there are users on the remote host with ill intent, ssh-agent forwarding has some risk
[22:03:59] <bn_work> xmb:  well, with tirnanog's help, I was able to finally get SSH keys added for at least the user account (not root account though, that is disabled- so it must be via sudoers file)
[22:04:12] <xmb> no idea mate why not more ?
[22:04:18] *** Joins: junebug (~junebug@2600:1700:3db0:2540:cadd:4ad0:c16d:dcf0)
[22:04:20] *** Joins: sudomann (~sudomann@98.219.211.182)
[22:04:22] <xmb> i mean
[22:04:38] <xmb> should i try make you a script ?
[22:04:44] <Nomikos> bn_work: there's a trick here :-) you can disallow the root user from logging in remotely over ssh (as we have) but _allow_ it to login from localhost
[22:05:48] *** Quits: vysn (~vysn@user/vysn) (Ping timeout: 240 seconds)
[22:06:18] <Nomikos> it needs a little tweak to /etc/ssh/sshd_config on the remote
[22:07:25] <Nomikos> basically "Match Host localhost\n  PermitRootLogin prohibit-password" -> overrides the general setting of disallowing root login, still requires keys instead of password
[22:07:46] *** Joins: Xanthaos (~ke4nhw@user/ke4nhw)
[22:07:57] <Nomikos> and then "Match User normaluser\n  AllowAgentForwarding yes"
[22:08:14] *** Joins: lavaball (felix@31.204.155.215)
[22:09:00] <Nomikos> disclaimer: this works for us, but it's pretty near the edge of my knowledge of ssh/bash/servers
[22:09:19] *** Parts: texasmynsted (~texasmyns@99.96.221.112) (WeeChat 3.4)
[22:10:04] <Nomikos> aaah found it https://adamssystems.nl/posts/using-ssh-instead-of-su-and-sudo/
[22:11:33] <bn_work> Nomikos: ok, so once that is enabled (which it sounds still requires sudo), people can sudo w/o a password?
[22:11:42] *** Quits: sinaowolabi_ (~SinaOwola@102.134.114.1) (Ping timeout: 256 seconds)
[22:11:50] <xmb> not sudo, ssh
[22:11:54] <xmb> or so if i understood right
[22:12:29] <Nomikos> xmb: correct, no sudo involved anymore
[22:12:36] *** Joins: larryv (~larryv@zsh/patchmanager/larryv)
[22:12:54] *** Joins: roadie (~user@2a02:8108:5a40:1d87:34fc:c71c:709a:17d5)
[22:13:06] <Nomikos> you ssh as normal user to the remote host, then you ssh from there to 'localhost' which is also the remote host, as root
[22:13:21] <xmb> bn_work, whats the usage of askpass or sshpass, sshpass -p pass ssh ?
[22:13:27] <Nomikos> because of ssh keys and ssh-agent forwarding you don't need passwords
[22:13:56] <larryv> the saga continues, i see
[22:14:23] <xmb> they used faulty variant and still no try fix
[22:16:06] <Nomikos> I'mma bow out, the url has what I tried to explain, maybe it helps, maybe not
[22:16:28] *** Quits: karakedi (~eAC53C340@user/karakedi) (Read error: Connection reset by peer)
[22:18:36] *** Joins: pyeveryt_ (~pyeveryth@dot1x-155-41-160-40.bumc.bu.edu)
[22:18:42] <pyeveryt_> hey how can i find number of unique files in a folder based on their first 10 letters?
[22:19:44] *** Joins: sobkas (~sobkas@95.175.17.217)
[22:22:56] <Nomikos> ls | cut -c1-10 | uniq | wc -l
[22:23:00] <Earnest> Why
[22:23:01] *** Joins: Thanatermesis (~Thanaterm@191.92.148.122)
[22:23:10] <xmb> lol!
[22:23:11] *** Quits: King_julian (~King_juli@41.1.137.161) (Quit: Lost terminal)
[22:23:11] <Earnest> Why do you suggest this
[22:23:18] <xmb> 'solution'
[22:23:34] <larryv> pyeveryt_: first 10 "letters" (characters, presumably) of their contents or their filenames?
[22:23:40] <phy1729> typeset -A a; for f in *; do a["${f:0:10}"]=1; done; printf '%s\n' "${#a[@]}"
[22:25:56] *** Joins: King_jul1an (~King_juli@41.1.137.161)
[22:26:56] <Earnest> Shame uniq(1p) doesn't have -w, only -s
[22:27:43] <xmb> no need for quotes in assignments..
[22:27:45] *** Joins: karakedi (~eAC53C340@user/karakedi)
[22:28:10] <Earnest> d# printf λoo | fold -b1 | while read -r c; do printf '%%%X' "'$c"; done
[22:28:11] <shbot> Earnest: %CE%BB%6F
[22:28:18] *** Joins: yolo (~xxiao@li1120-73.members.linode.com)
[22:28:38] <Earnest> hmm
[22:28:44] <Earnest> d# printf λooo | fold -b1 | while read -r c; do printf '%%%X' "'$c"; done
[22:28:45] <shbot> Earnest: %CE%BB%6F%6F
[22:28:51] <xmb> bn_work, u ssh to root initially ? cause the sudo users dont have sudo yet
[22:28:51] *** Joins: nceric (~nceric@76-217-82-15.lightspeed.chrlnc.sbcglobal.net)
[22:29:03] <phy1729> xmb: that's not just an assignment
[22:29:20] <Earnest> I wonder why it misses the first 'o'
[22:29:43] <Earnest> d# printf ooo | fold -b1 | while read -r c; do printf '[%%%X] ' "'$c"; done
[22:29:44] <shbot> Earnest: [%6F] [%6F]
[22:29:44] <bn_work> Nomikos: reading that doc you linked right now, especially that last section
[22:29:58] <xmb> cursed
[22:30:13] *** Joins: YaoNai (~YaoNai@user/yaonai)
[22:30:23] <Earnest> # printf ooo | fold -b1 | while read -r c; do printf '[%%%X] ' "'$c"; done
[22:30:25] <shbot> Earnest: [%6F] [%6F]
[22:30:27] <nceric> Trying to find the actual directory for /usr/lib/jvm/java.  I found the namei command but all I want is the final answer, not all the output it provides
[22:30:49] *** Quits: Inline (~Inline@p200300cd470c9c002556fbf58fa37daf.dip0.t-ipconnect.de) (Quit: Leaving)
[22:31:07] <Earnest> I suppose it's lack of newline
[22:31:19] *** Quits: han-solo (~hanish@user/han-solo) (Quit: leaving)
[22:31:20] <Earnest> So last 'o' is being dropped
[22:31:25] <xmb> bugreport plz
[22:32:20] *** Quits: alienhead (~solas@user/alienhead) (Remote host closed the connection)
[22:32:21] <Nomikos> Earnest: was my suggestion not ok?
[22:32:31] <Earnest> Nomikos: no, unfortunately
[22:32:40] *** Quits: dreamon (~dreamon@p57a4c911.dip0.t-ipconnect.de) (Ping timeout: 256 seconds)
[22:32:40] <Nomikos> ah ok. why not?
[22:32:47] <Earnest> Nomikos: !ls
[22:32:49] <e36freak> Earnest: if there's no newline at the end, the last line will still be read into the variable but read will exit 1 so the loop body won't run
[22:32:57] <Earnest> Yeah
[22:33:14] <Earnest> e36freak: Is this the same issue as !faq csv?
[22:33:15] <e36freak> nceric: are you looking for readlink?
[22:33:23] <Earnest> Sounds like realpath/readlink
[22:33:28] *** Joins: Inline (~Inline@p200300cd470c9c002556fbf58fa37daf.dip0.t-ipconnect.de)
[22:33:35] <Earnest> And then some PE to strip off basename
[22:33:39] <e36freak> Earnest: i'm not aware of any faq about csv
[22:33:48] <xmb> what was the user cmd to deficated edit /etc/passwd
[22:33:57] <Earnest> e36freak: IFS=, read -r a b c needing input to have trailing ,
[22:34:00] <xmb> chusermod or something
[22:34:11] <Earnest> Not sure which faq/pf it is
[22:34:21] <e36freak> Earnest: that would be read -d , needing it
[22:34:38] <Earnest> I thought it was IFS, hmm
[22:34:57] <Earnest> e36freak: Yeah https://mywiki.wooledge.org/BashPitfalls#IFS.3D.2C_read_-ra_fields_.3C.3C.3C_.22.24csv_line.22
[22:35:01] <e36freak> read only exits 0 when it actually sees whatever the delimiter is
[22:35:14] <nceric> got it Earnest... realpath /usr/lib/jvm/jre
[22:35:33] <Earnest> nceric: keep in mind realpath/readlink are both not portable
[22:35:37] <e36freak> that's a different issue
[22:35:44] <Earnest> Okay then
[22:35:48] <e36freak> similar, but not quite the same
[22:35:49] <Earnest> Thought it may be related
[22:36:24] <e36freak> has nothing to do with read's exit status
[22:36:28] <larryv> d# printf ooo | fold -b1 | while read -r c || [ "$c" ]; do printf '[%%%X] ' "'$c"; done
[22:36:30] <shbot> larryv: [%6F] [%6F] [%6F]
[22:36:30] <e36freak> similar kinda gotcha but different reason/mechanism
[22:36:33] <larryv> https://mywiki.wooledge.org/BashFAQ/001#My_text_files_are_broken.21__They_lack_their_final_newlines.21
[22:36:41] <e36freak> there you go
[22:36:49] *** Quits: tejr (~tejr@user/tejr) (Remote host closed the connection)
[22:36:53] <Earnest> # printf ooo | fold -b1 | while read -r c; true; do printf '[%%%X] ' "'$c"; done
[22:37:02] <Earnest> lol
[22:37:05] <shbot> Earnest: [%6F] [%6F] [%6F] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%\
[22:37:05] <shbot> Earnest: 0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%0] [%\
[22:37:05] <shbot> Earnest: and so forth... (but now the pastebin is sick of me)
[22:37:05] <e36freak> infinite loop
[22:37:08] <Earnest> Yeah
[22:37:10] *** Joins: tejr (~tejr@user/tejr)
[22:37:26] *** Joins: ivanakis (~ivanakis@46.10.161.208)
[22:37:28] <Earnest> I'm surprised shbot doesn't have more defense against that
[22:37:50] *** Quits: speckz (~speckz@2600:1700:ce0:bf08:78b4:7c38:173b:e6b3) (Quit: Textual IRC Client: www.textualapp.com)
[22:38:01] *** Quits: KevinX (~KevinX@user/KevinX) (Read error: Connection reset by peer)
[22:38:27] <Earnest> Nevertheless, this is an interesting way to get percent encoding
[22:38:32] <Earnest> And it is even posix
[22:38:37] *** Quits: junebug (~junebug@2600:1700:3db0:2540:cadd:4ad0:c16d:dcf0) (Ping timeout: 240 seconds)
[22:38:58] <xmb> whats the command to change /etc/passwd stuffs in batch
[22:39:13] <bn_work> xmb: as mentioned earlier, root is disabled, so I can't SSH to it
[22:39:38] <bn_work> as root that is
[22:39:51] <bn_work> xmb:  usermod?
[22:40:34] <xmb> but u tried sudo, adding a sudo file, that doesnt work of course cause u dont have root
[22:40:45] <Earnest> It appears fold cannot be used due to special treatment of newlines
[22:41:05] *** Joins: alienhead (~solas@user/alienhead)
[22:41:07] *** Joins: KevinX (~KevinX@user/KevinX)
[22:41:09] <Earnest> (posix fold says it doesn't treat then specially, but gnu fold seems to)
[22:41:15] <bn_work> xmb: it should be allowed via sudo, sudo on the server works, it just needs interactive auth, that's the problem
[22:41:26] *** Joins: yuesbeez (uid458354@id-458354.tinside.irccloud.com)
[22:41:58] *** Quits: crashrep (~crashrep@user/crashrep) (Quit: WeeChat 3.4)
[22:43:40] <xmb> okay
[22:44:46] *** Quits: lavaball (felix@31.204.155.215) (Remote host closed the connection)
[22:46:01] *** Joins: dreamon (~dreamon@p57a4c768.dip0.t-ipconnect.de)
[22:46:25] *** Quits: ilikeyou (~ilikeyou@ec2-18-219-166-223.us-east-2.compute.amazonaws.com) (Quit: leaving)
[22:51:38] *** Quits: tedwing (~anon@lfbn-idf3-1-1415-210.w109-221.abo.wanadoo.fr) (Quit: leaving)
[22:52:06] <bn_work> Nomikos: the ssh root@localhost once on the host is interesting, the problem is it sounds like one needs to update `/etc/ssh/sshd_config` to implement :(
[22:52:20] <Nomikos> bn_work: yes, one does
[22:52:49] <Nomikos> bn_work: sorry if I only muddled things up, only wanted to offer a possible alternative which has worked well for my work
[22:53:34] <bn_work> Nomikos: nono, this was helpful, thanks for sharing!
[22:53:38] *** Quits: emanuele6 (~emanuele6@user/emanuele6) (Ping timeout: 256 seconds)
[22:53:48] <bn_work> s/once/one/
[22:54:13] <bn_work> Nomikos: I'm trying to figure out how to get this point w/o sudo authentication, kinda a catch-22, lol
[22:55:09] <Nomikos> yeah, automating things that require authentication in a secure way is not trivial
[22:56:18] *** Quits: alienhead (~solas@user/alienhead) (Ping timeout: 272 seconds)
[22:56:23] *** Quits: KevinX (~KevinX@user/KevinX) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:56:38] *** Joins: emanuele6 (~emanuele6@user/emanuele6)
[22:57:54] <bn_work> Nomikos: right, well, it's just a one-time thing, once the above gets added, should not need to do it
[22:58:29] *** Joins: KevinX (~KevinX@user/KevinX)
[22:58:47] <xmb> ssh: Could not resolve hostname localhost:22: Name or service not known
[22:58:48] <xmb> ?
[22:59:02] <djph> oops
[23:01:19] *** Quits: troyt (troyt@2601:681:4100:d591:44dd:acff:fe85:9c8e) (Quit: AAAGH!  IT BURNS!)
[23:01:33] <bn_work> xmb: /etc/resolv.conf or /etc/hosts ?
[23:02:08] *** Joins: Maniac (~Maniac@vpn.mnsd.org)
[23:02:14] <xmb> no my faut i didnt -p
[23:02:15] <geirha> meh, who needs localhost when you have a whole internet out there
[23:02:48] *** Quits: Maniac (~Maniac@vpn.mnsd.org) (Client Quit)
[23:03:33] <xmb> i halfway finished my script for you bn, it just doesnt work yet but u may see something, sorry for its format i didnt write it so, its only for speed stacked up so, sorry,    http://ix.io/3RTu
[23:04:12] *** Quits: easyriders (~easyrider@xb9b5df82.cust.hiper.dk) (Ping timeout: 252 seconds)
[23:04:27] <xmb> is there a ssh command to only add the host to known_hosts for it doesnt ask anymore
[23:04:34] <xmb> or dont ask for confirmation option
[23:07:14] *** Quits: King_jul1an (~King_juli@41.1.137.161) (Ping timeout: 256 seconds)
[23:08:18] <xmb> http://ix.io/3RTx
[23:08:37] *** Quits: Masterphi (~Masterphi@user/masterphi) (Quit: Masterphi)
[23:08:53] <xmb> it sadly doesnt connect or something no idea havent figured, its i think the get it initially accepted to known_hosts
[23:09:27] <geirha> "simple_sudo". I've seen enough
[23:09:56] <xmb> thank you for discouraging my courage
[23:10:16] <geirha> you have a knack for writing unreadable code
[23:10:27] <xmb> :/ :)
[23:10:44] <Earnest> discouraging the bad is good
[23:10:48] <bn_work> xmb: that sites seems to be blacklisted by Avast?
[23:10:55] <bn_work> s/sites/site/
[23:10:57] <xmb> heh
[23:11:04] <Earnest> avast is wrong
[23:13:14] <xmb> bn_work, http://0x0.st/oZqw.txt   http://0x0.st/oZqx.txt
[23:13:47] <xmb> but im fail at adding to known hosts... at the if yes comes or is it prompting, hrmpf
[23:13:52] <xmb> yea i grep -q
[23:14:20] <xmb> hm i cant grep anymore
[23:16:51] *** Quits: ivanakis (~ivanakis@46.10.161.208) (Ping timeout: 252 seconds)
[23:17:06] <bn_work> I just need to output a file to /etc/sudoers.d/ that needs sudo
[23:17:33] <xmb> okay hold
[23:17:39] <bn_work> don't need to add authorized_keys
[23:18:22] <bn_work> already done that now
[23:18:39] <xmb> for automation i coded
[23:18:47] <bn_work> 'sudo -S sh -c '\''printf "%s ALL=(ALL) NOPASSWD: ALL\\n" "$1" | tee "/etc/sudoers.d/$1" > /dev/null'\'' sh "$USER" ;' (the escaping is still very confusing to me and I don't understand why it's escaped that way)
[23:19:11] *** Joins: dre (~dre@2001:8003:c932:c301:403f:9f61:c28b:c314)
[23:20:45] *** Quits: pyeveryt_ (~pyeveryth@dot1x-155-41-160-40.bumc.bu.edu) (Remote host closed the connection)
[23:21:15] *** Quits: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net) (Ping timeout: 252 seconds)
[23:23:24] *** Quits: nceric (~nceric@76-217-82-15.lightspeed.chrlnc.sbcglobal.net) (Quit: Client closed)
[23:24:17] <xmb> sudo -S seems to fail me
[23:25:33] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 268 seconds)
[23:25:43] <OnlineCop> !dotstar
[23:25:49] <OnlineCop> !globstar
[23:25:49] <greybot> In bash 4, when the globstar shell option is enabled ( shopt -s globstar ), the glob ** expands to all files and directories found recursively under the current directory, and **/ to all directories. Combinations like foo/**/*.txt work, but **.txt and foo** do not.
[23:26:33] *** Joins: magla (~gelignite@55d4843f.access.ecotel.net)
[23:26:45] <OnlineCop> Hrm. Trying to find info on how to show only directories, excluding '.' and '..', without a trailing '/' like if I were to run `ls -d .*/`
[23:27:08] <xmb> ,*/ but it ends with /
[23:27:11] *** Joins: Lord_of_Life_ (~Lord@user/lord-of-life/x-2819915)
[23:27:11] <xmb> if u dont want, remove it
[23:27:16] <OnlineCop> Or rather, `ls -d */ .*/`
[23:27:36] *** Quits: curvv_ (~quetzlcoa@192-143-57-45.ip.airmobile.co.za) (Quit: ktxbye)
[23:28:01] <xmb> # mkdir .foo .bar bleh >blah ; shopt -s dotglob nullglob ; dirs=( */ ) ; declare -p dirs
[23:28:04] <shbot> xmb: declare -a dirs=([0]=".bar/" [1]=".foo/" [2]="bleh/")
[23:28:05] *** Joins: King_jul1an (~King_juli@41.1.137.161)
[23:28:12] *** Quits: Lord_of_Life (~Lord@user/lord-of-life/x-2819915) (Ping timeout: 256 seconds)
[23:28:56] *** Quits: bertvvvs (~bertvvvs@user/bertvvvs) (Quit: Y'all have a nice day.)
[23:29:56] *** Lord_of_Life_ is now known as Lord_of_Life
[23:30:36] *** Joins: crashrep (~crashrep@user/crashrep)
[23:31:37] <OnlineCop> !nullglob
[23:31:37] <geirha> # touch file ; mkdir foo .bar ; shopt -s dotglob ; dirs=( */ ) ; ls -d "${dirs[@]%/}"
[23:31:37] <greybot> Causes unmatched globs to expand to nothing rather than themselves. shopt -s nullglob; files=(*); echo "There are ${#files[@]} files." - see: http://mywiki.wooledge.org/glob#nullglob
[23:31:41] <shbot> geirha: .bar  foo
[23:31:46] *** Quits: dreamon (~dreamon@p57a4c768.dip0.t-ipconnect.de) (Ping timeout: 272 seconds)
[23:32:20] *** Quits: zeden (~zeden@user/zeden) (Quit: WeeChat 3.4)
[23:32:34] <xmb> well i cant make it bn, nonoe helps, im at 'sudo no password was provided'
[23:32:56] <xmb> ah one more try..
[23:33:08] *** Joins: heldwin (~heldwin@user/asmodee)
[23:35:04] <OnlineCop> If I write a function that runs `shopt -s dotglob`, will that be local only to that function, or will it affect the terminal session that ran it?
[23:36:36] *** Quits: TheSilentLink (~TheSilent@user/thesilentlink) (Ping timeout: 240 seconds)
[23:37:11] *** Joins: TheSilentLink (~TheSilent@user/thesilentlink)
[23:40:11] <xmb> okay this works bn_work
[23:40:22] <xmb> ssh foo2@localhost $'read -r user ; read -r pass ; line=$pass$\'\n\'$user\ NOPASSWD:\ ALL ; sudo -S <<<"$line" bash -c \'cat >/etc/sudoers.d/\'$user' <<<$'foo2\nfoo'
[23:40:38] <xmb> foo2 is the user foo is the pass, once enter in ssh no sshpass yet
[23:41:34] <xmb> cat /etc/sudoers.d/foo2
[23:41:34] <xmb> foo2 NOPASSWD: ALL
[23:41:45] <sixwheeledbeast> -s means set you can -u unset it.
[23:41:55] *** Joins: greycat (~greg@209.142.155.49)
[23:42:06] <xmb> no it will be global
[23:42:10] <xmb> its not per function
[23:42:17] <xmb> only local vars are possibillity to functions
[23:42:23] <xmb> if u shopt its a global per process one
[23:42:29] <xmb> even more plus children
[23:42:32] <OnlineCop> Should I wrap it in (...) then?
[23:42:56] <xmb> yea
[23:45:01] *** Joins: w1r3d (~w1r3d@user/w1r3d)
[23:45:06] *** Quits: torresjrjr (~torresjrj@user/torresjrjr) (Ping timeout: 260 seconds)
[23:45:17] *** Joins: torresjrjr (~torresjrj@user/torresjrjr)
[23:48:44] *** Quits: roadie (~user@2a02:8108:5a40:1d87:34fc:c71c:709a:17d5) (Ping timeout: 252 seconds)
[23:48:59] *** Joins: yustin (~yustin@user/yustin)
[23:49:30] *** Joins: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net)
[23:49:32] <xmb> excepts its the wrong sudo line, u got your working one, peace
[23:50:48] <xmb> ssh foo2@localhost $'read -r user ; read -r pass ; line=$pass$\'\n\'$user\ ALL=\ NOPASSWD:\ ALL ; sudo -S <<<"$line" bash -c \'cat >/etc/sudoers.d/\'$user' <<<$'foo2\nfoo'
[23:51:31] *** Quits: Sulky (~Sulky@2a04:cec0:105d:a5f0:671d:7b6:c54c:cf3a) (Read error: Connection reset by peer)
[23:52:03] *** Quits: makara (~makara@196.214.171.83) (Ping timeout: 252 seconds)
[23:52:34] *** Joins: A|an (~Alan@173.216.48.26)
[23:52:36] *** Quits: makara1 (~makara@196.214.171.83) (Ping timeout: 252 seconds)
[23:53:23] *** Joins: makara (~makara@196.214.171.83)
[23:53:50] *** Joins: makara1 (~makara@196.214.171.83)
[23:54:15] <Nomikos> I wonder what'd happen if you just ran the chat logs through a clean install of linux
[23:54:53] <llua> a lot of syntax errors
[23:55:08] <llua> eventually a set -e, then rip.
[23:55:35] <Nomikos> I gather that is not something I should try out now
[23:56:10] <Nomikos> ah, exit thing
[23:56:11] <greycat> if you really want chaos, you'd do each command in a separate shell, so a single set -e (or whatever) won't cancel the whole project
[23:56:35] <greycat> still, more than half of the commands will probably just generate errors
[23:56:41] <Nomikos> for a second there I thought you were the bot and it had already happened on your system
[23:57:51] *** Quits: causasui (~causasui@c-68-60-125-136.hsd1.mi.comcast.net) (Quit: WeeChat 3.4)
[23:57:51] <Nomikos> just a thought experiment :)
[23:59:53] *** Quits: w1r3d (~w1r3d@user/w1r3d) (Quit: Leaving)
