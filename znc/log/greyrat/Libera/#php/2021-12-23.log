[00:12:33] *** Joins: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk)
[00:26:18] *** Quits: magla (~gelignite@55d41339.access.ecotel.net) (Quit: Stay safe!)
[00:30:50] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[00:37:57] *** Pokey is now known as ahorner
[00:38:02] *** ahorner is now known as Pokey
[00:49:46] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-630-171.w86-246.abo.wanadoo.fr)
[00:54:54] *** Quits: shokohsc (~shokohsc@lfbn-idf2-1-630-171.w86-246.abo.wanadoo.fr) (Quit: The Lounge - https://thelounge.chat)
[00:55:20] *** Quits: UsbSick (~UsbSick@2600:6c48:757f:e654:a863:efc5:fd1:1de4) (Remote host closed the connection)
[00:57:05] *** Joins: shokohsc (~shokohsc@lfbn-idf2-1-630-171.w86-246.abo.wanadoo.fr)
[01:10:27] *** Quits: Donitz (~Donitz@88-115-149-152.elisa-laajakaista.fi) (Ping timeout: 256 seconds)
[01:20:55] *** Quits: harpia (~harpia@143.208.84.235) (Quit: harpia)
[01:22:37] *** Joins: Donitz (~Donitz@88-115-149-65.elisa-laajakaista.fi)
[01:25:52] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[01:32:36] *** Quits: mr_gant (~mr_gant@103.192.80.185) (Ping timeout: 240 seconds)
[01:32:42] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Read error: Connection reset by peer)
[01:35:48] *** Joins: varrg (~varrg@h-176-10-198-245.A351.priv.bahnhof.se)
[01:40:06] *** Quits: guido (~guido@host-79-23-251-113.retail.telecomitalia.it) (Quit: WeeChat 3.3)
[01:47:16] *** Joins: mr_gant (~mr_gant@203-206-182-122.perm.iinet.net.au)
[01:48:03] *** Joins: darkstardevx (~darkstard@50.39.115.145)
[01:49:17] *** Quits: Donitz (~Donitz@88-115-149-65.elisa-laajakaista.fi) (Ping timeout: 252 seconds)
[01:50:36] *** Quits: otisolsen70 (~otisolsen@xd4ed80b5.cust.hiper.dk) (Quit: Leaving)
[01:50:41] *** Joins: Donitz (~Donitz@88-115-149-152.elisa-laajakaista.fi)
[02:08:53] <lembron> kinda random but: puppeteer hits php-in-apache, are there any other 'sidechannels' than a) get(cant use) b) cookies(cant use, domains not known before redirect) c) extraHeaders(cant use, produces CORS with cdn-ressources for not-allowed) d) OutOfBlinkCors/disable-web-security(cant use, i want cors erros, just not this one ;D)
[02:10:21] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Quit: Buh bye!)
[02:14:04] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[02:19:32] *** Quits: FESTIVUS-MAXIMUS (~thelounge@user/Kilroy) (Quit: Bye)
[02:20:17] *** Quits: varrg (~varrg@h-176-10-198-245.A351.priv.bahnhof.se) (Quit: Leaving)
[02:20:55] *** Joins: FESTIVUS-MAXIMUS (~thelounge@user/Kilroy)
[02:22:08] *** Quits: FESTIVUS-MAXIMUS (~thelounge@user/Kilroy) (Client Quit)
[02:23:44] *** Joins: FESTIVUS-MAXIMUS (~thelounge@user/Kilroy)
[02:34:27] *** Quits: LucaTM (~LucaTM@user/lucatm) (Quit: Textual IRC Client: www.textualapp.com)
[02:34:50] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[02:38:18] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[02:38:45] *** Quits: ProfSimm (~ProfSimm@87.227.196.109) (Remote host closed the connection)
[02:39:58] *** Quits: bobdobbs (~user@2406:5a00:4434:4c00:e2c1:6622:bbfa:cf95) (Read error: Connection reset by peer)
[02:39:59] *** Quits: pmercado (~pmercado@186.107.51.181) (Ping timeout: 256 seconds)
[02:40:16] *** Joins: bobdobbs (~user@2406:5a00:4434:4c00:305b:3c06:2e13:bb0d)
[02:42:18] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 260 seconds)
[02:55:46] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Remote host closed the connection)
[02:56:54] *** Joins: UsbSick (~UsbSick@2600:6c48:757f:e654:a863:efc5:fd1:1de4)
[03:15:17] *** Quits: junktext__ (~junktext@gateway/vpn/pia/junktext) (Ping timeout: 240 seconds)
[03:20:44] <Sammitch> wat
[03:22:44] *** Joins: sbrothy (~sbrothy@192038134172.mbb.telenor.dk)
[03:39:17] *** Quits: binary01 (~binary01@cpe-74-64-69-183.hvc.res.rr.com) (Ping timeout: 240 seconds)
[03:41:11] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[03:42:43] *** Quits: gxt (~gxt@gateway/tor-sasl/gxt) (Quit: WeeChat 3.3)
[03:44:00] *** Joins: gxt (~gxt@gateway/tor-sasl/gxt)
[03:45:36] *** Joins: binary01 (~binary01@cpe-74-64-69-183.hvc.res.rr.com)
[03:54:14] *** Quits: ms49434 (~ms49434@user/ms49434) (Quit: Leaving)
[04:24:03] *** Joins: Hiccup (cHoy@user/hiccup)
[04:50:34] *** Quits: TakinOver (~quassel@193.27.13.251) (Quit: https://quassel-irc.org - Chat comfortably. Anywhere.)
[05:03:20] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[05:10:44] *** Quits: Colt (~Colt@user/colt) (Remote host closed the connection)
[05:11:16] *** Joins: Colt (~Colt@user/colt)
[05:14:55] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[05:15:31] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 268 seconds)
[06:39:49] *** Quits: tabakhase (tabakhase@user/tabakhase) (Ping timeout: 240 seconds)
[06:42:17] *** Joins: z_lehinsun_ (~lehinsun@188.244.142.69)
[06:44:47] *** Quits: z_lehinsun (~lehinsun@188.113.178.220) (Ping timeout: 256 seconds)
[06:47:14] *** Joins: sakhd__ (~lehinsun@188.113.178.220)
[06:49:37] *** Quits: z_lehinsun_ (~lehinsun@188.244.142.69) (Ping timeout: 240 seconds)
[06:52:29] *** Joins: tabakhase (~tabakhase@user/tabakhase)
[07:00:43] *** Joins: Rockwood (~Rocky@user/rocky)
[07:11:19] *** Quits: onichomp (~onichomp@2806:264:4404:8210:2905:f8c0:f20c:69aa) (Read error: Connection reset by peer)
[07:13:38] *** Quits: Hiccup (cHoy@user/hiccup) (Ping timeout: 250 seconds)
[07:17:05] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 256 seconds)
[07:18:01] *** Joins: onichomp (~onichomp@2806:264:4404:8210:a950:2894:c0bc:5c55)
[07:37:47] *** Joins: pmercado (~pmercado@186.107.51.181)
[07:53:27] <Rockwood> hi i am getting 302 on fetch api response
[07:53:43] <Rockwood> response coming from PHP
[07:56:45] <__adrian> redirects are not all that unusual. how to follow them is a javascript question. https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch
[08:02:56] <Rockwood> JS people and online indicating it could be backend too
[08:03:22] <__adrian> is it your php script?
[08:04:13] <Rockwood> 2 sec showing
[08:04:35] <__adrian> no - is it your php script? or someone else's?
[08:07:16] <__adrian> this is important to decide where the problem is
[08:09:51] <Rockwood> https://kopy.io/S8Eh5
[08:09:55] <Rockwood> its mine
[08:10:12] <Rockwood> i am coded my self
[08:10:15] <__adrian> then, do you want to redirect? or no?
[08:10:28] <Rockwood> i don't want redirect
[08:10:34] <Rockwood> i need response there
[08:10:39] <__adrian> then don't redirect
[08:11:06] <Rockwood> but i am using ky api for make advanced fetch
[08:11:12] <Rockwood> that is not mine coided
[08:11:14] <Rockwood> coded
[08:11:15] <__adrian> fetch has nothing todo with it
[08:11:33] <__adrian> whereever in your php script that you're setting a "Location: " header, don't
[08:12:05] <Rockwood> ah okay
[08:12:25] <__adrian> presumably in your LoginController
[08:12:40] <__adrian> but... sounds like the kind of place you'd _want_ to redirect.
[08:12:50] <__adrian> i'll leave that to you to figure out / decide
[08:13:10] <Rockwood> wow
[08:13:12] *** Quits: sakhd__ (~lehinsun@188.113.178.220) (Remote host closed the connection)
[08:13:15] <Rockwood> but now 401
[08:13:33] <Rockwood> its my routing issue
[08:13:44] <__adrian> does your login controller redirect provide credentials?
[08:14:02] <Rockwood> actually
[08:14:06] <__adrian> like, "login successful, redirect >here< to get your auth token" ?
[08:14:12] <Rockwood> {"message":"Unauthenticated."}
[08:14:20] <__adrian> yes, that's what  401  means.
[08:14:53] <__adrian> IF your system expects you to follow the redirect to be logged in, then you'd probably want to follow it
[08:15:03] <Rockwood> actually i am trying to chk by session is user logged in
[08:15:29] <Rockwood> server's PHP
[08:15:35] <Rockwood> session
[08:15:57] <__adrian> can you tell me why you wrote the redirect code in the first place
[08:15:59] <__adrian> ?
[08:16:03] <__adrian> i can't guess
[08:16:12] <Rockwood> 2 sec 2 showing
[08:16:18] <__adrian> but it sounds like it was on purpose, and correct
[08:18:19] <Rockwood> https://kopy.io/Wg8mJ
[08:18:38] <Rockwood> i was using that route before auth
[08:18:55] <Rockwood> now i added that route after auth
[08:19:30] <Rockwood> now 401
[08:20:15] <Rockwood> now i have to chk session stuff
[08:20:17] <Rockwood> i think
[08:20:27] <Rockwood> what is your suggestion?
[08:22:21] <Rockwood> https://kopy.io/Tp42k  oops my first paste was wrong
[08:22:27] <Rockwood> sorry for that
[08:23:11] <__adrian> are you logged in when you get the 401?
[08:23:57] <Rockwood> yes
[08:24:02] <Rockwood> i logged in
[08:24:31] *** Quits: pmercado (~pmercado@186.107.51.181) (Ping timeout: 256 seconds)
[08:24:48] <__adrian> does the other endpoint there ("/home") work as expected, or does it give you a 401 also?
[08:25:11] <Rockwood> ("/home") correctly
[08:25:14] <Rockwood> works
[08:25:43] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[08:25:56] <__adrian> no idea then. BUT, why did you change this? your first question was about a 302 response. why did you move the route like this?
[08:27:55] <Rockwood> simply i wanna chk by backend is user logged in or not
[08:28:07] <Rockwood> i am sending request for chk it
[08:28:13] <Rockwood> as you can see
[08:28:31] <__adrian> i don't understand why you would move the route definition. suggest putting it back where it was.
[08:29:16] <__adrian> you need to figure out why you're redirecting. once you know that, you can decide whether NOT redirecting would work. i assume you added the redirect for a reason, after all.
[08:30:25] <__adrian> i'm off. nite
[08:30:52] <Rockwood> if user not logged in then its redirect on root url
[08:31:03] <Rockwood> anyway
[08:31:23] <Rockwood> now i need to focus on one thing
[08:31:43] <Rockwood> i ve target for work on
[08:32:05] <__adrian> "if user not logged in then its redirect on root url" sounds like you set up this route to require auth, but shouldn't have
[08:32:22] <__adrian> nite
[08:32:26] <Rockwood> cya
[08:32:28] <Rockwood> tc
[08:32:32] <Rockwood> back at night
[08:32:40] <Rockwood> bye and ty
[08:32:43] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[08:38:49] <Blondie101010> ohhh, his JS API client receives his 302 to login, and doesn't know how to handle the response
[08:40:52] *** Quits: onichomp (~onichomp@2806:264:4404:8210:a950:2894:c0bc:5c55) (Read error: Connection reset by peer)
[08:41:30] *** Joins: onichomp (~onichomp@2806:264:4404:8210:a950:2894:c0bc:5c55)
[08:44:37] *** Quits: led_belly (~led_belly@196.240.57.116) (Ping timeout: 240 seconds)
[08:50:50] *** Joins: led_belly (~led_belly@196.240.57.117)
[09:01:39] *** Parts: ash_worksi (~ash_m@user/ash-m/x-3292451) ()
[09:10:21] *** Quits: Warped (~Warped@user/warped) (Quit: We Gone! Bye Bye)
[09:13:15] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 256 seconds)
[09:20:52] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[09:26:50] *** Joins: jetchisel (jetchisel@user/jetchisel)
[09:31:13] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[09:32:31] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 256 seconds)
[09:35:15] *** Joins: darkstardevx (~darkstard@50.39.115.145)
[09:36:16] *** Quits: darkstardevx (~darkstard@50.39.115.145) (Remote host closed the connection)
[09:36:40] *** Joins: darkstardevx (~darkstard@50.39.115.145)
[10:00:32] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[10:28:29] *** Joins: The_Blode (~Blode@user/the-blode/x-7164444)
[10:29:01] *** Quits: The_Blode_ (~Blode@user/the-blode/x-7164444) (Ping timeout: 240 seconds)
[10:34:15] *** Joins: The_Blode_ (~Blode@user/the-blode/x-7164444)
[10:35:35] *** Quits: The_Blode (~Blode@user/the-blode/x-7164444) (Ping timeout: 268 seconds)
[10:45:29] *** Quits: onichomp (~onichomp@2806:264:4404:8210:a950:2894:c0bc:5c55) (Read error: Connection reset by peer)
[10:46:14] *** Quits: Colt (~Colt@user/colt) (Ping timeout: 260 seconds)
[10:46:41] *** Joins: Colt (~Colt@user/colt)
[10:49:09] *** Joins: onichomp (~onichomp@2806:264:4404:8210:3054:9c83:69b8:835)
[10:50:20] <Koopz> hmm... i have 4 tables that can have foreign keys in other tables... when elements from those 4 tables get deleted the references to those in the other tables should get set to null
[10:50:30] *** Quits: onichomp (~onichomp@2806:264:4404:8210:3054:9c83:69b8:835) (Read error: Connection reset by peer)
[10:51:09] *** Joins: onichomp (~onichomp@2806:264:4404:8210:3054:9c83:69b8:835)
[10:51:09] <Koopz> should i consider setting up real foreign keys with ON DELETE SET NULL in the database or write a function updating that stuff manually
[10:55:11] *** Joins: undefined_bob (~undefined@user/undefined-bob/x-5411918)
[11:03:09] *** Joins: ramblebamble (ramblebamb@gateway/vpn/protonvpn/ramblebamble)
[11:03:17] *** Quits: de-facto (~de-facto@user/de-facto) (Remote host closed the connection)
[11:03:36] *** Joins: de-facto (~de-facto@user/de-facto)
[11:04:43] *** Quits: de-facto (~de-facto@user/de-facto) (Remote host closed the connection)
[11:07:29] *** Joins: de-facto (~de-facto@user/de-facto)
[11:08:43] *** Joins: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:10:00] *** Joins: stenno (~stenno@user/stenno)
[11:15:22] *** Quits: ramblebamble (ramblebamb@gateway/vpn/protonvpn/ramblebamble) (Quit: WeeChat 3.3)
[11:16:18] <Koopz> wait, that'd mean i'd have to delete the constraint when the column get's deleted as well
[11:21:19] <Koopz> man making your php application mess with the db schema sure makes things complex
[11:26:59] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[11:33:01] *** Joins: edantes (~edantes@93-39-122-66.ip75.fastwebnet.it)
[11:42:58] <Koopz> hmm... no way to update an existing foreign key so i gotta drop it before changing a column and then add it again huh
[11:43:53] <Koopz> maybe discarding the constraints and manually setting references to null was an easier option after all
[11:43:57] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[11:45:35] *** Joins: LucaTM (~LucaTM@user/lucatm)
[11:46:06] *** Joins: Naktibalda (~Naktibald@88.135.22.17)
[11:49:23] *** Joins: stenno (~stenno@user/stenno)
[11:53:09] *** Quits: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.3)
[11:53:34] *** Joins: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[11:54:48] *** Quits: CapitalistPunk (~Capitalis@liledevil.xs4all.nl) (Remote host closed the connection)
[11:58:18] *** Quits: onichomp (~onichomp@2806:264:4404:8210:3054:9c83:69b8:835) (Read error: Connection reset by peer)
[12:00:07] *** Quits: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.3)
[12:00:19] *** Joins: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f)
[12:01:26] *** Joins: onichomp (~onichomp@2806:264:4404:8210:28fe:cc62:408b:6591)
[12:06:42] *** Joins: CapitalistPunk (~Capitalis@liledevil.xs4all.nl)
[12:11:42] *** Joins: operateur (~operateur@91.143.220.230)
[12:22:19] *** Quits: sbrothy (~sbrothy@192038134172.mbb.telenor.dk) (Read error: No route to host)
[12:27:35] *** Joins: bandit_za (~bandit@164.160.119.207)
[12:35:29] *** Joins: epolanski (uid312403@id-312403.helmsley.irccloud.com)
[12:37:49] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 256 seconds)
[12:38:18] *** Joins: stenno (~stenno@user/stenno)
[12:41:27] *** Quits: onichomp (~onichomp@2806:264:4404:8210:28fe:cc62:408b:6591) (Quit: onichomp)
[13:26:57] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[13:30:50] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[13:44:37] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[13:50:06] *** Joins: Warped (~Warped@user/warped)
[13:50:37] *** Quits: Donitz (~Donitz@88-115-149-152.elisa-laajakaista.fi) (Ping timeout: 240 seconds)
[13:52:23] *** Joins: Donitz (~Donitz@88-115-149-152.elisa-laajakaista.fi)
[13:52:48] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[14:25:17] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[14:25:37] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[14:33:15] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Quit: Leaving)
[14:33:45] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[14:35:29] *** Joins: stenno (~stenno@user/stenno)
[14:40:13] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 256 seconds)
[14:42:33] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Read error: Connection reset by peer)
[14:42:49] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[14:48:55] *** Joins: sambauer64 (~sambauer6@84.232.209.233)
[14:54:02] *** Joins: ms49434 (~ms49434@user/ms49434)
[14:54:43] <sambauer64> Hi. I have an issue. learning php and I want to make some dropdowns whose values are sent to a php file containing sql queries and the output is returned to be shown in a table. How can I do that without JS? https://justpaste.it/1pv29
[14:56:46] <AllenJB> Use a normal HTML form that refreshes the entire page.
[14:58:17] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[14:59:22] <AllenJB> You could use a form that submits to an iframe, but this is generally a bad idea because linking to another page that replaces the entire parent page becomes a lot more complex. Controlling the iframe to make the page look and work nicely (UX) can be problematic too.
[15:00:43] *** Joins: rb (~augh@theguntretort.com)
[15:10:15] *** Quits: bandit_za (~bandit@164.160.119.207) (Ping timeout: 256 seconds)
[15:22:18] <edantes> sambauer64 can you have the SQL query on top of the html, based on a $_GET value that is triggered by the dropdown links (e.g. <a href="?foo=bar">)?
[15:23:40] *** Quits: epolanski (uid312403@id-312403.helmsley.irccloud.com) (Quit: Connection closed for inactivity)
[15:23:53] *** Quits: guido (~guido@2001:b07:6455:ac4f:3641:5dff:fe55:2a8f) (Quit: WeeChat 3.3)
[15:26:47] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[15:28:13] <sambauer64> AllenJB: can you please show me an example?
[15:33:23] *** Joins: pmercado (~pmercado@190.22.82.102)
[15:47:51] <AllenJB> sambauer64: For a simple tutorial on posting a form and reading that post data: https://www.php.net/manual/en/tutorial.forms.php (ignore the last paragraph about XForms - they're no longer a thing). If you're still stuck, tell us specifically what part you're having trouble with.
[15:49:13] *** Joins: guido (~guido@host-79-36-252-78.retail.telecomitalia.it)
[15:49:37] <sambauer64> AllenJB, first of all I need the dropdown value to be taken only by selecting it, without pushing other buttons
[15:50:25] *** Joins: stenno (~stenno@user/stenno)
[15:51:55] *** Joins: psw (2b13331353@user/psw)
[15:54:11] <AllenJB> Without clicking a button, the only way to submit a form is with JS, attaching to the 'change' event. See https://stackoverflow.com/questions/7231157/how-to-submit-form-on-change-of-dropdown-list
[15:56:44] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[15:58:25] <sambauer64> Allen, yes, i have been able to do that with JS however I was thinking maybe there is another way with just PHP
[15:58:37] <stenno> actually pressing enter will also submit forms
[15:58:51] <stenno> form submit with php doesn't make sense
[15:59:05] <stenno> form submission is done by the client/frontend, not by the backend
[16:02:31] <sambauer64> ok
[16:02:37] *** Quits: binary01 (~binary01@cpe-74-64-69-183.hvc.res.rr.com) (Ping timeout: 240 seconds)
[16:02:56] <AllenJB> HTML pages and PHP cannot interact dynamically. In simple terms: A client sends a request (either a URL or form submission) to the server. PHP runs on the server-side and outputs a HTML page. This is then rendered by the client and the cycle repeats when a user does something.
[16:02:57] <AllenJB> JS is the client-side scripting language that's used to extra interactivity to pages on the client-side.
[16:03:41] <sambauer64> I have this product table https://pastebin.com/B9ETiJCs with 3 dropdowns. I am really stuck with passing the variable from just 1 dropdown (category) to the join_product_table() function from another sql.php I pasted.
[16:04:48] <sambauer64> one thing I was able to do was to have a JS listening for changes, put a json that calls a php file and there to do the output
[16:04:56] <sambauer64> but it seems very dirty to me
[16:05:20] <sambauer64> so I am trying to learn the better way to do it
[16:05:42] <sambauer64> the best practice if you will
[16:08:12] <sambauer64> in the first dropwdown i have value"1,2,3.." up to 50 because this was the only trick I was able to find to have the SQL query return  WHERE categorie_id IN ($categorieDropDown)
[16:08:40] <sambauer64> so it woud return all objects within al categories is nothin is selected in the dropdown
[16:12:08] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:12:45] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:14:13] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[16:14:29] <AllenJB> I would expect to see something like: $products = join_product_table(($_POST['product-categorie'] ?? "")); // product-categorie is passed as first parameter of join_product_table, or "" if form not posted
[16:14:29] <AllenJB> then in join_product_table something like: if ($productCategorie !== "") { $sql .= "WHERE categorie_id = ". $productCategorie"; }
[16:15:08] <AllenJB> If you're not familiar with passing parameters to functions: https://www.php.net/manual/en/functions.arguments.php
[16:16:38] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:17:39] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[16:17:54] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:17:55] <AllenJB> You should also read up on prepared statements with SQL. These prevent SQL injection attacks and other issues from corrupting queries. For an example of this with PDO see: https://www.php.net/manual/en/pdostatement.execute.php#refsect1-pdostatement.execute-examples
[16:19:05] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:19:46] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:19:56] *** Joins: toastloop (toastloop@user/toastloop)
[16:21:08] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Client Quit)
[16:21:21] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Remote host closed the connection)
[16:21:56] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:24:12] <sambauer64> That is a great tip for using the if empty statemetn to alter my sql query. thank you. however i don't understand where is $productCategorie being declared
[16:24:33] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[16:26:03] <AllenJB> sambauer64: As a function argument to join_product_table - see the link I gave. So something like: function join_product_table(int $productCategorie) {
[16:26:56] <AllenJB> sambauer64: Correction (because it could be ""): function join_product_table(string $productCategorie) {
[16:29:45] <sambauer64> ok, I have modified the function as you told me and it doesn't throw any SQL error. however upon selecting the values in the dropdown nothing get's passed
[16:30:05] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:30:42] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:31:17] <sambauer64> which i presume is a stupid question because I deleted the JS code...
[16:31:31] *** Joins: tirnanog (~tirnanog@user/tirnanog)
[16:32:35] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:33:16] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:35:27] <AllenJB> Are you submitting the form, either with a submit button or with JS?
[16:35:39] <sambauer64> no, that I was saying...
[16:35:48] <sambauer64> forgot about that part, i am working on a JS now
[16:36:30] <relipse> do you ever get stuck on the computer
[16:36:34] <relipse> like you can't get off
[16:36:48] <sambauer64> i do
[16:36:51] <sambauer64> :)
[16:37:02] <relipse> yeah it's a real struggle
[16:38:08] <sambauer64> so I could use ajax to do a POST to sql.php (which contains the function) with data: {category: value}
[16:38:12] <sambauer64> would this be ok?
[16:38:43] *** Joins: DevAntoine (~DevAntoin@2a01cb0d806782c161b4a36a62b58a8f.ipv6.abo.wanadoo.fr)
[16:38:51] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Remote host closed the connection)
[16:39:25] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:41:00] <Blondie101010> sambauer64:  if your front end knows anything about SQL queries, then you have a major design problem
[16:42:14] *** Quits: DevAntoine (~DevAntoin@2a01cb0d806782c161b4a36a62b58a8f.ipv6.abo.wanadoo.fr) (Read error: Connection reset by peer)
[16:42:16] <Blondie101010> it should know that the back end / API has a certain list of end points to handle the various cases needed, but not how
[16:43:25] *** Joins: DevAntoine (~DevAntoin@235.50.141.77.rev.sfr.net)
[16:44:17] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[16:45:22] <sambauer64> yes.. i was reading about that as well. If I put this on github it would be a great example of DON'T do it that way
[16:45:35] <sambauer64> however it's the only way I can learn
[16:45:38] <sambauer64> by doing
[16:45:58] <sambauer64> and redoing
[16:46:13] <Blondie101010> learning by doing/experimentation is fine, but not if you do things badly all the time
[16:47:26] <sambauer64> yea, first iteration of this small inventory app was writing SQL queries to a file and then reading them because that's about all I could do
[16:47:36] <Blondie101010> at this point, even if your application was functional, it should not be touched or seen by anyone
[16:47:40] <Blondie101010> so not very useful!
[16:47:50] <sambauer64> no, it's not usable
[16:48:35] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:48:45] <Blondie101010> considering that serious concern, that should be your very next thing to focus on
[16:49:15] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[16:49:26] <Blondie101010> how to separate process logic for structure AND security
[16:49:30] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[16:50:34] <sambauer64> so far I am using even console.log in JS to log just about anything i do, for debugging. so as I said, the app is a mess. but learning, thank you
[16:50:49] <sambauer64> it will be better over time
[16:51:09] *** Quits: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734) (Read error: Connection reset by peer)
[16:51:46] *** Joins: onichomp (~onichomp@2806:264:4404:8137:50c8:a068:26f2:5734)
[17:03:07] <sambauer64> ok, so I managed to have an ajax call that correctly selects the value of the dropdown and passes to sql.php as POST. however, in that sql.php i have multiple functions. is that an issue?
[17:04:55] *** Joins: fef (~thedawn@user/thedawn)
[17:08:27] *** Quits: toastloop (toastloop@user/toastloop) (Quit: Leaving)
[17:09:53] <Naktibalda> sambauer64: no, it isn't an issue. it is up to code in the global scope what functions to execute
[17:10:15] *** Joins: ProfSimm (~ProfSimm@87.227.196.109)
[17:17:28] <__adrian> relipse: maybe check your computer chair/desk for soda/pop/other sticky food spills
[17:17:54] <relipse> __adrian: lol well that's not what I meant
[17:20:52] <__adrian> nothing to be ashamed of
[17:21:09] <__adrian> you know, it's the holiday season, maybe you dropped some chocolates, or a candy cane
[17:21:39] <stenno> dropping some chocolate sounds like an euphemism for..
[17:21:51] <__adrian> yeah, it wasn't
[17:23:21] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[17:28:37] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Ping timeout: 240 seconds)
[17:29:00] *** Quits: jetchisel (jetchisel@user/jetchisel) (Ping timeout: 240 seconds)
[17:31:46] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 260 seconds)
[17:34:13] <relipse> need to upgrade to php 8, need motivation
[17:37:27] *** Joins: molt (~molt@178-222-245-206.static.isp.telekom.rs)
[17:42:05] <sambauer64> ok. i have find a monstrous workaround. a little ashamed but i will ask again for the best practice
[17:42:07] *** Quits: molt (~molt@178-222-245-206.static.isp.telekom.rs) (Ping timeout: 256 seconds)
[17:42:37] <sambauer64> https://pastebin.com/xe7Zjp2L
[17:42:59] <__adrian> ...what are you asking about / "working around"?
[17:43:01] <sambauer64> here is my new function. as you can see, I have added multiple variables that are passed from Ajax
[17:43:20] <__adrian> ok, 2 things stick out
[17:43:25] <sambauer64> and because I don't know how to combine the SQL queries, I have used WHERE 1=1
[17:43:34] <sambauer64> so aI cand add subsequent AND
[17:43:39] <__adrian> (1) this code has sql injection problems. DO NOT USE IT.
[17:44:00] <__adrian> as a rule of thumb, do not put $variables in your SQL - instead, pass data via :parameters.
[17:44:05] <__adrian> !+pdo_mysql prepare
[17:44:05] <php-bot> How to prepare a statement using PDO: https://gist.github.com/adrian-enspired/1ddd71511e01c1f609db
[17:44:41] <__adrian> for example,  "AND WHERE categorie_id = $productCategorie"  // >> NO <<
[17:44:51] <__adrian> "AND WHERE categorie_id = ?"  // yes
[17:46:04] <sambauer64> ok, understood. thanks
[17:46:07] <__adrian> (2) don't use globals. where your function _needs_ something, it should be an $argument. where you need something from your function, it should be returned.
[17:47:13] <sambauer64> so i can remove tha global $db part?
[17:47:15] <__adrian> as for your actual question, just collect all of the WHERE clauses you need in an array and then build the clause when you're done - if the array is empty, just don't add a where clause at all.
[17:47:27] <__adrian> you should remove it, yes. pass $db as an argument instead.
[17:47:39] <edantes> relipse upgrade from which ver
[17:47:44] <__adrian> but (1) is (1) on purpose, it's FAR more critical to fix
[17:48:11] <__adrian> as in, if this code is live on the internet right now, STOP and GO DELETE IT before you do anything else.
[17:48:25] <sambauer64> i undestand. this way i will learn some about sql injections too
[17:48:35] <__adrian> sure
[17:48:37] <sambauer64> no, the code is just sitting in my vm
[17:48:44] <sambauer64> not going live anywhere
[17:48:50] <__adrian> do you understand the idea? what's  happening when you have sql injection?
[17:49:05] <relipse> edantes: 5.6
[17:49:06] <sambauer64> yes, i unsestand the concept
[17:49:19] <__adrian> can you explain it very briefly?
[17:49:20] <sambauer64> they can alter it to get other data from the db
[17:49:28] <__adrian> (it can be explained in one word, even)
[17:49:32] <__adrian> nope
[17:49:35] <sambauer64> i mean if the input is not sanitzez?
[17:49:38] <sambauer64> sanitized?
[17:49:40] <__adrian> nope
[17:50:09] <sambauer64> then please explain as it seems it's not clear to me
[17:50:17] <__adrian> not "how to fix" or "what the result is." rather, explain the idea. the cause.
[17:50:31] <edantes> relipse feeling your pain, same situation
[17:50:38] <__adrian> there are two parts to your SQL. the SQL itself is _code_. then there is _data_ - values.
[17:51:02] <tirnanog> the general premise is that of user controlled data being able to constitute arbitrarily executed code.
[17:51:10] <__adrian> e.g., SELECT x FROM y WHERE z = 'hello'  ← most of that is SQL. 'hello' is data.
[17:51:35] <sambauer64> yes, and they can input arbitraru data in there?
[17:51:38] <__adrian> tirnanog: thinking that way leads to the assumption that you can't do sqli by accident, to yourself. which is not true  ;)
[17:52:12] <sambauer64> even if it is a dropdown?
[17:52:21] <tirnanog> __adrian: developers can be users too.
[17:52:22] <__adrian> ...yes
[17:52:27] <__adrian> hold that thought
[17:52:31] <__adrian> sql injection happens when you have something that's _supposed to be _ data, but is interpreted as _sql_ instead.
[17:52:33] <sambauer64> actualy i have a seach field
[17:52:50] <__adrian> the word i use is _confusion_
[17:53:08] <__adrian> sqli is when you're confused about which parts of your query are SQL and which parts are data.
[17:53:51] <__adrian> when you do "select x from y where z = '$z'" you're putting the sql and the data in the same place. you can no longer tell them apart. neither can the DB.
[17:54:13] <__adrian> it's all mixed together and whether it works depends entirely on what was in $z.
[17:54:28] <__adrian> i.e., it might work, but that's only an accident.
[17:55:10] <__adrian> when you use parameters, like "select x from y where z=?"  it's completely different. see how there's NO DATA?  it's ONLY sql?
[17:55:25] <__adrian> it's impossible to confuse the two.
[17:55:26] <sambauer64> yes
[17:55:47] <__adrian> not even the database puts the two together.
[17:56:06] <__adrian> there's zero chance for confusion, so zero chance for sqli.
[17:56:39] <__adrian> back to your "dropdown" question:
[17:56:47] <relipse> edantes, what is your motivation for finishing?
[17:56:51] <__adrian> _nothing_ you do in the browser is for security.
[17:56:55] <relipse> i totally just ordered a PHP 8 hoodie today
[17:57:00] <relipse> my Christmas present to myself
[17:57:03] *** Quits: joachimo (~joachimo@cloud02.joachimopdenakker.be) (Quit: The Lounge - https://thelounge.chat)
[17:57:04] <__adrian> _everything_ you do in the browser is for user convenience.
[17:57:16] *** Joins: Anticom (~anticom@87.190.49.75)
[17:57:22] <__adrian> e.g., a dropdown is nice because it helps the user know which values are ok/expected.
[17:57:36] <__adrian> but that doesn't mean i (anyone) can't send you a different value.
[17:57:40] <sambauer64> then for security i have to 'work' in the backend, my code
[17:57:52] <__adrian> **always** validate on the backend, yes.
[17:58:11] <edantes> relipse finish as in ending my life after having toyed with this ancient codebase?
[17:58:42] <edantes> relipse http://mlaphp.com/ highly suggested read btw
[17:58:49] <__adrian> question: what if your form was a test about sql, and so the dropdown has values like "select x from y where z='don't do this'" ?
[17:58:51] *** Joins: magla (~gelignite@55d4c16b.access.ecotel.net)
[17:59:02] <__adrian> if i submit that value, it's correct (valid), yes?
[17:59:06] <sambauer64> yes
[17:59:12] <__adrian> but does that mean it can go into your sql?
[17:59:17] <sambauer64> no
[17:59:27] <sambauer64> bobby drop tables :))
[17:59:31] <__adrian> people mix up these ideas a lot also
[17:59:39] *** Joins: joachimo (~joachimo@cloud02.joachimopdenakker.be)
[17:59:41] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 250 seconds)
[17:59:54] <__adrian> "valid" does not mean "safe."  you should remove the word "safe" from your vocabulary. it means nothing.
[18:00:16] *** Joins: stenno (~stenno@user/stenno)
[18:00:21] <sambauer64> thank you for taking the time to explain
[18:00:22] <__adrian> so when you get inputs, you validate them. you do not (ever) "sanitize" inputs or "make them safe."
[18:00:59] <__adrian> when you go to do sql, you use parameters. when you go to make a webpage, you encode text with htmlspecialchars(). and so forth.
[18:01:09] <__adrian> np, welcome
[18:01:19] *** Quits: joachimo (~joachimo@cloud02.joachimopdenakker.be) (Client Quit)
[18:01:48] *** Joins: joachimo (~joachimo@cloud02.joachimopdenakker.be)
[18:02:11] <__adrian> you have an idea of how to fix your function wrt (1) and (2)?
[18:02:57] <sambauer64> well, 1st i presume I have to use paramters. I read your example and it seems cleaner but I cannot understand why sqli is prevented by that
[18:03:11] <__adrian> "> mlaphp  highly suggested read btw"  lol, it's an advertisement
[18:03:34] <__adrian> sambauer64: so the confusion happens in the database
[18:04:15] <__adrian> when sql and data are all together, the DB can't understand which was _supposed to be_ which. it can only "take your word for it" that everything is correct. and if it's not exactly correct, then you have sqli.
[18:04:46] <__adrian> using parameters (via prepared statements), the sql and the data are literally never put together.
[18:04:56] <__adrian> the sql goes to the DB in one trip, with no data.
[18:04:59] <relipse> i've read much of mlapha
[18:05:03] <relipse> it was a while ago
[18:05:10] <__adrian> the data goes to the DB in a later trip, with no sql.
[18:05:30] <sambauer64> and for 2) removing global and then passing arguments for the function as Category, Location, searchname
[18:05:40] <relipse> basically what __adrian is saying sambauer64 is prepared statements always
[18:05:50] <__adrian> even the DB doesn't put them together. it looks at the sql first and makes its execution plan. then later, when it's carrying out that plan, it uses the data.
[18:06:21] <__adrian> plan doesn't change, even if the data has sql in it. the DB knows it's just data, and not sql.
[18:07:15] *** Quits: operateur (~operateur@91.143.220.230) (Quit: WeeChat 3.3)
[18:07:17] *** Joins: Cork (~Cork@user/cork)
[18:07:29] <__adrian> imagine directions to someone's house in a crazy town that has street names like "turn left on main street."
[18:08:02] <__adrian> "go to third street and then turn right on turn left on main street."
[18:08:07] <sambauer64> yes, makes sense
[18:08:08] <__adrian> confusing?
[18:08:12] <sambauer64> yes
[18:08:31] <__adrian> separate them:  "go to third street and then turn right on ____."  "turn left on main street"
[18:08:35] <__adrian> now obvious
[18:09:28] <__adrian> https://www.boredpanda.com/blog/wp-content/uploads/2016/06/funny-literal-cake-decorations-fails-4-57626ad71e2f5__605.jpg
[18:09:34] <__adrian> this ^ is sql injection
[18:09:47] <__adrian> (on a cake)
[18:10:08] <sambauer64> https://bobby-tables.com/
[18:10:12] <sambauer64> funny
[18:10:16] <sambauer64> and this one too
[18:10:27] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Ping timeout: 256 seconds)
[18:10:49] *** Quits: DevAntoine (~DevAntoin@235.50.141.77.rev.sfr.net) (Remote host closed the connection)
[18:14:17] *** Quits: Cork (~Cork@user/cork) (Ping timeout: 240 seconds)
[18:14:28] <sambauer64> if ($searchname !== "") { $sql .= " AND p.name LIKE :searchname";
[18:14:48] <sambauer64> this would be how to pass parameters?
[18:15:12] <__adrian> yes
[18:15:26] <sambauer64> ty
[18:15:52] <__adrian> i'll show you a different approach than concatenating in a moment
[18:16:14] <sambauer64> awesome
[18:17:00] <__adrian> also there are some caveats with LIKE  ;)
[18:17:14] *** Joins: tercaL (~tercaL@user/tercal)
[18:20:57] *** Quits: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net) (Ping timeout: 240 seconds)
[18:21:09] *** Joins: mishehu (~mishehu@mira001.eyepeeveesicks.shavedgoats.net)
[18:21:17] <__adrian> $where = []; if (! empty($searchname)) { $where[] = "p.name = :searchname"; }  /* later ... */  if (! empty($where)) { $sql .= "WHERE " . implode(" AND ", $where); }
[18:21:44] <__adrian> this way, you just don't have a WHERE clause is there's no where clause.
[18:22:03] <sambauer64> lost it
[18:22:22] <sambauer64> trying to understand
[18:22:41] <__adrian> this part's less important, worry about the parameters first.
[18:22:48] <sambauer64> yes
[18:22:51] <__adrian> we can make a complete example later
[18:22:54] <__adrian> bbl
[18:25:57] *** Joins: thiras (~thiras@user/thiras)
[18:26:31] *** Joins: DevAntoine (~DevAntoin@235.50.141.77.rev.sfr.net)
[18:29:03] <sambauer64> parameter is :$searchname or just :searchname? because the text editor in PHP mode sees whole query as one
[18:29:04] *** Quits: tercaL (~tercaL@user/tercal) (Quit: enter the Tekken!)
[18:30:09] *** Quits: Anticom (~anticom@87.190.49.75) (Remote host closed the connection)
[18:31:00] *** Quits: DevAntoine (~DevAntoin@235.50.141.77.rev.sfr.net) (Ping timeout: 240 seconds)
[18:31:50] <tirnanog> :searchname would be a named parameter (in PDO), whereas ? would be a positional one.
[18:32:14] <tirnanog> so, not :$searchname.
[18:34:18] *** Joins: ferdna (~ferdna@user/ferdna)
[18:37:31] <stenno> tirnanog: are you a mystic knight
[18:37:44] <tirnanog> it sounds fetching but, alas, no.
[18:38:23] <stenno> https://en.wikipedia.org/wiki/Mystic_Knights_of_Tir_Na_Nog
[18:38:41] <stenno> (sorry for the offtopic)
[18:38:55] <tirnanog> ah. this is new to me. some people associate it with the old ZX Spectrum game instead.
[18:39:40] <stenno> aah nice
[18:43:28] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[18:45:20] <sambauer64> i have the AJAX script that passes dropdown values to a php script. how can I debug and check whether I pass anything correctly? I have a console.log and seems the values are correct however i get nothing from the php
[18:46:13] <sambauer64> which doesn't neccesarly mean the values are not passed to hte PHP, it could also mean there are issues with my return code as well
[18:46:22] <AllenJB> sambauer64: The browser dev tools network tab will show you what the server sent (click on a request in the list to view details).
[18:47:03] <AllenJB> *show you what the client sent to the server
[18:47:15] <sambauer64> 200 ok POSt to sql.php
[18:47:27] <AllenJB> You can also see the raw response from the server which can help if the response was malformed in some way
[18:47:38] <relipse> anyone in here integrate php and paypal?
[18:48:35] <sambauer64> AllenJB: response is blank
[18:49:11] <AllenJB> relipse: Especially given that Paypal has multiple different integration options and there are multiple API libraries you might be using, you should ask a specific question, detailing the problem you're having integrating with Paypal
[18:49:46] <sambauer64> however if the sql query or function would be incorrect, the table should not show anything. and it shows everyhing i have in table products
[18:50:10] <sambauer64> just not caring if i select a certain category or location
[18:51:45] <sambauer64> being a post, should i get a response?
[18:52:18] <AllenJB> sambauer64: You might want to check what the SQL statement being run is
[18:52:32] <AllenJB> sambauer64: Yes, POST requests should always return a response
[18:53:41] <sambauer64> AllenJB this one is the SQL function. https://pastebin.com/83XG6HHv
[18:53:48] <sambauer64> i have some others in there as well
[18:53:57] <sambauer64> but not the same parameters
[18:55:46] *** Joins: Anticom (~anticom@87.190.49.75)
[18:55:48] <AllenJB> sambauer64: You want to log or print the SQL query being run when you make a request, so you can see if your code is doing what you think it is.
[18:56:35] <AllenJB> sambauer64: I can't see how the value $productCategorie is passed to the code that actually prepares and executes the SQL statement from that pastebin.
[18:57:25] <sambauer64> https://pastebin.com/Z4YKCEMf
[18:57:44] <sambauer64> i have an ajax that does that. in console log the values are correctly shown
[19:01:08] *** Joins: junktext__ (~junktext@gateway/vpn/pia/junktext)
[19:02:37] <AllenJB> I'm talking about the code  that's in the find_by_sql() function. That should be preparing the query stored in $sql, then executing it with something like ["productCategorie" => $productCategorie] (when the value is passed) to insert the value where you've put the :productCategorie placeholder
[19:02:37] <AllenJB> (see the examples on https://www.php.net/manual/en/pdostatement.execute.php#refsect1-pdostatement.execute-examples )
[19:08:44] *** Quits: undefined_bob (~undefined@user/undefined-bob/x-5411918) (Quit: WeeChat 1.5)
[19:09:36] *** Quits: Anticom (~anticom@87.190.49.75) (Remote host closed the connection)
[19:13:02] *** Joins: hh (~g@37.214.57.116)
[19:21:59] *** Joins: Anticom (~anticom@87.190.49.75)
[19:23:07] *** Quits: Anticom (~anticom@87.190.49.75) (Client Quit)
[19:30:57] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[19:31:02] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[19:39:51] <sambauer64> i capitulate
[19:40:00] <sambauer64> i'm unable to find the issue
[19:44:56] *** Joins: RonWhoCares (~ronpi@104.158.0.91)
[19:47:33] <RonWhoCares> Line 29 of this pastebin works fine in PHP 7.3.  It returns the PostgreSQL sequence #.  When I try running this on PHP 8.0 it errors (error message on lines 5 to 10 of the pastebin ).  Does anyone have an idea why?  https://pastebin.com/nXqy6pG7
[19:52:09] *** Joins: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net)
[19:54:56] *** Joins: Cork (~Cork@user/cork)
[19:55:03] <RonWhoCares> Hi Cork
[19:58:20] *** Joins: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com)
[20:01:43] <edantes> #1 /vhosts/crons/theverseoftheday/daily_devotion/sitemap/the_verse_of_the_day_devotion.cron.php(33): sitemap_function->set_devotion_sitemap_include_date()
[20:01:44] <edantes> what is in here, line 33 of devotion.cron.php
[20:01:49] *** Quits: Cork (~Cork@user/cork) (Ping timeout: 240 seconds)
[20:02:50] <RonWhoCares> echo gmdate('Y-m-d H:i:s') . " Update votd_pi.reference: " . $value['reference'] . ": " . $sitemap_function->set_devotion_sitemap_include_date( $database['thev1010_theverseoftheday'] , $value['reference'] ) . "\r\n";
[20:03:34] <RonWhoCares> This 'echo' is going to a log file
[20:03:41] <Naktibalda> line 5 looks like 2 errors in 1
[20:04:17] <edantes> i don't see where you define lastval RonWhoCares
[20:04:37] *** Quits: jgrim6669 (~jgrim@d60-65-99-197.col.wideopenwest.com) (Quit: Ping timeout (120 seconds))
[20:04:38] <RonWhoCares> edantes: I didn't.  lastInsertId has always provided it
[20:04:41] <RonWhoCares> Naktibalda: You may be correct
[20:05:31] <Naktibalda> Ask #postgresql about object state error
[20:07:45] <RonWhoCares> I am wondering if I am some how missing a PHP extension with my PHP8.0 install
[20:08:17] <Naktibalda> you got that error from postgres, so you aren't
[20:14:07] *** Joins: Rockwood (~Rocky@user/rocky)
[20:14:29] <Naktibalda> RonWhoCares: I think that your problem is that you use the same placeholder twice.
[20:15:25] <RonWhoCares> Naktibalda: What do you mean
[20:15:38] <RonWhoCares> I am not seeing it
[20:15:42] *** Joins: harpia (~harpia@2804:2aec:205:1400:be2a:c8d5:4566:5dc8)
[20:16:09] <Naktibalda> , :lastmod , :lastmod
[20:16:27] <Naktibalda> this wouldn't work with mysql, I don't know if it works with postgres
[20:16:37] <RonWhoCares> OH
[20:16:50] <RonWhoCares> I just wonder if you are onto something
[20:17:05] <RonWhoCares> It worked just fine with PHP 7.3
[20:17:18] <RonWhoCares> But it is easy enough to change
[20:18:23] <Naktibalda> according to internet, your error happens because either your INSERT failed, or a sequence wasn't used for generating value of a field.
[20:22:52] <biberu> RonWhoCares: were you using emulated prepared queries with 7.3?
[20:22:57] <edantes> double paramerter doesn't work in 5.6
[20:23:25] <biberu> edantes: iirc it depends on whether emulation is used
[20:23:29] <RonWhoCares> All I did was change the cron job to run using PHP8.0
[20:24:17] <RonWhoCares> 0 * * * * root /usr/bin/php7.3    to    0 * * * * root /usr/bin/php8.0
[20:24:44] <biberu> :27 is very strange
[20:26:03] <RonWhoCares> I am just testing changing the :lastmod being used twice
[20:28:29] *** Quits: edantes (~edantes@93-39-122-66.ip75.fastwebnet.it) (Quit: Client closed)
[20:29:57] <RonWhoCares> Nope.  Changing the 2nd :lastmod to something else hasn't fixed it.  Let me see if the INSERT and UPDATE queries executed
[20:38:09] *** Quits: luigibu (~luigi@11.red-79-159-71.dynamicip.rima-tde.net) (Quit: WeeChat 3.4)
[20:41:57] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 240 seconds)
[20:43:49] <relipse> why is truncating a value considered an error in mariadb
[20:43:55] <relipse> that really makes me recode a bunch of stuff
[20:46:26] <AllenJB> Old versions of mysql / mariadb used to not warn you when truncating values, which is terrible idea, especially if it's something like a password hash that's getting truncated. Fortunately it's got a little more sane (by default) in recent versions.
[20:46:46] <biberu> relipse: your code shouldn't be attempting to store invalid values at all, so that's good
[20:47:15] <relipse> yeah i guess but it makes upgrading a pain
[20:47:30] <biberu> relipse: you told the db to hang on to the value 123456, but there was only room for 1234, that's clearly an error
[20:47:45] <relipse> yeah i got ya
[20:51:36] *** Quits: thiras (~thiras@user/thiras) (Remote host closed the connection)
[20:53:04] *** Joins: Rockwood (~Rocky@user/rocky)
[20:53:22] <RonWhoCares> Oh bother.  I found the problem
[20:53:52] <biberu> what was it?
[20:54:03] <RonWhoCares> I made a wrong assumption
[20:54:40] <biberu> about?
[20:54:44] <Rockwood> biberu, o/
[20:54:54] <biberu> hello Rockwood
[20:54:56] <RonWhoCares> It was "  $sitemap_reference = $dbh->lastInsertId();   "  that was erroring.  But in the context of an UPDATE query
[20:55:14] <biberu> oh, that'd explain it xD
[20:55:23] <RonWhoCares> oh wait
[20:55:35] <RonWhoCares> Who said it was a "2 in 1" error?
[20:55:42] <RonWhoCares> They were righty
[20:55:48] <RonWhoCares> The :lastmod was part of it
[20:55:55] <RonWhoCares> And then it showed the real error
[20:55:56] <RonWhoCares> :p
[20:56:33] <biberu> that was Naktibalda
[20:56:46] <RonWhoCares> She wins the Jeopardy "daily double"
[20:56:48] <RonWhoCares> hehehehe
[20:57:42] <RonWhoCares> The problem PDO is complaining about is not knowing the PostgreSQL sequence # for an UPDATE query
[20:59:07] *** Guest7170 is now known as xSavitar
[20:59:31] <RonWhoCares> https://stackoverflow.com/a/26499145/3123313
[20:59:48] <RonWhoCares> I am seeing that is how you get the value
[21:02:15] <biberu> don't you know it before updating? and do you need it afterwards?
[21:02:54] <RonWhoCares> biberu: No.  I am searching by the " date_reference " column
[21:03:21] *** Quits: Rockwood (~Rocky@user/rocky) (Ping timeout: 268 seconds)
[21:03:32] *** Quits: harpia (~harpia@2804:2aec:205:1400:be2a:c8d5:4566:5dc8) (Read error: Connection reset by peer)
[21:05:27] *** Joins: Rockwood (~Rocky@user/rocky)
[21:05:50] <biberu> while updating..?
[21:06:03] <RonWhoCares> Yes
[21:14:28] <RonWhoCares> I wonder if I should just SELECT the reference with a 2nd query
[21:14:35] <RonWhoCares> I don't know how to get the auto increment # any other way
[21:18:13] <tirnanog> I think postgresl has RETURNING. maybe that would help?
[21:20:23] <tirnanog> https://www.postgresql.org/docs/current/dml-returning.html
[21:31:37] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 240 seconds)
[21:31:52] *** Quits: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net) (Read error: Connection reset by peer)
[21:32:54] *** Joins: xep (~xep@76-210-4-7.lightspeed.sntcca.sbcglobal.net)
[21:34:06] *** Joins: BadAdviceCat (~BadAdvice@user/badadvicecat)
[21:34:17] *** Quits: Nekomander (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[21:35:16] *** Joins: binary01 (~binary01@cpe-74-71-15-170.nyc.res.rr.com)
[21:35:50] *** Joins: harpia (~harpia@2804:2aec:205:1400:be2a:c8d5:4566:5dc8)
[21:36:13] *** Joins: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr)
[21:36:14] *** Quits: fstd (~fstd@xdsl-84-44-230-164.nc.de) (Read error: Connection reset by peer)
[21:36:27] *** Joins: fstd (~fstd@xdsl-84-44-230-164.nc.de)
[21:48:30] *** Quits: skyroveRR (~skyroveRR@user/skyroverr) (Remote host closed the connection)
[21:48:50] *** Joins: skyroveRR (~skyroveRR@user/skyroverr)
[21:54:17] *** Quits: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[21:59:32] *** hh is now known as ge
[22:10:59] *** Quits: sambauer64 (~sambauer6@84.232.209.233) (Quit: Client closed)
[22:17:26] *** Joins: toastloop (toastloop@user/toastloop)
[22:19:26] *** Joins: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr)
[22:23:45] *** Quits: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[22:26:39] *** Quits: magla (~gelignite@55d4c16b.access.ecotel.net) (Quit: Stay safe!)
[22:32:09] *** Joins: sbrothy (~sbrothy@213.83.133.139)
[22:37:48] *** Joins: Nekomander (~BadAdvice@user/badadvicecat)
[22:38:11] *** Joins: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr)
[22:38:12] *** Quits: sbrothy (~sbrothy@213.83.133.139) (Quit: leaving)
[22:39:17] *** Quits: BadAdviceCat (~BadAdvice@user/badadvicecat) (Ping timeout: 240 seconds)
[22:40:45] *** Quits: Donitz (~Donitz@88-115-149-152.elisa-laajakaista.fi) (Ping timeout: 256 seconds)
[22:42:17] *** Quits: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr) (Ping timeout: 240 seconds)
[22:42:22] *** Joins: Donitz (~Donitz@88-115-149-215.elisa-laajakaista.fi)
[22:52:05] *** Joins: ThePhilgrim (~ThePhilgr@81-229-131-166-no257.tbcn.telia.com)
[22:52:05] *** Quits: Rockwood (~Rocky@user/rocky) (Quit: The Time is Over)
[22:52:23] *** Joins: stenno (~stenno@user/stenno)
[22:55:16] *** Joins: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr)
[23:00:01] *** Quits: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[23:12:59] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 252 seconds)
[23:13:45] *** Joins: stenno (~stenno@user/stenno)
[23:18:24] <relipse> since when have overlays/popups become the norm on websites
[23:18:31] <relipse> i find them utterly disgusting
[23:19:00] <TinoDidriksen> Depends on what they're used for.
[23:19:17] *** Quits: stenno (~stenno@user/stenno) (Ping timeout: 256 seconds)
[23:19:28] <AllenJB> Since people found they could do overlays / popups on websites.
[23:20:00] <TinoDidriksen> Modals have their uses, and they're often vastly more mobile friendly.
[23:22:16] *** Joins: stenno (~stenno@user/stenno)
[23:23:03] <biberu> 99% of modals are rather unfriendly
[23:24:16] *** Quits: Naktibalda (~Naktibald@88.135.22.17) (Quit: I was standing in the park wondering why frisbees got bigger as they get closer. Then it hit me.)
[23:25:12] <biberu> load site -> start reading while shitty frontend is still initializing -> HALT! WE ARE VIOLATING GDPR! CONSENT!
[23:29:24] *** Joins: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr)
[23:34:26] *** Quits: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr) (Ping timeout: 268 seconds)
[23:35:18] *** Quits: guido (~guido@host-79-36-252-78.retail.telecomitalia.it) (Read error: Connection reset by peer)
[23:35:32] *** Joins: guido (~guido@host-79-36-252-78.retail.telecomitalia.it)
[23:43:06] <Nekomander> biberu, so true, and so annoying. I hate modals.
[23:44:05] <Nekomander> I've used a scrim for navigation menu for mobile devices. Where hitting anywhere outside of the navigation menu closes it.
[23:44:51] <Nekomander> https://blog.codinghorror.com/unnecessary-dialogs-stopping-the-proceedings-with-idiocy/ <-- Modals looks like this to me.
[23:46:15] <Albright> AdGuard helps hide the majority of them.
[23:46:28] *** Joins: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr)
[23:46:39] <Albright> To the point that when I see one anymore, I check to see AdGuard hasn't crashed or something.
[23:48:27] <Albright> I know that paying for an ad-blocker seems heretical when there are open source ones, but it just works so well. It's worth it to me.
[23:50:41] *** Joins: magla (~gelignite@55d4c16b.access.ecotel.net)
[23:51:01] *** Quits: guenhael (~Thunderbi@arennes-655-1-140-85.w90-32.abo.wanadoo.fr) (Ping timeout: 256 seconds)
[23:55:40] *** Quits: ge (~g@37.214.57.116) (Remote host closed the connection)
