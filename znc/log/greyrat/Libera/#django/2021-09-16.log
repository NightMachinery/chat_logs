[00:01:14] *** Joins: Jhin (~Jhin@2a02:a317:e042:7a80:2d80:f417:6676:8feb)
[00:38:33] *** Joins: koo6 (~koo6@89-24-13-235.customers.tmcz.cz)
[00:40:52] *** Quits: pbrunier (~pbrunier@84-24-22-131.cable.dynamic.v4.ziggo.nl) (Remote host closed the connection)
[00:42:17] *** Quits: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net) (Ping timeout: 265 seconds)
[01:03:20] *** Joins: pipapipapipo (~peppbel@076-083-166-225.res.spectrum.com)
[01:08:02] <amrooting> please i need help with custom ModelForm for some reason error for one of two fields doesn't show in temaplate see last two lines https://dpaste.org/yM7e
[01:11:49] <CodenameTim> amrooting: I think this part of the docs is what you're looking for: https://docs.djangoproject.com/en/3.2/ref/forms/api/#django.forms.Form.non_field_errors
[01:12:46] *** Joins: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com)
[01:13:22] <CodenameTim> You can add those errors to the field using `Form.add_error` which is described a bit above that section in the link.
[01:13:42] <CodenameTim> Or display the non_field_errors in the template.
[01:13:58] *** Quits: django-ticketbot (~django-ti@django/ops/ticketbot) (Remote host closed the connection)
[01:14:13] *** Joins: django-ticketbot (~django-ti@django/ops/ticketbot)
[01:15:11] <LuxuryMode> I am using RunPython in a migration to retrieve an existing object, something like `for renewal in Renewal.objects.all(): unit = renewal.lease.unit` When I do this I get `AttributeError: 'Lease' object has no attribute 'unit_id'` and when I print the `__dict__` of the object, I can see there is indeed no key for unit. But, looking at this very object in the DB directly, I see there is a key to a unit. Any ideas on how to resolve
[01:15:11] <LuxuryMode> this?
[01:17:13] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 252 seconds)
[01:18:35] <CodenameTim> LuxuryMode: Are you using apps.get_model() to get the Renewal model?
[01:18:53] <LuxuryMode> that's right
[01:18:56] *** Joins: fikran (~fikran@user/fikran)
[01:19:11] <LuxuryMode> I think I had at one point tried direct importing, but then migrations in test DB won't work
[01:19:28] <LuxuryMode> so yeah I am using `apps.get_model(app_label='renewals', model_name='Renewal')`
[01:19:40] <LuxuryMode> Does that somehow not enable django to find the related model?
[01:19:54] <CodenameTim> I wanted to eliminate that as a possibility.
[01:21:48] <LuxuryMode> and renewal had FK to lease from the very beginning and lease itself is an unmanaged table so there's no historical model for that really
[01:22:28] <LuxuryMode> CodenameTim: suggesting I should try direct import to see if that works?
[01:22:41] <CodenameTim> LuxuryMode: Are any of these models in another app?
[01:23:04] <CodenameTim> No, definitely don't import them directly. You're handling that correctly.
[01:23:05] <LuxuryMode> yeah renewal is in "renewals" app and both lease and unit are in another
[01:23:08] <LuxuryMode> gotcha
[01:23:47] <CodenameTim> Do you have those other apps in the migration's dependencies? Though I'm pretty sure I've traversed relationships without that, but it's worth a shot.
[01:24:02] <CodenameTim> https://docs.djangoproject.com/en/3.2/topics/migrations/#accessing-models-from-other-apps
[01:24:49] <LuxuryMode> good question
[01:25:04] <LuxuryMode> this other app does not itself have any migrations though
[01:25:14] <LuxuryMode> Can it still be depended on even if that's the case?
[01:25:23] <LuxuryMode> all the models in the other app are unmanaged
[01:25:27] <CodenameTim> What migration created those models?
[01:25:28] <CodenameTim> Oh
[01:26:37] <LuxuryMode> actually in the first migration in this renewals app, there is `('transactional', '__first__'),` where `transactional` is the app with the Lease and Unit models
[01:26:51] <CodenameTim> Looks like that's a bug in Django, but there seems to be a workaround: https://code.djangoproject.com/ticket/29177
[01:27:34] <CodenameTim> What's happening is that the migration systems app state (might be project state) version of the model doesn't include the foreign key field.
[01:27:39] *** Quits: oddish (~oddish@2a01:4f8:1c1c:a9da::1) (Quit: nyaa~)
[01:27:45] <LuxuryMode> oh wow, good find
[01:29:49] <LuxuryMode> yikes so the workaround is to mark those models as managed, makemigrations for those models, manually switched all 'managed': True models in the migration to 'managed': False then switch back to managed = False?
[01:29:50] <CodenameTim> The problem with the proposed workaround is that those migration files won't stay up to date with the actual database.
[01:29:57] <LuxuryMode> right
[01:30:09] <CodenameTim> Correct. It wants the migration files to exist, though they wouldn't be used.
[01:31:07] <LuxuryMode> yeah this seems dirty
[01:31:10] <CodenameTim> The other solution is to write a RunSQL migration. That should sidestep this a little nicer.
[01:31:25] <CodenameTim> But depending on your data migration, that could be ugly.
[01:31:38] <LuxuryMode> yeah i think RunSQL is a much better idea
[01:31:41] <LuxuryMode> shouldn't be too bad here
[01:31:54] <CodenameTim> Another thing I've done when I've had massive data migrations is to do the data migration outside of the data migration system itself.
[01:33:18] <LuxuryMode> right
[01:33:20] <CodenameTim> Meaning running a shell script that does everything. The problem with it was that either the script is on the PR or committed temporarily until it's been run on every machine.
[01:33:55] <CodenameTim> Any way, good luck. If you find an elegant solution, I'd be curious to know what it is.
[01:34:13] <LuxuryMode> Thanks so much for your help, really really appreciate it
[01:34:28] <LuxuryMode> RunSQL seems promising. Glad (well, not glad) to see this is a known bug
[01:35:08] <CodenameTim> You're welcome.
[01:35:13] *** Joins: oddish (~oddish@2a01:4f8:1c1c:a9da::1)
[01:35:38] *** Quits: Jhin (~Jhin@2a02:a317:e042:7a80:2d80:f417:6676:8feb) (Quit: Client closed)
[01:38:00] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[01:38:00] *** ChanServ sets mode: +v EvilDMP
[01:46:27] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:05:04] *** Joins: cliluw (~cliluw@47.147.80.149)
[02:07:20] *** Joins: explore (uid233125@id-233125.hampstead.irccloud.com)
[02:11:34] *** Quits: CodenameTim (~CodenameT@static-68-235-44-42.cust.tzulo.com) (Ping timeout: 268 seconds)
[02:19:35] *** Joins: fortuno51 (~fortuno51@172.83.40.74)
[02:20:09] *** fortuno51 is now known as ClubPenguin38383
[02:21:36] *** Parts: ClubPenguin38383 (~fortuno51@172.83.40.74) ()
[02:58:29] *** Joins: bitdex (~bitdex@gateway/tor-sasl/bitdex)
[03:01:10] *** Quits: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[03:26:48] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 268 seconds)
[03:28:19] *** Joins: fikran (~fikran@user/fikran)
[03:28:25] *** Quits: TranquilEcho (~grom@user/tranquilecho) (Quit: WeeChat 2.8)
[03:29:01] *** Quits: Xof (~Xof@157-131-136-66.dedicated.static.sonic.net) (Quit: Bye.)
[03:33:36] *** Quits: askolsam_ (~askolsam@kamikaze.kaaosunlimited.fi) (Remote host closed the connection)
[03:34:32] *** Joins: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net)
[03:48:01] *** Joins: bambanxx (~bambanx@181-163-37-220.baf.movistar.cl)
[03:49:27] <pipapipapipo> do people use docker in development of django applications? In that case, does docker replace the virtual environment (pipenv)?
[03:54:09] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Ping timeout: 268 seconds)
[04:09:32] *** Joins: PantelicGR (~PantelicG@user/pantelicgr)
[04:12:32] *** Quits: LuxuryMode (uid91005@id-91005.ilkley.irccloud.com) (Quit: Connection closed for inactivity)
[04:12:36] *** Joins: shangxiao (~davids@124.187.193.187)
[04:17:00] *** Quits: explore (uid233125@id-233125.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[04:21:41] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Quit: Thanks, see you later.)
[04:28:41] *** Quits: PantelicGR (~PantelicG@user/pantelicgr) (Quit: Leaving)
[04:40:30] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[04:52:45] *** Quits: bambanxx (~bambanx@181-163-37-220.baf.movistar.cl) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[05:04:21] *** Quits: cliluw (~cliluw@47.147.80.149) (Quit: Leaving)
[05:15:18] *** Joins: dez (uid92154@user/dez)
[05:15:29] *** Quits: cmbengue (~Thunderbi@207.191.249.160) (Quit: Thanks, see you later.)
[05:24:10] *** Quits: koo6 (~koo6@89-24-13-235.customers.tmcz.cz) (Ping timeout: 252 seconds)
[05:30:36] *** Quits: rpkilby_ (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[05:35:40] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 240 seconds)
[05:37:59] *** Joins: fikran (~fikran@user/fikran)
[05:45:43] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[05:51:53] <FunkyBob> pipapipapipo: yes and no
[05:52:12] <FunkyBob> yes, some people do use it in dev and production
[05:52:30] <FunkyBob> no, it doesn't necessarily replace venve, as you likely still want to isolate your packages from the 'system' pacakges
[06:00:14] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[06:02:19] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[06:10:54] *** Joins: dre (~dre@2001:8003:c932:c301:3743:ee79:8c00:65b1)
[06:11:23] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[06:14:36] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[06:57:31] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:00:23] *** Quits: pipapipapipo (~peppbel@076-083-166-225.res.spectrum.com) (Ping timeout: 268 seconds)
[07:10:02] *** Joins: bambanxx (~bambanx@181-163-37-220.baf.movistar.cl)
[07:21:15] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[07:21:51] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[07:33:03] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[07:33:41] *** Quits: bambanxx (~bambanx@181-163-37-220.baf.movistar.cl) (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
[07:46:01] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 268 seconds)
[07:47:50] *** Joins: fikran (~fikran@user/fikran)
[07:52:53] *** Quits: shangxiao (~davids@124.187.193.187) (Read error: Connection reset by peer)
[07:55:11] *** Joins: shangxiao (~davids@124.187.193.187)
[07:55:59] *** Joins: cellofellow (~user@166.70.50.58)
[07:58:44] *** Quits: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net) (Ping timeout: 265 seconds)
[08:03:36] *** Joins: Safa_[A_Boy] (~Safa@89.148.47.179)
[08:04:38] <Safa_[A_Boy]> Hi. I'm a bit lost on all JWT session httponly etc stuff. Can someone tell me the defacto way of how to do this stateless, to support both web and mobile applications?
[08:05:26] *** Joins: vdamewood (~vdamewood@fedora/vdamewood)
[08:11:26] <FunkyBob> why would you need JWT to support mobile?
[08:11:43] <FunkyBob> are you using a 3rd party auth service?
[08:11:46] <FunkyBob> Safa_[A_Boy]: ?
[08:12:17] <Safa_[A_Boy]> No, django only
[08:14:32] <FunkyBob> so why do you need tokens?
[08:14:46] *** Joins: vinleod (~vdamewood@fedora/vdamewood)
[08:15:35] <FunkyBob> what problem are they solving?
[08:15:59] <Safa_[A_Boy]> How to do authentication in mobile application?
[08:16:12] <FunkyBob> same way you do on a web app
[08:16:14] *** Quits: vdamewood (~vdamewood@fedora/vdamewood) (Ping timeout: 268 seconds)
[08:16:24] <FunkyBob> post the credentials
[08:16:28] *** vinleod is now known as vdamewood
[08:18:49] <Safa_[A_Boy]> Any resource on that? :)
[08:19:14] <FunkyBob> other than the django docs on using auth?
[08:19:17] <FunkyBob> what are you missing?
[08:19:31] <Safa_[A_Boy]> Cookies are for web browsers, not applications
[08:19:44] <FunkyBob> where did you learn that bullshit?
[08:19:59] <Safa_[A_Boy]> Around the web :D
[08:20:07] <FunkyBob> Sturgeon's Law
[08:20:13] <FunkyBob> https://django-nap.readthedocs.io/en/latest/examples.html#case-2-login-view
[08:21:17] <FunkyBob> https://blog.tinbrain.net/blog/session-auth-spa.html
[08:21:39] <FunkyBob> cookies are part of HTTP
[08:30:46] *** Quits: cellofellow (~user@166.70.50.58) (Remote host closed the connection)
[08:49:20] <Safa_[A_Boy]> FunkyBob, I shall use JWT only for direct API calls I provide then, right?
[08:51:57] <FunkyBob> why?
[08:53:23] <FunkyBob> who is making these "direct API calls"?
[08:53:35] <FunkyBob> how does it differ from your web app and mobile app making those calls?
[08:54:27] <FunkyBob> there is no single right answer, so it helps to understand the use cases
[09:08:23] <Safa_[A_Boy]> FunkyBob, I provide clients ways to call the APIs directly from standalone scripts
[09:08:36] <Safa_[A_Boy]> To pull data, push data, etc
[09:09:29] <FunkyBob> ok... in that case you might want to consider tokens... when delegating access
[09:09:50] <FunkyBob> just be very wary of using JWT
[09:09:55] <FunkyBob> it has a LOT of sharp edges
[09:13:43] *** Quits: dez (uid92154@user/dez) (Quit: Connection closed for inactivity)
[09:13:59] *** Joins: djapo (~archangel@user/djapo)
[09:18:02] *** Joins: noyb (~noyb@user/noyb)
[09:22:30] <shangxiao> Are there any techniques for isolation of css within template partials? Or am I being overly ambitious in trying to make them into web components?
[09:23:48] <shangxiao> (like shadow dom)
[09:26:23] <shangxiao> I kind of wish web components were more mature, ie wrt templating.
[09:27:09] *** Joins: audio (~audio@2603-8081-1800-6a6f-2cf1-dd87-90f0-3744.res6.spectrum.com)
[09:31:05] *** Quits: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com) (Quit: Bye...)
[09:47:37] <FunkyBob> shangxiao: there's a lot of thiings iit'd be nice if theyt supported
[09:48:09] <shangxiao> one can dream
[09:55:13] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 265 seconds)
[09:57:12] *** Joins: fikran (~fikran@user/fikran)
[10:26:37] *** Quits: Safa_[A_Boy] (~Safa@89.148.47.179) (Quit: Leaving)
[10:34:44] *** Parts: hemebond (~james@240b:12:12e2:f00:5604:a6ff:fe2c:50df) ()
[10:38:37] *** Quits: BinarySavior (~BinarySav@user/binarysavior) (Quit: BinarySavior has dropped the mic)
[10:52:41] *** Joins: VaniaPy (~VaniaPy@adsl-100.176.58.192.tellas.gr)
[10:53:28] *** Joins: BinarySavior (~BinarySav@user/binarysavior)
[11:22:36] *** Joins: thiras (~thiras@user/thiras)
[11:22:40] <serafeim> this thing here: https://docs.djangoproject.com/en/dev/ref/contrib/admin/#reversing-admin-urls is probably what i can never remember and always have to search it and lose like 5 minutes when i need it
[11:31:17] *** Joins: frankie (~frankie@net-109-115-230-26.cust.vodafonedsl.it)
[11:32:48] *** Parts: VaniaPy (~VaniaPy@adsl-100.176.58.192.tellas.gr) ()
[11:50:30] <shangxiao> :)
[12:05:01] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 268 seconds)
[12:06:34] *** Joins: fikran (~fikran@user/fikran)
[12:17:29] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[12:17:29] *** ChanServ sets mode: +v EvilDMP
[12:29:11] *** Quits: djapo (~archangel@user/djapo) (Remote host closed the connection)
[12:31:35] *** Joins: djapo (~archangel@user/djapo)
[12:36:43] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:42:12] *** Quits: thiras (~thiras@user/thiras) (Read error: Connection reset by peer)
[12:42:31] *** Joins: thiras (~thiras@user/thiras)
[12:44:29] *** Quits: audio (~audio@2603-8081-1800-6a6f-2cf1-dd87-90f0-3744.res6.spectrum.com) (Ping timeout: 268 seconds)
[12:52:50] *** Quits: frankie (~frankie@net-109-115-230-26.cust.vodafonedsl.it) (Remote host closed the connection)
[12:52:58] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[13:01:26] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[13:01:26] *** ChanServ sets mode: +v EvilDMP
[13:04:41] *** Quits: djapo (~archangel@user/djapo) (Ping timeout: 265 seconds)
[13:07:04] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:18:55] *** Joins: pipapipapipo (~peppbel@076-083-166-225.res.spectrum.com)
[13:21:01] *** Joins: Atque (~Atque@user/atque)
[13:23:07] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[13:30:25] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[13:34:20] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi)
[13:49:21] *** Joins: piscvau (~odile@alyon-653-1-142-5.w90-42.abo.wanadoo.fr)
[14:10:14] *** Quits: Kalov (~Thunderbi@179.56.68.20) (Quit: Kalov)
[14:11:33] <piscvau> I am doing full stack web development. I am looking for an open source tool kind of wysiwig editor to modify the HTML template and include css bootstrap and so on. any suggestion?
[14:14:17] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 265 seconds)
[14:15:56] *** Joins: fikran (~fikran@user/fikran)
[14:16:59] <dodo> piscvau: umm. what? wysiwyg for html never really worked
[14:19:13] <piscvau> OK. You mean that there is no alternativ to computing by hand the padding and margin for a css boxes for example
[14:19:45] <dodo> do you want to make layouts with that tool?
[14:19:51] <dodo> or what's the goal?
[14:20:28] <piscvau> yes I want to make layout of html templates generated by django with this tool
[14:21:08] <dodo> do you know that you can edit css styles in the browser directly?
[14:22:55] <piscvau> yes I know but I cannot do drag and drop type of things canI?
[14:24:25] <FunkyBob> what a horrifying concept
[14:24:42] <FunkyBob> in your drag'n'drop world... how do you deal with different screen sizes?
[14:39:13] <shangxiao> FunkyBob: well that's obvious, you drag the phone icon onto the editor </facetious>
[14:39:48] <shangxiao> FunkyBob: do you still use direnv & vim?  I just discovered direnv supports setting local vimrc: https://direnv.net/man/direnv-stdlib.1.html#codeuse-vim-ltvimrcfilegtcode
[14:39:55] <shangxiao> I thought that was rather neat
[14:42:00] <shangxiao> piscvau: to echo what the others have said, wysiwyg editors for html was only a thing way back in the early days of web when things were a *lot* simpler
[14:43:18] <FunkyBob> shangxiao: I don't htink I ever used direnv
[14:43:46] <FunkyBob> there are some wysiwyg page builder tools now, but t hey only work for some very restrictive cases
[14:48:28] <shangxiao> FunkyBob: hmm I always thought you were the one who introduced us to it at CC... we all started using it around 2016
[14:50:17] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi) (Read error: Connection reset by peer)
[14:50:39] <piscvau> @funkybob what pagebuilder are you thinking about?
[14:51:52] <FunkyBob> aiui products like wix and so on have them
[14:52:19] <FunkyBob> I had some plans for one myself, for a cms I was building... but it would depend on all the widgets being well built and built for each other
[14:52:31] <FunkyBob> and quite constricted
[14:59:33] *** Quits: Atque (~Atque@user/atque) (Quit: ...)
[15:00:20] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi)
[15:07:45] *** Joins: Grimsby (~Guest26@27.109-247-34.customer.lyse.net)
[15:10:28] <Grimsby> Is it possible to prefetch reverse GenericRelation (I have Contact:orders = GenericRelation('hardware.Order', object_id_field='ordered_by_object_id', content_type_field='ordered_by_content_type', related_query_name='ordered_by_contact') - and corresponding GenericForeignKey setup in Order). When running
[15:10:29] <Grimsby> Order.objects.prefetch_related('ordere_by_contact') I get AttributeError: 'Contact' object has no attribute 'ordered_by_object_id'
[15:12:03] *** Joins: explore (uid233125@id-233125.hampstead.irccloud.com)
[15:15:09] <Grimsby> Code to illustrate: https://dpaste.org/JPNO
[15:15:56] *** Quits: thiras (~thiras@user/thiras) (Read error: Connection reset by peer)
[15:16:31] *** Joins: thiras (~thiras@user/thiras)
[15:20:31] *** Quits: piscvau (~odile@alyon-653-1-142-5.w90-42.abo.wanadoo.fr) (Ping timeout: 252 seconds)
[15:22:24] *** Joins: dez (uid92154@user/dez)
[15:26:11] *** Quits: Grimsby (~Guest26@27.109-247-34.customer.lyse.net) (Quit: Client closed)
[15:44:02] *** Joins: spuc (~spuc@ns346943.ip-5-135-160.eu)
[15:44:44] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi) (Read error: Connection reset by peer)
[15:45:30] *** Joins: pgcd (~pgcd@ip5f5bf293.dynamic.kabel-deutschland.de)
[15:45:33] <pgcd> hey all
[15:46:33] <spuc> Using django 2.2 I'm trying to add a non-field error to a modelformset using modelformset_factory. I have tried using the property `error_messages`, but I cannot find any documentation on how it works.
[15:47:55] <pgcd> I'm stumped trying to figure out how to build a queryset: Say I have an Author model, and there are some Books for each author. How do I annotate the average rating (say) for each Author, but only for the last 3 books they published?
[15:49:10] <pgcd> I tried with subqueries but I end up with nested subqueries and the OuterRef are all messed up, so I was looking at Window but I'm not entirely sure they're fit for the purpose
[15:53:50] <pgcd> spuc: try with self.add_error()
[15:57:47] *** Joins: VaniaPy (~VaniaPy@adsl-100.176.58.192.tellas.gr)
[15:57:54] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi)
[15:58:35] <VaniaPy> hello, how can i post data dynamically out of the views in django? the post request should be done in a separate file
[15:58:45] <VaniaPy> i na  separate function
[16:00:30] <pgcd> VaniaPy you can add a separate file with your function, and then add the url you want to your urls.py with that new file/function path
[16:01:17] <VaniaPy> pgcd this function should be called a views function that has its own router
[16:02:35] <pgcd> django is the router, so if you add the url to your urls.py you can make it point to whatever function you want
[16:23:07] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 252 seconds)
[16:25:18] *** Joins: fikran (~fikran@user/fikran)
[16:29:08] *** Joins: sed (~sed@pool-100-7-38-116.rcmdva.fios.verizon.net)
[16:29:46] *** Joins: ciurca (~Thunderbi@81.18.91.115)
[16:30:23] *** Quits: ciurca (~Thunderbi@81.18.91.115) (Client Quit)
[16:38:03] <shangxiao> pgcd: a subquery should be ok for that
[16:39:16] <pgcd> shangxiao yes, i think i found how to do it (I had to annotate the outer subquery with the OuterRef value, and then use the annotation in the inner subquery as a target for OuterRef, but the output SQL seems fine)
[16:40:40] *** Joins: ciurca (~Thunderbi@81.18.91.115)
[16:43:21] *** Joins: cmbengue (~Thunderbi@207.191.249.160)
[17:04:35] *** Quits: Haudegen (~quassel@178.115.237.87.static.drei.at) (Quit: Bin weg.)
[17:05:42] <shangxiao> Chapter 1 of my "Stupid Django Tricks": https://github.com/shangxiao/stupid-django-tricks/tree/master/lookup_expr  ... more to come! xD
[17:05:58] *** Quits: ciurca (~Thunderbi@81.18.91.115) (Ping timeout: 252 seconds)
[17:05:59] *** Quits: bitdex (~bitdex@gateway/tor-sasl/bitdex) (Quit: = "")
[17:07:23] *** Joins: koo6 (~koo6@89-24-13-235.customers.tmcz.cz)
[17:12:39] <pgcd> shangxiao that's a clever trick =)
[17:12:51] <shangxiao> ;)
[17:25:25] *** Joins: Harlin (~DonQixote@2603:300b:663:e800:ed29:6f25:3c3f:341e)
[17:36:35] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi) (Read error: Connection reset by peer)
[17:40:44] *** Joins: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi)
[17:41:11] *** Quits: shangxiao (~davids@124.187.193.187) (Quit: WeeChat 3.2.1)
[17:41:48] *** Joins: mattil (~mattil@d4h4qyprzbvy2lcn30z-4.rev.dnainternet.fi)
[17:45:31] *** Joins: CodenameTim (~CodenameT@66.63.167.106)
[17:46:50] *** Quits: mattil (~mattil@d4h4qyprzbvy2lcn30z-4.rev.dnainternet.fi) (Remote host closed the connection)
[17:54:32] *** Joins: mattil (~mattil@d4h4qyprzbvy2lcn30z-4.rev.dnainternet.fi)
[18:01:36] *** Joins: Diemuzi (~Diemuzi@ip68-106-203-17.pn.at.cox.net)
[18:02:36] *** Quits: thiras (~thiras@user/thiras) (Read error: Connection reset by peer)
[18:07:09] *** Quits: mattil (~mattil@d4h4qyprzbvy2lcn30z-4.rev.dnainternet.fi) (Remote host closed the connection)
[18:09:24] *** Quits: DnzAtWrk (~DnzAtWrk@mobile-access-6df0f7-64.dhcp.inet.fi) (Quit: Leaving)
[18:09:44] *** Quits: pgcd (~pgcd@ip5f5bf293.dynamic.kabel-deutschland.de) (Quit: Client closed)
[18:16:04] *** Joins: slav0nic (slav0nic@python.su)
[18:20:03] *** Joins: piscvau (~odile@alyon-653-1-142-5.w90-42.abo.wanadoo.fr)
[18:20:06] <piscvau> in response to a get_request, I call render (request, template, instance_of_object_in a dictionnary). If I do not want to manually write a html template from scratch, should I create a form and bound the instance data to the form.
[18:22:46] *** Joins: mattil (~mattil@d4h4qyprzbvy2lcn30z-4.rev.dnainternet.fi)
[18:27:31] *** Quits: mattil (~mattil@d4h4qyprzbvy2lcn30z-4.rev.dnainternet.fi) (Ping timeout: 252 seconds)
[18:32:54] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 268 seconds)
[18:34:33] *** Joins: fikran (~fikran@user/fikran)
[18:41:21] *** Joins: Penagwin (~Penagwin@207.148.13.191)
[18:42:16] <Penagwin> Hello, I'm looking to keep a persistent pool of TCP connections open to a server, and I don't know how to go about this, I'm using django and gunicorn
[18:43:24] *** Joins: dkliban (~dkliban@nat-pool-rdu-t.redhat.com)
[18:43:40] *** Quits: koo6 (~koo6@89-24-13-235.customers.tmcz.cz) (Ping timeout: 240 seconds)
[18:53:13] *** Joins: thiras (~thiras@user/thiras)
[18:58:18] *** Joins: Xaldafax (~xaldafax@cpe-198-72-160-101.socal.res.rr.com)
[19:03:12] <CodenameTim> piscvau, what are you looking to return in the response?
[19:07:54] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[19:08:30] *** Quits: jess (~jess@libera/staff/jess) ()
[19:09:25] *** Joins: ironbeard (~geoffrey@130-45-89-178.dyn.grandenetworks.net)
[19:12:17] <ironbeard> I was under the impression that you could specify FK fields in a `update_or_create` using double underscores.. something like `Album.objects.update_or_create(artist__name='Beatles', title='White Album', defaults={'sales': 1000})`, but that doesn't seem to be working in 3.2. Was this never supported and I'm just mistaken?
[19:19:38] <CodenameTim> ironbeard, I don't believe that was supported. If the artist instance didn't exist, it would need to populate the other fields beyond the name field and that seems like some neat functionality that I don't think exists outside of bulk creating a many to many relationship with a `through` model.
[19:20:14] *** Quits: pipapipapipo (~peppbel@076-083-166-225.res.spectrum.com) (Remote host closed the connection)
[19:20:18] <ironbeard> Oh, duh. Good point about having to create the Artist instance
[19:20:43] <ironbeard> Hmm, well good to know. Thanks @CodenameTim :)
[19:25:21] <CodenameTim> You're welcome
[19:31:51] *** Quits: explore (uid233125@id-233125.hampstead.irccloud.com) (Quit: Connection closed for inactivity)
[19:33:57] *** Quits: ironbeard (~geoffrey@130-45-89-178.dyn.grandenetworks.net) (Ping timeout: 268 seconds)
[19:41:30] *** Joins: markb1 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77)
[19:43:25] *** Joins: markb181 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77)
[19:44:18] *** Quits: markb181 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77) (Client Quit)
[19:44:38] *** Joins: markb164 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77)
[19:46:11] *** Quits: markb1 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77) (Ping timeout: 256 seconds)
[19:50:25] *** Quits: thiras (~thiras@user/thiras) (Ping timeout: 252 seconds)
[19:53:22] *** markb164 is now known as markb1
[20:16:12] *** Quits: VaniaPy (~VaniaPy@adsl-100.176.58.192.tellas.gr) (Quit: Connection closed)
[20:38:35] *** Quits: markb1 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77) (Quit: Client closed)
[20:39:10] *** Joins: markb1 (~markb1@2600:1700:eb40:7ecf:def0:6996:2bb9:77)
[20:42:11] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 268 seconds)
[20:43:56] *** Joins: fikran (~fikran@user/fikran)
[20:52:46] *** Joins: amrooting1 (amrooting@gateway/vpn/protonvpn/amrooting)
[20:53:27] *** Quits: amrooting (amrooting@gateway/vpn/protonvpn/amrooting) (Remote host closed the connection)
[20:59:44] *** Joins: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl)
[21:05:36] *** Quits: iomari891 (~iomari891@105.112.138.38) (Ping timeout: 265 seconds)
[21:13:37] *** Quits: amrooting1 (amrooting@gateway/vpn/protonvpn/amrooting) (Quit: Leaving)
[21:34:22] *** Quits: CodenameTim (~CodenameT@66.63.167.106) (Ping timeout: 252 seconds)
[21:37:54] *** Joins: rob4226 (~Thunderbi@136.144.35.61)
[21:48:37] *** Joins: Haudegen (~quassel@178.115.237.87.static.drei.at)
[21:51:41] *** Joins: cellofellow (~user@166.70.50.58)
[21:55:29] *** Joins: iomari891 (~iomari891@105.112.138.38)
[22:07:35] *** Joins: Ergo^ (~ergo@91.238.59.144)
[22:09:30] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Remote host closed the connection)
[22:10:07] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[22:10:49] *** Quits: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl) (Ping timeout: 252 seconds)
[22:11:07] *** Quits: bss (bss@rie.incorporeal.org) (Quit: brb)
[22:12:19] *** Joins: bss (bss@rie.incorporeal.org)
[22:13:24] *** Joins: knbk (~quassel@84-24-92-123.cable.dynamic.v4.ziggo.nl)
[22:14:31] *** Quits: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net) (Ping timeout: 252 seconds)
[22:16:07] *** Joins: vandim (~vandim@93-78-13-165.dne.volia.net)
[22:21:53] <frozensoil> anyone is familiar with etags? if im using drf, should the front-end app send me the etag header when sending in a GET request
[22:27:38] *** Quits: vandim (~vandim@93-78-13-165.dne.volia.net) (Ping timeout: 268 seconds)
[22:29:30] *** Joins: rpkilby (~rpkilby@c-24-20-208-106.hsd1.or.comcast.net)
[22:36:57] *** Quits: llanhmod (~developer@user/domhnall/x-2887755) (Ping timeout: 265 seconds)
[22:38:27] <knbk> frozensoil: 'ETag' is the response header. For GET requests, you would typically include the etag in the 'If-None-Match' header so that the server can return a 304 when the response hasn't changed
[22:39:05] *** Joins: llanhmod (~developer@user/domhnall/x-2887755)
[22:41:11] <frozensoil> knbk: cool, thank you for the precisions, I am getting a strange race condition between a patch request on a model in django and a get request coming in from the front-end
[22:42:34] <frozensoil> basically I am calculating an e-tag for a mondel on the modified property (timestamp), sending it back to the front-end, which requests the same model again - however my patch is not "completed" I guess
[22:43:05] <frozensoil> like it hasn't had the chance to trigger the commit on the db, and the get requests comes in too fast, hence the same etag is evaluated
[22:44:38] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[22:44:38] *** ChanServ sets mode: +v EvilDMP
[22:46:29] *** Quits: chowmeined (~chowmeine@user/chowmeined) (Quit: Leaving)
[22:47:22] *** Joins: CodenameTim (~CodenameT@66.63.167.122)
[22:48:30] *** Joins: vandim (~vandim@93-78-13-165.dne.volia.net)
[22:48:42] <vandim> Hi all
[22:49:02] *** Quits: llanhmod (~developer@user/domhnall/x-2887755) (Ping timeout: 265 seconds)
[22:49:13] <vandim> Тут есть кто сможет меня понять и простить?)
[22:51:25] *** Quits: fikran (~fikran@user/fikran) (Ping timeout: 252 seconds)
[22:52:12] <CodenameTim> vandim: Я могу попробовать использовать Google Translate.
[22:52:49] <vandim> ок
[22:53:18] *** Joins: fikran (~fikran@user/fikran)
[22:53:51] <vandim> столкнулся с такой ошибкой - django.db.utils.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server versi    on for the right syntax to use near 'UNION (SELECT `main_comment`.`id`, `main_comment`.`comment_text`, `main_comment`' at line 1")
[22:54:21] *** Quits: piscvau (~odile@alyon-653-1-142-5.w90-42.abo.wanadoo.fr) (Quit: Leaving)
[22:54:31] <vandim> как эту ошибку можно исправить?
[22:55:21] <CodenameTim> Поделитесь кодом QuerySet, используя http://dpaste.de/
[22:55:52] <vandim> code views.py?
[22:56:04] *** Joins: thiras (~thiras@user/thiras)
[22:56:05] <CodenameTim> Yes
[22:56:43] <CodenameTim> The part that uses Model.objects.filter().union(OtherModel.objects.filter())
[22:57:32] <vandim> https://dpaste.org/sF6a
[22:58:24] <CodenameTim> Можете ли вы поделиться трассировкой стека?
[22:59:57] <vandim> Может тут дело в кавычках?
[23:01:14] <CodenameTim> Извините, я ищу полную информацию об ошибке, которая показывает, какие строки кода приводят к ошибке. Я хочу убедиться, что мы обращаемся к правильной строке кода.
[23:02:10] <vandim> как выполнить трасировку стека?
[23:02:42] <CodenameTim> Он должен быть напечатан в терминале / консоли, где вы запускали `manage.py runserver`
[23:02:55] *** Quits: slav0nic (slav0nic@python.su) (Remote host closed the connection)
[23:03:16] <vandim> 1 min
[23:04:22] *** Joins: node1 (~node1@user/node1)
[23:04:27] <CodenameTim> Вот одна догадка. Удаление `.order_by ()` перед вызовом `.union ()` согласно https://docs.djangoproject.com/en/3.2/ref/models/querysets/#union (нижний раздел)
[23:04:32] <CodenameTim> https://dpaste.org/dPw6#L13,16,24
[23:05:32] *** Joins: pbrunier (~pbrunier@84-24-22-131.cable.dynamic.v4.ziggo.nl)
[23:07:30] <vandim> https://dpaste.org/SZuR
[23:08:38] <CodenameTim> https://dpaste.org/wFAG#L13,16,24 Это подход, который показывает, как вы можете просматривать отношения в одном QuerySet, избегая вызовов .union (). Это также быстрее, потому что он выполняет только 2 запроса к БД вместо многих при оценке "правдивости".
[23:09:24] <CodenameTim> Это другая ошибка, чем ошибка базы данных, которой вы поделились ранее.
[23:10:42] <CodenameTim> Чтобы устранить ошибку разрешения, вам необходимо предоставить права на запись в файл журнала или каталог учетной записи пользователя, под которой работает сервер.
[23:12:47] <vandim> ок, Thank You.
[23:13:05] <CodenameTim> Пожалуйста
[23:13:11] <CodenameTim> Удачи!
[23:13:59] <vandim> Удача по нашу сторону границы не живет)
[23:20:31] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:46:35] *** Joins: EvilDMP (~textual@django/moderator/EvilDMP)
[23:46:36] *** ChanServ sets mode: +v EvilDMP
[23:57:37] *** Quits: node1 (~node1@user/node1) (Quit: Leaving)
[23:58:11] *** Quits: EvilDMP (~textual@django/moderator/EvilDMP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
